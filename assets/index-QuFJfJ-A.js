var uF=Object.defineProperty;var hF=(n,t,e)=>t in n?uF(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var lt=(n,t,e)=>hF(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();function P2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xx={exports:{}},Jd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD;function fF(){if(WD)return Jd;WD=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Jd.Fragment=t,Jd.jsx=e,Jd.jsxs=e,Jd}var $D;function dF(){return $D||($D=1,Xx.exports=fF()),Xx.exports}var C=dF(),Qx={exports:{}},tp={},Zx={exports:{}},Jx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD;function pF(){return qD||(qD=1,function(n){function t(Y,at){var vt=Y.length;Y.push(at);t:for(;0<vt;){var Z=vt-1>>>1,F=Y[Z];if(0<i(F,at))Y[Z]=at,Y[vt]=F,vt=Z;else break t}}function e(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var at=Y[0],vt=Y.pop();if(vt!==at){Y[0]=vt;t:for(var Z=0,F=Y.length,$=F>>>1;Z<$;){var ot=2*(Z+1)-1,tt=Y[ot],gt=ot+1,mt=Y[gt];if(0>i(tt,vt))gt<F&&0>i(mt,tt)?(Y[Z]=mt,Y[gt]=vt,Z=gt):(Y[Z]=tt,Y[ot]=vt,Z=ot);else if(gt<F&&0>i(mt,vt))Y[Z]=mt,Y[gt]=vt,Z=gt;else break t}}return at}function i(Y,at){var vt=Y.sortIndex-at.sortIndex;return vt!==0?vt:Y.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],h=[],f=1,p=null,m=3,v=!1,x=!1,E=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function P(Y){for(var at=e(h);at!==null;){if(at.callback===null)r(h);else if(at.startTime<=Y)r(h),at.sortIndex=at.expirationTime,t(l,at);else break;at=e(h)}}function k(Y){if(E=!1,P(Y),!x)if(e(l)!==null)x=!0,U||(U=!0,z());else{var at=e(h);at!==null&&wt(k,at.startTime-Y)}}var U=!1,M=-1,I=5,N=-1;function L(){return b?!0:!(n.unstable_now()-N<I)}function j(){if(b=!1,U){var Y=n.unstable_now();N=Y;var at=!0;try{t:{x=!1,E&&(E=!1,S(M),M=-1),v=!0;var vt=m;try{e:{for(P(Y),p=e(l);p!==null&&!(p.expirationTime>Y&&L());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,m=p.priorityLevel;var F=Z(p.expirationTime<=Y);if(Y=n.unstable_now(),typeof F=="function"){p.callback=F,P(Y),at=!0;break e}p===e(l)&&r(l),P(Y)}else r(l);p=e(l)}if(p!==null)at=!0;else{var $=e(h);$!==null&&wt(k,$.startTime-Y),at=!1}}break t}finally{p=null,m=vt,v=!1}at=void 0}}finally{at?z():U=!1}}}var z;if(typeof D=="function")z=function(){D(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,yt=B.port2;B.port1.onmessage=j,z=function(){yt.postMessage(null)}}else z=function(){T(j,0)};function wt(Y,at){M=T(function(){Y(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var at=3;break;default:at=m}var vt=m;m=at;try{return Y()}finally{m=vt}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(Y,at){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var vt=m;m=Y;try{return at()}finally{m=vt}},n.unstable_scheduleCallback=function(Y,at,vt){var Z=n.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?Z+vt:Z):vt=Z,Y){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=vt+F,Y={id:f++,callback:at,priorityLevel:Y,startTime:vt,expirationTime:F,sortIndex:-1},vt>Z?(Y.sortIndex=vt,t(h,Y),e(l)===null&&Y===e(h)&&(E?(S(M),M=-1):E=!0,wt(k,vt-Z))):(Y.sortIndex=F,t(l,Y),x||v||(x=!0,U||(U=!0,z()))),Y},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Y){var at=m;return function(){var vt=m;m=at;try{return Y.apply(this,arguments)}finally{m=vt}}}}(Jx)),Jx}var YD;function gF(){return YD||(YD=1,Zx.exports=pF()),Zx.exports}var tw={exports:{}},ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function mF(){if(KD)return ee;KD=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function b(F,$,ot){this.props=F,this.context=$,this.refs=E,this.updater=ot||v}b.prototype.isReactComponent={},b.prototype.setState=function(F,$){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,$,"setState")},b.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function T(){}T.prototype=b.prototype;function S(F,$,ot){this.props=F,this.context=$,this.refs=E,this.updater=ot||v}var D=S.prototype=new T;D.constructor=S,x(D,b.prototype),D.isPureReactComponent=!0;var P=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function M(F,$,ot,tt,gt,mt){return ot=mt.ref,{$$typeof:n,type:F,key:$,ref:ot!==void 0?ot:null,props:mt}}function I(F,$){return M(F.type,$,void 0,void 0,void 0,F.props)}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function L(F){var $={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ot){return $[ot]})}var j=/\/+/g;function z(F,$){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):$.toString(36)}function B(){}function yt(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(B,B):(F.status="pending",F.then(function($){F.status==="pending"&&(F.status="fulfilled",F.value=$)},function($){F.status==="pending"&&(F.status="rejected",F.reason=$)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function wt(F,$,ot,tt,gt){var mt=typeof F;(mt==="undefined"||mt==="boolean")&&(F=null);var Et=!1;if(F===null)Et=!0;else switch(mt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(F.$$typeof){case n:case t:Et=!0;break;case f:return Et=F._init,wt(Et(F._payload),$,ot,tt,gt)}}if(Et)return gt=gt(F),Et=tt===""?"."+z(F,0):tt,P(gt)?(ot="",Et!=null&&(ot=Et.replace(j,"$&/")+"/"),wt(gt,$,ot,"",function(Rt){return Rt})):gt!=null&&(N(gt)&&(gt=I(gt,ot+(gt.key==null||F&&F.key===gt.key?"":(""+gt.key).replace(j,"$&/")+"/")+Et)),$.push(gt)),1;Et=0;var Qt=tt===""?".":tt+":";if(P(F))for(var Mt=0;Mt<F.length;Mt++)tt=F[Mt],mt=Qt+z(tt,Mt),Et+=wt(tt,$,ot,mt,gt);else if(Mt=m(F),typeof Mt=="function")for(F=Mt.call(F),Mt=0;!(tt=F.next()).done;)tt=tt.value,mt=Qt+z(tt,Mt++),Et+=wt(tt,$,ot,mt,gt);else if(mt==="object"){if(typeof F.then=="function")return wt(yt(F),$,ot,tt,gt);throw $=String(F),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Et}function Y(F,$,ot){if(F==null)return F;var tt=[],gt=0;return wt(F,tt,"","",function(mt){return $.call(ot,mt,gt++)}),tt}function at(F){if(F._status===-1){var $=F._result;$=$(),$.then(function(ot){(F._status===0||F._status===-1)&&(F._status=1,F._result=ot)},function(ot){(F._status===0||F._status===-1)&&(F._status=2,F._result=ot)}),F._status===-1&&(F._status=0,F._result=$)}if(F._status===1)return F._result.default;throw F._result}var vt=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Z(){}return ee.Children={map:Y,forEach:function(F,$,ot){Y(F,function(){$.apply(this,arguments)},ot)},count:function(F){var $=0;return Y(F,function(){$++}),$},toArray:function(F){return Y(F,function($){return $})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},ee.Component=b,ee.Fragment=e,ee.Profiler=i,ee.PureComponent=S,ee.StrictMode=r,ee.Suspense=l,ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ee.__COMPILER_RUNTIME={__proto__:null,c:function(F){return k.H.useMemoCache(F)}},ee.cache=function(F){return function(){return F.apply(null,arguments)}},ee.cloneElement=function(F,$,ot){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var tt=x({},F.props),gt=F.key,mt=void 0;if($!=null)for(Et in $.ref!==void 0&&(mt=void 0),$.key!==void 0&&(gt=""+$.key),$)!U.call($,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&$.ref===void 0||(tt[Et]=$[Et]);var Et=arguments.length-2;if(Et===1)tt.children=ot;else if(1<Et){for(var Qt=Array(Et),Mt=0;Mt<Et;Mt++)Qt[Mt]=arguments[Mt+2];tt.children=Qt}return M(F.type,gt,void 0,void 0,mt,tt)},ee.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},ee.createElement=function(F,$,ot){var tt,gt={},mt=null;if($!=null)for(tt in $.key!==void 0&&(mt=""+$.key),$)U.call($,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(gt[tt]=$[tt]);var Et=arguments.length-2;if(Et===1)gt.children=ot;else if(1<Et){for(var Qt=Array(Et),Mt=0;Mt<Et;Mt++)Qt[Mt]=arguments[Mt+2];gt.children=Qt}if(F&&F.defaultProps)for(tt in Et=F.defaultProps,Et)gt[tt]===void 0&&(gt[tt]=Et[tt]);return M(F,mt,void 0,void 0,null,gt)},ee.createRef=function(){return{current:null}},ee.forwardRef=function(F){return{$$typeof:o,render:F}},ee.isValidElement=N,ee.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:at}},ee.memo=function(F,$){return{$$typeof:h,type:F,compare:$===void 0?null:$}},ee.startTransition=function(F){var $=k.T,ot={};k.T=ot;try{var tt=F(),gt=k.S;gt!==null&&gt(ot,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(Z,vt)}catch(mt){vt(mt)}finally{k.T=$}},ee.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ee.use=function(F){return k.H.use(F)},ee.useActionState=function(F,$,ot){return k.H.useActionState(F,$,ot)},ee.useCallback=function(F,$){return k.H.useCallback(F,$)},ee.useContext=function(F){return k.H.useContext(F)},ee.useDebugValue=function(){},ee.useDeferredValue=function(F,$){return k.H.useDeferredValue(F,$)},ee.useEffect=function(F,$,ot){var tt=k.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(F,$)},ee.useId=function(){return k.H.useId()},ee.useImperativeHandle=function(F,$,ot){return k.H.useImperativeHandle(F,$,ot)},ee.useInsertionEffect=function(F,$){return k.H.useInsertionEffect(F,$)},ee.useLayoutEffect=function(F,$){return k.H.useLayoutEffect(F,$)},ee.useMemo=function(F,$){return k.H.useMemo(F,$)},ee.useOptimistic=function(F,$){return k.H.useOptimistic(F,$)},ee.useReducer=function(F,$,ot){return k.H.useReducer(F,$,ot)},ee.useRef=function(F){return k.H.useRef(F)},ee.useState=function(F){return k.H.useState(F)},ee.useSyncExternalStore=function(F,$,ot){return k.H.useSyncExternalStore(F,$,ot)},ee.useTransition=function(){return k.H.useTransition()},ee.version="19.1.0",ee}var XD;function k2(){return XD||(XD=1,tw.exports=mF()),tw.exports}var ew={exports:{}},Or={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD;function vF(){if(QD)return Or;QD=1;var n=k2();function t(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:l,containerInfo:h,implementation:f}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,h){if(l==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Or.createPortal=function(l,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(l,h,null,f)},Or.flushSync=function(l){var h=a.T,f=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=h,r.p=f,r.d.f()}},Or.preconnect=function(l,h){typeof l=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(l,h))},Or.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Or.preinit=function(l,h){if(typeof l=="string"&&h&&typeof h.as=="string"){var f=h.as,p=o(f,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?r.d.S(l,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:v}):f==="script"&&r.d.X(l,{crossOrigin:p,integrity:m,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Or.preinitModule=function(l,h){if(typeof l=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=o(h.as,h.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(l)},Or.preload=function(l,h){if(typeof l=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=o(f,h.crossOrigin);r.d.L(l,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Or.preloadModule=function(l,h){if(typeof l=="string")if(h){var f=o(h.as,h.crossOrigin);r.d.m(l,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(l)},Or.requestFormReset=function(l){r.d.r(l)},Or.unstable_batchedUpdates=function(l,h){return l(h)},Or.useFormState=function(l,h,f){return a.H.useFormState(l,h,f)},Or.useFormStatus=function(){return a.H.useHostTransitionStatus()},Or.version="19.1.0",Or}var ZD;function kP(){if(ZD)return ew.exports;ZD=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ew.exports=vF(),ew.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JD;function yF(){if(JD)return tp;JD=1;var n=gF(),t=k2(),e=kP();function r(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var u=c,d=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(d=u.return),c=u.return;while(c)}return u.tag===3?d:null}function a(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function o(c){if(s(c)!==c)throw Error(r(188))}function l(c){var u=c.alternate;if(!u){if(u=s(c),u===null)throw Error(r(188));return u!==c?null:c}for(var d=c,g=u;;){var _=d.return;if(_===null)break;var w=_.alternate;if(w===null){if(g=_.return,g!==null){d=g;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===d)return o(_),c;if(w===g)return o(_),u;w=w.sibling}throw Error(r(188))}if(d.return!==g.return)d=_,g=w;else{for(var R=!1,V=_.child;V;){if(V===d){R=!0,d=_,g=w;break}if(V===g){R=!0,g=_,d=w;break}V=V.sibling}if(!R){for(V=w.child;V;){if(V===d){R=!0,d=w,g=_;break}if(V===g){R=!0,g=w,d=_;break}V=V.sibling}if(!R)throw Error(r(189))}}if(d.alternate!==g)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?c:u}function h(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(u=h(c),u!==null)return u;c=c.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),D=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function z(c){return c===null||typeof c!="object"?null:(c=j&&c[j]||c["@@iterator"],typeof c=="function"?c:null)}var B=Symbol.for("react.client.reference");function yt(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===B?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case x:return"Fragment";case b:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case U:return"SuspenseList";case N:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case D:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case P:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case M:return u=c.displayName||null,u!==null?u:yt(c.type)||"Memo";case I:u=c._payload,c=c._init;try{return yt(c(u))}catch{}}return null}var wt=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},Z=[],F=-1;function $(c){return{current:c}}function ot(c){0>F||(c.current=Z[F],Z[F]=null,F--)}function tt(c,u){F++,Z[F]=c.current,c.current=u}var gt=$(null),mt=$(null),Et=$(null),Qt=$(null);function Mt(c,u){switch(tt(Et,u),tt(mt,c),tt(gt,null),u.nodeType){case 9:case 11:c=(c=u.documentElement)&&(c=c.namespaceURI)?_D(c):0;break;default:if(c=u.tagName,u=u.namespaceURI)u=_D(u),c=xD(u,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}ot(gt),tt(gt,c)}function Rt(){ot(gt),ot(mt),ot(Et)}function Ut(c){c.memoizedState!==null&&tt(Qt,c);var u=gt.current,d=xD(u,c.type);u!==d&&(tt(mt,c),tt(gt,d))}function Jt(c){mt.current===c&&(ot(gt),ot(mt)),Qt.current===c&&(ot(Qt),Yd._currentValue=vt)}var Re=Object.prototype.hasOwnProperty,Se=n.unstable_scheduleCallback,It=n.unstable_cancelCallback,Gt=n.unstable_shouldYield,qt=n.unstable_requestPaint,Vt=n.unstable_now,bt=n.unstable_getCurrentPriorityLevel,en=n.unstable_ImmediatePriority,ae=n.unstable_UserBlockingPriority,xe=n.unstable_NormalPriority,hn=n.unstable_LowPriority,rr=n.unstable_IdlePriority,Dt=n.log,fe=n.unstable_setDisableYieldValue,be=null,pe=null;function ir(c){if(typeof Dt=="function"&&fe(c),pe&&typeof pe.setStrictMode=="function")try{pe.setStrictMode(be,c)}catch{}}var kn=Math.clz32?Math.clz32:vr,Ir=Math.log,mr=Math.LN2;function vr(c){return c>>>=0,c===0?32:31-(Ir(c)/mr|0)|0}var Jr=256,ti=4194304;function ei(c){var u=c&42;if(u!==0)return u;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ya(c,u,d){var g=c.pendingLanes;if(g===0)return 0;var _=0,w=c.suspendedLanes,R=c.pingedLanes;c=c.warmLanes;var V=g&134217727;return V!==0?(g=V&~w,g!==0?_=ei(g):(R&=V,R!==0?_=ei(R):d||(d=V&~c,d!==0&&(_=ei(d))))):(V=g&~w,V!==0?_=ei(V):R!==0?_=ei(R):d||(d=g&~c,d!==0&&(_=ei(d)))),_===0?0:u!==0&&u!==_&&(u&w)===0&&(w=_&-_,d=u&-u,w>=d||w===32&&(d&4194048)!==0)?u:_}function Cs(c,u){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&u)===0}function Yf(c,u){switch(c){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kf(){var c=Jr;return Jr<<=1,(Jr&4194048)===0&&(Jr=256),c}function Xf(){var c=ti;return ti<<=1,(ti&62914560)===0&&(ti=4194304),c}function _a(c){for(var u=[],d=0;31>d;d++)u.push(c);return u}function xa(c,u){c.pendingLanes|=u,u!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Qf(c,u,d,g,_,w){var R=c.pendingLanes;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=d,c.entangledLanes&=d,c.errorRecoveryDisabledLanes&=d,c.shellSuspendCounter=0;var V=c.entanglements,W=c.expirationTimes,et=c.hiddenUpdates;for(d=R&~d;0<d;){var ht=31-kn(d),pt=1<<ht;V[ht]=0,W[ht]=-1;var it=et[ht];if(it!==null)for(et[ht]=null,ht=0;ht<it.length;ht++){var st=it[ht];st!==null&&(st.lane&=-536870913)}d&=~pt}g!==0&&Is(c,g,0),w!==0&&_===0&&c.tag!==0&&(c.suspendedLanes|=w&~(R&~u))}function Is(c,u,d){c.pendingLanes|=u,c.suspendedLanes&=~u;var g=31-kn(u);c.entangledLanes|=u,c.entanglements[g]=c.entanglements[g]|1073741824|d&4194090}function Zf(c,u){var d=c.entangledLanes|=u;for(c=c.entanglements;d;){var g=31-kn(d),_=1<<g;_&u|c[g]&u&&(c[g]|=u),d&=~_}}function po(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Tu(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function go(){var c=at.p;return c!==0?c:(c=window.event,c===void 0?32:FD(c.type))}function m0(c,u){var d=at.p;try{return at.p=c,u()}finally{at.p=d}}var an=Math.random().toString(36).slice(2),zn="__reactFiber$"+an,Ln="__reactProps$"+an,ki="__reactContainer$"+an,Jf="__reactEvents$"+an,Jy="__reactListeners$"+an,mo="__reactHandles$"+an,v0="__reactResources$"+an,Fc="__reactMarker$"+an;function vo(c){delete c[zn],delete c[Ln],delete c[Jf],delete c[Jy],delete c[mo]}function wa(c){var u=c[zn];if(u)return u;for(var d=c.parentNode;d;){if(u=d[ki]||d[zn]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(c=AD(c);c!==null;){if(d=c[zn])return d;c=AD(c)}return u}c=d,d=c.parentNode}return null}function Ds(c){if(c=c[zn]||c[ki]){var u=c.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return c}return null}function Os(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c.stateNode;throw Error(r(33))}function Hr(c){var u=c[v0];return u||(u=c[v0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Tn(c){c[Fc]=!0}var td=new Set,Su={};function cs(c,u){Ea(c,u),Ea(c+"Capture",u)}function Ea(c,u){for(Su[c]=u,c=0;c<u.length;c++)td.add(u[c])}var y0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_0={},Uc={};function x0(c){return Re.call(Uc,c)?!0:Re.call(_0,c)?!1:y0.test(c)?Uc[c]=!0:(_0[c]=!0,!1)}function yo(c,u,d){if(x0(u))if(d===null)c.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":c.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){c.removeAttribute(u);return}}c.setAttribute(u,""+d)}}function Rs(c,u,d){if(d===null)c.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(u);return}c.setAttribute(u,""+d)}}function yr(c,u,d,g){if(g===null)c.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(d);return}c.setAttributeNS(u,d,""+g)}}var jc,w0;function ba(c){if(jc===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);jc=u&&u[1]||"",w0=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jc+c+w0}var Cu=!1;function Iu(c,u){if(!c||Cu)return"";Cu=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(st){var it=st}Reflect.construct(c,[],pt)}else{try{pt.call()}catch(st){it=st}c.call(pt.prototype)}}else{try{throw Error()}catch(st){it=st}(pt=c())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(st){if(st&&it&&typeof st.stack=="string")return[st.stack,it.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),R=w[0],V=w[1];if(R&&V){var W=R.split(`
`),et=V.split(`
`);for(_=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;_<et.length&&!et[_].includes("DetermineComponentFrameRoot");)_++;if(g===W.length||_===et.length)for(g=W.length-1,_=et.length-1;1<=g&&0<=_&&W[g]!==et[_];)_--;for(;1<=g&&0<=_;g--,_--)if(W[g]!==et[_]){if(g!==1||_!==1)do if(g--,_--,0>_||W[g]!==et[_]){var ht=`
`+W[g].replace(" at new "," at ");return c.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",c.displayName)),ht}while(1<=g&&0<=_);break}}}finally{Cu=!1,Error.prepareStackTrace=d}return(d=c?c.displayName||c.name:"")?ba(d):""}function ed(c){switch(c.tag){case 26:case 27:case 5:return ba(c.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 15:return Iu(c.type,!1);case 11:return Iu(c.type.render,!1);case 1:return Iu(c.type,!0);case 31:return ba("Activity");default:return""}}function Du(c){try{var u="";do u+=ed(c),c=c.return;while(c);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function zr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function nd(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function t_(c){var u=nd(c)?"checked":"value",d=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),g=""+c[u];if(!c.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,w=d.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return _.call(this)},set:function(R){g=""+R,w.call(this,R)}}),Object.defineProperty(c,u,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Ou(c){c._valueTracker||(c._valueTracker=t_(c))}function rd(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var d=u.getValue(),g="";return c&&(g=nd(c)?c.checked?"true":"false":c.value),c=g,c!==d?(u.setValue(c),!0):!1}function Hc(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var e_=/[\n"\\]/g;function Vn(c){return c.replace(e_,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function mi(c,u,d,g,_,w,R,V){c.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?c.type=R:c.removeAttribute("type"),u!=null?R==="number"?(u===0&&c.value===""||c.value!=u)&&(c.value=""+zr(u)):c.value!==""+zr(u)&&(c.value=""+zr(u)):R!=="submit"&&R!=="reset"||c.removeAttribute("value"),u!=null?_o(c,R,zr(u)):d!=null?_o(c,R,zr(d)):g!=null&&c.removeAttribute("value"),_==null&&w!=null&&(c.defaultChecked=!!w),_!=null&&(c.checked=_&&typeof _!="function"&&typeof _!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?c.name=""+zr(V):c.removeAttribute("name")}function zc(c,u,d,g,_,w,R,V){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(c.type=w),u!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||u!=null))return;d=d!=null?""+zr(d):"",u=u!=null?""+zr(u):d,V||u===c.value||(c.value=u),c.defaultValue=u}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,c.checked=V?c.checked:!!g,c.defaultChecked=!!g,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(c.name=R)}function _o(c,u,d){u==="number"&&Hc(c.ownerDocument)===c||c.defaultValue===""+d||(c.defaultValue=""+d)}function Aa(c,u,d,g){if(c=c.options,u){u={};for(var _=0;_<d.length;_++)u["$"+d[_]]=!0;for(d=0;d<c.length;d++)_=u.hasOwnProperty("$"+c[d].value),c[d].selected!==_&&(c[d].selected=_),_&&g&&(c[d].defaultSelected=!0)}else{for(d=""+zr(d),u=null,_=0;_<c.length;_++){if(c[_].value===d){c[_].selected=!0,g&&(c[_].defaultSelected=!0);return}u!==null||c[_].disabled||(u=c[_])}u!==null&&(u.selected=!0)}}function Ge(c,u,d){if(u!=null&&(u=""+zr(u),u!==c.value&&(c.value=u),d==null)){c.defaultValue!==u&&(c.defaultValue=u);return}c.defaultValue=d!=null?""+zr(d):""}function Gc(c,u,d,g){if(u==null){if(g!=null){if(d!=null)throw Error(r(92));if(wt(g)){if(1<g.length)throw Error(r(93));g=g[0]}d=g}d==null&&(d=""),u=d}d=zr(u),c.defaultValue=d,g=c.textContent,g===d&&g!==""&&g!==null&&(c.value=g)}function Li(c,u){if(u){var d=c.firstChild;if(d&&d===c.lastChild&&d.nodeType===3){d.nodeValue=u;return}}c.textContent=u}var Wc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function E0(c,u,d){var g=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?c.setProperty(u,""):u==="float"?c.cssFloat="":c[u]="":g?c.setProperty(u,d):typeof d!="number"||d===0||Wc.has(u)?u==="float"?c.cssFloat=d:c[u]=(""+d).trim():c[u]=d+"px"}function id(c,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(c=c.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?c.setProperty(g,""):g==="float"?c.cssFloat="":c[g]="");for(var _ in u)g=u[_],u.hasOwnProperty(_)&&d[_]!==g&&E0(c,_,g)}else for(var w in u)u.hasOwnProperty(w)&&E0(c,w,u[w])}function sd(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),r_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ru(c){return r_.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Ta=null;function Vi(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Sa=null,Ca=null;function ad(c){var u=Ds(c);if(u&&(c=u.stateNode)){var d=c[Ln]||null;t:switch(c=u.stateNode,u.type){case"input":if(mi(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=c;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Vn(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var g=d[u];if(g!==c&&g.form===c.form){var _=g[Ln]||null;if(!_)throw Error(r(90));mi(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<d.length;u++)g=d[u],g.form===c.form&&rd(g)}break t;case"textarea":Ge(c,d.value,d.defaultValue);break t;case"select":u=d.value,u!=null&&Aa(c,!!d.multiple,u,!1)}}}var Ns=!1;function b0(c,u,d){if(Ns)return c(u,d);Ns=!0;try{var g=c(u);return g}finally{if(Ns=!1,(Sa!==null||Ca!==null)&&(mm(),Sa&&(u=Sa,c=Ca,Ca=Sa=null,ad(u),c)))for(u=0;u<c.length;u++)ad(c[u])}}function $c(c,u){var d=c.stateNode;if(d===null)return null;var g=d[Ln]||null;if(g===null)return null;d=g[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(c=c.type,g=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!g;break t;default:c=!1}if(c)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bi=!1;if(ls)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){Bi=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{Bi=!1}var Ms=null,xo=null,Ia=null;function od(){if(Ia)return Ia;var c,u=xo,d=u.length,g,_="value"in Ms?Ms.value:Ms.textContent,w=_.length;for(c=0;c<d&&u[c]===_[c];c++);var R=d-c;for(g=1;g<=R&&u[d-g]===_[w-g];g++);return Ia=_.slice(c,1<g?1-g:void 0)}function Ps(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function ks(){return!0}function cd(){return!1}function sr(c){function u(d,g,_,w,R){this._reactName=d,this._targetInst=_,this.type=g,this.nativeEvent=w,this.target=R,this.currentTarget=null;for(var V in c)c.hasOwnProperty(V)&&(d=c[V],this[V]=d?d(w):w[V]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ks:cd,this.isPropagationStopped=cd,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),u}var Ne={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=sr(Ne),Yc=f({},Ne,{view:0,detail:0}),A0=sr(Yc),Mu,Pu,Ls,Kc=f({},Yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zc,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ls&&(Ls&&c.type==="mousemove"?(Mu=c.screenX-Ls.screenX,Pu=c.screenY-Ls.screenY):Pu=Mu=0,Ls=c),Mu)},movementY:function(c){return"movementY"in c?c.movementY:Pu}}),Fi=sr(Kc),T0=f({},Kc,{dataTransfer:0}),i_=sr(T0),Xc=f({},Yc,{relatedTarget:0}),ku=sr(Xc),ld=f({},Ne,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=sr(ld),S0=f({},Ne,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Vu=sr(S0),s_=f({},Ne,{data:0}),ud=sr(s_),Qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hd(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=I0[c])?!!u[c]:!1}function Zc(){return hd}var D0=f({},Yc,{key:function(c){if(c.key){var u=Qc[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=Ps(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?C0[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zc,charCode:function(c){return c.type==="keypress"?Ps(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ps(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Bu=sr(D0),O0=f({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=sr(O0),Da=f({},Yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zc}),R0=sr(Da),N0=f({},Ne,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=sr(N0),P0=f({},Kc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Fu=sr(P0),Gr=f({},Ne,{newState:0,oldState:0}),k0=sr(Gr),L0=[9,13,27,32],Vs=ls&&"CompositionEvent"in window,y=null;ls&&"documentMode"in document&&(y=document.documentMode);var A=ls&&"TextEvent"in window&&!y,O=ls&&(!Vs||y&&8<y&&11>=y),H=" ",X=!1;function ct(c,u){switch(c){case"keyup":return L0.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function At(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ge=!1;function Gn(c,u){switch(c){case"compositionend":return At(u);case"keypress":return u.which!==32?null:(X=!0,H);case"textInput":return c=u.data,c===H&&X?null:c;default:return null}}function me(c,u){if(ge)return c==="compositionend"||!Vs&&ct(c,u)?(c=od(),Ia=xo=Ms=null,ge=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return O&&u.locale!=="ko"?null:u.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!ar[c.type]:u==="textarea"}function Oa(c,u,d,g){Sa?Ca?Ca.push(g):Ca=[g]:Sa=g,u=Em(u,"onChange"),0<u.length&&(d=new Nu("onChange","change",null,d,g),c.push({event:d,listeners:u}))}var _r=null,Bs=null;function dd(c){pD(c,0)}function V0(c){var u=Os(c);if(rd(u))return c}function kS(c,u){if(c==="change")return u}var LS=!1;if(ls){var a_;if(ls){var o_="oninput"in document;if(!o_){var VS=document.createElement("div");VS.setAttribute("oninput","return;"),o_=typeof VS.oninput=="function"}a_=o_}else a_=!1;LS=a_&&(!document.documentMode||9<document.documentMode)}function BS(){_r&&(_r.detachEvent("onpropertychange",FS),Bs=_r=null)}function FS(c){if(c.propertyName==="value"&&V0(Bs)){var u=[];Oa(u,Bs,c,Vi(c)),b0(dd,u)}}function UV(c,u,d){c==="focusin"?(BS(),_r=u,Bs=d,_r.attachEvent("onpropertychange",FS)):c==="focusout"&&BS()}function jV(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return V0(Bs)}function HV(c,u){if(c==="click")return V0(u)}function zV(c,u){if(c==="input"||c==="change")return V0(u)}function GV(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var vi=typeof Object.is=="function"?Object.is:GV;function pd(c,u){if(vi(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var d=Object.keys(c),g=Object.keys(u);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var _=d[g];if(!Re.call(u,_)||!vi(c[_],u[_]))return!1}return!0}function US(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function jS(c,u){var d=US(c);c=0;for(var g;d;){if(d.nodeType===3){if(g=c+d.textContent.length,c<=u&&g>=u)return{node:d,offset:u-c};c=g}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=US(d)}}function HS(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?HS(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function zS(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var u=Hc(c.document);u instanceof c.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)c=u.contentWindow;else break;u=Hc(c.document)}return u}function c_(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}var WV=ls&&"documentMode"in document&&11>=document.documentMode,Uu=null,l_=null,gd=null,u_=!1;function GS(c,u,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;u_||Uu==null||Uu!==Hc(g)||(g=Uu,"selectionStart"in g&&c_(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),gd&&pd(gd,g)||(gd=g,g=Em(l_,"onSelect"),0<g.length&&(u=new Nu("onSelect","select",null,u,d),c.push({event:u,listeners:g}),u.target=Uu)))}function Jc(c,u){var d={};return d[c.toLowerCase()]=u.toLowerCase(),d["Webkit"+c]="webkit"+u,d["Moz"+c]="moz"+u,d}var ju={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionrun:Jc("Transition","TransitionRun"),transitionstart:Jc("Transition","TransitionStart"),transitioncancel:Jc("Transition","TransitionCancel"),transitionend:Jc("Transition","TransitionEnd")},h_={},WS={};ls&&(WS=document.createElement("div").style,"AnimationEvent"in window||(delete ju.animationend.animation,delete ju.animationiteration.animation,delete ju.animationstart.animation),"TransitionEvent"in window||delete ju.transitionend.transition);function tl(c){if(h_[c])return h_[c];if(!ju[c])return c;var u=ju[c],d;for(d in u)if(u.hasOwnProperty(d)&&d in WS)return h_[c]=u[d];return c}var $S=tl("animationend"),qS=tl("animationiteration"),YS=tl("animationstart"),$V=tl("transitionrun"),qV=tl("transitionstart"),YV=tl("transitioncancel"),KS=tl("transitionend"),XS=new Map,f_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");f_.push("scrollEnd");function us(c,u){XS.set(c,u),cs(u,[c])}var QS=new WeakMap;function Ui(c,u){if(typeof c=="object"&&c!==null){var d=QS.get(c);return d!==void 0?d:(u={value:c,source:u,stack:Du(u)},QS.set(c,u),u)}return{value:c,source:u,stack:Du(u)}}var ji=[],Hu=0,d_=0;function B0(){for(var c=Hu,u=d_=Hu=0;u<c;){var d=ji[u];ji[u++]=null;var g=ji[u];ji[u++]=null;var _=ji[u];ji[u++]=null;var w=ji[u];if(ji[u++]=null,g!==null&&_!==null){var R=g.pending;R===null?_.next=_:(_.next=R.next,R.next=_),g.pending=_}w!==0&&ZS(d,_,w)}}function F0(c,u,d,g){ji[Hu++]=c,ji[Hu++]=u,ji[Hu++]=d,ji[Hu++]=g,d_|=g,c.lanes|=g,c=c.alternate,c!==null&&(c.lanes|=g)}function p_(c,u,d,g){return F0(c,u,d,g),U0(c)}function zu(c,u){return F0(c,null,null,u),U0(c)}function ZS(c,u,d){c.lanes|=d;var g=c.alternate;g!==null&&(g.lanes|=d);for(var _=!1,w=c.return;w!==null;)w.childLanes|=d,g=w.alternate,g!==null&&(g.childLanes|=d),w.tag===22&&(c=w.stateNode,c===null||c._visibility&1||(_=!0)),c=w,w=w.return;return c.tag===3?(w=c.stateNode,_&&u!==null&&(_=31-kn(d),c=w.hiddenUpdates,g=c[_],g===null?c[_]=[u]:g.push(u),u.lane=d|536870912),w):null}function U0(c){if(50<Ud)throw Ud=0,xx=null,Error(r(185));for(var u=c.return;u!==null;)c=u,u=c.return;return c.tag===3?c.stateNode:null}var Gu={};function KV(c,u,d,g){this.tag=c,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(c,u,d,g){return new KV(c,u,d,g)}function g_(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Ra(c,u){var d=c.alternate;return d===null?(d=yi(c.tag,u,c.key,c.mode),d.elementType=c.elementType,d.type=c.type,d.stateNode=c.stateNode,d.alternate=c,c.alternate=d):(d.pendingProps=u,d.type=c.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=c.flags&65011712,d.childLanes=c.childLanes,d.lanes=c.lanes,d.child=c.child,d.memoizedProps=c.memoizedProps,d.memoizedState=c.memoizedState,d.updateQueue=c.updateQueue,u=c.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=c.sibling,d.index=c.index,d.ref=c.ref,d.refCleanup=c.refCleanup,d}function JS(c,u){c.flags&=65011714;var d=c.alternate;return d===null?(c.childLanes=0,c.lanes=u,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,u=d.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),c}function j0(c,u,d,g,_,w){var R=0;if(g=c,typeof c=="function")g_(c)&&(R=1);else if(typeof c=="string")R=QB(c,d,gt.current)?26:c==="html"||c==="head"||c==="body"?27:5;else t:switch(c){case N:return c=yi(31,d,u,_),c.elementType=N,c.lanes=w,c;case x:return el(d.children,_,w,u);case E:R=8,_|=24;break;case b:return c=yi(12,d,u,_|2),c.elementType=b,c.lanes=w,c;case k:return c=yi(13,d,u,_),c.elementType=k,c.lanes=w,c;case U:return c=yi(19,d,u,_),c.elementType=U,c.lanes=w,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case T:case D:R=10;break t;case S:R=9;break t;case P:R=11;break t;case M:R=14;break t;case I:R=16,g=null;break t}R=29,d=Error(r(130,c===null?"null":typeof c,"")),g=null}return u=yi(R,d,u,_),u.elementType=c,u.type=g,u.lanes=w,u}function el(c,u,d,g){return c=yi(7,c,g,u),c.lanes=d,c}function m_(c,u,d){return c=yi(6,c,null,u),c.lanes=d,c}function v_(c,u,d){return u=yi(4,c.children!==null?c.children:[],c.key,u),u.lanes=d,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}var Wu=[],$u=0,H0=null,z0=0,Hi=[],zi=0,nl=null,Na=1,Ma="";function rl(c,u){Wu[$u++]=z0,Wu[$u++]=H0,H0=c,z0=u}function tC(c,u,d){Hi[zi++]=Na,Hi[zi++]=Ma,Hi[zi++]=nl,nl=c;var g=Na;c=Ma;var _=32-kn(g)-1;g&=~(1<<_),d+=1;var w=32-kn(u)+_;if(30<w){var R=_-_%5;w=(g&(1<<R)-1).toString(32),g>>=R,_-=R,Na=1<<32-kn(u)+_|d<<_|g,Ma=w+c}else Na=1<<w|d<<_|g,Ma=c}function y_(c){c.return!==null&&(rl(c,1),tC(c,1,0))}function __(c){for(;c===H0;)H0=Wu[--$u],Wu[$u]=null,z0=Wu[--$u],Wu[$u]=null;for(;c===nl;)nl=Hi[--zi],Hi[zi]=null,Ma=Hi[--zi],Hi[zi]=null,Na=Hi[--zi],Hi[zi]=null}var Wr=null,yn=null,Ce=!1,il=null,Fs=!1,x_=Error(r(519));function sl(c){var u=Error(r(418,""));throw yd(Ui(u,c)),x_}function eC(c){var u=c.stateNode,d=c.type,g=c.memoizedProps;switch(u[zn]=c,u[Ln]=g,d){case"dialog":ue("cancel",u),ue("close",u);break;case"iframe":case"object":case"embed":ue("load",u);break;case"video":case"audio":for(d=0;d<Hd.length;d++)ue(Hd[d],u);break;case"source":ue("error",u);break;case"img":case"image":case"link":ue("error",u),ue("load",u);break;case"details":ue("toggle",u);break;case"input":ue("invalid",u),zc(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Ou(u);break;case"select":ue("invalid",u);break;case"textarea":ue("invalid",u),Gc(u,g.value,g.defaultValue,g.children),Ou(u)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||g.suppressHydrationWarning===!0||yD(u.textContent,d)?(g.popover!=null&&(ue("beforetoggle",u),ue("toggle",u)),g.onScroll!=null&&ue("scroll",u),g.onScrollEnd!=null&&ue("scrollend",u),g.onClick!=null&&(u.onclick=bm),u=!0):u=!1,u||sl(c)}function nC(c){for(Wr=c.return;Wr;)switch(Wr.tag){case 5:case 13:Fs=!1;return;case 27:case 3:Fs=!0;return;default:Wr=Wr.return}}function md(c){if(c!==Wr)return!1;if(!Ce)return nC(c),Ce=!0,!1;var u=c.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=c.type,d=!(d!=="form"&&d!=="button")||Lx(c.type,c.memoizedProps)),d=!d),d&&yn&&sl(c),nC(c),u===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));t:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8)if(d=c.data,d==="/$"){if(u===0){yn=fs(c.nextSibling);break t}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;c=c.nextSibling}yn=null}}else u===27?(u=yn,Lo(c.type)?(c=Ux,Ux=null,yn=c):yn=u):yn=Wr?fs(c.stateNode.nextSibling):null;return!0}function vd(){yn=Wr=null,Ce=!1}function rC(){var c=il;return c!==null&&(ii===null?ii=c:ii.push.apply(ii,c),il=null),c}function yd(c){il===null?il=[c]:il.push(c)}var w_=$(null),al=null,Pa=null;function wo(c,u,d){tt(w_,u._currentValue),u._currentValue=d}function ka(c){c._currentValue=w_.current,ot(w_)}function E_(c,u,d){for(;c!==null;){var g=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),c===d)break;c=c.return}}function b_(c,u,d,g){var _=c.child;for(_!==null&&(_.return=c);_!==null;){var w=_.dependencies;if(w!==null){var R=_.child;w=w.firstContext;t:for(;w!==null;){var V=w;w=_;for(var W=0;W<u.length;W++)if(V.context===u[W]){w.lanes|=d,V=w.alternate,V!==null&&(V.lanes|=d),E_(w.return,d,c),g||(R=null);break t}w=V.next}}else if(_.tag===18){if(R=_.return,R===null)throw Error(r(341));R.lanes|=d,w=R.alternate,w!==null&&(w.lanes|=d),E_(R,d,c),R=null}else R=_.child;if(R!==null)R.return=_;else for(R=_;R!==null;){if(R===c){R=null;break}if(_=R.sibling,_!==null){_.return=R.return,R=_;break}R=R.return}_=R}}function _d(c,u,d,g){c=null;for(var _=u,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var R=_.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var V=_.type;vi(_.pendingProps.value,R.value)||(c!==null?c.push(V):c=[V])}}else if(_===Qt.current){if(R=_.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(c!==null?c.push(Yd):c=[Yd])}_=_.return}c!==null&&b_(u,c,d,g),u.flags|=262144}function G0(c){for(c=c.firstContext;c!==null;){if(!vi(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function ol(c){al=c,Pa=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Dr(c){return iC(al,c)}function W0(c,u){return al===null&&ol(c),iC(c,u)}function iC(c,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},Pa===null){if(c===null)throw Error(r(308));Pa=u,c.dependencies={lanes:0,firstContext:u},c.flags|=524288}else Pa=Pa.next=u;return d}var XV=typeof AbortController<"u"?AbortController:function(){var c=[],u=this.signal={aborted:!1,addEventListener:function(d,g){c.push(g)}};this.abort=function(){u.aborted=!0,c.forEach(function(d){return d()})}},QV=n.unstable_scheduleCallback,ZV=n.unstable_NormalPriority,$n={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function A_(){return{controller:new XV,data:new Map,refCount:0}}function xd(c){c.refCount--,c.refCount===0&&QV(ZV,function(){c.controller.abort()})}var wd=null,T_=0,qu=0,Yu=null;function JV(c,u){if(wd===null){var d=wd=[];T_=0,qu=Cx(),Yu={status:"pending",value:void 0,then:function(g){d.push(g)}}}return T_++,u.then(sC,sC),u}function sC(){if(--T_===0&&wd!==null){Yu!==null&&(Yu.status="fulfilled");var c=wd;wd=null,qu=0,Yu=null;for(var u=0;u<c.length;u++)(0,c[u])()}}function tB(c,u){var d=[],g={status:"pending",value:null,reason:null,then:function(_){d.push(_)}};return c.then(function(){g.status="fulfilled",g.value=u;for(var _=0;_<d.length;_++)(0,d[_])(u)},function(_){for(g.status="rejected",g.reason=_,_=0;_<d.length;_++)(0,d[_])(void 0)}),g}var aC=Y.S;Y.S=function(c,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&JV(c,u),aC!==null&&aC(c,u)};var cl=$(null);function S_(){var c=cl.current;return c!==null?c:Ze.pooledCache}function $0(c,u){u===null?tt(cl,cl.current):tt(cl,u.pool)}function oC(){var c=S_();return c===null?null:{parent:$n._currentValue,pool:c}}var Ed=Error(r(460)),cC=Error(r(474)),q0=Error(r(542)),C_={then:function(){}};function lC(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Y0(){}function uC(c,u,d){switch(d=c[d],d===void 0?c.push(u):d!==u&&(u.then(Y0,Y0),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,fC(c),c;default:if(typeof u.status=="string")u.then(Y0,Y0);else{if(c=Ze,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=u,c.status="pending",c.then(function(g){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=g}},function(g){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,fC(c),c}throw bd=u,Ed}}var bd=null;function hC(){if(bd===null)throw Error(r(459));var c=bd;return bd=null,c}function fC(c){if(c===Ed||c===q0)throw Error(r(483))}var Eo=!1;function I_(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function D_(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function bo(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Ao(c,u,d){var g=c.updateQueue;if(g===null)return null;if(g=g.shared,(Le&2)!==0){var _=g.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),g.pending=u,u=U0(c),ZS(c,null,d),u}return F0(c,g,u,d),U0(c)}function Ad(c,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var g=u.lanes;g&=c.pendingLanes,d|=g,u.lanes=d,Zf(c,d)}}function O_(c,u){var d=c.updateQueue,g=c.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var _=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var R={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?_=w=R:w=w.next=R,d=d.next}while(d!==null);w===null?_=w=u:w=w.next=u}else _=w=u;d={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},c.updateQueue=d;return}c=d.lastBaseUpdate,c===null?d.firstBaseUpdate=u:c.next=u,d.lastBaseUpdate=u}var R_=!1;function Td(){if(R_){var c=Yu;if(c!==null)throw c}}function Sd(c,u,d,g){R_=!1;var _=c.updateQueue;Eo=!1;var w=_.firstBaseUpdate,R=_.lastBaseUpdate,V=_.shared.pending;if(V!==null){_.shared.pending=null;var W=V,et=W.next;W.next=null,R===null?w=et:R.next=et,R=W;var ht=c.alternate;ht!==null&&(ht=ht.updateQueue,V=ht.lastBaseUpdate,V!==R&&(V===null?ht.firstBaseUpdate=et:V.next=et,ht.lastBaseUpdate=W))}if(w!==null){var pt=_.baseState;R=0,ht=et=W=null,V=w;do{var it=V.lane&-536870913,st=it!==V.lane;if(st?(ve&it)===it:(g&it)===it){it!==0&&it===qu&&(R_=!0),ht!==null&&(ht=ht.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});t:{var Kt=c,Wt=V;it=u;var qe=d;switch(Wt.tag){case 1:if(Kt=Wt.payload,typeof Kt=="function"){pt=Kt.call(qe,pt,it);break t}pt=Kt;break t;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Wt.payload,it=typeof Kt=="function"?Kt.call(qe,pt,it):Kt,it==null)break t;pt=f({},pt,it);break t;case 2:Eo=!0}}it=V.callback,it!==null&&(c.flags|=64,st&&(c.flags|=8192),st=_.callbacks,st===null?_.callbacks=[it]:st.push(it))}else st={lane:it,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ht===null?(et=ht=st,W=pt):ht=ht.next=st,R|=it;if(V=V.next,V===null){if(V=_.shared.pending,V===null)break;st=V,V=st.next,st.next=null,_.lastBaseUpdate=st,_.shared.pending=null}}while(!0);ht===null&&(W=pt),_.baseState=W,_.firstBaseUpdate=et,_.lastBaseUpdate=ht,w===null&&(_.shared.lanes=0),No|=R,c.lanes=R,c.memoizedState=pt}}function dC(c,u){if(typeof c!="function")throw Error(r(191,c));c.call(u)}function pC(c,u){var d=c.callbacks;if(d!==null)for(c.callbacks=null,c=0;c<d.length;c++)dC(d[c],u)}var Ku=$(null),K0=$(0);function gC(c,u){c=Ha,tt(K0,c),tt(Ku,u),Ha=c|u.baseLanes}function N_(){tt(K0,Ha),tt(Ku,Ku.current)}function M_(){Ha=K0.current,ot(Ku),ot(K0)}var To=0,ne=null,We=null,Bn=null,X0=!1,Xu=!1,ll=!1,Q0=0,Cd=0,Qu=null,eB=0;function Sn(){throw Error(r(321))}function P_(c,u){if(u===null)return!1;for(var d=0;d<u.length&&d<c.length;d++)if(!vi(c[d],u[d]))return!1;return!0}function k_(c,u,d,g,_,w){return To=w,ne=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Y.H=c===null||c.memoizedState===null?ZC:JC,ll=!1,w=d(g,_),ll=!1,Xu&&(w=vC(u,d,g,_)),mC(c),w}function mC(c){Y.H=rm;var u=We!==null&&We.next!==null;if(To=0,Bn=We=ne=null,X0=!1,Cd=0,Qu=null,u)throw Error(r(300));c===null||or||(c=c.dependencies,c!==null&&G0(c)&&(or=!0))}function vC(c,u,d,g){ne=c;var _=0;do{if(Xu&&(Qu=null),Cd=0,Xu=!1,25<=_)throw Error(r(301));if(_+=1,Bn=We=null,c.updateQueue!=null){var w=c.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Y.H=cB,w=u(d,g)}while(Xu);return w}function nB(){var c=Y.H,u=c.useState()[0];return u=typeof u.then=="function"?Id(u):u,c=c.useState()[0],(We!==null?We.memoizedState:null)!==c&&(ne.flags|=1024),u}function L_(){var c=Q0!==0;return Q0=0,c}function V_(c,u,d){u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~d}function B_(c){if(X0){for(c=c.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}X0=!1}To=0,Bn=We=ne=null,Xu=!1,Cd=Q0=0,Qu=null}function ni(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?ne.memoizedState=Bn=c:Bn=Bn.next=c,Bn}function Fn(){if(We===null){var c=ne.alternate;c=c!==null?c.memoizedState:null}else c=We.next;var u=Bn===null?ne.memoizedState:Bn.next;if(u!==null)Bn=u,We=c;else{if(c===null)throw ne.alternate===null?Error(r(467)):Error(r(310));We=c,c={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Bn===null?ne.memoizedState=Bn=c:Bn=Bn.next=c}return Bn}function F_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Id(c){var u=Cd;return Cd+=1,Qu===null&&(Qu=[]),c=uC(Qu,c,u),u=ne,(Bn===null?u.memoizedState:Bn.next)===null&&(u=u.alternate,Y.H=u===null||u.memoizedState===null?ZC:JC),c}function Z0(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Id(c);if(c.$$typeof===D)return Dr(c)}throw Error(r(438,String(c)))}function U_(c){var u=null,d=ne.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var g=ne.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=F_(),ne.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(c),g=0;g<c;g++)d[g]=L;return u.index++,d}function La(c,u){return typeof u=="function"?u(c):u}function J0(c){var u=Fn();return j_(u,We,c)}function j_(c,u,d){var g=c.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var _=c.baseQueue,w=g.pending;if(w!==null){if(_!==null){var R=_.next;_.next=w.next,w.next=R}u.baseQueue=_=w,g.pending=null}if(w=c.baseState,_===null)c.memoizedState=w;else{u=_.next;var V=R=null,W=null,et=u,ht=!1;do{var pt=et.lane&-536870913;if(pt!==et.lane?(ve&pt)===pt:(To&pt)===pt){var it=et.revertLane;if(it===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),pt===qu&&(ht=!0);else if((To&it)===it){et=et.next,it===qu&&(ht=!0);continue}else pt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},W===null?(V=W=pt,R=w):W=W.next=pt,ne.lanes|=it,No|=it;pt=et.action,ll&&d(w,pt),w=et.hasEagerState?et.eagerState:d(w,pt)}else it={lane:pt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},W===null?(V=W=it,R=w):W=W.next=it,ne.lanes|=pt,No|=pt;et=et.next}while(et!==null&&et!==u);if(W===null?R=w:W.next=V,!vi(w,c.memoizedState)&&(or=!0,ht&&(d=Yu,d!==null)))throw d;c.memoizedState=w,c.baseState=R,c.baseQueue=W,g.lastRenderedState=w}return _===null&&(g.lanes=0),[c.memoizedState,g.dispatch]}function H_(c){var u=Fn(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var g=d.dispatch,_=d.pending,w=u.memoizedState;if(_!==null){d.pending=null;var R=_=_.next;do w=c(w,R.action),R=R.next;while(R!==_);vi(w,u.memoizedState)||(or=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),d.lastRenderedState=w}return[w,g]}function yC(c,u,d){var g=ne,_=Fn(),w=Ce;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=u();var R=!vi((We||_).memoizedState,d);R&&(_.memoizedState=d,or=!0),_=_.queue;var V=wC.bind(null,g,_,c);if(Dd(2048,8,V,[c]),_.getSnapshot!==u||R||Bn!==null&&Bn.memoizedState.tag&1){if(g.flags|=2048,Zu(9,tm(),xC.bind(null,g,_,d,u),null),Ze===null)throw Error(r(349));w||(To&124)!==0||_C(g,u,d)}return d}function _C(c,u,d){c.flags|=16384,c={getSnapshot:u,value:d},u=ne.updateQueue,u===null?(u=F_(),ne.updateQueue=u,u.stores=[c]):(d=u.stores,d===null?u.stores=[c]:d.push(c))}function xC(c,u,d,g){u.value=d,u.getSnapshot=g,EC(u)&&bC(c)}function wC(c,u,d){return d(function(){EC(u)&&bC(c)})}function EC(c){var u=c.getSnapshot;c=c.value;try{var d=u();return!vi(c,d)}catch{return!0}}function bC(c){var u=zu(c,2);u!==null&&bi(u,c,2)}function z_(c){var u=ni();if(typeof c=="function"){var d=c;if(c=d(),ll){ir(!0);try{d()}finally{ir(!1)}}}return u.memoizedState=u.baseState=c,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:c},u}function AC(c,u,d,g){return c.baseState=d,j_(c,We,typeof g=="function"?g:La)}function rB(c,u,d,g,_){if(nm(c))throw Error(r(485));if(c=u.action,c!==null){var w={payload:_,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){w.listeners.push(R)}};Y.T!==null?d(!0):w.isTransition=!1,g(w),d=u.pending,d===null?(w.next=u.pending=w,TC(u,w)):(w.next=d.next,u.pending=d.next=w)}}function TC(c,u){var d=u.action,g=u.payload,_=c.state;if(u.isTransition){var w=Y.T,R={};Y.T=R;try{var V=d(_,g),W=Y.S;W!==null&&W(R,V),SC(c,u,V)}catch(et){G_(c,u,et)}finally{Y.T=w}}else try{w=d(_,g),SC(c,u,w)}catch(et){G_(c,u,et)}}function SC(c,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){CC(c,u,g)},function(g){return G_(c,u,g)}):CC(c,u,d)}function CC(c,u,d){u.status="fulfilled",u.value=d,IC(u),c.state=d,u=c.pending,u!==null&&(d=u.next,d===u?c.pending=null:(d=d.next,u.next=d,TC(c,d)))}function G_(c,u,d){var g=c.pending;if(c.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=d,IC(u),u=u.next;while(u!==g)}c.action=null}function IC(c){c=c.listeners;for(var u=0;u<c.length;u++)(0,c[u])()}function DC(c,u){return u}function OC(c,u){if(Ce){var d=Ze.formState;if(d!==null){t:{var g=ne;if(Ce){if(yn){e:{for(var _=yn,w=Fs;_.nodeType!==8;){if(!w){_=null;break e}if(_=fs(_.nextSibling),_===null){_=null;break e}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){yn=fs(_.nextSibling),g=_.data==="F!";break t}}sl(g)}g=!1}g&&(u=d[0])}}return d=ni(),d.memoizedState=d.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DC,lastRenderedState:u},d.queue=g,d=KC.bind(null,ne,g),g.dispatch=d,g=z_(!1),w=K_.bind(null,ne,!1,g.queue),g=ni(),_={state:u,dispatch:null,action:c,pending:null},g.queue=_,d=rB.bind(null,ne,_,w,d),_.dispatch=d,g.memoizedState=c,[u,d,!1]}function RC(c){var u=Fn();return NC(u,We,c)}function NC(c,u,d){if(u=j_(c,u,DC)[0],c=J0(La)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Id(u)}catch(R){throw R===Ed?q0:R}else g=u;u=Fn();var _=u.queue,w=_.dispatch;return d!==u.memoizedState&&(ne.flags|=2048,Zu(9,tm(),iB.bind(null,_,d),null)),[g,w,c]}function iB(c,u){c.action=u}function MC(c){var u=Fn(),d=We;if(d!==null)return NC(u,d,c);Fn(),u=u.memoizedState,d=Fn();var g=d.queue.dispatch;return d.memoizedState=c,[u,g,!1]}function Zu(c,u,d,g){return c={tag:c,create:d,deps:g,inst:u,next:null},u=ne.updateQueue,u===null&&(u=F_(),ne.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=c.next=c:(g=d.next,d.next=c,c.next=g,u.lastEffect=c),c}function tm(){return{destroy:void 0,resource:void 0}}function PC(){return Fn().memoizedState}function em(c,u,d,g){var _=ni();g=g===void 0?null:g,ne.flags|=c,_.memoizedState=Zu(1|u,tm(),d,g)}function Dd(c,u,d,g){var _=Fn();g=g===void 0?null:g;var w=_.memoizedState.inst;We!==null&&g!==null&&P_(g,We.memoizedState.deps)?_.memoizedState=Zu(u,w,d,g):(ne.flags|=c,_.memoizedState=Zu(1|u,w,d,g))}function kC(c,u){em(8390656,8,c,u)}function LC(c,u){Dd(2048,8,c,u)}function VC(c,u){return Dd(4,2,c,u)}function BC(c,u){return Dd(4,4,c,u)}function FC(c,u){if(typeof u=="function"){c=c();var d=u(c);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function UC(c,u,d){d=d!=null?d.concat([c]):null,Dd(4,4,FC.bind(null,u,c),d)}function W_(){}function jC(c,u){var d=Fn();u=u===void 0?null:u;var g=d.memoizedState;return u!==null&&P_(u,g[1])?g[0]:(d.memoizedState=[c,u],c)}function HC(c,u){var d=Fn();u=u===void 0?null:u;var g=d.memoizedState;if(u!==null&&P_(u,g[1]))return g[0];if(g=c(),ll){ir(!0);try{c()}finally{ir(!1)}}return d.memoizedState=[g,u],g}function $_(c,u,d){return d===void 0||(To&1073741824)!==0?c.memoizedState=u:(c.memoizedState=d,c=WI(),ne.lanes|=c,No|=c,d)}function zC(c,u,d,g){return vi(d,u)?d:Ku.current!==null?(c=$_(c,d,g),vi(c,u)||(or=!0),c):(To&42)===0?(or=!0,c.memoizedState=d):(c=WI(),ne.lanes|=c,No|=c,u)}function GC(c,u,d,g,_){var w=at.p;at.p=w!==0&&8>w?w:8;var R=Y.T,V={};Y.T=V,K_(c,!1,u,d);try{var W=_(),et=Y.S;if(et!==null&&et(V,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ht=tB(W,g);Od(c,u,ht,Ei(c))}else Od(c,u,g,Ei(c))}catch(pt){Od(c,u,{then:function(){},status:"rejected",reason:pt},Ei())}finally{at.p=w,Y.T=R}}function sB(){}function q_(c,u,d,g){if(c.tag!==5)throw Error(r(476));var _=WC(c).queue;GC(c,_,u,vt,d===null?sB:function(){return $C(c),d(g)})}function WC(c){var u=c.memoizedState;if(u!==null)return u;u={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:vt},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:d},next:null},c.memoizedState=u,c=c.alternate,c!==null&&(c.memoizedState=u),u}function $C(c){var u=WC(c).next.queue;Od(c,u,{},Ei())}function Y_(){return Dr(Yd)}function qC(){return Fn().memoizedState}function YC(){return Fn().memoizedState}function aB(c){for(var u=c.return;u!==null;){switch(u.tag){case 24:case 3:var d=Ei();c=bo(d);var g=Ao(u,c,d);g!==null&&(bi(g,u,d),Ad(g,u,d)),u={cache:A_()},c.payload=u;return}u=u.return}}function oB(c,u,d){var g=Ei();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},nm(c)?XC(u,d):(d=p_(c,u,d,g),d!==null&&(bi(d,c,g),QC(d,u,g)))}function KC(c,u,d){var g=Ei();Od(c,u,d,g)}function Od(c,u,d,g){var _={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(nm(c))XC(u,_);else{var w=c.alternate;if(c.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var R=u.lastRenderedState,V=w(R,d);if(_.hasEagerState=!0,_.eagerState=V,vi(V,R))return F0(c,u,_,0),Ze===null&&B0(),!1}catch{}finally{}if(d=p_(c,u,_,g),d!==null)return bi(d,c,g),QC(d,u,g),!0}return!1}function K_(c,u,d,g){if(g={lane:2,revertLane:Cx(),action:g,hasEagerState:!1,eagerState:null,next:null},nm(c)){if(u)throw Error(r(479))}else u=p_(c,d,g,2),u!==null&&bi(u,c,2)}function nm(c){var u=c.alternate;return c===ne||u!==null&&u===ne}function XC(c,u){Xu=X0=!0;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}function QC(c,u,d){if((d&4194048)!==0){var g=u.lanes;g&=c.pendingLanes,d|=g,u.lanes=d,Zf(c,d)}}var rm={readContext:Dr,use:Z0,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn},ZC={readContext:Dr,use:Z0,useCallback:function(c,u){return ni().memoizedState=[c,u===void 0?null:u],c},useContext:Dr,useEffect:kC,useImperativeHandle:function(c,u,d){d=d!=null?d.concat([c]):null,em(4194308,4,FC.bind(null,u,c),d)},useLayoutEffect:function(c,u){return em(4194308,4,c,u)},useInsertionEffect:function(c,u){em(4,2,c,u)},useMemo:function(c,u){var d=ni();u=u===void 0?null:u;var g=c();if(ll){ir(!0);try{c()}finally{ir(!1)}}return d.memoizedState=[g,u],g},useReducer:function(c,u,d){var g=ni();if(d!==void 0){var _=d(u);if(ll){ir(!0);try{d(u)}finally{ir(!1)}}}else _=u;return g.memoizedState=g.baseState=_,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:_},g.queue=c,c=c.dispatch=oB.bind(null,ne,c),[g.memoizedState,c]},useRef:function(c){var u=ni();return c={current:c},u.memoizedState=c},useState:function(c){c=z_(c);var u=c.queue,d=KC.bind(null,ne,u);return u.dispatch=d,[c.memoizedState,d]},useDebugValue:W_,useDeferredValue:function(c,u){var d=ni();return $_(d,c,u)},useTransition:function(){var c=z_(!1);return c=GC.bind(null,ne,c.queue,!0,!1),ni().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,u,d){var g=ne,_=ni();if(Ce){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),Ze===null)throw Error(r(349));(ve&124)!==0||_C(g,u,d)}_.memoizedState=d;var w={value:d,getSnapshot:u};return _.queue=w,kC(wC.bind(null,g,w,c),[c]),g.flags|=2048,Zu(9,tm(),xC.bind(null,g,w,d,u),null),d},useId:function(){var c=ni(),u=Ze.identifierPrefix;if(Ce){var d=Ma,g=Na;d=(g&~(1<<32-kn(g)-1)).toString(32)+d,u=""+u+"R"+d,d=Q0++,0<d&&(u+="H"+d.toString(32)),u+=""}else d=eB++,u=""+u+"r"+d.toString(32)+"";return c.memoizedState=u},useHostTransitionStatus:Y_,useFormState:OC,useActionState:OC,useOptimistic:function(c){var u=ni();u.memoizedState=u.baseState=c;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=K_.bind(null,ne,!0,d),d.dispatch=u,[c,u]},useMemoCache:U_,useCacheRefresh:function(){return ni().memoizedState=aB.bind(null,ne)}},JC={readContext:Dr,use:Z0,useCallback:jC,useContext:Dr,useEffect:LC,useImperativeHandle:UC,useInsertionEffect:VC,useLayoutEffect:BC,useMemo:HC,useReducer:J0,useRef:PC,useState:function(){return J0(La)},useDebugValue:W_,useDeferredValue:function(c,u){var d=Fn();return zC(d,We.memoizedState,c,u)},useTransition:function(){var c=J0(La)[0],u=Fn().memoizedState;return[typeof c=="boolean"?c:Id(c),u]},useSyncExternalStore:yC,useId:qC,useHostTransitionStatus:Y_,useFormState:RC,useActionState:RC,useOptimistic:function(c,u){var d=Fn();return AC(d,We,c,u)},useMemoCache:U_,useCacheRefresh:YC},cB={readContext:Dr,use:Z0,useCallback:jC,useContext:Dr,useEffect:LC,useImperativeHandle:UC,useInsertionEffect:VC,useLayoutEffect:BC,useMemo:HC,useReducer:H_,useRef:PC,useState:function(){return H_(La)},useDebugValue:W_,useDeferredValue:function(c,u){var d=Fn();return We===null?$_(d,c,u):zC(d,We.memoizedState,c,u)},useTransition:function(){var c=H_(La)[0],u=Fn().memoizedState;return[typeof c=="boolean"?c:Id(c),u]},useSyncExternalStore:yC,useId:qC,useHostTransitionStatus:Y_,useFormState:MC,useActionState:MC,useOptimistic:function(c,u){var d=Fn();return We!==null?AC(d,We,c,u):(d.baseState=c,[c,d.queue.dispatch])},useMemoCache:U_,useCacheRefresh:YC},Ju=null,Rd=0;function im(c){var u=Rd;return Rd+=1,Ju===null&&(Ju=[]),uC(Ju,c,u)}function Nd(c,u){u=u.props.ref,c.ref=u!==void 0?u:null}function sm(c,u){throw u.$$typeof===p?Error(r(525)):(c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c)))}function tI(c){var u=c._init;return u(c._payload)}function eI(c){function u(K,q){if(c){var J=K.deletions;J===null?(K.deletions=[q],K.flags|=16):J.push(q)}}function d(K,q){if(!c)return null;for(;q!==null;)u(K,q),q=q.sibling;return null}function g(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function _(K,q){return K=Ra(K,q),K.index=0,K.sibling=null,K}function w(K,q,J){return K.index=J,c?(J=K.alternate,J!==null?(J=J.index,J<q?(K.flags|=67108866,q):J):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function R(K){return c&&K.alternate===null&&(K.flags|=67108866),K}function V(K,q,J,ft){return q===null||q.tag!==6?(q=m_(J,K.mode,ft),q.return=K,q):(q=_(q,J),q.return=K,q)}function W(K,q,J,ft){var Nt=J.type;return Nt===x?ht(K,q,J.props.children,ft,J.key):q!==null&&(q.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===I&&tI(Nt)===q.type)?(q=_(q,J.props),Nd(q,J),q.return=K,q):(q=j0(J.type,J.key,J.props,null,K.mode,ft),Nd(q,J),q.return=K,q)}function et(K,q,J,ft){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=v_(J,K.mode,ft),q.return=K,q):(q=_(q,J.children||[]),q.return=K,q)}function ht(K,q,J,ft,Nt){return q===null||q.tag!==7?(q=el(J,K.mode,ft,Nt),q.return=K,q):(q=_(q,J),q.return=K,q)}function pt(K,q,J){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=m_(""+q,K.mode,J),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case m:return J=j0(q.type,q.key,q.props,null,K.mode,J),Nd(J,q),J.return=K,J;case v:return q=v_(q,K.mode,J),q.return=K,q;case I:var ft=q._init;return q=ft(q._payload),pt(K,q,J)}if(wt(q)||z(q))return q=el(q,K.mode,J,null),q.return=K,q;if(typeof q.then=="function")return pt(K,im(q),J);if(q.$$typeof===D)return pt(K,W0(K,q),J);sm(K,q)}return null}function it(K,q,J,ft){var Nt=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Nt!==null?null:V(K,q,""+J,ft);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case m:return J.key===Nt?W(K,q,J,ft):null;case v:return J.key===Nt?et(K,q,J,ft):null;case I:return Nt=J._init,J=Nt(J._payload),it(K,q,J,ft)}if(wt(J)||z(J))return Nt!==null?null:ht(K,q,J,ft,null);if(typeof J.then=="function")return it(K,q,im(J),ft);if(J.$$typeof===D)return it(K,q,W0(K,J),ft);sm(K,J)}return null}function st(K,q,J,ft,Nt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return K=K.get(J)||null,V(q,K,""+ft,Nt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case m:return K=K.get(ft.key===null?J:ft.key)||null,W(q,K,ft,Nt);case v:return K=K.get(ft.key===null?J:ft.key)||null,et(q,K,ft,Nt);case I:var oe=ft._init;return ft=oe(ft._payload),st(K,q,J,ft,Nt)}if(wt(ft)||z(ft))return K=K.get(J)||null,ht(q,K,ft,Nt,null);if(typeof ft.then=="function")return st(K,q,J,im(ft),Nt);if(ft.$$typeof===D)return st(K,q,J,W0(q,ft),Nt);sm(q,ft)}return null}function Kt(K,q,J,ft){for(var Nt=null,oe=null,Bt=q,$t=q=0,lr=null;Bt!==null&&$t<J.length;$t++){Bt.index>$t?(lr=Bt,Bt=null):lr=Bt.sibling;var Ae=it(K,Bt,J[$t],ft);if(Ae===null){Bt===null&&(Bt=lr);break}c&&Bt&&Ae.alternate===null&&u(K,Bt),q=w(Ae,q,$t),oe===null?Nt=Ae:oe.sibling=Ae,oe=Ae,Bt=lr}if($t===J.length)return d(K,Bt),Ce&&rl(K,$t),Nt;if(Bt===null){for(;$t<J.length;$t++)Bt=pt(K,J[$t],ft),Bt!==null&&(q=w(Bt,q,$t),oe===null?Nt=Bt:oe.sibling=Bt,oe=Bt);return Ce&&rl(K,$t),Nt}for(Bt=g(Bt);$t<J.length;$t++)lr=st(Bt,K,$t,J[$t],ft),lr!==null&&(c&&lr.alternate!==null&&Bt.delete(lr.key===null?$t:lr.key),q=w(lr,q,$t),oe===null?Nt=lr:oe.sibling=lr,oe=lr);return c&&Bt.forEach(function(jo){return u(K,jo)}),Ce&&rl(K,$t),Nt}function Wt(K,q,J,ft){if(J==null)throw Error(r(151));for(var Nt=null,oe=null,Bt=q,$t=q=0,lr=null,Ae=J.next();Bt!==null&&!Ae.done;$t++,Ae=J.next()){Bt.index>$t?(lr=Bt,Bt=null):lr=Bt.sibling;var jo=it(K,Bt,Ae.value,ft);if(jo===null){Bt===null&&(Bt=lr);break}c&&Bt&&jo.alternate===null&&u(K,Bt),q=w(jo,q,$t),oe===null?Nt=jo:oe.sibling=jo,oe=jo,Bt=lr}if(Ae.done)return d(K,Bt),Ce&&rl(K,$t),Nt;if(Bt===null){for(;!Ae.done;$t++,Ae=J.next())Ae=pt(K,Ae.value,ft),Ae!==null&&(q=w(Ae,q,$t),oe===null?Nt=Ae:oe.sibling=Ae,oe=Ae);return Ce&&rl(K,$t),Nt}for(Bt=g(Bt);!Ae.done;$t++,Ae=J.next())Ae=st(Bt,K,$t,Ae.value,ft),Ae!==null&&(c&&Ae.alternate!==null&&Bt.delete(Ae.key===null?$t:Ae.key),q=w(Ae,q,$t),oe===null?Nt=Ae:oe.sibling=Ae,oe=Ae);return c&&Bt.forEach(function(lF){return u(K,lF)}),Ce&&rl(K,$t),Nt}function qe(K,q,J,ft){if(typeof J=="object"&&J!==null&&J.type===x&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case m:t:{for(var Nt=J.key;q!==null;){if(q.key===Nt){if(Nt=J.type,Nt===x){if(q.tag===7){d(K,q.sibling),ft=_(q,J.props.children),ft.return=K,K=ft;break t}}else if(q.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===I&&tI(Nt)===q.type){d(K,q.sibling),ft=_(q,J.props),Nd(ft,J),ft.return=K,K=ft;break t}d(K,q);break}else u(K,q);q=q.sibling}J.type===x?(ft=el(J.props.children,K.mode,ft,J.key),ft.return=K,K=ft):(ft=j0(J.type,J.key,J.props,null,K.mode,ft),Nd(ft,J),ft.return=K,K=ft)}return R(K);case v:t:{for(Nt=J.key;q!==null;){if(q.key===Nt)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){d(K,q.sibling),ft=_(q,J.children||[]),ft.return=K,K=ft;break t}else{d(K,q);break}else u(K,q);q=q.sibling}ft=v_(J,K.mode,ft),ft.return=K,K=ft}return R(K);case I:return Nt=J._init,J=Nt(J._payload),qe(K,q,J,ft)}if(wt(J))return Kt(K,q,J,ft);if(z(J)){if(Nt=z(J),typeof Nt!="function")throw Error(r(150));return J=Nt.call(J),Wt(K,q,J,ft)}if(typeof J.then=="function")return qe(K,q,im(J),ft);if(J.$$typeof===D)return qe(K,q,W0(K,J),ft);sm(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,q!==null&&q.tag===6?(d(K,q.sibling),ft=_(q,J),ft.return=K,K=ft):(d(K,q),ft=m_(J,K.mode,ft),ft.return=K,K=ft),R(K)):d(K,q)}return function(K,q,J,ft){try{Rd=0;var Nt=qe(K,q,J,ft);return Ju=null,Nt}catch(Bt){if(Bt===Ed||Bt===q0)throw Bt;var oe=yi(29,Bt,null,K.mode);return oe.lanes=ft,oe.return=K,oe}finally{}}}var th=eI(!0),nI=eI(!1),Gi=$(null),Us=null;function So(c){var u=c.alternate;tt(qn,qn.current&1),tt(Gi,c),Us===null&&(u===null||Ku.current!==null||u.memoizedState!==null)&&(Us=c)}function rI(c){if(c.tag===22){if(tt(qn,qn.current),tt(Gi,c),Us===null){var u=c.alternate;u!==null&&u.memoizedState!==null&&(Us=c)}}else Co()}function Co(){tt(qn,qn.current),tt(Gi,Gi.current)}function Va(c){ot(Gi),Us===c&&(Us=null),ot(qn)}var qn=$(0);function am(c){for(var u=c;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Fx(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function X_(c,u,d,g){u=c.memoizedState,d=d(g,u),d=d==null?u:f({},u,d),c.memoizedState=d,c.lanes===0&&(c.updateQueue.baseState=d)}var Q_={enqueueSetState:function(c,u,d){c=c._reactInternals;var g=Ei(),_=bo(g);_.payload=u,d!=null&&(_.callback=d),u=Ao(c,_,g),u!==null&&(bi(u,c,g),Ad(u,c,g))},enqueueReplaceState:function(c,u,d){c=c._reactInternals;var g=Ei(),_=bo(g);_.tag=1,_.payload=u,d!=null&&(_.callback=d),u=Ao(c,_,g),u!==null&&(bi(u,c,g),Ad(u,c,g))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var d=Ei(),g=bo(d);g.tag=2,u!=null&&(g.callback=u),u=Ao(c,g,d),u!==null&&(bi(u,c,d),Ad(u,c,d))}};function iI(c,u,d,g,_,w,R){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(g,w,R):u.prototype&&u.prototype.isPureReactComponent?!pd(d,g)||!pd(_,w):!0}function sI(c,u,d,g){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,g),u.state!==c&&Q_.enqueueReplaceState(u,u.state,null)}function ul(c,u){var d=u;if("ref"in u){d={};for(var g in u)g!=="ref"&&(d[g]=u[g])}if(c=c.defaultProps){d===u&&(d=f({},d));for(var _ in c)d[_]===void 0&&(d[_]=c[_])}return d}var om=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function aI(c){om(c)}function oI(c){console.error(c)}function cI(c){om(c)}function cm(c,u){try{var d=c.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function lI(c,u,d){try{var g=c.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Z_(c,u,d){return d=bo(d),d.tag=3,d.payload={element:null},d.callback=function(){cm(c,u)},d}function uI(c){return c=bo(c),c.tag=3,c}function hI(c,u,d,g){var _=d.type.getDerivedStateFromError;if(typeof _=="function"){var w=g.value;c.payload=function(){return _(w)},c.callback=function(){lI(u,d,g)}}var R=d.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(c.callback=function(){lI(u,d,g),typeof _!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var V=g.stack;this.componentDidCatch(g.value,{componentStack:V!==null?V:""})})}function lB(c,u,d,g,_){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=d.alternate,u!==null&&_d(u,d,_,!0),d=Gi.current,d!==null){switch(d.tag){case 13:return Us===null?Ex():d.alternate===null&&_n===0&&(_n=3),d.flags&=-257,d.flags|=65536,d.lanes=_,g===C_?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([g]):u.add(g),Ax(c,g,_)),!1;case 22:return d.flags|=65536,g===C_?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([g]):d.add(g)),Ax(c,g,_)),!1}throw Error(r(435,d.tag))}return Ax(c,g,_),Ex(),!1}if(Ce)return u=Gi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,g!==x_&&(c=Error(r(422),{cause:g}),yd(Ui(c,d)))):(g!==x_&&(u=Error(r(423),{cause:g}),yd(Ui(u,d))),c=c.current.alternate,c.flags|=65536,_&=-_,c.lanes|=_,g=Ui(g,d),_=Z_(c.stateNode,g,_),O_(c,_),_n!==4&&(_n=2)),!1;var w=Error(r(520),{cause:g});if(w=Ui(w,d),Fd===null?Fd=[w]:Fd.push(w),_n!==4&&(_n=2),u===null)return!0;g=Ui(g,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,c=_&-_,d.lanes|=c,c=Z_(d.stateNode,g,c),O_(d,c),!1;case 1:if(u=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Mo===null||!Mo.has(w))))return d.flags|=65536,_&=-_,d.lanes|=_,_=uI(_),hI(_,c,d,g),O_(d,_),!1}d=d.return}while(d!==null);return!1}var fI=Error(r(461)),or=!1;function xr(c,u,d,g){u.child=c===null?nI(u,null,d,g):th(u,c.child,d,g)}function dI(c,u,d,g,_){d=d.render;var w=u.ref;if("ref"in g){var R={};for(var V in g)V!=="ref"&&(R[V]=g[V])}else R=g;return ol(u),g=k_(c,u,d,R,w,_),V=L_(),c!==null&&!or?(V_(c,u,_),Ba(c,u,_)):(Ce&&V&&y_(u),u.flags|=1,xr(c,u,g,_),u.child)}function pI(c,u,d,g,_){if(c===null){var w=d.type;return typeof w=="function"&&!g_(w)&&w.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=w,gI(c,u,w,g,_)):(c=j0(d.type,null,g,u,u.mode,_),c.ref=u.ref,c.return=u,u.child=c)}if(w=c.child,!ax(c,_)){var R=w.memoizedProps;if(d=d.compare,d=d!==null?d:pd,d(R,g)&&c.ref===u.ref)return Ba(c,u,_)}return u.flags|=1,c=Ra(w,g),c.ref=u.ref,c.return=u,u.child=c}function gI(c,u,d,g,_){if(c!==null){var w=c.memoizedProps;if(pd(w,g)&&c.ref===u.ref)if(or=!1,u.pendingProps=g=w,ax(c,_))(c.flags&131072)!==0&&(or=!0);else return u.lanes=c.lanes,Ba(c,u,_)}return J_(c,u,d,g,_)}function mI(c,u,d){var g=u.pendingProps,_=g.children,w=c!==null?c.memoizedState:null;if(g.mode==="hidden"){if((u.flags&128)!==0){if(g=w!==null?w.baseLanes|d:d,c!==null){for(_=u.child=c.child,w=0;_!==null;)w=w|_.lanes|_.childLanes,_=_.sibling;u.childLanes=w&~g}else u.childLanes=0,u.child=null;return vI(c,u,g,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},c!==null&&$0(u,w!==null?w.cachePool:null),w!==null?gC(u,w):N_(),rI(u);else return u.lanes=u.childLanes=536870912,vI(c,u,w!==null?w.baseLanes|d:d,d)}else w!==null?($0(u,w.cachePool),gC(u,w),Co(),u.memoizedState=null):(c!==null&&$0(u,null),N_(),Co());return xr(c,u,_,d),u.child}function vI(c,u,d,g){var _=S_();return _=_===null?null:{parent:$n._currentValue,pool:_},u.memoizedState={baseLanes:d,cachePool:_},c!==null&&$0(u,null),N_(),rI(u),c!==null&&_d(c,u,g,!0),null}function lm(c,u){var d=u.ref;if(d===null)c!==null&&c.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(c===null||c.ref!==d)&&(u.flags|=4194816)}}function J_(c,u,d,g,_){return ol(u),d=k_(c,u,d,g,void 0,_),g=L_(),c!==null&&!or?(V_(c,u,_),Ba(c,u,_)):(Ce&&g&&y_(u),u.flags|=1,xr(c,u,d,_),u.child)}function yI(c,u,d,g,_,w){return ol(u),u.updateQueue=null,d=vC(u,g,d,_),mC(c),g=L_(),c!==null&&!or?(V_(c,u,w),Ba(c,u,w)):(Ce&&g&&y_(u),u.flags|=1,xr(c,u,d,w),u.child)}function _I(c,u,d,g,_){if(ol(u),u.stateNode===null){var w=Gu,R=d.contextType;typeof R=="object"&&R!==null&&(w=Dr(R)),w=new d(g,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Q_,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=g,w.state=u.memoizedState,w.refs={},I_(u),R=d.contextType,w.context=typeof R=="object"&&R!==null?Dr(R):Gu,w.state=u.memoizedState,R=d.getDerivedStateFromProps,typeof R=="function"&&(X_(u,d,R,g),w.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(R=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),R!==w.state&&Q_.enqueueReplaceState(w,w.state,null),Sd(u,g,w,_),Td(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(c===null){w=u.stateNode;var V=u.memoizedProps,W=ul(d,V);w.props=W;var et=w.context,ht=d.contextType;R=Gu,typeof ht=="object"&&ht!==null&&(R=Dr(ht));var pt=d.getDerivedStateFromProps;ht=typeof pt=="function"||typeof w.getSnapshotBeforeUpdate=="function",V=u.pendingProps!==V,ht||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(V||et!==R)&&sI(u,w,g,R),Eo=!1;var it=u.memoizedState;w.state=it,Sd(u,g,w,_),Td(),et=u.memoizedState,V||it!==et||Eo?(typeof pt=="function"&&(X_(u,d,pt,g),et=u.memoizedState),(W=Eo||iI(u,d,W,g,it,et,R))?(ht||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=et),w.props=g,w.state=et,w.context=R,g=W):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{w=u.stateNode,D_(c,u),R=u.memoizedProps,ht=ul(d,R),w.props=ht,pt=u.pendingProps,it=w.context,et=d.contextType,W=Gu,typeof et=="object"&&et!==null&&(W=Dr(et)),V=d.getDerivedStateFromProps,(et=typeof V=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==pt||it!==W)&&sI(u,w,g,W),Eo=!1,it=u.memoizedState,w.state=it,Sd(u,g,w,_),Td();var st=u.memoizedState;R!==pt||it!==st||Eo||c!==null&&c.dependencies!==null&&G0(c.dependencies)?(typeof V=="function"&&(X_(u,d,V,g),st=u.memoizedState),(ht=Eo||iI(u,d,ht,g,it,st,W)||c!==null&&c.dependencies!==null&&G0(c.dependencies))?(et||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,st,W),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,st,W)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===c.memoizedProps&&it===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===c.memoizedProps&&it===c.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=st),w.props=g,w.state=st,w.context=W,g=ht):(typeof w.componentDidUpdate!="function"||R===c.memoizedProps&&it===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===c.memoizedProps&&it===c.memoizedState||(u.flags|=1024),g=!1)}return w=g,lm(c,u),g=(u.flags&128)!==0,w||g?(w=u.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,c!==null&&g?(u.child=th(u,c.child,null,_),u.child=th(u,null,d,_)):xr(c,u,d,_),u.memoizedState=w.state,c=u.child):c=Ba(c,u,_),c}function xI(c,u,d,g){return vd(),u.flags|=256,xr(c,u,d,g),u.child}var tx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ex(c){return{baseLanes:c,cachePool:oC()}}function nx(c,u,d){return c=c!==null?c.childLanes&~d:0,u&&(c|=Wi),c}function wI(c,u,d){var g=u.pendingProps,_=!1,w=(u.flags&128)!==0,R;if((R=w)||(R=c!==null&&c.memoizedState===null?!1:(qn.current&2)!==0),R&&(_=!0,u.flags&=-129),R=(u.flags&32)!==0,u.flags&=-33,c===null){if(Ce){if(_?So(u):Co(),Ce){var V=yn,W;if(W=V){t:{for(W=V,V=Fs;W.nodeType!==8;){if(!V){V=null;break t}if(W=fs(W.nextSibling),W===null){V=null;break t}}V=W}V!==null?(u.memoizedState={dehydrated:V,treeContext:nl!==null?{id:Na,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},W=yi(18,null,null,0),W.stateNode=V,W.return=u,u.child=W,Wr=u,yn=null,W=!0):W=!1}W||sl(u)}if(V=u.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Fx(V)?u.lanes=32:u.lanes=536870912,null;Va(u)}return V=g.children,g=g.fallback,_?(Co(),_=u.mode,V=um({mode:"hidden",children:V},_),g=el(g,_,d,null),V.return=u,g.return=u,V.sibling=g,u.child=V,_=u.child,_.memoizedState=ex(d),_.childLanes=nx(c,R,d),u.memoizedState=tx,g):(So(u),rx(u,V))}if(W=c.memoizedState,W!==null&&(V=W.dehydrated,V!==null)){if(w)u.flags&256?(So(u),u.flags&=-257,u=ix(c,u,d)):u.memoizedState!==null?(Co(),u.child=c.child,u.flags|=128,u=null):(Co(),_=g.fallback,V=u.mode,g=um({mode:"visible",children:g.children},V),_=el(_,V,d,null),_.flags|=2,g.return=u,_.return=u,g.sibling=_,u.child=g,th(u,c.child,null,d),g=u.child,g.memoizedState=ex(d),g.childLanes=nx(c,R,d),u.memoizedState=tx,u=_);else if(So(u),Fx(V)){if(R=V.nextSibling&&V.nextSibling.dataset,R)var et=R.dgst;R=et,g=Error(r(419)),g.stack="",g.digest=R,yd({value:g,source:null,stack:null}),u=ix(c,u,d)}else if(or||_d(c,u,d,!1),R=(d&c.childLanes)!==0,or||R){if(R=Ze,R!==null&&(g=d&-d,g=(g&42)!==0?1:po(g),g=(g&(R.suspendedLanes|d))!==0?0:g,g!==0&&g!==W.retryLane))throw W.retryLane=g,zu(c,g),bi(R,c,g),fI;V.data==="$?"||Ex(),u=ix(c,u,d)}else V.data==="$?"?(u.flags|=192,u.child=c.child,u=null):(c=W.treeContext,yn=fs(V.nextSibling),Wr=u,Ce=!0,il=null,Fs=!1,c!==null&&(Hi[zi++]=Na,Hi[zi++]=Ma,Hi[zi++]=nl,Na=c.id,Ma=c.overflow,nl=u),u=rx(u,g.children),u.flags|=4096);return u}return _?(Co(),_=g.fallback,V=u.mode,W=c.child,et=W.sibling,g=Ra(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&65011712,et!==null?_=Ra(et,_):(_=el(_,V,d,null),_.flags|=2),_.return=u,g.return=u,g.sibling=_,u.child=g,g=_,_=u.child,V=c.child.memoizedState,V===null?V=ex(d):(W=V.cachePool,W!==null?(et=$n._currentValue,W=W.parent!==et?{parent:et,pool:et}:W):W=oC(),V={baseLanes:V.baseLanes|d,cachePool:W}),_.memoizedState=V,_.childLanes=nx(c,R,d),u.memoizedState=tx,g):(So(u),d=c.child,c=d.sibling,d=Ra(d,{mode:"visible",children:g.children}),d.return=u,d.sibling=null,c!==null&&(R=u.deletions,R===null?(u.deletions=[c],u.flags|=16):R.push(c)),u.child=d,u.memoizedState=null,d)}function rx(c,u){return u=um({mode:"visible",children:u},c.mode),u.return=c,c.child=u}function um(c,u){return c=yi(22,c,null,u),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function ix(c,u,d){return th(u,c.child,null,d),c=rx(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function EI(c,u,d){c.lanes|=u;var g=c.alternate;g!==null&&(g.lanes|=u),E_(c.return,u,d)}function sx(c,u,d,g,_){var w=c.memoizedState;w===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:_}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=d,w.tailMode=_)}function bI(c,u,d){var g=u.pendingProps,_=g.revealOrder,w=g.tail;if(xr(c,u,g.children,d),g=qn.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&EI(c,d,u);else if(c.tag===19)EI(c,d,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break t;for(;c.sibling===null;){if(c.return===null||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}g&=1}switch(tt(qn,g),_){case"forwards":for(d=u.child,_=null;d!==null;)c=d.alternate,c!==null&&am(c)===null&&(_=d),d=d.sibling;d=_,d===null?(_=u.child,u.child=null):(_=d.sibling,d.sibling=null),sx(u,!1,_,d,w);break;case"backwards":for(d=null,_=u.child,u.child=null;_!==null;){if(c=_.alternate,c!==null&&am(c)===null){u.child=_;break}c=_.sibling,_.sibling=d,d=_,_=c}sx(u,!0,d,null,w);break;case"together":sx(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ba(c,u,d){if(c!==null&&(u.dependencies=c.dependencies),No|=u.lanes,(d&u.childLanes)===0)if(c!==null){if(_d(c,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,d=Ra(c,c.pendingProps),u.child=d,d.return=u;c.sibling!==null;)c=c.sibling,d=d.sibling=Ra(c,c.pendingProps),d.return=u;d.sibling=null}return u.child}function ax(c,u){return(c.lanes&u)!==0?!0:(c=c.dependencies,!!(c!==null&&G0(c)))}function uB(c,u,d){switch(u.tag){case 3:Mt(u,u.stateNode.containerInfo),wo(u,$n,c.memoizedState.cache),vd();break;case 27:case 5:Ut(u);break;case 4:Mt(u,u.stateNode.containerInfo);break;case 10:wo(u,u.type,u.memoizedProps.value);break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(So(u),u.flags|=128,null):(d&u.child.childLanes)!==0?wI(c,u,d):(So(u),c=Ba(c,u,d),c!==null?c.sibling:null);So(u);break;case 19:var _=(c.flags&128)!==0;if(g=(d&u.childLanes)!==0,g||(_d(c,u,d,!1),g=(d&u.childLanes)!==0),_){if(g)return bI(c,u,d);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),tt(qn,qn.current),g)break;return null;case 22:case 23:return u.lanes=0,mI(c,u,d);case 24:wo(u,$n,c.memoizedState.cache)}return Ba(c,u,d)}function AI(c,u,d){if(c!==null)if(c.memoizedProps!==u.pendingProps)or=!0;else{if(!ax(c,d)&&(u.flags&128)===0)return or=!1,uB(c,u,d);or=(c.flags&131072)!==0}else or=!1,Ce&&(u.flags&1048576)!==0&&tC(u,z0,u.index);switch(u.lanes=0,u.tag){case 16:t:{c=u.pendingProps;var g=u.elementType,_=g._init;if(g=_(g._payload),u.type=g,typeof g=="function")g_(g)?(c=ul(g,c),u.tag=1,u=_I(null,u,g,c,d)):(u.tag=0,u=J_(null,u,g,c,d));else{if(g!=null){if(_=g.$$typeof,_===P){u.tag=11,u=dI(null,u,g,c,d);break t}else if(_===M){u.tag=14,u=pI(null,u,g,c,d);break t}}throw u=yt(g)||g,Error(r(306,u,""))}}return u;case 0:return J_(c,u,u.type,u.pendingProps,d);case 1:return g=u.type,_=ul(g,u.pendingProps),_I(c,u,g,_,d);case 3:t:{if(Mt(u,u.stateNode.containerInfo),c===null)throw Error(r(387));g=u.pendingProps;var w=u.memoizedState;_=w.element,D_(c,u),Sd(u,g,null,d);var R=u.memoizedState;if(g=R.cache,wo(u,$n,g),g!==w.cache&&b_(u,[$n],d,!0),Td(),g=R.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:R.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=xI(c,u,g,d);break t}else if(g!==_){_=Ui(Error(r(424)),u),yd(_),u=xI(c,u,g,d);break t}else{switch(c=u.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(yn=fs(c.firstChild),Wr=u,Ce=!0,il=null,Fs=!0,d=nI(u,null,g,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(vd(),g===_){u=Ba(c,u,d);break t}xr(c,u,g,d)}u=u.child}return u;case 26:return lm(c,u),c===null?(d=ID(u.type,null,u.pendingProps,null))?u.memoizedState=d:Ce||(d=u.type,c=u.pendingProps,g=Am(Et.current).createElement(d),g[zn]=u,g[Ln]=c,Er(g,d,c),Tn(g),u.stateNode=g):u.memoizedState=ID(u.type,c.memoizedProps,u.pendingProps,c.memoizedState),null;case 27:return Ut(u),c===null&&Ce&&(g=u.stateNode=TD(u.type,u.pendingProps,Et.current),Wr=u,Fs=!0,_=yn,Lo(u.type)?(Ux=_,yn=fs(g.firstChild)):yn=_),xr(c,u,u.pendingProps.children,d),lm(c,u),c===null&&(u.flags|=4194304),u.child;case 5:return c===null&&Ce&&((_=g=yn)&&(g=BB(g,u.type,u.pendingProps,Fs),g!==null?(u.stateNode=g,Wr=u,yn=fs(g.firstChild),Fs=!1,_=!0):_=!1),_||sl(u)),Ut(u),_=u.type,w=u.pendingProps,R=c!==null?c.memoizedProps:null,g=w.children,Lx(_,w)?g=null:R!==null&&Lx(_,R)&&(u.flags|=32),u.memoizedState!==null&&(_=k_(c,u,nB,null,null,d),Yd._currentValue=_),lm(c,u),xr(c,u,g,d),u.child;case 6:return c===null&&Ce&&((c=d=yn)&&(d=FB(d,u.pendingProps,Fs),d!==null?(u.stateNode=d,Wr=u,yn=null,c=!0):c=!1),c||sl(u)),null;case 13:return wI(c,u,d);case 4:return Mt(u,u.stateNode.containerInfo),g=u.pendingProps,c===null?u.child=th(u,null,g,d):xr(c,u,g,d),u.child;case 11:return dI(c,u,u.type,u.pendingProps,d);case 7:return xr(c,u,u.pendingProps,d),u.child;case 8:return xr(c,u,u.pendingProps.children,d),u.child;case 12:return xr(c,u,u.pendingProps.children,d),u.child;case 10:return g=u.pendingProps,wo(u,u.type,g.value),xr(c,u,g.children,d),u.child;case 9:return _=u.type._context,g=u.pendingProps.children,ol(u),_=Dr(_),g=g(_),u.flags|=1,xr(c,u,g,d),u.child;case 14:return pI(c,u,u.type,u.pendingProps,d);case 15:return gI(c,u,u.type,u.pendingProps,d);case 19:return bI(c,u,d);case 31:return g=u.pendingProps,d=u.mode,g={mode:g.mode,children:g.children},c===null?(d=um(g,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=Ra(c.child,g),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return mI(c,u,d);case 24:return ol(u),g=Dr($n),c===null?(_=S_(),_===null&&(_=Ze,w=A_(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=d),_=w),u.memoizedState={parent:g,cache:_},I_(u),wo(u,$n,_)):((c.lanes&d)!==0&&(D_(c,u),Sd(u,null,null,d),Td()),_=c.memoizedState,w=u.memoizedState,_.parent!==g?(_={parent:g,cache:g},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),wo(u,$n,g)):(g=w.cache,wo(u,$n,g),g!==_.cache&&b_(u,[$n],d,!0))),xr(c,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Fa(c){c.flags|=4}function TI(c,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!MD(u)){if(u=Gi.current,u!==null&&((ve&4194048)===ve?Us!==null:(ve&62914560)!==ve&&(ve&536870912)===0||u!==Us))throw bd=C_,cC;c.flags|=8192}}function hm(c,u){u!==null&&(c.flags|=4),c.flags&16384&&(u=c.tag!==22?Xf():536870912,c.lanes|=u,ih|=u)}function Md(c,u){if(!Ce)switch(c.tailMode){case"hidden":u=c.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?c.tail=null:d.sibling=null;break;case"collapsed":d=c.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:g.sibling=null}}function fn(c){var u=c.alternate!==null&&c.alternate.child===c.child,d=0,g=0;if(u)for(var _=c.child;_!==null;)d|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=c,_=_.sibling;else for(_=c.child;_!==null;)d|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=c,_=_.sibling;return c.subtreeFlags|=g,c.childLanes=d,u}function hB(c,u,d){var g=u.pendingProps;switch(__(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(u),null;case 1:return fn(u),null;case 3:return d=u.stateNode,g=null,c!==null&&(g=c.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),ka($n),Rt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(c===null||c.child===null)&&(md(u)?Fa(u):c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,rC())),fn(u),null;case 26:return d=u.memoizedState,c===null?(Fa(u),d!==null?(fn(u),TI(u,d)):(fn(u),u.flags&=-16777217)):d?d!==c.memoizedState?(Fa(u),fn(u),TI(u,d)):(fn(u),u.flags&=-16777217):(c.memoizedProps!==g&&Fa(u),fn(u),u.flags&=-16777217),null;case 27:Jt(u),d=Et.current;var _=u.type;if(c!==null&&u.stateNode!=null)c.memoizedProps!==g&&Fa(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return fn(u),null}c=gt.current,md(u)?eC(u):(c=TD(_,g,d),u.stateNode=c,Fa(u))}return fn(u),null;case 5:if(Jt(u),d=u.type,c!==null&&u.stateNode!=null)c.memoizedProps!==g&&Fa(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return fn(u),null}if(c=gt.current,md(u))eC(u);else{switch(_=Am(Et.current),c){case 1:c=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:c=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":c=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":c=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":c=_.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof g.is=="string"?_.createElement("select",{is:g.is}):_.createElement("select"),g.multiple?c.multiple=!0:g.size&&(c.size=g.size);break;default:c=typeof g.is=="string"?_.createElement(d,{is:g.is}):_.createElement(d)}}c[zn]=u,c[Ln]=g;t:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)c.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break t;for(;_.sibling===null;){if(_.return===null||_.return===u)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=c;t:switch(Er(c,d,g),d){case"button":case"input":case"select":case"textarea":c=!!g.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Fa(u)}}return fn(u),u.flags&=-16777217,null;case 6:if(c&&u.stateNode!=null)c.memoizedProps!==g&&Fa(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(r(166));if(c=Et.current,md(u)){if(c=u.stateNode,d=u.memoizedProps,g=null,_=Wr,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}c[zn]=u,c=!!(c.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||yD(c.nodeValue,d)),c||sl(u)}else c=Am(c).createTextNode(g),c[zn]=u,u.stateNode=c}return fn(u),null;case 13:if(g=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(_=md(u),g!==null&&g.dehydrated!==null){if(c===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[zn]=u}else vd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;fn(u),_=!1}else _=rC(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(Va(u),u):(Va(u),null)}if(Va(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=g!==null,c=c!==null&&c.memoizedState!==null,d){g=u.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool);var w=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==_&&(g.flags|=2048)}return d!==c&&d&&(u.child.flags|=8192),hm(u,u.updateQueue),fn(u),null;case 4:return Rt(),c===null&&Rx(u.stateNode.containerInfo),fn(u),null;case 10:return ka(u.type),fn(u),null;case 19:if(ot(qn),_=u.memoizedState,_===null)return fn(u),null;if(g=(u.flags&128)!==0,w=_.rendering,w===null)if(g)Md(_,!1);else{if(_n!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(w=am(c),w!==null){for(u.flags|=128,Md(_,!1),c=w.updateQueue,u.updateQueue=c,hm(u,c),u.subtreeFlags=0,c=d,d=u.child;d!==null;)JS(d,c),d=d.sibling;return tt(qn,qn.current&1|2),u.child}c=c.sibling}_.tail!==null&&Vt()>pm&&(u.flags|=128,g=!0,Md(_,!1),u.lanes=4194304)}else{if(!g)if(c=am(w),c!==null){if(u.flags|=128,g=!0,c=c.updateQueue,u.updateQueue=c,hm(u,c),Md(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!Ce)return fn(u),null}else 2*Vt()-_.renderingStartTime>pm&&d!==536870912&&(u.flags|=128,g=!0,Md(_,!1),u.lanes=4194304);_.isBackwards?(w.sibling=u.child,u.child=w):(c=_.last,c!==null?c.sibling=w:u.child=w,_.last=w)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Vt(),u.sibling=null,c=qn.current,tt(qn,g?c&1|2:c&1),u):(fn(u),null);case 22:case 23:return Va(u),M_(),g=u.memoizedState!==null,c!==null?c.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(d&536870912)!==0&&(u.flags&128)===0&&(fn(u),u.subtreeFlags&6&&(u.flags|=8192)):fn(u),d=u.updateQueue,d!==null&&hm(u,d.retryQueue),d=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(d=c.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048),c!==null&&ot(cl),null;case 24:return d=null,c!==null&&(d=c.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),ka($n),fn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function fB(c,u){switch(__(u),u.tag){case 1:return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return ka($n),Rt(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 26:case 27:case 5:return Jt(u),null;case 13:if(Va(u),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));vd()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return ot(qn),null;case 4:return Rt(),null;case 10:return ka(u.type),null;case 22:case 23:return Va(u),M_(),c!==null&&ot(cl),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 24:return ka($n),null;case 25:return null;default:return null}}function SI(c,u){switch(__(u),u.tag){case 3:ka($n),Rt();break;case 26:case 27:case 5:Jt(u);break;case 4:Rt();break;case 13:Va(u);break;case 19:ot(qn);break;case 10:ka(u.type);break;case 22:case 23:Va(u),M_(),c!==null&&ot(cl);break;case 24:ka($n)}}function Pd(c,u){try{var d=u.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var _=g.next;d=_;do{if((d.tag&c)===c){g=void 0;var w=d.create,R=d.inst;g=w(),R.destroy=g}d=d.next}while(d!==_)}}catch(V){Xe(u,u.return,V)}}function Io(c,u,d){try{var g=u.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var w=_.next;g=w;do{if((g.tag&c)===c){var R=g.inst,V=R.destroy;if(V!==void 0){R.destroy=void 0,_=u;var W=d,et=V;try{et()}catch(ht){Xe(_,W,ht)}}}g=g.next}while(g!==w)}}catch(ht){Xe(u,u.return,ht)}}function CI(c){var u=c.updateQueue;if(u!==null){var d=c.stateNode;try{pC(u,d)}catch(g){Xe(c,c.return,g)}}}function II(c,u,d){d.props=ul(c.type,c.memoizedProps),d.state=c.memoizedState;try{d.componentWillUnmount()}catch(g){Xe(c,u,g)}}function kd(c,u){try{var d=c.ref;if(d!==null){switch(c.tag){case 26:case 27:case 5:var g=c.stateNode;break;case 30:g=c.stateNode;break;default:g=c.stateNode}typeof d=="function"?c.refCleanup=d(g):d.current=g}}catch(_){Xe(c,u,_)}}function js(c,u){var d=c.ref,g=c.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(_){Xe(c,u,_)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(_){Xe(c,u,_)}else d.current=null}function DI(c){var u=c.type,d=c.memoizedProps,g=c.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break t;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(_){Xe(c,c.return,_)}}function ox(c,u,d){try{var g=c.stateNode;MB(g,c.type,d,u),g[Ln]=u}catch(_){Xe(c,c.return,_)}}function OI(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Lo(c.type)||c.tag===4}function cx(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||OI(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Lo(c.type)||c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function lx(c,u,d){var g=c.tag;if(g===5||g===6)c=c.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(c,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(c),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=bm));else if(g!==4&&(g===27&&Lo(c.type)&&(d=c.stateNode,u=null),c=c.child,c!==null))for(lx(c,u,d),c=c.sibling;c!==null;)lx(c,u,d),c=c.sibling}function fm(c,u,d){var g=c.tag;if(g===5||g===6)c=c.stateNode,u?d.insertBefore(c,u):d.appendChild(c);else if(g!==4&&(g===27&&Lo(c.type)&&(d=c.stateNode),c=c.child,c!==null))for(fm(c,u,d),c=c.sibling;c!==null;)fm(c,u,d),c=c.sibling}function RI(c){var u=c.stateNode,d=c.memoizedProps;try{for(var g=c.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);Er(u,g,d),u[zn]=c,u[Ln]=d}catch(w){Xe(c,c.return,w)}}var Ua=!1,Cn=!1,ux=!1,NI=typeof WeakSet=="function"?WeakSet:Set,cr=null;function dB(c,u){if(c=c.containerInfo,Px=Om,c=zS(c),c_(c)){if("selectionStart"in c)var d={start:c.selectionStart,end:c.selectionEnd};else t:{d=(d=c.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var _=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break t}var R=0,V=-1,W=-1,et=0,ht=0,pt=c,it=null;e:for(;;){for(var st;pt!==d||_!==0&&pt.nodeType!==3||(V=R+_),pt!==w||g!==0&&pt.nodeType!==3||(W=R+g),pt.nodeType===3&&(R+=pt.nodeValue.length),(st=pt.firstChild)!==null;)it=pt,pt=st;for(;;){if(pt===c)break e;if(it===d&&++et===_&&(V=R),it===w&&++ht===g&&(W=R),(st=pt.nextSibling)!==null)break;pt=it,it=pt.parentNode}pt=st}d=V===-1||W===-1?null:{start:V,end:W}}else d=null}d=d||{start:0,end:0}}else d=null;for(kx={focusedElem:c,selectionRange:d},Om=!1,cr=u;cr!==null;)if(u=cr,c=u.child,(u.subtreeFlags&1024)!==0&&c!==null)c.return=u,cr=c;else for(;cr!==null;){switch(u=cr,w=u.alternate,c=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&w!==null){c=void 0,d=u,_=w.memoizedProps,w=w.memoizedState,g=d.stateNode;try{var Kt=ul(d.type,_,d.elementType===d.type);c=g.getSnapshotBeforeUpdate(Kt,w),g.__reactInternalSnapshotBeforeUpdate=c}catch(Wt){Xe(d,d.return,Wt)}}break;case 3:if((c&1024)!==0){if(c=u.stateNode.containerInfo,d=c.nodeType,d===9)Bx(c);else if(d===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Bx(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=u.sibling,c!==null){c.return=u.return,cr=c;break}cr=u.return}}function MI(c,u,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:Do(c,d),g&4&&Pd(5,d);break;case 1:if(Do(c,d),g&4)if(c=d.stateNode,u===null)try{c.componentDidMount()}catch(R){Xe(d,d.return,R)}else{var _=ul(d.type,u.memoizedProps);u=u.memoizedState;try{c.componentDidUpdate(_,u,c.__reactInternalSnapshotBeforeUpdate)}catch(R){Xe(d,d.return,R)}}g&64&&CI(d),g&512&&kd(d,d.return);break;case 3:if(Do(c,d),g&64&&(c=d.updateQueue,c!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{pC(c,u)}catch(R){Xe(d,d.return,R)}}break;case 27:u===null&&g&4&&RI(d);case 26:case 5:Do(c,d),u===null&&g&4&&DI(d),g&512&&kd(d,d.return);break;case 12:Do(c,d);break;case 13:Do(c,d),g&4&&LI(c,d),g&64&&(c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(d=EB.bind(null,d),UB(c,d))));break;case 22:if(g=d.memoizedState!==null||Ua,!g){u=u!==null&&u.memoizedState!==null||Cn,_=Ua;var w=Cn;Ua=g,(Cn=u)&&!w?Oo(c,d,(d.subtreeFlags&8772)!==0):Do(c,d),Ua=_,Cn=w}break;case 30:break;default:Do(c,d)}}function PI(c){var u=c.alternate;u!==null&&(c.alternate=null,PI(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&vo(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var on=null,ri=!1;function ja(c,u,d){for(d=d.child;d!==null;)kI(c,u,d),d=d.sibling}function kI(c,u,d){if(pe&&typeof pe.onCommitFiberUnmount=="function")try{pe.onCommitFiberUnmount(be,d)}catch{}switch(d.tag){case 26:Cn||js(d,u),ja(c,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Cn||js(d,u);var g=on,_=ri;Lo(d.type)&&(on=d.stateNode,ri=!1),ja(c,u,d),Gd(d.stateNode),on=g,ri=_;break;case 5:Cn||js(d,u);case 6:if(g=on,_=ri,on=null,ja(c,u,d),on=g,ri=_,on!==null)if(ri)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(d.stateNode)}catch(w){Xe(d,u,w)}else try{on.removeChild(d.stateNode)}catch(w){Xe(d,u,w)}break;case 18:on!==null&&(ri?(c=on,bD(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,d.stateNode),Zd(c)):bD(on,d.stateNode));break;case 4:g=on,_=ri,on=d.stateNode.containerInfo,ri=!0,ja(c,u,d),on=g,ri=_;break;case 0:case 11:case 14:case 15:Cn||Io(2,d,u),Cn||Io(4,d,u),ja(c,u,d);break;case 1:Cn||(js(d,u),g=d.stateNode,typeof g.componentWillUnmount=="function"&&II(d,u,g)),ja(c,u,d);break;case 21:ja(c,u,d);break;case 22:Cn=(g=Cn)||d.memoizedState!==null,ja(c,u,d),Cn=g;break;default:ja(c,u,d)}}function LI(c,u){if(u.memoizedState===null&&(c=u.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Zd(c)}catch(d){Xe(u,u.return,d)}}function pB(c){switch(c.tag){case 13:case 19:var u=c.stateNode;return u===null&&(u=c.stateNode=new NI),u;case 22:return c=c.stateNode,u=c._retryCache,u===null&&(u=c._retryCache=new NI),u;default:throw Error(r(435,c.tag))}}function hx(c,u){var d=pB(c);u.forEach(function(g){var _=bB.bind(null,c,g);d.has(g)||(d.add(g),g.then(_,_))})}function _i(c,u){var d=u.deletions;if(d!==null)for(var g=0;g<d.length;g++){var _=d[g],w=c,R=u,V=R;t:for(;V!==null;){switch(V.tag){case 27:if(Lo(V.type)){on=V.stateNode,ri=!1;break t}break;case 5:on=V.stateNode,ri=!1;break t;case 3:case 4:on=V.stateNode.containerInfo,ri=!0;break t}V=V.return}if(on===null)throw Error(r(160));kI(w,R,_),on=null,ri=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)VI(u,c),u=u.sibling}var hs=null;function VI(c,u){var d=c.alternate,g=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:_i(u,c),xi(c),g&4&&(Io(3,c,c.return),Pd(3,c),Io(5,c,c.return));break;case 1:_i(u,c),xi(c),g&512&&(Cn||d===null||js(d,d.return)),g&64&&Ua&&(c=c.updateQueue,c!==null&&(g=c.callbacks,g!==null&&(d=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var _=hs;if(_i(u,c),xi(c),g&512&&(Cn||d===null||js(d,d.return)),g&4){var w=d!==null?d.memoizedState:null;if(g=c.memoizedState,d===null)if(g===null)if(c.stateNode===null){t:{g=c.type,d=c.memoizedProps,_=_.ownerDocument||_;e:switch(g){case"title":w=_.getElementsByTagName("title")[0],(!w||w[Fc]||w[zn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(g),_.head.insertBefore(w,_.querySelector("head > title"))),Er(w,g,d),w[zn]=c,Tn(w),g=w;break t;case"link":var R=RD("link","href",_).get(g+(d.href||""));if(R){for(var V=0;V<R.length;V++)if(w=R[V],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){R.splice(V,1);break e}}w=_.createElement(g),Er(w,g,d),_.head.appendChild(w);break;case"meta":if(R=RD("meta","content",_).get(g+(d.content||""))){for(V=0;V<R.length;V++)if(w=R[V],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){R.splice(V,1);break e}}w=_.createElement(g),Er(w,g,d),_.head.appendChild(w);break;default:throw Error(r(468,g))}w[zn]=c,Tn(w),g=w}c.stateNode=g}else ND(_,c.type,c.stateNode);else c.stateNode=OD(_,g,c.memoizedProps);else w!==g?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,g===null?ND(_,c.type,c.stateNode):OD(_,g,c.memoizedProps)):g===null&&c.stateNode!==null&&ox(c,c.memoizedProps,d.memoizedProps)}break;case 27:_i(u,c),xi(c),g&512&&(Cn||d===null||js(d,d.return)),d!==null&&g&4&&ox(c,c.memoizedProps,d.memoizedProps);break;case 5:if(_i(u,c),xi(c),g&512&&(Cn||d===null||js(d,d.return)),c.flags&32){_=c.stateNode;try{Li(_,"")}catch(st){Xe(c,c.return,st)}}g&4&&c.stateNode!=null&&(_=c.memoizedProps,ox(c,_,d!==null?d.memoizedProps:_)),g&1024&&(ux=!0);break;case 6:if(_i(u,c),xi(c),g&4){if(c.stateNode===null)throw Error(r(162));g=c.memoizedProps,d=c.stateNode;try{d.nodeValue=g}catch(st){Xe(c,c.return,st)}}break;case 3:if(Cm=null,_=hs,hs=Tm(u.containerInfo),_i(u,c),hs=_,xi(c),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Zd(u.containerInfo)}catch(st){Xe(c,c.return,st)}ux&&(ux=!1,BI(c));break;case 4:g=hs,hs=Tm(c.stateNode.containerInfo),_i(u,c),xi(c),hs=g;break;case 12:_i(u,c),xi(c);break;case 13:_i(u,c),xi(c),c.child.flags&8192&&c.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(vx=Vt()),g&4&&(g=c.updateQueue,g!==null&&(c.updateQueue=null,hx(c,g)));break;case 22:_=c.memoizedState!==null;var W=d!==null&&d.memoizedState!==null,et=Ua,ht=Cn;if(Ua=et||_,Cn=ht||W,_i(u,c),Cn=ht,Ua=et,xi(c),g&8192)t:for(u=c.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(d===null||W||Ua||Cn||hl(c)),d=null,u=c;;){if(u.tag===5||u.tag===26){if(d===null){W=d=u;try{if(w=W.stateNode,_)R=w.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{V=W.stateNode;var pt=W.memoizedProps.style,it=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;V.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(st){Xe(W,W.return,st)}}}else if(u.tag===6){if(d===null){W=u;try{W.stateNode.nodeValue=_?"":W.memoizedProps}catch(st){Xe(W,W.return,st)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break t;for(;u.sibling===null;){if(u.return===null||u.return===c)break t;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=c.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,hx(c,d))));break;case 19:_i(u,c),xi(c),g&4&&(g=c.updateQueue,g!==null&&(c.updateQueue=null,hx(c,g)));break;case 30:break;case 21:break;default:_i(u,c),xi(c)}}function xi(c){var u=c.flags;if(u&2){try{for(var d,g=c.return;g!==null;){if(OI(g)){d=g;break}g=g.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var _=d.stateNode,w=cx(c);fm(c,w,_);break;case 5:var R=d.stateNode;d.flags&32&&(Li(R,""),d.flags&=-33);var V=cx(c);fm(c,V,R);break;case 3:case 4:var W=d.stateNode.containerInfo,et=cx(c);lx(c,et,W);break;default:throw Error(r(161))}}catch(ht){Xe(c,c.return,ht)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function BI(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var u=c;BI(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),c=c.sibling}}function Do(c,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)MI(c,u.alternate,u),u=u.sibling}function hl(c){for(c=c.child;c!==null;){var u=c;switch(u.tag){case 0:case 11:case 14:case 15:Io(4,u,u.return),hl(u);break;case 1:js(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&II(u,u.return,d),hl(u);break;case 27:Gd(u.stateNode);case 26:case 5:js(u,u.return),hl(u);break;case 22:u.memoizedState===null&&hl(u);break;case 30:hl(u);break;default:hl(u)}c=c.sibling}}function Oo(c,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,_=c,w=u,R=w.flags;switch(w.tag){case 0:case 11:case 15:Oo(_,w,d),Pd(4,w);break;case 1:if(Oo(_,w,d),g=w,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(et){Xe(g,g.return,et)}if(g=w,_=g.updateQueue,_!==null){var V=g.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_<W.length;_++)dC(W[_],V)}catch(et){Xe(g,g.return,et)}}d&&R&64&&CI(w),kd(w,w.return);break;case 27:RI(w);case 26:case 5:Oo(_,w,d),d&&g===null&&R&4&&DI(w),kd(w,w.return);break;case 12:Oo(_,w,d);break;case 13:Oo(_,w,d),d&&R&4&&LI(_,w);break;case 22:w.memoizedState===null&&Oo(_,w,d),kd(w,w.return);break;case 30:break;default:Oo(_,w,d)}u=u.sibling}}function fx(c,u){var d=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(d=c.memoizedState.cachePool.pool),c=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),c!==d&&(c!=null&&c.refCount++,d!=null&&xd(d))}function dx(c,u){c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&xd(c))}function Hs(c,u,d,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)FI(c,u,d,g),u=u.sibling}function FI(c,u,d,g){var _=u.flags;switch(u.tag){case 0:case 11:case 15:Hs(c,u,d,g),_&2048&&Pd(9,u);break;case 1:Hs(c,u,d,g);break;case 3:Hs(c,u,d,g),_&2048&&(c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&xd(c)));break;case 12:if(_&2048){Hs(c,u,d,g),c=u.stateNode;try{var w=u.memoizedProps,R=w.id,V=w.onPostCommit;typeof V=="function"&&V(R,u.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(W){Xe(u,u.return,W)}}else Hs(c,u,d,g);break;case 13:Hs(c,u,d,g);break;case 23:break;case 22:w=u.stateNode,R=u.alternate,u.memoizedState!==null?w._visibility&2?Hs(c,u,d,g):Ld(c,u):w._visibility&2?Hs(c,u,d,g):(w._visibility|=2,eh(c,u,d,g,(u.subtreeFlags&10256)!==0)),_&2048&&fx(R,u);break;case 24:Hs(c,u,d,g),_&2048&&dx(u.alternate,u);break;default:Hs(c,u,d,g)}}function eh(c,u,d,g,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=c,R=u,V=d,W=g,et=R.flags;switch(R.tag){case 0:case 11:case 15:eh(w,R,V,W,_),Pd(8,R);break;case 23:break;case 22:var ht=R.stateNode;R.memoizedState!==null?ht._visibility&2?eh(w,R,V,W,_):Ld(w,R):(ht._visibility|=2,eh(w,R,V,W,_)),_&&et&2048&&fx(R.alternate,R);break;case 24:eh(w,R,V,W,_),_&&et&2048&&dx(R.alternate,R);break;default:eh(w,R,V,W,_)}u=u.sibling}}function Ld(c,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=c,g=u,_=g.flags;switch(g.tag){case 22:Ld(d,g),_&2048&&fx(g.alternate,g);break;case 24:Ld(d,g),_&2048&&dx(g.alternate,g);break;default:Ld(d,g)}u=u.sibling}}var Vd=8192;function nh(c){if(c.subtreeFlags&Vd)for(c=c.child;c!==null;)UI(c),c=c.sibling}function UI(c){switch(c.tag){case 26:nh(c),c.flags&Vd&&c.memoizedState!==null&&JB(hs,c.memoizedState,c.memoizedProps);break;case 5:nh(c);break;case 3:case 4:var u=hs;hs=Tm(c.stateNode.containerInfo),nh(c),hs=u;break;case 22:c.memoizedState===null&&(u=c.alternate,u!==null&&u.memoizedState!==null?(u=Vd,Vd=16777216,nh(c),Vd=u):nh(c));break;default:nh(c)}}function jI(c){var u=c.alternate;if(u!==null&&(c=u.child,c!==null)){u.child=null;do u=c.sibling,c.sibling=null,c=u;while(c!==null)}}function Bd(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var g=u[d];cr=g,zI(g,c)}jI(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)HI(c),c=c.sibling}function HI(c){switch(c.tag){case 0:case 11:case 15:Bd(c),c.flags&2048&&Io(9,c,c.return);break;case 3:Bd(c);break;case 12:Bd(c);break;case 22:var u=c.stateNode;c.memoizedState!==null&&u._visibility&2&&(c.return===null||c.return.tag!==13)?(u._visibility&=-3,dm(c)):Bd(c);break;default:Bd(c)}}function dm(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var g=u[d];cr=g,zI(g,c)}jI(c)}for(c=c.child;c!==null;){switch(u=c,u.tag){case 0:case 11:case 15:Io(8,u,u.return),dm(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,dm(u));break;default:dm(u)}c=c.sibling}}function zI(c,u){for(;cr!==null;){var d=cr;switch(d.tag){case 0:case 11:case 15:Io(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:xd(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,cr=g;else t:for(d=c;cr!==null;){g=cr;var _=g.sibling,w=g.return;if(PI(g),g===d){cr=null;break t}if(_!==null){_.return=w,cr=_;break t}cr=w}}}var gB={getCacheForType:function(c){var u=Dr($n),d=u.data.get(c);return d===void 0&&(d=c(),u.data.set(c,d)),d}},mB=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ze=null,le=null,ve=0,Ve=0,wi=null,Ro=!1,rh=!1,px=!1,Ha=0,_n=0,No=0,fl=0,gx=0,Wi=0,ih=0,Fd=null,ii=null,mx=!1,vx=0,pm=1/0,gm=null,Mo=null,wr=0,Po=null,sh=null,ah=0,yx=0,_x=null,GI=null,Ud=0,xx=null;function Ei(){if((Le&2)!==0&&ve!==0)return ve&-ve;if(Y.T!==null){var c=qu;return c!==0?c:Cx()}return go()}function WI(){Wi===0&&(Wi=(ve&536870912)===0||Ce?Kf():536870912);var c=Gi.current;return c!==null&&(c.flags|=32),Wi}function bi(c,u,d){(c===Ze&&(Ve===2||Ve===9)||c.cancelPendingCommit!==null)&&(oh(c,0),ko(c,ve,Wi,!1)),xa(c,d),((Le&2)===0||c!==Ze)&&(c===Ze&&((Le&2)===0&&(fl|=d),_n===4&&ko(c,ve,Wi,!1)),zs(c))}function $I(c,u,d){if((Le&6)!==0)throw Error(r(327));var g=!d&&(u&124)===0&&(u&c.expiredLanes)===0||Cs(c,u),_=g?_B(c,u):bx(c,u,!0),w=g;do{if(_===0){rh&&!g&&ko(c,u,0,!1);break}else{if(d=c.current.alternate,w&&!vB(d)){_=bx(c,u,!1),w=!1;continue}if(_===2){if(w=u,c.errorRecoveryDisabledLanes&w)var R=0;else R=c.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){u=R;t:{var V=c;_=Fd;var W=V.current.memoizedState.isDehydrated;if(W&&(oh(V,R).flags|=256),R=bx(V,R,!1),R!==2){if(px&&!W){V.errorRecoveryDisabledLanes|=w,fl|=w,_=4;break t}w=ii,ii=_,w!==null&&(ii===null?ii=w:ii.push.apply(ii,w))}_=R}if(w=!1,_!==2)continue}}if(_===1){oh(c,0),ko(c,u,0,!0);break}t:{switch(g=c,w=_,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ko(g,u,Wi,!Ro);break t;case 2:ii=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=vx+300-Vt(),10<_)){if(ko(g,u,Wi,!Ro),ya(g,0,!0)!==0)break t;g.timeoutHandle=wD(qI.bind(null,g,d,ii,gm,mx,u,Wi,fl,ih,Ro,w,2,-0,0),_);break t}qI(g,d,ii,gm,mx,u,Wi,fl,ih,Ro,w,0,-0,0)}}break}while(!0);zs(c)}function qI(c,u,d,g,_,w,R,V,W,et,ht,pt,it,st){if(c.timeoutHandle=-1,pt=u.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(qd={stylesheets:null,count:0,unsuspend:ZB},UI(u),pt=tF(),pt!==null)){c.cancelPendingCommit=pt(tD.bind(null,c,u,w,d,g,_,R,V,W,ht,1,it,st)),ko(c,w,R,!et);return}tD(c,u,w,d,g,_,R,V,W)}function vB(c){for(var u=c;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var _=d[g],w=_.getSnapshot;_=_.value;try{if(!vi(w(),_))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ko(c,u,d,g){u&=~gx,u&=~fl,c.suspendedLanes|=u,c.pingedLanes&=~u,g&&(c.warmLanes|=u),g=c.expirationTimes;for(var _=u;0<_;){var w=31-kn(_),R=1<<w;g[w]=-1,_&=~R}d!==0&&Is(c,d,u)}function mm(){return(Le&6)===0?(jd(0),!1):!0}function wx(){if(le!==null){if(Ve===0)var c=le.return;else c=le,Pa=al=null,B_(c),Ju=null,Rd=0,c=le;for(;c!==null;)SI(c.alternate,c),c=c.return;le=null}}function oh(c,u){var d=c.timeoutHandle;d!==-1&&(c.timeoutHandle=-1,kB(d)),d=c.cancelPendingCommit,d!==null&&(c.cancelPendingCommit=null,d()),wx(),Ze=c,le=d=Ra(c.current,null),ve=u,Ve=0,wi=null,Ro=!1,rh=Cs(c,u),px=!1,ih=Wi=gx=fl=No=_n=0,ii=Fd=null,mx=!1,(u&8)!==0&&(u|=u&32);var g=c.entangledLanes;if(g!==0)for(c=c.entanglements,g&=u;0<g;){var _=31-kn(g),w=1<<_;u|=c[_],g&=~w}return Ha=u,B0(),d}function YI(c,u){ne=null,Y.H=rm,u===Ed||u===q0?(u=hC(),Ve=3):u===cC?(u=hC(),Ve=4):Ve=u===fI?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,wi=u,le===null&&(_n=1,cm(c,Ui(u,c.current)))}function KI(){var c=Y.H;return Y.H=rm,c===null?rm:c}function XI(){var c=Y.A;return Y.A=gB,c}function Ex(){_n=4,Ro||(ve&4194048)!==ve&&Gi.current!==null||(rh=!0),(No&134217727)===0&&(fl&134217727)===0||Ze===null||ko(Ze,ve,Wi,!1)}function bx(c,u,d){var g=Le;Le|=2;var _=KI(),w=XI();(Ze!==c||ve!==u)&&(gm=null,oh(c,u)),u=!1;var R=_n;t:do try{if(Ve!==0&&le!==null){var V=le,W=wi;switch(Ve){case 8:wx(),R=6;break t;case 3:case 2:case 9:case 6:Gi.current===null&&(u=!0);var et=Ve;if(Ve=0,wi=null,ch(c,V,W,et),d&&rh){R=0;break t}break;default:et=Ve,Ve=0,wi=null,ch(c,V,W,et)}}yB(),R=_n;break}catch(ht){YI(c,ht)}while(!0);return u&&c.shellSuspendCounter++,Pa=al=null,Le=g,Y.H=_,Y.A=w,le===null&&(Ze=null,ve=0,B0()),R}function yB(){for(;le!==null;)QI(le)}function _B(c,u){var d=Le;Le|=2;var g=KI(),_=XI();Ze!==c||ve!==u?(gm=null,pm=Vt()+500,oh(c,u)):rh=Cs(c,u);t:do try{if(Ve!==0&&le!==null){u=le;var w=wi;e:switch(Ve){case 1:Ve=0,wi=null,ch(c,u,w,1);break;case 2:case 9:if(lC(w)){Ve=0,wi=null,ZI(u);break}u=function(){Ve!==2&&Ve!==9||Ze!==c||(Ve=7),zs(c)},w.then(u,u);break t;case 3:Ve=7;break t;case 4:Ve=5;break t;case 7:lC(w)?(Ve=0,wi=null,ZI(u)):(Ve=0,wi=null,ch(c,u,w,7));break;case 5:var R=null;switch(le.tag){case 26:R=le.memoizedState;case 5:case 27:var V=le;if(!R||MD(R)){Ve=0,wi=null;var W=V.sibling;if(W!==null)le=W;else{var et=V.return;et!==null?(le=et,vm(et)):le=null}break e}}Ve=0,wi=null,ch(c,u,w,5);break;case 6:Ve=0,wi=null,ch(c,u,w,6);break;case 8:wx(),_n=6;break t;default:throw Error(r(462))}}xB();break}catch(ht){YI(c,ht)}while(!0);return Pa=al=null,Y.H=g,Y.A=_,Le=d,le!==null?0:(Ze=null,ve=0,B0(),_n)}function xB(){for(;le!==null&&!Gt();)QI(le)}function QI(c){var u=AI(c.alternate,c,Ha);c.memoizedProps=c.pendingProps,u===null?vm(c):le=u}function ZI(c){var u=c,d=u.alternate;switch(u.tag){case 15:case 0:u=yI(d,u,u.pendingProps,u.type,void 0,ve);break;case 11:u=yI(d,u,u.pendingProps,u.type.render,u.ref,ve);break;case 5:B_(u);default:SI(d,u),u=le=JS(u,Ha),u=AI(d,u,Ha)}c.memoizedProps=c.pendingProps,u===null?vm(c):le=u}function ch(c,u,d,g){Pa=al=null,B_(u),Ju=null,Rd=0;var _=u.return;try{if(lB(c,_,u,d,ve)){_n=1,cm(c,Ui(d,c.current)),le=null;return}}catch(w){if(_!==null)throw le=_,w;_n=1,cm(c,Ui(d,c.current)),le=null;return}u.flags&32768?(Ce||g===1?c=!0:rh||(ve&536870912)!==0?c=!1:(Ro=c=!0,(g===2||g===9||g===3||g===6)&&(g=Gi.current,g!==null&&g.tag===13&&(g.flags|=16384))),JI(u,c)):vm(u)}function vm(c){var u=c;do{if((u.flags&32768)!==0){JI(u,Ro);return}c=u.return;var d=hB(u.alternate,u,Ha);if(d!==null){le=d;return}if(u=u.sibling,u!==null){le=u;return}le=u=c}while(u!==null);_n===0&&(_n=5)}function JI(c,u){do{var d=fB(c.alternate,c);if(d!==null){d.flags&=32767,le=d;return}if(d=c.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(c=c.sibling,c!==null)){le=c;return}le=c=d}while(c!==null);_n=6,le=null}function tD(c,u,d,g,_,w,R,V,W){c.cancelPendingCommit=null;do ym();while(wr!==0);if((Le&6)!==0)throw Error(r(327));if(u!==null){if(u===c.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=d_,Qf(c,d,w,R,V,W),c===Ze&&(le=Ze=null,ve=0),sh=u,Po=c,ah=d,yx=w,_x=_,GI=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,AB(xe,function(){return sD(),null})):(c.callbackNode=null,c.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=Y.T,Y.T=null,_=at.p,at.p=2,R=Le,Le|=4;try{dB(c,u,d)}finally{Le=R,at.p=_,Y.T=g}}wr=1,eD(),nD(),rD()}}function eD(){if(wr===1){wr=0;var c=Po,u=sh,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null;var g=at.p;at.p=2;var _=Le;Le|=4;try{VI(u,c);var w=kx,R=zS(c.containerInfo),V=w.focusedElem,W=w.selectionRange;if(R!==V&&V&&V.ownerDocument&&HS(V.ownerDocument.documentElement,V)){if(W!==null&&c_(V)){var et=W.start,ht=W.end;if(ht===void 0&&(ht=et),"selectionStart"in V)V.selectionStart=et,V.selectionEnd=Math.min(ht,V.value.length);else{var pt=V.ownerDocument||document,it=pt&&pt.defaultView||window;if(it.getSelection){var st=it.getSelection(),Kt=V.textContent.length,Wt=Math.min(W.start,Kt),qe=W.end===void 0?Wt:Math.min(W.end,Kt);!st.extend&&Wt>qe&&(R=qe,qe=Wt,Wt=R);var K=jS(V,Wt),q=jS(V,qe);if(K&&q&&(st.rangeCount!==1||st.anchorNode!==K.node||st.anchorOffset!==K.offset||st.focusNode!==q.node||st.focusOffset!==q.offset)){var J=pt.createRange();J.setStart(K.node,K.offset),st.removeAllRanges(),Wt>qe?(st.addRange(J),st.extend(q.node,q.offset)):(J.setEnd(q.node,q.offset),st.addRange(J))}}}}for(pt=[],st=V;st=st.parentNode;)st.nodeType===1&&pt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<pt.length;V++){var ft=pt[V];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}Om=!!Px,kx=Px=null}finally{Le=_,at.p=g,Y.T=d}}c.current=u,wr=2}}function nD(){if(wr===2){wr=0;var c=Po,u=sh,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=Y.T,Y.T=null;var g=at.p;at.p=2;var _=Le;Le|=4;try{MI(c,u.alternate,u)}finally{Le=_,at.p=g,Y.T=d}}wr=3}}function rD(){if(wr===4||wr===3){wr=0,qt();var c=Po,u=sh,d=ah,g=GI;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?wr=5:(wr=0,sh=Po=null,iD(c,c.pendingLanes));var _=c.pendingLanes;if(_===0&&(Mo=null),Tu(d),u=u.stateNode,pe&&typeof pe.onCommitFiberRoot=="function")try{pe.onCommitFiberRoot(be,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=Y.T,_=at.p,at.p=2,Y.T=null;try{for(var w=c.onRecoverableError,R=0;R<g.length;R++){var V=g[R];w(V.value,{componentStack:V.stack})}}finally{Y.T=u,at.p=_}}(ah&3)!==0&&ym(),zs(c),_=c.pendingLanes,(d&4194090)!==0&&(_&42)!==0?c===xx?Ud++:(Ud=0,xx=c):Ud=0,jd(0)}}function iD(c,u){(c.pooledCacheLanes&=u)===0&&(u=c.pooledCache,u!=null&&(c.pooledCache=null,xd(u)))}function ym(c){return eD(),nD(),rD(),sD()}function sD(){if(wr!==5)return!1;var c=Po,u=yx;yx=0;var d=Tu(ah),g=Y.T,_=at.p;try{at.p=32>d?32:d,Y.T=null,d=_x,_x=null;var w=Po,R=ah;if(wr=0,sh=Po=null,ah=0,(Le&6)!==0)throw Error(r(331));var V=Le;if(Le|=4,HI(w.current),FI(w,w.current,R,d),Le=V,jd(0,!1),pe&&typeof pe.onPostCommitFiberRoot=="function")try{pe.onPostCommitFiberRoot(be,w)}catch{}return!0}finally{at.p=_,Y.T=g,iD(c,u)}}function aD(c,u,d){u=Ui(d,u),u=Z_(c.stateNode,u,2),c=Ao(c,u,2),c!==null&&(xa(c,2),zs(c))}function Xe(c,u,d){if(c.tag===3)aD(c,c,d);else for(;u!==null;){if(u.tag===3){aD(u,c,d);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Mo===null||!Mo.has(g))){c=Ui(d,c),d=uI(2),g=Ao(u,d,2),g!==null&&(hI(d,g,u,c),xa(g,2),zs(g));break}}u=u.return}}function Ax(c,u,d){var g=c.pingCache;if(g===null){g=c.pingCache=new mB;var _=new Set;g.set(u,_)}else _=g.get(u),_===void 0&&(_=new Set,g.set(u,_));_.has(d)||(px=!0,_.add(d),c=wB.bind(null,c,u,d),u.then(c,c))}function wB(c,u,d){var g=c.pingCache;g!==null&&g.delete(u),c.pingedLanes|=c.suspendedLanes&d,c.warmLanes&=~d,Ze===c&&(ve&d)===d&&(_n===4||_n===3&&(ve&62914560)===ve&&300>Vt()-vx?(Le&2)===0&&oh(c,0):gx|=d,ih===ve&&(ih=0)),zs(c)}function oD(c,u){u===0&&(u=Xf()),c=zu(c,u),c!==null&&(xa(c,u),zs(c))}function EB(c){var u=c.memoizedState,d=0;u!==null&&(d=u.retryLane),oD(c,d)}function bB(c,u){var d=0;switch(c.tag){case 13:var g=c.stateNode,_=c.memoizedState;_!==null&&(d=_.retryLane);break;case 19:g=c.stateNode;break;case 22:g=c.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(u),oD(c,d)}function AB(c,u){return Se(c,u)}var _m=null,lh=null,Tx=!1,xm=!1,Sx=!1,dl=0;function zs(c){c!==lh&&c.next===null&&(lh===null?_m=lh=c:lh=lh.next=c),xm=!0,Tx||(Tx=!0,SB())}function jd(c,u){if(!Sx&&xm){Sx=!0;do for(var d=!1,g=_m;g!==null;){if(c!==0){var _=g.pendingLanes;if(_===0)var w=0;else{var R=g.suspendedLanes,V=g.pingedLanes;w=(1<<31-kn(42|c)+1)-1,w&=_&~(R&~V),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,hD(g,w))}else w=ve,w=ya(g,g===Ze?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||Cs(g,w)||(d=!0,hD(g,w));g=g.next}while(d);Sx=!1}}function TB(){cD()}function cD(){xm=Tx=!1;var c=0;dl!==0&&(PB()&&(c=dl),dl=0);for(var u=Vt(),d=null,g=_m;g!==null;){var _=g.next,w=lD(g,u);w===0?(g.next=null,d===null?_m=_:d.next=_,_===null&&(lh=d)):(d=g,(c!==0||(w&3)!==0)&&(xm=!0)),g=_}jd(c)}function lD(c,u){for(var d=c.suspendedLanes,g=c.pingedLanes,_=c.expirationTimes,w=c.pendingLanes&-62914561;0<w;){var R=31-kn(w),V=1<<R,W=_[R];W===-1?((V&d)===0||(V&g)!==0)&&(_[R]=Yf(V,u)):W<=u&&(c.expiredLanes|=V),w&=~V}if(u=Ze,d=ve,d=ya(c,c===u?d:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),g=c.callbackNode,d===0||c===u&&(Ve===2||Ve===9)||c.cancelPendingCommit!==null)return g!==null&&g!==null&&It(g),c.callbackNode=null,c.callbackPriority=0;if((d&3)===0||Cs(c,d)){if(u=d&-d,u===c.callbackPriority)return u;switch(g!==null&&It(g),Tu(d)){case 2:case 8:d=ae;break;case 32:d=xe;break;case 268435456:d=rr;break;default:d=xe}return g=uD.bind(null,c),d=Se(d,g),c.callbackPriority=u,c.callbackNode=d,u}return g!==null&&g!==null&&It(g),c.callbackPriority=2,c.callbackNode=null,2}function uD(c,u){if(wr!==0&&wr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var d=c.callbackNode;if(ym()&&c.callbackNode!==d)return null;var g=ve;return g=ya(c,c===Ze?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),g===0?null:($I(c,g,u),lD(c,Vt()),c.callbackNode!=null&&c.callbackNode===d?uD.bind(null,c):null)}function hD(c,u){if(ym())return null;$I(c,u,!0)}function SB(){LB(function(){(Le&6)!==0?Se(en,TB):cD()})}function Cx(){return dl===0&&(dl=Kf()),dl}function fD(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Ru(""+c)}function dD(c,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,c.id&&d.setAttribute("form",c.id),u.parentNode.insertBefore(d,u),c=new FormData(c),d.parentNode.removeChild(d),c}function CB(c,u,d,g,_){if(u==="submit"&&d&&d.stateNode===_){var w=fD((_[Ln]||null).action),R=g.submitter;R&&(u=(u=R[Ln]||null)?fD(u.formAction):R.getAttribute("formAction"),u!==null&&(w=u,R=null));var V=new Nu("action","action",null,g,_);c.push({event:V,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(dl!==0){var W=R?dD(_,R):new FormData(_);q_(d,{pending:!0,data:W,method:_.method,action:w},null,W)}}else typeof w=="function"&&(V.preventDefault(),W=R?dD(_,R):new FormData(_),q_(d,{pending:!0,data:W,method:_.method,action:w},w,W))},currentTarget:_}]})}}for(var Ix=0;Ix<f_.length;Ix++){var Dx=f_[Ix],IB=Dx.toLowerCase(),DB=Dx[0].toUpperCase()+Dx.slice(1);us(IB,"on"+DB)}us($S,"onAnimationEnd"),us(qS,"onAnimationIteration"),us(YS,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us($V,"onTransitionRun"),us(qV,"onTransitionStart"),us(YV,"onTransitionCancel"),us(KS,"onTransitionEnd"),Ea("onMouseEnter",["mouseout","mouseover"]),Ea("onMouseLeave",["mouseout","mouseover"]),Ea("onPointerEnter",["pointerout","pointerover"]),Ea("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hd));function pD(c,u){u=(u&4)!==0;for(var d=0;d<c.length;d++){var g=c[d],_=g.event;g=g.listeners;t:{var w=void 0;if(u)for(var R=g.length-1;0<=R;R--){var V=g[R],W=V.instance,et=V.currentTarget;if(V=V.listener,W!==w&&_.isPropagationStopped())break t;w=V,_.currentTarget=et;try{w(_)}catch(ht){om(ht)}_.currentTarget=null,w=W}else for(R=0;R<g.length;R++){if(V=g[R],W=V.instance,et=V.currentTarget,V=V.listener,W!==w&&_.isPropagationStopped())break t;w=V,_.currentTarget=et;try{w(_)}catch(ht){om(ht)}_.currentTarget=null,w=W}}}}function ue(c,u){var d=u[Jf];d===void 0&&(d=u[Jf]=new Set);var g=c+"__bubble";d.has(g)||(gD(u,c,2,!1),d.add(g))}function Ox(c,u,d){var g=0;u&&(g|=4),gD(d,c,g,u)}var wm="_reactListening"+Math.random().toString(36).slice(2);function Rx(c){if(!c[wm]){c[wm]=!0,td.forEach(function(d){d!=="selectionchange"&&(OB.has(d)||Ox(d,!1,c),Ox(d,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[wm]||(u[wm]=!0,Ox("selectionchange",!1,u))}}function gD(c,u,d,g){switch(FD(u)){case 2:var _=rF;break;case 8:_=iF;break;default:_=Wx}d=_.bind(null,u,d,c),_=void 0,!Bi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),g?_!==void 0?c.addEventListener(u,d,{capture:!0,passive:_}):c.addEventListener(u,d,!0):_!==void 0?c.addEventListener(u,d,{passive:_}):c.addEventListener(u,d,!1)}function Nx(c,u,d,g,_){var w=g;if((u&1)===0&&(u&2)===0&&g!==null)t:for(;;){if(g===null)return;var R=g.tag;if(R===3||R===4){var V=g.stateNode.containerInfo;if(V===_)break;if(R===4)for(R=g.return;R!==null;){var W=R.tag;if((W===3||W===4)&&R.stateNode.containerInfo===_)return;R=R.return}for(;V!==null;){if(R=wa(V),R===null)return;if(W=R.tag,W===5||W===6||W===26||W===27){g=w=R;continue t}V=V.parentNode}}g=g.return}b0(function(){var et=w,ht=Vi(d),pt=[];t:{var it=XS.get(c);if(it!==void 0){var st=Nu,Kt=c;switch(c){case"keypress":if(Ps(d)===0)break t;case"keydown":case"keyup":st=Bu;break;case"focusin":Kt="focus",st=ku;break;case"focusout":Kt="blur",st=ku;break;case"beforeblur":case"afterblur":st=ku;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Fi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=i_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=R0;break;case $S:case qS:case YS:st=Lu;break;case KS:st=M0;break;case"scroll":case"scrollend":st=A0;break;case"wheel":st=Fu;break;case"copy":case"cut":case"paste":st=Vu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=fd;break;case"toggle":case"beforetoggle":st=k0}var Wt=(u&4)!==0,qe=!Wt&&(c==="scroll"||c==="scrollend"),K=Wt?it!==null?it+"Capture":null:it;Wt=[];for(var q=et,J;q!==null;){var ft=q;if(J=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||J===null||K===null||(ft=$c(q,K),ft!=null&&Wt.push(zd(q,ft,J))),qe)break;q=q.return}0<Wt.length&&(it=new st(it,Kt,null,d,ht),pt.push({event:it,listeners:Wt}))}}if((u&7)===0){t:{if(it=c==="mouseover"||c==="pointerover",st=c==="mouseout"||c==="pointerout",it&&d!==Ta&&(Kt=d.relatedTarget||d.fromElement)&&(wa(Kt)||Kt[ki]))break t;if((st||it)&&(it=ht.window===ht?ht:(it=ht.ownerDocument)?it.defaultView||it.parentWindow:window,st?(Kt=d.relatedTarget||d.toElement,st=et,Kt=Kt?wa(Kt):null,Kt!==null&&(qe=s(Kt),Wt=Kt.tag,Kt!==qe||Wt!==5&&Wt!==27&&Wt!==6)&&(Kt=null)):(st=null,Kt=et),st!==Kt)){if(Wt=Fi,ft="onMouseLeave",K="onMouseEnter",q="mouse",(c==="pointerout"||c==="pointerover")&&(Wt=fd,ft="onPointerLeave",K="onPointerEnter",q="pointer"),qe=st==null?it:Os(st),J=Kt==null?it:Os(Kt),it=new Wt(ft,q+"leave",st,d,ht),it.target=qe,it.relatedTarget=J,ft=null,wa(ht)===et&&(Wt=new Wt(K,q+"enter",Kt,d,ht),Wt.target=J,Wt.relatedTarget=qe,ft=Wt),qe=ft,st&&Kt)e:{for(Wt=st,K=Kt,q=0,J=Wt;J;J=uh(J))q++;for(J=0,ft=K;ft;ft=uh(ft))J++;for(;0<q-J;)Wt=uh(Wt),q--;for(;0<J-q;)K=uh(K),J--;for(;q--;){if(Wt===K||K!==null&&Wt===K.alternate)break e;Wt=uh(Wt),K=uh(K)}Wt=null}else Wt=null;st!==null&&mD(pt,it,st,Wt,!1),Kt!==null&&qe!==null&&mD(pt,qe,Kt,Wt,!0)}}t:{if(it=et?Os(et):window,st=it.nodeName&&it.nodeName.toLowerCase(),st==="select"||st==="input"&&it.type==="file")var Nt=kS;else if(Wn(it))if(LS)Nt=zV;else{Nt=jV;var oe=UV}else st=it.nodeName,!st||st.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?et&&sd(et.elementType)&&(Nt=kS):Nt=HV;if(Nt&&(Nt=Nt(c,et))){Oa(pt,Nt,d,ht);break t}oe&&oe(c,it,et),c==="focusout"&&et&&it.type==="number"&&et.memoizedProps.value!=null&&_o(it,"number",it.value)}switch(oe=et?Os(et):window,c){case"focusin":(Wn(oe)||oe.contentEditable==="true")&&(Uu=oe,l_=et,gd=null);break;case"focusout":gd=l_=Uu=null;break;case"mousedown":u_=!0;break;case"contextmenu":case"mouseup":case"dragend":u_=!1,GS(pt,d,ht);break;case"selectionchange":if(WV)break;case"keydown":case"keyup":GS(pt,d,ht)}var Bt;if(Vs)t:{switch(c){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else ge?ct(c,d)&&($t="onCompositionEnd"):c==="keydown"&&d.keyCode===229&&($t="onCompositionStart");$t&&(O&&d.locale!=="ko"&&(ge||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&ge&&(Bt=od()):(Ms=ht,xo="value"in Ms?Ms.value:Ms.textContent,ge=!0)),oe=Em(et,$t),0<oe.length&&($t=new ud($t,c,null,d,ht),pt.push({event:$t,listeners:oe}),Bt?$t.data=Bt:(Bt=At(d),Bt!==null&&($t.data=Bt)))),(Bt=A?Gn(c,d):me(c,d))&&($t=Em(et,"onBeforeInput"),0<$t.length&&(oe=new ud("onBeforeInput","beforeinput",null,d,ht),pt.push({event:oe,listeners:$t}),oe.data=Bt)),CB(pt,c,et,d,ht)}pD(pt,u)})}function zd(c,u,d){return{instance:c,listener:u,currentTarget:d}}function Em(c,u){for(var d=u+"Capture",g=[];c!==null;){var _=c,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=$c(c,d),_!=null&&g.unshift(zd(c,_,w)),_=$c(c,u),_!=null&&g.push(zd(c,_,w))),c.tag===3)return g;c=c.return}return[]}function uh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function mD(c,u,d,g,_){for(var w=u._reactName,R=[];d!==null&&d!==g;){var V=d,W=V.alternate,et=V.stateNode;if(V=V.tag,W!==null&&W===g)break;V!==5&&V!==26&&V!==27||et===null||(W=et,_?(et=$c(d,w),et!=null&&R.unshift(zd(d,et,W))):_||(et=$c(d,w),et!=null&&R.push(zd(d,et,W)))),d=d.return}R.length!==0&&c.push({event:u,listeners:R})}var RB=/\r\n?/g,NB=/\u0000|\uFFFD/g;function vD(c){return(typeof c=="string"?c:""+c).replace(RB,`
`).replace(NB,"")}function yD(c,u){return u=vD(u),vD(c)===u}function bm(){}function $e(c,u,d,g,_,w){switch(d){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Li(c,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Li(c,""+g);break;case"className":Rs(c,"class",g);break;case"tabIndex":Rs(c,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Rs(c,d,g);break;case"style":id(c,g,w);break;case"data":if(u!=="object"){Rs(c,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||d!=="href")){c.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){c.removeAttribute(d);break}g=Ru(""+g),c.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){c.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(u!=="input"&&$e(c,u,"name",_.name,_,null),$e(c,u,"formEncType",_.formEncType,_,null),$e(c,u,"formMethod",_.formMethod,_,null),$e(c,u,"formTarget",_.formTarget,_,null)):($e(c,u,"encType",_.encType,_,null),$e(c,u,"method",_.method,_,null),$e(c,u,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){c.removeAttribute(d);break}g=Ru(""+g),c.setAttribute(d,g);break;case"onClick":g!=null&&(c.onclick=bm);break;case"onScroll":g!=null&&ue("scroll",c);break;case"onScrollEnd":g!=null&&ue("scrollend",c);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=d}}break;case"multiple":c.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":c.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){c.removeAttribute("xlink:href");break}d=Ru(""+g),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(d,""+g):c.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(d,""):c.removeAttribute(d);break;case"capture":case"download":g===!0?c.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?c.setAttribute(d,g):c.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?c.setAttribute(d,g):c.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?c.removeAttribute(d):c.setAttribute(d,g);break;case"popover":ue("beforetoggle",c),ue("toggle",c),yo(c,"popover",g);break;case"xlinkActuate":yr(c,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":yr(c,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":yr(c,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":yr(c,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":yr(c,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":yr(c,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":yr(c,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":yr(c,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":yr(c,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":yo(c,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=n_.get(d)||d,yo(c,d,g))}}function Mx(c,u,d,g,_,w){switch(d){case"style":id(c,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=d}}break;case"children":typeof g=="string"?Li(c,g):(typeof g=="number"||typeof g=="bigint")&&Li(c,""+g);break;case"onScroll":g!=null&&ue("scroll",c);break;case"onScrollEnd":g!=null&&ue("scrollend",c);break;case"onClick":g!=null&&(c.onclick=bm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Su.hasOwnProperty(d))t:{if(d[0]==="o"&&d[1]==="n"&&(_=d.endsWith("Capture"),u=d.slice(2,_?d.length-7:void 0),w=c[Ln]||null,w=w!=null?w[d]:null,typeof w=="function"&&c.removeEventListener(u,w,_),typeof g=="function")){typeof w!="function"&&w!==null&&(d in c?c[d]=null:c.hasAttribute(d)&&c.removeAttribute(d)),c.addEventListener(u,g,_);break t}d in c?c[d]=g:g===!0?c.setAttribute(d,""):yo(c,d,g)}}}function Er(c,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ue("error",c),ue("load",c);var g=!1,_=!1,w;for(w in d)if(d.hasOwnProperty(w)){var R=d[w];if(R!=null)switch(w){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:$e(c,u,w,R,d,null)}}_&&$e(c,u,"srcSet",d.srcSet,d,null),g&&$e(c,u,"src",d.src,d,null);return;case"input":ue("invalid",c);var V=w=R=_=null,W=null,et=null;for(g in d)if(d.hasOwnProperty(g)){var ht=d[g];if(ht!=null)switch(g){case"name":_=ht;break;case"type":R=ht;break;case"checked":W=ht;break;case"defaultChecked":et=ht;break;case"value":w=ht;break;case"defaultValue":V=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,u));break;default:$e(c,u,g,ht,d,null)}}zc(c,w,V,W,et,R,_,!1),Ou(c);return;case"select":ue("invalid",c),g=R=w=null;for(_ in d)if(d.hasOwnProperty(_)&&(V=d[_],V!=null))switch(_){case"value":w=V;break;case"defaultValue":R=V;break;case"multiple":g=V;default:$e(c,u,_,V,d,null)}u=w,d=R,c.multiple=!!g,u!=null?Aa(c,!!g,u,!1):d!=null&&Aa(c,!!g,d,!0);return;case"textarea":ue("invalid",c),w=_=g=null;for(R in d)if(d.hasOwnProperty(R)&&(V=d[R],V!=null))switch(R){case"value":g=V;break;case"defaultValue":_=V;break;case"children":w=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:$e(c,u,R,V,d,null)}Gc(c,g,_,w),Ou(c);return;case"option":for(W in d)if(d.hasOwnProperty(W)&&(g=d[W],g!=null))switch(W){case"selected":c.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:$e(c,u,W,g,d,null)}return;case"dialog":ue("beforetoggle",c),ue("toggle",c),ue("cancel",c),ue("close",c);break;case"iframe":case"object":ue("load",c);break;case"video":case"audio":for(g=0;g<Hd.length;g++)ue(Hd[g],c);break;case"image":ue("error",c),ue("load",c);break;case"details":ue("toggle",c);break;case"embed":case"source":case"link":ue("error",c),ue("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in d)if(d.hasOwnProperty(et)&&(g=d[et],g!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:$e(c,u,et,g,d,null)}return;default:if(sd(u)){for(ht in d)d.hasOwnProperty(ht)&&(g=d[ht],g!==void 0&&Mx(c,u,ht,g,d,void 0));return}}for(V in d)d.hasOwnProperty(V)&&(g=d[V],g!=null&&$e(c,u,V,g,d,null))}function MB(c,u,d,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,R=null,V=null,W=null,et=null,ht=null;for(st in d){var pt=d[st];if(d.hasOwnProperty(st)&&pt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":W=pt;default:g.hasOwnProperty(st)||$e(c,u,st,null,g,pt)}}for(var it in g){var st=g[it];if(pt=d[it],g.hasOwnProperty(it)&&(st!=null||pt!=null))switch(it){case"type":w=st;break;case"name":_=st;break;case"checked":et=st;break;case"defaultChecked":ht=st;break;case"value":R=st;break;case"defaultValue":V=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,u));break;default:st!==pt&&$e(c,u,it,st,g,pt)}}mi(c,R,V,W,et,ht,w,_);return;case"select":st=R=V=it=null;for(w in d)if(W=d[w],d.hasOwnProperty(w)&&W!=null)switch(w){case"value":break;case"multiple":st=W;default:g.hasOwnProperty(w)||$e(c,u,w,null,g,W)}for(_ in g)if(w=g[_],W=d[_],g.hasOwnProperty(_)&&(w!=null||W!=null))switch(_){case"value":it=w;break;case"defaultValue":V=w;break;case"multiple":R=w;default:w!==W&&$e(c,u,_,w,g,W)}u=V,d=R,g=st,it!=null?Aa(c,!!d,it,!1):!!g!=!!d&&(u!=null?Aa(c,!!d,u,!0):Aa(c,!!d,d?[]:"",!1));return;case"textarea":st=it=null;for(V in d)if(_=d[V],d.hasOwnProperty(V)&&_!=null&&!g.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:$e(c,u,V,null,g,_)}for(R in g)if(_=g[R],w=d[R],g.hasOwnProperty(R)&&(_!=null||w!=null))switch(R){case"value":it=_;break;case"defaultValue":st=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==w&&$e(c,u,R,_,g,w)}Ge(c,it,st);return;case"option":for(var Kt in d)if(it=d[Kt],d.hasOwnProperty(Kt)&&it!=null&&!g.hasOwnProperty(Kt))switch(Kt){case"selected":c.selected=!1;break;default:$e(c,u,Kt,null,g,it)}for(W in g)if(it=g[W],st=d[W],g.hasOwnProperty(W)&&it!==st&&(it!=null||st!=null))switch(W){case"selected":c.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:$e(c,u,W,it,g,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in d)it=d[Wt],d.hasOwnProperty(Wt)&&it!=null&&!g.hasOwnProperty(Wt)&&$e(c,u,Wt,null,g,it);for(et in g)if(it=g[et],st=d[et],g.hasOwnProperty(et)&&it!==st&&(it!=null||st!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,u));break;default:$e(c,u,et,it,g,st)}return;default:if(sd(u)){for(var qe in d)it=d[qe],d.hasOwnProperty(qe)&&it!==void 0&&!g.hasOwnProperty(qe)&&Mx(c,u,qe,void 0,g,it);for(ht in g)it=g[ht],st=d[ht],!g.hasOwnProperty(ht)||it===st||it===void 0&&st===void 0||Mx(c,u,ht,it,g,st);return}}for(var K in d)it=d[K],d.hasOwnProperty(K)&&it!=null&&!g.hasOwnProperty(K)&&$e(c,u,K,null,g,it);for(pt in g)it=g[pt],st=d[pt],!g.hasOwnProperty(pt)||it===st||it==null&&st==null||$e(c,u,pt,it,g,st)}var Px=null,kx=null;function Am(c){return c.nodeType===9?c:c.ownerDocument}function _D(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xD(c,u){if(c===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&u==="foreignObject"?0:c}function Lx(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Vx=null;function PB(){var c=window.event;return c&&c.type==="popstate"?c===Vx?!1:(Vx=c,!0):(Vx=null,!1)}var wD=typeof setTimeout=="function"?setTimeout:void 0,kB=typeof clearTimeout=="function"?clearTimeout:void 0,ED=typeof Promise=="function"?Promise:void 0,LB=typeof queueMicrotask=="function"?queueMicrotask:typeof ED<"u"?function(c){return ED.resolve(null).then(c).catch(VB)}:wD;function VB(c){setTimeout(function(){throw c})}function Lo(c){return c==="head"}function bD(c,u){var d=u,g=0,_=0;do{var w=d.nextSibling;if(c.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<g&&8>g){d=g;var R=c.ownerDocument;if(d&1&&Gd(R.documentElement),d&2&&Gd(R.body),d&4)for(d=R.head,Gd(d),R=d.firstChild;R;){var V=R.nextSibling,W=R.nodeName;R[Fc]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&R.rel.toLowerCase()==="stylesheet"||d.removeChild(R),R=V}}if(_===0){c.removeChild(w),Zd(u);return}_--}else d==="$"||d==="$?"||d==="$!"?_++:g=d.charCodeAt(0)-48;else g=0;d=w}while(d);Zd(u)}function Bx(c){var u=c.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Bx(d),vo(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}c.removeChild(d)}}function BB(c,u,d,g){for(;c.nodeType===1;){var _=d;if(c.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(g){if(!c[Fc])switch(u){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(w=c.getAttribute("rel"),w==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(w!==_.rel||c.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||c.getAttribute("title")!==(_.title==null?null:_.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(w=c.getAttribute("src"),(w!==(_.src==null?null:_.src)||c.getAttribute("type")!==(_.type==null?null:_.type)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(u==="input"&&c.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&c.getAttribute("name")===w)return c}else return c;if(c=fs(c.nextSibling),c===null)break}return null}function FB(c,u,d){if(u==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!d||(c=fs(c.nextSibling),c===null))return null;return c}function Fx(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function UB(c,u){var d=c.ownerDocument;if(c.data!=="$?"||d.readyState==="complete")u();else{var g=function(){u(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),c._reactRetry=g}}function fs(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return c}var Ux=null;function AD(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var d=c.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return c;u--}else d==="/$"&&u++}c=c.previousSibling}return null}function TD(c,u,d){switch(u=Am(d),c){case"html":if(c=u.documentElement,!c)throw Error(r(452));return c;case"head":if(c=u.head,!c)throw Error(r(453));return c;case"body":if(c=u.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Gd(c){for(var u=c.attributes;u.length;)c.removeAttributeNode(u[0]);vo(c)}var $i=new Map,SD=new Set;function Tm(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var za=at.d;at.d={f:jB,r:HB,D:zB,C:GB,L:WB,m:$B,X:YB,S:qB,M:KB};function jB(){var c=za.f(),u=mm();return c||u}function HB(c){var u=Ds(c);u!==null&&u.tag===5&&u.type==="form"?$C(u):za.r(c)}var hh=typeof document>"u"?null:document;function CD(c,u,d){var g=hh;if(g&&typeof u=="string"&&u){var _=Vn(u);_='link[rel="'+c+'"][href="'+_+'"]',typeof d=="string"&&(_+='[crossorigin="'+d+'"]'),SD.has(_)||(SD.add(_),c={rel:c,crossOrigin:d,href:u},g.querySelector(_)===null&&(u=g.createElement("link"),Er(u,"link",c),Tn(u),g.head.appendChild(u)))}}function zB(c){za.D(c),CD("dns-prefetch",c,null)}function GB(c,u){za.C(c,u),CD("preconnect",c,u)}function WB(c,u,d){za.L(c,u,d);var g=hh;if(g&&c&&u){var _='link[rel="preload"][as="'+Vn(u)+'"]';u==="image"&&d&&d.imageSrcSet?(_+='[imagesrcset="'+Vn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(_+='[imagesizes="'+Vn(d.imageSizes)+'"]')):_+='[href="'+Vn(c)+'"]';var w=_;switch(u){case"style":w=fh(c);break;case"script":w=dh(c)}$i.has(w)||(c=f({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:c,as:u},d),$i.set(w,c),g.querySelector(_)!==null||u==="style"&&g.querySelector(Wd(w))||u==="script"&&g.querySelector($d(w))||(u=g.createElement("link"),Er(u,"link",c),Tn(u),g.head.appendChild(u)))}}function $B(c,u){za.m(c,u);var d=hh;if(d&&c){var g=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+Vn(g)+'"][href="'+Vn(c)+'"]',w=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=dh(c)}if(!$i.has(w)&&(c=f({rel:"modulepreload",href:c},u),$i.set(w,c),d.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector($d(w)))return}g=d.createElement("link"),Er(g,"link",c),Tn(g),d.head.appendChild(g)}}}function qB(c,u,d){za.S(c,u,d);var g=hh;if(g&&c){var _=Hr(g).hoistableStyles,w=fh(c);u=u||"default";var R=_.get(w);if(!R){var V={loading:0,preload:null};if(R=g.querySelector(Wd(w)))V.loading=5;else{c=f({rel:"stylesheet",href:c,"data-precedence":u},d),(d=$i.get(w))&&jx(c,d);var W=R=g.createElement("link");Tn(W),Er(W,"link",c),W._p=new Promise(function(et,ht){W.onload=et,W.onerror=ht}),W.addEventListener("load",function(){V.loading|=1}),W.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Sm(R,u,g)}R={type:"stylesheet",instance:R,count:1,state:V},_.set(w,R)}}}function YB(c,u){za.X(c,u);var d=hh;if(d&&c){var g=Hr(d).hoistableScripts,_=dh(c),w=g.get(_);w||(w=d.querySelector($d(_)),w||(c=f({src:c,async:!0},u),(u=$i.get(_))&&Hx(c,u),w=d.createElement("script"),Tn(w),Er(w,"link",c),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(_,w))}}function KB(c,u){za.M(c,u);var d=hh;if(d&&c){var g=Hr(d).hoistableScripts,_=dh(c),w=g.get(_);w||(w=d.querySelector($d(_)),w||(c=f({src:c,async:!0,type:"module"},u),(u=$i.get(_))&&Hx(c,u),w=d.createElement("script"),Tn(w),Er(w,"link",c),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(_,w))}}function ID(c,u,d,g){var _=(_=Et.current)?Tm(_):null;if(!_)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=fh(d.href),d=Hr(_).hoistableStyles,g=d.get(u),g||(g={type:"style",instance:null,count:0,state:null},d.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){c=fh(d.href);var w=Hr(_).hoistableStyles,R=w.get(c);if(R||(_=_.ownerDocument||_,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(c,R),(w=_.querySelector(Wd(c)))&&!w._p&&(R.instance=w,R.state.loading=5),$i.has(c)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},$i.set(c,d),w||XB(_,c,d,R.state))),u&&g===null)throw Error(r(528,""));return R}if(u&&g!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=dh(d),d=Hr(_).hoistableScripts,g=d.get(u),g||(g={type:"script",instance:null,count:0,state:null},d.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function fh(c){return'href="'+Vn(c)+'"'}function Wd(c){return'link[rel="stylesheet"]['+c+"]"}function DD(c){return f({},c,{"data-precedence":c.precedence,precedence:null})}function XB(c,u,d,g){c.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=c.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),Er(u,"link",d),Tn(u),c.head.appendChild(u))}function dh(c){return'[src="'+Vn(c)+'"]'}function $d(c){return"script[async]"+c}function OD(c,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var g=c.querySelector('style[data-href~="'+Vn(d.href)+'"]');if(g)return u.instance=g,Tn(g),g;var _=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(c.ownerDocument||c).createElement("style"),Tn(g),Er(g,"style",_),Sm(g,d.precedence,c),u.instance=g;case"stylesheet":_=fh(d.href);var w=c.querySelector(Wd(_));if(w)return u.state.loading|=4,u.instance=w,Tn(w),w;g=DD(d),(_=$i.get(_))&&jx(g,_),w=(c.ownerDocument||c).createElement("link"),Tn(w);var R=w;return R._p=new Promise(function(V,W){R.onload=V,R.onerror=W}),Er(w,"link",g),u.state.loading|=4,Sm(w,d.precedence,c),u.instance=w;case"script":return w=dh(d.src),(_=c.querySelector($d(w)))?(u.instance=_,Tn(_),_):(g=d,(_=$i.get(w))&&(g=f({},d),Hx(g,_)),c=c.ownerDocument||c,_=c.createElement("script"),Tn(_),Er(_,"link",g),c.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Sm(g,d.precedence,c));return u.instance}function Sm(c,u,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,w=_,R=0;R<g.length;R++){var V=g[R];if(V.dataset.precedence===u)w=V;else if(w!==_)break}w?w.parentNode.insertBefore(c,w.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(c,u.firstChild))}function jx(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.title==null&&(c.title=u.title)}function Hx(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.integrity==null&&(c.integrity=u.integrity)}var Cm=null;function RD(c,u,d){if(Cm===null){var g=new Map,_=Cm=new Map;_.set(d,g)}else _=Cm,g=_.get(d),g||(g=new Map,_.set(d,g));if(g.has(c))return g;for(g.set(c,null),d=d.getElementsByTagName(c),_=0;_<d.length;_++){var w=d[_];if(!(w[Fc]||w[zn]||c==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var R=w.getAttribute(u)||"";R=c+R;var V=g.get(R);V?V.push(w):g.set(R,[w])}}return g}function ND(c,u,d){c=c.ownerDocument||c,c.head.insertBefore(d,u==="title"?c.querySelector("head > title"):null)}function QB(c,u,d){if(d===1||u.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return c=u.disabled,typeof u.precedence=="string"&&c==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function MD(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var qd=null;function ZB(){}function JB(c,u,d){if(qd===null)throw Error(r(475));var g=qd;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=fh(d.href),w=c.querySelector(Wd(_));if(w){c=w._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(g.count++,g=Im.bind(g),c.then(g,g)),u.state.loading|=4,u.instance=w,Tn(w);return}w=c.ownerDocument||c,d=DD(d),(_=$i.get(_))&&jx(d,_),w=w.createElement("link"),Tn(w);var R=w;R._p=new Promise(function(V,W){R.onload=V,R.onerror=W}),Er(w,"link",d),u.instance=w}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(u,c),(c=u.state.preload)&&(u.state.loading&3)===0&&(g.count++,u=Im.bind(g),c.addEventListener("load",u),c.addEventListener("error",u))}}function tF(){if(qd===null)throw Error(r(475));var c=qd;return c.stylesheets&&c.count===0&&zx(c,c.stylesheets),0<c.count?function(u){var d=setTimeout(function(){if(c.stylesheets&&zx(c,c.stylesheets),c.unsuspend){var g=c.unsuspend;c.unsuspend=null,g()}},6e4);return c.unsuspend=u,function(){c.unsuspend=null,clearTimeout(d)}}:null}function Im(){if(this.count--,this.count===0){if(this.stylesheets)zx(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Dm=null;function zx(c,u){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Dm=new Map,u.forEach(eF,c),Dm=null,Im.call(c))}function eF(c,u){if(!(u.state.loading&4)){var d=Dm.get(c);if(d)var g=d.get(null);else{d=new Map,Dm.set(c,d);for(var _=c.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var R=_[w];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(d.set(R.dataset.precedence,R),g=R)}g&&d.set(null,g)}_=u.instance,R=_.getAttribute("data-precedence"),w=d.get(R)||g,w===g&&d.set(null,_),d.set(R,_),this.count++,g=Im.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),w?w.parentNode.insertBefore(_,w.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(_,c.firstChild)),u.state.loading|=4}}var Yd={$$typeof:D,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function nF(c,u,d,g,_,w,R,V){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.hiddenUpdates=_a(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function PD(c,u,d,g,_,w,R,V,W,et,ht,pt){return c=new nF(c,u,d,R,V,W,et,pt),u=1,w===!0&&(u|=24),w=yi(3,null,null,u),c.current=w,w.stateNode=c,u=A_(),u.refCount++,c.pooledCache=u,u.refCount++,w.memoizedState={element:g,isDehydrated:d,cache:u},I_(w),c}function kD(c){return c?(c=Gu,c):Gu}function LD(c,u,d,g,_,w){_=kD(_),g.context===null?g.context=_:g.pendingContext=_,g=bo(u),g.payload={element:d},w=w===void 0?null:w,w!==null&&(g.callback=w),d=Ao(c,g,u),d!==null&&(bi(d,c,u),Ad(d,c,u))}function VD(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var d=c.retryLane;c.retryLane=d!==0&&d<u?d:u}}function Gx(c,u){VD(c,u),(c=c.alternate)&&VD(c,u)}function BD(c){if(c.tag===13){var u=zu(c,67108864);u!==null&&bi(u,c,67108864),Gx(c,67108864)}}var Om=!0;function rF(c,u,d,g){var _=Y.T;Y.T=null;var w=at.p;try{at.p=2,Wx(c,u,d,g)}finally{at.p=w,Y.T=_}}function iF(c,u,d,g){var _=Y.T;Y.T=null;var w=at.p;try{at.p=8,Wx(c,u,d,g)}finally{at.p=w,Y.T=_}}function Wx(c,u,d,g){if(Om){var _=$x(g);if(_===null)Nx(c,u,g,Rm,d),UD(c,g);else if(aF(_,c,u,d,g))g.stopPropagation();else if(UD(c,g),u&4&&-1<sF.indexOf(c)){for(;_!==null;){var w=Ds(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var R=ei(w.pendingLanes);if(R!==0){var V=w;for(V.pendingLanes|=2,V.entangledLanes|=2;R;){var W=1<<31-kn(R);V.entanglements[1]|=W,R&=~W}zs(w),(Le&6)===0&&(pm=Vt()+500,jd(0))}}break;case 13:V=zu(w,2),V!==null&&bi(V,w,2),mm(),Gx(w,2)}if(w=$x(g),w===null&&Nx(c,u,g,Rm,d),w===_)break;_=w}_!==null&&g.stopPropagation()}else Nx(c,u,g,null,d)}}function $x(c){return c=Vi(c),qx(c)}var Rm=null;function qx(c){if(Rm=null,c=wa(c),c!==null){var u=s(c);if(u===null)c=null;else{var d=u.tag;if(d===13){if(c=a(u),c!==null)return c;c=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null)}}return Rm=c,null}function FD(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bt()){case en:return 2;case ae:return 8;case xe:case hn:return 32;case rr:return 268435456;default:return 32}default:return 32}}var Yx=!1,Vo=null,Bo=null,Fo=null,Kd=new Map,Xd=new Map,Uo=[],sF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UD(c,u){switch(c){case"focusin":case"focusout":Vo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":Kd.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(u.pointerId)}}function Qd(c,u,d,g,_,w){return c===null||c.nativeEvent!==w?(c={blockedOn:u,domEventName:d,eventSystemFlags:g,nativeEvent:w,targetContainers:[_]},u!==null&&(u=Ds(u),u!==null&&BD(u)),c):(c.eventSystemFlags|=g,u=c.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),c)}function aF(c,u,d,g,_){switch(u){case"focusin":return Vo=Qd(Vo,c,u,d,g,_),!0;case"dragenter":return Bo=Qd(Bo,c,u,d,g,_),!0;case"mouseover":return Fo=Qd(Fo,c,u,d,g,_),!0;case"pointerover":var w=_.pointerId;return Kd.set(w,Qd(Kd.get(w)||null,c,u,d,g,_)),!0;case"gotpointercapture":return w=_.pointerId,Xd.set(w,Qd(Xd.get(w)||null,c,u,d,g,_)),!0}return!1}function jD(c){var u=wa(c.target);if(u!==null){var d=s(u);if(d!==null){if(u=d.tag,u===13){if(u=a(d),u!==null){c.blockedOn=u,m0(c.priority,function(){if(d.tag===13){var g=Ei();g=po(g);var _=zu(d,g);_!==null&&bi(_,d,g),Gx(d,g)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){c.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Nm(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var d=$x(c.nativeEvent);if(d===null){d=c.nativeEvent;var g=new d.constructor(d.type,d);Ta=g,d.target.dispatchEvent(g),Ta=null}else return u=Ds(d),u!==null&&BD(u),c.blockedOn=d,!1;u.shift()}return!0}function HD(c,u,d){Nm(c)&&d.delete(u)}function oF(){Yx=!1,Vo!==null&&Nm(Vo)&&(Vo=null),Bo!==null&&Nm(Bo)&&(Bo=null),Fo!==null&&Nm(Fo)&&(Fo=null),Kd.forEach(HD),Xd.forEach(HD)}function Mm(c,u){c.blockedOn===u&&(c.blockedOn=null,Yx||(Yx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oF)))}var Pm=null;function zD(c){Pm!==c&&(Pm=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pm===c&&(Pm=null);for(var u=0;u<c.length;u+=3){var d=c[u],g=c[u+1],_=c[u+2];if(typeof g!="function"){if(qx(g||d)===null)continue;break}var w=Ds(d);w!==null&&(c.splice(u,3),u-=3,q_(w,{pending:!0,data:_,method:d.method,action:g},g,_))}}))}function Zd(c){function u(W){return Mm(W,c)}Vo!==null&&Mm(Vo,c),Bo!==null&&Mm(Bo,c),Fo!==null&&Mm(Fo,c),Kd.forEach(u),Xd.forEach(u);for(var d=0;d<Uo.length;d++){var g=Uo[d];g.blockedOn===c&&(g.blockedOn=null)}for(;0<Uo.length&&(d=Uo[0],d.blockedOn===null);)jD(d),d.blockedOn===null&&Uo.shift();if(d=(c.ownerDocument||c).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var _=d[g],w=d[g+1],R=_[Ln]||null;if(typeof w=="function")R||zD(d);else if(R){var V=null;if(w&&w.hasAttribute("formAction")){if(_=w,R=w[Ln]||null)V=R.formAction;else if(qx(_)!==null)continue}else V=R.action;typeof V=="function"?d[g+1]=V:(d.splice(g,3),g-=3),zD(d)}}}function Kx(c){this._internalRoot=c}km.prototype.render=Kx.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,g=Ei();LD(d,g,c,u,null,null)},km.prototype.unmount=Kx.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;LD(c.current,2,null,c,null,null),mm(),u[ki]=null}};function km(c){this._internalRoot=c}km.prototype.unstable_scheduleHydration=function(c){if(c){var u=go();c={blockedOn:null,target:c,priority:u};for(var d=0;d<Uo.length&&u!==0&&u<Uo[d].priority;d++);Uo.splice(d,0,c),d===0&&jD(c)}};var GD=t.version;if(GD!=="19.1.0")throw Error(r(527,GD,"19.1.0"));at.findDOMNode=function(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(u),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var cF={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{be=Lm.inject(cF),pe=Lm}catch{}}return tp.createRoot=function(c,u){if(!i(c))throw Error(r(299));var d=!1,g="",_=aI,w=oI,R=cI,V=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(V=u.unstable_transitionCallbacks)),u=PD(c,1,!1,null,null,d,g,_,w,R,V,null),c[ki]=u.current,Rx(c),new Kx(u)},tp.hydrateRoot=function(c,u,d){if(!i(c))throw Error(r(299));var g=!1,_="",w=aI,R=oI,V=cI,W=null,et=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(R=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(W=d.unstable_transitionCallbacks),d.formState!==void 0&&(et=d.formState)),u=PD(c,1,!0,u,d??null,g,_,w,R,V,W,et),u.context=kD(null),d=u.current,g=Ei(),g=po(g),_=bo(g),_.callback=null,Ao(d,_,g),d=g,u.current.lanes=d,xa(u,d),zs(u),c[ki]=u.current,Rx(c),new km(u)},tp.version="19.1.0",tp}var t3;function _F(){if(t3)return Qx.exports;t3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Qx.exports=yF(),Qx.exports}var xF=_F(),rt=k2();const dn=P2(rt);function wF({onAddClick:n,onLogout:t,onTabChange:e,currentTab:r}){return C.jsxs("nav",{className:"navbar",children:[C.jsx("button",{onClick:()=>e("dashboard"),title:"Dashboard",className:r==="dashboard"?"text-warning":"text-info",children:C.jsx("i",{className:"bi bi-house-fill"})}),C.jsx("button",{onClick:()=>e("history"),title:"History",children:C.jsx("i",{className:`bi bi-clock-history ${r==="history"?"text-warning":"text-info"}`})}),C.jsx("button",{onClick:n,title:"Add Meal",children:C.jsx("i",{className:`bi bi-plus-circle-fill ${r==="addmead"?"text-warning":"text-info"}`})}),C.jsx("button",{title:"Suggestions",onClick:()=>e("suggestions"),children:C.jsx("i",{className:`bi bi-lightbulb-fill	 ${r==="suggestions"?"text-warning":"text-info"}`})}),C.jsx("button",{onClick:()=>e("profile"),title:"Profile",children:C.jsx("i",{className:`bi bi-person-circle ${r==="profile"?"text-warning":"text-info"}`})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jg(n){return n+.5|0}const ic=(n,t,e)=>Math.max(Math.min(n,e),t);function wp(n){return ic(jg(n*2.55),0,255)}function lc(n){return ic(jg(n*255),0,255)}function qa(n){return ic(jg(n/2.55)/100,0,1)}function e3(n){return ic(jg(n*100),0,100)}const qi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$E=[..."0123456789ABCDEF"],EF=n=>$E[n&15],bF=n=>$E[(n&240)>>4]+$E[n&15],Vm=n=>(n&240)>>4===(n&15),AF=n=>Vm(n.r)&&Vm(n.g)&&Vm(n.b)&&Vm(n.a);function TF(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&qi[n[1]]*17,g:255&qi[n[2]]*17,b:255&qi[n[3]]*17,a:t===5?qi[n[4]]*17:255}:(t===7||t===9)&&(e={r:qi[n[1]]<<4|qi[n[2]],g:qi[n[3]]<<4|qi[n[4]],b:qi[n[5]]<<4|qi[n[6]],a:t===9?qi[n[7]]<<4|qi[n[8]]:255})),e}const SF=(n,t)=>n<255?t(n):"";function CF(n){var t=AF(n)?EF:bF;return n?"#"+t(n.r)+t(n.g)+t(n.b)+SF(n.a,t):void 0}const IF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function LP(n,t,e){const r=t*Math.min(e,1-e),i=(s,a=(s+n/30)%12)=>e-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function DF(n,t,e){const r=(i,s=(i+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function OF(n,t,e){const r=LP(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function RF(n,t,e,r,i){return n===i?(t-e)/r+(t<e?6:0):t===i?(e-n)/r+2:(n-t)/r+4}function L2(n){const e=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(e,r,i),a=Math.min(e,r,i),o=(s+a)/2;let l,h,f;return s!==a&&(f=s-a,h=o>.5?f/(2-s-a):f/(s+a),l=RF(e,r,i,f,s),l=l*60+.5),[l|0,h||0,o]}function V2(n,t,e,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,r)).map(lc)}function B2(n,t,e){return V2(LP,n,t,e)}function NF(n,t,e){return V2(OF,n,t,e)}function MF(n,t,e){return V2(DF,n,t,e)}function VP(n){return(n%360+360)%360}function PF(n){const t=IF.exec(n);let e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?wp(+t[5]):lc(+t[5]));const i=VP(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=NF(i,s,a):t[1]==="hsv"?r=MF(i,s,a):r=B2(i,s,a),{r:r[0],g:r[1],b:r[2],a:e}}function kF(n,t){var e=L2(n);e[0]=VP(e[0]+t),e=B2(e),n.r=e[0],n.g=e[1],n.b=e[2]}function LF(n){if(!n)return;const t=L2(n),e=t[0],r=e3(t[1]),i=e3(t[2]);return n.a<255?`hsla(${e}, ${r}%, ${i}%, ${qa(n.a)})`:`hsl(${e}, ${r}%, ${i}%)`}const n3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},r3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function VF(){const n={},t=Object.keys(r3),e=Object.keys(n3);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<e.length;i++)s=e[i],o=o.replace(s,n3[s]);s=parseInt(r3[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let Bm;function BF(n){Bm||(Bm=VF(),Bm.transparent=[0,0,0,0]);const t=Bm[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const FF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function UF(n){const t=FF.exec(n);let e=255,r,i,s;if(t){if(t[7]!==r){const a=+t[7];e=t[8]?wp(a):ic(a*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?wp(r):ic(r,0,255)),i=255&(t[4]?wp(i):ic(i,0,255)),s=255&(t[6]?wp(s):ic(s,0,255)),{r,g:i,b:s,a:e}}}function jF(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${qa(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const nw=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ph=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function HF(n,t,e){const r=ph(qa(n.r)),i=ph(qa(n.g)),s=ph(qa(n.b));return{r:lc(nw(r+e*(ph(qa(t.r))-r))),g:lc(nw(i+e*(ph(qa(t.g))-i))),b:lc(nw(s+e*(ph(qa(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Fm(n,t,e){if(n){let r=L2(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=B2(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function BP(n,t){return n&&Object.assign(t||{},n)}function i3(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=lc(n[3]))):(t=BP(n,{r:0,g:0,b:0,a:1}),t.a=lc(t.a)),t}function zF(n){return n.charAt(0)==="r"?UF(n):PF(n)}class lg{constructor(t){if(t instanceof lg)return t;const e=typeof t;let r;e==="object"?r=i3(t):e==="string"&&(r=TF(t)||BF(t)||zF(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=BP(this._rgb);return t&&(t.a=qa(t.a)),t}set rgb(t){this._rgb=i3(t)}rgbString(){return this._valid?jF(this._rgb):void 0}hexString(){return this._valid?CF(this._rgb):void 0}hslString(){return this._valid?LF(this._rgb):void 0}mix(t,e){if(t){const r=this.rgb,i=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,l=r.a-i.a,h=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=HF(this._rgb,t._rgb,e)),this}clone(){return new lg(this.rgb)}alpha(t){return this._rgb.a=lc(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=jg(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Fm(this._rgb,2,t),this}darken(t){return Fm(this._rgb,2,-t),this}saturate(t){return Fm(this._rgb,1,t),this}desaturate(t){return Fm(this._rgb,1,-t),this}rotate(t){return kF(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ga(){}const GF=(()=>{let n=0;return()=>n++})();function ke(n){return n==null}function dr(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ee(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function is(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Gs(n,t){return is(n)?n:t}function ie(n,t){return typeof n>"u"?t:n}const WF=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,FP=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function sn(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function je(n,t,e,r){let i,s,a;if(dr(n))for(s=n.length,i=0;i<s;i++)t.call(e,n[i],i);else if(Ee(n))for(a=Object.keys(n),s=a.length,i=0;i<s;i++)t.call(e,n[a[i]],a[i])}function rv(n,t){let e,r,i,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,r=n.length;e<r;++e)if(i=n[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function iv(n){if(dr(n))return n.map(iv);if(Ee(n)){const t=Object.create(null),e=Object.keys(n),r=e.length;let i=0;for(;i<r;++i)t[e[i]]=iv(n[e[i]]);return t}return n}function UP(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function $F(n,t,e,r){if(!UP(n))return;const i=t[n],s=e[n];Ee(i)&&Ee(s)?ug(i,s,r):t[n]=iv(s)}function ug(n,t,e){const r=dr(t)?t:[t],i=r.length;if(!Ee(n))return n;e=e||{};const s=e.merger||$F;let a;for(let o=0;o<i;++o){if(a=r[o],!Ee(a))continue;const l=Object.keys(a);for(let h=0,f=l.length;h<f;++h)s(l[h],n,a,e)}return n}function Fp(n,t){return ug(n,t,{merger:qF})}function qF(n,t,e){if(!UP(n))return;const r=t[n],i=e[n];Ee(r)&&Ee(i)?Fp(r,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=iv(i))}const s3={"":n=>n,x:n=>n.x,y:n=>n.y};function YF(n){const t=n.split("."),e=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function KF(n){const t=YF(n);return e=>{for(const r of t){if(r==="")break;e=e&&e[r]}return e}}function Jl(n,t){return(s3[t]||(s3[t]=KF(t)))(n)}function F2(n){return n.charAt(0).toUpperCase()+n.slice(1)}const hg=n=>typeof n<"u",yc=n=>typeof n=="function",a3=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function XF(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Qe=Math.PI,En=2*Qe,QF=En+Qe,sv=Number.POSITIVE_INFINITY,ZF=Qe/180,Jn=Qe/2,pl=Qe/4,o3=Qe*2/3,jP=Math.log10,ea=Math.sign;function Up(n,t,e){return Math.abs(n-t)<e}function c3(n){const t=Math.round(n);n=Up(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(jP(n))),r=n/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function JF(n){const t=[],e=Math.sqrt(n);let r;for(r=1;r<e;r++)n%r===0&&(t.push(r),t.push(n/r));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function tU(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function fg(n){return!tU(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function eU(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function nU(n,t,e){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Ya(n){return n*(Qe/180)}function rU(n){return n*(180/Qe)}function l3(n){if(!is(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function HP(n,t){const e=t.x-n.x,r=t.y-n.y,i=Math.sqrt(e*e+r*r);let s=Math.atan2(r,e);return s<-.5*Qe&&(s+=En),{angle:s,distance:i}}function qE(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function iU(n,t){return(n-t+QF)%En-Qe}function ms(n){return(n%En+En)%En}function dg(n,t,e,r){const i=ms(n),s=ms(t),a=ms(e),o=ms(s-i),l=ms(a-i),h=ms(i-s),f=ms(i-a);return i===s||i===a||r&&s===a||o>l&&h<f}function Lr(n,t,e){return Math.max(t,Math.min(e,n))}function sU(n){return Lr(n,-32768,32767)}function sc(n,t,e,r=1e-6){return n>=Math.min(t,e)-r&&n<=Math.max(t,e)+r}function U2(n,t,e){e=e||(a=>n[a]<t);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,e(s)?i=s:r=s;return{lo:i,hi:r}}const Pl=(n,t,e,r)=>U2(n,e,r?i=>{const s=n[i][t];return s<e||s===e&&n[i+1][t]===e}:i=>n[i][t]<e),aU=(n,t,e)=>U2(n,e,r=>n[r][t]>=e);function oU(n,t,e){let r=0,i=n.length;for(;r<i&&n[r]<t;)r++;for(;i>r&&n[i-1]>e;)i--;return r>0||i<n.length?n.slice(r,i):n}const zP=["push","pop","shift","splice","unshift"];function cU(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),zP.forEach(e=>{const r="_onData"+F2(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...s)}),a}})})}function u3(n,t){const e=n._chartjs;if(!e)return;const r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(zP.forEach(s=>{delete n[s]}),delete n._chartjs)}function GP(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const WP=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function $P(n,t){let e=[],r=!1;return function(...i){e=i,r||(r=!0,WP.call(window,()=>{r=!1,n.apply(t,e)}))}}function lU(n,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(n,t,r)):n.apply(this,r),t}}const qP=n=>n==="start"?"left":n==="end"?"right":"center",Ai=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,uU=(n,t,e,r)=>n===(r?"left":"right")?e:n==="center"?(t+e)/2:t;function hU(n,t,e){const r=t.length;let i=0,s=r;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,f=a.axis,{min:p,max:m,minDefined:v,maxDefined:x}=a.getUserBounds();if(v){if(i=Math.min(Pl(l,f,p).lo,e?r:Pl(t,f,a.getPixelForValue(p)).lo),h){const E=l.slice(0,i+1).reverse().findIndex(b=>!ke(b[o.axis]));i-=Math.max(0,E)}i=Lr(i,0,r-1)}if(x){let E=Math.max(Pl(l,a.axis,m,!0).hi+1,e?0:Pl(t,f,a.getPixelForValue(m),!0).hi+1);if(h){const b=l.slice(E-1).findIndex(T=>!ke(T[o.axis]));E+=Math.max(0,b)}s=Lr(E,i,r)-i}else s=r-i}return{start:i,count:s}}function fU(n){const{xScale:t,yScale:e,_scaleRanges:r}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),s}const Um=n=>n===0||n===1,h3=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*En/e)),f3=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*En/e)+1,jp={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Jn)+1,easeOutSine:n=>Math.sin(n*Jn),easeInOutSine:n=>-.5*(Math.cos(Qe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Um(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Um(n)?n:h3(n,.075,.3),easeOutElastic:n=>Um(n)?n:f3(n,.075,.3),easeInOutElastic(n){return Um(n)?n:n<.5?.5*h3(n*2,.1125,.45):.5+.5*f3(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-jp.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?jp.easeInBounce(n*2)*.5:jp.easeOutBounce(n*2-1)*.5+.5};function j2(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function d3(n){return j2(n)?n:new lg(n)}function rw(n){return j2(n)?n:new lg(n).saturate(.5).darken(.1).hexString()}const dU=["x","y","borderWidth","radius","tension"],pU=["color","borderColor","backgroundColor"];function gU(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:pU},numbers:{type:"number",properties:dU}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mU(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const p3=new Map;function vU(n,t){t=t||{};const e=n+JSON.stringify(t);let r=p3.get(e);return r||(r=new Intl.NumberFormat(n,t),p3.set(e,r)),r}function H2(n,t,e){return vU(t,e).format(n)}const yU={values(n){return dr(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),s=_U(n,e)}const a=jP(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),H2(n,r,l)}};function _U(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var YP={formatters:yU};function xU(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:YP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const tu=Object.create(null),YE=Object.create(null);function Hp(n,t){if(!t)return n;const e=t.split(".");for(let r=0,i=e.length;r<i;++r){const s=e[r];n=n[s]||(n[s]=Object.create(null))}return n}function iw(n,t,e){return typeof t=="string"?ug(Hp(n,t),e):ug(Hp(n,""),t)}class wU{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>rw(i.backgroundColor),this.hoverBorderColor=(r,i)=>rw(i.borderColor),this.hoverColor=(r,i)=>rw(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return iw(this,t,e)}get(t){return Hp(this,t)}describe(t,e){return iw(YE,t,e)}override(t,e){return iw(tu,t,e)}route(t,e,r,i){const s=Hp(this,t),a=Hp(this,r),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[o],h=a[i];return Ee(l)?Object.assign({},h,l):ie(l,h)},set(l){this[o]=l}}})}apply(t){t.forEach(e=>e(this))}}var On=new wU({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gU,mU,xU]);function EU(n){return!n||ke(n.size)||ke(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function g3(n,t,e,r,i){let s=t[i];return s||(s=t[i]=n.measureText(i).width,e.push(i)),s>r&&(r=s),r}function gl(n,t,e){const r=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function m3(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function KE(n,t,e,r){KP(n,t,e,r,null)}function KP(n,t,e,r,i){let s,a,o,l,h,f,p,m;const v=t.pointStyle,x=t.rotation,E=t.radius;let b=(x||0)*ZF;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,r),n.rotate(b),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(E)||E<=0)){switch(n.beginPath(),v){default:i?n.ellipse(e,r,i/2,E,0,0,En):n.arc(e,r,E,0,En),n.closePath();break;case"triangle":f=i?i/2:E,n.moveTo(e+Math.sin(b)*f,r-Math.cos(b)*E),b+=o3,n.lineTo(e+Math.sin(b)*f,r-Math.cos(b)*E),b+=o3,n.lineTo(e+Math.sin(b)*f,r-Math.cos(b)*E),n.closePath();break;case"rectRounded":h=E*.516,l=E-h,a=Math.cos(b+pl)*l,p=Math.cos(b+pl)*(i?i/2-h:l),o=Math.sin(b+pl)*l,m=Math.sin(b+pl)*(i?i/2-h:l),n.arc(e-p,r-o,h,b-Qe,b-Jn),n.arc(e+m,r-a,h,b-Jn,b),n.arc(e+p,r+o,h,b,b+Jn),n.arc(e-m,r+a,h,b+Jn,b+Qe),n.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,f=i?i/2:l,n.rect(e-f,r-l,2*f,2*l);break}b+=pl;case"rectRot":p=Math.cos(b)*(i?i/2:E),a=Math.cos(b)*E,o=Math.sin(b)*E,m=Math.sin(b)*(i?i/2:E),n.moveTo(e-p,r-o),n.lineTo(e+m,r-a),n.lineTo(e+p,r+o),n.lineTo(e-m,r+a),n.closePath();break;case"crossRot":b+=pl;case"cross":p=Math.cos(b)*(i?i/2:E),a=Math.cos(b)*E,o=Math.sin(b)*E,m=Math.sin(b)*(i?i/2:E),n.moveTo(e-p,r-o),n.lineTo(e+p,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"star":p=Math.cos(b)*(i?i/2:E),a=Math.cos(b)*E,o=Math.sin(b)*E,m=Math.sin(b)*(i?i/2:E),n.moveTo(e-p,r-o),n.lineTo(e+p,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a),b+=pl,p=Math.cos(b)*(i?i/2:E),a=Math.cos(b)*E,o=Math.sin(b)*E,m=Math.sin(b)*(i?i/2:E),n.moveTo(e-p,r-o),n.lineTo(e+p,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"line":a=i?i/2:Math.cos(b)*E,o=Math.sin(b)*E,n.moveTo(e-a,r-o),n.lineTo(e+a,r+o);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(b)*(i?i/2:E),r+Math.sin(b)*E);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function pg(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function z2(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function G2(n){n.restore()}function bU(n,t,e,r,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else i==="after"!=!!r?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function AU(n,t,e,r){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function TU(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ke(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function SU(n,t,e,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,h=e+s.actualBoundingBoxDescent,f=i.strikethrough?(l+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,f),n.lineTo(o,f),n.stroke()}}function CU(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function av(n,t,e,r,i,s={}){const a=dr(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let l,h;for(n.save(),n.font=i.string,TU(n,s),l=0;l<a.length;++l)h=a[l],s.backdrop&&CU(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),ke(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(h,e,r,s.maxWidth)),n.fillText(h,e,r,s.maxWidth),SU(n,e,r,h,s),r+=Number(i.lineHeight);n.restore()}function ov(n,t){const{x:e,y:r,w:i,h:s,radius:a}=t;n.arc(e+a.topLeft,r+a.topLeft,a.topLeft,1.5*Qe,Qe,!0),n.lineTo(e,r+s-a.bottomLeft),n.arc(e+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Qe,Jn,!0),n.lineTo(e+i-a.bottomRight,r+s),n.arc(e+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Jn,0,!0),n.lineTo(e+i,r+a.topRight),n.arc(e+i-a.topRight,r+a.topRight,a.topRight,0,-Jn,!0),n.lineTo(e+a.topLeft,r)}const IU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,DU=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function OU(n,t){const e=(""+n).match(IU);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const RU=n=>+n||0;function W2(n,t){const e={},r=Ee(t),i=r?Object.keys(t):t,s=Ee(n)?r?a=>ie(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of i)e[a]=RU(s(a));return e}function XP(n){return W2(n,{top:"y",right:"x",bottom:"y",left:"x"})}function $h(n){return W2(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ws(n){const t=XP(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ui(n,t){n=n||{},t=t||On.font;let e=ie(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=ie(n.style,t.style);r&&!(""+r).match(DU)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ie(n.family,t.family),lineHeight:OU(ie(n.lineHeight,t.lineHeight),e),size:e,style:r,weight:ie(n.weight,t.weight),string:""};return i.string=EU(i),i}function jm(n,t,e,r){let i,s,a;for(i=0,s=n.length;i<s;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function NU(n,t,e){const{min:r,max:i}=n,s=FP(t,(i-r)/2),a=(o,l)=>e&&o===0?0:o+l;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function pu(n,t){return Object.assign(Object.create(n),t)}function $2(n,t=[""],e,r,i=()=>n[0]){const s=e||n;typeof r>"u"&&(r=t6("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:o=>$2([o,...n],t,s,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return ZP(o,l,()=>UU(l,t,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return y3(o).includes(l)},ownKeys(o){return y3(o)},set(o,l,h){const f=o._storage||(o._storage=i());return o[l]=f[l]=h,delete o._keys,!0}})}function Zh(n,t,e,r){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:QP(n,r),setContext:s=>Zh(n,s,e,r),override:s=>Zh(n.override(s),t,e,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return ZP(s,a,()=>PU(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function QP(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:r,isScriptable:yc(e)?e:()=>e,isIndexable:yc(r)?r:()=>r}}const MU=(n,t)=>n?n+F2(t):t,q2=(n,t)=>Ee(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ZP(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const r=e();return n[t]=r,r}function PU(n,t,e){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=n;let o=r[t];return yc(o)&&a.isScriptable(t)&&(o=kU(t,o,n,e)),dr(o)&&o.length&&(o=LU(t,o,n,a.isIndexable)),q2(t,o)&&(o=Zh(o,i,s&&s[t],a)),o}function kU(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=e;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=t(s,a||r);return o.delete(n),q2(n,l)&&(l=Y2(i._scopes,i,n,l)),l}function LU(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=e;if(typeof s.index<"u"&&r(n))return t[s.index%t.length];if(Ee(t[0])){const l=t,h=i._scopes.filter(f=>f!==l);t=[];for(const f of l){const p=Y2(h,i,n,f);t.push(Zh(p,s,a&&a[n],o))}}return t}function JP(n,t,e){return yc(n)?n(t,e):n}const VU=(n,t)=>n===!0?t:typeof n=="string"?Jl(t,n):void 0;function BU(n,t,e,r,i){for(const s of t){const a=VU(e,s);if(a){n.add(a);const o=JP(a._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==r)return o}else if(a===!1&&typeof r<"u"&&e!==r)return null}return!1}function Y2(n,t,e,r){const i=t._rootScopes,s=JP(t._fallback,e,r),a=[...n,...i],o=new Set;o.add(r);let l=v3(o,a,e,s||e,r);return l===null||typeof s<"u"&&s!==e&&(l=v3(o,a,s,l,r),l===null)?!1:$2(Array.from(o),[""],i,s,()=>FU(t,e,r))}function v3(n,t,e,r,i){for(;e;)e=BU(n,t,e,r,i);return e}function FU(n,t,e){const r=n._getTarget();t in r||(r[t]={});const i=r[t];return dr(i)&&Ee(e)?e:i||{}}function UU(n,t,e,r){let i;for(const s of t)if(i=t6(MU(s,n),e),typeof i<"u")return q2(n,i)?Y2(e,r,n,i):i}function t6(n,t){for(const e of t){if(!e)continue;const r=e[n];if(typeof r<"u")return r}}function y3(n){let t=n._keys;return t||(t=n._keys=jU(n._scopes)),t}function jU(n){const t=new Set;for(const e of n)for(const r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const HU=Number.EPSILON||1e-14,Jh=(n,t)=>t<n.length&&!n[t].skip&&n[t],e6=n=>n==="x"?"y":"x";function zU(n,t,e,r){const i=n.skip?t:n,s=t,a=e.skip?t:e,o=qE(s,i),l=qE(a,s);let h=o/(o+l),f=l/(o+l);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const p=r*h,m=r*f;return{previous:{x:s.x-p*(a.x-i.x),y:s.y-p*(a.y-i.y)},next:{x:s.x+m*(a.x-i.x),y:s.y+m*(a.y-i.y)}}}function GU(n,t,e){const r=n.length;let i,s,a,o,l,h=Jh(n,0);for(let f=0;f<r-1;++f)if(l=h,h=Jh(n,f+1),!(!l||!h)){if(Up(t[f],0,HU)){e[f]=e[f+1]=0;continue}i=e[f]/t[f],s=e[f+1]/t[f],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),e[f]=i*a*t[f],e[f+1]=s*a*t[f])}}function WU(n,t,e="x"){const r=e6(e),i=n.length;let s,a,o,l=Jh(n,0);for(let h=0;h<i;++h){if(a=o,o=l,l=Jh(n,h+1),!o)continue;const f=o[e],p=o[r];a&&(s=(f-a[e])/3,o[`cp1${e}`]=f-s,o[`cp1${r}`]=p-s*t[h]),l&&(s=(l[e]-f)/3,o[`cp2${e}`]=f+s,o[`cp2${r}`]=p+s*t[h])}}function $U(n,t="x"){const e=e6(t),r=n.length,i=Array(r).fill(0),s=Array(r);let a,o,l,h=Jh(n,0);for(a=0;a<r;++a)if(o=l,l=h,h=Jh(n,a+1),!!l){if(h){const f=h[t]-l[t];i[a]=f!==0?(h[e]-l[e])/f:0}s[a]=o?h?ea(i[a-1])!==ea(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}GU(n,i,s),WU(n,s,t)}function Hm(n,t,e){return Math.max(Math.min(n,e),t)}function qU(n,t){let e,r,i,s,a,o=pg(n[0],t);for(e=0,r=n.length;e<r;++e)a=s,s=o,o=e<r-1&&pg(n[e+1],t),s&&(i=n[e],a&&(i.cp1x=Hm(i.cp1x,t.left,t.right),i.cp1y=Hm(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Hm(i.cp2x,t.left,t.right),i.cp2y=Hm(i.cp2y,t.top,t.bottom)))}function YU(n,t,e,r,i){let s,a,o,l;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")$U(n,i);else{let h=r?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],l=zU(h,o,n[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,h=o}t.capBezierPoints&&qU(n,e)}function K2(){return typeof window<"u"&&typeof document<"u"}function X2(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function cv(n,t,e){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=n,r}const ny=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function KU(n,t){return ny(n).getPropertyValue(t)}const XU=["top","right","bottom","left"];function Hl(n,t,e){const r={};e=e?"-"+e:"";for(let i=0;i<4;i++){const s=XU[i];r[s]=parseFloat(n[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const QU=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function ZU(n,t){const e=n.touches,r=e&&e.length?e[0]:n,{offsetX:i,offsetY:s}=r;let a=!1,o,l;if(QU(i,s,n.target))o=i,l=s;else{const h=t.getBoundingClientRect();o=r.clientX-h.left,l=r.clientY-h.top,a=!0}return{x:o,y:l,box:a}}function wl(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:r}=t,i=ny(e),s=i.boxSizing==="border-box",a=Hl(i,"padding"),o=Hl(i,"border","width"),{x:l,y:h,box:f}=ZU(n,e),p=a.left+(f&&o.left),m=a.top+(f&&o.top);let{width:v,height:x}=t;return s&&(v-=a.width+o.width,x-=a.height+o.height),{x:Math.round((l-p)/v*e.width/r),y:Math.round((h-m)/x*e.height/r)}}function JU(n,t,e){let r,i;if(t===void 0||e===void 0){const s=n&&X2(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const a=s.getBoundingClientRect(),o=ny(s),l=Hl(o,"border","width"),h=Hl(o,"padding");t=a.width-h.width-l.width,e=a.height-h.height-l.height,r=cv(o.maxWidth,s,"clientWidth"),i=cv(o.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||sv,maxHeight:i||sv}}const zm=n=>Math.round(n*10)/10;function tj(n,t,e,r){const i=ny(n),s=Hl(i,"margin"),a=cv(i.maxWidth,n,"clientWidth")||sv,o=cv(i.maxHeight,n,"clientHeight")||sv,l=JU(n,t,e);let{width:h,height:f}=l;if(i.boxSizing==="content-box"){const m=Hl(i,"border","width"),v=Hl(i,"padding");h-=v.width+m.width,f-=v.height+m.height}return h=Math.max(0,h-s.width),f=Math.max(0,r?h/r:f-s.height),h=zm(Math.min(h,a,l.maxWidth)),f=zm(Math.min(f,o,l.maxHeight)),h&&!f&&(f=zm(h/2)),(t!==void 0||e!==void 0)&&r&&l.height&&f>l.height&&(f=l.height,h=zm(Math.floor(f*r))),{width:h,height:f}}function _3(n,t,e){const r=t||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(n.currentDevicePixelRatio=r,a.height=i,a.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const ej=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};K2()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function x3(n,t){const e=KU(n,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function El(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function nj(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:r==="middle"?e<.5?n.y:t.y:r==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function rj(n,t,e,r){const i={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},a=El(n,i,e),o=El(i,s,e),l=El(s,t,e),h=El(a,o,e),f=El(o,l,e);return El(h,f,e)}const ij=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},sj=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function qh(n,t,e){return n?ij(t,e):sj()}function n6(n,t){let e,r;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=r)}function r6(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function i6(n){return n==="angle"?{between:dg,compare:iU,normalize:ms}:{between:sc,compare:(t,e)=>t-e,normalize:t=>t}}function w3({start:n,end:t,count:e,loop:r,style:i}){return{start:n%e,end:t%e,loop:r&&(t-n+1)%e===0,style:i}}function aj(n,t,e){const{property:r,start:i,end:s}=e,{between:a,normalize:o}=i6(r),l=t.length;let{start:h,end:f,loop:p}=n,m,v;if(p){for(h+=l,f+=l,m=0,v=l;m<v&&a(o(t[h%l][r]),i,s);++m)h--,f--;h%=l,f%=l}return f<h&&(f+=l),{start:h,end:f,loop:p,style:n.style}}function oj(n,t,e){if(!e)return[n];const{property:r,start:i,end:s}=e,a=t.length,{compare:o,between:l,normalize:h}=i6(r),{start:f,end:p,loop:m,style:v}=aj(n,t,e),x=[];let E=!1,b=null,T,S,D;const P=()=>l(i,D,T)&&o(i,D)!==0,k=()=>o(s,T)===0||l(s,D,T),U=()=>E||P(),M=()=>!E||k();for(let I=f,N=f;I<=p;++I)S=t[I%a],!S.skip&&(T=h(S[r]),T!==D&&(E=l(T,i,s),b===null&&U()&&(b=o(T,i)===0?I:N),b!==null&&M()&&(x.push(w3({start:b,end:I,loop:m,count:a,style:v})),b=null),N=I,D=T));return b!==null&&x.push(w3({start:b,end:p,loop:m,count:a,style:v})),x}function cj(n,t){const e=[],r=n.segments;for(let i=0;i<r.length;i++){const s=oj(r[i],n.points,t);s.length&&e.push(...s)}return e}function lj(n,t,e,r){let i=0,s=t-1;if(e&&!r)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&n[s%t].skip;)s--;return s%=t,{start:i,end:s}}function uj(n,t,e,r){const i=n.length,s=[];let a=t,o=n[t],l;for(l=t+1;l<=e;++l){const h=n[l%i];h.skip||h.stop?o.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=a=h.stop?l:null):(a=l,o.skip&&(t=l)),o=h}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function hj(n,t){const e=n.points,r=n.options.spanGaps,i=e.length;if(!i)return[];const s=!!n._loop,{start:a,end:o}=lj(e,i,s,r);if(r===!0)return E3(n,[{start:a,end:o,loop:s}],e,t);const l=o<a?o+i:o,h=!!n._fullLoop&&a===0&&o===i-1;return E3(n,uj(e,a,l,h),e,t)}function E3(n,t,e,r){return!r||!r.setContext||!e?t:fj(n,t,e,r)}function fj(n,t,e,r){const i=n._chart.getContext(),s=b3(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=e.length,h=[];let f=s,p=t[0].start,m=p;function v(x,E,b,T){const S=o?-1:1;if(x!==E){for(x+=l;e[x%l].skip;)x-=S;for(;e[E%l].skip;)E+=S;x%l!==E%l&&(h.push({start:x%l,end:E%l,loop:b,style:T}),f=T,p=E%l)}}for(const x of t){p=o?p:x.start;let E=e[p%l],b;for(m=p+1;m<=x.end;m++){const T=e[m%l];b=b3(r.setContext(pu(i,{type:"segment",p0:E,p1:T,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:a}))),dj(b,f)&&v(p,m-1,x.loop,f),E=T,f=b}p<m-1&&v(p,m-1,x.loop,f)}return h}function b3(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function dj(n,t){if(!t)return!1;const e=[],r=function(i,s){return j2(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(t,r)}function Gm(n,t,e){return n.options.clip?n[e]:t[e]}function pj(n,t){const{xScale:e,yScale:r}=n;return e&&r?{left:Gm(e,t,"left"),right:Gm(e,t,"right"),top:Gm(r,t,"top"),bottom:Gm(r,t,"bottom")}:t}function gj(n,t){const e=t._clip;if(e.disabled)return!1;const r=pj(t,n.chartArea);return{left:e.left===!1?0:r.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:r.right+(e.right===!0?0:e.right),top:e.top===!1?0:r.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:r.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){const s=e.listeners[i],a=e.duration;s.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(r-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=WP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Wa=new mj;const A3="transparent",vj={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const r=d3(n||A3),i=r.valid&&d3(t||A3);return i&&i.valid?i.mix(r,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class yj{constructor(t,e,r,i){const s=e[r];i=jm([t.to,i,s,t.from]);const a=jm([t.from,s,i]);this._active=!0,this._fn=t.fn||vj[t.type||typeof a],this._easing=jp[t.easing]||jp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=jm([t.to,e,i,t.from]),this._from=jm([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||e<r),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=s;return}l=e/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}}class s6{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ee(t))return;const e=Object.keys(On.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!Ee(s))return;const a={};for(const o of e)a[o]=s[o];(dr(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,a)})})}_animateOptions(t,e){const r=e.options,i=xj(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&_j(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const h=a[l];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(t,e));continue}const f=e[h];let p=s[h];const m=r.get(h);if(p)if(m&&p.active()){p.update(m,f,o);continue}else p.cancel();if(!m||!m.duration){t[h]=f;continue}s[h]=p=new yj(m,t,h,f),i.push(p)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const r=this._createAnimations(t,e);if(r.length)return Wa.add(this._chart,r),!0}}function _j(n,t){const e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function xj(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function T3(n,t){const e=n&&n.options||{},r=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function wj(n,t,e){if(e===!1)return!1;const r=T3(n,e),i=T3(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Ej(n){let t,e,r,i;return Ee(n)?(t=n.top,e=n.right,r=n.bottom,i=n.left):t=e=r=i=n,{top:t,right:e,bottom:r,left:i,disabled:n===!1}}function a6(n,t){const e=[],r=n._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)e.push(r[i].index);return e}function S3(n,t,e,r={}){const i=n.keys,s=r.mode==="single";let a,o,l,h;if(t===null)return;let f=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===e){if(f=!0,r.all)continue;break}h=n.values[l],is(h)&&(s||t===0||ea(t)===ea(h))&&(t+=h)}return!f&&!r.all?0:t}function bj(n,t){const{iScale:e,vScale:r}=t,i=e.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,h,f;for(l=0,h=a.length;l<h;++l)f=a[l],o[l]={[i]:f,[s]:n[f]};return o}function sw(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Aj(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Tj(n){const{min:t,max:e,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function Sj(n,t,e){const r=n[t]||(n[t]={});return r[e]||(r[e]={})}function C3(n,t,e,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function I3(n,t){const{chart:e,_cachedMeta:r}=n,i=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,h=a.axis,f=Aj(s,a,r),p=t.length;let m;for(let v=0;v<p;++v){const x=t[v],{[l]:E,[h]:b}=x,T=x._stacks||(x._stacks={});m=T[h]=Sj(i,f,E),m[o]=b,m._top=C3(m,a,!0,r.type),m._bottom=C3(m,a,!1,r.type);const S=m._visualValues||(m._visualValues={});S[o]=b}}function aw(n,t){const e=n.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function Cj(n,t){return pu(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Ij(n,t,e){return pu(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ep(n,t){const e=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){t=t||n._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e],s[r]._visualValues!==void 0&&s[r]._visualValues[e]!==void 0&&delete s[r]._visualValues[e]}}}const ow=n=>n==="reset"||n==="none",D3=(n,t)=>t?n:Object.assign({},n),Dj=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:a6(e,!0),values:null};class zl{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=sw(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ep(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),i=(p,m,v,x)=>p==="x"?m:p==="r"?x:v,s=e.xAxisID=ie(r.xAxisID,aw(t,"x")),a=e.yAxisID=ie(r.yAxisID,aw(t,"y")),o=e.rAxisID=ie(r.rAxisID,aw(t,"r")),l=e.indexAxis,h=e.iAxisID=i(l,s,a,o),f=e.vAxisID=i(l,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&u3(this._data,this),t._stacked&&ep(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(Ee(e)){const i=this._cachedMeta;this._data=bj(e,i)}else if(r!==e){if(r){u3(r,this);const i=this._cachedMeta;ep(i),i._parsed=[]}e&&Object.isExtensible(e)&&cU(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=sw(e.vScale,e),e.stack!==r.stack&&(i=!0,ep(e),e.stack=r.stack),this._resyncElements(t),(i||s!==e._stacked)&&(I3(this,e._parsed),e._stacked=sw(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,o=s.axis;let l=t===0&&e===i.length?!0:r._sorted,h=t>0&&r._parsed[t-1],f,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{dr(i[t])?m=this.parseArrayData(r,i,t,e):Ee(i[t])?m=this.parseObjectData(r,i,t,e):m=this.parsePrimitiveData(r,i,t,e);const v=()=>p[o]===null||h&&p[o]<h[o];for(f=0;f<e;++f)r._parsed[f+t]=p=m[f],l&&(v()&&(l=!1),h=p);r._sorted=l}a&&I3(this,m)}parsePrimitiveData(t,e,r,i){const{iScale:s,vScale:a}=t,o=s.axis,l=a.axis,h=s.getLabels(),f=s===a,p=new Array(i);let m,v,x;for(m=0,v=i;m<v;++m)x=m+r,p[m]={[o]:f||s.parse(h[x],x),[l]:a.parse(e[x],x)};return p}parseArrayData(t,e,r,i){const{xScale:s,yScale:a}=t,o=new Array(i);let l,h,f,p;for(l=0,h=i;l<h;++l)f=l+r,p=e[f],o[l]={x:s.parse(p[0],f),y:a.parse(p[1],f)};return o}parseObjectData(t,e,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=new Array(i);let f,p,m,v;for(f=0,p=i;f<p;++f)m=f+r,v=e[m],h[f]={x:s.parse(Jl(v,o),m),y:a.parse(Jl(v,l),m)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const i=this.chart,s=this._cachedMeta,a=e[t.axis],o={keys:a6(i,!0),values:e._stacks[t.axis]._visualValues};return S3(o,a,s.index,{mode:r})}updateRangeFromParsed(t,e,r,i){const s=r[e.axis];let a=s===null?NaN:s;const o=i&&r._stacks[e.axis];i&&o&&(i.values=o,a=S3(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,o=this._getOtherScale(t),l=Dj(e,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=Tj(o);let m,v;function x(){v=i[m];const E=v[o.axis];return!is(v[t.axis])||f>E||p<E}for(m=0;m<a&&!(!x()&&(this.updateRangeFromParsed(h,t,v,l),s));++m);if(s){for(m=a-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(h,t,v,l);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=e.length;i<s;++i)a=e[i][t.axis],is(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Ej(ie(this.options.clip,wj(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,i=r.data||[],s=e.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,h=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(t,s,o,l),f=o;f<o+l;++f){const p=i[f];p.hidden||(p.active&&h?a.push(p):p.draw(t,s))}for(f=0;f<a.length;++f)a[f].draw(t,s)}getStyle(t,e){const r=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=Ij(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=Cj(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const i=e==="active",s=this._cachedDataOpts,a=t+"-"+e,o=s[a],l=this.enableOptionSharing&&hg(r);if(o)return D3(o,l);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,t),p=i?[`${t}Hover`,"hover",t,""]:[t,""],m=h.getOptionScopes(this.getDataset(),f),v=Object.keys(On.elements[t]),x=()=>this.getContext(r,i,e),E=h.resolveNamedOptions(m,v,x,p);return E.$shared&&(E.$shared=l,s[a]=Object.freeze(D3(E,l))),E}_resolveAnimations(t,e,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,e),m=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(m,this.getContext(t,r,e))}const h=new s6(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||ow(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const r=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,r),{sharedOptions:s,includeOptions:a}}updateElement(t,e,r,i){ow(i)?Object.assign(t,r):this._resolveAnimations(e,i).update(t,r)}updateSharedOptions(t,e,r){t&&!ow(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[o,l,h]of this._syncList)this[o](l,h);this._syncList=[];const i=r.length,s=e.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,r=!0){const i=this._cachedMeta,s=i.data,a=t+e;let o;const l=h=>{for(h.length+=e,o=h.length-1;o>=a;o--)h[o]=h[o-e]};for(l(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),r&&this.updateElements(s,t,e,"reset")}updateElements(t,e,r,i){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,e);r._stacked&&ep(r,i)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,i]=t;this[e](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}lt(zl,"defaults",{}),lt(zl,"datasetElementType",null),lt(zl,"dataElementType",null);function Oj(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=e.length;i<s;i++)r=r.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=GP(r.sort((i,s)=>i-s))}return n._cache.$bar}function Rj(n){const t=n.iScale,e=Oj(t,n.type);let r=t._length,i,s,a,o;const l=()=>{a===32767||a===-32768||(hg(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(i=0,s=e.length;i<s;++i)a=t.getPixelForValue(e[i]),l();for(o=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),l();return r}function Nj(n,t,e,r){const i=e.barThickness;let s,a;return ke(i)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[n]-s/2}}function Mj(n,t,e,r){const i=t.pixels,s=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;a===null&&(a=s-(o===null?t.end-t.start:o-s)),o===null&&(o=s+s-a);const h=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:e.barPercentage,start:h}}function Pj(n,t,e,r){const i=e.parse(n[0],r),s=e.parse(n[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,h=o;Math.abs(a)>Math.abs(o)&&(l=o,h=a),t[e.axis]=h,t._custom={barStart:l,barEnd:h,start:i,end:s,min:a,max:o}}function o6(n,t,e,r){return dr(n)?Pj(n,t,e,r):t[e.axis]=e.parse(n,r),t}function O3(n,t,e,r){const i=n.iScale,s=n.vScale,a=i.getLabels(),o=i===s,l=[];let h,f,p,m;for(h=e,f=e+r;h<f;++h)m=t[h],p={},p[i.axis]=o||i.parse(a[h],h),l.push(o6(m,p,s,h));return l}function cw(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function kj(n,t,e){return n!==0?ea(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Lj(n){let t,e,r,i,s;return n.horizontal?(t=n.base>n.x,e="left",r="right"):(t=n.base<n.y,e="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:r,reverse:t,top:i,bottom:s}}function Vj(n,t,e,r){let i=t.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:h,bottom:f}=Lj(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===r?i=h:(e._bottom||0)===r?i=f:(s[R3(f,a,o,l)]=!0,i=h)),s[R3(i,a,o,l)]=!0,n.borderSkipped=s}function R3(n,t,e,r){return r?(n=Bj(n,t,e),n=N3(n,e,t)):n=N3(n,t,e),n}function Bj(n,t,e){return n===t?e:n===e?t:n}function N3(n,t,e){return n==="start"?t:n==="end"?e:n}function Fj(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class T1 extends zl{parsePrimitiveData(t,e,r,i){return O3(t,e,r,i)}parseArrayData(t,e,r,i){return O3(t,e,r,i)}parseObjectData(t,e,r,i){const{iScale:s,vScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=s.axis==="x"?o:l,f=a.axis==="x"?o:l,p=[];let m,v,x,E;for(m=r,v=r+i;m<v;++m)E=e[m],x={},x[s.axis]=s.parse(Jl(E,h),m),p.push(o6(Jl(E,f),x,a,m));return p}updateRangeFromParsed(t,e,r,i){super.updateRangeFromParsed(t,e,r,i);const s=r._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:i}=e,s=this.getParsed(t),a=s._custom,o=cw(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),h=o.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,i);for(let v=e;v<e+r;v++){const x=this.getParsed(v),E=s||ke(x[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),b=this._calculateBarIndexPixels(v,f),T=(x._stacks||{})[o.axis],S={horizontal:h,base:E.base,enableBorderRadius:!T||cw(x._custom)||a===T._top||a===T._bottom,x:h?E.head:b.center,y:h?b.center:E.head,height:h?b.size:Math.abs(E.size),width:h?Math.abs(E.size):b.size};m&&(S.options=p||this.resolveDataElementOptions(v,t[v].active?"active":i));const D=S.options||t[v].options;Vj(S,D,T,a),Fj(S,D,f.ratio),this.updateElement(t[v],v,S,i)}}_getStacks(t,e){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),s=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),l=o&&o[r.axis],h=f=>{const p=f._parsed.find(v=>v[r.axis]===l),m=p&&p[f.vScale.axis];if(ke(m)||isNaN(m))return!0};for(const f of i)if(!(e!==void 0&&h(f))&&((s===!1||a.indexOf(f.stack)===-1||s===void 0&&f.stack===void 0)&&a.push(f.stack),f.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[ie(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,r){const i=this._getStacks(t,r),s=e!==void 0?i.indexOf(e):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,i=[];let s,a;for(s=0,a=e.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const o=t.barThickness;return{min:o||Rj(e),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(t),h=l._custom,f=cw(h);let p=l[e.axis],m=0,v=r?this.applyStack(e,l,r):p,x,E;v!==p&&(m=v-p,v=p),f&&(p=h.barStart,v=h.barEnd-h.barStart,p!==0&&ea(p)!==ea(h.barEnd)&&(m=0),m+=p);const b=!ke(s)&&!f?s:m;let T=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?x=e.getPixelForValue(m+v):x=T,E=x-T,Math.abs(E)<a){E=kj(E,e,o)*a,p===o&&(T-=E/2);const S=e.getPixelForDecimal(0),D=e.getPixelForDecimal(1),P=Math.min(S,D),k=Math.max(S,D);T=Math.max(Math.min(T,k),P),x=T+E,r&&!f&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(x)-e.getValueForPixel(T))}if(T===e.getPixelForValue(o)){const S=ea(E)*e.getLineWidthForValue(o)/2;T+=S,E-=S}return{size:E,base:T,head:x,center:x+E/2}}_calculateBarIndexPixels(t,e){const r=e.scale,i=this.options,s=i.skipNull,a=ie(i.maxBarThickness,1/0);let o,l;const h=this._getAxisCount();if(e.grouped){const f=s?this._getStackCount(t):e.stackCount,p=i.barThickness==="flex"?Mj(t,e,i,f*h):Nj(t,e,i,f*h),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(ie(m,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+v;o=p.start+p.chunk*x+p.chunk/2,l=Math.min(a,p.chunk*p.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,e.min*e.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[e.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}lt(T1,"id","bar"),lt(T1,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),lt(T1,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Uj(n,t,e){let r=1,i=1,s=0,a=0;if(t<En){const o=n,l=o+t,h=Math.cos(o),f=Math.sin(o),p=Math.cos(l),m=Math.sin(l),v=(D,P,k)=>dg(D,o,l,!0)?1:Math.max(P,P*e,k,k*e),x=(D,P,k)=>dg(D,o,l,!0)?-1:Math.min(P,P*e,k,k*e),E=v(0,h,p),b=v(Jn,f,m),T=x(Qe,h,p),S=x(Qe+Jn,f,m);r=(E-T)/2,i=(b-S)/2,s=-(E+T)/2,a=-(b+S)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class Ep extends zl{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Ee(r[t])){const{key:l="value"}=this._parsing;s=h=>+Jl(r[h],l)}let a,o;for(a=t,o=t+e;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return Ya(this.options.rotation-90)}_getCircumference(){return Ya(this.options.circumference)}_getRotationExtents(){let t=En,e=-En;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(WF(this.options.cutout,o),1),h=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:v,offsetX:x,offsetY:E}=Uj(p,f,l),b=(r.width-a)/m,T=(r.height-a)/v,S=Math.max(Math.min(b,T)/2,0),D=FP(this.options.radius,S),P=Math.max(D*l,0),k=(D-P)/this._getVisibleDatasetWeightTotal();this.offsetX=x*D,this.offsetY=E*D,i.total=this.calculateTotal(),this.outerRadius=D-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*h,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/En)}updateElements(t,e,r,i){const s=i==="reset",a=this.chart,o=a.chartArea,h=a.options.animation,f=(o.left+o.right)/2,p=(o.top+o.bottom)/2,m=s&&h.animateScale,v=m?0:this.innerRadius,x=m?0:this.outerRadius,{sharedOptions:E,includeOptions:b}=this._getSharedOptions(e,i);let T=this._getRotation(),S;for(S=0;S<e;++S)T+=this._circumference(S,s);for(S=e;S<e+r;++S){const D=this._circumference(S,s),P=t[S],k={x:f+this.offsetX,y:p+this.offsetY,startAngle:T,endAngle:T+D,circumference:D,outerRadius:x,innerRadius:v};b&&(k.options=E||this.resolveDataElementOptions(S,P.active?"active":i)),T+=D,this.updateElement(P,S,k,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let r=0,i;for(i=0;i<e.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?En*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=H2(e._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const r=this.chart;let i,s,a,o,l;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),t=a.data,o=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)l=o.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(ie(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}lt(Ep,"id","doughnut"),lt(Ep,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),lt(Ep,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),lt(Ep,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return e.labels.map((s,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}});class S1 extends zl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=e,a=this.chart._animationsDisabled;let{start:o,count:l}=hU(e,i,a);this._drawStart=o,this._drawCount=l,fU(e)&&(o=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:h},t),this.updateElements(i,o,l,t)}updateElements(t,e,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i),m=a.axis,v=o.axis,{spanGaps:x,segment:E}=this.options,b=fg(x)?x:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||i==="none",S=e+r,D=t.length;let P=e>0&&this.getParsed(e-1);for(let k=0;k<D;++k){const U=t[k],M=T?U:{};if(k<e||k>=S){M.skip=!0;continue}const I=this.getParsed(k),N=ke(I[v]),L=M[m]=a.getPixelForValue(I[m],k),j=M[v]=s||N?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,I,l):I[v],k);M.skip=isNaN(L)||isNaN(j)||N,M.stop=k>0&&Math.abs(I[m]-P[m])>b,E&&(M.parsed=I,M.raw=h.data[k]),p&&(M.options=f||this.resolveDataElementOptions(k,U.active?"active":i)),T||this.updateElement(U,k,M,i),P=I}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}lt(S1,"id","line"),lt(S1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),lt(S1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ml(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Q2{constructor(t){lt(this,"options");this.options=t||{}}static override(t){Object.assign(Q2.prototype,t)}init(){}formats(){return ml()}parse(){return ml()}format(){return ml()}add(){return ml()}diff(){return ml()}startOf(){return ml()}endOf(){return ml()}}var c6={_date:Q2};function jj(n,t,e,r){const{controller:i,data:s,_sorted:a}=n,o=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const h=o._reversePixels?aU:Pl;if(r){if(i._sharedOptions){const f=s[0],p=typeof f.getRange=="function"&&f.getRange(t);if(p){const m=h(s,t,e-p),v=h(s,t,e+p);return{lo:m.lo,hi:v.hi}}}}else{const f=h(s,t,e);if(l){const{vScale:p}=i._cachedMeta,{_parsed:m}=n,v=m.slice(0,f.lo+1).reverse().findIndex(E=>!ke(E[p.axis]));f.lo-=Math.max(0,v);const x=m.slice(f.hi).findIndex(E=>!ke(E[p.axis]));f.hi+=Math.max(0,x)}return f}}return{lo:0,hi:s.length-1}}function ry(n,t,e,r,i){const s=n.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,l=s.length;o<l;++o){const{index:h,data:f}=s[o],{lo:p,hi:m}=jj(s[o],t,a,i);for(let v=p;v<=m;++v){const x=f[v];x.skip||r(x,h,v)}}}function Hj(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function lw(n,t,e,r,i){const s=[];return!i&&!n.isPointInArea(t)||ry(n,e,t,function(o,l,h){!i&&!pg(o,n.chartArea,0)||o.inRange(t.x,t.y,r)&&s.push({element:o,datasetIndex:l,index:h})},!0),s}function zj(n,t,e,r){let i=[];function s(a,o,l){const{startAngle:h,endAngle:f}=a.getProps(["startAngle","endAngle"],r),{angle:p}=HP(a,{x:t.x,y:t.y});dg(p,h,f)&&i.push({element:a,datasetIndex:o,index:l})}return ry(n,e,t,s),i}function Gj(n,t,e,r,i,s){let a=[];const o=Hj(e);let l=Number.POSITIVE_INFINITY;function h(f,p,m){const v=f.inRange(t.x,t.y,i);if(r&&!v)return;const x=f.getCenterPoint(i);if(!(!!s||n.isPointInArea(x))&&!v)return;const b=o(t,x);b<l?(a=[{element:f,datasetIndex:p,index:m}],l=b):b===l&&a.push({element:f,datasetIndex:p,index:m})}return ry(n,e,t,h),a}function uw(n,t,e,r,i,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!r?zj(n,t,e,i):Gj(n,t,e,r,i,s)}function M3(n,t,e,r,i){const s=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return ry(n,e,t,(l,h,f)=>{l[a]&&l[a](t[e],i)&&(s.push({element:l,datasetIndex:h,index:f}),o=o||l.inRange(t.x,t.y,i))}),r&&!o?[]:s}var Wj={modes:{index(n,t,e,r){const i=wl(t,n),s=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?lw(n,i,s,r,a):uw(n,i,s,!1,r,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const f=o[0].index,p=h.data[f];p&&!p.skip&&l.push({element:p,datasetIndex:h.index,index:f})}),l):[]},dataset(n,t,e,r){const i=wl(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?lw(n,i,s,r,a):uw(n,i,s,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,h=n.getDatasetMeta(l).data;o=[];for(let f=0;f<h.length;++f)o.push({element:h[f],datasetIndex:l,index:f})}return o},point(n,t,e,r){const i=wl(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return lw(n,i,s,r,a)},nearest(n,t,e,r){const i=wl(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return uw(n,i,s,e.intersect,r,a)},x(n,t,e,r){const i=wl(t,n);return M3(n,i,"x",e.intersect,r)},y(n,t,e,r){const i=wl(t,n);return M3(n,i,"y",e.intersect,r)}}};const l6=["left","top","right","bottom"];function np(n,t){return n.filter(e=>e.pos===t)}function P3(n,t){return n.filter(e=>l6.indexOf(e.pos)===-1&&e.box.axis===t)}function rp(n,t){return n.sort((e,r)=>{const i=t?r:e,s=t?e:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function $j(n){const t=[];let e,r,i,s,a,o;for(e=0,r=(n||[]).length;e<r;++e)i=n[e],{position:s,options:{stack:a,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}function qj(n){const t={};for(const e of n){const{stack:r,pos:i,stackWeight:s}=e;if(!r||!l6.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function Yj(n,t){const e=qj(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,h=e[o.stack],f=h&&o.stackWeight/h.weight;o.horizontal?(o.width=f?f*r:l&&t.availableWidth,o.height=i):(o.width=r,o.height=f?f*i:l&&t.availableHeight)}return e}function Kj(n){const t=$j(n),e=rp(t.filter(h=>h.box.fullSize),!0),r=rp(np(t,"left"),!0),i=rp(np(t,"right")),s=rp(np(t,"top"),!0),a=rp(np(t,"bottom")),o=P3(t,"x"),l=P3(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:np(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function k3(n,t,e,r){return Math.max(n[e],t[e])+Math.max(n[r],t[r])}function u6(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Xj(n,t,e,r){const{pos:i,box:s}=e,a=n.maxPadding;if(!Ee(i)){e.size&&(n[i]-=e.size);const p=r[e.stack]||{size:0,count:1};p.size=Math.max(p.size,e.horizontal?s.height:s.width),e.size=p.size/p.count,n[i]+=e.size}s.getPadding&&u6(a,s.getPadding());const o=Math.max(0,t.outerWidth-k3(a,n,"left","right")),l=Math.max(0,t.outerHeight-k3(a,n,"top","bottom")),h=o!==n.w,f=l!==n.h;return n.w=o,n.h=l,e.horizontal?{same:h,other:f}:{same:f,other:h}}function Qj(n){const t=n.maxPadding;function e(r){const i=Math.max(t[r]-n[r],0);return n[r]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Zj(n,t){const e=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return r(n?["left","right"]:["top","bottom"])}function bp(n,t,e,r){const i=[];let s,a,o,l,h,f;for(s=0,a=n.length,h=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||t.w,o.height||t.h,Zj(o.horizontal,t));const{same:p,other:m}=Xj(t,e,o,r);h|=p&&i.length,f=f||m,l.fullSize||i.push(o)}return h&&bp(i,t,e,r)||f}function Wm(n,t,e,r,i){n.top=e,n.left=t,n.right=t+r,n.bottom=e+i,n.width=r,n.height=i}function L3(n,t,e,r){const i=e.padding;let{x:s,y:a}=t;for(const o of n){const l=o.box,h=r[o.stack]||{placed:0,weight:1},f=o.stackWeight/h.weight||1;if(o.horizontal){const p=t.w*f,m=h.size||l.height;hg(h.start)&&(a=h.start),l.fullSize?Wm(l,i.left,a,e.outerWidth-i.right-i.left,m):Wm(l,t.left+h.placed,a,p,m),h.start=a,h.placed+=p,a=l.bottom}else{const p=t.h*f,m=h.size||l.width;hg(h.start)&&(s=h.start),l.fullSize?Wm(l,s,i.top,m,e.outerHeight-i.bottom-i.top):Wm(l,s,t.top+h.placed,m,p),h.start=s,h.placed+=p,s=l.right}}t.x=s,t.y=a}var ac={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,r){if(!n)return;const i=ws(n.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(e-i.height,0),o=Kj(n.boxes),l=o.vertical,h=o.horizontal;je(n.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const f=l.reduce((E,b)=>b.box.options&&b.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/f,hBoxMaxHeight:a/2}),m=Object.assign({},i);u6(m,ws(r));const v=Object.assign({maxPadding:m,w:s,h:a,x:i.left,y:i.top},i),x=Yj(l.concat(h),p);bp(o.fullSize,v,p,x),bp(l,v,p,x),bp(h,v,p,x)&&bp(l,v,p,x),Qj(v),L3(o.leftAndTop,v,p,x),v.x+=v.w,v.y+=v.h,L3(o.rightAndBottom,v,p,x),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},je(o.chartArea,E=>{const b=E.box;Object.assign(b,n.chartArea),b.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class h6{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}}class Jj extends h6{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const C1="$chartjs",tH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},V3=n=>n===null||n==="";function eH(n,t){const e=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[C1]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",V3(i)){const s=x3(n,"width");s!==void 0&&(n.width=s)}if(V3(r))if(n.style.height==="")n.height=n.width/(t||2);else{const s=x3(n,"height");s!==void 0&&(n.height=s)}return n}const f6=ej?{passive:!0}:!1;function nH(n,t,e){n&&n.addEventListener(t,e,f6)}function rH(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,f6)}function iH(n,t){const e=tH[n.type]||n.type,{x:r,y:i}=wl(n,t);return{type:e,chart:t,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function lv(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function sH(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||lv(o.addedNodes,r),a=a&&!lv(o.removedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function aH(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||lv(o.removedNodes,r),a=a&&!lv(o.addedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const gg=new Map;let B3=0;function d6(){const n=window.devicePixelRatio;n!==B3&&(B3=n,gg.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function oH(n,t){gg.size||window.addEventListener("resize",d6),gg.set(n,t)}function cH(n){gg.delete(n),gg.size||window.removeEventListener("resize",d6)}function lH(n,t,e){const r=n.canvas,i=r&&X2(r);if(!i)return;const s=$P((o,l)=>{const h=i.clientWidth;e(o,l),h<i.clientWidth&&e()},window),a=new ResizeObserver(o=>{const l=o[0],h=l.contentRect.width,f=l.contentRect.height;h===0&&f===0||s(h,f)});return a.observe(i),oH(n,s),a}function hw(n,t,e){e&&e.disconnect(),t==="resize"&&cH(n)}function uH(n,t,e){const r=n.canvas,i=$P(s=>{n.ctx!==null&&e(iH(s,n))},n);return nH(r,t,i),i}class hH extends h6{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(eH(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[C1])return!1;const r=e[C1].initial;["height","width"].forEach(s=>{const a=r[s];ke(a)?e.removeAttribute(s):e.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[C1],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),a={attach:sH,detach:aH,resize:lH}[e]||uH;i[e]=a(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:hw,detach:hw,resize:hw}[e]||rH)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return tj(t,e,r,i)}isAttached(t){const e=t&&X2(t);return!!(e&&e.isConnected)}}function fH(n){return!K2()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Jj:hH}var A1;let Dc=(A1=class{constructor(){lt(this,"x");lt(this,"y");lt(this,"active",!1);lt(this,"options");lt(this,"$animations")}tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return fg(this.x)&&fg(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},lt(A1,"defaults",{}),lt(A1,"defaultRoutes"),A1);function dH(n,t){const e=n.options.ticks,r=pH(n),i=Math.min(e.maxTicksLimit||r,r),s=e.major.enabled?mH(t):[],a=s.length,o=s[0],l=s[a-1],h=[];if(a>i)return vH(t,h,s,a/i),h;const f=gH(s,t,i);if(a>0){let p,m;const v=a>1?Math.round((l-o)/(a-1)):null;for($m(t,h,f,ke(v)?0:o-v,o),p=0,m=a-1;p<m;p++)$m(t,h,f,s[p],s[p+1]);return $m(t,h,f,l,ke(v)?t.length:l+v),h}return $m(t,h,f),h}function pH(n){const t=n.options.offset,e=n._tickSize(),r=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(r,i))}function gH(n,t,e){const r=yH(n),i=t.length/e;if(!r)return Math.max(i,1);const s=JF(r);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>i)return l}return Math.max(i,1)}function mH(n){const t=[];let e,r;for(e=0,r=n.length;e<r;e++)n[e].major&&t.push(e);return t}function vH(n,t,e,r){let i=0,s=e[0],a;for(r=Math.ceil(r),a=0;a<n.length;a++)a===s&&(t.push(n[a]),i++,s=e[i*r])}function $m(n,t,e,r,i){const s=ie(r,0),a=Math.min(ie(i,n.length),n.length);let o=0,l,h,f;for(e=Math.ceil(e),i&&(l=i-r,e=l/Math.floor(l/e)),f=s;f<0;)o++,f=Math.round(s+o*e);for(h=Math.max(s,0);h<a;h++)h===f&&(t.push(n[h]),o++,f=Math.round(s+o*e))}function yH(n){const t=n.length;let e,r;if(t<2)return!1;for(r=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==r)return!1;return r}const _H=n=>n==="left"?"right":n==="right"?"left":n,F3=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,U3=(n,t)=>Math.min(t||n,n);function j3(n,t){const e=[],r=n.length/t,i=n.length;let s=0;for(;s<i;s+=r)e.push(n[Math.floor(s)]);return e}function xH(n,t,e){const r=n.ticks.length,i=Math.min(t,r-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(i),h;if(!(e&&(r===1?h=Math.max(l-s,a-l):t===0?h=(n.getPixelForTick(1)-l)/2:h=(l-n.getPixelForTick(i-1))/2,l+=i<t?h:-h,l<s-o||l>a+o)))return l}function wH(n,t){je(n,e=>{const r=e.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[r[s]];r.splice(0,i)}})}function ip(n){return n.drawTicks?n.tickLength:0}function H3(n,t){if(!n.display)return 0;const e=ui(n.font,t),r=ws(n.padding);return(dr(n.text)?n.text.length:1)*e.lineHeight+r.height}function EH(n,t){return pu(n,{scale:t,type:"scale"})}function bH(n,t,e){return pu(n,{tick:e,index:t,type:"tick"})}function AH(n,t,e){let r=qP(n);return(e&&t!=="right"||!e&&t==="right")&&(r=_H(r)),r}function TH(n,t,e,r){const{top:i,left:s,bottom:a,right:o,chart:l}=n,{chartArea:h,scales:f}=l;let p=0,m,v,x;const E=a-i,b=o-s;if(n.isHorizontal()){if(v=Ai(r,s,o),Ee(e)){const T=Object.keys(e)[0],S=e[T];x=f[T].getPixelForValue(S)+E-t}else e==="center"?x=(h.bottom+h.top)/2+E-t:x=F3(n,e,t);m=o-s}else{if(Ee(e)){const T=Object.keys(e)[0],S=e[T];v=f[T].getPixelForValue(S)-b+t}else e==="center"?v=(h.left+h.right)/2-b+t:v=F3(n,e,t);x=Ai(r,a,i),p=e==="left"?-Jn:Jn}return{titleX:v,titleY:x,maxWidth:m,rotation:p}}class Rf extends Dc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=Gs(t,Number.POSITIVE_INFINITY),e=Gs(e,Number.NEGATIVE_INFINITY),r=Gs(r,Number.POSITIVE_INFINITY),i=Gs(i,Number.NEGATIVE_INFINITY),{min:Gs(t,r),max:Gs(e,i),minDefined:is(t),maxDefined:is(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:e,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,h=o.length;l<h;++l)a=o[l].controller.getMinMax(this,t),i||(e=Math.min(e,a.min)),s||(r=Math.max(r,a.max));return e=s&&e>r?r:e,r=i&&e>r?e:r,{min:Gs(e,Gs(r,e)),max:Gs(r,Gs(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){sn(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=NU(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?j3(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=dH(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){sn(this.options.afterUpdate,[this])}beforeSetDimensions(){sn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){sn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),sn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){sn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=sn(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){sn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){sn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=U3(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let a=i,o,l,h;if(!this._isVisible()||!e.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,m=f.highest.height,v=Lr(this.chart.width-p,0,this.maxWidth);o=t.offset?this.maxWidth/r:v/(r-1),p+6>o&&(o=v/(r-(t.offset?.5:1)),l=this.maxHeight-ip(t.grid)-e.padding-H3(t.title,this.chart.options.font),h=Math.sqrt(p*p+m*m),a=rU(Math.min(Math.asin(Lr((f.highest.height+6)/o,-1,1)),Math.asin(Lr(l/h,-1,1))-Math.asin(Lr(m/h,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){sn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){sn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=H3(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=ip(s)+l):(t.height=this.maxHeight,t.width=ip(s)+l),r.display&&this.ticks.length){const{first:h,last:f,widest:p,highest:m}=this._getLabelSizes(),v=r.padding*2,x=Ya(this.labelRotation),E=Math.cos(x),b=Math.sin(x);if(o){const T=r.mirror?0:b*p.width+E*m.height;t.height=Math.min(this.maxHeight,t.height+T+v)}else{const T=r.mirror?0:E*p.width+b*m.height;t.width=Math.min(this.maxWidth,t.width+T+v)}this._calculatePadding(h,f,b,E)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,h=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;l?h?(m=i*t.width,v=r*e.height):(m=r*t.height,v=i*e.width):s==="start"?v=e.width:s==="end"?m=t.width:s!=="inner"&&(m=t.width/2,v=e.width/2),this.paddingLeft=Math.max((m-f+a)*this.width/(this.width-f),0),this.paddingRight=Math.max((v-p+a)*this.width/(this.width-p),0)}else{let f=e.height/2,p=t.height/2;s==="start"?(f=0,p=t.height):s==="end"&&(f=e.height,p=0),this.paddingTop=f+a,this.paddingBottom=p+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){sn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)ke(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=j3(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(e/U3(e,r));let h=0,f=0,p,m,v,x,E,b,T,S,D,P,k;for(p=0;p<e;p+=l){if(x=t[p].label,E=this._resolveTickFontOptions(p),i.font=b=E.string,T=s[b]=s[b]||{data:{},gc:[]},S=E.lineHeight,D=P=0,!ke(x)&&!dr(x))D=g3(i,T.data,T.gc,D,x),P=S;else if(dr(x))for(m=0,v=x.length;m<v;++m)k=x[m],!ke(k)&&!dr(k)&&(D=g3(i,T.data,T.gc,D,k),P+=S);a.push(D),o.push(P),h=Math.max(D,h),f=Math.max(P,f)}wH(s,e);const U=a.indexOf(h),M=o.indexOf(f),I=N=>({width:a[N]||0,height:o[N]||0});return{first:I(0),last:I(e-1),widest:I(U),highest:I(M),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return sU(this._alignToPixels?gl(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=bH(this.getContext(),t,r))}return this.$context||(this.$context=EH(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ya(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,h=this.isHorizontal(),p=this.ticks.length+(l?1:0),m=ip(s),v=[],x=o.setContext(this.getContext()),E=x.display?x.width:0,b=E/2,T=function(Y){return gl(r,Y,E)};let S,D,P,k,U,M,I,N,L,j,z,B;if(a==="top")S=T(this.bottom),M=this.bottom-m,N=S-b,j=T(t.top)+b,B=t.bottom;else if(a==="bottom")S=T(this.top),j=t.top,B=T(t.bottom)-b,M=S+b,N=this.top+m;else if(a==="left")S=T(this.right),U=this.right-m,I=S-b,L=T(t.left)+b,z=t.right;else if(a==="right")S=T(this.left),L=t.left,z=T(t.right)-b,U=S+b,I=this.left+m;else if(e==="x"){if(a==="center")S=T((t.top+t.bottom)/2+.5);else if(Ee(a)){const Y=Object.keys(a)[0],at=a[Y];S=T(this.chart.scales[Y].getPixelForValue(at))}j=t.top,B=t.bottom,M=S+b,N=M+m}else if(e==="y"){if(a==="center")S=T((t.left+t.right)/2);else if(Ee(a)){const Y=Object.keys(a)[0],at=a[Y];S=T(this.chart.scales[Y].getPixelForValue(at))}U=S-b,I=U-m,L=t.left,z=t.right}const yt=ie(i.ticks.maxTicksLimit,p),wt=Math.max(1,Math.ceil(p/yt));for(D=0;D<p;D+=wt){const Y=this.getContext(D),at=s.setContext(Y),vt=o.setContext(Y),Z=at.lineWidth,F=at.color,$=vt.dash||[],ot=vt.dashOffset,tt=at.tickWidth,gt=at.tickColor,mt=at.tickBorderDash||[],Et=at.tickBorderDashOffset;P=xH(this,D,l),P!==void 0&&(k=gl(r,P,Z),h?U=I=L=z=k:M=N=j=B=k,v.push({tx1:U,ty1:M,tx2:I,ty2:N,x1:L,y1:j,x2:z,y2:B,width:Z,color:F,borderDash:$,borderDashOffset:ot,tickWidth:tt,tickColor:gt,tickBorderDash:mt,tickBorderDashOffset:Et}))}return this._ticksLength=p,this._borderValue=S,v}_computeLabelItems(t){const e=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:h,padding:f,mirror:p}=s,m=ip(r.grid),v=m+f,x=p?-f:v,E=-Ya(this.labelRotation),b=[];let T,S,D,P,k,U,M,I,N,L,j,z,B="middle";if(i==="top")U=this.bottom-x,M=this._getXAxisLabelAlignment();else if(i==="bottom")U=this.top+x,M=this._getXAxisLabelAlignment();else if(i==="left"){const wt=this._getYAxisLabelAlignment(m);M=wt.textAlign,k=wt.x}else if(i==="right"){const wt=this._getYAxisLabelAlignment(m);M=wt.textAlign,k=wt.x}else if(e==="x"){if(i==="center")U=(t.top+t.bottom)/2+v;else if(Ee(i)){const wt=Object.keys(i)[0],Y=i[wt];U=this.chart.scales[wt].getPixelForValue(Y)+v}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")k=(t.left+t.right)/2-v;else if(Ee(i)){const wt=Object.keys(i)[0],Y=i[wt];k=this.chart.scales[wt].getPixelForValue(Y)}M=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(l==="start"?B="top":l==="end"&&(B="bottom"));const yt=this._getLabelSizes();for(T=0,S=o.length;T<S;++T){D=o[T],P=D.label;const wt=s.setContext(this.getContext(T));I=this.getPixelForTick(T)+s.labelOffset,N=this._resolveTickFontOptions(T),L=N.lineHeight,j=dr(P)?P.length:1;const Y=j/2,at=wt.color,vt=wt.textStrokeColor,Z=wt.textStrokeWidth;let F=M;a?(k=I,M==="inner"&&(T===S-1?F=this.options.reverse?"left":"right":T===0?F=this.options.reverse?"right":"left":F="center"),i==="top"?h==="near"||E!==0?z=-j*L+L/2:h==="center"?z=-yt.highest.height/2-Y*L+L:z=-yt.highest.height+L/2:h==="near"||E!==0?z=L/2:h==="center"?z=yt.highest.height/2-Y*L:z=yt.highest.height-j*L,p&&(z*=-1),E!==0&&!wt.showLabelBackdrop&&(k+=L/2*Math.sin(E))):(U=I,z=(1-j)*L/2);let $;if(wt.showLabelBackdrop){const ot=ws(wt.backdropPadding),tt=yt.heights[T],gt=yt.widths[T];let mt=z-ot.top,Et=0-ot.left;switch(B){case"middle":mt-=tt/2;break;case"bottom":mt-=tt;break}switch(M){case"center":Et-=gt/2;break;case"right":Et-=gt;break;case"inner":T===S-1?Et-=gt:T>0&&(Et-=gt/2);break}$={left:Et,top:mt,width:gt+ot.width,height:tt+ot.height,color:wt.backdropColor}}b.push({label:P,font:N,textOffset:z,options:{rotation:E,color:at,strokeColor:vt,strokeWidth:Z,textAlign:F,textBaseline:B,translation:[k,U],backdrop:$}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ya(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,l=a.widest.width;let h,f;return e==="left"?i?(f=this.right+s,r==="near"?h="left":r==="center"?(h="center",f+=l/2):(h="right",f+=l)):(f=this.right-o,r==="near"?h="right":r==="center"?(h="center",f-=l/2):(h="left",f=this.left)):e==="right"?i?(f=this.left+s,r==="near"?h="right":r==="center"?(h="center",f-=l/2):(h="left",f-=l)):(f=this.left+o,r==="near"?h="left":r==="center"?(h="center",f+=l/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:i,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(l,h,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(e.display)for(s=0,a=i.length;s<a;++s){const l=i[s];e.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,f,p,m;this.isHorizontal()?(h=gl(t,this.left,a)-a/2,f=gl(t,this.right,o)+o/2,p=m=l):(p=gl(t,this.top,a)-a/2,m=gl(t,this.bottom,o)+o/2,h=f=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(h,p),e.lineTo(f,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&z2(r,i);const s=this.getLabelItems(t);for(const a of s){const o=a.options,l=a.font,h=a.label,f=a.textOffset;av(r,h,0,f,l,o)}i&&G2(r)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;const s=ui(r.font),a=ws(r.padding),o=r.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||Ee(e)?(l+=a.bottom,dr(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:h,titleY:f,maxWidth:p,rotation:m}=TH(this,l,e,o);av(t,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:m,textAlign:AH(o,e,i),textBaseline:"middle",translation:[h,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=ie(t.grid&&t.grid.z,-1),i=ie(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Rf.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];o[r]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return ui(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class qm{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;IH(e)&&(r=this.register(e));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,SH(t,a,r),this.override&&On.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in On[i]&&(delete On[i][r],this.override&&delete tu[r])}}function SH(n,t,e){const r=ug(Object.create(null),[e?On.get(e):{},On.get(t),n.defaults]);On.set(t,r),n.defaultRoutes&&CH(t,n.defaultRoutes),n.descriptors&&On.describe(t,n.descriptors)}function CH(n,t){Object.keys(t).forEach(e=>{const r=e.split("."),i=r.pop(),s=[n].concat(r).join("."),a=t[e].split("."),o=a.pop(),l=a.join(".");On.route(s,i,l,o)})}function IH(n){return"id"in n&&"defaults"in n}class DH{constructor(){this.controllers=new qm(zl,"datasets",!0),this.elements=new qm(Dc,"elements"),this.plugins=new qm(Object,"plugins"),this.scales=new qm(Rf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):je(i,a=>{const o=r||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,r){const i=F2(t);sn(r["before"+i],[],r),e[t](r),sn(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var $s=new DH;class OH{constructor(){this._init=[]}notify(t,e,r,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,r,i){i=i||{};for(const s of t){const a=s.plugin,o=a[r],l=[e,i,s.options];if(sn(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){ke(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,i=ie(r.options&&r.options.plugins,{}),s=RH(r);return i===!1&&!e?[]:MH(t,s,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}}function RH(n){const t={},e=[],r=Object.keys($s.plugins.items);for(let s=0;s<r.length;s++)e.push($s.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function NH(n,t){return!t&&n===!1?null:n===!0?{}:n}function MH(n,{plugins:t,localIds:e},r,i){const s=[],a=n.getContext();for(const o of t){const l=o.id,h=NH(r[l],i);h!==null&&s.push({plugin:o,options:PH(n.config,{plugin:o,local:e[l]},h,a)})}return s}function PH(n,{plugin:t,local:e},r,i){const s=n.pluginScopeKeys(t),a=n.getOptionScopes(r,s);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function XE(n,t){const e=On.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function kH(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function LH(n,t){return n===t?"_index_":"_value_"}function z3(n){if(n==="x"||n==="y"||n==="r")return n}function VH(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function QE(n,...t){if(z3(n))return n;for(const e of t){const r=e.axis||VH(e.position)||n.length>1&&z3(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function G3(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function BH(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(e.length)return G3(n,"x",e[0])||G3(n,"y",e[0])}return{}}function FH(n,t){const e=tu[n.type]||{scales:{}},r=t.scales||{},i=XE(n.type,t),s=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!Ee(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=QE(a,o,BH(a,n),On.scales[o.type]),h=LH(l,i),f=e.scales||{};s[a]=Fp(Object.create(null),[{axis:l},o,f[l],f[h]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||XE(o,t),f=(tu[o]||{}).scales||{};Object.keys(f).forEach(p=>{const m=kH(p,l),v=a[m+"AxisID"]||m;s[v]=s[v]||Object.create(null),Fp(s[v],[{axis:m},r[v],f[p]])})}),Object.keys(s).forEach(a=>{const o=s[a];Fp(o,[On.scales[o.type],On.scale])}),s}function p6(n){const t=n.options||(n.options={});t.plugins=ie(t.plugins,{}),t.scales=FH(n,t)}function g6(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function UH(n){return n=n||{},n.data=g6(n.data),p6(n),n}const W3=new Map,m6=new Set;function Ym(n,t){let e=W3.get(n);return e||(e=t(),W3.set(n,e),m6.add(e)),e}const sp=(n,t,e)=>{const r=Jl(t,e);r!==void 0&&n.add(r)};let jH=class{constructor(t){this._config=UH(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=g6(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),p6(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ym(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ym(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ym(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,r=this.type;return Ym(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),o=a.get(e);if(o)return o;const l=new Set;e.forEach(f=>{t&&(l.add(t),f.forEach(p=>sp(l,t,p))),f.forEach(p=>sp(l,i,p)),f.forEach(p=>sp(l,tu[s]||{},p)),f.forEach(p=>sp(l,On,p)),f.forEach(p=>sp(l,YE,p))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),m6.has(e)&&a.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,tu[e]||{},On.datasets[e]||{},{type:e},On,YE]}resolveNamedOptions(t,e,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=$3(this._resolverCache,t,i);let l=a;if(zH(a,e)){s.$shared=!1,r=yc(r)?r():r;const h=this.createResolver(t,r,o);l=Zh(a,r,h)}for(const h of e)s[h]=l[h];return s}createResolver(t,e,r=[""],i){const{resolver:s}=$3(this._resolverCache,t,r);return Ee(e)?Zh(s,e,void 0,i):s}};function $3(n,t,e){let r=n.get(t);r||(r=new Map,n.set(t,r));const i=e.join();let s=r.get(i);return s||(s={resolver:$2(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,s)),s}const HH=n=>Ee(n)&&Object.getOwnPropertyNames(n).some(t=>yc(n[t]));function zH(n,t){const{isScriptable:e,isIndexable:r}=QP(n);for(const i of t){const s=e(i),a=r(i),o=(a||s)&&n[i];if(s&&(yc(o)||HH(o))||a&&dr(o))return!0}return!1}var GH="4.5.0";const WH=["top","bottom","left","right","chartArea"];function q3(n,t){return n==="top"||n==="bottom"||WH.indexOf(n)===-1&&t==="x"}function Y3(n,t){return function(e,r){return e[n]===r[n]?e[t]-r[t]:e[n]-r[n]}}function K3(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),sn(e&&e.onComplete,[n],t)}function $H(n){const t=n.chart,e=t.options.animation;sn(e&&e.onProgress,[n],t)}function v6(n){return K2()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const I1={},X3=n=>{const t=v6(n);return Object.values(I1).filter(e=>e.canvas===t).pop()};function qH(n,t,e){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=t){const a=n[i];delete n[i],(e>0||s>t)&&(n[s+e]=a)}}}function YH(n,t,e,r){return!e||n.type==="mouseout"?null:r?t:n}var Xo;let gu=(Xo=class{static register(...t){$s.add(...t),Q3()}static unregister(...t){$s.remove(...t),Q3()}constructor(t,e){const r=this.config=new jH(e),i=v6(t),s=X3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||fH(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,h=l&&l.height,f=l&&l.width;if(this.id=GF(),this.ctx=o,this.canvas=l,this.width=f,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new OH,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lU(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],I1[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Wa.listen(this,"complete",K3),Wa.listen(this,"progress",$H),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:i,_aspectRatio:s}=this;return ke(t)?e&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return $s}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return m3(this.canvas,this.ctx),this}stop(){return Wa.stop(this),this}resize(t,e){Wa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,e,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,_3(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),sn(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};je(e,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,i=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const o=e[a],l=QE(a,o),h=l==="r",f=l==="x";return{options:o,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),je(s,a=>{const o=a.options,l=o.id,h=QE(l,o),f=ie(o.type,a.dtype);(o.position===void 0||q3(o.position,h)!==q3(a.dposition))&&(o.position=a.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===f)p=r[l];else{const m=$s.getScale(f);p=new m({id:l,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(o,t)}),je(i,(a,o)=>{a||delete r[o]}),je(r,a=>{ac.configure(this,a,a.options),ac.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>e){for(let i=e;i<r;++i)this._destroyDatasetMeta(i);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(Y3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,i)=>{e.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=e.length;r<i;r++){const s=e[r];let a=this.getDatasetMeta(r);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=s.indexAxis||XE(o,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=$s.getController(o),{datasetElementType:h,dataElementType:f}=On.datasets[o];Object.assign(l,{dataElementType:$s.getElement(f),datasetElementType:h&&$s.getElement(h)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){je(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:p}=this.getDatasetMeta(h),m=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(m),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||je(s,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Y3("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){je(this.scales,t=>{ac.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!a3(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of e){const a=r==="_removeElements"?-s:s;qH(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<e;s++)if(!a3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ac.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],je(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,yc(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Wa.has(this)?this.attached&&!Wa.running(this)&&Wa.start(this):(this.draw(),K3({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let i,s;for(i=0,s=e.length;i<s;++i){const a=e[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=gj(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&z2(e,i),t.controller.draw(),i&&G2(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return pg(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,i){const s=Wj.modes[e];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=pu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);hg(e)?(s.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Wa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),m3(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete I1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};je(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(l,h)=>{e.addEventListener(this,l,h),t[l]=h},i=(l,h)=>{t[l]&&(e.removeEventListener(this,l,h),delete t[l])},s=(l,h)=>{this.canvas&&this.resize(l,h)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){je(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},je(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const i=r?"set":"remove";let s,a,o,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){a=t[o];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!rv(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,r){const i=this.options.hover,s=(l,h)=>l.filter(f=>!h.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),a=s(e,t),o=r?t:s(t,e);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:i=[],options:s}=this,a=e,o=this._getActiveElements(t,i,r,a),l=XF(t),h=YH(t,this._lastEvent,r,l);r&&(this._lastEvent=null,sn(s.onHover,[t,o,this],this),l&&sn(s.onClick,[t,o,this],this));const f=!rv(o,i);return(f||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=h,f}_getActiveElements(t,e,r,i){if(t.type==="mouseout")return[];if(!r)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},lt(Xo,"defaults",On),lt(Xo,"instances",I1),lt(Xo,"overrides",tu),lt(Xo,"registry",$s),lt(Xo,"version",GH),lt(Xo,"getChart",X3),Xo);function Q3(){return je(gu.instances,n=>n._plugins.invalidate())}function KH(n,t,e){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:h,borderJoinStyle:f}=l,p=Math.min(h/a,ms(r-e));if(n.beginPath(),n.arc(i,s,a-h/2,r+p/2,e-p/2),o>0){const m=Math.min(h/o,ms(r-e));n.arc(i,s,o+h/2,e-m/2,r+m/2,!0)}else{const m=Math.min(h/2,a*ms(r-e));if(f==="round")n.arc(i,s,m,e-Qe/2,r+Qe/2,!0);else if(f==="bevel"){const v=2*m*m,x=-v*Math.cos(e+Qe/2)+i,E=-v*Math.sin(e+Qe/2)+s,b=v*Math.cos(r+Qe/2)+i,T=v*Math.sin(r+Qe/2)+s;n.lineTo(x,E),n.lineTo(b,T)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function XH(n,t,e){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let h=i/o;n.beginPath(),n.arc(s,a,o,r-h,e+h),l>i?(h=i/l,n.arc(s,a,l,e+h,r-h,!0)):n.arc(s,a,i,e+Jn,r-Jn),n.closePath(),n.clip()}function QH(n){return W2(n,["outerStart","outerEnd","innerStart","innerEnd"])}function ZH(n,t,e,r){const i=QH(n.options.borderRadius),s=(e-t)/2,a=Math.min(s,r*t/2),o=l=>{const h=(e-Math.min(s,l))*r/2;return Lr(l,0,Math.min(s,h))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Lr(i.innerStart,0,a),innerEnd:Lr(i.innerEnd,0,a)}}function gh(n,t,e,r){return{x:e+n*Math.cos(t),y:r+n*Math.sin(t)}}function uv(n,t,e,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:h,innerRadius:f}=t,p=Math.max(t.outerRadius+r+e-h,0),m=f>0?f+r+e+h:0;let v=0;const x=i-l;if(r){const wt=f>0?f-r:0,Y=p>0?p-r:0,at=(wt+Y)/2,vt=at!==0?x*at/(at+r):x;v=(x-vt)/2}const E=Math.max(.001,x*p-e/Qe)/p,b=(x-E)/2,T=l+b+v,S=i-b-v,{outerStart:D,outerEnd:P,innerStart:k,innerEnd:U}=ZH(t,m,p,S-T),M=p-D,I=p-P,N=T+D/M,L=S-P/I,j=m+k,z=m+U,B=T+k/j,yt=S-U/z;if(n.beginPath(),s){const wt=(N+L)/2;if(n.arc(a,o,p,N,wt),n.arc(a,o,p,wt,L),P>0){const Z=gh(I,L,a,o);n.arc(Z.x,Z.y,P,L,S+Jn)}const Y=gh(z,S,a,o);if(n.lineTo(Y.x,Y.y),U>0){const Z=gh(z,yt,a,o);n.arc(Z.x,Z.y,U,S+Jn,yt+Math.PI)}const at=(S-U/m+(T+k/m))/2;if(n.arc(a,o,m,S-U/m,at,!0),n.arc(a,o,m,at,T+k/m,!0),k>0){const Z=gh(j,B,a,o);n.arc(Z.x,Z.y,k,B+Math.PI,T-Jn)}const vt=gh(M,T,a,o);if(n.lineTo(vt.x,vt.y),D>0){const Z=gh(M,N,a,o);n.arc(Z.x,Z.y,D,T-Jn,N)}}else{n.moveTo(a,o);const wt=Math.cos(N)*p+a,Y=Math.sin(N)*p+o;n.lineTo(wt,Y);const at=Math.cos(L)*p+a,vt=Math.sin(L)*p+o;n.lineTo(at,vt)}n.closePath()}function JH(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){uv(n,t,e,r,l,i);for(let h=0;h<s;++h)n.fill();isNaN(o)||(l=a+(o%En||En))}return uv(n,t,e,r,l,i),n.fill(),l}function tz(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:h,borderJoinStyle:f,borderDash:p,borderDashOffset:m,borderRadius:v}=l,x=l.borderAlign==="inner";if(!h)return;n.setLineDash(p||[]),n.lineDashOffset=m,x?(n.lineWidth=h*2,n.lineJoin=f||"round"):(n.lineWidth=h,n.lineJoin=f||"bevel");let E=t.endAngle;if(s){uv(n,t,e,r,E,i);for(let b=0;b<s;++b)n.stroke();isNaN(o)||(E=a+(o%En||En))}x&&XH(n,t,E),l.selfJoin&&E-a>=Qe&&v===0&&f!=="miter"&&KH(n,t,E),s||(uv(n,t,e,r,E,i),n.stroke())}class kh extends Dc{constructor(e){super();lt(this,"circumference");lt(this,"endAngle");lt(this,"fullCircles");lt(this,"innerRadius");lt(this,"outerRadius");lt(this,"pixelMargin");lt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=HP(s,{x:e,y:r}),{startAngle:l,endAngle:h,innerRadius:f,outerRadius:p,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,x=ie(m,h-l),E=dg(a,l,h)&&l!==h,b=x>=En||E,T=sc(o,f+v,p+v);return b&&T}getCenterPoint(e){const{x:r,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,p=(s+a)/2,m=(o+l+f+h)/2;return{x:r+Math.cos(p)*m,y:i+Math.sin(p)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:i}=this,s=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>En?Math.floor(i/En):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const h=1-Math.sin(Math.min(Qe,i||0)),f=s*h;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,JH(e,this,f,a,o),tz(e,this,f,a,o),e.restore()}}lt(kh,"id","arc"),lt(kh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),lt(kh,"defaultRoutes",{backgroundColor:"backgroundColor"}),lt(kh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function y6(n,t,e=t){n.lineCap=ie(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ie(e.borderDash,t.borderDash)),n.lineDashOffset=ie(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ie(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ie(e.borderWidth,t.borderWidth),n.strokeStyle=ie(e.borderColor,t.borderColor)}function ez(n,t,e){n.lineTo(e.x,e.y)}function nz(n){return n.stepped?bU:n.tension||n.cubicInterpolationMode==="monotone"?AU:ez}function _6(n,t,e={}){const r=n.length,{start:i=0,end:s=r-1}=e,{start:a,end:o}=t,l=Math.max(i,a),h=Math.min(s,o),f=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:h<l&&!f?r+h-l:h-l}}function rz(n,t,e,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:h}=_6(i,e,r),f=nz(s);let{move:p=!0,reverse:m}=r||{},v,x,E;for(v=0;v<=h;++v)x=i[(o+(m?h-v:v))%a],!x.skip&&(p?(n.moveTo(x.x,x.y),p=!1):f(n,E,x,m,s.stepped),E=x);return l&&(x=i[(o+(m?h:0))%a],f(n,E,x,m,s.stepped)),!!l}function iz(n,t,e,r){const i=t.points,{count:s,start:a,ilen:o}=_6(i,e,r),{move:l=!0,reverse:h}=r||{};let f=0,p=0,m,v,x,E,b,T;const S=P=>(a+(h?o-P:P))%s,D=()=>{E!==b&&(n.lineTo(f,b),n.lineTo(f,E),n.lineTo(f,T))};for(l&&(v=i[S(0)],n.moveTo(v.x,v.y)),m=0;m<=o;++m){if(v=i[S(m)],v.skip)continue;const P=v.x,k=v.y,U=P|0;U===x?(k<E?E=k:k>b&&(b=k),f=(p*f+P)/++p):(D(),n.lineTo(P,k),x=U,p=0,E=b=k),T=k}D()}function ZE(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?iz:rz}function sz(n){return n.stepped?nj:n.tension||n.cubicInterpolationMode==="monotone"?rj:El}function az(n,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),y6(n,t.options),n.stroke(i)}function oz(n,t,e,r){const{segments:i,options:s}=t,a=ZE(t);for(const o of i)y6(n,s,o.style),n.beginPath(),a(n,t,o,{start:e,end:e+r-1})&&n.closePath(),n.stroke()}const cz=typeof Path2D=="function";function lz(n,t,e,r){cz&&!t.options.segment?az(n,t,e,r):oz(n,t,e,r)}class Ap extends Dc{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;YU(this._points,r,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hj(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,i=t[e],s=this.points,a=cj(this,{property:e,start:i,end:i});if(!a.length)return;const o=[],l=sz(r);let h,f;for(h=0,f=a.length;h<f;++h){const{start:p,end:m}=a[h],v=s[p],x=s[m];if(v===x){o.push(v);continue}const E=Math.abs((i-v[e])/(x[e]-v[e])),b=l(v,x,E,r.stepped);b[e]=t[e],o.push(b)}return o.length===1?o[0]:o}pathSegment(t,e,r){return ZE(this)(t,this,e,r)}path(t,e,r){const i=this.segments,s=ZE(this);let a=this._loop;e=e||0,r=r||this.points.length-e;for(const o of i)a&=s(t,this,o,{start:e,end:e+r-1});return!!a}draw(t,e,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),lz(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}lt(Ap,"id","line"),lt(Ap,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),lt(Ap,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),lt(Ap,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Z3(n,t,e,r){const i=n.options,{[e]:s}=n.getProps([e],r);return Math.abs(t-s)<i.radius+i.hitRadius}class D1 extends Dc{constructor(e){super();lt(this,"parsed");lt(this,"skip");lt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(r-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return Z3(this,e,"x",r)}inYRange(e,r){return Z3(this,e,"y",r)}getCenterPoint(e){const{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const i=r&&e.borderWidth||0;return(r+i)*2}draw(e,r){const i=this.options;this.skip||i.radius<.1||!pg(this,r,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,KE(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}lt(D1,"id","point"),lt(D1,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),lt(D1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function x6(n,t){const{x:e,y:r,base:i,width:s,height:a}=n.getProps(["x","y","base","width","height"],t);let o,l,h,f,p;return n.horizontal?(p=a/2,o=Math.min(e,i),l=Math.max(e,i),h=r-p,f=r+p):(p=s/2,o=e-p,l=e+p,h=Math.min(r,i),f=Math.max(r,i)),{left:o,top:h,right:l,bottom:f}}function oc(n,t,e,r){return n?0:Lr(t,e,r)}function uz(n,t,e){const r=n.options.borderWidth,i=n.borderSkipped,s=XP(r);return{t:oc(i.top,s.top,0,e),r:oc(i.right,s.right,0,t),b:oc(i.bottom,s.bottom,0,e),l:oc(i.left,s.left,0,t)}}function hz(n,t,e){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=$h(i),a=Math.min(t,e),o=n.borderSkipped,l=r||Ee(i);return{topLeft:oc(!l||o.top||o.left,s.topLeft,0,a),topRight:oc(!l||o.top||o.right,s.topRight,0,a),bottomLeft:oc(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:oc(!l||o.bottom||o.right,s.bottomRight,0,a)}}function fz(n){const t=x6(n),e=t.right-t.left,r=t.bottom-t.top,i=uz(n,e/2,r/2),s=hz(n,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function fw(n,t,e,r){const i=t===null,s=e===null,o=n&&!(i&&s)&&x6(n,r);return o&&(i||sc(t,o.left,o.right))&&(s||sc(e,o.top,o.bottom))}function dz(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function pz(n,t){n.rect(t.x,t.y,t.w,t.h)}function dw(n,t,e={}){const r=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-r,a=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+a,radius:n.radius}}class O1 extends Dc{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=fz(this),o=dz(a.radius)?ov:pz;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),o(t,dw(a,e,s)),t.clip(),o(t,dw(s,-e,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,dw(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return fw(this,t,e,r)}inXRange(t,e){return fw(this,t,null,e)}inYRange(t,e){return fw(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}lt(O1,"id","bar"),lt(O1,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),lt(O1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const J3=(n,t)=>{let{boxHeight:e=t,boxWidth:r=t}=n;return n.usePointStyle&&(e=Math.min(e,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},gz=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class tO extends Dc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=sn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=ui(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=J3(r,s);let h,f;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(a,s,o,l)+10):(f=this.maxHeight,h=this._fitCols(a,i,o,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(f,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],f=i+o;let p=t;s.textAlign="left",s.textBaseline="middle";let m=-1,v=-f;return this.legendItems.forEach((x,E)=>{const b=r+e/2+s.measureText(x.text).width;(E===0||h[h.length-1]+b+2*o>a)&&(p+=f,h[h.length-(E>0?0:1)]=0,v+=f,m++),l[E]={left:0,top:v,row:m,width:b,height:i},h[h.length-1]+=b+o}),p}_fitCols(t,e,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],f=a-t;let p=o,m=0,v=0,x=0,E=0;return this.legendItems.forEach((b,T)=>{const{itemWidth:S,itemHeight:D}=mz(r,e,s,b,i);T>0&&v+D+2*o>f&&(p+=m+o,h.push({width:m,height:v}),x+=m+o,E++,m=v=0),l[T]={left:x,top:v,col:E,width:S,height:D},m=Math.max(m,S),v+=D+o}),p+=m,h.push({width:m,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:s}}=this,a=qh(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=Ai(r,this.left+i,this.right-this.lineWidths[o]);for(const h of e)o!==h.row&&(o=h.row,l=Ai(r,this.left+i,this.right-this.lineWidths[o])),h.top+=this.top+t+i,h.left=a.leftForLtr(a.x(l),h.width),l+=h.width+i}else{let o=0,l=Ai(r,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const h of e)h.col!==o&&(o=h.col,l=Ai(r,this.top+t+i,this.bottom-this.columnSizes[o].height)),h.top=l,h.left+=this.left+i,h.left=a.leftForLtr(a.x(h.left),h.width),l+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;z2(t,this),this._draw(),G2(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,o=On.color,l=qh(t.rtl,this.left,this.width),h=ui(a.font),{padding:f}=a,p=h.size,m=p/2;let v;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:x,boxHeight:E,itemHeight:b}=J3(a,p),T=function(U,M,I){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const N=ie(I.lineWidth,1);if(i.fillStyle=ie(I.fillStyle,o),i.lineCap=ie(I.lineCap,"butt"),i.lineDashOffset=ie(I.lineDashOffset,0),i.lineJoin=ie(I.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=ie(I.strokeStyle,o),i.setLineDash(ie(I.lineDash,[])),a.usePointStyle){const L={radius:E*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:N},j=l.xPlus(U,x/2),z=M+m;KP(i,L,j,z,a.pointStyleWidth&&x)}else{const L=M+Math.max((p-E)/2,0),j=l.leftForLtr(U,x),z=$h(I.borderRadius);i.beginPath(),Object.values(z).some(B=>B!==0)?ov(i,{x:j,y:L,w:x,h:E,radius:z}):i.rect(j,L,x,E),i.fill(),N!==0&&i.stroke()}i.restore()},S=function(U,M,I){av(i,I.text,U,M+b/2,h,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},D=this.isHorizontal(),P=this._computeTitleHeight();D?v={x:Ai(s,this.left+f,this.right-r[0]),y:this.top+f+P,line:0}:v={x:this.left+f,y:Ai(s,this.top+P+f,this.bottom-e[0].height),line:0},n6(this.ctx,t.textDirection);const k=b+f;this.legendItems.forEach((U,M)=>{i.strokeStyle=U.fontColor,i.fillStyle=U.fontColor;const I=i.measureText(U.text).width,N=l.textAlign(U.textAlign||(U.textAlign=a.textAlign)),L=x+m+I;let j=v.x,z=v.y;l.setWidth(this.width),D?M>0&&j+L+f>this.right&&(z=v.y+=k,v.line++,j=v.x=Ai(s,this.left+f,this.right-r[v.line])):M>0&&z+k>this.bottom&&(j=v.x=j+e[v.line].width+f,v.line++,z=v.y=Ai(s,this.top+P+f,this.bottom-e[v.line].height));const B=l.x(j);if(T(B,z,U),j=uU(N,j+x+m,D?j+L:this.right,t.rtl),S(l.x(j),z,U),D)v.x+=L+f;else if(typeof U.text!="string"){const yt=h.lineHeight;v.y+=w6(U,yt)+f}else v.y+=k}),r6(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=ui(e.font),i=ws(e.padding);if(!e.display)return;const s=qh(t.rtl,this.left,this.width),a=this.ctx,o=e.position,l=r.size/2,h=i.top+l;let f,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),f=this.top+h,p=Ai(t.align,p,this.right-m);else{const x=this.columnSizes.reduce((E,b)=>Math.max(E,b.height),0);f=h+Ai(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const v=Ai(o,p,p+m);a.textAlign=s.textAlign(qP(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=r.string,av(a,e.text,v,f,r)}_computeTitleHeight(){const t=this.options.title,e=ui(t.font),r=ws(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,s;if(sc(t,this.left,this.right)&&sc(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],sc(t,i.left,i.left+i.width)&&sc(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const e=this.options;if(!_z(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=gz(i,r);i&&!s&&sn(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&sn(e.onHover,[t,r,this],this)}else r&&sn(e.onClick,[t,r,this],this)}}function mz(n,t,e,r,i){const s=vz(r,n,t,e),a=yz(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}function vz(n,t,e,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+r.measureText(i).width}function yz(n,t,e){let r=n;return typeof t.text!="string"&&(r=w6(t,e)),r}function w6(n,t){const e=n.text?n.text.length:0;return t*e}function _z(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Z2={id:"legend",_element:tO,start(n,t,e){const r=n.legend=new tO({ctx:n.ctx,options:e,chart:n});ac.configure(n,r,e),ac.addBox(n,r)},stop(n){ac.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const r=n.legend;ac.configure(n,r,e),r.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(e?0:void 0),f=ws(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:a&&(o||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Tp={average(n){if(!n.length)return!1;let t,e,r=new Set,i=0,s=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),f=qE(t,h);f<i&&(i=f,o=l)}}if(o){const l=o.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function Ws(n,t){return t&&(dr(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function $a(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function xz(n,t){const{element:e,datasetIndex:r,index:i}=t,s=n.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:n,label:a,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function eO(n,t){const e=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:a,boxHeight:o}=t,l=ui(t.bodyFont),h=ui(t.titleFont),f=ui(t.footerFont),p=s.length,m=i.length,v=r.length,x=ws(t.padding);let E=x.height,b=0,T=r.reduce((P,k)=>P+k.before.length+k.lines.length+k.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,p&&(E+=p*h.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),T){const P=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;E+=v*P+(T-v)*l.lineHeight+(T-1)*t.bodySpacing}m&&(E+=t.footerMarginTop+m*f.lineHeight+(m-1)*t.footerSpacing);let S=0;const D=function(P){b=Math.max(b,e.measureText(P).width+S)};return e.save(),e.font=h.string,je(n.title,D),e.font=l.string,je(n.beforeBody.concat(n.afterBody),D),S=t.displayColors?a+2+t.boxPadding:0,je(r,P=>{je(P.before,D),je(P.lines,D),je(P.after,D)}),S=0,e.font=f.string,je(n.footer,D),e.restore(),b+=x.width,{width:b,height:E}}function wz(n,t){const{y:e,height:r}=t;return e<r/2?"top":e>n.height-r/2?"bottom":"center"}function Ez(n,t,e,r){const{x:i,width:s}=r,a=e.caretSize+e.caretPadding;if(n==="left"&&i+s+a>t.width||n==="right"&&i-s-a<0)return!0}function bz(n,t,e,r){const{x:i,width:s}=e,{width:a,chartArea:{left:o,right:l}}=n;let h="center";return r==="center"?h=i<=(o+l)/2?"left":"right":i<=s/2?h="left":i>=a-s/2&&(h="right"),Ez(h,n,t,e)&&(h="center"),h}function nO(n,t,e){const r=e.yAlign||t.yAlign||wz(n,e);return{xAlign:e.xAlign||t.xAlign||bz(n,t,e,r),yAlign:r}}function Az(n,t){let{x:e,width:r}=n;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function Tz(n,t,e){let{y:r,height:i}=n;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function rO(n,t,e,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=e,h=i+s,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=$h(a);let x=Az(t,o);const E=Tz(t,l,h);return l==="center"?o==="left"?x+=h:o==="right"&&(x-=h):o==="left"?x-=Math.max(f,m)+i:o==="right"&&(x+=Math.max(p,v)+i),{x:Lr(x,0,r.width-t.width),y:Lr(E,0,r.height-t.height)}}function Km(n,t,e){const r=ws(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-r.right:n.x+r.left}function iO(n){return Ws([],$a(n))}function Sz(n,t,e){return pu(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function sO(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const E6={beforeTitle:Ga,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:Ga,beforeBody:Ga,beforeLabel:Ga,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ke(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ga,afterBody:Ga,beforeFooter:Ga,footer:Ga,afterFooter:Ga};function si(n,t,e,r){const i=n[t].call(e,r);return typeof i>"u"?E6[t].call(e,r):i}var WE;let aO=(WE=class extends Dc{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&e.options.animation&&r.animations,s=new s6(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Sz(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:r}=e,i=si(r,"beforeTitle",this,t),s=si(r,"title",this,t),a=si(r,"afterTitle",this,t);let o=[];return o=Ws(o,$a(i)),o=Ws(o,$a(s)),o=Ws(o,$a(a)),o}getBeforeBody(t,e){return iO(si(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:r}=e,i=[];return je(t,s=>{const a={before:[],lines:[],after:[]},o=sO(r,s);Ws(a.before,$a(si(o,"beforeLabel",this,s))),Ws(a.lines,si(o,"label",this,s)),Ws(a.after,$a(si(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,e){return iO(si(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:r}=e,i=si(r,"beforeFooter",this,t),s=si(r,"footer",this,t),a=si(r,"afterFooter",this,t);let o=[];return o=Ws(o,$a(i)),o=Ws(o,$a(s)),o=Ws(o,$a(a)),o}_createItems(t){const e=this._active,r=this.chart.data,i=[],s=[],a=[];let o=[],l,h;for(l=0,h=e.length;l<h;++l)o.push(xz(this.chart,e[l]));return t.filter&&(o=o.filter((f,p,m)=>t.filter(f,p,m,r))),t.itemSort&&(o=o.sort((f,p)=>t.itemSort(f,p,r))),je(o,f=>{const p=sO(t.callbacks,f);i.push(si(p,"labelColor",this,f)),s.push(si(p,"labelPointStyle",this,f)),a.push(si(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=Tp[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=eO(this,r),h=Object.assign({},o,l),f=nO(this.chart,r,h),p=rO(r,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,i){const s=this.getCaretPosition(t,r,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:h,bottomLeft:f,bottomRight:p}=$h(o),{x:m,y:v}=t,{width:x,height:E}=e;let b,T,S,D,P,k;return s==="center"?(P=v+E/2,i==="left"?(b=m,T=b-a,D=P+a,k=P-a):(b=m+x,T=b+a,D=P-a,k=P+a),S=b):(i==="left"?T=m+Math.max(l,f)+a:i==="right"?T=m+x-Math.max(h,p)-a:T=this.caretX,s==="top"?(D=v,P=D-a,b=T-a,S=T+a):(D=v+E,P=D+a,b=T+a,S=T-a),k=D),{x1:b,x2:T,x3:S,y1:D,y2:P,y3:k}}drawTitle(t,e,r){const i=this.title,s=i.length;let a,o,l;if(s){const h=qh(r.rtl,this.x,this.width);for(t.x=Km(this,r.titleAlign,r),e.textAlign=h.textAlign(r.titleAlign),e.textBaseline="middle",a=ui(r.titleFont),o=r.titleSpacing,e.fillStyle=r.titleColor,e.font=a.string,l=0;l<s;++l)e.fillText(i[l],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,l+1===s&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,e,r,i,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:h}=s,f=ui(s.bodyFont),p=Km(this,"left",s),m=i.x(p),v=l<f.lineHeight?(f.lineHeight-l)/2:0,x=e.y+v;if(s.usePointStyle){const E={radius:Math.min(h,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},b=i.leftForLtr(m,h)+h/2,T=x+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,KE(t,E,b,T),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,KE(t,E,b,T)}else{t.lineWidth=Ee(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const E=i.leftForLtr(m,h),b=i.leftForLtr(i.xPlus(m,1),h-2),T=$h(a.borderRadius);Object.values(T).some(S=>S!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,ov(t,{x:E,y:x,w:h,h:l,radius:T}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ov(t,{x:b,y:x+1,w:h-2,h:l-2,radius:T}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(E,x,h,l),t.strokeRect(E,x,h,l),t.fillStyle=a.backgroundColor,t.fillRect(b,x+1,h-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:h,boxPadding:f}=r,p=ui(r.bodyFont);let m=p.lineHeight,v=0;const x=qh(r.rtl,this.x,this.width),E=function(I){e.fillText(I,x.x(t.x+v),t.y+m/2),t.y+=m+s},b=x.textAlign(a);let T,S,D,P,k,U,M;for(e.textAlign=a,e.textBaseline="middle",e.font=p.string,t.x=Km(this,b,r),e.fillStyle=r.bodyColor,je(this.beforeBody,E),v=o&&b!=="right"?a==="center"?h/2+f:h+2+f:0,P=0,U=i.length;P<U;++P){for(T=i[P],S=this.labelTextColors[P],e.fillStyle=S,je(T.before,E),D=T.lines,o&&D.length&&(this._drawColorBox(e,t,P,x,r),m=Math.max(p.lineHeight,l)),k=0,M=D.length;k<M;++k)E(D[k]),m=p.lineHeight;je(T.after,E)}v=0,m=p.lineHeight,je(this.afterBody,E),t.y-=s}drawFooter(t,e,r){const i=this.footer,s=i.length;let a,o;if(s){const l=qh(r.rtl,this.x,this.width);for(t.x=Km(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=l.textAlign(r.footerAlign),e.textBaseline="middle",a=ui(r.footerFont),e.fillStyle=r.footerColor,e.font=a.string,o=0;o<s;++o)e.fillText(i[o],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,e,r,i){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=t,{width:h,height:f}=r,{topLeft:p,topRight:m,bottomLeft:v,bottomRight:x}=$h(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+p,l),a==="top"&&this.drawCaret(t,e,r,i),e.lineTo(o+h-m,l),e.quadraticCurveTo(o+h,l,o+h,l+m),a==="center"&&s==="right"&&this.drawCaret(t,e,r,i),e.lineTo(o+h,l+f-x),e.quadraticCurveTo(o+h,l+f,o+h-x,l+f),a==="bottom"&&this.drawCaret(t,e,r,i),e.lineTo(o+v,l+f),e.quadraticCurveTo(o,l+f,o,l+f-v),a==="center"&&s==="left"&&this.drawCaret(t,e,r,i),e.lineTo(o,l+p),e.quadraticCurveTo(o,l,o+p,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=Tp[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=eO(this,t),l=Object.assign({},a,this._size),h=nO(e,t,l),f=rO(t,l,h,e);(i._to!==f.x||s._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=ws(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,e),n6(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),r6(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,i=t.map(({datasetIndex:o,index:l})=>{const h=this.chart.getDatasetMeta(o);if(!h)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:h.data[l],index:l}}),s=!rv(r,i),a=this._positionChanged(i,e);(s||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,r),o=this._positionChanged(a,t),l=e||!rv(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:r,caretY:i,options:s}=this,a=Tp[s.position].call(this,t,e);return a!==!1&&(r!==a.x||i!==a.y)}},lt(WE,"positioners",Tp),WE);var J2={id:"tooltip",_element:aO,positioners:Tp,afterInit(n,t,e){e&&(n.tooltip=new aO({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:E6},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Cz=(n,t,e,r)=>(typeof t=="string"?(e=n.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Iz(n,t,e,r){const i=n.indexOf(t);if(i===-1)return Cz(n,t,e,r);const s=n.lastIndexOf(t);return i!==s?e:i}const Dz=(n,t)=>n===null?null:Lr(Math.round(n),0,t);function oO(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class JE extends Rf{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const r=this.getLabels();for(const{index:i,label:s}of e)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ke(t))return null;const r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:Iz(r,t,ie(e,t),this._addedLabels),Dz(e,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=e;a++)i.push({value:a});return i}getLabelForValue(t){return oO.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}lt(JE,"id","category"),lt(JE,"defaults",{ticks:{callback:oO}});function Oz(n,t){const e=[],{bounds:i,step:s,min:a,max:o,precision:l,count:h,maxTicks:f,maxDigits:p,includeBounds:m}=n,v=s||1,x=f-1,{min:E,max:b}=t,T=!ke(a),S=!ke(o),D=!ke(h),P=(b-E)/(p+1);let k=c3((b-E)/x/v)*v,U,M,I,N;if(k<1e-14&&!T&&!S)return[{value:E},{value:b}];N=Math.ceil(b/k)-Math.floor(E/k),N>x&&(k=c3(N*k/x/v)*v),ke(l)||(U=Math.pow(10,l),k=Math.ceil(k*U)/U),i==="ticks"?(M=Math.floor(E/k)*k,I=Math.ceil(b/k)*k):(M=E,I=b),T&&S&&s&&eU((o-a)/s,k/1e3)?(N=Math.round(Math.min((o-a)/k,f)),k=(o-a)/N,M=a,I=o):D?(M=T?a:M,I=S?o:I,N=h-1,k=(I-M)/N):(N=(I-M)/k,Up(N,Math.round(N),k/1e3)?N=Math.round(N):N=Math.ceil(N));const L=Math.max(l3(k),l3(M));U=Math.pow(10,ke(l)?L:l),M=Math.round(M*U)/U,I=Math.round(I*U)/U;let j=0;for(T&&(m&&M!==a?(e.push({value:a}),M<a&&j++,Up(Math.round((M+j*k)*U)/U,a,cO(a,P,n))&&j++):M<a&&j++);j<N;++j){const z=Math.round((M+j*k)*U)/U;if(S&&z>o)break;e.push({value:z})}return S&&m&&I!==o?e.length&&Up(e[e.length-1].value,o,cO(o,P,n))?e[e.length-1].value=o:e.push({value:o}):(!S||I===o)&&e.push({value:I}),e}function cO(n,t,{horizontal:e,minRotation:r}){const i=Ya(r),s=(e?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+n).length;return Math.min(t/s,a)}class Rz extends Rf{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ke(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=l=>i=e?i:l,o=l=>s=r?s:l;if(t){const l=ea(i),h=ea(s);l<0&&h<0?o(0):l>0&&h>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),t||a(i-l)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=Oz(i,s);return t.bounds==="ticks"&&nU(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return H2(t,this.chart.options.locale,this.options.ticks.format)}}class hv extends Rz{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=is(t)?t:0,this.max=is(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=Ya(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}lt(hv,"id","linear"),lt(hv,"defaults",{ticks:{callback:YP.formatters.numeric}});const iy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},oi=Object.keys(iy);function lO(n,t){return n-t}function uO(n,t){if(ke(t))return null;const e=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),is(a)||(a=typeof r=="string"?e.parse(a,r):e.parse(a)),a===null?null:(i&&(a=i==="week"&&(fg(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,i)),+a)}function hO(n,t,e,r){const i=oi.length;for(let s=oi.indexOf(n);s<i-1;++s){const a=iy[oi[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=r)return oi[s]}return oi[i-1]}function Nz(n,t,e,r,i){for(let s=oi.length-1;s>=oi.indexOf(e);s--){const a=oi[s];if(iy[a].common&&n._adapter.diff(i,r,a)>=t-1)return a}return oi[e?oi.indexOf(e):0]}function Mz(n){for(let t=oi.indexOf(n)+1,e=oi.length;t<e;++t)if(iy[oi[t]].common)return oi[t]}function fO(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:r,hi:i}=U2(e,t),s=e[r]>=t?e[r]:e[i];n[s]=!0}}function Pz(n,t,e,r){const i=n._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=e[o],l>=0&&(t[l].major=!0);return t}function dO(n,t,e){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return s===0||!e?r:Pz(n,r,i,e)}class mg extends Rf{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const r=t.time||(t.time={}),i=this._adapter=new c6._date(t.adapters.date);i.init(e),Fp(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:uO(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(h){!a&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!o&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!a||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=is(i)&&!isNaN(i)?i:+e.startOf(Date.now(),r),s=is(s)&&!isNaN(s)?s:+e.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=oU(i,s,a);return this._unit=e.unit||(r.autoSkip?hO(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):Nz(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Mz(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),dO(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Lr(e,0,a),r=Lr(r,0,a),this._offsets={start:e,end:r,factor:1/(e+1+r)}}_generate(){const t=this._adapter,e=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||hO(s.minUnit,e,r,this._getLabelCapacity(e)),o=ie(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,h=fg(l)||l===!0,f={};let p=e,m,v;if(h&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,h?"day":a),t.diff(r,e,a)>1e5*o)throw new Error(e+" and "+r+" are too far apart with stepSize of "+o+" "+a);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,v=0;m<r;m=+t.add(m,o,a),v++)fO(f,m,x);return(m===r||i.bounds==="ticks"||v===1)&&fO(f,m,x),Object.keys(f).sort(lO).map(E=>+E)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,a=e||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,e,r,i){const s=this.options,a=s.ticks.callback;if(a)return sn(a,[t,e,r],this);const o=s.time.displayFormats,l=this._unit,h=this._majorUnit,f=l&&o[l],p=h&&o[h],m=r[e],v=h&&p&&m&&m.major;return this._adapter.format(t,i||(v?p:f))}generateTickLabels(t){let e,r,i;for(e=0,r=t.length;e<r;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,i=Ya(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,i=r[e.unit]||r.millisecond,s=this._tickFormatFunction(t,0,dO(this,[t],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,r=i.length;e<r;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const i=this.getLabels();for(e=0,r=i.length;e<r;++e)t.push(uO(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return GP(t.sort(lO))}}lt(mg,"id","time"),lt(mg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xm(n,t,e){let r=0,i=n.length-1,s,a,o,l;e?(t>=n[r].pos&&t<=n[i].pos&&({lo:r,hi:i}=Pl(n,"pos",t)),{pos:s,time:o}=n[r],{pos:a,time:l}=n[i]):(t>=n[r].time&&t<=n[i].time&&({lo:r,hi:i}=Pl(n,"time",t)),{time:s,pos:o}=n[r],{time:a,pos:l}=n[i]);const h=a-s;return h?o+(l-o)*(t-s)/h:o}class pO extends mg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Xm(e,this.min),this._tableRange=Xm(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,i=[],s=[];let a,o,l,h,f;for(a=0,o=t.length;a<o;++a)h=t[a],h>=e&&h<=r&&i.push(h);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(a=0,o=i.length;a<o;++a)f=i[a+1],l=i[a-1],h=i[a],Math.round((f+l)/2)!==h&&s.push({time:h,pos:a/(o-1)});return s}_generate(){const t=this.min,e=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(e)||r.length===1)&&r.push(e),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Xm(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return Xm(this._table,r*this._tableRange+this._minPos,!0)}}lt(pO,"id","timeseries"),lt(pO,"defaults",mg.defaults);const b6="label";function gO(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function kz(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function A6(n,t){n.labels=t}function T6(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b6;const r=[];n.datasets=t.map(i=>{const s=n.datasets.find(a=>a[e]===i[e]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function Lz(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b6;const e={labels:[],datasets:[]};return A6(e,n.labels),T6(e,n.datasets,t),e}function Vz(n,t){const{height:e=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:h=[],fallbackContent:f,updateMode:p,...m}=n,v=rt.useRef(null),x=rt.useRef(null),E=()=>{v.current&&(x.current=new gu(v.current,{type:a,data:Lz(o,s),options:l&&{...l},plugins:h}),gO(t,x.current))},b=()=>{gO(t,null),x.current&&(x.current.destroy(),x.current=null)};return rt.useEffect(()=>{!i&&x.current&&l&&kz(x.current,l)},[i,l]),rt.useEffect(()=>{!i&&x.current&&A6(x.current.config.data,o.labels)},[i,o.labels]),rt.useEffect(()=>{!i&&x.current&&o.datasets&&T6(x.current.config.data,o.datasets,s)},[i,o.datasets]),rt.useEffect(()=>{x.current&&(i?(b(),setTimeout(E)):x.current.update(p))},[i,l,o.labels,o.datasets,p]),rt.useEffect(()=>{x.current&&(b(),setTimeout(E))},[a]),rt.useEffect(()=>(E(),()=>b()),[]),dn.createElement("canvas",{ref:v,role:"img",height:e,width:r,...m},f)}const Bz=rt.forwardRef(Vz);function tA(n,t){return gu.register(t),rt.forwardRef((e,r)=>dn.createElement(Bz,{...e,ref:r,type:n}))}const Fz=tA("line",S1),Uz=tA("bar",T1),S6=tA("doughnut",Ep);gu.register(O1,JE,hv);function C6({meals:n,startOfWeek:t}){const e=()=>{const a=[];for(let o=0;o<7;o++){const l=new Date(t);l.setDate(t.getDate()+o),a.push(l.toISOString().split("T")[0])}return a},i={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories",data:e().map(o=>{let l=0;return n.filter(h=>h.date===o).forEach(h=>{h.kcal?l+=h.kcal:h.foodItems.forEach(f=>{f.nutrients.forEach(p=>{const m=parseFloat(p.total)||0;(p.type==="Carbohydrate"||p.type==="Protein")&&(l+=m*4),p.type==="Fat"&&(l+=m*9)})})}),Math.round(l)}),backgroundColor:"deepskyblue"}]},s={plugins:{tooltip:{enabled:!0},legend:{display:!1}},scales:{y:{ticks:{color:"white"},grid:{color:"#444"}},x:{ticks:{color:"white"},grid:{color:"#444"}}}};return C.jsx(Uz,{data:i,options:s})}gu.register(kh,J2,Z2);function I6({meals:n,selectedDate:t,goal:e=2e3}){const r=t||new Date().toISOString().split("T")[0],s=n.filter(f=>f.date===r).reduce((f,p)=>{if(p.kcal)return f+p.kcal;let m=0;return p.foodItems.forEach(v=>{v.nutrients.forEach(x=>{const E=parseFloat(x.total)||0;(x.type==="Carbohydrate"||x.type==="Protein")&&(m+=E*4),x.type==="Fat"&&(m+=E*9)})}),f+m},0),a=Math.round(s),o=e-a,l={labels:["Calories Consumed"],datasets:[{data:[s,o>0?o:0],backgroundColor:["deepskyblue","#a9c9f8ff"],borderWidth:0}]},h={cutout:"85%",plugins:{legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:12,weight:"bold"},padding:15,boxWidth:10,boxHeight:10}}}};return C.jsxs("div",{className:"donut-chart",style:{position:"relative"},children:[C.jsx(S6,{data:l,options:h}),C.jsx("div",{className:"DonutWordings",children:o>0?`${o} Remaining`:"Goal Reached"})]})}gu.register(kh,J2,Z2);function D6({meals:n,selectedDate:t}){const e=t||new Date().toISOString().split("T")[0],r=n.filter(m=>m.date===e),i=["Protein","Fat","Carbohydrate","Sugar","Fibre","Salt","Caffeine"],s={};r.forEach(m=>{m.foodItems.forEach(v=>{v.nutrients.forEach(x=>{var T;const E=(T=x.type)==null?void 0:T.toLowerCase();if(!E||E.includes("kcal")||E.includes("calorie"))return;const b=E.charAt(0).toUpperCase()+E.slice(1);if(i.includes(b)){const S=parseFloat(x.total)||0;s[b]=(s[b]||0)+S}})})});const a=Object.entries(s).sort((m,v)=>v[1]-m[1]),o=a.slice(0,4),l=a.slice(4),h=o.map(([m,v],x)=>({label:m,value:v,color:["#4CAF50","#FF9800","#03A9F4","teal"][x%4]}));if(l.length>0){const m=l.reduce((v,[,x])=>v+x,0);h.push({label:"Others",value:m,color:"gray"})}const f={labels:h.map(m=>m.label),datasets:[{data:h.map(m=>m.value),backgroundColor:h.map(m=>m.color),borderWidth:0}]},p={cutout:"85%",plugins:{tooltip:{enabled:!0},legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:8,weight:"bold"},padding:5,boxWidth:5,boxHeight:5}}}};return r.length===0?C.jsx("div",{className:"text-white small text-center p-3",style:{marginTop:"30%"},children:"No nutrition data for today."}):C.jsx("div",{className:"donut-chart",style:{position:"relative"},children:C.jsx(S6,{data:f,options:p})})}const jz="Left",Hz="Right",zz="Up",Gz="Down",Lh={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},tb={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},mO="mousemove",vO="mouseup",Wz="touchend",$z="touchmove",qz="touchstart";function Yz(n,t,e,r){return n>t?e>0?Hz:jz:r>0?Gz:zz}function yO(n,t){if(t===0)return n;const e=Math.PI/180*t,r=n[0]*Math.cos(e)+n[1]*Math.sin(e),i=n[1]*Math.cos(e)-n[0]*Math.sin(e);return[r,i]}function Kz(n,t){const e=f=>{const p="touches"in f;p&&f.touches.length>1||n((m,v)=>{v.trackMouse&&!p&&(document.addEventListener(mO,r),document.addEventListener(vO,a));const{clientX:x,clientY:E}=p?f.touches[0]:f,b=yO([x,E],v.rotationAngle);return v.onTouchStartOrOnMouseDown&&v.onTouchStartOrOnMouseDown({event:f}),Object.assign(Object.assign(Object.assign({},m),tb),{initial:b.slice(),xy:b,start:f.timeStamp||0})})},r=f=>{n((p,m)=>{const v="touches"in f;if(v&&f.touches.length>1)return p;if(f.timeStamp-p.start>m.swipeDuration)return p.swiping?Object.assign(Object.assign({},p),{swiping:!1}):p;const{clientX:x,clientY:E}=v?f.touches[0]:f,[b,T]=yO([x,E],m.rotationAngle),S=b-p.xy[0],D=T-p.xy[1],P=Math.abs(S),k=Math.abs(D),U=(f.timeStamp||0)-p.start,M=Math.sqrt(P*P+k*k)/(U||1),I=[S/(U||1),D/(U||1)],N=Yz(P,k,S,D),L=typeof m.delta=="number"?m.delta:m.delta[N.toLowerCase()]||Lh.delta;if(P<L&&k<L&&!p.swiping)return p;const j={absX:P,absY:k,deltaX:S,deltaY:D,dir:N,event:f,first:p.first,initial:p.initial,velocity:M,vxvy:I};j.first&&m.onSwipeStart&&m.onSwipeStart(j),m.onSwiping&&m.onSwiping(j);let z=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${N}`])&&(z=!0),z&&m.preventScrollOnSwipe&&m.trackTouch&&f.cancelable&&f.preventDefault(),Object.assign(Object.assign({},p),{first:!1,eventData:j,swiping:!0})})},i=f=>{n((p,m)=>{let v;if(p.swiping&&p.eventData){if(f.timeStamp-p.start<m.swipeDuration){v=Object.assign(Object.assign({},p.eventData),{event:f}),m.onSwiped&&m.onSwiped(v);const x=m[`onSwiped${v.dir}`];x&&x(v)}}else m.onTap&&m.onTap({event:f});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:f}),Object.assign(Object.assign(Object.assign({},p),tb),{eventData:v})})},s=()=>{document.removeEventListener(mO,r),document.removeEventListener(vO,a)},a=f=>{s(),i(f)},o=(f,p)=>{let m=()=>{};if(f&&f.addEventListener){const v=Object.assign(Object.assign({},Lh.touchEventOptions),p.touchEventOptions),x=[[qz,e,v],[$z,r,Object.assign(Object.assign({},v),p.preventScrollOnSwipe?{passive:!1}:{})],[Wz,i,v]];x.forEach(([E,b,T])=>f.addEventListener(E,b,T)),m=()=>x.forEach(([E,b])=>f.removeEventListener(E,b))}return m},h={ref:f=>{f!==null&&n((p,m)=>{if(p.el===f)return p;const v={};return p.el&&p.el!==f&&p.cleanUpTouch&&(p.cleanUpTouch(),v.cleanUpTouch=void 0),m.trackTouch&&f&&(v.cleanUpTouch=o(f,m)),Object.assign(Object.assign(Object.assign({},p),{el:f}),v)})}};return t.trackMouse&&(h.onMouseDown=e),[h,o]}function Xz(n,t,e,r){return!t.trackTouch||!n.el?(n.cleanUpTouch&&n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:void 0})):n.cleanUpTouch?t.preventScrollOnSwipe!==e.preventScrollOnSwipe||t.touchEventOptions.passive!==e.touchEventOptions.passive?(n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})):n:Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})}function Qz(n){const{trackMouse:t}=n,e=rt.useRef(Object.assign({},tb)),r=rt.useRef(Object.assign({},Lh)),i=rt.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Lh),n);let s;for(s in Lh)r.current[s]===void 0&&(r.current[s]=Lh[s]);const[a,o]=rt.useMemo(()=>Kz(l=>e.current=l(e.current,r.current),{trackMouse:t}),[t]);return e.current=Xz(e.current,r.current,i.current,o),a}const O6=rt.createContext({});function Zz(n){const t=rt.useRef(null);return t.current===null&&(t.current=n()),t.current}const eA=typeof window<"u",Jz=eA?rt.useLayoutEffect:rt.useEffect,nA=rt.createContext(null);function rA(n,t){n.indexOf(t)===-1&&n.push(t)}function iA(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const to=(n,t,e)=>e>t?t:e<n?n:e;let sA=()=>{};const eo={},R6=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function N6(n){return typeof n=="object"&&n!==null}const M6=n=>/^0[^.\s]+$/u.test(n);function aA(n){let t;return()=>(t===void 0&&(t=n()),t)}const ts=n=>n,tG=(n,t)=>e=>t(n(e)),Hg=(...n)=>n.reduce(tG),vg=(n,t,e)=>{const r=t-n;return r===0?1:(e-n)/r};class oA{constructor(){this.subscriptions=[]}add(t){return rA(this.subscriptions,t),()=>iA(this.subscriptions,t)}notify(t,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const na=n=>n*1e3,ra=n=>n/1e3;function P6(n,t){return t?n*(1e3/t):0}const k6=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,eG=1e-7,nG=12;function rG(n,t,e,r,i){let s,a,o=0;do a=t+(e-t)/2,s=k6(a,r,i)-n,s>0?e=a:t=a;while(Math.abs(s)>eG&&++o<nG);return a}function zg(n,t,e,r){if(n===t&&e===r)return ts;const i=s=>rG(s,0,1,n,e);return s=>s===0||s===1?s:k6(i(s),t,r)}const L6=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,V6=n=>t=>1-n(1-t),B6=zg(.33,1.53,.69,.99),cA=V6(B6),F6=L6(cA),U6=n=>(n*=2)<1?.5*cA(n):.5*(2-Math.pow(2,-10*(n-1))),lA=n=>1-Math.sin(Math.acos(n)),j6=V6(lA),H6=L6(lA),iG=zg(.42,0,1,1),sG=zg(0,0,.58,1),z6=zg(.42,0,.58,1),aG=n=>Array.isArray(n)&&typeof n[0]!="number",G6=n=>Array.isArray(n)&&typeof n[0]=="number",oG={linear:ts,easeIn:iG,easeInOut:z6,easeOut:sG,circIn:lA,circInOut:H6,circOut:j6,backIn:cA,backInOut:F6,backOut:B6,anticipate:U6},cG=n=>typeof n=="string",_O=n=>{if(G6(n)){sA(n.length===4);const[t,e,r,i]=n;return zg(t,e,r,i)}else if(cG(n))return oG[n];return n},Qm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lG(n,t){let e=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(f){a.has(f)&&(h.schedule(f),n()),f(o)}const h={schedule:(f,p=!1,m=!1)=>{const x=m&&i?e:r;return p&&a.add(f),x.has(f)||x.add(f),f},cancel:f=>{r.delete(f),a.delete(f)},process:f=>{if(o=f,i){s=!0;return}i=!0,[e,r]=[r,e],e.forEach(l),e.clear(),i=!1,s&&(s=!1,h.process(f))}};return h}const uG=40;function W6(n,t){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,a=Qm.reduce((D,P)=>(D[P]=lG(s),D),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:f,update:p,preRender:m,render:v,postRender:x}=a,E=()=>{const D=eo.useManualTiming?i.timestamp:performance.now();e=!1,eo.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(D-i.timestamp,uG),1)),i.timestamp=D,i.isProcessing=!0,o.process(i),l.process(i),h.process(i),f.process(i),p.process(i),m.process(i),v.process(i),x.process(i),i.isProcessing=!1,e&&t&&(r=!1,n(E))},b=()=>{e=!0,r=!0,i.isProcessing||n(E)};return{schedule:Qm.reduce((D,P)=>{const k=a[P];return D[P]=(U,M=!1,I=!1)=>(e||b(),k.schedule(U,M,I)),D},{}),cancel:D=>{for(let P=0;P<Qm.length;P++)a[Qm[P]].cancel(D)},state:i,steps:a}}const{schedule:ln,cancel:_c,state:Tr,steps:pw}=W6(typeof requestAnimationFrame<"u"?requestAnimationFrame:ts,!0);let R1;function hG(){R1=void 0}const hi={now:()=>(R1===void 0&&hi.set(Tr.isProcessing||eo.useManualTiming?Tr.timestamp:performance.now()),R1),set:n=>{R1=n,queueMicrotask(hG)}},$6=n=>t=>typeof t=="string"&&t.startsWith(n),uA=$6("--"),fG=$6("var(--"),hA=n=>fG(n)?dG.test(n.split("/*")[0].trim()):!1,dG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Nf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},yg={...Nf,transform:n=>to(0,1,n)},Zm={...Nf,default:1},zp=n=>Math.round(n*1e5)/1e5,fA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function pG(n){return n==null}const gG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dA=(n,t)=>e=>!!(typeof e=="string"&&gG.test(e)&&e.startsWith(n)||t&&!pG(e)&&Object.prototype.hasOwnProperty.call(e,t)),q6=(n,t,e)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(fA);return{[n]:parseFloat(i),[t]:parseFloat(s),[e]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},mG=n=>to(0,255,n),gw={...Nf,transform:n=>Math.round(mG(n))},kl={test:dA("rgb","red"),parse:q6("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:r=1})=>"rgba("+gw.transform(n)+", "+gw.transform(t)+", "+gw.transform(e)+", "+zp(yg.transform(r))+")"};function vG(n){let t="",e="",r="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const eb={test:dA("#"),parse:vG,transform:kl.transform},Gg=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Qo=Gg("deg"),ia=Gg("%"),Xt=Gg("px"),yG=Gg("vh"),_G=Gg("vw"),xO={...ia,parse:n=>ia.parse(n)/100,transform:n=>ia.transform(n*100)},Vh={test:dA("hsl","hue"),parse:q6("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:r=1})=>"hsla("+Math.round(n)+", "+ia.transform(zp(t))+", "+ia.transform(zp(e))+", "+zp(yg.transform(r))+")"},jn={test:n=>kl.test(n)||eb.test(n)||Vh.test(n),parse:n=>kl.test(n)?kl.parse(n):Vh.test(n)?Vh.parse(n):eb.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?kl.transform(n):Vh.transform(n),getAnimatableNone:n=>{const t=jn.parse(n);return t.alpha=0,jn.transform(t)}},xG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wG(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(fA))==null?void 0:t.length)||0)+(((e=n.match(xG))==null?void 0:e.length)||0)>0}const Y6="number",K6="color",EG="var",bG="var(",wO="${}",AG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _g(n){const t=n.toString(),e=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(AG,l=>(jn.test(l)?(r.color.push(s),i.push(K6),e.push(jn.parse(l))):l.startsWith(bG)?(r.var.push(s),i.push(EG),e.push(l)):(r.number.push(s),i.push(Y6),e.push(parseFloat(l))),++s,wO)).split(wO);return{values:e,split:o,indexes:r,types:i}}function X6(n){return _g(n).values}function Q6(n){const{split:t,types:e}=_g(n),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=e[a];o===Y6?s+=zp(i[a]):o===K6?s+=jn.transform(i[a]):s+=i[a]}return s}}const TG=n=>typeof n=="number"?0:jn.test(n)?jn.getAnimatableNone(n):n;function SG(n){const t=X6(n);return Q6(n)(t.map(TG))}const xc={test:wG,parse:X6,createTransformer:Q6,getAnimatableNone:SG};function mw(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function CG({hue:n,saturation:t,lightness:e,alpha:r}){n/=360,t/=100,e/=100;let i=0,s=0,a=0;if(!t)i=s=a=e;else{const o=e<.5?e*(1+t):e+t-e*t,l=2*e-o;i=mw(l,o,n+1/3),s=mw(l,o,n),a=mw(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function fv(n,t){return e=>e>0?t:n}const pn=(n,t,e)=>n+(t-n)*e,vw=(n,t,e)=>{const r=n*n,i=e*(t*t-r)+r;return i<0?0:Math.sqrt(i)},IG=[eb,kl,Vh],DG=n=>IG.find(t=>t.test(n));function EO(n){const t=DG(n);if(!t)return!1;let e=t.parse(n);return t===Vh&&(e=CG(e)),e}const bO=(n,t)=>{const e=EO(n),r=EO(t);if(!e||!r)return fv(n,t);const i={...e};return s=>(i.red=vw(e.red,r.red,s),i.green=vw(e.green,r.green,s),i.blue=vw(e.blue,r.blue,s),i.alpha=pn(e.alpha,r.alpha,s),kl.transform(i))},nb=new Set(["none","hidden"]);function OG(n,t){return nb.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function RG(n,t){return e=>pn(n,t,e)}function pA(n){return typeof n=="number"?RG:typeof n=="string"?hA(n)?fv:jn.test(n)?bO:PG:Array.isArray(n)?Z6:typeof n=="object"?jn.test(n)?bO:NG:fv}function Z6(n,t){const e=[...n],r=e.length,i=n.map((s,a)=>pA(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)e[a]=i[a](s);return e}}function NG(n,t){const e={...n,...t},r={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(r[i]=pA(n[i])(n[i],t[i]));return i=>{for(const s in r)e[s]=r[s](i);return e}}function MG(n,t){const e=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=n.indexes[s][r[s]],o=n.values[a]??0;e[i]=o,r[s]++}return e}const PG=(n,t)=>{const e=xc.createTransformer(t),r=_g(n),i=_g(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?nb.has(n)&&!i.values.length||nb.has(t)&&!r.values.length?OG(n,t):Hg(Z6(MG(r,i),i.values),e):fv(n,t)};function J6(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?pn(n,t,e):pA(n)(n,t)}const kG=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>ln.update(t,e),stop:()=>_c(t),now:()=>Tr.isProcessing?Tr.timestamp:hi.now()}},t8=(n,t,e=10)=>{let r="";const i=Math.max(Math.round(t/e),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},dv=2e4;function gA(n){let t=0;const e=50;let r=n.next(t);for(;!r.done&&t<dv;)t+=e,r=n.next(t);return t>=dv?1/0:t}function LG(n,t=100,e){const r=e({...n,keyframes:[0,t]}),i=Math.min(gA(r),dv);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:ra(i)}}const VG=5;function e8(n,t,e){const r=Math.max(t-VG,0);return P6(e-n(r),t-r)}const xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yw=.001;function BG({duration:n=xn.duration,bounce:t=xn.bounce,velocity:e=xn.velocity,mass:r=xn.mass}){let i,s,a=1-t;a=to(xn.minDamping,xn.maxDamping,a),n=to(xn.minDuration,xn.maxDuration,ra(n)),a<1?(i=h=>{const f=h*a,p=f*n,m=f-e,v=rb(h,a),x=Math.exp(-p);return yw-m/v*x},s=h=>{const p=h*a*n,m=p*e+e,v=Math.pow(a,2)*Math.pow(h,2)*n,x=Math.exp(-p),E=rb(Math.pow(h,2),a);return(-i(h)+yw>0?-1:1)*((m-v)*x)/E}):(i=h=>{const f=Math.exp(-h*n),p=(h-e)*n+1;return-yw+f*p},s=h=>{const f=Math.exp(-h*n),p=(e-h)*(n*n);return f*p});const o=5/n,l=UG(i,s,o);if(n=na(n),isNaN(l))return{stiffness:xn.stiffness,damping:xn.damping,duration:n};{const h=Math.pow(l,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const FG=12;function UG(n,t,e){let r=e;for(let i=1;i<FG;i++)r=r-n(r)/t(r);return r}function rb(n,t){return n*Math.sqrt(1-t*t)}const jG=["duration","bounce"],HG=["stiffness","damping","mass"];function AO(n,t){return t.some(e=>n[e]!==void 0)}function zG(n){let t={velocity:xn.velocity,stiffness:xn.stiffness,damping:xn.damping,mass:xn.mass,isResolvedFromDuration:!1,...n};if(!AO(n,HG)&&AO(n,jG))if(n.visualDuration){const e=n.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,s=2*to(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:xn.mass,stiffness:i,damping:s}}else{const e=BG(n);t={...t,...e,mass:xn.mass},t.isResolvedFromDuration=!0}return t}function pv(n=xn.visualDuration,t=xn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:i}=e;const s=e.keyframes[0],a=e.keyframes[e.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:h,mass:f,duration:p,velocity:m,isResolvedFromDuration:v}=zG({...e,velocity:-ra(e.velocity||0)}),x=m||0,E=h/(2*Math.sqrt(l*f)),b=a-s,T=ra(Math.sqrt(l/f)),S=Math.abs(b)<5;r||(r=S?xn.restSpeed.granular:xn.restSpeed.default),i||(i=S?xn.restDelta.granular:xn.restDelta.default);let D;if(E<1){const k=rb(T,E);D=U=>{const M=Math.exp(-E*T*U);return a-M*((x+E*T*b)/k*Math.sin(k*U)+b*Math.cos(k*U))}}else if(E===1)D=k=>a-Math.exp(-T*k)*(b+(x+T*b)*k);else{const k=T*Math.sqrt(E*E-1);D=U=>{const M=Math.exp(-E*T*U),I=Math.min(k*U,300);return a-M*((x+E*T*b)*Math.sinh(I)+k*b*Math.cosh(I))/k}}const P={calculatedDuration:v&&p||null,next:k=>{const U=D(k);if(v)o.done=k>=p;else{let M=k===0?x:0;E<1&&(M=k===0?na(x):e8(D,k,U));const I=Math.abs(M)<=r,N=Math.abs(a-U)<=i;o.done=I&&N}return o.value=o.done?a:U,o},toString:()=>{const k=Math.min(gA(P),dv),U=t8(M=>P.next(k*M).value,k,30);return k+"ms "+U},toTransition:()=>{}};return P}pv.applyToOptions=n=>{const t=LG(n,100,pv);return n.ease=t.ease,n.duration=na(t.duration),n.type="keyframes",n};function ib({keyframes:n,velocity:t=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:f}){const p=n[0],m={done:!1,value:p},v=I=>o!==void 0&&I<o||l!==void 0&&I>l,x=I=>o===void 0?l:l===void 0||Math.abs(o-I)<Math.abs(l-I)?o:l;let E=e*t;const b=p+E,T=a===void 0?b:a(b);T!==b&&(E=T-p);const S=I=>-E*Math.exp(-I/r),D=I=>T+S(I),P=I=>{const N=S(I),L=D(I);m.done=Math.abs(N)<=h,m.value=m.done?T:L};let k,U;const M=I=>{v(m.value)&&(k=I,U=pv({keyframes:[m.value,x(m.value)],velocity:e8(D,I,m.value),damping:i,stiffness:s,restDelta:h,restSpeed:f}))};return M(0),{calculatedDuration:null,next:I=>{let N=!1;return!U&&k===void 0&&(N=!0,P(I),M(I)),k!==void 0&&I>=k?U.next(I-k):(!N&&P(I),m)}}}function GG(n,t,e){const r=[],i=e||eo.mix||J6,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(t){const l=Array.isArray(t)?t[a]||ts:t;o=Hg(l,o)}r.push(o)}return r}function WG(n,t,{clamp:e=!0,ease:r,mixer:i}={}){const s=n.length;if(sA(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=GG(t,r,i),l=o.length,h=f=>{if(a&&f<n[0])return t[0];let p=0;if(l>1)for(;p<n.length-2&&!(f<n[p+1]);p++);const m=vg(n[p],n[p+1],f);return o[p](m)};return e?f=>h(to(n[0],n[s-1],f)):h}function $G(n,t){const e=n[n.length-1];for(let r=1;r<=t;r++){const i=vg(0,t,r);n.push(pn(e,1,i))}}function qG(n){const t=[0];return $G(t,n.length-1),t}function YG(n,t){return n.map(e=>e*t)}function KG(n,t){return n.map(()=>t||z6).splice(0,n.length-1)}function Gp({duration:n=300,keyframes:t,times:e,ease:r="easeInOut"}){const i=aG(r)?r.map(_O):_O(r),s={done:!1,value:t[0]},a=YG(e&&e.length===t.length?e:qG(t),n),o=WG(a,t,{ease:Array.isArray(i)?i:KG(t,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const XG=n=>n!==null;function mA(n,{repeat:t,repeatType:e="loop"},r,i=1){const s=n.filter(XG),o=i<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const QG={decay:ib,inertia:ib,tween:Gp,keyframes:Gp,spring:pv};function n8(n){typeof n.type=="string"&&(n.type=QG[n.type])}class vA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const ZG=n=>n/100;class yA extends vA{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:e}=this.options;e&&e.updatedAt!==hi.now()&&this.tick(hi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;n8(t);const{type:e=Gp,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=e||Gp;l!==Gp&&typeof o[0]!="number"&&(this.mixKeyframes=Hg(ZG,J6(o[0],o[1])),o=[0,100]);const h=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=gA(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:f,repeat:p,repeatType:m,repeatDelay:v,type:x,onUpdate:E,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let D=this.currentTime,P=r;if(p){const I=Math.min(this.currentTime,i)/o;let N=Math.floor(I),L=I%1;!L&&I>=1&&(L=1),L===1&&N--,N=Math.min(N,p+1),!!(N%2)&&(m==="reverse"?(L=1-L,v&&(L-=v/o)):m==="mirror"&&(P=a)),D=to(0,1,L)*o}const k=S?{done:!1,value:f[0]}:P.next(D);s&&(k.value=s(k.value));let{done:U}=k;!S&&l!==null&&(U=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return M&&x!==ib&&(k.value=mA(f,this.options,b,this.speed)),E&&E(k.value),M&&this.finish(),k}then(t,e){return this.finished.then(t,e)}get duration(){return ra(this.calculatedDuration)}get time(){return ra(this.currentTime)}set time(t){var e;t=na(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(hi.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ra(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=kG,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function JG(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const Ll=n=>n*180/Math.PI,sb=n=>{const t=Ll(Math.atan2(n[1],n[0]));return ab(t)},tW={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:sb,rotateZ:sb,skewX:n=>Ll(Math.atan(n[1])),skewY:n=>Ll(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ab=n=>(n=n%360,n<0&&(n+=360),n),TO=sb,SO=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),CO=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),eW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:SO,scaleY:CO,scale:n=>(SO(n)+CO(n))/2,rotateX:n=>ab(Ll(Math.atan2(n[6],n[5]))),rotateY:n=>ab(Ll(Math.atan2(-n[2],n[0]))),rotateZ:TO,rotate:TO,skewX:n=>Ll(Math.atan(n[4])),skewY:n=>Ll(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function ob(n){return n.includes("scale")?1:0}function cb(n,t){if(!n||n==="none")return ob(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=eW,i=e;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tW,i=o}if(!i)return ob(t);const s=r[t],a=i[1].split(",").map(rW);return typeof s=="function"?s(a):a[s]}const nW=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return cb(e,t)};function rW(n){return parseFloat(n.trim())}const Mf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Pf=new Set(Mf),IO=n=>n===Nf||n===Xt,iW=new Set(["x","y","z"]),sW=Mf.filter(n=>!iW.has(n));function aW(n){const t=[];return sW.forEach(e=>{const r=n.getValue(e);r!==void 0&&(t.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),t}const Gl={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>cb(t,"x"),y:(n,{transform:t})=>cb(t,"y")};Gl.translateX=Gl.x;Gl.translateY=Gl.y;const Wl=new Set;let lb=!1,ub=!1,hb=!1;function r8(){if(ub){const n=Array.from(Wl).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),e=new Map;t.forEach(r=>{const i=aW(r);i.length&&(e.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ub=!1,lb=!1,Wl.forEach(n=>n.complete(hb)),Wl.clear()}function i8(){Wl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ub=!0)})}function oW(){hb=!0,i8(),r8(),hb=!1}class _A{constructor(t,e,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Wl.add(this),lb||(lb=!0,ln.read(i8),ln.resolveKeyframes(r8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&e){const o=r.readValue(e,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}JG(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Wl.delete(this)}cancel(){this.state==="scheduled"&&(Wl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cW=n=>n.startsWith("--");function lW(n,t,e){cW(t)?n.style.setProperty(t,e):n.style[t]=e}const uW=aA(()=>window.ScrollTimeline!==void 0),hW={};function fW(n,t){const e=aA(n);return()=>hW[t]??e()}const s8=fW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sp=([n,t,e,r])=>`cubic-bezier(${n}, ${t}, ${e}, ${r})`,DO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sp([0,.65,.55,1]),circOut:Sp([.55,0,1,.45]),backIn:Sp([.31,.01,.66,-.59]),backOut:Sp([.33,1.53,.69,.99])};function a8(n,t){if(n)return typeof n=="function"?s8()?t8(n,t):"ease-out":G6(n)?Sp(n):Array.isArray(n)?n.map(e=>a8(e,t)||DO.easeOut):DO[n]}function dW(n,t,e,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h=void 0){const f={[t]:e};l&&(f.offset=l);const p=a8(o,i);Array.isArray(p)&&(f.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),n.animate(f,m)}function o8(n){return typeof n=="function"&&"applyToOptions"in n}function pW({type:n,...t}){return o8(n)&&s8()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class gW extends vA{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,sA(typeof t.type!="string");const h=pW(t);this.animation=dW(e,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=mA(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):lW(e,r,f),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,r;const t=((r=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:r.call(e).duration)||0;return ra(Number(t))}get time(){return ra(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=na(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&uW()?(this.animation.timeline=t,ts):e(this)}}const c8={anticipate:U6,backInOut:F6,circInOut:H6};function mW(n){return n in c8}function vW(n){typeof n.ease=="string"&&mW(n.ease)&&(n.ease=c8[n.ease])}const OO=10;class yW extends gW{constructor(t){vW(t),n8(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const o=new yA({...a,autoplay:!1}),l=na(this.finishedTime??this.time);e.setWithVelocity(o.sample(l-OO).value,o.sample(l).value,OO),o.stop()}}const RO=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(xc.test(n)||n==="0")&&!n.startsWith("url("));function _W(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function xW(n,t,e,r){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],a=RO(i,t),o=RO(s,t);return!a||!o?!1:_W(n)||(e==="spring"||o8(e))&&r}function fb(n){n.duration=0,n.type}const wW=new Set(["opacity","clipPath","filter","transform"]),EW=aA(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bW(n){var f;const{motionValue:t,name:e,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(((f=t==null?void 0:t.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=t.owner.getProps();return EW()&&e&&wW.has(e)&&(e!=="transform"||!h)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const AW=40;class TW extends vA{constructor({autoplay:t=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:h,element:f,...p}){var x;super(),this.stop=()=>{var E,b;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=hi.now();const m={autoplay:t,delay:e,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:h,element:f,...p},v=(f==null?void 0:f.KeyframeResolver)||_A;this.keyframeResolver=new v(o,(E,b,T)=>this.onKeyframesResolved(E,b,m,!T),l,h,f),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,e,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:h,onUpdate:f}=r;this.resolvedAt=hi.now(),xW(t,s,a,o)||((eo.instantAnimations||!l)&&(f==null||f(mA(t,r,e))),t[0]=t[t.length-1],fb(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>AW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:t},v=!h&&bW(m)?new yW({...m,element:m.motionValue.owner.current}):new yA(m);v.finished.then(()=>this.notifyFinished()).catch(ts),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),oW()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const SW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CW(n){const t=SW.exec(n);if(!t)return[,];const[,e,r,i]=t;return[`--${e??r}`,i]}function l8(n,t,e=1){const[r,i]=CW(n);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return R6(a)?parseFloat(a):a}return hA(i)?l8(i,t,e+1):i}function xA(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const u8=new Set(["width","height","top","left","right","bottom",...Mf]),IW={test:n=>n==="auto",parse:n=>n},h8=n=>t=>t.test(n),f8=[Nf,Xt,ia,Qo,_G,yG,IW],NO=n=>f8.find(h8(n));function DW(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||M6(n):!0}const OW=new Set(["brightness","contrast","saturate","opacity"]);function RW(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=e.match(fA)||[];if(!r)return n;const i=e.replace(r,"");let s=OW.has(t)?1:0;return r!==e&&(s*=100),t+"("+s+i+")"}const NW=/\b([a-z-]*)\(.*?\)/gu,db={...xc,getAnimatableNone:n=>{const t=n.match(NW);return t?t.map(RW).join(" "):n}},MO={...Nf,transform:Math.round},MW={rotate:Qo,rotateX:Qo,rotateY:Qo,rotateZ:Qo,scale:Zm,scaleX:Zm,scaleY:Zm,scaleZ:Zm,skew:Qo,skewX:Qo,skewY:Qo,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:yg,originX:xO,originY:xO,originZ:Xt},wA={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...MW,zIndex:MO,fillOpacity:yg,strokeOpacity:yg,numOctaves:MO},PW={...wA,color:jn,backgroundColor:jn,outlineColor:jn,fill:jn,stroke:jn,borderColor:jn,borderTopColor:jn,borderRightColor:jn,borderBottomColor:jn,borderLeftColor:jn,filter:db,WebkitFilter:db},d8=n=>PW[n];function p8(n,t){let e=d8(n);return e!==db&&(e=xc),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const kW=new Set(["auto","none","0"]);function LW(n,t,e){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!kW.has(s)&&_g(s).values.length&&(i=n[r]),r++}if(i&&e)for(const s of t)n[s]=p8(e,i)}class VW extends _A{constructor(t,e,r,i,s){super(t,e,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),hA(h))){const f=l8(h,e.current);f!==void 0&&(t[l]=f),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!u8.has(r)||t.length!==2)return;const[i,s]=t,a=NO(i),o=NO(s);if(a!==o)if(IO(a)&&IO(o))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else Gl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||DW(t[i]))&&r.push(i);r.length&&LW(t,r,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:e,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Gl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,h])=>{t.getValue(l).set(h)}),this.resolveNoneKeyframes()}}function BW(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(e==null?void 0:e[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const g8=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function FW(n){return N6(n)&&"offsetHeight"in n}const PO=30,UW=n=>!isNaN(parseFloat(n));class jW{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=hi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=hi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=UW(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new oA);const r=this.events[t].add(e);return t==="change"?()=>{r(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=hi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>PO)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,PO);return P6(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tf(n,t){return new jW(n,t)}const{schedule:EA}=W6(queueMicrotask,!1),gs={x:!1,y:!1};function m8(){return gs.x||gs.y}function HW(n){return n==="x"||n==="y"?gs[n]?null:(gs[n]=!0,()=>{gs[n]=!1}):gs.x||gs.y?null:(gs.x=gs.y=!0,()=>{gs.x=gs.y=!1})}function v8(n,t){const e=BW(n),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[e,i,()=>r.abort()]}function kO(n){return!(n.pointerType==="touch"||m8())}function zW(n,t,e={}){const[r,i,s]=v8(n,e),a=o=>{if(!kO(o))return;const{target:l}=o,h=t(l,o);if(typeof h!="function"||!l)return;const f=p=>{kO(p)&&(h(p),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const y8=(n,t)=>t?n===t?!0:y8(n,t.parentElement):!1,bA=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,GW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WW(n){return GW.has(n.tagName)||n.tabIndex!==-1}const N1=new WeakSet;function LO(n){return t=>{t.key==="Enter"&&n(t)}}function _w(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const $W=(n,t)=>{const e=n.currentTarget;if(!e)return;const r=LO(()=>{if(N1.has(e))return;_w(e,"down");const i=LO(()=>{_w(e,"up")}),s=()=>_w(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",r,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),t)};function VO(n){return bA(n)&&!m8()}function qW(n,t,e={}){const[r,i,s]=v8(n,e),a=o=>{const l=o.currentTarget;if(!VO(o))return;N1.add(l);const h=t(l,o),f=(v,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),N1.has(l)&&N1.delete(l),VO(v)&&typeof h=="function"&&h(v,{success:x})},p=v=>{f(v,l===window||l===document||e.useGlobalTarget||y8(l,v.target))},m=v=>{f(v,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(e.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),FW(o)&&(o.addEventListener("focus",h=>$W(h,i)),!WW(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function _8(n){return N6(n)&&"ownerSVGElement"in n}function YW(n){return _8(n)&&n.tagName==="svg"}const Vr=n=>!!(n&&n.getVelocity),KW=[...f8,jn,xc],XW=n=>KW.find(h8(n)),x8=rt.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function QW(n=!0){const t=rt.useContext(nA);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,s=rt.useId();rt.useEffect(()=>{if(n)return i(s)},[n]);const a=rt.useCallback(()=>n&&r&&r(s),[s,r,n]);return!e&&r?[!1,a]:[!0]}const w8=rt.createContext({strict:!1}),BO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ef={};for(const n in BO)ef[n]={isEnabled:t=>BO[n].some(e=>!!t[e])};function ZW(n){for(const t in n)ef[t]={...ef[t],...n[t]}}const JW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||JW.has(n)}let E8=n=>!gv(n);function t$(n){typeof n=="function"&&(E8=t=>t.startsWith("on")?!gv(t):n(t))}try{t$(require("@emotion/is-prop-valid").default)}catch{}function e$(n,t,e){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(E8(i)||e===!0&&gv(i)||!t&&!gv(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const sy=rt.createContext({});function ay(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function xg(n){return typeof n=="string"||Array.isArray(n)}const AA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],TA=["initial",...AA];function oy(n){return ay(n.animate)||TA.some(t=>xg(n[t]))}function b8(n){return!!(oy(n)||n.variants)}function n$(n,t){if(oy(n)){const{initial:e,animate:r}=n;return{initial:e===!1||xg(e)?e:void 0,animate:xg(r)?r:void 0}}return n.inherit!==!1?t:{}}function r$(n){const{initial:t,animate:e}=n$(n,rt.useContext(sy));return rt.useMemo(()=>({initial:t,animate:e}),[FO(t),FO(e)])}function FO(n){return Array.isArray(n)?n.join(" "):n}const wg={};function i$(n){for(const t in n)wg[t]=n[t],uA(t)&&(wg[t].isCSSVariable=!0)}function A8(n,{layout:t,layoutId:e}){return Pf.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!wg[n]||n==="opacity")}const s$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},a$=Mf.length;function o$(n,t,e){let r="",i=!0;for(let s=0;s<a$;s++){const a=Mf[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||e){const h=g8(o,wA[a]);if(!l){i=!1;const f=s$[a]||a;r+=`${f}(${h}) `}e&&(t[a]=h)}}return r=r.trim(),e?r=e(t,i?"":r):i&&(r="none"),r}function SA(n,t,e){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in t){const h=t[l];if(Pf.has(l)){a=!0;continue}else if(uA(l)){i[l]=h;continue}else{const f=g8(h,wA[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(t.transform||(a||e?r.transform=o$(t,n.transform,e):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${h} ${f}`}}const CA=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function T8(n,t,e){for(const r in t)!Vr(t[r])&&!A8(r,e)&&(n[r]=t[r])}function c$({transformTemplate:n},t){return rt.useMemo(()=>{const e=CA();return SA(e,t,n),Object.assign({},e.vars,e.style)},[t])}function l$(n,t){const e=n.style||{},r={};return T8(r,e,n),Object.assign(r,c$(n,t)),r}function u$(n,t){const e={},r=l$(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=r,e}const h$={offset:"stroke-dashoffset",array:"stroke-dasharray"},f$={offset:"strokeDashoffset",array:"strokeDasharray"};function d$(n,t,e=1,r=0,i=!0){n.pathLength=1;const s=i?h$:f$;n[s.offset]=Xt.transform(-r);const a=Xt.transform(t),o=Xt.transform(e);n[s.array]=`${a} ${o}`}function S8(n,{attrX:t,attrY:e,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,h,f){if(SA(n,o,h),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m}=n;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),e!==void 0&&(p.y=e),r!==void 0&&(p.scale=r),i!==void 0&&d$(p,i,s,a,!1)}const C8=()=>({...CA(),attrs:{}}),I8=n=>typeof n=="string"&&n.toLowerCase()==="svg";function p$(n,t,e,r){const i=rt.useMemo(()=>{const s=C8();return S8(s,t,I8(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};T8(s,n.style,n),i.style={...s,...i.style}}return i}const g$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function IA(n){return typeof n!="string"||n.includes("-")?!1:!!(g$.indexOf(n)>-1||/[A-Z]/u.test(n))}function m$(n,t,e,{latestValues:r},i,s=!1){const o=(IA(n)?p$:u$)(t,r,i,n),l=e$(t,typeof n=="string",s),h=n!==rt.Fragment?{...l,...o,ref:e}:{},{children:f}=t,p=rt.useMemo(()=>Vr(f)?f.get():f,[f]);return rt.createElement(n,{...h,children:p})}function UO(n){const t=[{},{}];return n==null||n.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function DA(n,t,e,r){if(typeof t=="function"){const[i,s]=UO(r);t=t(e!==void 0?e:n.custom,i,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,s]=UO(r);t=t(e!==void 0?e:n.custom,i,s)}return t}function M1(n){return Vr(n)?n.get():n}function v$({scrapeMotionValuesFromProps:n,createRenderState:t},e,r,i){return{latestValues:y$(e,r,i,n),renderState:t()}}function y$(n,t,e,r){const i={},s=r(n,{});for(const m in s)i[m]=M1(s[m]);let{initial:a,animate:o}=n;const l=oy(n),h=b8(n);t&&h&&!l&&n.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let f=e?e.initial===!1:!1;f=f||a===!1;const p=f?o:a;if(p&&typeof p!="boolean"&&!ay(p)){const m=Array.isArray(p)?p:[p];for(let v=0;v<m.length;v++){const x=DA(n,m[v]);if(x){const{transitionEnd:E,transition:b,...T}=x;for(const S in T){let D=T[S];if(Array.isArray(D)){const P=f?D.length-1:0;D=D[P]}D!==null&&(i[S]=D)}for(const S in E)i[S]=E[S]}}}return i}const D8=n=>(t,e)=>{const r=rt.useContext(sy),i=rt.useContext(nA),s=()=>v$(n,t,r,i);return e?s():Zz(s)};function OA(n,t,e){var s;const{style:r}=n,i={};for(const a in r)(Vr(r[a])||t.style&&Vr(t.style[a])||A8(a,n)||((s=e==null?void 0:e.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const _$=D8({scrapeMotionValuesFromProps:OA,createRenderState:CA});function O8(n,t,e){const r=OA(n,t,e);for(const i in n)if(Vr(n[i])||Vr(t[i])){const s=Mf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const x$=D8({scrapeMotionValuesFromProps:O8,createRenderState:C8}),w$=Symbol.for("motionComponentSymbol");function Bh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function E$(n,t,e){return rt.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),e&&(typeof e=="function"?e(r):Bh(e)&&(e.current=r))},[t])}const RA=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),b$="framerAppearId",R8="data-"+RA(b$),N8=rt.createContext({});function A$(n,t,e,r,i){var E,b;const{visualElement:s}=rt.useContext(sy),a=rt.useContext(w8),o=rt.useContext(nA),l=rt.useContext(x8).reducedMotion,h=rt.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(n,{visualState:t,parent:s,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const f=h.current,p=rt.useContext(N8);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&T$(h.current,e,i,p);const m=rt.useRef(!1);rt.useInsertionEffect(()=>{f&&m.current&&f.update(e,o)});const v=e[R8],x=rt.useRef(!!v&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,v))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,v)));return Jz(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),x.current&&f.animationState&&f.animationState.animateChanges())}),rt.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,v)}),x.current=!1))}),f}function T$(n,t,e,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:f}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:M8(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Bh(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:l,layoutRoot:h})}function M8(n){if(n)return n.options.allowProjection!==!1?n.projection:M8(n.parent)}function xw(n,{forwardMotionProps:t=!1}={},e,r){e&&ZW(e);const i=IA(n)?x$:_$;function s(o,l){let h;const f={...rt.useContext(x8),...o,layoutId:S$(o)},{isStatic:p}=f,m=r$(o),v=i(o,p);if(!p&&eA){C$();const x=I$(f);h=x.MeasureLayout,m.visualElement=A$(n,v,f,r,x.ProjectionNode)}return C.jsxs(sy.Provider,{value:m,children:[h&&m.visualElement?C.jsx(h,{visualElement:m.visualElement,...f}):null,m$(n,o,E$(v,m.visualElement,l),v,p,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=rt.forwardRef(s);return a[w$]=n,a}function S$({layoutId:n}){const t=rt.useContext(O6).id;return t&&n!==void 0?t+"-"+n:n}function C$(n,t){rt.useContext(w8).strict}function I$(n){const{drag:t,layout:e}=ef;if(!t&&!e)return{};const r={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function D$(n,t){if(typeof Proxy>"u")return xw;const e=new Map,r=(s,a)=>xw(s,a,n,t),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(e.has(a)||e.set(a,xw(a,void 0,n,t)),e.get(a))})}function P8({top:n,left:t,right:e,bottom:r}){return{x:{min:t,max:e},y:{min:n,max:r}}}function O$({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function R$(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function ww(n){return n===void 0||n===1}function pb({scale:n,scaleX:t,scaleY:e}){return!ww(n)||!ww(t)||!ww(e)}function bl(n){return pb(n)||k8(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function k8(n){return jO(n.x)||jO(n.y)}function jO(n){return n&&n!=="0%"}function mv(n,t,e){const r=n-e,i=t*r;return e+i}function HO(n,t,e,r,i){return i!==void 0&&(n=mv(n,i,r)),mv(n,e,r)+t}function gb(n,t=0,e=1,r,i){n.min=HO(n.min,t,e,r,i),n.max=HO(n.max,t,e,r,i)}function L8(n,{x:t,y:e}){gb(n.x,t.translate,t.scale,t.originPoint),gb(n.y,e.translate,e.scale,e.originPoint)}const zO=.999999999999,GO=1.0000000000001;function N$(n,t,e,r=!1){const i=e.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=e[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Uh(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,L8(n,a)),r&&bl(s.latestValues)&&Uh(n,s.latestValues))}t.x<GO&&t.x>zO&&(t.x=1),t.y<GO&&t.y>zO&&(t.y=1)}function Fh(n,t){n.min=n.min+t,n.max=n.max+t}function WO(n,t,e,r,i=.5){const s=pn(n.min,n.max,i);gb(n,t,e,s,r)}function Uh(n,t){WO(n.x,t.x,t.scaleX,t.scale,t.originX),WO(n.y,t.y,t.scaleY,t.scale,t.originY)}function V8(n,t){return P8(R$(n.getBoundingClientRect(),t))}function M$(n,t,e){const r=V8(n,e),{scroll:i}=t;return i&&(Fh(r.x,i.offset.x),Fh(r.y,i.offset.y)),r}const $O=()=>({translate:0,scale:1,origin:0,originPoint:0}),jh=()=>({x:$O(),y:$O()}),qO=()=>({min:0,max:0}),In=()=>({x:qO(),y:qO()}),mb={current:null},B8={current:!1};function P$(){if(B8.current=!0,!!eA)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>mb.current=n.matches;n.addEventListener("change",t),t()}else mb.current=!1}const k$=new WeakMap;function L$(n,t,e){for(const r in t){const i=t[r],s=e[r];if(Vr(i))n.addValue(r,i);else if(Vr(s))n.addValue(r,tf(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,tf(a!==void 0?a:i,{owner:n}))}}for(const r in e)t[r]===void 0&&n.removeValue(r);return t}const YO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class V${scrapeMotionValuesFromProps(t,e,r){return{}}constructor({parent:t,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_A,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=hi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ln.render(this.render,!1,!0))};const{latestValues:l,renderState:h}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=oy(e),this.isVariantNode=b8(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in p){const v=p[m];l[m]!==void 0&&Vr(v)&&v.set(l[m])}}mount(t){this.current=t,k$.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),B8.current||P$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_c(this.notifyUpdate),_c(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Pf.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ln.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ef){const e=ef[t];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):In()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<YO.length;r++){const i=YO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=L$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const r=this.values.get(t);e!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&e!==void 0&&(r=tf(e===null?void 0:e,{owner:this}),this.addValue(t,r)),r}readValue(t,e){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(R6(r)||M6(r))?r=parseFloat(r):!XW(r)&&xc.test(e)&&(r=p8(t,e)),this.setBaseTarget(t,Vr(r)?r.get():r)),Vr(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var s;const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=DA(this.props,e,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Vr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new oA),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){EA.render(this.render)}}class F8 extends V${constructor(){super(...arguments),this.KeyframeResolver=VW}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:r}){delete e[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Vr(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function U8(n,{style:t,vars:e},r,i){const s=n.style;let a;for(a in t)s[a]=t[a];i==null||i.applyProjectionStyles(s,r);for(a in e)s.setProperty(a,e[a])}function B$(n){return window.getComputedStyle(n)}class F$ extends F8{constructor(){super(...arguments),this.type="html",this.renderInstance=U8}readValueFromInstance(t,e){var r;if(Pf.has(e))return(r=this.projection)!=null&&r.isProjecting?ob(e):nW(t,e);{const i=B$(t),s=(uA(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return V8(t,e)}build(t,e,r){SA(t,e,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,r){return OA(t,e,r)}}const j8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function U$(n,t,e,r){U8(n,t,void 0,r);for(const i in t.attrs)n.setAttribute(j8.has(i)?i:RA(i),t.attrs[i])}class j$ extends F8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=In}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Pf.has(e)){const r=d8(e);return r&&r.default||0}return e=j8.has(e)?e:RA(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,r){return O8(t,e,r)}build(t,e,r){S8(t,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,e,r,i){U$(t,e,r,i)}mount(t){this.isSVGTag=I8(t.tagName),super.mount(t)}}const H$=(n,t)=>IA(n)?new j$(t):new F$(t,{allowProjection:n!==rt.Fragment});function Eg(n,t,e){const r=n.getProps();return DA(r,t,e!==void 0?e:r.custom,n)}const vb=n=>Array.isArray(n);function z$(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,tf(e))}function G$(n){return vb(n)?n[n.length-1]||0:n}function W$(n,t){const e=Eg(n,t);let{transitionEnd:r={},transition:i={},...s}=e||{};s={...s,...r};for(const a in s){const o=G$(s[a]);z$(n,a,o)}}function $$(n){return!!(Vr(n)&&n.add)}function yb(n,t){const e=n.getValue("willChange");if($$(e))return e.add(t);if(!e&&eo.WillChange){const r=new eo.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function H8(n){return n.props[R8]}const q$=n=>n!==null;function Y$(n,{repeat:t,repeatType:e="loop"},r){const i=n.filter(q$),s=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[s]}const K$={type:"spring",stiffness:500,damping:25,restSpeed:10},X$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Q$={type:"keyframes",duration:.8},Z$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J$=(n,{keyframes:t})=>t.length>2?Q$:Pf.has(n)?n.startsWith("scale")?X$(t[1]):K$:Z$;function tq({when:n,delay:t,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...f}){return!!Object.keys(f).length}const NA=(n,t,e,r={},i,s)=>a=>{const o=xA(r,n)||{},l=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-na(l);const f={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:t,element:s?void 0:i};tq(o)||Object.assign(f,J$(n,f)),f.duration&&(f.duration=na(f.duration)),f.repeatDelay&&(f.repeatDelay=na(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(fb(f),f.delay===0&&(p=!0)),(eo.instantAnimations||eo.skipAnimations)&&(p=!0,fb(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,p&&!s&&t.get()!==void 0){const m=Y$(f.keyframes,o);if(m!==void 0){ln.update(()=>{f.onUpdate(m),f.onComplete()});return}}return o.isSync?new yA(f):new TW(f)};function eq({protectedKeys:n,needsAnimating:t},e){const r=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,r}function z8(n,t,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in o){const p=n.getValue(f,n.latestValues[f]??null),m=o[f];if(m===void 0||h&&eq(h,f))continue;const v={delay:e,...xA(s||{},f)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===x&&!v.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const T=H8(n);if(T){const S=window.MotionHandoffAnimation(T,f,ln);S!==null&&(v.startTime=S,E=!0)}}yb(n,f),p.start(NA(f,p,m,n.shouldReduceMotion&&u8.has(f)?{type:!1}:v,n,E));const b=p.animation;b&&l.push(b)}return a&&Promise.all(l).then(()=>{ln.update(()=>{a&&W$(n,a)})}),l}function _b(n,t,e={}){var l;const r=Eg(n,t,e.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const s=r?()=>Promise.all(z8(n,r,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=i;return nq(n,t,h,f,p,m,e)}:()=>Promise.resolve(),{when:o}=i;if(o){const[h,f]=o==="beforeChildren"?[s,a]:[a,s];return h().then(()=>f())}else return Promise.all([s(),a(e.delay)])}function nq(n,t,e=0,r=0,i=0,s=1,a){const o=[],l=n.variantChildren.size,h=(l-1)*i,f=typeof r=="function",p=f?m=>r(m,l):s===1?(m=0)=>m*i:(m=0)=>h-m*i;return Array.from(n.variantChildren).sort(rq).forEach((m,v)=>{m.notify("AnimationStart",t),o.push(_b(m,t,{...a,delay:e+(f?0:r)+p(v)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(o)}function rq(n,t){return n.sortNodePosition(t)}function iq(n,t,e={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>_b(n,s,e));r=Promise.all(i)}else if(typeof t=="string")r=_b(n,t,e);else{const i=typeof t=="function"?Eg(n,t,e.custom):t;r=Promise.all(z8(n,i,e))}return r.then(()=>{n.notify("AnimationComplete",t)})}function G8(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}const sq=TA.length;function W8(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?W8(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<sq;e++){const r=TA[e],i=n.props[r];(xg(i)||i===!1)&&(t[r]=i)}return t}const aq=[...AA].reverse(),oq=AA.length;function cq(n){return t=>Promise.all(t.map(({animation:e,options:r})=>iq(n,e,r)))}function lq(n){let t=cq(n),e=KO(),r=!0;const i=l=>(h,f)=>{var m;const p=Eg(n,f,l==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:v,transitionEnd:x,...E}=p;h={...h,...E,...x}}return h};function s(l){t=l(n)}function a(l){const{props:h}=n,f=W8(n.parent)||{},p=[],m=new Set;let v={},x=1/0;for(let b=0;b<oq;b++){const T=aq[b],S=e[T],D=h[T]!==void 0?h[T]:f[T],P=xg(D),k=T===l?S.isActive:null;k===!1&&(x=b);let U=D===f[T]&&D!==h[T]&&P;if(U&&r&&n.manuallyAnimateOnMount&&(U=!1),S.protectedKeys={...v},!S.isActive&&k===null||!D&&!S.prevProp||ay(D)||typeof D=="boolean")continue;const M=uq(S.prevProp,D);let I=M||T===l&&S.isActive&&!U&&P||b>x&&P,N=!1;const L=Array.isArray(D)?D:[D];let j=L.reduce(i(T),{});k===!1&&(j={});const{prevResolvedValues:z={}}=S,B={...z,...j},yt=at=>{I=!0,m.has(at)&&(N=!0,m.delete(at)),S.needsAnimating[at]=!0;const vt=n.getValue(at);vt&&(vt.liveStyle=!1)};for(const at in B){const vt=j[at],Z=z[at];if(v.hasOwnProperty(at))continue;let F=!1;vb(vt)&&vb(Z)?F=!G8(vt,Z):F=vt!==Z,F?vt!=null?yt(at):m.add(at):vt!==void 0&&m.has(at)?yt(at):S.protectedKeys[at]=!0}S.prevProp=D,S.prevResolvedValues=j,S.isActive&&(v={...v,...j}),r&&n.blockInitialAnimation&&(I=!1),I&&(!(U&&M)||N)&&p.push(...L.map(at=>({animation:at,options:{type:T}})))}if(m.size){const b={};if(typeof h.initial!="boolean"){const T=Eg(n,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(b.transition=T.transition)}m.forEach(T=>{const S=n.getBaseTarget(T),D=n.getValue(T);D&&(D.liveStyle=!0),b[T]=S??null}),p.push({animation:b})}let E=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?t(p):Promise.resolve()}function o(l,h){var p;if(e[l].isActive===h)return Promise.resolve();(p=n.variantChildren)==null||p.forEach(m=>{var v;return(v=m.animationState)==null?void 0:v.setActive(l,h)}),e[l].isActive=h;const f=a(l);for(const m in e)e[m].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>e,reset:()=>{e=KO(),r=!0}}}function uq(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!G8(t,n):!1}function vl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KO(){return{animate:vl(!0),whileInView:vl(),whileHover:vl(),whileTap:vl(),whileDrag:vl(),whileFocus:vl(),exit:vl()}}class Oc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class hq extends Oc{constructor(t){super(t),t.animationState||(t.animationState=lq(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ay(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let fq=0;class dq extends Oc{constructor(){super(...arguments),this.id=fq++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const pq={animation:{Feature:hq},exit:{Feature:dq}};function bg(n,t,e,r={passive:!0}){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e)}function Wg(n){return{point:{x:n.pageX,y:n.pageY}}}const gq=n=>t=>bA(t)&&n(t,Wg(t));function Wp(n,t,e,r){return bg(n,t,gq(e),r)}const $8=1e-4,mq=1-$8,vq=1+$8,q8=.01,yq=0-q8,_q=0+q8;function Kr(n){return n.max-n.min}function xq(n,t,e){return Math.abs(n-t)<=e}function XO(n,t,e,r=.5){n.origin=r,n.originPoint=pn(t.min,t.max,n.origin),n.scale=Kr(e)/Kr(t),n.translate=pn(e.min,e.max,n.origin)-n.originPoint,(n.scale>=mq&&n.scale<=vq||isNaN(n.scale))&&(n.scale=1),(n.translate>=yq&&n.translate<=_q||isNaN(n.translate))&&(n.translate=0)}function $p(n,t,e,r){XO(n.x,t.x,e.x,r?r.originX:void 0),XO(n.y,t.y,e.y,r?r.originY:void 0)}function QO(n,t,e){n.min=e.min+t.min,n.max=n.min+Kr(t)}function wq(n,t,e){QO(n.x,t.x,e.x),QO(n.y,t.y,e.y)}function ZO(n,t,e){n.min=t.min-e.min,n.max=n.min+Kr(t)}function qp(n,t,e){ZO(n.x,t.x,e.x),ZO(n.y,t.y,e.y)}function Ki(n){return[n("x"),n("y")]}const Y8=({current:n})=>n?n.ownerDocument.defaultView:null,JO=(n,t)=>Math.abs(n-t);function Eq(n,t){const e=JO(n.x,t.x),r=JO(n.y,t.y);return Math.sqrt(e**2+r**2)}class K8{constructor(t,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=bw(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,x=Eq(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!x)return;const{point:E}=m,{timestamp:b}=Tr;this.history.push({...E,timestamp:b});const{onStart:T,onMove:S}=this.handlers;v||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Ew(v,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:x,onSessionEnd:E,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=bw(m.type==="pointercancel"?this.lastMoveEventInfo:Ew(v,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,T),E&&E(m,T)},!bA(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=Wg(t),l=Ew(o,this.transformPagePoint),{point:h}=l,{timestamp:f}=Tr;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=e;p&&p(t,bw(l,this.history)),this.removeListeners=Hg(Wp(this.contextWindow,"pointermove",this.handlePointerMove),Wp(this.contextWindow,"pointerup",this.handlePointerUp),Wp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_c(this.updatePoint)}}function Ew(n,t){return t?{point:t(n.point)}:n}function tR(n,t){return{x:n.x-t.x,y:n.y-t.y}}function bw({point:n},t){return{point:n,delta:tR(n,X8(t)),offset:tR(n,bq(t)),velocity:Aq(t,.1)}}function bq(n){return n[0]}function X8(n){return n[n.length-1]}function Aq(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,r=null;const i=X8(n);for(;e>=0&&(r=n[e],!(i.timestamp-r.timestamp>na(t)));)e--;if(!r)return{x:0,y:0};const s=ra(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Tq(n,{min:t,max:e},r){return t!==void 0&&n<t?n=r?pn(t,n,r.min):Math.max(n,t):e!==void 0&&n>e&&(n=r?pn(e,n,r.max):Math.min(n,e)),n}function eR(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function Sq(n,{top:t,left:e,bottom:r,right:i}){return{x:eR(n.x,e,i),y:eR(n.y,t,r)}}function nR(n,t){let e=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,r]=[r,e]),{min:e,max:r}}function Cq(n,t){return{x:nR(n.x,t.x),y:nR(n.y,t.y)}}function Iq(n,t){let e=.5;const r=Kr(n),i=Kr(t);return i>r?e=vg(t.min,t.max-r,n.min):r>i&&(e=vg(n.min,n.max-i,t.min)),to(0,1,e)}function Dq(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const xb=.35;function Oq(n=xb){return n===!1?n=0:n===!0&&(n=xb),{x:rR(n,"left","right"),y:rR(n,"top","bottom")}}function rR(n,t,e){return{min:iR(n,t),max:iR(n,e)}}function iR(n,t){return typeof n=="number"?n:n[t]||0}const Rq=new WeakMap;class Nq{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=In(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Wg(p).point)},a=(p,m)=>{const{drag:v,dragPropagation:x,onDragStart:E}=this.getProps();if(v&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HW(v),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ki(T=>{let S=this.getAxisMotionValue(T).get()||0;if(ia.test(S)){const{projection:D}=this.visualElement;if(D&&D.layout){const P=D.layout.layoutBox[T];P&&(S=Kr(P)*(parseFloat(S)/100))}}this.originPoint[T]=S}),E&&ln.postRender(()=>E(p,m)),yb(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:x,onDirectionLock:E,onDrag:b}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:T}=m;if(x&&this.currentDirection===null){this.currentDirection=Mq(T),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),b&&b(p,m)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ki(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new K8(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:Y8(this.visualElement)})}stop(t,e){const r=t||this.latestPointerEvent,i=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&ln.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,r){const{drag:i}=this.getProps();if(!r||!Jm(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=Tq(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Bh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Sq(r.layoutBox,t):this.constraints=!1,this.elastic=Oq(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ki(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Dq(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Bh(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=M$(r,i.root,this.visualElement.getTransformPagePoint());let a=Cq(i.layout.layoutBox,s);if(e){const o=e(O$(a));this.hasMutatedConstraints=!!o,o&&(a=P8(o))}return a}startAnimation(t){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},h=Ki(f=>{if(!Jm(f,e,this.currentDirection))return;let p=l&&l[f]||{};a&&(p={min:0,max:0});const m=i?200:1e6,v=i?40:1e7,x={type:"inertia",velocity:r?t[f]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(f,x)});return Promise.all(h).then(o)}startAxisValueAnimation(t,e){const r=this.getAxisMotionValue(t);return yb(this.visualElement,t),r.start(NA(t,r,0,e,this.visualElement,!1))}stopAnimation(){Ki(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ki(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ki(e=>{const{drag:r}=this.getProps();if(!Jm(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(e);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[e];s.set(t[e]-pn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!Bh(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ki(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Iq({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ki(a=>{if(!Jm(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:h}=this.constraints[a];o.set(pn(l,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;Rq.set(this.visualElement,this);const t=this.visualElement.current,e=Wp(t,"pointerdown",l=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Bh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ln.read(r);const a=bg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ki(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=l[f].translate,p.set(p.get()+l[f].translate))}),this.visualElement.render())});return()=>{a(),e(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=xb,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Jm(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function Mq(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class Pq extends Oc{constructor(t){super(t),this.removeGroupControls=ts,this.removeListeners=ts,this.controls=new Nq(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ts}unmount(){this.removeGroupControls(),this.removeListeners()}}const sR=n=>(t,e)=>{n&&ln.postRender(()=>n(t,e))};class kq extends Oc{constructor(){super(...arguments),this.removePointerDownListener=ts}onPointerDown(t){this.session=new K8(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Y8(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:sR(t),onStart:sR(e),onMove:r,onEnd:(s,a)=>{delete this.session,i&&ln.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Wp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const P1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aR(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const ap={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Xt.test(n))n=parseFloat(n);else return n;const e=aR(n,t.target.x),r=aR(n,t.target.y);return`${e}% ${r}%`}},Lq={correct:(n,{treeScale:t,projectionDelta:e})=>{const r=n,i=xc.parse(n);if(i.length>5)return r;const s=xc.createTransformer(n),a=typeof i[0]!="number"?1:0,o=e.x.scale*t.x,l=e.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const h=pn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};let oR=!1;class Vq extends rt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;i$(Bq),s&&(e.group&&e.group.add(s),r&&r.register&&i&&r.register(s),oR&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),P1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,oR=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||ln.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),EA.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Q8(n){const[t,e]=QW(),r=rt.useContext(O6);return C.jsx(Vq,{...n,layoutGroup:r,switchLayoutGroup:rt.useContext(N8),isPresent:t,safeToRemove:e})}const Bq={borderRadius:{...ap,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ap,borderTopRightRadius:ap,borderBottomLeftRadius:ap,borderBottomRightRadius:ap,boxShadow:Lq};function Fq(n,t,e){const r=Vr(n)?n:tf(n);return r.start(NA("",r,t,e)),r.animation}const Uq=(n,t)=>n.depth-t.depth;class jq{constructor(){this.children=[],this.isDirty=!1}add(t){rA(this.children,t),this.isDirty=!0}remove(t){iA(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Uq),this.isDirty=!1,this.children.forEach(t)}}function Hq(n,t){const e=hi.now(),r=({timestamp:i})=>{const s=i-e;s>=t&&(_c(r),n(s-t))};return ln.setup(r,!0),()=>_c(r)}const Z8=["TopLeft","TopRight","BottomLeft","BottomRight"],zq=Z8.length,cR=n=>typeof n=="string"?parseFloat(n):n,lR=n=>typeof n=="number"||Xt.test(n);function Gq(n,t,e,r,i,s){i?(n.opacity=pn(0,e.opacity??1,Wq(r)),n.opacityExit=pn(t.opacity??1,0,$q(r))):s&&(n.opacity=pn(t.opacity??1,e.opacity??1,r));for(let a=0;a<zq;a++){const o=`border${Z8[a]}Radius`;let l=uR(t,o),h=uR(e,o);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||lR(l)===lR(h)?(n[o]=Math.max(pn(cR(l),cR(h),r),0),(ia.test(h)||ia.test(l))&&(n[o]+="%")):n[o]=h}(t.rotate||e.rotate)&&(n.rotate=pn(t.rotate||0,e.rotate||0,r))}function uR(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const Wq=J8(0,.5,j6),$q=J8(.5,.95,ts);function J8(n,t,e){return r=>r<n?0:r>t?1:e(vg(n,t,r))}function hR(n,t){n.min=t.min,n.max=t.max}function Yi(n,t){hR(n.x,t.x),hR(n.y,t.y)}function fR(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function dR(n,t,e,r,i){return n-=t,n=mv(n,1/e,r),i!==void 0&&(n=mv(n,1/i,r)),n}function qq(n,t=0,e=1,r=.5,i,s=n,a=n){if(ia.test(t)&&(t=parseFloat(t),t=pn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=pn(s.min,s.max,r);n===s&&(o-=t),n.min=dR(n.min,t,e,o,i),n.max=dR(n.max,t,e,o,i)}function pR(n,t,[e,r,i],s,a){qq(n,t[e],t[r],t[i],t.scale,s,a)}const Yq=["x","scaleX","originX"],Kq=["y","scaleY","originY"];function gR(n,t,e,r){pR(n.x,t,Yq,e?e.x:void 0,r?r.x:void 0),pR(n.y,t,Kq,e?e.y:void 0,r?r.y:void 0)}function mR(n){return n.translate===0&&n.scale===1}function tk(n){return mR(n.x)&&mR(n.y)}function vR(n,t){return n.min===t.min&&n.max===t.max}function Xq(n,t){return vR(n.x,t.x)&&vR(n.y,t.y)}function yR(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function ek(n,t){return yR(n.x,t.x)&&yR(n.y,t.y)}function _R(n){return Kr(n.x)/Kr(n.y)}function xR(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class Qq{constructor(){this.members=[]}add(t){rA(this.members,t),t.scheduleRender()}remove(t){if(iA(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,e){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:r}=t;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zq(n,t,e){let r="";const i=n.x.translate/t.x,s=n.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:m,skewX:v,skewY:x}=e;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),v&&(r+=`skewX(${v}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=n.x.scale*t.x,l=n.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Aw=["","X","Y","Z"],Jq=1e3;let tY=0;function Tw(n,t,e,r){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),r&&(r[n]=0))}function nk(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=H8(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",ln,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&nk(r)}function rk({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=tY++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rY),this.nodes.forEach(oY),this.nodes.forEach(cY),this.nodes.forEach(iY)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new jq)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oA),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=_8(a)&&!YW(a),this.instance=a;const{layoutId:o,layout:l,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let f,p=0;const m=()=>this.root.updateBlockedByResize=!1;ln.read(()=>{p=window.innerWidth}),n(a,()=>{const v=window.innerWidth;v!==p&&(p=v,this.root.updateBlockedByResize=!0,f&&f(),f=Hq(m,250),P1.hasAnimatedSinceResize&&(P1.hasAnimatedSinceResize=!1,this.nodes.forEach(bR)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||dY,{onLayoutAnimationStart:E,onLayoutAnimationComplete:b}=h.getProps(),T=!this.targetLayout||!ek(this.targetLayout,v),S=!p&&m;if(this.options.layoutRoot||this.resumeFrom||S||p&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...xA(x,"layout"),onPlay:E,onComplete:b};(h.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(f,S)}else p||bR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_c(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lY),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ER);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(aY),this.nodes.forEach(eY),this.nodes.forEach(nY)):this.nodes.forEach(ER),this.clearAllSnapshots();const o=hi.now();Tr.delta=to(0,1e3/60,o-Tr.timestamp),Tr.timestamp=o,Tr.isProcessing=!0,pw.update.process(Tr),pw.preRender.process(Tr),pw.render.process(Tr),Tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,EA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sY),this.sharedNodes.forEach(uY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Kr(this.snapshot.measuredBox.x)&&!Kr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=In(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!tk(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&this.instance&&(o||bl(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),pY(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return In();const o=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(gY))){const{scroll:f}=this.root;f&&(Fh(o.x,f.offset.x),Fh(o.y,f.offset.y))}return o}removeElementScroll(a){var l;const o=In();if(Yi(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Yi(o,a),Fh(o.x,p.offset.x),Fh(o.y,p.offset.y))}return o}applyTransform(a,o=!1){const l=In();Yi(l,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Uh(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),bl(f.latestValues)&&Uh(l,f.latestValues)}return bl(this.latestValues)&&Uh(l,this.latestValues),l}removeTransform(a){const o=In();Yi(o,a);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!bl(h.latestValues))continue;pb(h.latestValues)&&h.updateSnapshot();const f=In(),p=h.measurePageBox();Yi(f,p),gR(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return bl(this.latestValues)&&gR(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Tr.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),qp(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=In(),this.targetWithTransforms=In()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yi(this.target,this.layout.layoutBox),L8(this.target,this.targetDelta)):Yi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),qp(this.relativeTargetOrigin,this.target,v.target),Yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pb(this.parent.latestValues)||k8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Tr.timestamp&&(l=!1),l)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Yi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;N$(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=In());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fR(this.prevProjectionDelta.x,this.projectionDelta.x),fR(this.prevProjectionDelta.y,this.projectionDelta.y)),$p(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!xR(this.projectionDelta.x,this.prevProjectionDelta.x)||!xR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jh(),this.projectionDelta=jh(),this.projectionDeltaWithTransform=jh()}setAnimationOrigin(a,o=!1){const l=this.snapshot,h=l?l.latestValues:{},f={...this.latestValues},p=jh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=In(),v=l?l.source:void 0,x=this.layout?this.layout.source:void 0,E=v!==x,b=this.getStack(),T=!b||b.members.length<=1,S=!!(E&&!T&&this.options.crossfade===!0&&!this.path.some(fY));this.animationProgress=0;let D;this.mixTargetDelta=P=>{const k=P/1e3;AR(p.x,a.x,k),AR(p.y,a.y,k),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qp(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hY(this.relativeTarget,this.relativeTargetOrigin,m,k),D&&Xq(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=In()),Yi(D,this.relativeTarget)),E&&(this.animationValues=f,Gq(f,h,this.latestValues,k,S,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,h;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(h=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||h.stop(),this.pendingAnimation&&(_c(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{P1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=tf(0)),this.currentAnimation=Fq(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),a.onUpdate&&a.onUpdate(f)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:h,latestValues:f}=a;if(!(!o||!l||!h)){if(this!==a&&this.layout&&h&&ik(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||In();const p=Kr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+p;const m=Kr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Yi(o,l),Uh(o,f),$p(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Qq),this.sharedNodes.get(a).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const h={};l.z&&Tw("z",a,h,this.animationValues);for(let f=0;f<Aw.length;f++)Tw(`rotate${Aw[f]}`,a,h,this.animationValues),Tw(`skew${Aw[f]}`,a,h,this.animationValues);a.render();for(const f in h)a.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=M1(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=M1(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!bl(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let p=Zq(this.projectionDeltaWithTransform,this.treeScale,f);l&&(p=l(f,p)),a.transform=p;const{x:m,y:v}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?a.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:a.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in wg){if(f[x]===void 0)continue;const{correct:E,applyTo:b,isCSSVariable:T}=wg[x],S=p==="none"?f[x]:E(f[x],h);if(b){const D=b.length;for(let P=0;P<D;P++)a[b[P]]=S}else T?this.options.visualElement.renderState.vars[x]=S:a[x]=S}this.options.layoutId&&(a.pointerEvents=h===this?M1(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(wR),this.root.sharedNodes.clear()}}}function eY(n){n.updateLayout()}function nY(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Ki(p=>{const m=a?t.measuredBox[p]:t.layoutBox[p],v=Kr(m);m.min=r[p].min,m.max=m.min+v}):ik(s,t.layoutBox,r)&&Ki(p=>{const m=a?t.measuredBox[p]:t.layoutBox[p],v=Kr(r[p]);m.max=m.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+v)});const o=jh();$p(o,r,t.layoutBox);const l=jh();a?$p(l,n.applyTransform(i,!0),t.measuredBox):$p(l,r,t.layoutBox);const h=!tk(o);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:v}=p;if(m&&v){const x=In();qp(x,t.layoutBox,m.layoutBox);const E=In();qp(E,r,v.layoutBox),ek(x,E)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=x,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function rY(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function iY(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function sY(n){n.clearSnapshot()}function wR(n){n.clearMeasurements()}function ER(n){n.isLayoutDirty=!1}function aY(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function bR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function oY(n){n.resolveTargetDelta()}function cY(n){n.calcProjection()}function lY(n){n.resetSkewAndRotation()}function uY(n){n.removeLeadSnapshot()}function AR(n,t,e){n.translate=pn(t.translate,0,e),n.scale=pn(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function TR(n,t,e,r){n.min=pn(t.min,e.min,r),n.max=pn(t.max,e.max,r)}function hY(n,t,e,r){TR(n.x,t.x,e.x,r),TR(n.y,t.y,e.y,r)}function fY(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const dY={duration:.45,ease:[.4,0,.1,1]},SR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),CR=SR("applewebkit/")&&!SR("chrome/")?Math.round:ts;function IR(n){n.min=CR(n.min),n.max=CR(n.max)}function pY(n){IR(n.x),IR(n.y)}function ik(n,t,e){return n==="position"||n==="preserve-aspect"&&!xq(_R(t),_R(e),.2)}function gY(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const mY=rk({attachResizeListener:(n,t)=>bg(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sw={current:void 0},sk=rk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Sw.current){const n=new mY({});n.mount(window),n.setOptions({layoutScroll:!0}),Sw.current=n}return Sw.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),vY={pan:{Feature:kq},drag:{Feature:Pq,ProjectionNode:sk,MeasureLayout:Q8}};function DR(n,t,e){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,s=r[i];s&&ln.postRender(()=>s(t,Wg(t)))}class yY extends Oc{mount(){const{current:t}=this.node;t&&(this.unmount=zW(t,(e,r)=>(DR(this.node,r,"Start"),i=>DR(this.node,i,"End"))))}unmount(){}}class _Y extends Oc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hg(bg(this.node.current,"focus",()=>this.onFocus()),bg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OR(n,t,e){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),s=r[i];s&&ln.postRender(()=>s(t,Wg(t)))}class xY extends Oc{mount(){const{current:t}=this.node;t&&(this.unmount=qW(t,(e,r)=>(OR(this.node,r,"Start"),(i,{success:s})=>OR(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const wb=new WeakMap,Cw=new WeakMap,wY=n=>{const t=wb.get(n.target);t&&t(n)},EY=n=>{n.forEach(wY)};function bY({root:n,...t}){const e=n||document;Cw.has(e)||Cw.set(e,{});const r=Cw.get(e),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(EY,{root:n,...t})),r[i]}function AY(n,t,e){const r=bY(t);return wb.set(n,e),r.observe(n),()=>{wb.delete(n),r.unobserve(n)}}const TY={some:0,all:1};class SY extends Oc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:s}=t,a={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:TY[i]},o=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=h?f:p;m&&m(l)};return AY(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(CY(t,e))&&this.startObserver()}unmount(){}}function CY({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const IY={inView:{Feature:SY},tap:{Feature:xY},focus:{Feature:_Y},hover:{Feature:yY}},DY={layout:{ProjectionNode:sk,MeasureLayout:Q8}},OY={...pq,...IY,...vY,...DY},RY=D$(OY,H$);function ak({name:n,nutrients:t,kcal:e=null,onEdit:r,onDelete:i,unit:s="g",disableSwipe:a}){const[o,l]=dn.useState(0),f=e??((E=[])=>{let b=0;return E.forEach(T=>{var D,P,k;const S=parseFloat(T.count||0);((D=T.type)==null?void 0:D.toLowerCase())==="fat"&&(b+=S*9),((P=T.type)==null?void 0:P.toLowerCase())==="protein"&&(b+=S*4),(k=T.type)!=null&&k.toLowerCase().includes("carbohydrate")&&(b+=S*4)}),Math.round(b)})(t),p=E=>E.charAt(0).toUpperCase()+E.slice(1),m=Qz({onSwiping:({deltaX:E})=>{a||l(E)},onSwiped:({dir:E,absX:b})=>{a||(E==="Left"&&b>120&&i&&i(),E==="Right"&&b>120&&r&&r(),l(0))},preventScrollOnSwipe:!0,trackMouse:!0}),v=o<0?"rgba(220,53,69,0.9)":o>0?"rgba(40,167,69,0.9)":"transparent",x=o<0?C.jsx("i",{className:"bi bi-trash",style:{fontSize:"1.5rem"}}):o>0?C.jsx("i",{className:"bi bi-pencil",style:{fontSize:"1.5rem"}}):null;return C.jsxs("div",{...m,className:"position-relative mb-2",style:{overflow:"hidden"},children:[C.jsx("div",{className:"position-absolute top-0 bottom-0 start-0 end-0 d-flex align-items-center justify-content-center",style:{backgroundColor:v,transition:"background-color 0.2s"},children:x}),C.jsxs(RY.div,{animate:{x:o},transition:{type:"spring",stiffness:300,damping:30},className:"meal-card text-white p-3 rounded shadow-sm position-relative",style:{backgroundColor:"#1c1c1c"},children:[C.jsx("p",{className:"MealCardText mb-1 fw-bold",children:n}),C.jsxs("p",{className:"MealCardText mb-1",children:["Calories: ",f," kcal"]}),t.filter(E=>{var b;return["protein","fat","carbohydrate","sugar","sugars","fibre","fiber","salt","caffeine"].includes((b=E.type)==null?void 0:b.toLowerCase())}).map((E,b)=>C.jsxs("p",{className:"MealCardText mb-1",children:[p(E.type),": ",E.total," ",s]},b))]})]})}const NY=()=>{};var RR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},MY=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[e++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[e++],a=n[e++],o=n[e++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[e++],a=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},ck={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,f=s>>2,p=(s&3)<<4|o>>4;let m=(o&15)<<2|h>>6,v=h&63;l||(v=64,a||(m=64)),r.push(e[f],e[p],e[m],e[v])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(ok(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):MY(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=e[n.charAt(i++)],o=i<n.length?e[n.charAt(i)]:0;++i;const h=i<n.length?e[n.charAt(i)]:64;++i;const p=i<n.length?e[n.charAt(i)]:64;if(++i,s==null||o==null||h==null||p==null)throw new PY;const m=s<<2|o>>4;if(r.push(m),h!==64){const v=o<<4&240|h>>2;if(r.push(v),p!==64){const x=h<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kY=function(n){const t=ok(n);return ck.encodeByteArray(t,!0)},lk=function(n){return kY(n).replace(/\./g,"")},uk=function(n){try{return ck.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY=()=>hk().__FIREBASE_DEFAULTS__,VY=()=>{if(typeof process>"u"||typeof RR>"u")return;const n=RR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BY=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&uk(n[1]);return t&&JSON.parse(t)},cy=()=>{try{return NY()||LY()||VY()||BY()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FY=n=>{var t,e;return(e=(t=cy())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},fk=()=>{var n;return(n=cy())==null?void 0:n.config},dk=n=>{var t;return(t=cy())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pk(n){return(await fetch(n,{credentials:"include"})).ok}const Yp={};function jY(){const n={prod:[],emulator:[]};for(const t of Object.keys(Yp))Yp[t]?n.emulator.push(t):n.prod.push(t);return n}function HY(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let NR=!1;function zY(n,t){if(typeof window>"u"||typeof document>"u"||!kf(window.location.host)||Yp[n]===t||Yp[n]||NR)return;Yp[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=jY().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{NR=!0,a()},m}function f(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=HY(r),v=e("text"),x=document.getElementById(v)||document.createElement("span"),E=e("learnmore"),b=document.getElementById(E)||document.createElement("a"),T=e("preprendIcon"),S=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const D=m.element;o(D),f(b,E);const P=h();l(S,T),D.append(S,x,b,P),document.body.appendChild(D)}s?(x.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function gk(){var t;const n=(t=cy())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WY(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $Y(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qY(){const n=er();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vk(){return!gk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yk(){return!gk()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function MA(){try{return typeof indexedDB=="object"}catch{return!1}}function _k(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)==null?void 0:s.message)||"")}}catch(e){t(e)}})}function YY(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY="FirebaseError";class Ts extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=KY,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mu.prototype.create)}}class mu{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?XY(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ts(i,o,r)}}function XY(n,t){return n.replace(QY,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const QY=/\{\$([^}]+)}/g;function ZY(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function wc(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const s=n[i],a=t[i];if(MR(s)&&MR(a)){if(!wc(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function MR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Cp(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function Ip(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function JY(n,t){const e=new tK(n,t);return e.subscribe.bind(e)}class tK{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");eK(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=Iw),i.error===void 0&&(i.error=Iw),i.complete===void 0&&(i.complete=Iw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eK(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Iw(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=1e3,rK=2,iK=4*60*60*1e3,sK=.5;function PR(n,t=nK,e=rK){const r=t*Math.pow(e,n),i=Math.round(sK*r*(Math.random()-.5)*2);return Math.min(iK,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){return n&&n._delegate?n._delegate:n}class Es{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new UY;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(cK(t))try{this.getOrInitializeService({instanceIdentifier:Al})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Al){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Al){return this.instances.has(t)}getOptions(t=Al){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oK(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Al){return this.component?this.component.multipleInstances?t:Al:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oK(n){return n===Al?void 0:n}function cK(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new aK(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(he||(he={}));const uK={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},hK=he.INFO,fK={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},dK=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=fK[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ly{constructor(t){this.name=t,this._logLevel=hK,this._logHandler=dK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in he))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uK[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...t),this._logHandler(this,he.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...t),this._logHandler(this,he.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,he.INFO,...t),this._logHandler(this,he.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,he.WARN,...t),this._logHandler(this,he.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...t),this._logHandler(this,he.ERROR,...t)}}const pK=(n,t)=>t.some(e=>n instanceof e);let kR,LR;function gK(){return kR||(kR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mK(){return LR||(LR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xk=new WeakMap,Eb=new WeakMap,wk=new WeakMap,Dw=new WeakMap,PA=new WeakMap;function vK(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(uc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&xk.set(e,n)}).catch(()=>{}),PA.set(t,n),t}function yK(n){if(Eb.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Eb.set(n,t)}let bb={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Eb.get(n);if(t==="objectStoreNames")return n.objectStoreNames||wk.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return uc(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function _K(n){bb=n(bb)}function xK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Ow(this),t,...e);return wk.set(r,t.sort?t.sort():[t]),uc(r)}:mK().includes(n)?function(...t){return n.apply(Ow(this),t),uc(xk.get(this))}:function(...t){return uc(n.apply(Ow(this),t))}}function wK(n){return typeof n=="function"?xK(n):(n instanceof IDBTransaction&&yK(n),pK(n,gK())?new Proxy(n,bb):n)}function uc(n){if(n instanceof IDBRequest)return vK(n);if(Dw.has(n))return Dw.get(n);const t=wK(n);return t!==n&&(Dw.set(n,t),PA.set(t,n)),t}const Ow=n=>PA.get(n);function EK(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=uc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(uc(a.result),l.oldVersion,l.newVersion,uc(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const bK=["get","getKey","getAll","getAllKeys","count"],AK=["put","add","delete","clear"],Rw=new Map;function VR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Rw.get(t))return Rw.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=AK.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bK.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return Rw.set(t,s),s}_K(n=>({...n,get:(t,e,r)=>VR(t,e)||n.get(t,e,r),has:(t,e)=>!!VR(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(SK(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function SK(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ab="@firebase/app",BR="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new ly("@firebase/app"),CK="@firebase/app-compat",IK="@firebase/analytics-compat",DK="@firebase/analytics",OK="@firebase/app-check-compat",RK="@firebase/app-check",NK="@firebase/auth",MK="@firebase/auth-compat",PK="@firebase/database",kK="@firebase/data-connect",LK="@firebase/database-compat",VK="@firebase/functions",BK="@firebase/functions-compat",FK="@firebase/installations",UK="@firebase/installations-compat",jK="@firebase/messaging",HK="@firebase/messaging-compat",zK="@firebase/performance",GK="@firebase/performance-compat",WK="@firebase/remote-config",$K="@firebase/remote-config-compat",qK="@firebase/storage",YK="@firebase/storage-compat",KK="@firebase/firestore",XK="@firebase/ai",QK="@firebase/firestore-compat",ZK="firebase",JK="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="[DEFAULT]",tX={[Ab]:"fire-core",[CK]:"fire-core-compat",[DK]:"fire-analytics",[IK]:"fire-analytics-compat",[RK]:"fire-app-check",[OK]:"fire-app-check-compat",[NK]:"fire-auth",[MK]:"fire-auth-compat",[PK]:"fire-rtdb",[kK]:"fire-data-connect",[LK]:"fire-rtdb-compat",[VK]:"fire-fn",[BK]:"fire-fn-compat",[FK]:"fire-iid",[UK]:"fire-iid-compat",[jK]:"fire-fcm",[HK]:"fire-fcm-compat",[zK]:"fire-perf",[GK]:"fire-perf-compat",[WK]:"fire-rc",[$K]:"fire-rc-compat",[qK]:"fire-gcs",[YK]:"fire-gcs-compat",[KK]:"fire-fst",[QK]:"fire-fst-compat",[XK]:"fire-vertex","fire-js":"fire-js",[ZK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map,eX=new Map,Sb=new Map;function FR(n,t){try{n.container.addComponent(t)}catch(e){no.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function da(n){const t=n.name;if(Sb.has(t))return no.debug(`There were multiple attempts to register component ${t}.`),!1;Sb.set(t,n);for(const e of vv.values())FR(e,n);for(const e of eX.values())FR(e,n);return!0}function vu(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Si(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hc=new mu("app","Firebase",nX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rX{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw hc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=JK;function Ek(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:Tb,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw hc.create("bad-app-name",{appName:String(i)});if(e||(e=fk()),!e)throw hc.create("no-options");const s=vv.get(i);if(s){if(wc(e,s.options)&&wc(r,s.config))return s;throw hc.create("duplicate-app",{appName:i})}const a=new lK(i);for(const l of Sb.values())a.addComponent(l);const o=new rX(e,r,a);return vv.set(i,o),o}function bk(n=Tb){const t=vv.get(n);if(!t&&n===Tb&&fk())return Ek();if(!t)throw hc.create("no-app",{appName:n});return t}function es(n,t,e){let r=tX[n]??n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${t}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),no.warn(a.join(" "));return}da(new Es(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX="firebase-heartbeat-database",sX=1,Ag="firebase-heartbeat-store";let Nw=null;function Ak(){return Nw||(Nw=EK(iX,sX,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ag)}catch(e){console.warn(e)}}}}).catch(n=>{throw hc.create("idb-open",{originalErrorMessage:n.message})})),Nw}async function aX(n){try{const e=(await Ak()).transaction(Ag),r=await e.objectStore(Ag).get(Tk(n));return await e.done,r}catch(t){if(t instanceof Ts)no.warn(t.message);else{const e=hc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});no.warn(e.message)}}}async function UR(n,t){try{const r=(await Ak()).transaction(Ag,"readwrite");await r.objectStore(Ag).put(t,Tk(n)),await r.done}catch(e){if(e instanceof Ts)no.warn(e.message);else{const r=hc.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});no.warn(r.message)}}}function Tk(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oX=1024,cX=30;class lX{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new hX(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jR();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>cX){const a=fX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){no.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jR(),{heartbeatsToSend:r,unsentEntries:i}=uX(this._heartbeatsCache.heartbeats),s=lk(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return no.warn(e),""}}}function jR(){return new Date().toISOString().substring(0,10)}function uX(n,t=oX){const e=[];let r=n.slice();for(const i of n){const s=e.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),HR(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),HR(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class hX{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MA()?_k().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await aX(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return UR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return UR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function HR(n){return lk(JSON.stringify({version:2,heartbeats:n})).length}function fX(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dX(n){da(new Es("platform-logger",t=>new TK(t),"PRIVATE")),da(new Es("heartbeat",t=>new lX(t),"PRIVATE")),es(Ab,BR,n),es(Ab,BR,"esm2020"),es("fire-js","")}dX("");var pX="firebase",gX="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(pX,gX,"app");const mX=(n,t)=>t.some(e=>n instanceof e);let zR,GR;function vX(){return zR||(zR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yX(){return GR||(GR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sk=new WeakMap,Cb=new WeakMap,Ck=new WeakMap,Mw=new WeakMap,kA=new WeakMap;function _X(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(fc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&Sk.set(e,n)}).catch(()=>{}),kA.set(t,n),t}function xX(n){if(Cb.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Cb.set(n,t)}let Ib={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Cb.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ck.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return fc(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function wX(n){Ib=n(Ib)}function EX(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Pw(this),t,...e);return Ck.set(r,t.sort?t.sort():[t]),fc(r)}:yX().includes(n)?function(...t){return n.apply(Pw(this),t),fc(Sk.get(this))}:function(...t){return fc(n.apply(Pw(this),t))}}function bX(n){return typeof n=="function"?EX(n):(n instanceof IDBTransaction&&xX(n),mX(n,vX())?new Proxy(n,Ib):n)}function fc(n){if(n instanceof IDBRequest)return _X(n);if(Mw.has(n))return Mw.get(n);const t=bX(n);return t!==n&&(Mw.set(n,t),kA.set(t,n)),t}const Pw=n=>kA.get(n);function AX(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=fc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(fc(a.result),l.oldVersion,l.newVersion,fc(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const TX=["get","getKey","getAll","getAllKeys","count"],SX=["put","add","delete","clear"],kw=new Map;function WR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(kw.get(t))return kw.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=SX.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TX.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return kw.set(t,s),s}wX(n=>({...n,get:(t,e,r)=>WR(t,e)||n.get(t,e,r),has:(t,e)=>!!WR(t,e)||n.has(t,e)}));const Ik="@firebase/installations",LA="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e4,Ok=`w:${LA}`,Rk="FIS_v2",CX="https://firebaseinstallations.googleapis.com/v1",IX=60*60*1e3,DX="installations",OX="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},eu=new mu(DX,OX,RX);function Nk(n){return n instanceof Ts&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk({projectId:n}){return`${CX}/projects/${n}/installations`}function Pk(n){return{token:n.token,requestStatus:2,expiresIn:MX(n.expiresIn),creationTime:Date.now()}}async function kk(n,t){const r=(await t.json()).error;return eu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Lk({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function NX(n,{refreshToken:t}){const e=Lk(n);return e.append("Authorization",PX(t)),e}async function Vk(n){const t=await n();return t.status>=500&&t.status<600?n():t}function MX(n){return Number(n.replace("s","000"))}function PX(n){return`${Rk} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kX({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const r=Mk(n),i=Lk(n),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:e,authVersion:Rk,appId:n.appId,sdkVersion:Ok},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await Vk(()=>fetch(r,o));if(l.ok){const h=await l.json();return{fid:h.fid||e,registrationStatus:2,refreshToken:h.refreshToken,authToken:Pk(h.authToken)}}else throw await kk("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LX(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX=/^[cdef][\w-]{21}$/,Db="";function BX(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=FX(n);return VX.test(e)?e:Db}catch{return Db}}function FX(n){return LX(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new Map;function Uk(n,t){const e=uy(n);jk(e,t),UX(e,t)}function jk(n,t){const e=Fk.get(n);if(e)for(const r of e)r(t)}function UX(n,t){const e=jX();e&&e.postMessage({key:n,fid:t}),HX()}let Vl=null;function jX(){return!Vl&&"BroadcastChannel"in self&&(Vl=new BroadcastChannel("[Firebase] FID Change"),Vl.onmessage=n=>{jk(n.data.key,n.data.fid)}),Vl}function HX(){Fk.size===0&&Vl&&(Vl.close(),Vl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zX="firebase-installations-database",GX=1,nu="firebase-installations-store";let Lw=null;function VA(){return Lw||(Lw=AX(zX,GX,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(nu)}}})),Lw}async function yv(n,t){const e=uy(n),i=(await VA()).transaction(nu,"readwrite"),s=i.objectStore(nu),a=await s.get(e);return await s.put(t,e),await i.done,(!a||a.fid!==t.fid)&&Uk(n,t.fid),t}async function Hk(n){const t=uy(n),r=(await VA()).transaction(nu,"readwrite");await r.objectStore(nu).delete(t),await r.done}async function hy(n,t){const e=uy(n),i=(await VA()).transaction(nu,"readwrite"),s=i.objectStore(nu),a=await s.get(e),o=t(a);return o===void 0?await s.delete(e):await s.put(o,e),await i.done,o&&(!a||a.fid!==o.fid)&&Uk(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(n){let t;const e=await hy(n.appConfig,r=>{const i=WX(r),s=$X(n,i);return t=s.registrationPromise,s.installationEntry});return e.fid===Db?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function WX(n){const t=n||{fid:BX(),registrationStatus:0};return zk(t)}function $X(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(eu.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=qX(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:YX(n)}:{installationEntry:t}}async function qX(n,t){try{const e=await kX(n,t);return yv(n.appConfig,e)}catch(e){throw Nk(e)&&e.customData.serverCode===409?await Hk(n.appConfig):await yv(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function YX(n){let t=await $R(n.appConfig);for(;t.registrationStatus===1;)await Bk(100),t=await $R(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await BA(n);return r||e}return t}function $R(n){return hy(n,t=>{if(!t)throw eu.create("installation-not-found");return zk(t)})}function zk(n){return KX(n)?{fid:n.fid,registrationStatus:0}:n}function KX(n){return n.registrationStatus===1&&n.registrationTime+Dk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XX({appConfig:n,heartbeatServiceProvider:t},e){const r=QX(n,e),i=NX(n,e),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:Ok,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await Vk(()=>fetch(r,o));if(l.ok){const h=await l.json();return Pk(h)}else throw await kk("Generate Auth Token",l)}function QX(n,{fid:t}){return`${Mk(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(n,t=!1){let e;const r=await hy(n.appConfig,s=>{if(!Gk(s))throw eu.create("not-registered");const a=s.authToken;if(!t&&tQ(a))return s;if(a.requestStatus===1)return e=ZX(n,t),s;{if(!navigator.onLine)throw eu.create("app-offline");const o=nQ(s);return e=JX(n,o),o}});return e?await e:r.authToken}async function ZX(n,t){let e=await qR(n.appConfig);for(;e.authToken.requestStatus===1;)await Bk(100),e=await qR(n.appConfig);const r=e.authToken;return r.requestStatus===0?FA(n,t):r}function qR(n){return hy(n,t=>{if(!Gk(t))throw eu.create("not-registered");const e=t.authToken;return rQ(e)?{...t,authToken:{requestStatus:0}}:t})}async function JX(n,t){try{const e=await XX(n,t),r={...t,authToken:e};return await yv(n.appConfig,r),e}catch(e){if(Nk(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await Hk(n.appConfig);else{const r={...t,authToken:{requestStatus:0}};await yv(n.appConfig,r)}throw e}}function Gk(n){return n!==void 0&&n.registrationStatus===2}function tQ(n){return n.requestStatus===2&&!eQ(n)}function eQ(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+IX}function nQ(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function rQ(n){return n.requestStatus===1&&n.requestTime+Dk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iQ(n){const t=n,{installationEntry:e,registrationPromise:r}=await BA(t);return r?r.catch(console.error):FA(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sQ(n,t=!1){const e=n;return await aQ(e),(await FA(e,t)).token}async function aQ(n){const{registrationPromise:t}=await BA(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(n){if(!n||!n.options)throw Vw("App Configuration");if(!n.name)throw Vw("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw Vw(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Vw(n){return eu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="installations",cQ="installations-internal",lQ=n=>{const t=n.getProvider("app").getImmediate(),e=oQ(t),r=vu(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},uQ=n=>{const t=n.getProvider("app").getImmediate(),e=vu(t,Wk).getImmediate();return{getId:()=>iQ(e),getToken:i=>sQ(e,i)}};function hQ(){da(new Es(Wk,lQ,"PUBLIC")),da(new Es(cQ,uQ,"PRIVATE"))}hQ();es(Ik,LA);es(Ik,LA,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="analytics",fQ="firebase_id",dQ="origin",pQ=60*1e3,gQ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",UA="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new ly("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ii=new mu("analytics","Analytics",mQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vQ(n){if(!n.startsWith(UA)){const t=Ii.create("invalid-gtag-resource",{gtagURL:n});return pi.warn(t.message),""}return n}function $k(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function yQ(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function _Q(n,t){const e=yQ("firebase-js-sdk-policy",{createScriptURL:vQ}),r=document.createElement("script"),i=`${UA}?l=${n}&id=${t}`;r.src=e?e==null?void 0:e.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function xQ(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function wQ(n,t,e,r,i,s){const a=r[i];try{if(a)await t[a];else{const l=(await $k(e)).find(h=>h.measurementId===i);l&&await t[l.appId]}}catch(o){pi.error(o)}n("config",i,s)}async function EQ(n,t,e,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const o=await $k(e);for(const l of a){const h=o.find(p=>p.measurementId===l),f=h&&t[h.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(t)),await Promise.all(s),n("event",r,i||{})}catch(s){pi.error(s)}}function bQ(n,t,e,r){async function i(s,...a){try{if(s==="event"){const[o,l]=a;await EQ(n,t,e,o,l)}else if(s==="config"){const[o,l]=a;await wQ(n,t,e,r,o,l)}else if(s==="consent"){const[o,l]=a;n("consent",o,l)}else if(s==="get"){const[o,l,h]=a;n("get",o,l,h)}else if(s==="set"){const[o]=a;n("set",o)}else n(s,...a)}catch(o){pi.error(o)}}return i}function AQ(n,t,e,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=bQ(s,n,t,e),{gtagCore:s,wrappedGtag:window[i]}}function TQ(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(UA)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ=30,CQ=1e3;class IQ{constructor(t={},e=CQ){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const qk=new IQ;function DQ(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function OQ(n){var a;const{appId:t,apiKey:e}=n,r={method:"GET",headers:DQ(e)},i=gQ.replace("{app-id}",t),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let o="";try{const l=await s.json();(a=l.error)!=null&&a.message&&(o=l.error.message)}catch{}throw Ii.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function RQ(n,t=qk,e){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Ii.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ii.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new PQ;return setTimeout(async()=>{o.abort()},pQ),Yk({appId:r,apiKey:i,measurementId:s},a,o,t)}async function Yk(n,{throttleEndTimeMillis:t,backoffCount:e},r,i=qk){var o;const{appId:s,measurementId:a}=n;try{await NQ(r,t)}catch(l){if(a)return pi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:a};throw l}try{const l=await OQ(n);return i.deleteThrottleMetadata(s),l}catch(l){const h=l;if(!MQ(h)){if(i.deleteThrottleMetadata(s),a)return pi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:s,measurementId:a};throw l}const f=Number((o=h==null?void 0:h.customData)==null?void 0:o.httpStatus)===503?PR(e,i.intervalMillis,SQ):PR(e,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:e+1};return i.setThrottleMetadata(s,p),pi.debug(`Calling attemptFetch again in ${f} millis`),Yk(n,p,r,i)}}function NQ(n,t){return new Promise((e,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(e,i);n.addEventListener(()=>{clearTimeout(s),r(Ii.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function MQ(n){if(!(n instanceof Ts)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class PQ{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function kQ(n,t,e,r,i){if(i&&i.global){n("event",e,r);return}else{const s=await t,a={...r,send_to:s};n("event",e,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LQ(){if(MA())try{await _k()}catch(n){return pi.warn(Ii.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return pi.warn(Ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function VQ(n,t,e,r,i,s,a){const o=RQ(n);o.then(m=>{e[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&pi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>pi.error(m)),t.push(o);const l=LQ().then(m=>{if(m)return r.getId()}),[h,f]=await Promise.all([o,l]);TQ(s)||_Q(s,h.measurementId),i("js",new Date);const p=(a==null?void 0:a.config)??{};return p[dQ]="firebase",p.update=!0,f!=null&&(p[fQ]=f),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{constructor(t){this.app=t}_delete(){return delete Kp[this.app.options.appId],Promise.resolve()}}let Kp={},YR=[];const KR={};let Bw="dataLayer",FQ="gtag",XR,Kk,QR=!1;function UQ(){const n=[];if(mk()&&n.push("This is a browser extension environment."),YY()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),e=Ii.create("invalid-analytics-context",{errorInfo:t});pi.warn(e.message)}}function jQ(n,t,e){UQ();const r=n.options.appId;if(!r)throw Ii.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)pi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ii.create("no-api-key");if(Kp[r]!=null)throw Ii.create("already-exists",{id:r});if(!QR){xQ(Bw);const{wrappedGtag:s,gtagCore:a}=AQ(Kp,YR,KR,Bw,FQ);Kk=s,XR=a,QR=!0}return Kp[r]=VQ(n,YR,KR,t,XR,Bw,e),new BQ(n)}function HQ(n=bk()){n=vn(n);const t=vu(n,_v);return t.isInitialized()?t.getImmediate():zQ(n)}function zQ(n,t={}){const e=vu(n,_v);if(e.isInitialized()){const i=e.getImmediate();if(wc(t,e.getOptions()))return i;throw Ii.create("already-initialized")}return e.initialize({options:t})}function GQ(n,t,e,r){n=vn(n),kQ(Kk,Kp[n.app.options.appId],t,e,r).catch(i=>pi.error(i))}const ZR="@firebase/analytics",JR="0.10.18";function WQ(){da(new Es(_v,(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return jQ(r,i,e)},"PUBLIC")),da(new Es("analytics-internal",n,"PRIVATE")),es(ZR,JR),es(ZR,JR,"esm2020");function n(t){try{const e=t.getProvider(_v).getImmediate();return{logEvent:(r,i,s)=>GQ(e,r,i,s)}}catch(e){throw Ii.create("interop-component-reg-failed",{reason:e})}}}WQ();function Xk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $Q=Xk,Qk=new mu("auth","Firebase",Xk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new ly("@firebase/auth");function qQ(n,...t){xv.logLevel<=he.WARN&&xv.warn(`Auth (${Lf}): ${n}`,...t)}function k1(n,...t){xv.logLevel<=he.ERROR&&xv.error(`Auth (${Lf}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(n,...t){throw jA(n,...t)}function sa(n,...t){return jA(n,...t)}function Zk(n,t,e){const r={...$Q(),[t]:e};return new mu("auth","Firebase",r).create(t,{appName:n.name})}function aa(n){return Zk(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jA(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return Qk.create(n,...t)}function Yt(n,t,...e){if(!n)throw jA(t,...e)}function Ka(n){const t="INTERNAL ASSERTION FAILED: "+n;throw k1(t),new Error(t)}function ro(n,t){n||Ka(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function YQ(){return tN()==="http:"||tN()==="https:"}function tN(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YQ()||mk()||"connection"in navigator)?navigator.onLine:!0}function XQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,e){this.shortDelay=t,this.longDelay=e,ro(e>t,"Short delay should be less than long delay!"),this.isMobile=GY()||$Y()}get(){return KQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n,t){ro(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JQ=new qg(3e4,6e4);function Rc(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function co(n,t,e,r,i={}){return t5(n,i,async()=>{let s={},a={};r&&(t==="GET"?a=r:s={body:JSON.stringify(r)});const o=$g({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:t,headers:l,...s};return WY()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&kf(n.emulatorConfig.host)&&(h.credentials="include"),Jk.fetch()(await e5(n,n.config.apiHost,e,o),h)})}async function t5(n,t,e){n._canInitEmulator=!1;const r={...QQ,...t};try{const i=new eZ(n),s=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw t1(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw t1(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw t1(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw t1(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Zk(n,f,h);bs(n,f)}}catch(i){if(i instanceof Ts)throw i;bs(n,"network-request-failed",{message:String(i)})}}async function Yg(n,t,e,r,i={}){const s=await co(n,t,e,r,i);return"mfaPendingCredential"in s&&bs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function e5(n,t,e,r){const i=`${t}${e}?${r}`,s=n,a=s.config.emulator?HA(n.config,i):`${n.config.apiScheme}://${i}`;return ZQ.includes(e)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function tZ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eZ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(sa(this.auth,"network-request-failed")),JQ.get())})}}function t1(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=sa(n,t,r);return i.customData._tokenResponse=e,i}function eN(n){return n!==void 0&&n.enterprise!==void 0}class nZ{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return tZ(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rZ(n,t){return co(n,"GET","/v2/recaptchaConfig",Rc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iZ(n,t){return co(n,"POST","/v1/accounts:delete",t)}async function wv(n,t){return co(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function sZ(n,t=!1){const e=vn(n),r=await e.getIdToken(t),i=zA(r);Yt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xp(Fw(i.auth_time)),issuedAtTime:Xp(Fw(i.iat)),expirationTime:Xp(Fw(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fw(n){return Number(n)*1e3}function zA(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return k1("JWT malformed, contained fewer than 3 sections"),null;try{const i=uk(e);return i?JSON.parse(i):(k1("Failed to decode base64 JWT payload"),null)}catch(i){return k1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nN(n){const t=zA(n);return Yt(t,"internal-error"),Yt(typeof t.exp<"u","internal-error"),Yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof Ts&&aZ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function aZ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xp(this.lastLoginAt),this.creationTime=Xp(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ev(n){var p;const t=n.auth,e=await n.getIdToken(),r=await nf(n,wv(t,{idToken:e}));Yt(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?n5(i.providerUserInfo):[],a=lZ(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),h=o?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Rb(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function cZ(n){const t=vn(n);await Ev(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function lZ(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function n5(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uZ(n,t){const e=await t5(n,{},async()=>{const r=$g({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await e5(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&kf(n.emulatorConfig.host)&&(l.credentials="include"),Jk.fetch()(a,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function hZ(n,t){return co(n,"POST","/v2/accounts:revokeToken",Rc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yt(t.idToken,"internal-error"),Yt(typeof t.idToken<"u","internal-error"),Yt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):nN(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Yt(t.length!==0,"internal-error");const e=nN(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:s}=await uZ(t,e);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:s}=e,a=new Yh;return r&&(Yt(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(Yt(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),s&&(Yt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Yh,this.toJSON())}_performRefresh(){return Ka("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n,t){Yt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class xs{constructor({uid:t,auth:e,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new oZ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Rb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await nf(this,this.stsTokenManager.getToken(this.auth,t));return Yt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return sZ(this,t)}reload(){return cZ(this)}_assign(t){this!==t&&(Yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new xs({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await Ev(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(aa(this.auth));const t=await this.getIdToken();return await nf(this,iZ(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,i=e.email??void 0,s=e.phoneNumber??void 0,a=e.photoURL??void 0,o=e.tenantId??void 0,l=e._redirectEventId??void 0,h=e.createdAt??void 0,f=e.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:v,providerData:x,stsTokenManager:E}=e;Yt(p&&E,t,"internal-error");const b=Yh.fromJSON(this.name,E);Yt(typeof p=="string",t,"internal-error"),Ho(r,t.name),Ho(i,t.name),Yt(typeof m=="boolean",t,"internal-error"),Yt(typeof v=="boolean",t,"internal-error"),Ho(s,t.name),Ho(a,t.name),Ho(o,t.name),Ho(l,t.name),Ho(h,t.name),Ho(f,t.name);const T=new xs({uid:p,auth:t,email:i,emailVerified:m,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:h,lastLoginAt:f});return x&&Array.isArray(x)&&(T.providerData=x.map(S=>({...S}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(t,e,r=!1){const i=new Yh;i.updateFromServerResponse(e);const s=new xs({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Ev(s),s}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];Yt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?n5(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Yh;o.updateFromIdToken(r);const l=new xs({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Rb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Map;function Xa(n){ro(n instanceof Function,"Expected a class definition");let t=rN.get(n);return t?(ro(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,rN.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}r5.type="NONE";const iN=r5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(n,t,e){return`firebase:${n}:${t}:${e}`}class Kh{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=L1(this.userKey,i.apiKey,s),this.fullPersistenceKey=L1("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await wv(this.auth,{idToken:t}).catch(()=>{});return e?xs._fromGetAccountInfoResponse(this.auth,e,t):null}return xs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Kh(Xa(iN),t,r);const i=(await Promise.all(e.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Xa(iN);const a=L1(r,t.config.apiKey,t.name);let o=null;for(const h of e)try{const f=await h._get(a);if(f){let p;if(typeof f=="string"){const m=await wv(t,{idToken:f}).catch(()=>{});if(!m)break;p=await xs._fromGetAccountInfoResponse(t,m,f)}else p=xs._fromJSON(t,f);h!==s&&(o=p),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Kh(s,t,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(e.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Kh(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(o5(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(i5(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(l5(t))return"Blackberry";if(u5(t))return"Webos";if(s5(t))return"Safari";if((t.includes("chrome/")||a5(t))&&!t.includes("edge/"))return"Chrome";if(c5(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function i5(n=er()){return/firefox\//i.test(n)}function s5(n=er()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function a5(n=er()){return/crios\//i.test(n)}function o5(n=er()){return/iemobile/i.test(n)}function c5(n=er()){return/android/i.test(n)}function l5(n=er()){return/blackberry/i.test(n)}function u5(n=er()){return/webos/i.test(n)}function GA(n=er()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fZ(n=er()){var t;return GA(n)&&!!((t=window.navigator)!=null&&t.standalone)}function dZ(){return qY()&&document.documentMode===10}function h5(n=er()){return GA(n)||c5(n)||u5(n)||l5(n)||/windows phone/i.test(n)||o5(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(n,t=[]){let e;switch(n){case"Browser":e=sN(er());break;case"Worker":e=`${sN(er())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Lf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=s=>new Promise((a,o)=>{try{const l=t(s);a(l)}catch(l){o(l)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gZ(n,t={}){return co(n,"GET","/v2/passwordPolicy",Rc(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mZ=6;class vZ{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??mZ,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aN(this),this.idTokenSubscription=new aN(this),this.beforeStateQueue=new pZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Xa(e)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Kh.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await wv(this,{idToken:t}),r=await xs._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Si(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Ev(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XQ()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Si(this.app))return Promise.reject(aa(this));const e=t?vn(t):null;return e&&Yt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Si(this.app)?Promise.reject(aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gZ(this),e=new vZ(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new mu("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await hZ(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Xa(t)||this._popupRedirectResolver;Yt(e,this,"argument-error"),this.redirectPersistenceManager=await Kh.create(this,[Xa(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,r,i);return()=>{a=!0,l()}}else{const l=t.addObserver(e);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=f5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&qQ(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function yu(n){return vn(n)}class aN{constructor(t){this.auth=t,this.observer=null,this.addObserver=JY(e=>this.observer=e)}get next(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _Z(n){fy=n}function d5(n){return fy.loadJS(n)}function xZ(){return fy.recaptchaEnterpriseScript}function wZ(){return fy.gapiScript}function EZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class bZ{constructor(){this.enterprise=new AZ}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class AZ{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const TZ="recaptcha-enterprise",p5="NO_RECAPTCHA";class SZ{constructor(t){this.type=TZ,this.auth=yu(t)}async verify(t="verify",e=!1){async function r(s){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{rZ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const h=new nZ(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;eN(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(p5)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bZ().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!e&&eN(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=xZ();l.length!==0&&(l+=o),d5(l).then(()=>{i(o,s,a)}).catch(h=>{a(h)})}}).catch(o=>{a(o)})})}}async function oN(n,t,e,r=!1,i=!1){const s=new SZ(n);let a;if(i)a=p5;else try{a=await s.verify(e)}catch{a=await s.verify(e,!0)}const o={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nb(n,t,e,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await oN(n,t,e,e==="getOobCode");return r(n,a)}else return r(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await oN(n,t,e,e==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CZ(n,t){const e=vu(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),s=e.getOptions();if(wc(s,t??{}))return i;bs(i,"already-initialized")}return e.initialize({options:t})}function IZ(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Xa);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function DZ(n,t,e){const r=yu(n);Yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=g5(t),{host:a,port:o}=OZ(t),l=o===null?"":`:${o}`,h={url:`${s}//${a}${l}/`},f=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Yt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Yt(wc(h,r.config.emulator)&&wc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,kf(a)?(pk(`${s}//${a}${l}`),zY("Auth",!0)):RZ()}function g5(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function OZ(n){const t=g5(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:cN(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:cN(a)}}}function cN(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function RZ(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ka("not implemented")}_getIdTokenResponse(t){return Ka("not implemented")}_linkToIdToken(t,e){return Ka("not implemented")}_getReauthenticationResolver(t){return Ka("not implemented")}}async function NZ(n,t){return co(n,"POST","/v1/accounts:update",t)}async function MZ(n,t){return co(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PZ(n,t){return Yg(n,"POST","/v1/accounts:signInWithPassword",Rc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kZ(n,t){return Yg(n,"POST","/v1/accounts:signInWithEmailLink",Rc(n,t))}async function LZ(n,t){return Yg(n,"POST","/v1/accounts:signInWithEmailLink",Rc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends WA{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Tg(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new Tg(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nb(t,e,"signInWithPassword",PZ);case"emailLink":return kZ(t,{email:this._email,oobCode:this._password});default:bs(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nb(t,r,"signUpPassword",MZ);case"emailLink":return LZ(t,{idToken:e,email:this._email,oobCode:this._password});default:bs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(n,t){return Yg(n,"POST","/v1/accounts:signInWithIdp",Rc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZ="http://localhost";class ru extends WA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ru(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):bs("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...s}=e;if(!r||!i)return null;const a=new ru(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const e=this.buildRequest();return Xh(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Xh(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Xh(t,e)}buildRequest(){const t={requestUri:VZ,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=$g(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BZ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FZ(n){const t=Cp(Ip(n)).link,e=t?Cp(Ip(t)).deep_link_id:null,r=Cp(Ip(n)).deep_link_id;return(r?Cp(Ip(r)).link:null)||r||e||t||n}class $A{constructor(t){const e=Cp(Ip(t)),r=e.apiKey??null,i=e.oobCode??null,s=BZ(e.mode??null);Yt(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=FZ(t);try{return new $A(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this.providerId=_u.PROVIDER_ID}static credential(t,e){return Tg._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=$A.parseLink(e);return Yt(r,"argument-error"),Tg._fromEmailAndCode(t,r.code,r.tenantId)}}_u.PROVIDER_ID="password";_u.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_u.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends m5{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends Kg{constructor(){super("facebook.com")}static credential(t){return ru._fromParams({providerId:Jo.PROVIDER_ID,signInMethod:Jo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Jo.credentialFromTaggedObject(t)}static credentialFromError(t){return Jo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Jo.credential(t.oauthAccessToken)}catch{return null}}}Jo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Kg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ru._fromParams({providerId:tc.PROVIDER_ID,signInMethod:tc.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return tc.credentialFromTaggedObject(t)}static credentialFromError(t){return tc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return tc.credential(e,r)}catch{return null}}}tc.GOOGLE_SIGN_IN_METHOD="google.com";tc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Kg{constructor(){super("github.com")}static credential(t){return ru._fromParams({providerId:ec.PROVIDER_ID,signInMethod:ec.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ec.credentialFromTaggedObject(t)}static credentialFromError(t){return ec.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ec.credential(t.oauthAccessToken)}catch{return null}}}ec.GITHUB_SIGN_IN_METHOD="github.com";ec.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Kg{constructor(){super("twitter.com")}static credential(t,e){return ru._fromParams({providerId:nc.PROVIDER_ID,signInMethod:nc.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return nc.credentialFromTaggedObject(t)}static credentialFromError(t){return nc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return nc.credential(e,r)}catch{return null}}}nc.TWITTER_SIGN_IN_METHOD="twitter.com";nc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UZ(n,t){return Yg(n,"POST","/v1/accounts:signUp",Rc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const s=await xs._fromIdTokenResponse(t,r,i),a=lN(r);return new iu({user:s,providerId:a,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=lN(r);return new iu({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function lN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv extends Ts{constructor(t,e,r,i){super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bv.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new bv(t,e,r,i)}}function v5(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bv._fromErrorAndOperation(n,s,t,r):s})}async function jZ(n,t,e=!1){const r=await nf(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return iu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(n,t,e=!1){const{auth:r}=n;if(Si(r.app))return Promise.reject(aa(r));const i="reauthenticate";try{const s=await nf(n,v5(r,i,t,n),e);Yt(s.idToken,r,"internal-error");const a=zA(s.idToken);Yt(a,r,"internal-error");const{sub:o}=a;return Yt(n.uid===o,r,"user-mismatch"),iu._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&bs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(n,t,e=!1){if(Si(n.app))return Promise.reject(aa(n));const r="signIn",i=await v5(n,r,t),s=await iu._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(s.user),s}async function HZ(n,t){return _5(yu(n),t)}async function zZ(n,t){return y5(vn(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(n){const t=yu(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function GZ(n,t,e){if(Si(n.app))return Promise.reject(aa(n));const r=yu(n),a=await Nb(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UZ).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&x5(n),l}),o=await iu._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function WZ(n,t,e){return Si(n.app)?Promise.reject(aa(n)):HZ(vn(n),_u.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&x5(n),r})}function $Z(n,t){const e=vn(n);return Si(e.auth.app)?Promise.reject(aa(e.auth)):w5(e,t,null)}function qZ(n,t){return w5(vn(n),null,t)}async function w5(n,t,e){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(s.email=t),e&&(s.password=e);const a=await nf(n,NZ(r,s));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YZ(n,t){return vn(n).setPersistence(t)}function KZ(n,t,e,r){return vn(n).onIdTokenChanged(t,e,r)}function XZ(n,t,e){return vn(n).beforeAuthStateChanged(t,e)}function QZ(n){return vn(n).signOut()}const Av="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Av,"1"),this.storage.removeItem(Av),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZZ=1e3,JZ=10;class b5 extends E5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!e&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);dZ()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,JZ):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},ZZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}b5.type="LOCAL";const A5=b5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5 extends E5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}T5.type="SESSION";const qA=T5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tJ(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new dy(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:s}=e.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async h=>h(e.origin,s)),l=await tJ(o);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const h=YA("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:e},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(){return window}function nJ(n){oa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(){return typeof oa().WorkerGlobalScope<"u"&&typeof oa().importScripts=="function"}async function rJ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iJ(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function sJ(){return S5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="firebaseLocalStorageDb",aJ=1,Tv="firebaseLocalStorage",I5="fbase_key";class Xg{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function py(n,t){return n.transaction([Tv],t?"readwrite":"readonly").objectStore(Tv)}function oJ(){const n=indexedDB.deleteDatabase(C5);return new Xg(n).toPromise()}function Mb(){const n=indexedDB.open(C5,aJ);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Tv,{keyPath:I5})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Tv)?t(r):(r.close(),await oJ(),t(await Mb()))})})}async function uN(n,t,e){const r=py(n,!0).put({[I5]:t,value:e});return new Xg(r).toPromise()}async function cJ(n,t){const e=py(n,!1).get(t),r=await new Xg(e).toPromise();return r===void 0?null:r.value}function hN(n,t){const e=py(n,!0).delete(t);return new Xg(e).toPromise()}const lJ=800,uJ=3;class D5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mb(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>uJ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dy._getInstance(sJ()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await rJ(),!this.activeServiceWorker)return;this.sender=new eJ(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||iJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Mb();return await uN(t,Av,"1"),await hN(t,Av),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>uN(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>cJ(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>hN(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=py(i,!1).getAll();return new Xg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D5.type="LOCAL";const hJ=D5;new qg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(n,t){return t?Xa(t):(Yt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends WA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Xh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Xh(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function dJ(n){return _5(n.auth,new KA(n),n.bypassAuthState)}function pJ(n){const{auth:t,user:e}=n;return Yt(e,t,"internal-error"),y5(e,new KA(n),n.bypassAuthState)}async function gJ(n){const{auth:t,user:e}=n;return Yt(e,t,"internal-error"),jZ(e,new KA(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(t,e,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return dJ;case"linkViaPopup":case"linkViaRedirect":return gJ;case"reauthViaPopup":case"reauthViaRedirect":return pJ;default:bs(this.auth,"internal-error")}}resolve(t){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mJ=new qg(2e3,1e4);class Hh extends O5{constructor(t,e,r,i,s){super(t,e,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Hh.currentPopupAction&&Hh.currentPopupAction.cancel(),Hh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yt(t,this.auth,"internal-error"),t}async onExecution(){ro(this.filter.length===1,"Popup operations only handle one event");const t=YA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(sa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(sa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,mJ.get())};t()}}Hh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ="pendingRedirect",V1=new Map;class yJ extends O5{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=V1.get(this.auth._key());if(!t){try{const r=await _J(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}V1.set(this.auth._key(),t)}return this.bypassAuthState||V1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _J(n,t){const e=EJ(t),r=wJ(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function xJ(n,t){V1.set(n._key(),t)}function wJ(n){return Xa(n._redirectPersistence)}function EJ(n){return L1(vJ,n.config.apiKey,n.name)}async function bJ(n,t,e=!1){if(Si(n.app))return Promise.reject(aa(n));const r=yu(n),i=fJ(r,t),a=await new yJ(r,i,e).execute();return a&&!e&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ=10*60*1e3;class TJ{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!SJ(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!R5(t)){const i=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(sa(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=AJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(fN(t))}saveEventToCache(t){this.cachedEventUids.add(fN(t)),this.lastProcessedEventTime=Date.now()}}function fN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function R5({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function SJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R5(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CJ(n,t={}){return co(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DJ=/^https?/;async function OJ(n){if(n.config.emulator)return;const{authorizedDomains:t}=await CJ(n);for(const e of t)try{if(RJ(e))return}catch{}bs(n,"unauthorized-domain")}function RJ(n){const t=Ob(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===r}if(!DJ.test(e))return!1;if(IJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NJ=new qg(3e4,6e4);function dN(){const n=oa().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function MJ(n){return new Promise((t,e)=>{var i,s,a;function r(){dN(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dN(),e(sa(n,"network-request-failed"))},timeout:NJ.get()})}if((s=(i=oa().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=oa().gapi)!=null&&a.load)r();else{const o=EZ("iframefcb");return oa()[o]=()=>{gapi.load?r():e(sa(n,"network-request-failed"))},d5(`${wZ()}?onload=${o}`).catch(l=>e(l))}}).catch(t=>{throw B1=null,t})}let B1=null;function PJ(n){return B1=B1||MJ(n),B1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ=new qg(5e3,15e3),LJ="__/auth/iframe",VJ="emulator/auth/iframe",BJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UJ(n){const t=n.config;Yt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?HA(t,VJ):`https://${n.config.authDomain}/${LJ}`,r={apiKey:t.apiKey,appName:n.name,v:Lf},i=FJ.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${$g(r).slice(1)}`}async function jJ(n){const t=await PJ(n),e=oa().gapi;return Yt(e,n,"internal-error"),t.open({where:document.body,url:UJ(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=sa(n,"network-request-failed"),o=oa().setTimeout(()=>{s(a)},kJ.get());function l(){oa().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zJ=500,GJ=600,WJ="_blank",$J="http://localhost";class pN{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qJ(n,t,e,r=zJ,i=GJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...HJ,width:r.toString(),height:i.toString(),top:s,left:a},h=er().toLowerCase();e&&(o=a5(h)?WJ:e),i5(h)&&(t=t||$J,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(fZ(h)&&o!=="_self")return YJ(t||"",o),new pN(null);const p=window.open(t||"",o,f);Yt(p,n,"popup-blocked");try{p.focus()}catch{}return new pN(p)}function YJ(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KJ="__/auth/handler",XJ="emulator/auth/handler",QJ=encodeURIComponent("fac");async function gN(n,t,e,r,i,s){Yt(n.config.authDomain,n,"auth-domain-config-required"),Yt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:Lf,eventId:i};if(t instanceof m5){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",ZY(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(t instanceof Kg){const f=t.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await n._getAppCheckToken(),h=l?`#${QJ}=${encodeURIComponent(l)}`:"";return`${ZJ(n)}?${$g(o).slice(1)}${h}`}function ZJ({config:n}){return n.emulator?HA(n,XJ):`https://${n.authDomain}/${KJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="webStorageSupport";class JJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qA,this._completeRedirectFn=bJ,this._overrideRedirectResult=xJ}async _openPopup(t,e,r,i){var a;ro((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await gN(t,e,r,Ob(),i);return qJ(t,s,YA())}async _openRedirect(t,e,r,i){await this._originValidation(t);const s=await gN(t,e,r,Ob(),i);return nJ(s),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:s}=this.eventManagers[e];return i?Promise.resolve(i):(ro(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await jJ(t),r=new TJ(t);return e.register("authEvent",i=>(Yt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Uw,{type:Uw},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[Uw];s!==void 0&&e(!!s),bs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=OJ(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return h5()||s5()||GA()}}const ttt=JJ;var mN="@firebase/auth",vN="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ett{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ntt(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rtt(n){da(new Es("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Yt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f5(n)},h=new yZ(r,i,s,l);return IZ(h,e),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),da(new Es("auth-internal",t=>{const e=yu(t.getProvider("auth").getImmediate());return(r=>new ett(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(mN,vN,ntt(n)),es(mN,vN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const itt=5*60,stt=dk("authIdTokenMaxAge")||itt;let yN=null;const att=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>stt)return;const i=e==null?void 0:e.token;yN!==i&&(yN=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function XA(n=bk()){const t=vu(n,"auth");if(t.isInitialized())return t.getImmediate();const e=CZ(n,{popupRedirectResolver:ttt,persistence:[hJ,A5,qA]}),r=dk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=att(s.toString());XZ(e,a,()=>a(e.currentUser)),KZ(e,o=>a(o))}}const i=FY("auth");return i&&DZ(e,`http://${i}`),e}function ott(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}_Z({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const s=sa("internal-error");s.customData=i,e(s)},r.type="text/javascript",r.charset="UTF-8",ott().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rtt("Browser");var _N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dc,N5;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,I){function N(){}N.prototype=I.prototype,M.D=I.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(L,j,z){for(var B=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)B[yt-2]=arguments[yt];return I.prototype[j].apply(L,B)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,I,N){N||(N=0);var L=Array(16);if(typeof I=="string")for(var j=0;16>j;++j)L[j]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(j=0;16>j;++j)L[j]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=M.g[0],N=M.g[1],j=M.g[2];var z=M.g[3],B=I+(z^N&(j^z))+L[0]+3614090360&4294967295;I=N+(B<<7&4294967295|B>>>25),B=z+(j^I&(N^j))+L[1]+3905402710&4294967295,z=I+(B<<12&4294967295|B>>>20),B=j+(N^z&(I^N))+L[2]+606105819&4294967295,j=z+(B<<17&4294967295|B>>>15),B=N+(I^j&(z^I))+L[3]+3250441966&4294967295,N=j+(B<<22&4294967295|B>>>10),B=I+(z^N&(j^z))+L[4]+4118548399&4294967295,I=N+(B<<7&4294967295|B>>>25),B=z+(j^I&(N^j))+L[5]+1200080426&4294967295,z=I+(B<<12&4294967295|B>>>20),B=j+(N^z&(I^N))+L[6]+2821735955&4294967295,j=z+(B<<17&4294967295|B>>>15),B=N+(I^j&(z^I))+L[7]+4249261313&4294967295,N=j+(B<<22&4294967295|B>>>10),B=I+(z^N&(j^z))+L[8]+1770035416&4294967295,I=N+(B<<7&4294967295|B>>>25),B=z+(j^I&(N^j))+L[9]+2336552879&4294967295,z=I+(B<<12&4294967295|B>>>20),B=j+(N^z&(I^N))+L[10]+4294925233&4294967295,j=z+(B<<17&4294967295|B>>>15),B=N+(I^j&(z^I))+L[11]+2304563134&4294967295,N=j+(B<<22&4294967295|B>>>10),B=I+(z^N&(j^z))+L[12]+1804603682&4294967295,I=N+(B<<7&4294967295|B>>>25),B=z+(j^I&(N^j))+L[13]+4254626195&4294967295,z=I+(B<<12&4294967295|B>>>20),B=j+(N^z&(I^N))+L[14]+2792965006&4294967295,j=z+(B<<17&4294967295|B>>>15),B=N+(I^j&(z^I))+L[15]+1236535329&4294967295,N=j+(B<<22&4294967295|B>>>10),B=I+(j^z&(N^j))+L[1]+4129170786&4294967295,I=N+(B<<5&4294967295|B>>>27),B=z+(N^j&(I^N))+L[6]+3225465664&4294967295,z=I+(B<<9&4294967295|B>>>23),B=j+(I^N&(z^I))+L[11]+643717713&4294967295,j=z+(B<<14&4294967295|B>>>18),B=N+(z^I&(j^z))+L[0]+3921069994&4294967295,N=j+(B<<20&4294967295|B>>>12),B=I+(j^z&(N^j))+L[5]+3593408605&4294967295,I=N+(B<<5&4294967295|B>>>27),B=z+(N^j&(I^N))+L[10]+38016083&4294967295,z=I+(B<<9&4294967295|B>>>23),B=j+(I^N&(z^I))+L[15]+3634488961&4294967295,j=z+(B<<14&4294967295|B>>>18),B=N+(z^I&(j^z))+L[4]+3889429448&4294967295,N=j+(B<<20&4294967295|B>>>12),B=I+(j^z&(N^j))+L[9]+568446438&4294967295,I=N+(B<<5&4294967295|B>>>27),B=z+(N^j&(I^N))+L[14]+3275163606&4294967295,z=I+(B<<9&4294967295|B>>>23),B=j+(I^N&(z^I))+L[3]+4107603335&4294967295,j=z+(B<<14&4294967295|B>>>18),B=N+(z^I&(j^z))+L[8]+1163531501&4294967295,N=j+(B<<20&4294967295|B>>>12),B=I+(j^z&(N^j))+L[13]+2850285829&4294967295,I=N+(B<<5&4294967295|B>>>27),B=z+(N^j&(I^N))+L[2]+4243563512&4294967295,z=I+(B<<9&4294967295|B>>>23),B=j+(I^N&(z^I))+L[7]+1735328473&4294967295,j=z+(B<<14&4294967295|B>>>18),B=N+(z^I&(j^z))+L[12]+2368359562&4294967295,N=j+(B<<20&4294967295|B>>>12),B=I+(N^j^z)+L[5]+4294588738&4294967295,I=N+(B<<4&4294967295|B>>>28),B=z+(I^N^j)+L[8]+2272392833&4294967295,z=I+(B<<11&4294967295|B>>>21),B=j+(z^I^N)+L[11]+1839030562&4294967295,j=z+(B<<16&4294967295|B>>>16),B=N+(j^z^I)+L[14]+4259657740&4294967295,N=j+(B<<23&4294967295|B>>>9),B=I+(N^j^z)+L[1]+2763975236&4294967295,I=N+(B<<4&4294967295|B>>>28),B=z+(I^N^j)+L[4]+1272893353&4294967295,z=I+(B<<11&4294967295|B>>>21),B=j+(z^I^N)+L[7]+4139469664&4294967295,j=z+(B<<16&4294967295|B>>>16),B=N+(j^z^I)+L[10]+3200236656&4294967295,N=j+(B<<23&4294967295|B>>>9),B=I+(N^j^z)+L[13]+681279174&4294967295,I=N+(B<<4&4294967295|B>>>28),B=z+(I^N^j)+L[0]+3936430074&4294967295,z=I+(B<<11&4294967295|B>>>21),B=j+(z^I^N)+L[3]+3572445317&4294967295,j=z+(B<<16&4294967295|B>>>16),B=N+(j^z^I)+L[6]+76029189&4294967295,N=j+(B<<23&4294967295|B>>>9),B=I+(N^j^z)+L[9]+3654602809&4294967295,I=N+(B<<4&4294967295|B>>>28),B=z+(I^N^j)+L[12]+3873151461&4294967295,z=I+(B<<11&4294967295|B>>>21),B=j+(z^I^N)+L[15]+530742520&4294967295,j=z+(B<<16&4294967295|B>>>16),B=N+(j^z^I)+L[2]+3299628645&4294967295,N=j+(B<<23&4294967295|B>>>9),B=I+(j^(N|~z))+L[0]+4096336452&4294967295,I=N+(B<<6&4294967295|B>>>26),B=z+(N^(I|~j))+L[7]+1126891415&4294967295,z=I+(B<<10&4294967295|B>>>22),B=j+(I^(z|~N))+L[14]+2878612391&4294967295,j=z+(B<<15&4294967295|B>>>17),B=N+(z^(j|~I))+L[5]+4237533241&4294967295,N=j+(B<<21&4294967295|B>>>11),B=I+(j^(N|~z))+L[12]+1700485571&4294967295,I=N+(B<<6&4294967295|B>>>26),B=z+(N^(I|~j))+L[3]+2399980690&4294967295,z=I+(B<<10&4294967295|B>>>22),B=j+(I^(z|~N))+L[10]+4293915773&4294967295,j=z+(B<<15&4294967295|B>>>17),B=N+(z^(j|~I))+L[1]+2240044497&4294967295,N=j+(B<<21&4294967295|B>>>11),B=I+(j^(N|~z))+L[8]+1873313359&4294967295,I=N+(B<<6&4294967295|B>>>26),B=z+(N^(I|~j))+L[15]+4264355552&4294967295,z=I+(B<<10&4294967295|B>>>22),B=j+(I^(z|~N))+L[6]+2734768916&4294967295,j=z+(B<<15&4294967295|B>>>17),B=N+(z^(j|~I))+L[13]+1309151649&4294967295,N=j+(B<<21&4294967295|B>>>11),B=I+(j^(N|~z))+L[4]+4149444226&4294967295,I=N+(B<<6&4294967295|B>>>26),B=z+(N^(I|~j))+L[11]+3174756917&4294967295,z=I+(B<<10&4294967295|B>>>22),B=j+(I^(z|~N))+L[2]+718787259&4294967295,j=z+(B<<15&4294967295|B>>>17),B=N+(z^(j|~I))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+I&4294967295,M.g[1]=M.g[1]+(j+(B<<21&4294967295|B>>>11))&4294967295,M.g[2]=M.g[2]+j&4294967295,M.g[3]=M.g[3]+z&4294967295}r.prototype.u=function(M,I){I===void 0&&(I=M.length);for(var N=I-this.blockSize,L=this.B,j=this.h,z=0;z<I;){if(j==0)for(;z<=N;)i(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<I;)if(L[j++]=M.charCodeAt(z++),j==this.blockSize){i(this,L),j=0;break}}else for(;z<I;)if(L[j++]=M[z++],j==this.blockSize){i(this,L),j=0;break}}this.h=j,this.o+=I},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var I=1;I<M.length-8;++I)M[I]=0;var N=8*this.o;for(I=M.length-8;I<M.length;++I)M[I]=N&255,N/=256;for(this.u(M),M=Array(16),I=N=0;4>I;++I)for(var L=0;32>L;L+=8)M[N++]=this.g[I]>>>L&255;return M};function s(M,I){var N=o;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=I(M)}function a(M,I){this.h=I;for(var N=[],L=!0,j=M.length-1;0<=j;j--){var z=M[j]|0;L&&z==I||(N[j]=z,L=!1)}this.g=N}var o={};function l(M){return-128<=M&&128>M?s(M,function(I){return new a([I|0],0>I?-1:0)}):new a([M|0],0>M?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return p;if(0>M)return b(h(-M));for(var I=[],N=1,L=0;M>=N;L++)I[L]=M/N|0,N*=4294967296;return new a(I,0)}function f(M,I){if(M.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(M.charAt(0)=="-")return b(f(M.substring(1),I));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(I,8)),L=p,j=0;j<M.length;j+=8){var z=Math.min(8,M.length-j),B=parseInt(M.substring(j,j+z),I);8>z?(z=h(Math.pow(I,z)),L=L.j(z).add(h(B))):(L=L.j(N),L=L.add(h(B)))}return L}var p=l(0),m=l(1),v=l(16777216);n=a.prototype,n.m=function(){if(E(this))return-b(this).m();for(var M=0,I=1,N=0;N<this.g.length;N++){var L=this.i(N);M+=(0<=L?L:4294967296+L)*I,I*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(x(this))return"0";if(E(this))return"-"+b(this).toString(M);for(var I=h(Math.pow(M,6)),N=this,L="";;){var j=P(N,I).g;N=T(N,j.j(I));var z=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=j,x(N))return z+L;for(;6>z.length;)z="0"+z;L=z+L}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function x(M){if(M.h!=0)return!1;for(var I=0;I<M.g.length;I++)if(M.g[I]!=0)return!1;return!0}function E(M){return M.h==-1}n.l=function(M){return M=T(this,M),E(M)?-1:x(M)?0:1};function b(M){for(var I=M.g.length,N=[],L=0;L<I;L++)N[L]=~M.g[L];return new a(N,~M.h).add(m)}n.abs=function(){return E(this)?b(this):this},n.add=function(M){for(var I=Math.max(this.g.length,M.g.length),N=[],L=0,j=0;j<=I;j++){var z=L+(this.i(j)&65535)+(M.i(j)&65535),B=(z>>>16)+(this.i(j)>>>16)+(M.i(j)>>>16);L=B>>>16,z&=65535,B&=65535,N[j]=B<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function T(M,I){return M.add(b(I))}n.j=function(M){if(x(this)||x(M))return p;if(E(this))return E(M)?b(this).j(b(M)):b(b(this).j(M));if(E(M))return b(this.j(b(M)));if(0>this.l(v)&&0>M.l(v))return h(this.m()*M.m());for(var I=this.g.length+M.g.length,N=[],L=0;L<2*I;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<M.g.length;j++){var z=this.i(L)>>>16,B=this.i(L)&65535,yt=M.i(j)>>>16,wt=M.i(j)&65535;N[2*L+2*j]+=B*wt,S(N,2*L+2*j),N[2*L+2*j+1]+=z*wt,S(N,2*L+2*j+1),N[2*L+2*j+1]+=B*yt,S(N,2*L+2*j+1),N[2*L+2*j+2]+=z*yt,S(N,2*L+2*j+2)}for(L=0;L<I;L++)N[L]=N[2*L+1]<<16|N[2*L];for(L=I;L<2*I;L++)N[L]=0;return new a(N,0)};function S(M,I){for(;(M[I]&65535)!=M[I];)M[I+1]+=M[I]>>>16,M[I]&=65535,I++}function D(M,I){this.g=M,this.h=I}function P(M,I){if(x(I))throw Error("division by zero");if(x(M))return new D(p,p);if(E(M))return I=P(b(M),I),new D(b(I.g),b(I.h));if(E(I))return I=P(M,b(I)),new D(b(I.g),I.h);if(30<M.g.length){if(E(M)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var N=m,L=I;0>=L.l(M);)N=k(N),L=k(L);var j=U(N,1),z=U(L,1);for(L=U(L,2),N=U(N,2);!x(L);){var B=z.add(L);0>=B.l(M)&&(j=j.add(N),z=B),L=U(L,1),N=U(N,1)}return I=T(M,j.j(I)),new D(j,I)}for(j=p;0<=M.l(I);){for(N=Math.max(1,Math.floor(M.m()/I.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),z=h(N),B=z.j(I);E(B)||0<B.l(M);)N-=L,z=h(N),B=z.j(I);x(z)&&(z=m),j=j.add(z),M=T(M,B)}return new D(j,M)}n.A=function(M){return P(this,M).h},n.and=function(M){for(var I=Math.max(this.g.length,M.g.length),N=[],L=0;L<I;L++)N[L]=this.i(L)&M.i(L);return new a(N,this.h&M.h)},n.or=function(M){for(var I=Math.max(this.g.length,M.g.length),N=[],L=0;L<I;L++)N[L]=this.i(L)|M.i(L);return new a(N,this.h|M.h)},n.xor=function(M){for(var I=Math.max(this.g.length,M.g.length),N=[],L=0;L<I;L++)N[L]=this.i(L)^M.i(L);return new a(N,this.h^M.h)};function k(M){for(var I=M.g.length+1,N=[],L=0;L<I;L++)N[L]=M.i(L)<<1|M.i(L-1)>>>31;return new a(N,M.h)}function U(M,I){var N=I>>5;I%=32;for(var L=M.g.length-N,j=[],z=0;z<L;z++)j[z]=0<I?M.i(z+N)>>>I|M.i(z+N+1)<<32-I:M.i(z+N);return new a(j,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,N5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,dc=a}).apply(typeof _N<"u"?_N:typeof self<"u"?self:typeof window<"u"?window:{});var e1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M5,Dp,P5,F1,Pb,k5,L5,V5;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,O){return y==Array.prototype||y==Object.prototype||(y[A]=O.value),y};function e(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof e1=="object"&&e1];for(var A=0;A<y.length;++A){var O=y[A];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=e(this);function i(y,A){if(A)t:{var O=r;y=y.split(".");for(var H=0;H<y.length-1;H++){var X=y[H];if(!(X in O))break t;O=O[X]}y=y[y.length-1],H=O[y],A=A(H),A!=H&&A!=null&&t(O,y,{configurable:!0,writable:!0,value:A})}}function s(y,A){y instanceof String&&(y+="");var O=0,H=!1,X={next:function(){if(!H&&O<y.length){var ct=O++;return{value:A(ct,y[ct]),done:!1}}return H=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(y){return y||function(){return s(this,function(A,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function h(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function f(y,A,O){return y.call.apply(y.bind,arguments)}function p(y,A,O){if(!y)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,H),y.apply(A,X)}}return function(){return y.apply(A,arguments)}}function m(y,A,O){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function v(y,A){var O=Array.prototype.slice.call(arguments,1);return function(){var H=O.slice();return H.push.apply(H,arguments),y.apply(this,H)}}function x(y,A){function O(){}O.prototype=A.prototype,y.aa=A.prototype,y.prototype=new O,y.prototype.constructor=y,y.Qb=function(H,X,ct){for(var At=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)At[ge-2]=arguments[ge];return A.prototype[X].apply(H,At)}}function E(y){const A=y.length;if(0<A){const O=Array(A);for(let H=0;H<A;H++)O[H]=y[H];return O}return[]}function b(y,A){for(let O=1;O<arguments.length;O++){const H=arguments[O];if(l(H)){const X=y.length||0,ct=H.length||0;y.length=X+ct;for(let At=0;At<ct;At++)y[X+At]=H[At]}else y.push(H)}}class T{constructor(A,O){this.i=A,this.j=O,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function S(y){return/^[\s\xa0]*$/.test(y)}function D(){var y=o.navigator;return y&&(y=y.userAgent)?y:""}function P(y){return P[" "](y),y}P[" "]=function(){};var k=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function U(y,A,O){for(const H in y)A.call(O,y[H],H,y)}function M(y,A){for(const O in y)A.call(void 0,y[O],O,y)}function I(y){const A={};for(const O in y)A[O]=y[O];return A}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(y,A){let O,H;for(let X=1;X<arguments.length;X++){H=arguments[X];for(O in H)y[O]=H[O];for(let ct=0;ct<N.length;ct++)O=N[ct],Object.prototype.hasOwnProperty.call(H,O)&&(y[O]=H[O])}}function j(y){var A=1;y=y.split(":");const O=[];for(;0<A&&y.length;)O.push(y.shift()),A--;return y.length&&O.push(y.join(":")),O}function z(y){o.setTimeout(()=>{throw y},0)}function B(){var y=Z;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class yt{constructor(){this.h=this.g=null}add(A,O){const H=wt.get();H.set(A,O),this.h?this.h.next=H:this.g=H,this.h=H}}var wt=new T(()=>new Y,y=>y.reset());class Y{constructor(){this.next=this.g=this.h=null}set(A,O){this.h=A,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let at,vt=!1,Z=new yt,F=()=>{const y=o.Promise.resolve(void 0);at=()=>{y.then($)}};var $=()=>{for(var y;y=B();){try{y.h.call(y.g)}catch(O){z(O)}var A=wt;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}vt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const O=()=>{};o.addEventListener("test",O,A),o.removeEventListener("test",O,A)}catch{}return y}();function mt(y,A){if(tt.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var O=this.type=y.type,H=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(k){t:{try{P(A.nodeName);var X=!0;break t}catch{}X=!1}X||(A=null)}}else O=="mouseover"?A=y.fromElement:O=="mouseout"&&(A=y.toElement);this.relatedTarget=A,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Et[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&mt.aa.h.call(this)}}x(mt,tt);var Et={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Qt="closure_listenable_"+(1e6*Math.random()|0),Mt=0;function Rt(y,A,O,H,X){this.listener=y,this.proxy=null,this.src=A,this.type=O,this.capture=!!H,this.ha=X,this.key=++Mt,this.da=this.fa=!1}function Ut(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Jt(y){this.src=y,this.g={},this.h=0}Jt.prototype.add=function(y,A,O,H,X){var ct=y.toString();y=this.g[ct],y||(y=this.g[ct]=[],this.h++);var At=Se(y,A,H,X);return-1<At?(A=y[At],O||(A.fa=!1)):(A=new Rt(A,this.src,ct,!!H,X),A.fa=O,y.push(A)),A};function Re(y,A){var O=A.type;if(O in y.g){var H=y.g[O],X=Array.prototype.indexOf.call(H,A,void 0),ct;(ct=0<=X)&&Array.prototype.splice.call(H,X,1),ct&&(Ut(A),y.g[O].length==0&&(delete y.g[O],y.h--))}}function Se(y,A,O,H){for(var X=0;X<y.length;++X){var ct=y[X];if(!ct.da&&ct.listener==A&&ct.capture==!!O&&ct.ha==H)return X}return-1}var It="closure_lm_"+(1e6*Math.random()|0),Gt={};function qt(y,A,O,H,X){if(Array.isArray(A)){for(var ct=0;ct<A.length;ct++)qt(y,A[ct],O,H,X);return null}return O=fe(O),y&&y[Qt]?y.K(A,O,h(H)?!!H.capture:!1,X):Vt(y,A,O,!1,H,X)}function Vt(y,A,O,H,X,ct){if(!A)throw Error("Invalid event type");var At=h(X)?!!X.capture:!!X,ge=rr(y);if(ge||(y[It]=ge=new Jt(y)),O=ge.add(A,O,H,At,ct),O.proxy)return O;if(H=bt(),O.proxy=H,H.src=y,H.listener=O,y.addEventListener)gt||(X=At),X===void 0&&(X=!1),y.addEventListener(A.toString(),H,X);else if(y.attachEvent)y.attachEvent(xe(A.toString()),H);else if(y.addListener&&y.removeListener)y.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return O}function bt(){function y(O){return A.call(y.src,y.listener,O)}const A=hn;return y}function en(y,A,O,H,X){if(Array.isArray(A))for(var ct=0;ct<A.length;ct++)en(y,A[ct],O,H,X);else H=h(H)?!!H.capture:!!H,O=fe(O),y&&y[Qt]?(y=y.i,A=String(A).toString(),A in y.g&&(ct=y.g[A],O=Se(ct,O,H,X),-1<O&&(Ut(ct[O]),Array.prototype.splice.call(ct,O,1),ct.length==0&&(delete y.g[A],y.h--)))):y&&(y=rr(y))&&(A=y.g[A.toString()],y=-1,A&&(y=Se(A,O,H,X)),(O=-1<y?A[y]:null)&&ae(O))}function ae(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[Qt])Re(A.i,y);else{var O=y.type,H=y.proxy;A.removeEventListener?A.removeEventListener(O,H,y.capture):A.detachEvent?A.detachEvent(xe(O),H):A.addListener&&A.removeListener&&A.removeListener(H),(O=rr(A))?(Re(O,y),O.h==0&&(O.src=null,A[It]=null)):Ut(y)}}}function xe(y){return y in Gt?Gt[y]:Gt[y]="on"+y}function hn(y,A){if(y.da)y=!0;else{A=new mt(A,this);var O=y.listener,H=y.ha||y.src;y.fa&&ae(y),y=O.call(H,A)}return y}function rr(y){return y=y[It],y instanceof Jt?y:null}var Dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(y){return typeof y=="function"?y:(y[Dt]||(y[Dt]=function(A){return y.handleEvent(A)}),y[Dt])}function be(){ot.call(this),this.i=new Jt(this),this.M=this,this.F=null}x(be,ot),be.prototype[Qt]=!0,be.prototype.removeEventListener=function(y,A,O,H){en(this,y,A,O,H)};function pe(y,A){var O,H=y.F;if(H)for(O=[];H;H=H.F)O.push(H);if(y=y.M,H=A.type||A,typeof A=="string")A=new tt(A,y);else if(A instanceof tt)A.target=A.target||y;else{var X=A;A=new tt(H,y),L(A,X)}if(X=!0,O)for(var ct=O.length-1;0<=ct;ct--){var At=A.g=O[ct];X=ir(At,H,!0,A)&&X}if(At=A.g=y,X=ir(At,H,!0,A)&&X,X=ir(At,H,!1,A)&&X,O)for(ct=0;ct<O.length;ct++)At=A.g=O[ct],X=ir(At,H,!1,A)&&X}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var O=y.g[A],H=0;H<O.length;H++)Ut(O[H]);delete y.g[A],y.h--}}this.F=null},be.prototype.K=function(y,A,O,H){return this.i.add(String(y),A,!1,O,H)},be.prototype.L=function(y,A,O,H){return this.i.add(String(y),A,!0,O,H)};function ir(y,A,O,H){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var X=!0,ct=0;ct<A.length;++ct){var At=A[ct];if(At&&!At.da&&At.capture==O){var ge=At.listener,Gn=At.ha||At.src;At.fa&&Re(y.i,At),X=ge.call(Gn,H)!==!1&&X}}return X&&!H.defaultPrevented}function kn(y,A,O){if(typeof y=="function")O&&(y=m(y,O));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:o.setTimeout(y,A||0)}function Ir(y){y.g=kn(()=>{y.g=null,y.i&&(y.i=!1,Ir(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class mr extends ot{constructor(A,O){super(),this.m=A,this.l=O,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(y){ot.call(this),this.h=y,this.g={}}x(vr,ot);var Jr=[];function ti(y){U(y.g,function(A,O){this.g.hasOwnProperty(O)&&ae(A)},y),y.g={}}vr.prototype.N=function(){vr.aa.N.call(this),ti(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=o.JSON.stringify,ya=o.JSON.parse,Cs=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function Yf(){}Yf.prototype.h=null;function Kf(y){return y.h||(y.h=y.i())}function Xf(){}var _a={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xa(){tt.call(this,"d")}x(xa,tt);function Qf(){tt.call(this,"c")}x(Qf,tt);var Is={},Zf=null;function po(){return Zf=Zf||new be}Is.La="serverreachability";function Tu(y){tt.call(this,Is.La,y)}x(Tu,tt);function go(y){const A=po();pe(A,new Tu(A))}Is.STAT_EVENT="statevent";function m0(y,A){tt.call(this,Is.STAT_EVENT,y),this.stat=A}x(m0,tt);function an(y){const A=po();pe(A,new m0(A,y))}Is.Ma="timingevent";function zn(y,A){tt.call(this,Is.Ma,y),this.size=A}x(zn,tt);function Ln(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},A)}function ki(){this.g=!0}ki.prototype.xa=function(){this.g=!1};function Jf(y,A,O,H,X,ct){y.info(function(){if(y.g)if(ct)for(var At="",ge=ct.split("&"),Gn=0;Gn<ge.length;Gn++){var me=ge[Gn].split("=");if(1<me.length){var ar=me[0];me=me[1];var Wn=ar.split("_");At=2<=Wn.length&&Wn[1]=="type"?At+(ar+"="+me+"&"):At+(ar+"=redacted&")}}else At=null;else At=ct;return"XMLHTTP REQ ("+H+") [attempt "+X+"]: "+A+`
`+O+`
`+At})}function Jy(y,A,O,H,X,ct,At){y.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+X+"]: "+A+`
`+O+`
`+ct+" "+At})}function mo(y,A,O,H){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+Fc(y,O)+(H?" "+H:"")})}function v0(y,A){y.info(function(){return"TIMEOUT: "+A})}ki.prototype.info=function(){};function Fc(y,A){if(!y.g)return A;if(!A)return null;try{var O=JSON.parse(A);if(O){for(y=0;y<O.length;y++)if(Array.isArray(O[y])){var H=O[y];if(!(2>H.length)){var X=H[1];if(Array.isArray(X)&&!(1>X.length)){var ct=X[0];if(ct!="noop"&&ct!="stop"&&ct!="close")for(var At=1;At<X.length;At++)X[At]=""}}}}return ei(O)}catch{return A}}var vo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ds;function Os(){}x(Os,Yf),Os.prototype.g=function(){return new XMLHttpRequest},Os.prototype.i=function(){return{}},Ds=new Os;function Hr(y,A,O,H){this.j=y,this.i=A,this.l=O,this.R=H||1,this.U=new vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tn}function Tn(){this.i=null,this.g="",this.h=!1}var td={},Su={};function cs(y,A,O){y.L=1,y.v=Gc(mi(A)),y.m=O,y.P=!0,Ea(y,null)}function Ea(y,A){y.F=Date.now(),Uc(y),y.A=mi(y.v);var O=y.A,H=y.R;Array.isArray(H)||(H=[String(H)]),ad(O.i,"t",H),y.C=0,O=y.j.J,y.h=new Tn,y.g=M0(y.j,O?A:null,!y.m),0<y.O&&(y.M=new mr(m(y.Y,y,y.g),y.O)),A=y.U,O=y.g,H=y.ca;var X="readystatechange";Array.isArray(X)||(X&&(Jr[0]=X.toString()),X=Jr);for(var ct=0;ct<X.length;ct++){var At=qt(O,X[ct],H||A.handleEvent,!1,A.h||A);if(!At)break;A.g[At.key]=At}A=y.H?I(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),go(),Jf(y.i,y.u,y.A,y.l,y.R,y.m)}Hr.prototype.ca=function(y){y=y.target;const A=this.M;A&&Fi(y)==3?A.j():this.Y(y)},Hr.prototype.Y=function(y){try{if(y==this.g)t:{const Wn=Fi(this.g);var A=this.g.Ba();const Oa=this.g.Z();if(!(3>Wn)&&(Wn!=3||this.g&&(this.h.h||this.g.oa()||T0(this.g)))){this.J||Wn!=4||A==7||(A==8||0>=Oa?go(3):go(2)),yo(this);var O=this.g.Z();this.X=O;e:if(y0(this)){var H=T0(this.g);y="";var X=H.length,ct=Fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yr(this),Rs(this);var At="";break e}this.h.i=new o.TextDecoder}for(A=0;A<X;A++)this.h.h=!0,y+=this.h.i.decode(H[A],{stream:!(ct&&A==X-1)});H.length=0,this.h.g+=y,this.C=0,At=this.h.g}else At=this.g.oa();if(this.o=O==200,Jy(this.i,this.u,this.A,this.l,this.R,Wn,O),this.o){if(this.T&&!this.K){e:{if(this.g){var ge,Gn=this.g;if((ge=Gn.g?Gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(ge)){var me=ge;break e}}me=null}if(O=me)mo(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jc(this,O);else{this.o=!1,this.s=3,an(12),yr(this),Rs(this);break t}}if(this.P){O=!0;let _r;for(;!this.J&&this.C<At.length;)if(_r=_0(this,At),_r==Su){Wn==4&&(this.s=4,an(14),O=!1),mo(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==td){this.s=4,an(15),mo(this.i,this.l,At,"[Invalid Chunk]"),O=!1;break}else mo(this.i,this.l,_r,null),jc(this,_r);if(y0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wn!=4||At.length!=0||this.h.h||(this.s=1,an(16),O=!1),this.o=this.o&&O,!O)mo(this.i,this.l,At,"[Invalid Chunked Response]"),yr(this),Rs(this);else if(0<At.length&&!this.W){this.W=!0;var ar=this.j;ar.g==this&&ar.ba&&!ar.M&&(ar.j.info("Great, no buffering proxy detected. Bytes received: "+At.length),Zc(ar),ar.M=!0,an(11))}}else mo(this.i,this.l,At,null),jc(this,At);Wn==4&&yr(this),this.o&&!this.J&&(Wn==4?O0(this.j,this):(this.o=!1,Uc(this)))}else i_(this.g),O==400&&0<At.indexOf("Unknown SID")?(this.s=3,an(12)):(this.s=0,an(13)),yr(this),Rs(this)}}}catch{}finally{}};function y0(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function _0(y,A){var O=y.C,H=A.indexOf(`
`,O);return H==-1?Su:(O=Number(A.substring(O,H)),isNaN(O)?td:(H+=1,H+O>A.length?Su:(A=A.slice(H,H+O),y.C=H+O,A)))}Hr.prototype.cancel=function(){this.J=!0,yr(this)};function Uc(y){y.S=Date.now()+y.I,x0(y,y.I)}function x0(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Ln(m(y.ba,y),A)}function yo(y){y.B&&(o.clearTimeout(y.B),y.B=null)}Hr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(v0(this.i,this.A),this.L!=2&&(go(),an(17)),yr(this),this.s=2,Rs(this)):x0(this,this.S-y)};function Rs(y){y.j.G==0||y.J||O0(y.j,y)}function yr(y){yo(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,ti(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function jc(y,A){try{var O=y.j;if(O.G!=0&&(O.g==y||ed(O.h,y))){if(!y.K&&ed(O.h,y)&&O.G==3){try{var H=O.Da.g.parse(A)}catch{H=null}if(Array.isArray(H)&&H.length==3){var X=H;if(X[0]==0){t:if(!O.u){if(O.g)if(O.g.F+3e3<y.F)Bu(O),Lu(O);else break t;hd(O),an(18)}}else O.za=X[1],0<O.za-O.T&&37500>X[2]&&O.F&&O.v==0&&!O.C&&(O.C=Ln(m(O.Za,O),6e3));if(1>=Iu(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else Da(O,11)}else if((y.K||O.g==y)&&Bu(O),!S(A))for(X=O.Da.g.parse(A),A=0;A<X.length;A++){let me=X[A];if(O.T=me[0],me=me[1],O.G==2)if(me[0]=="c"){O.K=me[1],O.ia=me[2];const ar=me[3];ar!=null&&(O.la=ar,O.j.info("VER="+O.la));const Wn=me[4];Wn!=null&&(O.Aa=Wn,O.j.info("SVER="+O.Aa));const Oa=me[5];Oa!=null&&typeof Oa=="number"&&0<Oa&&(H=1.5*Oa,O.L=H,O.j.info("backChannelRequestTimeoutMs_="+H)),H=O;const _r=y.g;if(_r){const Bs=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var ct=H.h;ct.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(ct.j=ct.l,ct.g=new Set,ct.h&&(Du(ct,ct.h),ct.h=null))}if(H.D){const dd=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;dd&&(H.ya=dd,Ge(H.I,H.D,dd))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-y.F,O.j.info("Handshake RTT: "+O.R+"ms")),H=O;var At=y;if(H.qa=N0(H,H.J?H.ia:null,H.W),At.K){zr(H.h,At);var ge=At,Gn=H.L;Gn&&(ge.I=Gn),ge.B&&(yo(ge),Uc(ge)),H.g=At}else I0(H);0<O.i.length&&Vu(O)}else me[0]!="stop"&&me[0]!="close"||Da(O,7);else O.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Da(O,7):ld(O):me[0]!="noop"&&O.l&&O.l.ta(me),O.v=0)}}go(4)}catch{}}var w0=class{constructor(y,A){this.g=y,this.map=A}};function ba(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cu(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Iu(y){return y.h?1:y.g?y.g.size:0}function ed(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function Du(y,A){y.g?y.g.add(A):y.h=A}function zr(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}ba.prototype.cancel=function(){if(this.i=nd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function nd(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const O of y.g.values())A=A.concat(O.D);return A}return E(y.i)}function t_(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var A=[],O=y.length,H=0;H<O;H++)A.push(y[H]);return A}A=[],O=0;for(H in y)A[O++]=y[H];return A}function Ou(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var A=[];y=y.length;for(var O=0;O<y;O++)A.push(O);return A}A=[],O=0;for(const H in y)A[O++]=H;return A}}}function rd(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var O=Ou(y),H=t_(y),X=H.length,ct=0;ct<X;ct++)A.call(void 0,H[ct],O&&O[ct],y)}var Hc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e_(y,A){if(y){y=y.split("&");for(var O=0;O<y.length;O++){var H=y[O].indexOf("="),X=null;if(0<=H){var ct=y[O].substring(0,H);X=y[O].substring(H+1)}else ct=y[O];A(ct,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Vn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Vn){this.h=y.h,zc(this,y.j),this.o=y.o,this.g=y.g,_o(this,y.s),this.l=y.l;var A=y.i,O=new Ta;O.i=A.i,A.g&&(O.g=new Map(A.g),O.h=A.h),Aa(this,O),this.m=y.m}else y&&(A=String(y).match(Hc))?(this.h=!1,zc(this,A[1]||"",!0),this.o=Li(A[2]||""),this.g=Li(A[3]||"",!0),_o(this,A[4]),this.l=Li(A[5]||"",!0),Aa(this,A[6]||"",!0),this.m=Li(A[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}Vn.prototype.toString=function(){var y=[],A=this.j;A&&y.push(Wc(A,id,!0),":");var O=this.g;return(O||A=="file")&&(y.push("//"),(A=this.o)&&y.push(Wc(A,id,!0),"@"),y.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&y.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&y.push("/"),y.push(Wc(O,O.charAt(0)=="/"?n_:sd,!0))),(O=this.i.toString())&&y.push("?",O),(O=this.m)&&y.push("#",Wc(O,Ru)),y.join("")};function mi(y){return new Vn(y)}function zc(y,A,O){y.j=O?Li(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function _o(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function Aa(y,A,O){A instanceof Ta?(y.i=A,b0(y.i,y.h)):(O||(A=Wc(A,r_)),y.i=new Ta(A,y.h))}function Ge(y,A,O){y.i.set(A,O)}function Gc(y){return Ge(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Li(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Wc(y,A,O){return typeof y=="string"?(y=encodeURI(y).replace(A,E0),O&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function E0(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var id=/[#\/\?@]/g,sd=/[#\?:]/g,n_=/[#\?]/g,r_=/[#\?@]/g,Ru=/#/g;function Ta(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Vi(y){y.g||(y.g=new Map,y.h=0,y.i&&e_(y.i,function(A,O){y.add(decodeURIComponent(A.replace(/\+/g," ")),O)}))}n=Ta.prototype,n.add=function(y,A){Vi(this),this.i=null,y=Ns(this,y);var O=this.g.get(y);return O||this.g.set(y,O=[]),O.push(A),this.h+=1,this};function Sa(y,A){Vi(y),A=Ns(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function Ca(y,A){return Vi(y),A=Ns(y,A),y.g.has(A)}n.forEach=function(y,A){Vi(this),this.g.forEach(function(O,H){O.forEach(function(X){y.call(A,X,H,this)},this)},this)},n.na=function(){Vi(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),O=[];for(let H=0;H<A.length;H++){const X=y[H];for(let ct=0;ct<X.length;ct++)O.push(A[H])}return O},n.V=function(y){Vi(this);let A=[];if(typeof y=="string")Ca(this,y)&&(A=A.concat(this.g.get(Ns(this,y))));else{y=Array.from(this.g.values());for(let O=0;O<y.length;O++)A=A.concat(y[O])}return A},n.set=function(y,A){return Vi(this),this.i=null,y=Ns(this,y),Ca(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},n.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function ad(y,A,O){Sa(y,A),0<O.length&&(y.i=null,y.g.set(Ns(y,A),E(O)),y.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var O=0;O<A.length;O++){var H=A[O];const ct=encodeURIComponent(String(H)),At=this.V(H);for(H=0;H<At.length;H++){var X=ct;At[H]!==""&&(X+="="+encodeURIComponent(String(At[H]))),y.push(X)}}return this.i=y.join("&")};function Ns(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function b0(y,A){A&&!y.j&&(Vi(y),y.i=null,y.g.forEach(function(O,H){var X=H.toLowerCase();H!=X&&(Sa(this,H),ad(this,X,O))},y)),y.j=A}function $c(y,A){const O=new ki;if(o.Image){const H=new Image;H.onload=v(Bi,O,"TestLoadImage: loaded",!0,A,H),H.onerror=v(Bi,O,"TestLoadImage: error",!1,A,H),H.onabort=v(Bi,O,"TestLoadImage: abort",!1,A,H),H.ontimeout=v(Bi,O,"TestLoadImage: timeout",!1,A,H),o.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=y}else A(!1)}function ls(y,A){const O=new ki,H=new AbortController,X=setTimeout(()=>{H.abort(),Bi(O,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:H.signal}).then(ct=>{clearTimeout(X),ct.ok?Bi(O,"TestPingServer: ok",!0,A):Bi(O,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(X),Bi(O,"TestPingServer: error",!1,A)})}function Bi(y,A,O,H,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),H(O)}catch{}}function qc(){this.g=new Cs}function Ms(y,A,O){const H=O||"";try{rd(y,function(X,ct){let At=X;h(X)&&(At=ei(X)),A.push(H+ct+"="+encodeURIComponent(At))})}catch(X){throw A.push(H+"type="+encodeURIComponent("_badmap")),X}}function xo(y){this.l=y.Ub||null,this.j=y.eb||!1}x(xo,Yf),xo.prototype.g=function(){return new Ia(this.l,this.j)},xo.prototype.i=function(y){return function(){return y}}({});function Ia(y,A){be.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ia,be),n=Ia.prototype,n.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,ks(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||o).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;od(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function od(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?Ps(this):ks(this),this.readyState==3&&od(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,Ps(this))},n.Qa=function(y){this.g&&(this.response=y,Ps(this))},n.ga=function(){this.g&&Ps(this)};function Ps(y){y.readyState=4,y.l=null,y.j=null,y.v=null,ks(y)}n.setRequestHeader=function(y,A){this.u.append(y,A)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var O=A.next();!O.done;)O=O.value,y.push(O[0]+": "+O[1]),O=A.next();return y.join(`\r
`)};function ks(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function cd(y){let A="";return U(y,function(O,H){A+=H,A+=":",A+=O,A+=`\r
`}),A}function sr(y,A,O){t:{for(H in O){var H=!1;break t}H=!0}H||(O=cd(O),typeof y=="string"?O!=null&&encodeURIComponent(String(O)):Ge(y,A,O))}function Ne(y){be.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ne,be);var Nu=/^https?$/i,Yc=["POST","PUT"];n=Ne.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,A,O,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ds.g(),this.v=this.o?Kf(this.o):Kf(Ds),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(ct){A0(this,ct);return}if(y=O||"",O=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var X in H)O.set(X,H[X]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ct of H.keys())O.set(ct,H.get(ct));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(O.keys()).find(ct=>ct.toLowerCase()=="content-type"),X=o.FormData&&y instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Yc,A,void 0))||H||X||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ct,At]of O)this.g.setRequestHeader(ct,At);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kc(this),this.u=!0,this.g.send(y),this.u=!1}catch(ct){A0(this,ct)}};function A0(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,Mu(y),Ls(y)}function Mu(y){y.A||(y.A=!0,pe(y,"complete"),pe(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,pe(this,"complete"),pe(this,"abort"),Ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),Ne.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pu(this):this.bb())},n.bb=function(){Pu(this)};function Pu(y){if(y.h&&typeof a<"u"&&(!y.v[1]||Fi(y)!=4||y.Z()!=2)){if(y.u&&Fi(y)==4)kn(y.Ea,0,y);else if(pe(y,"readystatechange"),Fi(y)==4){y.h=!1;try{const At=y.Z();t:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var O;if(!(O=A)){var H;if(H=At===0){var X=String(y.D).match(Hc)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),H=!Nu.test(X?X.toLowerCase():"")}O=H}if(O)pe(y,"complete"),pe(y,"success");else{y.m=6;try{var ct=2<Fi(y)?y.g.statusText:""}catch{ct=""}y.l=ct+" ["+y.Z()+"]",Mu(y)}}finally{Ls(y)}}}}function Ls(y,A){if(y.g){Kc(y);const O=y.g,H=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||pe(y,"ready");try{O.onreadystatechange=H}catch{}}}function Kc(y){y.I&&(o.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function Fi(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<Fi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),ya(A)}};function T0(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function i_(y){const A={};y=(y.g&&2<=Fi(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<y.length;H++){if(S(y[H]))continue;var O=j(y[H]);const X=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ct=A[X]||[];A[X]=ct,ct.push(O)}M(A,function(H){return H.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xc(y,A,O){return O&&O.internalChannelParams&&O.internalChannelParams[y]||A}function ku(y){this.Aa=0,this.i=[],this.j=new ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xc("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xc("baseRetryDelayMs",5e3,y),this.cb=Xc("retryDelaySeedMs",1e4,y),this.Wa=Xc("forwardChannelMaxRetries",2,y),this.wa=Xc("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new ba(y&&y.concurrentRequestLimit),this.Da=new qc,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ku.prototype,n.la=8,n.G=1,n.connect=function(y,A,O,H){an(0),this.W=y,this.H=A||{},O&&H!==void 0&&(this.H.OSID=O,this.H.OAID=H),this.F=this.X,this.I=N0(this,null,this.W),Vu(this)};function ld(y){if(S0(y),y.G==3){var A=y.U++,O=mi(y.I);if(Ge(O,"SID",y.K),Ge(O,"RID",A),Ge(O,"TYPE","terminate"),Qc(y,O),A=new Hr(y,y.j,A),A.L=2,A.v=Gc(mi(O)),O=!1,o.navigator&&o.navigator.sendBeacon)try{O=o.navigator.sendBeacon(A.v.toString(),"")}catch{}!O&&o.Image&&(new Image().src=A.v,O=!0),O||(A.g=M0(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Uc(A)}R0(y)}function Lu(y){y.g&&(Zc(y),y.g.cancel(),y.g=null)}function S0(y){Lu(y),y.u&&(o.clearTimeout(y.u),y.u=null),Bu(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&o.clearTimeout(y.s),y.s=null)}function Vu(y){if(!Cu(y.h)&&!y.s){y.s=!0;var A=y.Ga;at||F(),vt||(at(),vt=!0),Z.add(A,y),y.B=0}}function s_(y,A){return Iu(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Ln(m(y.Ga,y,A),fd(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const X=new Hr(this,this.j,y);let ct=this.o;if(this.S&&(ct?(ct=I(ct),L(ct,this.S)):ct=this.S),this.m!==null||this.O||(X.H=ct,ct=null),this.P)t:{for(var A=0,O=0;O<this.i.length;O++){e:{var H=this.i[O];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break e}H=void 0}if(H===void 0)break;if(A+=H,4096<A){A=O;break t}if(A===4096||O===this.i.length-1){A=O+1;break t}}A=1e3}else A=1e3;A=C0(this,X,A),O=mi(this.I),Ge(O,"RID",y),Ge(O,"CVER",22),this.D&&Ge(O,"X-HTTP-Session-Id",this.D),Qc(this,O),ct&&(this.O?A="headers="+encodeURIComponent(String(cd(ct)))+"&"+A:this.m&&sr(O,this.m,ct)),Du(this.h,X),this.Ua&&Ge(O,"TYPE","init"),this.P?(Ge(O,"$req",A),Ge(O,"SID","null"),X.T=!0,cs(X,O,null)):cs(X,O,A),this.G=2}}else this.G==3&&(y?ud(this,y):this.i.length==0||Cu(this.h)||ud(this))};function ud(y,A){var O;A?O=A.l:O=y.U++;const H=mi(y.I);Ge(H,"SID",y.K),Ge(H,"RID",O),Ge(H,"AID",y.T),Qc(y,H),y.m&&y.o&&sr(H,y.m,y.o),O=new Hr(y,y.j,O,y.B+1),y.m===null&&(O.H=y.o),A&&(y.i=A.D.concat(y.i)),A=C0(y,O,1e3),O.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Du(y.h,O),cs(O,H,A)}function Qc(y,A){y.H&&U(y.H,function(O,H){Ge(A,H,O)}),y.l&&rd({},function(O,H){Ge(A,H,O)})}function C0(y,A,O){O=Math.min(y.i.length,O);var H=y.l?m(y.l.Na,y.l,y):null;t:{var X=y.i;let ct=-1;for(;;){const At=["count="+O];ct==-1?0<O?(ct=X[0].g,At.push("ofs="+ct)):ct=0:At.push("ofs="+ct);let ge=!0;for(let Gn=0;Gn<O;Gn++){let me=X[Gn].g;const ar=X[Gn].map;if(me-=ct,0>me)ct=Math.max(0,X[Gn].g-100),ge=!1;else try{Ms(ar,At,"req"+me+"_")}catch{H&&H(ar)}}if(ge){H=At.join("&");break t}}}return y=y.i.splice(0,O),A.D=y,H}function I0(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;at||F(),vt||(at(),vt=!0),Z.add(A,y),y.v=0}}function hd(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Ln(m(y.Fa,y),fd(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,D0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Ln(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,an(10),Lu(this),D0(this))};function Zc(y){y.A!=null&&(o.clearTimeout(y.A),y.A=null)}function D0(y){y.g=new Hr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=mi(y.qa);Ge(A,"RID","rpc"),Ge(A,"SID",y.K),Ge(A,"AID",y.T),Ge(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&Ge(A,"TO",y.ja),Ge(A,"TYPE","xmlhttp"),Qc(y,A),y.m&&y.o&&sr(A,y.m,y.o),y.L&&(y.g.I=y.L);var O=y.g;y=y.ia,O.L=1,O.v=Gc(mi(A)),O.m=null,O.P=!0,Ea(O,y)}n.Za=function(){this.C!=null&&(this.C=null,Lu(this),hd(this),an(19))};function Bu(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function O0(y,A){var O=null;if(y.g==A){Bu(y),Zc(y),y.g=null;var H=2}else if(ed(y.h,A))O=A.D,zr(y.h,A),H=1;else return;if(y.G!=0){if(A.o)if(H==1){O=A.m?A.m.length:0,A=Date.now()-A.F;var X=y.B;H=po(),pe(H,new zn(H,O)),Vu(y)}else I0(y);else if(X=A.s,X==3||X==0&&0<A.X||!(H==1&&s_(y,A)||H==2&&hd(y)))switch(O&&0<O.length&&(A=y.h,A.i=A.i.concat(O)),X){case 1:Da(y,5);break;case 4:Da(y,10);break;case 3:Da(y,6);break;default:Da(y,2)}}}function fd(y,A){let O=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(O*=2),O*A}function Da(y,A){if(y.j.info("Error code "+A),A==2){var O=m(y.fb,y),H=y.Xa;const X=!H;H=new Vn(H||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||zc(H,"https"),Gc(H),X?$c(H.toString(),O):ls(H.toString(),O)}else an(2);y.G=0,y.l&&y.l.sa(A),R0(y),S0(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function R0(y){if(y.G=0,y.ka=[],y.l){const A=nd(y.h);(A.length!=0||y.i.length!=0)&&(b(y.ka,A),b(y.ka,y.i),y.h.i.length=0,E(y.i),y.i.length=0),y.l.ra()}}function N0(y,A,O){var H=O instanceof Vn?mi(O):new Vn(O);if(H.g!="")A&&(H.g=A+"."+H.g),_o(H,H.s);else{var X=o.location;H=X.protocol,A=A?A+"."+X.hostname:X.hostname,X=+X.port;var ct=new Vn(null);H&&zc(ct,H),A&&(ct.g=A),X&&_o(ct,X),O&&(ct.l=O),H=ct}return O=y.D,A=y.ya,O&&A&&Ge(H,O,A),Ge(H,"VER",y.la),Qc(y,H),H}function M0(y,A,O){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new Ne(new xo({eb:O})):new Ne(y.pa),A.Ha(y.J),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function P0(){}n=P0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fu(){}Fu.prototype.g=function(y,A){return new Gr(y,A)};function Gr(y,A){be.call(this),this.g=new ku(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!S(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!S(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new Vs(this)}x(Gr,be),Gr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gr.prototype.close=function(){ld(this.g)},Gr.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var O={};O.__data__=y,y=O}else this.u&&(O={},O.__data__=ei(y),y=O);A.i.push(new w0(A.Ya++,y)),A.G==3&&Vu(A)},Gr.prototype.N=function(){this.g.l=null,delete this.j,ld(this.g),delete this.g,Gr.aa.N.call(this)};function k0(y){xa.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){t:{for(const O in A){y=O;break t}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}x(k0,xa);function L0(){Qf.call(this),this.status=1}x(L0,Qf);function Vs(y){this.g=y}x(Vs,P0),Vs.prototype.ua=function(){pe(this.g,"a")},Vs.prototype.ta=function(y){pe(this.g,new k0(y))},Vs.prototype.sa=function(y){pe(this.g,new L0)},Vs.prototype.ra=function(){pe(this.g,"b")},Fu.prototype.createWebChannel=Fu.prototype.g,Gr.prototype.send=Gr.prototype.o,Gr.prototype.open=Gr.prototype.m,Gr.prototype.close=Gr.prototype.close,V5=function(){return new Fu},L5=function(){return po()},k5=Is,Pb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vo.NO_ERROR=0,vo.TIMEOUT=8,vo.HTTP_ERROR=6,F1=vo,wa.COMPLETE="complete",P5=wa,Xf.EventType=_a,_a.OPEN="a",_a.CLOSE="b",_a.ERROR="c",_a.MESSAGE="d",be.prototype.listen=be.prototype.K,Dp=Xf,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,M5=Ne}).apply(typeof e1<"u"?e1:typeof self<"u"?self:typeof window<"u"?window:{});const xN="@firebase/firestore",wN="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new ly("@firebase/firestore");function Ch(){return su.logLevel}function _t(n,...t){if(su.logLevel<=he.DEBUG){const e=t.map(QA);su.debug(`Firestore (${Vf}): ${n}`,...e)}}function Dn(n,...t){if(su.logLevel<=he.ERROR){const e=t.map(QA);su.error(`Firestore (${Vf}): ${n}`,...e)}}function Sg(n,...t){if(su.logLevel<=he.WARN){const e=t.map(QA);su.warn(`Firestore (${Vf}): ${n}`,...e)}}function QA(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,B5(n,r,e)}function B5(n,t,e){let r=`FIRESTORE (${Vf}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Dn(r),new Error(r)}function Lt(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||B5(t,i,r)}function kt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends Ts{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ctt{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ltt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Mr.UNAUTHENTICATED))}shutdown(){}}class utt{constructor(t){this.t=t,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Lt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,e(l)):Promise.resolve();let s=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ca,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ca)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt(typeof r.accessToken=="string",31837,{l:r}),new ctt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Lt(t===null||typeof t=="string",2055,{h:t}),new Mr(t)}}class htt{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ftt{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new htt(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EN{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dtt{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Lt(this.o===void 0,3512);const r=s=>{s.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,_t("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new EN(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new EN(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ptt(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ptt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<e&&(r+=t.charAt(i[s]%62))}return r}}function Zt(n,t){return n<t?-1:n>t?1:0}function kb(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const i=n.charAt(r),s=t.charAt(r);if(i!==s)return jw(i)===jw(s)?Zt(i,s):jw(i)?1:-1}return Zt(n.length,t.length)}const gtt=55296,mtt=57343;function jw(n){const t=n.charCodeAt(0);return t>=gtt&&t<=mtt}function rf(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function F5(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="__name__";class qs{constructor(t,e,r){e===void 0?e=0:e>t.length&&Ot(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&Ot(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return qs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof qs?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const s=qs.compareSegments(t.get(i),e.get(i));if(s!==0)return s}return Zt(t.length,e.length)}static compareSegments(t,e){const r=qs.isNumericId(t),i=qs.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?qs.extractNumericId(t).compare(qs.extractNumericId(e)):kb(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return dc.fromString(t.substring(4,t.length-2))}}class Pe extends qs{construct(t,e,r){return new Pe(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new St(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Pe(e)}static emptyPath(){return new Pe([])}}const vtt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends qs{construct(t,e,r){return new gn(t,e,r)}static isValidIdentifier(t){return vtt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bN}static keyField(){return new gn([bN])}static fromServerFormat(t){const e=[];let r="",i=0;const s=()=>{if(r.length===0)throw new St(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let a=!1;for(;i<t.length;){const o=t[i];if(o==="\\"){if(i+1===t.length)throw new St(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new St(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new St(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new gn(e)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.path=t}static fromPath(t){return new Ct(Pe.fromString(t))}static fromName(t){return new Ct(Pe.fromString(t).popFirst(5))}static empty(){return new Ct(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Pe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ct(new Pe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(n,t,e){if(!e)throw new St(dt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function ytt(n,t,e,r){if(t===!0&&r===!0)throw new St(dt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function AN(n){if(!Ct.isDocumentKey(n))throw new St(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TN(n){if(Ct.isDocumentKey(n))throw new St(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function j5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function JA(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ot(12329,{type:typeof n})}function Di(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new St(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=JA(n);throw new St(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n,t){const e={typeString:n};return t&&(e.value=t),e}function Qg(n,t){if(!j5(n))throw new St(dt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){e=`Expected '${r}' field to equal '${s.value}'`;break}}if(e)throw new St(dt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=-62135596800,CN=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(t){return He.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*CN);return new He(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new St(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new St(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<SN)throw new St(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new St(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CN}_compareTo(t){return this.seconds===t.seconds?Zt(this.nanoseconds,t.nanoseconds):Zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qg(t,He._jsonSchema))return new He(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-SN;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:Hn("string",He._jsonSchemaVersion),seconds:Hn("number"),nanoseconds:Hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{static fromTimestamp(t){return new Ft(t)}static min(){return new Ft(new He(0,0))}static max(){return new Ft(new He(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=-1;class Sv{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function Lb(n){return n.fields.find(t=>t.kind===2)}function Tl(n){return n.fields.filter(t=>t.kind!==2)}Sv.UNKNOWN_ID=-1;class U1{constructor(t,e){this.fieldPath=t,this.kind=e}}class Cg{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Cg(0,Ri.min())}}function H5(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(r===1e9?new He(e+1,0):new He(e,r));return new Ri(i,Ct.empty(),t)}function z5(n){return new Ri(n.readTime,n.key,sf)}class Ri{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Ri(Ft.min(),Ct.empty(),sf)}static max(){return new Ri(Ft.max(),Ct.empty(),sf)}}function tT(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Ct.comparator(n.documentKey,t.documentKey),e!==0?e:Zt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(n){if(n.code!==dt.FAILED_PRECONDITION||n.message!==G5)throw n;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Q?e:Q.resolve(e)}catch(e){return Q.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.reject(e)}static resolve(t){return new Q((e,r)=>{e(t)})}static reject(t){return new Q((e,r)=>{r(t)})}static waitFor(t){return new Q((e,r)=>{let i=0,s=0,a=!1;t.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&e()},l=>r(l))}),a=!0,s===i&&e()})}static or(t){let e=Q.resolve(!1);for(const r of t)e=e.next(i=>i?Q.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,s)=>{r.push(e.call(this,i,s))}),this.waitFor(r)}static mapArray(t,e){return new Q((r,i)=>{const s=t.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(f=>{a[h]=f,++o,o===s&&r(a)},f=>i(f))}})}static doWhile(t,e){return new Q((r,i)=>{const s=()=>{t()===!0?e().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="SimpleDb";class gy{static open(t,e,r,i){try{return new gy(e,t.transaction(i,r))}catch(s){throw new Qp(e,s)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new ca,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Qp(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=eT(r.target.error);this.S.reject(new Qp(t,i))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(_t(Ti,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new xtt(e)}}class pc{static delete(t){return _t(Ti,"Removing database:",t),Ol(hk().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!MA())return!1;if(pc.F())return!0;const t=er(),e=pc.M(t),r=0<e&&e<10,i=$5(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,pc.M(er())===12.2&&Dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(_t(Ti,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;e(a)},i.onblocked=()=>{r(new Qp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new St(dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new St(dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Qp(t,a))},i.onupgradeneeded=s=>{_t(Ti,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next(()=>{_t(Ti,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,i){const s=e==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(t);const o=gy.open(this.db,t,s?"readonly":"readwrite",r),l=i(o).next(h=>(o.C(),h)).catch(h=>(o.abort(h),Q.reject(h))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,h=l.name!=="FirebaseError"&&a<3;if(_t(Ti,"Transaction failed with error:",l.message,"Retrying:",h),this.close(),!h)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function $5(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class _tt{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return Ol(this.U.delete())}}class Qp extends St{constructor(t,e){super(dt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Mc(n){return n.name==="IndexedDbTransactionError"}class xtt{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(_t(Ti,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(_t(Ti,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Ol(r)}add(t){return _t(Ti,"ADD",this.store.name,t,t),Ol(this.store.add(t))}get(t){return Ol(this.store.get(t)).next(e=>(e===void 0&&(e=null),_t(Ti,"GET",this.store.name,t,e),e))}delete(t){return _t(Ti,"DELETE",this.store.name,t),Ol(this.store.delete(t))}count(){return _t(Ti,"COUNT",this.store.name),Ol(this.store.count())}J(t,e){const r=this.options(t,e),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Q((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(r),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new Q((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}Z(t,e){_t(Ti,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const i=this.cursor(r);return this.H(i,(s,a,o)=>o.delete())}ee(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.H(i,e)}te(t){const e=this.cursor({});return new Q((r,i)=>{e.onerror=s=>{const a=eT(s.target.error);i(a)},e.onsuccess=s=>{const a=s.target.result;a?t(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(t,e){const r=[];return new Q((i,s)=>{t.onerror=a=>{s(a.target.error)},t.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new _tt(o),h=e(o.primaryKey,o.value,l);if(h instanceof Q){const f=h.catch(p=>(l.done(),Q.reject(p)));r.push(f)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}}).next(()=>Q.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Ol(n){return new Q((t,e)=>{n.onsuccess=r=>{const i=r.target.result;t(i)},n.onerror=r=>{const i=eT(r.target.error);e(i)}})}let IN=!1;function eT(n){const t=pc.M(er());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IN||(IN=!0,setTimeout(()=>{throw r},0)),r}}return n}const Zp="IndexBackfiller";class wtt{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){_t(Zp,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ne.ie();_t(Zp,`Documents written: ${e}`)}catch(e){Mc(e)?_t(Zp,"Ignoring IndexedDB error during index backfill: ",e):await Nc(e)}await this.re(6e4)})}}class Ett{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.se(e,t))}se(t,e){const r=new Set;let i=e,s=!0;return Q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(a!==null&&!r.has(a))return _t(Zp,`Processing collection: ${a}`),this.oe(t,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>e-i)}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this._e(i,s)).next(o=>(_t(Zp,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(t,e,o))).next(()=>a.size)}))}_e(t,e){let r=t;return e.changes.forEach((i,s)=>{const a=z5(s);tT(a,r)>0&&(r=a)}),new Ri(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}fi.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=-1;function my(n){return n==null}function Ig(n){return n===0&&1/n==-1/0}function q5(n){return typeof n=="number"&&Number.isInteger(n)&&!Ig(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="";function Fr(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=DN(t)),t=btt(n.get(e),t);return DN(t)}function btt(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":e+="";break;case Cv:e+="";break;default:e+=s}}return e}function DN(n){return n+Cv+""}function Zs(n){const t=n.length;if(Lt(t>=2,64408,{path:n}),t===2)return Lt(n.charAt(0)===Cv&&n.charAt(1)==="",56145,{path:n}),Pe.emptyPath();const e=t-2,r=[];let i="";for(let s=0;s<t;){const a=n.indexOf(Cv,s);switch((a<0||a>e)&&Ot(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Ot(61167,{path:n})}s=a+2}return new Pe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="remoteDocuments",Zg="owner",mh="owner",Dg="mutationQueues",Att="userId",vs="mutations",ON="batchId",Bl="userMutationsIndex",RN=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(n,t){return[n,Fr(t)]}function Y5(n,t,e){return[n,Fr(t),e]}const Ttt={},af="documentMutations",Iv="remoteDocumentsV14",Stt=["prefixPath","collectionGroup","readTime","documentId"],H1="documentKeyIndex",Ctt=["prefixPath","collectionGroup","documentId"],K5="collectionGroupIndex",Itt=["collectionGroup","readTime","prefixPath","documentId"],Og="remoteDocumentGlobal",Vb="remoteDocumentGlobalKey",of="targets",X5="queryTargetsIndex",Dtt=["canonicalId","targetId"],cf="targetDocuments",Ott=["targetId","path"],nT="documentTargetsIndex",Rtt=["path","targetId"],Dv="targetGlobalKey",ql="targetGlobal",Rg="collectionParents",Ntt=["collectionId","parent"],lf="clientMetadata",Mtt="clientId",vy="bundles",Ptt="bundleId",yy="namedQueries",ktt="name",rT="indexConfiguration",Ltt="indexId",Bb="collectionGroupIndex",Vtt="collectionGroup",Jp="indexState",Btt=["indexId","uid"],Q5="sequenceNumberIndex",Ftt=["uid","sequenceNumber"],tg="indexEntries",Utt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Z5="documentKeyIndex",jtt=["indexId","uid","orderedDocumentKey"],_y="documentOverlays",Htt=["userId","collectionPath","documentId"],Fb="collectionPathOverlayIndex",ztt=["userId","collectionPath","largestBatchId"],J5="collectionGroupOverlayIndex",Gtt=["userId","collectionGroup","largestBatchId"],iT="globals",Wtt="name",tL=[Dg,vs,af,Sl,of,Zg,ql,cf,lf,Og,Rg,vy,yy],$tt=[...tL,_y],eL=[Dg,vs,af,Iv,of,Zg,ql,cf,lf,Og,Rg,vy,yy,_y],nL=eL,sT=[...nL,rT,Jp,tg],qtt=sT,rL=[...sT,iT],Ytt=rL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends W5{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function nr(n,t){const e=kt(n);return pc.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Pc(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function iL(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,e){this.comparator=t,this.root=e||Sr.EMPTY}insert(t,e){return new tn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(t){return new tn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new n1(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new n1(this.root,t,this.comparator,!1)}getReverseIterator(){return new n1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new n1(this.root,t,this.comparator,!0)}}class n1{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?r(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Sr{constructor(t,e,r,i,s){this.key=t,this.value=e,this.color=r??Sr.RED,this.left=i??Sr.EMPTY,this.right=s??Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,s){return new Sr(t??this.key,e??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,r),null):s===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return Sr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ot(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ot(27949);return t+(this.isRed()?0:1)}}Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot(57766)}get value(){throw Ot(16141)}get color(){throw Ot(16727)}get left(){throw Ot(29726)}get right(){throw Ot(36894)}copy(t,e,r,i,s){return this}insert(t,e,r){return new Sr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.comparator=t,this.data=new tn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new MN(this.data.getIterator())}getIteratorFrom(t){return new MN(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof ze)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ze(this.comparator);return e.data=t,e}}class MN{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vh(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this.fields=t,t.sort(gn.comparator)}static empty(){return new di([])}unionWith(t){let e=new ze(gn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new di(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return rf(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sL("Invalid base64 string: "+s):s}}(t);return new Pn(e)}static fromUint8Array(t){const e=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new Pn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const Ktt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(n){if(Lt(!!n,39018),typeof n=="string"){let t=0;const e=Ktt.exec(n);if(Lt(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function so(n){return typeof n=="string"?Pn.fromBase64String(n):Pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL="server_timestamp",oL="__type__",cL="__previous_value__",lL="__local_write_time__";function aT(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[oL])==null?void 0:r.stringValue)===aL}function xy(n){const t=n.mapValue.fields[cL];return aT(t)?xy(t):t}function Ng(n){const t=io(n.mapValue.fields[lL].timestampValue);return new He(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xtt{constructor(t,e,r,i,s,a,o,l,h,f){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=f}}const Ov="(default)";class au{constructor(t,e){this.projectId=t,this.database=e||Ov}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===Ov}isEqual(t){return t instanceof au&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",uL="__max__",cc={mapValue:{fields:{__type__:{stringValue:uL}}}},cT="__vector__",uf="value",z1={nullValue:"NULL_VALUE"};function Ec(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aT(n)?4:hL(n)?9007199254740991:wy(n)?10:11:Ot(28295,{value:n})}function pa(n,t){if(n===t)return!0;const e=Ec(n);if(e!==Ec(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ng(n).isEqual(Ng(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=io(i.timestampValue),o=io(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,s){return so(i.bytesValue).isEqual(so(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,s){return cn(i.geoPointValue.latitude)===cn(s.geoPointValue.latitude)&&cn(i.geoPointValue.longitude)===cn(s.geoPointValue.longitude)}(n,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return cn(i.integerValue)===cn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=cn(i.doubleValue),o=cn(s.doubleValue);return a===o?Ig(a)===Ig(o):isNaN(a)&&isNaN(o)}return!1}(n,t);case 9:return rf(n.arrayValue.values||[],t.arrayValue.values||[],pa);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(NN(a)!==NN(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!pa(a[l],o[l])))return!1;return!0}(n,t);default:return Ot(52216,{left:n})}}function Mg(n,t){return(n.values||[]).find(e=>pa(e,t))!==void 0}function bc(n,t){if(n===t)return 0;const e=Ec(n),r=Ec(t);if(e!==r)return Zt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,t.booleanValue);case 2:return function(s,a){const o=cn(s.integerValue||s.doubleValue),l=cn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,t);case 3:return PN(n.timestampValue,t.timestampValue);case 4:return PN(Ng(n),Ng(t));case 5:return kb(n.stringValue,t.stringValue);case 6:return function(s,a){const o=so(s),l=so(a);return o.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let h=0;h<o.length&&h<l.length;h++){const f=Zt(o[h],l[h]);if(f!==0)return f}return Zt(o.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){const o=Zt(cn(s.latitude),cn(a.latitude));return o!==0?o:Zt(cn(s.longitude),cn(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return kN(n.arrayValue,t.arrayValue);case 10:return function(s,a){var m,v,x,E;const o=s.fields||{},l=a.fields||{},h=(m=o[uf])==null?void 0:m.arrayValue,f=(v=l[uf])==null?void 0:v.arrayValue,p=Zt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((E=f==null?void 0:f.values)==null?void 0:E.length)||0);return p!==0?p:kN(h,f)}(n.mapValue,t.mapValue);case 11:return function(s,a){if(s===cc.mapValue&&a===cc.mapValue)return 0;if(s===cc.mapValue)return 1;if(a===cc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),h=a.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=kb(l[p],f[p]);if(m!==0)return m;const v=bc(o[l[p]],h[f[p]]);if(v!==0)return v}return Zt(l.length,f.length)}(n.mapValue,t.mapValue);default:throw Ot(23264,{he:e})}}function PN(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Zt(n,t);const e=io(n),r=io(t),i=Zt(e.seconds,r.seconds);return i!==0?i:Zt(e.nanos,r.nanos)}function kN(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const s=bc(e[i],r[i]);if(s)return s}return Zt(e.length,r.length)}function hf(n){return jb(n)}function jb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=io(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return so(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Ct.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const s of e.values||[])i?i=!1:r+=",",r+=jb(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${jb(e.fields[a])}`;return i+"}"}(n.mapValue):Ot(61005,{value:n})}function G1(n){switch(Ec(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=xy(n);return t?16+G1(t):16;case 5:return 2*n.stringValue.length;case 6:return so(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+G1(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Pc(r.fields,(s,a)=>{i+=s.length+G1(a)}),i}(n.mapValue);default:throw Ot(13486,{value:n})}}function lT(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Hb(n){return!!n&&"integerValue"in n}function Pg(n){return!!n&&"arrayValue"in n}function LN(n){return!!n&&"nullValue"in n}function VN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function W1(n){return!!n&&"mapValue"in n}function wy(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[oT])==null?void 0:r.stringValue)===cT}function eg(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Pc(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=eg(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=eg(n.arrayValue.values[e]);return t}return{...n}}function hL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uL}const fL={mapValue:{fields:{[oT]:{stringValue:cT},[uf]:{arrayValue:{}}}}};function Qtt(n){return"nullValue"in n?z1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?lT(au.empty(),Ct.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?wy(n)?fL:{mapValue:{}}:Ot(35942,{value:n})}function Ztt(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?lT(au.empty(),Ct.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?fL:"mapValue"in n?wy(n)?{mapValue:{}}:cc:Ot(61959,{value:n})}function BN(n,t){const e=bc(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function FN(n,t){const e=bc(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this.value=t}static empty(){return new kr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!W1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=eg(e)}setAll(t){let e=gn.emptyPath(),r={},i=[];t.forEach((a,o)=>{if(!e.isImmediateParentOf(o)){const l=this.getFieldsMap(e);this.applyChanges(l,r,i),r={},i=[],e=o.popLast()}a?r[o.lastSegment()]=eg(a):i.push(o.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,i)}delete(t){const e=this.field(t.popLast());W1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return pa(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];W1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Pc(e,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new kr(eg(this.value))}}function dL(n){const t=[];return Pc(n.fields,(e,r)=>{const i=new gn([e]);if(W1(r)){const s=dL(r.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)}),new di(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t,e,r,i,s,a,o){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(t){return new wn(t,0,Ft.min(),Ft.min(),Ft.min(),kr.empty(),0)}static newFoundDocument(t,e,r,i){return new wn(t,1,e,Ft.min(),r,i,0)}static newNoDocument(t,e){return new wn(t,2,e,Ft.min(),Ft.min(),kr.empty(),0)}static newUnknownDocument(t,e){return new wn(t,3,e,Ft.min(),Ft.min(),kr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof wn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,e){this.position=t,this.inclusive=e}}function UN(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const s=t[i],a=n.position[i];if(s.field.isKeyField()?r=Ct.comparator(Ct.fromName(a.referenceValue),e.key):r=bc(a,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jN(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!pa(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(t,e="asc"){this.field=t,this.dir=e}}function Jtt(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{}class de extends pL{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new tet(t,e,r):e==="array-contains"?new ret(t,r):e==="in"?new xL(t,r):e==="not-in"?new iet(t,r):e==="array-contains-any"?new set(t,r):new de(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new eet(t,r):new net(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(bc(e,this.value)):e!==null&&Ec(this.value)===Ec(e)&&this.matchesComparison(bc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends pL{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Ke(t,e)}matches(t){return df(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function df(n){return n.op==="and"}function zb(n){return n.op==="or"}function uT(n){return gL(n)&&df(n)}function gL(n){for(const t of n.filters)if(t instanceof Ke)return!1;return!0}function Gb(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+hf(n.value);if(uT(n))return n.filters.map(t=>Gb(t)).join(",");{const t=n.filters.map(e=>Gb(e)).join(",");return`${n.op}(${t})`}}function mL(n,t){return n instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&pa(r.value,i.value)}(n,t):n instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&mL(a,i.filters[o]),!0):!1}(n,t):void Ot(19439)}function vL(n,t){const e=n.filters.concat(t);return Ke.create(e,n.op)}function yL(n){return n instanceof de?function(e){return`${e.field.canonicalString()} ${e.op} ${hf(e.value)}`}(n):n instanceof Ke?function(e){return e.op.toString()+" {"+e.getFilters().map(yL).join(" ,")+"}"}(n):"Filter"}class tet extends de{constructor(t,e,r){super(t,e,r),this.key=Ct.fromName(r.referenceValue)}matches(t){const e=Ct.comparator(t.key,this.key);return this.matchesComparison(e)}}class eet extends de{constructor(t,e){super(t,"in",e),this.keys=_L("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class net extends de{constructor(t,e){super(t,"not-in",e),this.keys=_L("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function _L(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(r=>Ct.fromName(r.referenceValue))}class ret extends de{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Pg(e)&&Mg(e.arrayValue,this.value)}}class xL extends de{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Mg(this.value.arrayValue,e)}}class iet extends de{constructor(t,e){super(t,"not-in",e)}matches(t){if(Mg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Mg(this.value.arrayValue,e)}}class set extends de{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Pg(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Mg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aet{constructor(t,e=null,r=[],i=[],s=null,a=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function Wb(n,t=null,e=[],r=[],i=null,s=null,a=null){return new aet(n,t,e,r,i,s,a)}function ou(n){const t=kt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Gb(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),my(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>hf(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>hf(r)).join(",")),t.Te=e}return t.Te}function Jg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Jtt(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!mL(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!jN(n.startAt,t.startAt)&&jN(n.endAt,t.endAt)}function Nv(n){return Ct.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Mv(n,t){return n.filters.filter(e=>e instanceof de&&e.field.isEqual(t))}function HN(n,t,e){let r=z1,i=!0;for(const s of Mv(n,t)){let a=z1,o=!0;switch(s.op){case"<":case"<=":a=Qtt(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=z1}BN({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];BN({value:r,inclusive:i},{value:a,inclusive:e.inclusive})<0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}function zN(n,t,e){let r=cc,i=!0;for(const s of Mv(n,t)){let a=cc,o=!0;switch(s.op){case">=":case">":a=Ztt(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=cc}FN({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];FN({value:r,inclusive:i},{value:a,inclusive:e.inclusive})>0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,e=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wL(n,t,e,r,i,s,a,o){return new Ey(n,t,e,r,i,s,a,o)}function t0(n){return new Ey(n)}function GN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oet(n){return n.collectionGroup!==null}function ng(n){const t=kt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new ze(gn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Rv(s,r))}),e.has(gn.keyField().canonicalString())||t.Ie.push(new Rv(gn.keyField(),r))}return t.Ie}function Oi(n){const t=kt(n);return t.Ee||(t.Ee=cet(t,ng(n))),t.Ee}function cet(n,t){if(n.limitType==="F")return Wb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Rv(i.field,s)});const e=n.endAt?new ff(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ff(n.startAt.position,n.startAt.inclusive):null;return Wb(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function $b(n,t,e){return new Ey(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function by(n,t){return Jg(Oi(n),Oi(t))&&n.limitType===t.limitType}function EL(n){return`${ou(Oi(n))}|lt:${n.limitType}`}function Ih(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>yL(i)).join(", ")}]`),my(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>hf(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>hf(i)).join(",")),`Target(${r})`}(Oi(n))}; limitType=${n.limitType})`}function e0(n,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ct.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,t)&&function(r,i){for(const s of ng(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(a,o,l){const h=UN(a,o,l);return a.inclusive?h<=0:h<0}(r.startAt,ng(r),i)||r.endAt&&!function(a,o,l){const h=UN(a,o,l);return a.inclusive?h>=0:h>0}(r.endAt,ng(r),i))}(n,t)}function bL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AL(n){return(t,e)=>{let r=!1;for(const i of ng(n)){const s=uet(i,t,e);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uet(n,t,e){const r=n.field.isKeyField()?Ct.comparator(t.key,e.key):function(s,a,o){const l=a.data.field(s),h=o.data.field(s);return l!==null&&h!==null?bc(l,h):Ot(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ot(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Pc(this.inner,(e,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return iL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const het=new tn(Ct.comparator);function Ci(){return het}const TL=new tn(Ct.comparator);function Op(...n){let t=TL;for(const e of n)t=t.insert(e.key,e);return t}function SL(n){let t=TL;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Js(){return rg()}function CL(){return rg()}function rg(){return new lo(n=>n.toString(),(n,t)=>n.isEqual(t))}const fet=new tn(Ct.comparator),det=new ze(Ct.comparator);function se(...n){let t=det;for(const e of n)t=t.add(e);return t}const pet=new ze(Zt);function hT(){return pet}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ig(t)?"-0":t}}function IL(n){return{integerValue:""+n}}function get(n,t){return q5(t)?IL(t):fT(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this._=void 0}}function met(n,t,e){return n instanceof kg?function(i,s){const a={fields:{[oL]:{stringValue:aL},[lL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&aT(s)&&(s=xy(s)),s&&(a.fields[cL]=s),{mapValue:a}}(e,t):n instanceof pf?OL(n,t):n instanceof gf?RL(n,t):function(i,s){const a=DL(i,s),o=WN(a)+WN(i.Ae);return Hb(a)&&Hb(i.Ae)?IL(o):fT(i.serializer,o)}(n,t)}function vet(n,t,e){return n instanceof pf?OL(n,t):n instanceof gf?RL(n,t):e}function DL(n,t){return n instanceof Lg?function(r){return Hb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class kg extends Ay{}class pf extends Ay{constructor(t){super(),this.elements=t}}function OL(n,t){const e=NL(t);for(const r of n.elements)e.some(i=>pa(i,r))||e.push(r);return{arrayValue:{values:e}}}class gf extends Ay{constructor(t){super(),this.elements=t}}function RL(n,t){let e=NL(t);for(const r of n.elements)e=e.filter(i=>!pa(i,r));return{arrayValue:{values:e}}}class Lg extends Ay{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function WN(n){return cn(n.integerValue||n.doubleValue)}function NL(n){return Pg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yet{constructor(t,e){this.field=t,this.transform=e}}function _et(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof pf&&i instanceof pf||r instanceof gf&&i instanceof gf?rf(r.elements,i.elements,pa):r instanceof Lg&&i instanceof Lg?pa(r.Ae,i.Ae):r instanceof kg&&i instanceof kg}(n.transform,t.transform)}class xet{constructor(t,e){this.version=t,this.transformResults=e}}class Br{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Br}static exists(t){return new Br(void 0,t)}static updateTime(t){return new Br(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ty{}function ML(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Sy(n.key,Br.none()):new Bf(n.key,n.data,Br.none());{const e=n.data,r=kr.empty();let i=new ze(gn.comparator);for(let s of t.fields)if(!i.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new uo(n.key,r,new di(i.toArray()),Br.none())}}function wet(n,t,e){n instanceof Bf?function(i,s,a){const o=i.value.clone(),l=qN(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,t,e):n instanceof uo?function(i,s,a){if(!$1(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=qN(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(PL(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function ig(n,t,e,r){return n instanceof Bf?function(s,a,o,l){if(!$1(s.precondition,a))return o;const h=s.value.clone(),f=YN(s.fieldTransforms,l,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,r):n instanceof uo?function(s,a,o,l){if(!$1(s.precondition,a))return o;const h=YN(s.fieldTransforms,l,a),f=a.data;return f.setAll(PL(s)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,t,e,r):function(s,a,o){return $1(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,t,e)}function Eet(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),s=DL(r.transform,i||null);s!=null&&(e===null&&(e=kr.empty()),e.set(r.field,s))}return e||null}function $N(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rf(r,i,(s,a)=>_et(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Bf extends Ty{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class uo extends Ty{constructor(t,e,r,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PL(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function qN(n,t,e){const r=new Map;Lt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const s=n[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,vet(a,o,e[i]))}return r}function YN(n,t,e){const r=new Map;for(const i of n){const s=i.transform,a=e.data.field(i.field);r.set(i.field,met(s,a,t))}return r}class Sy extends Ty{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kL extends Ty{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&wet(s,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=ig(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=ig(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=CL();return this.mutations.forEach(i=>{const s=t.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=e.has(i.key)?null:o;const l=ML(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),se())}isEqual(t){return this.batchId===t.batchId&&rf(this.mutations,t.mutations,(e,r)=>$N(e,r))&&rf(this.baseMutations,t.baseMutations,(e,r)=>$N(e,r))}}class pT{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Lt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return fet}();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new pT(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bet{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un,ye;function Aet(n){switch(n){case dt.OK:return Ot(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Ot(15467,{code:n})}}function LL(n){if(n===void 0)return Dn("GRPC error has no .code"),dt.UNKNOWN;switch(n){case Un.OK:return dt.OK;case Un.CANCELLED:return dt.CANCELLED;case Un.UNKNOWN:return dt.UNKNOWN;case Un.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case Un.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case Un.INTERNAL:return dt.INTERNAL;case Un.UNAVAILABLE:return dt.UNAVAILABLE;case Un.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case Un.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case Un.NOT_FOUND:return dt.NOT_FOUND;case Un.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case Un.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case Un.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case Un.ABORTED:return dt.ABORTED;case Un.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case Un.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case Un.DATA_LOSS:return dt.DATA_LOSS;default:return Ot(39323,{code:n})}}(ye=Un||(Un={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tet(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cet=new dc([4294967295,4294967295],0);function KN(n){const t=Tet().encode(n),e=new N5;return e.update(t),new Uint8Array(e.digest())}function XN(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new dc([e,r],0),new dc([i,s],0)]}class mT{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Rp(`Invalid padding: ${e}`);if(r<0)throw new Rp(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Rp(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Rp(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=dc.fromNumber(this.ge)}ye(t,e,r){let i=t.add(e.multiply(dc.fromNumber(r)));return i.compare(Cet)===1&&(i=new dc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=KN(t),[r,i]=XN(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new mT(s,i,e);return r.forEach(o=>a.insert(o)),a}insert(t){if(this.ge===0)return;const e=KN(t),[r,i]=XN(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Rp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,e,r,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,r0.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new n0(Ft.min(),i,new tn(Zt),Ci(),se())}}class r0{constructor(t,e,r,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new r0(r,e,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t,e,r,i){this.be=t,this.removedTargetIds=e,this.key=r,this.De=i}}class VL{constructor(t,e){this.targetId=t,this.Ce=e}}class BL{constructor(t,e,r=Pn.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class QN{constructor(){this.ve=0,this.Fe=ZN(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=se(),e=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:Ot(38017,{changeType:s})}}),new r0(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=ZN()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Iet{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ci(),this.Je=r1(),this.He=r1(),this.Ye=new tn(Zt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:Ot(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((r,i)=>{this.rt(i)&&e(i)})}st(t){const e=t.targetId,r=t.Ce.count,i=this.ot(e);if(i){const s=i.target;if(Nv(s))if(r===0){const a=new Ct(s.path);this.et(e,a,wn.newNoDocument(a,Ft.min()))}else Lt(r===1,20013,{expectedCount:r});else{const a=this._t(e);if(a!==r){const o=this.ut(t),l=o?this.ct(o,t,a):1;if(l!==0){this.it(e);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,h)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=e;let a,o;try{a=so(r).toUint8Array()}catch(l){if(l instanceof sL)return Sg("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new mT(a,i,s)}catch(l){return Sg(l instanceof Rp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(e,s,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Nv(o.target)){const l=new Ct(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,wn.newNoDocument(l,t))}s.Be&&(e.set(a,s.ke()),s.qe())}});let r=se();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const i=new n0(t,e,this.Ye,this.je,r);return this.je=Ci(),this.Je=r1(),this.He=r1(),this.Ye=new tn(Zt),i}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new QN,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ze(Zt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ze(Zt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||_t("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new QN),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function r1(){return new tn(Ct.comparator)}function ZN(){return new tn(Ct.comparator)}const Det={asc:"ASCENDING",desc:"DESCENDING"},Oet={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ret={and:"AND",or:"OR"};class Net{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function qb(n,t){return n.useProto3Json||my(t)?t:{value:t}}function mf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function FL(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Met(n,t){return mf(n,t.toTimestamp())}function Xr(n){return Lt(!!n,49232),Ft.fromTimestamp(function(e){const r=io(e);return new He(r.seconds,r.nanos)}(n))}function vT(n,t){return Yb(n,t).canonicalString()}function Yb(n,t){const e=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function UL(n){const t=Pe.fromString(n);return Lt(KL(t),10190,{key:t.toString()}),t}function Pv(n,t){return vT(n.databaseId,t.path)}function Yl(n,t){const e=UL(t);if(e.get(1)!==n.databaseId.projectId)throw new St(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new St(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ct(zL(e))}function jL(n,t){return vT(n.databaseId,t)}function HL(n){const t=UL(n);return t.length===4?Pe.emptyPath():zL(t)}function Kb(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zL(n){return Lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JN(n,t,e){return{name:Pv(n,t),fields:e.value.mapValue.fields}}function Pet(n,t,e){const r=Yl(n,t.name),i=Xr(t.updateTime),s=t.createTime?Xr(t.createTime):Ft.min(),a=new kr({mapValue:{fields:t.fields}}),o=wn.newFoundDocument(r,i,s,a);return e&&o.setHasCommittedMutations(),e?o.setHasCommittedMutations():o}function ket(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ot(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(Lt(f===void 0||typeof f=="string",58123),Pn.fromBase64String(f||"")):(Lt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Pn.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(h){const f=h.code===void 0?dt.UNKNOWN:LL(h.code);return new St(f,h.message||"")}(a);e=new BL(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yl(n,r.document.name),s=Xr(r.document.updateTime),a=r.document.createTime?Xr(r.document.createTime):Ft.min(),o=new kr({mapValue:{fields:r.document.fields}}),l=wn.newFoundDocument(i,s,a,o),h=r.targetIds||[],f=r.removedTargetIds||[];e=new q1(h,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Yl(n,r.document),s=r.readTime?Xr(r.readTime):Ft.min(),a=wn.newNoDocument(i,s),o=r.removedTargetIds||[];e=new q1([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Yl(n,r.document),s=r.removedTargetIds||[];e=new q1([],s,i,null)}else{if(!("filter"in t))return Ot(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new bet(i,s),o=r.targetId;e=new VL(o,a)}}return e}function kv(n,t){let e;if(t instanceof Bf)e={update:JN(n,t.key,t.value)};else if(t instanceof Sy)e={delete:Pv(n,t.key)};else if(t instanceof uo)e={update:JN(n,t.key,t.data),updateMask:jet(t.fieldMask)};else{if(!(t instanceof kL))return Ot(16599,{Vt:t.type});e={verify:Pv(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof kg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof pf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof gf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Lg)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Ot(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Met(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ot(27497)}(n,t.precondition)),e}function Xb(n,t){const e=t.currentDocument?function(s){return s.updateTime!==void 0?Br.updateTime(Xr(s.updateTime)):s.exists!==void 0?Br.exists(s.exists):Br.none()}(t.currentDocument):Br.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,o){let l=null;if("setToServerValue"in o)Lt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new kg;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];l=new pf(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];l=new gf(f)}else"increment"in o?l=new Lg(a,o.increment):Ot(16584,{proto:o});const h=gn.fromServerFormat(o.fieldPath);return new yet(h,l)}(n,i)):[];if(t.update){t.update.name;const i=Yl(n,t.update.name),s=new kr({mapValue:{fields:t.update.fields}});if(t.updateMask){const a=function(l){const h=l.fieldPaths||[];return new di(h.map(f=>gn.fromServerFormat(f)))}(t.updateMask);return new uo(i,s,a,e,r)}return new Bf(i,s,e,r)}if(t.delete){const i=Yl(n,t.delete);return new Sy(i,e)}if(t.verify){const i=Yl(n,t.verify);return new kL(i,e)}return Ot(1463,{proto:t})}function Let(n,t){return n&&n.length>0?(Lt(t!==void 0,14353),n.map(e=>function(i,s){let a=i.updateTime?Xr(i.updateTime):Xr(s);return a.isEqual(Ft.min())&&(a=Xr(s)),new xet(a,i.transformResults||[])}(e,t))):[]}function GL(n,t){return{documents:[jL(n,t.path)]}}function WL(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=jL(n,i);const s=function(h){if(h.length!==0)return YL(Ke.create(h,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:Dh(m.field),direction:Bet(m.dir)}}(f))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const o=qb(n,t.limit);return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:e,parent:i}}function $L(n){let t=HL(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Lt(r===1,65062);const f=e.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(p){const m=qL(p);return m instanceof Ke&&uT(m)?m.getFilters():[m]}(e.where));let a=[];e.orderBy&&(a=function(p){return p.map(m=>function(x){return new Rv(Oh(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(e.orderBy));let o=null;e.limit&&(o=function(p){let m;return m=typeof p=="object"?p.value:p,my(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(p){const m=!!p.before,v=p.values||[];return new ff(v,m)}(e.startAt));let h=null;return e.endAt&&(h=function(p){const m=!p.before,v=p.values||[];return new ff(v,m)}(e.endAt)),wL(t,i,a,s,o,"F",l,h)}function Vet(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ot(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function qL(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Oh(e.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oh(e.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Oh(e.unaryFilter.field);return de.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Oh(e.unaryFilter.field);return de.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ot(61313);default:return Ot(60726)}}(n):n.fieldFilter!==void 0?function(e){return de.create(Oh(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ot(58110);default:return Ot(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Ke.create(e.compositeFilter.filters.map(r=>qL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ot(1026)}}(e.compositeFilter.op))}(n):Ot(30097,{filter:n})}function Bet(n){return Det[n]}function Fet(n){return Oet[n]}function Uet(n){return Ret[n]}function Dh(n){return{fieldPath:n.canonicalString()}}function Oh(n){return gn.fromServerFormat(n.fieldPath)}function YL(n){return n instanceof de?function(e){if(e.op==="=="){if(VN(e.value))return{unaryFilter:{field:Dh(e.field),op:"IS_NAN"}};if(LN(e.value))return{unaryFilter:{field:Dh(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(VN(e.value))return{unaryFilter:{field:Dh(e.field),op:"IS_NOT_NAN"}};if(LN(e.value))return{unaryFilter:{field:Dh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dh(e.field),op:Fet(e.op),value:e.value}}}(n):n instanceof Ke?function(e){const r=e.getFilters().map(i=>YL(i));return r.length===1?r[0]:{compositeFilter:{op:Uet(e.op),filters:r}}}(n):Ot(54877,{filter:n})}function jet(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function KL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t,e,r,i,s=Ft.min(),a=Ft.min(),o=Pn.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new Qa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(t){this.yt=t}}function Het(n,t){let e;if(t.document)e=Pet(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Ct.fromSegments(t.noDocument.path),i=lu(t.noDocument.readTime);e=wn.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ot(56709);{const r=Ct.fromSegments(t.unknownDocument.path),i=lu(t.unknownDocument.version);e=wn.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(i){const s=new He(i[0],i[1]);return Ft.fromTimestamp(s)}(t.readTime)),e}function tM(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Lv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(s,a){return{name:Pv(s,a.key),fields:a.data.value.mapValue.fields,updateTime:mf(s,a.version.toTimestamp()),createTime:mf(s,a.createTime.toTimestamp())}}(n.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:cu(t.version)};else{if(!t.isUnknownDocument())return Ot(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:cu(t.version)}}return r}function Lv(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function cu(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function lu(n){const t=new He(n.seconds,n.nanoseconds);return Ft.fromTimestamp(t)}function Rl(n,t){const e=(t.baseMutations||[]).map(s=>Xb(n.yt,s));for(let s=0;s<t.mutations.length-1;++s){const a=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){const o=t.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(s=>Xb(n.yt,s)),i=He.fromMillis(t.localWriteTimeMs);return new dT(t.batchId,i,e,r)}function Np(n){const t=lu(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?lu(n.lastLimboFreeSnapshotVersion):Ft.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){const a=s.documents.length;return Lt(a===1,1966,{count:a}),Oi(t0(HL(s.documents[0])))}(n.query):function(s){return Oi($L(s))}(n.query),new Qa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Pn.fromBase64String(n.resumeToken))}function QL(n,t){const e=cu(t.snapshotVersion),r=cu(t.lastLimboFreeSnapshotVersion);let i;i=Nv(t.target)?GL(n.yt,t.target):WL(n.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ou(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ZL(n){const t=$L({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$b(t,t.limit,"L"):t}function Hw(n,t){return new gT(t.largestBatchId,Xb(n.yt,t.overlayMutation))}function eM(n,t){const e=t.path.lastSegment();return[n,Fr(t.path.popLast()),e]}function nM(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:cu(r.readTime),documentKey:Fr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zet{getBundleMetadata(t,e){return rM(t).get(e).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:lu(s.createTime),version:s.version}}(r)})}saveBundleMetadata(t,e){return rM(t).put(function(i){return{bundleId:i.id,createTime:cu(Xr(i.createTime)),version:i.version}}(e))}getNamedQuery(t,e){return iM(t).get(e).next(r=>{if(r)return function(s){return{name:s.name,query:ZL(s.bundledQuery),readTime:lu(s.readTime)}}(r)})}saveNamedQuery(t,e){return iM(t).put(function(i){return{name:i.name,readTime:cu(Xr(i.readTime)),bundledQuery:i.bundledQuery}}(e))}}function rM(n){return nr(n,vy)}function iM(n){return nr(n,yy)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new Cy(t,r)}getOverlay(t,e){return op(t).get(eM(this.userId,e)).next(r=>r?Hw(this.serializer,r):null)}getOverlays(t,e){const r=Js();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){const i=[];return r.forEach((s,a)=>{const o=new gT(e,a);i.push(this.St(t,o))}),Q.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(a=>i.add(Fr(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(op(t).Z(Fb,o))}),Q.waitFor(s)}getOverlaysForCollection(t,e,r){const i=Js(),s=Fr(e),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return op(t).J(Fb,a).next(o=>{for(const l of o){const h=Hw(this.serializer,l);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const s=Js();let a;const o=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return op(t).ee({index:J5,range:o},(l,h,f)=>{const p=Hw(this.serializer,h);s.size()<i||p.largestBatchId===a?(s.set(p.getKey(),p),a=p.largestBatchId):f.done()}).next(()=>s)}St(t,e){return op(t).put(function(i,s,a){const[o,l,h]=eM(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:kv(i.yt,a.mutation)}}(this.serializer,this.userId,e))}}function op(n){return nr(n,_y)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Get{bt(t){return nr(t,iT)}getSessionToken(t){return this.bt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?Pn.fromUint8Array(r):Pn.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(cn(t.integerValue));else if("doubleValue"in t){const r=cn(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Ig(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=io(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(so(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?hL(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):wy(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):Ot(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const i of Object.keys(r))this.Ot(i,e),this.Ct(r[i],e)}kt(t,e){var a,o;const r=t.fields||{};this.Ft(e,53);const i=uf,s=((o=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(e,15),e.Mt(cn(s)),this.Ot(i,e),this.Ct(r[i],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const i of r)this.Ct(i,e)}Lt(t,e){this.Ft(e,37),Ct.fromName(t).path.forEach(r=>{this.Ft(e,60),this.Ut(r,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Nl.Kt=new Nl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=255;function Wet(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function sM(n){const t=64-function(r){let i=0;for(let s=0;s<8;++s){const a=Wet(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(t/8)}class $et{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=e.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=e.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(t){const e=this.en(t),r=sM(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}nn(t){const e=this.en(t),r=sM(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}rn(){this.sn(yh),this.sn(255)}_n(){this.an(yh),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===yh?(this.sn(yh),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===yh?(this.an(yh),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class qet{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class Yet{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class cp{constructor(){this.cn=new $et,this.ln=new qet(this.cn),this.hn=new Yet(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,e,r,i){this.Tn=t,this.In=e,this.En=r,this.dn=i}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new Ml(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:Y1(this.En),directionalValue:Y1(this.dn),orderedDocumentKey:Y1(e),documentKey:r.path.toArray()}}Vn(t,e,r){const i=this.Rn(t,e,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function zo(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=aM(n.En,t.En),e!==0?e:(e=aM(n.dn,t.dn),e!==0?e:Ct.comparator(n.In,t.In)))}function aM(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function Y1(n){return yk()?function(e){let r="";for(let i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);return r}(n):n}function oM(n){return typeof n!="string"?n:function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(n)}class cM{constructor(t){this.mn=new ze((e,r)=>gn.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(Lt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Lb(t);if(e!==void 0&&!this.wn(e))return!1;const r=Tl(t);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let t=new ze(gn.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new U1(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new U1(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new U1(r.field,r.dir==="asc"?0:1)));return new Sv(Sv.UNKNOWN_ID,this.collectionId,e,Cg.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(n){var e,r;if(Lt(n instanceof de||n instanceof Ke,20012),n instanceof de){if(n instanceof xL){const i=((r=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map(s=>de.create(n.field,"==",s)))||[];return Ke.create(i,"or")}return n}const t=n.filters.map(i=>JL(i));return Ke.create(t,n.op)}function Ket(n){if(n.getFilters().length===0)return[];const t=Jb(JL(n));return Lt(t9(t),7391),Qb(t)||Zb(t)?[t]:t.getFilters()}function Qb(n){return n instanceof de}function Zb(n){return n instanceof Ke&&uT(n)}function t9(n){return Qb(n)||Zb(n)||function(e){if(e instanceof Ke&&zb(e)){for(const r of e.getFilters())if(!Qb(r)&&!Zb(r))return!1;return!0}return!1}(n)}function Jb(n){if(Lt(n instanceof de||n instanceof Ke,34018),n instanceof de)return n;if(n.filters.length===1)return Jb(n.filters[0]);const t=n.filters.map(r=>Jb(r));let e=Ke.create(t,n.op);return e=Vv(e),t9(e)?e:(Lt(e instanceof Ke,64498),Lt(df(e),40251),Lt(e.filters.length>1,57927),e.filters.reduce((r,i)=>yT(r,i)))}function yT(n,t){let e;return Lt(n instanceof de||n instanceof Ke,38388),Lt(t instanceof de||t instanceof Ke,25473),e=n instanceof de?t instanceof de?function(i,s){return Ke.create([i,s],"and")}(n,t):lM(n,t):t instanceof de?lM(t,n):function(i,s){if(Lt(i.filters.length>0&&s.filters.length>0,48005),df(i)&&df(s))return vL(i,s.getFilters());const a=zb(i)?i:s,o=zb(i)?s:i,l=a.filters.map(h=>yT(h,o));return Ke.create(l,"or")}(n,t),Vv(e)}function lM(n,t){if(df(t))return vL(t,n.getFilters());{const e=t.filters.map(r=>yT(n,r));return Ke.create(e,"or")}}function Vv(n){if(Lt(n instanceof de||n instanceof Ke,11850),n instanceof de)return n;const t=n.getFilters();if(t.length===1)return Vv(t[0]);if(gL(n))return n;const e=t.map(i=>Vv(i)),r=[];return e.forEach(i=>{i instanceof de?r.push(i):i instanceof Ke&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ke.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xet{constructor(){this.Cn=new _T}addToCollectionParentIndex(t,e){return this.Cn.add(e),Q.resolve()}getCollectionParents(t,e){return Q.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Q.resolve()}deleteFieldIndex(t,e){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,e){return Q.resolve()}getDocumentsMatchingTarget(t,e){return Q.resolve(null)}getIndexType(t,e){return Q.resolve(0)}getFieldIndexes(t,e){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,e){return Q.resolve(Ri.min())}getMinOffsetFromCollectionGroup(t,e){return Q.resolve(Ri.min())}updateCollectionGroup(t,e,r){return Q.resolve()}updateIndexEntries(t,e){return Q.resolve()}}class _T{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new ze(Pe.comparator),s=!i.has(r);return this.index[e]=i.add(r),s}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new ze(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="IndexedDbIndexManager",i1=new Uint8Array(0);class Qet{constructor(t,e){this.databaseId=e,this.vn=new _T,this.Fn=new lo(r=>ou(r),(r,i)=>Jg(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const s={collectionId:r,parent:Fr(i)};return hM(t).put(s)}return Q.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[F5(e),""],!1,!0);return hM(t).J(i).next(s=>{for(const a of s){if(a.collectionId!==e)break;r.push(Zs(a.parent))}return r})}addFieldIndex(t,e){const r=lp(t),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(e);delete i.indexId;const s=r.add(i);if(e.indexState){const a=xh(t);return s.next(o=>{a.put(nM(o,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const r=lp(t),i=xh(t),s=_h(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=lp(t),r=_h(t),i=xh(t);return e.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(t,e){return Q.forEach(this.Mn(e),r=>this.getIndexType(t,r).next(i=>{if(i===0||i===1){const s=new cM(r).Dn();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const r=_h(t);let i=!0;const s=new Map;return Q.forEach(this.Mn(e),a=>this.xn(t,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=se();const o=[];return Q.forEach(s,(l,h)=>{_t(uM,`Using index ${function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${ou(e)}`);const f=function(D,P){const k=Lb(P);if(k===void 0)return null;for(const U of Mv(D,k.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(h,l),p=function(D,P){const k=new Map;for(const U of Tl(P))for(const M of Mv(D,U.fieldPath))switch(M.op){case"==":case"in":k.set(U.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return k.set(U.fieldPath.canonicalString(),M.value),Array.from(k.values())}return null}(h,l),m=function(D,P){const k=[];let U=!0;for(const M of Tl(P)){const I=M.kind===0?HN(D,M.fieldPath,D.startAt):zN(D,M.fieldPath,D.startAt);k.push(I.value),U&&(U=I.inclusive)}return new ff(k,U)}(h,l),v=function(D,P){const k=[];let U=!0;for(const M of Tl(P)){const I=M.kind===0?zN(D,M.fieldPath,D.endAt):HN(D,M.fieldPath,D.endAt);k.push(I.value),U&&(U=I.inclusive)}return new ff(k,U)}(h,l),x=this.On(l,h,m),E=this.On(l,h,v),b=this.Nn(l,h,p),T=this.Bn(l.indexId,f,x,m.inclusive,E,v.inclusive,b);return Q.forEach(T,S=>r.Y(S,e.limit).next(D=>{D.forEach(P=>{const k=Ct.fromSegments(P.documentKey);a.has(k)||(a=a.add(k),o.push(k))})}))}).next(()=>o)}return Q.resolve(null)})}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=Ket(Ke.create(t.filters,"and")).map(r=>Wb(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.Fn.set(t,e),e)}Bn(t,e,r,i,s,a,o){const l=(e!=null?e.length:1)*Math.max(r.length,s.length),h=l/(e!=null?e.length:1),f=[];for(let p=0;p<l;++p){const m=e?this.Ln(e[p/h]):i1,v=this.kn(t,m,r[p%h],i),x=this.qn(t,m,s[p%h],a),E=o.map(b=>this.kn(t,m,b,!0));f.push(...this.createRange(v,x,E))}return f}kn(t,e,r,i){const s=new Ml(t,Ct.empty(),e,r);return i?s:s.An()}qn(t,e,r,i){const s=new Ml(t,Ct.empty(),e,r);return i?s.An():s}xn(t,e){const r=new cM(e),i=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(t,e){let r=2;const i=this.Mn(e);return Q.forEach(i,s=>this.xn(t,s).next(a=>{a?r!==0&&a.fields.length<function(l){let h=new ze(gn.comparator),f=!1;for(const p of l.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:h=h.add(m.field));for(const p of l.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(e)&&i.length>1&&r===2?1:r)}Qn(t,e){const r=new cp;for(const i of Tl(t)){const s=e.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);Nl.Kt.Dt(s,a)}return r.un()}Ln(t){const e=new cp;return Nl.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new cp;return Nl.Kt.Dt(lT(this.databaseId,e),r.Pn(function(s){const a=Tl(s);return a.length===0?0:a[a.length-1].kind}(t))),r.un()}Nn(t,e,r){if(r===null)return[];let i=[];i.push(new cp);let s=0;for(const a of Tl(t)){const o=r[s++];for(const l of i)if(this.Un(e,a.fieldPath)&&Pg(o))i=this.Kn(i,a,o);else{const h=l.Pn(a.kind);Nl.Kt.Dt(o,h)}}return this.Wn(i)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const i=[...t],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new cp;l.seed(o.un()),Nl.Kt.Dt(a,l.Pn(e.kind)),s.push(l)}return s}Un(t,e){return!!t.filters.find(r=>r instanceof de&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=lp(t),i=xh(t);return(e?r.J(Bb,IDBKeyRange.bound(e,e)):r.J()).next(s=>{const a=[];return Q.forEach(s,o=>i.get([o.indexId,this.uid]).next(l=>{a.push(function(f,p){const m=p?new Cg(p.sequenceNumber,new Ri(lu(p.readTime),new Ct(Zs(p.documentKey)),p.largestBatchId)):Cg.empty(),v=f.fields.map(([x,E])=>new U1(gn.fromServerFormat(x),E));return new Sv(f.indexId,f.collectionGroup,v,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Zt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=lp(t),s=xh(t);return this.Gn(t).next(a=>i.J(Bb,IDBKeyRange.bound(e,e)).next(o=>Q.forEach(o,l=>s.put(nM(l.indexId,this.uid,a,r)))))}updateIndexEntries(t,e){const r=new Map;return Q.forEach(e,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Q.resolve(a):this.getFieldIndexes(t,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),Q.forEach(o,l=>this.zn(t,i,l).next(h=>{const f=this.jn(s,l);return h.isEqual(f)?Q.resolve():this.Jn(t,s,l,h,f)}))))})}Hn(t,e,r,i){return _h(t).put(i.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,i){return _h(t).delete(i.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const i=_h(t);let s=new ze(zo);return i.ee({index:Z5,range:IDBKeyRange.only([r.indexId,this.uid,Y1(this.$n(r,e))])},(a,o)=>{s=s.add(new Ml(r.indexId,e,oM(o.arrayValue),oM(o.directionalValue)))}).next(()=>s)}jn(t,e){let r=new ze(zo);const i=this.Qn(e,t);if(i==null)return r;const s=Lb(e);if(s!=null){const a=t.data.field(s.fieldPath);if(Pg(a))for(const o of a.arrayValue.values||[])r=r.add(new Ml(e.indexId,t.key,this.Ln(o),i))}else r=r.add(new Ml(e.indexId,t.key,i1,i));return r}Jn(t,e,r,i,s){_t(uM,"Updating index entries for document '%s'",e.key);const a=[];return function(l,h,f,p,m){const v=l.getIterator(),x=h.getIterator();let E=vh(v),b=vh(x);for(;E||b;){let T=!1,S=!1;if(E&&b){const D=f(E,b);D<0?S=!0:D>0&&(T=!0)}else E!=null?S=!0:T=!0;T?(p(b),b=vh(x)):S?(m(E),E=vh(v)):(E=vh(v),b=vh(x))}}(i,s,zo,o=>{a.push(this.Hn(t,e,r,o))},o=>{a.push(this.Yn(t,e,r,o))}),Q.waitFor(a)}Gn(t){let e=1;return xh(t).ee({index:Q5,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((a,o)=>zo(a,o)).filter((a,o,l)=>!o||zo(a,l[o-1])!==0);const i=[];i.push(t);for(const a of r){const o=zo(a,t),l=zo(a,e);if(o===0)i[0]=t.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(e);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,i1,Ct.empty()),l=i[a+1].Vn(this.uid,i1,Ct.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(t,e){return zo(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(fM)}getMinOffset(t,e){return Q.mapArray(this.Mn(e),r=>this.xn(t,r).next(i=>i||Ot(44426))).next(fM)}}function hM(n){return nr(n,Rg)}function _h(n){return nr(n,tg)}function lp(n){return nr(n,rT)}function xh(n){return nr(n,Jp)}function fM(n){Lt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;tT(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new Ri(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e9=41943040;class Pr{static withCacheSize(t){return new Pr(t,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(n,t,e){const r=n.store(vs),i=n.store(af),s=[],a=IDBKeyRange.only(e.batchId);let o=0;const l=r.ee({range:a},(f,p,m)=>(o++,m.delete()));s.push(l.next(()=>{Lt(o===1,47070,{batchId:e.batchId})}));const h=[];for(const f of e.mutations){const p=Y5(t,f.key.path,e.batchId);s.push(i.delete(p)),h.push(f.key)}return Q.waitFor(s).next(()=>h)}function Bv(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ot(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(e9,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);class Iy{constructor(t,e,r,i){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(t,e,r,i){Lt(t.uid!=="",64387);const s=t.isAuthenticated()?t.uid:"";return new Iy(s,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Go(t).ee({index:Bl,range:r},(i,s,a)=>{e=!1,a.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const s=Rh(t),a=Go(t);return a.add({}).next(o=>{Lt(typeof o=="number",49019);const l=new dT(o,e,r,i),h=function(v,x,E){const b=E.baseMutations.map(S=>kv(v.yt,S)),T=E.mutations.map(S=>kv(v.yt,S));return{userId:x,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:b,mutations:T}}(this.serializer,this.userId,l),f=[];let p=new ze((m,v)=>Zt(m.canonicalString(),v.canonicalString()));for(const m of i){const v=Y5(this.userId,m.key.path,o);p=p.add(m.key.path.popLast()),f.push(a.put(h)),f.push(s.put(v,Ttt))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),Q.waitFor(f).next(()=>l)})}lookupMutationBatch(t,e){return Go(t).get(e).next(r=>r?(Lt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),Rl(this.serializer,r)):null)}er(t,e){return this.Xn[e]?Q.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.Xn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Go(t).ee({index:Bl,range:i},(a,o,l)=>{o.userId===this.userId&&(Lt(o.batchId>=r,47524,{tr:r}),s=Rl(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=$l;return Go(t).ee({index:Bl,range:e,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,$l],[this.userId,Number.POSITIVE_INFINITY]);return Go(t).J(Bl,e).next(r=>r.map(i=>Rl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=j1(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Rh(t).ee({range:i},(a,o,l)=>{const[h,f,p]=a,m=Zs(f);if(h===this.userId&&e.path.isEqual(m))return Go(t).get(p).next(v=>{if(!v)throw Ot(61480,{nr:a,batchId:p});Lt(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:p}),s.push(Rl(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new ze(Zt);const i=[];return e.forEach(s=>{const a=j1(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Rh(t).ee({range:o},(h,f,p)=>{const[m,v,x]=h,E=Zs(v);m===this.userId&&s.path.isEqual(E)?r=r.add(x):p.done()});i.push(l)}),Q.waitFor(i).next(()=>this.rr(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,s=j1(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new ze(Zt);return Rh(t).ee({range:a},(l,h,f)=>{const[p,m,v]=l,x=Zs(m);p===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(v)):f.done()}).next(()=>this.rr(t,o))}rr(t,e){const r=[],i=[];return e.forEach(s=>{i.push(Go(t).get(s).next(a=>{if(a===null)throw Ot(35274,{batchId:s});Lt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(Rl(this.serializer,a))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return n9(t.le,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.ir(e.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Q.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Rh(t).ee({range:r},(s,a,o)=>{if(s[0]===this.userId){const l=Zs(s[1]);i.push(l)}else o.done()}).next(()=>{Lt(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(t,e){return r9(t,this.userId,e)}_r(t){return i9(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:$l,lastStreamToken:""})}}function r9(n,t,e){const r=j1(t,e.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Rh(n).ee({range:s,X:!0},(o,l,h)=>{const[f,p,m]=o;f===t&&p===i&&(a=!0),h.done()}).next(()=>a)}function Go(n){return nr(n,vs)}function Rh(n){return nr(n,af)}function i9(n){return nr(n,Dg)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new uu(0)}static cr(){return new uu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zet{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next(e=>{const r=new uu(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.lr(t).next(e=>Ft.fromTimestamp(new He(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.lr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.lr(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.hr(t,i)))}addTargetData(t,e){return this.Pr(t,e).next(()=>this.lr(t).next(r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>wh(t).delete(e.targetId)).next(()=>this.lr(t)).next(r=>(Lt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r)))}removeTargets(t,e,r){let i=0;const s=[];return wh(t).ee((a,o)=>{const l=Np(o);l.sequenceNumber<=e&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(t,l)))}).next(()=>Q.waitFor(s)).next(()=>i)}forEachTarget(t,e){return wh(t).ee((r,i)=>{const s=Np(i);e(s)})}lr(t){return pM(t).get(Dv).next(e=>(Lt(e!==null,2888),e))}hr(t,e){return pM(t).put(Dv,e)}Pr(t,e){return wh(t).put(QL(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next(e=>e.targetCount)}getTargetData(t,e){const r=ou(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return wh(t).ee({range:i,index:X5},(a,o,l)=>{const h=Np(o);Jg(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,r){const i=[],s=rc(t);return e.forEach(a=>{const o=Fr(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(t,r,a))}),Q.waitFor(i)}removeMatchingKeys(t,e,r){const i=rc(t);return Q.forEach(e,s=>{const a=Fr(s.path);return Q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(t,r,s)])})}removeMatchingKeysForTargetId(t,e){const r=rc(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=rc(t);let s=se();return i.ee({range:r,X:!0},(a,o,l)=>{const h=Zs(a[1]),f=new Ct(h);s=s.add(f)}).next(()=>s)}containsKey(t,e){const r=Fr(e.path),i=IDBKeyRange.bound([r],[F5(r)],!1,!0);let s=0;return rc(t).ee({index:nT,X:!0,range:i},([a,o],l,h)=>{a!==0&&(s++,h.done())}).next(()=>s>0)}At(t,e){return wh(t).get(e).next(r=>r?Np(r):null)}}function wh(n){return nr(n,of)}function pM(n){return nr(n,ql)}function rc(n){return nr(n,cf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="LruGarbageCollector",s9=1048576;function mM([n,t],[e,r]){const i=Zt(n,e);return i===0?Zt(t,r):i}class Jet{constructor(t){this.Ir=t,this.buffer=new ze(mM),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();mM(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class a9{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){_t(gM,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Mc(e)?_t(gM,"Ignoring IndexedDB error during garbage collection: ",e):await Nc(e)}await this.Vr(3e5)})}}class tnt{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return Q.resolve(fi.ce);const r=new Jet(e);return this.mr.forEachTarget(t,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(t,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(dM)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dM):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,i,s,a,o,l,h;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(t,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(t,r,e))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(h=Date.now(),Ch()<=he.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${p} documents in `+(h-l)+`ms
Total Duration: ${h-f}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function o9(n,t){return new tnt(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ent{constructor(t,e){this.db=t,this.garbageCollector=o9(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,(r,i)=>e(i))}addReference(t,e,r){return s1(t,r)}removeReference(t,e,r){return s1(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return s1(t,e)}br(t,e){return function(i,s){let a=!1;return i9(i).te(o=>r9(i,o,s).next(l=>(l&&(a=!0),Q.resolve(!l)))).next(()=>a)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(t,(a,o)=>{if(o<=e){const l=this.br(t,a).next(h=>{if(!h)return s++,r.getEntry(t,a).next(()=>(r.removeEntry(a,Ft.min()),rc(t).delete(function(p){return[0,Fr(p.path)]}(a))))});i.push(l)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(t)).next(()=>s)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return s1(t,e)}Sr(t,e){const r=rc(t);let i,s=fi.ce;return r.ee({index:nT},([a,o],{path:l,sequenceNumber:h})=>{a===0?(s!==fi.ce&&e(new Ct(Zs(i)),s),s=h,i=l):s=fi.ce}).next(()=>{s!==fi.ce&&e(new Ct(Zs(i)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function s1(n,t){return rc(n).put(function(r,i){return{targetId:0,path:Fr(r.path),sequenceNumber:i}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(){this.changes=new lo(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,wn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?Q.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nnt{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return yl(t).put(r)}removeEntry(t,e,r){return yl(t).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Lv(a),o[o.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Dr(t,r)))}getEntry(t,e){let r=wn.newInvalidDocument(e);return yl(t).ee({index:H1,range:IDBKeyRange.only(up(e))},(i,s)=>{r=this.Cr(e,s)}).next(()=>r)}vr(t,e){let r={size:0,document:wn.newInvalidDocument(e)};return yl(t).ee({index:H1,range:IDBKeyRange.only(up(e))},(i,s)=>{r={document:this.Cr(e,s),size:Bv(s)}}).next(()=>r)}getEntries(t,e){let r=Ci();return this.Fr(t,e,(i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)}).next(()=>r)}Mr(t,e){let r=Ci(),i=new tn(Ct.comparator);return this.Fr(t,e,(s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,Bv(a))}).next(()=>({documents:r,Or:i}))}Fr(t,e,r){if(e.isEmpty())return Q.resolve();let i=new ze(_M);e.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(up(i.first()),up(i.last())),a=i.getIterator();let o=a.getNext();return yl(t).ee({index:H1,range:s},(l,h,f)=>{const p=Ct.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;o&&_M(o,p)<0;)r(o,null),o=a.getNext();o&&o.isEqual(p)&&(r(o,h),o=a.hasNext()?a.getNext():null),o?f.j(up(o)):f.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,e,r,i,s){const a=e.path,o=[a.popLast().toArray(),a.lastSegment(),Lv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yl(t).J(IDBKeyRange.bound(o,l,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let f=Ci();for(const p of h){const m=this.Cr(Ct.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(e0(e,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(t,e,r,i){let s=Ci();const a=yM(e,r),o=yM(e,Ri.max());return yl(t).ee({index:K5,range:IDBKeyRange.bound(a,o,!0)},(l,h,f)=>{const p=this.Cr(Ct.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(p.key,p),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(t){return new rnt(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return vM(t).get(Vb).next(e=>(Lt(!!e,20021),e))}Dr(t,e){return vM(t).put(Vb,e)}Cr(t,e){if(e){const r=Het(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(Ft.min())))return r}return wn.newInvalidDocument(t)}}function l9(n){return new nnt(n)}class rnt extends c9{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new lo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new ze((s,a)=>Zt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(e.push(this.Nr.removeEntry(t,s,o.readTime)),a.isValidDocument()){const l=tM(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=Bv(l);r+=h-o.size,e.push(this.Nr.addEntry(t,s,l))}else if(r-=o.size,this.trackRemovals){const l=tM(this.Nr.serializer,a.convertToNoDocument(Ft.min()));e.push(this.Nr.addEntry(t,s,l))}}),i.forEach(s=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Nr.updateMetadata(t,r)),Q.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next(r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next(({documents:r,Or:i})=>(i.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function vM(n){return nr(n,Og)}function yl(n){return nr(n,Iv)}function up(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function yM(n,t){const e=t.documentKey.path.toArray();return[n,Lv(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function _M(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<e.length-2&&s<r.length-2;++s)if(i=Zt(e[s],r[s]),i)return i;return i=Zt(e.length,r.length),i||(i=Zt(e[e.length-2],r[r.length-2]),i||Zt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class int{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&ig(r.mutation,i,di.empty(),He.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,se()).next(()=>r))}getLocalViewOfDocuments(t,e,r=se()){const i=Js();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(s=>{let a=Op();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const r=Js();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,se()))}populateOverlays(t,e,r){const i=[];return r.forEach(s=>{e.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,o)=>{e.set(a,o)})})}computeViews(t,e,r,i){let s=Ci();const a=rg(),o=function(){return rg()}();return e.forEach((l,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof uo)?s=s.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),ig(f.mutation,h,f.mutation.getFieldMask(),He.now())):a.set(h.key,di.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,f)=>a.set(h,f)),e.forEach((h,f)=>o.set(h,new int(f,a.get(h)??null))),o))}recalculateAndSaveOverlays(t,e){const r=rg();let i=new tn((a,o)=>a-o),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const o of a)o.keys().forEach(l=>{const h=e.get(l);if(h===null)return;let f=r.get(l)||di.empty();f=o.applyToLocalView(h,f),r.set(l,f);const p=(i.get(o.batchId)||se()).add(l);i=i.insert(o.batchId,p)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,f=l.value,p=CL();f.forEach(m=>{if(!s.has(m)){const v=ML(e.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return Q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(a){return Ct.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):oet(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-s.size):Q.resolve(Js());let o=sf,l=s;return a.next(h=>Q.forEach(h,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(f)?Q.resolve():this.remoteDocumentCache.getEntry(t,f).next(m=>{l=l.insert(f,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,se())).next(f=>({batchId:o,changes:SL(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ct(e)).next(r=>{let i=Op();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const s=e.collectionGroup;let a=Op();return this.indexManager.getCollectionParents(t,s).next(o=>Q.forEach(o,l=>{const h=function(p,m){return new Ey(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,r,i).next(f=>{f.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,s,i))).next(a=>{s.forEach((l,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,wn.newInvalidDocument(f)))});let o=Op();return a.forEach((l,h)=>{const f=s.get(l);f!==void 0&&ig(f.mutation,h,di.empty(),He.now()),e0(e,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class snt{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Q.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:Xr(i.createTime)}}(e)),Q.resolve()}getNamedQuery(t,e){return Q.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(i){return{name:i.name,query:ZL(i.bundledQuery),readTime:Xr(i.readTime)}}(e)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ant{constructor(){this.overlays=new tn(Ct.comparator),this.qr=new Map}getOverlay(t,e){return Q.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Js();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,s)=>{this.St(t,e,s)}),Q.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(t,e,r){const i=Js(),s=e.length+1,a=new Ct(e.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let s=new tn((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Js(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const o=Js(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>o.set(h,f)),!(o.size()>=i)););return Q.resolve(o)}St(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gT(e,r));let s=this.qr.get(e);s===void 0&&(s=se(),this.qr.set(e,s)),this.qr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ont{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.Qr=new ze(fr.$r),this.Ur=new ze(fr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new fr(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Gr(new fr(t,e))}zr(t,e){t.forEach(r=>this.removeReference(r,e))}jr(t){const e=new Ct(new Pe([])),r=new fr(e,t),i=new fr(e,t+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Ct(new Pe([])),r=new fr(e,t),i=new fr(e,t+1);let s=se();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){const e=new fr(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class fr{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Ct.comparator(t.key,e.key)||Zt(t.Yr,e.Yr)}static Kr(t,e){return Zt(t.Yr,e.Yr)||Ct.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cnt{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ze(fr.$r)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dT(s,e,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new fr(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(t,e){return Q.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?$l:this.tr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new fr(e,0),i=new fr(e,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new ze(Zt);return e.forEach(i=>{const s=new fr(i,0),a=new fr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let s=r;Ct.isDocumentKey(s)||(s=s.child(""));const a=new fr(new Ct(s),0);let o=new ze(Zt);return this.Zr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Yr)),!0)},a),Q.resolve(this.ti(o))}ti(t){const e=[];return t.forEach(r=>{const i=this.Xr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){Lt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(e.mutations,i=>{const s=new fr(i.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,e){const r=new fr(e,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lnt{constructor(t){this.ri=t,this.docs=function(){return new tn(Ct.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return Q.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(e))}getEntries(t,e){let r=Ci();return e.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let s=Ci();const a=e.path,o=new Ct(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:f}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||tT(z5(f),r)<=0||(i.has(f.key)||e0(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(t,e,r,i){Ot(9500)}ii(t,e){return Q.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new unt(this)}getSize(t){return Q.resolve(this.size)}}class unt extends c9{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)}),Q.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hnt{constructor(t){this.persistence=t,this.si=new lo(e=>ou(e),Jg),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.oi=0,this._i=new xT,this.targetCount=0,this.ai=uu.ur()}forEachTarget(t,e){return this.si.forEach((r,i)=>e(i)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),Q.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new uu(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Q.resolve()}updateTargetData(t,e){return this.Pr(e),Q.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,e,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=e&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return Q.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),Q.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),Q.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Q.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return Q.resolve(r)}containsKey(t,e){return Q.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,e){this.ui={},this.overlays={},this.ci=new fi(0),this.li=!1,this.li=!0,this.hi=new ont,this.referenceDelegate=t(this),this.Pi=new hnt(this),this.indexManager=new Xet,this.remoteDocumentCache=function(i){return new lnt(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new XL(e),this.Ii=new snt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ant,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new cnt(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){_t("MemoryPersistence","Starting transaction:",t);const i=new fnt(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(t,e){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,e)))}}class fnt extends W5{constructor(t){super(),this.currentSequenceNumber=t}}class Dy{constructor(t){this.persistence=t,this.Ri=new xT,this.Vi=null}static mi(t){return new Dy(t)}get fi(){if(this.Vi)return this.Vi;throw Ot(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),Q.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Q.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{const i=Ct.fromPath(r);return this.gi(t,i).next(s=>{s||e.removeEntry(i,Ft.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return Q.or([()=>Q.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Fv{constructor(t,e){this.persistence=t,this.pi=new lo(r=>Fr(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=o9(this,e)}static mi(t,e){return new Fv(t,e)}Ei(){}di(t){return Q.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}pr(t,e){return Q.forEach(this.pi,(r,i)=>this.br(t,r,i).next(s=>s?Q.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(t,a=>this.br(t,a,e).next(o=>{o||(r++,s.removeEntry(a,Ft.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=G1(t.data.value)),e}br(t,e,r){return Q.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dnt{constructor(t){this.serializer=t}k(t,e,r,i){const s=new gy("createOrUpgrade",e);r<1&&i>=1&&(function(l){l.createObjectStore(Zg)}(t),function(l){l.createObjectStore(Dg,{keyPath:Att}),l.createObjectStore(vs,{keyPath:ON,autoIncrement:!0}).createIndex(Bl,RN,{unique:!0}),l.createObjectStore(af)}(t),xM(t),function(l){l.createObjectStore(Sl)}(t));let a=Q.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(cf),l.deleteObjectStore(of),l.deleteObjectStore(ql)}(t),xM(t)),a=a.next(()=>function(l){const h=l.store(ql),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return h.put(Dv,f)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,h){return h.store(vs).J().next(p=>{l.deleteObjectStore(vs),l.createObjectStore(vs,{keyPath:ON,autoIncrement:!0}).createIndex(Bl,RN,{unique:!0});const m=h.store(vs),v=p.map(x=>m.put(x));return Q.waitFor(v)})}(t,s))),a=a.next(()=>{(function(l){l.createObjectStore(lf,{keyPath:Mtt})})(t)})),r<5&&i>=5&&(a=a.next(()=>this.yi(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Og)}(t),this.wi(s)))),r<7&&i>=7&&(a=a.next(()=>this.Si(s))),r<8&&i>=8&&(a=a.next(()=>this.bi(t,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&i>=10&&(a=a.next(()=>this.Di(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(vy,{keyPath:Ptt})})(t),function(l){l.createObjectStore(yy,{keyPath:ktt})}(t)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){const h=l.createObjectStore(_y,{keyPath:Htt});h.createIndex(Fb,ztt,{unique:!1}),h.createIndex(J5,Gtt,{unique:!1})})(t)})),r<13&&i>=13&&(a=a.next(()=>function(l){const h=l.createObjectStore(Iv,{keyPath:Stt});h.createIndex(H1,Ctt),h.createIndex(K5,Itt)}(t)).next(()=>this.Ci(t,s)).next(()=>t.deleteObjectStore(Sl))),r<14&&i>=14&&(a=a.next(()=>this.Fi(t,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore(rT,{keyPath:Ltt,autoIncrement:!0}).createIndex(Bb,Vtt,{unique:!1}),l.createObjectStore(Jp,{keyPath:Btt}).createIndex(Q5,Ftt,{unique:!1}),l.createObjectStore(tg,{keyPath:Utt}).createIndex(Z5,jtt,{unique:!1})}(t))),r<16&&i>=16&&(a=a.next(()=>{e.objectStore(Jp).clear()}).next(()=>{e.objectStore(tg).clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(iT,{keyPath:Wtt})})(t)})),r<18&&i>=18&&yk()&&(a=a.next(()=>{e.objectStore(Jp).clear()}).next(()=>{e.objectStore(tg).clear()})),a}wi(t){let e=0;return t.store(Sl).ee((r,i)=>{e+=Bv(i)}).next(()=>{const r={byteSize:e};return t.store(Og).put(Vb,r)})}yi(t){const e=t.store(Dg),r=t.store(vs);return e.J().next(i=>Q.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,$l],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Bl,a).next(o=>Q.forEach(o,l=>{Lt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const h=Rl(this.serializer,l);return n9(t,s.userId,h).next(()=>{})}))}))}Si(t){const e=t.store(cf),r=t.store(Sl);return t.store(ql).get(Dv).next(i=>{const s=[];return r.ee((a,o)=>{const l=new Pe(a),h=function(p){return[0,Fr(p)]}(l);s.push(e.get(h).next(f=>f?Q.resolve():(p=>e.put({targetId:0,path:Fr(p),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>Q.waitFor(s))})}bi(t,e){t.createObjectStore(Rg,{keyPath:Ntt});const r=e.store(Rg),i=new _T,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Fr(l)})}};return e.store(Sl).ee({X:!0},(a,o)=>{const l=new Pe(a);return s(l.popLast())}).next(()=>e.store(af).ee({X:!0},([a,o,l],h)=>{const f=Zs(o);return s(f.popLast())}))}Di(t){const e=t.store(of);return e.ee((r,i)=>{const s=Np(i),a=QL(this.serializer,s);return e.put(a)})}Ci(t,e){const r=e.store(Sl),i=[];return r.ee((s,a)=>{const o=e.store(Iv),l=function(p){return p.document?new Ct(Pe.fromString(p.document.name).popFirst(5)):p.noDocument?Ct.fromSegments(p.noDocument.path):p.unknownDocument?Ct.fromSegments(p.unknownDocument.path):Ot(36783)}(a).path.toArray(),h={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(h))}).next(()=>Q.waitFor(i))}Fi(t,e){const r=e.store(vs),i=l9(this.serializer),s=new wT(Dy.mi,this.serializer.yt);return r.J().next(a=>{const o=new Map;return a.forEach(l=>{let h=o.get(l.userId)??se();Rl(this.serializer,l).keys().forEach(f=>h=h.add(f)),o.set(l.userId,h)}),Q.forEach(o,(l,h)=>{const f=new Mr(h),p=Cy.wt(this.serializer,f),m=s.getIndexManager(f),v=Iy.wt(f,this.serializer,m,s.referenceDelegate);return new u9(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Ub(e,fi.ce),l).next()})})}}function xM(n){n.createObjectStore(cf,{keyPath:Ott}).createIndex(nT,Rtt,{unique:!0}),n.createObjectStore(of,{keyPath:"targetId"}).createIndex(X5,Dtt,{unique:!0}),n.createObjectStore(ql)}const Wo="IndexedDbPersistence",zw=18e5,Gw=5e3,Ww="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pnt="main";class ET{constructor(t,e,r,i,s,a,o,l,h,f,p=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=h,this.Oi=f,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!ET.v())throw new St(dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ent(this,i),this.$i=e+pnt,this.serializer=new XL(l),this.Ui=new pc(this.$i,this.Ni,new dnt(this.serializer)),this.hi=new Get,this.Pi=new Zet(this.referenceDelegate,this.serializer),this.remoteDocumentCache=l9(this.serializer),this.Ii=new zet,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Dn(Wo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(dt.FAILED_PRECONDITION,Ww);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Pi.getHighestSequenceNumber(t))}).then(t=>{this.ci=new fi(t,this.xi)}).then(()=>{this.li=!0}).catch(t=>(this.Ui&&this.Ui.close(),Promise.reject(t)))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>a1(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(t).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(t)).next(e=>this.isPrimary&&!e?this.Zi(t).next(()=>!1):!!e&&this.Xi(t).next(()=>!0))).catch(t=>{if(Mc(t))return _t(Wo,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return _t(Wo,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable(()=>this.Qi(t)),this.isPrimary=t})}Hi(t){return hp(t).get(mh).next(e=>Q.resolve(this.es(e)))}ts(t){return a1(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,zw)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=nr(e,lf);return r.J().next(i=>{const s=this.ss(i,zw),a=i.filter(o=>s.indexOf(o)===-1);return Q.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?Q.resolve(!0):hp(t).get(mh).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Gw)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new St(dt.FAILED_PRECONDITION,Ww);return!1}}return!(!this.networkEnabled||!this.inForeground)||a1(t).J().next(r=>this.ss(r,Gw).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&_t(Wo,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Zg,lf],t=>{const e=new Ub(t,fi.ce);return this.Zi(e).next(()=>this.ts(e))}),this.Ui.close(),this.Ps()}ss(t,e){return t.filter(r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",t=>a1(t).J().next(e=>this.ss(e,zw).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return Iy.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Qet(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Cy.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){_t(Wo,"Starting transaction:",t);const i=e==="readonly"?"readonly":"readwrite",s=function(l){return l===18?Ytt:l===17?rL:l===16?qtt:l===15?sT:l===14?nL:l===13?eL:l===12?$tt:l===11?tL:void Ot(60245)}(this.Ni);let a;return this.Ui.runTransaction(t,i,s,o=>(a=new Ub(o,this.ci?this.ci.next():fi.ce),e==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw Dn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new St(dt.FAILED_PRECONDITION,G5);return r(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(t){return hp(t).get(mh).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Gw)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new St(dt.FAILED_PRECONDITION,Ww)})}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hp(t).put(mh,e)}static v(){return pc.v()}Zi(t){const e=hp(t);return e.get(mh).next(r=>this.es(r)?(_t(Wo,"Releasing primary lease."),e.delete(mh)):Q.resolve())}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Dn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;vk()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return _t(Wo,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dn(Wo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Dn("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function hp(n){return nr(n,Zg)}function a1(n){return nr(n,lf)}function h9(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=i}static As(t,e){let r=se(),i=se();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bT(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gnt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vk()?8:$5(er())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,i){const s={result:null};return this.ys(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,e,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new gnt;return this.Ss(t,e,a).next(o=>{if(s.result=o,this.Vs)return this.bs(t,e,a,o.size)})}).next(()=>s.result)}bs(t,e,r,i){return r.documentReadCount<this.fs?(Ch()<=he.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",Ih(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Ch()<=he.DEBUG&&_t("QueryEngine","Query:",Ih(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ch()<=he.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",Ih(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Oi(e))):Q.resolve())}ys(t,e){if(GN(e))return Q.resolve(null);let r=Oi(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=$b(e,null,"F"),r=Oi(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=se(...s);return this.ps.getDocuments(t,a).next(o=>this.indexManager.getMinOffset(t,r).next(l=>{const h=this.Ds(e,o);return this.Cs(e,h,a,l.readTime)?this.ys(t,$b(e,null,"F")):this.vs(t,h,e,l)}))})))}ws(t,e,r,i){return GN(e)||i.isEqual(Ft.min())?Q.resolve(null):this.ps.getDocuments(t,r).next(s=>{const a=this.Ds(e,s);return this.Cs(e,a,r,i)?Q.resolve(null):(Ch()<=he.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ih(e)),this.vs(t,a,e,H5(i,sf)).next(o=>o))})}Ds(t,e){let r=new ze(AL(t));return e.forEach((i,s)=>{e0(t,s)&&(r=r.add(s))}),r}Cs(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(t,e,r){return Ch()<=he.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Ih(e)),this.ps.getDocumentsMatchingQuery(t,e,Ri.min(),r)}vs(t,e,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="LocalStore",mnt=3e8;class vnt{constructor(t,e,r,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new tn(Zt),this.xs=new lo(s=>ou(s),Jg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new u9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function d9(n,t,e,r){return new vnt(n,t,e,r)}async function p9(n,t){const e=kt(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,e.Bs(t),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=se();for(const h of i){a.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}for(const h of s){o.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}return e.localDocuments.getDocuments(r,l).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:o}))})})}function ynt(n,t){const e=kt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=e.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,h,f){const p=h.batch,m=p.keys();let v=Q.resolve();return m.forEach(x=>{v=v.next(()=>f.getEntry(l,x)).next(E=>{const b=h.docVersions.get(x);Lt(b!==null,48541),E.version.compareTo(b)<0&&(p.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),f.addEntry(E)))})}),v.next(()=>o.mutationQueue.removeMutationBatch(l,p))}(e,r,t,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=se();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function g9(n){const t=kt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function _nt(n,t){const e=kt(n),r=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const o=[];t.targetChanges.forEach((f,p)=>{const m=i.get(p);if(!m)return;o.push(e.Pi.removeMatchingKeys(s,f.removedDocuments,p).next(()=>e.Pi.addMatchingKeys(s,f.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?v=v.withResumeToken(Pn.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(p,v),function(E,b,T){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=mnt?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,v,f)&&o.push(e.Pi.updateTargetData(s,v))});let l=Ci(),h=se();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),o.push(xnt(s,a,t.documentUpdates).next(f=>{l=f.ks,h=f.qs})),!r.isEqual(Ft.min())){const f=e.Pi.getLastRemoteSnapshotVersion(s).next(p=>e.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(f)}return Q.waitFor(o).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.Ms=i,s))}function xnt(n,t,e){let r=se(),i=se();return e.forEach(s=>r=r.add(s)),t.getEntries(n,r).next(s=>{let a=Ci();return e.forEach((o,l)=>{const h=s.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ft.min())?(t.removeEntry(o,l.readTime),a=a.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(l),a=a.insert(o,l)):_t(AT,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{ks:a,qs:i}})}function wnt(n,t){const e=kt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=$l),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Uv(n,t){const e=kt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Pi.getTargetData(r,t).next(s=>s?(i=s,Q.resolve(i)):e.Pi.allocateTargetId(r).next(a=>(i=new Qa(t,a,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r})}async function vf(n,t,e){const r=kt(n),i=r.Ms.get(t),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Mc(a))throw a;_t(AT,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function t2(n,t,e){const r=kt(n);let i=Ft.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,h,f){const p=kt(l),m=p.xs.get(f);return m!==void 0?Q.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)}(r,a,Oi(t)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,t,e?i:Ft.min(),e?s:se())).next(o=>(y9(r,bL(t),o),{documents:o,Qs:s})))}function m9(n,t){const e=kt(n),r=kt(e.Pi),i=e.Ms.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",s=>r.At(s,t).next(a=>a?a.target:null))}function v9(n,t){const e=kt(n),r=e.Os.get(t)||Ft.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ns.getAllFromCollectionGroup(i,t,H5(r,sf),Number.MAX_SAFE_INTEGER)).then(i=>(y9(e,t,i),i))}function y9(n,t,e){let r=n.Os.get(t)||Ft.min();e.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="firestore_clients";function wM(n,t){return`${_9}_${n}_${t}`}const x9="firestore_mutations";function EM(n,t,e){let r=`${x9}_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const w9="firestore_targets";function $w(n,t){return`${w9}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="SharedClientState";class jv{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ws(t,e,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new St(i.error.code,i.error.message))),a?new jv(t,e,i.state,s):(Dn(Ys,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class sg{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new St(r.error.code,r.error.message))),s?new sg(t,r.state,i):(Dn(Ys,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Hv{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=hT();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=q5(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Hv(t,s):(Dn(Ys,`Failed to parse client data for instance '${t}': ${e}`),null)}}class TT{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new TT(e.clientId,e.onlineState):(Dn(Ys,`Failed to parse online state: ${t}`),null)}}class e2{constructor(){this.activeTargetIds=hT()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qw{constructor(t,e,r,i,s){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new tn(Zt),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=wM(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new e2),this.ro=new RegExp(`^${_9}_${a}_([^_]*)$`),this.io=new RegExp(`^${x9}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${w9}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const i=this.getItem(wM(this.persistenceKey,r));if(i){const s=Hv.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem($w(this.persistenceKey,t));if(i){const s=sg.Ws(t,i);s&&(r=s.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($w(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Po(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return _t(Ys,"READ",t,e),e}setItem(t,e){_t(Ys,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){_t(Ys,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(_t(Ys,"EVENT",e.key,e.newValue),e.key===this.eo)return void Dn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=function(s){let a=fi.ce;if(s!=null)try{const o=JSON.parse(s);Lt(typeof o=="number",30636,{So:s}),a=o}catch(o){Dn(Ys,"Failed to read sequence number from WebStorage",o)}return a}(e.newValue);r!==fi.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(e)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const i=new jv(this.currentUser,t,e,r),s=EM(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Gs())}Po(t){const e=EM(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const i=$w(this.persistenceKey,t),s=new sg(t,e,r);this.setItem(i,s.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return Hv.Ws(r,e)}fo(t,e){const r=this.io.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return jv.Ws(new Mr(s),i,e)}yo(t,e){const r=this.so.exec(t),i=Number(r[1]);return sg.Ws(i,e)}uo(t){return TT.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);_t(Ys,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),i=this.lo(this.Zs),s=this.lo(r),a=[],o=[];return s.forEach(l=>{i.has(l)||a.push(l)}),i.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=r})}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=hT();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class E9{constructor(){this.Mo=new e2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new e2,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ent{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="ConnectivityMonitor";class AM{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_t(bM,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){_t(bM,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o1=null;function n2(){return o1===null?o1=function(){return 268435456+Math.round(2147483648*Math.random())}():o1++,"0x"+o1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="RestConnection",bnt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ant{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ov?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,e,r,i,s){const a=n2(),o=this.zo(t,e.toUriEncodedString());_t(Yw,`Sending RPC '${t}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:h}=new URL(o),f=kf(h);return this.Jo(t,o,l,r,f).then(p=>(_t(Yw,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Sg(Yw,`RPC '${t}' ${a} failed with error: `,p,"url: ",o,"request:",r),p})}Ho(t,e,r,i,s,a){return this.Go(t,e,r,i,s)}jo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vf}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}zo(t,e){const r=bnt[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tnt{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="WebChannelConnection";class Snt extends Ant{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,i,s){const a=n2();return new Promise((o,l)=>{const h=new M5;h.setWithCredentials(!0),h.listenOnce(P5.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case F1.NO_ERROR:const p=h.getResponseJson();_t(Rr,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),o(p);break;case F1.TIMEOUT:_t(Rr,`RPC '${t}' ${a} timed out`),l(new St(dt.DEADLINE_EXCEEDED,"Request time out"));break;case F1.HTTP_ERROR:const m=h.getStatus();if(_t(Rr,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const E=function(T){const S=T.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(S)>=0?S:dt.UNKNOWN}(x.status);l(new St(E,x.message))}else l(new St(dt.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new St(dt.UNAVAILABLE,"Connection failed."));break;default:Ot(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{_t(Rr,`RPC '${t}' ${a} completed.`)}});const f=JSON.stringify(i);_t(Rr,`RPC '${t}' ${a} sending request:`,i),h.send(e,"POST",f,r,15)})}T_(t,e,r){const i=n2(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=V5(),o=L5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,e,r),l.encodeInitMessageHeaders=!0;const f=s.join("");_t(Rr,`Creating RPC '${t}' stream ${i}: ${f}`,l);const p=a.createWebChannel(f,l);this.I_(p);let m=!1,v=!1;const x=new Tnt({Yo:b=>{v?_t(Rr,`Not sending because RPC '${t}' stream ${i} is closed:`,b):(m||(_t(Rr,`Opening RPC '${t}' stream ${i} transport.`),p.open(),m=!0),_t(Rr,`RPC '${t}' stream ${i} sending:`,b),p.send(b))},Zo:()=>p.close()}),E=(b,T,S)=>{b.listen(T,D=>{try{S(D)}catch(P){setTimeout(()=>{throw P},0)}})};return E(p,Dp.EventType.OPEN,()=>{v||(_t(Rr,`RPC '${t}' stream ${i} transport opened.`),x.o_())}),E(p,Dp.EventType.CLOSE,()=>{v||(v=!0,_t(Rr,`RPC '${t}' stream ${i} transport closed`),x.a_(),this.E_(p))}),E(p,Dp.EventType.ERROR,b=>{v||(v=!0,Sg(Rr,`RPC '${t}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),x.a_(new St(dt.UNAVAILABLE,"The operation could not be completed")))}),E(p,Dp.EventType.MESSAGE,b=>{var T;if(!v){const S=b.data[0];Lt(!!S,16349);const D=S,P=(D==null?void 0:D.error)||((T=D[0])==null?void 0:T.error);if(P){_t(Rr,`RPC '${t}' stream ${i} received error:`,P);const k=P.status;let U=function(N){const L=Un[N];if(L!==void 0)return LL(L)}(k),M=P.message;U===void 0&&(U=dt.INTERNAL,M="Unknown error status: "+k+" with message "+P.message),v=!0,x.a_(new St(U,M)),p.close()}else _t(Rr,`RPC '${t}' stream ${i} received:`,S),x.u_(S)}}),E(o,k5.STAT_EVENT,b=>{b.stat===Pb.PROXY?_t(Rr,`RPC '${t}' stream ${i} detected buffering proxy`):b.stat===Pb.NOPROXY&&_t(Rr,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(){return typeof window<"u"?window:null}function K1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n){return new Net(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(t,e,r=1e3,i=1.5,s=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-r);i>0&&_t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="PersistentStream";class T9{constructor(t,e,r,i,s,a,o,l){this.Mi=t,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A9(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===dt.RESOURCE_EXHAUSTED?(Dn(e.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===e&&this.G_(r,i)},r=>{t(()=>{const i=new St(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return _t(TM,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(_t(TM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cnt extends T9{constructor(t,e,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=ket(this.serializer,t),r=function(s){if(!("targetChange"in s))return Ft.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ft.min():a.readTime?Xr(a.readTime):Ft.min()}(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=Kb(this.serializer),e.addTarget=function(s,a){let o;const l=a.target;if(o=Nv(l)?{documents:GL(s,l)}:{query:WL(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=FL(s,a.resumeToken);const h=qb(s,a.expectedCount);h!==null&&(o.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ft.min())>0){o.readTime=mf(s,a.snapshotVersion.toTimestamp());const h=qb(s,a.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,t);const r=Vet(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=Kb(this.serializer),e.removeTarget=t,this.q_(e)}}class Int extends T9{constructor(t,e,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=Let(t.writeResults,t.commitTime),r=Xr(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=Kb(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>kv(this.serializer,r))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dnt{}class Ont extends Dnt{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new St(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,Yb(e,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new St(dt.UNKNOWN,s.toString())})}Ho(t,e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(t,Yb(e,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new St(dt.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Rnt{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dn(e),this.aa=!1):_t("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu="RemoteStore";class Nnt{constructor(t,e,r,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{xu(this)&&(_t(hu,"Restarting streams for network reachability change."),await async function(l){const h=kt(l);h.Ea.add(4),await i0(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Ry(h)}(this))})}),this.Ra=new Rnt(r,i)}}async function Ry(n){if(xu(n))for(const t of n.da)await t(!0)}async function i0(n){for(const t of n.da)await t(!1)}function Ny(n,t){const e=kt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),IT(e)?CT(e):Uf(e).O_()&&ST(e,t))}function yf(n,t){const e=kt(n),r=Uf(e);e.Ia.delete(t),r.O_()&&S9(e,t),e.Ia.size===0&&(r.O_()?r.L_():xu(e)&&e.Ra.set("Unknown"))}function ST(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ft.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Uf(n).Y_(t)}function S9(n,t){n.Va.Ue(t),Uf(n).Z_(t)}function CT(n){n.Va=new Iet({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Uf(n).start(),n.Ra.ua()}function IT(n){return xu(n)&&!Uf(n).x_()&&n.Ia.size>0}function xu(n){return kt(n).Ea.size===0}function C9(n){n.Va=void 0}async function Mnt(n){n.Ra.set("Online")}async function Pnt(n){n.Ia.forEach((t,e)=>{ST(n,t)})}async function knt(n,t){C9(n),IT(n)?(n.Ra.ha(t),CT(n)):n.Ra.set("Unknown")}async function Lnt(n,t,e){if(n.Ra.set("Online"),t instanceof BL&&t.state===2&&t.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(n,t)}catch(r){_t(hu,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await zv(n,r)}else if(t instanceof q1?n.Va.Ze(t):t instanceof VL?n.Va.st(t):n.Va.tt(t),!e.isEqual(Ft.min()))try{const r=await g9(n.localStore);e.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ia.get(h);f&&s.Ia.set(h,f.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,h)=>{const f=s.Ia.get(l);if(!f)return;s.Ia.set(l,f.withResumeToken(Pn.EMPTY_BYTE_STRING,f.snapshotVersion)),S9(s,l);const p=new Qa(f.target,l,h,f.sequenceNumber);ST(s,p)}),s.remoteSyncer.applyRemoteEvent(o)}(n,e)}catch(r){_t(hu,"Failed to raise snapshot:",r),await zv(n,r)}}async function zv(n,t,e){if(!Mc(t))throw t;n.Ea.add(1),await i0(n),n.Ra.set("Offline"),e||(e=()=>g9(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{_t(hu,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Ry(n)})}function I9(n,t){return t().catch(e=>zv(n,e,t))}async function Ff(n){const t=kt(n),e=Ac(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$l;for(;Vnt(t);)try{const i=await wnt(t.localStore,r);if(i===null){t.Ta.length===0&&e.L_();break}r=i.batchId,Bnt(t,i)}catch(i){await zv(t,i)}D9(t)&&O9(t)}function Vnt(n){return xu(n)&&n.Ta.length<10}function Bnt(n,t){n.Ta.push(t);const e=Ac(n);e.O_()&&e.X_&&e.ea(t.mutations)}function D9(n){return xu(n)&&!Ac(n).x_()&&n.Ta.length>0}function O9(n){Ac(n).start()}async function Fnt(n){Ac(n).ra()}async function Unt(n){const t=Ac(n);for(const e of n.Ta)t.ea(e.mutations)}async function jnt(n,t,e){const r=n.Ta.shift(),i=pT.from(r,t,e);await I9(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ff(n)}async function Hnt(n,t){t&&Ac(n).X_&&await async function(r,i){if(function(a){return Aet(a)&&a!==dt.ABORTED}(i.code)){const s=r.Ta.shift();Ac(r).B_(),await I9(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ff(r)}}(n,t),D9(n)&&O9(n)}async function SM(n,t){const e=kt(n);e.asyncQueue.verifyOperationInProgress(),_t(hu,"RemoteStore received new credentials");const r=xu(e);e.Ea.add(3),await i0(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Ry(e)}async function r2(n,t){const e=kt(n);t?(e.Ea.delete(2),await Ry(e)):t||(e.Ea.add(2),await i0(e),e.Ra.set("Unknown"))}function Uf(n){return n.ma||(n.ma=function(e,r,i){const s=kt(e);return s.sa(),new Cnt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:Mnt.bind(null,n),t_:Pnt.bind(null,n),r_:knt.bind(null,n),H_:Lnt.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),IT(n)?CT(n):n.Ra.set("Unknown")):(await n.ma.stop(),C9(n))})),n.ma}function Ac(n){return n.fa||(n.fa=function(e,r,i){const s=kt(e);return s.sa(),new Int(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Fnt.bind(null,n),r_:Hnt.bind(null,n),ta:Unt.bind(null,n),na:jnt.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Ff(n)):(await n.fa.stop(),n.Ta.length>0&&(_t(hu,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(t,e,r,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,s){const a=Date.now()+r,o=new DT(t,e,a,i,s);return o.start(r),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function OT(n,t){if(Dn("AsyncQueue",`${t}: ${n}`),Mc(n))return new St(dt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{static emptySet(t){return new Qh(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ct.comparator(e.key,r.key):(e,r)=>Ct.comparator(e.key,r.key),this.keyedMap=Op(),this.sortedSet=new tn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Qh)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Qh;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.ga=new tn(Ct.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Ot(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,r)=>{t.push(r)}),t}}class _f{constructor(t,e,r,i,s,a,o,l,h){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,r,i,s){const a=[];return e.forEach(o=>{a.push({type:0,doc:o})}),new _f(t,e,Qh.emptySet(e),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&by(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class znt{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Gnt{constructor(){this.queries=IM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const i=kt(e),s=i.queries;i.queries=IM(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new St(dt.ABORTED,"Firestore shutting down"))}}function IM(){return new lo(n=>EL(n),by)}async function RT(n,t){const e=kt(n);let r=3;const i=t.query;let s=e.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new znt,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await e.onListen(i,!0);break;case 1:s.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(a){const o=OT(a,`Initialization of query '${Ih(t.query)}' failed`);return void t.onError(o)}e.queries.set(i,s),s.Sa.push(t),t.va(e.onlineState),s.wa&&t.Fa(s.wa)&&MT(e)}async function NT(n,t){const e=kt(n),r=t.query;let i=3;const s=e.queries.get(r);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function Wnt(n,t){const e=kt(n);let r=!1;for(const i of t){const s=i.query,a=e.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&MT(e)}function $nt(n,t,e){const r=kt(n),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(e);r.queries.delete(t)}function MT(n){n.Ca.forEach(t=>{t.next()})}var i2,DM;(DM=i2||(i2={})).Ma="default",DM.Cache="cache";class PT{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new _f(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=_f.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==i2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(t){this.key=t}}class N9{constructor(t){this.key=t}}class qnt{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=AL(t),this.tu=new Qh(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new CM,i=e?e.tu:this.tu;let s=e?e.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,p)=>{const m=i.get(f),v=e0(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;m&&v?m.data.isEqual(v.data)?x!==E&&(r.track({type:3,doc:v}),b=!0):this.su(m,v)||(r.track({type:2,doc:v}),b=!0,(l&&this.eu(v,l)>0||h&&this.eu(v,h)<0)&&(o=!0)):!m&&v?(r.track({type:0,doc:v}),b=!0):m&&!v&&(r.track({type:1,doc:m}),b=!0,(l||h)&&(o=!0)),b&&(v?(a=a.add(v),s=E?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((f,p)=>function(v,x){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ot(20277,{Rt:b})}};return E(v)-E(x)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;const o=e&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,h=l!==this.Za;return this.Za=l,a.length!==0||h?{snapshot:new _f(this.query,t.tu,s,a,t.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CM,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const e=[];return t.forEach(r=>{this.Xa.has(r)||e.push(new N9(r))}),this.Xa.forEach(r=>{t.has(r)||e.push(new R9(r))}),e}cu(t){this.Ya=t.Qs,this.Xa=se();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return _f.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jf="SyncEngine";class Ynt{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Knt{constructor(t){this.key=t,this.hu=!1}}class Xnt{constructor(t,e,r,i,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new lo(o=>EL(o),by),this.Iu=new Map,this.Eu=new Set,this.du=new tn(Ct.comparator),this.Au=new Map,this.Ru=new xT,this.Vu={},this.mu=new Map,this.fu=uu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qnt(n,t,e=!0){const r=My(n);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await M9(r,t,e,!0),i}async function Znt(n,t){const e=My(n);await M9(e,t,!0,!1)}async function M9(n,t,e,r){const i=await Uv(n.localStore,Oi(t)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,e);let o;return r&&(o=await kT(n,t,s,a==="current",i.resumeToken)),n.isPrimaryClient&&e&&Ny(n.remoteStore,i),o}async function kT(n,t,e,r,i){n.pu=(p,m,v)=>async function(E,b,T,S){let D=b.view.ru(T);D.Cs&&(D=await t2(E.localStore,b.query,!1).then(({documents:M})=>b.view.ru(M,D)));const P=S&&S.targetChanges.get(b.targetId),k=S&&S.targetMismatches.get(b.targetId)!=null,U=b.view.applyChanges(D,E.isPrimaryClient,P,k);return s2(E,b.targetId,U.au),U.snapshot}(n,p,m,v);const s=await t2(n.localStore,t,!0),a=new qnt(t,s.Qs),o=a.ru(s.documents),l=r0.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),h=a.applyChanges(o,n.isPrimaryClient,l);s2(n,e,h.au);const f=new Ynt(t,e,a);return n.Tu.set(t,f),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),h.snapshot}async function Jnt(n,t,e){const r=kt(n),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!by(a,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&yf(r.remoteStore,i.targetId),xf(r,i.targetId)}).catch(Nc)):(xf(r,i.targetId),await vf(r.localStore,i.targetId,!0))}async function trt(n,t){const e=kt(n),r=e.Tu.get(t),i=e.Iu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),yf(e.remoteStore,r.targetId))}async function ert(n,t,e){const r=FT(n);try{const i=await function(a,o){const l=kt(a),h=He.now(),f=o.reduce((v,x)=>v.add(x.key),se());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=Ci(),E=se();return l.Ns.getEntries(v,f).next(b=>{x=b,x.forEach((T,S)=>{S.isValidDocument()||(E=E.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,x)).next(b=>{p=b;const T=[];for(const S of o){const D=Eet(S,p.get(S.key).overlayedDocument);D!=null&&T.push(new uo(S.key,D,dL(D.value.mapValue),Br.exists(!0)))}return l.mutationQueue.addMutationBatch(v,h,T,o)}).next(b=>{m=b;const T=b.applyToLocalDocumentSet(p,E);return l.documentOverlayCache.saveOverlays(v,b.batchId,T)})}).then(()=>({batchId:m.batchId,changes:SL(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let h=a.Vu[a.currentUser.toKey()];h||(h=new tn(Zt)),h=h.insert(o,l),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,e),await kc(r,i.changes),await Ff(r.remoteStore)}catch(i){const s=OT(i,"Failed to persist write");e.reject(s)}}async function P9(n,t){const e=kt(n);try{const r=await _nt(e.localStore,t);t.targetChanges.forEach((i,s)=>{const a=e.Au.get(s);a&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Lt(a.hu,14607):i.removedDocuments.size>0&&(Lt(a.hu,42227),a.hu=!1))}),await kc(e,r,t)}catch(r){await Nc(r)}}function OM(n,t,e){const r=kt(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(t);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=kt(a);l.onlineState=o;let h=!1;l.queries.forEach((f,p)=>{for(const m of p.Sa)m.va(o)&&(h=!0)}),h&&MT(l)}(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function nrt(n,t,e){const r=kt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Au.get(t),s=i&&i.key;if(s){let a=new tn(Ct.comparator);a=a.insert(s,wn.newNoDocument(s,Ft.min()));const o=se().add(s),l=new n0(Ft.min(),new Map,new tn(Zt),a,o);await P9(r,l),r.du=r.du.remove(s),r.Au.delete(t),BT(r)}else await vf(r.localStore,t,!1).then(()=>xf(r,t,e)).catch(Nc)}async function rrt(n,t){const e=kt(n),r=t.batch.batchId;try{const i=await ynt(e.localStore,t);VT(e,r,null),LT(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await kc(e,i)}catch(i){await Nc(i)}}async function irt(n,t,e){const r=kt(n);try{const i=await function(a,o){const l=kt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return l.mutationQueue.lookupMutationBatch(h,o).next(p=>(Lt(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(h,p))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>l.localDocuments.getDocuments(h,f))})}(r.localStore,t);VT(r,t,e),LT(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await kc(r,i)}catch(i){await Nc(i)}}function LT(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function VT(n,t,e){const r=kt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(e?s.reject(e):s.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function xf(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(r=>{n.Ru.containsKey(r)||k9(n,r)})}function k9(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(yf(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),BT(n))}function s2(n,t,e){for(const r of e)r instanceof R9?(n.Ru.addReference(r.key,t),srt(n,r)):r instanceof N9?(_t(jf,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||k9(n,r.key)):Ot(19791,{wu:r})}function srt(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(_t(jf,"New document in limbo: "+e),n.Eu.add(r),BT(n))}function BT(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Ct(Pe.fromString(t)),r=n.fu.next();n.Au.set(r,new Knt(e)),n.du=n.du.insert(e,r),Ny(n.remoteStore,new Qa(Oi(t0(e.path)),r,"TargetPurposeLimboResolution",fi.ce))}}async function kc(n,t,e){const r=kt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,t,e).then(h=>{var f;if((h||e)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=e==null?void 0:e.targetChanges.get(l.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(h){i.push(h);const p=bT.As(l.targetId,h);s.push(p)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(l,h){const f=kt(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(h,m=>Q.forEach(m.Es,v=>f.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>Q.forEach(m.ds,v=>f.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Mc(p))throw p;_t(AT,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const v=f.Ms.get(m),x=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(x);f.Ms=f.Ms.insert(m,E)}}}(r.localStore,s))}async function art(n,t){const e=kt(n);if(!e.currentUser.isEqual(t)){_t(jf,"User change. New user:",t.toKey());const r=await p9(e.localStore,t);e.currentUser=t,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new St(dt.CANCELLED,a))})}),s.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await kc(e,r.Ls)}}function ort(n,t){const e=kt(n),r=e.Au.get(t);if(r&&r.hu)return se().add(r.key);{let i=se();const s=e.Iu.get(t);if(!s)return i;for(const a of s){const o=e.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function crt(n,t){const e=kt(n),r=await t2(e.localStore,t.query,!0),i=t.view.cu(r);return e.isPrimaryClient&&s2(e,t.targetId,i.au),i}async function lrt(n,t){const e=kt(n);return v9(e.localStore,t).then(r=>kc(e,r))}async function urt(n,t,e,r){const i=kt(n),s=await function(o,l){const h=kt(o),f=kt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.er(p,l).next(m=>m?h.localDocuments.getDocuments(p,m):Q.resolve(null)))}(i.localStore,t);s!==null?(e==="pending"?await Ff(i.remoteStore):e==="acknowledged"||e==="rejected"?(VT(i,t,r||null),LT(i,t),function(o,l){kt(kt(o).mutationQueue).ir(l)}(i.localStore,t)):Ot(6720,"Unknown batchState",{Su:e}),await kc(i,s)):_t(jf,"Cannot apply mutation batch with id: "+t)}async function hrt(n,t){const e=kt(n);if(My(e),FT(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),i=await RM(e,r.toArray());e.gu=!0,await r2(e.remoteStore,!0);for(const s of i)Ny(e.remoteStore,s)}else if(t===!1&&e.gu!==!1){const r=[];let i=Promise.resolve();e.Iu.forEach((s,a)=>{e.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(xf(e,a),vf(e.localStore,a,!0))),yf(e.remoteStore,a)}),await i,await RM(e,r),function(a){const o=kt(a);o.Au.forEach((l,h)=>{yf(o.remoteStore,h)}),o.Ru.Jr(),o.Au=new Map,o.du=new tn(Ct.comparator)}(e),e.gu=!1,await r2(e.remoteStore,!1)}}async function RM(n,t,e){const r=kt(n),i=[],s=[];for(const a of t){let o;const l=r.Iu.get(a);if(l&&l.length!==0){o=await Uv(r.localStore,Oi(l[0]));for(const h of l){const f=r.Tu.get(h),p=await crt(r,f);p.snapshot&&s.push(p.snapshot)}}else{const h=await m9(r.localStore,a);o=await Uv(r.localStore,h),await kT(r,L9(h),a,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(s),i}function L9(n){return wL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function frt(n){return function(e){return kt(kt(e).persistence).Ts()}(kt(n).localStore)}async function drt(n,t,e,r){const i=kt(n);if(i.gu)return void _t(jf,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const a=await v9(i.localStore,bL(s[0])),o=n0.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Pn.EMPTY_BYTE_STRING);await kc(i,a,o);break}case"rejected":await vf(i.localStore,t,!0),xf(i,t,r);break;default:Ot(64155,e)}}async function prt(n,t,e){const r=My(n);if(r.gu){for(const i of t){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){_t(jf,"Adding an already active target "+i);continue}const s=await m9(r.localStore,i),a=await Uv(r.localStore,s);await kT(r,L9(s),a.targetId,!1,a.resumeToken),Ny(r.remoteStore,a)}for(const i of e)r.Iu.has(i)&&await vf(r.localStore,i,!1).then(()=>{yf(r.remoteStore,i),xf(r,i)}).catch(Nc)}}function My(n){const t=kt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=P9.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ort.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nrt.bind(null,t),t.Pu.H_=Wnt.bind(null,t.eventManager),t.Pu.yu=$nt.bind(null,t.eventManager),t}function FT(n){const t=kt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rrt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=irt.bind(null,t),t}class Vg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Oy(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return d9(this.persistence,new f9,t.initialUser,this.serializer)}Cu(t){return new wT(Dy.mi,this.serializer)}Du(t){return new E9}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vg.provider={build:()=>new Vg};class grt extends Vg{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Lt(this.persistence.referenceDelegate instanceof Fv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new a9(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new wT(r=>Fv.mi(r,e),this.serializer)}}class V9 extends Vg{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await FT(this.xu.syncEngine),await Ff(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return d9(this.persistence,new f9,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new a9(r,t.asyncQueue,e)}Mu(t,e){const r=new Ett(e,this.persistence);return new wtt(t.asyncQueue,r)}Cu(t){const e=h9(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new ET(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,b9(),K1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new E9}}class mrt extends V9{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof qw&&(this.sharedClientState.syncEngine={Co:urt.bind(null,e),vo:drt.bind(null,e),Fo:prt.bind(null,e),Ts:frt.bind(null,e),Do:lrt.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await hrt(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(t){const e=b9();if(!qw.v(e))throw new St(dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=h9(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new qw(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Bg{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=art.bind(null,this.syncEngine),await r2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Gnt}()}createDatastore(t){const e=Oy(t.databaseInfo.databaseId),r=function(s){return new Snt(s)}(t.databaseInfo);return function(s,a,o,l){return new Ont(s,a,o,l)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,s,a,o){return new Nnt(r,i,s,a,o)}(this.localStore,this.datastore,t.asyncQueue,e=>OM(this.syncEngine,e,0),function(){return AM.v()?new AM:new Ent}())}createSyncEngine(t,e){return function(i,s,a,o,l,h,f){const p=new Xnt(i,s,a,o,l,h);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const s=kt(i);_t(hu,"RemoteStore shutting down."),s.Ea.add(5),await i0(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Bg.provider={build:()=>new Bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Dn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="FirestoreClient";class vrt{constructor(t,e,r,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Mr.UNAUTHENTICATED,this.clientId=ZA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{_t(Tc,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(_t(Tc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=OT(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Kw(n,t){n.asyncQueue.verifyOperationInProgress(),_t(Tc,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await p9(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function NM(n,t){n.asyncQueue.verifyOperationInProgress();const e=await yrt(n);_t(Tc,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>SM(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>SM(t.remoteStore,i)),n._onlineComponents=t}async function yrt(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_t(Tc,"Using user provided OfflineComponentProvider");try{await Kw(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===dt.FAILED_PRECONDITION||i.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;Sg("Error using user provided cache. Falling back to memory cache: "+e),await Kw(n,new Vg)}}else _t(Tc,"Using default OfflineComponentProvider"),await Kw(n,new grt(void 0));return n._offlineComponents}async function B9(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_t(Tc,"Using user provided OnlineComponentProvider"),await NM(n,n._uninitializedComponentsProvider._online)):(_t(Tc,"Using default OnlineComponentProvider"),await NM(n,new Bg))),n._onlineComponents}function _rt(n){return B9(n).then(t=>t.syncEngine)}async function Gv(n){const t=await B9(n),e=t.eventManager;return e.onListen=Qnt.bind(null,t.syncEngine),e.onUnlisten=Jnt.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Znt.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=trt.bind(null,t.syncEngine),e}function xrt(n,t,e={}){const r=new ca;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const f=new UT({next:m=>{f.Nu(),a.enqueueAndForget(()=>NT(s,p));const v=m.docs.has(o);!v&&m.fromCache?h.reject(new St(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?h.reject(new St(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new PT(t0(o.path),f,{includeMetadataChanges:!0,qa:!0});return RT(s,p)}(await Gv(n),n.asyncQueue,t,e,r)),r.promise}function wrt(n,t,e={}){const r=new ca;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const f=new UT({next:m=>{f.Nu(),a.enqueueAndForget(()=>NT(s,p)),m.fromCache&&l.source==="server"?h.reject(new St(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new PT(o,f,{includeMetadataChanges:!0,qa:!0});return RT(s,p)}(await Gv(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ert="firestore.googleapis.com",PM=!0;class kM{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new St(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ert,this.ssl=PM}else this.host=t.host,this.ssl=t.ssl??PM;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=e9;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<s9)throw new St(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ytt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F9(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class jT{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kM({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new St(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kM(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ltt;switch(r.type){case"firstParty":return new ftt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=MM.get(e);r&&(_t("ComponentProvider","Removing Datastore"),MM.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new s0(this.firestore,t,this._query)}}class Rn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Rn(this.firestore,t,this._key)}toJSON(){return{type:Rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Qg(e,Rn._jsonSchema))return new Rn(t,r||null,new Ct(Pe.fromString(e.referencePath)))}}Rn._jsonSchemaVersion="firestore/documentReference/1.0",Rn._jsonSchema={type:Hn("string",Rn._jsonSchemaVersion),referencePath:Hn("string")};class gc extends s0{constructor(t,e,r){super(t,e,t0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Rn(this.firestore,null,new Ct(t))}withConverter(t){return new gc(this.firestore,t,this._path)}}function Hf(n,t,...e){if(n=vn(n),U5("collection","path",t),n instanceof jT){const r=Pe.fromString(t,...e);return TN(r),new gc(n,null,r)}{if(!(n instanceof Rn||n instanceof gc))throw new St(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pe.fromString(t,...e));return TN(r),new gc(n.firestore,null,r)}}function As(n,t,...e){if(n=vn(n),arguments.length===1&&(t=ZA.newId()),U5("doc","path",t),n instanceof jT){const r=Pe.fromString(t,...e);return AN(r),new Rn(n,null,new Ct(r))}{if(!(n instanceof Rn||n instanceof gc))throw new St(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pe.fromString(t,...e));return AN(r),new Rn(n.firestore,n instanceof gc?n.converter:null,new Ct(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="AsyncQueue";class VM{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A9(this,"async_queue_retry"),this._c=()=>{const r=K1();r&&_t(LM,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=K1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=K1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new ca;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Mc(t))throw t;_t(LM,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,Dn("INTERNAL UNHANDLED ERROR: ",BM(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=DT.createAndSchedule(this,t,e,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Ot(47125,{Pc:BM(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function BM(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n){return function(e,r){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class ao extends jT{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new VM,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new VM(t),this._firestoreClient=void 0,await t}}}function brt(n,t,e){e||(e=Ov);const r=vu(n,"firestore");if(r.isInitialized(e)){const i=r.getImmediate({identifier:e}),s=r.getOptions(e);if(wc(s,t))return i;throw new St(dt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new St(dt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<s9)throw new St(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&kf(t.host)&&pk(t.host),r.initialize({options:t,instanceIdentifier:e})}function Py(n){if(n._terminated)throw new St(dt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Art(n),n._firestoreClient}function Art(n){var r,i,s;const t=n._freezeSettings(),e=function(o,l,h,f){return new Xtt(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,F9(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(i=t.localCache)!=null&&i._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new vrt(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zi(Pn.fromBase64String(t))}catch(e){throw new St(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Zi(Pn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qg(t,Zi._jsonSchema))return Zi.fromBase64String(t.bytes)}}Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:Hn("string",Zi._jsonSchemaVersion),bytes:Hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new St(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new St(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new St(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Zt(this._lat,t._lat)||Zt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:la._jsonSchemaVersion}}static fromJSON(t){if(Qg(t,la._jsonSchema))return new la(t.latitude,t.longitude)}}la._jsonSchemaVersion="firestore/geoPoint/1.0",la._jsonSchema={type:Hn("string",la._jsonSchemaVersion),latitude:Hn("number"),longitude:Hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:ua._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qg(t,ua._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new ua(t.vectorValues);throw new St(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ua._jsonSchemaVersion="firestore/vectorValue/1.0",ua._jsonSchema={type:Hn("string",ua._jsonSchemaVersion),vectorValues:Hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Trt=/^__.*__$/;class Srt{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new uo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Bf(t,this.data,e,this.fieldTransforms)}}class U9{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new uo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function j9(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ot(40011,{Ac:n})}}class zT{constructor(t,e,r,i,s,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new zT({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Wv(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(j9(this.Ac)&&Trt.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Crt{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Oy(t)}Cc(t,e,r,i=!1){return new zT({Ac:t,methodName:e,Dc:r,path:gn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GT(n){const t=n._freezeSettings(),e=Oy(n._databaseId);return new Crt(n._databaseId,!!t.ignoreUndefinedProperties,e)}function H9(n,t,e,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,t,e,i);WT("Data must be an object, but it was:",a,r);const o=z9(r,a);let l,h;if(s.merge)l=new di(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const m=a2(t,p,e);if(!a.contains(m))throw new St(dt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);W9(f,m)||f.push(m)}l=new di(f),h=a.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,h=a.fieldTransforms;return new Srt(new kr(o),l,h)}class Ly extends HT{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ly}}function Irt(n,t,e,r){const i=n.Cc(1,t,e);WT("Data must be an object, but it was:",i,r);const s=[],a=kr.empty();Pc(r,(l,h)=>{const f=$T(t,l,e);h=vn(h);const p=i.yc(f);if(h instanceof Ly)s.push(f);else{const m=Vy(h,p);m!=null&&(s.push(f),a.set(f,m))}});const o=new di(s);return new U9(a,o,i.fieldTransforms)}function Drt(n,t,e,r,i,s){const a=n.Cc(1,t,e),o=[a2(t,r,e)],l=[i];if(s.length%2!=0)throw new St(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(a2(t,s[m])),l.push(s[m+1]);const h=[],f=kr.empty();for(let m=o.length-1;m>=0;--m)if(!W9(h,o[m])){const v=o[m];let x=l[m];x=vn(x);const E=a.yc(v);if(x instanceof Ly)h.push(v);else{const b=Vy(x,E);b!=null&&(h.push(v),f.set(v,b))}}const p=new di(h);return new U9(f,p,a.fieldTransforms)}function Vy(n,t){if(G9(n=vn(n)))return WT("Unsupported field value:",t,n),z9(n,t);if(n instanceof HT)return function(r,i){if(!j9(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=Vy(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,t)}return function(r,i){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return get(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=He.fromDate(r);return{timestampValue:mf(i.serializer,s)}}if(r instanceof He){const s=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mf(i.serializer,s)}}if(r instanceof la)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zi)return{bytesValue:FL(i.serializer,r._byteString)};if(r instanceof Rn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ua)return function(a,o){return{mapValue:{fields:{[oT]:{stringValue:cT},[uf]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw o.Sc("VectorValues must only contain numeric values.");return fT(o.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${JA(r)}`)}(n,t)}function z9(n,t){const e={};return iL(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pc(n,(r,i)=>{const s=Vy(i,t.mc(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function G9(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof la||n instanceof Zi||n instanceof Rn||n instanceof HT||n instanceof ua)}function WT(n,t,e){if(!G9(e)||!j5(e)){const r=JA(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function a2(n,t,e){if((t=vn(t))instanceof ky)return t._internalPath;if(typeof t=="string")return $T(n,t);throw Wv("Field path arguments must be of type string or ",n,!1,void 0,e)}const Ort=new RegExp("[~\\*/\\[\\]]");function $T(n,t,e){if(t.search(Ort)>=0)throw Wv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ky(...t.split("."))._internalPath}catch{throw Wv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Wv(n,t,e,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${t}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new St(dt.INVALID_ARGUMENT,o+n+l)}function W9(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(t,e,r,i,s){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Rrt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(q9("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Rrt extends $9{data(){return super.data()}}function q9(n,t){return typeof t=="string"?$T(n,t):t instanceof ky?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new St(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nrt{convertValue(t,e="none"){switch(Ec(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(so(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ot(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Pc(t,(i,s)=>{r[i]=this.convertValue(s,e)}),r}convertVectorValue(t){var r,i,s;const e=(s=(i=(r=t.fields)==null?void 0:r[uf].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>cn(a.doubleValue));return new ua(e)}convertGeoPoint(t){return new la(cn(t.latitude),cn(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=xy(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Ng(t));default:return null}}convertTimestamp(t){const e=io(t);return new He(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Pe.fromString(t);Lt(KL(r),9688,{name:t});const i=new au(r.get(1),r.get(3)),s=new Ct(r.popFirst(5));return i.isEqual(e)||Dn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class Mp{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Kl extends $9{constructor(t,e,r,i,s,a){super(t,e,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new X1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(q9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Kl._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Kl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kl._jsonSchema={type:Hn("string",Kl._jsonSchemaVersion),bundleSource:Hn("string","DocumentSnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class X1 extends Kl{data(t={}){return super.data(t)}}class Xl{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Mp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new X1(this._firestore,this._userDataWriter,r.key,r,new Mp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new St(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new X1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Mp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new X1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Mp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return o.type!==0&&(h=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:Mrt(o.type),doc:l,oldIndex:h,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ZA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(e.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Mrt(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ot(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){n=Di(n,Rn);const t=Di(n.firestore,ao);return xrt(Py(t),n._key).then(e=>Z9(t,n,e))}Xl._jsonSchemaVersion="firestore/querySnapshot/1.0",Xl._jsonSchema={type:Hn("string",Xl._jsonSchemaVersion),bundleSource:Hn("string","QuerySnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class qT extends Nrt{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rn(this.firestore,null,e)}}function Fy(n){n=Di(n,s0);const t=Di(n.firestore,ao),e=Py(t),r=new qT(t);return Y9(n._query),wrt(e,n._query).then(i=>new Xl(t,r,n,i))}function X9(n,t,e){n=Di(n,Rn);const r=Di(n.firestore,ao),i=K9(n.converter,t);return Uy(r,[H9(GT(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,Br.none())])}function a0(n,t,e,...r){n=Di(n,Rn);const i=Di(n.firestore,ao),s=GT(i);let a;return a=typeof(t=vn(t))=="string"||t instanceof ky?Drt(s,"updateDoc",n._key,t,e,r):Irt(s,"updateDoc",n._key,t),Uy(i,[a.toMutation(n._key,Br.exists(!0))])}function Q9(n){return Uy(Di(n.firestore,ao),[new Sy(n._key,Br.none())])}function Prt(n,t){const e=Di(n.firestore,ao),r=As(n),i=K9(n.converter,t);return Uy(e,[H9(GT(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}function UM(n,...t){var l,h,f;n=vn(n);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||FM(t[r])||(e=t[r++]);const i={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(FM(t[r])){const p=t[r];t[r]=(l=p.next)==null?void 0:l.bind(p),t[r+1]=(h=p.error)==null?void 0:h.bind(p),t[r+2]=(f=p.complete)==null?void 0:f.bind(p)}let s,a,o;if(n instanceof Rn)a=Di(n.firestore,ao),o=t0(n._key.path),s={next:p=>{t[r]&&t[r](Z9(a,n,p))},error:t[r+1],complete:t[r+2]};else{const p=Di(n,s0);a=Di(p.firestore,ao),o=p._query;const m=new qT(a);s={next:v=>{t[r]&&t[r](new Xl(a,m,p,v))},error:t[r+1],complete:t[r+2]},Y9(n._query)}return function(m,v,x,E){const b=new UT(E),T=new PT(v,b,x);return m.asyncQueue.enqueueAndForget(async()=>RT(await Gv(m),T)),()=>{b.Nu(),m.asyncQueue.enqueueAndForget(async()=>NT(await Gv(m),T))}}(Py(a),o,i,s)}function Uy(n,t){return function(r,i){const s=new ca;return r.asyncQueue.enqueueAndForget(async()=>ert(await _rt(r),i,s)),s.promise}(Py(n),t)}function Z9(n,t,e){const r=e.docs.get(t._key),i=new qT(n);return new Kl(n,i,t._key,r,new Mp(e.hasPendingWrites,e.fromCache),t.converter)}class krt{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=Frt(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Lrt(n){return new krt(n)}class Vrt{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Bg.provider,this._offlineComponentProvider={build:e=>new V9(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class Brt{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Bg.provider,this._offlineComponentProvider={build:e=>new mrt(e,t==null?void 0:t.cacheSizeBytes)}}}function Frt(n){return new Vrt(n==null?void 0:n.forceOwnership)}function Urt(){return new Brt}(function(t,e=!0){(function(i){Vf=i})(Lf),da(new Es("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new ao(new utt(r.getProvider("auth-internal")),new dtt(a,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new St(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(h.options.projectId,f)}(a,i),a);return s={useFetchStreams:e,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),es(xN,wN,t),es(xN,wN,"esm2020")})();const jrt={apiKey:"AIzaSyBc4CZnGGOTDvfPvEwaA0dXFOwbocdwCa8",authDomain:"knowurfood-d2b78.firebaseapp.com",projectId:"knowurfood-d2b78",storageBucket:"knowurfood-d2b78.firebasestorage.app",messagingSenderId:"643565214463",appId:"1:643565214463:web:8681aadcc4f49c6afdcaca",measurementId:"G-HB4L7NXGNE"},YT=Ek(jrt);HQ(YT);const KT=XA(YT),Ur=brt(YT,{localCache:Lrt({tabManager:Urt()})}),J9=n=>Math.floor(n/100)+1,Hrt=async(n,t)=>{await Prt(Hf(Ur,"users",t,"meals"),n);const e=As(Ur,"users",t),r=await By(e);if(r.exists()){const s=(r.data().xp||0)+10,a=J9(s);await a0(e,{xp:s,level:a})}},Xw=async n=>(await Fy(Hf(Ur,"users",n,"meals"))).docs.map(e=>({id:e.id,...e.data()})),zrt=async(n,t)=>{const e=As(Ur,"users",t,"meals",n.id),{id:r,...i}=n;await a0(e,i)},Grt=async(n,t)=>{const e=As(Ur,"users",t,"meals",n);await Q9(e)},Wrt=async n=>{const t=Hf(Ur,"users",n,"meals"),r=(await Fy(t)).docs.map(i=>Q9(i.ref));await Promise.all(r)},jM=async(n,t)=>{const e=As(Ur,"users",n);await a0(e,t)},$rt=async(n,t,e)=>{const r=As(Ur,"users",n,"weightLogs",t);await X9(r,{date:t,weight:e});const i=As(Ur,"users",n),s=await By(i);if(s.exists()){const o=(s.data().xp||0)+10,l=Math.floor(o/100)+1;await a0(i,{xp:o,level:l})}},$v=async n=>(await Fy(Hf(Ur,"users",n,"weightLogs"))).docs.map(e=>e.data()),qrt=async({email:n,password:t,...e})=>{const i=(await GZ(KT,n,t)).user,{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:f,height:p,goalDate:m,breakfastTime:v,lunchTime:x,dinnerTime:E,calorieGoal:b,age:T=25,gender:S="male"}=e,D=Math.max(1,Math.ceil((new Date(m)-new Date)/(1e3*60*60*24))),P=S==="male"?10*h+6.25*p-5*T+5:10*h+6.25*p-5*T-161,k=(f-h)*7700/D,U=Math.round(P+k),M=isNaN(b)?U:Number(b);return await X9(As(Ur,"users",i.uid),{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:f,goalDate:m,height:p,breakfastTime:v,lunchTime:x,dinnerTime:E,xp:0,level:1,streak:1,lastLogin:new Date().toISOString().split("T")[0],badges:[],calorieGoal:M,age:T,gender:S}),{...i,...e,calorieGoal:M}},Yrt=async()=>{await QZ(KT)},HM=async()=>new Promise(n=>{const t=KT.onAuthStateChanged(async e=>{if(t(),!e)return n(null);const r=As(Ur,"users",e.uid),i=await By(r);if(!i.exists())return n(e);const s=i.data(),a=new Date().toISOString().split("T")[0],o=s.lastLogin||a,l=Krt(o,a);let h={};h.streak=l===1?(s.streak||0)+1:l>1?1:s.streak||1,h.lastLogin=a;const f=[5,15,30,60,100],p=s.badges||[];if(f.includes(h.streak)){const m=`${h.streak}-Day Streak`;p.includes(m)||(p.push(m),h.badges=p)}try{const v=(await Fy(Hf(Ur,"users",e.uid,"weightLogs"))).docs.map(x=>x.data());if(v.length>0&&s.goalWeight&&s.goalDate&&!p.includes(" Goal Achieved")){const x=v.reduce((T,S)=>T.date>S.date?T:S),E=s.goalWeight>=s.currentWeight&&x.weight>=s.goalWeight||s.goalWeight<s.currentWeight&&x.weight<=s.goalWeight,b=new Date(x.date)<=new Date(s.goalDate);if(E&&b){p.push(" Goal Achieved");const T=(s.xp||0)+50,S=J9(T);h.badges=p,h.xp=T,h.level=S}}}catch(m){console.error("Error checking goal badge:",m)}(h.streak!==s.streak||h.lastLogin!==o||h.badges||h.xp)&&(await a0(r,h),Object.assign(s,h)),n({...e,...s})})}),Krt=(n,t)=>{const e=new Date(n),r=new Date(t);return Math.floor((r-e)/(1e3*60*60*24))},t7=rt.createContext(),Xrt=({children:n})=>{const[t,e]=rt.useState({message:"",type:"",visible:!1}),r=rt.useCallback((i,s="info")=>{e({message:i,type:s,visible:!0}),setTimeout(()=>e({...t,visible:!1}),4e3)},[]);return C.jsxs(t7.Provider,{value:{showToast:r},children:[n,t.visible&&C.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:C.jsx("div",{className:`toast show text-white bg-${t.type}`,children:C.jsx("div",{className:"toast-body fw-bold text-center",children:t.message})})})]})},XT=()=>rt.useContext(t7);function Qrt({user:n,onWeightLogged:t,onClose:e}){const[r,i]=rt.useState(""),[s,a]=rt.useState([]),[o,l]=rt.useState(new Date().toISOString().split("T")[0]),{showToast:h}=XT();rt.useEffect(()=>{n!=null&&n.uid&&$v(n.uid).then(a)},[n]);const f=async()=>{if(!r||isNaN(r))return;await $rt(n.uid,o,parseFloat(r));const p=await $v(n.uid);a(p),h(" Weight logged! +10 XP ","success"),i(""),t&&t(p),e&&e()};return C.jsxs("div",{className:"card bg-dark p-3 mb-3 text-white shadow-sm",children:[C.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Tracker"}),C.jsxs("div",{className:"d-flex gap-2 mb-2",children:[C.jsx("input",{type:"date",className:"form-control",value:o,max:new Date().toISOString().split("T")[0],onChange:p=>l(p.target.value)}),C.jsx("input",{type:"number",placeholder:"Weight (kg)",className:"form-control",value:r,onChange:p=>i(p.target.value)}),C.jsx("button",{className:"btn btn-primary",onClick:()=>{f(),e()},children:"Save"})]})]})}const e7=6048e5,Zrt=864e5,o0=6e4,c0=36e5,Jrt=1e3,zM=Symbol.for("constructDateFrom");function bn(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&zM in n?n[zM](t):n instanceof Date?new n.constructor(t):new Date(t)}function te(n,t){return bn(t||n,n)}function jy(n,t,e){const r=te(n,e==null?void 0:e.in);return isNaN(t)?bn((e==null?void 0:e.in)||n,NaN):(t&&r.setDate(r.getDate()+t),r)}function QT(n,t,e){const r=te(n,e==null?void 0:e.in);if(isNaN(t))return bn(n,NaN);if(!t)return r;const i=r.getDate(),s=bn(n,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function ZT(n,t,e){return bn(n,+te(n)+t)}function tit(n,t,e){return ZT(n,t*c0)}let eit={};function wu(){return eit}function ga(n,t){var o,l,h,f;const e=wu(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((f=(h=e.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,i=te(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function wf(n,t){return ga(n,{...t,weekStartsOn:1})}function n7(n,t){const e=te(n,t==null?void 0:t.in),r=e.getFullYear(),i=bn(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=wf(i),a=bn(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=wf(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function qv(n){const t=te(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Eu(n,...t){const e=bn.bind(null,t.find(r=>typeof r=="object"));return t.map(e)}function o2(n,t){const e=te(n,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function r7(n,t,e){const[r,i]=Eu(e==null?void 0:e.in,n,t),s=o2(r),a=o2(i),o=+s-qv(s),l=+a-qv(a);return Math.round((o-l)/Zrt)}function nit(n,t){const e=n7(n,t),r=bn(n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),wf(r)}function rit(n,t,e){const r=te(n,e==null?void 0:e.in);return r.setTime(r.getTime()+t*o0),r}function iit(n,t,e){return QT(n,t*3,e)}function sit(n,t,e){return ZT(n,t*1e3)}function ait(n,t,e){return jy(n,t*7,e)}function oit(n,t,e){return QT(n,t*12,e)}function ag(n,t){const e=+te(n)-+te(t);return e<0?-1:e>0?1:e}function cit(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function i7(n){return!(!cit(n)&&typeof n!="number"||isNaN(+te(n)))}function lit(n,t,e){const[r,i]=Eu(e==null?void 0:e.in,n,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function uit(n,t,e){const[r,i]=Eu(e==null?void 0:e.in,n,t);return r.getFullYear()-i.getFullYear()}function s7(n,t,e){const[r,i]=Eu(e==null?void 0:e.in,n,t),s=GM(r,i),a=Math.abs(r7(r,i));r.setDate(r.getDate()-s*a);const o=+(GM(r,i)===-s),l=s*(a-o);return l===0?0:l}function GM(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function l0(n){return t=>{const r=(n?Math[n]:Math.trunc)(t);return r===0?0:r}}function hit(n,t,e){const[r,i]=Eu(e==null?void 0:e.in,n,t),s=(+r-+i)/c0;return l0(e==null?void 0:e.roundingMethod)(s)}function JT(n,t){return+te(n)-+te(t)}function fit(n,t,e){const r=JT(n,t)/o0;return l0(e==null?void 0:e.roundingMethod)(r)}function a7(n,t){const e=te(n,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function o7(n,t){const e=te(n,t==null?void 0:t.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function dit(n,t){const e=te(n,t==null?void 0:t.in);return+a7(e,t)==+o7(e,t)}function c7(n,t,e){const[r,i,s]=Eu(e==null?void 0:e.in,n,n,t),a=ag(i,s),o=Math.abs(lit(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=ag(i,s)===-a;dit(r)&&o===1&&ag(r,s)===1&&(l=!1);const h=a*(o-+l);return h===0?0:h}function pit(n,t,e){const r=c7(n,t,e)/3;return l0(e==null?void 0:e.roundingMethod)(r)}function git(n,t,e){const r=JT(n,t)/1e3;return l0(e==null?void 0:e.roundingMethod)(r)}function mit(n,t,e){const r=s7(n,t,e)/7;return l0(e==null?void 0:e.roundingMethod)(r)}function vit(n,t,e){const[r,i]=Eu(e==null?void 0:e.in,n,t),s=ag(r,i),a=Math.abs(uit(r,i));r.setFullYear(1584),i.setFullYear(1584);const o=ag(r,i)===-s,l=s*(a-+o);return l===0?0:l}function yit(n,t){const e=te(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}function _it(n,t){const e=te(n,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function xit(n,t){const e=te(n,t==null?void 0:t.in),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function l7(n,t){const e=te(n,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function wit(n,t){const e=te(n,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function Eit(n,t){var o,l;const e=wu(),r=e.weekStartsOn??((l=(o=e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??0,i=te(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function bit(n,t){const e=te(n,t==null?void 0:t.in);return e.setSeconds(59,999),e}function Ait(n,t){const e=te(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}function Tit(n,t){const e=te(n,t==null?void 0:t.in);return e.setMilliseconds(999),e}const Sit={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Cit=(n,t,e)=>{let r;const i=Sit[n];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function Qw(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const Iit={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dit={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Oit={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rit={date:Qw({formats:Iit,defaultWidth:"full"}),time:Qw({formats:Dit,defaultWidth:"full"}),dateTime:Qw({formats:Oit,defaultWidth:"full"})},Nit={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mit=(n,t,e,r)=>Nit[n];function fp(n){return(t,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=e!=null&&e.width?String(e.width):a;i=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=e!=null&&e.width?String(e.width):n.defaultWidth;i=n.values[o]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(t):t;return i[s]}}const Pit={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kit={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lit={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vit={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bit={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Fit={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uit=(n,t)=>{const e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},jit={ordinalNumber:Uit,era:fp({values:Pit,defaultWidth:"wide"}),quarter:fp({values:kit,defaultWidth:"wide",argumentCallback:n=>n-1}),month:fp({values:Lit,defaultWidth:"wide"}),day:fp({values:Vit,defaultWidth:"wide"}),dayPeriod:fp({values:Bit,defaultWidth:"wide",formattingValues:Fit,defaultFormattingWidth:"wide"})};function dp(n){return(t,e={})=>{const r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?zit(o,p=>p.test(a)):Hit(o,p=>p.test(a));let h;h=n.valueCallback?n.valueCallback(l):l,h=e.valueCallback?e.valueCallback(h):h;const f=t.slice(a.length);return{value:h,rest:f}}}function Hit(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function zit(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function Git(n){return(t,e={})=>{const r=t.match(n.matchPattern);if(!r)return null;const i=r[0],s=t.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=e.valueCallback?e.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const Wit=/^(\d+)(th|st|nd|rd)?/i,$it=/\d+/i,qit={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yit={any:[/^b/i,/^(a|c)/i]},Kit={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xit={any:[/1/i,/2/i,/3/i,/4/i]},Qit={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zit={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jit={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tst={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},est={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nst={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rst={ordinalNumber:Git({matchPattern:Wit,parsePattern:$it,valueCallback:n=>parseInt(n,10)}),era:dp({matchPatterns:qit,defaultMatchWidth:"wide",parsePatterns:Yit,defaultParseWidth:"any"}),quarter:dp({matchPatterns:Kit,defaultMatchWidth:"wide",parsePatterns:Xit,defaultParseWidth:"any",valueCallback:n=>n+1}),month:dp({matchPatterns:Qit,defaultMatchWidth:"wide",parsePatterns:Zit,defaultParseWidth:"any"}),day:dp({matchPatterns:Jit,defaultMatchWidth:"wide",parsePatterns:tst,defaultParseWidth:"any"}),dayPeriod:dp({matchPatterns:est,defaultMatchWidth:"any",parsePatterns:nst,defaultParseWidth:"any"})},u7={code:"en-US",formatDistance:Cit,formatLong:Rit,formatRelative:Mit,localize:jit,match:rst,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ist(n,t){const e=te(n,t==null?void 0:t.in);return r7(e,l7(e))+1}function h7(n,t){const e=te(n,t==null?void 0:t.in),r=+wf(e)-+nit(e);return Math.round(r/e7)+1}function tS(n,t){var f,p,m,v;const e=te(n,t==null?void 0:t.in),r=e.getFullYear(),i=wu(),s=(t==null?void 0:t.firstWeekContainsDate)??((p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,a=bn((t==null?void 0:t.in)||n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=ga(a,t),l=bn((t==null?void 0:t.in)||n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const h=ga(l,t);return+e>=+o?r+1:+e>=+h?r:r-1}function sst(n,t){var o,l,h,f;const e=wu(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((f=(h=e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=tS(n,t),s=bn((t==null?void 0:t.in)||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),ga(s,t)}function f7(n,t){const e=te(n,t==null?void 0:t.in),r=+ga(e,t)-+sst(e,t);return Math.round(r/e7)+1}function Ue(n,t){const e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}const $o={y(n,t){const e=n.getFullYear(),r=e>0?e:1-e;return Ue(t==="yy"?r%100:r,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):Ue(e+1,2)},d(n,t){return Ue(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return Ue(n.getHours()%12||12,t.length)},H(n,t){return Ue(n.getHours(),t.length)},m(n,t){return Ue(n.getMinutes(),t.length)},s(n,t){return Ue(n.getSeconds(),t.length)},S(n,t){const e=t.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,e-3));return Ue(i,t.length)}},Eh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},WM={G:function(n,t,e){const r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return $o.y(n,t)},Y:function(n,t,e,r){const i=tS(n,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Ue(a,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):Ue(s,t.length)},R:function(n,t){const e=n7(n);return Ue(e,t.length)},u:function(n,t){const e=n.getFullYear();return Ue(e,t.length)},Q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ue(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ue(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){const r=n.getMonth();switch(t){case"M":case"MM":return $o.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){const r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ue(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){const i=f7(n,r);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):Ue(i,t.length)},I:function(n,t,e){const r=h7(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):Ue(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):$o.d(n,t)},D:function(n,t,e){const r=ist(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):Ue(r,t.length)},E:function(n,t,e){const r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ue(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ue(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(n,t,e){const r=n.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Ue(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){const i=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,t,e){const r=n.getHours();let i;switch(r===12?i=Eh.noon:r===0?i=Eh.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,t,e){const r=n.getHours();let i;switch(r>=17?i=Eh.evening:r>=12?i=Eh.afternoon:r>=4?i=Eh.morning:i=Eh.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return $o.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):$o.H(n,t)},K:function(n,t,e){const r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):Ue(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):Ue(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):$o.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):$o.s(n,t)},S:function(n,t){return $o.S(n,t)},X:function(n,t,e){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return qM(r);case"XXXX":case"XX":return Cl(r);case"XXXXX":case"XXX":default:return Cl(r,":")}},x:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"x":return qM(r);case"xxxx":case"xx":return Cl(r);case"xxxxx":case"xxx":default:return Cl(r,":")}},O:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+$M(r,":");case"OOOO":default:return"GMT"+Cl(r,":")}},z:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+$M(r,":");case"zzzz":default:return"GMT"+Cl(r,":")}},t:function(n,t,e){const r=Math.trunc(+n/1e3);return Ue(r,t.length)},T:function(n,t,e){return Ue(+n,t.length)}};function $M(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?e+String(i):e+String(i)+t+Ue(s,2)}function qM(n,t){return n%60===0?(n>0?"-":"+")+Ue(Math.abs(n)/60,2):Cl(n,t)}function Cl(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Ue(Math.trunc(r/60),2),s=Ue(r%60,2);return e+i+t+s}const YM=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},d7=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ast=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return YM(n,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",YM(r,t)).replace("{{time}}",d7(i,t))},c2={p:d7,P:ast},ost=/^D+$/,cst=/^Y+$/,lst=["D","DD","YY","YYYY"];function p7(n){return ost.test(n)}function g7(n){return cst.test(n)}function l2(n,t,e){const r=ust(n,t,e);if(console.warn(r),lst.includes(n))throw new RangeError(r)}function ust(n,t,e){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hst=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fst=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dst=/^'([^]*?)'?$/,pst=/''/g,gst=/[a-zA-Z]/;function mst(n,t,e){var f,p,m,v,x,E,b,T;const r=wu(),i=(e==null?void 0:e.locale)??r.locale??u7,s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,a=(e==null?void 0:e.weekStartsOn)??((E=(x=e==null?void 0:e.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((T=(b=r.locale)==null?void 0:b.options)==null?void 0:T.weekStartsOn)??0,o=te(n,e==null?void 0:e.in);if(!i7(o))throw new RangeError("Invalid time value");let l=t.match(fst).map(S=>{const D=S[0];if(D==="p"||D==="P"){const P=c2[D];return P(S,i.formatLong)}return S}).join("").match(hst).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const D=S[0];if(D==="'")return{isToken:!1,value:vst(S)};if(WM[D])return{isToken:!0,value:S};if(D.match(gst))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(S=>{if(!S.isToken)return S.value;const D=S.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&g7(D)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&p7(D))&&l2(D,t,String(n));const P=WM[D[0]];return P(o,D,i.localize,h)}).join("")}function vst(n){const t=n.match(dst);return t?t[1].replace(pst,"'"):n}function yst(){return Object.assign({},wu())}function _st(n,t){const e=te(n,t==null?void 0:t.in).getDay();return e===0?7:e}function xst(n,t){const e=wst(t)?new t(0):bn(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function wst(n){var t;return typeof n=="function"&&((t=n.prototype)==null?void 0:t.constructor)===n}const Est=10;class m7{constructor(){lt(this,"subPriority",0)}validate(t,e){return!0}}class bst extends m7{constructor(t,e,r,i,s){super(),this.value=t,this.validateValue=e,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,r){return this.setValue(t,e,this.value,r)}}class Ast extends m7{constructor(e,r){super();lt(this,"priority",Est);lt(this,"subPriority",-1);this.context=e||(i=>bn(r,i))}set(e,r){return r.timestampIsSet?e:bn(e,xst(e,this.context))}}class Oe{run(t,e,r,i){const s=this.parse(t,e,r,i);return s?{setter:new bst(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,r){return!0}}class Tst extends Oe{constructor(){super(...arguments);lt(this,"priority",140);lt(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,r,i){return r.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}const Nn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ks={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Mn(n,t){return n&&{value:t(n.value),rest:n.rest}}function mn(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Xs(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const r=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,a=e[5]?parseInt(e[5],10):0;return{value:r*(i*c0+s*o0+a*Jrt),rest:t.slice(e[0].length)}}function v7(n){return mn(Nn.anyDigitsSigned,n)}function An(n,t){switch(n){case 1:return mn(Nn.singleDigit,t);case 2:return mn(Nn.twoDigits,t);case 3:return mn(Nn.threeDigits,t);case 4:return mn(Nn.fourDigits,t);default:return mn(new RegExp("^\\d{1,"+n+"}"),t)}}function Yv(n,t){switch(n){case 1:return mn(Nn.singleDigitSigned,t);case 2:return mn(Nn.twoDigitsSigned,t);case 3:return mn(Nn.threeDigitsSigned,t);case 4:return mn(Nn.fourDigitsSigned,t);default:return mn(new RegExp("^-?\\d{1,"+n+"}"),t)}}function eS(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function y7(n,t){const e=t>0,r=e?t:1-t;let i;if(r<=50)i=n||100;else{const s=r+50,a=Math.trunc(s/100)*100,o=n>=s%100;i=n+a-(o?100:0)}return e?i:1-i}function _7(n){return n%400===0||n%4===0&&n%100!==0}class Sst extends Oe{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return Mn(An(4,e),s);case"yo":return Mn(i.ordinalNumber(e,{unit:"year"}),s);default:return Mn(An(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i){const s=e.getFullYear();if(i.isTwoDigitYear){const o=y7(i.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const a=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Cst extends Oe{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Mn(An(4,e),s);case"Yo":return Mn(i.ordinalNumber(e,{unit:"year"}),s);default:return Mn(An(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i,s){const a=tS(e,s);if(i.isTwoDigitYear){const l=y7(i.year,a);return e.setFullYear(l,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),ga(e,s)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),ga(e,s)}}class Ist extends Oe{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return Yv(r==="R"?4:r.length,e)}set(e,r,i){const s=bn(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),wf(s)}}class Dst extends Oe{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return Yv(r==="u"?4:r.length,e)}set(e,r,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Ost extends Oe{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"Q":case"QQ":return An(r.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Rst extends Oe{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"q":case"qq":return An(r.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Nst extends Oe{constructor(){super(...arguments);lt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);lt(this,"priority",110)}parse(e,r,i){const s=a=>a-1;switch(r){case"M":return Mn(mn(Nn.month,e),s);case"MM":return Mn(An(2,e),s);case"Mo":return Mn(i.ordinalNumber(e,{unit:"month"}),s);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}class Mst extends Oe{constructor(){super(...arguments);lt(this,"priority",110);lt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,i){const s=a=>a-1;switch(r){case"L":return Mn(mn(Nn.month,e),s);case"LL":return Mn(An(2,e),s);case"Lo":return Mn(i.ordinalNumber(e,{unit:"month"}),s);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}function Pst(n,t,e){const r=te(n,e==null?void 0:e.in),i=f7(r,e)-t;return r.setDate(r.getDate()-i*7),te(r,e==null?void 0:e.in)}class kst extends Oe{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,i){switch(r){case"w":return mn(Nn.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return An(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i,s){return ga(Pst(e,i,s),s)}}function Lst(n,t,e){const r=te(n,e==null?void 0:e.in),i=h7(r,e)-t;return r.setDate(r.getDate()-i*7),r}class Vst extends Oe{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,i){switch(r){case"I":return mn(Nn.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return An(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i){return wf(Lst(e,i))}}const Bst=[31,28,31,30,31,30,31,31,30,31,30,31],Fst=[31,29,31,30,31,30,31,31,30,31,30,31];class Ust extends Oe{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subPriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"d":return mn(Nn.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return An(r.length,e)}}validate(e,r){const i=e.getFullYear(),s=_7(i),a=e.getMonth();return s?r>=1&&r<=Fst[a]:r>=1&&r<=Bst[a]}set(e,r,i){return e.setDate(i),e.setHours(0,0,0,0),e}}class jst extends Oe{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subpriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,i){switch(r){case"D":case"DD":return mn(Nn.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return An(r.length,e)}}validate(e,r){const i=e.getFullYear();return _7(i)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}}function nS(n,t,e){var p,m,v,x;const r=wu(),i=(e==null?void 0:e.weekStartsOn)??((m=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,s=te(n,e==null?void 0:e.in),a=s.getDay(),l=(t%7+7)%7,h=7-i,f=t<0||t>6?t-(a+h)%7:(l+h)%7-(a+h)%7;return jy(s,f,e)}class Hst extends Oe{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=nS(e,i,s),e.setHours(0,0,0,0),e}}class zst extends Oe{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Mn(An(r.length,e),a);case"eo":return Mn(i.ordinalNumber(e,{unit:"day"}),a);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=nS(e,i,s),e.setHours(0,0,0,0),e}}class Gst extends Oe{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Mn(An(r.length,e),a);case"co":return Mn(i.ordinalNumber(e,{unit:"day"}),a);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=nS(e,i,s),e.setHours(0,0,0,0),e}}function Wst(n,t,e){const r=te(n,e==null?void 0:e.in),i=_st(r,e),s=t-i;return jy(r,s,e)}class $st extends Oe{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,i){const s=a=>a===0?7:a;switch(r){case"i":case"ii":return An(r.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return Mn(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Mn(i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Mn(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Mn(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,r){return r>=1&&r<=7}set(e,r,i){return e=Wst(e,i),e.setHours(0,0,0,0),e}}class qst extends Oe{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(eS(i),0,0,0),e}}class Yst extends Oe{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(eS(i),0,0,0),e}}class Kst extends Oe{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(eS(i),0,0,0),e}}class Xst extends Oe{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,i){switch(r){case"h":return mn(Nn.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return An(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,i){const s=e.getHours()>=12;return s&&i<12?e.setHours(i+12,0,0,0):!s&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}}class Qst extends Oe{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,i){switch(r){case"H":return mn(Nn.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return An(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,i){return e.setHours(i,0,0,0),e}}class Zst extends Oe{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,i){switch(r){case"K":return mn(Nn.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return An(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}}class Jst extends Oe{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,i){switch(r){case"k":return mn(Nn.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return An(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,i){const s=i<=24?i%24:i;return e.setHours(s,0,0,0),e}}class tat extends Oe{constructor(){super(...arguments);lt(this,"priority",60);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"m":return mn(Nn.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return An(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setMinutes(i,0,0),e}}class eat extends Oe{constructor(){super(...arguments);lt(this,"priority",50);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"s":return mn(Nn.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return An(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setSeconds(i,0),e}}class nat extends Oe{constructor(){super(...arguments);lt(this,"priority",30);lt(this,"incompatibleTokens",["t","T"])}parse(e,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Mn(An(r.length,e),i)}set(e,r,i){return e.setMilliseconds(i),e}}class rat extends Oe{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return Xs(Ks.basicOptionalMinutes,e);case"XX":return Xs(Ks.basic,e);case"XXXX":return Xs(Ks.basicOptionalSeconds,e);case"XXXXX":return Xs(Ks.extendedOptionalSeconds,e);case"XXX":default:return Xs(Ks.extended,e)}}set(e,r,i){return r.timestampIsSet?e:bn(e,e.getTime()-qv(e)-i)}}class iat extends Oe{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return Xs(Ks.basicOptionalMinutes,e);case"xx":return Xs(Ks.basic,e);case"xxxx":return Xs(Ks.basicOptionalSeconds,e);case"xxxxx":return Xs(Ks.extendedOptionalSeconds,e);case"xxx":default:return Xs(Ks.extended,e)}}set(e,r,i){return r.timestampIsSet?e:bn(e,e.getTime()-qv(e)-i)}}class sat extends Oe{constructor(){super(...arguments);lt(this,"priority",40);lt(this,"incompatibleTokens","*")}parse(e){return v7(e)}set(e,r,i){return[bn(e,i*1e3),{timestampIsSet:!0}]}}class aat extends Oe{constructor(){super(...arguments);lt(this,"priority",20);lt(this,"incompatibleTokens","*")}parse(e){return v7(e)}set(e,r,i){return[bn(e,i),{timestampIsSet:!0}]}}const oat={G:new Tst,y:new Sst,Y:new Cst,R:new Ist,u:new Dst,Q:new Ost,q:new Rst,M:new Nst,L:new Mst,w:new kst,I:new Vst,d:new Ust,D:new jst,E:new Hst,e:new zst,c:new Gst,i:new $st,a:new qst,b:new Yst,B:new Kst,h:new Xst,H:new Qst,K:new Zst,k:new Jst,m:new tat,s:new eat,S:new nat,X:new rat,x:new iat,t:new sat,T:new aat},cat=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lat=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uat=/^'([^]*?)'?$/,hat=/''/g,fat=/\S/,dat=/[a-zA-Z]/;function pat(n,t,e,r){var b,T,S,D,P,k,U,M;const i=()=>bn((r==null?void 0:r.in)||e,NaN),s=yst(),a=(r==null?void 0:r.locale)??s.locale??u7,o=(r==null?void 0:r.firstWeekContainsDate)??((T=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:T.firstWeekContainsDate)??s.firstWeekContainsDate??((D=(S=s.locale)==null?void 0:S.options)==null?void 0:D.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((k=(P=r==null?void 0:r.locale)==null?void 0:P.options)==null?void 0:k.weekStartsOn)??s.weekStartsOn??((M=(U=s.locale)==null?void 0:U.options)==null?void 0:M.weekStartsOn)??0;if(!t)return n?i():te(e,r==null?void 0:r.in);const h={firstWeekContainsDate:o,weekStartsOn:l,locale:a},f=[new Ast(r==null?void 0:r.in,e)],p=t.match(lat).map(I=>{const N=I[0];if(N in c2){const L=c2[N];return L(I,a.formatLong)}return I}).join("").match(cat),m=[];for(let I of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&g7(I)&&l2(I,t,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&p7(I)&&l2(I,t,n);const N=I[0],L=oat[N];if(L){const{incompatibleTokens:j}=L;if(Array.isArray(j)){const B=m.find(yt=>j.includes(yt.token)||yt.token===N);if(B)throw new RangeError(`The format string mustn't contain \`${B.fullToken}\` and \`${I}\` at the same time`)}else if(L.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);m.push({token:N,fullToken:I});const z=L.run(n,I,a.match,h);if(!z)return i();f.push(z.setter),n=z.rest}else{if(N.match(dat))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(I==="''"?I="'":N==="'"&&(I=gat(I)),n.indexOf(I)===0)n=n.slice(I.length);else return i()}}if(n.length>0&&fat.test(n))return i();const v=f.map(I=>I.priority).sort((I,N)=>N-I).filter((I,N,L)=>L.indexOf(I)===N).map(I=>f.filter(N=>N.priority===I).sort((N,L)=>L.subPriority-N.subPriority)).map(I=>I[0]);let x=te(e,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const I of v){if(!I.validate(x,h))return i();const N=I.set(x,E,h);Array.isArray(N)?(x=N[0],Object.assign(E,N[1])):x=N}return x}function gat(n){return n.match(uat)[1].replace(hat,"'")}function mat(n,t){const e=te(n,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function vat(n,t){const e=te(n,t==null?void 0:t.in);return e.setSeconds(0,0),e}function yat(n,t){const e=te(n,t==null?void 0:t.in);return e.setMilliseconds(0),e}function _at(n,t){const e=()=>bn(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,i=bat(n);let s;if(i.date){const h=Aat(i.date,r);s=Tat(h.restDateString,h.year)}if(!s||isNaN(+s))return e();const a=+s;let o=0,l;if(i.time&&(o=Sat(i.time),isNaN(o)))return e();if(i.timezone){if(l=Cat(i.timezone),isNaN(l))return e()}else{const h=new Date(a+o),f=te(0,t==null?void 0:t.in);return f.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),f.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),f}return te(a+o+l,t==null?void 0:t.in)}const c1={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},xat=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,wat=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Eat=/^([+-])(\d{2})(?::?(\d{2}))?$/;function bat(n){const t={},e=n.split(c1.dateTimeDelimiter);let r;if(e.length>2)return t;if(/:/.test(e[0])?r=e[0]:(t.date=e[0],r=e[1],c1.timeZoneDelimiter.test(t.date)&&(t.date=n.split(c1.timeZoneDelimiter)[0],r=n.substr(t.date.length,n.length))),r){const i=c1.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function Aat(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=n.match(e);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function Tat(n,t){if(t===null)return new Date(NaN);const e=n.match(xat);if(!e)return new Date(NaN);const r=!!e[4],i=pp(e[1]),s=pp(e[2])-1,a=pp(e[3]),o=pp(e[4]),l=pp(e[5])-1;if(r)return Nat(t,o,l)?Iat(t,o,l):new Date(NaN);{const h=new Date(0);return!Oat(t,s,a)||!Rat(t,i)?new Date(NaN):(h.setUTCFullYear(t,s,Math.max(i,a)),h)}}function pp(n){return n?parseInt(n):1}function Sat(n){const t=n.match(wat);if(!t)return NaN;const e=Zw(t[1]),r=Zw(t[2]),i=Zw(t[3]);return Mat(e,r,i)?e*c0+r*o0+i*1e3:NaN}function Zw(n){return n&&parseFloat(n.replace(",","."))||0}function Cat(n){if(n==="Z")return 0;const t=n.match(Eat);if(!t)return 0;const e=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return Pat(r,i)?e*(r*c0+i*o0):NaN}function Iat(n,t,e){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+e+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Dat=[31,null,31,30,31,30,31,31,30,31,30,31];function x7(n){return n%400===0||n%4===0&&n%100!==0}function Oat(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(Dat[t]||(x7(n)?29:28))}function Rat(n,t){return t>=1&&t<=(x7(n)?366:365)}function Nat(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Mat(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function Pat(n,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const kat={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};c6._date.override({_id:"date-fns",formats:function(){return kat},parse:function(n,t){if(n===null||typeof n>"u")return null;const e=typeof n;return e==="number"||n instanceof Date?n=te(n):e==="string"&&(typeof t=="string"?n=pat(n,t,new Date,this.options):n=_at(n,this.options)),i7(n)?n.getTime():null},format:function(n,t){return mst(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return ZT(n,t);case"second":return sit(n,t);case"minute":return rit(n,t);case"hour":return tit(n,t);case"day":return jy(n,t);case"week":return ait(n,t);case"month":return QT(n,t);case"quarter":return iit(n,t);case"year":return oit(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return JT(n,t);case"second":return git(n,t);case"minute":return fit(n,t);case"hour":return hit(n,t);case"day":return s7(n,t);case"week":return mit(n,t);case"month":return c7(n,t);case"quarter":return pit(n,t);case"year":return vit(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return yat(n);case"minute":return vat(n);case"hour":return mat(n);case"day":return o2(n);case"week":return ga(n);case"isoWeek":return ga(n,{weekStartsOn:+e});case"month":return _it(n);case"quarter":return yit(n);case"year":return l7(n);default:return n}},endOf:function(n,t){switch(t){case"second":return Tit(n);case"minute":return bit(n);case"hour":return wit(n);case"day":return a7(n);case"week":return Eit(n);case"month":return o7(n);case"quarter":return Ait(n);case"year":return xit(n);default:return n}}});gu.register(Ap,D1,hv,mg,J2,Z2);function Lat({user:n,logs:t=[]}){if(!n.goalDate||!n.goalWeight)return null;const e=[...t].sort((s,a)=>new Date(s.date)-new Date(a.date)),r={labels:e.map(s=>s.date),datasets:[{label:"Weight (kg)",data:e.map(s=>s.weight),borderColor:"deepskyblue",backgroundColor:"rgba(0, 191, 255, 0.2)",tension:.2},{label:`Goal (${n.goalWeight}kg by ${n.goalDate})`,data:e.map(()=>n.goalWeight),borderDash:[5,5],borderColor:"lime",pointRadius:0,borderWidth:1}]},i={responsive:!0,scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"PP"},ticks:{color:"white"},grid:{color:"#444"}},y:{ticks:{color:"white"},grid:{color:"#444"},beginAtZero:!1}},plugins:{legend:{labels:{color:"white"}}}};return C.jsxs("div",{className:"card bg-dark text-white p-3 mb-2 shadow-sm",children:[C.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Progress"}),C.jsx(Fz,{data:r,options:i})]})}const Vat=n=>{const t=Math.floor(n/100)+1,e=n%100,r=100,i=e/r*100;return{level:t,currentXP:e,nextXP:r,percent:i}};function Bat({meals:n,onEditMeal:t,onDeleteMeal:e,user:r}){const i=new Date().toISOString().split("T")[0],[s,a]=rt.useState([]),[o,l]=rt.useState(r),{level:h,currentXP:f,nextXP:p,percent:m}=Vat((o==null?void 0:o.xp)||0);rt.useEffect(()=>{if(!(r!=null&&r.uid))return;const N=UM(As(Ur,"users",r.uid),L=>{L.exists()&&l(L.data())});return()=>N()},[r]),rt.useEffect(()=>{if(!(r!=null&&r.uid))return;const N=Hf(Ur,"users",r.uid,"weightLogs"),L=UM(N,j=>{const z=j.docs.map(B=>B.data());a(z)});return()=>L()},[r]);const v=N=>n.filter(L=>L.mealType===N&&L.date===i),x=N=>{const L=new Date(N),j=L.getDay(),z=L.getDate()-j+(j===0?-6:1);return new Date(L.setDate(z))},[E,b]=rt.useState(x(new Date)),T=N=>{const L=new Date(E);L.setDate(E.getDate()+N),b(L)},S=N=>new Date(N).toLocaleDateString("en-GB"),D=(N,L)=>{if(!N||!L)return null;const j=L/100;return N/(j*j)},P=N=>N<18.5?"Underweight":N<25?"Normal":N<30?"Overweight":"Obese",k=s.length>0?s.sort((N,L)=>new Date(L.date)-new Date(N.date))[0].weight:null,U=D(k,o==null?void 0:o.height),M=P(U),I=Math.min(U/40*100,100);return C.jsxs("div",{className:"home-container",children:[C.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[C.jsxs("p",{className:"TitleName mb-1",children:["Hello ",r.firstName]}),C.jsxs("div",{className:"text-end",children:[C.jsxs("span",{className:"small fw-bold",style:{color:"deepskyblue"},children:["Level ",h]}),C.jsx("div",{className:"progress",style:{height:"6px",width:"150px",background:"#444"},children:C.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${m}%`,backgroundColor:"deepskyblue"},"aria-valuenow":f,"aria-valuemin":0,"aria-valuemax":p})})]})]}),C.jsxs("div",{className:"CalBarCharSection bg-dark",children:[C.jsxs("div",{className:"d-flex col-md-12 mb-2 justify-content-between",children:[C.jsx("p",{className:"SubTitleName mb-0",children:"Calories Consumed"}),C.jsxs("div",{className:"d-flex align-items-center DateRangePicker",children:[C.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>T(-7),children:""}),S(E),"  ",S(new Date(E.getTime()+6*864e5)),C.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>T(7),children:""})]})]}),C.jsx(C6,{meals:n,startOfWeek:E})]}),C.jsx(Lat,{user:r,logs:s}),U&&C.jsxs("div",{className:"card bg-dark text-white p-3 mb-3 shadow-sm text-center",children:[C.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Your BMI"}),C.jsxs("p",{className:"fs-5 mb-1",children:[U.toFixed(1),"  ",C.jsx("span",{className:"fw-bold text-info",children:M})]}),C.jsx("div",{className:"progress bmi-progress mb-1",style:{height:"15px"},children:C.jsx("div",{className:`progress-bar ${M.toLowerCase()}-bar`,role:"progressbar",style:{width:`${I}%`},"aria-valuenow":I,"aria-valuemin":0,"aria-valuemax":100})}),C.jsxs("div",{className:"d-flex justify-content-between text-muted small px-2",children:[C.jsx("span",{children:"Underweight"}),C.jsx("span",{children:"Normal"}),C.jsx("span",{children:"Overweight"}),C.jsx("span",{children:"Obese"})]})]}),C.jsxs("div",{className:"TodayChartsSection col-md-12",children:[C.jsxs("div",{className:"CalDonutSection bg-dark",children:[C.jsx("p",{className:"SubTitleName",children:"Calorie Intake"}),C.jsx(I6,{meals:n,selectedDate:i,goal:r.calorieGoal})]}),C.jsxs("div",{className:"NutriDonutSection bg-dark",children:[C.jsx("p",{className:"SubTitleName",children:"Nutrition Intake"}),C.jsx(D6,{meals:n,selectedDate:i})]})]}),n.some(N=>N.date===i)&&C.jsx("div",{className:"FoodItemList bg-dark",children:(r.mealOrder||["Breakfast","Lunch","Dinner"]).map(N=>{const L=v(N);return L.length===0?null:C.jsxs("div",{className:"mb-3",children:[C.jsx("p",{className:"SubTitleName",children:N}),L.map(j=>j.foodItems.map((z,B)=>C.jsx(ak,{name:z.name,nutrients:z.nutrients,kcal:j.kcal||null,onEdit:()=>t(j),onDelete:()=>e(j.id),unit:r.unit||"g"},`${N}-${j.id}-${B}`)))]},N)})})]})}function Fat({user:n,meals:t,onEditMeal:e,onDeleteMeal:r}){var D;const[i,s]=rt.useState(new Date().toISOString().split("T")[0]),[a,o]=rt.useState(""),l=t.filter(P=>P.date===i),[h,f]=rt.useState([]);rt.useEffect(()=>{n!=null&&n.uid&&$v(n.uid).then(f)},[n]);const p=P=>{const k=new Date(i);k.setDate(k.getDate()+P);const U=new Date;U.setHours(0,0,0,0),!(k>U)&&s(k.toISOString().split("T")[0])},m=(P,k)=>{const U=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),M=document.createElement("a");M.href=URL.createObjectURL(U),M.download=`meals-${k}.json`,M.click()},v=(P,k)=>{const U=[["Food Name","Calories","Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"]];P.forEach(L=>{L.foodItems.forEach(j=>{const z=[j.name,j.kcal||"",...["Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"].map(B=>{const yt=j.nutrients.find(wt=>wt.type===B);return(yt==null?void 0:yt.total)||""})];U.push(z)})});const M=U.map(L=>L.join(",")).join(`
`),I=new Blob([M],{type:"text/csv"}),N=document.createElement("a");N.href=URL.createObjectURL(I),N.download=`meals-${k}.csv`,N.click()},x=l.filter(P=>P.foodItems.some(k=>k.name.toLowerCase().includes(a.toLowerCase())||k.nutrients.some(U=>U.type.toLowerCase().includes(a.toLowerCase())))),E={Protein:50,Carbohydrate:260,Fat:70,Sugar:30,Fibre:30,Salt:6},T=(()=>{const P={};return l.forEach(k=>k.foodItems.forEach(U=>U.nutrients.forEach(M=>{const I=parseFloat(M.total)||0;P[M.type]=(P[M.type]||0)+I}))),P})(),S=((D=h.find(P=>P.date===i))==null?void 0:D.weight)||null;return C.jsxs("div",{className:"home-container",children:[C.jsx("h5",{className:"TitleName mb-4",children:"History"}),C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:"10px"},children:[C.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2 DateRangePicker",children:[C.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>p(-1),children:""}),C.jsx("input",{type:"date",className:"form-control",value:i,max:new Date().toISOString().split("T")[0],onChange:P=>s(P.target.value),style:{maxWidth:"150px"}}),C.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>p(1),children:""})]}),C.jsxs("div",{className:"d-flex gap-2 mb-2",children:[C.jsx("button",{className:"btn btn-outline-info btn-sm",style:{padding:"0 15px"},onClick:()=>m(l,i),children:C.jsx("i",{class:"bi bi-filetype-json"})}),C.jsx("button",{className:"btn btn-outline-info btn-sm",style:{padding:"0 15px"},onClick:()=>v(l,i),children:C.jsx("i",{class:"bi bi-filetype-csv"})})]})]}),C.jsx("input",{type:"text",className:"form-control mb-3",placeholder:" Search food or nutrient...",value:a,onChange:P=>o(P.target.value)}),S!==null&&C.jsxs("div",{className:"mb-2 text-white FoodItemList",children:[C.jsx("strong",{children:"Weight Logged:"})," ",S," kg"]}),l.length===0?C.jsxs("div",{className:"text-center text-white mt-4",children:[C.jsxs("p",{className:"fw-bold",children:["No data available for ",i]}),C.jsx("p",{className:"small ",children:"Try selecting a different date or log a meal to see your history."})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"TodayChartsSection mb-3",children:[C.jsx("div",{className:"CalDonutSection",children:C.jsx(I6,{meals:l,goal:n.calorieGoal,selectedDate:i})}),C.jsx("div",{className:"NutriDonutSection",children:C.jsx(D6,{meals:l,selectedDate:i})})]}),C.jsxs("div",{className:"bg-dark p-3 rounded mb-3",children:[C.jsx("p",{className:"SubTitleName mb-2",children:"Daily Goal Progress"}),Object.entries(E).map(([P,k])=>{const U=T[P]||0,M=Math.min(U/k*100,100);return C.jsxs("div",{className:"mb-2",children:[C.jsxs("div",{className:"d-flex justify-content-between small text-white",children:[C.jsx("span",{children:P}),C.jsxs("span",{children:[U.toFixed(1)," / ",k,"g"]})]}),C.jsx("div",{className:"progress",style:{height:"8px"},children:C.jsx("div",{className:`progress-bar ${U>=k?"bg-success":"bg-warning"} progress-bar-striped progress-bar-animated`,style:{width:`${M}%`}})})]},P)})]}),x.map((P,k)=>C.jsxs("div",{className:"FoodItemList",children:[C.jsx("h6",{className:"SubTitleName",children:P.mealType}),P.foodItems.map((U,M)=>C.jsx(ak,{name:U.name,nutrients:U.nutrients,kcal:P.kcal||null,unit:n.unit||"g",disableSwipe:!1,onEdit:()=>e(P),onDelete:()=>r(P.id)},`${P.id||k}-${M}`))]},k))]})]})}function Uat(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function jat(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var Hat=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zat=function(n){Hat(t,n);function t(e,r){var i=this.constructor,s=n.call(this,e,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),Uat(s,i.prototype),jat(s),s}return t}(Error),Gat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gi=function(n){Gat(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(zat),Wat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ps=function(n){Wat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(gi),$at=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zt=function(n){$at(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(gi),qat=function(){function n(t){if(this.binarizer=t,t===null)throw new zt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var s=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(s))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Yat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pr=function(n){Yat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(gi),Kat=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Je=function(){function n(){}return n.arraycopy=function(t,e,r,i,s){for(;s--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),Xat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rS=function(n){Xat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(gi),Qat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),KM=function(n){Qat(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(rS),Zat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zn=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var s=e;s<r;s++)t[s]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new zt("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new KM(e);if(r>t)throw new KM(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var s=Zat(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=31*i+o}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,s=new Int32Array(i);return Je.arraycopy(t,e,s,0,i),s},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,s=t.length-1;i<=s;){var a=s+i>>1,o=r(e,t[a]);if(o>0)i=a+1;else if(o<0)s=a-1;else return a}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),ce=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),gr=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);Je.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=r[i]}var o=i*32+ce.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=~r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=~r[i]}var o=i*32+ce.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new zt;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),s=this.bits,a=r;a<=i;a++){var o=a>r?0:t&31,l=a<i?31:e&31,h=(2<<l)-(1<<o);s[a]|=h}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new zt;if(e===t)return!0;e--;for(var i=Math.floor(t/32),s=Math.floor(e/32),a=this.bits,o=i;o<=s;o++){var l=o>i?0:t&31,h=o<s?31:e&31,f=(2<<h)-(1<<l)&4294967295;if((a[o]&f)!==(r?f:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new zt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new zt("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var s=0;s<i;s++){for(var a=0,o=0;o<8;o++)this.get(t)&&(a|=1<<7-o),t++;e[r+s]=a}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,s=0;s<r;s++){var a=i[s];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,t[e-s]=a}if(this.size!==r*32){for(var o=r*32-this.size,l=t[0]>>>o,s=1;s<r;s++){var h=t[s];l|=h<<32-o,t[s-1]=l,l=h>>>o}t[r-1]=l}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&Zn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+Zn.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),u2;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(u2||(u2={}));const un=u2;var Jat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tt=function(n){Jat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(gi),tot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Be;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Be||(Be={}));var Qn=function(){function n(t,e,r){for(var i,s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=a,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var l=this.values,h=0,f=l.length;h!==f;h++){var p=l[h];n.VALUES_TO_ECI.set(p,this)}try{for(var m=tot(a),v=m.next();!v.done;v=m.next()){var x=v.value;n.NAME_TO_ECI.set(x,this)}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new Tt("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new Tt("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new Tt("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Be.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Be.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Be.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Be.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Be.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Be.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Be.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Be.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Be.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Be.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Be.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Be.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Be.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Be.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Be.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Be.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Be.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Be.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Be.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Be.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Be.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Be.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Be.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Be.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Be.Big5,28,"Big5"),n.GB18030=new n(Be.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Be.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),eot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Q1=function(n){eot(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(gi),ns=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof Qn?t:Qn.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",s=0,a=t.length;s<a;s++){var o=t[s].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Qn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Q1("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(Qn.UTF8)||t.equals(Qn.ISO8859_1)||t.equals(Qn.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],s=0;s<r.length;s++)i.push(r[s].charCodeAt(0));return new Uint8Array(i)},n}(),_e=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return ns.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(un.CHARACTER_SET)!==void 0)return e.get(un.CHARACTER_SET).toString();for(var r=t.length,i=!0,s=!0,a=!0,o=0,l=0,h=0,f=0,p=0,m=0,v=0,x=0,E=0,b=0,T=0,S=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,D=0;D<r&&(i||s||a);D++){var P=t[D]&255;a&&(o>0?(P&128)===0?a=!1:o--:(P&128)!==0&&((P&64)===0?a=!1:(o++,(P&32)===0?l++:(o++,(P&16)===0?h++:(o++,(P&8)===0?f++:a=!1))))),i&&(P>127&&P<160?i=!1:P>159&&(P<192||P===215||P===247)&&T++),s&&(p>0?P<64||P===127||P>252?s=!1:p--:P===128||P===160||P>239?s=!1:P>160&&P<224?(m++,x=0,v++,v>E&&(E=v)):P>127?(p++,v=0,x++,x>b&&(b=x)):(v=0,x=0))}return a&&o>0&&(a=!1),s&&p>0&&(s=!1),a&&(S||l+h+f>0)?n.UTF8:s&&(n.ASSUME_SHIFT_JIS||E>=3||b>=3)?n.SHIFT_JIS:i&&s?E===2&&m===2||T*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:s?n.SHIFT_JIS:a?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function s(o,l,h,f,p,m){if(o==="%%")return"%";if(e[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var v=p?parseInt(p.substr(1)):void 0,x;switch(m){case"s":x=e[i];break;case"c":x=e[i][0];break;case"f":x=parseFloat(e[i]).toFixed(o);break;case"p":x=parseFloat(e[i]).toPrecision(o);break;case"e":x=parseFloat(e[i]).toExponential(o);break;case"x":x=parseInt(e[i]).toString(v||16);break;case"d":x=parseFloat(parseInt(e[i],v||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(v);for(var E=parseInt(h),b=h&&h[0]+""=="0"?"0":" ";x.length<E;)x=l!==void 0?x+b:b+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,s)},n.getBytes=function(t,e){return ns.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=Qn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Qn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Qn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),re=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=_e.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),ma=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new zt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),s=0;s<e;s++)for(var a=t[s],o=0;o<r;o++)a[o]&&i.set(o,s);return i},n.parseFromString=function(t,e,r){if(t===null)throw new zt("stringRepresentation cannot be null");for(var i=new Array(t.length),s=0,a=0,o=-1,l=0,h=0;h<t.length;)if(t.charAt(h)===`
`||t.charAt(h)==="\r"){if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new zt("row lengths do not match");a=s,l++}h++}else if(t.substring(h,h+e.length)===e)h+=e.length,i[s]=!0,s++;else if(t.substring(h,h+r.length)===r)h+=r.length,i[s]=!1,s++;else throw new zt("illegal character encountered: "+t.substring(h));if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new zt("row lengths do not match");l++}for(var f=new n(o,l),p=0;p<s;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new zt("input matrix dimensions do not match");for(var e=new gr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,s=0,a=this.height;s<a;s++)for(var o=s*r,l=t.getRow(s,e).getBitArray(),h=0;h<r;h++)i[o+h]^=l[h]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new zt("Left and top must be nonnegative");if(i<1||r<1)throw new zt("Height and width must be at least 1");var s=t+r,a=e+i;if(a>this.height||s>this.width)throw new zt("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,h=e;h<a;h++)for(var f=h*o,p=t;p<s;p++)l[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new gr(this.width):e.clear();for(var r=this.rowSize,i=this.bits,s=t*r,a=0;a<r;a++)e.setBulk(a*32,i[s+a]);return e},n.prototype.setRow=function(t,e){Je.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new gr(t),i=new gr(t),s=0,a=Math.floor((e+1)/2);s<a;s++)r=this.getRow(s,r),i=this.getRow(e-1-s,i),r.reverse(),i.reverse(),this.setRow(s,i),this.setRow(e-1-s,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,s=t,a=e,o=-1,l=-1,h=0;h<e;h++)for(var f=0;f<r;f++){var p=i[h*r+f];if(p!==0){if(h<a&&(a=h),h>l&&(l=h),f*32<s){for(var m=0;(p<<31-m&4294967295)===0;)m++;f*32+m<s&&(s=f*32+m)}if(f*32+31>o){for(var m=31;!(p>>>m);)m--;f*32+m>o&&(o=f*32+m)}}}return o<s||l<a?null:Int32Array.from([s,a,o-s+1,l-a+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,s=r%t*32,a=e[r],o=0;(a<<31-o&4294967295)===0;)o++;return s+=o,Int32Array.from([s,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),s=Math.floor(r%t)*32,a=e[r],o=31;!(a>>>o);)o--;return s+=o,Int32Array.from([s,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Zn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+Zn.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new re,s=0,a=this.height;s<a;s++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,s)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),not=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ut=function(n){not(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(gi),rot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iot=function(n){rot(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new gr(s):r.clear(),this.initArrays(s);for(var a=i.getRow(e,this.luminances),o=this.buckets,l=0;l<s;l++)o[(a[l]&255)>>t.LUMINANCE_SHIFT]++;var h=t.estimateBlackPoint(o);if(s<3)for(var l=0;l<s;l++)(a[l]&255)<h&&r.set(l);else for(var f=a[0]&255,p=a[1]&255,l=1;l<s-1;l++){var m=a[l+1]&255;(p*4-f-m)/2<h&&r.set(l),f=p,p=m}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),s=new ma(r,i);this.initArrays(r);for(var a=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),h=e.getRow(l,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var m=h[p]&255;a[m>>t.LUMINANCE_SHIFT]++}for(var v=t.estimateBlackPoint(a),x=e.getMatrix(),o=0;o<i;o++)for(var E=o*r,p=0;p<r;p++){var m=x[E+p]&255;m<v&&s.set(p,o)}return s},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,s=0,a=0,o=0;o<r;o++)e[o]>a&&(s=o,a=e[o]),e[o]>i&&(i=e[o]);for(var l=0,h=0,o=0;o<r;o++){var f=o-s,p=e[o]*f*f;p>h&&(l=o,h=p)}if(s>l){var m=s;s=l,l=m}if(l-s<=r/16)throw new ut;for(var v=l-1,x=-1,o=l-1;o>s;o--){var E=o-s,p=E*E*(l-o)*(i-e[o]);p>x&&(v=o,x=p)}return v<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(Kat),sot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),aot=function(n){sot(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var s=e.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&a++;var o=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&o++;var l=t.calculateBlackPoints(s,a,o,r,i),h=new ma(r,i);t.calculateThresholdForBlock(s,a,o,r,i,l,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,s,a,o,l){for(var h=a-t.BLOCK_SIZE,f=s-t.BLOCK_SIZE,p=0;p<i;p++){var m=p<<t.BLOCK_SIZE_POWER;m>h&&(m=h);for(var v=t.cap(p,2,i-3),x=0;x<r;x++){var E=x<<t.BLOCK_SIZE_POWER;E>f&&(E=f);for(var b=t.cap(x,2,r-3),T=0,S=-2;S<=2;S++){var D=o[v+S];T+=D[b-2]+D[b-1]+D[b]+D[b+1]+D[b+2]}var P=T/25;t.thresholdBlock(e,E,m,P,s,l)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,s,a,o){for(var l=0,h=i*a+r;l<t.BLOCK_SIZE;l++,h+=a)for(var f=0;f<t.BLOCK_SIZE;f++)(e[h+f]&255)<=s&&o.set(r+f,i+l)},t.calculateBlackPoints=function(e,r,i,s,a){for(var o=a-t.BLOCK_SIZE,l=s-t.BLOCK_SIZE,h=new Array(i),f=0;f<i;f++){h[f]=new Int32Array(r);var p=f<<t.BLOCK_SIZE_POWER;p>o&&(p=o);for(var m=0;m<r;m++){var v=m<<t.BLOCK_SIZE_POWER;v>l&&(v=l);for(var x=0,E=255,b=0,T=0,S=p*s+v;T<t.BLOCK_SIZE;T++,S+=s){for(var D=0;D<t.BLOCK_SIZE;D++){var P=e[S+D]&255;x+=P,P<E&&(E=P),P>b&&(b=P)}if(b-E>t.MIN_DYNAMIC_RANGE)for(T++,S+=s;T<t.BLOCK_SIZE;T++,S+=s)for(var D=0;D<t.BLOCK_SIZE;D++)x+=e[S+D]&255}var k=x>>t.BLOCK_SIZE_POWER*2;if(b-E<=t.MIN_DYNAMIC_RANGE&&(k=E/2,f>0&&m>0)){var U=(h[f-1][m]+2*h[f][m-1]+h[f-1][m-1])/4;E<U&&(k=U)}h[f][m]=k}}return h},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(iot),Hy=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new Q1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Q1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Q1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new re,r=0;r<this.height;r++){for(var i=this.getRow(r,t),s=0;s<this.width;s++){var a=i[s]&255,o=void 0;a<64?o="#":a<128?o="+":a<192?o=".":o=" ",e.append(o)}e.append(`
`)}return e.toString()},n}(),oot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iS=function(n){oot(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),s=this.getWidth(),a=0;a<s;a++)i[a]=255-(i[a]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),s=0;s<r;s++)i[s]=255-(e[s]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,s){return new t(this.delegate.crop(e,r,i,s))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(Hy),cot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lot=function(n){cot(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,s){s===void 0&&(s=!1);var a=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!s)for(var o=0,l=0,h=e.length;o<h;o+=4,l++){var f=void 0,p=e[o+3];if(p===0)f=255;else{var m=e[o],v=e[o+1],x=e[o+2];f=306*m+601*v+117*x+512>>10}a[l]=f}else for(var o=0,l=0,E=e.length;o<E;o+=4,l++){var f=void 0,p=e[o+3];if(p===0)f=255;else{var m=e[o],v=e[o+1],x=e[o+2];f=306*m+601*v+117*x+512>>10}a[l]=255-f}return a},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new zt("Requested row is outside the image: "+e);var i=this.getWidth(),s=e*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return n.prototype.crop.call(this,e,r,i,s),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),s=e*t.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(s))*a+Math.abs(Math.sin(s))*o),h=Math.ceil(Math.abs(Math.sin(s))*a+Math.abs(Math.cos(s))*o);return r.width=l,r.height=h,i.translate(l/2,h/2),i.rotate(s),i.drawImage(this.canvas,a/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new iS(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(Hy),uot=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),$r=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(f){try{h(r.next(f))}catch(p){a(p)}}function l(f){try{h(r.throw(f))}catch(p){a(p)}}function h(f){f.done?s(f.value):i(f.value).then(o,l)}h((r=r.apply(n,t||[])).next())})},qr=function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(f){return l([h,f])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){e.label=h[1];break}if(h[0]===6&&e.label<s[1]){e.label=s[1],s=h;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(h);break}s[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(f){h=[6,f],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},hot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zf=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return $r(this,void 0,void 0,function(){var t,e,r,i,s,a,o,l,h,f,p,m;return qr(this,function(v){switch(v.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=v.sent(),e=[];try{for(r=hot(t),i=r.next();!i.done;i=r.next())s=i.value,a=s.kind==="video"?"videoinput":s.kind,a==="videoinput"&&(o=s.deviceId||s.id,l=s.label||"Video device "+(e.length+1),h=s.groupId,f={deviceId:o,label:l,kind:a,groupId:h},e.push(f))}catch(x){p={error:x}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(p)throw p.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return $r(this,void 0,void 0,function(){var t;return qr(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new uot(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return $r(this,void 0,void 0,function(){var e;return qr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return $r(this,void 0,void 0,function(){return qr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return $r(this,void 0,void 0,function(){var r,i;return qr(this,function(s){switch(s.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,s.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return $r(this,void 0,void 0,function(){var r;return qr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return $r(this,void 0,void 0,function(){var r,i;return qr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=s.sent(),[4,this.decodeOnce(r)];case 2:return i=s.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return $r(this,void 0,void 0,function(){return qr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return $r(this,void 0,void 0,function(){var i,s;return qr(this,function(a){switch(a.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,e,r)];case 1:return[2,a.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return $r(this,void 0,void 0,function(){var i;return qr(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,s.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return $r(this,void 0,void 0,function(){var i;return qr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,s.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return $r(this,void 0,void 0,function(){var r;return qr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return $r(this,void 0,void 0,function(){return qr(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new ps("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new ps("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new ps("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new ps("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new ps("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new ps("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new ps("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new ps("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new ps("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new ps("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return $r(this,void 0,void 0,function(){return qr(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return $r(this,void 0,void 0,function(){return qr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var s=function(a,o){if(i._stopAsyncDecode){o(new ut("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(t);a(l)}catch(m){var h=e&&m instanceof ut,f=m instanceof pr||m instanceof Tt,p=f&&r;if(h||p)return setTimeout(s,i._timeBetweenDecodingAttempts,a,o);o(m)}};return new Promise(function(a,o){return s(a,o)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var s=r.decode(t);e(s,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){e(null,l);var a=l instanceof pr||l instanceof Tt,o=l instanceof ut;(a||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new lot(r,e),s=new aot(i);return new qat(s)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),jr=function(){function n(t,e,r,i,s,a){r===void 0&&(r=e==null?0:8*e.length),a===void 0&&(a=Je.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=s,this.timestamp=a,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=s,this.resultMetadata=null,a==null?this.timestamp=Je.currentTimeMillis():this.timestamp=a}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);Je.arraycopy(e,0,r,0,e.length),Je.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),h2;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(h2||(h2={}));const jt=h2;var f2;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(f2||(f2={}));const Cr=f2;var zy=function(){function n(t,e,r,i,s,a){s===void 0&&(s=-1),a===void 0&&(a=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=a,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Pp=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new zt;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),mc=function(){function n(t,e){if(e.length===0)throw new zt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Je.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,s=e.length;i!==s;i++){var a=e[i];r=Pp.addOrSubtract(r,a)}return r}r=e[0];for(var o=e.length,l=this.field,i=1;i<o;i++)r=Pp.addOrSubtract(l.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new zt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;Je.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=Pp.addOrSubtract(e[o-a],r[o]);return new n(this.field,s)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new zt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=this.field,l=0;l<r;l++)for(var h=e[l],f=0;f<s;f++)a[l+f]=Pp.addOrSubtract(a[l+f],o.multiply(h,i[f]));return new n(o,a)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),s=this.coefficients,a=0;a<e;a++)i[a]=r.multiply(s[a],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new zt;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,s=new Int32Array(i+t),a=this.field,o=0;o<i;o++)s[o]=a.multiply(r[o],e);return new n(a,s)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new zt("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new zt("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,s=t.getCoefficient(t.getDegree()),a=e.inverse(s);i.getDegree()>=t.getDegree()&&!i.isZero();){var o=i.getDegree()-t.getDegree(),l=e.multiply(i.getCoefficient(i.getDegree()),a),h=t.multiplyByMonomial(o,l),f=e.buildMonomial(o,l);r=r.addOrSubtract(f),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),fot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),w7=function(n){fot(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(gi),dot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ci=function(n){dot(t,n);function t(e,r,i){var s=n.call(this)||this;s.primitive=e,s.size=r,s.generatorBase=i;for(var a=new Int32Array(r),o=1,l=0;l<r;l++)a[l]=o,o*=2,o>=r&&(o^=e,o&=r-1);s.expTable=a;for(var h=new Int32Array(r),l=0;l<r-1;l++)h[a[l]]=l;return s.logTable=h,s.zero=new mc(s,Int32Array.from([0])),s.one=new mc(s,Int32Array.from([1])),s}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new zt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new mc(this,i)},t.prototype.inverse=function(e){if(e===0)throw new w7;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+ce.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(Pp),pot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),l1=function(n){pot(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(gi),got=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),u0=function(n){got(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(gi),Gy=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new mc(r,t),s=new Int32Array(e),a=!0,o=0;o<e;o++){var l=i.evaluateAt(r.exp(o+r.getGeneratorBase()));s[s.length-1-o]=l,l!==0&&(a=!1)}if(!a)for(var h=new mc(r,s),f=this.runEuclideanAlgorithm(r.buildMonomial(e,1),h,e),p=f[0],m=f[1],v=this.findErrorLocations(p),x=this.findErrorMagnitudes(m,v),o=0;o<v.length;o++){var E=t.length-1-r.log(v[o]);if(E<0)throw new l1("Bad error location");t[E]=ci.addOrSubtract(t[E],x[o])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=this.field,a=t,o=e,l=s.getZero(),h=s.getOne();o.getDegree()>=(r/2|0);){var f=a,p=l;if(a=o,l=h,a.isZero())throw new l1("r_{i-1} was zero");o=f;for(var m=s.getZero(),v=a.getCoefficient(a.getDegree()),x=s.inverse(v);o.getDegree()>=a.getDegree()&&!o.isZero();){var E=o.getDegree()-a.getDegree(),b=s.multiply(o.getCoefficient(o.getDegree()),x);m=m.addOrSubtract(s.buildMonomial(E,b)),o=o.addOrSubtract(a.multiplyByMonomial(E,b))}if(h=m.multiply(l).addOrSubtract(p),o.getDegree()>=a.getDegree())throw new u0("Division algorithm failed to reduce polynomial?")}var T=h.getCoefficient(0);if(T===0)throw new l1("sigmaTilde(0) was zero");var S=s.inverse(T),D=h.multiplyScalar(S),P=o.multiplyScalar(S);return[D,P]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,s=this.field,a=1;a<s.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=s.inverse(a),i++);if(i!==e)throw new l1("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),s=this.field,a=0;a<r;a++){for(var o=s.inverse(e[a]),l=1,h=0;h<r;h++)if(a!==h){var f=s.multiply(e[h],o),p=(f&1)===0?f|1:f&-2;l=s.multiply(l,p)}i[a]=s.multiply(t.evaluateAt(o),s.inverse(l)),s.getGeneratorBase()!==0&&(i[a]=s.multiply(i[a],o))}return i},n}(),br;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(br||(br={}));var XM=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),s=n.convertBoolArrayToByteArray(i),a=n.getEncodedData(i),o=new zy(s,a,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=br.UPPER,i=br.UPPER,s="",a=0;a<e;)if(i===br.BINARY){if(e-a<5)break;var o=n.readCode(t,a,5);if(a+=5,o===0){if(e-a<11)break;o=n.readCode(t,a,11)+31,a+=11}for(var l=0;l<o;l++){if(e-a<8){a=e;break}var h=n.readCode(t,a,8);s+=_e.castAsNonUtf8Char(h),a+=8}i=r}else{var f=i===br.DIGIT?4:5;if(e-a<f)break;var h=n.readCode(t,a,f);a+=f;var p=n.getCharacter(i,h);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(s+=p,i=r)}return s},n.getTable=function(t){switch(t){case"L":return br.LOWER;case"P":return br.PUNCT;case"M":return br.MIXED;case"D":return br.DIGIT;case"B":return br.BINARY;case"U":default:return br.UPPER}},n.getCharacter=function(t,e){switch(t){case br.UPPER:return n.UPPER_TABLE[e];case br.LOWER:return n.LOWER_TABLE[e];case br.MIXED:return n.MIXED_TABLE[e];case br.PUNCT:return n.PUNCT_TABLE[e];case br.DIGIT:return n.DIGIT_TABLE[e];default:throw new u0("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=ci.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=ci.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=ci.AZTEC_DATA_10):(r=12,e=ci.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=t.length/r;if(s<i)throw new Tt;for(var a=t.length%r,o=new Int32Array(s),l=0;l<s;l++,a+=r)o[l]=n.readCode(t,a,r);try{var h=new Gy(e);h.decode(o,s-i)}catch(b){throw new Tt(b)}for(var f=(1<<r)-1,p=0,l=0;l<i;l++){var m=o[l];if(m===0||m===f)throw new Tt;(m===1||m===f-1)&&p++}for(var v=new Array(i*r-p),x=0,l=0;l<i;l++){var m=o[l];if(m===1||m===f-1)v.fill(m>1,x,x+r-1),x+=r-1;else for(var E=r-1;E>=0;--E)v[x++]=(m&1<<E)!==0}return v},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,s=new Int32Array(i),a=new Array(this.totalBitsInLayer(r,e));if(e)for(var o=0;o<s.length;o++)s[o]=o;else for(var l=i+1+2*ce.truncDivision(ce.truncDivision(i,2)-1,15),h=i/2,f=ce.truncDivision(l,2),o=0;o<h;o++){var p=o+ce.truncDivision(o,15);s[h-o-1]=f-p-1,s[h+o]=f+p+1}for(var o=0,m=0;o<r;o++){for(var v=(r-o)*4+(e?9:12),x=o*2,E=i-1-x,b=0;b<v;b++)for(var T=b*2,S=0;S<2;S++)a[m+T+S]=t.get(s[x+S],s[x+b]),a[m+2*v+T+S]=t.get(s[x+b],s[E-S]),a[m+4*v+T+S]=t.get(s[E-S],s[E-b]),a[m+6*v+T+S]=t.get(s[E-b],s[x+S]);m+=v*8}return a},n.readCode=function(t,e,r){for(var i=0,s=e;s<e+r;s++)i<<=1,t[s]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Te=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var s=t-r,a=e-i;return Math.sqrt(s*s+a*a)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var s=t[r];e+=s}return e},n}(),d2=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Pt=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*d2.floatToIntBits(this.x)+d2.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),s,a,o;if(r>=e&&r>=i?(a=t[0],s=t[1],o=t[2]):i>=r&&i>=e?(a=t[1],s=t[0],o=t[2]):(a=t[2],s=t[0],o=t[1]),this.crossProductZ(s,a,o)<0){var l=s;s=o,o=l}t[0]=s,t[1]=a,t[2]=o},n.distance=function(t,e){return Te.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,s=e.y;return(r.x-i)*(t.y-s)-(r.y-s)*(t.x-i)},n}(),sS=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),mot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vot=function(n){mot(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r)||this;return o.compact=i,o.nbDatablocks=s,o.nbLayers=a,o}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(sS),p2=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var s=e/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ut}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,s=!1,a=!0,o=!1,l=!1,h=!1,f=!1,p=!1,m=this.width,v=this.height;a;){a=!1;for(var x=!0;(x||!l)&&e<m;)x=this.containsBlackPoint(r,i,e,!1),x?(e++,a=!0,l=!0):l||e++;if(e>=m){s=!0;break}for(var E=!0;(E||!h)&&i<v;)E=this.containsBlackPoint(t,e,i,!0),E?(i++,a=!0,h=!0):h||i++;if(i>=v){s=!0;break}for(var b=!0;(b||!f)&&t>=0;)b=this.containsBlackPoint(r,i,t,!1),b?(t--,a=!0,f=!0):f||t--;if(t<0){s=!0;break}for(var T=!0;(T||!p)&&r>=0;)T=this.containsBlackPoint(t,e,r,!0),T?(r--,a=!0,p=!0):p||r--;if(r<0){s=!0;break}a&&(o=!0)}if(!s&&o){for(var S=e-t,D=null,P=1;D===null&&P<S;P++)D=this.getBlackPointOnSegment(t,i-P,t+P,i);if(D==null)throw new ut;for(var k=null,P=1;k===null&&P<S;P++)k=this.getBlackPointOnSegment(t,r+P,t+P,r);if(k==null)throw new ut;for(var U=null,P=1;U===null&&P<S;P++)U=this.getBlackPointOnSegment(e,r+P,e-P,r);if(U==null)throw new ut;for(var M=null,P=1;M===null&&P<S;P++)M=this.getBlackPointOnSegment(e,i-P,e-P,i);if(M==null)throw new ut;return this.centerEdges(M,D,U,k)}else throw new ut},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var s=Te.round(Te.distance(t,e,r,i)),a=(r-t)/s,o=(i-e)/s,l=this.image,h=0;h<s;h++){var f=Te.round(t+h*a),p=Te.round(e+h*o);if(l.get(f,p))return new Pt(f,p)}return null},n.prototype.centerEdges=function(t,e,r,i){var s=t.getX(),a=t.getY(),o=e.getX(),l=e.getY(),h=r.getX(),f=r.getY(),p=i.getX(),m=i.getY(),v=n.CORR;return s<this.width/2?[new Pt(p-v,m+v),new Pt(o+v,l+v),new Pt(h-v,f-v),new Pt(s+v,a-v)]:[new Pt(p+v,m+v),new Pt(o+v,l-v),new Pt(h-v,f+v),new Pt(s-v,a-v)]},n.prototype.containsBlackPoint=function(t,e,r,i){var s=this.image;if(i){for(var a=t;a<=e;a++)if(s.get(a,r))return!0}else for(var o=t;o<=e;o++)if(s.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),QM=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),s=!0,a=0;a<e.length&&s;a+=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}s=!0;for(var a=e.length-2;a>=0&&s;a-=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}},n}(),E7=function(){function n(t,e,r,i,s,a,o,l,h){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=s,this.a32=a,this.a13=o,this.a23=l,this.a33=h}return n.quadrilateralToQuadrilateral=function(t,e,r,i,s,a,o,l,h,f,p,m,v,x,E,b){var T=n.quadrilateralToSquare(t,e,r,i,s,a,o,l),S=n.squareToQuadrilateral(h,f,p,m,v,x,E,b);return S.times(T)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,f=this.a32,p=this.a33,m=0;m<e;m+=2){var v=t[m],x=t[m+1],E=s*v+l*x+p;t[m]=(r*v+a*x+h)/E,t[m+1]=(i*v+o*x+f)/E}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,f=this.a32,p=this.a33,m=t.length,v=0;v<m;v++){var x=t[v],E=e[v],b=s*x+l*E+p;t[v]=(r*x+a*E+h)/b,e[v]=(i*x+o*E+f)/b}},n.squareToQuadrilateral=function(t,e,r,i,s,a,o,l){var h=t-r+s-o,f=e-i+a-l;if(h===0&&f===0)return new n(r-t,s-r,t,i-e,a-i,e,0,0,1);var p=r-s,m=o-s,v=i-a,x=l-a,E=p*x-m*v,b=(h*x-m*f)/E,T=(p*f-h*v)/E;return new n(r-t+b*r,o-t+T*o,t,i-e+b*i,l-e+T*l,e,b,T,1)},n.quadrilateralToSquare=function(t,e,r,i,s,a,o,l){return n.squareToQuadrilateral(t,e,r,i,s,a,o,l).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),yot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_ot=function(n){yot(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,s,a,o,l,h,f,p,m,v,x,E,b,T,S,D,P){var k=E7.quadrilateralToQuadrilateral(s,a,o,l,h,f,p,m,v,x,E,b,T,S,D,P);return this.sampleGridWithTransform(e,r,i,k)},t.prototype.sampleGridWithTransform=function(e,r,i,s){if(r<=0||i<=0)throw new ut;for(var a=new ma(r,i),o=new Float32Array(2*r),l=0;l<i;l++){for(var h=o.length,f=l+.5,p=0;p<h;p+=2)o[p]=p/2+.5,o[p+1]=f;s.transformPoints(o),QM.checkAndNudgePoints(e,o);try{for(var p=0;p<h;p+=2)e.get(Math.floor(o[p]),Math.floor(o[p+1]))&&a.set(p/2,l)}catch{throw new ut}}return a},t}(QM),aS=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new _ot,n}(),ai=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new Pt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),xot=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new vot(s,a,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ut;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,s=0;s<4;s++){var a=r[(this.shift+s)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(s,a,o){var l=(s>>e-2<<1)+(s&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(ce.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ut},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var s=r-i,a=new Int32Array(r),o=r-1;o>=0;--o)a[o]=t&15,t>>=4;try{var l=new Gy(ci.AZTEC_PARAM);l.decode(a,s)}catch{throw new ut}for(var h=0,o=0;o<i;o++)h=(h<<4)+a[o];return h},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,s=t,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(e,a,1,-1),l=this.getFirstDifferent(r,a,1,1),h=this.getFirstDifferent(i,a,-1,1),f=this.getFirstDifferent(s,a,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(s,e)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,l,h,f))break}e=o,r=l,i=h,s=f,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ut;this.compact=this.nbCenterLayers===5;var m=new Pt(e.getX()+.5,e.getY()-.5),v=new Pt(r.getX()+.5,r.getY()+.5),x=new Pt(i.getX()-.5,i.getY()+.5),E=new Pt(s.getX()-.5,s.getY()-.5);return this.expandSquare([m,v,x,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var s=new p2(this.image).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{var a=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new ai(a+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new ai(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ai(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ai(a-7,o-7),!1,-1,-1).toResultPoint()}var l=Te.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=Te.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var s=new p2(this.image,15,l,h).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{t=this.getFirstDifferent(new ai(l+7,h-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new ai(l+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ai(l-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ai(l-7,h-7),!1,-1,-1).toResultPoint()}return l=Te.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=Te.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new ai(l,h)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,s){var a=aS.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,h=o/2+this.nbCenterLayers;return a.sampleGrid(t,o,o,l,l,h,l,h,h,l,h,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,s=this.distanceResultPoint(t,e),a=s/r,o=t.getX(),l=t.getY(),h=a*(e.getX()-t.getX())/s,f=a*(e.getY()-t.getY())/s,p=0;p<r;p++)this.image.get(Te.round(o+p*h),Te.round(l+p*f))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var s=3;t=new ai(t.getX()-s,t.getY()+s),e=new ai(e.getX()-s,e.getY()-s),r=new ai(r.getX()+s,r.getY()-s),i=new ai(i.getX()+s,i.getY()+s);var a=this.getColor(i,t);if(a===0)return!1;var o=this.getColor(t,e);return o!==a||(o=this.getColor(e,r),o!==a)?!1:(o=this.getColor(r,i),o===a)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,s=(e.getY()-t.getY())/r,a=0,o=t.getX(),l=t.getY(),h=this.image.get(t.getX(),t.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,l+=s,this.image.get(Te.round(o),Te.round(l))!==h&&a++;var m=a/r;return m>.1&&m<.9?0:m<=.1===h?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var s=t.getX()+r,a=t.getY()+i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r,a+=i;for(s-=r,a-=i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r;for(s-=r;this.isValid(s,a)&&this.image.get(s,a)===e;)a+=i;return a-=i,new ai(s,a)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),s=t[0].getX()-t[2].getX(),a=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,h=new Pt(o+i*s,l+i*a),f=new Pt(o-i*s,l-i*a);s=t[1].getX()-t[3].getX(),a=t[1].getY()-t[3].getY(),o=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2;var p=new Pt(o+i*s,l+i*a),m=new Pt(o-i*s,l-i*a),v=[h,p,f,m];return v},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=Te.round(t.getX()),r=Te.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return Te.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return Te.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ce.truncDivision(this.nbLayers-4,8)+1)+15},n}(),g2=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new xot(t.getBlackMatrix()),s=null,a=null;try{var o=i.detectMirror(!1);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new XM().decode(o)}catch(p){r=p}if(a==null)try{var o=i.detectMirror(!0);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new XM().decode(o)}catch(p){throw r??p}var l=new jr(a.getText(),a.getRawBytes(),a.getNumBits(),s,jt.AZTEC,Je.currentTimeMillis()),h=a.getByteSegments();h!=null&&l.putMetadata(Cr.BYTE_SEGMENTS,h);var f=a.getECLevel();return f!=null&&l.putMetadata(Cr.ERROR_CORRECTION_LEVEL,f),l},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(un.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,s,a){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),wot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){wot(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new g2,e)||this}return t})(zf);var tr=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(un.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),s=this.doDecode(i,e),a=s.getResultMetadata(),o=270;a!==null&&a.get(Cr.ORIENTATION)===!0&&(o=o+a.get(Cr.ORIENTATION)%360),s.putMetadata(Cr.ORIENTATION,o);var l=s.getResultPoints();if(l!==null)for(var h=i.getHeight(),f=0;f<l.length;f++)l[f]=new Pt(h-l[f].getY()-1,l[f].getX());return s}else throw new ut}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),s=new gr(r),a=e&&e.get(un.TRY_HARDER)===!0,o=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var h=Math.trunc(i/2),f=0;f<l;f++){var p=Math.trunc((f+1)/2),m=(f&1)===0,v=h+o*(m?p:-p);if(v<0||v>=i)break;try{s=t.getBlackRow(v,s)}catch{continue}for(var x=function(S){if(S===1&&(s.reverse(),e&&e.get(un.NEED_RESULT_POINT_CALLBACK)===!0)){var D=new Map;e.forEach(function(U,M){return D.set(M,U)}),D.delete(un.NEED_RESULT_POINT_CALLBACK),e=D}try{var P=E.decodeRow(v,s,e);if(S===1){P.putMetadata(Cr.ORIENTATION,180);var k=P.getResultPoints();k!==null&&(k[0]=new Pt(r-k[0].getX()-1,k[0].getY()),k[1]=new Pt(r-k[1].getX()-1,k[1].getY()))}return{value:P}}catch{}},E=this,b=0;b<2;b++){var T=x(b);if(typeof T=="object")return T.value}}throw new ut},n.recordPattern=function(t,e,r){for(var i=r.length,s=0;s<i;s++)r[s]=0;var a=t.getSize();if(e>=a)throw new ut;for(var o=!t.get(e),l=0,h=e;h<a;){if(t.get(h)!==o)r[l]++;else{if(++l===i)break;r[l]=1,o=!o}h++}if(!(l===i||l===i-1&&h===a))throw new ut},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,s=t.get(e);e>0&&i>=0;)t.get(--e)!==s&&(i--,s=!s);if(i>=0)throw new ut;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return Number.POSITIVE_INFINITY;var l=s/a;r*=l;for(var h=0,f=0;f<i;f++){var p=t[f],m=e[f]*l,v=p>m?p-m:m-p;if(v>r)return Number.POSITIVE_INFINITY;h+=v}return h/s},n}(),Eot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZM=function(n){Eot(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),s=0,a=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,h=6,f=i;f<r;f++)if(e.get(f)!==l)a[s]++;else{if(s===h-1){for(var p=t.MAX_AVG_VARIANCE,m=-1,v=t.CODE_START_A;v<=t.CODE_START_C;v++){var x=tr.patternMatchVariance(a,t.CODE_PATTERNS[v],t.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,m=v)}if(m>=0&&e.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,m]);o+=a[0]+a[1],a=a.slice(2,a.length),a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,l=!l}throw new ut},t.decodeCode=function(e,r,i){tr.recordPattern(e,i,r);for(var s=t.MAX_AVG_VARIANCE,a=-1,o=0;o<t.CODE_PATTERNS.length;o++){var l=t.CODE_PATTERNS[o],h=this.patternMatchVariance(r,l,t.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=o)}if(a>=0)return a;throw new ut},t.prototype.decodeRow=function(e,r,i){var s=i&&i.get(un.ASSUME_GS1)===!0,a=t.findStartPattern(r),o=a[2],l=0,h=new Uint8Array(20);h[l++]=o;var f;switch(o){case t.CODE_START_A:f=t.CODE_CODE_A;break;case t.CODE_START_B:f=t.CODE_CODE_B;break;case t.CODE_START_C:f=t.CODE_CODE_C;break;default:throw new Tt}for(var p=!1,m=!1,v="",x=a[0],E=a[1],b=Int32Array.from([0,0,0,0,0,0]),T=0,S=0,D=o,P=0,k=!0,U=!1,M=!1;!p;){var I=m;switch(m=!1,T=S,S=t.decodeCode(r,b,E),h[l++]=S,S!==t.CODE_STOP&&(k=!0),S!==t.CODE_STOP&&(P++,D+=P*S),x=E,E+=b.reduce(function(at,vt){return at+vt},0),S){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new Tt}switch(f){case t.CODE_CODE_A:if(S<64)M===U?v+=String.fromCharCode(32+S):v+=String.fromCharCode(32+S+128),M=!1;else if(S<96)M===U?v+=String.fromCharCode(S-64):v+=String.fromCharCode(S+64),M=!1;else switch(S!==t.CODE_STOP&&(k=!1),S){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!U&&M?(U=!0,M=!1):U&&M?(U=!1,M=!1):M=!0;break;case t.CODE_SHIFT:m=!0,f=t.CODE_CODE_B;break;case t.CODE_CODE_B:f=t.CODE_CODE_B;break;case t.CODE_CODE_C:f=t.CODE_CODE_C;break;case t.CODE_STOP:p=!0;break}break;case t.CODE_CODE_B:if(S<96)M===U?v+=String.fromCharCode(32+S):v+=String.fromCharCode(32+S+128),M=!1;else switch(S!==t.CODE_STOP&&(k=!1),S){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!U&&M?(U=!0,M=!1):U&&M?(U=!1,M=!1):M=!0;break;case t.CODE_SHIFT:m=!0,f=t.CODE_CODE_A;break;case t.CODE_CODE_A:f=t.CODE_CODE_A;break;case t.CODE_CODE_C:f=t.CODE_CODE_C;break;case t.CODE_STOP:p=!0;break}break;case t.CODE_CODE_C:if(S<100)S<10&&(v+="0"),v+=S;else switch(S!==t.CODE_STOP&&(k=!1),S){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_CODE_A:f=t.CODE_CODE_A;break;case t.CODE_CODE_B:f=t.CODE_CODE_B;break;case t.CODE_STOP:p=!0;break}break}I&&(f=f===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var N=E-x;if(E=r.getNextUnset(E),!r.isRange(E,Math.min(r.getSize(),E+(E-x)/2),!1))throw new ut;if(D-=P*T,D%103!==T)throw new pr;var L=v.length;if(L===0)throw new ut;L>0&&k&&(f===t.CODE_CODE_C?v=v.substring(0,L-2):v=v.substring(0,L-1));for(var j=(a[1]+a[0])/2,z=x+N/2,B=h.length,yt=new Uint8Array(B),wt=0;wt<B;wt++)yt[wt]=h[wt];var Y=[new Pt(j,e),new Pt(z,e)];return new jr(v,yt,0,Y,jt.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(tr),bot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jw=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JM=function(n){bot(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.counters;h.fill(0),this.decodeRowResult="";var f=t.findAsteriskPattern(r,h),p=r.getNextSet(f[1]),m=r.getSize(),v,x;do{t.recordPattern(r,p,h);var E=t.toNarrowWidePattern(h);if(E<0)throw new ut;v=t.patternToChar(E),this.decodeRowResult+=v,x=p;try{for(var b=(s=void 0,Jw(h)),T=b.next();!T.done;T=b.next()){var S=T.value;p+=S}}catch(B){s={error:B}}finally{try{T&&!T.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}p=r.getNextSet(p)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var D=0;try{for(var P=Jw(h),k=P.next();!k.done;k=P.next()){var S=k.value;D+=S}}catch(B){o={error:B}}finally{try{k&&!k.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}var U=p-x-D;if(p!==m&&U*2<D)throw new ut;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,I=0,N=0;N<M;N++)I+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(M)!==t.ALPHABET_STRING.charAt(I%43))throw new pr;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new ut;var L;this.extendedMode?L=t.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;var j=(f[1]+f[0])/2,z=x+D/2;return new jr(L,null,0,[new Pt(j,e),new Pt(z,e)],jt.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),s=e.getNextSet(0),a=0,o=s,l=!1,h=r.length,f=s;f<i;f++)if(e.get(f)!==l)r[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,l=!l}throw new ut},t.toNarrowWidePattern=function(e){var r,i,s=e.length,a=0,o;do{var l=2147483647;try{for(var h=(r=void 0,Jw(e)),f=h.next();!f.done;f=h.next()){var p=f.value;p<l&&p>a&&(l=p)}}catch(E){r={error:E}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}a=l,o=0;for(var m=0,v=0,x=0;x<s;x++){var p=e[x];p>a&&(v|=1<<s-1-x,o++,m+=p)}if(o===3){for(var x=0;x<s&&o>0;x++){var p=e[x];if(p>a&&(o--,p*2>=m))return-1}return v}}while(o>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new ut},t.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a==="+"||a==="$"||a==="%"||a==="/"){var o=e.charAt(s+1),l="\0";switch(a){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Tt;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Tt;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new Tt;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Tt;break}i+=l,s++}else i+=a}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(tr),Aot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tE=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},t4=function(n){Aot(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.findAsteriskPattern(r),f=r.getNextSet(h[1]),p=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var v,x;do{t.recordPattern(r,f,m);var E=this.toPattern(m);if(E<0)throw new ut;v=this.patternToChar(E),this.decodeRowResult+=v,x=f;try{for(var b=(s=void 0,tE(m)),T=b.next();!T.done;T=b.next()){var S=T.value;f+=S}}catch(N){s={error:N}}finally{try{T&&!T.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}f=r.getNextSet(f)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var D=0;try{for(var P=tE(m),k=P.next();!k.done;k=P.next()){var S=k.value;D+=S}}catch(N){o={error:N}}finally{try{k&&!k.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new ut;if(this.decodeRowResult.length<2)throw new ut;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var U=this.decodeExtended(this.decodeRowResult),M=(h[1]+h[0])/2,I=x+D/2;return new jr(U,null,0,[new Pt(M,e),new Pt(I,e)],jt.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var s=this.counters,a=i,o=!1,l=s.length,h=0,f=i;f<r;f++)if(e.get(f)!==o)s[h]++;else{if(h===l-1){if(this.toPattern(s)===t.ASTERISK_ENCODING)return new Int32Array([a,f]);a+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,o=!o}throw new ut},t.prototype.toPattern=function(e){var r,i,s=0;try{for(var a=tE(e),o=a.next();!o.done;o=a.next()){var l=o.value;s+=l}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}for(var h=0,f=e.length,p=0;p<f;p++){var m=Math.round(e[p]*9/s);if(m<1||m>4)return-1;if((p&1)===0)for(var v=0;v<m;v++)h=h<<1|1;else h<<=m}return h},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new ut},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a>="a"&&a<="d"){if(s>=r-1)throw new Tt;var o=e.charAt(s+1),l="\0";switch(a){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Tt;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Tt;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new Tt;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Tt;break}i+=l,s++}else i+=a}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var s=1,a=0,o=r-1;o>=0;o--)a+=s*t.ALPHABET_STRING.indexOf(e.charAt(o)),++s>i&&(s=1);if(e.charAt(r)!==t.ALPHABET_STRING[a%47])throw new pr},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(tr),Tot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},e4=function(n){Tot(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var s,a,o=this.decodeStart(r),l=this.decodeEnd(r),h=new re;t.decodeMiddle(r,o[1],l[0],h);var f=h.toString(),p=null;i!=null&&(p=i.get(un.ALLOWED_LENGTHS)),p==null&&(p=t.DEFAULT_ALLOWED_LENGTHS);var m=f.length,v=!1,x=0;try{for(var E=Sot(p),b=E.next();!b.done;b=E.next()){var T=b.value;if(m===T){v=!0;break}T>x&&(x=T)}}catch(P){s={error:P}}finally{try{b&&!b.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}if(!v&&m>x&&(v=!0),!v)throw new Tt;var S=[new Pt(o[1],e),new Pt(l[0],e)],D=new jr(f,null,0,S,jt.ITF,new Date().getTime());return D},t.decodeMiddle=function(e,r,i,s){var a=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),o.fill(0),l.fill(0);r<i;){tr.recordPattern(e,r,a);for(var h=0;h<5;h++){var f=2*h;o[h]=a[f],l[h]=a[f+1]}var p=t.decodeDigit(o);s.append(p.toString()),p=this.decodeDigit(l),s.append(p.toString()),a.forEach(function(m){r+=m})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var s=r-1;i>0&&s>=0&&!e.get(s);s--)i--;if(i!==0)throw new ut},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new ut;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(a){a instanceof ut&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var s=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-s,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var s=i.length,a=new Int32Array(s),o=e.getSize(),l=!1,h=0,f=r;a.fill(0);for(var p=r;p<o;p++)if(e.get(p)!==l)a[h]++;else{if(h===s-1){if(tr.patternMatchVariance(a,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[f,p];f+=a[0]+a[1],Je.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new ut},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,s=t.PATTERNS.length,a=0;a<s;a++){var o=t.PATTERNS[a],l=tr.patternMatchVariance(e,o,t.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=a):l===r&&(i=-1)}if(i>=0)return i%10;throw new ut},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(tr),Cot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ef=function(n){Cot(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,s=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,s,!1,this.START_END_PATTERN,a);var o=i[0];s=i[1];var l=o-(s-o);l>=0&&(r=e.isRange(l,o,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,s){return this.findGuardPattern(e,r,i,s,new Int32Array(s.length))},t.findGuardPattern=function(e,r,i,s,a){var o=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var l=0,h=r,f=s.length,p=i,m=r;m<o;m++)if(e.get(m)!==p)a[l]++;else{if(l===f-1){if(tr.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([h,m]);h+=a[0]+a[1];for(var v=a.slice(2,a.length),x=0;x<l-1;x++)a[x]=v[x];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,p=!p}throw new ut},t.decodeDigit=function(e,r,i,s){this.recordPattern(e,i,r);for(var a=this.MAX_AVG_VARIANCE,o=-1,l=s.length,h=0;h<l;h++){var f=s[h],p=tr.patternMatchVariance(r,f,t.MAX_INDIVIDUAL_VARIANCE);p<a&&(a=p,o=h)}if(o>=0)return o;throw new ut},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(tr),Iot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dot=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Pt((r[0]+r[1])/2,t),new Pt(s,t)],h=new jr(a,null,0,l,jt.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,f=0;f<5&&l<o;f++){var p=Ef.decodeDigit(t,a,l,Ef.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var m=(i=void 0,Iot(a)),v=m.next();!v.done;v=m.next()){var x=v.value;l+=x}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}p>=10&&(h|=1<<4-f),f!==4&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==5)throw new ut;var E=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==E)throw new ut;return l},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new ut},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[Cr.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),s=r%100,a=s<10?"0"+s:s.toString();return e+i+"."+a},n}(),Oot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rot=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Pt((r[0]+r[1])/2,t),new Pt(s,t)],h=new jr(a,null,0,l,jt.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,f=0;f<2&&l<o;f++){var p=Ef.decodeDigit(t,a,l,Ef.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var m=(i=void 0,Oot(a)),v=m.next();!v.done;v=m.next()){var x=v.value;l+=x}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}p>=10&&(h|=1<<1-f),f!==1&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==2)throw new ut;if(parseInt(r.toString())%4!==h)throw new ut;return l},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[Cr.ISSUE_NUMBER,parseInt(t)]])},n}(),Not=function(){function n(){}return n.decodeRow=function(t,e,r){var i=Ef.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new Dot;return s.decodeRow(t,e,i)}catch{var a=new Rot;return a.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),Mot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xn=function(n){Mot(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],s=new Int32Array(i.length),a=0;a<i.length;a++)s[a]=i[i.length-a-1];t.L_AND_G_PATTERNS[r]=s}return e}return t.prototype.decodeRow=function(e,r,i){var s=t.findStartGuardPattern(r),a=i==null?null:i.get(un.NEED_RESULT_POINT_CALLBACK);if(a!=null){var o=new Pt((s[0]+s[1])/2,e);a.foundPossibleResultPoint(o)}var l=this.decodeMiddle(r,s,this.decodeRowStringBuffer),h=l.rowOffset,f=l.resultString;if(a!=null){var p=new Pt(h,e);a.foundPossibleResultPoint(p)}var m=t.decodeEnd(r,h);if(a!=null){var v=new Pt((m[0]+m[1])/2,e);a.foundPossibleResultPoint(v)}var x=m[1],E=x+(x-m[0]);if(E>=r.getSize()||!r.isRange(x,E,!1))throw new ut;var b=f.toString();if(b.length<8)throw new Tt;if(!t.checkChecksum(b))throw new pr;var T=(s[1]+s[0])/2,S=(m[1]+m[0])/2,D=this.getBarcodeFormat(),P=[new Pt(T,e),new Pt(S,e)],k=new jr(b,null,0,P,D,new Date().getTime()),U=0;try{var M=Not.decodeRow(e,r,m[1]);k.putMetadata(Cr.UPC_EAN_EXTENSION,M.getText()),k.putAllMetadata(M.getResultMetadata()),k.addResultPoints(M.getResultPoints()),U=M.getText().length}catch{}var I=i==null?null:i.get(un.ALLOWED_EAN_EXTENSIONS);if(I!=null){var N=!1;for(var L in I)if(U.toString()===L){N=!0;break}if(!N)throw new ut}return D===jt.EAN_13||jt.UPC_A,k},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Ef),Pot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),n4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},m2=function(n){Pot(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var f=e.getSize(),p=r[1],m=0,v=0;v<6&&p<f;v++){var x=Xn.decodeDigit(e,h,p,Xn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var E=(s=void 0,n4(h)),b=E.next();!b.done;b=E.next()){var T=b.value;p+=T}}catch(k){s={error:k}}finally{try{b&&!b.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}x>=10&&(m|=1<<5-v)}i=t.determineFirstDigit(i,m);var S=Xn.findGuardPattern(e,p,!0,Xn.MIDDLE_PATTERN,new Int32Array(Xn.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var v=0;v<6&&p<f;v++){var x=Xn.decodeDigit(e,h,p,Xn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var D=(o=void 0,n4(h)),P=D.next();!P.done;P=D.next()){var T=P.value;p+=T}}catch(M){o={error:M}}finally{try{P&&!P.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},t.prototype.getBarcodeFormat=function(){return jt.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ut},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Xn),kot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),r4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i4=function(n){kot(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var f=e.getSize(),p=r[1],m=0;m<4&&p<f;m++){var v=Xn.decodeDigit(e,h,p,Xn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var x=(s=void 0,r4(h)),E=x.next();!E.done;E=x.next()){var b=E.value;p+=b}}catch(P){s={error:P}}finally{try{E&&!E.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}}var T=Xn.findGuardPattern(e,p,!0,Xn.MIDDLE_PATTERN,new Int32Array(Xn.MIDDLE_PATTERN.length).fill(0));p=T[1];for(var m=0;m<4&&p<f;m++){var v=Xn.decodeDigit(e,h,p,Xn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var S=(o=void 0,r4(h)),D=S.next();!D.done;D=S.next()){var b=D.value;p+=b}}catch(U){o={error:U}}finally{try{D&&!D.done&&(l=S.return)&&l.call(S)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},t.prototype.getBarcodeFormat=function(){return jt.EAN_8},t}(Xn),Lot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),s4=function(n){Lot(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new m2,e}return t.prototype.getBarcodeFormat=function(){return jt.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new jr(r.substring(1),null,null,e.getResultPoints(),jt.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ut},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Xn),Vot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a4=function(n){Vot(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o=this.decodeMiddleCounters.map(function(b){return b});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),h=r[1],f=0,p=0;p<6&&h<l;p++){var m=t.decodeDigit(e,o,h,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(s=void 0,Bot(o)),x=v.next();!x.done;x=v.next()){var E=x.value;h+=E}}catch(b){s={error:b}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}m>=10&&(f|=1<<5-p)}return t.determineNumSysAndCheckDigit(new re(i),f),h},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Xn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){e.insert(0,"0"+i),e.append("0"+s);return}throw ut.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return jt.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new re;i.append(e.charAt(0));var s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Xn),Fot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),o4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eE=function(n){Fot(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(un.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(jt.EAN_13)>-1&&s.push(new m2),i.indexOf(jt.UPC_A)>-1&&s.push(new s4),i.indexOf(jt.EAN_8)>-1&&s.push(new i4),i.indexOf(jt.UPC_E)>-1&&s.push(new a4)),s.length===0&&(s.push(new m2),s.push(new s4),s.push(new i4),s.push(new a4)),r.readers=s,r}return t.prototype.decodeRow=function(e,r,i){var s,a;try{for(var o=o4(this.readers),l=o.next();!l.done;l=o.next()){var h=l.value;try{var f=h.decodeRow(e,r,i),p=f.getBarcodeFormat()===jt.EAN_13&&f.getText().charAt(0)==="0",m=i==null?null:i.get(un.POSSIBLE_FORMATS),v=m==null||m.includes(jt.UPC_A);if(p&&v){var x=f.getRawBytes(),E=new jr(f.getText().substring(1),x,x?x.length:null,f.getResultPoints(),jt.UPC_A);return E.putAllMetadata(f.getResultMetadata()),E}return f}catch{}}}catch(b){s={error:b}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}throw new ut},t.prototype.reset=function(){var e,r;try{for(var i=o4(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;a.reset()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}(tr),Uot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jot=function(n){Uot(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var s=this.getValidRowData(r);if(!s)throw new ut;var a=this.codaBarDecodeRow(s.row);if(!a)throw new ut;return new jr(a,null,0,[new Pt(s.left,e),new Pt(s.right,e)],jt.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var s=r.lastIndexOf(!0);if(s<=i)return null;r=r.slice(i,s+1);for(var a=[],o=r[0],l=1,h=1;h<r.length;h++)r[h]===o?l++:(o=r[h],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:s}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(l,h){return(l+h)/2},0));e.length>0;){var s=e.splice(0,8).splice(0,7),a=s.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[a])}var o=r.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}(tr),Hot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zot=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Il=function(n){Hot(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(tr.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new ut},t.count=function(e){return Te.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]>s&&(s=r[a],i=a);e[i]++},t.decrement=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]<s&&(s=r[a],i=a);e[i]--},t.isFinderPattern=function(e){var r,i,s=e[0]+e[1],a=s+e[2]+e[3],o=s/a;if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var f=zot(e),p=f.next();!p.done;p=f.next()){var m=p.value;m>h&&(h=m),m<l&&(l=m)}}catch(v){r={error:v}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return h<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(tr),Kv=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),b7=function(){function n(t,e,r,i,s){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Pt(r,s)),this.resultPoints.push(new Pt(i,s))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),Got=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zh=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,s,a=0;try{for(var o=Got(t),l=o.next();!l.done;l=o.next()){var h=l.value;a+=h}}catch(S){i={error:S}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,m=t.length,v=0;v<m-1;v++){var x=void 0;for(x=1,p|=1<<v;x<t[v];x++,p&=~(1<<v)){var E=n.combins(a-x-1,m-v-2);if(r&&p===0&&a-x-(m-v-1)>=m-v-1&&(E-=n.combins(a-x-(m-v),m-v-2)),m-v-1>1){for(var b=0,T=a-x-(m-v-2);T>e;T--)b+=n.combins(a-x-T-1,m-v-3);E-=b*(m-1-v)}else a-x>e&&E--;f+=E}a-=x}return f},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var s=1,a=1,o=t;o>r;o--)s*=o,a<=i&&(s/=a,a++);for(;a<=i;)s/=a,a++;return s},n}(),Wot=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new gr(r),s=0,a=t[0],o=a.getRightChar().getValue(),l=11;l>=0;--l)(o&1<<l)!==0&&i.set(s),s++;for(var l=1;l<t.length;++l){for(var h=t[l],f=h.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(s),s++;if(h.getRightChar()!==null)for(var m=h.getRightChar().getValue(),p=11;p>=0;--p)(m&1<<p)!==0&&i.set(s),s++}return i},n}(),_l=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),oS=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),$ot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ds=function(n){$ot(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(oS),qot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xl=function(n){qot(t,n);function t(e,r,i){var s=n.call(this,e)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=r,s}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(oS),Yot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bh=function(n){Yot(t,n);function t(e,r,i){var s=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new Tt;return s.firstDigit=r,s.secondDigit=i,s}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(oS),u1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kot=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,s,a,o,l,h;if(!t)return null;if(t.length<2)throw new ut;var f=t.substring(0,2);try{for(var p=u1(n.TWO_DIGIT_DATA_LENGTH),m=p.next();!m.done;m=p.next()){var v=m.value;if(v[0]===f)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,v[2],t):n.processFixedAI(2,v[1],t)}}catch(U){e={error:U}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}if(t.length<3)throw new ut;var x=t.substring(0,3);try{for(var E=u1(n.THREE_DIGIT_DATA_LENGTH),b=E.next();!b.done;b=E.next()){var v=b.value;if(v[0]===x)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,v[2],t):n.processFixedAI(3,v[1],t)}}catch(U){i={error:U}}finally{try{b&&!b.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}try{for(var T=u1(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),S=T.next();!S.done;S=T.next()){var v=S.value;if(v[0]===x)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(U){a={error:U}}finally{try{S&&!S.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}if(t.length<4)throw new ut;var D=t.substring(0,4);try{for(var P=u1(n.FOUR_DIGIT_DATA_LENGTH),k=P.next();!k.done;k=P.next()){var v=k.value;if(v[0]===D)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(U){l={error:U}}finally{try{k&&!k.done&&(h=P.return)&&h.call(P)}finally{if(l)throw l.error}}throw new ut},n.processFixedAI=function(t,e,r){if(r.length<t)throw new ut;var i=r.substring(0,t);if(r.length<t+e)throw new ut;var s=r.substring(t,t+e),a=r.substring(t+e),o="("+i+")"+s,l=n.parseFieldsInGeneralPurpose(a);return l==null?o:o+l},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),s;r.length<t+e?s=r.length:s=t+e;var a=r.substring(t,s),o=r.substring(s),l="("+i+")"+a,h=n.parseFieldsInGeneralPurpose(o);return h==null?l:l+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Z1=function(){function n(t){this.buffer=new re,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var s=this.decodeGeneralPurposeField(r,i),a=Kot.parseFieldsInGeneralPurpose(s.getNewString());if(a!=null&&t.append(a),s.isRemaining()?i=""+s.getRemainingValue():i=null,r===s.getNewPosition())break;r=s.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new bh(this.information.getSize(),bh.FNC1,bh.FNC1):new bh(this.information.getSize(),e-1,bh.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,s=(r-8)%11;return new bh(t+7,i,s)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,s=0;s<r;++s)t.get(e+s)&&(i|=1<<r-s-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new xl(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new xl(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new xl(this.current.getPosition(),this.buffer.toString()):e=new xl(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new _l(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new xl(this.current.getPosition(),this.buffer.toString());return new _l(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new _l(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new xl(this.current.getPosition(),this.buffer.toString());return new _l(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new _l(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new xl(this.current.getPosition(),this.buffer.toString());return new _l(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new _l(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new ds(t+5,ds.FNC1);if(e>=5&&e<15)return new ds(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new ds(t+7,""+(r+1));if(r>=90&&r<116)return new ds(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Tt}return new ds(t+8,s)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new ds(t+5,ds.FNC1);if(e>=5&&e<15)return new ds(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new ds(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new u0("Decoding invalid alphanumeric value: "+r)}return new ds(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),A7=function(){function n(t){this.information=t,this.generalDecoder=new Z1(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),Xot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ys=function(n){Xot(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var s=0;s<4;++s){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,s=0;s<13;s++){var a=e.charAt(s+r).charCodeAt(0)-48;i+=(s&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(A7),Qot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zot=function(n){Qot(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new re;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(ys),Jot=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tct=function(n){Jot(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new re;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(A7),ect=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),J1=function(n){ect(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,s);for(var a=this.checkWeight(s),o=1e5,l=0;l<5;++l)a/o===0&&e.append("0"),o/=10;e.append(a)},t}(ys),nct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),T7=function(n){nct(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+J1.GTIN_SIZE+t.WEIGHT_SIZE)throw new ut;var e=new re;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+J1.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(J1),rct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ict=function(n){rct(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(T7),sct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),act=function(n){sct(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(T7),oct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cct=function(n){oct(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+ys.GTIN_SIZE)throw new ut;var e=new re;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ys.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+ys.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(ys),lct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uct=function(n){lct(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+ys.GTIN_SIZE)throw new ut;var e=new re;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ys.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ys.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+ys.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(s.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(ys),hct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qo=function(n){hct(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.dateCode=i,s.firstAIdigits=r,s}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new ut;var e=new re;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var s=i%32;i/=32;var a=i%12+1;i/=12;var o=i;o/10===0&&e.append("0"),e.append(o),a/10===0&&e.append("0"),e.append(a),s/10===0&&e.append("0"),e.append(s)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(J1);function fct(n){try{if(n.get(1))return new Zot(n);if(!n.get(2))return new tct(n);var t=Z1.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new ict(n);case 5:return new act(n)}var e=Z1.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new cct(n);case 13:return new uct(n)}var r=Z1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new qo(n,"310","11");case 57:return new qo(n,"320","11");case 58:return new qo(n,"310","13");case 59:return new qo(n,"320","13");case 60:return new qo(n,"310","15");case 61:return new qo(n,"320","15");case 62:return new qo(n,"310","17");case 63:return new qo(n,"320","17")}}catch(i){throw console.log(i),new u0("unknown decoder: "+n)}}var c4=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),dct=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,s){e.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),pct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yo=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gct=function(n){pct(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(o){if(o instanceof ut){if(!this.pairs.length)throw new ut;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(e,!1),s){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new ut},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,s,a=r;a<this.rows.length;a++){var o=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,Yo(e)),h=l.next();!h.done;h=l.next()){var f=h.value;this.pairs.push(f.getPairs())}}catch(m){i={error:m}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(e);p.push(o);try{return this.checkRows(p,a+1)}catch(m){console.log(m)}}}throw new ut},t.isValidSequence=function(e){var r,i;try{for(var s=Yo(t.FINDER_PATTERN_SEQUENCES),a=s.next();!a.done;a=s.next()){var o=a.value;if(!(e.length>o.length)){for(var l=!0,h=0;h<e.length;h++)if(e[h].getFinderPattern().getValue()!==o[h]){l=!1;break}if(l)return!0}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,s=!1,a=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}s=o.isEquivalent(this.pairs),i++}a||s||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new dct(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,s,a,o,l,h;try{for(var f=Yo(r),p=f.next();!p.done;p=f.next()){var m=p.value;if(m.getPairs().length!==e.length){var v=!0;try{for(var x=(a=void 0,Yo(m.getPairs())),E=x.next();!E.done;E=x.next()){var b=E.value,T=!1;try{for(var S=(l=void 0,Yo(e)),D=S.next();!D.done;D=S.next()){var P=D.value;if(c4.equals(b,P)){T=!0;break}}}catch(k){l={error:k}}finally{try{D&&!D.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}T||(v=!1)}}catch(k){a={error:k}}finally{try{E&&!E.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}}}catch(k){i={error:k}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,s,a,o,l,h;try{for(var f=Yo(r),p=f.next();!p.done;p=f.next()){var m=p.value,v=!0;try{for(var x=(a=void 0,Yo(e)),E=x.next();!E.done;E=x.next()){var b=E.value,T=!1;try{for(var S=(l=void 0,Yo(m.getPairs())),D=S.next();!D.done;D=S.next()){var P=D.value;if(b.equals(P)){T=!0;break}}}catch(k){l={error:k}}finally{try{D&&!D.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}if(!T){v=!1;break}}}catch(k){a={error:k}}finally{try{E&&!E.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}if(v)return!0}}catch(k){i={error:k}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=Wot.buildBitArray(e),i=fct(r),s=i.parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],o[0],o[1]];return new jr(s,null,null,l,jt.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var s=i.getChecksumPortion(),a=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);s+=l.getLeftChar().getChecksumPortion(),a++;var h=l.getRightChar();h!=null&&(s+=h.getChecksumPortion(),a++)}s%=211;var f=211*(a-4)+s;return f===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var s=r.length%2===0;this.startFromEven&&(s=!s);var a,o=!0,l=-1;do this.findNextPair(e,r,l),a=this.parseFoundFinderPattern(e,i,s),a===null?l=t.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);var h=this.decodeDataCharacter(e,a,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ut;var f;try{f=this.decodeDataCharacter(e,a,s,!1)}catch(p){f=null,console.log(p)}return new c4(h,f,a,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var a=e.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var l=r[r.length-1];o=l.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var f=!1;o<a&&(f=!e.get(o),!!f);)o++;for(var p=0,m=o,v=o;v<a;v++)if(e.get(v)!==f)s[p]++;else{if(p===3){if(h&&t.reverseCounters(s),t.isFinderPattern(s)){this.startEnd[0]=m,this.startEnd[1]=v;return}h&&t.reverseCounters(s),m+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,p--}else p++;s[p]=1,f=!f}throw new ut},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var s=e[i];e[i]=e[r-i-1],e[r-i-1]=s}},t.prototype.parseFoundFinderPattern=function(e,r,i){var s,a,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!e.get(l);)l--;l++,s=this.startEnd[0]-l,a=l,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),s=o-this.startEnd[1];var h=this.getDecodeFinderCounters();Je.arraycopy(h,0,h,1,h.length-1),h[0]=s;var f;try{f=this.parseFinderValue(h,t.FINDER_PATTERNS)}catch{return null}return new b7(f,[a,o],a,o,r)},t.prototype.decodeDataCharacter=function(e,r,i,s){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(s)t.recordPatternInReverse(e,r.getStartEnd()[0],a);else{t.recordPattern(e,r.getStartEnd()[1],a);for(var l=0,h=a.length-1;l<h;l++,h--){var f=a[l];a[l]=a[h],a[h]=f}}var p=17,m=Te.sum(new Int32Array(a))/p,v=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-v)/v>.3)throw new ut;for(var x=this.getOddCounts(),E=this.getEvenCounts(),b=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var S=1*a[l]/m,D=S+.5;if(D<1){if(S<.3)throw new ut;D=1}else if(D>8){if(S>8.7)throw new ut;D=8}var P=l/2;(l&1)===0?(x[P]=D,b[P]=S-D):(E[P]=D,T[P]=S-D)}this.adjustOddEvenCounts(p);for(var k=4*r.getValue()+(i?0:2)+(s?0:1)-1,U=0,M=0,l=x.length-1;l>=0;l--){if(t.isNotA1left(r,i,s)){var I=t.WEIGHTS[k][2*l];M+=x[l]*I}U+=x[l]}for(var N=0,l=E.length-1;l>=0;l--)if(t.isNotA1left(r,i,s)){var I=t.WEIGHTS[k][2*l+1];N+=E[l]*I}var L=M+N;if((U&1)!==0||U>13||U<4)throw new ut;var j=(13-U)/2,z=t.SYMBOL_WIDEST[j],B=9-z,yt=zh.getRSSvalue(x,z,!0),wt=zh.getRSSvalue(E,B,!1),Y=t.EVEN_TOTAL_SUBSET[j],at=t.GSUM[j],vt=yt*Y+wt+at;return new Kv(vt,L)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=Te.sum(new Int32Array(this.getOddCounts())),i=Te.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1;r>13?a=!0:r<4&&(s=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var h=r+i-e,f=(r&1)===1,p=(i&1)===0;if(h===1)if(f){if(p)throw new ut;a=!0}else{if(!p)throw new ut;l=!0}else if(h===-1)if(f){if(p)throw new ut;s=!0}else{if(!p)throw new ut;o=!0}else if(h===0){if(f){if(!p)throw new ut;r<i?(s=!0,l=!0):(a=!0,o=!0)}else if(p)throw new ut}else throw new ut;if(s){if(a)throw new ut;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new ut;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Il),mct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vct=function(n){mct(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.count=0,s.finderPattern=i,s}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Kv),yct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nE=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l4=function(n){yct(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,h),r.reverse();var f=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=nE(this.possibleLeftPairs),m=p.next();!m.done;m=p.next()){var v=m.value;if(v.getCount()>1)try{for(var x=(o=void 0,nE(this.possibleRightPairs)),E=x.next();!E.done;E=x.next()){var b=E.value;if(b.getCount()>1&&t.checkChecksum(v,b))return t.constructResult(v,b)}}catch(T){o={error:T}}finally{try{E&&!E.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}}}catch(T){s={error:T}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}throw new ut},t.addOrTally=function(e,r){var i,s;if(r!=null){var a=!1;try{for(var o=nE(e),l=o.next();!l.done;l=o.next()){var h=l.value;if(h.getValue()===r.getValue()){h.incrementCount(),a=!0;break}}}catch(f){i={error:f}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}a||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),s=new String(i).toString(),a=new re,o=13-s.length;o>0;o--)a.append("0");a.append(s);for(var l=0,o=0;o<13;o++){var h=a.charAt(o).charCodeAt(0)-48;l+=(o&1)===0?3*h:h}l=10-l%10,l===10&&(l=0),a.append(l.toString());var f=e.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new jr(a.toString(),null,0,[f[0],f[1],p[0],p[1]],jt.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},t.prototype.decodePair=function(e,r,i,s){try{var a=this.findFinderPattern(e,r),o=this.parseFoundFinderPattern(e,i,r,a),l=s==null?null:s.get(un.NEED_RESULT_POINT_CALLBACK);if(l!=null){var h=(a[0]+a[1])/2;r&&(h=e.getSize()-1-h),l.foundPossibleResultPoint(new Pt(h,i))}var f=this.decodeDataCharacter(e,o,!0),p=this.decodeDataCharacter(e,o,!1);return new vct(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(i)tr.recordPatternInReverse(e,r.getStartEnd()[0],s);else{tr.recordPattern(e,r.getStartEnd()[1]+1,s);for(var o=0,l=s.length-1;o<l;o++,l--){var h=s[o];s[o]=s[l],s[l]=h}}for(var f=i?16:15,p=Te.sum(new Int32Array(s))/f,m=this.getOddCounts(),v=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),o=0;o<s.length;o++){var b=s[o]/p,T=Math.floor(b+.5);T<1?T=1:T>8&&(T=8);var S=Math.floor(o/2);(o&1)===0?(m[S]=T,x[S]=b-T):(v[S]=T,E[S]=b-T)}this.adjustOddEvenCounts(i,f);for(var D=0,P=0,o=m.length-1;o>=0;o--)P*=9,P+=m[o],D+=m[o];for(var k=0,U=0,o=v.length-1;o>=0;o--)k*=9,k+=v[o],U+=v[o];var M=P+3*k;if(i){if((D&1)!==0||D>12||D<4)throw new ut;var I=(12-D)/2,N=t.OUTSIDE_ODD_WIDEST[I],L=9-N,j=zh.getRSSvalue(m,N,!1),z=zh.getRSSvalue(v,L,!0),B=t.OUTSIDE_EVEN_TOTAL_SUBSET[I],yt=t.OUTSIDE_GSUM[I];return new Kv(j*B+z+yt,M)}else{if((U&1)!==0||U>10||U<4)throw new ut;var I=(10-U)/2,N=t.INSIDE_ODD_WIDEST[I],L=9-N,j=zh.getRSSvalue(m,N,!0),z=zh.getRSSvalue(v,L,!1),wt=t.INSIDE_ODD_TOTAL_SUBSET[I],yt=t.INSIDE_GSUM[I];return new Kv(z*wt+j+yt,M)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),a=!1,o=0;o<s&&(a=!e.get(o),r!==a);)o++;for(var l=0,h=o,f=o;f<s;f++)if(e.get(f)!==a)i[l]++;else{if(l===3){if(Il.isFinderPattern(i))return[h,f];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new ut},t.prototype.parseFoundFinderPattern=function(e,r,i,s){for(var a=e.get(s[0]),o=s[0]-1;o>=0&&a!==e.get(o);)o--;o++;var l=s[0]-o,h=this.getDecodeFinderCounters(),f=new Int32Array(h.length);Je.arraycopy(h,0,f,1,h.length-1),f[0]=l;var p=this.parseFinderValue(f,t.FINDER_PATTERNS),m=o,v=s[1];return i&&(m=e.getSize()-1-m,v=e.getSize()-1-v),new b7(p,[o,s[1]],m,v,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=Te.sum(new Int32Array(this.getOddCounts())),s=Te.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,l=!1,h=!1;e?(i>12?o=!0:i<4&&(a=!0),s>12?h=!0:s<4&&(l=!0)):(i>11?o=!0:i<5&&(a=!0),s>10?h=!0:s<4&&(l=!0));var f=i+s-r,p=(i&1)===(e?1:0),m=(s&1)===1;if(f===1)if(p){if(m)throw new ut;o=!0}else{if(!m)throw new ut;h=!0}else if(f===-1)if(p){if(m)throw new ut;a=!0}else{if(!m)throw new ut;l=!0}else if(f===0){if(p){if(!m)throw new ut;i<s?(a=!0,h=!0):(o=!0,l=!0)}else if(m)throw new ut}else throw new ut;if(a){if(o)throw new ut;Il.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Il.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(h)throw new ut;Il.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Il.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Il),_ct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kp=function(n){_ct(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(un.POSSIBLE_FORMATS):null,s=e&&e.get(un.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=e&&e.get(un.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(jt.EAN_13)||i.includes(jt.UPC_A)||i.includes(jt.EAN_8)||i.includes(jt.UPC_E))&&r.readers.push(new eE(e)),i.includes(jt.CODE_39)&&r.readers.push(new JM(s,a)),i.includes(jt.CODE_93)&&r.readers.push(new t4),i.includes(jt.CODE_128)&&r.readers.push(new ZM),i.includes(jt.ITF)&&r.readers.push(new e4),i.includes(jt.CODABAR)&&r.readers.push(new jot),i.includes(jt.RSS_14)&&r.readers.push(new l4),i.includes(jt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new gct))),r.readers.length===0&&(r.readers.push(new eE(e)),r.readers.push(new JM),r.readers.push(new t4),r.readers.push(new eE(e)),r.readers.push(new ZM),r.readers.push(new e4),r.readers.push(new l4)),r}return t.prototype.decodeRow=function(e,r,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(e,r,i)}catch{}throw new ut},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(tr),xct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){xct(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new kp(r),e,r)||this}return t})(zf);var u4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Me=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Ie=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),wct=function(){function n(t,e,r,i,s,a){var o,l;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=a;var h=0,f=a.getECCodewords(),p=a.getECBlocks();try{for(var m=u4(p),v=m.next();!v.done;v=m.next()){var x=v.value;h+=x.getCount()*(x.getDataCodewords()+f)}}catch(E){o={error:E}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new Tt;try{for(var s=u4(n.VERSIONS),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.symbolSizeRows===t&&o.symbolSizeColumns===e)return o}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}throw new Tt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Me(5,new Ie(1,3))),new n(2,12,12,10,10,new Me(7,new Ie(1,5))),new n(3,14,14,12,12,new Me(10,new Ie(1,8))),new n(4,16,16,14,14,new Me(12,new Ie(1,12))),new n(5,18,18,16,16,new Me(14,new Ie(1,18))),new n(6,20,20,18,18,new Me(18,new Ie(1,22))),new n(7,22,22,20,20,new Me(20,new Ie(1,30))),new n(8,24,24,22,22,new Me(24,new Ie(1,36))),new n(9,26,26,24,24,new Me(28,new Ie(1,44))),new n(10,32,32,14,14,new Me(36,new Ie(1,62))),new n(11,36,36,16,16,new Me(42,new Ie(1,86))),new n(12,40,40,18,18,new Me(48,new Ie(1,114))),new n(13,44,44,20,20,new Me(56,new Ie(1,144))),new n(14,48,48,22,22,new Me(68,new Ie(1,174))),new n(15,52,52,24,24,new Me(42,new Ie(2,102))),new n(16,64,64,14,14,new Me(56,new Ie(2,140))),new n(17,72,72,16,16,new Me(36,new Ie(4,92))),new n(18,80,80,18,18,new Me(48,new Ie(4,114))),new n(19,88,88,20,20,new Me(56,new Ie(4,144))),new n(20,96,96,22,22,new Me(68,new Ie(4,174))),new n(21,104,104,24,24,new Me(56,new Ie(6,136))),new n(22,120,120,18,18,new Me(68,new Ie(6,175))),new n(23,132,132,20,20,new Me(62,new Ie(8,163))),new n(24,144,144,22,22,new Me(62,new Ie(8,156),new Ie(2,155))),new n(25,8,18,6,16,new Me(7,new Ie(1,5))),new n(26,8,32,6,14,new Me(11,new Ie(1,10))),new n(27,12,26,10,24,new Me(14,new Ie(1,16))),new n(28,12,36,10,16,new Me(18,new Ie(1,22))),new n(29,16,36,14,16,new Me(24,new Ie(1,32))),new n(30,16,48,14,22,new Me(28,new Ie(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),Ect=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new Tt;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new ma(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return wct.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,s=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),o=!1,l=!1,h=!1,f=!1;do if(r===s&&i===0&&!o)t[e++]=this.readCorner1(s,a)&255,r-=2,i+=2,o=!0;else if(r===s-2&&i===0&&(a&3)!==0&&!l)t[e++]=this.readCorner2(s,a)&255,r-=2,i+=2,l=!0;else if(r===s+4&&i===2&&(a&7)===0&&!h)t[e++]=this.readCorner3(s,a)&255,r-=2,i+=2,h=!0;else if(r===s-2&&i===0&&(a&7)===4&&!f)t[e++]=this.readCorner4(s,a)&255,r-=2,i+=2,f=!0;else{do r<s&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r-=2,i+=2;while(r>=0&&i<a);r+=1,i+=3;do r>=0&&i<a&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r+=2,i-=2;while(r<s&&i>=0);r+=3,i+=1}while(r<s||i<a);if(e!==this.version.getTotalCodewords())throw new Tt;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var s=0;return this.readModule(t-2,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-2,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e,r,i)&&(s|=1),s<<=1,this.readModule(t,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t,e,r,i)&&(s|=1),s},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new zt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),a=e/i|0,o=r/s|0,l=a*i,h=o*s,f=new ma(h,l),p=0;p<a;++p)for(var m=p*i,v=0;v<o;++v)for(var x=v*s,E=0;E<i;++E)for(var b=p*(i+2)+1+E,T=m+E,S=0;S<s;++S){var D=v*(s+2)+1+S;if(t.get(D,b)){var P=x+S;f.set(P,T)}}return f},n}(),h4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bct=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,s,a,o=e.getECBlocks(),l=0,h=o.getECBlocks();try{for(var f=h4(h),p=f.next();!p.done;p=f.next()){var m=p.value;l+=m.getCount()}}catch(yt){r={error:yt}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var v=new Array(l),x=0;try{for(var E=h4(h),b=E.next();!b.done;b=E.next())for(var m=b.value,T=0;T<m.getCount();T++){var S=m.getDataCodewords(),D=o.getECCodewords()+S;v[x++]=new n(S,new Uint8Array(D))}}catch(yt){s={error:yt}}finally{try{b&&!b.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}for(var P=v[0].codewords.length,k=P-o.getECCodewords(),U=k-1,M=0,T=0;T<U;T++)for(var I=0;I<x;I++)v[I].codewords[T]=t[M++];for(var N=e.getVersionNumber()===24,L=N?8:x,I=0;I<L;I++)v[I].codewords[k-1]=t[M++];for(var j=v[0].codewords.length,T=k;T<j;T++)for(var I=0;I<x;I++){var z=N?(I+8)%x:I,B=N&&z>7?T-1:T;v[z].codewords[B]=t[M++]}if(M!==t.length)throw new zt;return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),S7=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new zt(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,s=this.bytes;if(r>0){var a=8-r,o=t<a?t:a,l=a-o,h=255>>8-o<<l;e=(s[i]&h)>>l,t-=o,r+=o,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|s[i]&255,i++,t-=8;if(t>0){var l=8-t,h=255>>l<<l;e=e<<t|(s[i]&h)>>l,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Yn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Yn||(Yn={}));var Act=function(){function n(){}return n.decode=function(t){var e=new S7(t),r=new re,i=new re,s=new Array,a=Yn.ASCII_ENCODE;do if(a===Yn.ASCII_ENCODE)a=this.decodeAsciiSegment(e,r,i);else{switch(a){case Yn.C40_ENCODE:this.decodeC40Segment(e,r);break;case Yn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case Yn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case Yn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case Yn.BASE256_ENCODE:this.decodeBase256Segment(e,r,s);break;default:throw new Tt}a=Yn.ASCII_ENCODE}while(a!==Yn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new zy(t,r.toString(),s.length===0?null:s,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var s=t.readBits(8);if(s===0)throw new Tt;if(s<=128)return i&&(s+=128),e.append(String.fromCharCode(s-1)),Yn.ASCII_ENCODE;if(s===129)return Yn.PAD_ENCODE;if(s<=229){var a=s-130;a<10&&e.append("0"),e.append(""+a)}else switch(s){case 230:return Yn.C40_ENCODE;case 231:return Yn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return Yn.ANSIX12_ENCODE;case 239:return Yn.TEXT_ENCODE;case 240:return Yn.EDIFACT_ENCODE;case 241:break;default:if(s!==254||t.available()!==0)throw new Tt;break}}while(t.available()>0);return Yn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new Tt;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new Tt}s=0;break;case 3:r?(e.append(String.fromCharCode(l+224)),r=!1):e.append(String.fromCharCode(l+96)),s=0;break;default:throw new Tt}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new Tt;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new Tt}s=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h),s=0}else throw new Tt;break;default:throw new Tt}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var s=0;s<3;s++){var a=r[s];switch(a){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(a<14)e.append(String.fromCharCode(a+44));else if(a<40)e.append(String.fromCharCode(a+51));else throw new Tt;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,s=Math.floor(i/1600);r[0]=s,i-=s*1600,s=Math.floor(i/40),r[1]=s,r[2]=i-s*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var s=8-t.getBitOffset();s!==8&&t.readBits(s);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),s=this.unrandomize255State(t.readBits(8),i++),a;if(s===0?a=t.available()/8|0:s<250?a=s:a=250*(s-249)+this.unrandomize255State(t.readBits(8),i++),a<0)throw new Tt;for(var o=new Uint8Array(a),l=0;l<a;l++){if(t.available()<8)throw new Tt;o[l]=this.unrandomize255State(t.readBits(8),i++)}r.push(o);try{e.append(ns.decode(o,_e.ISO88591))}catch(h){throw new u0("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),Tct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sct=function(){function n(){this.rsDecoder=new Gy(ci.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new Ect(t),s=i.getVersion(),a=i.readCodewords(),o=bct.getDataBlocks(a,s),l=0;try{for(var h=Tct(o),f=h.next();!f.done;f=h.next()){var p=f.value;l+=p.getNumDataCodewords()}}catch(D){e={error:D}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var m=new Uint8Array(l),v=o.length,x=0;x<v;x++){var E=o[x],b=E.getCodewords(),T=E.getNumDataCodewords();this.correctErrors(b,T);for(var S=0;S<T;S++)m[S*v+x]=b[S]}return Act.decode(m)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new pr}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Cct=function(){function n(t){this.image=t,this.rectangleDetector=new p2(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new ut;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],s=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(s,a)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var h=n.sampleGrid(this.image,r,i,s,a,o,l);return new sS(h,[r,i,s,a])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),s=(e.getY()-t.getY())/(r+1);return new Pt(t.getX()+i,t.getY()+s)},n.moveAway=function(t,e,r){var i=t.getX(),s=t.getY();return i<e?i-=1:i+=1,s<r?s-=1:s+=1,new Pt(i,s)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],s=t[2],a=this.transitionsBetween(e,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,s),h=this.transitionsBetween(s,e),f=a,p=[s,e,r,i];return f>o&&(f=o,p[0]=e,p[1]=r,p[2]=i,p[3]=s),f>l&&(f=l,p[0]=r,p[1]=i,p[2]=s,p[3]=e),f>h&&(p[0]=i,p[1]=s,p[2]=e,p[3]=r),p},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=n.shiftPoint(r,i,(a+1)*4),l=n.shiftPoint(i,r,(a+1)*4),h=this.transitionsBetween(o,e),f=this.transitionsBetween(l,s);return h<f?(t[0]=e,t[1]=r,t[2]=i,t[3]=s):(t[0]=r,t[1]=i,t[2]=s,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=this.transitionsBetween(r,s),l=n.shiftPoint(e,r,(o+1)*4),h=n.shiftPoint(i,r,(a+1)*4);a=this.transitionsBetween(l,s),o=this.transitionsBetween(h,s);var f=new Pt(s.getX()+(i.getX()-r.getX())/(a+1),s.getY()+(i.getY()-r.getY())/(a+1)),p=new Pt(s.getX()+(e.getX()-r.getX())/(o+1),s.getY()+(e.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var m=this.transitionsBetween(l,f)+this.transitionsBetween(h,f),v=this.transitionsBetween(l,p)+this.transitionsBetween(h,p);return m>v?f:p},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s)+1,o=this.transitionsBetween(i,s)+1,l=n.shiftPoint(e,r,o*4),h=n.shiftPoint(i,r,a*4);a=this.transitionsBetween(l,s)+1,o=this.transitionsBetween(h,s)+1,(a&1)===1&&(a+=1),(o&1)===1&&(o+=1);var f=(e.getX()+r.getX()+i.getX()+s.getX())/4,p=(e.getY()+r.getY()+i.getY()+s.getY())/4;e=n.moveAway(e,f,p),r=n.moveAway(r,f,p),i=n.moveAway(i,f,p),s=n.moveAway(s,f,p);var m,v;return l=n.shiftPoint(e,r,o*4),l=n.shiftPoint(l,s,a*4),m=n.shiftPoint(r,e,o*4),m=n.shiftPoint(m,i,a*4),h=n.shiftPoint(i,s,o*4),h=n.shiftPoint(h,r,a*4),v=n.shiftPoint(s,i,o*4),v=n.shiftPoint(v,e,a*4),[l,m,h,v]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,s,a,o){var l=aS.getInstance();return l.sampleGrid(t,a,o,.5,.5,a-.5,.5,a-.5,o-.5,.5,o-.5,e.getX(),e.getY(),s.getX(),s.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),s=Math.trunc(e.getX()),a=Math.trunc(e.getY()),o=Math.abs(a-i)>Math.abs(s-r);if(o){var l=r;r=i,i=l,l=s,s=a,a=l}for(var h=Math.abs(s-r),f=Math.abs(a-i),p=-h/2,m=i<a?1:-1,v=r<s?1:-1,x=0,E=this.image.get(o?i:r,o?r:i),b=r,T=i;b!==s;b+=v){var S=this.image.get(o?T:b,o?b:T);if(S!==E&&(x++,E=S),p+=f,p>0){if(T===a)break;T+=m,p-=h}}return x},n}(),v2=function(){function n(){this.decoder=new Sct}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(un.PURE_BARCODE)){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(s),i=n.NO_POINTS}else{var a=new Cct(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var o=r.getRawBytes(),l=new jr(r.getText(),o,8*o.length,i,jt.DATA_MATRIX,Je.currentTimeMillis()),h=r.getByteSegments();h!=null&&l.putMetadata(Cr.BYTE_SEGMENTS,h);var f=r.getECLevel();return f!=null&&l.putMetadata(Cr.ERROR_CORRECTION_LEVEL,f),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0],h=(l-o+1)/i,f=(a-s+1)/i;if(h<=0||f<=0)throw new ut;var p=i/2;s+=p,o+=p;for(var m=new ma(h,f),v=0;v<f;v++)for(var x=s+v*i,E=0;E<h;E++)t.get(o+E*i,x)&&m.set(E,v);return m},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],s=t[1];i<r&&e.get(i,s);)i++;if(i===r)throw new ut;var a=i-t[0];if(a===0)throw new ut;return a},n.NO_POINTS=[],n}(),Ict=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Ict(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new v2,e)||this}return t})(zf);var Gh;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Gh||(Gh={}));var Dct=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new ps(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new zt;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Gh.L,"L",1),n.M=new n(Gh.M,"M",0),n.Q=new n(Gh.Q,"Q",3),n.H=new n(Gh.H,"H",2),n}(),Oct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},C7=function(){function n(t){this.errorCorrectionLevel=Dct.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return ce.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,s=Number.MAX_SAFE_INTEGER,a=0;try{for(var o=Oct(n.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var h=l.value,f=h[0];if(f===t||f===e)return new n(h[1]);var p=n.numBitsDiffering(t,f);p<s&&(a=h[1],s=p),t!==e&&(p=n.numBitsDiffering(e,f),p<s&&(a=h[1],s=p))}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s<=3?new n(a):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Rct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nt=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var s=Rct(i),a=s.next();!a.done;a=s.next()){var o=a.value;r+=o.getCount()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),G=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Nct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ql=function(){function n(t,e){for(var r,i,s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=s;var o=0,l=s[0].getECCodewordsPerBlock(),h=s[0].getECBlocks();try{for(var f=Nct(h),p=f.next();!p.done;p=f.next()){var m=p.value;o+=m.getCount()*(m.getDataCodewords()+l)}}catch(v){r={error:v}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new Tt;try{return this.getVersionForNumber((t-17)/4)}catch{throw new Tt}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new zt;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var s=n.VERSION_DECODE_INFO[i];if(s===t)return n.getVersionForNumber(i+7);var a=C7.numBitsDiffering(t,s);a<e&&(r=i+7,e=a)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new ma(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var s=this.alignmentPatternCenters[i]-2,a=0;a<r;a++)i===0&&(a===0||a===r-1)||i===r-1&&a===0||e.setRegion(this.alignmentPatternCenters[a]-2,s,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new nt(7,new G(1,19)),new nt(10,new G(1,16)),new nt(13,new G(1,13)),new nt(17,new G(1,9))),new n(2,Int32Array.from([6,18]),new nt(10,new G(1,34)),new nt(16,new G(1,28)),new nt(22,new G(1,22)),new nt(28,new G(1,16))),new n(3,Int32Array.from([6,22]),new nt(15,new G(1,55)),new nt(26,new G(1,44)),new nt(18,new G(2,17)),new nt(22,new G(2,13))),new n(4,Int32Array.from([6,26]),new nt(20,new G(1,80)),new nt(18,new G(2,32)),new nt(26,new G(2,24)),new nt(16,new G(4,9))),new n(5,Int32Array.from([6,30]),new nt(26,new G(1,108)),new nt(24,new G(2,43)),new nt(18,new G(2,15),new G(2,16)),new nt(22,new G(2,11),new G(2,12))),new n(6,Int32Array.from([6,34]),new nt(18,new G(2,68)),new nt(16,new G(4,27)),new nt(24,new G(4,19)),new nt(28,new G(4,15))),new n(7,Int32Array.from([6,22,38]),new nt(20,new G(2,78)),new nt(18,new G(4,31)),new nt(18,new G(2,14),new G(4,15)),new nt(26,new G(4,13),new G(1,14))),new n(8,Int32Array.from([6,24,42]),new nt(24,new G(2,97)),new nt(22,new G(2,38),new G(2,39)),new nt(22,new G(4,18),new G(2,19)),new nt(26,new G(4,14),new G(2,15))),new n(9,Int32Array.from([6,26,46]),new nt(30,new G(2,116)),new nt(22,new G(3,36),new G(2,37)),new nt(20,new G(4,16),new G(4,17)),new nt(24,new G(4,12),new G(4,13))),new n(10,Int32Array.from([6,28,50]),new nt(18,new G(2,68),new G(2,69)),new nt(26,new G(4,43),new G(1,44)),new nt(24,new G(6,19),new G(2,20)),new nt(28,new G(6,15),new G(2,16))),new n(11,Int32Array.from([6,30,54]),new nt(20,new G(4,81)),new nt(30,new G(1,50),new G(4,51)),new nt(28,new G(4,22),new G(4,23)),new nt(24,new G(3,12),new G(8,13))),new n(12,Int32Array.from([6,32,58]),new nt(24,new G(2,92),new G(2,93)),new nt(22,new G(6,36),new G(2,37)),new nt(26,new G(4,20),new G(6,21)),new nt(28,new G(7,14),new G(4,15))),new n(13,Int32Array.from([6,34,62]),new nt(26,new G(4,107)),new nt(22,new G(8,37),new G(1,38)),new nt(24,new G(8,20),new G(4,21)),new nt(22,new G(12,11),new G(4,12))),new n(14,Int32Array.from([6,26,46,66]),new nt(30,new G(3,115),new G(1,116)),new nt(24,new G(4,40),new G(5,41)),new nt(20,new G(11,16),new G(5,17)),new nt(24,new G(11,12),new G(5,13))),new n(15,Int32Array.from([6,26,48,70]),new nt(22,new G(5,87),new G(1,88)),new nt(24,new G(5,41),new G(5,42)),new nt(30,new G(5,24),new G(7,25)),new nt(24,new G(11,12),new G(7,13))),new n(16,Int32Array.from([6,26,50,74]),new nt(24,new G(5,98),new G(1,99)),new nt(28,new G(7,45),new G(3,46)),new nt(24,new G(15,19),new G(2,20)),new nt(30,new G(3,15),new G(13,16))),new n(17,Int32Array.from([6,30,54,78]),new nt(28,new G(1,107),new G(5,108)),new nt(28,new G(10,46),new G(1,47)),new nt(28,new G(1,22),new G(15,23)),new nt(28,new G(2,14),new G(17,15))),new n(18,Int32Array.from([6,30,56,82]),new nt(30,new G(5,120),new G(1,121)),new nt(26,new G(9,43),new G(4,44)),new nt(28,new G(17,22),new G(1,23)),new nt(28,new G(2,14),new G(19,15))),new n(19,Int32Array.from([6,30,58,86]),new nt(28,new G(3,113),new G(4,114)),new nt(26,new G(3,44),new G(11,45)),new nt(26,new G(17,21),new G(4,22)),new nt(26,new G(9,13),new G(16,14))),new n(20,Int32Array.from([6,34,62,90]),new nt(28,new G(3,107),new G(5,108)),new nt(26,new G(3,41),new G(13,42)),new nt(30,new G(15,24),new G(5,25)),new nt(28,new G(15,15),new G(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new nt(28,new G(4,116),new G(4,117)),new nt(26,new G(17,42)),new nt(28,new G(17,22),new G(6,23)),new nt(30,new G(19,16),new G(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new nt(28,new G(2,111),new G(7,112)),new nt(28,new G(17,46)),new nt(30,new G(7,24),new G(16,25)),new nt(24,new G(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new nt(30,new G(4,121),new G(5,122)),new nt(28,new G(4,47),new G(14,48)),new nt(30,new G(11,24),new G(14,25)),new nt(30,new G(16,15),new G(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new nt(30,new G(6,117),new G(4,118)),new nt(28,new G(6,45),new G(14,46)),new nt(30,new G(11,24),new G(16,25)),new nt(30,new G(30,16),new G(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new nt(26,new G(8,106),new G(4,107)),new nt(28,new G(8,47),new G(13,48)),new nt(30,new G(7,24),new G(22,25)),new nt(30,new G(22,15),new G(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new nt(28,new G(10,114),new G(2,115)),new nt(28,new G(19,46),new G(4,47)),new nt(28,new G(28,22),new G(6,23)),new nt(30,new G(33,16),new G(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new nt(30,new G(8,122),new G(4,123)),new nt(28,new G(22,45),new G(3,46)),new nt(30,new G(8,23),new G(26,24)),new nt(30,new G(12,15),new G(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new nt(30,new G(3,117),new G(10,118)),new nt(28,new G(3,45),new G(23,46)),new nt(30,new G(4,24),new G(31,25)),new nt(30,new G(11,15),new G(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new nt(30,new G(7,116),new G(7,117)),new nt(28,new G(21,45),new G(7,46)),new nt(30,new G(1,23),new G(37,24)),new nt(30,new G(19,15),new G(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new nt(30,new G(5,115),new G(10,116)),new nt(28,new G(19,47),new G(10,48)),new nt(30,new G(15,24),new G(25,25)),new nt(30,new G(23,15),new G(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new nt(30,new G(13,115),new G(3,116)),new nt(28,new G(2,46),new G(29,47)),new nt(30,new G(42,24),new G(1,25)),new nt(30,new G(23,15),new G(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new nt(30,new G(17,115)),new nt(28,new G(10,46),new G(23,47)),new nt(30,new G(10,24),new G(35,25)),new nt(30,new G(19,15),new G(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new nt(30,new G(17,115),new G(1,116)),new nt(28,new G(14,46),new G(21,47)),new nt(30,new G(29,24),new G(19,25)),new nt(30,new G(11,15),new G(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new nt(30,new G(13,115),new G(6,116)),new nt(28,new G(14,46),new G(23,47)),new nt(30,new G(44,24),new G(7,25)),new nt(30,new G(59,16),new G(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new nt(30,new G(12,121),new G(7,122)),new nt(28,new G(12,47),new G(26,48)),new nt(30,new G(39,24),new G(14,25)),new nt(30,new G(22,15),new G(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new nt(30,new G(6,121),new G(14,122)),new nt(28,new G(6,47),new G(34,48)),new nt(30,new G(46,24),new G(10,25)),new nt(30,new G(2,15),new G(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new nt(30,new G(17,122),new G(4,123)),new nt(28,new G(29,46),new G(14,47)),new nt(30,new G(49,24),new G(10,25)),new nt(30,new G(24,15),new G(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new nt(30,new G(4,122),new G(18,123)),new nt(28,new G(13,46),new G(32,47)),new nt(30,new G(48,24),new G(14,25)),new nt(30,new G(42,15),new G(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new nt(30,new G(20,117),new G(4,118)),new nt(28,new G(40,47),new G(7,48)),new nt(30,new G(43,24),new G(22,25)),new nt(30,new G(10,15),new G(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new nt(30,new G(19,118),new G(6,119)),new nt(28,new G(18,47),new G(31,48)),new nt(30,new G(34,24),new G(34,25)),new nt(30,new G(20,15),new G(61,16)))],n}(),ur;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(ur||(ur={}));var f4=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[ur.DATA_MASK_000,new n(ur.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[ur.DATA_MASK_001,new n(ur.DATA_MASK_001,function(t,e){return(t&1)===0})],[ur.DATA_MASK_010,new n(ur.DATA_MASK_010,function(t,e){return e%3===0})],[ur.DATA_MASK_011,new n(ur.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[ur.DATA_MASK_100,new n(ur.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[ur.DATA_MASK_101,new n(ur.DATA_MASK_101,function(t,e){return t*e%6===0})],[ur.DATA_MASK_110,new n(ur.DATA_MASK_110,function(t,e){return t*e%6<3})],[ur.DATA_MASK_111,new n(ur.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),Mct=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new Tt;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),s=0,a=i-7,r=i-1;r>=a;r--)s=this.copyBit(8,r,s);for(var e=i-8;e<i;e++)s=this.copyBit(e,8,s);if(this.parsedFormatInfo=C7.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Tt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return Ql.getVersionForNumber(e);for(var r=0,i=t-11,s=5;s>=0;s--)for(var a=t-9;a>=i;a--)r=this.copyBit(a,s,r);var o=Ql.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(var a=5;a>=0;a--)for(var s=t-9;s>=i;s--)r=this.copyBit(a,s,r);if(o=Ql.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new Tt},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=f4.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var s=e.buildFunctionPattern(),a=!0,o=new Uint8Array(e.getTotalCodewords()),l=0,h=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var m=0;m<i;m++)for(var v=a?i-1-m:m,x=0;x<2;x++)s.get(p-x,v)||(f++,h<<=1,this.bitMatrix.get(p-x,v)&&(h|=1),f===8&&(o[l++]=h,f=0,h=0));a=!a}if(l!==e.getTotalCodewords())throw new Tt;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=f4.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,s=t.getHeight();i<s;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),d4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pct=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,s,a,o;if(t.length!==e.getTotalCodewords())throw new zt;var l=e.getECBlocksForLevel(r),h=0,f=l.getECBlocks();try{for(var p=d4(f),m=p.next();!m.done;m=p.next()){var v=m.value;h+=v.getCount()}}catch(B){i={error:B}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}var x=new Array(h),E=0;try{for(var b=d4(f),T=b.next();!T.done;T=b.next())for(var v=T.value,S=0;S<v.getCount();S++){var D=v.getDataCodewords(),P=l.getECCodewordsPerBlock()+D;x[E++]=new n(D,new Uint8Array(P))}}catch(B){a={error:B}}finally{try{T&&!T.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}for(var k=x[0].codewords.length,U=x.length-1;U>=0;){var M=x[U].codewords.length;if(M===k)break;U--}U++;for(var I=k-l.getECCodewordsPerBlock(),N=0,S=0;S<I;S++)for(var L=0;L<E;L++)x[L].codewords[S]=t[N++];for(var L=U;L<E;L++)x[L].codewords[I]=t[N++];for(var j=x[0].codewords.length,S=I;S<j;S++)for(var L=0;L<E;L++){var z=L<U?S:S+1;x[L].codewords[z]=t[N++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Xi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Xi||(Xi={}));var rn=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new zt;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Xi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Xi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Xi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Xi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Xi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Xi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Xi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Xi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Xi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Xi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),kct=function(){function n(){}return n.decode=function(t,e,r,i){var s=new S7(t),a=new re,o=new Array,l=-1,h=-1;try{var f=null,p=!1,m=void 0;do{if(s.available()<4)m=rn.TERMINATOR;else{var v=s.readBits(4);m=rn.forBits(v)}switch(m){case rn.TERMINATOR:break;case rn.FNC1_FIRST_POSITION:case rn.FNC1_SECOND_POSITION:p=!0;break;case rn.STRUCTURED_APPEND:if(s.available()<16)throw new Tt;l=s.readBits(8),h=s.readBits(8);break;case rn.ECI:var x=n.parseECIValue(s);if(f=Qn.getCharacterSetECIByValue(x),f===null)throw new Tt;break;case rn.HANZI:var E=s.readBits(4),b=s.readBits(m.getCharacterCountBits(e));E===n.GB2312_SUBSET&&n.decodeHanziSegment(s,a,b);break;default:var T=s.readBits(m.getCharacterCountBits(e));switch(m){case rn.NUMERIC:n.decodeNumericSegment(s,a,T);break;case rn.ALPHANUMERIC:n.decodeAlphanumericSegment(s,a,T,p);break;case rn.BYTE:n.decodeByteSegment(s,a,T,f,o,i);break;case rn.KANJI:n.decodeKanjiSegment(s,a,T);break;default:throw new Tt}break}}while(m!==rn.TERMINATOR)}catch{throw new Tt}return new zy(t,a.toString(),o.length===0?null:o,r===null?null:r.toString(),l,h)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new Tt;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/96<<8&4294967295|a%96;o<959?o+=41377:o+=42657,i[s]=o>>8&255,i[s+1]=o&255,s+=2,r--}try{e.append(ns.decode(i,_e.GB2312))}catch(l){throw new Tt(l)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new Tt;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/192<<8&4294967295|a%192;o<7936?o+=33088:o+=49472,i[s]=o>>8,i[s+1]=o,s+=2,r--}try{e.append(ns.decode(i,_e.SHIFT_JIS))}catch(l){throw new Tt(l)}},n.decodeByteSegment=function(t,e,r,i,s,a){if(8*r>t.available())throw new Tt;for(var o=new Uint8Array(r),l=0;l<r;l++)o[l]=t.readBits(8);var h;i===null?h=_e.guessEncoding(o,a):h=i.getName();try{e.append(ns.decode(o,h))}catch(f){throw new Tt(f)}s.push(o)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new Tt;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var s=e.length();r>1;){if(t.available()<11)throw new Tt;var a=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(a/45))),e.append(n.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(t.available()<6)throw new Tt;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var o=s;o<e.length();o++)e.charAt(o)==="%"&&(o<e.length()-1&&e.charAt(o+1)==="%"?e.deleteCharAt(o+1):e.setCharAt(o,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new Tt;var i=t.readBits(10);if(i>=1e3)throw new Tt;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new Tt;var s=t.readBits(7);if(s>=100)throw new Tt;e.append(n.toAlphaNumericChar(Math.floor(s/10))),e.append(n.toAlphaNumericChar(s%10))}else if(r===1){if(t.available()<4)throw new Tt;var a=t.readBits(4);if(a>=10)throw new Tt;e.append(n.toAlphaNumericChar(a))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new Tt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),I7=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),p4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lct=function(){function n(){this.rsDecoder=new Gy(ci.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(ma.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new Mct(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var s=this.decodeBitMatrixParser(r,e);return s.setOther(new I7(!0)),s}catch(a){throw i!==null?i:a}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,s,a,o=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),f=Pct.getDataBlocks(h,o,l),p=0;try{for(var m=p4(f),v=m.next();!v.done;v=m.next()){var x=v.value;p+=x.getNumDataCodewords()}}catch(U){r={error:U}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var E=new Uint8Array(p),b=0;try{for(var T=p4(f),S=T.next();!S.done;S=T.next()){var x=S.value,D=x.getCodewords(),P=x.getNumDataCodewords();this.correctErrors(D,P);for(var k=0;k<P;k++)E[b++]=D[k]}}catch(U){s={error:U}}finally{try{S&&!S.done&&(a=T.return)&&a.call(T)}finally{if(s)throw s.error}}return kct.decode(E,o,l,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new pr}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Vct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bct=function(n){Vct(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.estimatedModuleSize=i,s}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=(this.getX()+r)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+i)/2;return new t(s,a,o)},t}(Pt),Fct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Uct=function(){function n(t,e,r,i,s,a,o){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=s,this.moduleSize=a,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,s=this.startY+e/2,a=new Int32Array(3),o=this.image,l=0;l<e;l++){var h=s+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var f=t;f<i&&!o.get(f,h);)f++;for(var p=0;f<i;){if(o.get(f,h))if(p===1)a[1]++;else if(p===2){if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,f);if(m!==null)return m}a[0]=a[2],a[1]=1,a[2]=0,p=1}else a[++p]++;else p===1&&p++,a[p]++;f++}if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ut},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var s=this.image,a=s.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=t;l>=0&&s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&!s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l)&&o[1]<=r;)o[1]++,l++;if(l===a||o[1]>r)return NaN;for(;l<a&&!s.get(e,l)&&o[2]<=r;)o[2]++,l++;if(o[2]>r)return NaN;var h=o[0]+o[1]+o[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,s,a=t[0]+t[1]+t[2],o=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,o,2*t[1],a);if(!isNaN(l)){var h=(t[0]+t[1]+t[2])/3;try{for(var f=Fct(this.possibleCenters),p=f.next();!p.done;p=f.next()){var m=p.value;if(m.aboutEquals(h,l,o))return m.combineEstimate(l,o,h)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}var v=new Bct(o,l,h);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null},n}(),jct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hct=function(n){jct(t,n);function t(e,r,i,s){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a.count=s,s===void 0&&(a.count=1),a}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=this.count+1,a=(this.count*this.getX()+r)/s,o=(this.count*this.getY()+e)/s,l=(this.count*this.estimatedModuleSize+i)/s;return new t(a,o,l,s)},t}(Pt),zct=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),gp=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gct=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(un.TRY_HARDER)!==void 0,r=t!=null&&t.get(un.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),a=i.getWidth(),o=Math.floor(3*s/(4*n.MAX_MODULES));(o<n.MIN_SKIP||e)&&(o=n.MIN_SKIP);for(var l=!1,h=new Int32Array(5),f=o-1;f<s&&!l;f+=o){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var p=0,m=0;m<a;m++)if(i.get(m,f))(p&1)===1&&p++,h[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(h)){var v=this.handlePossibleCenter(h,f,m,r);if(v===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>h[2]&&(f+=x-h[2]-o,m=a-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,p=3;continue}p=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,p=3;else h[++p]++;else h[p]++;if(n.foundPatternCross(h)){var v=this.handlePossibleCenter(h,f,a,r);v===!0&&(o=h[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var E=this.selectBestPatterns();return Pt.orderBestPatterns(E),new zct(E)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var s=e/7,a=s/2;return Math.abs(s-t[0])<a&&Math.abs(s-t[1])<a&&Math.abs(3*s-t[2])<3*a&&Math.abs(s-t[3])<a&&Math.abs(s-t[4])<a},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var s=this.getCrossCheckStateCount(),a=0,o=this.image;t>=a&&e>=a&&o.get(e-a,t-a);)s[2]++,a++;if(t<a||e<a)return!1;for(;t>=a&&e>=a&&!o.get(e-a,t-a)&&s[1]<=r;)s[1]++,a++;if(t<a||e<a||s[1]>r)return!1;for(;t>=a&&e>=a&&o.get(e-a,t-a)&&s[0]<=r;)s[0]++,a++;if(s[0]>r)return!1;var l=o.getHeight(),h=o.getWidth();for(a=1;t+a<l&&e+a<h&&o.get(e+a,t+a);)s[2]++,a++;if(t+a>=l||e+a>=h)return!1;for(;t+a<l&&e+a<h&&!o.get(e+a,t+a)&&s[3]<r;)s[3]++,a++;if(t+a>=l||e+a>=h||s[3]>=r)return!1;for(;t+a<l&&e+a<h&&o.get(e+a,t+a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return!1;var f=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(f-i)<2*i&&n.foundPatternCross(s)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var s=this.image,a=s.getHeight(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(e,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(e,l)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(e,l)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var s=this.image,a=s.getWidth(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(l,e);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(l,e)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(l,e)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(l,e);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(l,e)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(l,e)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var s=t[0]+t[1]+t[2]+t[3]+t[4],a=n.centerFromEnd(t,r),o=this.crossCheckVertical(e,Math.floor(a),t[2],s);if(!isNaN(o)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(o),t[2],s),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(a),t[2],s)))){for(var l=s/7,h=!1,f=this.possibleCenters,p=0,m=f.length;p<m;p++){var v=f[p];if(v.aboutEquals(l,o,a)){f[p]=v.combineEstimate(o,a,l),h=!0;break}}if(!h){var x=new Hct(a,o,l);f.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var s=gp(this.possibleCenters),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,s=0,a=0,o=this.possibleCenters.length;try{for(var l=gp(this.possibleCenters),h=l.next();!h.done;h=l.next()){var f=h.value;f.getCount()>=n.CENTER_QUORUM&&(s++,a+=f.getEstimatedModuleSize())}}catch(E){t={error:E}}finally{try{h&&!h.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}if(s<3)return!1;var p=a/o,m=0;try{for(var v=gp(this.possibleCenters),x=v.next();!x.done;x=v.next()){var f=x.value;m+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(E){r={error:E}}finally{try{x&&!x.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}return m<=.05*a},n.prototype.selectBestPatterns=function(){var t,e,r,i,s=this.possibleCenters.length;if(s<3)throw new ut;var a=this.possibleCenters,o;if(s>3){var l=0,h=0;try{for(var f=gp(this.possibleCenters),p=f.next();!p.done;p=f.next()){var m=p.value,v=m.getEstimatedModuleSize();l+=v,h+=v*v}}catch(k){t={error:k}}finally{try{p&&!p.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}o=l/s;var x=Math.sqrt(h/s-o*o);a.sort(function(k,U){var M=Math.abs(U.getEstimatedModuleSize()-o),I=Math.abs(k.getEstimatedModuleSize()-o);return M<I?-1:M>I?1:0});for(var E=Math.max(.2*o,x),b=0;b<a.length&&a.length>3;b++){var T=a[b];Math.abs(T.getEstimatedModuleSize()-o)>E&&(a.splice(b,1),b--)}}if(a.length>3){var l=0;try{for(var S=gp(a),D=S.next();!D.done;D=S.next()){var P=D.value;l+=P.getEstimatedModuleSize()}}catch(U){r={error:U}}finally{try{D&&!D.done&&(i=S.return)&&i.call(S)}finally{if(r)throw r.error}}o=l/a.length,a.sort(function(U,M){if(M.getCount()===U.getCount()){var I=Math.abs(M.getEstimatedModuleSize()-o),N=Math.abs(U.getEstimatedModuleSize()-o);return I<N?1:I>N?-1:0}else return M.getCount()-U.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Wct=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(un.NEED_RESULT_POINT_CALLBACK);var e=new Gct(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),s=this.calculateModuleSize(e,r,i);if(s<1)throw new ut("No pattern found in proccess finder.");var a=n.computeDimension(e,r,i,s),o=Ql.getProvisionalVersionForDimension(a),l=o.getDimensionForVersion()-7,h=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-e.getX()+i.getX(),p=r.getY()-e.getY()+i.getY(),m=1-3/l,v=Math.floor(e.getX()+m*(f-e.getX())),x=Math.floor(e.getY()+m*(p-e.getY())),E=4;E<=16;E<<=1)try{h=this.findAlignmentInRegion(s,v,x,E);break}catch(D){if(!(D instanceof ut))throw D}var b=n.createTransform(e,r,i,h,a),T=n.sampleGrid(this.image,b,a),S;return h===null?S=[i,e,r]:S=[i,e,r,h],new sS(T,S)},n.createTransform=function(t,e,r,i,s){var a=s-3.5,o,l,h,f;return i!==null?(o=i.getX(),l=i.getY(),h=a-3,f=h):(o=e.getX()-t.getX()+r.getX(),l=e.getY()-t.getY()+r.getY(),h=a,f=a),E7.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,h,f,3.5,a,t.getX(),t.getY(),e.getX(),e.getY(),o,l,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=aS.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var s=Te.round(Pt.distance(t,e)/i),a=Te.round(Pt.distance(t,r)/i),o=Math.floor((s+a)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new ut("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var s=this.sizeOfBlackWhiteBlackRun(t,e,r,i),a=1,o=t-(r-t);o<0?(a=t/(t-o),o=0):o>=this.image.getWidth()&&(a=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);var l=Math.floor(e-(i-e)*a);return a=1,l<0?(a=e/(e-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-e)/(l-e),l=this.image.getHeight()-1),o=Math.floor(t+(o-t)*a),s+=this.sizeOfBlackWhiteBlackRun(t,e,o,l),s-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var s=Math.abs(i-e)>Math.abs(r-t);if(s){var a=t;t=e,e=a,a=r,r=i,i=a}for(var o=Math.abs(r-t),l=Math.abs(i-e),h=-o/2,f=t<r?1:-1,p=e<i?1:-1,m=0,v=r+f,x=t,E=e;x!==v;x+=f){var b=s?E:x,T=s?x:E;if(m===1===this.image.get(b,T)){if(m===2)return Te.distance(x,E,t,e);m++}if(h+=l,h>0){if(E===i)break;E+=p,h-=o}}return m===2?Te.distance(r+f,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var s=Math.floor(i*t),a=Math.max(0,e-s),o=Math.min(this.image.getWidth()-1,e+s);if(o-a<t*3)throw new ut("Alignment top exceeds estimated module size.");var l=Math.max(0,r-s),h=Math.min(this.image.getHeight()-1,r+s);if(h-l<t*3)throw new ut("Alignment bottom exceeds estimated module size.");var f=new Uct(this.image,a,l,o-a,h-l,t,this.resultPointCallback);return f.find()},n}(),y2=function(){function n(){this.decoder=new Lct}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(un.PURE_BARCODE)!==void 0){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,e),i=n.NO_POINTS}else{var a=new Wct(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(a.getBits(),e),i=a.getPoints()}r.getOther()instanceof I7&&r.getOther().applyMirroredCorrection(i);var o=new jr(r.getText(),r.getRawBytes(),void 0,i,jt.QR_CODE,void 0),l=r.getByteSegments();l!==null&&o.putMetadata(Cr.BYTE_SEGMENTS,l);var h=r.getECLevel();return h!==null&&o.putMetadata(Cr.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(o.putMetadata(Cr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(Cr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0];if(o>=l||s>=a)throw new ut;if(a-s!==l-o&&(l=o+(a-s),l>=t.getWidth()))throw new ut;var h=Math.round((l-o+1)/i),f=Math.round((a-s+1)/i);if(h<=0||f<=0)throw new ut;if(f!==h)throw new ut;var p=Math.floor(i/2);s+=p,o+=p;var m=o+Math.floor((h-1)*i)-l;if(m>0){if(m>p)throw new ut;o-=m}var v=s+Math.floor((f-1)*i)-a;if(v>0){if(v>p)throw new ut;s-=v}for(var x=new ma(h,f),E=0;E<f;E++)for(var b=s+Math.floor(E*i),T=0;T<h;T++)t.get(o+Math.floor(T*i),b)&&x.set(T,E);return x},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),s=t[0],a=t[1],o=!0,l=0;s<i&&a<r;){if(o!==e.get(s,a)){if(++l===5)break;o=!o}s++,a++}if(s===i||a===r)throw new ut;return(s-t[0])/7},n.NO_POINTS=new Array,n}(),$ct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},we=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return Te.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),s=0;try{for(var a=$ct(t),o=a.next();!o.done;o=a.next()){var l=o.value;i[s++]=l}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=Zn.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),qct=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Yct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kct=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),s=n.detect(r,i);return s.length||(i=i.clone(),i.rotate180(),s=n.detect(r,i)),new qct(i,s)},n.detect=function(t,e){for(var r,i,s=new Array,a=0,o=0,l=!1;a<e.getHeight();){var h=n.findVertices(e,a,o);if(h[0]==null&&h[3]==null){if(!l)break;l=!1,o=0;try{for(var f=(r=void 0,Yct(s)),p=f.next();!p.done;p=f.next()){var m=p.value;m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())))}}catch(v){r={error:v}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}a+=n.ROW_STEP;continue}if(l=!0,s.push(h),!t)break;h[2]!=null?(o=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(o=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return s},n.findVertices=function(t,e,r){var i=t.getHeight(),s=t.getWidth(),a=new Array(8);return n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),e=Math.trunc(a[4].getY())),n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),a},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,s,a){for(var o=new Array(4),l=!1,h=new Int32Array(a.length);i<e;i+=n.ROW_STEP){var f=n.findGuardPattern(t,s,i,r,!1,a,h);if(f!=null){for(;i>0;){var p=n.findGuardPattern(t,s,--i,r,!1,a,h);if(p!=null)f=p;else{i++;break}}o[0]=new Pt(f[0],i),o[1]=new Pt(f[1],i),l=!0;break}}var m=i+1;if(l){for(var v=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);m<e;m++){var f=n.findGuardPattern(t,p[0],m,r,!1,a,h);if(f!=null&&Math.abs(p[0]-f[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<n.MAX_PATTERN_DRIFT)p=f,v=0;else{if(v>n.SKIPPED_ROW_COUNT_MAX)break;v++}}m-=v+1,o[2]=new Pt(p[0],m),o[3]=new Pt(p[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&Zn.fill(o,null),o},n.findGuardPattern=function(t,e,r,i,s,a,o){Zn.fillWithin(o,0,o.length,0);for(var l=e,h=0;t.get(l,r)&&l>0&&h++<n.MAX_PIXEL_DRIFT;)l--;for(var f=l,p=0,m=a.length,v=s;f<i;f++){var x=t.get(f,r);if(x!==v)o[p]++;else{if(p===m-1){if(n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([l,f]);l+=o[0]+o[1],Je.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,v=!v}}return p===m-1&&n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([l,f-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return 1/0;var l=s/a;r*=l;for(var h=0,f=0;f<i;f++){var p=t[f],m=e[f]*l,v=p>m?p-m:m-p;if(v>r)return 1/0;h+=v}return h/s},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),Xct=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fl=function(){function n(t,e){if(e.length===0)throw new zt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Je.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var s=Xct(this.coefficients),a=s.next();!a.done;a=s.next()){var o=a.value;i=this.field.add(i,o)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}for(var l=this.coefficients[0],h=this.coefficients.length,f=1;f<h;f++)l=this.field.add(this.field.multiply(t,l),this.coefficients[f]);return l},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new zt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;Je.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=this.field.add(e[o-a],r[o]);return new n(this.field,s)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new zt("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new zt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=0;o<r;o++)for(var l=e[o],h=0;h<s;h++)a[o+h]=this.field.add(a[o+h],this.field.multiply(l,i[h]));return new n(this.field,a)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new zt;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new re,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),Qct=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new zt;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new w7;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),Zct=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jct=function(n){Zct(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var s=1,a=0;a<e;a++)i.expTable[a]=s,s=s*r%e;for(var a=0;a<e-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new Fl(i,new Int32Array([0])),i.one=new Fl(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new zt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new Fl(this,i)},t.PDF417_GF=new t(we.NUMBER_OF_CODEWORDS,3),t}(Qct),tlt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},elt=function(){function n(){this.field=Jct.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,s,a=new Fl(this.field,t),o=new Int32Array(e),l=!1,h=e;h>0;h--){var f=a.evaluateAt(this.field.exp(h));o[e-h]=f,f!==0&&(l=!0)}if(!l)return 0;var p=this.field.getOne();if(r!=null)try{for(var m=tlt(r),v=m.next();!v.done;v=m.next()){var x=v.value,E=this.field.exp(t.length-1-x),b=new Fl(this.field,new Int32Array([this.field.subtract(0,E),1]));p=p.multiply(b)}}catch(I){i={error:I}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}for(var T=new Fl(this.field,o),S=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),T,e),D=S[0],P=S[1],k=this.findErrorLocations(D),U=this.findErrorMagnitudes(P,D,k),h=0;h<k.length;h++){var M=t.length-1-this.field.log(k[h]);if(M<0)throw pr.getChecksumInstance();t[M]=this.field.subtract(t[M],U[h])}return k.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=t,a=e,o=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(r/2);){var h=s,f=o;if(s=a,o=l,s.isZero())throw pr.getChecksumInstance();a=h;for(var p=this.field.getZero(),m=s.getCoefficient(s.getDegree()),v=this.field.inverse(m);a.getDegree()>=s.getDegree()&&!a.isZero();){var x=a.getDegree()-s.getDegree(),E=this.field.multiply(a.getCoefficient(a.getDegree()),v);p=p.add(this.field.buildMonomial(x,E)),a=a.subtract(s.multiplyByMonomial(x,E))}l=p.multiply(o).subtract(f).negative()}var b=l.getCoefficient(0);if(b===0)throw pr.getChecksumInstance();var T=this.field.inverse(b),S=l.multiply(T),D=a.multiply(T);return[S,D]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,s=1;s<this.field.getSize()&&i<e;s++)t.evaluateAt(s)===0&&(r[i]=this.field.inverse(s),i++);if(i!==e)throw pr.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),s=new Int32Array(i),a=1;a<=i;a++)s[i-a]=this.field.multiply(a,e.getCoefficient(a));for(var o=new Fl(this.field,s),l=r.length,h=new Int32Array(l),a=0;a<l;a++){var f=this.field.inverse(r[a]),p=this.field.subtract(0,t.evaluateAt(f)),m=this.field.inverse(o.evaluateAt(f));h[a]=this.field.multiply(p,m)}return h},n}(),_2=function(){function n(t,e,r,i,s){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,s)}return n.prototype.constructor_1=function(t,e,r,i,s){var a=e==null||r==null,o=i==null||s==null;if(a&&o)throw new ut;a?(e=new Pt(0,i.getY()),r=new Pt(0,s.getY())):o&&(i=new Pt(t.getWidth()-1,e.getY()),s=new Pt(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,s=this.bottomLeft,a=this.topRight,o=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,h=Math.trunc(l.getY()-t);h<0&&(h=0);var f=new Pt(l.getX(),h);r?i=f:a=f}if(e>0){var p=r?this.bottomLeft:this.bottomRight,m=Math.trunc(p.getY()+e);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var v=new Pt(p.getX(),m);r?s=v:o=v}return new n(this.image,i,s,a,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),nlt=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),cS=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(a,o,l,h,f,p){if(a==="%%")return"%";if(e[++r]!==void 0){a=h?parseInt(h.substr(1)):void 0;var m=f?parseInt(f.substr(1)):void 0,v;switch(p){case"s":v=e[r];break;case"c":v=e[r][0];break;case"f":v=parseFloat(e[r]).toFixed(a);break;case"p":v=parseFloat(e[r]).toPrecision(a);break;case"e":v=parseFloat(e[r]).toExponential(a);break;case"x":v=parseInt(e[r]).toString(m||16);break;case"d":v=parseFloat(parseInt(e[r],m||10).toPrecision(a)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(m);for(var x=parseInt(l),E=l&&l[0]+""=="0"?"0":" ";v.length<x;)v=o!==void 0?v+E:E+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(s,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),rlt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},D7=function(){function n(t){this.boundingBox=new _2(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new cS,i=0;try{for(var s=rlt(this.codewords),a=s.next();!a.done;a=s.next()){var o=a.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),ilt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},slt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return s},Lp=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,s=function(p,m){var v={getKey:function(){return p},getValue:function(){return m}};v.getValue()>r?(r=v.getValue(),i=[],i.push(v.getKey())):v.getValue()===r&&i.push(v.getKey())};try{for(var a=ilt(this.values.entries()),o=a.next();!o.done;o=a.next()){var l=slt(o.value,2),h=l[0],f=l[1];s(h,f)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return we.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),alt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rE=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},g4=function(n){alt(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=rE(this.getCodewords()),s=i.next();!s.done;s=i.next()){var a=s.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,f=1,p=0,m=o;m<l;m++)if(r[m]!=null){var v=r[m],x=v.getRowNumber()-h;if(x===0)p++;else if(x===1)f=Math.max(f,p),p=1,h=v.getRowNumber();else if(x<0||v.getRowNumber()>=e.getRowCount()||x>m)r[m]=null;else{var E=void 0;f>2?E=(f-2)*x:E=x;for(var b=E>=m,T=1;T<=E&&!b;T++)b=r[m-T]!=null;b?r[m]=null:(h=v.getRowNumber(),p=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var a=rE(this.getCodewords()),o=a.next();!o.done;o=a.next()){var l=o.value;if(l!=null){var h=l.getRowNumber();if(h>=s.length)continue;s[h]++}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return s},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.getCodewords(),h=-1,f=a;f<o;f++)if(l[f]!=null){var p=l[f];p.setRowNumberAsRowIndicatorColumn();var m=p.getRowNumber()-h;m===0||(m===1?h=p.getRowNumber():p.getRowNumber()>=e.getRowCount()?l[f]=null:h=p.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),s=new Lp,a=new Lp,o=new Lp,l=new Lp;try{for(var h=rE(i),f=h.next();!f.done;f=h.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var m=p.getValue()%30,v=p.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:a.setValue(m*3+1);break;case 1:l.setValue(m/3),o.setValue(m%3);break;case 2:s.setValue(m+1);break}}}}catch(E){e={error:E}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}if(s.getValue().length===0||a.getValue().length===0||o.getValue().length===0||l.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<we.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>we.MAX_ROWS_IN_BARCODE)return null;var x=new nlt(s.getValue()[0],a.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var s=e[i];if(e[i]!=null){var a=s.getValue()%30,o=s.getRowNumber();if(o>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:a+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(D7),olt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},clt=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=we.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[r];s!=null&&(s.setRowNumber(t[r].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=this.barcodeColumnCount+1;a>0&&s<this.ADJUST_ROW_NUMBER_SKIP;a--){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=1;a<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;a++){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,s;if(this.detectionResultColumns[t-1]!=null){var a=r[e],o=this.detectionResultColumns[t-1].getCodewords(),l=o;this.detectionResultColumns[t+1]!=null&&(l=this.detectionResultColumns[t+1].getCodewords());var h=new Array(14);h[2]=o[e],h[3]=l[e],e>0&&(h[0]=r[e-1],h[4]=o[e-1],h[5]=l[e-1]),e>1&&(h[8]=r[e-2],h[10]=o[e-2],h[11]=l[e-2]),e<r.length-1&&(h[1]=r[e+1],h[6]=o[e+1],h[7]=l[e+1]),e<r.length-2&&(h[9]=r[e+2],h[12]=o[e+2],h[13]=l[e+2]);try{for(var f=olt(h),p=f.next();!p.done;p=f.next()){var m=p.value;if(n.adjustRowNumber(a,m))return}}catch(v){i={error:v}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new cS,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[r];if(s==null){e.format("    |   ");continue}e.format(" %3d|%3d",s.getRowNumber(),s.getValue())}e.format("%n")}return e.toString()},n}(),llt=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),ult=function(){function n(){}return n.initialize=function(){for(var t=0;t<we.SYMBOL_TABLE.length;t++)for(var e=we.SYMBOL_TABLE[t],r=e&1,i=0;i<we.BARS_IN_MODULE;i++){for(var s=0;(e&1)===r;)s+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(we.BARS_IN_MODULE)),n.RATIOS_TABLE[t][we.BARS_IN_MODULE-i-1]=Math.fround(s/we.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=Te.sum(t),r=new Int32Array(we.BARS_IN_MODULE),i=0,s=0,a=0;a<we.MODULES_IN_CODEWORD;a++){var o=e/(2*we.MODULES_IN_CODEWORD)+a*e/we.MODULES_IN_CODEWORD;s+t[i]<=o&&(s+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return we.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=Te.sum(t),r=new Array(we.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var s=d2.MAX_VALUE,a=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var l=0,h=n.RATIOS_TABLE[o],f=0;f<we.BARS_IN_MODULE;f++){var p=Math.fround(h[f]-r[f]);if(l+=Math.fround(p*p),l>=s)break}l<s&&(s=l,a=we.SYMBOL_TABLE[o])}return a},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(we.SYMBOL_TABLE.length).map(function(t){return new Array(we.BARS_IN_MODULE)}),n}(),hlt=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),m4=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),flt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dlt=function(n){flt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(gi),plt=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new dlt;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new rS;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),glt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mlt=function(n){glt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(gi),vlt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ylt=function(n){vlt(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new zt("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new mlt;i=ce.MAX_VALUE}this.buf=Zn.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new rS;this.ensureCapacity(this.count+i),Je.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return Zn.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(plt),Ye;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ye||(Ye={}));function O7(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var h1;function Zo(n){if(typeof h1>"u"&&(h1=O7()),h1===null)throw new Error("BigInt is not supported!");return h1(n)}function _lt(){var n=[];n[0]=Zo(1);var t=Zo(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var xlt=function(){function n(){}return n.decode=function(t,e){var r=new re(""),i=Qn.ISO8859_1;r.enableDecoding(i);for(var s=1,a=t[s++],o=new hlt;s<t[0];){switch(a){case n.TEXT_COMPACTION_MODE_LATCH:s=n.textCompaction(t,s,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:s=n.byteCompaction(a,t,i,s,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:s=n.numericCompaction(t,s,r);break;case n.ECI_CHARSET:Qn.getCharacterSetECIByValue(t[s++]);break;case n.ECI_GENERAL_PURPOSE:s+=2;break;case n.ECI_USER_DEFINED:s++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=n.decodeMacroBlock(t,s,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new Tt;default:s--,s=n.textCompaction(t,s,r);break}if(s<t.length)a=t[s++];else throw Tt.getFormatInstance()}if(r.length()===0)throw Tt.getFormatInstance();var l=new zy(null,r.toString(),null,e);return l.setOther(o),l},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Tt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<n.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)i[s]=t[e];r.setSegmentIndex(ce.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new re;e=n.textCompaction(t,e,a),r.setFileId(a.toString());var o=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new re;e=n.textCompaction(t,e+1,l),r.setFileName(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new re;e=n.textCompaction(t,e+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new re;e=n.textCompaction(t,e+1,f),r.setAddressee(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new re;e=n.numericCompaction(t,e+1,p),r.setSegmentCount(ce.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new re;e=n.numericCompaction(t,e+1,m),r.setTimestamp(m4.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var v=new re;e=n.numericCompaction(t,e+1,v),r.setChecksum(ce.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new re;e=n.numericCompaction(t,e+1,x),r.setFileSize(m4.parseLong(x.toString()));break;default:throw Tt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw Tt.getFormatInstance()}if(o!==-1){var E=e-o;r.isLastSegment()&&E--,r.setOptionalData(Zn.copyOfRange(t,o,o+E))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),s=new Int32Array((t[0]-e)*2),a=0,o=!1;e<t[0]&&!o;){var l=t[e++];if(l<n.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:i[a++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[e++],s[a]=l,a++;break}}return n.decodeTextCompaction(i,s,a,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var s=Ye.ALPHA,a=Ye.ALPHA,o=0;o<r;){var l=t[o],h="";switch(s){case Ye.ALPHA:if(l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.LL:s=Ye.LOWER;break;case n.ML:s=Ye.MIXED;break;case n.PS:a=s,s=Ye.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ye.ALPHA;break}break;case Ye.LOWER:if(l<26)h=String.fromCharCode(97+l);else switch(l){case 26:h=" ";break;case n.AS:a=s,s=Ye.ALPHA_SHIFT;break;case n.ML:s=Ye.MIXED;break;case n.PS:a=s,s=Ye.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ye.ALPHA;break}break;case Ye.MIXED:if(l<n.PL)h=n.MIXED_CHARS[l];else switch(l){case n.PL:s=Ye.PUNCT;break;case 26:h=" ";break;case n.LL:s=Ye.LOWER;break;case n.AL:s=Ye.ALPHA;break;case n.PS:a=s,s=Ye.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ye.ALPHA;break}break;case Ye.PUNCT:if(l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ye.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ye.ALPHA;break}break;case Ye.ALPHA_SHIFT:if(s=a,l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ye.ALPHA;break}break;case Ye.PUNCT_SHIFT:if(s=a,l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ye.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ye.ALPHA;break}break}h!==""&&i.append(h),o++}},n.byteCompaction=function(t,e,r,i,s){var a=new ylt,o=0,l=0,h=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=e[i++];i<e[0]&&!h;)switch(f[o++]=p,l=900*l+p,p=e[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(Zo(l)>>Zo(8*(5-m))));l=0,o=0}break}i===e[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var v=0;v<o;v++)a.write(f[v]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!h;){var x=e[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(Zo(l)>>Zo(8*(5-m))));l=0,o=0}}break}return s.append(ns.decode(a.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,s=!1,a=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!s;){var o=t[e++];if(e===t[0]&&(s=!0),o<n.TEXT_COMPACTION_MODE_LATCH)a[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,s=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(r.append(n.decodeBase900toBase10(a,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=Zo(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*Zo(t[i]);var s=r.toString();if(s.charAt(0)!=="1")throw new Tt;return s.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=O7()?_lt():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),mp=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wlt=function(){function n(){}return n.decode=function(t,e,r,i,s,a,o){for(var l=new _2(t,e,r,i,s),h=null,f=null,p,m=!0;;m=!1){if(e!=null&&(h=n.getRowIndicatorColumn(t,l,e,!0,a,o)),i!=null&&(f=n.getRowIndicatorColumn(t,l,i,!1,a,o)),p=n.merge(h,f),p==null)throw ut.getNotFoundInstance();var v=p.getBoundingBox();if(m&&v!=null&&(v.getMinY()<l.getMinY()||v.getMaxY()>l.getMaxY()))l=v;else break}p.setBoundingBox(l);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,h),p.setDetectionResultColumn(x,f);for(var E=h!=null,b=1;b<=x;b++){var T=E?b:x-b;if(p.getDetectionResultColumn(T)===void 0){var S=void 0;T===0||T===x?S=new g4(l,T===0):S=new D7(l),p.setDetectionResultColumn(T,S);for(var D=-1,P=D,k=l.getMinY();k<=l.getMaxY();k++){if(D=n.getStartColumn(p,T,k,E),D<0||D>l.getMaxX()){if(P===-1)continue;D=P}var U=n.detectCodeword(t,l.getMinX(),l.getMaxX(),E,D,k,a,o);U!=null&&(S.setCodeword(k,U),P=D,a=Math.min(a,U.getWidth()),o=Math.max(o,U.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=_2.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new clt(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var s=n.getMax(i),a=0;try{for(var o=mp(i),l=o.next();!l.done;l=o.next()){var h=l.value;if(a+=s-h,h>0)break}}catch(v){e={error:v}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var f=t.getCodewords(),p=0;a>0&&f[p]==null;p++)a--;for(var m=0,p=i.length-1;p>=0&&(m+=s-i[p],!(i[p]>0));p--);for(var p=f.length-1;m>0&&f[p]==null;p--)m--;return t.getBoundingBox().addMissingRows(a,m,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var s=mp(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=Math.max(i,o)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,s,a){for(var o=new g4(e,i),l=0;l<2;l++)for(var h=l===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=e.getMaxY()&&p>=e.getMinY();p+=h){var m=n.detectCodeword(t,0,t.getWidth(),i,f,p,s,a);m!=null&&(o.setCodeword(p,m),i?f=m.getStartX():f=m.getEndX())}return o},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),s=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(s<1||s>we.MAX_CODEWORDS_IN_BARCODE)throw ut.getNotFoundInstance();r.setValue(s)}else i[0]!==s&&r.setValue(s)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),s=[],a=new Array,o=0;o<t.getBarcodeRowCount();o++)for(var l=0;l<t.getBarcodeColumnCount();l++){var h=e[o][l+1].getValue(),f=o*t.getBarcodeColumnCount()+l;h.length===0?r.push(f):h.length===1?i[f]=h[0]:(a.push(f),s.push(h))}for(var p=new Array(s.length),m=0;m<p.length;m++)p[m]=s[m];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,we.toIntArray(r),we.toIntArray(a),p)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,s){for(var a=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<a.length;l++)e[i[l]]=s[l][a[l]];try{return n.decodeCodewords(e,t,r)}catch(f){var h=f instanceof pr;if(!h)throw f}if(a.length===0)throw pr.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<s[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw pr.getChecksumInstance()}throw pr.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,s,a=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),o=0;o<a.length;o++)for(var l=0;l<a[o].length;l++)a[o][l]=new Lp;var h=0;try{for(var f=mp(t.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var m=p.value;if(m!=null)try{for(var v=(i=void 0,mp(m.getCodewords())),x=v.next();!x.done;x=v.next()){var E=x.value;if(E!=null){var b=E.getRowNumber();if(b>=0){if(b>=a.length)continue;a[b][h].setValue(E.getValue())}}}}catch(T){i={error:T}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}h++}}catch(T){e={error:T}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}return a},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var s,a,o=i?1:-1,l=null;if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=t.getDetectionResultColumn(e).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var h=0;n.isValidBarcodeColumn(t,e-o);){e-=o;try{for(var f=(s=void 0,mp(t.getDetectionResultColumn(e).getCodewords())),p=f.next();!p.done;p=f.next()){var m=p.value;if(m!=null)return(i?m.getEndX():m.getStartX())+o*h*(m.getEndX()-m.getStartX())}}catch(v){s={error:v}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}h++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,s,a,o,l){s=n.adjustCodewordStartColumn(t,e,r,i,s,a);var h=n.getModuleBitCount(t,e,r,i,s,a);if(h==null)return null;var f,p=Te.sum(h);if(i)f=s+p;else{for(var m=0;m<h.length/2;m++){var v=h[m];h[m]=h[h.length-1-m],h[h.length-1-m]=v}f=s,s=f-p}if(!n.checkCodewordSkew(p,o,l))return null;var x=ult.getDecodedValue(h),E=we.getCodeword(x);return E===-1?null:new llt(s,f,n.getCodewordBucketNumber(x),E)},n.getModuleBitCount=function(t,e,r,i,s,a){for(var o=s,l=new Int32Array(8),h=0,f=i?1:-1,p=i;(i?o<r:o>=e)&&h<l.length;)t.get(o,a)===p?(l[h]++,o+=f):(h++,p=!p);return h===l.length||o===(i?r:e)&&h===l.length-1?l:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,s,a){for(var o=s,l=i?-1:1,h=0;h<2;h++){for(;(i?o>=e:o<r)&&i===t.get(o,a);){if(Math.abs(s-o)>n.CODEWORD_SKEW_SIZE)return s;o+=l}l=-l,i=!i}return o},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw Tt.getFormatInstance();var i=1<<e+1,s=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var a=xlt.decode(t,""+e);return a.setErrorsCorrected(s),a.setErasures(r.length),a},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw pr.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw Tt.getFormatInstance();var r=t[0];if(r>t.length)throw Tt.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw Tt.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new cS,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var s=t[r][i];s.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new elt,n}(),Elt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},x2=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw ut.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof Tt||r instanceof pr?ut.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,s,a=new Array,o=Kct.detectMultiple(t,e,r);try{for(var l=Elt(o.getPoints()),h=l.next();!h.done;h=l.next()){var f=h.value,p=wlt.decode(o.getBits(),f[4],f[5],f[6],f[7],n.getMinCodewordWidth(f),n.getMaxCodewordWidth(f)),m=new jr(p.getText(),p.getRawBytes(),void 0,f,jt.PDF_417);m.putMetadata(Cr.ERROR_CORRECTION_LEVEL,p.getECLevel());var v=p.getOther();v!=null&&m.putMetadata(Cr.PDF417_EXTRA_METADATA,v),a.push(m)}}catch(x){i={error:x}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a.map(function(x){return x})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?ce.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),blt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),v4=function(n){blt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(gi),y4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Alt=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(un.TRY_HARDER)!==void 0,r=t==null?null:t.get(un.POSSIBLE_FORMATS),i=new Array;if(r!=null){var s=r.some(function(a){return a===jt.UPC_A||a===jt.UPC_E||a===jt.EAN_13||a===jt.EAN_8||a===jt.CODABAR||a===jt.CODE_39||a===jt.CODE_93||a===jt.CODE_128||a===jt.ITF||a===jt.RSS_14||a===jt.RSS_EXPANDED});s&&!e&&i.push(new kp(t)),r.includes(jt.QR_CODE)&&i.push(new y2),r.includes(jt.DATA_MATRIX)&&i.push(new v2),r.includes(jt.AZTEC)&&i.push(new g2),r.includes(jt.PDF_417)&&i.push(new x2),s&&e&&i.push(new kp(t))}i.length===0&&(e||i.push(new kp(t)),i.push(new y2),i.push(new v2),i.push(new g2),i.push(new x2),e&&i.push(new kp(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=y4(this.readers),i=r.next();!i.done;i=r.next()){var s=i.value;s.reset()}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new v4("No readers where selected, nothing can be read.");try{for(var i=y4(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;try{return a.decode(t,this.hints)}catch(o){if(o instanceof v4)continue}}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new ut("No MultiFormat Readers were able to detect the code.")},n}(),Tlt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Slt=function(n){Tlt(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,s=new Alt;return s.setHints(e),i=n.call(this,s,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(zf),Clt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Clt(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new x2,e)||this}return t})(zf);var Ilt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Ilt(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new y2,e)||this}return t})(zf);var w2;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(w2||(w2={}));const f1=w2;var R7=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new mc(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,s=e.length;s<=t;s++){var a=r.multiply(new mc(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));e.push(a),r=a}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new zt("No error correction bytes");var r=t.length-e;if(r<=0)throw new zt("No data bytes provided");var i=this.buildGenerator(e),s=new Int32Array(r);Je.arraycopy(t,0,s,0,r);var a=new mc(this.field,s);a=a.multiplyByMonomial(e,1);for(var o=a.divide(i)[1],l=o.getCoefficients(),h=e-l.length,f=0;f<h;f++)t[r+f]=0;Je.arraycopy(l,0,t,r+h,l.length)},n}(),Vp=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s-1;a++)for(var o=r[a],l=0;l<i-1;l++){var h=o[l];h===o[l+1]&&h===r[a+1][l]&&h===r[a+1][l+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=0;o<i;o++){var l=r[a];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(n.isWhiteHorizontal(l,o-4,o)||n.isWhiteHorizontal(l,o+7,o+11))&&e++,a+6<s&&r[a][o]===1&&r[a+1][o]===0&&r[a+2][o]===1&&r[a+3][o]===1&&r[a+4][o]===1&&r[a+5][o]===0&&r[a+6][o]===1&&(n.isWhiteVertical(r,o,a-4,a)||n.isWhiteVertical(r,o,a+7,a+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var s=r;s<i;s++)if(t[s][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=r[a],l=0;l<i;l++)o[l]===1&&e++;var h=t.getHeight()*t.getWidth(),f=Math.floor(Math.abs(e*2-h)*10/h);return f*n.N4},n.getDataMaskBit=function(t,e,r){var i,s;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:s=r*e,i=(s&1)+s%3;break;case 6:s=r*e,i=(s&1)+s%3&1;break;case 7:s=r*e,i=s%3+(r+e&1)&1;break;default:throw new zt("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),s=e?t.getWidth():t.getHeight(),a=t.getArray(),o=0;o<i;o++){for(var l=0,h=-1,f=0;f<s;f++){var p=e?a[o][f]:a[f][o];p===h?l++:(l>=5&&(r+=n.N1+(l-5)),l=1,h=p)}l>=5&&(r+=n.N1+(l-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Dlt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Olt=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=Dlt(this.bytes),s=i.next();!s.done;s=i.next()){var a=s.value;Zn.fill(a,t)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var s=this.bytes[r],a=e.bytes[r],o=0,l=this.width;o<l;++o)if(s[o]!==a[o])return!1;return!0},n.prototype.toString=function(){for(var t=new re,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],s=0,a=this.width;s<a;++s)switch(i[s]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),E2=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new re;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Rlt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nn=function(n){Rlt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(gi),_4=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,s){n.clearMatrix(s),n.embedBasicPatterns(r,s),n.embedTypeInfo(e,i,s),n.maybeEmbedVersionInfo(r,s),n.embedDataBits(t,i,s)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new gr;n.makeTypeInfoBits(t,e,i);for(var s=0,a=i.getSize();s<a;++s){var o=i.get(i.getSize()-1-s),l=n.TYPE_INFO_COORDINATES[s],h=l[0],f=l[1];if(r.setBoolean(h,f,o),s<8){var p=r.getWidth()-s-1,m=8;r.setBoolean(p,m,o)}else{var p=8,m=r.getHeight()-7+(s-8);r.setBoolean(p,m,o)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new gr;n.makeVersionInfoBits(t,r);for(var i=6*3-1,s=0;s<6;++s)for(var a=0;a<3;++a){var o=r.get(i);i--,e.setBoolean(s,e.getHeight()-11+a,o),e.setBoolean(e.getHeight()-11+a,s,o)}}},n.embedDataBits=function(t,e,r){for(var i=0,s=-1,a=r.getWidth()-1,o=r.getHeight()-1;a>0;){for(a===6&&(a-=1);o>=0&&o<r.getHeight();){for(var l=0;l<2;++l){var h=a-l;if(n.isEmpty(r.get(h,o))){var f=void 0;i<t.getSize()?(f=t.get(i),++i):f=!1,e!==255&&Vp.getDataMaskBit(e,h,o)&&(f=!f),r.setBoolean(h,o,f)}}o+=s}s=-s,o+=s,a-=2}if(i!==t.getSize())throw new nn("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-ce.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new zt("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!E2.isValidMaskPattern(e))throw new nn("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var s=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(s,10);var a=new gr;if(a.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new nn("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new nn("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new nn;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new nn;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new nn;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var s=n.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var s=n.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],s=0,a=i.length;s!==a;s++){var o=i[s];if(o>=0)for(var l=0;l!==a;l++){var h=i[l];h>=0&&n.isEmpty(e.get(h,o))&&n.embedPositionAdjustmentPattern(h-2,o-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Nlt=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),x4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return Vp.applyMaskPenaltyRule1(t)+Vp.applyMaskPenaltyRule2(t)+Vp.applyMaskPenaltyRule3(t)+Vp.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,s=r!==null&&r.get(f1.CHARACTER_SET)!==void 0;s&&(i=r.get(f1.CHARACTER_SET).toString());var a=this.chooseMode(t,i),o=new gr;if(a===rn.BYTE&&(s||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Qn.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(a,o);var h=new gr;this.appendBytes(t,a,h,i);var f;if(r!==null&&r.get(f1.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(f1.QR_VERSION).toString(),10);f=Ql.getVersionForNumber(p);var m=this.calculateBitsNeeded(a,o,h,f);if(!this.willFit(m,f,e))throw new nn("Data too big for requested version")}else f=this.recommendVersion(e,a,o,h);var v=new gr;v.appendBitArray(o);var x=a===rn.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(x,f,a,v),v.appendBitArray(h);var E=f.getECBlocksForLevel(e),b=f.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(b,v);var T=this.interleaveWithECBytes(v,f.getTotalCodewords(),b,E.getNumBlocks()),S=new E2;S.setECLevel(e),S.setMode(a),S.setVersion(f);var D=f.getDimensionForVersion(),P=new Olt(D,D),k=this.chooseMaskPattern(T,e,f,P);return S.setMaskPattern(k),_4.buildMatrix(T,e,f,k,P),S.setMatrix(P),S},n.recommendVersion=function(t,e,r,i){var s=this.calculateBitsNeeded(e,r,i,Ql.getVersionForNumber(1)),a=this.chooseVersion(s,t),o=this.calculateBitsNeeded(e,r,i,a);return this.chooseVersion(o,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),Qn.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return rn.KANJI;for(var r=!1,i=!1,s=0,a=t.length;s<a;++s){var o=t.charAt(s);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return rn.BYTE}return i?rn.ALPHANUMERIC:r?rn.NUMERIC:rn.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=ns.encode(t,Qn.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var s=e[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var s=Number.MAX_SAFE_INTEGER,a=-1,o=0;o<E2.NUM_MASK_PATTERNS;o++){_4.buildMatrix(t,e,r,o,i);var l=this.calculateMaskPenalty(i);l<s&&(s=l,a=o)}return a},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=Ql.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new nn("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),s=e.getECBlocksForLevel(r),a=s.getTotalECCodewords(),o=i-a,l=(t+7)/8;return o>=l},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new nn("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var s=e.getSize()&7;if(s>0)for(var i=s;i<8;i++)e.appendBit(!1);for(var a=t-e.getSizeInBytes(),i=0;i<a;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new nn("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,s,a){if(i>=r)throw new nn("Block ID too large");var o=t%r,l=r-o,h=Math.floor(t/r),f=h+1,p=Math.floor(e/r),m=p+1,v=h-p,x=f-m;if(v!==x)throw new nn("EC bytes mismatch");if(r!==l+o)throw new nn("RS blocks mismatch");if(t!==(p+v)*l+(m+x)*o)throw new nn("Total bytes mismatch");i<l?(s[0]=p,a[0]=v):(s[0]=m,a[0]=x)},n.interleaveWithECBytes=function(t,e,r,i){var s,a,o,l;if(t.getSizeInBytes()!==r)throw new nn("Number of bits and data bytes does not match");for(var h=0,f=0,p=0,m=new Array,v=0;v<i;++v){var x=new Int32Array(1),E=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,v,x,E);var b=x[0],T=new Uint8Array(b);t.toBytes(8*h,T,0,b);var S=n.generateECBytes(T,E[0]);m.push(new Nlt(T,S)),f=Math.max(f,b),p=Math.max(p,S.length),h+=x[0]}if(r!==h)throw new nn("Data bytes does not match offset");for(var D=new gr,v=0;v<f;++v)try{for(var P=(s=void 0,x4(m)),k=P.next();!k.done;k=P.next()){var U=k.value,T=U.getDataBytes();v<T.length&&D.appendBits(T[v],8)}}catch(L){s={error:L}}finally{try{k&&!k.done&&(a=P.return)&&a.call(P)}finally{if(s)throw s.error}}for(var v=0;v<p;++v)try{for(var M=(o=void 0,x4(m)),I=M.next();!I.done;I=M.next()){var U=I.value,S=U.getErrorCorrectionBytes();v<S.length&&D.appendBits(S[v],8)}}catch(L){o={error:L}}finally{try{I&&!I.done&&(l=M.return)&&l.call(M)}finally{if(o)throw o.error}}if(e!==D.getSizeInBytes())throw new nn("Interleaving error: "+e+" and "+D.getSizeInBytes()+" differ.");return D},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),s=0;s<r;s++)i[s]=t[s]&255;new R7(ci.QR_CODE_FIELD_256).encode(i,e);for(var a=new Uint8Array(e),s=0;s<e;s++)a[s]=i[r+s];return a},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var s=r.getCharacterCountBits(e);if(t>=1<<s)throw new nn(t+" is bigger than "+((1<<s)-1));i.appendBits(t,s)},n.appendBytes=function(t,e,r,i){switch(e){case rn.NUMERIC:n.appendNumericBytes(t,r);break;case rn.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case rn.BYTE:n.append8BitBytes(t,r,i);break;case rn.KANJI:n.appendKanjiBytes(t,r);break;default:throw new nn("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getDigit(t.charAt(i));if(i+2<r){var a=n.getDigit(t.charAt(i+1)),o=n.getDigit(t.charAt(i+2));e.appendBits(s*100+a*10+o,10),i+=3}else if(i+1<r){var a=n.getDigit(t.charAt(i+1));e.appendBits(s*10+a,7),i+=2}else e.appendBits(s,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getAlphanumericCode(t.charCodeAt(i));if(s===-1)throw new nn;if(i+1<r){var a=n.getAlphanumericCode(t.charCodeAt(i+1));if(a===-1)throw new nn;e.appendBits(s*45+a,11),i+=2}else e.appendBits(s,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=ns.encode(t,r)}catch(l){throw new nn(l)}for(var s=0,a=i.length;s!==a;s++){var o=i[s];e.appendBits(o,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=ns.encode(t,Qn.SJIS)}catch(p){throw new nn(p)}for(var i=r.length,s=0;s<i;s+=2){var a=r[s]&255,o=r[s+1]&255,l=a<<8&4294967295|o,h=-1;if(l>=33088&&l<=40956?h=l-33088:l>=57408&&l<=60351&&(h=l-49472),h===-1)throw new nn("Invalid byte sequence");var f=(h>>8)*192+(h&255);e.appendBits(f,13)}},n.appendECI=function(t,e){e.appendBits(rn.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Qn.UTF8.getName(),n})();var Mlt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Mlt(t,n);function t(e,r,i,s,a,o,l,h){var f=n.call(this,o,l)||this;if(f.yuvData=e,f.dataWidth=r,f.dataHeight=i,f.left=s,f.top=a,s+o>r||a+l>i)throw new zt("Crop rectangle does not fit within image data.");return h&&f.reverseHorizontal(o,l),f}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new zt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return Je.arraycopy(this.yuvData,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Je.arraycopy(this.yuvData,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;Je.arraycopy(this.yuvData,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,s,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),s=this.yuvData,a=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var l=o*e,h=0;h<e;h++){var f=s[a+h*t.THUMBNAIL_SCALE_FACTOR]&255;i[l+h]=4278190080|f*65793}a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,s=0,a=this.top*this.dataWidth+this.left;s<r;s++,a+=this.dataWidth)for(var o=a+e/2,l=a,h=a+e-1;l<o;l++,h--){var f=i[l];i[l]=i[h],i[h]=f}},t.prototype.invert=function(){return new iS(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(Hy);var Plt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Plt(t,n);function t(e,r,i,s,a,o,l){var h=n.call(this,r,i)||this;if(h.dataWidth=s,h.dataHeight=a,h.left=o,h.top=l,e.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),m=0;m<f;m++){var v=e[m],x=v>>16&255,E=v>>7&510,b=v&255;p[m]=(x+E+b)/4&255}h.luminances=p}else h.luminances=e;if(s===void 0&&(h.dataWidth=r),a===void 0&&(h.dataHeight=i),o===void 0&&(h.left=0),l===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new zt("Crop rectangle does not fit within image data.");return h}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new zt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return Je.arraycopy(this.luminances,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Je.arraycopy(this.luminances,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;Je.arraycopy(this.luminances,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new iS(this)},t})(Hy);var klt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Llt=function(n){klt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Qn),Vlt=function(){function n(){}return n.ISO_8859_1=Qn.ISO8859_1,n}(),b2,Blt=301,Flt=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=Blt);return{LOG:n,ALOG:t}};b2=Flt([],[]),b2.LOG;b2.ALOG;var w4;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(w4||(w4={}));var E4=129,N7=230,Ult=231,jlt=235,Hlt=236,zlt=237,Glt=238,Wlt=239,$lt=240,iE=254,qlt=254,b4="[)>05",A4="[)>06",T4="",Fe=0,Ar=1,Yr=2,Kn=3,hr=4,Nr=5,Ylt=function(){function n(){}return n.prototype.getEncodingMode=function(){return Fe},n.prototype.encode=function(t){var e=_s.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=_s.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Nr:t.writeCodeword(Ult),t.signalEncoderChange(Nr);return;case Ar:t.writeCodeword(N7),t.signalEncoderChange(Ar);return;case Kn:t.writeCodeword(Glt),t.signalEncoderChange(Kn);break;case Yr:t.writeCodeword(Wlt),t.signalEncoderChange(Yr);break;case hr:t.writeCodeword($lt),t.signalEncoderChange(hr);break;default:throw new Error("Illegal mode: "+i)}else _s.isExtendedASCII(r)?(t.writeCodeword(jlt),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(_s.isDigit(t)&&_s.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),Klt=function(){function n(){}return n.prototype.getEncodingMode=function(){return Nr},n.prototype.encode=function(t){var e=new re;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=_s.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Fe);break}}var s=e.length()-1,a=1,o=t.getCodewordCount()+s+a;t.updateSymbolInfo(o);var l=t.getSymbolInfo().getDataCapacity()-o>0;if(t.hasMoreCharacters()||l)if(s<=249)e.setCharAt(0,_e.getCharAt(s));else if(s<=1555)e.setCharAt(0,_e.getCharAt(Math.floor(s/250)+249)),e.insert(1,_e.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var h=0,r=e.length();h<r;h++)t.writeCodeword(this.randomize255State(e.charAt(h).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),lS=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ar},n.prototype.encodeMaximal=function(t){for(var e=new re,r=0,i=t.pos,s=0;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,r=this.encodeChar(a,e),e.length()%3===0&&(i=t.pos,s=e.length())}if(s!==e.length()){var o=Math.floor(e.length()/3*2),l=Math.floor(t.getCodewordCount()+o+1);t.updateSymbolInfo(l);var h=t.getSymbolInfo().getDataCapacity()-l,f=Math.floor(e.length()%3);(f===2&&h!==2||f===1&&(r>3||h!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(N7),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new re;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),s=Math.floor(e.length()/3)*2,a=t.getCodewordCount()+s;t.updateSymbolInfo(a);var o=t.getSymbolInfo().getDataCapacity()-a;if(!t.hasMoreCharacters()){var l=new re;for(e.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(t,e,l,i));e.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(t,e,l,i);break}var h=e.length();if(h%3===0){var f=_s.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){t.signalEncoderChange(Fe);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var s=e.length(),a=e.toString().substring(0,s-i);e.setLengthToZero(),e.append(a),t.pos--;var o=t.getCurrentChar();return i=this.encodeChar(o,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,s=t.getCodewordCount()+r;t.updateSymbolInfo(s);var a=t.getSymbolInfo().getDataCapacity()-s;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(iE)}else if(a===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(iE),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(a>0||t.hasMoreCharacters())&&t.writeCodeword(iE)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(Fe)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,s=new re;return s.append(r),s.append(i),s.toString()},n}(),Xlt=function(){function n(){}return n.prototype.getEncodingMode=function(){return hr},n.prototype.encode=function(t){for(var e=new re;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var s=e.toString().substring(4);e.setLengthToZero(),e.append(s);var a=_s.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(Fe);break}}}e.append(_e.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),s=t.getRemainingCharacters();if(s>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),s<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var a=r-1,o=this.encodeToCodewords(e.toString()),l=!t.hasMoreCharacters(),h=l&&a<=2;if(a<=2){t.updateSymbolInfo(t.getCodewordCount()+a);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(h=!1,t.updateSymbolInfo(t.getCodewordCount()+o.length))}h?(t.resetSymbolInfo(),t.pos-=a):t.writeCodewords(o)}finally{t.signalEncoderChange(Fe)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(_e.getCharAt(t-64)):_s.illegalCharacter(_e.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,s=e>=3?t.charAt(2).charCodeAt(0):0,a=e>=4?t.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(s<<6)+a,l=o>>16&255,h=o>>8&255,f=o&255,p=new re;return p.append(l),e>=2&&p.append(h),e>=3&&p.append(f),p.toString()},n}(),Qlt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zlt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},De=function(){function n(t,e,r,i,s,a,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=s,this.dataRegions=a,this.rsBlockData=o,this.rsBlockError=l}return n.lookup=function(t,e,r,i,s){var a,o;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!0);try{for(var l=Zlt(tut),h=l.next();!h.done;h=l.next()){var f=h.value;if(!(e===1&&f.rectangular)&&!(e===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&t<=f.dataCapacity)return f}}catch(p){a={error:p}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),Jlt=function(n){Qlt(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(De),tut=[new De(!1,3,5,8,8,1),new De(!1,5,7,10,10,1),new De(!0,5,7,16,6,1),new De(!1,8,10,12,12,1),new De(!0,10,11,14,6,2),new De(!1,12,12,14,14,1),new De(!0,16,14,24,10,1),new De(!1,18,14,16,16,1),new De(!1,22,18,18,18,1),new De(!0,22,18,16,10,2),new De(!1,30,20,20,20,1),new De(!0,32,24,16,14,2),new De(!1,36,24,22,22,1),new De(!1,44,28,24,24,1),new De(!0,49,28,22,14,2),new De(!1,62,36,14,14,4),new De(!1,86,42,16,16,4),new De(!1,114,48,18,18,4),new De(!1,144,56,20,20,4),new De(!1,174,68,22,22,4),new De(!1,204,84,24,24,4,102,42),new De(!1,280,112,14,14,16,140,56),new De(!1,368,144,16,16,16,92,36),new De(!1,456,192,18,18,16,114,48),new De(!1,576,224,20,20,16,144,56),new De(!1,696,272,22,22,16,174,68),new De(!1,816,336,24,24,16,136,56),new De(!1,1050,408,18,18,36,175,68),new De(!1,1304,496,20,20,36,163,62),new Jlt],eut=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(o){return o.charCodeAt(0)}),r=new re,i=0,s=e.length;i<s;i++){var a=String.fromCharCode(e[i]&255);if(a==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(a)}this.msg=r.toString(),this.shape=0,this.codewords=new re,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=De.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),nut=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rut=function(n){nut(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Kn},t.prototype.encode=function(e){for(var r=new re;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var s=r.length();if(s%3===0){this.writeNextTriplet(e,r);var a=_s.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Fe);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):_s.illegalCharacter(_e.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=r.length();e.pos-=s,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(qlt),e.getNewEncoding()<0&&e.signalEncoderChange(Fe)},t}(lS),iut=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sut=function(n){iut(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Yr},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(lS),_s=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=E4+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!1);var a=new lS,o=[new Ylt,a,new sut,new rut,new Xlt,new Klt],l=new eut(t);l.setSymbolShape(e),l.setSizeConstraints(r,i),t.startsWith(b4)&&t.endsWith(T4)?(l.writeCodeword(Hlt),l.setSkipAtEnd(2),l.pos+=b4.length):t.startsWith(A4)&&t.endsWith(T4)&&(l.writeCodeword(zlt),l.setSkipAtEnd(2),l.pos+=A4.length);var h=Fe;for(s&&(a.encodeMaximal(l),h=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[h].encode(l),l.getNewEncoding()>=0&&(h=l.getNewEncoding(),l.resetEncoderSignal());var f=l.getCodewordCount();l.updateSymbolInfo();var p=l.getSymbolInfo().getDataCapacity();f<p&&h!==Fe&&h!==Nr&&h!==hr&&l.writeCodeword("");var m=l.getCodewords();for(m.length()<p&&m.append(E4);m.length()<p;)m.append(this.randomize253State(m.length()+1));return l.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===Kn&&i===Kn){for(var s=Math.min(e+3,t.length),a=e;a<s;a++)if(!this.isNativeX12(t.charCodeAt(a)))return Fe}else if(r===hr&&i===hr){for(var s=Math.min(e+4,t.length),a=e;a<s;a++)if(!this.isNativeEDIFACT(t.charCodeAt(a)))return Fe}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===Fe?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var s=0,a=new Uint8Array(6),o=[];;){if(e+s===t.length){Zn.fill(a,0),Zn.fill(o,0);var l=this.findMinimums(i,o,ce.MAX_VALUE,a),h=this.getMinimumCount(a);if(o[Fe]===l)return Fe;if(h===1){if(a[Nr]>0)return Nr;if(a[hr]>0)return hr;if(a[Yr]>0)return Yr;if(a[Kn]>0)return Kn}return Ar}var f=t.charCodeAt(e+s);if(s++,this.isDigit(f)?i[Fe]+=.5:this.isExtendedASCII(f)?(i[Fe]=Math.ceil(i[Fe]),i[Fe]+=2):(i[Fe]=Math.ceil(i[Fe]),i[Fe]++),this.isNativeC40(f)?i[Ar]+=2/3:this.isExtendedASCII(f)?i[Ar]+=8/3:i[Ar]+=4/3,this.isNativeText(f)?i[Yr]+=2/3:this.isExtendedASCII(f)?i[Yr]+=8/3:i[Yr]+=4/3,this.isNativeX12(f)?i[Kn]+=2/3:this.isExtendedASCII(f)?i[Kn]+=13/3:i[Kn]+=10/3,this.isNativeEDIFACT(f)?i[hr]+=3/4:this.isExtendedASCII(f)?i[hr]+=17/4:i[hr]+=13/4,this.isSpecialB256(f)?i[Nr]+=4:i[Nr]++,s>=4){if(Zn.fill(a,0),Zn.fill(o,0),this.findMinimums(i,o,ce.MAX_VALUE,a),o[Fe]<this.min(o[Nr],o[Ar],o[Yr],o[Kn],o[hr]))return Fe;if(o[Nr]<o[Fe]||o[Nr]+1<this.min(o[Ar],o[Yr],o[Kn],o[hr]))return Nr;if(o[hr]+1<this.min(o[Nr],o[Ar],o[Yr],o[Kn],o[Fe]))return hr;if(o[Yr]+1<this.min(o[Nr],o[Ar],o[hr],o[Kn],o[Fe]))return Yr;if(o[Kn]+1<this.min(o[Nr],o[Ar],o[hr],o[Yr],o[Fe]))return Kn;if(o[Ar]+1<this.min(o[Fe],o[Nr],o[hr],o[Yr])){if(o[Ar]<o[Kn])return Ar;if(o[Ar]===o[Kn]){for(var p=e+s+1;p<t.length;){var m=t.charCodeAt(p);if(this.isX12TermSep(m))return Kn;if(!this.isNativeX12(m))break;p++}return Ar}}}}},n.min=function(t,e,r,i,s){var a=Math.min(t,Math.min(e,Math.min(r,i)));return s===void 0?a:Math.min(a,s)},n.findMinimums=function(t,e,r,i){for(var s=0;s<6;s++){var a=e[s]=Math.ceil(t[s]);r>a&&(r=a,Zn.fill(i,0)),r===a&&(i[s]=i[s]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=ce.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),sE=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S4=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return ns.encode(t,this.charset)!=null}catch{return!1}},n}(),aut=function(){function n(t,e,r){var i,s,a,o,l,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new S4(Llt.forName(N))}),this.encoders=[];var f=[];f.push(new S4(Vlt.ISO_8859_1));for(var p=e!=null&&e.name.startsWith("UTF"),m=0;m<t.length;m++){var v=!1;try{for(var x=(i=void 0,sE(f)),E=x.next();!E.done;E=x.next()){var b=E.value,T=t.charAt(m),S=T.charCodeAt(0);if(S===r||b.canEncode(T)){v=!0;break}}}catch(N){i={error:N}}finally{try{E&&!E.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}if(!v)try{for(var D=(a=void 0,sE(this.ENCODERS)),P=D.next();!P.done;P=D.next()){var b=P.value;if(b.canEncode(t.charAt(m))){f.push(b),v=!0;break}}}catch(N){a={error:N}}finally{try{P&&!P.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}v||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var k=0;try{for(var U=sE(f),M=U.next();!M.done;M=U.next()){var b=M.value;this.encoders[k++]=b}}catch(N){l={error:N}}finally{try{M&&!M.done&&(h=U.return)&&h.call(U)}finally{if(l)throw l.error}}}var I=-1;if(e!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&e.name===this.encoders[m].name){I=m;break}}this.priorityEncoderIndex=I}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return ns.encode(_e.getCharAt(t),this.encoders[e].name)},n}(),out=3,cut=function(){function n(t,e,r){this.fnc1=r;var i=new aut(t,e,r);if(i.length()===1)for(var s=0;s<this.bytes.length;s++){var a=t.charAt(s).charCodeAt(0);this.bytes[s]=a===r?1e3:a}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new re,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,s,a){var o=t.charAt(i).charCodeAt(0),l=0,h=e.length();e.getPriorityEncoderIndex()>=0&&(o===a||e.canEncode(o,e.getPriorityEncoderIndex()))&&(l=e.getPriorityEncoderIndex(),h=l+1);for(var f=l;f<h;f++)(o===a||e.canEncode(o,f))&&this.addEdge(r,i+1,new C4(o,e,f,s,a))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,s=new C4[i+1][e.length()];this.addEdges(t,e,s,0,null,r);for(var a=1;a<=i;a++){for(var o=0;o<e.length();o++)s[a][o]!=null&&a<i&&this.addEdges(t,e,s,a,s[a][o],r);for(var o=0;o<e.length();o++)s[a-1][o]=null}for(var l=-1,h=ce.MAX_VALUE,o=0;o<e.length();o++)if(s[i][o]!=null){var f=s[i][o];f.cachedTotalSize<h&&(h=f.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+t+'"');for(var p=[],m=s[i][l];m!=null;){if(m.isFNC1())p.unshift(1e3);else for(var v=e.encode(m.c,m.encoderIndex),a=v.length-1;a>=0;a--)p.unshift(v[a]&255);var x=m.previous===null?0:m.previous.encoderIndex;x!==m.encoderIndex&&p.unshift(256+e.getECIValue(m.encoderIndex)),m=m.previous}for(var E=[],a=0;a<E.length;a++)E[a]=p[a];return E},n}(),C4=function(){function n(t,e,r,i,s){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=s,this.c=t===s?1e3:t;var a=this.isFNC1()?1:e.encode(t,r).length,o=i===null?0:i.encoderIndex;o!==r&&(a+=out),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),lut=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var I4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(I4||(I4={}));(function(n){lut(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r,i)||this;return o.shape=s,o.macroId=a,o}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(cut);var uut=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),D4=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),hut=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),fut=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uS=function(n){fut(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.value=r,s.bitCount=i,s}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ce.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(hut),dut=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),put=function(n){dut(t,n);function t(e,r,i){var s=n.call(this,e,0,0)||this;return s.binaryShiftStart=r,s.binaryShiftByteCount=i,s}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(uS);function gut(n,t,e){return new put(n,t,e)}function vp(n,t,e){return new uS(n,t,e)}var mut=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],vc=0,Xv=1,Ji=2,M7=3,ta=4,vut=new uS(null,0,0),aE=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],yut=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function _ut(n){var t,e;try{for(var r=yut(n),i=r.next();!i.done;i=r.next()){var s=i.value;Zn.fill(s,-1)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[vc][ta]=0,n[Xv][ta]=0,n[Xv][vc]=28,n[M7][ta]=0,n[Ji][ta]=0,n[Ji][vc]=15,n}var P7=_ut(Zn.createInt32Array(6,6)),xut=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wut=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var s=aE[this.mode][t];i=vp(i,s&65535,s>>16),r+=s>>16}var a=t===Ji?4:5;return i=vp(i,e,a),new n(i,t,0,r+a)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===Ji?4:5;return r=vp(r,P7[this.mode][t],i),r=vp(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===ta||this.mode===Ji){var s=aE[r][vc];e=vp(e,s&65535,s>>16),i+=s>>16,r=vc}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(e,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(t+1)),o},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=gut(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(aE[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],s=this.endBinaryShift(t.length).token;s!==null;s=s.getPrevious())i.unshift(s);var a=new gr;try{for(var o=xut(i),l=o.next();!l.done;l=o.next()){var h=l.value;h.appendTo(a,t)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n.prototype.toString=function(){return _e.format("%s bits=%d bytes=%d",mut[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(vut,vc,0,0),n}();function Eut(n){var t=_e.getCharCode(" "),e=_e.getCharCode("."),r=_e.getCharCode(",");n[vc][t]=1;for(var i=_e.getCharCode("Z"),s=_e.getCharCode("A"),a=s;a<=i;a++)n[vc][a]=a-s+2;n[Xv][t]=1;for(var o=_e.getCharCode("z"),l=_e.getCharCode("a"),a=l;a<=o;a++)n[Xv][a]=a-l+2;n[Ji][t]=1;for(var h=_e.getCharCode("9"),f=_e.getCharCode("0"),a=f;a<=h;a++)n[Ji][a]=a-f+2;n[Ji][r]=12,n[Ji][e]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<p.length;m++)n[M7][_e.getCharCode(p[m])]=m;for(var v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<v.length;m++)_e.getCharCode(v[m])>0&&(n[ta][_e.getCharCode(v[m])]=m);return n}var oE=Eut(Zn.createInt32Array(5,256)),d1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},but=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=_e.getCharCode(" "),e=_e.getCharCode(`
`),r=D4.singletonList(wut.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case _e.getCharCode("\r"):s=a===e?2:0;break;case _e.getCharCode("."):s=a===t?3:0;break;case _e.getCharCode(","):s=a===t?4:0;break;case _e.getCharCode(":"):s=a===t?5:0;break;default:s=0}s>0?(r=n.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}var o=D4.min(r,function(l,h){return l.getBitCount()-h.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,s=[];try{for(var a=d1(t),o=a.next();!o.done;o=a.next()){var l=o.value;this.updateStateForChar(l,e,s)}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return n.simplifyStates(s)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,s=oE[t.getMode()][i]>0,a=null,o=0;o<=ta;o++){var l=oE[o][i];if(l>0){if(a==null&&(a=t.endBinaryShift(e)),!s||o===t.getMode()||o===Ji){var h=a.latchAndAppend(o,l);r.push(h)}if(!s&&P7[t.getMode()][o]>=0){var f=a.shiftAndAppend(o,l);r.push(f)}}}if(t.getBinaryShiftByteCount()>0||oE[t.getMode()][i]===0){var p=t.addBinaryShiftChar(e);r.push(p)}},n.updateStateListForPair=function(t,e,r){var i,s,a=[];try{for(var o=d1(t),l=o.next();!l.done;l=o.next()){var h=l.value;this.updateStateForPair(h,e,r,a)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(a)},n.updateStateForPair=function(t,e,r,i){var s=t.endBinaryShift(e);if(i.push(s.latchAndAppend(ta,r)),t.getMode()!==ta&&i.push(s.shiftAndAppend(ta,r)),r===3||r===4){var a=s.latchAndAppend(Ji,16-r).latchAndAppend(Ji,1);i.push(a)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(o)}},n.simplifyStates=function(t){var e,r,i,s,a=[];try{for(var o=d1(t),l=o.next();!l.done;l=o.next()){var h=l.value,f=!0,p=function(b){if(b.isBetterThanOrEqualTo(h))return f=!1,"break";h.isBetterThanOrEqualTo(b)&&(a=a.filter(function(T){return T!==b}))};try{for(var m=(i=void 0,d1(a)),v=m.next();!v.done;v=m.next()){var x=v.value,E=p(x);if(E==="break")break}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}f&&a.push(h)}}catch(b){e={error:b}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n}(),Aut=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new but(t).encode(),s=ce.truncDivision(i.getSize()*e,100)+11,a=i.getSize()+s,o,l,h,f,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,l=Math.abs(r),l>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new zt(_e.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(l,o),f=n.WORD_SIZE[l];var m=h-h%f;if(p=n.stuffBits(i,f),p.getSize()+s>m)throw new zt("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new zt("Data to large for user specified layer")}else{f=0,p=null;for(var v=0;;v++){if(v>n.MAX_NB_BITS)throw new zt("Data too large for an Aztec code");if(o=v<=3,l=o?v+1:v,h=n.totalBitsInLayer(l,o),!(a>h)){(p==null||f!==n.WORD_SIZE[l])&&(f=n.WORD_SIZE[l],p=n.stuffBits(i,f));var m=h-h%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+s<=m)break}}}var x=n.generateCheckWords(p,h,f),E=p.getSize()/f,b=n.generateModeMessage(o,l,E),T=(o?11:14)+l*4,S=new Int32Array(T),D;if(o){D=T;for(var v=0;v<S.length;v++)S[v]=v}else{D=T+1+2*ce.truncDivision(ce.truncDivision(T,2)-1,15);for(var P=ce.truncDivision(T,2),k=ce.truncDivision(D,2),v=0;v<P;v++){var U=v+ce.truncDivision(v,15);S[P-v-1]=k-U-1,S[P+v]=k+U+1}}for(var M=new ma(D),v=0,I=0;v<l;v++){for(var N=(l-v)*4+(o?9:12),L=0;L<N;L++)for(var j=L*2,z=0;z<2;z++)x.get(I+j+z)&&M.set(S[v*2+z],S[v*2+L]),x.get(I+N*2+j+z)&&M.set(S[v*2+L],S[T-1-v*2-z]),x.get(I+N*4+j+z)&&M.set(S[T-1-v*2-z],S[T-1-v*2-L]),x.get(I+N*6+j+z)&&M.set(S[T-1-v*2-L],S[v*2+z]);I+=N*8}if(n.drawModeMessage(M,o,D,b),o)n.drawBullsEye(M,ce.truncDivision(D,2),5);else{n.drawBullsEye(M,ce.truncDivision(D,2),7);for(var v=0,L=0;v<ce.truncDivision(T,2)-1;v+=15,L+=16)for(var z=ce.truncDivision(D,2)&1;z<D;z+=2)M.set(ce.truncDivision(D,2)-L,z),M.set(ce.truncDivision(D,2)+L,z),M.set(z,ce.truncDivision(D,2)-L),M.set(z,ce.truncDivision(D,2)+L)}var B=new uut;return B.setCompact(o),B.setSize(D),B.setLayers(l),B.setCodeWords(E),B.setMatrix(M),B},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var s=e-i;s<=e+i;s++)t.set(s,e-i),t.set(s,e+i),t.set(e-i,s),t.set(e+i,s);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new gr;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var s=ce.truncDivision(r,2);if(e)for(var a=0;a<7;a++){var o=s-3+a;i.get(a)&&t.set(o,s-5),i.get(a+7)&&t.set(s+5,o),i.get(20-a)&&t.set(o,s+5),i.get(27-a)&&t.set(s-5,o)}else for(var a=0;a<10;a++){var o=s-5+a+ce.truncDivision(a,5);i.get(a)&&t.set(o,s-7),i.get(a+10)&&t.set(s+7,o),i.get(29-a)&&t.set(o,s+7),i.get(39-a)&&t.set(s-7,o)}},n.generateCheckWords=function(t,e,r){var i,s,a=t.getSize()/r,o=new R7(n.getGF(r)),l=ce.truncDivision(e,r),h=n.bitsToWords(t,r,l);o.encode(h,l-a);var f=e%r,p=new gr;p.appendBits(0,f);try{for(var m=Aut(Array.from(h)),v=m.next();!v.done;v=m.next()){var x=v.value;p.appendBits(x,r)}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),s,a;for(s=0,a=t.getSize()/e;s<a;s++){for(var o=0,l=0;l<e;l++)o|=t.get(s*e+l)?1<<e-l-1:0;i[s]=o}return i},n.getGF=function(t){switch(t){case 4:return ci.AZTEC_PARAM;case 6:return ci.AZTEC_DATA_6;case 8:return ci.AZTEC_DATA_8;case 10:return ci.AZTEC_DATA_10;case 12:return ci.AZTEC_DATA_12;default:throw new zt("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new gr,i=t.getSize(),s=(1<<e)-2,a=0;a<i;a+=e){for(var o=0,l=0;l<e;l++)(a+l>=i||t.get(a+l))&&(o|=1<<e-1-l);(o&s)===s?(r.appendBits(o&s,e),a--):(o&s)===0?(r.appendBits(o|1,e),a--):r.appendBits(o,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var cE={exports:{}},O4;function Tut(){return O4||(O4=1,function(n){var t=function(e){var r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(Z,F,$){Z[F]=$.value},a,o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",h=o.asyncIterator||"@@asyncIterator",f=o.toStringTag||"@@toStringTag";function p(Z,F,$){return Object.defineProperty(Z,F,{value:$,enumerable:!0,configurable:!0,writable:!0}),Z[F]}try{p({},"")}catch{p=function(F,$,ot){return F[$]=ot}}function m(Z,F,$,ot){var tt=F&&F.prototype instanceof D?F:D,gt=Object.create(tt.prototype),mt=new Y(ot||[]);return s(gt,"_invoke",{value:z(Z,$,mt)}),gt}e.wrap=m;function v(Z,F,$){try{return{type:"normal",arg:Z.call(F,$)}}catch(ot){return{type:"throw",arg:ot}}}var x="suspendedStart",E="suspendedYield",b="executing",T="completed",S={};function D(){}function P(){}function k(){}var U={};p(U,l,function(){return this});var M=Object.getPrototypeOf,I=M&&M(M(at([])));I&&I!==r&&i.call(I,l)&&(U=I);var N=k.prototype=D.prototype=Object.create(U);P.prototype=k,s(N,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:P,configurable:!0}),P.displayName=p(k,f,"GeneratorFunction");function L(Z){["next","throw","return"].forEach(function(F){p(Z,F,function($){return this._invoke(F,$)})})}e.isGeneratorFunction=function(Z){var F=typeof Z=="function"&&Z.constructor;return F?F===P||(F.displayName||F.name)==="GeneratorFunction":!1},e.mark=function(Z){return Object.setPrototypeOf?Object.setPrototypeOf(Z,k):(Z.__proto__=k,p(Z,f,"GeneratorFunction")),Z.prototype=Object.create(N),Z},e.awrap=function(Z){return{__await:Z}};function j(Z,F){function $(gt,mt,Et,Qt){var Mt=v(Z[gt],Z,mt);if(Mt.type==="throw")Qt(Mt.arg);else{var Rt=Mt.arg,Ut=Rt.value;return Ut&&typeof Ut=="object"&&i.call(Ut,"__await")?F.resolve(Ut.__await).then(function(Jt){$("next",Jt,Et,Qt)},function(Jt){$("throw",Jt,Et,Qt)}):F.resolve(Ut).then(function(Jt){Rt.value=Jt,Et(Rt)},function(Jt){return $("throw",Jt,Et,Qt)})}}var ot;function tt(gt,mt){function Et(){return new F(function(Qt,Mt){$(gt,mt,Qt,Mt)})}return ot=ot?ot.then(Et,Et):Et()}s(this,"_invoke",{value:tt})}L(j.prototype),p(j.prototype,h,function(){return this}),e.AsyncIterator=j,e.async=function(Z,F,$,ot,tt){tt===void 0&&(tt=Promise);var gt=new j(m(Z,F,$,ot),tt);return e.isGeneratorFunction(F)?gt:gt.next().then(function(mt){return mt.done?mt.value:gt.next()})};function z(Z,F,$){var ot=x;return function(gt,mt){if(ot===b)throw new Error("Generator is already running");if(ot===T){if(gt==="throw")throw mt;return vt()}for($.method=gt,$.arg=mt;;){var Et=$.delegate;if(Et){var Qt=B(Et,$);if(Qt){if(Qt===S)continue;return Qt}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(ot===x)throw ot=T,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);ot=b;var Mt=v(Z,F,$);if(Mt.type==="normal"){if(ot=$.done?T:E,Mt.arg===S)continue;return{value:Mt.arg,done:$.done}}else Mt.type==="throw"&&(ot=T,$.method="throw",$.arg=Mt.arg)}}}function B(Z,F){var $=F.method,ot=Z.iterator[$];if(ot===a)return F.delegate=null,$==="throw"&&Z.iterator.return&&(F.method="return",F.arg=a,B(Z,F),F.method==="throw")||$!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+$+"' method")),S;var tt=v(ot,Z.iterator,F.arg);if(tt.type==="throw")return F.method="throw",F.arg=tt.arg,F.delegate=null,S;var gt=tt.arg;if(!gt)return F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,S;if(gt.done)F[Z.resultName]=gt.value,F.next=Z.nextLoc,F.method!=="return"&&(F.method="next",F.arg=a);else return gt;return F.delegate=null,S}L(N),p(N,f,"Generator"),p(N,l,function(){return this}),p(N,"toString",function(){return"[object Generator]"});function yt(Z){var F={tryLoc:Z[0]};1 in Z&&(F.catchLoc=Z[1]),2 in Z&&(F.finallyLoc=Z[2],F.afterLoc=Z[3]),this.tryEntries.push(F)}function wt(Z){var F=Z.completion||{};F.type="normal",delete F.arg,Z.completion=F}function Y(Z){this.tryEntries=[{tryLoc:"root"}],Z.forEach(yt,this),this.reset(!0)}e.keys=function(Z){var F=Object(Z),$=[];for(var ot in F)$.push(ot);return $.reverse(),function tt(){for(;$.length;){var gt=$.pop();if(gt in F)return tt.value=gt,tt.done=!1,tt}return tt.done=!0,tt}};function at(Z){if(Z){var F=Z[l];if(F)return F.call(Z);if(typeof Z.next=="function")return Z;if(!isNaN(Z.length)){var $=-1,ot=function tt(){for(;++$<Z.length;)if(i.call(Z,$))return tt.value=Z[$],tt.done=!1,tt;return tt.value=a,tt.done=!0,tt};return ot.next=ot}}return{next:vt}}e.values=at;function vt(){return{value:a,done:!0}}return Y.prototype={constructor:Y,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(wt),!Z)for(var F in this)F.charAt(0)==="t"&&i.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=a)},stop:function(){this.done=!0;var Z=this.tryEntries[0],F=Z.completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var F=this;function $(Qt,Mt){return gt.type="throw",gt.arg=Z,F.next=Qt,Mt&&(F.method="next",F.arg=a),!!Mt}for(var ot=this.tryEntries.length-1;ot>=0;--ot){var tt=this.tryEntries[ot],gt=tt.completion;if(tt.tryLoc==="root")return $("end");if(tt.tryLoc<=this.prev){var mt=i.call(tt,"catchLoc"),Et=i.call(tt,"finallyLoc");if(mt&&Et){if(this.prev<tt.catchLoc)return $(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return $(tt.finallyLoc)}else if(mt){if(this.prev<tt.catchLoc)return $(tt.catchLoc,!0)}else if(Et){if(this.prev<tt.finallyLoc)return $(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Z,F){for(var $=this.tryEntries.length-1;$>=0;--$){var ot=this.tryEntries[$];if(ot.tryLoc<=this.prev&&i.call(ot,"finallyLoc")&&this.prev<ot.finallyLoc){var tt=ot;break}}tt&&(Z==="break"||Z==="continue")&&tt.tryLoc<=F&&F<=tt.finallyLoc&&(tt=null);var gt=tt?tt.completion:{};return gt.type=Z,gt.arg=F,tt?(this.method="next",this.next=tt.finallyLoc,S):this.complete(gt)},complete:function(Z,F){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&F&&(this.next=F),S},finish:function(Z){for(var F=this.tryEntries.length-1;F>=0;--F){var $=this.tryEntries[F];if($.finallyLoc===Z)return this.complete($.completion,$.afterLoc),wt($),S}},catch:function(Z){for(var F=this.tryEntries.length-1;F>=0;--F){var $=this.tryEntries[F];if($.tryLoc===Z){var ot=$.completion;if(ot.type==="throw"){var tt=ot.arg;wt($)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(Z,F,$){return this.delegate={iterator:at(Z),resultName:F,nextLoc:$},this.method==="next"&&(this.arg=a),S}},e}(n.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(cE)),cE.exports}var lE,R4;function hS(){return R4||(R4=1,lE=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`),lE}var uE,N4;function k7(){if(N4)return uE;N4=1;const n=hS();let t=0;return uE=({id:e,action:r,payload:i={}})=>{let s=e;return typeof s>"u"&&(s=n("Job",t),t+=1),{id:s,action:r,payload:i}},uE}var yp={},M4;function fS(){if(M4)return yp;M4=1;let n=!1;return yp.logging=n,yp.setLogging=t=>{n=t},yp.log=(...t)=>n?console.log.apply(this,t):null,yp}var hE,P4;function Sut(){if(P4)return hE;P4=1;const n=k7(),{log:t}=fS(),e=hS();let r=0;return hE=()=>{const i=e("Scheduler",r),s={},a={};let o=[];r+=1;const l=()=>o.length,h=()=>Object.keys(s).length,f=()=>{if(o.length!==0){const E=Object.keys(s);for(let b=0;b<E.length;b+=1)if(typeof a[E[b]]>"u"){o[0](s[E[b]]);break}}},p=(E,b)=>new Promise((T,S)=>{const D=n({action:E,payload:b});o.push(async P=>{o.shift(),a[P.id]=D;try{T(await P[E].apply(this,[...b,D.id]))}catch(k){S(k)}finally{delete a[P.id],f()}}),t(`[${i}]: Add ${D.id} to JobQueue`),t(`[${i}]: JobQueue length=${o.length}`),f()});return{addWorker:E=>(s[E.id]=E,t(`[${i}]: Add ${E.id}`),t(`[${i}]: Number of workers=${h()}`),f(),E.id),addJob:async(E,...b)=>{if(h()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return p(E,b)},terminate:async()=>{Object.keys(s).forEach(async E=>{await s[E].terminate()}),o=[]},getQueueLen:l,getNumWorkers:h}},hE}function Cut(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fE,k4;function Iut(){return k4||(k4=1,fE=n=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof Cut=="function"&&(t.type="node"),typeof n>"u"?t:t[n]}),fE}var dE,L4;function Dut(){if(L4)return dE;L4=1;const t=Iut()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return dE=e=>{const r={...e};return["corePath","workerPath","langPath"].forEach(i=>{e[i]&&(r[i]=t(r[i]))}),r},dE}var pE,V4;function L7(){return V4||(V4=1,pE={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),pE}const Out="6.0.1",Rut={version:Out};var gE,B4;function Nut(){return B4||(B4=1,gE={workerBlobURL:!0,logger:()=>{}}),gE}var mE,F4;function Mut(){if(F4)return mE;F4=1;const n=Rut.version;return mE={...Nut(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},mE}var vE,U4;function Put(){return U4||(U4=1,vE=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(r))}else e=new Worker(n);return e}),vE}var yE,j4;function kut(){return j4||(j4=1,yE=n=>{n.terminate()}),yE}var _E,H4;function Lut(){return H4||(H4=1,_E=(n,t)=>{n.onmessage=({data:e})=>{t(e)}}),_E}var xE,z4;function Vut(){return z4||(z4=1,xE=async(n,t)=>{n.postMessage(t)}),xE}var wE,G4;function But(){if(G4)return wE;G4=1;const n=e=>new Promise((r,i)=>{const s=new FileReader;s.onload=()=>{r(s.result)},s.onerror=({target:{error:{code:a}}})=>{i(Error(`File could not be read! Code=${a}`))},s.readAsArrayBuffer(e)}),t=async e=>{let r=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(r=await t(e.src)),e.tagName==="VIDEO"&&(r=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(i=>{e.toBlob(async s=>{r=await n(s),i()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const i=await e.convertToBlob();r=await n(i)}else(e instanceof File||e instanceof Blob)&&(r=await n(e));return new Uint8Array(r)};return wE=t,wE}var EE,W4;function Fut(){if(W4)return EE;W4=1;const n=Mut(),t=Put(),e=kut(),r=Lut(),i=Vut(),s=But();return EE={defaultOptions:n,spawnWorker:t,terminateWorker:e,onMessage:r,send:i,loadImage:s},EE}var bE,$4;function V7(){if($4)return bE;$4=1;const n=Dut(),t=k7(),{log:e}=fS(),r=hS(),i=L7(),{defaultOptions:s,spawnWorker:a,terminateWorker:o,onMessage:l,loadImage:h,send:f}=Fut();let p=0;return bE=async(m="eng",v=i.LSTM_ONLY,x={},E={})=>{const b=r("Worker",p),{logger:T,errorHandler:S,...D}=n({...s,...x}),P={},k=typeof m=="string"?m.split("+"):m;let U=v,M=E;const I=[i.DEFAULT,i.LSTM_ONLY].includes(v)&&!D.legacyCore;let N,L;const j=new Promise((Rt,Ut)=>{L=Rt,N=Ut}),z=Rt=>{N(Rt.message)};let B=a(D);B.onerror=z,p+=1;const yt=({id:Rt,action:Ut,payload:Jt})=>new Promise((Re,Se)=>{e(`[${b}]: Start ${Rt}, action=${Ut}`);const It=`${Ut}-${Rt}`;P[It]={resolve:Re,reject:Se},f(B,{workerId:b,jobId:Rt,action:Ut,payload:Jt})}),wt=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),Y=Rt=>yt(t({id:Rt,action:"load",payload:{options:{lstmOnly:I,corePath:D.corePath,logging:D.logging}}})),at=(Rt,Ut,Jt)=>yt(t({id:Jt,action:"FS",payload:{method:"writeFile",args:[Rt,Ut]}})),vt=(Rt,Ut)=>yt(t({id:Ut,action:"FS",payload:{method:"readFile",args:[Rt,{encoding:"utf8"}]}})),Z=(Rt,Ut)=>yt(t({id:Ut,action:"FS",payload:{method:"unlink",args:[Rt]}})),F=(Rt,Ut,Jt)=>yt(t({id:Jt,action:"FS",payload:{method:Rt,args:Ut}})),$=(Rt,Ut)=>yt(t({id:Ut,action:"loadLanguage",payload:{langs:Rt,options:{langPath:D.langPath,dataPath:D.dataPath,cachePath:D.cachePath,cacheMethod:D.cacheMethod,gzip:D.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(U)&&!D.legacyLang}}})),ot=(Rt,Ut,Jt,Re)=>yt(t({id:Re,action:"initialize",payload:{langs:Rt,oem:Ut,config:Jt}})),tt=(Rt="eng",Ut,Jt,Re)=>{if(I&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(Ut))throw Error("Legacy model requested but code missing.");const Se=Ut||U;U=Se;const It=Jt||M;M=It;const qt=(typeof Rt=="string"?Rt.split("+"):Rt).filter(Vt=>!k.includes(Vt));return k.push(...qt),qt.length>0?$(qt,Re).then(()=>ot(Rt,Se,It,Re)):ot(Rt,Se,It,Re)},gt=(Rt={},Ut)=>yt(t({id:Ut,action:"setParameters",payload:{params:Rt}})),mt=async(Rt,Ut={},Jt={text:!0},Re)=>yt(t({id:Re,action:"recognize",payload:{image:await h(Rt),options:Ut,output:Jt}})),Et=async(Rt,Ut)=>{if(I)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return yt(t({id:Ut,action:"detect",payload:{image:await h(Rt)}}))},Qt=async()=>(B!==null&&(o(B),B=null),Promise.resolve());l(B,({workerId:Rt,jobId:Ut,status:Jt,action:Re,data:Se})=>{const It=`${Re}-${Ut}`;if(Jt==="resolve")e(`[${Rt}]: Complete ${Ut}`),P[It].resolve({jobId:Ut,data:Se}),delete P[It];else if(Jt==="reject")if(P[It].reject(Se),delete P[It],Re==="load"&&N(Se),S)S(Se);else throw Error(Se);else Jt==="progress"&&T({...Se,userJobId:Ut})});const Mt={id:b,worker:B,load:wt,writeText:at,readText:vt,removeFile:Z,FS:F,reinitialize:tt,setParameters:gt,recognize:mt,detect:Et,terminate:Qt};return Y().then(()=>$(m)).then(()=>ot(m,v,E)).then(()=>L(Mt)).catch(()=>{}),j},bE}var AE,q4;function Uut(){if(q4)return AE;q4=1;const n=V7();return AE={recognize:async(r,i,s)=>{const a=await n(i,1,s);return a.recognize(r).finally(async()=>{await a.terminate()})},detect:async(r,i)=>{const s=await n("osd",0,i);return s.detect(r).finally(async()=>{await s.terminate()})}},AE}var TE,Y4;function jut(){return Y4||(Y4=1,TE={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),TE}var SE,K4;function Hut(){return K4||(K4=1,SE={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),SE}var CE,X4;function zut(){if(X4)return CE;X4=1,Tut();const n=Sut(),t=V7(),e=Uut(),r=jut(),i=L7(),s=Hut(),{setLogging:a}=fS();return CE={languages:r,OEM:i,PSM:s,createScheduler:n,createWorker:t,setLogging:a,...e},CE}var Gut=zut();const Wut=P2(Gut),$ut={Fat:["fat","saturates","of which saturates"],Carbohydrate:["carbohydrate","carb"],Sugar:["sugar","sugars","of which sugars"],Fibre:["fibre","fiber"],Protein:["protein","protien"],Salt:["salt","sodium"]};function qut(n){const t=n.match(/([\d.]+)\s*(g|mg)?/i);if(t){const e=parseFloat(t[1]);if(!isNaN(e)&&e<1e3)return e}return null}function Yut(n){const t=n.split(`
`).map(r=>r.trim()).filter(Boolean),e=[];for(const r of t)for(const i of Object.keys($ut))if(r.toLowerCase().includes(i.toLowerCase())){const s=qut(r);s!==null&&!e.find(a=>a.type===i)&&e.push({type:i,count:s.toFixed(2),serving:"1",total:s.toFixed(2)})}return e}function Kut({isOpen:n,onClose:t,onSave:e,editMeal:r,user:i}){const[s,a]=rt.useState("Breakfast"),[o,l]=rt.useState(new Date),[h,f]=rt.useState([""]),[p,m]=rt.useState([[{type:"Protein",count:"",serving:"1",total:""}]]),[v,x]=rt.useState(null),[E,b]=rt.useState(!1),[T,S]=rt.useState(!1),[D,P]=rt.useState(!1),[k,U]=rt.useState(!1),[M,I]=rt.useState(null),{showToast:N}=XT(),L=rt.useRef(null),j=[{label:"100 g",value:100},{label:"slice (30 g)",value:30},{label:"cup (200 ml)",value:200},{label:"package (250 g)",value:250}],[z,B]=rt.useState(1),[yt,wt]=rt.useState(j[0].value),[Y,at]=rt.useState(0),vt=["Protein","Fat","Carbohydrate","Sugar","Sugars","Fibre","Fiber","Salt","Caffeine"];rt.useEffect(()=>{r&&(Mt(),x(null),a(r.mealType),l(new Date(r.timestamp)),f(r.foodItems.map(It=>It.name)),m(r.foodItems.map(It=>It.nutrients)),b(!0),S(!1),P(!1))},[r]);const Z=(It="")=>{const Gt=It.toLowerCase();return Gt==="sugars"?"Sugar":Gt==="fiber"?"Fibre":Gt==="proteins"?"Protein":Gt==="carbohydrates"?"Carbohydrate":Gt==="saturated fat"?"Fat":It},F=()=>{Mt(),x(null),m([[{type:"Protein",count:"",serving:"1",total:""}]]),f([""]),l(new Date),b(!1),S(!1),P(!1),I(null)},$=It=>{Mt(),b(It==="manual"),S(It==="auto"),P(It==="scan")},ot=()=>{m([...p,[{type:"Protein",count:"",serving:"1",total:""}]]),f([...h,""])},tt=It=>{const Gt=[...p];Gt[It].push({type:"Protein",count:"",serving:"1",total:""}),m(Gt)},gt=(It,Gt)=>{const qt=[...p];qt[It].splice(Gt,1),m(qt)},mt=(It,Gt,qt,Vt)=>{const bt=[...p],ae=bt[It][Gt];ae[qt]=Vt;const xe=parseFloat(ae.count)||0,hn=parseFloat(ae.serving)||1;ae.total=(xe*hn).toFixed(2),m(bt)},Et=p.every(It=>It.every(Gt=>!Gt.count||parseFloat(Gt.count)===0)),Qt=()=>{const It=p.map((qt,Vt)=>({name:h[Vt]||`Food ${Vt+1}`,nutrients:qt})),Gt={mealType:s,date:o.toISOString().split("T")[0],timestamp:o.toISOString(),foodItems:It,kcal:M||Re(It)};e(Gt),F(),t()},Mt=()=>{const It=L.current;It&&It.srcObject&&(It.srcObject.getTracks().forEach(Gt=>Gt.stop()),It.srcObject=null),P(!1)},Rt=()=>{const It=L.current;if(!It||It.videoWidth===0){N("Camera not ready yet. Wait a moment.");return}const Gt=document.createElement("canvas");Gt.width=It.videoWidth,Gt.height=It.videoHeight,Gt.getContext("2d").drawImage(It,0,0),Wut.recognize(Gt,"eng").then(({data:{text:Vt}})=>{const bt=Yut(Vt);bt.length>0?(m([bt]),$("manual")):N("No nutritional values detected. Try again or enter manually."),Mt()})},Ut=async(It,Gt)=>{var qt;try{const en=(qt=(await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(It)}&search_simple=1&action=process&json=1`)).json()).products)==null?void 0:qt.find(Dt=>{var fe,be;return((fe=Dt.nutriments)==null?void 0:fe["energy-kcal_100g"])&&((be=Dt.nutriments)==null?void 0:be.proteins_100g)});if(!en)throw new Error("No valid nutrition info found.");const ae=en.nutriments,xe={Protein:ae.proteins_100g,Fat:ae.fat_100g,Carbohydrate:ae.carbohydrates_100g,Sugar:ae.sugars_100g,Fibre:ae.fiber_100g,Salt:ae.salt_100g,Caffeine:ae.caffeine_100g},hn=Object.entries(xe).filter(([Dt,fe])=>vt.includes(Dt)&&fe!==void 0).map(([Dt,fe])=>({type:Dt,count:parseFloat(fe).toFixed(2),serving:"1",total:parseFloat(fe).toFixed(2)})),rr=[...p];rr[Gt]=hn,m(rr),$("auto")}catch{N(" Could not fetch nutrition info. Try a more specific food name.")}},Jt=async It=>{try{const qt=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${It}.json`)).json();if(qt.status===0){N(" Product not found.");return}const Vt=qt.product.nutriments,bt=qt.product.product_name||"Scanned Product",en={Fat:Vt.fat_100g,Carbohydrate:Vt.carbohydrates_100g,Protein:Vt.proteins_100g,Sugar:Vt.sugars_100g,Fibre:Vt.fiber_100g,Salt:Vt.salt_100g,Caffeine:Vt.caffeine_100g};I(parseFloat(Vt["energy-kcal_100g"])||0);const ae=Object.entries(en).filter(([xe,hn])=>vt.includes(xe)&&hn!==void 0).map(([xe,hn])=>({type:xe,count:parseFloat(hn).toFixed(2),serving:"1",total:parseFloat(hn).toFixed(2)}));f([bt]),m([ae]),$("manual")}catch(Gt){N(" Nutrition fetch failed."),console.error(Gt)}},Re=It=>{let Gt=0;return It.forEach(qt=>qt.nutrients.forEach(Vt=>{(Vt.type.toLowerCase().includes("calorie")||Vt.type.toLowerCase().includes("kcal"))&&(Gt+=parseFloat(Vt.total||0))})),Gt};if(!n)return null;if(v===null)return C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[C.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),C.jsxs("div",{className:"d-flex flex-column gap-2",children:[C.jsx("button",{className:"btn btn-primary",onClick:()=>x("meal"),children:"Log Meal"}),C.jsx("button",{className:"btn btn-outline-light",onClick:()=>x("weight"),children:"Log Weight"}),C.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{F(),t()},children:"Cancel"})]})]})});return C.jsxs(C.Fragment,{children:[v==="meal"&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark",children:[C.jsxs("div",{className:"modal-header col-md-12 mb-2 d-flex",children:[C.jsxs("div",{className:"d-flex flex-grow-1 me-3 align-items-center",children:[C.jsx("p",{className:"ModelTitleName",children:"Select Meal"}),C.jsxs("select",{className:"DropDownMeal",value:s,onChange:It=>a(It.target.value),children:[C.jsx("option",{children:"Breakfast"}),C.jsx("option",{children:"Lunch"}),C.jsx("option",{children:"Dinner"})]})]}),C.jsx("input",{type:"date",className:"form-control",value:o.toISOString().split("T")[0],onChange:It=>l(new Date(It.target.value)),max:new Date().toISOString().split("T")[0],style:{width:"30%"}})]}),C.jsxs("div",{className:"manual-scan-buttons mb-2",children:[C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>$("manual"),children:"Manual Entry"}),C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>$("auto"),children:"Auto Fill"}),C.jsxs("label",{className:"btn btn-primary btn-sm",children:["Scan Barcode",C.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:It=>{const Gt=It.target.files[0];if(!Gt)return;const qt=new Image;qt.src=URL.createObjectURL(Gt),qt.onload=async()=>{try{const Vt=await new Slt().decodeFromImageElement(qt);await Jt(Vt.getText())}catch{U(!0)}}},style:{display:"none"}})]})]}),k&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[C.jsx("h5",{className:"mb-3",children:"Barcode not recognized"}),C.jsx("p",{children:"Would you like to try scanning the nutrition label instead?"}),C.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[C.jsx("button",{className:"btn btn-secondary",onClick:()=>U(!1),children:"Cancel"}),C.jsxs("label",{className:"btn btn-primary",children:[" Scan Label",C.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:It=>{handleOCRImage(It),U(!1)},style:{display:"none"}})]})]})]})}),D&&C.jsxs("div",{className:"scan-box text-center",children:[C.jsx("video",{ref:L,style:{width:"100%",maxHeight:"200px"}}),C.jsx("button",{className:"btn btn-primary mt-2",onClick:Rt,children:"Capture"}),C.jsx("button",{className:"btn btn-danger mt-2 ms-2",onClick:Mt,children:"Cancel"})]}),E&&Se(),T&&Se(!0),C.jsxs("div",{className:"modal-footer mt-3",children:[C.jsx("button",{className:"btn btn-save btn-primary",onClick:Qt,disabled:Et,children:"Save"}),C.jsx("button",{className:"btn btn-exit btn-danger",onClick:()=>{F(),t()},children:"Exit"})]})]})}),v==="weight"&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[C.jsx(Qrt,{user:i,onClose:()=>{F(),t()}}),C.jsx("div",{className:"d-flex justify-content-end",children:C.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{F(),t()},children:"Close"})})]})})]});function Se(It=!1){return C.jsxs("div",{className:"TotalFoodSection",children:[p.map((Gt,qt)=>C.jsxs("div",{className:"food-section",children:[C.jsxs("div",{className:"FoodNameSection d-flex align-items-center gap-2",children:[C.jsx("textarea",{className:"FoodNameTextArea",value:h[qt],onChange:Vt=>{const bt=[...h];bt[qt]=Vt.target.value,f(bt)},placeholder:"Enter food name (e.g., boiled egg)"}),It&&C.jsx("button",{className:"btn btn-sm btn-info",onClick:()=>Ut(h[qt],qt),children:" Auto-Fill"})]}),C.jsxs("div",{className:"d-flex align-items-center mb-3 mt-2",children:[C.jsx("input",{type:"number",min:"0.1",step:"0.1",value:z,onChange:Vt=>B(parseFloat(Vt.target.value)||0),className:"form-control me-2",style:{width:"80px"}}),C.jsx("select",{className:"form-select",value:yt,onChange:Vt=>wt(Vt.target.value),children:j.map((Vt,bt)=>C.jsx("option",{value:Vt.value,children:Vt.label},bt))})]}),C.jsxs("div",{className:"row fw-bold mb-2 text-white",style:{fontSize:"12px",padding:"0 10px"},children:[C.jsx("div",{className:"col",children:"Type"}),C.jsx("div",{className:"col",children:"Count (per 100g)"}),C.jsx("div",{className:"col",children:"Total"}),C.jsx("div",{className:"col",children:"Remove"})]}),C.jsx("div",{className:"SplitTable",children:Gt.map((Vt,bt)=>{const en=yt==="custom"?Y:yt,ae=en>0?z*en/100:1;return C.jsxs("div",{className:"row mb-1",children:[C.jsxs("div",{className:"col",children:[C.jsx("input",{list:`nutrient-options-${qt}-${bt}`,className:"form-control",value:Vt.type,onChange:xe=>mt(qt,bt,"type",Z(xe.target.value))}),C.jsx("datalist",{id:`nutrient-options-${qt}-${bt}`,children:vt.map(xe=>C.jsx("option",{value:xe},xe))})]}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control",value:Vt.count,onChange:xe=>mt(qt,bt,"count",xe.target.value)})}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control",value:(parseFloat(Vt.count||0)*ae).toFixed(2),disabled:!0})}),C.jsx("div",{className:"col text-center",children:C.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>gt(qt,bt),children:""})})]},bt)})}),C.jsx("button",{className:"AddItemButton mt-1",onClick:()=>tt(qt),children:"Add Nutrient"})]},qt)),C.jsx("button",{className:"AddItemButton mt-3",onClick:ot,children:"Add Food Item"})]})}}const A2="/knowurfood/assets/Logo-L9hp3FVR.png",Xut=async n=>{const t=As(Ur,"users",n),e=await By(t);return e.exists()?e.data():null};function Qut({onLoginSuccess:n}){const[t,e]=rt.useState("login"),[r,i]=rt.useState(1),[s,a]=rt.useState(""),[o,l]=rt.useState(""),[h,f]=rt.useState(""),[p,m]=rt.useState(""),[v,x]=rt.useState(""),[E,b]=rt.useState(2e3),[T,S]=rt.useState("Breakfast,Lunch,Dinner"),[D,P]=rt.useState("g"),[k,U]=rt.useState(""),[M,I]=rt.useState(""),[N,L]=rt.useState(""),[j,z]=rt.useState(""),[B,yt]=rt.useState("08:00"),[wt,Y]=rt.useState("13:00"),[at,vt]=rt.useState("19:00"),[Z,F]=rt.useState(""),[$,ot]=rt.useState("male"),[tt,gt]=rt.useState(""),[mt,Et]=rt.useState({}),[Qt,Mt]=rt.useState(!1),[Rt,Ut]=rt.useState(!1),[Jt,Re]=rt.useState(!1);rt.useEffect(()=>{if(k&&M&&N&&j&&Z&&$){const bt=Math.max(1,Math.ceil((new Date(j)-new Date)/864e5)),ae=(N-k)*7700/bt,xe=$==="male"?10*k+6.25*M-5*Z+5:10*k+6.25*M-5*Z-161,hn=Math.round(xe+ae);isNaN(hn)||b(hn)}},[k,M,N,j,Z,$]);const Se=()=>{a(""),l(""),f(""),m(""),x(""),b(2e3),S("Breakfast,Lunch,Dinner"),P("g"),U(""),I(""),L(""),z(""),yt("08:00"),Y("13:00"),vt("19:00"),F(""),ot("male"),gt(""),Et({}),i(1),Re(!1)},It=()=>{e(bt=>bt==="login"?"register":"login"),Se()},Gt=()=>{const bt={};if(r===1&&(s||(bt.username="Email is required"),o||(bt.password="Password is required"),h||(bt.confirmPassword="Please confirm your password"),o&&h&&o!==h&&(bt.confirmPassword="Passwords do not match")),r===2&&(p||(bt.firstName="First name is required"),v||(bt.lastName="Last name is required"),Z||(bt.age="Age is required"),k||(bt.currentWeight="Current weight is required"),M||(bt.height="Height is required"),N||(bt.goalWeight="Goal weight is required"),j||(bt.goalDate="Goal date is required")),Object.keys(bt).length>0){Et(bt);return}Et({}),gt(""),i(r+1)},qt=async bt=>{bt.preventDefault(),gt(""),Et({}),Mt(!0);try{let en;if(t==="register")en=await qrt({email:s,password:o,firstName:p,lastName:v,calorieGoal:Number(E),mealOrder:T.split(","),unit:D,currentWeight:parseFloat(k),height:parseFloat(M),goalWeight:parseFloat(N),goalDate:j,breakfastTime:B,lunchTime:wt,dinnerTime:at,age:parseInt(Z),gender:$});else{const ae=XA();await YZ(ae,Jt?A5:qA);const rr=(await WZ(ae,s,o)).user;Jt?localStorage.setItem("rememberMe","true"):localStorage.removeItem("rememberMe");const Dt=await Xut(rr.uid);en={uid:rr.uid,email:rr.email,...Dt}}n(en)}catch(en){gt(en.message)}finally{Mt(!1)}},Vt=()=>{switch(r){case 1:return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Email"}),C.jsx("input",{type:"email",className:`form-control ${mt.username?"is-invalid":""}`,value:s,onChange:bt=>a(bt.target.value)}),mt.username&&C.jsx("div",{className:"text-danger",children:mt.username})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Password"}),C.jsx("input",{type:Rt?"text":"password",className:`form-control ${mt.password?"is-invalid":""}`,value:o,onChange:bt=>l(bt.target.value)}),mt.password&&C.jsx("div",{className:"text-danger",children:mt.password})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Confirm Password"}),C.jsx("input",{type:Rt?"text":"password",className:`form-control ${mt.confirmPassword?"is-invalid":""}`,value:h,onChange:bt=>f(bt.target.value)}),mt.confirmPassword&&C.jsx("div",{className:"text-danger",children:mt.confirmPassword})]})]});case 2:return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"First Name"}),C.jsx("input",{type:"text",className:`form-control ${mt.firstName?"is-invalid":""}`,value:p,onChange:bt=>m(bt.target.value)}),mt.firstName&&C.jsx("div",{className:"text-danger",children:mt.firstName})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Last Name"}),C.jsx("input",{type:"text",className:`form-control ${mt.lastName?"is-invalid":""}`,value:v,onChange:bt=>x(bt.target.value)}),mt.lastName&&C.jsx("div",{className:"text-danger",children:mt.lastName})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Age"}),C.jsx("input",{type:"number",className:`form-control ${mt.age?"is-invalid":""}`,value:Z,onChange:bt=>F(bt.target.value)}),mt.age&&C.jsx("div",{className:"text-danger",children:mt.age})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Gender"}),C.jsxs("select",{className:"form-control",value:$,onChange:bt=>ot(bt.target.value),children:[C.jsx("option",{value:"male",children:"Male"}),C.jsx("option",{value:"female",children:"Female"})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Current Weight (kg)"}),C.jsx("input",{type:"number",className:`form-control ${mt.currentWeight?"is-invalid":""}`,value:k,onChange:bt=>U(bt.target.value)}),mt.currentWeight&&C.jsx("div",{className:"text-danger",children:mt.currentWeight})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Height (cm)"}),C.jsx("input",{type:"number",className:`form-control ${mt.height?"is-invalid":""}`,value:M,onChange:bt=>I(bt.target.value)}),mt.height&&C.jsx("div",{className:"text-danger",children:mt.height})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Goal Weight (kg)"}),C.jsx("input",{type:"number",className:`form-control ${mt.goalWeight?"is-invalid":""}`,value:N,onChange:bt=>L(bt.target.value)}),mt.goalWeight&&C.jsx("div",{className:"text-danger",children:mt.goalWeight})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Goal Date"}),C.jsx("input",{type:"date",className:`form-control ${mt.goalDate?"is-invalid":""}`,value:j,onChange:bt=>z(bt.target.value)}),mt.goalDate&&C.jsx("div",{className:"text-danger",children:mt.goalDate})]})]});case 3:return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Calorie Goal"}),C.jsx("input",{type:"number",className:"form-control",value:E,onChange:bt=>b(bt.target.value)})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Meal Order"}),C.jsxs("select",{className:"form-control",value:T,onChange:bt=>S(bt.target.value),children:[C.jsx("option",{value:"Breakfast,Lunch,Dinner",children:"Breakfast  Lunch  Dinner"}),C.jsx("option",{value:"Dinner,Lunch,Breakfast",children:"Dinner  Lunch  Breakfast"})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Preferred Unit"}),C.jsxs("select",{className:"form-control",value:D,onChange:bt=>P(bt.target.value),children:[C.jsx("option",{value:"g",children:"Grams"}),C.jsx("option",{value:"mg",children:"Milligrams"}),C.jsx("option",{value:"kcal",children:"Calories"})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Breakfast Time"}),C.jsx("input",{type:"time",className:"form-control",value:B,onChange:bt=>yt(bt.target.value)})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Lunch Time"}),C.jsx("input",{type:"time",className:"form-control",value:wt,onChange:bt=>Y(bt.target.value)})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Dinner Time"}),C.jsx("input",{type:"time",className:"form-control",value:at,onChange:bt=>vt(bt.target.value)})]})]});default:return null}};return C.jsxs("div",{className:"auth-container fade-slide-in",children:[C.jsx("div",{className:"text-center",children:C.jsx("img",{src:A2,alt:"KnowUrFood Logo",style:{width:"200px"}})}),C.jsxs("div",{className:"auth-box shadow rounded",children:[C.jsx("h2",{className:"auth-title",children:t==="login"?"LOGIN":"REGISTER"}),C.jsx("form",{onSubmit:bt=>bt.preventDefault(),className:"auth-form",children:t==="login"?C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Email"}),C.jsx("input",{type:"email",className:"form-control",value:s,onChange:bt=>a(bt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Password"}),C.jsx("input",{type:Rt?"text":"password",className:"form-control",value:o,onChange:bt=>l(bt.target.value),required:!0})]}),C.jsxs("div",{className:"form-check",children:[C.jsx("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",checked:Jt,onChange:bt=>Re(bt.target.checked)}),C.jsx("label",{className:"form-check-label",htmlFor:"rememberMe",children:"Remember Me"})]}),C.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3 mb-2",onClick:qt,disabled:Qt,children:Qt?C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Logging in..."]}):"Login"})]}):C.jsxs("div",{className:`fade-step step-${r}`,children:[Vt(),C.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[r>1&&C.jsx("button",{type:"button",className:"btn btn-outline-light",onClick:()=>i(r-1),children:" Back"}),r<3?C.jsx("button",{type:"button",className:"btn btn-primary ms-auto",onClick:Gt,children:"Next "}):C.jsx("button",{type:"submit",onClick:qt,className:"btn btn-success ms-auto",disabled:Qt,children:Qt?C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Registering..."]}):"Register"})]})]})}),C.jsxs("p",{className:"text-white text-center mt-3",children:[t==="login"?"Don't have an account?":"Already have an account?"," ",C.jsx("span",{className:"text-link",onClick:It,children:t==="login"?"Register":"Login"})]}),tt&&C.jsx("p",{className:"text-danger text-center mt-2",children:tt})]})]})}var Qr="top",Ni="bottom",Mi="right",Zr="left",Wy="auto",Gf=[Qr,Ni,Mi,Zr],fu="start",bf="end",B7="clippingParents",dS="viewport",Nh="popper",F7="reference",T2=Gf.reduce(function(n,t){return n.concat([t+"-"+fu,t+"-"+bf])},[]),pS=[].concat(Gf,[Wy]).reduce(function(n,t){return n.concat([t,t+"-"+fu,t+"-"+bf])},[]),U7="beforeRead",j7="read",H7="afterRead",z7="beforeMain",G7="main",W7="afterMain",$7="beforeWrite",q7="write",Y7="afterWrite",K7=[U7,j7,H7,z7,G7,W7,$7,q7,Y7];function va(n){return n?(n.nodeName||"").toLowerCase():null}function Pi(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function du(n){var t=Pi(n).Element;return n instanceof t||n instanceof Element}function rs(n){var t=Pi(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function gS(n){if(typeof ShadowRoot>"u")return!1;var t=Pi(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function Zut(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var r=t.styles[e]||{},i=t.attributes[e]||{},s=t.elements[e];!rs(s)||!va(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function Jut(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],s=t.attributes[r]||{},a=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:e[r]),o=a.reduce(function(l,h){return l[h]="",l},{});!rs(i)||!va(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const mS={name:"applyStyles",enabled:!0,phase:"write",fn:Zut,effect:Jut,requires:["computeStyles"]};function ha(n){return n.split("-")[0]}var Zl=Math.max,Qv=Math.min,Af=Math.round;function S2(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function X7(){return!/^((?!chrome|android).)*safari/i.test(S2())}function Tf(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var r=n.getBoundingClientRect(),i=1,s=1;t&&rs(n)&&(i=n.offsetWidth>0&&Af(r.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Af(r.height)/n.offsetHeight||1);var a=du(n)?Pi(n):window,o=a.visualViewport,l=!X7()&&e,h=(r.left+(l&&o?o.offsetLeft:0))/i,f=(r.top+(l&&o?o.offsetTop:0))/s,p=r.width/i,m=r.height/s;return{width:p,height:m,top:f,right:h+p,bottom:f+m,left:h,x:h,y:f}}function vS(n){var t=Tf(n),e=n.offsetWidth,r=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:r}}function Q7(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&gS(e)){var r=t;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function oo(n){return Pi(n).getComputedStyle(n)}function tht(n){return["table","td","th"].indexOf(va(n))>=0}function Lc(n){return((du(n)?n.ownerDocument:n.document)||window.document).documentElement}function $y(n){return va(n)==="html"?n:n.assignedSlot||n.parentNode||(gS(n)?n.host:null)||Lc(n)}function Q4(n){return!rs(n)||oo(n).position==="fixed"?null:n.offsetParent}function eht(n){var t=/firefox/i.test(S2()),e=/Trident/i.test(S2());if(e&&rs(n)){var r=oo(n);if(r.position==="fixed")return null}var i=$y(n);for(gS(i)&&(i=i.host);rs(i)&&["html","body"].indexOf(va(i))<0;){var s=oo(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function h0(n){for(var t=Pi(n),e=Q4(n);e&&tht(e)&&oo(e).position==="static";)e=Q4(e);return e&&(va(e)==="html"||va(e)==="body"&&oo(e).position==="static")?t:e||eht(n)||t}function yS(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function og(n,t,e){return Zl(n,Qv(t,e))}function nht(n,t,e){var r=og(n,t,e);return r>e?e:r}function Z7(){return{top:0,right:0,bottom:0,left:0}}function J7(n){return Object.assign({},Z7(),n)}function tV(n,t){return t.reduce(function(e,r){return e[r]=n,e},{})}var rht=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,J7(typeof t!="number"?t:tV(t,Gf))};function iht(n){var t,e=n.state,r=n.name,i=n.options,s=e.elements.arrow,a=e.modifiersData.popperOffsets,o=ha(e.placement),l=yS(o),h=[Zr,Mi].indexOf(o)>=0,f=h?"height":"width";if(!(!s||!a)){var p=rht(i.padding,e),m=vS(s),v=l==="y"?Qr:Zr,x=l==="y"?Ni:Mi,E=e.rects.reference[f]+e.rects.reference[l]-a[l]-e.rects.popper[f],b=a[l]-e.rects.reference[l],T=h0(s),S=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,D=E/2-b/2,P=p[v],k=S-m[f]-p[x],U=S/2-m[f]/2+D,M=og(P,U,k),I=l;e.modifiersData[r]=(t={},t[I]=M,t.centerOffset=M-U,t)}}function sht(n){var t=n.state,e=n.options,r=e.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Q7(t.elements.popper,i)&&(t.elements.arrow=i))}const eV={name:"arrow",enabled:!0,phase:"main",fn:iht,effect:sht,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sf(n){return n.split("-")[1]}var aht={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oht(n,t){var e=n.x,r=n.y,i=t.devicePixelRatio||1;return{x:Af(e*i)/i||0,y:Af(r*i)/i||0}}function Z4(n){var t,e=n.popper,r=n.popperRect,i=n.placement,s=n.variation,a=n.offsets,o=n.position,l=n.gpuAcceleration,h=n.adaptive,f=n.roundOffsets,p=n.isFixed,m=a.x,v=m===void 0?0:m,x=a.y,E=x===void 0?0:x,b=typeof f=="function"?f({x:v,y:E}):{x:v,y:E};v=b.x,E=b.y;var T=a.hasOwnProperty("x"),S=a.hasOwnProperty("y"),D=Zr,P=Qr,k=window;if(h){var U=h0(e),M="clientHeight",I="clientWidth";if(U===Pi(e)&&(U=Lc(e),oo(U).position!=="static"&&o==="absolute"&&(M="scrollHeight",I="scrollWidth")),U=U,i===Qr||(i===Zr||i===Mi)&&s===bf){P=Ni;var N=p&&U===k&&k.visualViewport?k.visualViewport.height:U[M];E-=N-r.height,E*=l?1:-1}if(i===Zr||(i===Qr||i===Ni)&&s===bf){D=Mi;var L=p&&U===k&&k.visualViewport?k.visualViewport.width:U[I];v-=L-r.width,v*=l?1:-1}}var j=Object.assign({position:o},h&&aht),z=f===!0?oht({x:v,y:E},Pi(e)):{x:v,y:E};if(v=z.x,E=z.y,l){var B;return Object.assign({},j,(B={},B[P]=S?"0":"",B[D]=T?"0":"",B.transform=(k.devicePixelRatio||1)<=1?"translate("+v+"px, "+E+"px)":"translate3d("+v+"px, "+E+"px, 0)",B))}return Object.assign({},j,(t={},t[P]=S?E+"px":"",t[D]=T?v+"px":"",t.transform="",t))}function cht(n){var t=n.state,e=n.options,r=e.gpuAcceleration,i=r===void 0?!0:r,s=e.adaptive,a=s===void 0?!0:s,o=e.roundOffsets,l=o===void 0?!0:o,h={placement:ha(t.placement),variation:Sf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Z4(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Z4(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const _S={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cht,data:{}};var p1={passive:!0};function lht(n){var t=n.state,e=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,o=a===void 0?!0:a,l=Pi(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&h.forEach(function(f){f.addEventListener("scroll",e.update,p1)}),o&&l.addEventListener("resize",e.update,p1),function(){s&&h.forEach(function(f){f.removeEventListener("scroll",e.update,p1)}),o&&l.removeEventListener("resize",e.update,p1)}}const xS={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lht,data:{}};var uht={left:"right",right:"left",bottom:"top",top:"bottom"};function tv(n){return n.replace(/left|right|bottom|top/g,function(t){return uht[t]})}var hht={start:"end",end:"start"};function J4(n){return n.replace(/start|end/g,function(t){return hht[t]})}function wS(n){var t=Pi(n),e=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:e,scrollTop:r}}function ES(n){return Tf(Lc(n)).left+wS(n).scrollLeft}function fht(n,t){var e=Pi(n),r=Lc(n),i=e.visualViewport,s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var h=X7();(h||!h&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+ES(n),y:l}}function dht(n){var t,e=Lc(n),r=wS(n),i=(t=n.ownerDocument)==null?void 0:t.body,s=Zl(e.scrollWidth,e.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Zl(e.scrollHeight,e.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+ES(n),l=-r.scrollTop;return oo(i||e).direction==="rtl"&&(o+=Zl(e.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function bS(n){var t=oo(n),e=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+i+r)}function nV(n){return["html","body","#document"].indexOf(va(n))>=0?n.ownerDocument.body:rs(n)&&bS(n)?n:nV($y(n))}function cg(n,t){var e;t===void 0&&(t=[]);var r=nV(n),i=r===((e=n.ownerDocument)==null?void 0:e.body),s=Pi(r),a=i?[s].concat(s.visualViewport||[],bS(r)?r:[]):r,o=t.concat(a);return i?o:o.concat(cg($y(a)))}function C2(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function pht(n,t){var e=Tf(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function tP(n,t,e){return t===dS?C2(fht(n,e)):du(t)?pht(t,e):C2(dht(Lc(n)))}function ght(n){var t=cg($y(n)),e=["absolute","fixed"].indexOf(oo(n).position)>=0,r=e&&rs(n)?h0(n):n;return du(r)?t.filter(function(i){return du(i)&&Q7(i,r)&&va(i)!=="body"}):[]}function mht(n,t,e,r){var i=t==="clippingParents"?ght(n):[].concat(t),s=[].concat(i,[e]),a=s[0],o=s.reduce(function(l,h){var f=tP(n,h,r);return l.top=Zl(f.top,l.top),l.right=Qv(f.right,l.right),l.bottom=Qv(f.bottom,l.bottom),l.left=Zl(f.left,l.left),l},tP(n,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function rV(n){var t=n.reference,e=n.element,r=n.placement,i=r?ha(r):null,s=r?Sf(r):null,a=t.x+t.width/2-e.width/2,o=t.y+t.height/2-e.height/2,l;switch(i){case Qr:l={x:a,y:t.y-e.height};break;case Ni:l={x:a,y:t.y+t.height};break;case Mi:l={x:t.x+t.width,y:o};break;case Zr:l={x:t.x-e.width,y:o};break;default:l={x:t.x,y:t.y}}var h=i?yS(i):null;if(h!=null){var f=h==="y"?"height":"width";switch(s){case fu:l[h]=l[h]-(t[f]/2-e[f]/2);break;case bf:l[h]=l[h]+(t[f]/2-e[f]/2);break}}return l}function Cf(n,t){t===void 0&&(t={});var e=t,r=e.placement,i=r===void 0?n.placement:r,s=e.strategy,a=s===void 0?n.strategy:s,o=e.boundary,l=o===void 0?B7:o,h=e.rootBoundary,f=h===void 0?dS:h,p=e.elementContext,m=p===void 0?Nh:p,v=e.altBoundary,x=v===void 0?!1:v,E=e.padding,b=E===void 0?0:E,T=J7(typeof b!="number"?b:tV(b,Gf)),S=m===Nh?F7:Nh,D=n.rects.popper,P=n.elements[x?S:m],k=mht(du(P)?P:P.contextElement||Lc(n.elements.popper),l,f,a),U=Tf(n.elements.reference),M=rV({reference:U,element:D,placement:i}),I=C2(Object.assign({},D,M)),N=m===Nh?I:U,L={top:k.top-N.top+T.top,bottom:N.bottom-k.bottom+T.bottom,left:k.left-N.left+T.left,right:N.right-k.right+T.right},j=n.modifiersData.offset;if(m===Nh&&j){var z=j[i];Object.keys(L).forEach(function(B){var yt=[Mi,Ni].indexOf(B)>=0?1:-1,wt=[Qr,Ni].indexOf(B)>=0?"y":"x";L[B]+=z[wt]*yt})}return L}function vht(n,t){t===void 0&&(t={});var e=t,r=e.placement,i=e.boundary,s=e.rootBoundary,a=e.padding,o=e.flipVariations,l=e.allowedAutoPlacements,h=l===void 0?pS:l,f=Sf(r),p=f?o?T2:T2.filter(function(x){return Sf(x)===f}):Gf,m=p.filter(function(x){return h.indexOf(x)>=0});m.length===0&&(m=p);var v=m.reduce(function(x,E){return x[E]=Cf(n,{placement:E,boundary:i,rootBoundary:s,padding:a})[ha(E)],x},{});return Object.keys(v).sort(function(x,E){return v[x]-v[E]})}function yht(n){if(ha(n)===Wy)return[];var t=tv(n);return[J4(n),t,J4(t)]}function _ht(n){var t=n.state,e=n.options,r=n.name;if(!t.modifiersData[r]._skip){for(var i=e.mainAxis,s=i===void 0?!0:i,a=e.altAxis,o=a===void 0?!0:a,l=e.fallbackPlacements,h=e.padding,f=e.boundary,p=e.rootBoundary,m=e.altBoundary,v=e.flipVariations,x=v===void 0?!0:v,E=e.allowedAutoPlacements,b=t.options.placement,T=ha(b),S=T===b,D=l||(S||!x?[tv(b)]:yht(b)),P=[b].concat(D).reduce(function(gt,mt){return gt.concat(ha(mt)===Wy?vht(t,{placement:mt,boundary:f,rootBoundary:p,padding:h,flipVariations:x,allowedAutoPlacements:E}):mt)},[]),k=t.rects.reference,U=t.rects.popper,M=new Map,I=!0,N=P[0],L=0;L<P.length;L++){var j=P[L],z=ha(j),B=Sf(j)===fu,yt=[Qr,Ni].indexOf(z)>=0,wt=yt?"width":"height",Y=Cf(t,{placement:j,boundary:f,rootBoundary:p,altBoundary:m,padding:h}),at=yt?B?Mi:Zr:B?Ni:Qr;k[wt]>U[wt]&&(at=tv(at));var vt=tv(at),Z=[];if(s&&Z.push(Y[z]<=0),o&&Z.push(Y[at]<=0,Y[vt]<=0),Z.every(function(gt){return gt})){N=j,I=!1;break}M.set(j,Z)}if(I)for(var F=x?3:1,$=function(mt){var Et=P.find(function(Qt){var Mt=M.get(Qt);if(Mt)return Mt.slice(0,mt).every(function(Rt){return Rt})});if(Et)return N=Et,"break"},ot=F;ot>0;ot--){var tt=$(ot);if(tt==="break")break}t.placement!==N&&(t.modifiersData[r]._skip=!0,t.placement=N,t.reset=!0)}}const iV={name:"flip",enabled:!0,phase:"main",fn:_ht,requiresIfExists:["offset"],data:{_skip:!1}};function eP(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function nP(n){return[Qr,Mi,Ni,Zr].some(function(t){return n[t]>=0})}function xht(n){var t=n.state,e=n.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,a=Cf(t,{elementContext:"reference"}),o=Cf(t,{altBoundary:!0}),l=eP(a,r),h=eP(o,i,s),f=nP(l),p=nP(h);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":p})}const sV={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xht};function wht(n,t,e){var r=ha(n),i=[Zr,Qr].indexOf(r)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[Zr,Mi].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function Eht(n){var t=n.state,e=n.options,r=n.name,i=e.offset,s=i===void 0?[0,0]:i,a=pS.reduce(function(f,p){return f[p]=wht(p,t.rects,s),f},{}),o=a[t.placement],l=o.x,h=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[r]=a}const aV={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Eht};function bht(n){var t=n.state,e=n.name;t.modifiersData[e]=rV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const AS={name:"popperOffsets",enabled:!0,phase:"read",fn:bht,data:{}};function Aht(n){return n==="x"?"y":"x"}function Tht(n){var t=n.state,e=n.options,r=n.name,i=e.mainAxis,s=i===void 0?!0:i,a=e.altAxis,o=a===void 0?!1:a,l=e.boundary,h=e.rootBoundary,f=e.altBoundary,p=e.padding,m=e.tether,v=m===void 0?!0:m,x=e.tetherOffset,E=x===void 0?0:x,b=Cf(t,{boundary:l,rootBoundary:h,padding:p,altBoundary:f}),T=ha(t.placement),S=Sf(t.placement),D=!S,P=yS(T),k=Aht(P),U=t.modifiersData.popperOffsets,M=t.rects.reference,I=t.rects.popper,N=typeof E=="function"?E(Object.assign({},t.rects,{placement:t.placement})):E,L=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),j=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,z={x:0,y:0};if(U){if(s){var B,yt=P==="y"?Qr:Zr,wt=P==="y"?Ni:Mi,Y=P==="y"?"height":"width",at=U[P],vt=at+b[yt],Z=at-b[wt],F=v?-I[Y]/2:0,$=S===fu?M[Y]:I[Y],ot=S===fu?-I[Y]:-M[Y],tt=t.elements.arrow,gt=v&&tt?vS(tt):{width:0,height:0},mt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Z7(),Et=mt[yt],Qt=mt[wt],Mt=og(0,M[Y],gt[Y]),Rt=D?M[Y]/2-F-Mt-Et-L.mainAxis:$-Mt-Et-L.mainAxis,Ut=D?-M[Y]/2+F+Mt+Qt+L.mainAxis:ot+Mt+Qt+L.mainAxis,Jt=t.elements.arrow&&h0(t.elements.arrow),Re=Jt?P==="y"?Jt.clientTop||0:Jt.clientLeft||0:0,Se=(B=j==null?void 0:j[P])!=null?B:0,It=at+Rt-Se-Re,Gt=at+Ut-Se,qt=og(v?Qv(vt,It):vt,at,v?Zl(Z,Gt):Z);U[P]=qt,z[P]=qt-at}if(o){var Vt,bt=P==="x"?Qr:Zr,en=P==="x"?Ni:Mi,ae=U[k],xe=k==="y"?"height":"width",hn=ae+b[bt],rr=ae-b[en],Dt=[Qr,Zr].indexOf(T)!==-1,fe=(Vt=j==null?void 0:j[k])!=null?Vt:0,be=Dt?hn:ae-M[xe]-I[xe]-fe+L.altAxis,pe=Dt?ae+M[xe]+I[xe]-fe-L.altAxis:rr,ir=v&&Dt?nht(be,ae,pe):og(v?be:hn,ae,v?pe:rr);U[k]=ir,z[k]=ir-ae}t.modifiersData[r]=z}}const oV={name:"preventOverflow",enabled:!0,phase:"main",fn:Tht,requiresIfExists:["offset"]};function Sht(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Cht(n){return n===Pi(n)||!rs(n)?wS(n):Sht(n)}function Iht(n){var t=n.getBoundingClientRect(),e=Af(t.width)/n.offsetWidth||1,r=Af(t.height)/n.offsetHeight||1;return e!==1||r!==1}function Dht(n,t,e){e===void 0&&(e=!1);var r=rs(t),i=rs(t)&&Iht(t),s=Lc(t),a=Tf(n,i,e),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!e)&&((va(t)!=="body"||bS(s))&&(o=Cht(t)),rs(t)?(l=Tf(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=ES(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Oht(n){var t=new Map,e=new Set,r=[];n.forEach(function(s){t.set(s.name,s)});function i(s){e.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!e.has(o)){var l=t.get(o);l&&i(l)}}),r.push(s)}return n.forEach(function(s){e.has(s.name)||i(s)}),r}function Rht(n){var t=Oht(n);return K7.reduce(function(e,r){return e.concat(t.filter(function(i){return i.phase===r}))},[])}function Nht(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function Mht(n){var t=n.reduce(function(e,r){var i=e[r.name];return e[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,e},{});return Object.keys(t).map(function(e){return t[e]})}var rP={placement:"bottom",modifiers:[],strategy:"absolute"};function iP(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function qy(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,r=e===void 0?[]:e,i=t.defaultOptions,s=i===void 0?rP:i;return function(o,l,h){h===void 0&&(h=s);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},rP,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},p=[],m=!1,v={state:f,setOptions:function(T){var S=typeof T=="function"?T(f.options):T;E(),f.options=Object.assign({},s,f.options,S),f.scrollParents={reference:du(o)?cg(o):o.contextElement?cg(o.contextElement):[],popper:cg(l)};var D=Rht(Mht([].concat(r,f.options.modifiers)));return f.orderedModifiers=D.filter(function(P){return P.enabled}),x(),v.update()},forceUpdate:function(){if(!m){var T=f.elements,S=T.reference,D=T.popper;if(iP(S,D)){f.rects={reference:Dht(S,h0(D),f.options.strategy==="fixed"),popper:vS(D)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(L){return f.modifiersData[L.name]=Object.assign({},L.data)});for(var P=0;P<f.orderedModifiers.length;P++){if(f.reset===!0){f.reset=!1,P=-1;continue}var k=f.orderedModifiers[P],U=k.fn,M=k.options,I=M===void 0?{}:M,N=k.name;typeof U=="function"&&(f=U({state:f,options:I,name:N,instance:v})||f)}}}},update:Nht(function(){return new Promise(function(b){v.forceUpdate(),b(f)})}),destroy:function(){E(),m=!0}};if(!iP(o,l))return v;v.setOptions(h).then(function(b){!m&&h.onFirstUpdate&&h.onFirstUpdate(b)});function x(){f.orderedModifiers.forEach(function(b){var T=b.name,S=b.options,D=S===void 0?{}:S,P=b.effect;if(typeof P=="function"){var k=P({state:f,name:T,instance:v,options:D}),U=function(){};p.push(k||U)}})}function E(){p.forEach(function(b){return b()}),p=[]}return v}}var Pht=qy(),kht=[xS,AS,_S,mS],Lht=qy({defaultModifiers:kht}),Vht=[xS,AS,_S,mS,aV,iV,oV,eV,sV],TS=qy({defaultModifiers:Vht});const cV=Object.freeze(Object.defineProperty({__proto__:null,afterMain:W7,afterRead:H7,afterWrite:Y7,applyStyles:mS,arrow:eV,auto:Wy,basePlacements:Gf,beforeMain:z7,beforeRead:U7,beforeWrite:$7,bottom:Ni,clippingParents:B7,computeStyles:_S,createPopper:TS,createPopperBase:Pht,createPopperLite:Lht,detectOverflow:Cf,end:bf,eventListeners:xS,flip:iV,hide:sV,left:Zr,main:G7,modifierPhases:K7,offset:aV,placements:pS,popper:Nh,popperGenerator:qy,popperOffsets:AS,preventOverflow:oV,read:j7,reference:F7,right:Mi,start:fu,top:Qr,variationPlacements:T2,viewport:dS,write:q7},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ko=new Map,IE={set(n,t,e){Ko.has(n)||Ko.set(n,new Map);const r=Ko.get(n);if(!r.has(t)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(t,e)},get(n,t){return Ko.has(n)&&Ko.get(n).get(t)||null},remove(n,t){if(!Ko.has(n))return;const e=Ko.get(n);e.delete(t),e.size===0&&Ko.delete(n)}},Bht=1e6,Fht=1e3,I2="transitionend",lV=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),Uht=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),jht=n=>{do n+=Math.floor(Math.random()*Bht);while(document.getElementById(n));return n},Hht=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const r=Number.parseFloat(t),i=Number.parseFloat(e);return!r&&!i?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*Fht)},uV=n=>{n.dispatchEvent(new Event(I2))},Za=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Sc=n=>Za(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(lV(n)):null,Wf=n=>{if(!Za(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const r=n.closest("summary");if(r&&r.parentNode!==e||r===null)return!1}return t},Cc=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",hV=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?hV(n.parentNode):null},Zv=()=>{},f0=n=>{n.offsetHeight},fV=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DE=[],zht=n=>{document.readyState==="loading"?(DE.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of DE)t()}),DE.push(n)):n()},ss=()=>document.documentElement.dir==="rtl",os=n=>{zht(()=>{const t=fV();if(t){const e=n.NAME,r=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=r,n.jQueryInterface)}})},li=(n,t=[],e=n)=>typeof n=="function"?n.call(...t):e,dV=(n,t,e=!0)=>{if(!e){li(n);return}const i=Hht(t)+5;let s=!1;const a=({target:o})=>{o===t&&(s=!0,t.removeEventListener(I2,a),li(n))};t.addEventListener(I2,a),setTimeout(()=>{s||uV(t)},i)},SS=(n,t,e,r)=>{const i=n.length;let s=n.indexOf(t);return s===-1?!e&&r?n[i-1]:n[0]:(s+=e?1:-1,r&&(s=(s+i)%i),n[Math.max(0,Math.min(s,i-1))])},Ght=/[^.]*(?=\..*)\.|.*/,Wht=/\..*/,$ht=/::\d+$/,OE={};let sP=1;const pV={mouseenter:"mouseover",mouseleave:"mouseout"},qht=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function gV(n,t){return t&&`${t}::${sP++}`||n.uidEvent||sP++}function mV(n){const t=gV(n);return n.uidEvent=t,OE[t]=OE[t]||{},OE[t]}function Yht(n,t){return function e(r){return CS(r,{delegateTarget:n}),e.oneOff&&xt.off(n,r.type,t),t.apply(n,[r])}}function Kht(n,t,e){return function r(i){const s=n.querySelectorAll(t);for(let{target:a}=i;a&&a!==this;a=a.parentNode)for(const o of s)if(o===a)return CS(i,{delegateTarget:a}),r.oneOff&&xt.off(n,i.type,t,e),e.apply(a,[i])}}function vV(n,t,e=null){return Object.values(n).find(r=>r.callable===t&&r.delegationSelector===e)}function yV(n,t,e){const r=typeof t=="string",i=r?e:t||e;let s=_V(n);return qht.has(s)||(s=n),[r,i,s]}function aP(n,t,e,r,i){if(typeof t!="string"||!n)return;let[s,a,o]=yV(t,e,r);t in pV&&(a=(x=>function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return x.call(this,E)})(a));const l=mV(n),h=l[o]||(l[o]={}),f=vV(h,a,s?e:null);if(f){f.oneOff=f.oneOff&&i;return}const p=gV(a,t.replace(Ght,"")),m=s?Kht(n,e,a):Yht(n,a);m.delegationSelector=s?e:null,m.callable=a,m.oneOff=i,m.uidEvent=p,h[p]=m,n.addEventListener(o,m,s)}function D2(n,t,e,r,i){const s=vV(t[e],r,i);s&&(n.removeEventListener(e,s,!!i),delete t[e][s.uidEvent])}function Xht(n,t,e,r){const i=t[e]||{};for(const[s,a]of Object.entries(i))s.includes(r)&&D2(n,t,e,a.callable,a.delegationSelector)}function _V(n){return n=n.replace(Wht,""),pV[n]||n}const xt={on(n,t,e,r){aP(n,t,e,r,!1)},one(n,t,e,r){aP(n,t,e,r,!0)},off(n,t,e,r){if(typeof t!="string"||!n)return;const[i,s,a]=yV(t,e,r),o=a!==t,l=mV(n),h=l[a]||{},f=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(h).length)return;D2(n,l,a,s,i?e:null);return}if(f)for(const p of Object.keys(l))Xht(n,l,p,t.slice(1));for(const[p,m]of Object.entries(h)){const v=p.replace($ht,"");(!o||t.includes(v))&&D2(n,l,a,m.callable,m.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const r=fV(),i=_V(t),s=t!==i;let a=null,o=!0,l=!0,h=!1;s&&r&&(a=r.Event(t,e),r(n).trigger(a),o=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented());const f=CS(new Event(t,{bubbles:o,cancelable:!0}),e);return h&&f.preventDefault(),l&&n.dispatchEvent(f),f.defaultPrevented&&a&&a.preventDefault(),f}};function CS(n,t={}){for(const[e,r]of Object.entries(t))try{n[e]=r}catch{Object.defineProperty(n,e,{configurable:!0,get(){return r}})}return n}function oP(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function RE(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Ja={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${RE(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${RE(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of e){let i=r.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1),t[i]=oP(n.dataset[r])}return t},getDataAttribute(n,t){return oP(n.getAttribute(`data-bs-${RE(t)}`))}};class d0{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const r=Za(e)?Ja.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...Za(e)?Ja.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[r,i]of Object.entries(e)){const s=t[r],a=Za(s)?"element":Uht(s);if(!new RegExp(i).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${a}" but expected type "${i}".`)}}}const Qht="5.3.7";class Ss extends d0{constructor(t,e){super(),t=Sc(t),t&&(this._element=t,this._config=this._getConfig(e),IE.set(this._element,this.constructor.DATA_KEY,this))}dispose(){IE.remove(this._element,this.constructor.DATA_KEY),xt.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,r=!0){dV(t,e,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return IE.get(Sc(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Qht}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const NE=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>lV(e)).join(","):null},Ht={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let r=n.parentNode.closest(t);for(;r;)e.push(r),r=r.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!Cc(e)&&Wf(e))},getSelectorFromElement(n){const t=NE(n);return t&&Ht.findOne(t)?t:null},getElementFromSelector(n){const t=NE(n);return t?Ht.findOne(t):null},getMultipleElementsFromSelector(n){const t=NE(n);return t?Ht.find(t):[]}},Yy=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,r=n.NAME;xt.on(document,e,`[data-bs-dismiss="${r}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Cc(this))return;const s=Ht.getElementFromSelector(this)||this.closest(`.${r}`);n.getOrCreateInstance(s)[t]()})},Zht="alert",Jht="bs.alert",xV=`.${Jht}`,tft=`close${xV}`,eft=`closed${xV}`,nft="fade",rft="show";class Ky extends Ss{static get NAME(){return Zht}close(){if(xt.trigger(this._element,tft).defaultPrevented)return;this._element.classList.remove(rft);const e=this._element.classList.contains(nft);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),xt.trigger(this._element,eft),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Ky.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Yy(Ky,"close");os(Ky);const ift="button",sft="bs.button",aft=`.${sft}`,oft=".data-api",cft="active",cP='[data-bs-toggle="button"]',lft=`click${aft}${oft}`;class Xy extends Ss{static get NAME(){return ift}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(cft))}static jQueryInterface(t){return this.each(function(){const e=Xy.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}xt.on(document,lft,cP,n=>{n.preventDefault();const t=n.target.closest(cP);Xy.getOrCreateInstance(t).toggle()});os(Xy);const uft="swipe",$f=".bs.swipe",hft=`touchstart${$f}`,fft=`touchmove${$f}`,dft=`touchend${$f}`,pft=`pointerdown${$f}`,gft=`pointerup${$f}`,mft="touch",vft="pen",yft="pointer-event",_ft=40,xft={endCallback:null,leftCallback:null,rightCallback:null},wft={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Jv extends d0{constructor(t,e){super(),this._element=t,!(!t||!Jv.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return xft}static get DefaultType(){return wft}static get NAME(){return uft}dispose(){xt.off(this._element,$f)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),li(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=_ft)return;const e=t/this._deltaX;this._deltaX=0,e&&li(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(xt.on(this._element,pft,t=>this._start(t)),xt.on(this._element,gft,t=>this._end(t)),this._element.classList.add(yft)):(xt.on(this._element,hft,t=>this._start(t)),xt.on(this._element,fft,t=>this._move(t)),xt.on(this._element,dft,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===vft||t.pointerType===mft)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Eft="carousel",bft="bs.carousel",Vc=`.${bft}`,wV=".data-api",Aft="ArrowLeft",Tft="ArrowRight",Sft=500,_p="next",Ah="prev",Mh="left",ev="right",Cft=`slide${Vc}`,ME=`slid${Vc}`,Ift=`keydown${Vc}`,Dft=`mouseenter${Vc}`,Oft=`mouseleave${Vc}`,Rft=`dragstart${Vc}`,Nft=`load${Vc}${wV}`,Mft=`click${Vc}${wV}`,EV="carousel",g1="active",Pft="slide",kft="carousel-item-end",Lft="carousel-item-start",Vft="carousel-item-next",Bft="carousel-item-prev",bV=".active",AV=".carousel-item",Fft=bV+AV,Uft=".carousel-item img",jft=".carousel-indicators",Hft="[data-bs-slide], [data-bs-slide-to]",zft='[data-bs-ride="carousel"]',Gft={[Aft]:ev,[Tft]:Mh},Wft={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},$ft={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class p0 extends Ss{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ht.findOne(jft,this._element),this._addEventListeners(),this._config.ride===EV&&this.cycle()}static get Default(){return Wft}static get DefaultType(){return $ft}static get NAME(){return Eft}next(){this._slide(_p)}nextWhenVisible(){!document.hidden&&Wf(this._element)&&this.next()}prev(){this._slide(Ah)}pause(){this._isSliding&&uV(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){xt.one(this._element,ME,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){xt.one(this._element,ME,()=>this.to(t));return}const r=this._getItemIndex(this._getActive());if(r===t)return;const i=t>r?_p:Ah;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&xt.on(this._element,Ift,t=>this._keydown(t)),this._config.pause==="hover"&&(xt.on(this._element,Dft,()=>this.pause()),xt.on(this._element,Oft,()=>this._maybeEnableCycle())),this._config.touch&&Jv.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of Ht.find(Uft,this._element))xt.on(r,Rft,i=>i.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Mh)),rightCallback:()=>this._slide(this._directionToOrder(ev)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Sft+this._config.interval))}};this._swipeHelper=new Jv(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Gft[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=Ht.findOne(bV,this._indicatorsElement);e.classList.remove(g1),e.removeAttribute("aria-current");const r=Ht.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);r&&(r.classList.add(g1),r.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const r=this._getActive(),i=t===_p,s=e||SS(this._getItems(),r,i,this._config.wrap);if(s===r)return;const a=this._getItemIndex(s),o=v=>xt.trigger(this._element,v,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(r),to:a});if(o(Cft).defaultPrevented||!r||!s)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=s;const f=i?Lft:kft,p=i?Vft:Bft;s.classList.add(p),f0(s),r.classList.add(f),s.classList.add(f);const m=()=>{s.classList.remove(f,p),s.classList.add(g1),r.classList.remove(g1,p,f),this._isSliding=!1,o(ME)};this._queueCallback(m,r,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(Pft)}_getActive(){return Ht.findOne(Fft,this._element)}_getItems(){return Ht.find(AV,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ss()?t===Mh?Ah:_p:t===Mh?_p:Ah}_orderToDirection(t){return ss()?t===Ah?Mh:ev:t===Ah?ev:Mh}static jQueryInterface(t){return this.each(function(){const e=p0.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}xt.on(document,Mft,Hft,function(n){const t=Ht.getElementFromSelector(this);if(!t||!t.classList.contains(EV))return;n.preventDefault();const e=p0.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");if(r){e.to(r),e._maybeEnableCycle();return}if(Ja.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});xt.on(window,Nft,()=>{const n=Ht.find(zft);for(const t of n)p0.getOrCreateInstance(t)});os(p0);const qft="collapse",Yft="bs.collapse",g0=`.${Yft}`,Kft=".data-api",Xft=`show${g0}`,Qft=`shown${g0}`,Zft=`hide${g0}`,Jft=`hidden${g0}`,tdt=`click${g0}${Kft}`,PE="show",Wh="collapse",m1="collapsing",edt="collapsed",ndt=`:scope .${Wh} .${Wh}`,rdt="collapse-horizontal",idt="width",sdt="height",adt=".collapse.show, .collapse.collapsing",O2='[data-bs-toggle="collapse"]',odt={parent:null,toggle:!0},cdt={parent:"(null|element)",toggle:"boolean"};class Fg extends Ss{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const r=Ht.find(O2);for(const i of r){const s=Ht.getSelectorFromElement(i),a=Ht.find(s).filter(o=>o===this._element);s!==null&&a.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return odt}static get DefaultType(){return cdt}static get NAME(){return qft}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(adt).filter(o=>o!==this._element).map(o=>Fg.getOrCreateInstance(o,{toggle:!1}))),t.length&&t[0]._isTransitioning||xt.trigger(this._element,Xft).defaultPrevented)return;for(const o of t)o.hide();const r=this._getDimension();this._element.classList.remove(Wh),this._element.classList.add(m1),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(m1),this._element.classList.add(Wh,PE),this._element.style[r]="",xt.trigger(this._element,Qft)},a=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[r]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||xt.trigger(this._element,Zft).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,f0(this._element),this._element.classList.add(m1),this._element.classList.remove(Wh,PE);for(const i of this._triggerArray){const s=Ht.getElementFromSelector(i);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(m1),this._element.classList.add(Wh),xt.trigger(this._element,Jft)};this._element.style[e]="",this._queueCallback(r,this._element,!0)}_isShown(t=this._element){return t.classList.contains(PE)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Sc(t.parent),t}_getDimension(){return this._element.classList.contains(rdt)?idt:sdt}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(O2);for(const e of t){const r=Ht.getElementFromSelector(e);r&&this._addAriaAndCollapsedClass([e],this._isShown(r))}}_getFirstLevelChildren(t){const e=Ht.find(ndt,this._config.parent);return Ht.find(t,this._config.parent).filter(r=>!e.includes(r))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const r of t)r.classList.toggle(edt,!e),r.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const r=Fg.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}xt.on(document,tdt,O2,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of Ht.getMultipleElementsFromSelector(this))Fg.getOrCreateInstance(t,{toggle:!1}).toggle()});os(Fg);const lP="dropdown",ldt="bs.dropdown",bu=`.${ldt}`,IS=".data-api",udt="Escape",uP="Tab",hdt="ArrowUp",hP="ArrowDown",fdt=2,ddt=`hide${bu}`,pdt=`hidden${bu}`,gdt=`show${bu}`,mdt=`shown${bu}`,TV=`click${bu}${IS}`,SV=`keydown${bu}${IS}`,vdt=`keyup${bu}${IS}`,Ph="show",ydt="dropup",_dt="dropend",xdt="dropstart",wdt="dropup-center",Edt="dropdown-center",Ul='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',bdt=`${Ul}.${Ph}`,nv=".dropdown-menu",Adt=".navbar",Tdt=".navbar-nav",Sdt=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Cdt=ss()?"top-end":"top-start",Idt=ss()?"top-start":"top-end",Ddt=ss()?"bottom-end":"bottom-start",Odt=ss()?"bottom-start":"bottom-end",Rdt=ss()?"left-start":"right-start",Ndt=ss()?"right-start":"left-start",Mdt="top",Pdt="bottom",kdt={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ldt={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class fa extends Ss{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=Ht.next(this._element,nv)[0]||Ht.prev(this._element,nv)[0]||Ht.findOne(nv,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return kdt}static get DefaultType(){return Ldt}static get NAME(){return lP}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Cc(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!xt.trigger(this._element,gdt,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Tdt))for(const r of[].concat(...document.body.children))xt.on(r,"mouseover",Zv);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ph),this._element.classList.add(Ph),xt.trigger(this._element,mdt,t)}}hide(){if(Cc(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!xt.trigger(this._element,ddt,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))xt.off(r,"mouseover",Zv);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ph),this._element.classList.remove(Ph),this._element.setAttribute("aria-expanded","false"),Ja.removeDataAttribute(this._menu,"popper"),xt.trigger(this._element,pdt,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Za(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${lP.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof cV>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:Za(this._config.reference)?t=Sc(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=TS(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Ph)}_getPlacement(){const t=this._parent;if(t.classList.contains(_dt))return Rdt;if(t.classList.contains(xdt))return Ndt;if(t.classList.contains(wdt))return Mdt;if(t.classList.contains(Edt))return Pdt;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(ydt)?e?Idt:Cdt:e?Odt:Ddt}_detectNavbar(){return this._element.closest(Adt)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ja.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...li(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){const r=Ht.find(Sdt,this._menu).filter(i=>Wf(i));r.length&&SS(r,e,t===hP,!r.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=fa.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===fdt||t.type==="keyup"&&t.key!==uP)return;const e=Ht.find(bdt);for(const r of e){const i=fa.getInstance(r);if(!i||i._config.autoClose===!1)continue;const s=t.composedPath(),a=s.includes(i._menu);if(s.includes(i._element)||i._config.autoClose==="inside"&&!a||i._config.autoClose==="outside"&&a||i._menu.contains(t.target)&&(t.type==="keyup"&&t.key===uP||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:i._element};t.type==="click"&&(o.clickEvent=t),i._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),r=t.key===udt,i=[hdt,hP].includes(t.key);if(!i&&!r||e&&!r)return;t.preventDefault();const s=this.matches(Ul)?this:Ht.prev(this,Ul)[0]||Ht.next(this,Ul)[0]||Ht.findOne(Ul,t.delegateTarget.parentNode),a=fa.getOrCreateInstance(s);if(i){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),s.focus())}}xt.on(document,SV,Ul,fa.dataApiKeydownHandler);xt.on(document,SV,nv,fa.dataApiKeydownHandler);xt.on(document,TV,fa.clearMenus);xt.on(document,vdt,fa.clearMenus);xt.on(document,TV,Ul,function(n){n.preventDefault(),fa.getOrCreateInstance(this).toggle()});os(fa);const CV="backdrop",Vdt="fade",fP="show",dP=`mousedown.bs.${CV}`,Bdt={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Fdt={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class IV extends d0{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Bdt}static get DefaultType(){return Fdt}static get NAME(){return CV}show(t){if(!this._config.isVisible){li(t);return}this._append();const e=this._getElement();this._config.isAnimated&&f0(e),e.classList.add(fP),this._emulateAnimation(()=>{li(t)})}hide(t){if(!this._config.isVisible){li(t);return}this._getElement().classList.remove(fP),this._emulateAnimation(()=>{this.dispose(),li(t)})}dispose(){this._isAppended&&(xt.off(this._element,dP),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Vdt),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Sc(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),xt.on(t,dP,()=>{li(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){dV(t,this._getElement(),this._config.isAnimated)}}const Udt="focustrap",jdt="bs.focustrap",ty=`.${jdt}`,Hdt=`focusin${ty}`,zdt=`keydown.tab${ty}`,Gdt="Tab",Wdt="forward",pP="backward",$dt={autofocus:!0,trapElement:null},qdt={autofocus:"boolean",trapElement:"element"};class DV extends d0{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return $dt}static get DefaultType(){return qdt}static get NAME(){return Udt}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),xt.off(document,ty),xt.on(document,Hdt,t=>this._handleFocusin(t)),xt.on(document,zdt,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,xt.off(document,ty))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const r=Ht.focusableChildren(e);r.length===0?e.focus():this._lastTabNavDirection===pP?r[r.length-1].focus():r[0].focus()}_handleKeydown(t){t.key===Gdt&&(this._lastTabNavDirection=t.shiftKey?pP:Wdt)}}const gP=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",mP=".sticky-top",v1="padding-right",vP="margin-right";class R2{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,v1,e=>e+t),this._setElementAttributes(gP,v1,e=>e+t),this._setElementAttributes(mP,vP,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,v1),this._resetElementAttributes(gP,v1),this._resetElementAttributes(mP,vP)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,r){const i=this.getWidth(),s=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+i)return;this._saveInitialAttribute(a,e);const o=window.getComputedStyle(a).getPropertyValue(e);a.style.setProperty(e,`${r(Number.parseFloat(o))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,e){const r=t.style.getPropertyValue(e);r&&Ja.setDataAttribute(t,e,r)}_resetElementAttributes(t,e){const r=i=>{const s=Ja.getDataAttribute(i,e);if(s===null){i.style.removeProperty(e);return}Ja.removeDataAttribute(i,e),i.style.setProperty(e,s)};this._applyManipulationCallback(t,r)}_applyManipulationCallback(t,e){if(Za(t)){e(t);return}for(const r of Ht.find(t,this._element))e(r)}}const Ydt="modal",Kdt="bs.modal",as=`.${Kdt}`,Xdt=".data-api",Qdt="Escape",Zdt=`hide${as}`,Jdt=`hidePrevented${as}`,OV=`hidden${as}`,RV=`show${as}`,tpt=`shown${as}`,ept=`resize${as}`,npt=`click.dismiss${as}`,rpt=`mousedown.dismiss${as}`,ipt=`keydown.dismiss${as}`,spt=`click${as}${Xdt}`,yP="modal-open",apt="fade",_P="show",kE="modal-static",opt=".modal.show",cpt=".modal-dialog",lpt=".modal-body",upt='[data-bs-toggle="modal"]',hpt={backdrop:!0,focus:!0,keyboard:!0},fpt={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class If extends Ss{constructor(t,e){super(t,e),this._dialog=Ht.findOne(cpt,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new R2,this._addEventListeners()}static get Default(){return hpt}static get DefaultType(){return fpt}static get NAME(){return Ydt}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||xt.trigger(this._element,RV,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(yP),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||xt.trigger(this._element,Zdt).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(_P),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){xt.off(window,as),xt.off(this._dialog,as),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new IV({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new DV({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=Ht.findOne(lpt,this._dialog);e&&(e.scrollTop=0),f0(this._element),this._element.classList.add(_P);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,xt.trigger(this._element,tpt,{relatedTarget:t})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){xt.on(this._element,ipt,t=>{if(t.key===Qdt){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),xt.on(window,ept,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),xt.on(this._element,rpt,t=>{xt.one(this._element,npt,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(yP),this._resetAdjustments(),this._scrollBar.reset(),xt.trigger(this._element,OV)})}_isAnimated(){return this._element.classList.contains(apt)}_triggerBackdropTransition(){if(xt.trigger(this._element,Jdt).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(kE)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(kE),this._queueCallback(()=>{this._element.classList.remove(kE),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),r=e>0;if(r&&!t){const i=ss()?"paddingLeft":"paddingRight";this._element.style[i]=`${e}px`}if(!r&&t){const i=ss()?"paddingRight":"paddingLeft";this._element.style[i]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const r=If.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](e)}})}}xt.on(document,spt,upt,function(n){const t=Ht.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),xt.one(t,RV,i=>{i.defaultPrevented||xt.one(t,OV,()=>{Wf(this)&&this.focus()})});const e=Ht.findOne(opt);e&&If.getInstance(e).hide(),If.getOrCreateInstance(t).toggle(this)});Yy(If);os(If);const dpt="offcanvas",ppt="bs.offcanvas",ho=`.${ppt}`,NV=".data-api",gpt=`load${ho}${NV}`,mpt="Escape",xP="show",wP="showing",EP="hiding",vpt="offcanvas-backdrop",MV=".offcanvas.show",ypt=`show${ho}`,_pt=`shown${ho}`,xpt=`hide${ho}`,bP=`hidePrevented${ho}`,PV=`hidden${ho}`,wpt=`resize${ho}`,Ept=`click${ho}${NV}`,bpt=`keydown.dismiss${ho}`,Apt='[data-bs-toggle="offcanvas"]',Tpt={backdrop:!0,keyboard:!0,scroll:!1},Spt={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ic extends Ss{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Tpt}static get DefaultType(){return Spt}static get NAME(){return dpt}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||xt.trigger(this._element,ypt,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new R2().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(wP);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(xP),this._element.classList.remove(wP),xt.trigger(this._element,_pt,{relatedTarget:t})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||xt.trigger(this._element,xpt).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(EP),this._backdrop.hide();const e=()=>{this._element.classList.remove(xP,EP),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new R2().reset(),xt.trigger(this._element,PV)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){xt.trigger(this._element,bP);return}this.hide()},e=!!this._config.backdrop;return new IV({className:vpt,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new DV({trapElement:this._element})}_addEventListeners(){xt.on(this._element,bpt,t=>{if(t.key===mpt){if(this._config.keyboard){this.hide();return}xt.trigger(this._element,bP)}})}static jQueryInterface(t){return this.each(function(){const e=Ic.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}xt.on(document,Ept,Apt,function(n){const t=Ht.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Cc(this))return;xt.one(t,PV,()=>{Wf(this)&&this.focus()});const e=Ht.findOne(MV);e&&e!==t&&Ic.getInstance(e).hide(),Ic.getOrCreateInstance(t).toggle(this)});xt.on(window,gpt,()=>{for(const n of Ht.find(MV))Ic.getOrCreateInstance(n).show()});xt.on(window,wpt,()=>{for(const n of Ht.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Ic.getOrCreateInstance(n).hide()});Yy(Ic);os(Ic);const Cpt=/^aria-[\w-]*$/i,kV={"*":["class","dir","id","lang","role",Cpt],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ipt=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Dpt=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Opt=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?Ipt.has(e)?!!Dpt.test(n.nodeValue):!0:t.filter(r=>r instanceof RegExp).some(r=>r.test(e))};function Rpt(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const i=new window.DOMParser().parseFromString(n,"text/html"),s=[].concat(...i.body.querySelectorAll("*"));for(const a of s){const o=a.nodeName.toLowerCase();if(!Object.keys(t).includes(o)){a.remove();continue}const l=[].concat(...a.attributes),h=[].concat(t["*"]||[],t[o]||[]);for(const f of l)Opt(f,h)||a.removeAttribute(f.nodeName)}return i.body.innerHTML}const Npt="TemplateFactory",Mpt={allowList:kV,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ppt={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},kpt={entry:"(string|element|function|null)",selector:"(string|element)"};class Lpt extends d0{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Mpt}static get DefaultType(){return Ppt}static get NAME(){return Npt}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,s]of Object.entries(this._config.content))this._setContent(t,s,i);const e=t.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&e.classList.add(...r.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,r]of Object.entries(t))super._typeCheckConfig({selector:e,entry:r},kpt)}_setContent(t,e,r){const i=Ht.findOne(r,t);if(i){if(e=this._resolvePossibleFunction(e),!e){i.remove();return}if(Za(e)){this._putElementInTemplate(Sc(e),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(e);return}i.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Rpt(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return li(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const Vpt="tooltip",Bpt=new Set(["sanitize","allowList","sanitizeFn"]),LE="fade",Fpt="modal",y1="show",Upt=".tooltip-inner",AP=`.${Fpt}`,TP="hide.bs.modal",xp="hover",VE="focus",BE="click",jpt="manual",Hpt="hide",zpt="hidden",Gpt="show",Wpt="shown",$pt="inserted",qpt="click",Ypt="focusin",Kpt="focusout",Xpt="mouseenter",Qpt="mouseleave",Zpt={AUTO:"auto",TOP:"top",RIGHT:ss()?"left":"right",BOTTOM:"bottom",LEFT:ss()?"right":"left"},Jpt={allowList:kV,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},tgt={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class qf extends Ss{constructor(t,e){if(typeof cV>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Jpt}static get DefaultType(){return tgt}static get NAME(){return Vpt}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),xt.off(this._element.closest(AP),TP,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=xt.trigger(this._element,this.constructor.eventName(Gpt)),r=(hV(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!r)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),xt.trigger(this._element,this.constructor.eventName($pt))),this._popper=this._createPopper(i),i.classList.add(y1),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))xt.on(o,"mouseover",Zv);const a=()=>{xt.trigger(this._element,this.constructor.eventName(Wpt)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||xt.trigger(this._element,this.constructor.eventName(Hpt)).defaultPrevented)return;if(this._getTipElement().classList.remove(y1),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))xt.off(i,"mouseover",Zv);this._activeTrigger[BE]=!1,this._activeTrigger[VE]=!1,this._activeTrigger[xp]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),xt.trigger(this._element,this.constructor.eventName(zpt)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(LE,y1),e.classList.add(`bs-${this.constructor.NAME}-auto`);const r=jht(this.constructor.NAME).toString();return e.setAttribute("id",r),this._isAnimated()&&e.classList.add(LE),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Lpt({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Upt]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(LE)}_isShown(){return this.tip&&this.tip.classList.contains(y1)}_createPopper(t){const e=li(this._config.placement,[this,t,this._element]),r=Zpt[e.toUpperCase()];return TS(this._element,t,this._getPopperConfig(r))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return li(t,[this._element,this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...e,...li(this._config.popperConfig,[void 0,e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")xt.on(this._element,this.constructor.eventName(qpt),this._config.selector,r=>{const i=this._initializeOnDelegatedTarget(r);i._activeTrigger[BE]=!(i._isShown()&&i._activeTrigger[BE]),i.toggle()});else if(e!==jpt){const r=e===xp?this.constructor.eventName(Xpt):this.constructor.eventName(Ypt),i=e===xp?this.constructor.eventName(Qpt):this.constructor.eventName(Kpt);xt.on(this._element,r,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusin"?VE:xp]=!0,a._enter()}),xt.on(this._element,i,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusout"?VE:xp]=a._element.contains(s.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},xt.on(this._element.closest(AP),TP,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Ja.getDataAttributes(this._element);for(const r of Object.keys(e))Bpt.has(r)&&delete e[r];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Sc(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,r]of Object.entries(this._config))this.constructor.Default[e]!==r&&(t[e]=r);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=qf.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}os(qf);const egt="popover",ngt=".popover-header",rgt=".popover-body",igt={...qf.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},sgt={...qf.DefaultType,content:"(null|string|element|function)"};class DS extends qf{static get Default(){return igt}static get DefaultType(){return sgt}static get NAME(){return egt}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[ngt]:this._getTitle(),[rgt]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=DS.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}os(DS);const agt="scrollspy",ogt="bs.scrollspy",OS=`.${ogt}`,cgt=".data-api",lgt=`activate${OS}`,SP=`click${OS}`,ugt=`load${OS}${cgt}`,hgt="dropdown-item",Th="active",fgt='[data-bs-spy="scroll"]',FE="[href]",dgt=".nav, .list-group",CP=".nav-link",pgt=".nav-item",ggt=".list-group-item",mgt=`${CP}, ${pgt} > ${CP}, ${ggt}`,vgt=".dropdown",ygt=".dropdown-toggle",_gt={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},xgt={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Qy extends Ss{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return _gt}static get DefaultType(){return xgt}static get NAME(){return agt}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Sc(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(xt.off(this._config.target,SP),xt.on(this._config.target,SP,FE,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const r=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:i,behavior:"smooth"});return}r.scrollTop=i}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=a=>this._targetLinks.get(`#${a.target.id}`),r=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(e(a))},i=(this._rootElement||document.documentElement).scrollTop,s=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(a));continue}const o=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&o){if(r(a),!i)return;continue}!s&&!o&&r(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ht.find(FE,this._config.target);for(const e of t){if(!e.hash||Cc(e))continue;const r=Ht.findOne(decodeURI(e.hash),this._element);Wf(r)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,r))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Th),this._activateParents(t),xt.trigger(this._element,lgt,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(hgt)){Ht.findOne(ygt,t.closest(vgt)).classList.add(Th);return}for(const e of Ht.parents(t,dgt))for(const r of Ht.prev(e,mgt))r.classList.add(Th)}_clearActiveClass(t){t.classList.remove(Th);const e=Ht.find(`${FE}.${Th}`,t);for(const r of e)r.classList.remove(Th)}static jQueryInterface(t){return this.each(function(){const e=Qy.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}xt.on(window,ugt,()=>{for(const n of Ht.find(fgt))Qy.getOrCreateInstance(n)});os(Qy);const wgt="tab",Egt="bs.tab",Au=`.${Egt}`,bgt=`hide${Au}`,Agt=`hidden${Au}`,Tgt=`show${Au}`,Sgt=`shown${Au}`,Cgt=`click${Au}`,Igt=`keydown${Au}`,Dgt=`load${Au}`,Ogt="ArrowLeft",IP="ArrowRight",Rgt="ArrowUp",DP="ArrowDown",UE="Home",OP="End",jl="active",RP="fade",jE="show",Ngt="dropdown",LV=".dropdown-toggle",Mgt=".dropdown-menu",HE=`:not(${LV})`,Pgt='.list-group, .nav, [role="tablist"]',kgt=".nav-item, .list-group-item",Lgt=`.nav-link${HE}, .list-group-item${HE}, [role="tab"]${HE}`,VV='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',zE=`${Lgt}, ${VV}`,Vgt=`.${jl}[data-bs-toggle="tab"], .${jl}[data-bs-toggle="pill"], .${jl}[data-bs-toggle="list"]`;class Df extends Ss{constructor(t){super(t),this._parent=this._element.closest(Pgt),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),xt.on(this._element,Igt,e=>this._keydown(e)))}static get NAME(){return wgt}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),r=e?xt.trigger(e,bgt,{relatedTarget:t}):null;xt.trigger(t,Tgt,{relatedTarget:e}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(jl),this._activate(Ht.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(jE);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),xt.trigger(t,Sgt,{relatedTarget:e})};this._queueCallback(r,t,t.classList.contains(RP))}_deactivate(t,e){if(!t)return;t.classList.remove(jl),t.blur(),this._deactivate(Ht.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(jE);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),xt.trigger(t,Agt,{relatedTarget:e})};this._queueCallback(r,t,t.classList.contains(RP))}_keydown(t){if(![Ogt,IP,Rgt,DP,UE,OP].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(i=>!Cc(i));let r;if([UE,OP].includes(t.key))r=e[t.key===UE?0:e.length-1];else{const i=[IP,DP].includes(t.key);r=SS(e,t.target,i,!0)}r&&(r.focus({preventScroll:!0}),Df.getOrCreateInstance(r).show())}_getChildren(){return Ht.find(zE,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const r of e)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),r=this._getOuterElement(t);t.setAttribute("aria-selected",e),r!==t&&this._setAttributeIfNotExists(r,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=Ht.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const r=this._getOuterElement(t);if(!r.classList.contains(Ngt))return;const i=(s,a)=>{const o=Ht.findOne(s,r);o&&o.classList.toggle(a,e)};i(LV,jl),i(Mgt,jE),r.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,r){t.hasAttribute(e)||t.setAttribute(e,r)}_elemIsActive(t){return t.classList.contains(jl)}_getInnerElement(t){return t.matches(zE)?t:Ht.findOne(zE,t)}_getOuterElement(t){return t.closest(kgt)||t}static jQueryInterface(t){return this.each(function(){const e=Df.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}xt.on(document,Cgt,VV,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Cc(this)&&Df.getOrCreateInstance(this).show()});xt.on(window,Dgt,()=>{for(const n of Ht.find(Vgt))Df.getOrCreateInstance(n)});os(Df);const Bgt="toast",Fgt="bs.toast",Bc=`.${Fgt}`,Ugt=`mouseover${Bc}`,jgt=`mouseout${Bc}`,Hgt=`focusin${Bc}`,zgt=`focusout${Bc}`,Ggt=`hide${Bc}`,Wgt=`hidden${Bc}`,$gt=`show${Bc}`,qgt=`shown${Bc}`,Ygt="fade",NP="hide",_1="show",x1="showing",Kgt={animation:"boolean",autohide:"boolean",delay:"number"},Xgt={animation:!0,autohide:!0,delay:5e3};class Zy extends Ss{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Xgt}static get DefaultType(){return Kgt}static get NAME(){return Bgt}show(){if(xt.trigger(this._element,$gt).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Ygt);const e=()=>{this._element.classList.remove(x1),xt.trigger(this._element,qgt),this._maybeScheduleHide()};this._element.classList.remove(NP),f0(this._element),this._element.classList.add(_1,x1),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||xt.trigger(this._element,Ggt).defaultPrevented)return;const e=()=>{this._element.classList.add(NP),this._element.classList.remove(x1,_1),xt.trigger(this._element,Wgt)};this._element.classList.add(x1),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(_1),super.dispose()}isShown(){return this._element.classList.contains(_1)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const r=t.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){xt.on(this._element,Ugt,t=>this._onInteraction(t,!0)),xt.on(this._element,jgt,t=>this._onInteraction(t,!1)),xt.on(this._element,Hgt,t=>this._onInteraction(t,!0)),xt.on(this._element,zgt,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Zy.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Yy(Zy);os(Zy);function Qgt({user:n,meals:t,onLogout:e,clearAllMeals:r}){const[i,s]=rt.useState(""),[a,o]=rt.useState(""),[l,h]=rt.useState(25),[f,p]=rt.useState("male"),[m,v]=rt.useState(""),[x,E]=rt.useState(""),[b,T]=rt.useState(""),[S,D]=rt.useState(""),[P,k]=rt.useState("Breakfast-Lunch-Dinner"),[U,M]=rt.useState("g"),[I,N]=rt.useState(!1),[L,j]=rt.useState(!1),[z,B]=rt.useState("08:00"),[yt,wt]=rt.useState("13:00"),[Y,at]=rt.useState("19:00"),[vt,Z]=rt.useState(""),[F,$]=rt.useState(""),[ot,tt]=rt.useState(""),[gt,mt]=rt.useState(!1),{showToast:Et}=XT(),[Qt,Mt]=rt.useState(!1),Rt=n.streak||0,Ut=n.level||1,Re=(n.xp||0)%100,Se=100,It=Re/Se*100,Gt=n.badges||[];rt.useEffect(()=>{var Dt;n&&(s(n.firstName||""),o(n.lastName||""),h(n.age||25),p(n.gender||"male"),v(n.height||""),E(n.currentWeight||""),T(n.goalWeight||""),D(n.goalDate||""),k(((Dt=n.mealOrder)==null?void 0:Dt.join("-"))||"Breakfast-Lunch-Dinner"),M(n.unit||"g"),N(n.darkMode??!1),B(n.breakfastTime||"08:00"),wt(n.lunchTime||"13:00"),at(n.dinnerTime||"19:00"))},[n]);const qt=async()=>{const Dt={firstName:i,lastName:a,age:l,gender:f,height:m,currentWeight:x,goalWeight:b,goalDate:S,mealOrder:P.split("-"),unit:U,darkMode:I,breakfastTime:z,lunchTime:yt,dinnerTime:Y};await jM(n.uid,Dt),Et("Preferences updated successfully!","success")},Vt=()=>{const Dt=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),fe=document.createElement("a");fe.href=URL.createObjectURL(Dt),fe.download="meals.json",fe.click()},bt=()=>{if(!t||t.length===0){Et(" No meals to export.","warning");return}const Dt=[["Date","Meal Type","Food Name","Calories (kcal)","Protein (g)","Fat (g)","Carbohydrate (g)","Sugar (g)","Fibre (g)","Salt (g)","Caffeine (mg)","Unit"]],fe=(Ir,mr)=>{var vr;return((vr=Ir.nutrients.find(Jr=>{var ti;return((ti=Jr.type)==null?void 0:ti.toLowerCase())===mr.toLowerCase()}))==null?void 0:vr.total)||""},be=(Ir,mr)=>{if(Ir.kcal)return Ir.kcal;let vr=0;return mr.nutrients.forEach(Jr=>{var ei,ya,Cs;const ti=parseFloat(Jr.total||0);((ei=Jr.type)==null?void 0:ei.toLowerCase())==="fat"&&(vr+=ti*9),((ya=Jr.type)==null?void 0:ya.toLowerCase())==="protein"&&(vr+=ti*4),(Cs=Jr.type)!=null&&Cs.toLowerCase().includes("carbohydrate")&&(vr+=ti*4)}),Math.round(vr)};t.forEach(Ir=>{Ir.foodItems.forEach(mr=>{const vr=be(Ir,mr);Dt.push([Ir.date,Ir.mealType,mr.name,vr,fe(mr,"protein"),fe(mr,"fat"),fe(mr,"carbohydrate"),fe(mr,"sugar"),fe(mr,"fibre"),fe(mr,"salt"),fe(mr,"caffeine"),U])})});const pe=Dt.map(Ir=>Ir.join(",")).join(`
`),ir=new Blob([pe],{type:"text/csv"}),kn=document.createElement("a");kn.href=URL.createObjectURL(ir),kn.download="meals.csv",kn.click()},en=async()=>{window.confirm(" Are you sure you want to clear all meal data?")&&(j(!0),await r(),j(!1),Et("All meals deleted.","success"))},ae=async()=>{if(!vt&&!F){Et("Please enter a new email or password.","warning");return}try{mt(!0);const fe=XA().currentUser,be=_u.credential(fe.email,ot);await zZ(fe,be),vt&&(await $Z(fe,vt),await jM(fe.uid,{email:vt}),Et("Email updated.","success")),F&&(await qZ(fe,F),Et("Password updated.","success")),Z(""),$(""),tt("")}catch(Dt){console.error(Dt),Et(`${Dt.message}`,"danger")}finally{mt(!1)}},xe=(t==null?void 0:t.length)||0,hn=[...new Set(t==null?void 0:t.map(Dt=>Dt.date))],rr=hn.length>0?(xe/hn.length).toFixed(1):0;return C.jsxs("div",{className:"home-container",children:[C.jsxs("div",{className:"text-center mb-4",children:[C.jsx("i",{className:"bi bi-person-circle TitleName",style:{fontSize:"3rem"}}),C.jsx("h4",{className:"mt-2 fw-bold TitleName",children:i}),C.jsx("small",{className:"text-white",children:"Profile"})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Usage Summary"}),C.jsxs("p",{children:[" Days Tracked: ",hn.length]}),C.jsxs("p",{children:[" Meals Logged: ",xe]}),C.jsxs("p",{children:[" Avg Meals/Day: ",rr]})]}),C.jsx("div",{className:"card bg-dark border-0 p-3 mb-3 text-white text-center",children:Rt>0?C.jsxs(C.Fragment,{children:[C.jsx("div",{style:{fontSize:"3rem",color:Rt>=7?"red":"orange"},children:""}),C.jsxs("p",{className:"fw-bold",children:[Rt,"-day streak"]}),C.jsx("small",{className:"text-white",children:Rt>=7?"Amazing consistency! Keep it up!":"Log meals daily to grow your fire!"})]}):C.jsxs(C.Fragment,{children:[C.jsx("div",{style:{fontSize:"3rem",color:"gray"},children:""}),C.jsx("p",{className:"text-white mb-0",children:"No active streak"}),C.jsx("small",{className:"text-white",children:"Start logging meals to ignite your fire!"})]})}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Your Rewards"}),C.jsxs("p",{children:[" Level ",Ut]}),C.jsx("div",{className:"progress mb-2",style:{height:"6px",background:"#444"},children:C.jsx("div",{className:"progress-bar bg-success",style:{width:`${It}%`},title:`${Re}/${Se} XP`})}),C.jsx("p",{children:" Badges Unlocked:"}),Gt.length===0?C.jsx("p",{className:"text-muted small",children:"No badges yet."}):C.jsx("div",{className:"d-flex flex-wrap gap-2",children:Gt.map((Dt,fe)=>C.jsx("span",{className:"badge rounded-pill bg-info text-dark p-2",children:Dt},fe))})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Personal Info"}),C.jsxs("div",{className:"row g-2",children:[C.jsx("div",{className:"col",children:C.jsx("input",{className:"form-control form-control-sm",placeholder:"First Name",value:i,onChange:Dt=>s(Dt.target.value)})}),C.jsx("div",{className:"col",children:C.jsx("input",{className:"form-control form-control-sm",placeholder:"Last Name",value:a,onChange:Dt=>o(Dt.target.value)})})]}),C.jsxs("div",{className:"row g-2 mt-2",children:[C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Age",value:l,onChange:Dt=>h(Dt.target.value)})}),C.jsx("div",{className:"col",children:C.jsxs("select",{className:"form-select form-select-sm",value:f,onChange:Dt=>p(Dt.target.value),children:[C.jsx("option",{value:"male",children:"Male"}),C.jsx("option",{value:"female",children:"Female"})]})})]}),C.jsxs("div",{className:"row g-2 mt-2",children:[C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Height (cm)",value:m,onChange:Dt=>v(Dt.target.value)})}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Current Weight",value:x,onChange:Dt=>E(Dt.target.value)})})]}),C.jsxs("div",{className:"row g-2 mt-2",children:[C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Goal Weight",value:b,onChange:Dt=>T(Dt.target.value)})}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"date",className:"form-control form-control-sm",value:S,onChange:Dt=>D(Dt.target.value)})})]})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Preferences"}),C.jsxs("div",{className:"mb-2",children:[C.jsx("label",{className:"form-label small",children:"Meal Order"}),C.jsxs("select",{className:"form-select form-select-sm",value:P,onChange:Dt=>k(Dt.target.value),children:[C.jsx("option",{children:"Breakfast-Lunch-Dinner"}),C.jsx("option",{children:"Lunch-Dinner-Breakfast"}),C.jsx("option",{children:"Dinner-Breakfast-Lunch"})]})]}),C.jsxs("div",{className:"mb-2",children:[C.jsx("label",{className:"form-label small",children:"Units"}),C.jsxs("select",{className:"form-select form-select-sm",value:U,onChange:Dt=>M(Dt.target.value),children:[C.jsx("option",{children:"g"}),C.jsx("option",{children:"mg"}),C.jsx("option",{children:"kcal"})]})]})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Reminder Times"}),C.jsxs("div",{className:"row g-2 mb-2",children:[C.jsx("div",{className:"col",children:C.jsx("input",{type:"time",className:"form-control form-control-sm",value:z,onChange:Dt=>B(Dt.target.value)})}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"time",className:"form-control form-control-sm",value:yt,onChange:Dt=>wt(Dt.target.value)})}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"time",className:"form-control form-control-sm",value:Y,onChange:Dt=>at(Dt.target.value)})})]})]}),C.jsx("button",{className:"btn btn-primary btn-sm w-100 mb-3",onClick:qt,children:"Save All Changes"}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Update Email / Password"}),C.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"Current Password",value:ot,onChange:Dt=>tt(Dt.target.value)}),C.jsx("input",{type:"email",className:"form-control form-control-sm mb-2",placeholder:"New Email",value:vt,onChange:Dt=>Z(Dt.target.value)}),C.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"New Password",value:F,onChange:Dt=>$(Dt.target.value)}),C.jsx("button",{className:"btn btn-outline-light btn-sm w-100",onClick:ae,disabled:gt,children:gt?"Updating...":"Update Email / Password"})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Data Management"}),C.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:Vt,children:"Export JSON"}),C.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:bt,children:"Export CSV"}),C.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:en,disabled:L,children:L?"Clearing...":"Clear All Meals"})]}),C.jsx("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:C.jsxs("button",{className:"btn btn-info w-100 ",onClick:()=>Mt(!0),children:[C.jsx("i",{className:"bi bi-info-circle",style:{padding:"0 10px"}}),"Help"]})}),C.jsxs("div",{className:"card bg-dark border-0 p-3 text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Account"}),C.jsx("button",{className:"btn btn-danger w-100 mt-2",onClick:e,children:"Logout"})]}),Qt&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark text-white p-3 rounded",children:[C.jsx("div",{className:"modal-header mb-2 border-bottom",children:C.jsx("h5",{className:"TitleName",children:" How to use KnowUrFood"})}),C.jsxs("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:[C.jsx("h6",{children:" 1. Adding a Meal"}),C.jsx("p",{children:"There are three ways to log meals:"}),C.jsxs("ul",{children:[C.jsxs("li",{children:[C.jsx("b",{children:"Auto-Fill:"})," Type the food name (e.g., ",C.jsx("i",{children:"Boiled Egg"}),") and the app will fetch nutrition data. Adjust serving size or number of servings, and values update automatically."]}),C.jsxs("li",{children:[C.jsx("b",{children:"Barcode Scan:"})," Tap scan, point your camera at a product barcode, and nutrition details load instantly."]}),C.jsxs("li",{children:[C.jsx("b",{children:"Manual:"})," Enter your own food name and nutrients (useful for homemade meals). Calories are auto-calculated from protein, fat, and carbs."]})]}),C.jsx("h6",{children:" 2. Viewing Meals"}),C.jsxs("p",{children:["Your meals appear as ",C.jsx("b",{children:"cards"})," on the Home screen."]}),C.jsxs("ul",{children:[C.jsxs("li",{children:["Swipe ",C.jsx("b",{children:"left"})," to delete a meal."]}),C.jsxs("li",{children:["Swipe ",C.jsx("b",{children:"right"})," to edit it."]}),C.jsx("li",{children:"Each card shows the meal type, name, and main nutrients."})]}),C.jsx("h6",{children:" 3. Tracking Nutrition"}),C.jsx("p",{children:"The app includes charts to help you monitor your diet:"}),C.jsxs("ul",{children:[C.jsxs("li",{children:[C.jsx("b",{children:"Calories Donut:"})," Shows your daily calorie distribution."]}),C.jsxs("li",{children:[C.jsx("b",{children:"Bar Chart:"})," Compare meals across the week."]}),C.jsxs("li",{children:[C.jsx("b",{children:"Nutrition Donut:"})," Balance of protein, carbs, fat, and more."]})]}),C.jsx("h6",{children:" 4. History & Suggestions"}),C.jsx("p",{children:"Use the History tab to revisit meals from past days. The Suggestions tab provides:"}),C.jsxs("ul",{children:[C.jsxs("li",{children:["Daily tips (e.g., ",C.jsx("i",{children:"Increase protein intake"}),")."]}),C.jsx("li",{children:"Weekly nutrient trends via line charts."}),C.jsx("li",{children:"Comparisons with previous weeks."})]}),C.jsx("h6",{children:" 5. Profile & Preferences"}),C.jsx("p",{children:"In Profile, you can:"}),C.jsxs("ul",{children:[C.jsx("li",{children:"Set meal order (Breakfast  Dinner, etc.)."}),C.jsx("li",{children:"Change units (g, mg, kcal)."}),C.jsx("li",{children:"Toggle dark mode."}),C.jsxs("li",{children:["Export meals as ",C.jsx("b",{children:"CSV"})," or ",C.jsx("b",{children:"JSON"}),"."]}),C.jsx("li",{children:"Clear all meals (with confirmation)."})]}),C.jsx("h6",{children:" 6. Rewards & Gamification"}),C.jsxs("ul",{children:[C.jsxs("li",{children:["Earn ",C.jsx("b",{children:"XP"})," every time you log a meal."]}),C.jsx("li",{children:"Level up as XP increases."}),C.jsx("li",{children:"Unlock badges for daily streaks (5, 15, 30 days, etc.)."})]}),C.jsx("h6",{children:" 7. Weight Tracking"}),C.jsxs("ul",{children:[C.jsx("li",{children:"Log your weight daily in the Profile tab."}),C.jsx("li",{children:"See your progress on a line chart."}),C.jsx("li",{children:"Set a goal weight + target date  the app calculates daily calorie goals."}),C.jsx("li",{children:"Earn special badges when you hit your goal."})]}),C.jsx("h6",{children:" 8. Meal Reminders"}),C.jsxs("ul",{children:[C.jsx("li",{children:"Set reminder times for Breakfast, Lunch, and Dinner in Preferences."}),C.jsx("li",{children:"The app will send you notifications at those times."})]})]}),C.jsx("div",{className:"modal-footer border-top",children:C.jsx("button",{className:"btn btn-danger w-100",onClick:()=>Mt(!1),children:"Close"})})]})})]})}function Zgt({meals:n,user:t}){const[e,r]=rt.useState({}),[i,s]=rt.useState({}),[a,o]=rt.useState(!1),l=new Date,h=l.getDay(),f=h===0?-6:1-h,p=new Date(l);p.setDate(l.getDate()+f);const m=new Date(p);m.setDate(p.getDate()-7);const v=new Date(m);v.setDate(m.getDate()+6);const x={Protein:50*7,Carbohydrate:260*7,Fat:70*7,"Carbs as Sugar":30*7,Fibre:30*7,Salt:6*7},E=(D,P)=>{const k=[],U=new Date(D);for(;U<=P;)k.push(U.toISOString().split("T")[0]),U.setDate(U.getDate()+1);return k},b=D=>{const P={};let k=0;D.forEach(M=>{const I=n.filter(N=>N.date===M);I.length>0&&(k++,I.forEach(N=>{N.foodItems.forEach(L=>{L.nutrients.forEach(j=>{const z=parseFloat(j.total)||0;P[j.type]=(P[j.type]||0)+z})})}))});const U={};return Object.keys(P).forEach(M=>{U[M]=P[M]/k}),U};rt.useEffect(()=>{const D=E(p,new Date(p.getTime()+5184e5)),P=E(m,v);r(b(D)),s(b(P))},[n]),rt.useEffect(()=>{(async()=>{if(!(t!=null&&t.goalDate)||!(t!=null&&t.goalWeight)||!(t!=null&&t.currentWeight))return;const P=await $v(t.uid);if(P.length===0)return;const k=new Date(t.createdAt||P[0].date),U=new Date,M=new Date(t.goalDate),I=Math.max(1,(M-k)/864e5),N=Math.max(1,(U-k)/864e5),L=t.goalWeight-t.currentWeight,j=L/I*N,z=t.currentWeight+j,B=P.reduce((yt,wt)=>yt.date>wt.date?yt:wt).weight;(L>0&&B<z-.5||L<0&&B>z+.5)&&o(!0)})()},[t]);const T=(D,P,k)=>{const U=P/k;return U<.6?D==="Protein"?" You're low on protein today  add eggs, chicken, or beans to boost it.":D==="Fibre"?" Fibre intake is low  whole grains, fruits, and veggies can help.":D==="Carbohydrate"?" Carbs are too low  try rice, bread, or oats for energy.":D==="Fat"?" Healthy fats are low  nuts, avocado, or olive oil are good sources.":` Your ${D} intake is low. Consider foods rich in ${D}.`:U>1.2?D==="Salt"?" Salt intake is high  reduce processed foods and snacks.":D==="Fat"?" You're exceeding fat intake  cut down on fried foods.":D==="Carbohydrate"?" Too many carbs  balance with lean protein.":D==="Sugar"||D.includes("Sugar")?" Sugar intake is high  cut back on sweets and sodas.":` You're exceeding recommended ${D} levels.`:null},S=[];return Object.keys(x).forEach(D=>{const P=e[D]||0,k=(e[D]||0)-(i[D]||0),U=T(D,P,x[D]);U?S.push(U):k>5?S.push(` ${D} increased significantly this week.`):k<-5&&S.push(` ${D} dropped since last week.`)}),C.jsxs("div",{className:"home-container",children:[C.jsx("p",{className:"TitleName",children:"Suggestions"}),a&&C.jsx("div",{className:"CalBarCharSection text-white fw-bold small mb-2 bg-dark",children:" You're behind your weight goal progress. Try adjusting your intake!"}),C.jsxs("div",{className:"CalBarCharSection bg-dark mb-2",children:[C.jsxs("p",{className:"SubTitleName mb-2",children:["Last Week's Calories (",m.toLocaleDateString()," - ",v.toLocaleDateString(),")"]}),C.jsx(C6,{meals:n,startOfWeek:m})]}),C.jsxs("div",{className:"NutritionProgressSection mb-2 bg-dark list-group",style:{padding:"5%"},children:[C.jsx("p",{className:"SubTitleName",children:"This Week's Nutrient Averages"}),Object.keys(x).map(D=>{const P=e[D]||0,k=x[D],U=(e[D]||0)-(i[D]||0),M=Math.min(P/k*100,150),I=P>k,N=U>1?"":U<-1?"":"",L=U?`${N} ${Math.abs(U).toFixed(1)}g from last week`:"";return C.jsxs("div",{className:"mb-3",children:[C.jsxs("div",{className:"d-flex justify-content-between small",children:[C.jsx("span",{className:"text-white",children:D}),C.jsxs("span",{className:"text-white",children:[P.toFixed(1)," / ",k,"g"]})]}),C.jsx("div",{className:"progress",style:{height:"8px"},children:C.jsx("div",{className:`progress-bar ${I?"bg-danger":"bg-success"} progress-bar-striped progress-bar-animated`,style:{width:`${M}%`}})}),C.jsx("div",{className:"small text-white",children:L})]},D)})]}),C.jsx("div",{className:"SuggestionsBox",children:S.length>0?C.jsxs("ul",{className:"list-group bg-dark",style:{padding:"5%"},children:[C.jsx("p",{className:"SubTitleName",children:"Suggestions"}),S.map((D,P)=>C.jsx("li",{className:"list-group-item small bg-dark text-white border-0 ps-0",children:D},P))]}):C.jsx("p",{className:"text-success",children:" You're on track this week!"})})]})}function N2(){return N2=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},N2.apply(null,arguments)}function BV(n,t){if(n==null)return{};var e={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.indexOf(r)!==-1)continue;e[r]=n[r]}return e}function M2(n,t){return M2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},M2(n,t)}function RS(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,M2(n,t)}function Jgt(n,t){return n.classList?!!t&&n.classList.contains(t):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+t+" ")!==-1}function t0t(n,t){n.classList?n.classList.add(t):Jgt(n,t)||(typeof n.className=="string"?n.className=n.className+" "+t:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+t))}function MP(n,t){return n.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function e0t(n,t){n.classList?n.classList.remove(t):typeof n.className=="string"?n.className=MP(n.className,t):n.setAttribute("class",MP(n.className&&n.className.baseVal||"",t))}var n0t=kP();const w1=P2(n0t),PP={disabled:!1},NS=dn.createContext(null);var FV=function(t){return t.scrollTop},Bp="unmounted",Dl="exited",Qi="entering",Qs="entered",Ug="exiting",fo=function(n){RS(t,n);function t(r,i){var s;s=n.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Dl,s.appearStatus=Qi):l=Qs:r.unmountOnExit||r.mountOnEnter?l=Bp:l=Dl,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===Bp?{status:Dl}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Qi&&a!==Qs&&(s=Qi):(a===Qi||a===Qs)&&(s=Ug)}this.updateStatus(!1,s)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},e.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Qi){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:w1.findDOMNode(this);a&&FV(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Dl&&this.setState({status:Bp})},e.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[w1.findDOMNode(this),o],h=l[0],f=l[1],p=this.getTimeouts(),m=o?p.appear:p.enter;if(!i&&!a||PP.disabled){this.safeSetState({status:Qs},function(){s.props.onEntered(h)});return}this.props.onEnter(h,f),this.safeSetState({status:Qi},function(){s.props.onEntering(h,f),s.onTransitionEnd(m,function(){s.safeSetState({status:Qs},function(){s.props.onEntered(h,f)})})})},e.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:w1.findDOMNode(this);if(!s||PP.disabled){this.safeSetState({status:Dl},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Ug},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Dl},function(){i.props.onExited(o)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},e.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:w1.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],h=l[0],f=l[1];this.props.addEndListener(h,f)}i!=null&&setTimeout(this.nextCallback,i)},e.render=function(){var i=this.state.status;if(i===Bp)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=BV(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return dn.createElement(NS.Provider,{value:null},typeof a=="function"?a(i,o):dn.cloneElement(dn.Children.only(a),o))},t}(dn.Component);fo.contextType=NS;fo.propTypes={};function Sh(){}fo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Sh,onEntering:Sh,onEntered:Sh,onExit:Sh,onExiting:Sh,onExited:Sh};fo.UNMOUNTED=Bp;fo.EXITED=Dl;fo.ENTERING=Qi;fo.ENTERED=Qs;fo.EXITING=Ug;var r0t=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return t0t(t,r)})},GE=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return e0t(t,r)})},MS=function(n){RS(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(o,l){var h=r.resolveArguments(o,l),f=h[0],p=h[1];r.removeClasses(f,"exit"),r.addClass(f,p?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(o,l)},r.onEntering=function(o,l){var h=r.resolveArguments(o,l),f=h[0],p=h[1],m=p?"appear":"enter";r.addClass(f,m,"active"),r.props.onEntering&&r.props.onEntering(o,l)},r.onEntered=function(o,l){var h=r.resolveArguments(o,l),f=h[0],p=h[1],m=p?"appear":"enter";r.removeClasses(f,m),r.addClass(f,m,"done"),r.props.onEntered&&r.props.onEntered(o,l)},r.onExit=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(o)},r.onExiting=function(o){var l=r.resolveArguments(o),h=l[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(o)},r.onExited=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(o)},r.resolveArguments=function(o,l){return r.props.nodeRef?[r.props.nodeRef.current,o]:[o,l]},r.getClassNames=function(o){var l=r.props.classNames,h=typeof l=="string",f=h&&l?l+"-":"",p=h?""+f+o:l[o],m=h?p+"-active":l[o+"Active"],v=h?p+"-done":l[o+"Done"];return{baseClassName:p,activeClassName:m,doneClassName:v}},r}var e=t.prototype;return e.addClass=function(i,s,a){var o=this.getClassNames(s)[a+"ClassName"],l=this.getClassNames("enter"),h=l.doneClassName;s==="appear"&&a==="done"&&h&&(o+=" "+h),a==="active"&&i&&FV(i),o&&(this.appliedClasses[s][a]=o,r0t(i,o))},e.removeClasses=function(i,s){var a=this.appliedClasses[s],o=a.base,l=a.active,h=a.done;this.appliedClasses[s]={},o&&GE(i,o),l&&GE(i,l),h&&GE(i,h)},e.render=function(){var i=this.props;i.classNames;var s=BV(i,["classNames"]);return dn.createElement(fo,N2({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(dn.Component);MS.defaultProps={classNames:""};MS.propTypes={};var E1,b1;function i0t(n,t){return!(n===t||dn.isValidElement(n)&&dn.isValidElement(t)&&n.key!=null&&n.key===t.key)}var Of={out:"out-in",in:"in-out"},ey=function(t,e,r){return function(){var i;t.props[e]&&(i=t.props)[e].apply(i,arguments),r()}},s0t=(E1={},E1[Of.out]=function(n){var t=n.current,e=n.changeState;return dn.cloneElement(t,{in:!1,onExited:ey(t,"onExited",function(){e(Qi,null)})})},E1[Of.in]=function(n){var t=n.current,e=n.changeState,r=n.children;return[t,dn.cloneElement(r,{in:!0,onEntered:ey(r,"onEntered",function(){e(Qi)})})]},E1),a0t=(b1={},b1[Of.out]=function(n){var t=n.children,e=n.changeState;return dn.cloneElement(t,{in:!0,onEntered:ey(t,"onEntered",function(){e(Qs,dn.cloneElement(t,{in:!0}))})})},b1[Of.in]=function(n){var t=n.current,e=n.children,r=n.changeState;return[dn.cloneElement(t,{in:!1,onExited:ey(t,"onExited",function(){r(Qs,dn.cloneElement(e,{in:!0}))})}),dn.cloneElement(e,{in:!0})]},b1),PS=function(n){RS(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.state={status:Qs,current:null},r.appeared=!1,r.changeState=function(o,l){l===void 0&&(l=r.state.current),r.setState({status:o,current:l})},r}var e=t.prototype;return e.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(i,s){return i.children==null?{current:null}:s.status===Qi&&i.mode===Of.in?{status:Qi}:s.current&&i0t(s.current,i.children)?{status:Ug}:{current:dn.cloneElement(i.children,{in:!0})}},e.render=function(){var i=this.props,s=i.children,a=i.mode,o=this.state,l=o.status,h=o.current,f={children:s,current:h,changeState:this.changeState,status:l},p;switch(l){case Qi:p=a0t[a](f);break;case Ug:p=s0t[a](f);break;case Qs:p=h}return dn.createElement(NS.Provider,{value:{isMounting:!this.appeared}},p)},t}(dn.Component);PS.propTypes={};PS.defaultProps={mode:Of.out};function o0t(){const[n,t]=rt.useState(null),[e,r]=rt.useState([]),[i,s]=rt.useState("dashboard"),[a,o]=rt.useState(!1),[l,h]=rt.useState(null),[f,p]=rt.useState(!1),[m,v]=rt.useState(null),[x,E]=rt.useState(""),[b,T]=rt.useState(!1),[S,D]=rt.useState(!0),P=rt.useRef(!1),k=rt.useRef(null),[U,M]=rt.useState(!1);rt.useEffect(()=>{const B=async()=>{const yt=await HM();if(t(yt||null),M(!0),yt){t(yt);const wt=await Xw(yt.uid);r(wt)}};P.current?D(!1):setTimeout(()=>{D(!1),P.current=!0},1500),B()},[]),rt.useEffect(()=>{"Notification"in window&&n&&Notification.requestPermission().then(B=>{B==="granted"&&z(n)})},[n]);const I=async B=>{t(B);const yt=await Xw(B.uid);r(yt)},N=async B=>{if(!n)return;const yt={...B,userId:n.uid};if(l){await zrt({...yt,id:l.id},n.uid);const wt=e.map(Y=>Y.id===l.id?{...yt,id:l.id}:Y);r(wt),h(null)}else{await Hrt(yt,n.uid),E("+10 XP! "),T(!0),setTimeout(()=>T(!1),3e3);const wt=await Xw(n.uid),Y=await HM();r(wt),t(Y)}o(!1)},L=async B=>{await Grt(B,n.uid);const yt=e.filter(wt=>wt.id!==B);r(yt)},j=async()=>{await Yrt(),t(null),r([])};function z(B){[{label:"Breakfast",time:B.breakfastTime||"08:00"},{label:"Lunch",time:B.lunchTime||"13:00"},{label:"Dinner",time:B.dinnerTime||"19:00"}].forEach(({label:wt,time:Y})=>{const[at,vt]=Y.split(":").map(Number),Z=new Date,F=new Date;F.setHours(at,vt,0,0),F<=Z&&F.setDate(F.getDate()+1);const $=F.getTime()-Z.getTime();setTimeout(()=>{new Notification(`${wt} Reminder `,{body:`It's time to log your ${wt.toLowerCase()}!`})},$)})}return!U||S?C.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:C.jsx("img",{src:A2,alt:"Logo",style:{width:"150px",height:"150px"}})}):n?S?C.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:C.jsx("img",{src:A2,alt:"Logo",style:{width:"150px",height:"150px"}})}):C.jsx(PS,{mode:"out-in",children:C.jsx(MS,{timeout:300,classNames:"tab-transition",unmountOnExit:!0,nodeRef:k,children:C.jsxs("div",{style:{height:"100%"},ref:k,children:[i==="dashboard"&&C.jsx(Bat,{user:n,meals:e,onEditMeal:B=>{h(B),o(!0)},onDeleteMeal:B=>{v(B),p(!0)}}),i==="history"&&C.jsx(Fat,{user:n,meals:e,onEditMeal:B=>{h(B),o(!0)},onDeleteMeal:B=>{v(B),p(!0)}}),i==="suggestions"&&C.jsx(Zgt,{meals:e,user:n}),i==="profile"&&C.jsx(Qgt,{user:n,meals:e,onLogout:j,clearAllMeals:async()=>{await Wrt(n.uid),r([])}}),C.jsx(wF,{onAddClick:()=>o(!0),onLogout:j,onTabChange:B=>s(B),currentTab:i}),C.jsx(Kut,{isOpen:a,onClose:()=>{o(!1),h(null)},onSave:N,user:n,editMeal:l}),f&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container p-4 text-center",children:[C.jsx("p",{className:"text-white fw-bold",children:"Are you sure you want to delete this meal?"}),C.jsxs("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[C.jsx("button",{className:"btn btn-secondary",onClick:()=>p(!1),children:"Cancel"}),C.jsx("button",{className:"btn btn-danger",onClick:async()=>{m!==null&&(await L(m),p(!1),v(null))},children:"Delete"})]})]})}),b&&C.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:C.jsx("div",{className:"toast show bg-success text-white",children:C.jsx("div",{className:"toast-body fw-bold text-center",children:x})})})]})},i)}):C.jsx(Qut,{onLoginSuccess:I})}xF.createRoot(document.getElementById("root")).render(C.jsx(dn.StrictMode,{children:C.jsx(Xrt,{children:C.jsx(o0t,{})})}));

var cL=Object.defineProperty;var lL=(n,t,e)=>t in n?cL(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var lt=(n,t,e)=>lL(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();function Nw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v_={exports:{}},nd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC;function uL(){if(bC)return nd;bC=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return nd.Fragment=t,nd.jsx=e,nd.jsxs=e,nd}var EC;function hL(){return EC||(EC=1,v_.exports=uL()),v_.exports}var O=hL(),__={exports:{}},rd={},x_={exports:{}},w_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function fL(){return AC||(AC=1,function(n){function t(K,ct){var vt=K.length;K.push(ct);t:for(;0<vt;){var et=vt-1>>>1,V=K[et];if(0<i(V,ct))K[et]=ct,K[vt]=V,vt=et;else break t}}function e(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ct=K[0],vt=K.pop();if(vt!==ct){K[0]=vt;t:for(var et=0,V=K.length,q=V>>>1;et<q;){var ot=2*(et+1)-1,nt=K[ot],mt=ot+1,_t=K[mt];if(0>i(nt,vt))mt<V&&0>i(_t,nt)?(K[et]=_t,K[mt]=vt,et=mt):(K[et]=nt,K[ot]=vt,et=ot);else if(mt<V&&0>i(_t,vt))K[et]=_t,K[mt]=vt,et=mt;else break t}}return ct}function i(K,ct){var vt=K.sortIndex-ct.sortIndex;return vt!==0?vt:K.id-ct.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],h=[],d=1,g=null,m=3,v=!1,w=!1,b=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function k(K){for(var ct=e(h);ct!==null;){if(ct.callback===null)r(h);else if(ct.startTime<=K)r(h),ct.sortIndex=ct.expirationTime,t(l,ct);else break;ct=e(h)}}function P(K){if(b=!1,k(K),!w)if(e(l)!==null)w=!0,j||(j=!0,G());else{var ct=e(h);ct!==null&&bt(P,ct.startTime-K)}}var j=!1,M=-1,C=5,N=-1;function B(){return E?!0:!(n.unstable_now()-N<C)}function z(){if(E=!1,j){var K=n.unstable_now();N=K;var ct=!0;try{t:{w=!1,b&&(b=!1,T(M),M=-1),v=!0;var vt=m;try{e:{for(k(K),g=e(l);g!==null&&!(g.expirationTime>K&&B());){var et=g.callback;if(typeof et=="function"){g.callback=null,m=g.priorityLevel;var V=et(g.expirationTime<=K);if(K=n.unstable_now(),typeof V=="function"){g.callback=V,k(K),ct=!0;break e}g===e(l)&&r(l),k(K)}else r(l);g=e(l)}if(g!==null)ct=!0;else{var q=e(h);q!==null&&bt(P,q.startTime-K),ct=!1}}break t}finally{g=null,m=vt,v=!1}ct=void 0}}finally{ct?G():j=!1}}}var G;if(typeof I=="function")G=function(){I(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,xt=F.port2;F.port1.onmessage=z,G=function(){xt.postMessage(null)}}else G=function(){S(z,0)};function bt(K,ct){M=S(function(){K(n.unstable_now())},ct)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(K){switch(m){case 1:case 2:case 3:var ct=3;break;default:ct=m}var vt=m;m=ct;try{return K()}finally{m=vt}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(K,ct){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var vt=m;m=K;try{return ct()}finally{m=vt}},n.unstable_scheduleCallback=function(K,ct,vt){var et=n.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?et+vt:et):vt=et,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=vt+V,K={id:d++,callback:ct,priorityLevel:K,startTime:vt,expirationTime:V,sortIndex:-1},vt>et?(K.sortIndex=vt,t(h,K),e(l)===null&&K===e(h)&&(b?(T(M),M=-1):b=!0,bt(P,vt-et))):(K.sortIndex=V,t(l,K),w||v||(w=!0,j||(j=!0,G()))),K},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(K){var ct=m;return function(){var vt=m;m=ct;try{return K.apply(this,arguments)}finally{m=vt}}}}(w_)),w_}var TC;function dL(){return TC||(TC=1,x_.exports=fL()),x_.exports}var b_={exports:{}},ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SC;function gL(){if(SC)return ee;SC=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function m(V){return V===null||typeof V!="object"?null:(V=g&&V[g]||V["@@iterator"],typeof V=="function"?V:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function E(V,q,ot){this.props=V,this.context=q,this.refs=b,this.updater=ot||v}E.prototype.isReactComponent={},E.prototype.setState=function(V,q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,q,"setState")},E.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function S(){}S.prototype=E.prototype;function T(V,q,ot){this.props=V,this.context=q,this.refs=b,this.updater=ot||v}var I=T.prototype=new S;I.constructor=T,w(I,E.prototype),I.isPureReactComponent=!0;var k=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function M(V,q,ot,nt,mt,_t){return ot=_t.ref,{$$typeof:n,type:V,key:q,ref:ot!==void 0?ot:null,props:_t}}function C(V,q){return M(V.type,q,void 0,void 0,void 0,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function B(V){var q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ot){return q[ot]})}var z=/\/+/g;function G(V,q){return typeof V=="object"&&V!==null&&V.key!=null?B(""+V.key):q.toString(36)}function F(){}function xt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(F,F):(V.status="pending",V.then(function(q){V.status==="pending"&&(V.status="fulfilled",V.value=q)},function(q){V.status==="pending"&&(V.status="rejected",V.reason=q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function bt(V,q,ot,nt,mt){var _t=typeof V;(_t==="undefined"||_t==="boolean")&&(V=null);var wt=!1;if(V===null)wt=!0;else switch(_t){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(V.$$typeof){case n:case t:wt=!0;break;case d:return wt=V._init,bt(wt(V._payload),q,ot,nt,mt)}}if(wt)return mt=mt(V),wt=nt===""?"."+G(V,0):nt,k(mt)?(ot="",wt!=null&&(ot=wt.replace(z,"$&/")+"/"),bt(mt,q,ot,"",function(kt){return kt})):mt!=null&&(N(mt)&&(mt=C(mt,ot+(mt.key==null||V&&V.key===mt.key?"":(""+mt.key).replace(z,"$&/")+"/")+wt)),q.push(mt)),1;wt=0;var Zt=nt===""?".":nt+":";if(k(V))for(var Ut=0;Ut<V.length;Ut++)nt=V[Ut],_t=Zt+G(nt,Ut),wt+=bt(nt,q,ot,_t,mt);else if(Ut=m(V),typeof Ut=="function")for(V=Ut.call(V),Ut=0;!(nt=V.next()).done;)nt=nt.value,_t=Zt+G(nt,Ut++),wt+=bt(nt,q,ot,_t,mt);else if(_t==="object"){if(typeof V.then=="function")return bt(xt(V),q,ot,nt,mt);throw q=String(V),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return wt}function K(V,q,ot){if(V==null)return V;var nt=[],mt=0;return bt(V,nt,"","",function(_t){return q.call(ot,_t,mt++)}),nt}function ct(V){if(V._status===-1){var q=V._result;q=q(),q.then(function(ot){(V._status===0||V._status===-1)&&(V._status=1,V._result=ot)},function(ot){(V._status===0||V._status===-1)&&(V._status=2,V._result=ot)}),V._status===-1&&(V._status=0,V._result=q)}if(V._status===1)return V._result.default;throw V._result}var vt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function et(){}return ee.Children={map:K,forEach:function(V,q,ot){K(V,function(){q.apply(this,arguments)},ot)},count:function(V){var q=0;return K(V,function(){q++}),q},toArray:function(V){return K(V,function(q){return q})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},ee.Component=E,ee.Fragment=e,ee.Profiler=i,ee.PureComponent=T,ee.StrictMode=r,ee.Suspense=l,ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ee.__COMPILER_RUNTIME={__proto__:null,c:function(V){return P.H.useMemoCache(V)}},ee.cache=function(V){return function(){return V.apply(null,arguments)}},ee.cloneElement=function(V,q,ot){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var nt=w({},V.props),mt=V.key,_t=void 0;if(q!=null)for(wt in q.ref!==void 0&&(_t=void 0),q.key!==void 0&&(mt=""+q.key),q)!j.call(q,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&q.ref===void 0||(nt[wt]=q[wt]);var wt=arguments.length-2;if(wt===1)nt.children=ot;else if(1<wt){for(var Zt=Array(wt),Ut=0;Ut<wt;Ut++)Zt[Ut]=arguments[Ut+2];nt.children=Zt}return M(V.type,mt,void 0,void 0,_t,nt)},ee.createContext=function(V){return V={$$typeof:a,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},ee.createElement=function(V,q,ot){var nt,mt={},_t=null;if(q!=null)for(nt in q.key!==void 0&&(_t=""+q.key),q)j.call(q,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(mt[nt]=q[nt]);var wt=arguments.length-2;if(wt===1)mt.children=ot;else if(1<wt){for(var Zt=Array(wt),Ut=0;Ut<wt;Ut++)Zt[Ut]=arguments[Ut+2];mt.children=Zt}if(V&&V.defaultProps)for(nt in wt=V.defaultProps,wt)mt[nt]===void 0&&(mt[nt]=wt[nt]);return M(V,_t,void 0,void 0,null,mt)},ee.createRef=function(){return{current:null}},ee.forwardRef=function(V){return{$$typeof:o,render:V}},ee.isValidElement=N,ee.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:ct}},ee.memo=function(V,q){return{$$typeof:h,type:V,compare:q===void 0?null:q}},ee.startTransition=function(V){var q=P.T,ot={};P.T=ot;try{var nt=V(),mt=P.S;mt!==null&&mt(ot,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(et,vt)}catch(_t){vt(_t)}finally{P.T=q}},ee.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ee.use=function(V){return P.H.use(V)},ee.useActionState=function(V,q,ot){return P.H.useActionState(V,q,ot)},ee.useCallback=function(V,q){return P.H.useCallback(V,q)},ee.useContext=function(V){return P.H.useContext(V)},ee.useDebugValue=function(){},ee.useDeferredValue=function(V,q){return P.H.useDeferredValue(V,q)},ee.useEffect=function(V,q,ot){var nt=P.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nt.useEffect(V,q)},ee.useId=function(){return P.H.useId()},ee.useImperativeHandle=function(V,q,ot){return P.H.useImperativeHandle(V,q,ot)},ee.useInsertionEffect=function(V,q){return P.H.useInsertionEffect(V,q)},ee.useLayoutEffect=function(V,q){return P.H.useLayoutEffect(V,q)},ee.useMemo=function(V,q){return P.H.useMemo(V,q)},ee.useOptimistic=function(V,q){return P.H.useOptimistic(V,q)},ee.useReducer=function(V,q,ot){return P.H.useReducer(V,q,ot)},ee.useRef=function(V){return P.H.useRef(V)},ee.useState=function(V){return P.H.useState(V)},ee.useSyncExternalStore=function(V,q,ot){return P.H.useSyncExternalStore(V,q,ot)},ee.useTransition=function(){return P.H.useTransition()},ee.version="19.1.0",ee}var CC;function Pw(){return CC||(CC=1,b_.exports=gL()),b_.exports}var E_={exports:{}},Er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC;function pL(){if(IC)return Er;IC=1;var n=Pw();function t(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:l,containerInfo:h,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,h){if(l==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Er.createPortal=function(l,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(l,h,null,d)},Er.flushSync=function(l){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=h,r.p=d,r.d.f()}},Er.preconnect=function(l,h){typeof l=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(l,h))},Er.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Er.preinit=function(l,h){if(typeof l=="string"&&h&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(l,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:v}):d==="script"&&r.d.X(l,{crossOrigin:g,integrity:m,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Er.preinitModule=function(l,h){if(typeof l=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=o(h.as,h.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(l)},Er.preload=function(l,h){if(typeof l=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin);r.d.L(l,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Er.preloadModule=function(l,h){if(typeof l=="string")if(h){var d=o(h.as,h.crossOrigin);r.d.m(l,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(l)},Er.requestFormReset=function(l){r.d.r(l)},Er.unstable_batchedUpdates=function(l,h){return l(h)},Er.useFormState=function(l,h,d){return a.H.useFormState(l,h,d)},Er.useFormStatus=function(){return a.H.useHostTransitionStatus()},Er.version="19.1.0",Er}var RC;function R4(){if(RC)return E_.exports;RC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),E_.exports=pL(),E_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC;function mL(){if(DC)return rd;DC=1;var n=dL(),t=Pw(),e=R4();function r(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var u=c,f=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(f=u.return),c=u.return;while(c)}return u.tag===3?f:null}function a(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function o(c){if(s(c)!==c)throw Error(r(188))}function l(c){var u=c.alternate;if(!u){if(u=s(c),u===null)throw Error(r(188));return u!==c?null:c}for(var f=c,p=u;;){var _=f.return;if(_===null)break;var x=_.alternate;if(x===null){if(p=_.return,p!==null){f=p;continue}break}if(_.child===x.child){for(x=_.child;x;){if(x===f)return o(_),c;if(x===p)return o(_),u;x=x.sibling}throw Error(r(188))}if(f.return!==p.return)f=_,p=x;else{for(var D=!1,L=_.child;L;){if(L===f){D=!0,f=_,p=x;break}if(L===p){D=!0,p=_,f=x;break}L=L.sibling}if(!D){for(L=x.child;L;){if(L===f){D=!0,f=x,p=_;break}if(L===p){D=!0,p=x,f=_;break}L=L.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?c:u}function h(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(u=h(c),u!==null)return u;c=c.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function G(c){return c===null||typeof c!="object"?null:(c=z&&c[z]||c["@@iterator"],typeof c=="function"?c:null)}var F=Symbol.for("react.client.reference");function xt(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===F?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case w:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case P:return"Suspense";case j:return"SuspenseList";case N:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case I:return(c.displayName||"Context")+".Provider";case T:return(c._context.displayName||"Context")+".Consumer";case k:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case M:return u=c.displayName||null,u!==null?u:xt(c.type)||"Memo";case C:u=c._payload,c=c._init;try{return xt(c(u))}catch{}}return null}var bt=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},et=[],V=-1;function q(c){return{current:c}}function ot(c){0>V||(c.current=et[V],et[V]=null,V--)}function nt(c,u){V++,et[V]=c.current,c.current=u}var mt=q(null),_t=q(null),wt=q(null),Zt=q(null);function Ut(c,u){switch(nt(wt,u),nt(_t,c),nt(mt,null),u.nodeType){case 9:case 11:c=(c=u.documentElement)&&(c=c.namespaceURI)?$S(c):0;break;default:if(c=u.tagName,u=u.namespaceURI)u=$S(u),c=QS(u,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}ot(mt),nt(mt,c)}function kt(){ot(mt),ot(_t),ot(wt)}function zt(c){c.memoizedState!==null&&nt(Zt,c);var u=mt.current,f=QS(u,c.type);u!==f&&(nt(_t,c),nt(mt,f))}function te(c){_t.current===c&&(ot(mt),ot(_t)),Zt.current===c&&(ot(Zt),Qf._currentValue=vt)}var Fe=Object.prototype.hasOwnProperty,Ke=n.unstable_scheduleCallback,rn=n.unstable_cancelCallback,ri=n.unstable_shouldYield,Rt=n.unstable_requestPaint,Nt=n.unstable_now,pt=n.unstable_getCurrentPriorityLevel,Pt=n.unstable_ImmediatePriority,Jt=n.unstable_UserBlockingPriority,Et=n.unstable_NormalPriority,Vt=n.unstable_LowPriority,De=n.unstable_IdlePriority,En=n.log,Hr=n.unstable_setDisableYieldValue,fe=null,Kt=null;function qe(c){if(typeof En=="function"&&Hr(c),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(fe,c)}catch{}}var $e=Math.clz32?Math.clz32:ls,Hi=Math.log,cs=Math.LN2;function ls(c){return c>>>=0,c===0?32:31-(Hi(c)/cs|0)|0}var us=256,hs=4194304;function Gi(c){var u=c&42;if(u!==0)return u;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Hl(c,u,f){var p=c.pendingLanes;if(p===0)return 0;var _=0,x=c.suspendedLanes,D=c.pingedLanes;c=c.warmLanes;var L=p&134217727;return L!==0?(p=L&~x,p!==0?_=Gi(p):(D&=L,D!==0?_=Gi(D):f||(f=L&~c,f!==0&&(_=Gi(f))))):(L=p&~x,L!==0?_=Gi(L):D!==0?_=Gi(D):f||(f=p&~c,f!==0&&(_=Gi(f)))),_===0?0:u!==0&&u!==_&&(u&x)===0&&(x=_&-_,f=u&-u,x>=f||x===32&&(f&4194048)!==0)?u:_}function lc(c,u){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&u)===0}function $h(c,u){switch(c){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qh(){var c=us;return us<<=1,(us&4194048)===0&&(us=256),c}function Zh(){var c=hs;return hs<<=1,(hs&62914560)===0&&(hs=4194304),c}function ta(c){for(var u=[],f=0;31>f;f++)u.push(c);return u}function ea(c,u){c.pendingLanes|=u,u!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Jh(c,u,f,p,_,x){var D=c.pendingLanes;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=f,c.entangledLanes&=f,c.errorRecoveryDisabledLanes&=f,c.shellSuspendCounter=0;var L=c.entanglements,W=c.expirationTimes,J=c.hiddenUpdates;for(f=D&~f;0<f;){var ht=31-$e(f),gt=1<<ht;L[ht]=0,W[ht]=-1;var it=J[ht];if(it!==null)for(J[ht]=null,ht=0;ht<it.length;ht++){var st=it[ht];st!==null&&(st.lane&=-536870913)}f&=~gt}p!==0&&fs(c,p,0),x!==0&&_===0&&c.tag!==0&&(c.suspendedLanes|=x&~(D&~u))}function fs(c,u,f){c.pendingLanes|=u,c.suspendedLanes&=~u;var p=31-$e(u);c.entangledLanes|=u,c.entanglements[p]=c.entanglements[p]|1073741824|f&4194090}function tf(c,u){var f=c.entangledLanes|=u;for(c=c.entanglements;f;){var p=31-$e(f),_=1<<p;_&u|c[p]&u&&(c[p]|=u),f&=~_}}function Ga(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Gl(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Wa(){var c=ct.p;return c!==0?c:(c=window.event,c===void 0?32:mC(c.type))}function op(c,u){var f=ct.p;try{return ct.p=c,u()}finally{ct.p=f}}var sn=Math.random().toString(36).slice(2),jn="__reactFiber$"+sn,Nn="__reactProps$"+sn,xi="__reactContainer$"+sn,ef="__reactEvents$"+sn,wy="__reactListeners$"+sn,qa="__reactHandles$"+sn,cp="__reactResources$"+sn,uc="__reactMarker$"+sn;function Ya(c){delete c[jn],delete c[Nn],delete c[ef],delete c[wy],delete c[qa]}function na(c){var u=c[jn];if(u)return u;for(var f=c.parentNode;f;){if(u=f[xi]||f[jn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(c=eC(c);c!==null;){if(f=c[jn])return f;c=eC(c)}return u}c=f,f=c.parentNode}return null}function ds(c){if(c=c[jn]||c[xi]){var u=c.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return c}return null}function gs(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c.stateNode;throw Error(r(33))}function Pr(c){var u=c[cp];return u||(u=c[cp]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function An(c){c[uc]=!0}var nf=new Set,Wl={};function Wi(c,u){ra(c,u),ra(c+"Capture",u)}function ra(c,u){for(Wl[c]=u,c=0;c<u.length;c++)nf.add(u[c])}var lp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),up={},hc={};function hp(c){return Fe.call(hc,c)?!0:Fe.call(up,c)?!1:lp.test(c)?hc[c]=!0:(up[c]=!0,!1)}function Xa(c,u,f){if(hp(u))if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":c.removeAttribute(u);return;case"boolean":var p=u.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){c.removeAttribute(u);return}}c.setAttribute(u,""+f)}}function ps(c,u,f){if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(u);return}c.setAttribute(u,""+f)}}function fr(c,u,f,p){if(p===null)c.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttributeNS(u,f,""+p)}}var fc,fp;function ia(c){if(fc===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);fc=u&&u[1]||"",fp=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fc+c+fp}var ql=!1;function Yl(c,u){if(!c||ql)return"";ql=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(u){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(st){var it=st}Reflect.construct(c,[],gt)}else{try{gt.call()}catch(st){it=st}c.call(gt.prototype)}}else{try{throw Error()}catch(st){it=st}(gt=c())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch(st){if(st&&it&&typeof st.stack=="string")return[st.stack,it.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),D=x[0],L=x[1];if(D&&L){var W=D.split(`
`),J=L.split(`
`);for(_=p=0;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;for(;_<J.length&&!J[_].includes("DetermineComponentFrameRoot");)_++;if(p===W.length||_===J.length)for(p=W.length-1,_=J.length-1;1<=p&&0<=_&&W[p]!==J[_];)_--;for(;1<=p&&0<=_;p--,_--)if(W[p]!==J[_]){if(p!==1||_!==1)do if(p--,_--,0>_||W[p]!==J[_]){var ht=`
`+W[p].replace(" at new "," at ");return c.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",c.displayName)),ht}while(1<=p&&0<=_);break}}}finally{ql=!1,Error.prepareStackTrace=f}return(f=c?c.displayName||c.name:"")?ia(f):""}function rf(c){switch(c.tag){case 26:case 27:case 5:return ia(c.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 15:return Yl(c.type,!1);case 11:return Yl(c.type.render,!1);case 1:return Yl(c.type,!0);case 31:return ia("Activity");default:return""}}function Xl(c){try{var u="";do u+=rf(c),c=c.return;while(c);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function kr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function sf(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function by(c){var u=sf(c)?"checked":"value",f=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),p=""+c[u];if(!c.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,x=f.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return _.call(this)},set:function(D){p=""+D,x.call(this,D)}}),Object.defineProperty(c,u,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Kl(c){c._valueTracker||(c._valueTracker=by(c))}function af(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var f=u.getValue(),p="";return c&&(p=sf(c)?c.checked?"true":"false":c.value),c=p,c!==f?(u.setValue(c),!0):!1}function dc(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Ey=/[\n"\\]/g;function Pn(c){return c.replace(Ey,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ii(c,u,f,p,_,x,D,L){c.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?c.type=D:c.removeAttribute("type"),u!=null?D==="number"?(u===0&&c.value===""||c.value!=u)&&(c.value=""+kr(u)):c.value!==""+kr(u)&&(c.value=""+kr(u)):D!=="submit"&&D!=="reset"||c.removeAttribute("value"),u!=null?Ka(c,D,kr(u)):f!=null?Ka(c,D,kr(f)):p!=null&&c.removeAttribute("value"),_==null&&x!=null&&(c.defaultChecked=!!x),_!=null&&(c.checked=_&&typeof _!="function"&&typeof _!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?c.name=""+kr(L):c.removeAttribute("name")}function gc(c,u,f,p,_,x,D,L){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(c.type=x),u!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||u!=null))return;f=f!=null?""+kr(f):"",u=u!=null?""+kr(u):f,L||u===c.value||(c.value=u),c.defaultValue=u}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,c.checked=L?c.checked:!!p,c.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(c.name=D)}function Ka(c,u,f){u==="number"&&dc(c.ownerDocument)===c||c.defaultValue===""+f||(c.defaultValue=""+f)}function sa(c,u,f,p){if(c=c.options,u){u={};for(var _=0;_<f.length;_++)u["$"+f[_]]=!0;for(f=0;f<c.length;f++)_=u.hasOwnProperty("$"+c[f].value),c[f].selected!==_&&(c[f].selected=_),_&&p&&(c[f].defaultSelected=!0)}else{for(f=""+kr(f),u=null,_=0;_<c.length;_++){if(c[_].value===f){c[_].selected=!0,p&&(c[_].defaultSelected=!0);return}u!==null||c[_].disabled||(u=c[_])}u!==null&&(u.selected=!0)}}function Ue(c,u,f){if(u!=null&&(u=""+kr(u),u!==c.value&&(c.value=u),f==null)){c.defaultValue!==u&&(c.defaultValue=u);return}c.defaultValue=f!=null?""+kr(f):""}function pc(c,u,f,p){if(u==null){if(p!=null){if(f!=null)throw Error(r(92));if(bt(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),u=f}f=kr(u),c.defaultValue=f,p=c.textContent,p===f&&p!==""&&p!==null&&(c.value=p)}function wi(c,u){if(u){var f=c.firstChild;if(f&&f===c.lastChild&&f.nodeType===3){f.nodeValue=u;return}}c.textContent=u}var mc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dp(c,u,f){var p=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?c.setProperty(u,""):u==="float"?c.cssFloat="":c[u]="":p?c.setProperty(u,f):typeof f!="number"||f===0||mc.has(u)?u==="float"?c.cssFloat=f:c[u]=(""+f).trim():c[u]=f+"px"}function of(c,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(c=c.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||u!=null&&u.hasOwnProperty(p)||(p.indexOf("--")===0?c.setProperty(p,""):p==="float"?c.cssFloat="":c[p]="");for(var _ in u)p=u[_],u.hasOwnProperty(_)&&f[_]!==p&&dp(c,_,p)}else for(var x in u)u.hasOwnProperty(x)&&dp(c,x,u[x])}function cf(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ay=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ty=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $l(c){return Ty.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var aa=null;function bi(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var oa=null,ca=null;function lf(c){var u=ds(c);if(u&&(c=u.stateNode)){var f=c[Nn]||null;t:switch(c=u.stateNode,u.type){case"input":if(ii(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=c;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Pn(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var p=f[u];if(p!==c&&p.form===c.form){var _=p[Nn]||null;if(!_)throw Error(r(90));ii(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<f.length;u++)p=f[u],p.form===c.form&&af(p)}break t;case"textarea":Ue(c,f.value,f.defaultValue);break t;case"select":u=f.value,u!=null&&sa(c,!!f.multiple,u,!1)}}}var ms=!1;function gp(c,u,f){if(ms)return c(u,f);ms=!0;try{var p=c(u);return p}finally{if(ms=!1,(oa!==null||ca!==null)&&(o0(),oa&&(u=oa,c=ca,ca=oa=null,lf(u),c)))for(u=0;u<c.length;u++)lf(c[u])}}function yc(c,u){var f=c.stateNode;if(f===null)return null;var p=f[Nn]||null;if(p===null)return null;f=p[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(c=c.type,p=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!p;break t;default:c=!1}if(c)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ei=!1;if(qi)try{var vc={};Object.defineProperty(vc,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",vc,vc),window.removeEventListener("test",vc,vc)}catch{Ei=!1}var ys=null,$a=null,la=null;function uf(){if(la)return la;var c,u=$a,f=u.length,p,_="value"in ys?ys.value:ys.textContent,x=_.length;for(c=0;c<f&&u[c]===_[c];c++);var D=f-c;for(p=1;p<=D&&u[f-p]===_[x-p];p++);return la=_.slice(c,1<p?1-p:void 0)}function vs(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function _s(){return!0}function hf(){return!1}function er(c){function u(f,p,_,x,D){this._reactName=f,this._targetInst=_,this.type=p,this.nativeEvent=x,this.target=D,this.currentTarget=null;for(var L in c)c.hasOwnProperty(L)&&(f=c[L],this[L]=f?f(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?_s:hf,this.isPropagationStopped=hf,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=_s)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=_s)},persist:function(){},isPersistent:_s}),u}var Se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=er(Se),_c=d({},Se,{view:0,detail:0}),pp=er(_c),Zl,Jl,xs,xc=d({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ec,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==xs&&(xs&&c.type==="mousemove"?(Zl=c.screenX-xs.screenX,Jl=c.screenY-xs.screenY):Jl=Zl=0,xs=c),Zl)},movementY:function(c){return"movementY"in c?c.movementY:Jl}}),Ai=er(xc),mp=d({},xc,{dataTransfer:0}),Sy=er(mp),wc=d({},_c,{relatedTarget:0}),tu=er(wc),ff=d({},Se,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=er(ff),yp=d({},Se,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),nu=er(yp),Cy=d({},Se,{data:0}),df=er(Cy),bc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_p={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gf(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=_p[c])?!!u[c]:!1}function Ec(){return gf}var xp=d({},_c,{key:function(c){if(c.key){var u=bc[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=vs(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?vp[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ec,charCode:function(c){return c.type==="keypress"?vs(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?vs(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ru=er(xp),wp=d({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pf=er(wp),ua=d({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ec}),bp=er(ua),Ep=d({},Se,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ap=er(Ep),Tp=d({},xc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),iu=er(Tp),Lr=d({},Se,{newState:0,oldState:0}),Sp=er(Lr),Cp=[9,13,27,32],ws=qi&&"CompositionEvent"in window,y=null;qi&&"documentMode"in document&&(y=document.documentMode);var A=qi&&"TextEvent"in window&&!y,R=qi&&(!ws||y&&8<y&&11>=y),U=" ",$=!1;function at(c,u){switch(c){case"keyup":return Cp.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function At(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var de=!1;function zn(c,u){switch(c){case"compositionend":return At(u);case"keypress":return u.which!==32?null:($=!0,U);case"textInput":return c=u.data,c===U&&$?null:c;default:return null}}function ge(c,u){if(de)return c==="compositionend"||!ws&&at(c,u)?(c=uf(),la=$a=ys=null,de=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return R&&u.locale!=="ko"?null:u.data;default:return null}}var nr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!nr[c.type]:u==="textarea"}function ha(c,u,f,p){oa?ca?ca.push(p):ca=[p]:oa=p,u=d0(u,"onChange"),0<u.length&&(f=new Ql("onChange","change",null,f,p),c.push({event:f,listeners:u}))}var dr=null,bs=null;function mf(c){WS(c,0)}function Ip(c){var u=gs(c);if(af(u))return c}function fA(c,u){if(c==="change")return u}var dA=!1;if(qi){var Iy;if(qi){var Ry="oninput"in document;if(!Ry){var gA=document.createElement("div");gA.setAttribute("oninput","return;"),Ry=typeof gA.oninput=="function"}Iy=Ry}else Iy=!1;dA=Iy&&(!document.documentMode||9<document.documentMode)}function pA(){dr&&(dr.detachEvent("onpropertychange",mA),bs=dr=null)}function mA(c){if(c.propertyName==="value"&&Ip(bs)){var u=[];ha(u,bs,c,bi(c)),gp(mf,u)}}function Bk(c,u,f){c==="focusin"?(pA(),dr=u,bs=f,dr.attachEvent("onpropertychange",mA)):c==="focusout"&&pA()}function Fk(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Ip(bs)}function Uk(c,u){if(c==="click")return Ip(u)}function jk(c,u){if(c==="input"||c==="change")return Ip(u)}function zk(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var si=typeof Object.is=="function"?Object.is:zk;function yf(c,u){if(si(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var f=Object.keys(c),p=Object.keys(u);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var _=f[p];if(!Fe.call(u,_)||!si(c[_],u[_]))return!1}return!0}function yA(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function vA(c,u){var f=yA(c);c=0;for(var p;f;){if(f.nodeType===3){if(p=c+f.textContent.length,c<=u&&p>=u)return{node:f,offset:u-c};c=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=yA(f)}}function _A(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?_A(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function xA(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var u=dc(c.document);u instanceof c.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)c=u.contentWindow;else break;u=dc(c.document)}return u}function Dy(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}var Hk=qi&&"documentMode"in document&&11>=document.documentMode,su=null,Oy=null,vf=null,My=!1;function wA(c,u,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;My||su==null||su!==dc(p)||(p=su,"selectionStart"in p&&Dy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),vf&&yf(vf,p)||(vf=p,p=d0(Oy,"onSelect"),0<p.length&&(u=new Ql("onSelect","select",null,u,f),c.push({event:u,listeners:p}),u.target=su)))}function Ac(c,u){var f={};return f[c.toLowerCase()]=u.toLowerCase(),f["Webkit"+c]="webkit"+u,f["Moz"+c]="moz"+u,f}var au={animationend:Ac("Animation","AnimationEnd"),animationiteration:Ac("Animation","AnimationIteration"),animationstart:Ac("Animation","AnimationStart"),transitionrun:Ac("Transition","TransitionRun"),transitionstart:Ac("Transition","TransitionStart"),transitioncancel:Ac("Transition","TransitionCancel"),transitionend:Ac("Transition","TransitionEnd")},Ny={},bA={};qi&&(bA=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function Tc(c){if(Ny[c])return Ny[c];if(!au[c])return c;var u=au[c],f;for(f in u)if(u.hasOwnProperty(f)&&f in bA)return Ny[c]=u[f];return c}var EA=Tc("animationend"),AA=Tc("animationiteration"),TA=Tc("animationstart"),Gk=Tc("transitionrun"),Wk=Tc("transitionstart"),qk=Tc("transitioncancel"),SA=Tc("transitionend"),CA=new Map,Py="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Py.push("scrollEnd");function Yi(c,u){CA.set(c,u),Wi(u,[c])}var IA=new WeakMap;function Ti(c,u){if(typeof c=="object"&&c!==null){var f=IA.get(c);return f!==void 0?f:(u={value:c,source:u,stack:Xl(u)},IA.set(c,u),u)}return{value:c,source:u,stack:Xl(u)}}var Si=[],ou=0,ky=0;function Rp(){for(var c=ou,u=ky=ou=0;u<c;){var f=Si[u];Si[u++]=null;var p=Si[u];Si[u++]=null;var _=Si[u];Si[u++]=null;var x=Si[u];if(Si[u++]=null,p!==null&&_!==null){var D=p.pending;D===null?_.next=_:(_.next=D.next,D.next=_),p.pending=_}x!==0&&RA(f,_,x)}}function Dp(c,u,f,p){Si[ou++]=c,Si[ou++]=u,Si[ou++]=f,Si[ou++]=p,ky|=p,c.lanes|=p,c=c.alternate,c!==null&&(c.lanes|=p)}function Ly(c,u,f,p){return Dp(c,u,f,p),Op(c)}function cu(c,u){return Dp(c,null,null,u),Op(c)}function RA(c,u,f){c.lanes|=f;var p=c.alternate;p!==null&&(p.lanes|=f);for(var _=!1,x=c.return;x!==null;)x.childLanes|=f,p=x.alternate,p!==null&&(p.childLanes|=f),x.tag===22&&(c=x.stateNode,c===null||c._visibility&1||(_=!0)),c=x,x=x.return;return c.tag===3?(x=c.stateNode,_&&u!==null&&(_=31-$e(f),c=x.hiddenUpdates,p=c[_],p===null?c[_]=[u]:p.push(u),u.lane=f|536870912),x):null}function Op(c){if(50<Hf)throw Hf=0,zv=null,Error(r(185));for(var u=c.return;u!==null;)c=u,u=c.return;return c.tag===3?c.stateNode:null}var lu={};function Yk(c,u,f,p){this.tag=c,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(c,u,f,p){return new Yk(c,u,f,p)}function Vy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function fa(c,u){var f=c.alternate;return f===null?(f=ai(c.tag,u,c.key,c.mode),f.elementType=c.elementType,f.type=c.type,f.stateNode=c.stateNode,f.alternate=c,c.alternate=f):(f.pendingProps=u,f.type=c.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=c.flags&65011712,f.childLanes=c.childLanes,f.lanes=c.lanes,f.child=c.child,f.memoizedProps=c.memoizedProps,f.memoizedState=c.memoizedState,f.updateQueue=c.updateQueue,u=c.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=c.sibling,f.index=c.index,f.ref=c.ref,f.refCleanup=c.refCleanup,f}function DA(c,u){c.flags&=65011714;var f=c.alternate;return f===null?(c.childLanes=0,c.lanes=u,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,u=f.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),c}function Mp(c,u,f,p,_,x){var D=0;if(p=c,typeof c=="function")Vy(c)&&(D=1);else if(typeof c=="string")D=K9(c,f,mt.current)?26:c==="html"||c==="head"||c==="body"?27:5;else t:switch(c){case N:return c=ai(31,f,u,_),c.elementType=N,c.lanes=x,c;case w:return Sc(f.children,_,x,u);case b:D=8,_|=24;break;case E:return c=ai(12,f,u,_|2),c.elementType=E,c.lanes=x,c;case P:return c=ai(13,f,u,_),c.elementType=P,c.lanes=x,c;case j:return c=ai(19,f,u,_),c.elementType=j,c.lanes=x,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case S:case I:D=10;break t;case T:D=9;break t;case k:D=11;break t;case M:D=14;break t;case C:D=16,p=null;break t}D=29,f=Error(r(130,c===null?"null":typeof c,"")),p=null}return u=ai(D,f,u,_),u.elementType=c,u.type=p,u.lanes=x,u}function Sc(c,u,f,p){return c=ai(7,c,p,u),c.lanes=f,c}function By(c,u,f){return c=ai(6,c,null,u),c.lanes=f,c}function Fy(c,u,f){return u=ai(4,c.children!==null?c.children:[],c.key,u),u.lanes=f,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}var uu=[],hu=0,Np=null,Pp=0,Ci=[],Ii=0,Cc=null,da=1,ga="";function Ic(c,u){uu[hu++]=Pp,uu[hu++]=Np,Np=c,Pp=u}function OA(c,u,f){Ci[Ii++]=da,Ci[Ii++]=ga,Ci[Ii++]=Cc,Cc=c;var p=da;c=ga;var _=32-$e(p)-1;p&=~(1<<_),f+=1;var x=32-$e(u)+_;if(30<x){var D=_-_%5;x=(p&(1<<D)-1).toString(32),p>>=D,_-=D,da=1<<32-$e(u)+_|f<<_|p,ga=x+c}else da=1<<x|f<<_|p,ga=c}function Uy(c){c.return!==null&&(Ic(c,1),OA(c,1,0))}function jy(c){for(;c===Np;)Np=uu[--hu],uu[hu]=null,Pp=uu[--hu],uu[hu]=null;for(;c===Cc;)Cc=Ci[--Ii],Ci[Ii]=null,ga=Ci[--Ii],Ci[Ii]=null,da=Ci[--Ii],Ci[Ii]=null}var Vr=null,pn=null,be=!1,Rc=null,Es=!1,zy=Error(r(519));function Dc(c){var u=Error(r(418,""));throw wf(Ti(u,c)),zy}function MA(c){var u=c.stateNode,f=c.type,p=c.memoizedProps;switch(u[jn]=c,u[Nn]=p,f){case"dialog":le("cancel",u),le("close",u);break;case"iframe":case"object":case"embed":le("load",u);break;case"video":case"audio":for(f=0;f<Wf.length;f++)le(Wf[f],u);break;case"source":le("error",u);break;case"img":case"image":case"link":le("error",u),le("load",u);break;case"details":le("toggle",u);break;case"input":le("invalid",u),gc(u,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Kl(u);break;case"select":le("invalid",u);break;case"textarea":le("invalid",u),pc(u,p.value,p.defaultValue,p.children),Kl(u)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||p.suppressHydrationWarning===!0||KS(u.textContent,f)?(p.popover!=null&&(le("beforetoggle",u),le("toggle",u)),p.onScroll!=null&&le("scroll",u),p.onScrollEnd!=null&&le("scrollend",u),p.onClick!=null&&(u.onclick=g0),u=!0):u=!1,u||Dc(c)}function NA(c){for(Vr=c.return;Vr;)switch(Vr.tag){case 5:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:Vr=Vr.return}}function _f(c){if(c!==Vr)return!1;if(!be)return NA(c),be=!0,!1;var u=c.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=c.type,f=!(f!=="form"&&f!=="button")||i_(c.type,c.memoizedProps)),f=!f),f&&pn&&Dc(c),NA(c),u===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));t:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8)if(f=c.data,f==="/$"){if(u===0){pn=Ki(c.nextSibling);break t}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;c=c.nextSibling}pn=null}}else u===27?(u=pn,fo(c.type)?(c=c_,c_=null,pn=c):pn=u):pn=Vr?Ki(c.stateNode.nextSibling):null;return!0}function xf(){pn=Vr=null,be=!1}function PA(){var c=Rc;return c!==null&&(qr===null?qr=c:qr.push.apply(qr,c),Rc=null),c}function wf(c){Rc===null?Rc=[c]:Rc.push(c)}var Hy=q(null),Oc=null,pa=null;function Qa(c,u,f){nt(Hy,u._currentValue),u._currentValue=f}function ma(c){c._currentValue=Hy.current,ot(Hy)}function Gy(c,u,f){for(;c!==null;){var p=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),c===f)break;c=c.return}}function Wy(c,u,f,p){var _=c.child;for(_!==null&&(_.return=c);_!==null;){var x=_.dependencies;if(x!==null){var D=_.child;x=x.firstContext;t:for(;x!==null;){var L=x;x=_;for(var W=0;W<u.length;W++)if(L.context===u[W]){x.lanes|=f,L=x.alternate,L!==null&&(L.lanes|=f),Gy(x.return,f,c),p||(D=null);break t}x=L.next}}else if(_.tag===18){if(D=_.return,D===null)throw Error(r(341));D.lanes|=f,x=D.alternate,x!==null&&(x.lanes|=f),Gy(D,f,c),D=null}else D=_.child;if(D!==null)D.return=_;else for(D=_;D!==null;){if(D===c){D=null;break}if(_=D.sibling,_!==null){_.return=D.return,D=_;break}D=D.return}_=D}}function bf(c,u,f,p){c=null;for(var _=u,x=!1;_!==null;){if(!x){if((_.flags&524288)!==0)x=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var D=_.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var L=_.type;si(_.pendingProps.value,D.value)||(c!==null?c.push(L):c=[L])}}else if(_===Zt.current){if(D=_.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(c!==null?c.push(Qf):c=[Qf])}_=_.return}c!==null&&Wy(u,c,f,p),u.flags|=262144}function kp(c){for(c=c.firstContext;c!==null;){if(!si(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Mc(c){Oc=c,pa=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function br(c){return kA(Oc,c)}function Lp(c,u){return Oc===null&&Mc(c),kA(c,u)}function kA(c,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},pa===null){if(c===null)throw Error(r(308));pa=u,c.dependencies={lanes:0,firstContext:u},c.flags|=524288}else pa=pa.next=u;return f}var Xk=typeof AbortController<"u"?AbortController:function(){var c=[],u=this.signal={aborted:!1,addEventListener:function(f,p){c.push(p)}};this.abort=function(){u.aborted=!0,c.forEach(function(f){return f()})}},Kk=n.unstable_scheduleCallback,$k=n.unstable_NormalPriority,Gn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qy(){return{controller:new Xk,data:new Map,refCount:0}}function Ef(c){c.refCount--,c.refCount===0&&Kk($k,function(){c.controller.abort()})}var Af=null,Yy=0,fu=0,du=null;function Qk(c,u){if(Af===null){var f=Af=[];Yy=0,fu=Kv(),du={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Yy++,u.then(LA,LA),u}function LA(){if(--Yy===0&&Af!==null){du!==null&&(du.status="fulfilled");var c=Af;Af=null,fu=0,du=null;for(var u=0;u<c.length;u++)(0,c[u])()}}function Zk(c,u){var f=[],p={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return c.then(function(){p.status="fulfilled",p.value=u;for(var _=0;_<f.length;_++)(0,f[_])(u)},function(_){for(p.status="rejected",p.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),p}var VA=K.S;K.S=function(c,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Qk(c,u),VA!==null&&VA(c,u)};var Nc=q(null);function Xy(){var c=Nc.current;return c!==null?c:Qe.pooledCache}function Vp(c,u){u===null?nt(Nc,Nc.current):nt(Nc,u.pool)}function BA(){var c=Xy();return c===null?null:{parent:Gn._currentValue,pool:c}}var Tf=Error(r(460)),FA=Error(r(474)),Bp=Error(r(542)),Ky={then:function(){}};function UA(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Fp(){}function jA(c,u,f){switch(f=c[f],f===void 0?c.push(u):f!==u&&(u.then(Fp,Fp),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,HA(c),c;default:if(typeof u.status=="string")u.then(Fp,Fp);else{if(c=Qe,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=u,c.status="pending",c.then(function(p){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=p}},function(p){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=p}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,HA(c),c}throw Sf=u,Tf}}var Sf=null;function zA(){if(Sf===null)throw Error(r(459));var c=Sf;return Sf=null,c}function HA(c){if(c===Tf||c===Bp)throw Error(r(483))}var Za=!1;function $y(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qy(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ja(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function to(c,u,f){var p=c.updateQueue;if(p===null)return null;if(p=p.shared,(Oe&2)!==0){var _=p.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),p.pending=u,u=Op(c),RA(c,null,f),u}return Dp(c,p,u,f),Op(c)}function Cf(c,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,tf(c,f)}}function Zy(c,u){var f=c.updateQueue,p=c.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var _=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?_=x=D:x=x.next=D,f=f.next}while(f!==null);x===null?_=x=u:x=x.next=u}else _=x=u;f={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:x,shared:p.shared,callbacks:p.callbacks},c.updateQueue=f;return}c=f.lastBaseUpdate,c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=u}var Jy=!1;function If(){if(Jy){var c=du;if(c!==null)throw c}}function Rf(c,u,f,p){Jy=!1;var _=c.updateQueue;Za=!1;var x=_.firstBaseUpdate,D=_.lastBaseUpdate,L=_.shared.pending;if(L!==null){_.shared.pending=null;var W=L,J=W.next;W.next=null,D===null?x=J:D.next=J,D=W;var ht=c.alternate;ht!==null&&(ht=ht.updateQueue,L=ht.lastBaseUpdate,L!==D&&(L===null?ht.firstBaseUpdate=J:L.next=J,ht.lastBaseUpdate=W))}if(x!==null){var gt=_.baseState;D=0,ht=J=W=null,L=x;do{var it=L.lane&-536870913,st=it!==L.lane;if(st?(pe&it)===it:(p&it)===it){it!==0&&it===fu&&(Jy=!0),ht!==null&&(ht=ht.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var Yt=c,Gt=L;it=u;var He=f;switch(Gt.tag){case 1:if(Yt=Gt.payload,typeof Yt=="function"){gt=Yt.call(He,gt,it);break t}gt=Yt;break t;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=Gt.payload,it=typeof Yt=="function"?Yt.call(He,gt,it):Yt,it==null)break t;gt=d({},gt,it);break t;case 2:Za=!0}}it=L.callback,it!==null&&(c.flags|=64,st&&(c.flags|=8192),st=_.callbacks,st===null?_.callbacks=[it]:st.push(it))}else st={lane:it,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ht===null?(J=ht=st,W=gt):ht=ht.next=st,D|=it;if(L=L.next,L===null){if(L=_.shared.pending,L===null)break;st=L,L=st.next,st.next=null,_.lastBaseUpdate=st,_.shared.pending=null}}while(!0);ht===null&&(W=gt),_.baseState=W,_.firstBaseUpdate=J,_.lastBaseUpdate=ht,x===null&&(_.shared.lanes=0),co|=D,c.lanes=D,c.memoizedState=gt}}function GA(c,u){if(typeof c!="function")throw Error(r(191,c));c.call(u)}function WA(c,u){var f=c.callbacks;if(f!==null)for(c.callbacks=null,c=0;c<f.length;c++)GA(f[c],u)}var gu=q(null),Up=q(0);function qA(c,u){c=Ea,nt(Up,c),nt(gu,u),Ea=c|u.baseLanes}function tv(){nt(Up,Ea),nt(gu,gu.current)}function ev(){Ea=Up.current,ot(gu),ot(Up)}var eo=0,ne=null,je=null,kn=null,jp=!1,pu=!1,Pc=!1,zp=0,Df=0,mu=null,Jk=0;function Tn(){throw Error(r(321))}function nv(c,u){if(u===null)return!1;for(var f=0;f<u.length&&f<c.length;f++)if(!si(c[f],u[f]))return!1;return!0}function rv(c,u,f,p,_,x){return eo=x,ne=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,K.H=c===null||c.memoizedState===null?RT:DT,Pc=!1,x=f(p,_),Pc=!1,pu&&(x=XA(u,f,p,_)),YA(c),x}function YA(c){K.H=Xp;var u=je!==null&&je.next!==null;if(eo=0,kn=je=ne=null,jp=!1,Df=0,mu=null,u)throw Error(r(300));c===null||rr||(c=c.dependencies,c!==null&&kp(c)&&(rr=!0))}function XA(c,u,f,p){ne=c;var _=0;do{if(pu&&(mu=null),Df=0,pu=!1,25<=_)throw Error(r(301));if(_+=1,kn=je=null,c.updateQueue!=null){var x=c.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}K.H=a9,x=u(f,p)}while(pu);return x}function t9(){var c=K.H,u=c.useState()[0];return u=typeof u.then=="function"?Of(u):u,c=c.useState()[0],(je!==null?je.memoizedState:null)!==c&&(ne.flags|=1024),u}function iv(){var c=zp!==0;return zp=0,c}function sv(c,u,f){u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~f}function av(c){if(jp){for(c=c.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}jp=!1}eo=0,kn=je=ne=null,pu=!1,Df=zp=0,mu=null}function Gr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?ne.memoizedState=kn=c:kn=kn.next=c,kn}function Ln(){if(je===null){var c=ne.alternate;c=c!==null?c.memoizedState:null}else c=je.next;var u=kn===null?ne.memoizedState:kn.next;if(u!==null)kn=u,je=c;else{if(c===null)throw ne.alternate===null?Error(r(467)):Error(r(310));je=c,c={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},kn===null?ne.memoizedState=kn=c:kn=kn.next=c}return kn}function ov(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Of(c){var u=Df;return Df+=1,mu===null&&(mu=[]),c=jA(mu,c,u),u=ne,(kn===null?u.memoizedState:kn.next)===null&&(u=u.alternate,K.H=u===null||u.memoizedState===null?RT:DT),c}function Hp(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Of(c);if(c.$$typeof===I)return br(c)}throw Error(r(438,String(c)))}function cv(c){var u=null,f=ne.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var p=ne.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(u={data:p.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=ov(),ne.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(c),p=0;p<c;p++)f[p]=B;return u.index++,f}function ya(c,u){return typeof u=="function"?u(c):u}function Gp(c){var u=Ln();return lv(u,je,c)}function lv(c,u,f){var p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var _=c.baseQueue,x=p.pending;if(x!==null){if(_!==null){var D=_.next;_.next=x.next,x.next=D}u.baseQueue=_=x,p.pending=null}if(x=c.baseState,_===null)c.memoizedState=x;else{u=_.next;var L=D=null,W=null,J=u,ht=!1;do{var gt=J.lane&-536870913;if(gt!==J.lane?(pe&gt)===gt:(eo&gt)===gt){var it=J.revertLane;if(it===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),gt===fu&&(ht=!0);else if((eo&it)===it){J=J.next,it===fu&&(ht=!0);continue}else gt={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},W===null?(L=W=gt,D=x):W=W.next=gt,ne.lanes|=it,co|=it;gt=J.action,Pc&&f(x,gt),x=J.hasEagerState?J.eagerState:f(x,gt)}else it={lane:gt,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},W===null?(L=W=it,D=x):W=W.next=it,ne.lanes|=gt,co|=gt;J=J.next}while(J!==null&&J!==u);if(W===null?D=x:W.next=L,!si(x,c.memoizedState)&&(rr=!0,ht&&(f=du,f!==null)))throw f;c.memoizedState=x,c.baseState=D,c.baseQueue=W,p.lastRenderedState=x}return _===null&&(p.lanes=0),[c.memoizedState,p.dispatch]}function uv(c){var u=Ln(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var p=f.dispatch,_=f.pending,x=u.memoizedState;if(_!==null){f.pending=null;var D=_=_.next;do x=c(x,D.action),D=D.next;while(D!==_);si(x,u.memoizedState)||(rr=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),f.lastRenderedState=x}return[x,p]}function KA(c,u,f){var p=ne,_=Ln(),x=be;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=u();var D=!si((je||_).memoizedState,f);D&&(_.memoizedState=f,rr=!0),_=_.queue;var L=ZA.bind(null,p,_,c);if(Mf(2048,8,L,[c]),_.getSnapshot!==u||D||kn!==null&&kn.memoizedState.tag&1){if(p.flags|=2048,yu(9,Wp(),QA.bind(null,p,_,f,u),null),Qe===null)throw Error(r(349));x||(eo&124)!==0||$A(p,u,f)}return f}function $A(c,u,f){c.flags|=16384,c={getSnapshot:u,value:f},u=ne.updateQueue,u===null?(u=ov(),ne.updateQueue=u,u.stores=[c]):(f=u.stores,f===null?u.stores=[c]:f.push(c))}function QA(c,u,f,p){u.value=f,u.getSnapshot=p,JA(u)&&tT(c)}function ZA(c,u,f){return f(function(){JA(u)&&tT(c)})}function JA(c){var u=c.getSnapshot;c=c.value;try{var f=u();return!si(c,f)}catch{return!0}}function tT(c){var u=cu(c,2);u!==null&&hi(u,c,2)}function hv(c){var u=Gr();if(typeof c=="function"){var f=c;if(c=f(),Pc){qe(!0);try{f()}finally{qe(!1)}}}return u.memoizedState=u.baseState=c,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:c},u}function eT(c,u,f,p){return c.baseState=f,lv(c,je,typeof p=="function"?p:ya)}function e9(c,u,f,p,_){if(Yp(c))throw Error(r(485));if(c=u.action,c!==null){var x={payload:_,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){x.listeners.push(D)}};K.T!==null?f(!0):x.isTransition=!1,p(x),f=u.pending,f===null?(x.next=u.pending=x,nT(u,x)):(x.next=f.next,u.pending=f.next=x)}}function nT(c,u){var f=u.action,p=u.payload,_=c.state;if(u.isTransition){var x=K.T,D={};K.T=D;try{var L=f(_,p),W=K.S;W!==null&&W(D,L),rT(c,u,L)}catch(J){fv(c,u,J)}finally{K.T=x}}else try{x=f(_,p),rT(c,u,x)}catch(J){fv(c,u,J)}}function rT(c,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){iT(c,u,p)},function(p){return fv(c,u,p)}):iT(c,u,f)}function iT(c,u,f){u.status="fulfilled",u.value=f,sT(u),c.state=f,u=c.pending,u!==null&&(f=u.next,f===u?c.pending=null:(f=f.next,u.next=f,nT(c,f)))}function fv(c,u,f){var p=c.pending;if(c.pending=null,p!==null){p=p.next;do u.status="rejected",u.reason=f,sT(u),u=u.next;while(u!==p)}c.action=null}function sT(c){c=c.listeners;for(var u=0;u<c.length;u++)(0,c[u])()}function aT(c,u){return u}function oT(c,u){if(be){var f=Qe.formState;if(f!==null){t:{var p=ne;if(be){if(pn){e:{for(var _=pn,x=Es;_.nodeType!==8;){if(!x){_=null;break e}if(_=Ki(_.nextSibling),_===null){_=null;break e}}x=_.data,_=x==="F!"||x==="F"?_:null}if(_){pn=Ki(_.nextSibling),p=_.data==="F!";break t}}Dc(p)}p=!1}p&&(u=f[0])}}return f=Gr(),f.memoizedState=f.baseState=u,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aT,lastRenderedState:u},f.queue=p,f=ST.bind(null,ne,p),p.dispatch=f,p=hv(!1),x=yv.bind(null,ne,!1,p.queue),p=Gr(),_={state:u,dispatch:null,action:c,pending:null},p.queue=_,f=e9.bind(null,ne,_,x,f),_.dispatch=f,p.memoizedState=c,[u,f,!1]}function cT(c){var u=Ln();return lT(u,je,c)}function lT(c,u,f){if(u=lv(c,u,aT)[0],c=Gp(ya)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var p=Of(u)}catch(D){throw D===Tf?Bp:D}else p=u;u=Ln();var _=u.queue,x=_.dispatch;return f!==u.memoizedState&&(ne.flags|=2048,yu(9,Wp(),n9.bind(null,_,f),null)),[p,x,c]}function n9(c,u){c.action=u}function uT(c){var u=Ln(),f=je;if(f!==null)return lT(u,f,c);Ln(),u=u.memoizedState,f=Ln();var p=f.queue.dispatch;return f.memoizedState=c,[u,p,!1]}function yu(c,u,f,p){return c={tag:c,create:f,deps:p,inst:u,next:null},u=ne.updateQueue,u===null&&(u=ov(),ne.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=c.next=c:(p=f.next,f.next=c,c.next=p,u.lastEffect=c),c}function Wp(){return{destroy:void 0,resource:void 0}}function hT(){return Ln().memoizedState}function qp(c,u,f,p){var _=Gr();p=p===void 0?null:p,ne.flags|=c,_.memoizedState=yu(1|u,Wp(),f,p)}function Mf(c,u,f,p){var _=Ln();p=p===void 0?null:p;var x=_.memoizedState.inst;je!==null&&p!==null&&nv(p,je.memoizedState.deps)?_.memoizedState=yu(u,x,f,p):(ne.flags|=c,_.memoizedState=yu(1|u,x,f,p))}function fT(c,u){qp(8390656,8,c,u)}function dT(c,u){Mf(2048,8,c,u)}function gT(c,u){return Mf(4,2,c,u)}function pT(c,u){return Mf(4,4,c,u)}function mT(c,u){if(typeof u=="function"){c=c();var f=u(c);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function yT(c,u,f){f=f!=null?f.concat([c]):null,Mf(4,4,mT.bind(null,u,c),f)}function dv(){}function vT(c,u){var f=Ln();u=u===void 0?null:u;var p=f.memoizedState;return u!==null&&nv(u,p[1])?p[0]:(f.memoizedState=[c,u],c)}function _T(c,u){var f=Ln();u=u===void 0?null:u;var p=f.memoizedState;if(u!==null&&nv(u,p[1]))return p[0];if(p=c(),Pc){qe(!0);try{c()}finally{qe(!1)}}return f.memoizedState=[p,u],p}function gv(c,u,f){return f===void 0||(eo&1073741824)!==0?c.memoizedState=u:(c.memoizedState=f,c=bS(),ne.lanes|=c,co|=c,f)}function xT(c,u,f,p){return si(f,u)?f:gu.current!==null?(c=gv(c,f,p),si(c,u)||(rr=!0),c):(eo&42)===0?(rr=!0,c.memoizedState=f):(c=bS(),ne.lanes|=c,co|=c,u)}function wT(c,u,f,p,_){var x=ct.p;ct.p=x!==0&&8>x?x:8;var D=K.T,L={};K.T=L,yv(c,!1,u,f);try{var W=_(),J=K.S;if(J!==null&&J(L,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ht=Zk(W,p);Nf(c,u,ht,ui(c))}else Nf(c,u,p,ui(c))}catch(gt){Nf(c,u,{then:function(){},status:"rejected",reason:gt},ui())}finally{ct.p=x,K.T=D}}function r9(){}function pv(c,u,f,p){if(c.tag!==5)throw Error(r(476));var _=bT(c).queue;wT(c,_,u,vt,f===null?r9:function(){return ET(c),f(p)})}function bT(c){var u=c.memoizedState;if(u!==null)return u;u={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:vt},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:f},next:null},c.memoizedState=u,c=c.alternate,c!==null&&(c.memoizedState=u),u}function ET(c){var u=bT(c).next.queue;Nf(c,u,{},ui())}function mv(){return br(Qf)}function AT(){return Ln().memoizedState}function TT(){return Ln().memoizedState}function i9(c){for(var u=c.return;u!==null;){switch(u.tag){case 24:case 3:var f=ui();c=Ja(f);var p=to(u,c,f);p!==null&&(hi(p,u,f),Cf(p,u,f)),u={cache:qy()},c.payload=u;return}u=u.return}}function s9(c,u,f){var p=ui();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Yp(c)?CT(u,f):(f=Ly(c,u,f,p),f!==null&&(hi(f,c,p),IT(f,u,p)))}function ST(c,u,f){var p=ui();Nf(c,u,f,p)}function Nf(c,u,f,p){var _={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Yp(c))CT(u,_);else{var x=c.alternate;if(c.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var D=u.lastRenderedState,L=x(D,f);if(_.hasEagerState=!0,_.eagerState=L,si(L,D))return Dp(c,u,_,0),Qe===null&&Rp(),!1}catch{}finally{}if(f=Ly(c,u,_,p),f!==null)return hi(f,c,p),IT(f,u,p),!0}return!1}function yv(c,u,f,p){if(p={lane:2,revertLane:Kv(),action:p,hasEagerState:!1,eagerState:null,next:null},Yp(c)){if(u)throw Error(r(479))}else u=Ly(c,f,p,2),u!==null&&hi(u,c,2)}function Yp(c){var u=c.alternate;return c===ne||u!==null&&u===ne}function CT(c,u){pu=jp=!0;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}function IT(c,u,f){if((f&4194048)!==0){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,tf(c,f)}}var Xp={readContext:br,use:Hp,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},RT={readContext:br,use:Hp,useCallback:function(c,u){return Gr().memoizedState=[c,u===void 0?null:u],c},useContext:br,useEffect:fT,useImperativeHandle:function(c,u,f){f=f!=null?f.concat([c]):null,qp(4194308,4,mT.bind(null,u,c),f)},useLayoutEffect:function(c,u){return qp(4194308,4,c,u)},useInsertionEffect:function(c,u){qp(4,2,c,u)},useMemo:function(c,u){var f=Gr();u=u===void 0?null:u;var p=c();if(Pc){qe(!0);try{c()}finally{qe(!1)}}return f.memoizedState=[p,u],p},useReducer:function(c,u,f){var p=Gr();if(f!==void 0){var _=f(u);if(Pc){qe(!0);try{f(u)}finally{qe(!1)}}}else _=u;return p.memoizedState=p.baseState=_,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:_},p.queue=c,c=c.dispatch=s9.bind(null,ne,c),[p.memoizedState,c]},useRef:function(c){var u=Gr();return c={current:c},u.memoizedState=c},useState:function(c){c=hv(c);var u=c.queue,f=ST.bind(null,ne,u);return u.dispatch=f,[c.memoizedState,f]},useDebugValue:dv,useDeferredValue:function(c,u){var f=Gr();return gv(f,c,u)},useTransition:function(){var c=hv(!1);return c=wT.bind(null,ne,c.queue,!0,!1),Gr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,u,f){var p=ne,_=Gr();if(be){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),Qe===null)throw Error(r(349));(pe&124)!==0||$A(p,u,f)}_.memoizedState=f;var x={value:f,getSnapshot:u};return _.queue=x,fT(ZA.bind(null,p,x,c),[c]),p.flags|=2048,yu(9,Wp(),QA.bind(null,p,x,f,u),null),f},useId:function(){var c=Gr(),u=Qe.identifierPrefix;if(be){var f=ga,p=da;f=(p&~(1<<32-$e(p)-1)).toString(32)+f,u=""+u+"R"+f,f=zp++,0<f&&(u+="H"+f.toString(32)),u+=""}else f=Jk++,u=""+u+"r"+f.toString(32)+"";return c.memoizedState=u},useHostTransitionStatus:mv,useFormState:oT,useActionState:oT,useOptimistic:function(c){var u=Gr();u.memoizedState=u.baseState=c;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=yv.bind(null,ne,!0,f),f.dispatch=u,[c,u]},useMemoCache:cv,useCacheRefresh:function(){return Gr().memoizedState=i9.bind(null,ne)}},DT={readContext:br,use:Hp,useCallback:vT,useContext:br,useEffect:dT,useImperativeHandle:yT,useInsertionEffect:gT,useLayoutEffect:pT,useMemo:_T,useReducer:Gp,useRef:hT,useState:function(){return Gp(ya)},useDebugValue:dv,useDeferredValue:function(c,u){var f=Ln();return xT(f,je.memoizedState,c,u)},useTransition:function(){var c=Gp(ya)[0],u=Ln().memoizedState;return[typeof c=="boolean"?c:Of(c),u]},useSyncExternalStore:KA,useId:AT,useHostTransitionStatus:mv,useFormState:cT,useActionState:cT,useOptimistic:function(c,u){var f=Ln();return eT(f,je,c,u)},useMemoCache:cv,useCacheRefresh:TT},a9={readContext:br,use:Hp,useCallback:vT,useContext:br,useEffect:dT,useImperativeHandle:yT,useInsertionEffect:gT,useLayoutEffect:pT,useMemo:_T,useReducer:uv,useRef:hT,useState:function(){return uv(ya)},useDebugValue:dv,useDeferredValue:function(c,u){var f=Ln();return je===null?gv(f,c,u):xT(f,je.memoizedState,c,u)},useTransition:function(){var c=uv(ya)[0],u=Ln().memoizedState;return[typeof c=="boolean"?c:Of(c),u]},useSyncExternalStore:KA,useId:AT,useHostTransitionStatus:mv,useFormState:uT,useActionState:uT,useOptimistic:function(c,u){var f=Ln();return je!==null?eT(f,je,c,u):(f.baseState=c,[c,f.queue.dispatch])},useMemoCache:cv,useCacheRefresh:TT},vu=null,Pf=0;function Kp(c){var u=Pf;return Pf+=1,vu===null&&(vu=[]),jA(vu,c,u)}function kf(c,u){u=u.props.ref,c.ref=u!==void 0?u:null}function $p(c,u){throw u.$$typeof===g?Error(r(525)):(c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c)))}function OT(c){var u=c._init;return u(c._payload)}function MT(c){function u(X,Y){if(c){var Z=X.deletions;Z===null?(X.deletions=[Y],X.flags|=16):Z.push(Y)}}function f(X,Y){if(!c)return null;for(;Y!==null;)u(X,Y),Y=Y.sibling;return null}function p(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function _(X,Y){return X=fa(X,Y),X.index=0,X.sibling=null,X}function x(X,Y,Z){return X.index=Z,c?(Z=X.alternate,Z!==null?(Z=Z.index,Z<Y?(X.flags|=67108866,Y):Z):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function D(X){return c&&X.alternate===null&&(X.flags|=67108866),X}function L(X,Y,Z,ft){return Y===null||Y.tag!==6?(Y=By(Z,X.mode,ft),Y.return=X,Y):(Y=_(Y,Z),Y.return=X,Y)}function W(X,Y,Z,ft){var Dt=Z.type;return Dt===w?ht(X,Y,Z.props.children,ft,Z.key):Y!==null&&(Y.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===C&&OT(Dt)===Y.type)?(Y=_(Y,Z.props),kf(Y,Z),Y.return=X,Y):(Y=Mp(Z.type,Z.key,Z.props,null,X.mode,ft),kf(Y,Z),Y.return=X,Y)}function J(X,Y,Z,ft){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=Fy(Z,X.mode,ft),Y.return=X,Y):(Y=_(Y,Z.children||[]),Y.return=X,Y)}function ht(X,Y,Z,ft,Dt){return Y===null||Y.tag!==7?(Y=Sc(Z,X.mode,ft,Dt),Y.return=X,Y):(Y=_(Y,Z),Y.return=X,Y)}function gt(X,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=By(""+Y,X.mode,Z),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case m:return Z=Mp(Y.type,Y.key,Y.props,null,X.mode,Z),kf(Z,Y),Z.return=X,Z;case v:return Y=Fy(Y,X.mode,Z),Y.return=X,Y;case C:var ft=Y._init;return Y=ft(Y._payload),gt(X,Y,Z)}if(bt(Y)||G(Y))return Y=Sc(Y,X.mode,Z,null),Y.return=X,Y;if(typeof Y.then=="function")return gt(X,Kp(Y),Z);if(Y.$$typeof===I)return gt(X,Lp(X,Y),Z);$p(X,Y)}return null}function it(X,Y,Z,ft){var Dt=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Dt!==null?null:L(X,Y,""+Z,ft);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:return Z.key===Dt?W(X,Y,Z,ft):null;case v:return Z.key===Dt?J(X,Y,Z,ft):null;case C:return Dt=Z._init,Z=Dt(Z._payload),it(X,Y,Z,ft)}if(bt(Z)||G(Z))return Dt!==null?null:ht(X,Y,Z,ft,null);if(typeof Z.then=="function")return it(X,Y,Kp(Z),ft);if(Z.$$typeof===I)return it(X,Y,Lp(X,Z),ft);$p(X,Z)}return null}function st(X,Y,Z,ft,Dt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return X=X.get(Z)||null,L(Y,X,""+ft,Dt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case m:return X=X.get(ft.key===null?Z:ft.key)||null,W(Y,X,ft,Dt);case v:return X=X.get(ft.key===null?Z:ft.key)||null,J(Y,X,ft,Dt);case C:var ae=ft._init;return ft=ae(ft._payload),st(X,Y,Z,ft,Dt)}if(bt(ft)||G(ft))return X=X.get(Z)||null,ht(Y,X,ft,Dt,null);if(typeof ft.then=="function")return st(X,Y,Z,Kp(ft),Dt);if(ft.$$typeof===I)return st(X,Y,Z,Lp(Y,ft),Dt);$p(Y,ft)}return null}function Yt(X,Y,Z,ft){for(var Dt=null,ae=null,Bt=Y,Wt=Y=0,sr=null;Bt!==null&&Wt<Z.length;Wt++){Bt.index>Wt?(sr=Bt,Bt=null):sr=Bt.sibling;var xe=it(X,Bt,Z[Wt],ft);if(xe===null){Bt===null&&(Bt=sr);break}c&&Bt&&xe.alternate===null&&u(X,Bt),Y=x(xe,Y,Wt),ae===null?Dt=xe:ae.sibling=xe,ae=xe,Bt=sr}if(Wt===Z.length)return f(X,Bt),be&&Ic(X,Wt),Dt;if(Bt===null){for(;Wt<Z.length;Wt++)Bt=gt(X,Z[Wt],ft),Bt!==null&&(Y=x(Bt,Y,Wt),ae===null?Dt=Bt:ae.sibling=Bt,ae=Bt);return be&&Ic(X,Wt),Dt}for(Bt=p(Bt);Wt<Z.length;Wt++)sr=st(Bt,X,Wt,Z[Wt],ft),sr!==null&&(c&&sr.alternate!==null&&Bt.delete(sr.key===null?Wt:sr.key),Y=x(sr,Y,Wt),ae===null?Dt=sr:ae.sibling=sr,ae=sr);return c&&Bt.forEach(function(vo){return u(X,vo)}),be&&Ic(X,Wt),Dt}function Gt(X,Y,Z,ft){if(Z==null)throw Error(r(151));for(var Dt=null,ae=null,Bt=Y,Wt=Y=0,sr=null,xe=Z.next();Bt!==null&&!xe.done;Wt++,xe=Z.next()){Bt.index>Wt?(sr=Bt,Bt=null):sr=Bt.sibling;var vo=it(X,Bt,xe.value,ft);if(vo===null){Bt===null&&(Bt=sr);break}c&&Bt&&vo.alternate===null&&u(X,Bt),Y=x(vo,Y,Wt),ae===null?Dt=vo:ae.sibling=vo,ae=vo,Bt=sr}if(xe.done)return f(X,Bt),be&&Ic(X,Wt),Dt;if(Bt===null){for(;!xe.done;Wt++,xe=Z.next())xe=gt(X,xe.value,ft),xe!==null&&(Y=x(xe,Y,Wt),ae===null?Dt=xe:ae.sibling=xe,ae=xe);return be&&Ic(X,Wt),Dt}for(Bt=p(Bt);!xe.done;Wt++,xe=Z.next())xe=st(Bt,X,Wt,xe.value,ft),xe!==null&&(c&&xe.alternate!==null&&Bt.delete(xe.key===null?Wt:xe.key),Y=x(xe,Y,Wt),ae===null?Dt=xe:ae.sibling=xe,ae=xe);return c&&Bt.forEach(function(oL){return u(X,oL)}),be&&Ic(X,Wt),Dt}function He(X,Y,Z,ft){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:t:{for(var Dt=Z.key;Y!==null;){if(Y.key===Dt){if(Dt=Z.type,Dt===w){if(Y.tag===7){f(X,Y.sibling),ft=_(Y,Z.props.children),ft.return=X,X=ft;break t}}else if(Y.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===C&&OT(Dt)===Y.type){f(X,Y.sibling),ft=_(Y,Z.props),kf(ft,Z),ft.return=X,X=ft;break t}f(X,Y);break}else u(X,Y);Y=Y.sibling}Z.type===w?(ft=Sc(Z.props.children,X.mode,ft,Z.key),ft.return=X,X=ft):(ft=Mp(Z.type,Z.key,Z.props,null,X.mode,ft),kf(ft,Z),ft.return=X,X=ft)}return D(X);case v:t:{for(Dt=Z.key;Y!==null;){if(Y.key===Dt)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){f(X,Y.sibling),ft=_(Y,Z.children||[]),ft.return=X,X=ft;break t}else{f(X,Y);break}else u(X,Y);Y=Y.sibling}ft=Fy(Z,X.mode,ft),ft.return=X,X=ft}return D(X);case C:return Dt=Z._init,Z=Dt(Z._payload),He(X,Y,Z,ft)}if(bt(Z))return Yt(X,Y,Z,ft);if(G(Z)){if(Dt=G(Z),typeof Dt!="function")throw Error(r(150));return Z=Dt.call(Z),Gt(X,Y,Z,ft)}if(typeof Z.then=="function")return He(X,Y,Kp(Z),ft);if(Z.$$typeof===I)return He(X,Y,Lp(X,Z),ft);$p(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(f(X,Y.sibling),ft=_(Y,Z),ft.return=X,X=ft):(f(X,Y),ft=By(Z,X.mode,ft),ft.return=X,X=ft),D(X)):f(X,Y)}return function(X,Y,Z,ft){try{Pf=0;var Dt=He(X,Y,Z,ft);return vu=null,Dt}catch(Bt){if(Bt===Tf||Bt===Bp)throw Bt;var ae=ai(29,Bt,null,X.mode);return ae.lanes=ft,ae.return=X,ae}finally{}}}var _u=MT(!0),NT=MT(!1),Ri=q(null),As=null;function no(c){var u=c.alternate;nt(Wn,Wn.current&1),nt(Ri,c),As===null&&(u===null||gu.current!==null||u.memoizedState!==null)&&(As=c)}function PT(c){if(c.tag===22){if(nt(Wn,Wn.current),nt(Ri,c),As===null){var u=c.alternate;u!==null&&u.memoizedState!==null&&(As=c)}}else ro()}function ro(){nt(Wn,Wn.current),nt(Ri,Ri.current)}function va(c){ot(Ri),As===c&&(As=null),ot(Wn)}var Wn=q(0);function Qp(c){for(var u=c;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||o_(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function vv(c,u,f,p){u=c.memoizedState,f=f(p,u),f=f==null?u:d({},u,f),c.memoizedState=f,c.lanes===0&&(c.updateQueue.baseState=f)}var _v={enqueueSetState:function(c,u,f){c=c._reactInternals;var p=ui(),_=Ja(p);_.payload=u,f!=null&&(_.callback=f),u=to(c,_,p),u!==null&&(hi(u,c,p),Cf(u,c,p))},enqueueReplaceState:function(c,u,f){c=c._reactInternals;var p=ui(),_=Ja(p);_.tag=1,_.payload=u,f!=null&&(_.callback=f),u=to(c,_,p),u!==null&&(hi(u,c,p),Cf(u,c,p))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var f=ui(),p=Ja(f);p.tag=2,u!=null&&(p.callback=u),u=to(c,p,f),u!==null&&(hi(u,c,f),Cf(u,c,f))}};function kT(c,u,f,p,_,x,D){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(p,x,D):u.prototype&&u.prototype.isPureReactComponent?!yf(f,p)||!yf(_,x):!0}function LT(c,u,f,p){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,p),u.state!==c&&_v.enqueueReplaceState(u,u.state,null)}function kc(c,u){var f=u;if("ref"in u){f={};for(var p in u)p!=="ref"&&(f[p]=u[p])}if(c=c.defaultProps){f===u&&(f=d({},f));for(var _ in c)f[_]===void 0&&(f[_]=c[_])}return f}var Zp=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function VT(c){Zp(c)}function BT(c){console.error(c)}function FT(c){Zp(c)}function Jp(c,u){try{var f=c.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(p){setTimeout(function(){throw p})}}function UT(c,u,f){try{var p=c.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function xv(c,u,f){return f=Ja(f),f.tag=3,f.payload={element:null},f.callback=function(){Jp(c,u)},f}function jT(c){return c=Ja(c),c.tag=3,c}function zT(c,u,f,p){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var x=p.value;c.payload=function(){return _(x)},c.callback=function(){UT(u,f,p)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(c.callback=function(){UT(u,f,p),typeof _!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function o9(c,u,f,p,_){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(u=f.alternate,u!==null&&bf(u,f,_,!0),f=Ri.current,f!==null){switch(f.tag){case 13:return As===null?Gv():f.alternate===null&&mn===0&&(mn=3),f.flags&=-257,f.flags|=65536,f.lanes=_,p===Ky?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([p]):u.add(p),qv(c,p,_)),!1;case 22:return f.flags|=65536,p===Ky?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([p]):f.add(p)),qv(c,p,_)),!1}throw Error(r(435,f.tag))}return qv(c,p,_),Gv(),!1}if(be)return u=Ri.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,p!==zy&&(c=Error(r(422),{cause:p}),wf(Ti(c,f)))):(p!==zy&&(u=Error(r(423),{cause:p}),wf(Ti(u,f))),c=c.current.alternate,c.flags|=65536,_&=-_,c.lanes|=_,p=Ti(p,f),_=xv(c.stateNode,p,_),Zy(c,_),mn!==4&&(mn=2)),!1;var x=Error(r(520),{cause:p});if(x=Ti(x,f),zf===null?zf=[x]:zf.push(x),mn!==4&&(mn=2),u===null)return!0;p=Ti(p,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,c=_&-_,f.lanes|=c,c=xv(f.stateNode,p,c),Zy(f,c),!1;case 1:if(u=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(lo===null||!lo.has(x))))return f.flags|=65536,_&=-_,f.lanes|=_,_=jT(_),zT(_,c,f,p),Zy(f,_),!1}f=f.return}while(f!==null);return!1}var HT=Error(r(461)),rr=!1;function gr(c,u,f,p){u.child=c===null?NT(u,null,f,p):_u(u,c.child,f,p)}function GT(c,u,f,p,_){f=f.render;var x=u.ref;if("ref"in p){var D={};for(var L in p)L!=="ref"&&(D[L]=p[L])}else D=p;return Mc(u),p=rv(c,u,f,D,x,_),L=iv(),c!==null&&!rr?(sv(c,u,_),_a(c,u,_)):(be&&L&&Uy(u),u.flags|=1,gr(c,u,p,_),u.child)}function WT(c,u,f,p,_){if(c===null){var x=f.type;return typeof x=="function"&&!Vy(x)&&x.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=x,qT(c,u,x,p,_)):(c=Mp(f.type,null,p,u,u.mode,_),c.ref=u.ref,c.return=u,u.child=c)}if(x=c.child,!Iv(c,_)){var D=x.memoizedProps;if(f=f.compare,f=f!==null?f:yf,f(D,p)&&c.ref===u.ref)return _a(c,u,_)}return u.flags|=1,c=fa(x,p),c.ref=u.ref,c.return=u,u.child=c}function qT(c,u,f,p,_){if(c!==null){var x=c.memoizedProps;if(yf(x,p)&&c.ref===u.ref)if(rr=!1,u.pendingProps=p=x,Iv(c,_))(c.flags&131072)!==0&&(rr=!0);else return u.lanes=c.lanes,_a(c,u,_)}return wv(c,u,f,p,_)}function YT(c,u,f){var p=u.pendingProps,_=p.children,x=c!==null?c.memoizedState:null;if(p.mode==="hidden"){if((u.flags&128)!==0){if(p=x!==null?x.baseLanes|f:f,c!==null){for(_=u.child=c.child,x=0;_!==null;)x=x|_.lanes|_.childLanes,_=_.sibling;u.childLanes=x&~p}else u.childLanes=0,u.child=null;return XT(c,u,p,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},c!==null&&Vp(u,x!==null?x.cachePool:null),x!==null?qA(u,x):tv(),PT(u);else return u.lanes=u.childLanes=536870912,XT(c,u,x!==null?x.baseLanes|f:f,f)}else x!==null?(Vp(u,x.cachePool),qA(u,x),ro(),u.memoizedState=null):(c!==null&&Vp(u,null),tv(),ro());return gr(c,u,_,f),u.child}function XT(c,u,f,p){var _=Xy();return _=_===null?null:{parent:Gn._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},c!==null&&Vp(u,null),tv(),PT(u),c!==null&&bf(c,u,p,!0),null}function t0(c,u){var f=u.ref;if(f===null)c!==null&&c.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(c===null||c.ref!==f)&&(u.flags|=4194816)}}function wv(c,u,f,p,_){return Mc(u),f=rv(c,u,f,p,void 0,_),p=iv(),c!==null&&!rr?(sv(c,u,_),_a(c,u,_)):(be&&p&&Uy(u),u.flags|=1,gr(c,u,f,_),u.child)}function KT(c,u,f,p,_,x){return Mc(u),u.updateQueue=null,f=XA(u,p,f,_),YA(c),p=iv(),c!==null&&!rr?(sv(c,u,x),_a(c,u,x)):(be&&p&&Uy(u),u.flags|=1,gr(c,u,f,x),u.child)}function $T(c,u,f,p,_){if(Mc(u),u.stateNode===null){var x=lu,D=f.contextType;typeof D=="object"&&D!==null&&(x=br(D)),x=new f(p,x),u.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=_v,u.stateNode=x,x._reactInternals=u,x=u.stateNode,x.props=p,x.state=u.memoizedState,x.refs={},$y(u),D=f.contextType,x.context=typeof D=="object"&&D!==null?br(D):lu,x.state=u.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(vv(u,f,D,p),x.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(D=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),D!==x.state&&_v.enqueueReplaceState(x,x.state,null),Rf(u,p,x,_),If(),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308),p=!0}else if(c===null){x=u.stateNode;var L=u.memoizedProps,W=kc(f,L);x.props=W;var J=x.context,ht=f.contextType;D=lu,typeof ht=="object"&&ht!==null&&(D=br(ht));var gt=f.getDerivedStateFromProps;ht=typeof gt=="function"||typeof x.getSnapshotBeforeUpdate=="function",L=u.pendingProps!==L,ht||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(L||J!==D)&&LT(u,x,p,D),Za=!1;var it=u.memoizedState;x.state=it,Rf(u,p,x,_),If(),J=u.memoizedState,L||it!==J||Za?(typeof gt=="function"&&(vv(u,f,gt,p),J=u.memoizedState),(W=Za||kT(u,f,W,p,it,J,D))?(ht||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(u.flags|=4194308)):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=J),x.props=p,x.state=J,x.context=D,p=W):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{x=u.stateNode,Qy(c,u),D=u.memoizedProps,ht=kc(f,D),x.props=ht,gt=u.pendingProps,it=x.context,J=f.contextType,W=lu,typeof J=="object"&&J!==null&&(W=br(J)),L=f.getDerivedStateFromProps,(J=typeof L=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D!==gt||it!==W)&&LT(u,x,p,W),Za=!1,it=u.memoizedState,x.state=it,Rf(u,p,x,_),If();var st=u.memoizedState;D!==gt||it!==st||Za||c!==null&&c.dependencies!==null&&kp(c.dependencies)?(typeof L=="function"&&(vv(u,f,L,p),st=u.memoizedState),(ht=Za||kT(u,f,ht,p,it,st,W)||c!==null&&c.dependencies!==null&&kp(c.dependencies))?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,st,W),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,st,W)),typeof x.componentDidUpdate=="function"&&(u.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof x.componentDidUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=st),x.props=p,x.state=st,x.context=W,p=ht):(typeof x.componentDidUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&it===c.memoizedState||(u.flags|=1024),p=!1)}return x=p,t0(c,u),p=(u.flags&128)!==0,x||p?(x=u.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:x.render(),u.flags|=1,c!==null&&p?(u.child=_u(u,c.child,null,_),u.child=_u(u,null,f,_)):gr(c,u,f,_),u.memoizedState=x.state,c=u.child):c=_a(c,u,_),c}function QT(c,u,f,p){return xf(),u.flags|=256,gr(c,u,f,p),u.child}var bv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ev(c){return{baseLanes:c,cachePool:BA()}}function Av(c,u,f){return c=c!==null?c.childLanes&~f:0,u&&(c|=Di),c}function ZT(c,u,f){var p=u.pendingProps,_=!1,x=(u.flags&128)!==0,D;if((D=x)||(D=c!==null&&c.memoizedState===null?!1:(Wn.current&2)!==0),D&&(_=!0,u.flags&=-129),D=(u.flags&32)!==0,u.flags&=-33,c===null){if(be){if(_?no(u):ro(),be){var L=pn,W;if(W=L){t:{for(W=L,L=Es;W.nodeType!==8;){if(!L){L=null;break t}if(W=Ki(W.nextSibling),W===null){L=null;break t}}L=W}L!==null?(u.memoizedState={dehydrated:L,treeContext:Cc!==null?{id:da,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},W=ai(18,null,null,0),W.stateNode=L,W.return=u,u.child=W,Vr=u,pn=null,W=!0):W=!1}W||Dc(u)}if(L=u.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return o_(L)?u.lanes=32:u.lanes=536870912,null;va(u)}return L=p.children,p=p.fallback,_?(ro(),_=u.mode,L=e0({mode:"hidden",children:L},_),p=Sc(p,_,f,null),L.return=u,p.return=u,L.sibling=p,u.child=L,_=u.child,_.memoizedState=Ev(f),_.childLanes=Av(c,D,f),u.memoizedState=bv,p):(no(u),Tv(u,L))}if(W=c.memoizedState,W!==null&&(L=W.dehydrated,L!==null)){if(x)u.flags&256?(no(u),u.flags&=-257,u=Sv(c,u,f)):u.memoizedState!==null?(ro(),u.child=c.child,u.flags|=128,u=null):(ro(),_=p.fallback,L=u.mode,p=e0({mode:"visible",children:p.children},L),_=Sc(_,L,f,null),_.flags|=2,p.return=u,_.return=u,p.sibling=_,u.child=p,_u(u,c.child,null,f),p=u.child,p.memoizedState=Ev(f),p.childLanes=Av(c,D,f),u.memoizedState=bv,u=_);else if(no(u),o_(L)){if(D=L.nextSibling&&L.nextSibling.dataset,D)var J=D.dgst;D=J,p=Error(r(419)),p.stack="",p.digest=D,wf({value:p,source:null,stack:null}),u=Sv(c,u,f)}else if(rr||bf(c,u,f,!1),D=(f&c.childLanes)!==0,rr||D){if(D=Qe,D!==null&&(p=f&-f,p=(p&42)!==0?1:Ga(p),p=(p&(D.suspendedLanes|f))!==0?0:p,p!==0&&p!==W.retryLane))throw W.retryLane=p,cu(c,p),hi(D,c,p),HT;L.data==="$?"||Gv(),u=Sv(c,u,f)}else L.data==="$?"?(u.flags|=192,u.child=c.child,u=null):(c=W.treeContext,pn=Ki(L.nextSibling),Vr=u,be=!0,Rc=null,Es=!1,c!==null&&(Ci[Ii++]=da,Ci[Ii++]=ga,Ci[Ii++]=Cc,da=c.id,ga=c.overflow,Cc=u),u=Tv(u,p.children),u.flags|=4096);return u}return _?(ro(),_=p.fallback,L=u.mode,W=c.child,J=W.sibling,p=fa(W,{mode:"hidden",children:p.children}),p.subtreeFlags=W.subtreeFlags&65011712,J!==null?_=fa(J,_):(_=Sc(_,L,f,null),_.flags|=2),_.return=u,p.return=u,p.sibling=_,u.child=p,p=_,_=u.child,L=c.child.memoizedState,L===null?L=Ev(f):(W=L.cachePool,W!==null?(J=Gn._currentValue,W=W.parent!==J?{parent:J,pool:J}:W):W=BA(),L={baseLanes:L.baseLanes|f,cachePool:W}),_.memoizedState=L,_.childLanes=Av(c,D,f),u.memoizedState=bv,p):(no(u),f=c.child,c=f.sibling,f=fa(f,{mode:"visible",children:p.children}),f.return=u,f.sibling=null,c!==null&&(D=u.deletions,D===null?(u.deletions=[c],u.flags|=16):D.push(c)),u.child=f,u.memoizedState=null,f)}function Tv(c,u){return u=e0({mode:"visible",children:u},c.mode),u.return=c,c.child=u}function e0(c,u){return c=ai(22,c,null,u),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function Sv(c,u,f){return _u(u,c.child,null,f),c=Tv(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function JT(c,u,f){c.lanes|=u;var p=c.alternate;p!==null&&(p.lanes|=u),Gy(c.return,u,f)}function Cv(c,u,f,p,_){var x=c.memoizedState;x===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:_}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=f,x.tailMode=_)}function tS(c,u,f){var p=u.pendingProps,_=p.revealOrder,x=p.tail;if(gr(c,u,p.children,f),p=Wn.current,(p&2)!==0)p=p&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&JT(c,f,u);else if(c.tag===19)JT(c,f,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break t;for(;c.sibling===null;){if(c.return===null||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}p&=1}switch(nt(Wn,p),_){case"forwards":for(f=u.child,_=null;f!==null;)c=f.alternate,c!==null&&Qp(c)===null&&(_=f),f=f.sibling;f=_,f===null?(_=u.child,u.child=null):(_=f.sibling,f.sibling=null),Cv(u,!1,_,f,x);break;case"backwards":for(f=null,_=u.child,u.child=null;_!==null;){if(c=_.alternate,c!==null&&Qp(c)===null){u.child=_;break}c=_.sibling,_.sibling=f,f=_,_=c}Cv(u,!0,f,null,x);break;case"together":Cv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function _a(c,u,f){if(c!==null&&(u.dependencies=c.dependencies),co|=u.lanes,(f&u.childLanes)===0)if(c!==null){if(bf(c,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,f=fa(c,c.pendingProps),u.child=f,f.return=u;c.sibling!==null;)c=c.sibling,f=f.sibling=fa(c,c.pendingProps),f.return=u;f.sibling=null}return u.child}function Iv(c,u){return(c.lanes&u)!==0?!0:(c=c.dependencies,!!(c!==null&&kp(c)))}function c9(c,u,f){switch(u.tag){case 3:Ut(u,u.stateNode.containerInfo),Qa(u,Gn,c.memoizedState.cache),xf();break;case 27:case 5:zt(u);break;case 4:Ut(u,u.stateNode.containerInfo);break;case 10:Qa(u,u.type,u.memoizedProps.value);break;case 13:var p=u.memoizedState;if(p!==null)return p.dehydrated!==null?(no(u),u.flags|=128,null):(f&u.child.childLanes)!==0?ZT(c,u,f):(no(u),c=_a(c,u,f),c!==null?c.sibling:null);no(u);break;case 19:var _=(c.flags&128)!==0;if(p=(f&u.childLanes)!==0,p||(bf(c,u,f,!1),p=(f&u.childLanes)!==0),_){if(p)return tS(c,u,f);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),nt(Wn,Wn.current),p)break;return null;case 22:case 23:return u.lanes=0,YT(c,u,f);case 24:Qa(u,Gn,c.memoizedState.cache)}return _a(c,u,f)}function eS(c,u,f){if(c!==null)if(c.memoizedProps!==u.pendingProps)rr=!0;else{if(!Iv(c,f)&&(u.flags&128)===0)return rr=!1,c9(c,u,f);rr=(c.flags&131072)!==0}else rr=!1,be&&(u.flags&1048576)!==0&&OA(u,Pp,u.index);switch(u.lanes=0,u.tag){case 16:t:{c=u.pendingProps;var p=u.elementType,_=p._init;if(p=_(p._payload),u.type=p,typeof p=="function")Vy(p)?(c=kc(p,c),u.tag=1,u=$T(null,u,p,c,f)):(u.tag=0,u=wv(null,u,p,c,f));else{if(p!=null){if(_=p.$$typeof,_===k){u.tag=11,u=GT(null,u,p,c,f);break t}else if(_===M){u.tag=14,u=WT(null,u,p,c,f);break t}}throw u=xt(p)||p,Error(r(306,u,""))}}return u;case 0:return wv(c,u,u.type,u.pendingProps,f);case 1:return p=u.type,_=kc(p,u.pendingProps),$T(c,u,p,_,f);case 3:t:{if(Ut(u,u.stateNode.containerInfo),c===null)throw Error(r(387));p=u.pendingProps;var x=u.memoizedState;_=x.element,Qy(c,u),Rf(u,p,null,f);var D=u.memoizedState;if(p=D.cache,Qa(u,Gn,p),p!==x.cache&&Wy(u,[Gn],f,!0),If(),p=D.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:D.cache},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){u=QT(c,u,p,f);break t}else if(p!==_){_=Ti(Error(r(424)),u),wf(_),u=QT(c,u,p,f);break t}else{switch(c=u.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(pn=Ki(c.firstChild),Vr=u,be=!0,Rc=null,Es=!0,f=NT(u,null,p,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(xf(),p===_){u=_a(c,u,f);break t}gr(c,u,p,f)}u=u.child}return u;case 26:return t0(c,u),c===null?(f=sC(u.type,null,u.pendingProps,null))?u.memoizedState=f:be||(f=u.type,c=u.pendingProps,p=p0(wt.current).createElement(f),p[jn]=u,p[Nn]=c,mr(p,f,c),An(p),u.stateNode=p):u.memoizedState=sC(u.type,c.memoizedProps,u.pendingProps,c.memoizedState),null;case 27:return zt(u),c===null&&be&&(p=u.stateNode=nC(u.type,u.pendingProps,wt.current),Vr=u,Es=!0,_=pn,fo(u.type)?(c_=_,pn=Ki(p.firstChild)):pn=_),gr(c,u,u.pendingProps.children,f),t0(c,u),c===null&&(u.flags|=4194304),u.child;case 5:return c===null&&be&&((_=p=pn)&&(p=L9(p,u.type,u.pendingProps,Es),p!==null?(u.stateNode=p,Vr=u,pn=Ki(p.firstChild),Es=!1,_=!0):_=!1),_||Dc(u)),zt(u),_=u.type,x=u.pendingProps,D=c!==null?c.memoizedProps:null,p=x.children,i_(_,x)?p=null:D!==null&&i_(_,D)&&(u.flags|=32),u.memoizedState!==null&&(_=rv(c,u,t9,null,null,f),Qf._currentValue=_),t0(c,u),gr(c,u,p,f),u.child;case 6:return c===null&&be&&((c=f=pn)&&(f=V9(f,u.pendingProps,Es),f!==null?(u.stateNode=f,Vr=u,pn=null,c=!0):c=!1),c||Dc(u)),null;case 13:return ZT(c,u,f);case 4:return Ut(u,u.stateNode.containerInfo),p=u.pendingProps,c===null?u.child=_u(u,null,p,f):gr(c,u,p,f),u.child;case 11:return GT(c,u,u.type,u.pendingProps,f);case 7:return gr(c,u,u.pendingProps,f),u.child;case 8:return gr(c,u,u.pendingProps.children,f),u.child;case 12:return gr(c,u,u.pendingProps.children,f),u.child;case 10:return p=u.pendingProps,Qa(u,u.type,p.value),gr(c,u,p.children,f),u.child;case 9:return _=u.type._context,p=u.pendingProps.children,Mc(u),_=br(_),p=p(_),u.flags|=1,gr(c,u,p,f),u.child;case 14:return WT(c,u,u.type,u.pendingProps,f);case 15:return qT(c,u,u.type,u.pendingProps,f);case 19:return tS(c,u,f);case 31:return p=u.pendingProps,f=u.mode,p={mode:p.mode,children:p.children},c===null?(f=e0(p,f),f.ref=u.ref,u.child=f,f.return=u,u=f):(f=fa(c.child,p),f.ref=u.ref,u.child=f,f.return=u,u=f),u;case 22:return YT(c,u,f);case 24:return Mc(u),p=br(Gn),c===null?(_=Xy(),_===null&&(_=Qe,x=qy(),_.pooledCache=x,x.refCount++,x!==null&&(_.pooledCacheLanes|=f),_=x),u.memoizedState={parent:p,cache:_},$y(u),Qa(u,Gn,_)):((c.lanes&f)!==0&&(Qy(c,u),Rf(u,null,null,f),If()),_=c.memoizedState,x=u.memoizedState,_.parent!==p?(_={parent:p,cache:p},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Qa(u,Gn,p)):(p=x.cache,Qa(u,Gn,p),p!==_.cache&&Wy(u,[Gn],f,!0))),gr(c,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function xa(c){c.flags|=4}function nS(c,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!uC(u)){if(u=Ri.current,u!==null&&((pe&4194048)===pe?As!==null:(pe&62914560)!==pe&&(pe&536870912)===0||u!==As))throw Sf=Ky,FA;c.flags|=8192}}function n0(c,u){u!==null&&(c.flags|=4),c.flags&16384&&(u=c.tag!==22?Zh():536870912,c.lanes|=u,Eu|=u)}function Lf(c,u){if(!be)switch(c.tailMode){case"hidden":u=c.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?c.tail=null:f.sibling=null;break;case"collapsed":f=c.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:p.sibling=null}}function un(c){var u=c.alternate!==null&&c.alternate.child===c.child,f=0,p=0;if(u)for(var _=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=c,_=_.sibling;else for(_=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=c,_=_.sibling;return c.subtreeFlags|=p,c.childLanes=f,u}function l9(c,u,f){var p=u.pendingProps;switch(jy(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(u),null;case 1:return un(u),null;case 3:return f=u.stateNode,p=null,c!==null&&(p=c.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),ma(Gn),kt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(c===null||c.child===null)&&(_f(u)?xa(u):c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,PA())),un(u),null;case 26:return f=u.memoizedState,c===null?(xa(u),f!==null?(un(u),nS(u,f)):(un(u),u.flags&=-16777217)):f?f!==c.memoizedState?(xa(u),un(u),nS(u,f)):(un(u),u.flags&=-16777217):(c.memoizedProps!==p&&xa(u),un(u),u.flags&=-16777217),null;case 27:te(u),f=wt.current;var _=u.type;if(c!==null&&u.stateNode!=null)c.memoizedProps!==p&&xa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return un(u),null}c=mt.current,_f(u)?MA(u):(c=nC(_,p,f),u.stateNode=c,xa(u))}return un(u),null;case 5:if(te(u),f=u.type,c!==null&&u.stateNode!=null)c.memoizedProps!==p&&xa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return un(u),null}if(c=mt.current,_f(u))MA(u);else{switch(_=p0(wt.current),c){case 1:c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":c=_.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?c.multiple=!0:p.size&&(c.size=p.size);break;default:c=typeof p.is=="string"?_.createElement(f,{is:p.is}):_.createElement(f)}}c[jn]=u,c[Nn]=p;t:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)c.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break t;for(;_.sibling===null;){if(_.return===null||_.return===u)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=c;t:switch(mr(c,f,p),f){case"button":case"input":case"select":case"textarea":c=!!p.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&xa(u)}}return un(u),u.flags&=-16777217,null;case 6:if(c&&u.stateNode!=null)c.memoizedProps!==p&&xa(u);else{if(typeof p!="string"&&u.stateNode===null)throw Error(r(166));if(c=wt.current,_f(u)){if(c=u.stateNode,f=u.memoizedProps,p=null,_=Vr,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}c[jn]=u,c=!!(c.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||KS(c.nodeValue,f)),c||Dc(u)}else c=p0(c).createTextNode(p),c[jn]=u,u.stateNode=c}return un(u),null;case 13:if(p=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(_=_f(u),p!==null&&p.dehydrated!==null){if(c===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[jn]=u}else xf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;un(u),_=!1}else _=PA(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(va(u),u):(va(u),null)}if(va(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=p!==null,c=c!==null&&c.memoizedState!==null,f){p=u.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var x=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==_&&(p.flags|=2048)}return f!==c&&f&&(u.child.flags|=8192),n0(u,u.updateQueue),un(u),null;case 4:return kt(),c===null&&Jv(u.stateNode.containerInfo),un(u),null;case 10:return ma(u.type),un(u),null;case 19:if(ot(Wn),_=u.memoizedState,_===null)return un(u),null;if(p=(u.flags&128)!==0,x=_.rendering,x===null)if(p)Lf(_,!1);else{if(mn!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(x=Qp(c),x!==null){for(u.flags|=128,Lf(_,!1),c=x.updateQueue,u.updateQueue=c,n0(u,c),u.subtreeFlags=0,c=f,f=u.child;f!==null;)DA(f,c),f=f.sibling;return nt(Wn,Wn.current&1|2),u.child}c=c.sibling}_.tail!==null&&Nt()>s0&&(u.flags|=128,p=!0,Lf(_,!1),u.lanes=4194304)}else{if(!p)if(c=Qp(x),c!==null){if(u.flags|=128,p=!0,c=c.updateQueue,u.updateQueue=c,n0(u,c),Lf(_,!0),_.tail===null&&_.tailMode==="hidden"&&!x.alternate&&!be)return un(u),null}else 2*Nt()-_.renderingStartTime>s0&&f!==536870912&&(u.flags|=128,p=!0,Lf(_,!1),u.lanes=4194304);_.isBackwards?(x.sibling=u.child,u.child=x):(c=_.last,c!==null?c.sibling=x:u.child=x,_.last=x)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Nt(),u.sibling=null,c=Wn.current,nt(Wn,p?c&1|2:c&1),u):(un(u),null);case 22:case 23:return va(u),ev(),p=u.memoizedState!==null,c!==null?c.memoizedState!==null!==p&&(u.flags|=8192):p&&(u.flags|=8192),p?(f&536870912)!==0&&(u.flags&128)===0&&(un(u),u.subtreeFlags&6&&(u.flags|=8192)):un(u),f=u.updateQueue,f!==null&&n0(u,f.retryQueue),f=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048),c!==null&&ot(Nc),null;case 24:return f=null,c!==null&&(f=c.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),ma(Gn),un(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function u9(c,u){switch(jy(u),u.tag){case 1:return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return ma(Gn),kt(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 26:case 27:case 5:return te(u),null;case 13:if(va(u),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));xf()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return ot(Wn),null;case 4:return kt(),null;case 10:return ma(u.type),null;case 22:case 23:return va(u),ev(),c!==null&&ot(Nc),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 24:return ma(Gn),null;case 25:return null;default:return null}}function rS(c,u){switch(jy(u),u.tag){case 3:ma(Gn),kt();break;case 26:case 27:case 5:te(u);break;case 4:kt();break;case 13:va(u);break;case 19:ot(Wn);break;case 10:ma(u.type);break;case 22:case 23:va(u),ev(),c!==null&&ot(Nc);break;case 24:ma(Gn)}}function Vf(c,u){try{var f=u.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&c)===c){p=void 0;var x=f.create,D=f.inst;p=x(),D.destroy=p}f=f.next}while(f!==_)}}catch(L){Ye(u,u.return,L)}}function io(c,u,f){try{var p=u.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var x=_.next;p=x;do{if((p.tag&c)===c){var D=p.inst,L=D.destroy;if(L!==void 0){D.destroy=void 0,_=u;var W=f,J=L;try{J()}catch(ht){Ye(_,W,ht)}}}p=p.next}while(p!==x)}}catch(ht){Ye(u,u.return,ht)}}function iS(c){var u=c.updateQueue;if(u!==null){var f=c.stateNode;try{WA(u,f)}catch(p){Ye(c,c.return,p)}}}function sS(c,u,f){f.props=kc(c.type,c.memoizedProps),f.state=c.memoizedState;try{f.componentWillUnmount()}catch(p){Ye(c,u,p)}}function Bf(c,u){try{var f=c.ref;if(f!==null){switch(c.tag){case 26:case 27:case 5:var p=c.stateNode;break;case 30:p=c.stateNode;break;default:p=c.stateNode}typeof f=="function"?c.refCleanup=f(p):f.current=p}}catch(_){Ye(c,u,_)}}function Ts(c,u){var f=c.ref,p=c.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(_){Ye(c,u,_)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Ye(c,u,_)}else f.current=null}function aS(c){var u=c.type,f=c.memoizedProps,p=c.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(_){Ye(c,c.return,_)}}function Rv(c,u,f){try{var p=c.stateNode;O9(p,c.type,f,u),p[Nn]=u}catch(_){Ye(c,c.return,_)}}function oS(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&fo(c.type)||c.tag===4}function Dv(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||oS(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&fo(c.type)||c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ov(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(c,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(c),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=g0));else if(p!==4&&(p===27&&fo(c.type)&&(f=c.stateNode,u=null),c=c.child,c!==null))for(Ov(c,u,f),c=c.sibling;c!==null;)Ov(c,u,f),c=c.sibling}function r0(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?f.insertBefore(c,u):f.appendChild(c);else if(p!==4&&(p===27&&fo(c.type)&&(f=c.stateNode),c=c.child,c!==null))for(r0(c,u,f),c=c.sibling;c!==null;)r0(c,u,f),c=c.sibling}function cS(c){var u=c.stateNode,f=c.memoizedProps;try{for(var p=c.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);mr(u,p,f),u[jn]=c,u[Nn]=f}catch(x){Ye(c,c.return,x)}}var wa=!1,Sn=!1,Mv=!1,lS=typeof WeakSet=="function"?WeakSet:Set,ir=null;function h9(c,u){if(c=c.containerInfo,n_=w0,c=xA(c),Dy(c)){if("selectionStart"in c)var f={start:c.selectionStart,end:c.selectionEnd};else t:{f=(f=c.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var _=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break t}var D=0,L=-1,W=-1,J=0,ht=0,gt=c,it=null;e:for(;;){for(var st;gt!==f||_!==0&&gt.nodeType!==3||(L=D+_),gt!==x||p!==0&&gt.nodeType!==3||(W=D+p),gt.nodeType===3&&(D+=gt.nodeValue.length),(st=gt.firstChild)!==null;)it=gt,gt=st;for(;;){if(gt===c)break e;if(it===f&&++J===_&&(L=D),it===x&&++ht===p&&(W=D),(st=gt.nextSibling)!==null)break;gt=it,it=gt.parentNode}gt=st}f=L===-1||W===-1?null:{start:L,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(r_={focusedElem:c,selectionRange:f},w0=!1,ir=u;ir!==null;)if(u=ir,c=u.child,(u.subtreeFlags&1024)!==0&&c!==null)c.return=u,ir=c;else for(;ir!==null;){switch(u=ir,x=u.alternate,c=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&x!==null){c=void 0,f=u,_=x.memoizedProps,x=x.memoizedState,p=f.stateNode;try{var Yt=kc(f.type,_,f.elementType===f.type);c=p.getSnapshotBeforeUpdate(Yt,x),p.__reactInternalSnapshotBeforeUpdate=c}catch(Gt){Ye(f,f.return,Gt)}}break;case 3:if((c&1024)!==0){if(c=u.stateNode.containerInfo,f=c.nodeType,f===9)a_(c);else if(f===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":a_(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=u.sibling,c!==null){c.return=u.return,ir=c;break}ir=u.return}}function uS(c,u,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:so(c,f),p&4&&Vf(5,f);break;case 1:if(so(c,f),p&4)if(c=f.stateNode,u===null)try{c.componentDidMount()}catch(D){Ye(f,f.return,D)}else{var _=kc(f.type,u.memoizedProps);u=u.memoizedState;try{c.componentDidUpdate(_,u,c.__reactInternalSnapshotBeforeUpdate)}catch(D){Ye(f,f.return,D)}}p&64&&iS(f),p&512&&Bf(f,f.return);break;case 3:if(so(c,f),p&64&&(c=f.updateQueue,c!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{WA(c,u)}catch(D){Ye(f,f.return,D)}}break;case 27:u===null&&p&4&&cS(f);case 26:case 5:so(c,f),u===null&&p&4&&aS(f),p&512&&Bf(f,f.return);break;case 12:so(c,f);break;case 13:so(c,f),p&4&&dS(c,f),p&64&&(c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(f=x9.bind(null,f),B9(c,f))));break;case 22:if(p=f.memoizedState!==null||wa,!p){u=u!==null&&u.memoizedState!==null||Sn,_=wa;var x=Sn;wa=p,(Sn=u)&&!x?ao(c,f,(f.subtreeFlags&8772)!==0):so(c,f),wa=_,Sn=x}break;case 30:break;default:so(c,f)}}function hS(c){var u=c.alternate;u!==null&&(c.alternate=null,hS(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&Ya(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var an=null,Wr=!1;function ba(c,u,f){for(f=f.child;f!==null;)fS(c,u,f),f=f.sibling}function fS(c,u,f){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(fe,f)}catch{}switch(f.tag){case 26:Sn||Ts(f,u),ba(c,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Sn||Ts(f,u);var p=an,_=Wr;fo(f.type)&&(an=f.stateNode,Wr=!1),ba(c,u,f),Yf(f.stateNode),an=p,Wr=_;break;case 5:Sn||Ts(f,u);case 6:if(p=an,_=Wr,an=null,ba(c,u,f),an=p,Wr=_,an!==null)if(Wr)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(f.stateNode)}catch(x){Ye(f,u,x)}else try{an.removeChild(f.stateNode)}catch(x){Ye(f,u,x)}break;case 18:an!==null&&(Wr?(c=an,tC(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,f.stateNode),ed(c)):tC(an,f.stateNode));break;case 4:p=an,_=Wr,an=f.stateNode.containerInfo,Wr=!0,ba(c,u,f),an=p,Wr=_;break;case 0:case 11:case 14:case 15:Sn||io(2,f,u),Sn||io(4,f,u),ba(c,u,f);break;case 1:Sn||(Ts(f,u),p=f.stateNode,typeof p.componentWillUnmount=="function"&&sS(f,u,p)),ba(c,u,f);break;case 21:ba(c,u,f);break;case 22:Sn=(p=Sn)||f.memoizedState!==null,ba(c,u,f),Sn=p;break;default:ba(c,u,f)}}function dS(c,u){if(u.memoizedState===null&&(c=u.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{ed(c)}catch(f){Ye(u,u.return,f)}}function f9(c){switch(c.tag){case 13:case 19:var u=c.stateNode;return u===null&&(u=c.stateNode=new lS),u;case 22:return c=c.stateNode,u=c._retryCache,u===null&&(u=c._retryCache=new lS),u;default:throw Error(r(435,c.tag))}}function Nv(c,u){var f=f9(c);u.forEach(function(p){var _=w9.bind(null,c,p);f.has(p)||(f.add(p),p.then(_,_))})}function oi(c,u){var f=u.deletions;if(f!==null)for(var p=0;p<f.length;p++){var _=f[p],x=c,D=u,L=D;t:for(;L!==null;){switch(L.tag){case 27:if(fo(L.type)){an=L.stateNode,Wr=!1;break t}break;case 5:an=L.stateNode,Wr=!1;break t;case 3:case 4:an=L.stateNode.containerInfo,Wr=!0;break t}L=L.return}if(an===null)throw Error(r(160));fS(x,D,_),an=null,Wr=!1,x=_.alternate,x!==null&&(x.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)gS(u,c),u=u.sibling}var Xi=null;function gS(c,u){var f=c.alternate,p=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:oi(u,c),ci(c),p&4&&(io(3,c,c.return),Vf(3,c),io(5,c,c.return));break;case 1:oi(u,c),ci(c),p&512&&(Sn||f===null||Ts(f,f.return)),p&64&&wa&&(c=c.updateQueue,c!==null&&(p=c.callbacks,p!==null&&(f=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var _=Xi;if(oi(u,c),ci(c),p&512&&(Sn||f===null||Ts(f,f.return)),p&4){var x=f!==null?f.memoizedState:null;if(p=c.memoizedState,f===null)if(p===null)if(c.stateNode===null){t:{p=c.type,f=c.memoizedProps,_=_.ownerDocument||_;e:switch(p){case"title":x=_.getElementsByTagName("title")[0],(!x||x[uc]||x[jn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=_.createElement(p),_.head.insertBefore(x,_.querySelector("head > title"))),mr(x,p,f),x[jn]=c,An(x),p=x;break t;case"link":var D=cC("link","href",_).get(p+(f.href||""));if(D){for(var L=0;L<D.length;L++)if(x=D[L],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(L,1);break e}}x=_.createElement(p),mr(x,p,f),_.head.appendChild(x);break;case"meta":if(D=cC("meta","content",_).get(p+(f.content||""))){for(L=0;L<D.length;L++)if(x=D[L],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(L,1);break e}}x=_.createElement(p),mr(x,p,f),_.head.appendChild(x);break;default:throw Error(r(468,p))}x[jn]=c,An(x),p=x}c.stateNode=p}else lC(_,c.type,c.stateNode);else c.stateNode=oC(_,p,c.memoizedProps);else x!==p?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,p===null?lC(_,c.type,c.stateNode):oC(_,p,c.memoizedProps)):p===null&&c.stateNode!==null&&Rv(c,c.memoizedProps,f.memoizedProps)}break;case 27:oi(u,c),ci(c),p&512&&(Sn||f===null||Ts(f,f.return)),f!==null&&p&4&&Rv(c,c.memoizedProps,f.memoizedProps);break;case 5:if(oi(u,c),ci(c),p&512&&(Sn||f===null||Ts(f,f.return)),c.flags&32){_=c.stateNode;try{wi(_,"")}catch(st){Ye(c,c.return,st)}}p&4&&c.stateNode!=null&&(_=c.memoizedProps,Rv(c,_,f!==null?f.memoizedProps:_)),p&1024&&(Mv=!0);break;case 6:if(oi(u,c),ci(c),p&4){if(c.stateNode===null)throw Error(r(162));p=c.memoizedProps,f=c.stateNode;try{f.nodeValue=p}catch(st){Ye(c,c.return,st)}}break;case 3:if(v0=null,_=Xi,Xi=m0(u.containerInfo),oi(u,c),Xi=_,ci(c),p&4&&f!==null&&f.memoizedState.isDehydrated)try{ed(u.containerInfo)}catch(st){Ye(c,c.return,st)}Mv&&(Mv=!1,pS(c));break;case 4:p=Xi,Xi=m0(c.stateNode.containerInfo),oi(u,c),ci(c),Xi=p;break;case 12:oi(u,c),ci(c);break;case 13:oi(u,c),ci(c),c.child.flags&8192&&c.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Fv=Nt()),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,Nv(c,p)));break;case 22:_=c.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,J=wa,ht=Sn;if(wa=J||_,Sn=ht||W,oi(u,c),Sn=ht,wa=J,ci(c),p&8192)t:for(u=c.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(f===null||W||wa||Sn||Lc(c)),f=null,u=c;;){if(u.tag===5||u.tag===26){if(f===null){W=f=u;try{if(x=W.stateNode,_)D=x.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{L=W.stateNode;var gt=W.memoizedProps.style,it=gt!=null&&gt.hasOwnProperty("display")?gt.display:null;L.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(st){Ye(W,W.return,st)}}}else if(u.tag===6){if(f===null){W=u;try{W.stateNode.nodeValue=_?"":W.memoizedProps}catch(st){Ye(W,W.return,st)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break t;for(;u.sibling===null;){if(u.return===null||u.return===c)break t;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}p&4&&(p=c.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Nv(c,f))));break;case 19:oi(u,c),ci(c),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,Nv(c,p)));break;case 30:break;case 21:break;default:oi(u,c),ci(c)}}function ci(c){var u=c.flags;if(u&2){try{for(var f,p=c.return;p!==null;){if(oS(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,x=Dv(c);r0(c,x,_);break;case 5:var D=f.stateNode;f.flags&32&&(wi(D,""),f.flags&=-33);var L=Dv(c);r0(c,L,D);break;case 3:case 4:var W=f.stateNode.containerInfo,J=Dv(c);Ov(c,J,W);break;default:throw Error(r(161))}}catch(ht){Ye(c,c.return,ht)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function pS(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var u=c;pS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),c=c.sibling}}function so(c,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)uS(c,u.alternate,u),u=u.sibling}function Lc(c){for(c=c.child;c!==null;){var u=c;switch(u.tag){case 0:case 11:case 14:case 15:io(4,u,u.return),Lc(u);break;case 1:Ts(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&sS(u,u.return,f),Lc(u);break;case 27:Yf(u.stateNode);case 26:case 5:Ts(u,u.return),Lc(u);break;case 22:u.memoizedState===null&&Lc(u);break;case 30:Lc(u);break;default:Lc(u)}c=c.sibling}}function ao(c,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var p=u.alternate,_=c,x=u,D=x.flags;switch(x.tag){case 0:case 11:case 15:ao(_,x,f),Vf(4,x);break;case 1:if(ao(_,x,f),p=x,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(J){Ye(p,p.return,J)}if(p=x,_=p.updateQueue,_!==null){var L=p.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_<W.length;_++)GA(W[_],L)}catch(J){Ye(p,p.return,J)}}f&&D&64&&iS(x),Bf(x,x.return);break;case 27:cS(x);case 26:case 5:ao(_,x,f),f&&p===null&&D&4&&aS(x),Bf(x,x.return);break;case 12:ao(_,x,f);break;case 13:ao(_,x,f),f&&D&4&&dS(_,x);break;case 22:x.memoizedState===null&&ao(_,x,f),Bf(x,x.return);break;case 30:break;default:ao(_,x,f)}u=u.sibling}}function Pv(c,u){var f=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),c=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),c!==f&&(c!=null&&c.refCount++,f!=null&&Ef(f))}function kv(c,u){c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&Ef(c))}function Ss(c,u,f,p){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)mS(c,u,f,p),u=u.sibling}function mS(c,u,f,p){var _=u.flags;switch(u.tag){case 0:case 11:case 15:Ss(c,u,f,p),_&2048&&Vf(9,u);break;case 1:Ss(c,u,f,p);break;case 3:Ss(c,u,f,p),_&2048&&(c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&Ef(c)));break;case 12:if(_&2048){Ss(c,u,f,p),c=u.stateNode;try{var x=u.memoizedProps,D=x.id,L=x.onPostCommit;typeof L=="function"&&L(D,u.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(W){Ye(u,u.return,W)}}else Ss(c,u,f,p);break;case 13:Ss(c,u,f,p);break;case 23:break;case 22:x=u.stateNode,D=u.alternate,u.memoizedState!==null?x._visibility&2?Ss(c,u,f,p):Ff(c,u):x._visibility&2?Ss(c,u,f,p):(x._visibility|=2,xu(c,u,f,p,(u.subtreeFlags&10256)!==0)),_&2048&&Pv(D,u);break;case 24:Ss(c,u,f,p),_&2048&&kv(u.alternate,u);break;default:Ss(c,u,f,p)}}function xu(c,u,f,p,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var x=c,D=u,L=f,W=p,J=D.flags;switch(D.tag){case 0:case 11:case 15:xu(x,D,L,W,_),Vf(8,D);break;case 23:break;case 22:var ht=D.stateNode;D.memoizedState!==null?ht._visibility&2?xu(x,D,L,W,_):Ff(x,D):(ht._visibility|=2,xu(x,D,L,W,_)),_&&J&2048&&Pv(D.alternate,D);break;case 24:xu(x,D,L,W,_),_&&J&2048&&kv(D.alternate,D);break;default:xu(x,D,L,W,_)}u=u.sibling}}function Ff(c,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=c,p=u,_=p.flags;switch(p.tag){case 22:Ff(f,p),_&2048&&Pv(p.alternate,p);break;case 24:Ff(f,p),_&2048&&kv(p.alternate,p);break;default:Ff(f,p)}u=u.sibling}}var Uf=8192;function wu(c){if(c.subtreeFlags&Uf)for(c=c.child;c!==null;)yS(c),c=c.sibling}function yS(c){switch(c.tag){case 26:wu(c),c.flags&Uf&&c.memoizedState!==null&&Q9(Xi,c.memoizedState,c.memoizedProps);break;case 5:wu(c);break;case 3:case 4:var u=Xi;Xi=m0(c.stateNode.containerInfo),wu(c),Xi=u;break;case 22:c.memoizedState===null&&(u=c.alternate,u!==null&&u.memoizedState!==null?(u=Uf,Uf=16777216,wu(c),Uf=u):wu(c));break;default:wu(c)}}function vS(c){var u=c.alternate;if(u!==null&&(c=u.child,c!==null)){u.child=null;do u=c.sibling,c.sibling=null,c=u;while(c!==null)}}function jf(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];ir=p,xS(p,c)}vS(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)_S(c),c=c.sibling}function _S(c){switch(c.tag){case 0:case 11:case 15:jf(c),c.flags&2048&&io(9,c,c.return);break;case 3:jf(c);break;case 12:jf(c);break;case 22:var u=c.stateNode;c.memoizedState!==null&&u._visibility&2&&(c.return===null||c.return.tag!==13)?(u._visibility&=-3,i0(c)):jf(c);break;default:jf(c)}}function i0(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];ir=p,xS(p,c)}vS(c)}for(c=c.child;c!==null;){switch(u=c,u.tag){case 0:case 11:case 15:io(8,u,u.return),i0(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,i0(u));break;default:i0(u)}c=c.sibling}}function xS(c,u){for(;ir!==null;){var f=ir;switch(f.tag){case 0:case 11:case 15:io(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Ef(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,ir=p;else t:for(f=c;ir!==null;){p=ir;var _=p.sibling,x=p.return;if(hS(p),p===f){ir=null;break t}if(_!==null){_.return=x,ir=_;break t}ir=x}}}var d9={getCacheForType:function(c){var u=br(Gn),f=u.data.get(c);return f===void 0&&(f=c(),u.data.set(c,f)),f}},g9=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Qe=null,ce=null,pe=0,Me=0,li=null,oo=!1,bu=!1,Lv=!1,Ea=0,mn=0,co=0,Vc=0,Vv=0,Di=0,Eu=0,zf=null,qr=null,Bv=!1,Fv=0,s0=1/0,a0=null,lo=null,pr=0,uo=null,Au=null,Tu=0,Uv=0,jv=null,wS=null,Hf=0,zv=null;function ui(){if((Oe&2)!==0&&pe!==0)return pe&-pe;if(K.T!==null){var c=fu;return c!==0?c:Kv()}return Wa()}function bS(){Di===0&&(Di=(pe&536870912)===0||be?Qh():536870912);var c=Ri.current;return c!==null&&(c.flags|=32),Di}function hi(c,u,f){(c===Qe&&(Me===2||Me===9)||c.cancelPendingCommit!==null)&&(Su(c,0),ho(c,pe,Di,!1)),ea(c,f),((Oe&2)===0||c!==Qe)&&(c===Qe&&((Oe&2)===0&&(Vc|=f),mn===4&&ho(c,pe,Di,!1)),Cs(c))}function ES(c,u,f){if((Oe&6)!==0)throw Error(r(327));var p=!f&&(u&124)===0&&(u&c.expiredLanes)===0||lc(c,u),_=p?y9(c,u):Wv(c,u,!0),x=p;do{if(_===0){bu&&!p&&ho(c,u,0,!1);break}else{if(f=c.current.alternate,x&&!p9(f)){_=Wv(c,u,!1),x=!1;continue}if(_===2){if(x=u,c.errorRecoveryDisabledLanes&x)var D=0;else D=c.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){u=D;t:{var L=c;_=zf;var W=L.current.memoizedState.isDehydrated;if(W&&(Su(L,D).flags|=256),D=Wv(L,D,!1),D!==2){if(Lv&&!W){L.errorRecoveryDisabledLanes|=x,Vc|=x,_=4;break t}x=qr,qr=_,x!==null&&(qr===null?qr=x:qr.push.apply(qr,x))}_=D}if(x=!1,_!==2)continue}}if(_===1){Su(c,0),ho(c,u,0,!0);break}t:{switch(p=c,x=_,x){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ho(p,u,Di,!oo);break t;case 2:qr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=Fv+300-Nt(),10<_)){if(ho(p,u,Di,!oo),Hl(p,0,!0)!==0)break t;p.timeoutHandle=ZS(AS.bind(null,p,f,qr,a0,Bv,u,Di,Vc,Eu,oo,x,2,-0,0),_);break t}AS(p,f,qr,a0,Bv,u,Di,Vc,Eu,oo,x,0,-0,0)}}break}while(!0);Cs(c)}function AS(c,u,f,p,_,x,D,L,W,J,ht,gt,it,st){if(c.timeoutHandle=-1,gt=u.subtreeFlags,(gt&8192||(gt&16785408)===16785408)&&($f={stylesheets:null,count:0,unsuspend:$9},yS(u),gt=Z9(),gt!==null)){c.cancelPendingCommit=gt(OS.bind(null,c,u,x,f,p,_,D,L,W,ht,1,it,st)),ho(c,x,D,!J);return}OS(c,u,x,f,p,_,D,L,W)}function p9(c){for(var u=c;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var _=f[p],x=_.getSnapshot;_=_.value;try{if(!si(x(),_))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ho(c,u,f,p){u&=~Vv,u&=~Vc,c.suspendedLanes|=u,c.pingedLanes&=~u,p&&(c.warmLanes|=u),p=c.expirationTimes;for(var _=u;0<_;){var x=31-$e(_),D=1<<x;p[x]=-1,_&=~D}f!==0&&fs(c,f,u)}function o0(){return(Oe&6)===0?(Gf(0),!1):!0}function Hv(){if(ce!==null){if(Me===0)var c=ce.return;else c=ce,pa=Oc=null,av(c),vu=null,Pf=0,c=ce;for(;c!==null;)rS(c.alternate,c),c=c.return;ce=null}}function Su(c,u){var f=c.timeoutHandle;f!==-1&&(c.timeoutHandle=-1,N9(f)),f=c.cancelPendingCommit,f!==null&&(c.cancelPendingCommit=null,f()),Hv(),Qe=c,ce=f=fa(c.current,null),pe=u,Me=0,li=null,oo=!1,bu=lc(c,u),Lv=!1,Eu=Di=Vv=Vc=co=mn=0,qr=zf=null,Bv=!1,(u&8)!==0&&(u|=u&32);var p=c.entangledLanes;if(p!==0)for(c=c.entanglements,p&=u;0<p;){var _=31-$e(p),x=1<<_;u|=c[_],p&=~x}return Ea=u,Rp(),f}function TS(c,u){ne=null,K.H=Xp,u===Tf||u===Bp?(u=zA(),Me=3):u===FA?(u=zA(),Me=4):Me=u===HT?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,li=u,ce===null&&(mn=1,Jp(c,Ti(u,c.current)))}function SS(){var c=K.H;return K.H=Xp,c===null?Xp:c}function CS(){var c=K.A;return K.A=d9,c}function Gv(){mn=4,oo||(pe&4194048)!==pe&&Ri.current!==null||(bu=!0),(co&134217727)===0&&(Vc&134217727)===0||Qe===null||ho(Qe,pe,Di,!1)}function Wv(c,u,f){var p=Oe;Oe|=2;var _=SS(),x=CS();(Qe!==c||pe!==u)&&(a0=null,Su(c,u)),u=!1;var D=mn;t:do try{if(Me!==0&&ce!==null){var L=ce,W=li;switch(Me){case 8:Hv(),D=6;break t;case 3:case 2:case 9:case 6:Ri.current===null&&(u=!0);var J=Me;if(Me=0,li=null,Cu(c,L,W,J),f&&bu){D=0;break t}break;default:J=Me,Me=0,li=null,Cu(c,L,W,J)}}m9(),D=mn;break}catch(ht){TS(c,ht)}while(!0);return u&&c.shellSuspendCounter++,pa=Oc=null,Oe=p,K.H=_,K.A=x,ce===null&&(Qe=null,pe=0,Rp()),D}function m9(){for(;ce!==null;)IS(ce)}function y9(c,u){var f=Oe;Oe|=2;var p=SS(),_=CS();Qe!==c||pe!==u?(a0=null,s0=Nt()+500,Su(c,u)):bu=lc(c,u);t:do try{if(Me!==0&&ce!==null){u=ce;var x=li;e:switch(Me){case 1:Me=0,li=null,Cu(c,u,x,1);break;case 2:case 9:if(UA(x)){Me=0,li=null,RS(u);break}u=function(){Me!==2&&Me!==9||Qe!==c||(Me=7),Cs(c)},x.then(u,u);break t;case 3:Me=7;break t;case 4:Me=5;break t;case 7:UA(x)?(Me=0,li=null,RS(u)):(Me=0,li=null,Cu(c,u,x,7));break;case 5:var D=null;switch(ce.tag){case 26:D=ce.memoizedState;case 5:case 27:var L=ce;if(!D||uC(D)){Me=0,li=null;var W=L.sibling;if(W!==null)ce=W;else{var J=L.return;J!==null?(ce=J,c0(J)):ce=null}break e}}Me=0,li=null,Cu(c,u,x,5);break;case 6:Me=0,li=null,Cu(c,u,x,6);break;case 8:Hv(),mn=6;break t;default:throw Error(r(462))}}v9();break}catch(ht){TS(c,ht)}while(!0);return pa=Oc=null,K.H=p,K.A=_,Oe=f,ce!==null?0:(Qe=null,pe=0,Rp(),mn)}function v9(){for(;ce!==null&&!ri();)IS(ce)}function IS(c){var u=eS(c.alternate,c,Ea);c.memoizedProps=c.pendingProps,u===null?c0(c):ce=u}function RS(c){var u=c,f=u.alternate;switch(u.tag){case 15:case 0:u=KT(f,u,u.pendingProps,u.type,void 0,pe);break;case 11:u=KT(f,u,u.pendingProps,u.type.render,u.ref,pe);break;case 5:av(u);default:rS(f,u),u=ce=DA(u,Ea),u=eS(f,u,Ea)}c.memoizedProps=c.pendingProps,u===null?c0(c):ce=u}function Cu(c,u,f,p){pa=Oc=null,av(u),vu=null,Pf=0;var _=u.return;try{if(o9(c,_,u,f,pe)){mn=1,Jp(c,Ti(f,c.current)),ce=null;return}}catch(x){if(_!==null)throw ce=_,x;mn=1,Jp(c,Ti(f,c.current)),ce=null;return}u.flags&32768?(be||p===1?c=!0:bu||(pe&536870912)!==0?c=!1:(oo=c=!0,(p===2||p===9||p===3||p===6)&&(p=Ri.current,p!==null&&p.tag===13&&(p.flags|=16384))),DS(u,c)):c0(u)}function c0(c){var u=c;do{if((u.flags&32768)!==0){DS(u,oo);return}c=u.return;var f=l9(u.alternate,u,Ea);if(f!==null){ce=f;return}if(u=u.sibling,u!==null){ce=u;return}ce=u=c}while(u!==null);mn===0&&(mn=5)}function DS(c,u){do{var f=u9(c.alternate,c);if(f!==null){f.flags&=32767,ce=f;return}if(f=c.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(c=c.sibling,c!==null)){ce=c;return}ce=c=f}while(c!==null);mn=6,ce=null}function OS(c,u,f,p,_,x,D,L,W){c.cancelPendingCommit=null;do l0();while(pr!==0);if((Oe&6)!==0)throw Error(r(327));if(u!==null){if(u===c.current)throw Error(r(177));if(x=u.lanes|u.childLanes,x|=ky,Jh(c,f,x,D,L,W),c===Qe&&(ce=Qe=null,pe=0),Au=u,uo=c,Tu=f,Uv=x,jv=_,wS=p,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,b9(Et,function(){return LS(),null})):(c.callbackNode=null,c.callbackPriority=0),p=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||p){p=K.T,K.T=null,_=ct.p,ct.p=2,D=Oe,Oe|=4;try{h9(c,u,f)}finally{Oe=D,ct.p=_,K.T=p}}pr=1,MS(),NS(),PS()}}function MS(){if(pr===1){pr=0;var c=uo,u=Au,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=K.T,K.T=null;var p=ct.p;ct.p=2;var _=Oe;Oe|=4;try{gS(u,c);var x=r_,D=xA(c.containerInfo),L=x.focusedElem,W=x.selectionRange;if(D!==L&&L&&L.ownerDocument&&_A(L.ownerDocument.documentElement,L)){if(W!==null&&Dy(L)){var J=W.start,ht=W.end;if(ht===void 0&&(ht=J),"selectionStart"in L)L.selectionStart=J,L.selectionEnd=Math.min(ht,L.value.length);else{var gt=L.ownerDocument||document,it=gt&&gt.defaultView||window;if(it.getSelection){var st=it.getSelection(),Yt=L.textContent.length,Gt=Math.min(W.start,Yt),He=W.end===void 0?Gt:Math.min(W.end,Yt);!st.extend&&Gt>He&&(D=He,He=Gt,Gt=D);var X=vA(L,Gt),Y=vA(L,He);if(X&&Y&&(st.rangeCount!==1||st.anchorNode!==X.node||st.anchorOffset!==X.offset||st.focusNode!==Y.node||st.focusOffset!==Y.offset)){var Z=gt.createRange();Z.setStart(X.node,X.offset),st.removeAllRanges(),Gt>He?(st.addRange(Z),st.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),st.addRange(Z))}}}}for(gt=[],st=L;st=st.parentNode;)st.nodeType===1&&gt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<gt.length;L++){var ft=gt[L];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}w0=!!n_,r_=n_=null}finally{Oe=_,ct.p=p,K.T=f}}c.current=u,pr=2}}function NS(){if(pr===2){pr=0;var c=uo,u=Au,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=K.T,K.T=null;var p=ct.p;ct.p=2;var _=Oe;Oe|=4;try{uS(c,u.alternate,u)}finally{Oe=_,ct.p=p,K.T=f}}pr=3}}function PS(){if(pr===4||pr===3){pr=0,Rt();var c=uo,u=Au,f=Tu,p=wS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?pr=5:(pr=0,Au=uo=null,kS(c,c.pendingLanes));var _=c.pendingLanes;if(_===0&&(lo=null),Gl(f),u=u.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(fe,u,void 0,(u.current.flags&128)===128)}catch{}if(p!==null){u=K.T,_=ct.p,ct.p=2,K.T=null;try{for(var x=c.onRecoverableError,D=0;D<p.length;D++){var L=p[D];x(L.value,{componentStack:L.stack})}}finally{K.T=u,ct.p=_}}(Tu&3)!==0&&l0(),Cs(c),_=c.pendingLanes,(f&4194090)!==0&&(_&42)!==0?c===zv?Hf++:(Hf=0,zv=c):Hf=0,Gf(0)}}function kS(c,u){(c.pooledCacheLanes&=u)===0&&(u=c.pooledCache,u!=null&&(c.pooledCache=null,Ef(u)))}function l0(c){return MS(),NS(),PS(),LS()}function LS(){if(pr!==5)return!1;var c=uo,u=Uv;Uv=0;var f=Gl(Tu),p=K.T,_=ct.p;try{ct.p=32>f?32:f,K.T=null,f=jv,jv=null;var x=uo,D=Tu;if(pr=0,Au=uo=null,Tu=0,(Oe&6)!==0)throw Error(r(331));var L=Oe;if(Oe|=4,_S(x.current),mS(x,x.current,D,f),Oe=L,Gf(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(fe,x)}catch{}return!0}finally{ct.p=_,K.T=p,kS(c,u)}}function VS(c,u,f){u=Ti(f,u),u=xv(c.stateNode,u,2),c=to(c,u,2),c!==null&&(ea(c,2),Cs(c))}function Ye(c,u,f){if(c.tag===3)VS(c,c,f);else for(;u!==null;){if(u.tag===3){VS(u,c,f);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(lo===null||!lo.has(p))){c=Ti(f,c),f=jT(2),p=to(u,f,2),p!==null&&(zT(f,p,u,c),ea(p,2),Cs(p));break}}u=u.return}}function qv(c,u,f){var p=c.pingCache;if(p===null){p=c.pingCache=new g9;var _=new Set;p.set(u,_)}else _=p.get(u),_===void 0&&(_=new Set,p.set(u,_));_.has(f)||(Lv=!0,_.add(f),c=_9.bind(null,c,u,f),u.then(c,c))}function _9(c,u,f){var p=c.pingCache;p!==null&&p.delete(u),c.pingedLanes|=c.suspendedLanes&f,c.warmLanes&=~f,Qe===c&&(pe&f)===f&&(mn===4||mn===3&&(pe&62914560)===pe&&300>Nt()-Fv?(Oe&2)===0&&Su(c,0):Vv|=f,Eu===pe&&(Eu=0)),Cs(c)}function BS(c,u){u===0&&(u=Zh()),c=cu(c,u),c!==null&&(ea(c,u),Cs(c))}function x9(c){var u=c.memoizedState,f=0;u!==null&&(f=u.retryLane),BS(c,f)}function w9(c,u){var f=0;switch(c.tag){case 13:var p=c.stateNode,_=c.memoizedState;_!==null&&(f=_.retryLane);break;case 19:p=c.stateNode;break;case 22:p=c.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(u),BS(c,f)}function b9(c,u){return Ke(c,u)}var u0=null,Iu=null,Yv=!1,h0=!1,Xv=!1,Bc=0;function Cs(c){c!==Iu&&c.next===null&&(Iu===null?u0=Iu=c:Iu=Iu.next=c),h0=!0,Yv||(Yv=!0,A9())}function Gf(c,u){if(!Xv&&h0){Xv=!0;do for(var f=!1,p=u0;p!==null;){if(c!==0){var _=p.pendingLanes;if(_===0)var x=0;else{var D=p.suspendedLanes,L=p.pingedLanes;x=(1<<31-$e(42|c)+1)-1,x&=_&~(D&~L),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,zS(p,x))}else x=pe,x=Hl(p,p===Qe?x:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(x&3)===0||lc(p,x)||(f=!0,zS(p,x));p=p.next}while(f);Xv=!1}}function E9(){FS()}function FS(){h0=Yv=!1;var c=0;Bc!==0&&(M9()&&(c=Bc),Bc=0);for(var u=Nt(),f=null,p=u0;p!==null;){var _=p.next,x=US(p,u);x===0?(p.next=null,f===null?u0=_:f.next=_,_===null&&(Iu=f)):(f=p,(c!==0||(x&3)!==0)&&(h0=!0)),p=_}Gf(c)}function US(c,u){for(var f=c.suspendedLanes,p=c.pingedLanes,_=c.expirationTimes,x=c.pendingLanes&-62914561;0<x;){var D=31-$e(x),L=1<<D,W=_[D];W===-1?((L&f)===0||(L&p)!==0)&&(_[D]=$h(L,u)):W<=u&&(c.expiredLanes|=L),x&=~L}if(u=Qe,f=pe,f=Hl(c,c===u?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p=c.callbackNode,f===0||c===u&&(Me===2||Me===9)||c.cancelPendingCommit!==null)return p!==null&&p!==null&&rn(p),c.callbackNode=null,c.callbackPriority=0;if((f&3)===0||lc(c,f)){if(u=f&-f,u===c.callbackPriority)return u;switch(p!==null&&rn(p),Gl(f)){case 2:case 8:f=Jt;break;case 32:f=Et;break;case 268435456:f=De;break;default:f=Et}return p=jS.bind(null,c),f=Ke(f,p),c.callbackPriority=u,c.callbackNode=f,u}return p!==null&&p!==null&&rn(p),c.callbackPriority=2,c.callbackNode=null,2}function jS(c,u){if(pr!==0&&pr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var f=c.callbackNode;if(l0()&&c.callbackNode!==f)return null;var p=pe;return p=Hl(c,c===Qe?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p===0?null:(ES(c,p,u),US(c,Nt()),c.callbackNode!=null&&c.callbackNode===f?jS.bind(null,c):null)}function zS(c,u){if(l0())return null;ES(c,u,!0)}function A9(){P9(function(){(Oe&6)!==0?Ke(Pt,E9):FS()})}function Kv(){return Bc===0&&(Bc=Qh()),Bc}function HS(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:$l(""+c)}function GS(c,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,c.id&&f.setAttribute("form",c.id),u.parentNode.insertBefore(f,u),c=new FormData(c),f.parentNode.removeChild(f),c}function T9(c,u,f,p,_){if(u==="submit"&&f&&f.stateNode===_){var x=HS((_[Nn]||null).action),D=p.submitter;D&&(u=(u=D[Nn]||null)?HS(u.formAction):D.getAttribute("formAction"),u!==null&&(x=u,D=null));var L=new Ql("action","action",null,p,_);c.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Bc!==0){var W=D?GS(_,D):new FormData(_);pv(f,{pending:!0,data:W,method:_.method,action:x},null,W)}}else typeof x=="function"&&(L.preventDefault(),W=D?GS(_,D):new FormData(_),pv(f,{pending:!0,data:W,method:_.method,action:x},x,W))},currentTarget:_}]})}}for(var $v=0;$v<Py.length;$v++){var Qv=Py[$v],S9=Qv.toLowerCase(),C9=Qv[0].toUpperCase()+Qv.slice(1);Yi(S9,"on"+C9)}Yi(EA,"onAnimationEnd"),Yi(AA,"onAnimationIteration"),Yi(TA,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(Gk,"onTransitionRun"),Yi(Wk,"onTransitionStart"),Yi(qk,"onTransitionCancel"),Yi(SA,"onTransitionEnd"),ra("onMouseEnter",["mouseout","mouseover"]),ra("onMouseLeave",["mouseout","mouseover"]),ra("onPointerEnter",["pointerout","pointerover"]),ra("onPointerLeave",["pointerout","pointerover"]),Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wf));function WS(c,u){u=(u&4)!==0;for(var f=0;f<c.length;f++){var p=c[f],_=p.event;p=p.listeners;t:{var x=void 0;if(u)for(var D=p.length-1;0<=D;D--){var L=p[D],W=L.instance,J=L.currentTarget;if(L=L.listener,W!==x&&_.isPropagationStopped())break t;x=L,_.currentTarget=J;try{x(_)}catch(ht){Zp(ht)}_.currentTarget=null,x=W}else for(D=0;D<p.length;D++){if(L=p[D],W=L.instance,J=L.currentTarget,L=L.listener,W!==x&&_.isPropagationStopped())break t;x=L,_.currentTarget=J;try{x(_)}catch(ht){Zp(ht)}_.currentTarget=null,x=W}}}}function le(c,u){var f=u[ef];f===void 0&&(f=u[ef]=new Set);var p=c+"__bubble";f.has(p)||(qS(u,c,2,!1),f.add(p))}function Zv(c,u,f){var p=0;u&&(p|=4),qS(f,c,p,u)}var f0="_reactListening"+Math.random().toString(36).slice(2);function Jv(c){if(!c[f0]){c[f0]=!0,nf.forEach(function(f){f!=="selectionchange"&&(I9.has(f)||Zv(f,!1,c),Zv(f,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[f0]||(u[f0]=!0,Zv("selectionchange",!1,u))}}function qS(c,u,f,p){switch(mC(u)){case 2:var _=eL;break;case 8:_=nL;break;default:_=d_}f=_.bind(null,u,f,c),_=void 0,!Ei||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),p?_!==void 0?c.addEventListener(u,f,{capture:!0,passive:_}):c.addEventListener(u,f,!0):_!==void 0?c.addEventListener(u,f,{passive:_}):c.addEventListener(u,f,!1)}function t_(c,u,f,p,_){var x=p;if((u&1)===0&&(u&2)===0&&p!==null)t:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var L=p.stateNode.containerInfo;if(L===_)break;if(D===4)for(D=p.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===_)return;D=D.return}for(;L!==null;){if(D=na(L),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){p=x=D;continue t}L=L.parentNode}}p=p.return}gp(function(){var J=x,ht=bi(f),gt=[];t:{var it=CA.get(c);if(it!==void 0){var st=Ql,Yt=c;switch(c){case"keypress":if(vs(f)===0)break t;case"keydown":case"keyup":st=ru;break;case"focusin":Yt="focus",st=tu;break;case"focusout":Yt="blur",st=tu;break;case"beforeblur":case"afterblur":st=tu;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=bp;break;case EA:case AA:case TA:st=eu;break;case SA:st=Ap;break;case"scroll":case"scrollend":st=pp;break;case"wheel":st=iu;break;case"copy":case"cut":case"paste":st=nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=pf;break;case"toggle":case"beforetoggle":st=Sp}var Gt=(u&4)!==0,He=!Gt&&(c==="scroll"||c==="scrollend"),X=Gt?it!==null?it+"Capture":null:it;Gt=[];for(var Y=J,Z;Y!==null;){var ft=Y;if(Z=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Z===null||X===null||(ft=yc(Y,X),ft!=null&&Gt.push(qf(Y,ft,Z))),He)break;Y=Y.return}0<Gt.length&&(it=new st(it,Yt,null,f,ht),gt.push({event:it,listeners:Gt}))}}if((u&7)===0){t:{if(it=c==="mouseover"||c==="pointerover",st=c==="mouseout"||c==="pointerout",it&&f!==aa&&(Yt=f.relatedTarget||f.fromElement)&&(na(Yt)||Yt[xi]))break t;if((st||it)&&(it=ht.window===ht?ht:(it=ht.ownerDocument)?it.defaultView||it.parentWindow:window,st?(Yt=f.relatedTarget||f.toElement,st=J,Yt=Yt?na(Yt):null,Yt!==null&&(He=s(Yt),Gt=Yt.tag,Yt!==He||Gt!==5&&Gt!==27&&Gt!==6)&&(Yt=null)):(st=null,Yt=J),st!==Yt)){if(Gt=Ai,ft="onMouseLeave",X="onMouseEnter",Y="mouse",(c==="pointerout"||c==="pointerover")&&(Gt=pf,ft="onPointerLeave",X="onPointerEnter",Y="pointer"),He=st==null?it:gs(st),Z=Yt==null?it:gs(Yt),it=new Gt(ft,Y+"leave",st,f,ht),it.target=He,it.relatedTarget=Z,ft=null,na(ht)===J&&(Gt=new Gt(X,Y+"enter",Yt,f,ht),Gt.target=Z,Gt.relatedTarget=He,ft=Gt),He=ft,st&&Yt)e:{for(Gt=st,X=Yt,Y=0,Z=Gt;Z;Z=Ru(Z))Y++;for(Z=0,ft=X;ft;ft=Ru(ft))Z++;for(;0<Y-Z;)Gt=Ru(Gt),Y--;for(;0<Z-Y;)X=Ru(X),Z--;for(;Y--;){if(Gt===X||X!==null&&Gt===X.alternate)break e;Gt=Ru(Gt),X=Ru(X)}Gt=null}else Gt=null;st!==null&&YS(gt,it,st,Gt,!1),Yt!==null&&He!==null&&YS(gt,He,Yt,Gt,!0)}}t:{if(it=J?gs(J):window,st=it.nodeName&&it.nodeName.toLowerCase(),st==="select"||st==="input"&&it.type==="file")var Dt=fA;else if(Hn(it))if(dA)Dt=jk;else{Dt=Fk;var ae=Bk}else st=it.nodeName,!st||st.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?J&&cf(J.elementType)&&(Dt=fA):Dt=Uk;if(Dt&&(Dt=Dt(c,J))){ha(gt,Dt,f,ht);break t}ae&&ae(c,it,J),c==="focusout"&&J&&it.type==="number"&&J.memoizedProps.value!=null&&Ka(it,"number",it.value)}switch(ae=J?gs(J):window,c){case"focusin":(Hn(ae)||ae.contentEditable==="true")&&(su=ae,Oy=J,vf=null);break;case"focusout":vf=Oy=su=null;break;case"mousedown":My=!0;break;case"contextmenu":case"mouseup":case"dragend":My=!1,wA(gt,f,ht);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":wA(gt,f,ht)}var Bt;if(ws)t:{switch(c){case"compositionstart":var Wt="onCompositionStart";break t;case"compositionend":Wt="onCompositionEnd";break t;case"compositionupdate":Wt="onCompositionUpdate";break t}Wt=void 0}else de?at(c,f)&&(Wt="onCompositionEnd"):c==="keydown"&&f.keyCode===229&&(Wt="onCompositionStart");Wt&&(R&&f.locale!=="ko"&&(de||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&de&&(Bt=uf()):(ys=ht,$a="value"in ys?ys.value:ys.textContent,de=!0)),ae=d0(J,Wt),0<ae.length&&(Wt=new df(Wt,c,null,f,ht),gt.push({event:Wt,listeners:ae}),Bt?Wt.data=Bt:(Bt=At(f),Bt!==null&&(Wt.data=Bt)))),(Bt=A?zn(c,f):ge(c,f))&&(Wt=d0(J,"onBeforeInput"),0<Wt.length&&(ae=new df("onBeforeInput","beforeinput",null,f,ht),gt.push({event:ae,listeners:Wt}),ae.data=Bt)),T9(gt,c,J,f,ht)}WS(gt,u)})}function qf(c,u,f){return{instance:c,listener:u,currentTarget:f}}function d0(c,u){for(var f=u+"Capture",p=[];c!==null;){var _=c,x=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||x===null||(_=yc(c,f),_!=null&&p.unshift(qf(c,_,x)),_=yc(c,u),_!=null&&p.push(qf(c,_,x))),c.tag===3)return p;c=c.return}return[]}function Ru(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function YS(c,u,f,p,_){for(var x=u._reactName,D=[];f!==null&&f!==p;){var L=f,W=L.alternate,J=L.stateNode;if(L=L.tag,W!==null&&W===p)break;L!==5&&L!==26&&L!==27||J===null||(W=J,_?(J=yc(f,x),J!=null&&D.unshift(qf(f,J,W))):_||(J=yc(f,x),J!=null&&D.push(qf(f,J,W)))),f=f.return}D.length!==0&&c.push({event:u,listeners:D})}var R9=/\r\n?/g,D9=/\u0000|\uFFFD/g;function XS(c){return(typeof c=="string"?c:""+c).replace(R9,`
`).replace(D9,"")}function KS(c,u){return u=XS(u),XS(c)===u}function g0(){}function ze(c,u,f,p,_,x){switch(f){case"children":typeof p=="string"?u==="body"||u==="textarea"&&p===""||wi(c,p):(typeof p=="number"||typeof p=="bigint")&&u!=="body"&&wi(c,""+p);break;case"className":ps(c,"class",p);break;case"tabIndex":ps(c,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":ps(c,f,p);break;case"style":of(c,p,x);break;case"data":if(u!=="object"){ps(c,"data",p);break}case"src":case"href":if(p===""&&(u!=="a"||f!=="href")){c.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=$l(""+p),c.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){c.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(u!=="input"&&ze(c,u,"name",_.name,_,null),ze(c,u,"formEncType",_.formEncType,_,null),ze(c,u,"formMethod",_.formMethod,_,null),ze(c,u,"formTarget",_.formTarget,_,null)):(ze(c,u,"encType",_.encType,_,null),ze(c,u,"method",_.method,_,null),ze(c,u,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=$l(""+p),c.setAttribute(f,p);break;case"onClick":p!=null&&(c.onclick=g0);break;case"onScroll":p!=null&&le("scroll",c);break;case"onScrollEnd":p!=null&&le("scrollend",c);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"multiple":c.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":c.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){c.removeAttribute("xlink:href");break}f=$l(""+p),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""+p):c.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""):c.removeAttribute(f);break;case"capture":case"download":p===!0?c.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,p):c.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?c.setAttribute(f,p):c.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?c.removeAttribute(f):c.setAttribute(f,p);break;case"popover":le("beforetoggle",c),le("toggle",c),Xa(c,"popover",p);break;case"xlinkActuate":fr(c,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":fr(c,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":fr(c,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":fr(c,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":fr(c,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":fr(c,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":fr(c,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":fr(c,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":fr(c,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Xa(c,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ay.get(f)||f,Xa(c,f,p))}}function e_(c,u,f,p,_,x){switch(f){case"style":of(c,p,x);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"children":typeof p=="string"?wi(c,p):(typeof p=="number"||typeof p=="bigint")&&wi(c,""+p);break;case"onScroll":p!=null&&le("scroll",c);break;case"onScrollEnd":p!=null&&le("scrollend",c);break;case"onClick":p!=null&&(c.onclick=g0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wl.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),u=f.slice(2,_?f.length-7:void 0),x=c[Nn]||null,x=x!=null?x[f]:null,typeof x=="function"&&c.removeEventListener(u,x,_),typeof p=="function")){typeof x!="function"&&x!==null&&(f in c?c[f]=null:c.hasAttribute(f)&&c.removeAttribute(f)),c.addEventListener(u,p,_);break t}f in c?c[f]=p:p===!0?c.setAttribute(f,""):Xa(c,f,p)}}}function mr(c,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",c),le("load",c);var p=!1,_=!1,x;for(x in f)if(f.hasOwnProperty(x)){var D=f[x];if(D!=null)switch(x){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ze(c,u,x,D,f,null)}}_&&ze(c,u,"srcSet",f.srcSet,f,null),p&&ze(c,u,"src",f.src,f,null);return;case"input":le("invalid",c);var L=x=D=_=null,W=null,J=null;for(p in f)if(f.hasOwnProperty(p)){var ht=f[p];if(ht!=null)switch(p){case"name":_=ht;break;case"type":D=ht;break;case"checked":W=ht;break;case"defaultChecked":J=ht;break;case"value":x=ht;break;case"defaultValue":L=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,u));break;default:ze(c,u,p,ht,f,null)}}gc(c,x,L,W,J,D,_,!1),Kl(c);return;case"select":le("invalid",c),p=D=x=null;for(_ in f)if(f.hasOwnProperty(_)&&(L=f[_],L!=null))switch(_){case"value":x=L;break;case"defaultValue":D=L;break;case"multiple":p=L;default:ze(c,u,_,L,f,null)}u=x,f=D,c.multiple=!!p,u!=null?sa(c,!!p,u,!1):f!=null&&sa(c,!!p,f,!0);return;case"textarea":le("invalid",c),x=_=p=null;for(D in f)if(f.hasOwnProperty(D)&&(L=f[D],L!=null))switch(D){case"value":p=L;break;case"defaultValue":_=L;break;case"children":x=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:ze(c,u,D,L,f,null)}pc(c,p,_,x),Kl(c);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(p=f[W],p!=null))switch(W){case"selected":c.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:ze(c,u,W,p,f,null)}return;case"dialog":le("beforetoggle",c),le("toggle",c),le("cancel",c),le("close",c);break;case"iframe":case"object":le("load",c);break;case"video":case"audio":for(p=0;p<Wf.length;p++)le(Wf[p],c);break;case"image":le("error",c),le("load",c);break;case"details":le("toggle",c);break;case"embed":case"source":case"link":le("error",c),le("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in f)if(f.hasOwnProperty(J)&&(p=f[J],p!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ze(c,u,J,p,f,null)}return;default:if(cf(u)){for(ht in f)f.hasOwnProperty(ht)&&(p=f[ht],p!==void 0&&e_(c,u,ht,p,f,void 0));return}}for(L in f)f.hasOwnProperty(L)&&(p=f[L],p!=null&&ze(c,u,L,p,f,null))}function O9(c,u,f,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,x=null,D=null,L=null,W=null,J=null,ht=null;for(st in f){var gt=f[st];if(f.hasOwnProperty(st)&&gt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":W=gt;default:p.hasOwnProperty(st)||ze(c,u,st,null,p,gt)}}for(var it in p){var st=p[it];if(gt=f[it],p.hasOwnProperty(it)&&(st!=null||gt!=null))switch(it){case"type":x=st;break;case"name":_=st;break;case"checked":J=st;break;case"defaultChecked":ht=st;break;case"value":D=st;break;case"defaultValue":L=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,u));break;default:st!==gt&&ze(c,u,it,st,p,gt)}}ii(c,D,L,W,J,ht,x,_);return;case"select":st=D=L=it=null;for(x in f)if(W=f[x],f.hasOwnProperty(x)&&W!=null)switch(x){case"value":break;case"multiple":st=W;default:p.hasOwnProperty(x)||ze(c,u,x,null,p,W)}for(_ in p)if(x=p[_],W=f[_],p.hasOwnProperty(_)&&(x!=null||W!=null))switch(_){case"value":it=x;break;case"defaultValue":L=x;break;case"multiple":D=x;default:x!==W&&ze(c,u,_,x,p,W)}u=L,f=D,p=st,it!=null?sa(c,!!f,it,!1):!!p!=!!f&&(u!=null?sa(c,!!f,u,!0):sa(c,!!f,f?[]:"",!1));return;case"textarea":st=it=null;for(L in f)if(_=f[L],f.hasOwnProperty(L)&&_!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:ze(c,u,L,null,p,_)}for(D in p)if(_=p[D],x=f[D],p.hasOwnProperty(D)&&(_!=null||x!=null))switch(D){case"value":it=_;break;case"defaultValue":st=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==x&&ze(c,u,D,_,p,x)}Ue(c,it,st);return;case"option":for(var Yt in f)if(it=f[Yt],f.hasOwnProperty(Yt)&&it!=null&&!p.hasOwnProperty(Yt))switch(Yt){case"selected":c.selected=!1;break;default:ze(c,u,Yt,null,p,it)}for(W in p)if(it=p[W],st=f[W],p.hasOwnProperty(W)&&it!==st&&(it!=null||st!=null))switch(W){case"selected":c.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:ze(c,u,W,it,p,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in f)it=f[Gt],f.hasOwnProperty(Gt)&&it!=null&&!p.hasOwnProperty(Gt)&&ze(c,u,Gt,null,p,it);for(J in p)if(it=p[J],st=f[J],p.hasOwnProperty(J)&&it!==st&&(it!=null||st!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,u));break;default:ze(c,u,J,it,p,st)}return;default:if(cf(u)){for(var He in f)it=f[He],f.hasOwnProperty(He)&&it!==void 0&&!p.hasOwnProperty(He)&&e_(c,u,He,void 0,p,it);for(ht in p)it=p[ht],st=f[ht],!p.hasOwnProperty(ht)||it===st||it===void 0&&st===void 0||e_(c,u,ht,it,p,st);return}}for(var X in f)it=f[X],f.hasOwnProperty(X)&&it!=null&&!p.hasOwnProperty(X)&&ze(c,u,X,null,p,it);for(gt in p)it=p[gt],st=f[gt],!p.hasOwnProperty(gt)||it===st||it==null&&st==null||ze(c,u,gt,it,p,st)}var n_=null,r_=null;function p0(c){return c.nodeType===9?c:c.ownerDocument}function $S(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function QS(c,u){if(c===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&u==="foreignObject"?0:c}function i_(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var s_=null;function M9(){var c=window.event;return c&&c.type==="popstate"?c===s_?!1:(s_=c,!0):(s_=null,!1)}var ZS=typeof setTimeout=="function"?setTimeout:void 0,N9=typeof clearTimeout=="function"?clearTimeout:void 0,JS=typeof Promise=="function"?Promise:void 0,P9=typeof queueMicrotask=="function"?queueMicrotask:typeof JS<"u"?function(c){return JS.resolve(null).then(c).catch(k9)}:ZS;function k9(c){setTimeout(function(){throw c})}function fo(c){return c==="head"}function tC(c,u){var f=u,p=0,_=0;do{var x=f.nextSibling;if(c.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(0<p&&8>p){f=p;var D=c.ownerDocument;if(f&1&&Yf(D.documentElement),f&2&&Yf(D.body),f&4)for(f=D.head,Yf(f),D=f.firstChild;D;){var L=D.nextSibling,W=D.nodeName;D[uc]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=L}}if(_===0){c.removeChild(x),ed(u);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:p=f.charCodeAt(0)-48;else p=0;f=x}while(f);ed(u)}function a_(c){var u=c.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":a_(f),Ya(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}c.removeChild(f)}}function L9(c,u,f,p){for(;c.nodeType===1;){var _=f;if(c.nodeName.toLowerCase()!==u.toLowerCase()){if(!p&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(p){if(!c[uc])switch(u){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(x=c.getAttribute("rel"),x==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(x!==_.rel||c.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||c.getAttribute("title")!==(_.title==null?null:_.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(x=c.getAttribute("src"),(x!==(_.src==null?null:_.src)||c.getAttribute("type")!==(_.type==null?null:_.type)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&x&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(u==="input"&&c.type==="hidden"){var x=_.name==null?null:""+_.name;if(_.type==="hidden"&&c.getAttribute("name")===x)return c}else return c;if(c=Ki(c.nextSibling),c===null)break}return null}function V9(c,u,f){if(u==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=Ki(c.nextSibling),c===null))return null;return c}function o_(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function B9(c,u){var f=c.ownerDocument;if(c.data!=="$?"||f.readyState==="complete")u();else{var p=function(){u(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),c._reactRetry=p}}function Ki(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return c}var c_=null;function eC(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var f=c.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return c;u--}else f==="/$"&&u++}c=c.previousSibling}return null}function nC(c,u,f){switch(u=p0(f),c){case"html":if(c=u.documentElement,!c)throw Error(r(452));return c;case"head":if(c=u.head,!c)throw Error(r(453));return c;case"body":if(c=u.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Yf(c){for(var u=c.attributes;u.length;)c.removeAttributeNode(u[0]);Ya(c)}var Oi=new Map,rC=new Set;function m0(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Aa=ct.d;ct.d={f:F9,r:U9,D:j9,C:z9,L:H9,m:G9,X:q9,S:W9,M:Y9};function F9(){var c=Aa.f(),u=o0();return c||u}function U9(c){var u=ds(c);u!==null&&u.tag===5&&u.type==="form"?ET(u):Aa.r(c)}var Du=typeof document>"u"?null:document;function iC(c,u,f){var p=Du;if(p&&typeof u=="string"&&u){var _=Pn(u);_='link[rel="'+c+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),rC.has(_)||(rC.add(_),c={rel:c,crossOrigin:f,href:u},p.querySelector(_)===null&&(u=p.createElement("link"),mr(u,"link",c),An(u),p.head.appendChild(u)))}}function j9(c){Aa.D(c),iC("dns-prefetch",c,null)}function z9(c,u){Aa.C(c,u),iC("preconnect",c,u)}function H9(c,u,f){Aa.L(c,u,f);var p=Du;if(p&&c&&u){var _='link[rel="preload"][as="'+Pn(u)+'"]';u==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+Pn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+Pn(f.imageSizes)+'"]')):_+='[href="'+Pn(c)+'"]';var x=_;switch(u){case"style":x=Ou(c);break;case"script":x=Mu(c)}Oi.has(x)||(c=d({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:c,as:u},f),Oi.set(x,c),p.querySelector(_)!==null||u==="style"&&p.querySelector(Xf(x))||u==="script"&&p.querySelector(Kf(x))||(u=p.createElement("link"),mr(u,"link",c),An(u),p.head.appendChild(u)))}}function G9(c,u){Aa.m(c,u);var f=Du;if(f&&c){var p=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+Pn(p)+'"][href="'+Pn(c)+'"]',x=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Mu(c)}if(!Oi.has(x)&&(c=d({rel:"modulepreload",href:c},u),Oi.set(x,c),f.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Kf(x)))return}p=f.createElement("link"),mr(p,"link",c),An(p),f.head.appendChild(p)}}}function W9(c,u,f){Aa.S(c,u,f);var p=Du;if(p&&c){var _=Pr(p).hoistableStyles,x=Ou(c);u=u||"default";var D=_.get(x);if(!D){var L={loading:0,preload:null};if(D=p.querySelector(Xf(x)))L.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":u},f),(f=Oi.get(x))&&l_(c,f);var W=D=p.createElement("link");An(W),mr(W,"link",c),W._p=new Promise(function(J,ht){W.onload=J,W.onerror=ht}),W.addEventListener("load",function(){L.loading|=1}),W.addEventListener("error",function(){L.loading|=2}),L.loading|=4,y0(D,u,p)}D={type:"stylesheet",instance:D,count:1,state:L},_.set(x,D)}}}function q9(c,u){Aa.X(c,u);var f=Du;if(f&&c){var p=Pr(f).hoistableScripts,_=Mu(c),x=p.get(_);x||(x=f.querySelector(Kf(_)),x||(c=d({src:c,async:!0},u),(u=Oi.get(_))&&u_(c,u),x=f.createElement("script"),An(x),mr(x,"link",c),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(_,x))}}function Y9(c,u){Aa.M(c,u);var f=Du;if(f&&c){var p=Pr(f).hoistableScripts,_=Mu(c),x=p.get(_);x||(x=f.querySelector(Kf(_)),x||(c=d({src:c,async:!0,type:"module"},u),(u=Oi.get(_))&&u_(c,u),x=f.createElement("script"),An(x),mr(x,"link",c),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(_,x))}}function sC(c,u,f,p){var _=(_=wt.current)?m0(_):null;if(!_)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=Ou(f.href),f=Pr(_).hoistableStyles,p=f.get(u),p||(p={type:"style",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){c=Ou(f.href);var x=Pr(_).hoistableStyles,D=x.get(c);if(D||(_=_.ownerDocument||_,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(c,D),(x=_.querySelector(Xf(c)))&&!x._p&&(D.instance=x,D.state.loading=5),Oi.has(c)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Oi.set(c,f),x||X9(_,c,f,D.state))),u&&p===null)throw Error(r(528,""));return D}if(u&&p!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Mu(f),f=Pr(_).hoistableScripts,p=f.get(u),p||(p={type:"script",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Ou(c){return'href="'+Pn(c)+'"'}function Xf(c){return'link[rel="stylesheet"]['+c+"]"}function aC(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function X9(c,u,f,p){c.querySelector('link[rel="preload"][as="style"]['+u+"]")?p.loading=1:(u=c.createElement("link"),p.preload=u,u.addEventListener("load",function(){return p.loading|=1}),u.addEventListener("error",function(){return p.loading|=2}),mr(u,"link",f),An(u),c.head.appendChild(u))}function Mu(c){return'[src="'+Pn(c)+'"]'}function Kf(c){return"script[async]"+c}function oC(c,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var p=c.querySelector('style[data-href~="'+Pn(f.href)+'"]');if(p)return u.instance=p,An(p),p;var _=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(c.ownerDocument||c).createElement("style"),An(p),mr(p,"style",_),y0(p,f.precedence,c),u.instance=p;case"stylesheet":_=Ou(f.href);var x=c.querySelector(Xf(_));if(x)return u.state.loading|=4,u.instance=x,An(x),x;p=aC(f),(_=Oi.get(_))&&l_(p,_),x=(c.ownerDocument||c).createElement("link"),An(x);var D=x;return D._p=new Promise(function(L,W){D.onload=L,D.onerror=W}),mr(x,"link",p),u.state.loading|=4,y0(x,f.precedence,c),u.instance=x;case"script":return x=Mu(f.src),(_=c.querySelector(Kf(x)))?(u.instance=_,An(_),_):(p=f,(_=Oi.get(x))&&(p=d({},f),u_(p,_)),c=c.ownerDocument||c,_=c.createElement("script"),An(_),mr(_,"link",p),c.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(p=u.instance,u.state.loading|=4,y0(p,f.precedence,c));return u.instance}function y0(c,u,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,x=_,D=0;D<p.length;D++){var L=p[D];if(L.dataset.precedence===u)x=L;else if(x!==_)break}x?x.parentNode.insertBefore(c,x.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(c,u.firstChild))}function l_(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.title==null&&(c.title=u.title)}function u_(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.integrity==null&&(c.integrity=u.integrity)}var v0=null;function cC(c,u,f){if(v0===null){var p=new Map,_=v0=new Map;_.set(f,p)}else _=v0,p=_.get(f),p||(p=new Map,_.set(f,p));if(p.has(c))return p;for(p.set(c,null),f=f.getElementsByTagName(c),_=0;_<f.length;_++){var x=f[_];if(!(x[uc]||x[jn]||c==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var D=x.getAttribute(u)||"";D=c+D;var L=p.get(D);L?L.push(x):p.set(D,[x])}}return p}function lC(c,u,f){c=c.ownerDocument||c,c.head.insertBefore(f,u==="title"?c.querySelector("head > title"):null)}function K9(c,u,f){if(f===1||u.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return c=u.disabled,typeof u.precedence=="string"&&c==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function uC(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var $f=null;function $9(){}function Q9(c,u,f){if($f===null)throw Error(r(475));var p=$f;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Ou(f.href),x=c.querySelector(Xf(_));if(x){c=x._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(p.count++,p=_0.bind(p),c.then(p,p)),u.state.loading|=4,u.instance=x,An(x);return}x=c.ownerDocument||c,f=aC(f),(_=Oi.get(_))&&l_(f,_),x=x.createElement("link"),An(x);var D=x;D._p=new Promise(function(L,W){D.onload=L,D.onerror=W}),mr(x,"link",f),u.instance=x}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(u,c),(c=u.state.preload)&&(u.state.loading&3)===0&&(p.count++,u=_0.bind(p),c.addEventListener("load",u),c.addEventListener("error",u))}}function Z9(){if($f===null)throw Error(r(475));var c=$f;return c.stylesheets&&c.count===0&&h_(c,c.stylesheets),0<c.count?function(u){var f=setTimeout(function(){if(c.stylesheets&&h_(c,c.stylesheets),c.unsuspend){var p=c.unsuspend;c.unsuspend=null,p()}},6e4);return c.unsuspend=u,function(){c.unsuspend=null,clearTimeout(f)}}:null}function _0(){if(this.count--,this.count===0){if(this.stylesheets)h_(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var x0=null;function h_(c,u){c.stylesheets=null,c.unsuspend!==null&&(c.count++,x0=new Map,u.forEach(J9,c),x0=null,_0.call(c))}function J9(c,u){if(!(u.state.loading&4)){var f=x0.get(c);if(f)var p=f.get(null);else{f=new Map,x0.set(c,f);for(var _=c.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<_.length;x++){var D=_[x];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),p=D)}p&&f.set(null,p)}_=u.instance,D=_.getAttribute("data-precedence"),x=f.get(D)||p,x===p&&f.set(null,_),f.set(D,_),this.count++,p=_0.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),x?x.parentNode.insertBefore(_,x.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(_,c.firstChild)),u.state.loading|=4}}var Qf={$$typeof:I,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function tL(c,u,f,p,_,x,D,L){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.hiddenUpdates=ta(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=x,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function hC(c,u,f,p,_,x,D,L,W,J,ht,gt){return c=new tL(c,u,f,D,L,W,J,gt),u=1,x===!0&&(u|=24),x=ai(3,null,null,u),c.current=x,x.stateNode=c,u=qy(),u.refCount++,c.pooledCache=u,u.refCount++,x.memoizedState={element:p,isDehydrated:f,cache:u},$y(x),c}function fC(c){return c?(c=lu,c):lu}function dC(c,u,f,p,_,x){_=fC(_),p.context===null?p.context=_:p.pendingContext=_,p=Ja(u),p.payload={element:f},x=x===void 0?null:x,x!==null&&(p.callback=x),f=to(c,p,u),f!==null&&(hi(f,c,u),Cf(f,c,u))}function gC(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var f=c.retryLane;c.retryLane=f!==0&&f<u?f:u}}function f_(c,u){gC(c,u),(c=c.alternate)&&gC(c,u)}function pC(c){if(c.tag===13){var u=cu(c,67108864);u!==null&&hi(u,c,67108864),f_(c,67108864)}}var w0=!0;function eL(c,u,f,p){var _=K.T;K.T=null;var x=ct.p;try{ct.p=2,d_(c,u,f,p)}finally{ct.p=x,K.T=_}}function nL(c,u,f,p){var _=K.T;K.T=null;var x=ct.p;try{ct.p=8,d_(c,u,f,p)}finally{ct.p=x,K.T=_}}function d_(c,u,f,p){if(w0){var _=g_(p);if(_===null)t_(c,u,p,b0,f),yC(c,p);else if(iL(_,c,u,f,p))p.stopPropagation();else if(yC(c,p),u&4&&-1<rL.indexOf(c)){for(;_!==null;){var x=ds(_);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var D=Gi(x.pendingLanes);if(D!==0){var L=x;for(L.pendingLanes|=2,L.entangledLanes|=2;D;){var W=1<<31-$e(D);L.entanglements[1]|=W,D&=~W}Cs(x),(Oe&6)===0&&(s0=Nt()+500,Gf(0))}}break;case 13:L=cu(x,2),L!==null&&hi(L,x,2),o0(),f_(x,2)}if(x=g_(p),x===null&&t_(c,u,p,b0,f),x===_)break;_=x}_!==null&&p.stopPropagation()}else t_(c,u,p,null,f)}}function g_(c){return c=bi(c),p_(c)}var b0=null;function p_(c){if(b0=null,c=na(c),c!==null){var u=s(c);if(u===null)c=null;else{var f=u.tag;if(f===13){if(c=a(u),c!==null)return c;c=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null)}}return b0=c,null}function mC(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pt()){case Pt:return 2;case Jt:return 8;case Et:case Vt:return 32;case De:return 268435456;default:return 32}default:return 32}}var m_=!1,go=null,po=null,mo=null,Zf=new Map,Jf=new Map,yo=[],rL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yC(c,u){switch(c){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":Zf.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jf.delete(u.pointerId)}}function td(c,u,f,p,_,x){return c===null||c.nativeEvent!==x?(c={blockedOn:u,domEventName:f,eventSystemFlags:p,nativeEvent:x,targetContainers:[_]},u!==null&&(u=ds(u),u!==null&&pC(u)),c):(c.eventSystemFlags|=p,u=c.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),c)}function iL(c,u,f,p,_){switch(u){case"focusin":return go=td(go,c,u,f,p,_),!0;case"dragenter":return po=td(po,c,u,f,p,_),!0;case"mouseover":return mo=td(mo,c,u,f,p,_),!0;case"pointerover":var x=_.pointerId;return Zf.set(x,td(Zf.get(x)||null,c,u,f,p,_)),!0;case"gotpointercapture":return x=_.pointerId,Jf.set(x,td(Jf.get(x)||null,c,u,f,p,_)),!0}return!1}function vC(c){var u=na(c.target);if(u!==null){var f=s(u);if(f!==null){if(u=f.tag,u===13){if(u=a(f),u!==null){c.blockedOn=u,op(c.priority,function(){if(f.tag===13){var p=ui();p=Ga(p);var _=cu(f,p);_!==null&&hi(_,f,p),f_(f,p)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){c.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}c.blockedOn=null}function E0(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var f=g_(c.nativeEvent);if(f===null){f=c.nativeEvent;var p=new f.constructor(f.type,f);aa=p,f.target.dispatchEvent(p),aa=null}else return u=ds(f),u!==null&&pC(u),c.blockedOn=f,!1;u.shift()}return!0}function _C(c,u,f){E0(c)&&f.delete(u)}function sL(){m_=!1,go!==null&&E0(go)&&(go=null),po!==null&&E0(po)&&(po=null),mo!==null&&E0(mo)&&(mo=null),Zf.forEach(_C),Jf.forEach(_C)}function A0(c,u){c.blockedOn===u&&(c.blockedOn=null,m_||(m_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,sL)))}var T0=null;function xC(c){T0!==c&&(T0=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){T0===c&&(T0=null);for(var u=0;u<c.length;u+=3){var f=c[u],p=c[u+1],_=c[u+2];if(typeof p!="function"){if(p_(p||f)===null)continue;break}var x=ds(f);x!==null&&(c.splice(u,3),u-=3,pv(x,{pending:!0,data:_,method:f.method,action:p},p,_))}}))}function ed(c){function u(W){return A0(W,c)}go!==null&&A0(go,c),po!==null&&A0(po,c),mo!==null&&A0(mo,c),Zf.forEach(u),Jf.forEach(u);for(var f=0;f<yo.length;f++){var p=yo[f];p.blockedOn===c&&(p.blockedOn=null)}for(;0<yo.length&&(f=yo[0],f.blockedOn===null);)vC(f),f.blockedOn===null&&yo.shift();if(f=(c.ownerDocument||c).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var _=f[p],x=f[p+1],D=_[Nn]||null;if(typeof x=="function")D||xC(f);else if(D){var L=null;if(x&&x.hasAttribute("formAction")){if(_=x,D=x[Nn]||null)L=D.formAction;else if(p_(_)!==null)continue}else L=D.action;typeof L=="function"?f[p+1]=L:(f.splice(p,3),p-=3),xC(f)}}}function y_(c){this._internalRoot=c}S0.prototype.render=y_.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,p=ui();dC(f,p,c,u,null,null)},S0.prototype.unmount=y_.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;dC(c.current,2,null,c,null,null),o0(),u[xi]=null}};function S0(c){this._internalRoot=c}S0.prototype.unstable_scheduleHydration=function(c){if(c){var u=Wa();c={blockedOn:null,target:c,priority:u};for(var f=0;f<yo.length&&u!==0&&u<yo[f].priority;f++);yo.splice(f,0,c),f===0&&vC(c)}};var wC=t.version;if(wC!=="19.1.0")throw Error(r(527,wC,"19.1.0"));ct.findDOMNode=function(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(u),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var aL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var C0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C0.isDisabled&&C0.supportsFiber)try{fe=C0.inject(aL),Kt=C0}catch{}}return rd.createRoot=function(c,u){if(!i(c))throw Error(r(299));var f=!1,p="",_=VT,x=BT,D=FT,L=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(L=u.unstable_transitionCallbacks)),u=hC(c,1,!1,null,null,f,p,_,x,D,L,null),c[xi]=u.current,Jv(c),new y_(u)},rd.hydrateRoot=function(c,u,f){if(!i(c))throw Error(r(299));var p=!1,_="",x=VT,D=BT,L=FT,W=null,J=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(L=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(W=f.unstable_transitionCallbacks),f.formState!==void 0&&(J=f.formState)),u=hC(c,1,!0,u,f??null,p,_,x,D,L,W,J),u.context=fC(null),f=u.current,p=ui(),p=Ga(p),_=Ja(p),_.callback=null,to(f,_,p),f=p,u.current.lanes=f,ea(u,f),Cs(u),c[xi]=u.current,Jv(c),new S0(u)},rd.version="19.1.0",rd}var OC;function yL(){if(OC)return __.exports;OC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),__.exports=mL(),__.exports}var vL=yL(),rt=Pw();const hn=Nw(rt);function _L({onAddClick:n,onLogout:t,onTabChange:e,currentTab:r}){return O.jsxs("nav",{className:"navbar",children:[O.jsx("button",{onClick:()=>e("dashboard"),title:"Dashboard",className:r==="dashboard"?"text-warning":"text-info",children:O.jsx("i",{className:"bi bi-house-fill"})}),O.jsx("button",{onClick:()=>e("history"),title:"History",children:O.jsx("i",{className:`bi bi-clock-history ${r==="history"?"text-warning":"text-info"}`})}),O.jsx("button",{onClick:n,title:"Add Meal",children:O.jsx("i",{className:`bi bi-plus-circle-fill ${r==="addmead"?"text-warning":"text-info"}`})}),O.jsx("button",{title:"Suggestions",onClick:()=>e("suggestions"),children:O.jsx("i",{className:`bi bi-lightbulb-fill	 ${r==="suggestions"?"text-warning":"text-info"}`})}),O.jsx("button",{onClick:()=>e("profile"),title:"Profile",children:O.jsx("i",{className:`bi bi-person-circle ${r==="profile"?"text-warning":"text-info"}`})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fg(n){return n+.5|0}const Po=(n,t,e)=>Math.max(Math.min(n,e),t);function bd(n){return Po(Fg(n*2.55),0,255)}function Fo(n){return Po(Fg(n*255),0,255)}function Ia(n){return Po(Fg(n/2.55)/100,0,1)}function MC(n){return Po(Fg(n*100),0,100)}const Mi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qx=[..."0123456789ABCDEF"],xL=n=>Qx[n&15],wL=n=>Qx[(n&240)>>4]+Qx[n&15],I0=n=>(n&240)>>4===(n&15),bL=n=>I0(n.r)&&I0(n.g)&&I0(n.b)&&I0(n.a);function EL(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Mi[n[1]]*17,g:255&Mi[n[2]]*17,b:255&Mi[n[3]]*17,a:t===5?Mi[n[4]]*17:255}:(t===7||t===9)&&(e={r:Mi[n[1]]<<4|Mi[n[2]],g:Mi[n[3]]<<4|Mi[n[4]],b:Mi[n[5]]<<4|Mi[n[6]],a:t===9?Mi[n[7]]<<4|Mi[n[8]]:255})),e}const AL=(n,t)=>n<255?t(n):"";function TL(n){var t=bL(n)?xL:wL;return n?"#"+t(n.r)+t(n.g)+t(n.b)+AL(n.a,t):void 0}const SL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function D4(n,t,e){const r=t*Math.min(e,1-e),i=(s,a=(s+n/30)%12)=>e-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function CL(n,t,e){const r=(i,s=(i+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function IL(n,t,e){const r=D4(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function RL(n,t,e,r,i){return n===i?(t-e)/r+(t<e?6:0):t===i?(e-n)/r+2:(n-t)/r+4}function kw(n){const e=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(e,r,i),a=Math.min(e,r,i),o=(s+a)/2;let l,h,d;return s!==a&&(d=s-a,h=o>.5?d/(2-s-a):d/(s+a),l=RL(e,r,i,d,s),l=l*60+.5),[l|0,h||0,o]}function Lw(n,t,e,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,r)).map(Fo)}function Vw(n,t,e){return Lw(D4,n,t,e)}function DL(n,t,e){return Lw(IL,n,t,e)}function OL(n,t,e){return Lw(CL,n,t,e)}function O4(n){return(n%360+360)%360}function ML(n){const t=SL.exec(n);let e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?bd(+t[5]):Fo(+t[5]));const i=O4(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=DL(i,s,a):t[1]==="hsv"?r=OL(i,s,a):r=Vw(i,s,a),{r:r[0],g:r[1],b:r[2],a:e}}function NL(n,t){var e=kw(n);e[0]=O4(e[0]+t),e=Vw(e),n.r=e[0],n.g=e[1],n.b=e[2]}function PL(n){if(!n)return;const t=kw(n),e=t[0],r=MC(t[1]),i=MC(t[2]);return n.a<255?`hsla(${e}, ${r}%, ${i}%, ${Ia(n.a)})`:`hsl(${e}, ${r}%, ${i}%)`}const NC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},PC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kL(){const n={},t=Object.keys(PC),e=Object.keys(NC);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<e.length;i++)s=e[i],o=o.replace(s,NC[s]);s=parseInt(PC[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let R0;function LL(n){R0||(R0=kL(),R0.transparent=[0,0,0,0]);const t=R0[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const VL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BL(n){const t=VL.exec(n);let e=255,r,i,s;if(t){if(t[7]!==r){const a=+t[7];e=t[8]?bd(a):Po(a*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?bd(r):Po(r,0,255)),i=255&(t[4]?bd(i):Po(i,0,255)),s=255&(t[6]?bd(s):Po(s,0,255)),{r,g:i,b:s,a:e}}}function FL(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ia(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const A_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Nu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function UL(n,t,e){const r=Nu(Ia(n.r)),i=Nu(Ia(n.g)),s=Nu(Ia(n.b));return{r:Fo(A_(r+e*(Nu(Ia(t.r))-r))),g:Fo(A_(i+e*(Nu(Ia(t.g))-i))),b:Fo(A_(s+e*(Nu(Ia(t.b))-s))),a:n.a+e*(t.a-n.a)}}function D0(n,t,e){if(n){let r=kw(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=Vw(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function M4(n,t){return n&&Object.assign(t||{},n)}function kC(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Fo(n[3]))):(t=M4(n,{r:0,g:0,b:0,a:1}),t.a=Fo(t.a)),t}function jL(n){return n.charAt(0)==="r"?BL(n):ML(n)}class cg{constructor(t){if(t instanceof cg)return t;const e=typeof t;let r;e==="object"?r=kC(t):e==="string"&&(r=EL(t)||LL(t)||jL(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=M4(this._rgb);return t&&(t.a=Ia(t.a)),t}set rgb(t){this._rgb=kC(t)}rgbString(){return this._valid?FL(this._rgb):void 0}hexString(){return this._valid?TL(this._rgb):void 0}hslString(){return this._valid?PL(this._rgb):void 0}mix(t,e){if(t){const r=this.rgb,i=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,l=r.a-i.a,h=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=UL(this._rgb,t._rgb,e)),this}clone(){return new cg(this.rgb)}alpha(t){return this._rgb.a=Fo(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Fg(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return D0(this._rgb,2,t),this}darken(t){return D0(this._rgb,2,-t),this}saturate(t){return D0(this._rgb,1,t),this}desaturate(t){return D0(this._rgb,1,-t),this}rotate(t){return NL(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ta(){}const zL=(()=>{let n=0;return()=>n++})();function Re(n){return n==null}function lr(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function _e(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function zi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Is(n,t){return zi(n)?n:t}function ie(n,t){return typeof n>"u"?t:n}const HL=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,N4=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function nn(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Le(n,t,e,r){let i,s,a;if(lr(n))for(s=n.length,i=0;i<s;i++)t.call(e,n[i],i);else if(_e(n))for(a=Object.keys(n),s=a.length,i=0;i<s;i++)t.call(e,n[a[i]],a[i])}function Bm(n,t){let e,r,i,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,r=n.length;e<r;++e)if(i=n[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Fm(n){if(lr(n))return n.map(Fm);if(_e(n)){const t=Object.create(null),e=Object.keys(n),r=e.length;let i=0;for(;i<r;++i)t[e[i]]=Fm(n[e[i]]);return t}return n}function P4(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function GL(n,t,e,r){if(!P4(n))return;const i=t[n],s=e[n];_e(i)&&_e(s)?lg(i,s,r):t[n]=Fm(s)}function lg(n,t,e){const r=lr(t)?t:[t],i=r.length;if(!_e(n))return n;e=e||{};const s=e.merger||GL;let a;for(let o=0;o<i;++o){if(a=r[o],!_e(a))continue;const l=Object.keys(a);for(let h=0,d=l.length;h<d;++h)s(l[h],n,a,e)}return n}function Ud(n,t){return lg(n,t,{merger:WL})}function WL(n,t,e){if(!P4(n))return;const r=t[n],i=e[n];_e(r)&&_e(i)?Ud(r,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Fm(i))}const LC={"":n=>n,x:n=>n.x,y:n=>n.y};function qL(n){const t=n.split("."),e=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function YL(n){const t=qL(n);return e=>{for(const r of t){if(r==="")break;e=e&&e[r]}return e}}function xl(n,t){return(LC[t]||(LC[t]=YL(t)))(n)}function Bw(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ug=n=>typeof n<"u",Xo=n=>typeof n=="function",VC=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function XL(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Xe=Math.PI,_n=2*Xe,KL=_n+Xe,Um=Number.POSITIVE_INFINITY,$L=Xe/180,Qn=Xe/2,Fc=Xe/4,BC=Xe*2/3,k4=Math.log10,Fs=Math.sign;function jd(n,t,e){return Math.abs(n-t)<e}function FC(n){const t=Math.round(n);n=jd(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(k4(n))),r=n/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function QL(n){const t=[],e=Math.sqrt(n);let r;for(r=1;r<e;r++)n%r===0&&(t.push(r),t.push(n/r));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function ZL(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function hg(n){return!ZL(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function JL(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function t7(n,t,e){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Ra(n){return n*(Xe/180)}function e7(n){return n*(180/Xe)}function UC(n){if(!zi(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function L4(n,t){const e=t.x-n.x,r=t.y-n.y,i=Math.sqrt(e*e+r*r);let s=Math.atan2(r,e);return s<-.5*Xe&&(s+=_n),{angle:s,distance:i}}function Zx(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function n7(n,t){return(n-t+KL)%_n-Xe}function Ji(n){return(n%_n+_n)%_n}function fg(n,t,e,r){const i=Ji(n),s=Ji(t),a=Ji(e),o=Ji(s-i),l=Ji(a-i),h=Ji(i-s),d=Ji(i-a);return i===s||i===a||r&&s===a||o>l&&h<d}function Rr(n,t,e){return Math.max(t,Math.min(e,n))}function r7(n){return Rr(n,-32768,32767)}function ko(n,t,e,r=1e-6){return n>=Math.min(t,e)-r&&n<=Math.max(t,e)+r}function Fw(n,t,e){e=e||(a=>n[a]<t);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,e(s)?i=s:r=s;return{lo:i,hi:r}}const sl=(n,t,e,r)=>Fw(n,e,r?i=>{const s=n[i][t];return s<e||s===e&&n[i+1][t]===e}:i=>n[i][t]<e),i7=(n,t,e)=>Fw(n,e,r=>n[r][t]>=e);function s7(n,t,e){let r=0,i=n.length;for(;r<i&&n[r]<t;)r++;for(;i>r&&n[i-1]>e;)i--;return r>0||i<n.length?n.slice(r,i):n}const V4=["push","pop","shift","splice","unshift"];function a7(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),V4.forEach(e=>{const r="_onData"+Bw(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...s)}),a}})})}function jC(n,t){const e=n._chartjs;if(!e)return;const r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(V4.forEach(s=>{delete n[s]}),delete n._chartjs)}function B4(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const F4=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function U4(n,t){let e=[],r=!1;return function(...i){e=i,r||(r=!0,F4.call(window,()=>{r=!1,n.apply(t,e)}))}}function o7(n,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(n,t,r)):n.apply(this,r),t}}const j4=n=>n==="start"?"left":n==="end"?"right":"center",fi=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,c7=(n,t,e,r)=>n===(r?"left":"right")?e:n==="center"?(t+e)/2:t;function l7(n,t,e){const r=t.length;let i=0,s=r;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=a.axis,{min:g,max:m,minDefined:v,maxDefined:w}=a.getUserBounds();if(v){if(i=Math.min(sl(l,d,g).lo,e?r:sl(t,d,a.getPixelForValue(g)).lo),h){const b=l.slice(0,i+1).reverse().findIndex(E=>!Re(E[o.axis]));i-=Math.max(0,b)}i=Rr(i,0,r-1)}if(w){let b=Math.max(sl(l,a.axis,m,!0).hi+1,e?0:sl(t,d,a.getPixelForValue(m),!0).hi+1);if(h){const E=l.slice(b-1).findIndex(S=>!Re(S[o.axis]));b+=Math.max(0,E)}s=Rr(b,i,r)-i}else s=r-i}return{start:i,count:s}}function u7(n){const{xScale:t,yScale:e,_scaleRanges:r}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),s}const O0=n=>n===0||n===1,zC=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*_n/e)),HC=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*_n/e)+1,zd={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Qn)+1,easeOutSine:n=>Math.sin(n*Qn),easeInOutSine:n=>-.5*(Math.cos(Xe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>O0(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>O0(n)?n:zC(n,.075,.3),easeOutElastic:n=>O0(n)?n:HC(n,.075,.3),easeInOutElastic(n){return O0(n)?n:n<.5?.5*zC(n*2,.1125,.45):.5+.5*HC(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-zd.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?zd.easeInBounce(n*2)*.5:zd.easeOutBounce(n*2-1)*.5+.5};function Uw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function GC(n){return Uw(n)?n:new cg(n)}function T_(n){return Uw(n)?n:new cg(n).saturate(.5).darken(.1).hexString()}const h7=["x","y","borderWidth","radius","tension"],f7=["color","borderColor","backgroundColor"];function d7(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:f7},numbers:{type:"number",properties:h7}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function g7(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const WC=new Map;function p7(n,t){t=t||{};const e=n+JSON.stringify(t);let r=WC.get(e);return r||(r=new Intl.NumberFormat(n,t),WC.set(e,r)),r}function jw(n,t,e){return p7(t,e).format(n)}const m7={values(n){return lr(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),s=y7(n,e)}const a=k4(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),jw(n,r,l)}};function y7(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var z4={formatters:m7};function v7(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:z4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const wl=Object.create(null),Jx=Object.create(null);function Hd(n,t){if(!t)return n;const e=t.split(".");for(let r=0,i=e.length;r<i;++r){const s=e[r];n=n[s]||(n[s]=Object.create(null))}return n}function S_(n,t,e){return typeof t=="string"?lg(Hd(n,t),e):lg(Hd(n,""),t)}class _7{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>T_(i.backgroundColor),this.hoverBorderColor=(r,i)=>T_(i.borderColor),this.hoverColor=(r,i)=>T_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return S_(this,t,e)}get(t){return Hd(this,t)}describe(t,e){return S_(Jx,t,e)}override(t,e){return S_(wl,t,e)}route(t,e,r,i){const s=Hd(this,t),a=Hd(this,r),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[o],h=a[i];return _e(l)?Object.assign({},h,l):ie(l,h)},set(l){this[o]=l}}})}apply(t){t.forEach(e=>e(this))}}var Rn=new _7({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[d7,g7,v7]);function x7(n){return!n||Re(n.size)||Re(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function qC(n,t,e,r,i){let s=t[i];return s||(s=t[i]=n.measureText(i).width,e.push(i)),s>r&&(r=s),r}function Uc(n,t,e){const r=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function YC(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function t2(n,t,e,r){H4(n,t,e,r,null)}function H4(n,t,e,r,i){let s,a,o,l,h,d,g,m;const v=t.pointStyle,w=t.rotation,b=t.radius;let E=(w||0)*$L;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,r),n.rotate(E),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),v){default:i?n.ellipse(e,r,i/2,b,0,0,_n):n.arc(e,r,b,0,_n),n.closePath();break;case"triangle":d=i?i/2:b,n.moveTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=BC,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=BC,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),n.closePath();break;case"rectRounded":h=b*.516,l=b-h,a=Math.cos(E+Fc)*l,g=Math.cos(E+Fc)*(i?i/2-h:l),o=Math.sin(E+Fc)*l,m=Math.sin(E+Fc)*(i?i/2-h:l),n.arc(e-g,r-o,h,E-Xe,E-Qn),n.arc(e+m,r-a,h,E-Qn,E),n.arc(e+g,r+o,h,E,E+Qn),n.arc(e-m,r+a,h,E+Qn,E+Xe),n.closePath();break;case"rect":if(!w){l=Math.SQRT1_2*b,d=i?i/2:l,n.rect(e-d,r-l,2*d,2*l);break}E+=Fc;case"rectRot":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+m,r-a),n.lineTo(e+g,r+o),n.lineTo(e-m,r+a),n.closePath();break;case"crossRot":E+=Fc;case"cross":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"star":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a),E+=Fc,g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"line":a=i?i/2:Math.cos(E)*b,o=Math.sin(E)*b,n.moveTo(e-a,r-o),n.lineTo(e+a,r+o);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(E)*(i?i/2:b),r+Math.sin(E)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function dg(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function zw(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Hw(n){n.restore()}function w7(n,t,e,r,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else i==="after"!=!!r?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function b7(n,t,e,r){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function E7(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Re(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function A7(n,t,e,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,h=e+s.actualBoundingBoxDescent,d=i.strikethrough?(l+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,d),n.lineTo(o,d),n.stroke()}}function T7(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function jm(n,t,e,r,i,s={}){const a=lr(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let l,h;for(n.save(),n.font=i.string,E7(n,s),l=0;l<a.length;++l)h=a[l],s.backdrop&&T7(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Re(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(h,e,r,s.maxWidth)),n.fillText(h,e,r,s.maxWidth),A7(n,e,r,h,s),r+=Number(i.lineHeight);n.restore()}function zm(n,t){const{x:e,y:r,w:i,h:s,radius:a}=t;n.arc(e+a.topLeft,r+a.topLeft,a.topLeft,1.5*Xe,Xe,!0),n.lineTo(e,r+s-a.bottomLeft),n.arc(e+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Xe,Qn,!0),n.lineTo(e+i-a.bottomRight,r+s),n.arc(e+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Qn,0,!0),n.lineTo(e+i,r+a.topRight),n.arc(e+i-a.topRight,r+a.topRight,a.topRight,0,-Qn,!0),n.lineTo(e+a.topLeft,r)}const S7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,C7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function I7(n,t){const e=(""+n).match(S7);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const R7=n=>+n||0;function Gw(n,t){const e={},r=_e(t),i=r?Object.keys(t):t,s=_e(n)?r?a=>ie(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of i)e[a]=R7(s(a));return e}function G4(n){return Gw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function sh(n){return Gw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function is(n){const t=G4(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Qr(n,t){n=n||{},t=t||Rn.font;let e=ie(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=ie(n.style,t.style);r&&!(""+r).match(C7)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ie(n.family,t.family),lineHeight:I7(ie(n.lineHeight,t.lineHeight),e),size:e,style:r,weight:ie(n.weight,t.weight),string:""};return i.string=x7(i),i}function M0(n,t,e,r){let i,s,a;for(i=0,s=n.length;i<s;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function D7(n,t,e){const{min:r,max:i}=n,s=N4(t,(i-r)/2),a=(o,l)=>e&&o===0?0:o+l;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function Nl(n,t){return Object.assign(Object.create(n),t)}function Ww(n,t=[""],e,r,i=()=>n[0]){const s=e||n;typeof r>"u"&&(r=X4("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:o=>Ww([o,...n],t,s,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return q4(o,l,()=>B7(l,t,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return KC(o).includes(l)},ownKeys(o){return KC(o)},set(o,l,h){const d=o._storage||(o._storage=i());return o[l]=d[l]=h,delete o._keys,!0}})}function fh(n,t,e,r){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:W4(n,r),setContext:s=>fh(n,s,e,r),override:s=>fh(n.override(s),t,e,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return q4(s,a,()=>M7(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function W4(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:r,isScriptable:Xo(e)?e:()=>e,isIndexable:Xo(r)?r:()=>r}}const O7=(n,t)=>n?n+Bw(t):t,qw=(n,t)=>_e(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function q4(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const r=e();return n[t]=r,r}function M7(n,t,e){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=n;let o=r[t];return Xo(o)&&a.isScriptable(t)&&(o=N7(t,o,n,e)),lr(o)&&o.length&&(o=P7(t,o,n,a.isIndexable)),qw(t,o)&&(o=fh(o,i,s&&s[t],a)),o}function N7(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=e;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=t(s,a||r);return o.delete(n),qw(n,l)&&(l=Yw(i._scopes,i,n,l)),l}function P7(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=e;if(typeof s.index<"u"&&r(n))return t[s.index%t.length];if(_e(t[0])){const l=t,h=i._scopes.filter(d=>d!==l);t=[];for(const d of l){const g=Yw(h,i,n,d);t.push(fh(g,s,a&&a[n],o))}}return t}function Y4(n,t,e){return Xo(n)?n(t,e):n}const k7=(n,t)=>n===!0?t:typeof n=="string"?xl(t,n):void 0;function L7(n,t,e,r,i){for(const s of t){const a=k7(e,s);if(a){n.add(a);const o=Y4(a._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==r)return o}else if(a===!1&&typeof r<"u"&&e!==r)return null}return!1}function Yw(n,t,e,r){const i=t._rootScopes,s=Y4(t._fallback,e,r),a=[...n,...i],o=new Set;o.add(r);let l=XC(o,a,e,s||e,r);return l===null||typeof s<"u"&&s!==e&&(l=XC(o,a,s,l,r),l===null)?!1:Ww(Array.from(o),[""],i,s,()=>V7(t,e,r))}function XC(n,t,e,r,i){for(;e;)e=L7(n,t,e,r,i);return e}function V7(n,t,e){const r=n._getTarget();t in r||(r[t]={});const i=r[t];return lr(i)&&_e(e)?e:i||{}}function B7(n,t,e,r){let i;for(const s of t)if(i=X4(O7(s,n),e),typeof i<"u")return qw(n,i)?Yw(e,r,n,i):i}function X4(n,t){for(const e of t){if(!e)continue;const r=e[n];if(typeof r<"u")return r}}function KC(n){let t=n._keys;return t||(t=n._keys=F7(n._scopes)),t}function F7(n){const t=new Set;for(const e of n)for(const r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const U7=Number.EPSILON||1e-14,dh=(n,t)=>t<n.length&&!n[t].skip&&n[t],K4=n=>n==="x"?"y":"x";function j7(n,t,e,r){const i=n.skip?t:n,s=t,a=e.skip?t:e,o=Zx(s,i),l=Zx(a,s);let h=o/(o+l),d=l/(o+l);h=isNaN(h)?0:h,d=isNaN(d)?0:d;const g=r*h,m=r*d;return{previous:{x:s.x-g*(a.x-i.x),y:s.y-g*(a.y-i.y)},next:{x:s.x+m*(a.x-i.x),y:s.y+m*(a.y-i.y)}}}function z7(n,t,e){const r=n.length;let i,s,a,o,l,h=dh(n,0);for(let d=0;d<r-1;++d)if(l=h,h=dh(n,d+1),!(!l||!h)){if(jd(t[d],0,U7)){e[d]=e[d+1]=0;continue}i=e[d]/t[d],s=e[d+1]/t[d],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),e[d]=i*a*t[d],e[d+1]=s*a*t[d])}}function H7(n,t,e="x"){const r=K4(e),i=n.length;let s,a,o,l=dh(n,0);for(let h=0;h<i;++h){if(a=o,o=l,l=dh(n,h+1),!o)continue;const d=o[e],g=o[r];a&&(s=(d-a[e])/3,o[`cp1${e}`]=d-s,o[`cp1${r}`]=g-s*t[h]),l&&(s=(l[e]-d)/3,o[`cp2${e}`]=d+s,o[`cp2${r}`]=g+s*t[h])}}function G7(n,t="x"){const e=K4(t),r=n.length,i=Array(r).fill(0),s=Array(r);let a,o,l,h=dh(n,0);for(a=0;a<r;++a)if(o=l,l=h,h=dh(n,a+1),!!l){if(h){const d=h[t]-l[t];i[a]=d!==0?(h[e]-l[e])/d:0}s[a]=o?h?Fs(i[a-1])!==Fs(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}z7(n,i,s),H7(n,s,t)}function N0(n,t,e){return Math.max(Math.min(n,e),t)}function W7(n,t){let e,r,i,s,a,o=dg(n[0],t);for(e=0,r=n.length;e<r;++e)a=s,s=o,o=e<r-1&&dg(n[e+1],t),s&&(i=n[e],a&&(i.cp1x=N0(i.cp1x,t.left,t.right),i.cp1y=N0(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=N0(i.cp2x,t.left,t.right),i.cp2y=N0(i.cp2y,t.top,t.bottom)))}function q7(n,t,e,r,i){let s,a,o,l;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")G7(n,i);else{let h=r?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],l=j7(h,o,n[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,h=o}t.capBezierPoints&&W7(n,e)}function Xw(){return typeof window<"u"&&typeof document<"u"}function Kw(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Hm(n,t,e){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=n,r}const O1=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Y7(n,t){return O1(n).getPropertyValue(t)}const X7=["top","right","bottom","left"];function hl(n,t,e){const r={};e=e?"-"+e:"";for(let i=0;i<4;i++){const s=X7[i];r[s]=parseFloat(n[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const K7=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function $7(n,t){const e=n.touches,r=e&&e.length?e[0]:n,{offsetX:i,offsetY:s}=r;let a=!1,o,l;if(K7(i,s,n.target))o=i,l=s;else{const h=t.getBoundingClientRect();o=r.clientX-h.left,l=r.clientY-h.top,a=!0}return{x:o,y:l,box:a}}function qc(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:r}=t,i=O1(e),s=i.boxSizing==="border-box",a=hl(i,"padding"),o=hl(i,"border","width"),{x:l,y:h,box:d}=$7(n,e),g=a.left+(d&&o.left),m=a.top+(d&&o.top);let{width:v,height:w}=t;return s&&(v-=a.width+o.width,w-=a.height+o.height),{x:Math.round((l-g)/v*e.width/r),y:Math.round((h-m)/w*e.height/r)}}function Q7(n,t,e){let r,i;if(t===void 0||e===void 0){const s=n&&Kw(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const a=s.getBoundingClientRect(),o=O1(s),l=hl(o,"border","width"),h=hl(o,"padding");t=a.width-h.width-l.width,e=a.height-h.height-l.height,r=Hm(o.maxWidth,s,"clientWidth"),i=Hm(o.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||Um,maxHeight:i||Um}}const P0=n=>Math.round(n*10)/10;function Z7(n,t,e,r){const i=O1(n),s=hl(i,"margin"),a=Hm(i.maxWidth,n,"clientWidth")||Um,o=Hm(i.maxHeight,n,"clientHeight")||Um,l=Q7(n,t,e);let{width:h,height:d}=l;if(i.boxSizing==="content-box"){const m=hl(i,"border","width"),v=hl(i,"padding");h-=v.width+m.width,d-=v.height+m.height}return h=Math.max(0,h-s.width),d=Math.max(0,r?h/r:d-s.height),h=P0(Math.min(h,a,l.maxWidth)),d=P0(Math.min(d,o,l.maxHeight)),h&&!d&&(d=P0(h/2)),(t!==void 0||e!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,h=P0(Math.floor(d*r))),{width:h,height:d}}function $C(n,t,e){const r=t||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(n.currentDevicePixelRatio=r,a.height=i,a.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const J7=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Xw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function QC(n,t){const e=Y7(n,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Yc(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function tV(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:r==="middle"?e<.5?n.y:t.y:r==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function eV(n,t,e,r){const i={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},a=Yc(n,i,e),o=Yc(i,s,e),l=Yc(s,t,e),h=Yc(a,o,e),d=Yc(o,l,e);return Yc(h,d,e)}const nV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},rV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function ah(n,t,e){return n?nV(t,e):rV()}function $4(n,t){let e,r;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=r)}function Q4(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Z4(n){return n==="angle"?{between:fg,compare:n7,normalize:Ji}:{between:ko,compare:(t,e)=>t-e,normalize:t=>t}}function ZC({start:n,end:t,count:e,loop:r,style:i}){return{start:n%e,end:t%e,loop:r&&(t-n+1)%e===0,style:i}}function iV(n,t,e){const{property:r,start:i,end:s}=e,{between:a,normalize:o}=Z4(r),l=t.length;let{start:h,end:d,loop:g}=n,m,v;if(g){for(h+=l,d+=l,m=0,v=l;m<v&&a(o(t[h%l][r]),i,s);++m)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:g,style:n.style}}function sV(n,t,e){if(!e)return[n];const{property:r,start:i,end:s}=e,a=t.length,{compare:o,between:l,normalize:h}=Z4(r),{start:d,end:g,loop:m,style:v}=iV(n,t,e),w=[];let b=!1,E=null,S,T,I;const k=()=>l(i,I,S)&&o(i,I)!==0,P=()=>o(s,S)===0||l(s,I,S),j=()=>b||k(),M=()=>!b||P();for(let C=d,N=d;C<=g;++C)T=t[C%a],!T.skip&&(S=h(T[r]),S!==I&&(b=l(S,i,s),E===null&&j()&&(E=o(S,i)===0?C:N),E!==null&&M()&&(w.push(ZC({start:E,end:C,loop:m,count:a,style:v})),E=null),N=C,I=S));return E!==null&&w.push(ZC({start:E,end:g,loop:m,count:a,style:v})),w}function aV(n,t){const e=[],r=n.segments;for(let i=0;i<r.length;i++){const s=sV(r[i],n.points,t);s.length&&e.push(...s)}return e}function oV(n,t,e,r){let i=0,s=t-1;if(e&&!r)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&n[s%t].skip;)s--;return s%=t,{start:i,end:s}}function cV(n,t,e,r){const i=n.length,s=[];let a=t,o=n[t],l;for(l=t+1;l<=e;++l){const h=n[l%i];h.skip||h.stop?o.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=a=h.stop?l:null):(a=l,o.skip&&(t=l)),o=h}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function lV(n,t){const e=n.points,r=n.options.spanGaps,i=e.length;if(!i)return[];const s=!!n._loop,{start:a,end:o}=oV(e,i,s,r);if(r===!0)return JC(n,[{start:a,end:o,loop:s}],e,t);const l=o<a?o+i:o,h=!!n._fullLoop&&a===0&&o===i-1;return JC(n,cV(e,a,l,h),e,t)}function JC(n,t,e,r){return!r||!r.setContext||!e?t:uV(n,t,e,r)}function uV(n,t,e,r){const i=n._chart.getContext(),s=tI(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=e.length,h=[];let d=s,g=t[0].start,m=g;function v(w,b,E,S){const T=o?-1:1;if(w!==b){for(w+=l;e[w%l].skip;)w-=T;for(;e[b%l].skip;)b+=T;w%l!==b%l&&(h.push({start:w%l,end:b%l,loop:E,style:S}),d=S,g=b%l)}}for(const w of t){g=o?g:w.start;let b=e[g%l],E;for(m=g+1;m<=w.end;m++){const S=e[m%l];E=tI(r.setContext(Nl(i,{type:"segment",p0:b,p1:S,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:a}))),hV(E,d)&&v(g,m-1,w.loop,d),b=S,d=E}g<m-1&&v(g,m-1,w.loop,d)}return h}function tI(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function hV(n,t){if(!t)return!1;const e=[],r=function(i,s){return Uw(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(t,r)}function k0(n,t,e){return n.options.clip?n[e]:t[e]}function fV(n,t){const{xScale:e,yScale:r}=n;return e&&r?{left:k0(e,t,"left"),right:k0(e,t,"right"),top:k0(r,t,"top"),bottom:k0(r,t,"bottom")}:t}function dV(n,t){const e=t._clip;if(e.disabled)return!1;const r=fV(t,n.chartArea);return{left:e.left===!1?0:r.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:r.right+(e.right===!0?0:e.right),top:e.top===!1?0:r.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:r.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class gV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){const s=e.listeners[i],a=e.duration;s.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(r-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=F4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Sa=new gV;const eI="transparent",pV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const r=GC(n||eI),i=r.valid&&GC(t||eI);return i&&i.valid?i.mix(r,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class mV{constructor(t,e,r,i){const s=e[r];i=M0([t.to,i,s,t.from]);const a=M0([t.from,s,i]);this._active=!0,this._fn=t.fn||pV[t.type||typeof a],this._easing=zd[t.easing]||zd.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=M0([t.to,e,i,t.from]),this._from=M0([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||e<r),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=s;return}l=e/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}}class J4{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!_e(t))return;const e=Object.keys(Rn.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!_e(s))return;const a={};for(const o of e)a[o]=s[o];(lr(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,a)})})}_animateOptions(t,e){const r=e.options,i=vV(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&yV(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const h=a[l];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(t,e));continue}const d=e[h];let g=s[h];const m=r.get(h);if(g)if(m&&g.active()){g.update(m,d,o);continue}else g.cancel();if(!m||!m.duration){t[h]=d;continue}s[h]=g=new mV(m,t,h,d),i.push(g)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const r=this._createAnimations(t,e);if(r.length)return Sa.add(this._chart,r),!0}}function yV(n,t){const e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function vV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function nI(n,t){const e=n&&n.options||{},r=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function _V(n,t,e){if(e===!1)return!1;const r=nI(n,e),i=nI(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function xV(n){let t,e,r,i;return _e(n)?(t=n.top,e=n.right,r=n.bottom,i=n.left):t=e=r=i=n,{top:t,right:e,bottom:r,left:i,disabled:n===!1}}function tM(n,t){const e=[],r=n._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)e.push(r[i].index);return e}function rI(n,t,e,r={}){const i=n.keys,s=r.mode==="single";let a,o,l,h;if(t===null)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===e){if(d=!0,r.all)continue;break}h=n.values[l],zi(h)&&(s||t===0||Fs(t)===Fs(h))&&(t+=h)}return!d&&!r.all?0:t}function wV(n,t){const{iScale:e,vScale:r}=t,i=e.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,h,d;for(l=0,h=a.length;l<h;++l)d=a[l],o[l]={[i]:d,[s]:n[d]};return o}function C_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function bV(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function EV(n){const{min:t,max:e,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function AV(n,t,e){const r=n[t]||(n[t]={});return r[e]||(r[e]={})}function iI(n,t,e,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function sI(n,t){const{chart:e,_cachedMeta:r}=n,i=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,h=a.axis,d=bV(s,a,r),g=t.length;let m;for(let v=0;v<g;++v){const w=t[v],{[l]:b,[h]:E}=w,S=w._stacks||(w._stacks={});m=S[h]=AV(i,d,b),m[o]=E,m._top=iI(m,a,!0,r.type),m._bottom=iI(m,a,!1,r.type);const T=m._visualValues||(m._visualValues={});T[o]=E}}function I_(n,t){const e=n.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function TV(n,t){return Nl(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function SV(n,t,e){return Nl(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function id(n,t){const e=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){t=t||n._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e],s[r]._visualValues!==void 0&&s[r]._visualValues[e]!==void 0&&delete s[r]._visualValues[e]}}}const R_=n=>n==="reset"||n==="none",aI=(n,t)=>t?n:Object.assign({},n),CV=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:tM(e,!0),values:null};class fl{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=C_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&id(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),i=(g,m,v,w)=>g==="x"?m:g==="r"?w:v,s=e.xAxisID=ie(r.xAxisID,I_(t,"x")),a=e.yAxisID=ie(r.yAxisID,I_(t,"y")),o=e.rAxisID=ie(r.rAxisID,I_(t,"r")),l=e.indexAxis,h=e.iAxisID=i(l,s,a,o),d=e.vAxisID=i(l,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&jC(this._data,this),t._stacked&&id(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(_e(e)){const i=this._cachedMeta;this._data=wV(e,i)}else if(r!==e){if(r){jC(r,this);const i=this._cachedMeta;id(i),i._parsed=[]}e&&Object.isExtensible(e)&&a7(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=C_(e.vScale,e),e.stack!==r.stack&&(i=!0,id(e),e.stack=r.stack),this._resyncElements(t),(i||s!==e._stacked)&&(sI(this,e._parsed),e._stacked=C_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,o=s.axis;let l=t===0&&e===i.length?!0:r._sorted,h=t>0&&r._parsed[t-1],d,g,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{lr(i[t])?m=this.parseArrayData(r,i,t,e):_e(i[t])?m=this.parseObjectData(r,i,t,e):m=this.parsePrimitiveData(r,i,t,e);const v=()=>g[o]===null||h&&g[o]<h[o];for(d=0;d<e;++d)r._parsed[d+t]=g=m[d],l&&(v()&&(l=!1),h=g);r._sorted=l}a&&sI(this,m)}parsePrimitiveData(t,e,r,i){const{iScale:s,vScale:a}=t,o=s.axis,l=a.axis,h=s.getLabels(),d=s===a,g=new Array(i);let m,v,w;for(m=0,v=i;m<v;++m)w=m+r,g[m]={[o]:d||s.parse(h[w],w),[l]:a.parse(e[w],w)};return g}parseArrayData(t,e,r,i){const{xScale:s,yScale:a}=t,o=new Array(i);let l,h,d,g;for(l=0,h=i;l<h;++l)d=l+r,g=e[d],o[l]={x:s.parse(g[0],d),y:a.parse(g[1],d)};return o}parseObjectData(t,e,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=new Array(i);let d,g,m,v;for(d=0,g=i;d<g;++d)m=d+r,v=e[m],h[d]={x:s.parse(xl(v,o),m),y:a.parse(xl(v,l),m)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const i=this.chart,s=this._cachedMeta,a=e[t.axis],o={keys:tM(i,!0),values:e._stacks[t.axis]._visualValues};return rI(o,a,s.index,{mode:r})}updateRangeFromParsed(t,e,r,i){const s=r[e.axis];let a=s===null?NaN:s;const o=i&&r._stacks[e.axis];i&&o&&(i.values=o,a=rI(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,o=this._getOtherScale(t),l=CV(e,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:g}=EV(o);let m,v;function w(){v=i[m];const b=v[o.axis];return!zi(v[t.axis])||d>b||g<b}for(m=0;m<a&&!(!w()&&(this.updateRangeFromParsed(h,t,v,l),s));++m);if(s){for(m=a-1;m>=0;--m)if(!w()){this.updateRangeFromParsed(h,t,v,l);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=e.length;i<s;++i)a=e[i][t.axis],zi(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=xV(ie(this.options.clip,_V(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,i=r.data||[],s=e.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,h=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,s,o,l),d=o;d<o+l;++d){const g=i[d];g.hidden||(g.active&&h?a.push(g):g.draw(t,s))}for(d=0;d<a.length;++d)a[d].draw(t,s)}getStyle(t,e){const r=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=SV(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=TV(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const i=e==="active",s=this._cachedDataOpts,a=t+"-"+e,o=s[a],l=this.enableOptionSharing&&ug(r);if(o)return aI(o,l);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),g=i?[`${t}Hover`,"hover",t,""]:[t,""],m=h.getOptionScopes(this.getDataset(),d),v=Object.keys(Rn.elements[t]),w=()=>this.getContext(r,i,e),b=h.resolveNamedOptions(m,v,w,g);return b.$shared&&(b.$shared=l,s[a]=Object.freeze(aI(b,l))),b}_resolveAnimations(t,e,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){const d=this.chart.config,g=d.datasetAnimationScopeKeys(this._type,e),m=d.getOptionScopes(this.getDataset(),g);l=d.createResolver(m,this.getContext(t,r,e))}const h=new J4(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||R_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const r=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,r),{sharedOptions:s,includeOptions:a}}updateElement(t,e,r,i){R_(i)?Object.assign(t,r):this._resolveAnimations(e,i).update(t,r)}updateSharedOptions(t,e,r){t&&!R_(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[o,l,h]of this._syncList)this[o](l,h);this._syncList=[];const i=r.length,s=e.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,r=!0){const i=this._cachedMeta,s=i.data,a=t+e;let o;const l=h=>{for(h.length+=e,o=h.length-1;o>=a;o--)h[o]=h[o-e]};for(l(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),r&&this.updateElements(s,t,e,"reset")}updateElements(t,e,r,i){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,e);r._stacked&&id(r,i)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,i]=t;this[e](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}lt(fl,"defaults",{}),lt(fl,"datasetElementType",null),lt(fl,"dataElementType",null);function IV(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=e.length;i<s;i++)r=r.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=B4(r.sort((i,s)=>i-s))}return n._cache.$bar}function RV(n){const t=n.iScale,e=IV(t,n.type);let r=t._length,i,s,a,o;const l=()=>{a===32767||a===-32768||(ug(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(i=0,s=e.length;i<s;++i)a=t.getPixelForValue(e[i]),l();for(o=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),l();return r}function DV(n,t,e,r){const i=e.barThickness;let s,a;return Re(i)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[n]-s/2}}function OV(n,t,e,r){const i=t.pixels,s=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;a===null&&(a=s-(o===null?t.end-t.start:o-s)),o===null&&(o=s+s-a);const h=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:e.barPercentage,start:h}}function MV(n,t,e,r){const i=e.parse(n[0],r),s=e.parse(n[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,h=o;Math.abs(a)>Math.abs(o)&&(l=o,h=a),t[e.axis]=h,t._custom={barStart:l,barEnd:h,start:i,end:s,min:a,max:o}}function eM(n,t,e,r){return lr(n)?MV(n,t,e,r):t[e.axis]=e.parse(n,r),t}function oI(n,t,e,r){const i=n.iScale,s=n.vScale,a=i.getLabels(),o=i===s,l=[];let h,d,g,m;for(h=e,d=e+r;h<d;++h)m=t[h],g={},g[i.axis]=o||i.parse(a[h],h),l.push(eM(m,g,s,h));return l}function D_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function NV(n,t,e){return n!==0?Fs(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function PV(n){let t,e,r,i,s;return n.horizontal?(t=n.base>n.x,e="left",r="right"):(t=n.base<n.y,e="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:r,reverse:t,top:i,bottom:s}}function kV(n,t,e,r){let i=t.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:h,bottom:d}=PV(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===r?i=h:(e._bottom||0)===r?i=d:(s[cI(d,a,o,l)]=!0,i=h)),s[cI(i,a,o,l)]=!0,n.borderSkipped=s}function cI(n,t,e,r){return r?(n=LV(n,t,e),n=lI(n,e,t)):n=lI(n,t,e),n}function LV(n,t,e){return n===t?e:n===e?t:n}function lI(n,t,e){return n==="start"?t:n==="end"?e:n}function VV(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class lm extends fl{parsePrimitiveData(t,e,r,i){return oI(t,e,r,i)}parseArrayData(t,e,r,i){return oI(t,e,r,i)}parseObjectData(t,e,r,i){const{iScale:s,vScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=s.axis==="x"?o:l,d=a.axis==="x"?o:l,g=[];let m,v,w,b;for(m=r,v=r+i;m<v;++m)b=e[m],w={},w[s.axis]=s.parse(xl(b,h),m),g.push(eM(xl(b,d),w,a,m));return g}updateRangeFromParsed(t,e,r,i){super.updateRangeFromParsed(t,e,r,i);const s=r._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:i}=e,s=this.getParsed(t),a=s._custom,o=D_(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),h=o.isHorizontal(),d=this._getRuler(),{sharedOptions:g,includeOptions:m}=this._getSharedOptions(e,i);for(let v=e;v<e+r;v++){const w=this.getParsed(v),b=s||Re(w[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),E=this._calculateBarIndexPixels(v,d),S=(w._stacks||{})[o.axis],T={horizontal:h,base:b.base,enableBorderRadius:!S||D_(w._custom)||a===S._top||a===S._bottom,x:h?b.head:E.center,y:h?E.center:b.head,height:h?E.size:Math.abs(b.size),width:h?Math.abs(b.size):E.size};m&&(T.options=g||this.resolveDataElementOptions(v,t[v].active?"active":i));const I=T.options||t[v].options;kV(T,I,S,a),VV(T,I,d.ratio),this.updateElement(t[v],v,T,i)}}_getStacks(t,e){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),l=o&&o[r.axis],h=d=>{const g=d._parsed.find(v=>v[r.axis]===l),m=g&&g[d.vScale.axis];if(Re(m)||isNaN(m))return!0};for(const d of i)if(!(e!==void 0&&h(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[ie(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,r){const i=this._getStacks(t,r),s=e!==void 0?i.indexOf(e):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,i=[];let s,a;for(s=0,a=e.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const o=t.barThickness;return{min:o||RV(e),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(t),h=l._custom,d=D_(h);let g=l[e.axis],m=0,v=r?this.applyStack(e,l,r):g,w,b;v!==g&&(m=v-g,v=g),d&&(g=h.barStart,v=h.barEnd-h.barStart,g!==0&&Fs(g)!==Fs(h.barEnd)&&(m=0),m+=g);const E=!Re(s)&&!d?s:m;let S=e.getPixelForValue(E);if(this.chart.getDataVisibility(t)?w=e.getPixelForValue(m+v):w=S,b=w-S,Math.abs(b)<a){b=NV(b,e,o)*a,g===o&&(S-=b/2);const T=e.getPixelForDecimal(0),I=e.getPixelForDecimal(1),k=Math.min(T,I),P=Math.max(T,I);S=Math.max(Math.min(S,P),k),w=S+b,r&&!d&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(w)-e.getValueForPixel(S))}if(S===e.getPixelForValue(o)){const T=Fs(b)*e.getLineWidthForValue(o)/2;S+=T,b-=T}return{size:b,base:S,head:w,center:w+b/2}}_calculateBarIndexPixels(t,e){const r=e.scale,i=this.options,s=i.skipNull,a=ie(i.maxBarThickness,1/0);let o,l;const h=this._getAxisCount();if(e.grouped){const d=s?this._getStackCount(t):e.stackCount,g=i.barThickness==="flex"?OV(t,e,i,d*h):DV(t,e,i,d*h),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(ie(m,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+v;o=g.start+g.chunk*w+g.chunk/2,l=Math.min(a,g.chunk*g.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,e.min*e.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[e.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}lt(lm,"id","bar"),lt(lm,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),lt(lm,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function BV(n,t,e){let r=1,i=1,s=0,a=0;if(t<_n){const o=n,l=o+t,h=Math.cos(o),d=Math.sin(o),g=Math.cos(l),m=Math.sin(l),v=(I,k,P)=>fg(I,o,l,!0)?1:Math.max(k,k*e,P,P*e),w=(I,k,P)=>fg(I,o,l,!0)?-1:Math.min(k,k*e,P,P*e),b=v(0,h,g),E=v(Qn,d,m),S=w(Xe,h,g),T=w(Xe+Qn,d,m);r=(b-S)/2,i=(E-T)/2,s=-(b+S)/2,a=-(E+T)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class Ed extends fl{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(_e(r[t])){const{key:l="value"}=this._parsing;s=h=>+xl(r[h],l)}let a,o;for(a=t,o=t+e;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return Ra(this.options.rotation-90)}_getCircumference(){return Ra(this.options.circumference)}_getRotationExtents(){let t=_n,e=-_n;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(HL(this.options.cutout,o),1),h=this._getRingWeight(this.index),{circumference:d,rotation:g}=this._getRotationExtents(),{ratioX:m,ratioY:v,offsetX:w,offsetY:b}=BV(g,d,l),E=(r.width-a)/m,S=(r.height-a)/v,T=Math.max(Math.min(E,S)/2,0),I=N4(this.options.radius,T),k=Math.max(I*l,0),P=(I-k)/this._getVisibleDatasetWeightTotal();this.offsetX=w*I,this.offsetY=b*I,i.total=this.calculateTotal(),this.outerRadius=I-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*h,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/_n)}updateElements(t,e,r,i){const s=i==="reset",a=this.chart,o=a.chartArea,h=a.options.animation,d=(o.left+o.right)/2,g=(o.top+o.bottom)/2,m=s&&h.animateScale,v=m?0:this.innerRadius,w=m?0:this.outerRadius,{sharedOptions:b,includeOptions:E}=this._getSharedOptions(e,i);let S=this._getRotation(),T;for(T=0;T<e;++T)S+=this._circumference(T,s);for(T=e;T<e+r;++T){const I=this._circumference(T,s),k=t[T],P={x:d+this.offsetX,y:g+this.offsetY,startAngle:S,endAngle:S+I,circumference:I,outerRadius:w,innerRadius:v};E&&(P.options=b||this.resolveDataElementOptions(T,k.active?"active":i)),S+=I,this.updateElement(k,T,P,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let r=0,i;for(i=0;i<e.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?_n*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=jw(e._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const r=this.chart;let i,s,a,o,l;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),t=a.data,o=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)l=o.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(ie(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}lt(Ed,"id","doughnut"),lt(Ed,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),lt(Ed,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),lt(Ed,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return e.labels.map((s,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}});class um extends fl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=e,a=this.chart._animationsDisabled;let{start:o,count:l}=l7(e,i,a);this._drawStart=o,this._drawCount=l,u7(e)&&(o=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:h},t),this.updateElements(i,o,l,t)}updateElements(t,e,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(e,i),m=a.axis,v=o.axis,{spanGaps:w,segment:b}=this.options,E=hg(w)?w:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||s||i==="none",T=e+r,I=t.length;let k=e>0&&this.getParsed(e-1);for(let P=0;P<I;++P){const j=t[P],M=S?j:{};if(P<e||P>=T){M.skip=!0;continue}const C=this.getParsed(P),N=Re(C[v]),B=M[m]=a.getPixelForValue(C[m],P),z=M[v]=s||N?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,C,l):C[v],P);M.skip=isNaN(B)||isNaN(z)||N,M.stop=P>0&&Math.abs(C[m]-k[m])>E,b&&(M.parsed=C,M.raw=h.data[P]),g&&(M.options=d||this.resolveDataElementOptions(P,j.active?"active":i)),S||this.updateElement(j,P,M,i),k=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}lt(um,"id","line"),lt(um,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),lt(um,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function jc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $w{constructor(t){lt(this,"options");this.options=t||{}}static override(t){Object.assign($w.prototype,t)}init(){}formats(){return jc()}parse(){return jc()}format(){return jc()}add(){return jc()}diff(){return jc()}startOf(){return jc()}endOf(){return jc()}}var nM={_date:$w};function FV(n,t,e,r){const{controller:i,data:s,_sorted:a}=n,o=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const h=o._reversePixels?i7:sl;if(r){if(i._sharedOptions){const d=s[0],g=typeof d.getRange=="function"&&d.getRange(t);if(g){const m=h(s,t,e-g),v=h(s,t,e+g);return{lo:m.lo,hi:v.hi}}}}else{const d=h(s,t,e);if(l){const{vScale:g}=i._cachedMeta,{_parsed:m}=n,v=m.slice(0,d.lo+1).reverse().findIndex(b=>!Re(b[g.axis]));d.lo-=Math.max(0,v);const w=m.slice(d.hi).findIndex(b=>!Re(b[g.axis]));d.hi+=Math.max(0,w)}return d}}return{lo:0,hi:s.length-1}}function M1(n,t,e,r,i){const s=n.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,l=s.length;o<l;++o){const{index:h,data:d}=s[o],{lo:g,hi:m}=FV(s[o],t,a,i);for(let v=g;v<=m;++v){const w=d[v];w.skip||r(w,h,v)}}}function UV(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function O_(n,t,e,r,i){const s=[];return!i&&!n.isPointInArea(t)||M1(n,e,t,function(o,l,h){!i&&!dg(o,n.chartArea,0)||o.inRange(t.x,t.y,r)&&s.push({element:o,datasetIndex:l,index:h})},!0),s}function jV(n,t,e,r){let i=[];function s(a,o,l){const{startAngle:h,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:g}=L4(a,{x:t.x,y:t.y});fg(g,h,d)&&i.push({element:a,datasetIndex:o,index:l})}return M1(n,e,t,s),i}function zV(n,t,e,r,i,s){let a=[];const o=UV(e);let l=Number.POSITIVE_INFINITY;function h(d,g,m){const v=d.inRange(t.x,t.y,i);if(r&&!v)return;const w=d.getCenterPoint(i);if(!(!!s||n.isPointInArea(w))&&!v)return;const E=o(t,w);E<l?(a=[{element:d,datasetIndex:g,index:m}],l=E):E===l&&a.push({element:d,datasetIndex:g,index:m})}return M1(n,e,t,h),a}function M_(n,t,e,r,i,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!r?jV(n,t,e,i):zV(n,t,e,r,i,s)}function uI(n,t,e,r,i){const s=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return M1(n,e,t,(l,h,d)=>{l[a]&&l[a](t[e],i)&&(s.push({element:l,datasetIndex:h,index:d}),o=o||l.inRange(t.x,t.y,i))}),r&&!o?[]:s}var HV={modes:{index(n,t,e,r){const i=qc(t,n),s=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?O_(n,i,s,r,a):M_(n,i,s,!1,r,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const d=o[0].index,g=h.data[d];g&&!g.skip&&l.push({element:g,datasetIndex:h.index,index:d})}),l):[]},dataset(n,t,e,r){const i=qc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?O_(n,i,s,r,a):M_(n,i,s,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,h=n.getDatasetMeta(l).data;o=[];for(let d=0;d<h.length;++d)o.push({element:h[d],datasetIndex:l,index:d})}return o},point(n,t,e,r){const i=qc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return O_(n,i,s,r,a)},nearest(n,t,e,r){const i=qc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return M_(n,i,s,e.intersect,r,a)},x(n,t,e,r){const i=qc(t,n);return uI(n,i,"x",e.intersect,r)},y(n,t,e,r){const i=qc(t,n);return uI(n,i,"y",e.intersect,r)}}};const rM=["left","top","right","bottom"];function sd(n,t){return n.filter(e=>e.pos===t)}function hI(n,t){return n.filter(e=>rM.indexOf(e.pos)===-1&&e.box.axis===t)}function ad(n,t){return n.sort((e,r)=>{const i=t?r:e,s=t?e:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function GV(n){const t=[];let e,r,i,s,a,o;for(e=0,r=(n||[]).length;e<r;++e)i=n[e],{position:s,options:{stack:a,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}function WV(n){const t={};for(const e of n){const{stack:r,pos:i,stackWeight:s}=e;if(!r||!rM.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function qV(n,t){const e=WV(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,h=e[o.stack],d=h&&o.stackWeight/h.weight;o.horizontal?(o.width=d?d*r:l&&t.availableWidth,o.height=i):(o.width=r,o.height=d?d*i:l&&t.availableHeight)}return e}function YV(n){const t=GV(n),e=ad(t.filter(h=>h.box.fullSize),!0),r=ad(sd(t,"left"),!0),i=ad(sd(t,"right")),s=ad(sd(t,"top"),!0),a=ad(sd(t,"bottom")),o=hI(t,"x"),l=hI(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:sd(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function fI(n,t,e,r){return Math.max(n[e],t[e])+Math.max(n[r],t[r])}function iM(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function XV(n,t,e,r){const{pos:i,box:s}=e,a=n.maxPadding;if(!_e(i)){e.size&&(n[i]-=e.size);const g=r[e.stack]||{size:0,count:1};g.size=Math.max(g.size,e.horizontal?s.height:s.width),e.size=g.size/g.count,n[i]+=e.size}s.getPadding&&iM(a,s.getPadding());const o=Math.max(0,t.outerWidth-fI(a,n,"left","right")),l=Math.max(0,t.outerHeight-fI(a,n,"top","bottom")),h=o!==n.w,d=l!==n.h;return n.w=o,n.h=l,e.horizontal?{same:h,other:d}:{same:d,other:h}}function KV(n){const t=n.maxPadding;function e(r){const i=Math.max(t[r]-n[r],0);return n[r]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function $V(n,t){const e=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return r(n?["left","right"]:["top","bottom"])}function Ad(n,t,e,r){const i=[];let s,a,o,l,h,d;for(s=0,a=n.length,h=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||t.w,o.height||t.h,$V(o.horizontal,t));const{same:g,other:m}=XV(t,e,o,r);h|=g&&i.length,d=d||m,l.fullSize||i.push(o)}return h&&Ad(i,t,e,r)||d}function L0(n,t,e,r,i){n.top=e,n.left=t,n.right=t+r,n.bottom=e+i,n.width=r,n.height=i}function dI(n,t,e,r){const i=e.padding;let{x:s,y:a}=t;for(const o of n){const l=o.box,h=r[o.stack]||{placed:0,weight:1},d=o.stackWeight/h.weight||1;if(o.horizontal){const g=t.w*d,m=h.size||l.height;ug(h.start)&&(a=h.start),l.fullSize?L0(l,i.left,a,e.outerWidth-i.right-i.left,m):L0(l,t.left+h.placed,a,g,m),h.start=a,h.placed+=g,a=l.bottom}else{const g=t.h*d,m=h.size||l.width;ug(h.start)&&(s=h.start),l.fullSize?L0(l,s,i.top,m,e.outerHeight-i.bottom-i.top):L0(l,s,t.top+h.placed,m,g),h.start=s,h.placed+=g,s=l.right}}t.x=s,t.y=a}var Lo={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,r){if(!n)return;const i=is(n.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(e-i.height,0),o=YV(n.boxes),l=o.vertical,h=o.horizontal;Le(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=l.reduce((b,E)=>E.box.options&&E.box.options.display===!1?b:b+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),m=Object.assign({},i);iM(m,is(r));const v=Object.assign({maxPadding:m,w:s,h:a,x:i.left,y:i.top},i),w=qV(l.concat(h),g);Ad(o.fullSize,v,g,w),Ad(l,v,g,w),Ad(h,v,g,w)&&Ad(l,v,g,w),KV(v),dI(o.leftAndTop,v,g,w),v.x+=v.w,v.y+=v.h,dI(o.rightAndBottom,v,g,w),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Le(o.chartArea,b=>{const E=b.box;Object.assign(E,n.chartArea),E.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class sM{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}}class QV extends sM{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hm="$chartjs",ZV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gI=n=>n===null||n==="";function JV(n,t){const e=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[hm]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",gI(i)){const s=QC(n,"width");s!==void 0&&(n.width=s)}if(gI(r))if(n.style.height==="")n.height=n.width/(t||2);else{const s=QC(n,"height");s!==void 0&&(n.height=s)}return n}const aM=J7?{passive:!0}:!1;function tB(n,t,e){n&&n.addEventListener(t,e,aM)}function eB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,aM)}function nB(n,t){const e=ZV[n.type]||n.type,{x:r,y:i}=qc(n,t);return{type:e,chart:t,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Gm(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function rB(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Gm(o.addedNodes,r),a=a&&!Gm(o.removedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function iB(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Gm(o.removedNodes,r),a=a&&!Gm(o.addedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const gg=new Map;let pI=0;function oM(){const n=window.devicePixelRatio;n!==pI&&(pI=n,gg.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function sB(n,t){gg.size||window.addEventListener("resize",oM),gg.set(n,t)}function aB(n){gg.delete(n),gg.size||window.removeEventListener("resize",oM)}function oB(n,t,e){const r=n.canvas,i=r&&Kw(r);if(!i)return;const s=U4((o,l)=>{const h=i.clientWidth;e(o,l),h<i.clientWidth&&e()},window),a=new ResizeObserver(o=>{const l=o[0],h=l.contentRect.width,d=l.contentRect.height;h===0&&d===0||s(h,d)});return a.observe(i),sB(n,s),a}function N_(n,t,e){e&&e.disconnect(),t==="resize"&&aB(n)}function cB(n,t,e){const r=n.canvas,i=U4(s=>{n.ctx!==null&&e(nB(s,n))},n);return tB(r,t,i),i}class lB extends sM{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(JV(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[hm])return!1;const r=e[hm].initial;["height","width"].forEach(s=>{const a=r[s];Re(a)?e.removeAttribute(s):e.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[hm],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),a={attach:rB,detach:iB,resize:oB}[e]||cB;i[e]=a(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:N_,detach:N_,resize:N_}[e]||eB)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return Z7(t,e,r,i)}isAttached(t){const e=t&&Kw(t);return!!(e&&e.isConnected)}}function uB(n){return!Xw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?QV:lB}var cm;let nc=(cm=class{constructor(){lt(this,"x");lt(this,"y");lt(this,"active",!1);lt(this,"options");lt(this,"$animations")}tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return hg(this.x)&&hg(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},lt(cm,"defaults",{}),lt(cm,"defaultRoutes"),cm);function hB(n,t){const e=n.options.ticks,r=fB(n),i=Math.min(e.maxTicksLimit||r,r),s=e.major.enabled?gB(t):[],a=s.length,o=s[0],l=s[a-1],h=[];if(a>i)return pB(t,h,s,a/i),h;const d=dB(s,t,i);if(a>0){let g,m;const v=a>1?Math.round((l-o)/(a-1)):null;for(V0(t,h,d,Re(v)?0:o-v,o),g=0,m=a-1;g<m;g++)V0(t,h,d,s[g],s[g+1]);return V0(t,h,d,l,Re(v)?t.length:l+v),h}return V0(t,h,d),h}function fB(n){const t=n.options.offset,e=n._tickSize(),r=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(r,i))}function dB(n,t,e){const r=mB(n),i=t.length/e;if(!r)return Math.max(i,1);const s=QL(r);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>i)return l}return Math.max(i,1)}function gB(n){const t=[];let e,r;for(e=0,r=n.length;e<r;e++)n[e].major&&t.push(e);return t}function pB(n,t,e,r){let i=0,s=e[0],a;for(r=Math.ceil(r),a=0;a<n.length;a++)a===s&&(t.push(n[a]),i++,s=e[i*r])}function V0(n,t,e,r,i){const s=ie(r,0),a=Math.min(ie(i,n.length),n.length);let o=0,l,h,d;for(e=Math.ceil(e),i&&(l=i-r,e=l/Math.floor(l/e)),d=s;d<0;)o++,d=Math.round(s+o*e);for(h=Math.max(s,0);h<a;h++)h===d&&(t.push(n[h]),o++,d=Math.round(s+o*e))}function mB(n){const t=n.length;let e,r;if(t<2)return!1;for(r=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==r)return!1;return r}const yB=n=>n==="left"?"right":n==="right"?"left":n,mI=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,yI=(n,t)=>Math.min(t||n,n);function vI(n,t){const e=[],r=n.length/t,i=n.length;let s=0;for(;s<i;s+=r)e.push(n[Math.floor(s)]);return e}function vB(n,t,e){const r=n.ticks.length,i=Math.min(t,r-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(i),h;if(!(e&&(r===1?h=Math.max(l-s,a-l):t===0?h=(n.getPixelForTick(1)-l)/2:h=(l-n.getPixelForTick(i-1))/2,l+=i<t?h:-h,l<s-o||l>a+o)))return l}function _B(n,t){Le(n,e=>{const r=e.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[r[s]];r.splice(0,i)}})}function od(n){return n.drawTicks?n.tickLength:0}function _I(n,t){if(!n.display)return 0;const e=Qr(n.font,t),r=is(n.padding);return(lr(n.text)?n.text.length:1)*e.lineHeight+r.height}function xB(n,t){return Nl(n,{scale:t,type:"scale"})}function wB(n,t,e){return Nl(n,{tick:e,index:t,type:"tick"})}function bB(n,t,e){let r=j4(n);return(e&&t!=="right"||!e&&t==="right")&&(r=yB(r)),r}function EB(n,t,e,r){const{top:i,left:s,bottom:a,right:o,chart:l}=n,{chartArea:h,scales:d}=l;let g=0,m,v,w;const b=a-i,E=o-s;if(n.isHorizontal()){if(v=fi(r,s,o),_e(e)){const S=Object.keys(e)[0],T=e[S];w=d[S].getPixelForValue(T)+b-t}else e==="center"?w=(h.bottom+h.top)/2+b-t:w=mI(n,e,t);m=o-s}else{if(_e(e)){const S=Object.keys(e)[0],T=e[S];v=d[S].getPixelForValue(T)-E+t}else e==="center"?v=(h.left+h.right)/2-E+t:v=mI(n,e,t);w=fi(r,a,i),g=e==="left"?-Qn:Qn}return{titleX:v,titleY:w,maxWidth:m,rotation:g}}class Bh extends nc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=Is(t,Number.POSITIVE_INFINITY),e=Is(e,Number.NEGATIVE_INFINITY),r=Is(r,Number.POSITIVE_INFINITY),i=Is(i,Number.NEGATIVE_INFINITY),{min:Is(t,r),max:Is(e,i),minDefined:zi(t),maxDefined:zi(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:e,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,h=o.length;l<h;++l)a=o[l].controller.getMinMax(this,t),i||(e=Math.min(e,a.min)),s||(r=Math.max(r,a.max));return e=s&&e>r?r:e,r=i&&e>r?e:r,{min:Is(e,Is(r,e)),max:Is(r,Is(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){nn(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=D7(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?vI(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=hB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){nn(this.options.afterUpdate,[this])}beforeSetDimensions(){nn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){nn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),nn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){nn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=nn(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){nn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){nn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=yI(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let a=i,o,l,h;if(!this._isVisible()||!e.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),g=d.widest.width,m=d.highest.height,v=Rr(this.chart.width-g,0,this.maxWidth);o=t.offset?this.maxWidth/r:v/(r-1),g+6>o&&(o=v/(r-(t.offset?.5:1)),l=this.maxHeight-od(t.grid)-e.padding-_I(t.title,this.chart.options.font),h=Math.sqrt(g*g+m*m),a=e7(Math.min(Math.asin(Rr((d.highest.height+6)/o,-1,1)),Math.asin(Rr(l/h,-1,1))-Math.asin(Rr(m/h,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){nn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){nn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=_I(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=od(s)+l):(t.height=this.maxHeight,t.width=od(s)+l),r.display&&this.ticks.length){const{first:h,last:d,widest:g,highest:m}=this._getLabelSizes(),v=r.padding*2,w=Ra(this.labelRotation),b=Math.cos(w),E=Math.sin(w);if(o){const S=r.mirror?0:E*g.width+b*m.height;t.height=Math.min(this.maxHeight,t.height+S+v)}else{const S=r.mirror?0:b*g.width+E*m.height;t.width=Math.min(this.maxWidth,t.width+S+v)}this._calculatePadding(h,d,E,b)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,h=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;l?h?(m=i*t.width,v=r*e.height):(m=r*t.height,v=i*e.width):s==="start"?v=e.width:s==="end"?m=t.width:s!=="inner"&&(m=t.width/2,v=e.width/2),this.paddingLeft=Math.max((m-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((v-g+a)*this.width/(this.width-g),0)}else{let d=e.height/2,g=t.height/2;s==="start"?(d=0,g=t.height):s==="end"&&(d=e.height,g=0),this.paddingTop=d+a,this.paddingBottom=g+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){nn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)Re(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=vI(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(e/yI(e,r));let h=0,d=0,g,m,v,w,b,E,S,T,I,k,P;for(g=0;g<e;g+=l){if(w=t[g].label,b=this._resolveTickFontOptions(g),i.font=E=b.string,S=s[E]=s[E]||{data:{},gc:[]},T=b.lineHeight,I=k=0,!Re(w)&&!lr(w))I=qC(i,S.data,S.gc,I,w),k=T;else if(lr(w))for(m=0,v=w.length;m<v;++m)P=w[m],!Re(P)&&!lr(P)&&(I=qC(i,S.data,S.gc,I,P),k+=T);a.push(I),o.push(k),h=Math.max(I,h),d=Math.max(k,d)}_B(s,e);const j=a.indexOf(h),M=o.indexOf(d),C=N=>({width:a[N]||0,height:o[N]||0});return{first:C(0),last:C(e-1),widest:C(j),highest:C(M),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return r7(this._alignToPixels?Uc(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=wB(this.getContext(),t,r))}return this.$context||(this.$context=xB(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ra(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,h=this.isHorizontal(),g=this.ticks.length+(l?1:0),m=od(s),v=[],w=o.setContext(this.getContext()),b=w.display?w.width:0,E=b/2,S=function(K){return Uc(r,K,b)};let T,I,k,P,j,M,C,N,B,z,G,F;if(a==="top")T=S(this.bottom),M=this.bottom-m,N=T-E,z=S(t.top)+E,F=t.bottom;else if(a==="bottom")T=S(this.top),z=t.top,F=S(t.bottom)-E,M=T+E,N=this.top+m;else if(a==="left")T=S(this.right),j=this.right-m,C=T-E,B=S(t.left)+E,G=t.right;else if(a==="right")T=S(this.left),B=t.left,G=S(t.right)-E,j=T+E,C=this.left+m;else if(e==="x"){if(a==="center")T=S((t.top+t.bottom)/2+.5);else if(_e(a)){const K=Object.keys(a)[0],ct=a[K];T=S(this.chart.scales[K].getPixelForValue(ct))}z=t.top,F=t.bottom,M=T+E,N=M+m}else if(e==="y"){if(a==="center")T=S((t.left+t.right)/2);else if(_e(a)){const K=Object.keys(a)[0],ct=a[K];T=S(this.chart.scales[K].getPixelForValue(ct))}j=T-E,C=j-m,B=t.left,G=t.right}const xt=ie(i.ticks.maxTicksLimit,g),bt=Math.max(1,Math.ceil(g/xt));for(I=0;I<g;I+=bt){const K=this.getContext(I),ct=s.setContext(K),vt=o.setContext(K),et=ct.lineWidth,V=ct.color,q=vt.dash||[],ot=vt.dashOffset,nt=ct.tickWidth,mt=ct.tickColor,_t=ct.tickBorderDash||[],wt=ct.tickBorderDashOffset;k=vB(this,I,l),k!==void 0&&(P=Uc(r,k,et),h?j=C=B=G=P:M=N=z=F=P,v.push({tx1:j,ty1:M,tx2:C,ty2:N,x1:B,y1:z,x2:G,y2:F,width:et,color:V,borderDash:q,borderDashOffset:ot,tickWidth:nt,tickColor:mt,tickBorderDash:_t,tickBorderDashOffset:wt}))}return this._ticksLength=g,this._borderValue=T,v}_computeLabelItems(t){const e=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:h,padding:d,mirror:g}=s,m=od(r.grid),v=m+d,w=g?-d:v,b=-Ra(this.labelRotation),E=[];let S,T,I,k,P,j,M,C,N,B,z,G,F="middle";if(i==="top")j=this.bottom-w,M=this._getXAxisLabelAlignment();else if(i==="bottom")j=this.top+w,M=this._getXAxisLabelAlignment();else if(i==="left"){const bt=this._getYAxisLabelAlignment(m);M=bt.textAlign,P=bt.x}else if(i==="right"){const bt=this._getYAxisLabelAlignment(m);M=bt.textAlign,P=bt.x}else if(e==="x"){if(i==="center")j=(t.top+t.bottom)/2+v;else if(_e(i)){const bt=Object.keys(i)[0],K=i[bt];j=this.chart.scales[bt].getPixelForValue(K)+v}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")P=(t.left+t.right)/2-v;else if(_e(i)){const bt=Object.keys(i)[0],K=i[bt];P=this.chart.scales[bt].getPixelForValue(K)}M=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const xt=this._getLabelSizes();for(S=0,T=o.length;S<T;++S){I=o[S],k=I.label;const bt=s.setContext(this.getContext(S));C=this.getPixelForTick(S)+s.labelOffset,N=this._resolveTickFontOptions(S),B=N.lineHeight,z=lr(k)?k.length:1;const K=z/2,ct=bt.color,vt=bt.textStrokeColor,et=bt.textStrokeWidth;let V=M;a?(P=C,M==="inner"&&(S===T-1?V=this.options.reverse?"left":"right":S===0?V=this.options.reverse?"right":"left":V="center"),i==="top"?h==="near"||b!==0?G=-z*B+B/2:h==="center"?G=-xt.highest.height/2-K*B+B:G=-xt.highest.height+B/2:h==="near"||b!==0?G=B/2:h==="center"?G=xt.highest.height/2-K*B:G=xt.highest.height-z*B,g&&(G*=-1),b!==0&&!bt.showLabelBackdrop&&(P+=B/2*Math.sin(b))):(j=C,G=(1-z)*B/2);let q;if(bt.showLabelBackdrop){const ot=is(bt.backdropPadding),nt=xt.heights[S],mt=xt.widths[S];let _t=G-ot.top,wt=0-ot.left;switch(F){case"middle":_t-=nt/2;break;case"bottom":_t-=nt;break}switch(M){case"center":wt-=mt/2;break;case"right":wt-=mt;break;case"inner":S===T-1?wt-=mt:S>0&&(wt-=mt/2);break}q={left:wt,top:_t,width:mt+ot.width,height:nt+ot.height,color:bt.backdropColor}}E.push({label:k,font:N,textOffset:G,options:{rotation:b,color:ct,strokeColor:vt,strokeWidth:et,textAlign:V,textBaseline:F,translation:[P,j],backdrop:q}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ra(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,l=a.widest.width;let h,d;return e==="left"?i?(d=this.right+s,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d+=l)):(d=this.right-o,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d=this.left)):e==="right"?i?(d=this.left+s,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d-=l)):(d=this.left+o,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:i,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(l,h,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(e.display)for(s=0,a=i.length;s<a;++s){const l=i[s];e.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,d,g,m;this.isHorizontal()?(h=Uc(t,this.left,a)-a/2,d=Uc(t,this.right,o)+o/2,g=m=l):(g=Uc(t,this.top,a)-a/2,m=Uc(t,this.bottom,o)+o/2,h=d=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(h,g),e.lineTo(d,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&zw(r,i);const s=this.getLabelItems(t);for(const a of s){const o=a.options,l=a.font,h=a.label,d=a.textOffset;jm(r,h,0,d,l,o)}i&&Hw(r)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;const s=Qr(r.font),a=is(r.padding),o=r.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||_e(e)?(l+=a.bottom,lr(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:h,titleY:d,maxWidth:g,rotation:m}=EB(this,l,e,o);jm(t,r.text,0,0,s,{color:r.color,maxWidth:g,rotation:m,textAlign:bB(o,e,i),textBaseline:"middle",translation:[h,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=ie(t.grid&&t.grid.z,-1),i=ie(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Bh.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];o[r]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Qr(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class B0{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;SB(e)&&(r=this.register(e));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,AB(t,a,r),this.override&&Rn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in Rn[i]&&(delete Rn[i][r],this.override&&delete wl[r])}}function AB(n,t,e){const r=lg(Object.create(null),[e?Rn.get(e):{},Rn.get(t),n.defaults]);Rn.set(t,r),n.defaultRoutes&&TB(t,n.defaultRoutes),n.descriptors&&Rn.describe(t,n.descriptors)}function TB(n,t){Object.keys(t).forEach(e=>{const r=e.split("."),i=r.pop(),s=[n].concat(r).join("."),a=t[e].split("."),o=a.pop(),l=a.join(".");Rn.route(s,i,l,o)})}function SB(n){return"id"in n&&"defaults"in n}class CB{constructor(){this.controllers=new B0(fl,"datasets",!0),this.elements=new B0(nc,"elements"),this.plugins=new B0(Object,"plugins"),this.scales=new B0(Bh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):Le(i,a=>{const o=r||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,r){const i=Bw(t);nn(r["before"+i],[],r),e[t](r),nn(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var Ds=new CB;class IB{constructor(){this._init=[]}notify(t,e,r,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,r,i){i=i||{};for(const s of t){const a=s.plugin,o=a[r],l=[e,i,s.options];if(nn(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Re(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,i=ie(r.options&&r.options.plugins,{}),s=RB(r);return i===!1&&!e?[]:OB(t,s,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}}function RB(n){const t={},e=[],r=Object.keys(Ds.plugins.items);for(let s=0;s<r.length;s++)e.push(Ds.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function DB(n,t){return!t&&n===!1?null:n===!0?{}:n}function OB(n,{plugins:t,localIds:e},r,i){const s=[],a=n.getContext();for(const o of t){const l=o.id,h=DB(r[l],i);h!==null&&s.push({plugin:o,options:MB(n.config,{plugin:o,local:e[l]},h,a)})}return s}function MB(n,{plugin:t,local:e},r,i){const s=n.pluginScopeKeys(t),a=n.getOptionScopes(r,s);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function e2(n,t){const e=Rn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function NB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function PB(n,t){return n===t?"_index_":"_value_"}function xI(n){if(n==="x"||n==="y"||n==="r")return n}function kB(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function n2(n,...t){if(xI(n))return n;for(const e of t){const r=e.axis||kB(e.position)||n.length>1&&xI(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function wI(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function LB(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(e.length)return wI(n,"x",e[0])||wI(n,"y",e[0])}return{}}function VB(n,t){const e=wl[n.type]||{scales:{}},r=t.scales||{},i=e2(n.type,t),s=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!_e(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=n2(a,o,LB(a,n),Rn.scales[o.type]),h=PB(l,i),d=e.scales||{};s[a]=Ud(Object.create(null),[{axis:l},o,d[l],d[h]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||e2(o,t),d=(wl[o]||{}).scales||{};Object.keys(d).forEach(g=>{const m=NB(g,l),v=a[m+"AxisID"]||m;s[v]=s[v]||Object.create(null),Ud(s[v],[{axis:m},r[v],d[g]])})}),Object.keys(s).forEach(a=>{const o=s[a];Ud(o,[Rn.scales[o.type],Rn.scale])}),s}function cM(n){const t=n.options||(n.options={});t.plugins=ie(t.plugins,{}),t.scales=VB(n,t)}function lM(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function BB(n){return n=n||{},n.data=lM(n.data),cM(n),n}const bI=new Map,uM=new Set;function F0(n,t){let e=bI.get(n);return e||(e=t(),bI.set(n,e),uM.add(e)),e}const cd=(n,t,e)=>{const r=xl(t,e);r!==void 0&&n.add(r)};class FB{constructor(t){this._config=BB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=lM(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),cM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return F0(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return F0(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return F0(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,r=this.type;return F0(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),o=a.get(e);if(o)return o;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(g=>cd(l,t,g))),d.forEach(g=>cd(l,i,g)),d.forEach(g=>cd(l,wl[s]||{},g)),d.forEach(g=>cd(l,Rn,g)),d.forEach(g=>cd(l,Jx,g))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),uM.has(e)&&a.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,wl[e]||{},Rn.datasets[e]||{},{type:e},Rn,Jx]}resolveNamedOptions(t,e,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=EI(this._resolverCache,t,i);let l=a;if(jB(a,e)){s.$shared=!1,r=Xo(r)?r():r;const h=this.createResolver(t,r,o);l=fh(a,r,h)}for(const h of e)s[h]=l[h];return s}createResolver(t,e,r=[""],i){const{resolver:s}=EI(this._resolverCache,t,r);return _e(e)?fh(s,e,void 0,i):s}}function EI(n,t,e){let r=n.get(t);r||(r=new Map,n.set(t,r));const i=e.join();let s=r.get(i);return s||(s={resolver:Ww(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,s)),s}const UB=n=>_e(n)&&Object.getOwnPropertyNames(n).some(t=>Xo(n[t]));function jB(n,t){const{isScriptable:e,isIndexable:r}=W4(n);for(const i of t){const s=e(i),a=r(i),o=(a||s)&&n[i];if(s&&(Xo(o)||UB(o))||a&&lr(o))return!0}return!1}var zB="4.5.0";const HB=["top","bottom","left","right","chartArea"];function AI(n,t){return n==="top"||n==="bottom"||HB.indexOf(n)===-1&&t==="x"}function TI(n,t){return function(e,r){return e[n]===r[n]?e[t]-r[t]:e[n]-r[n]}}function SI(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),nn(e&&e.onComplete,[n],t)}function GB(n){const t=n.chart,e=t.options.animation;nn(e&&e.onProgress,[n],t)}function hM(n){return Xw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const fm={},CI=n=>{const t=hM(n);return Object.values(fm).filter(e=>e.canvas===t).pop()};function WB(n,t,e){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=t){const a=n[i];delete n[i],(e>0||s>t)&&(n[s+e]=a)}}}function qB(n,t,e,r){return!e||n.type==="mouseout"?null:r?t:n}var So;let Pl=(So=class{static register(...t){Ds.add(...t),II()}static unregister(...t){Ds.remove(...t),II()}constructor(t,e){const r=this.config=new FB(e),i=hM(t),s=CI(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||uB(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,h=l&&l.height,d=l&&l.width;if(this.id=zL(),this.ctx=o,this.canvas=l,this.width=d,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new IB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=o7(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],fm[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Sa.listen(this,"complete",SI),Sa.listen(this,"progress",GB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:i,_aspectRatio:s}=this;return Re(t)?e&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ds}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$C(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return YC(this.canvas,this.ctx),this}stop(){return Sa.stop(this),this}resize(t,e){Sa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,e,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,$C(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),nn(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Le(e,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,i=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const o=e[a],l=n2(a,o),h=l==="r",d=l==="x";return{options:o,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),Le(s,a=>{const o=a.options,l=o.id,h=n2(l,o),d=ie(o.type,a.dtype);(o.position===void 0||AI(o.position,h)!==AI(a.dposition))&&(o.position=a.dposition),i[l]=!0;let g=null;if(l in r&&r[l].type===d)g=r[l];else{const m=Ds.getScale(d);g=new m({id:l,type:d,ctx:this.ctx,chart:this}),r[g.id]=g}g.init(o,t)}),Le(i,(a,o)=>{a||delete r[o]}),Le(r,a=>{Lo.configure(this,a,a.options),Lo.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>e){for(let i=e;i<r;++i)this._destroyDatasetMeta(i);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(TI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,i)=>{e.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=e.length;r<i;r++){const s=e[r];let a=this.getDatasetMeta(r);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=s.indexAxis||e2(o,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=Ds.getController(o),{datasetElementType:h,dataElementType:d}=Rn.datasets[o];Object.assign(l,{dataElementType:Ds.getElement(d),datasetElementType:h&&Ds.getElement(h)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Le(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:g}=this.getDatasetMeta(h),m=!i&&s.indexOf(g)===-1;g.buildOrUpdateElements(m),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||Le(s,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(TI("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Le(this.scales,t=>{Lo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!VC(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of e){const a=r==="_removeElements"?-s:s;WB(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<e;s++)if(!VC(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lo.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],Le(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,Xo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Sa.has(this)?this.attached&&!Sa.running(this)&&Sa.start(this):(this.draw(),SI({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let i,s;for(i=0,s=e.length;i<s;++i){const a=e[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=dV(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&zw(e,i),t.controller.draw(),i&&Hw(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return dg(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,i){const s=HV.modes[e];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Nl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);ug(e)?(s.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Sa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),YC(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete fm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};Le(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(l,h)=>{e.addEventListener(this,l,h),t[l]=h},i=(l,h)=>{t[l]&&(e.removeEventListener(this,l,h),delete t[l])},s=(l,h)=>{this.canvas&&this.resize(l,h)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){Le(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Le(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const i=r?"set":"remove";let s,a,o,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){a=t[o];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!Bm(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,r){const i=this.options.hover,s=(l,h)=>l.filter(d=>!h.some(g=>d.datasetIndex===g.datasetIndex&&d.index===g.index)),a=s(e,t),o=r?t:s(t,e);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:i=[],options:s}=this,a=e,o=this._getActiveElements(t,i,r,a),l=XL(t),h=qB(t,this._lastEvent,r,l);r&&(this._lastEvent=null,nn(s.onHover,[t,o,this],this),l&&nn(s.onClick,[t,o,this],this));const d=!Bm(o,i);return(d||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=h,d}_getActiveElements(t,e,r,i){if(t.type==="mouseout")return[];if(!r)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},lt(So,"defaults",Rn),lt(So,"instances",fm),lt(So,"overrides",wl),lt(So,"registry",Ds),lt(So,"version",zB),lt(So,"getChart",CI),So);function II(){return Le(Pl.instances,n=>n._plugins.invalidate())}function YB(n,t,e){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:h,borderJoinStyle:d}=l,g=Math.min(h/a,Ji(r-e));if(n.beginPath(),n.arc(i,s,a-h/2,r+g/2,e-g/2),o>0){const m=Math.min(h/o,Ji(r-e));n.arc(i,s,o+h/2,e-m/2,r+m/2,!0)}else{const m=Math.min(h/2,a*Ji(r-e));if(d==="round")n.arc(i,s,m,e-Xe/2,r+Xe/2,!0);else if(d==="bevel"){const v=2*m*m,w=-v*Math.cos(e+Xe/2)+i,b=-v*Math.sin(e+Xe/2)+s,E=v*Math.cos(r+Xe/2)+i,S=v*Math.sin(r+Xe/2)+s;n.lineTo(w,b),n.lineTo(E,S)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function XB(n,t,e){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let h=i/o;n.beginPath(),n.arc(s,a,o,r-h,e+h),l>i?(h=i/l,n.arc(s,a,l,e+h,r-h,!0)):n.arc(s,a,i,e+Qn,r-Qn),n.closePath(),n.clip()}function KB(n){return Gw(n,["outerStart","outerEnd","innerStart","innerEnd"])}function $B(n,t,e,r){const i=KB(n.options.borderRadius),s=(e-t)/2,a=Math.min(s,r*t/2),o=l=>{const h=(e-Math.min(s,l))*r/2;return Rr(l,0,Math.min(s,h))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Rr(i.innerStart,0,a),innerEnd:Rr(i.innerEnd,0,a)}}function Pu(n,t,e,r){return{x:e+n*Math.cos(t),y:r+n*Math.sin(t)}}function Wm(n,t,e,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:h,innerRadius:d}=t,g=Math.max(t.outerRadius+r+e-h,0),m=d>0?d+r+e+h:0;let v=0;const w=i-l;if(r){const bt=d>0?d-r:0,K=g>0?g-r:0,ct=(bt+K)/2,vt=ct!==0?w*ct/(ct+r):w;v=(w-vt)/2}const b=Math.max(.001,w*g-e/Xe)/g,E=(w-b)/2,S=l+E+v,T=i-E-v,{outerStart:I,outerEnd:k,innerStart:P,innerEnd:j}=$B(t,m,g,T-S),M=g-I,C=g-k,N=S+I/M,B=T-k/C,z=m+P,G=m+j,F=S+P/z,xt=T-j/G;if(n.beginPath(),s){const bt=(N+B)/2;if(n.arc(a,o,g,N,bt),n.arc(a,o,g,bt,B),k>0){const et=Pu(C,B,a,o);n.arc(et.x,et.y,k,B,T+Qn)}const K=Pu(G,T,a,o);if(n.lineTo(K.x,K.y),j>0){const et=Pu(G,xt,a,o);n.arc(et.x,et.y,j,T+Qn,xt+Math.PI)}const ct=(T-j/m+(S+P/m))/2;if(n.arc(a,o,m,T-j/m,ct,!0),n.arc(a,o,m,ct,S+P/m,!0),P>0){const et=Pu(z,F,a,o);n.arc(et.x,et.y,P,F+Math.PI,S-Qn)}const vt=Pu(M,S,a,o);if(n.lineTo(vt.x,vt.y),I>0){const et=Pu(M,N,a,o);n.arc(et.x,et.y,I,S-Qn,N)}}else{n.moveTo(a,o);const bt=Math.cos(N)*g+a,K=Math.sin(N)*g+o;n.lineTo(bt,K);const ct=Math.cos(B)*g+a,vt=Math.sin(B)*g+o;n.lineTo(ct,vt)}n.closePath()}function QB(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){Wm(n,t,e,r,l,i);for(let h=0;h<s;++h)n.fill();isNaN(o)||(l=a+(o%_n||_n))}return Wm(n,t,e,r,l,i),n.fill(),l}function ZB(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:h,borderJoinStyle:d,borderDash:g,borderDashOffset:m,borderRadius:v}=l,w=l.borderAlign==="inner";if(!h)return;n.setLineDash(g||[]),n.lineDashOffset=m,w?(n.lineWidth=h*2,n.lineJoin=d||"round"):(n.lineWidth=h,n.lineJoin=d||"bevel");let b=t.endAngle;if(s){Wm(n,t,e,r,b,i);for(let E=0;E<s;++E)n.stroke();isNaN(o)||(b=a+(o%_n||_n))}w&&XB(n,t,b),l.selfJoin&&b-a>=Xe&&v===0&&d!=="miter"&&YB(n,t,b),s||(Wm(n,t,e,r,b,i),n.stroke())}class Ku extends nc{constructor(e){super();lt(this,"circumference");lt(this,"endAngle");lt(this,"fullCircles");lt(this,"innerRadius");lt(this,"outerRadius");lt(this,"pixelMargin");lt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=L4(s,{x:e,y:r}),{startAngle:l,endAngle:h,innerRadius:d,outerRadius:g,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,w=ie(m,h-l),b=fg(a,l,h)&&l!==h,E=w>=_n||b,S=ko(o,d+v,g+v);return E&&S}getCenterPoint(e){const{x:r,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:d}=this.options,g=(s+a)/2,m=(o+l+d+h)/2;return{x:r+Math.cos(g)*m,y:i+Math.sin(g)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:i}=this,s=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>_n?Math.floor(i/_n):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const h=1-Math.sin(Math.min(Xe,i||0)),d=s*h;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,QB(e,this,d,a,o),ZB(e,this,d,a,o),e.restore()}}lt(Ku,"id","arc"),lt(Ku,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),lt(Ku,"defaultRoutes",{backgroundColor:"backgroundColor"}),lt(Ku,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function fM(n,t,e=t){n.lineCap=ie(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ie(e.borderDash,t.borderDash)),n.lineDashOffset=ie(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ie(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ie(e.borderWidth,t.borderWidth),n.strokeStyle=ie(e.borderColor,t.borderColor)}function JB(n,t,e){n.lineTo(e.x,e.y)}function tF(n){return n.stepped?w7:n.tension||n.cubicInterpolationMode==="monotone"?b7:JB}function dM(n,t,e={}){const r=n.length,{start:i=0,end:s=r-1}=e,{start:a,end:o}=t,l=Math.max(i,a),h=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:h<l&&!d?r+h-l:h-l}}function eF(n,t,e,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:h}=dM(i,e,r),d=tF(s);let{move:g=!0,reverse:m}=r||{},v,w,b;for(v=0;v<=h;++v)w=i[(o+(m?h-v:v))%a],!w.skip&&(g?(n.moveTo(w.x,w.y),g=!1):d(n,b,w,m,s.stepped),b=w);return l&&(w=i[(o+(m?h:0))%a],d(n,b,w,m,s.stepped)),!!l}function nF(n,t,e,r){const i=t.points,{count:s,start:a,ilen:o}=dM(i,e,r),{move:l=!0,reverse:h}=r||{};let d=0,g=0,m,v,w,b,E,S;const T=k=>(a+(h?o-k:k))%s,I=()=>{b!==E&&(n.lineTo(d,E),n.lineTo(d,b),n.lineTo(d,S))};for(l&&(v=i[T(0)],n.moveTo(v.x,v.y)),m=0;m<=o;++m){if(v=i[T(m)],v.skip)continue;const k=v.x,P=v.y,j=k|0;j===w?(P<b?b=P:P>E&&(E=P),d=(g*d+k)/++g):(I(),n.lineTo(k,P),w=j,g=0,b=E=P),S=P}I()}function r2(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?nF:eF}function rF(n){return n.stepped?tV:n.tension||n.cubicInterpolationMode==="monotone"?eV:Yc}function iF(n,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),fM(n,t.options),n.stroke(i)}function sF(n,t,e,r){const{segments:i,options:s}=t,a=r2(t);for(const o of i)fM(n,s,o.style),n.beginPath(),a(n,t,o,{start:e,end:e+r-1})&&n.closePath(),n.stroke()}const aF=typeof Path2D=="function";function oF(n,t,e,r){aF&&!t.options.segment?iF(n,t,e,r):sF(n,t,e,r)}class Td extends nc{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;q7(this._points,r,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,i=t[e],s=this.points,a=aV(this,{property:e,start:i,end:i});if(!a.length)return;const o=[],l=rF(r);let h,d;for(h=0,d=a.length;h<d;++h){const{start:g,end:m}=a[h],v=s[g],w=s[m];if(v===w){o.push(v);continue}const b=Math.abs((i-v[e])/(w[e]-v[e])),E=l(v,w,b,r.stepped);E[e]=t[e],o.push(E)}return o.length===1?o[0]:o}pathSegment(t,e,r){return r2(this)(t,this,e,r)}path(t,e,r){const i=this.segments,s=r2(this);let a=this._loop;e=e||0,r=r||this.points.length-e;for(const o of i)a&=s(t,this,o,{start:e,end:e+r-1});return!!a}draw(t,e,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),oF(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}lt(Td,"id","line"),lt(Td,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),lt(Td,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),lt(Td,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function RI(n,t,e,r){const i=n.options,{[e]:s}=n.getProps([e],r);return Math.abs(t-s)<i.radius+i.hitRadius}class dm extends nc{constructor(e){super();lt(this,"parsed");lt(this,"skip");lt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(r-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return RI(this,e,"x",r)}inYRange(e,r){return RI(this,e,"y",r)}getCenterPoint(e){const{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const i=r&&e.borderWidth||0;return(r+i)*2}draw(e,r){const i=this.options;this.skip||i.radius<.1||!dg(this,r,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,t2(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}lt(dm,"id","point"),lt(dm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),lt(dm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function gM(n,t){const{x:e,y:r,base:i,width:s,height:a}=n.getProps(["x","y","base","width","height"],t);let o,l,h,d,g;return n.horizontal?(g=a/2,o=Math.min(e,i),l=Math.max(e,i),h=r-g,d=r+g):(g=s/2,o=e-g,l=e+g,h=Math.min(r,i),d=Math.max(r,i)),{left:o,top:h,right:l,bottom:d}}function Vo(n,t,e,r){return n?0:Rr(t,e,r)}function cF(n,t,e){const r=n.options.borderWidth,i=n.borderSkipped,s=G4(r);return{t:Vo(i.top,s.top,0,e),r:Vo(i.right,s.right,0,t),b:Vo(i.bottom,s.bottom,0,e),l:Vo(i.left,s.left,0,t)}}function lF(n,t,e){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=sh(i),a=Math.min(t,e),o=n.borderSkipped,l=r||_e(i);return{topLeft:Vo(!l||o.top||o.left,s.topLeft,0,a),topRight:Vo(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Vo(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Vo(!l||o.bottom||o.right,s.bottomRight,0,a)}}function uF(n){const t=gM(n),e=t.right-t.left,r=t.bottom-t.top,i=cF(n,e/2,r/2),s=lF(n,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function P_(n,t,e,r){const i=t===null,s=e===null,o=n&&!(i&&s)&&gM(n,r);return o&&(i||ko(t,o.left,o.right))&&(s||ko(e,o.top,o.bottom))}function hF(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function fF(n,t){n.rect(t.x,t.y,t.w,t.h)}function k_(n,t,e={}){const r=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-r,a=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+a,radius:n.radius}}class gm extends nc{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=uF(this),o=hF(a.radius)?zm:fF;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),o(t,k_(a,e,s)),t.clip(),o(t,k_(s,-e,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,k_(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return P_(this,t,e,r)}inXRange(t,e){return P_(this,t,null,e)}inYRange(t,e){return P_(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}lt(gm,"id","bar"),lt(gm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),lt(gm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const DI=(n,t)=>{let{boxHeight:e=t,boxWidth:r=t}=n;return n.usePointStyle&&(e=Math.min(e,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},dF=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class OI extends nc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=nn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=Qr(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=DI(r,s);let h,d;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(a,s,o,l)+10):(d=this.maxHeight,h=this._fitCols(a,i,o,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],d=i+o;let g=t;s.textAlign="left",s.textBaseline="middle";let m=-1,v=-d;return this.legendItems.forEach((w,b)=>{const E=r+e/2+s.measureText(w.text).width;(b===0||h[h.length-1]+E+2*o>a)&&(g+=d,h[h.length-(b>0?0:1)]=0,v+=d,m++),l[b]={left:0,top:v,row:m,width:E,height:i},h[h.length-1]+=E+o}),g}_fitCols(t,e,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],d=a-t;let g=o,m=0,v=0,w=0,b=0;return this.legendItems.forEach((E,S)=>{const{itemWidth:T,itemHeight:I}=gF(r,e,s,E,i);S>0&&v+I+2*o>d&&(g+=m+o,h.push({width:m,height:v}),w+=m+o,b++,m=v=0),l[S]={left:w,top:v,col:b,width:T,height:I},m=Math.max(m,T),v+=I+o}),g+=m,h.push({width:m,height:v}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:s}}=this,a=ah(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=fi(r,this.left+i,this.right-this.lineWidths[o]);for(const h of e)o!==h.row&&(o=h.row,l=fi(r,this.left+i,this.right-this.lineWidths[o])),h.top+=this.top+t+i,h.left=a.leftForLtr(a.x(l),h.width),l+=h.width+i}else{let o=0,l=fi(r,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const h of e)h.col!==o&&(o=h.col,l=fi(r,this.top+t+i,this.bottom-this.columnSizes[o].height)),h.top=l,h.left+=this.left+i,h.left=a.leftForLtr(a.x(h.left),h.width),l+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;zw(t,this),this._draw(),Hw(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,o=Rn.color,l=ah(t.rtl,this.left,this.width),h=Qr(a.font),{padding:d}=a,g=h.size,m=g/2;let v;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:w,boxHeight:b,itemHeight:E}=DI(a,g),S=function(j,M,C){if(isNaN(w)||w<=0||isNaN(b)||b<0)return;i.save();const N=ie(C.lineWidth,1);if(i.fillStyle=ie(C.fillStyle,o),i.lineCap=ie(C.lineCap,"butt"),i.lineDashOffset=ie(C.lineDashOffset,0),i.lineJoin=ie(C.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=ie(C.strokeStyle,o),i.setLineDash(ie(C.lineDash,[])),a.usePointStyle){const B={radius:b*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:N},z=l.xPlus(j,w/2),G=M+m;H4(i,B,z,G,a.pointStyleWidth&&w)}else{const B=M+Math.max((g-b)/2,0),z=l.leftForLtr(j,w),G=sh(C.borderRadius);i.beginPath(),Object.values(G).some(F=>F!==0)?zm(i,{x:z,y:B,w,h:b,radius:G}):i.rect(z,B,w,b),i.fill(),N!==0&&i.stroke()}i.restore()},T=function(j,M,C){jm(i,C.text,j,M+E/2,h,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},I=this.isHorizontal(),k=this._computeTitleHeight();I?v={x:fi(s,this.left+d,this.right-r[0]),y:this.top+d+k,line:0}:v={x:this.left+d,y:fi(s,this.top+k+d,this.bottom-e[0].height),line:0},$4(this.ctx,t.textDirection);const P=E+d;this.legendItems.forEach((j,M)=>{i.strokeStyle=j.fontColor,i.fillStyle=j.fontColor;const C=i.measureText(j.text).width,N=l.textAlign(j.textAlign||(j.textAlign=a.textAlign)),B=w+m+C;let z=v.x,G=v.y;l.setWidth(this.width),I?M>0&&z+B+d>this.right&&(G=v.y+=P,v.line++,z=v.x=fi(s,this.left+d,this.right-r[v.line])):M>0&&G+P>this.bottom&&(z=v.x=z+e[v.line].width+d,v.line++,G=v.y=fi(s,this.top+k+d,this.bottom-e[v.line].height));const F=l.x(z);if(S(F,G,j),z=c7(N,z+w+m,I?z+B:this.right,t.rtl),T(l.x(z),G,j),I)v.x+=B+d;else if(typeof j.text!="string"){const xt=h.lineHeight;v.y+=pM(j,xt)+d}else v.y+=P}),Q4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=Qr(e.font),i=is(e.padding);if(!e.display)return;const s=ah(t.rtl,this.left,this.width),a=this.ctx,o=e.position,l=r.size/2,h=i.top+l;let d,g=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+h,g=fi(t.align,g,this.right-m);else{const w=this.columnSizes.reduce((b,E)=>Math.max(b,E.height),0);d=h+fi(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const v=fi(o,g,g+m);a.textAlign=s.textAlign(j4(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=r.string,jm(a,e.text,v,d,r)}_computeTitleHeight(){const t=this.options.title,e=Qr(t.font),r=is(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,s;if(ko(t,this.left,this.right)&&ko(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ko(t,i.left,i.left+i.width)&&ko(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const e=this.options;if(!yF(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=dF(i,r);i&&!s&&nn(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&nn(e.onHover,[t,r,this],this)}else r&&nn(e.onClick,[t,r,this],this)}}function gF(n,t,e,r,i){const s=pF(r,n,t,e),a=mF(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}function pF(n,t,e,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+r.measureText(i).width}function mF(n,t,e){let r=n;return typeof t.text!="string"&&(r=pM(t,e)),r}function pM(n,t){const e=n.text?n.text.length:0;return t*e}function yF(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Qw={id:"legend",_element:OI,start(n,t,e){const r=n.legend=new OI({ctx:n.ctx,options:e,chart:n});Lo.configure(n,r,e),Lo.addBox(n,r)},stop(n){Lo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const r=n.legend;Lo.configure(n,r,e),r.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(e?0:void 0),d=is(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:a&&(o||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Sd={average(n){if(!n.length)return!1;let t,e,r=new Set,i=0,s=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),d=Zx(t,h);d<i&&(i=d,o=l)}}if(o){const l=o.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function Rs(n,t){return t&&(lr(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Ca(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function vF(n,t){const{element:e,datasetIndex:r,index:i}=t,s=n.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:n,label:a,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function MI(n,t){const e=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:a,boxHeight:o}=t,l=Qr(t.bodyFont),h=Qr(t.titleFont),d=Qr(t.footerFont),g=s.length,m=i.length,v=r.length,w=is(t.padding);let b=w.height,E=0,S=r.reduce((k,P)=>k+P.before.length+P.lines.length+P.after.length,0);if(S+=n.beforeBody.length+n.afterBody.length,g&&(b+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),S){const k=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;b+=v*k+(S-v)*l.lineHeight+(S-1)*t.bodySpacing}m&&(b+=t.footerMarginTop+m*d.lineHeight+(m-1)*t.footerSpacing);let T=0;const I=function(k){E=Math.max(E,e.measureText(k).width+T)};return e.save(),e.font=h.string,Le(n.title,I),e.font=l.string,Le(n.beforeBody.concat(n.afterBody),I),T=t.displayColors?a+2+t.boxPadding:0,Le(r,k=>{Le(k.before,I),Le(k.lines,I),Le(k.after,I)}),T=0,e.font=d.string,Le(n.footer,I),e.restore(),E+=w.width,{width:E,height:b}}function _F(n,t){const{y:e,height:r}=t;return e<r/2?"top":e>n.height-r/2?"bottom":"center"}function xF(n,t,e,r){const{x:i,width:s}=r,a=e.caretSize+e.caretPadding;if(n==="left"&&i+s+a>t.width||n==="right"&&i-s-a<0)return!0}function wF(n,t,e,r){const{x:i,width:s}=e,{width:a,chartArea:{left:o,right:l}}=n;let h="center";return r==="center"?h=i<=(o+l)/2?"left":"right":i<=s/2?h="left":i>=a-s/2&&(h="right"),xF(h,n,t,e)&&(h="center"),h}function NI(n,t,e){const r=e.yAlign||t.yAlign||_F(n,e);return{xAlign:e.xAlign||t.xAlign||wF(n,t,e,r),yAlign:r}}function bF(n,t){let{x:e,width:r}=n;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function EF(n,t,e){let{y:r,height:i}=n;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function PI(n,t,e,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=e,h=i+s,{topLeft:d,topRight:g,bottomLeft:m,bottomRight:v}=sh(a);let w=bF(t,o);const b=EF(t,l,h);return l==="center"?o==="left"?w+=h:o==="right"&&(w-=h):o==="left"?w-=Math.max(d,m)+i:o==="right"&&(w+=Math.max(g,v)+i),{x:Rr(w,0,r.width-t.width),y:Rr(b,0,r.height-t.height)}}function U0(n,t,e){const r=is(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-r.right:n.x+r.left}function kI(n){return Rs([],Ca(n))}function AF(n,t,e){return Nl(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function LI(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const mM={beforeTitle:Ta,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:Ta,beforeBody:Ta,beforeLabel:Ta,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Re(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ta,afterBody:Ta,beforeFooter:Ta,footer:Ta,afterFooter:Ta};function Yr(n,t,e,r){const i=n[t].call(e,r);return typeof i>"u"?mM[t].call(e,r):i}class i2 extends nc{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&e.options.animation&&r.animations,s=new J4(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=AF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:r}=e,i=Yr(r,"beforeTitle",this,t),s=Yr(r,"title",this,t),a=Yr(r,"afterTitle",this,t);let o=[];return o=Rs(o,Ca(i)),o=Rs(o,Ca(s)),o=Rs(o,Ca(a)),o}getBeforeBody(t,e){return kI(Yr(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:r}=e,i=[];return Le(t,s=>{const a={before:[],lines:[],after:[]},o=LI(r,s);Rs(a.before,Ca(Yr(o,"beforeLabel",this,s))),Rs(a.lines,Yr(o,"label",this,s)),Rs(a.after,Ca(Yr(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,e){return kI(Yr(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:r}=e,i=Yr(r,"beforeFooter",this,t),s=Yr(r,"footer",this,t),a=Yr(r,"afterFooter",this,t);let o=[];return o=Rs(o,Ca(i)),o=Rs(o,Ca(s)),o=Rs(o,Ca(a)),o}_createItems(t){const e=this._active,r=this.chart.data,i=[],s=[],a=[];let o=[],l,h;for(l=0,h=e.length;l<h;++l)o.push(vF(this.chart,e[l]));return t.filter&&(o=o.filter((d,g,m)=>t.filter(d,g,m,r))),t.itemSort&&(o=o.sort((d,g)=>t.itemSort(d,g,r))),Le(o,d=>{const g=LI(t.callbacks,d);i.push(Yr(g,"labelColor",this,d)),s.push(Yr(g,"labelPointStyle",this,d)),a.push(Yr(g,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=Sd[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=MI(this,r),h=Object.assign({},o,l),d=NI(this.chart,r,h),g=PI(r,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:g.x,y:g.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,i){const s=this.getCaretPosition(t,r,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:h,bottomLeft:d,bottomRight:g}=sh(o),{x:m,y:v}=t,{width:w,height:b}=e;let E,S,T,I,k,P;return s==="center"?(k=v+b/2,i==="left"?(E=m,S=E-a,I=k+a,P=k-a):(E=m+w,S=E+a,I=k-a,P=k+a),T=E):(i==="left"?S=m+Math.max(l,d)+a:i==="right"?S=m+w-Math.max(h,g)-a:S=this.caretX,s==="top"?(I=v,k=I-a,E=S-a,T=S+a):(I=v+b,k=I+a,E=S+a,T=S-a),P=I),{x1:E,x2:S,x3:T,y1:I,y2:k,y3:P}}drawTitle(t,e,r){const i=this.title,s=i.length;let a,o,l;if(s){const h=ah(r.rtl,this.x,this.width);for(t.x=U0(this,r.titleAlign,r),e.textAlign=h.textAlign(r.titleAlign),e.textBaseline="middle",a=Qr(r.titleFont),o=r.titleSpacing,e.fillStyle=r.titleColor,e.font=a.string,l=0;l<s;++l)e.fillText(i[l],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,l+1===s&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,e,r,i,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:h}=s,d=Qr(s.bodyFont),g=U0(this,"left",s),m=i.x(g),v=l<d.lineHeight?(d.lineHeight-l)/2:0,w=e.y+v;if(s.usePointStyle){const b={radius:Math.min(h,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},E=i.leftForLtr(m,h)+h/2,S=w+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,t2(t,b,E,S),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,t2(t,b,E,S)}else{t.lineWidth=_e(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const b=i.leftForLtr(m,h),E=i.leftForLtr(i.xPlus(m,1),h-2),S=sh(a.borderRadius);Object.values(S).some(T=>T!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,zm(t,{x:b,y:w,w:h,h:l,radius:S}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),zm(t,{x:E,y:w+1,w:h-2,h:l-2,radius:S}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(b,w,h,l),t.strokeRect(b,w,h,l),t.fillStyle=a.backgroundColor,t.fillRect(E,w+1,h-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:h,boxPadding:d}=r,g=Qr(r.bodyFont);let m=g.lineHeight,v=0;const w=ah(r.rtl,this.x,this.width),b=function(C){e.fillText(C,w.x(t.x+v),t.y+m/2),t.y+=m+s},E=w.textAlign(a);let S,T,I,k,P,j,M;for(e.textAlign=a,e.textBaseline="middle",e.font=g.string,t.x=U0(this,E,r),e.fillStyle=r.bodyColor,Le(this.beforeBody,b),v=o&&E!=="right"?a==="center"?h/2+d:h+2+d:0,k=0,j=i.length;k<j;++k){for(S=i[k],T=this.labelTextColors[k],e.fillStyle=T,Le(S.before,b),I=S.lines,o&&I.length&&(this._drawColorBox(e,t,k,w,r),m=Math.max(g.lineHeight,l)),P=0,M=I.length;P<M;++P)b(I[P]),m=g.lineHeight;Le(S.after,b)}v=0,m=g.lineHeight,Le(this.afterBody,b),t.y-=s}drawFooter(t,e,r){const i=this.footer,s=i.length;let a,o;if(s){const l=ah(r.rtl,this.x,this.width);for(t.x=U0(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=l.textAlign(r.footerAlign),e.textBaseline="middle",a=Qr(r.footerFont),e.fillStyle=r.footerColor,e.font=a.string,o=0;o<s;++o)e.fillText(i[o],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,e,r,i){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=t,{width:h,height:d}=r,{topLeft:g,topRight:m,bottomLeft:v,bottomRight:w}=sh(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+g,l),a==="top"&&this.drawCaret(t,e,r,i),e.lineTo(o+h-m,l),e.quadraticCurveTo(o+h,l,o+h,l+m),a==="center"&&s==="right"&&this.drawCaret(t,e,r,i),e.lineTo(o+h,l+d-w),e.quadraticCurveTo(o+h,l+d,o+h-w,l+d),a==="bottom"&&this.drawCaret(t,e,r,i),e.lineTo(o+v,l+d),e.quadraticCurveTo(o,l+d,o,l+d-v),a==="center"&&s==="left"&&this.drawCaret(t,e,r,i),e.lineTo(o,l+g),e.quadraticCurveTo(o,l,o+g,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=Sd[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=MI(this,t),l=Object.assign({},a,this._size),h=NI(e,t,l),d=PI(t,l,h,e);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=is(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,e),$4(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),Q4(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,i=t.map(({datasetIndex:o,index:l})=>{const h=this.chart.getDatasetMeta(o);if(!h)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:h.data[l],index:l}}),s=!Bm(r,i),a=this._positionChanged(i,e);(s||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,r),o=this._positionChanged(a,t),l=e||!Bm(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:r,caretY:i,options:s}=this,a=Sd[s.position].call(this,t,e);return a!==!1&&(r!==a.x||i!==a.y)}}lt(i2,"positioners",Sd);var Zw={id:"tooltip",_element:i2,positioners:Sd,afterInit(n,t,e){e&&(n.tooltip=new i2({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const TF=(n,t,e,r)=>(typeof t=="string"?(e=n.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function SF(n,t,e,r){const i=n.indexOf(t);if(i===-1)return TF(n,t,e,r);const s=n.lastIndexOf(t);return i!==s?e:i}const CF=(n,t)=>n===null?null:Rr(Math.round(n),0,t);function VI(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class s2 extends Bh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const r=this.getLabels();for(const{index:i,label:s}of e)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Re(t))return null;const r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:SF(r,t,ie(e,t),this._addedLabels),CF(e,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=e;a++)i.push({value:a});return i}getLabelForValue(t){return VI.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}lt(s2,"id","category"),lt(s2,"defaults",{ticks:{callback:VI}});function IF(n,t){const e=[],{bounds:i,step:s,min:a,max:o,precision:l,count:h,maxTicks:d,maxDigits:g,includeBounds:m}=n,v=s||1,w=d-1,{min:b,max:E}=t,S=!Re(a),T=!Re(o),I=!Re(h),k=(E-b)/(g+1);let P=FC((E-b)/w/v)*v,j,M,C,N;if(P<1e-14&&!S&&!T)return[{value:b},{value:E}];N=Math.ceil(E/P)-Math.floor(b/P),N>w&&(P=FC(N*P/w/v)*v),Re(l)||(j=Math.pow(10,l),P=Math.ceil(P*j)/j),i==="ticks"?(M=Math.floor(b/P)*P,C=Math.ceil(E/P)*P):(M=b,C=E),S&&T&&s&&JL((o-a)/s,P/1e3)?(N=Math.round(Math.min((o-a)/P,d)),P=(o-a)/N,M=a,C=o):I?(M=S?a:M,C=T?o:C,N=h-1,P=(C-M)/N):(N=(C-M)/P,jd(N,Math.round(N),P/1e3)?N=Math.round(N):N=Math.ceil(N));const B=Math.max(UC(P),UC(M));j=Math.pow(10,Re(l)?B:l),M=Math.round(M*j)/j,C=Math.round(C*j)/j;let z=0;for(S&&(m&&M!==a?(e.push({value:a}),M<a&&z++,jd(Math.round((M+z*P)*j)/j,a,BI(a,k,n))&&z++):M<a&&z++);z<N;++z){const G=Math.round((M+z*P)*j)/j;if(T&&G>o)break;e.push({value:G})}return T&&m&&C!==o?e.length&&jd(e[e.length-1].value,o,BI(o,k,n))?e[e.length-1].value=o:e.push({value:o}):(!T||C===o)&&e.push({value:C}),e}function BI(n,t,{horizontal:e,minRotation:r}){const i=Ra(r),s=(e?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+n).length;return Math.min(t/s,a)}class RF extends Bh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Re(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=l=>i=e?i:l,o=l=>s=r?s:l;if(t){const l=Fs(i),h=Fs(s);l<0&&h<0?o(0):l>0&&h>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),t||a(i-l)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=IF(i,s);return t.bounds==="ticks"&&t7(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return jw(t,this.chart.options.locale,this.options.ticks.format)}}class qm extends RF{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=zi(t)?t:0,this.max=zi(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=Ra(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}lt(qm,"id","linear"),lt(qm,"defaults",{ticks:{callback:z4.formatters.numeric}});const N1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kr=Object.keys(N1);function FI(n,t){return n-t}function UI(n,t){if(Re(t))return null;const e=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),zi(a)||(a=typeof r=="string"?e.parse(a,r):e.parse(a)),a===null?null:(i&&(a=i==="week"&&(hg(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,i)),+a)}function jI(n,t,e,r){const i=Kr.length;for(let s=Kr.indexOf(n);s<i-1;++s){const a=N1[Kr[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=r)return Kr[s]}return Kr[i-1]}function DF(n,t,e,r,i){for(let s=Kr.length-1;s>=Kr.indexOf(e);s--){const a=Kr[s];if(N1[a].common&&n._adapter.diff(i,r,a)>=t-1)return a}return Kr[e?Kr.indexOf(e):0]}function OF(n){for(let t=Kr.indexOf(n)+1,e=Kr.length;t<e;++t)if(N1[Kr[t]].common)return Kr[t]}function zI(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:r,hi:i}=Fw(e,t),s=e[r]>=t?e[r]:e[i];n[s]=!0}}function MF(n,t,e,r){const i=n._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=e[o],l>=0&&(t[l].major=!0);return t}function HI(n,t,e){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return s===0||!e?r:MF(n,r,i,e)}class pg extends Bh{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const r=t.time||(t.time={}),i=this._adapter=new nM._date(t.adapters.date);i.init(e),Ud(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:UI(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(h){!a&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!o&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!a||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=zi(i)&&!isNaN(i)?i:+e.startOf(Date.now(),r),s=zi(s)&&!isNaN(s)?s:+e.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=s7(i,s,a);return this._unit=e.unit||(r.autoSkip?jI(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):DF(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:OF(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),HI(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Rr(e,0,a),r=Rr(r,0,a),this._offsets={start:e,end:r,factor:1/(e+1+r)}}_generate(){const t=this._adapter,e=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||jI(s.minUnit,e,r,this._getLabelCapacity(e)),o=ie(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,h=hg(l)||l===!0,d={};let g=e,m,v;if(h&&(g=+t.startOf(g,"isoWeek",l)),g=+t.startOf(g,h?"day":a),t.diff(r,e,a)>1e5*o)throw new Error(e+" and "+r+" are too far apart with stepSize of "+o+" "+a);const w=i.ticks.source==="data"&&this.getDataTimestamps();for(m=g,v=0;m<r;m=+t.add(m,o,a),v++)zI(d,m,w);return(m===r||i.bounds==="ticks"||v===1)&&zI(d,m,w),Object.keys(d).sort(FI).map(b=>+b)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,a=e||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,e,r,i){const s=this.options,a=s.ticks.callback;if(a)return nn(a,[t,e,r],this);const o=s.time.displayFormats,l=this._unit,h=this._majorUnit,d=l&&o[l],g=h&&o[h],m=r[e],v=h&&g&&m&&m.major;return this._adapter.format(t,i||(v?g:d))}generateTickLabels(t){let e,r,i;for(e=0,r=t.length;e<r;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,i=Ra(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,i=r[e.unit]||r.millisecond,s=this._tickFormatFunction(t,0,HI(this,[t],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,r=i.length;e<r;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const i=this.getLabels();for(e=0,r=i.length;e<r;++e)t.push(UI(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return B4(t.sort(FI))}}lt(pg,"id","time"),lt(pg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function j0(n,t,e){let r=0,i=n.length-1,s,a,o,l;e?(t>=n[r].pos&&t<=n[i].pos&&({lo:r,hi:i}=sl(n,"pos",t)),{pos:s,time:o}=n[r],{pos:a,time:l}=n[i]):(t>=n[r].time&&t<=n[i].time&&({lo:r,hi:i}=sl(n,"time",t)),{time:s,pos:o}=n[r],{time:a,pos:l}=n[i]);const h=a-s;return h?o+(l-o)*(t-s)/h:o}class GI extends pg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=j0(e,this.min),this._tableRange=j0(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,i=[],s=[];let a,o,l,h,d;for(a=0,o=t.length;a<o;++a)h=t[a],h>=e&&h<=r&&i.push(h);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(a=0,o=i.length;a<o;++a)d=i[a+1],l=i[a-1],h=i[a],Math.round((d+l)/2)!==h&&s.push({time:h,pos:a/(o-1)});return s}_generate(){const t=this.min,e=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(e)||r.length===1)&&r.push(e),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(j0(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return j0(this._table,r*this._tableRange+this._minPos,!0)}}lt(GI,"id","timeseries"),lt(GI,"defaults",pg.defaults);const yM="label";function WI(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function NF(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function vM(n,t){n.labels=t}function _M(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yM;const r=[];n.datasets=t.map(i=>{const s=n.datasets.find(a=>a[e]===i[e]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function PF(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yM;const e={labels:[],datasets:[]};return vM(e,n.labels),_M(e,n.datasets,t),e}function kF(n,t){const{height:e=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:h=[],fallbackContent:d,updateMode:g,...m}=n,v=rt.useRef(null),w=rt.useRef(null),b=()=>{v.current&&(w.current=new Pl(v.current,{type:a,data:PF(o,s),options:l&&{...l},plugins:h}),WI(t,w.current))},E=()=>{WI(t,null),w.current&&(w.current.destroy(),w.current=null)};return rt.useEffect(()=>{!i&&w.current&&l&&NF(w.current,l)},[i,l]),rt.useEffect(()=>{!i&&w.current&&vM(w.current.config.data,o.labels)},[i,o.labels]),rt.useEffect(()=>{!i&&w.current&&o.datasets&&_M(w.current.config.data,o.datasets,s)},[i,o.datasets]),rt.useEffect(()=>{w.current&&(i?(E(),setTimeout(b)):w.current.update(g))},[i,l,o.labels,o.datasets,g]),rt.useEffect(()=>{w.current&&(E(),setTimeout(b))},[a]),rt.useEffect(()=>(b(),()=>E()),[]),hn.createElement("canvas",{ref:v,role:"img",height:e,width:r,...m},d)}const LF=rt.forwardRef(kF);function Jw(n,t){return Pl.register(t),rt.forwardRef((e,r)=>hn.createElement(LF,{...e,ref:r,type:n}))}const VF=Jw("line",um),BF=Jw("bar",lm),xM=Jw("doughnut",Ed);Pl.register(gm,s2,qm);function wM({meals:n,startOfWeek:t}){const e=()=>{const a=[];for(let o=0;o<7;o++){const l=new Date(t);l.setDate(t.getDate()+o),a.push(l.toISOString().split("T")[0])}return a},i={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories",data:e().map(o=>{let l=0;return n.filter(h=>h.date===o).forEach(h=>{h.kcal?l+=h.kcal:h.foodItems.forEach(d=>{d.nutrients.forEach(g=>{const m=parseFloat(g.total)||0;(g.type==="Carbohydrate"||g.type==="Protein")&&(l+=m*4),g.type==="Fat"&&(l+=m*9)})})}),Math.round(l)}),backgroundColor:"deepskyblue"}]},s={plugins:{tooltip:{enabled:!0},legend:{display:!1}},scales:{y:{ticks:{color:"white"},grid:{color:"#444"}},x:{ticks:{color:"white"},grid:{color:"#444"}}}};return O.jsx(BF,{data:i,options:s})}Pl.register(Ku,Zw,Qw);function bM({meals:n,selectedDate:t,goal:e=2e3}){const r=t||new Date().toISOString().split("T")[0],s=n.filter(d=>d.date===r).reduce((d,g)=>{if(g.kcal)return d+g.kcal;let m=0;return g.foodItems.forEach(v=>{v.nutrients.forEach(w=>{const b=parseFloat(w.total)||0;(w.type==="Carbohydrate"||w.type==="Protein")&&(m+=b*4),w.type==="Fat"&&(m+=b*9)})}),d+m},0),a=Math.round(s),o=e-a,l={labels:["Calories Consumed"],datasets:[{data:[s,o>0?o:0],backgroundColor:["deepskyblue","#a9c9f8ff"],borderWidth:0}]},h={cutout:"85%",plugins:{legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:12,weight:"bold"},padding:15,boxWidth:10,boxHeight:10}}}};return O.jsxs("div",{className:"donut-chart",style:{position:"relative"},children:[O.jsx(xM,{data:l,options:h}),O.jsx("div",{className:"DonutWordings",children:o>0?`${o} Remaining`:"Goal Reached"})]})}Pl.register(Ku,Zw,Qw);function EM({meals:n,selectedDate:t}){const e=t||new Date().toISOString().split("T")[0],r=n.filter(m=>m.date===e),i=["Protein","Fat","Carbohydrate","Sugar","Fibre","Salt","Caffeine"],s={};r.forEach(m=>{m.foodItems.forEach(v=>{v.nutrients.forEach(w=>{var S;const b=(S=w.type)==null?void 0:S.toLowerCase();if(!b||b.includes("kcal")||b.includes("calorie"))return;const E=b.charAt(0).toUpperCase()+b.slice(1);if(i.includes(E)){const T=parseFloat(w.total)||0;s[E]=(s[E]||0)+T}})})});const a=Object.entries(s).sort((m,v)=>v[1]-m[1]),o=a.slice(0,4),l=a.slice(4),h=o.map(([m,v],w)=>({label:m,value:v,color:["#4CAF50","#FF9800","#03A9F4","teal"][w%4]}));if(l.length>0){const m=l.reduce((v,[,w])=>v+w,0);h.push({label:"Others",value:m,color:"gray"})}const d={labels:h.map(m=>m.label),datasets:[{data:h.map(m=>m.value),backgroundColor:h.map(m=>m.color),borderWidth:0}]},g={cutout:"85%",plugins:{tooltip:{enabled:!0},legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:8,weight:"bold"},padding:5,boxWidth:5,boxHeight:5}}}};return r.length===0?O.jsx("div",{className:"text-white small text-center p-3",style:{marginTop:"30%"},children:"No nutrition data for today."}):O.jsx("div",{className:"donut-chart",style:{position:"relative"},children:O.jsx(xM,{data:d,options:g})})}const FF="Left",UF="Right",jF="Up",zF="Down",$u={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},a2={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},qI="mousemove",YI="mouseup",HF="touchend",GF="touchmove",WF="touchstart";function qF(n,t,e,r){return n>t?e>0?UF:FF:r>0?zF:jF}function XI(n,t){if(t===0)return n;const e=Math.PI/180*t,r=n[0]*Math.cos(e)+n[1]*Math.sin(e),i=n[1]*Math.cos(e)-n[0]*Math.sin(e);return[r,i]}function YF(n,t){const e=d=>{const g="touches"in d;g&&d.touches.length>1||n((m,v)=>{v.trackMouse&&!g&&(document.addEventListener(qI,r),document.addEventListener(YI,a));const{clientX:w,clientY:b}=g?d.touches[0]:d,E=XI([w,b],v.rotationAngle);return v.onTouchStartOrOnMouseDown&&v.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},m),a2),{initial:E.slice(),xy:E,start:d.timeStamp||0})})},r=d=>{n((g,m)=>{const v="touches"in d;if(v&&d.touches.length>1)return g;if(d.timeStamp-g.start>m.swipeDuration)return g.swiping?Object.assign(Object.assign({},g),{swiping:!1}):g;const{clientX:w,clientY:b}=v?d.touches[0]:d,[E,S]=XI([w,b],m.rotationAngle),T=E-g.xy[0],I=S-g.xy[1],k=Math.abs(T),P=Math.abs(I),j=(d.timeStamp||0)-g.start,M=Math.sqrt(k*k+P*P)/(j||1),C=[T/(j||1),I/(j||1)],N=qF(k,P,T,I),B=typeof m.delta=="number"?m.delta:m.delta[N.toLowerCase()]||$u.delta;if(k<B&&P<B&&!g.swiping)return g;const z={absX:k,absY:P,deltaX:T,deltaY:I,dir:N,event:d,first:g.first,initial:g.initial,velocity:M,vxvy:C};z.first&&m.onSwipeStart&&m.onSwipeStart(z),m.onSwiping&&m.onSwiping(z);let G=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${N}`])&&(G=!0),G&&m.preventScrollOnSwipe&&m.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},g),{first:!1,eventData:z,swiping:!0})})},i=d=>{n((g,m)=>{let v;if(g.swiping&&g.eventData){if(d.timeStamp-g.start<m.swipeDuration){v=Object.assign(Object.assign({},g.eventData),{event:d}),m.onSwiped&&m.onSwiped(v);const w=m[`onSwiped${v.dir}`];w&&w(v)}}else m.onTap&&m.onTap({event:d});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},g),a2),{eventData:v})})},s=()=>{document.removeEventListener(qI,r),document.removeEventListener(YI,a)},a=d=>{s(),i(d)},o=(d,g)=>{let m=()=>{};if(d&&d.addEventListener){const v=Object.assign(Object.assign({},$u.touchEventOptions),g.touchEventOptions),w=[[WF,e,v],[GF,r,Object.assign(Object.assign({},v),g.preventScrollOnSwipe?{passive:!1}:{})],[HF,i,v]];w.forEach(([b,E,S])=>d.addEventListener(b,E,S)),m=()=>w.forEach(([b,E])=>d.removeEventListener(b,E))}return m},h={ref:d=>{d!==null&&n((g,m)=>{if(g.el===d)return g;const v={};return g.el&&g.el!==d&&g.cleanUpTouch&&(g.cleanUpTouch(),v.cleanUpTouch=void 0),m.trackTouch&&d&&(v.cleanUpTouch=o(d,m)),Object.assign(Object.assign(Object.assign({},g),{el:d}),v)})}};return t.trackMouse&&(h.onMouseDown=e),[h,o]}function XF(n,t,e,r){return!t.trackTouch||!n.el?(n.cleanUpTouch&&n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:void 0})):n.cleanUpTouch?t.preventScrollOnSwipe!==e.preventScrollOnSwipe||t.touchEventOptions.passive!==e.touchEventOptions.passive?(n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})):n:Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})}function KF(n){const{trackMouse:t}=n,e=rt.useRef(Object.assign({},a2)),r=rt.useRef(Object.assign({},$u)),i=rt.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},$u),n);let s;for(s in $u)r.current[s]===void 0&&(r.current[s]=$u[s]);const[a,o]=rt.useMemo(()=>YF(l=>e.current=l(e.current,r.current),{trackMouse:t}),[t]);return e.current=XF(e.current,r.current,i.current,o),a}const AM=rt.createContext({});function $F(n){const t=rt.useRef(null);return t.current===null&&(t.current=n()),t.current}const tb=typeof window<"u",QF=tb?rt.useLayoutEffect:rt.useEffect,eb=rt.createContext(null);function nb(n,t){n.indexOf(t)===-1&&n.push(t)}function rb(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Na=(n,t,e)=>e>t?t:e<n?n:e;let ib=()=>{};const Pa={},TM=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function SM(n){return typeof n=="object"&&n!==null}const CM=n=>/^0[^.\s]+$/u.test(n);function sb(n){let t;return()=>(t===void 0&&(t=n()),t)}const Fi=n=>n,ZF=(n,t)=>e=>t(n(e)),Ug=(...n)=>n.reduce(ZF),mg=(n,t,e)=>{const r=t-n;return r===0?1:(e-n)/r};class ab{constructor(){this.subscriptions=[]}add(t){return nb(this.subscriptions,t),()=>rb(this.subscriptions,t)}notify(t,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Us=n=>n*1e3,js=n=>n/1e3;function IM(n,t){return t?n*(1e3/t):0}const RM=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,JF=1e-7,tU=12;function eU(n,t,e,r,i){let s,a,o=0;do a=t+(e-t)/2,s=RM(a,r,i)-n,s>0?e=a:t=a;while(Math.abs(s)>JF&&++o<tU);return a}function jg(n,t,e,r){if(n===t&&e===r)return Fi;const i=s=>eU(s,0,1,n,e);return s=>s===0||s===1?s:RM(i(s),t,r)}const DM=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,OM=n=>t=>1-n(1-t),MM=jg(.33,1.53,.69,.99),ob=OM(MM),NM=DM(ob),PM=n=>(n*=2)<1?.5*ob(n):.5*(2-Math.pow(2,-10*(n-1))),cb=n=>1-Math.sin(Math.acos(n)),kM=OM(cb),LM=DM(cb),nU=jg(.42,0,1,1),rU=jg(0,0,.58,1),VM=jg(.42,0,.58,1),iU=n=>Array.isArray(n)&&typeof n[0]!="number",BM=n=>Array.isArray(n)&&typeof n[0]=="number",sU={linear:Fi,easeIn:nU,easeInOut:VM,easeOut:rU,circIn:cb,circInOut:LM,circOut:kM,backIn:ob,backInOut:NM,backOut:MM,anticipate:PM},aU=n=>typeof n=="string",KI=n=>{if(BM(n)){ib(n.length===4);const[t,e,r,i]=n;return jg(t,e,r,i)}else if(aU(n))return sU[n];return n},z0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oU(n,t){let e=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(h.schedule(d),n()),d(o)}const h={schedule:(d,g=!1,m=!1)=>{const w=m&&i?e:r;return g&&a.add(d),w.has(d)||w.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[e,r]=[r,e],e.forEach(l),e.clear(),i=!1,s&&(s=!1,h.process(d))}};return h}const cU=40;function FM(n,t){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,a=z0.reduce((I,k)=>(I[k]=oU(s),I),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:d,update:g,preRender:m,render:v,postRender:w}=a,b=()=>{const I=Pa.useManualTiming?i.timestamp:performance.now();e=!1,Pa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,cU),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),l.process(i),h.process(i),d.process(i),g.process(i),m.process(i),v.process(i),w.process(i),i.isProcessing=!1,e&&t&&(r=!1,n(b))},E=()=>{e=!0,r=!0,i.isProcessing||n(b)};return{schedule:z0.reduce((I,k)=>{const P=a[k];return I[k]=(j,M=!1,C=!1)=>(e||E(),P.schedule(j,M,C)),I},{}),cancel:I=>{for(let k=0;k<z0.length;k++)a[z0[k]].cancel(I)},state:i,steps:a}}const{schedule:cn,cancel:Ko,state:_r,steps:L_}=FM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fi,!0);let pm;function lU(){pm=void 0}const Zr={now:()=>(pm===void 0&&Zr.set(_r.isProcessing||Pa.useManualTiming?_r.timestamp:performance.now()),pm),set:n=>{pm=n,queueMicrotask(lU)}},UM=n=>t=>typeof t=="string"&&t.startsWith(n),lb=UM("--"),uU=UM("var(--"),ub=n=>uU(n)?hU.test(n.split("/*")[0].trim()):!1,hU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},yg={...Fh,transform:n=>Na(0,1,n)},H0={...Fh,default:1},Gd=n=>Math.round(n*1e5)/1e5,hb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fU(n){return n==null}const dU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fb=(n,t)=>e=>!!(typeof e=="string"&&dU.test(e)&&e.startsWith(n)||t&&!fU(e)&&Object.prototype.hasOwnProperty.call(e,t)),jM=(n,t,e)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(hb);return{[n]:parseFloat(i),[t]:parseFloat(s),[e]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},gU=n=>Na(0,255,n),V_={...Fh,transform:n=>Math.round(gU(n))},al={test:fb("rgb","red"),parse:jM("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:r=1})=>"rgba("+V_.transform(n)+", "+V_.transform(t)+", "+V_.transform(e)+", "+Gd(yg.transform(r))+")"};function pU(n){let t="",e="",r="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const o2={test:fb("#"),parse:pU,transform:al.transform},zg=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Co=zg("deg"),zs=zg("%"),Xt=zg("px"),mU=zg("vh"),yU=zg("vw"),$I={...zs,parse:n=>zs.parse(n)/100,transform:n=>zs.transform(n*100)},Qu={test:fb("hsl","hue"),parse:jM("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:r=1})=>"hsla("+Math.round(n)+", "+zs.transform(Gd(t))+", "+zs.transform(Gd(e))+", "+Gd(yg.transform(r))+")"},Bn={test:n=>al.test(n)||o2.test(n)||Qu.test(n),parse:n=>al.test(n)?al.parse(n):Qu.test(n)?Qu.parse(n):o2.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?al.transform(n):Qu.transform(n),getAnimatableNone:n=>{const t=Bn.parse(n);return t.alpha=0,Bn.transform(t)}},vU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _U(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(hb))==null?void 0:t.length)||0)+(((e=n.match(vU))==null?void 0:e.length)||0)>0}const zM="number",HM="color",xU="var",wU="var(",QI="${}",bU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vg(n){const t=n.toString(),e=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(bU,l=>(Bn.test(l)?(r.color.push(s),i.push(HM),e.push(Bn.parse(l))):l.startsWith(wU)?(r.var.push(s),i.push(xU),e.push(l)):(r.number.push(s),i.push(zM),e.push(parseFloat(l))),++s,QI)).split(QI);return{values:e,split:o,indexes:r,types:i}}function GM(n){return vg(n).values}function WM(n){const{split:t,types:e}=vg(n),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=e[a];o===zM?s+=Gd(i[a]):o===HM?s+=Bn.transform(i[a]):s+=i[a]}return s}}const EU=n=>typeof n=="number"?0:Bn.test(n)?Bn.getAnimatableNone(n):n;function AU(n){const t=GM(n);return WM(n)(t.map(EU))}const $o={test:_U,parse:GM,createTransformer:WM,getAnimatableNone:AU};function B_(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function TU({hue:n,saturation:t,lightness:e,alpha:r}){n/=360,t/=100,e/=100;let i=0,s=0,a=0;if(!t)i=s=a=e;else{const o=e<.5?e*(1+t):e+t-e*t,l=2*e-o;i=B_(l,o,n+1/3),s=B_(l,o,n),a=B_(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Ym(n,t){return e=>e>0?t:n}const fn=(n,t,e)=>n+(t-n)*e,F_=(n,t,e)=>{const r=n*n,i=e*(t*t-r)+r;return i<0?0:Math.sqrt(i)},SU=[o2,al,Qu],CU=n=>SU.find(t=>t.test(n));function ZI(n){const t=CU(n);if(!t)return!1;let e=t.parse(n);return t===Qu&&(e=TU(e)),e}const JI=(n,t)=>{const e=ZI(n),r=ZI(t);if(!e||!r)return Ym(n,t);const i={...e};return s=>(i.red=F_(e.red,r.red,s),i.green=F_(e.green,r.green,s),i.blue=F_(e.blue,r.blue,s),i.alpha=fn(e.alpha,r.alpha,s),al.transform(i))},c2=new Set(["none","hidden"]);function IU(n,t){return c2.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function RU(n,t){return e=>fn(n,t,e)}function db(n){return typeof n=="number"?RU:typeof n=="string"?ub(n)?Ym:Bn.test(n)?JI:MU:Array.isArray(n)?qM:typeof n=="object"?Bn.test(n)?JI:DU:Ym}function qM(n,t){const e=[...n],r=e.length,i=n.map((s,a)=>db(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)e[a]=i[a](s);return e}}function DU(n,t){const e={...n,...t},r={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(r[i]=db(n[i])(n[i],t[i]));return i=>{for(const s in r)e[s]=r[s](i);return e}}function OU(n,t){const e=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=n.indexes[s][r[s]],o=n.values[a]??0;e[i]=o,r[s]++}return e}const MU=(n,t)=>{const e=$o.createTransformer(t),r=vg(n),i=vg(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?c2.has(n)&&!i.values.length||c2.has(t)&&!r.values.length?IU(n,t):Ug(qM(OU(r,i),i.values),e):Ym(n,t)};function YM(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?fn(n,t,e):db(n)(n,t)}const NU=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>cn.update(t,e),stop:()=>Ko(t),now:()=>_r.isProcessing?_r.timestamp:Zr.now()}},XM=(n,t,e=10)=>{let r="";const i=Math.max(Math.round(t/e),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Xm=2e4;function gb(n){let t=0;const e=50;let r=n.next(t);for(;!r.done&&t<Xm;)t+=e,r=n.next(t);return t>=Xm?1/0:t}function PU(n,t=100,e){const r=e({...n,keyframes:[0,t]}),i=Math.min(gb(r),Xm);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:js(i)}}const kU=5;function KM(n,t,e){const r=Math.max(t-kU,0);return IM(e-n(r),t-r)}const yn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},U_=.001;function LU({duration:n=yn.duration,bounce:t=yn.bounce,velocity:e=yn.velocity,mass:r=yn.mass}){let i,s,a=1-t;a=Na(yn.minDamping,yn.maxDamping,a),n=Na(yn.minDuration,yn.maxDuration,js(n)),a<1?(i=h=>{const d=h*a,g=d*n,m=d-e,v=l2(h,a),w=Math.exp(-g);return U_-m/v*w},s=h=>{const g=h*a*n,m=g*e+e,v=Math.pow(a,2)*Math.pow(h,2)*n,w=Math.exp(-g),b=l2(Math.pow(h,2),a);return(-i(h)+U_>0?-1:1)*((m-v)*w)/b}):(i=h=>{const d=Math.exp(-h*n),g=(h-e)*n+1;return-U_+d*g},s=h=>{const d=Math.exp(-h*n),g=(e-h)*(n*n);return d*g});const o=5/n,l=BU(i,s,o);if(n=Us(n),isNaN(l))return{stiffness:yn.stiffness,damping:yn.damping,duration:n};{const h=Math.pow(l,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const VU=12;function BU(n,t,e){let r=e;for(let i=1;i<VU;i++)r=r-n(r)/t(r);return r}function l2(n,t){return n*Math.sqrt(1-t*t)}const FU=["duration","bounce"],UU=["stiffness","damping","mass"];function t3(n,t){return t.some(e=>n[e]!==void 0)}function jU(n){let t={velocity:yn.velocity,stiffness:yn.stiffness,damping:yn.damping,mass:yn.mass,isResolvedFromDuration:!1,...n};if(!t3(n,UU)&&t3(n,FU))if(n.visualDuration){const e=n.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,s=2*Na(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:yn.mass,stiffness:i,damping:s}}else{const e=LU(n);t={...t,...e,mass:yn.mass},t.isResolvedFromDuration=!0}return t}function Km(n=yn.visualDuration,t=yn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:i}=e;const s=e.keyframes[0],a=e.keyframes[e.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:h,mass:d,duration:g,velocity:m,isResolvedFromDuration:v}=jU({...e,velocity:-js(e.velocity||0)}),w=m||0,b=h/(2*Math.sqrt(l*d)),E=a-s,S=js(Math.sqrt(l/d)),T=Math.abs(E)<5;r||(r=T?yn.restSpeed.granular:yn.restSpeed.default),i||(i=T?yn.restDelta.granular:yn.restDelta.default);let I;if(b<1){const P=l2(S,b);I=j=>{const M=Math.exp(-b*S*j);return a-M*((w+b*S*E)/P*Math.sin(P*j)+E*Math.cos(P*j))}}else if(b===1)I=P=>a-Math.exp(-S*P)*(E+(w+S*E)*P);else{const P=S*Math.sqrt(b*b-1);I=j=>{const M=Math.exp(-b*S*j),C=Math.min(P*j,300);return a-M*((w+b*S*E)*Math.sinh(C)+P*E*Math.cosh(C))/P}}const k={calculatedDuration:v&&g||null,next:P=>{const j=I(P);if(v)o.done=P>=g;else{let M=P===0?w:0;b<1&&(M=P===0?Us(w):KM(I,P,j));const C=Math.abs(M)<=r,N=Math.abs(a-j)<=i;o.done=C&&N}return o.value=o.done?a:j,o},toString:()=>{const P=Math.min(gb(k),Xm),j=XM(M=>k.next(P*M).value,P,30);return P+"ms "+j},toTransition:()=>{}};return k}Km.applyToOptions=n=>{const t=PU(n,100,Km);return n.ease=t.ease,n.duration=Us(t.duration),n.type="keyframes",n};function u2({keyframes:n,velocity:t=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:d}){const g=n[0],m={done:!1,value:g},v=C=>o!==void 0&&C<o||l!==void 0&&C>l,w=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let b=e*t;const E=g+b,S=a===void 0?E:a(E);S!==E&&(b=S-g);const T=C=>-b*Math.exp(-C/r),I=C=>S+T(C),k=C=>{const N=T(C),B=I(C);m.done=Math.abs(N)<=h,m.value=m.done?S:B};let P,j;const M=C=>{v(m.value)&&(P=C,j=Km({keyframes:[m.value,w(m.value)],velocity:KM(I,C,m.value),damping:i,stiffness:s,restDelta:h,restSpeed:d}))};return M(0),{calculatedDuration:null,next:C=>{let N=!1;return!j&&P===void 0&&(N=!0,k(C),M(C)),P!==void 0&&C>=P?j.next(C-P):(!N&&k(C),m)}}}function zU(n,t,e){const r=[],i=e||Pa.mix||YM,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(t){const l=Array.isArray(t)?t[a]||Fi:t;o=Ug(l,o)}r.push(o)}return r}function HU(n,t,{clamp:e=!0,ease:r,mixer:i}={}){const s=n.length;if(ib(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=zU(t,r,i),l=o.length,h=d=>{if(a&&d<n[0])return t[0];let g=0;if(l>1)for(;g<n.length-2&&!(d<n[g+1]);g++);const m=mg(n[g],n[g+1],d);return o[g](m)};return e?d=>h(Na(n[0],n[s-1],d)):h}function GU(n,t){const e=n[n.length-1];for(let r=1;r<=t;r++){const i=mg(0,t,r);n.push(fn(e,1,i))}}function WU(n){const t=[0];return GU(t,n.length-1),t}function qU(n,t){return n.map(e=>e*t)}function YU(n,t){return n.map(()=>t||VM).splice(0,n.length-1)}function Wd({duration:n=300,keyframes:t,times:e,ease:r="easeInOut"}){const i=iU(r)?r.map(KI):KI(r),s={done:!1,value:t[0]},a=qU(e&&e.length===t.length?e:WU(t),n),o=HU(a,t,{ease:Array.isArray(i)?i:YU(t,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const XU=n=>n!==null;function pb(n,{repeat:t,repeatType:e="loop"},r,i=1){const s=n.filter(XU),o=i<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const KU={decay:u2,inertia:u2,tween:Wd,keyframes:Wd,spring:Km};function $M(n){typeof n.type=="string"&&(n.type=KU[n.type])}class mb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const $U=n=>n/100;class yb extends mb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:e}=this.options;e&&e.updatedAt!==Zr.now()&&this.tick(Zr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;$M(t);const{type:e=Wd,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=e||Wd;l!==Wd&&typeof o[0]!="number"&&(this.mixKeyframes=Ug($U,YM(o[0],o[1])),o=[0,100]);const h=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=gb(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:d,repeat:g,repeatType:m,repeatDelay:v,type:w,onUpdate:b,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const S=this.currentTime-h*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,k=r;if(g){const C=Math.min(this.currentTime,i)/o;let N=Math.floor(C),B=C%1;!B&&C>=1&&(B=1),B===1&&N--,N=Math.min(N,g+1),!!(N%2)&&(m==="reverse"?(B=1-B,v&&(B-=v/o)):m==="mirror"&&(k=a)),I=Na(0,1,B)*o}const P=T?{done:!1,value:d[0]}:k.next(I);s&&(P.value=s(P.value));let{done:j}=P;!T&&l!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return M&&w!==u2&&(P.value=pb(d,this.options,E,this.speed)),b&&b(P.value),M&&this.finish(),P}then(t,e){return this.finished.then(t,e)}get duration(){return js(this.calculatedDuration)}get time(){return js(this.currentTime)}set time(t){var e;t=Us(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Zr.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=js(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=NU,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function QU(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const ol=n=>n*180/Math.PI,h2=n=>{const t=ol(Math.atan2(n[1],n[0]));return f2(t)},ZU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:h2,rotateZ:h2,skewX:n=>ol(Math.atan(n[1])),skewY:n=>ol(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},f2=n=>(n=n%360,n<0&&(n+=360),n),e3=h2,n3=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),r3=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),JU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:n3,scaleY:r3,scale:n=>(n3(n)+r3(n))/2,rotateX:n=>f2(ol(Math.atan2(n[6],n[5]))),rotateY:n=>f2(ol(Math.atan2(-n[2],n[0]))),rotateZ:e3,rotate:e3,skewX:n=>ol(Math.atan(n[4])),skewY:n=>ol(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function d2(n){return n.includes("scale")?1:0}function g2(n,t){if(!n||n==="none")return d2(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=JU,i=e;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ZU,i=o}if(!i)return d2(t);const s=r[t],a=i[1].split(",").map(ej);return typeof s=="function"?s(a):a[s]}const tj=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return g2(e,t)};function ej(n){return parseFloat(n.trim())}const Uh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jh=new Set(Uh),i3=n=>n===Fh||n===Xt,nj=new Set(["x","y","z"]),rj=Uh.filter(n=>!nj.has(n));function ij(n){const t=[];return rj.forEach(e=>{const r=n.getValue(e);r!==void 0&&(t.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),t}const dl={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>g2(t,"x"),y:(n,{transform:t})=>g2(t,"y")};dl.translateX=dl.x;dl.translateY=dl.y;const gl=new Set;let p2=!1,m2=!1,y2=!1;function QM(){if(m2){const n=Array.from(gl).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),e=new Map;t.forEach(r=>{const i=ij(r);i.length&&(e.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}m2=!1,p2=!1,gl.forEach(n=>n.complete(y2)),gl.clear()}function ZM(){gl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(m2=!0)})}function sj(){y2=!0,ZM(),QM(),y2=!1}class vb{constructor(t,e,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(gl.add(this),p2||(p2=!0,cn.read(ZM),cn.resolveKeyframes(QM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&e){const o=r.readValue(e,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}QU(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),gl.delete(this)}cancel(){this.state==="scheduled"&&(gl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const aj=n=>n.startsWith("--");function oj(n,t,e){aj(t)?n.style.setProperty(t,e):n.style[t]=e}const cj=sb(()=>window.ScrollTimeline!==void 0),lj={};function uj(n,t){const e=sb(n);return()=>lj[t]??e()}const JM=uj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cd=([n,t,e,r])=>`cubic-bezier(${n}, ${t}, ${e}, ${r})`,s3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cd([0,.65,.55,1]),circOut:Cd([.55,0,1,.45]),backIn:Cd([.31,.01,.66,-.59]),backOut:Cd([.33,1.53,.69,.99])};function tN(n,t){if(n)return typeof n=="function"?JM()?XM(n,t):"ease-out":BM(n)?Cd(n):Array.isArray(n)?n.map(e=>tN(e,t)||s3.easeOut):s3[n]}function hj(n,t,e,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h=void 0){const d={[t]:e};l&&(d.offset=l);const g=tN(o,i);Array.isArray(g)&&(d.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),n.animate(d,m)}function eN(n){return typeof n=="function"&&"applyToOptions"in n}function fj({type:n,...t}){return eN(n)&&JM()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class dj extends mb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,ib(typeof t.type!="string");const h=fj(t);this.animation=hj(e,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=pb(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):oj(e,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,r;const t=((r=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:r.call(e).duration)||0;return js(Number(t))}get time(){return js(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Us(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&cj()?(this.animation.timeline=t,Fi):e(this)}}const nN={anticipate:PM,backInOut:NM,circInOut:LM};function gj(n){return n in nN}function pj(n){typeof n.ease=="string"&&gj(n.ease)&&(n.ease=nN[n.ease])}const a3=10;class mj extends dj{constructor(t){pj(t),$M(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const o=new yb({...a,autoplay:!1}),l=Us(this.finishedTime??this.time);e.setWithVelocity(o.sample(l-a3).value,o.sample(l).value,a3),o.stop()}}const o3=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&($o.test(n)||n==="0")&&!n.startsWith("url("));function yj(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function vj(n,t,e,r){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],a=o3(i,t),o=o3(s,t);return!a||!o?!1:yj(n)||(e==="spring"||eN(e))&&r}function v2(n){n.duration=0,n.type}const _j=new Set(["opacity","clipPath","filter","transform"]),xj=sb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wj(n){var d;const{motionValue:t,name:e,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=t.owner.getProps();return xj()&&e&&_j.has(e)&&(e!=="transform"||!h)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const bj=40;class Ej extends mb{constructor({autoplay:t=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:h,element:d,...g}){var w;super(),this.stop=()=>{var b,E;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Zr.now();const m={autoplay:t,delay:e,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:h,element:d,...g},v=(d==null?void 0:d.KeyframeResolver)||vb;this.keyframeResolver=new v(o,(b,E,S)=>this.onKeyframesResolved(b,E,m,!S),l,h,d),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,e,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:h,onUpdate:d}=r;this.resolvedAt=Zr.now(),vj(t,s,a,o)||((Pa.instantAnimations||!l)&&(d==null||d(pb(t,r,e))),t[0]=t[t.length-1],v2(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>bj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:t},v=!h&&wj(m)?new mj({...m,element:m.motionValue.owner.current}):new yb(m);v.finished.then(()=>this.notifyFinished()).catch(Fi),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),sj()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Aj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Tj(n){const t=Aj.exec(n);if(!t)return[,];const[,e,r,i]=t;return[`--${e??r}`,i]}function rN(n,t,e=1){const[r,i]=Tj(n);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return TM(a)?parseFloat(a):a}return ub(i)?rN(i,t,e+1):i}function _b(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const iN=new Set(["width","height","top","left","right","bottom",...Uh]),Sj={test:n=>n==="auto",parse:n=>n},sN=n=>t=>t.test(n),aN=[Fh,Xt,zs,Co,yU,mU,Sj],c3=n=>aN.find(sN(n));function Cj(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||CM(n):!0}const Ij=new Set(["brightness","contrast","saturate","opacity"]);function Rj(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=e.match(hb)||[];if(!r)return n;const i=e.replace(r,"");let s=Ij.has(t)?1:0;return r!==e&&(s*=100),t+"("+s+i+")"}const Dj=/\b([a-z-]*)\(.*?\)/gu,_2={...$o,getAnimatableNone:n=>{const t=n.match(Dj);return t?t.map(Rj).join(" "):n}},l3={...Fh,transform:Math.round},Oj={rotate:Co,rotateX:Co,rotateY:Co,rotateZ:Co,scale:H0,scaleX:H0,scaleY:H0,scaleZ:H0,skew:Co,skewX:Co,skewY:Co,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:yg,originX:$I,originY:$I,originZ:Xt},xb={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...Oj,zIndex:l3,fillOpacity:yg,strokeOpacity:yg,numOctaves:l3},Mj={...xb,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:_2,WebkitFilter:_2},oN=n=>Mj[n];function cN(n,t){let e=oN(n);return e!==_2&&(e=$o),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Nj=new Set(["auto","none","0"]);function Pj(n,t,e){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Nj.has(s)&&vg(s).values.length&&(i=n[r]),r++}if(i&&e)for(const s of t)n[s]=cN(e,i)}class kj extends vb{constructor(t,e,r,i,s){super(t,e,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),ub(h))){const d=rN(h,e.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!iN.has(r)||t.length!==2)return;const[i,s]=t,a=c3(i),o=c3(s);if(a!==o)if(i3(a)&&i3(o))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else dl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||Cj(t[i]))&&r.push(i);r.length&&Pj(t,r,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:e,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=dl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,h])=>{t.getValue(l).set(h)}),this.resolveNoneKeyframes()}}function Lj(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(e==null?void 0:e[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const lN=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function Vj(n){return SM(n)&&"offsetHeight"in n}const u3=30,Bj=n=>!isNaN(parseFloat(n));class Fj{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Zr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Zr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Bj(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ab);const r=this.events[t].add(e);return t==="change"?()=>{r(),cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>u3)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,u3);return IM(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gh(n,t){return new Fj(n,t)}const{schedule:wb}=FM(queueMicrotask,!1),Zi={x:!1,y:!1};function uN(){return Zi.x||Zi.y}function Uj(n){return n==="x"||n==="y"?Zi[n]?null:(Zi[n]=!0,()=>{Zi[n]=!1}):Zi.x||Zi.y?null:(Zi.x=Zi.y=!0,()=>{Zi.x=Zi.y=!1})}function hN(n,t){const e=Lj(n),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[e,i,()=>r.abort()]}function h3(n){return!(n.pointerType==="touch"||uN())}function jj(n,t,e={}){const[r,i,s]=hN(n,e),a=o=>{if(!h3(o))return;const{target:l}=o,h=t(l,o);if(typeof h!="function"||!l)return;const d=g=>{h3(g)&&(h(g),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const fN=(n,t)=>t?n===t?!0:fN(n,t.parentElement):!1,bb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,zj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Hj(n){return zj.has(n.tagName)||n.tabIndex!==-1}const mm=new WeakSet;function f3(n){return t=>{t.key==="Enter"&&n(t)}}function j_(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Gj=(n,t)=>{const e=n.currentTarget;if(!e)return;const r=f3(()=>{if(mm.has(e))return;j_(e,"down");const i=f3(()=>{j_(e,"up")}),s=()=>j_(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",r,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),t)};function d3(n){return bb(n)&&!uN()}function Wj(n,t,e={}){const[r,i,s]=hN(n,e),a=o=>{const l=o.currentTarget;if(!d3(o))return;mm.add(l);const h=t(l,o),d=(v,w)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),mm.has(l)&&mm.delete(l),d3(v)&&typeof h=="function"&&h(v,{success:w})},g=v=>{d(v,l===window||l===document||e.useGlobalTarget||fN(l,v.target))},m=v=>{d(v,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(e.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),Vj(o)&&(o.addEventListener("focus",h=>Gj(h,i)),!Hj(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function dN(n){return SM(n)&&"ownerSVGElement"in n}function qj(n){return dN(n)&&n.tagName==="svg"}const Dr=n=>!!(n&&n.getVelocity),Yj=[...aN,Bn,$o],Xj=n=>Yj.find(sN(n)),gN=rt.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Kj(n=!0){const t=rt.useContext(eb);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,s=rt.useId();rt.useEffect(()=>{if(n)return i(s)},[n]);const a=rt.useCallback(()=>n&&r&&r(s),[s,r,n]);return!e&&r?[!1,a]:[!0]}const pN=rt.createContext({strict:!1}),g3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ph={};for(const n in g3)ph[n]={isEnabled:t=>g3[n].some(e=>!!t[e])};function $j(n){for(const t in n)ph[t]={...ph[t],...n[t]}}const Qj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $m(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Qj.has(n)}let mN=n=>!$m(n);function Zj(n){typeof n=="function"&&(mN=t=>t.startsWith("on")?!$m(t):n(t))}try{Zj(require("@emotion/is-prop-valid").default)}catch{}function Jj(n,t,e){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(mN(i)||e===!0&&$m(i)||!t&&!$m(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const P1=rt.createContext({});function k1(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function _g(n){return typeof n=="string"||Array.isArray(n)}const Eb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ab=["initial",...Eb];function L1(n){return k1(n.animate)||Ab.some(t=>_g(n[t]))}function yN(n){return!!(L1(n)||n.variants)}function tz(n,t){if(L1(n)){const{initial:e,animate:r}=n;return{initial:e===!1||_g(e)?e:void 0,animate:_g(r)?r:void 0}}return n.inherit!==!1?t:{}}function ez(n){const{initial:t,animate:e}=tz(n,rt.useContext(P1));return rt.useMemo(()=>({initial:t,animate:e}),[p3(t),p3(e)])}function p3(n){return Array.isArray(n)?n.join(" "):n}const xg={};function nz(n){for(const t in n)xg[t]=n[t],lb(t)&&(xg[t].isCSSVariable=!0)}function vN(n,{layout:t,layoutId:e}){return jh.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!xg[n]||n==="opacity")}const rz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iz=Uh.length;function sz(n,t,e){let r="",i=!0;for(let s=0;s<iz;s++){const a=Uh[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||e){const h=lN(o,xb[a]);if(!l){i=!1;const d=rz[a]||a;r+=`${d}(${h}) `}e&&(t[a]=h)}}return r=r.trim(),e?r=e(t,i?"":r):i&&(r="none"),r}function Tb(n,t,e){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in t){const h=t[l];if(jh.has(l)){a=!0;continue}else if(lb(l)){i[l]=h;continue}else{const d=lN(h,xb[l]);l.startsWith("origin")?(o=!0,s[l]=d):r[l]=d}}if(t.transform||(a||e?r.transform=sz(t,n.transform,e):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${h} ${d}`}}const Sb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _N(n,t,e){for(const r in t)!Dr(t[r])&&!vN(r,e)&&(n[r]=t[r])}function az({transformTemplate:n},t){return rt.useMemo(()=>{const e=Sb();return Tb(e,t,n),Object.assign({},e.vars,e.style)},[t])}function oz(n,t){const e=n.style||{},r={};return _N(r,e,n),Object.assign(r,az(n,t)),r}function cz(n,t){const e={},r=oz(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=r,e}const lz={offset:"stroke-dashoffset",array:"stroke-dasharray"},uz={offset:"strokeDashoffset",array:"strokeDasharray"};function hz(n,t,e=1,r=0,i=!0){n.pathLength=1;const s=i?lz:uz;n[s.offset]=Xt.transform(-r);const a=Xt.transform(t),o=Xt.transform(e);n[s.array]=`${a} ${o}`}function xN(n,{attrX:t,attrY:e,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,h,d){if(Tb(n,o,h),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:m}=n;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),r!==void 0&&(g.scale=r),i!==void 0&&hz(g,i,s,a,!1)}const wN=()=>({...Sb(),attrs:{}}),bN=n=>typeof n=="string"&&n.toLowerCase()==="svg";function fz(n,t,e,r){const i=rt.useMemo(()=>{const s=wN();return xN(s,t,bN(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};_N(s,n.style,n),i.style={...s,...i.style}}return i}const dz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cb(n){return typeof n!="string"||n.includes("-")?!1:!!(dz.indexOf(n)>-1||/[A-Z]/u.test(n))}function gz(n,t,e,{latestValues:r},i,s=!1){const o=(Cb(n)?fz:cz)(t,r,i,n),l=Jj(t,typeof n=="string",s),h=n!==rt.Fragment?{...l,...o,ref:e}:{},{children:d}=t,g=rt.useMemo(()=>Dr(d)?d.get():d,[d]);return rt.createElement(n,{...h,children:g})}function m3(n){const t=[{},{}];return n==null||n.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function Ib(n,t,e,r){if(typeof t=="function"){const[i,s]=m3(r);t=t(e!==void 0?e:n.custom,i,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,s]=m3(r);t=t(e!==void 0?e:n.custom,i,s)}return t}function ym(n){return Dr(n)?n.get():n}function pz({scrapeMotionValuesFromProps:n,createRenderState:t},e,r,i){return{latestValues:mz(e,r,i,n),renderState:t()}}function mz(n,t,e,r){const i={},s=r(n,{});for(const m in s)i[m]=ym(s[m]);let{initial:a,animate:o}=n;const l=L1(n),h=yN(n);t&&h&&!l&&n.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=e?e.initial===!1:!1;d=d||a===!1;const g=d?o:a;if(g&&typeof g!="boolean"&&!k1(g)){const m=Array.isArray(g)?g:[g];for(let v=0;v<m.length;v++){const w=Ib(n,m[v]);if(w){const{transitionEnd:b,transition:E,...S}=w;for(const T in S){let I=S[T];if(Array.isArray(I)){const k=d?I.length-1:0;I=I[k]}I!==null&&(i[T]=I)}for(const T in b)i[T]=b[T]}}}return i}const EN=n=>(t,e)=>{const r=rt.useContext(P1),i=rt.useContext(eb),s=()=>pz(n,t,r,i);return e?s():$F(s)};function Rb(n,t,e){var s;const{style:r}=n,i={};for(const a in r)(Dr(r[a])||t.style&&Dr(t.style[a])||vN(a,n)||((s=e==null?void 0:e.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const yz=EN({scrapeMotionValuesFromProps:Rb,createRenderState:Sb});function AN(n,t,e){const r=Rb(n,t,e);for(const i in n)if(Dr(n[i])||Dr(t[i])){const s=Uh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const vz=EN({scrapeMotionValuesFromProps:AN,createRenderState:wN}),_z=Symbol.for("motionComponentSymbol");function Zu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function xz(n,t,e){return rt.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),e&&(typeof e=="function"?e(r):Zu(e)&&(e.current=r))},[t])}const Db=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wz="framerAppearId",TN="data-"+Db(wz),SN=rt.createContext({});function bz(n,t,e,r,i){var b,E;const{visualElement:s}=rt.useContext(P1),a=rt.useContext(pN),o=rt.useContext(eb),l=rt.useContext(gN).reducedMotion,h=rt.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(n,{visualState:t,parent:s,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=h.current,g=rt.useContext(SN);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&Ez(h.current,e,i,g);const m=rt.useRef(!1);rt.useInsertionEffect(()=>{d&&m.current&&d.update(e,o)});const v=e[TN],w=rt.useRef(!!v&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,v))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,v)));return QF(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),w.current&&d.animationState&&d.animationState.animateChanges())}),rt.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,v)}),w.current=!1))}),d}function Ez(n,t,e,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:d}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:CN(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Zu(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:h})}function CN(n){if(n)return n.options.allowProjection!==!1?n.projection:CN(n.parent)}function z_(n,{forwardMotionProps:t=!1}={},e,r){e&&$j(e);const i=Cb(n)?vz:yz;function s(o,l){let h;const d={...rt.useContext(gN),...o,layoutId:Az(o)},{isStatic:g}=d,m=ez(o),v=i(o,g);if(!g&&tb){Tz();const w=Sz(d);h=w.MeasureLayout,m.visualElement=bz(n,v,d,r,w.ProjectionNode)}return O.jsxs(P1.Provider,{value:m,children:[h&&m.visualElement?O.jsx(h,{visualElement:m.visualElement,...d}):null,gz(n,o,xz(v,m.visualElement,l),v,g,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=rt.forwardRef(s);return a[_z]=n,a}function Az({layoutId:n}){const t=rt.useContext(AM).id;return t&&n!==void 0?t+"-"+n:n}function Tz(n,t){rt.useContext(pN).strict}function Sz(n){const{drag:t,layout:e}=ph;if(!t&&!e)return{};const r={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Cz(n,t){if(typeof Proxy>"u")return z_;const e=new Map,r=(s,a)=>z_(s,a,n,t),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(e.has(a)||e.set(a,z_(a,void 0,n,t)),e.get(a))})}function IN({top:n,left:t,right:e,bottom:r}){return{x:{min:t,max:e},y:{min:n,max:r}}}function Iz({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function Rz(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function H_(n){return n===void 0||n===1}function x2({scale:n,scaleX:t,scaleY:e}){return!H_(n)||!H_(t)||!H_(e)}function Xc(n){return x2(n)||RN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function RN(n){return y3(n.x)||y3(n.y)}function y3(n){return n&&n!=="0%"}function Qm(n,t,e){const r=n-e,i=t*r;return e+i}function v3(n,t,e,r,i){return i!==void 0&&(n=Qm(n,i,r)),Qm(n,e,r)+t}function w2(n,t=0,e=1,r,i){n.min=v3(n.min,t,e,r,i),n.max=v3(n.max,t,e,r,i)}function DN(n,{x:t,y:e}){w2(n.x,t.translate,t.scale,t.originPoint),w2(n.y,e.translate,e.scale,e.originPoint)}const _3=.999999999999,x3=1.0000000000001;function Dz(n,t,e,r=!1){const i=e.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=e[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&th(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,DN(n,a)),r&&Xc(s.latestValues)&&th(n,s.latestValues))}t.x<x3&&t.x>_3&&(t.x=1),t.y<x3&&t.y>_3&&(t.y=1)}function Ju(n,t){n.min=n.min+t,n.max=n.max+t}function w3(n,t,e,r,i=.5){const s=fn(n.min,n.max,i);w2(n,t,e,s,r)}function th(n,t){w3(n.x,t.x,t.scaleX,t.scale,t.originX),w3(n.y,t.y,t.scaleY,t.scale,t.originY)}function ON(n,t){return IN(Rz(n.getBoundingClientRect(),t))}function Oz(n,t,e){const r=ON(n,e),{scroll:i}=t;return i&&(Ju(r.x,i.offset.x),Ju(r.y,i.offset.y)),r}const b3=()=>({translate:0,scale:1,origin:0,originPoint:0}),eh=()=>({x:b3(),y:b3()}),E3=()=>({min:0,max:0}),Cn=()=>({x:E3(),y:E3()}),b2={current:null},MN={current:!1};function Mz(){if(MN.current=!0,!!tb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>b2.current=n.matches;n.addEventListener("change",t),t()}else b2.current=!1}const Nz=new WeakMap;function Pz(n,t,e){for(const r in t){const i=t[r],s=e[r];if(Dr(i))n.addValue(r,i);else if(Dr(s))n.addValue(r,gh(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,gh(a!==void 0?a:i,{owner:n}))}}for(const r in e)t[r]===void 0&&n.removeValue(r);return t}const A3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kz{scrapeMotionValuesFromProps(t,e,r){return{}}constructor({parent:t,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Zr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,cn.render(this.render,!1,!0))};const{latestValues:l,renderState:h}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=L1(e),this.isVariantNode=yN(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in g){const v=g[m];l[m]!==void 0&&Dr(v)&&v.set(l[m])}}mount(t){this.current=t,Nz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),MN.current||Mz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:b2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ko(this.notifyUpdate),Ko(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=jh.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ph){const e=ph[t];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<A3.length;r++){const i=A3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Pz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const r=this.values.get(t);e!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&e!==void 0&&(r=gh(e===null?void 0:e,{owner:this}),this.addValue(t,r)),r}readValue(t,e){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(TM(r)||CM(r))?r=parseFloat(r):!Xj(r)&&$o.test(e)&&(r=cN(t,e)),this.setBaseTarget(t,Dr(r)?r.get():r)),Dr(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var s;const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=Ib(this.props,e,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Dr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new ab),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){wb.render(this.render)}}class NN extends kz{constructor(){super(...arguments),this.KeyframeResolver=kj}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:r}){delete e[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Dr(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function PN(n,{style:t,vars:e},r,i){const s=n.style;let a;for(a in t)s[a]=t[a];i==null||i.applyProjectionStyles(s,r);for(a in e)s.setProperty(a,e[a])}function Lz(n){return window.getComputedStyle(n)}class Vz extends NN{constructor(){super(...arguments),this.type="html",this.renderInstance=PN}readValueFromInstance(t,e){var r;if(jh.has(e))return(r=this.projection)!=null&&r.isProjecting?d2(e):tj(t,e);{const i=Lz(t),s=(lb(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return ON(t,e)}build(t,e,r){Tb(t,e,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,r){return Rb(t,e,r)}}const kN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Bz(n,t,e,r){PN(n,t,void 0,r);for(const i in t.attrs)n.setAttribute(kN.has(i)?i:Db(i),t.attrs[i])}class Fz extends NN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(jh.has(e)){const r=oN(e);return r&&r.default||0}return e=kN.has(e)?e:Db(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,r){return AN(t,e,r)}build(t,e,r){xN(t,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,e,r,i){Bz(t,e,r,i)}mount(t){this.isSVGTag=bN(t.tagName),super.mount(t)}}const Uz=(n,t)=>Cb(n)?new Fz(t):new Vz(t,{allowProjection:n!==rt.Fragment});function wg(n,t,e){const r=n.getProps();return Ib(r,t,e!==void 0?e:r.custom,n)}const E2=n=>Array.isArray(n);function jz(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,gh(e))}function zz(n){return E2(n)?n[n.length-1]||0:n}function Hz(n,t){const e=wg(n,t);let{transitionEnd:r={},transition:i={},...s}=e||{};s={...s,...r};for(const a in s){const o=zz(s[a]);jz(n,a,o)}}function Gz(n){return!!(Dr(n)&&n.add)}function A2(n,t){const e=n.getValue("willChange");if(Gz(e))return e.add(t);if(!e&&Pa.WillChange){const r=new Pa.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function LN(n){return n.props[TN]}const Wz=n=>n!==null;function qz(n,{repeat:t,repeatType:e="loop"},r){const i=n.filter(Wz),s=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[s]}const Yz={type:"spring",stiffness:500,damping:25,restSpeed:10},Xz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Kz={type:"keyframes",duration:.8},$z={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Qz=(n,{keyframes:t})=>t.length>2?Kz:jh.has(n)?n.startsWith("scale")?Xz(t[1]):Yz:$z;function Zz({when:n,delay:t,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...d}){return!!Object.keys(d).length}const Ob=(n,t,e,r={},i,s)=>a=>{const o=_b(r,n)||{},l=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Us(l);const d={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:t,element:s?void 0:i};Zz(o)||Object.assign(d,Qz(n,d)),d.duration&&(d.duration=Us(d.duration)),d.repeatDelay&&(d.repeatDelay=Us(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let g=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(v2(d),d.delay===0&&(g=!0)),(Pa.instantAnimations||Pa.skipAnimations)&&(g=!0,v2(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,g&&!s&&t.get()!==void 0){const m=qz(d.keyframes,o);if(m!==void 0){cn.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new yb(d):new Ej(d)};function Jz({protectedKeys:n,needsAnimating:t},e){const r=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,r}function VN(n,t,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in o){const g=n.getValue(d,n.latestValues[d]??null),m=o[d];if(m===void 0||h&&Jz(h,d))continue;const v={delay:e,..._b(s||{},d)},w=g.get();if(w!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===w&&!v.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const S=LN(n);if(S){const T=window.MotionHandoffAnimation(S,d,cn);T!==null&&(v.startTime=T,b=!0)}}A2(n,d),g.start(Ob(d,g,m,n.shouldReduceMotion&&iN.has(d)?{type:!1}:v,n,b));const E=g.animation;E&&l.push(E)}return a&&Promise.all(l).then(()=>{cn.update(()=>{a&&Hz(n,a)})}),l}function T2(n,t,e={}){var l;const r=wg(n,t,e.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const s=r?()=>Promise.all(VN(n,r,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:m}=i;return tH(n,t,h,d,g,m,e)}:()=>Promise.resolve(),{when:o}=i;if(o){const[h,d]=o==="beforeChildren"?[s,a]:[a,s];return h().then(()=>d())}else return Promise.all([s(),a(e.delay)])}function tH(n,t,e=0,r=0,i=0,s=1,a){const o=[],l=n.variantChildren.size,h=(l-1)*i,d=typeof r=="function",g=d?m=>r(m,l):s===1?(m=0)=>m*i:(m=0)=>h-m*i;return Array.from(n.variantChildren).sort(eH).forEach((m,v)=>{m.notify("AnimationStart",t),o.push(T2(m,t,{...a,delay:e+(d?0:r)+g(v)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(o)}function eH(n,t){return n.sortNodePosition(t)}function nH(n,t,e={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>T2(n,s,e));r=Promise.all(i)}else if(typeof t=="string")r=T2(n,t,e);else{const i=typeof t=="function"?wg(n,t,e.custom):t;r=Promise.all(VN(n,i,e))}return r.then(()=>{n.notify("AnimationComplete",t)})}function BN(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}const rH=Ab.length;function FN(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?FN(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<rH;e++){const r=Ab[e],i=n.props[r];(_g(i)||i===!1)&&(t[r]=i)}return t}const iH=[...Eb].reverse(),sH=Eb.length;function aH(n){return t=>Promise.all(t.map(({animation:e,options:r})=>nH(n,e,r)))}function oH(n){let t=aH(n),e=T3(),r=!0;const i=l=>(h,d)=>{var m;const g=wg(n,d,l==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);if(g){const{transition:v,transitionEnd:w,...b}=g;h={...h,...b,...w}}return h};function s(l){t=l(n)}function a(l){const{props:h}=n,d=FN(n.parent)||{},g=[],m=new Set;let v={},w=1/0;for(let E=0;E<sH;E++){const S=iH[E],T=e[S],I=h[S]!==void 0?h[S]:d[S],k=_g(I),P=S===l?T.isActive:null;P===!1&&(w=E);let j=I===d[S]&&I!==h[S]&&k;if(j&&r&&n.manuallyAnimateOnMount&&(j=!1),T.protectedKeys={...v},!T.isActive&&P===null||!I&&!T.prevProp||k1(I)||typeof I=="boolean")continue;const M=cH(T.prevProp,I);let C=M||S===l&&T.isActive&&!j&&k||E>w&&k,N=!1;const B=Array.isArray(I)?I:[I];let z=B.reduce(i(S),{});P===!1&&(z={});const{prevResolvedValues:G={}}=T,F={...G,...z},xt=ct=>{C=!0,m.has(ct)&&(N=!0,m.delete(ct)),T.needsAnimating[ct]=!0;const vt=n.getValue(ct);vt&&(vt.liveStyle=!1)};for(const ct in F){const vt=z[ct],et=G[ct];if(v.hasOwnProperty(ct))continue;let V=!1;E2(vt)&&E2(et)?V=!BN(vt,et):V=vt!==et,V?vt!=null?xt(ct):m.add(ct):vt!==void 0&&m.has(ct)?xt(ct):T.protectedKeys[ct]=!0}T.prevProp=I,T.prevResolvedValues=z,T.isActive&&(v={...v,...z}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(j&&M)||N)&&g.push(...B.map(ct=>({animation:ct,options:{type:S}})))}if(m.size){const E={};if(typeof h.initial!="boolean"){const S=wg(n,Array.isArray(h.initial)?h.initial[0]:h.initial);S&&S.transition&&(E.transition=S.transition)}m.forEach(S=>{const T=n.getBaseTarget(S),I=n.getValue(S);I&&(I.liveStyle=!0),E[S]=T??null}),g.push({animation:E})}let b=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(g):Promise.resolve()}function o(l,h){var g;if(e[l].isActive===h)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(m=>{var v;return(v=m.animationState)==null?void 0:v.setActive(l,h)}),e[l].isActive=h;const d=a(l);for(const m in e)e[m].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>e,reset:()=>{e=T3(),r=!0}}}function cH(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!BN(t,n):!1}function zc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function T3(){return{animate:zc(!0),whileInView:zc(),whileHover:zc(),whileTap:zc(),whileDrag:zc(),whileFocus:zc(),exit:zc()}}class rc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class lH extends rc{constructor(t){super(t),t.animationState||(t.animationState=oH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();k1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let uH=0;class hH extends rc{constructor(){super(...arguments),this.id=uH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const fH={animation:{Feature:lH},exit:{Feature:hH}};function bg(n,t,e,r={passive:!0}){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e)}function Hg(n){return{point:{x:n.pageX,y:n.pageY}}}const dH=n=>t=>bb(t)&&n(t,Hg(t));function qd(n,t,e,r){return bg(n,t,dH(e),r)}const UN=1e-4,gH=1-UN,pH=1+UN,jN=.01,mH=0-jN,yH=0+jN;function jr(n){return n.max-n.min}function vH(n,t,e){return Math.abs(n-t)<=e}function S3(n,t,e,r=.5){n.origin=r,n.originPoint=fn(t.min,t.max,n.origin),n.scale=jr(e)/jr(t),n.translate=fn(e.min,e.max,n.origin)-n.originPoint,(n.scale>=gH&&n.scale<=pH||isNaN(n.scale))&&(n.scale=1),(n.translate>=mH&&n.translate<=yH||isNaN(n.translate))&&(n.translate=0)}function Yd(n,t,e,r){S3(n.x,t.x,e.x,r?r.originX:void 0),S3(n.y,t.y,e.y,r?r.originY:void 0)}function C3(n,t,e){n.min=e.min+t.min,n.max=n.min+jr(t)}function _H(n,t,e){C3(n.x,t.x,e.x),C3(n.y,t.y,e.y)}function I3(n,t,e){n.min=t.min-e.min,n.max=n.min+jr(t)}function Xd(n,t,e){I3(n.x,t.x,e.x),I3(n.y,t.y,e.y)}function Pi(n){return[n("x"),n("y")]}const zN=({current:n})=>n?n.ownerDocument.defaultView:null,R3=(n,t)=>Math.abs(n-t);function xH(n,t){const e=R3(n.x,t.x),r=R3(n.y,t.y);return Math.sqrt(e**2+r**2)}class HN{constructor(t,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=W_(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,w=xH(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!w)return;const{point:b}=m,{timestamp:E}=_r;this.history.push({...b,timestamp:E});const{onStart:S,onMove:T}=this.handlers;v||(S&&S(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=G_(v,this.transformPagePoint),cn.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:w,onSessionEnd:b,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=W_(m.type==="pointercancel"?this.lastMoveEventInfo:G_(v,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,S),b&&b(m,S)},!bb(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=Hg(t),l=G_(o,this.transformPagePoint),{point:h}=l,{timestamp:d}=_r;this.history=[{...h,timestamp:d}];const{onSessionStart:g}=e;g&&g(t,W_(l,this.history)),this.removeListeners=Ug(qd(this.contextWindow,"pointermove",this.handlePointerMove),qd(this.contextWindow,"pointerup",this.handlePointerUp),qd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ko(this.updatePoint)}}function G_(n,t){return t?{point:t(n.point)}:n}function D3(n,t){return{x:n.x-t.x,y:n.y-t.y}}function W_({point:n},t){return{point:n,delta:D3(n,GN(t)),offset:D3(n,wH(t)),velocity:bH(t,.1)}}function wH(n){return n[0]}function GN(n){return n[n.length-1]}function bH(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,r=null;const i=GN(n);for(;e>=0&&(r=n[e],!(i.timestamp-r.timestamp>Us(t)));)e--;if(!r)return{x:0,y:0};const s=js(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function EH(n,{min:t,max:e},r){return t!==void 0&&n<t?n=r?fn(t,n,r.min):Math.max(n,t):e!==void 0&&n>e&&(n=r?fn(e,n,r.max):Math.min(n,e)),n}function O3(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function AH(n,{top:t,left:e,bottom:r,right:i}){return{x:O3(n.x,e,i),y:O3(n.y,t,r)}}function M3(n,t){let e=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,r]=[r,e]),{min:e,max:r}}function TH(n,t){return{x:M3(n.x,t.x),y:M3(n.y,t.y)}}function SH(n,t){let e=.5;const r=jr(n),i=jr(t);return i>r?e=mg(t.min,t.max-r,n.min):r>i&&(e=mg(n.min,n.max-i,t.min)),Na(0,1,e)}function CH(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const S2=.35;function IH(n=S2){return n===!1?n=0:n===!0&&(n=S2),{x:N3(n,"left","right"),y:N3(n,"top","bottom")}}function N3(n,t,e){return{min:P3(n,t),max:P3(n,e)}}function P3(n,t){return typeof n=="number"?n:n[t]||0}const RH=new WeakMap;class DH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Hg(g).point)},a=(g,m)=>{const{drag:v,dragPropagation:w,onDragStart:b}=this.getProps();if(v&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Uj(v),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pi(S=>{let T=this.getAxisMotionValue(S).get()||0;if(zs.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const k=I.layout.layoutBox[S];k&&(T=jr(k)*(parseFloat(T)/100))}}this.originPoint[S]=T}),b&&cn.postRender(()=>b(g,m)),A2(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:w,onDirectionLock:b,onDrag:E}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:S}=m;if(w&&this.currentDirection===null){this.currentDirection=OH(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),E&&E(g,m)},l=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Pi(g=>{var m;return this.getAnimationState(g)==="paused"&&((m=this.getAxisMotionValue(g).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new HN(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:zN(this.visualElement)})}stop(t,e){const r=t||this.latestPointerEvent,i=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&cn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,r){const{drag:i}=this.getProps();if(!r||!G0(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=EH(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Zu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=AH(r.layoutBox,t):this.constraints=!1,this.elastic=IH(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=CH(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Zu(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Oz(r,i.root,this.visualElement.getTransformPagePoint());let a=TH(i.layout.layoutBox,s);if(e){const o=e(Iz(a));this.hasMutatedConstraints=!!o,o&&(a=IN(o))}return a}startAnimation(t){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},h=Pi(d=>{if(!G0(d,e,this.currentDirection))return;let g=l&&l[d]||{};a&&(g={min:0,max:0});const m=i?200:1e6,v=i?40:1e7,w={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(d,w)});return Promise.all(h).then(o)}startAxisValueAnimation(t,e){const r=this.getAxisMotionValue(t);return A2(this.visualElement,t),r.start(Ob(t,r,0,e,this.visualElement,!1))}stopAnimation(){Pi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Pi(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Pi(e=>{const{drag:r}=this.getProps();if(!G0(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(e);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[e];s.set(t[e]-fn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!Zu(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Pi(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=SH({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pi(a=>{if(!G0(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:h}=this.constraints[a];o.set(fn(l,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;RH.set(this.visualElement,this);const t=this.visualElement.current,e=qd(t,"pointerdown",l=>{const{drag:h,dragListener:d=!0}=this.getProps();h&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Zu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),cn.read(r);const a=bg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(Pi(d=>{const g=this.getAxisMotionValue(d);g&&(this.originPoint[d]+=l[d].translate,g.set(g.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),e(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=S2,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function G0(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function OH(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class MH extends rc{constructor(t){super(t),this.removeGroupControls=Fi,this.removeListeners=Fi,this.controls=new DH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fi}unmount(){this.removeGroupControls(),this.removeListeners()}}const k3=n=>(t,e)=>{n&&cn.postRender(()=>n(t,e))};class NH extends rc{constructor(){super(...arguments),this.removePointerDownListener=Fi}onPointerDown(t){this.session=new HN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zN(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:k3(t),onStart:k3(e),onMove:r,onEnd:(s,a)=>{delete this.session,i&&cn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=qd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function L3(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const ld={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Xt.test(n))n=parseFloat(n);else return n;const e=L3(n,t.target.x),r=L3(n,t.target.y);return`${e}% ${r}%`}},PH={correct:(n,{treeScale:t,projectionDelta:e})=>{const r=n,i=$o.parse(n);if(i.length>5)return r;const s=$o.createTransformer(n),a=typeof i[0]!="number"?1:0,o=e.x.scale*t.x,l=e.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const h=fn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};let V3=!1;class kH extends rt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;nz(LH),s&&(e.group&&e.group.add(s),r&&r.register&&i&&r.register(s),V3&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),vm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,V3=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||cn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),wb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function WN(n){const[t,e]=Kj(),r=rt.useContext(AM);return O.jsx(kH,{...n,layoutGroup:r,switchLayoutGroup:rt.useContext(SN),isPresent:t,safeToRemove:e})}const LH={borderRadius:{...ld,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ld,borderTopRightRadius:ld,borderBottomLeftRadius:ld,borderBottomRightRadius:ld,boxShadow:PH};function VH(n,t,e){const r=Dr(n)?n:gh(n);return r.start(Ob("",r,t,e)),r.animation}const BH=(n,t)=>n.depth-t.depth;class FH{constructor(){this.children=[],this.isDirty=!1}add(t){nb(this.children,t),this.isDirty=!0}remove(t){rb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(BH),this.isDirty=!1,this.children.forEach(t)}}function UH(n,t){const e=Zr.now(),r=({timestamp:i})=>{const s=i-e;s>=t&&(Ko(r),n(s-t))};return cn.setup(r,!0),()=>Ko(r)}const qN=["TopLeft","TopRight","BottomLeft","BottomRight"],jH=qN.length,B3=n=>typeof n=="string"?parseFloat(n):n,F3=n=>typeof n=="number"||Xt.test(n);function zH(n,t,e,r,i,s){i?(n.opacity=fn(0,e.opacity??1,HH(r)),n.opacityExit=fn(t.opacity??1,0,GH(r))):s&&(n.opacity=fn(t.opacity??1,e.opacity??1,r));for(let a=0;a<jH;a++){const o=`border${qN[a]}Radius`;let l=U3(t,o),h=U3(e,o);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||F3(l)===F3(h)?(n[o]=Math.max(fn(B3(l),B3(h),r),0),(zs.test(h)||zs.test(l))&&(n[o]+="%")):n[o]=h}(t.rotate||e.rotate)&&(n.rotate=fn(t.rotate||0,e.rotate||0,r))}function U3(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const HH=YN(0,.5,kM),GH=YN(.5,.95,Fi);function YN(n,t,e){return r=>r<n?0:r>t?1:e(mg(n,t,r))}function j3(n,t){n.min=t.min,n.max=t.max}function Ni(n,t){j3(n.x,t.x),j3(n.y,t.y)}function z3(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function H3(n,t,e,r,i){return n-=t,n=Qm(n,1/e,r),i!==void 0&&(n=Qm(n,1/i,r)),n}function WH(n,t=0,e=1,r=.5,i,s=n,a=n){if(zs.test(t)&&(t=parseFloat(t),t=fn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=fn(s.min,s.max,r);n===s&&(o-=t),n.min=H3(n.min,t,e,o,i),n.max=H3(n.max,t,e,o,i)}function G3(n,t,[e,r,i],s,a){WH(n,t[e],t[r],t[i],t.scale,s,a)}const qH=["x","scaleX","originX"],YH=["y","scaleY","originY"];function W3(n,t,e,r){G3(n.x,t,qH,e?e.x:void 0,r?r.x:void 0),G3(n.y,t,YH,e?e.y:void 0,r?r.y:void 0)}function q3(n){return n.translate===0&&n.scale===1}function XN(n){return q3(n.x)&&q3(n.y)}function Y3(n,t){return n.min===t.min&&n.max===t.max}function XH(n,t){return Y3(n.x,t.x)&&Y3(n.y,t.y)}function X3(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function KN(n,t){return X3(n.x,t.x)&&X3(n.y,t.y)}function K3(n){return jr(n.x)/jr(n.y)}function $3(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class KH{constructor(){this.members=[]}add(t){nb(this.members,t),t.scheduleRender()}remove(t){if(rb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,e){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:r}=t;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $H(n,t,e){let r="";const i=n.x.translate/t.x,s=n.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:d,rotateX:g,rotateY:m,skewX:v,skewY:w}=e;h&&(r=`perspective(${h}px) ${r}`),d&&(r+=`rotate(${d}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),v&&(r+=`skewX(${v}deg) `),w&&(r+=`skewY(${w}deg) `)}const o=n.x.scale*t.x,l=n.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const q_=["","X","Y","Z"],QH=1e3;let ZH=0;function Y_(n,t,e,r){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),r&&(r[n]=0))}function $N(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=LN(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",cn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&$N(r)}function QN({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=ZH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eG),this.nodes.forEach(sG),this.nodes.forEach(aG),this.nodes.forEach(nG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new FH)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ab),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=dN(a)&&!qj(a),this.instance=a;const{layoutId:o,layout:l,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let d,g=0;const m=()=>this.root.updateBlockedByResize=!1;cn.read(()=>{g=window.innerWidth}),n(a,()=>{const v=window.innerWidth;v!==g&&(g=v,this.root.updateBlockedByResize=!0,d&&d(),d=UH(m,250),vm.hasAnimatedSinceResize&&(vm.hasAnimatedSinceResize=!1,this.nodes.forEach(J3)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||hG,{onLayoutAnimationStart:b,onLayoutAnimationComplete:E}=h.getProps(),S=!this.targetLayout||!KN(this.targetLayout,v),T=!g&&m;if(this.options.layoutRoot||this.resumeFrom||T||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={..._b(w,"layout"),onPlay:b,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(d,T)}else g||J3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oG),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$N(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const g=this.path[d];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Q3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Z3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iG),this.nodes.forEach(JH),this.nodes.forEach(tG)):this.nodes.forEach(Z3),this.clearAllSnapshots();const o=Zr.now();_r.delta=Na(0,1e3/60,o-_r.timestamp),_r.timestamp=o,_r.isProcessing=!0,L_.update.process(_r),L_.preRender.process(_r),L_.render.process(_r),_r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rG),this.sharedNodes.forEach(cG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!jr(this.snapshot.measuredBox.x)&&!jr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!XN(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,d=h!==this.prevTransformTemplateValue;a&&this.instance&&(o||Xc(this.latestValues)||d)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),fG(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return Cn();const o=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(dG))){const{scroll:d}=this.root;d&&(Ju(o.x,d.offset.x),Ju(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=Cn();if(Ni(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:g,options:m}=d;d!==this.root&&g&&m.layoutScroll&&(g.wasRoot&&Ni(o,a),Ju(o.x,g.offset.x),Ju(o.y,g.offset.y))}return o}applyTransform(a,o=!1){const l=Cn();Ni(l,a);for(let h=0;h<this.path.length;h++){const d=this.path[h];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&th(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Xc(d.latestValues)&&th(l,d.latestValues)}return Xc(this.latestValues)&&th(l,this.latestValues),l}removeTransform(a){const o=Cn();Ni(o,a);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!Xc(h.latestValues))continue;x2(h.latestValues)&&h.updateSnapshot();const d=Cn(),g=h.measurePageBox();Ni(d,g),W3(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,d)}return Xc(this.latestValues)&&W3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=_r.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Xd(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_H(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ni(this.target,this.layout.layoutBox),DN(this.target,this.targetDelta)):Ni(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Xd(this.relativeTargetOrigin,this.target,v.target),Ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||x2(this.parent.latestValues)||RN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===_r.timestamp&&(l=!1),l)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Ni(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;Dz(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Cn());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(z3(this.prevProjectionDelta.x,this.projectionDelta.x),z3(this.prevProjectionDelta.y,this.projectionDelta.y)),Yd(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!$3(this.projectionDelta.x,this.prevProjectionDelta.x)||!$3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=eh(),this.projectionDelta=eh(),this.projectionDeltaWithTransform=eh()}setAnimationOrigin(a,o=!1){const l=this.snapshot,h=l?l.latestValues:{},d={...this.latestValues},g=eh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Cn(),v=l?l.source:void 0,w=this.layout?this.layout.source:void 0,b=v!==w,E=this.getStack(),S=!E||E.members.length<=1,T=!!(b&&!S&&this.options.crossfade===!0&&!this.path.some(uG));this.animationProgress=0;let I;this.mixTargetDelta=k=>{const P=k/1e3;tR(g.x,a.x,P),tR(g.y,a.y,P),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lG(this.relativeTarget,this.relativeTargetOrigin,m,P),I&&XH(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Cn()),Ni(I,this.relativeTarget)),b&&(this.animationValues=d,zH(d,h,this.latestValues,P,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,h;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(h=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cn.update(()=>{vm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gh(0)),this.currentAnimation=VH(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:h,latestValues:d}=a;if(!(!o||!l||!h)){if(this!==a&&this.layout&&h&&ZN(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||Cn();const g=jr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+g;const m=jr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Ni(o,l),th(o,d),Yd(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new KH),this.sharedNodes.get(a).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const h={};l.z&&Y_("z",a,h,this.animationValues);for(let d=0;d<q_.length;d++)Y_(`rotate${q_[d]}`,a,h,this.animationValues),Y_(`skew${q_[d]}`,a,h,this.animationValues);a.render();for(const d in h)a.setStaticValue(d,h[d]),this.animationValues&&(this.animationValues[d]=h[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=ym(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=ym(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Xc(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=$H(this.projectionDeltaWithTransform,this.treeScale,d);l&&(g=l(d,g)),a.transform=g;const{x:m,y:v}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?a.opacity=h===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in xg){if(d[w]===void 0)continue;const{correct:b,applyTo:E,isCSSVariable:S}=xg[w],T=g==="none"?d[w]:b(d[w],h);if(E){const I=E.length;for(let k=0;k<I;k++)a[E[k]]=T}else S?this.options.visualElement.renderState.vars[w]=T:a[w]=T}this.options.layoutId&&(a.pointerEvents=h===this?ym(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Q3),this.root.sharedNodes.clear()}}}function JH(n){n.updateLayout()}function tG(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Pi(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],v=jr(m);m.min=r[g].min,m.max=m.min+v}):ZN(s,t.layoutBox,r)&&Pi(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],v=jr(r[g]);m.max=m.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+v)});const o=eh();Yd(o,r,t.layoutBox);const l=eh();a?Yd(l,n.applyTransform(i,!0),t.measuredBox):Yd(l,r,t.layoutBox);const h=!XN(o);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:m,layout:v}=g;if(m&&v){const w=Cn();Xd(w,t.layoutBox,m.layoutBox);const b=Cn();Xd(b,r,v.layoutBox),KN(w,b)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=w,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function eG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function nG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function rG(n){n.clearSnapshot()}function Q3(n){n.clearMeasurements()}function Z3(n){n.isLayoutDirty=!1}function iG(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function J3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function sG(n){n.resolveTargetDelta()}function aG(n){n.calcProjection()}function oG(n){n.resetSkewAndRotation()}function cG(n){n.removeLeadSnapshot()}function tR(n,t,e){n.translate=fn(t.translate,0,e),n.scale=fn(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function eR(n,t,e,r){n.min=fn(t.min,e.min,r),n.max=fn(t.max,e.max,r)}function lG(n,t,e,r){eR(n.x,t.x,e.x,r),eR(n.y,t.y,e.y,r)}function uG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const hG={duration:.45,ease:[.4,0,.1,1]},nR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),rR=nR("applewebkit/")&&!nR("chrome/")?Math.round:Fi;function iR(n){n.min=rR(n.min),n.max=rR(n.max)}function fG(n){iR(n.x),iR(n.y)}function ZN(n,t,e){return n==="position"||n==="preserve-aspect"&&!vH(K3(t),K3(e),.2)}function dG(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const gG=QN({attachResizeListener:(n,t)=>bg(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),X_={current:void 0},JN=QN({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!X_.current){const n=new gG({});n.mount(window),n.setOptions({layoutScroll:!0}),X_.current=n}return X_.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),pG={pan:{Feature:NH},drag:{Feature:MH,ProjectionNode:JN,MeasureLayout:WN}};function sR(n,t,e){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,s=r[i];s&&cn.postRender(()=>s(t,Hg(t)))}class mG extends rc{mount(){const{current:t}=this.node;t&&(this.unmount=jj(t,(e,r)=>(sR(this.node,r,"Start"),i=>sR(this.node,i,"End"))))}unmount(){}}class yG extends rc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ug(bg(this.node.current,"focus",()=>this.onFocus()),bg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aR(n,t,e){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),s=r[i];s&&cn.postRender(()=>s(t,Hg(t)))}class vG extends rc{mount(){const{current:t}=this.node;t&&(this.unmount=Wj(t,(e,r)=>(aR(this.node,r,"Start"),(i,{success:s})=>aR(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const C2=new WeakMap,K_=new WeakMap,_G=n=>{const t=C2.get(n.target);t&&t(n)},xG=n=>{n.forEach(_G)};function wG({root:n,...t}){const e=n||document;K_.has(e)||K_.set(e,{});const r=K_.get(e),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(xG,{root:n,...t})),r[i]}function bG(n,t,e){const r=wG(t);return C2.set(n,e),r.observe(n),()=>{C2.delete(n),r.unobserve(n)}}const EG={some:0,all:1};class AG extends rc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:s}=t,a={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:EG[i]},o=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:g}=this.node.getProps(),m=h?d:g;m&&m(l)};return bG(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(TG(t,e))&&this.startObserver()}unmount(){}}function TG({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const SG={inView:{Feature:AG},tap:{Feature:vG},focus:{Feature:yG},hover:{Feature:mG}},CG={layout:{ProjectionNode:JN,MeasureLayout:WN}},IG={...fH,...SG,...pG,...CG},RG=Cz(IG,Uz);function DG({name:n,nutrients:t,kcal:e=null,onEdit:r,onDelete:i,unit:s="g",disableSwipe:a}){const[o,l]=hn.useState(0),d=e??((b=[])=>{let E=0;return b.forEach(S=>{var I,k,P;const T=parseFloat(S.count||0);((I=S.type)==null?void 0:I.toLowerCase())==="fat"&&(E+=T*9),((k=S.type)==null?void 0:k.toLowerCase())==="protein"&&(E+=T*4),(P=S.type)!=null&&P.toLowerCase().includes("carbohydrate")&&(E+=T*4)}),Math.round(E)})(t),g=b=>b.charAt(0).toUpperCase()+b.slice(1),m=KF({onSwiping:({deltaX:b})=>{a||l(b)},onSwiped:({dir:b,absX:E})=>{a||(b==="Left"&&E>120&&i&&i(),b==="Right"&&E>120&&r&&r(),l(0))},preventScrollOnSwipe:!0,trackMouse:!0}),v=o<0?"rgba(220,53,69,0.9)":o>0?"rgba(40,167,69,0.9)":"transparent",w=o<0?O.jsx("i",{className:"bi bi-trash",style:{fontSize:"1.5rem"}}):o>0?O.jsx("i",{className:"bi bi-pencil",style:{fontSize:"1.5rem"}}):null;return O.jsxs("div",{...m,className:"position-relative mb-2",style:{overflow:"hidden"},children:[O.jsx("div",{className:"position-absolute top-0 bottom-0 start-0 end-0 d-flex align-items-center justify-content-center",style:{backgroundColor:v,transition:"background-color 0.2s"},children:w}),O.jsxs(RG.div,{animate:{x:o},transition:{type:"spring",stiffness:300,damping:30},className:"meal-card text-white p-3 rounded shadow-sm position-relative",style:{backgroundColor:"#1c1c1c"},children:[O.jsx("p",{className:"MealCardText mb-1 fw-bold",children:n}),O.jsxs("p",{className:"MealCardText mb-1",children:["Calories: ",d," kcal"]}),t.filter(b=>{var E;return["protein","fat","carbohydrate","sugar","sugars","fibre","fiber","salt","caffeine"].includes((E=b.type)==null?void 0:E.toLowerCase())}).map((b,E)=>O.jsxs("p",{className:"MealCardText mb-1",children:[g(b.type),": ",b.total," ",s]},E))]})]})}const OG=()=>{};var oR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},MG=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[e++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[e++],a=n[e++],o=n[e++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[e++],a=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},eP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,d=s>>2,g=(s&3)<<4|o>>4;let m=(o&15)<<2|h>>6,v=h&63;l||(v=64,a||(m=64)),r.push(e[d],e[g],e[m],e[v])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(tP(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):MG(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=e[n.charAt(i++)],o=i<n.length?e[n.charAt(i)]:0;++i;const h=i<n.length?e[n.charAt(i)]:64;++i;const g=i<n.length?e[n.charAt(i)]:64;if(++i,s==null||o==null||h==null||g==null)throw new NG;const m=s<<2|o>>4;if(r.push(m),h!==64){const v=o<<4&240|h>>2;if(r.push(v),g!==64){const w=h<<6&192|g;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class NG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PG=function(n){const t=tP(n);return eP.encodeByteArray(t,!0)},nP=function(n){return PG(n).replace(/\./g,"")},rP=function(n){try{return eP.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG=()=>iP().__FIREBASE_DEFAULTS__,LG=()=>{if(typeof process>"u"||typeof oR>"u")return;const n=oR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VG=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&rP(n[1]);return t&&JSON.parse(t)},V1=()=>{try{return OG()||kG()||LG()||VG()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BG=n=>{var t,e;return(e=(t=V1())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},sP=()=>{var n;return(n=V1())==null?void 0:n.config},aP=n=>{var t;return(t=V1())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oP(n){return(await fetch(n,{credentials:"include"})).ok}const Kd={};function UG(){const n={prod:[],emulator:[]};for(const t of Object.keys(Kd))Kd[t]?n.emulator.push(t):n.prod.push(t);return n}function jG(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let cR=!1;function zG(n,t){if(typeof window>"u"||typeof document>"u"||!zh(window.location.host)||Kd[n]===t||Kd[n]||cR)return;Kd[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=UG().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{cR=!0,a()},m}function d(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=jG(r),v=e("text"),w=document.getElementById(v)||document.createElement("span"),b=e("learnmore"),E=document.getElementById(b)||document.createElement("a"),S=e("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;o(I),d(E,b);const k=h();l(T,S),I.append(T,w,E,k),document.body.appendChild(I)}s?(w.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function cP(){var t;const n=(t=V1())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function WG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qG(){const n=Jn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uP(){return!cP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hP(){return!cP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Mb(){try{return typeof indexedDB=="object"}catch{return!1}}function fP(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)==null?void 0:s.message)||"")}}catch(e){t(e)}})}function YG(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XG="FirebaseError";class os extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=XG,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?KG(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new os(i,o,r)}}function KG(n,t){return n.replace($G,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const $G=/\{\$([^}]+)}/g;function QG(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Qo(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const s=n[i],a=t[i];if(lR(s)&&lR(a)){if(!Qo(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function lR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Id(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function Rd(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function ZG(n,t){const e=new JG(n,t);return e.subscribe.bind(e)}class JG{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");tW(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=$_),i.error===void 0&&(i.error=$_),i.complete===void 0&&(i.complete=$_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tW(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function $_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=1e3,nW=2,rW=4*60*60*1e3,iW=.5;function uR(n,t=eW,e=nW){const r=t*Math.pow(e,n),i=Math.round(iW*r*(Math.random()-.5)*2);return Math.min(rW,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class ss{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new FG;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(oW(t))try{this.getOrInitializeService({instanceIdentifier:Kc})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Kc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Kc){return this.instances.has(t)}getOptions(t=Kc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aW(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Kc){return this.component?this.component.multipleInstances?t:Kc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aW(n){return n===Kc?void 0:n}function oW(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new sW(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ue||(ue={}));const lW={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},uW=ue.INFO,hW={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},fW=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=hW[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class B1{constructor(t){this.name=t,this._logLevel=uW,this._logHandler=fW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ue))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lW[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...t),this._logHandler(this,ue.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...t),this._logHandler(this,ue.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...t),this._logHandler(this,ue.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...t),this._logHandler(this,ue.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...t),this._logHandler(this,ue.ERROR,...t)}}const dW=(n,t)=>t.some(e=>n instanceof e);let hR,fR;function gW(){return hR||(hR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pW(){return fR||(fR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dP=new WeakMap,I2=new WeakMap,gP=new WeakMap,Q_=new WeakMap,Nb=new WeakMap;function mW(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Uo(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&dP.set(e,n)}).catch(()=>{}),Nb.set(t,n),t}function yW(n){if(I2.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});I2.set(n,t)}let R2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return I2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||gP.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Uo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function vW(n){R2=n(R2)}function _W(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Z_(this),t,...e);return gP.set(r,t.sort?t.sort():[t]),Uo(r)}:pW().includes(n)?function(...t){return n.apply(Z_(this),t),Uo(dP.get(this))}:function(...t){return Uo(n.apply(Z_(this),t))}}function xW(n){return typeof n=="function"?_W(n):(n instanceof IDBTransaction&&yW(n),dW(n,gW())?new Proxy(n,R2):n)}function Uo(n){if(n instanceof IDBRequest)return mW(n);if(Q_.has(n))return Q_.get(n);const t=xW(n);return t!==n&&(Q_.set(n,t),Nb.set(t,n)),t}const Z_=n=>Nb.get(n);function wW(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=Uo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Uo(a.result),l.oldVersion,l.newVersion,Uo(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const bW=["get","getKey","getAll","getAllKeys","count"],EW=["put","add","delete","clear"],J_=new Map;function dR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(J_.get(t))return J_.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=EW.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bW.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return J_.set(t,s),s}vW(n=>({...n,get:(t,e,r)=>dR(t,e)||n.get(t,e,r),has:(t,e)=>!!dR(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(TW(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function TW(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const D2="@firebase/app",gR="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new B1("@firebase/app"),SW="@firebase/app-compat",CW="@firebase/analytics-compat",IW="@firebase/analytics",RW="@firebase/app-check-compat",DW="@firebase/app-check",OW="@firebase/auth",MW="@firebase/auth-compat",NW="@firebase/database",PW="@firebase/data-connect",kW="@firebase/database-compat",LW="@firebase/functions",VW="@firebase/functions-compat",BW="@firebase/installations",FW="@firebase/installations-compat",UW="@firebase/messaging",jW="@firebase/messaging-compat",zW="@firebase/performance",HW="@firebase/performance-compat",GW="@firebase/remote-config",WW="@firebase/remote-config-compat",qW="@firebase/storage",YW="@firebase/storage-compat",XW="@firebase/firestore",KW="@firebase/ai",$W="@firebase/firestore-compat",QW="firebase",ZW="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="[DEFAULT]",JW={[D2]:"fire-core",[SW]:"fire-core-compat",[IW]:"fire-analytics",[CW]:"fire-analytics-compat",[DW]:"fire-app-check",[RW]:"fire-app-check-compat",[OW]:"fire-auth",[MW]:"fire-auth-compat",[NW]:"fire-rtdb",[PW]:"fire-data-connect",[kW]:"fire-rtdb-compat",[LW]:"fire-fn",[VW]:"fire-fn-compat",[BW]:"fire-iid",[FW]:"fire-iid-compat",[UW]:"fire-fcm",[jW]:"fire-fcm-compat",[zW]:"fire-perf",[HW]:"fire-perf-compat",[GW]:"fire-rc",[WW]:"fire-rc-compat",[qW]:"fire-gcs",[YW]:"fire-gcs-compat",[XW]:"fire-fst",[$W]:"fire-fst-compat",[KW]:"fire-vertex","fire-js":"fire-js",[QW]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=new Map,tq=new Map,M2=new Map;function pR(n,t){try{n.container.addComponent(t)}catch(e){ka.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ks(n){const t=n.name;if(M2.has(t))return ka.debug(`There were multiple attempts to register component ${t}.`),!1;M2.set(t,n);for(const e of Zm.values())pR(e,n);for(const e of tq.values())pR(e,n);return!0}function Ll(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jo=new kl("app","Firebase",eq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=ZW;function pP(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:O2,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw jo.create("bad-app-name",{appName:String(i)});if(e||(e=sP()),!e)throw jo.create("no-options");const s=Zm.get(i);if(s){if(Qo(e,s.options)&&Qo(r,s.config))return s;throw jo.create("duplicate-app",{appName:i})}const a=new cW(i);for(const l of M2.values())a.addComponent(l);const o=new nq(e,r,a);return Zm.set(i,o),o}function mP(n=O2){const t=Zm.get(n);if(!t&&n===O2&&sP())return pP();if(!t)throw jo.create("no-app",{appName:n});return t}function Ui(n,t,e){let r=JW[n]??n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${t}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ka.warn(a.join(" "));return}Ks(new ss(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq="firebase-heartbeat-database",iq=1,Eg="firebase-heartbeat-store";let tx=null;function yP(){return tx||(tx=wW(rq,iq,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Eg)}catch(e){console.warn(e)}}}}).catch(n=>{throw jo.create("idb-open",{originalErrorMessage:n.message})})),tx}async function sq(n){try{const e=(await yP()).transaction(Eg),r=await e.objectStore(Eg).get(vP(n));return await e.done,r}catch(t){if(t instanceof os)ka.warn(t.message);else{const e=jo.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ka.warn(e.message)}}}async function mR(n,t){try{const r=(await yP()).transaction(Eg,"readwrite");await r.objectStore(Eg).put(t,vP(n)),await r.done}catch(e){if(e instanceof os)ka.warn(e.message);else{const r=jo.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ka.warn(r.message)}}}function vP(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq=1024,oq=30;class cq{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new uq(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yR();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>oq){const a=hq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ka.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yR(),{heartbeatsToSend:r,unsentEntries:i}=lq(this._heartbeatsCache.heartbeats),s=nP(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ka.warn(e),""}}}function yR(){return new Date().toISOString().substring(0,10)}function lq(n,t=aq){const e=[];let r=n.slice();for(const i of n){const s=e.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),vR(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),vR(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class uq{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mb()?fP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await sq(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return mR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return mR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function vR(n){return nP(JSON.stringify({version:2,heartbeats:n})).length}function hq(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(n){Ks(new ss("platform-logger",t=>new AW(t),"PRIVATE")),Ks(new ss("heartbeat",t=>new cq(t),"PRIVATE")),Ui(D2,gR,n),Ui(D2,gR,"esm2020"),Ui("fire-js","")}fq("");var dq="firebase",gq="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui(dq,gq,"app");const pq=(n,t)=>t.some(e=>n instanceof e);let _R,xR;function mq(){return _R||(_R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yq(){return xR||(xR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _P=new WeakMap,N2=new WeakMap,xP=new WeakMap,ex=new WeakMap,Pb=new WeakMap;function vq(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(zo(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&_P.set(e,n)}).catch(()=>{}),Pb.set(t,n),t}function _q(n){if(N2.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});N2.set(n,t)}let P2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return N2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||xP.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return zo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function xq(n){P2=n(P2)}function wq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(nx(this),t,...e);return xP.set(r,t.sort?t.sort():[t]),zo(r)}:yq().includes(n)?function(...t){return n.apply(nx(this),t),zo(_P.get(this))}:function(...t){return zo(n.apply(nx(this),t))}}function bq(n){return typeof n=="function"?wq(n):(n instanceof IDBTransaction&&_q(n),pq(n,mq())?new Proxy(n,P2):n)}function zo(n){if(n instanceof IDBRequest)return vq(n);if(ex.has(n))return ex.get(n);const t=bq(n);return t!==n&&(ex.set(n,t),Pb.set(t,n)),t}const nx=n=>Pb.get(n);function Eq(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=zo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(zo(a.result),l.oldVersion,l.newVersion,zo(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const Aq=["get","getKey","getAll","getAllKeys","count"],Tq=["put","add","delete","clear"],rx=new Map;function wR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(rx.get(t))return rx.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=Tq.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Aq.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return rx.set(t,s),s}xq(n=>({...n,get:(t,e,r)=>wR(t,e)||n.get(t,e,r),has:(t,e)=>!!wR(t,e)||n.has(t,e)}));const wP="@firebase/installations",kb="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=1e4,EP=`w:${kb}`,AP="FIS_v2",Sq="https://firebaseinstallations.googleapis.com/v1",Cq=60*60*1e3,Iq="installations",Rq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bl=new kl(Iq,Rq,Dq);function TP(n){return n instanceof os&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP({projectId:n}){return`${Sq}/projects/${n}/installations`}function CP(n){return{token:n.token,requestStatus:2,expiresIn:Mq(n.expiresIn),creationTime:Date.now()}}async function IP(n,t){const r=(await t.json()).error;return bl.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function RP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Oq(n,{refreshToken:t}){const e=RP(n);return e.append("Authorization",Nq(t)),e}async function DP(n){const t=await n();return t.status>=500&&t.status<600?n():t}function Mq(n){return Number(n.replace("s","000"))}function Nq(n){return`${AP} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pq({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const r=SP(n),i=RP(n),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:e,authVersion:AP,appId:n.appId,sdkVersion:EP},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await DP(()=>fetch(r,o));if(l.ok){const h=await l.json();return{fid:h.fid||e,registrationStatus:2,refreshToken:h.refreshToken,authToken:CP(h.authToken)}}else throw await IP("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lq=/^[cdef][\w-]{21}$/,k2="";function Vq(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=Bq(n);return Lq.test(e)?e:k2}catch{return k2}}function Bq(n){return kq(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new Map;function NP(n,t){const e=F1(n);PP(e,t),Fq(e,t)}function PP(n,t){const e=MP.get(n);if(e)for(const r of e)r(t)}function Fq(n,t){const e=Uq();e&&e.postMessage({key:n,fid:t}),jq()}let cl=null;function Uq(){return!cl&&"BroadcastChannel"in self&&(cl=new BroadcastChannel("[Firebase] FID Change"),cl.onmessage=n=>{PP(n.data.key,n.data.fid)}),cl}function jq(){MP.size===0&&cl&&(cl.close(),cl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq="firebase-installations-database",Hq=1,El="firebase-installations-store";let ix=null;function Lb(){return ix||(ix=Eq(zq,Hq,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(El)}}})),ix}async function Jm(n,t){const e=F1(n),i=(await Lb()).transaction(El,"readwrite"),s=i.objectStore(El),a=await s.get(e);return await s.put(t,e),await i.done,(!a||a.fid!==t.fid)&&NP(n,t.fid),t}async function kP(n){const t=F1(n),r=(await Lb()).transaction(El,"readwrite");await r.objectStore(El).delete(t),await r.done}async function U1(n,t){const e=F1(n),i=(await Lb()).transaction(El,"readwrite"),s=i.objectStore(El),a=await s.get(e),o=t(a);return o===void 0?await s.delete(e):await s.put(o,e),await i.done,o&&(!a||a.fid!==o.fid)&&NP(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(n){let t;const e=await U1(n.appConfig,r=>{const i=Gq(r),s=Wq(n,i);return t=s.registrationPromise,s.installationEntry});return e.fid===k2?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function Gq(n){const t=n||{fid:Vq(),registrationStatus:0};return LP(t)}function Wq(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(bl.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=qq(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Yq(n)}:{installationEntry:t}}async function qq(n,t){try{const e=await Pq(n,t);return Jm(n.appConfig,e)}catch(e){throw TP(e)&&e.customData.serverCode===409?await kP(n.appConfig):await Jm(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function Yq(n){let t=await bR(n.appConfig);for(;t.registrationStatus===1;)await OP(100),t=await bR(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await Vb(n);return r||e}return t}function bR(n){return U1(n,t=>{if(!t)throw bl.create("installation-not-found");return LP(t)})}function LP(n){return Xq(n)?{fid:n.fid,registrationStatus:0}:n}function Xq(n){return n.registrationStatus===1&&n.registrationTime+bP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq({appConfig:n,heartbeatServiceProvider:t},e){const r=$q(n,e),i=Oq(n,e),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:EP,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await DP(()=>fetch(r,o));if(l.ok){const h=await l.json();return CP(h)}else throw await IP("Generate Auth Token",l)}function $q(n,{fid:t}){return`${SP(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(n,t=!1){let e;const r=await U1(n.appConfig,s=>{if(!VP(s))throw bl.create("not-registered");const a=s.authToken;if(!t&&Jq(a))return s;if(a.requestStatus===1)return e=Qq(n,t),s;{if(!navigator.onLine)throw bl.create("app-offline");const o=eY(s);return e=Zq(n,o),o}});return e?await e:r.authToken}async function Qq(n,t){let e=await ER(n.appConfig);for(;e.authToken.requestStatus===1;)await OP(100),e=await ER(n.appConfig);const r=e.authToken;return r.requestStatus===0?Bb(n,t):r}function ER(n){return U1(n,t=>{if(!VP(t))throw bl.create("not-registered");const e=t.authToken;return nY(e)?{...t,authToken:{requestStatus:0}}:t})}async function Zq(n,t){try{const e=await Kq(n,t),r={...t,authToken:e};return await Jm(n.appConfig,r),e}catch(e){if(TP(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await kP(n.appConfig);else{const r={...t,authToken:{requestStatus:0}};await Jm(n.appConfig,r)}throw e}}function VP(n){return n!==void 0&&n.registrationStatus===2}function Jq(n){return n.requestStatus===2&&!tY(n)}function tY(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+Cq}function eY(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function nY(n){return n.requestStatus===1&&n.requestTime+bP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rY(n){const t=n,{installationEntry:e,registrationPromise:r}=await Vb(t);return r?r.catch(console.error):Bb(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iY(n,t=!1){const e=n;return await sY(e),(await Bb(e,t)).token}async function sY(n){const{registrationPromise:t}=await Vb(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aY(n){if(!n||!n.options)throw sx("App Configuration");if(!n.name)throw sx("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw sx(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sx(n){return bl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="installations",oY="installations-internal",cY=n=>{const t=n.getProvider("app").getImmediate(),e=aY(t),r=Ll(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lY=n=>{const t=n.getProvider("app").getImmediate(),e=Ll(t,BP).getImmediate();return{getId:()=>rY(e),getToken:i=>iY(e,i)}};function uY(){Ks(new ss(BP,cY,"PUBLIC")),Ks(new ss(oY,lY,"PRIVATE"))}uY();Ui(wP,kb);Ui(wP,kb,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="analytics",hY="firebase_id",fY="origin",dY=60*1e3,gY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new B1("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mi=new kl("analytics","Analytics",pY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(n){if(!n.startsWith(Fb)){const t=mi.create("invalid-gtag-resource",{gtagURL:n});return ei.warn(t.message),""}return n}function FP(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function yY(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function vY(n,t){const e=yY("firebase-js-sdk-policy",{createScriptURL:mY}),r=document.createElement("script"),i=`${Fb}?l=${n}&id=${t}`;r.src=e?e==null?void 0:e.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function _Y(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function xY(n,t,e,r,i,s){const a=r[i];try{if(a)await t[a];else{const l=(await FP(e)).find(h=>h.measurementId===i);l&&await t[l.appId]}}catch(o){ei.error(o)}n("config",i,s)}async function wY(n,t,e,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const o=await FP(e);for(const l of a){const h=o.find(g=>g.measurementId===l),d=h&&t[h.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(t)),await Promise.all(s),n("event",r,i||{})}catch(s){ei.error(s)}}function bY(n,t,e,r){async function i(s,...a){try{if(s==="event"){const[o,l]=a;await wY(n,t,e,o,l)}else if(s==="config"){const[o,l]=a;await xY(n,t,e,r,o,l)}else if(s==="consent"){const[o,l]=a;n("consent",o,l)}else if(s==="get"){const[o,l,h]=a;n("get",o,l,h)}else if(s==="set"){const[o]=a;n("set",o)}else n(s,...a)}catch(o){ei.error(o)}}return i}function EY(n,t,e,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=bY(s,n,t,e),{gtagCore:s,wrappedGtag:window[i]}}function AY(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(Fb)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TY=30,SY=1e3;class CY{constructor(t={},e=SY){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const UP=new CY;function IY(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function RY(n){var a;const{appId:t,apiKey:e}=n,r={method:"GET",headers:IY(e)},i=gY.replace("{app-id}",t),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let o="";try{const l=await s.json();(a=l.error)!=null&&a.message&&(o=l.error.message)}catch{}throw mi.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function DY(n,t=UP,e){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw mi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw mi.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new NY;return setTimeout(async()=>{o.abort()},dY),jP({appId:r,apiKey:i,measurementId:s},a,o,t)}async function jP(n,{throttleEndTimeMillis:t,backoffCount:e},r,i=UP){var o;const{appId:s,measurementId:a}=n;try{await OY(r,t)}catch(l){if(a)return ei.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:a};throw l}try{const l=await RY(n);return i.deleteThrottleMetadata(s),l}catch(l){const h=l;if(!MY(h)){if(i.deleteThrottleMetadata(s),a)return ei.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:s,measurementId:a};throw l}const d=Number((o=h==null?void 0:h.customData)==null?void 0:o.httpStatus)===503?uR(e,i.intervalMillis,TY):uR(e,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+d,backoffCount:e+1};return i.setThrottleMetadata(s,g),ei.debug(`Calling attemptFetch again in ${d} millis`),jP(n,g,r,i)}}function OY(n,t){return new Promise((e,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(e,i);n.addEventListener(()=>{clearTimeout(s),r(mi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function MY(n){if(!(n instanceof os)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class NY{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function PY(n,t,e,r,i){if(i&&i.global){n("event",e,r);return}else{const s=await t,a={...r,send_to:s};n("event",e,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kY(){if(Mb())try{await fP()}catch(n){return ei.warn(mi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ei.warn(mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function LY(n,t,e,r,i,s,a){const o=DY(n);o.then(m=>{e[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&ei.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>ei.error(m)),t.push(o);const l=kY().then(m=>{if(m)return r.getId()}),[h,d]=await Promise.all([o,l]);AY(s)||vY(s,h.measurementId),i("js",new Date);const g=(a==null?void 0:a.config)??{};return g[fY]="firebase",g.update=!0,d!=null&&(g[hY]=d),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VY{constructor(t){this.app=t}_delete(){return delete $d[this.app.options.appId],Promise.resolve()}}let $d={},AR=[];const TR={};let ax="dataLayer",BY="gtag",SR,zP,CR=!1;function FY(){const n=[];if(lP()&&n.push("This is a browser extension environment."),YG()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),e=mi.create("invalid-analytics-context",{errorInfo:t});ei.warn(e.message)}}function UY(n,t,e){FY();const r=n.options.appId;if(!r)throw mi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ei.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mi.create("no-api-key");if($d[r]!=null)throw mi.create("already-exists",{id:r});if(!CR){_Y(ax);const{wrappedGtag:s,gtagCore:a}=EY($d,AR,TR,ax,BY);zP=s,SR=a,CR=!0}return $d[r]=LY(n,AR,TR,t,SR,ax,e),new VY(n)}function jY(n=mP()){n=xn(n);const t=Ll(n,t1);return t.isInitialized()?t.getImmediate():zY(n)}function zY(n,t={}){const e=Ll(n,t1);if(e.isInitialized()){const i=e.getImmediate();if(Qo(t,e.getOptions()))return i;throw mi.create("already-initialized")}return e.initialize({options:t})}function HY(n,t,e,r){n=xn(n),PY(zP,$d[n.app.options.appId],t,e,r).catch(i=>ei.error(i))}const IR="@firebase/analytics",RR="0.10.18";function GY(){Ks(new ss(t1,(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return UY(r,i,e)},"PUBLIC")),Ks(new ss("analytics-internal",n,"PRIVATE")),Ui(IR,RR),Ui(IR,RR,"esm2020");function n(t){try{const e=t.getProvider(t1).getImmediate();return{logEvent:(r,i,s)=>HY(e,r,i,s)}}catch(e){throw mi.create("interop-component-reg-failed",{reason:e})}}}GY();function HP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WY=HP,GP=new kl("auth","Firebase",HP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new B1("@firebase/auth");function qY(n,...t){e1.logLevel<=ue.WARN&&e1.warn(`Auth (${Hh}): ${n}`,...t)}function _m(n,...t){e1.logLevel<=ue.ERROR&&e1.error(`Auth (${Hh}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(n,...t){throw Ub(n,...t)}function Hs(n,...t){return Ub(n,...t)}function WP(n,t,e){const r={...WY(),[t]:e};return new kl("auth","Firebase",r).create(t,{appName:n.name})}function Gs(n){return WP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ub(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return GP.create(n,...t)}function qt(n,t,...e){if(!n)throw Ub(t,...e)}function Da(n){const t="INTERNAL ASSERTION FAILED: "+n;throw _m(t),new Error(t)}function La(n,t){n||Da(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function YY(){return DR()==="http:"||DR()==="https:"}function DR(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YY()||lP()||"connection"in navigator)?navigator.onLine:!0}function KY(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(t,e){this.shortDelay=t,this.longDelay=e,La(e>t,"Short delay should be less than long delay!"),this.isMobile=HG()||WG()}get(){return XY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(n,t){La(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Y={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZY=new Wg(3e4,6e4);function ic(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Fa(n,t,e,r,i={}){return YP(n,i,async()=>{let s={},a={};r&&(t==="GET"?a=r:s={body:JSON.stringify(r)});const o=Gg({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:t,headers:l,...s};return GG()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&zh(n.emulatorConfig.host)&&(h.credentials="include"),qP.fetch()(await XP(n,n.config.apiHost,e,o),h)})}async function YP(n,t,e){n._canInitEmulator=!1;const r={...$Y,...t};try{const i=new tX(n),s=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw W0(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw W0(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw W0(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw W0(n,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw WP(n,d,h);as(n,d)}}catch(i){if(i instanceof os)throw i;as(n,"network-request-failed",{message:String(i)})}}async function qg(n,t,e,r,i={}){const s=await Fa(n,t,e,r,i);return"mfaPendingCredential"in s&&as(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function XP(n,t,e,r){const i=`${t}${e}?${r}`,s=n,a=s.config.emulator?jb(n.config,i):`${n.config.apiScheme}://${i}`;return QY.includes(e)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function JY(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Hs(this.auth,"network-request-failed")),ZY.get())})}}function W0(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=Hs(n,t,r);return i.customData._tokenResponse=e,i}function OR(n){return n!==void 0&&n.enterprise!==void 0}class eX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return JY(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nX(n,t){return Fa(n,"GET","/v2/recaptchaConfig",ic(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rX(n,t){return Fa(n,"POST","/v1/accounts:delete",t)}async function n1(n,t){return Fa(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function iX(n,t=!1){const e=xn(n),r=await e.getIdToken(t),i=zb(r);qt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Qd(ox(i.auth_time)),issuedAtTime:Qd(ox(i.iat)),expirationTime:Qd(ox(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ox(n){return Number(n)*1e3}function zb(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return _m("JWT malformed, contained fewer than 3 sections"),null;try{const i=rP(e);return i?JSON.parse(i):(_m("Failed to decode base64 JWT payload"),null)}catch(i){return _m("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function MR(n){const t=zb(n);return qt(t,"internal-error"),qt(typeof t.exp<"u","internal-error"),qt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof os&&sX(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function sX({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qd(this.lastLoginAt),this.creationTime=Qd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(n){var g;const t=n.auth,e=await n.getIdToken(),r=await mh(n,n1(t,{idToken:e}));qt(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(g=i.providerUserInfo)!=null&&g.length?KP(i.providerUserInfo):[],a=cX(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),h=o?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new V2(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function oX(n){const t=xn(n);await r1(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function cX(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function KP(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lX(n,t){const e=await YP(n,{},async()=>{const r=Gg({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await XP(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&zh(n.emulatorConfig.host)&&(l.credentials="include"),qP.fetch()(a,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function uX(n,t){return Fa(n,"POST","/v2/accounts:revokeToken",ic(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qt(t.idToken,"internal-error"),qt(typeof t.idToken<"u","internal-error"),qt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):MR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){qt(t.length!==0,"internal-error");const e=MR(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(qt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:s}=await lX(t,e);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:s}=e,a=new oh;return r&&(qt(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(qt(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),s&&(qt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new oh,this.toJSON())}_performRefresh(){return Da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(n,t){qt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class rs{constructor({uid:t,auth:e,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new aX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new V2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await mh(this,this.stsTokenManager.getToken(this.auth,t));return qt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return iX(this,t)}reload(){return oX(this)}_assign(t){this!==t&&(qt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new rs({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await r1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(Gs(this.auth));const t=await this.getIdToken();return await mh(this,rX(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,i=e.email??void 0,s=e.phoneNumber??void 0,a=e.photoURL??void 0,o=e.tenantId??void 0,l=e._redirectEventId??void 0,h=e.createdAt??void 0,d=e.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:v,providerData:w,stsTokenManager:b}=e;qt(g&&b,t,"internal-error");const E=oh.fromJSON(this.name,b);qt(typeof g=="string",t,"internal-error"),_o(r,t.name),_o(i,t.name),qt(typeof m=="boolean",t,"internal-error"),qt(typeof v=="boolean",t,"internal-error"),_o(s,t.name),_o(a,t.name),_o(o,t.name),_o(l,t.name),_o(h,t.name),_o(d,t.name);const S=new rs({uid:g,auth:t,email:i,emailVerified:m,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:h,lastLoginAt:d});return w&&Array.isArray(w)&&(S.providerData=w.map(T=>({...T}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(t,e,r=!1){const i=new oh;i.updateFromServerResponse(e);const s=new rs({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await r1(s),s}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];qt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?KP(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new oh;o.updateFromIdToken(r);const l=new rs({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new V2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Map;function Oa(n){La(n instanceof Function,"Expected a class definition");let t=NR.get(n);return t?(La(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,NR.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}$P.type="NONE";const PR=$P;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(n,t,e){return`firebase:${n}:${t}:${e}`}class ch{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xm(this.userKey,i.apiKey,s),this.fullPersistenceKey=xm("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await n1(this.auth,{idToken:t}).catch(()=>{});return e?rs._fromGetAccountInfoResponse(this.auth,e,t):null}return rs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new ch(Oa(PR),t,r);const i=(await Promise.all(e.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Oa(PR);const a=xm(r,t.config.apiKey,t.name);let o=null;for(const h of e)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await n1(t,{idToken:d}).catch(()=>{});if(!m)break;g=await rs._fromGetAccountInfoResponse(t,m,d)}else g=rs._fromJSON(t,d);h!==s&&(o=g),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ch(s,t,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(e.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new ch(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(t8(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(QP(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(n8(t))return"Blackberry";if(r8(t))return"Webos";if(ZP(t))return"Safari";if((t.includes("chrome/")||JP(t))&&!t.includes("edge/"))return"Chrome";if(e8(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QP(n=Jn()){return/firefox\//i.test(n)}function ZP(n=Jn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function JP(n=Jn()){return/crios\//i.test(n)}function t8(n=Jn()){return/iemobile/i.test(n)}function e8(n=Jn()){return/android/i.test(n)}function n8(n=Jn()){return/blackberry/i.test(n)}function r8(n=Jn()){return/webos/i.test(n)}function Hb(n=Jn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hX(n=Jn()){var t;return Hb(n)&&!!((t=window.navigator)!=null&&t.standalone)}function fX(){return qG()&&document.documentMode===10}function i8(n=Jn()){return Hb(n)||e8(n)||r8(n)||n8(n)||/windows phone/i.test(n)||t8(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(n,t=[]){let e;switch(n){case"Browser":e=kR(Jn());break;case"Worker":e=`${kR(Jn())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Hh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=s=>new Promise((a,o)=>{try{const l=t(s);a(l)}catch(l){o(l)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gX(n,t={}){return Fa(n,"GET","/v2/passwordPolicy",ic(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX=6;class mX{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??pX,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LR(this),this.idTokenSubscription=new LR(this),this.beforeStateQueue=new dX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Oa(e)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ch.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await n1(this,{idToken:t}),r=await rs._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(gi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await r1(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=KY()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(gi(this.app))return Promise.reject(Gs(this));const e=t?xn(t):null;return e&&qt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&qt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(Gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return gi(this.app)?Promise.reject(Gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gX(this),e=new mX(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new kl("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await uX(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Oa(t)||this._popupRedirectResolver;qt(e,this,"argument-error"),this.redirectPersistenceManager=await ch.create(this,[Oa(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,r,i);return()=>{a=!0,l()}}else{const l=t.addObserver(e);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=s8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&qY(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Vl(n){return xn(n)}class LR{constructor(t){this.auth=t,this.observer=null,this.addObserver=ZG(e=>this.observer=e)}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vX(n){j1=n}function a8(n){return j1.loadJS(n)}function _X(){return j1.recaptchaEnterpriseScript}function xX(){return j1.gapiScript}function wX(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class bX{constructor(){this.enterprise=new EX}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class EX{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const AX="recaptcha-enterprise",o8="NO_RECAPTCHA";class TX{constructor(t){this.type=AX,this.auth=Vl(t)}async verify(t="verify",e=!1){async function r(s){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{nX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const h=new eX(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;OR(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(o8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bX().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!e&&OR(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=_X();l.length!==0&&(l+=o),a8(l).then(()=>{i(o,s,a)}).catch(h=>{a(h)})}}).catch(o=>{a(o)})})}}async function VR(n,t,e,r=!1,i=!1){const s=new TX(n);let a;if(i)a=o8;else try{a=await s.verify(e)}catch{a=await s.verify(e,!0)}const o={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function B2(n,t,e,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await VR(n,t,e,e==="getOobCode");return r(n,a)}else return r(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await VR(n,t,e,e==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SX(n,t){const e=Ll(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),s=e.getOptions();if(Qo(s,t??{}))return i;as(i,"already-initialized")}return e.initialize({options:t})}function CX(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Oa);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function IX(n,t,e){const r=Vl(n);qt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=c8(t),{host:a,port:o}=RX(t),l=o===null?"":`:${o}`,h={url:`${s}//${a}${l}/`},d=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){qt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qt(Qo(h,r.config.emulator)&&Qo(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,zh(a)?(oP(`${s}//${a}${l}`),zG("Auth",!0)):DX()}function c8(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function RX(n){const t=c8(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:BR(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:BR(a)}}}function BR(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function DX(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Da("not implemented")}_getIdTokenResponse(t){return Da("not implemented")}_linkToIdToken(t,e){return Da("not implemented")}_getReauthenticationResolver(t){return Da("not implemented")}}async function OX(n,t){return Fa(n,"POST","/v1/accounts:update",t)}async function MX(n,t){return Fa(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NX(n,t){return qg(n,"POST","/v1/accounts:signInWithPassword",ic(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PX(n,t){return qg(n,"POST","/v1/accounts:signInWithEmailLink",ic(n,t))}async function kX(n,t){return qg(n,"POST","/v1/accounts:signInWithEmailLink",ic(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends Gb{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Ag(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new Ag(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B2(t,e,"signInWithPassword",NX);case"emailLink":return PX(t,{email:this._email,oobCode:this._password});default:as(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B2(t,r,"signUpPassword",MX);case"emailLink":return kX(t,{idToken:e,email:this._email,oobCode:this._password});default:as(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(n,t){return qg(n,"POST","/v1/accounts:signInWithIdp",ic(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX="http://localhost";class Al extends Gb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Al(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):as("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...s}=e;if(!r||!i)return null;const a=new Al(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const e=this.buildRequest();return lh(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,lh(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,lh(t,e)}buildRequest(){const t={requestUri:LX,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Gg(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BX(n){const t=Id(Rd(n)).link,e=t?Id(Rd(t)).deep_link_id:null,r=Id(Rd(n)).deep_link_id;return(r?Id(Rd(r)).link:null)||r||e||t||n}class Wb{constructor(t){const e=Id(Rd(t)),r=e.apiKey??null,i=e.oobCode??null,s=VX(e.mode??null);qt(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=BX(t);try{return new Wb(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(t,e){return Ag._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=Wb.parseLink(e);return qt(r,"argument-error"),Ag._fromEmailAndCode(t,r.code,r.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends l8{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Yg{constructor(){super("facebook.com")}static credential(t){return Al._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ro.credentialFromTaggedObject(t)}static credentialFromError(t){return Ro.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ro.credential(t.oauthAccessToken)}catch{return null}}}Ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Yg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Al._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Do.credentialFromTaggedObject(t)}static credentialFromError(t){return Do.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return Do.credential(e,r)}catch{return null}}}Do.GOOGLE_SIGN_IN_METHOD="google.com";Do.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Yg{constructor(){super("github.com")}static credential(t){return Al._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Oo.credentialFromTaggedObject(t)}static credentialFromError(t){return Oo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Oo.credential(t.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Yg{constructor(){super("twitter.com")}static credential(t,e){return Al._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Mo.credentialFromTaggedObject(t)}static credentialFromError(t){return Mo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return Mo.credential(e,r)}catch{return null}}}Mo.TWITTER_SIGN_IN_METHOD="twitter.com";Mo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FX(n,t){return qg(n,"POST","/v1/accounts:signUp",ic(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const s=await rs._fromIdTokenResponse(t,r,i),a=FR(r);return new Tl({user:s,providerId:a,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=FR(r);return new Tl({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function FR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1 extends os{constructor(t,e,r,i){super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,i1.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new i1(t,e,r,i)}}function u8(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?i1._fromErrorAndOperation(n,s,t,r):s})}async function UX(n,t,e=!1){const r=await mh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Tl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8(n,t,e=!1){const{auth:r}=n;if(gi(r.app))return Promise.reject(Gs(r));const i="reauthenticate";try{const s=await mh(n,u8(r,i,t,n),e);qt(s.idToken,r,"internal-error");const a=zb(s.idToken);qt(a,r,"internal-error");const{sub:o}=a;return qt(n.uid===o,r,"user-mismatch"),Tl._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&as(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(n,t,e=!1){if(gi(n.app))return Promise.reject(Gs(n));const r="signIn",i=await u8(n,r,t),s=await Tl._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(s.user),s}async function jX(n,t){return f8(Vl(n),t)}async function zX(n,t){return h8(xn(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(n){const t=Vl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function HX(n,t,e){if(gi(n.app))return Promise.reject(Gs(n));const r=Vl(n),a=await B2(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FX).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&d8(n),l}),o=await Tl._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function GX(n,t,e){return gi(n.app)?Promise.reject(Gs(n)):jX(xn(n),Bl.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&d8(n),r})}function WX(n,t){const e=xn(n);return gi(e.auth.app)?Promise.reject(Gs(e.auth)):g8(e,t,null)}function qX(n,t){return g8(xn(n),null,t)}async function g8(n,t,e){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(s.email=t),e&&(s.password=e);const a=await mh(n,OX(r,s));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YX(n,t){return xn(n).setPersistence(t)}function XX(n,t,e,r){return xn(n).onIdTokenChanged(t,e,r)}function KX(n,t,e){return xn(n).beforeAuthStateChanged(t,e)}function $X(n){return xn(n).signOut()}const s1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(s1,"1"),this.storage.removeItem(s1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QX=1e3,ZX=10;class m8 extends p8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=i8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!e&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);fX()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,ZX):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},QX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}m8.type="LOCAL";const y8=m8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8 extends p8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}v8.type="SESSION";const qb=v8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new z1(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:s}=e.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async h=>h(e.origin,s)),l=await JX(o);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}z1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const h=Yb("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:e},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return window}function eK(n){Ws().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(){return typeof Ws().WorkerGlobalScope<"u"&&typeof Ws().importScripts=="function"}async function nK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rK(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function iK(){return _8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8="firebaseLocalStorageDb",sK=1,a1="firebaseLocalStorage",w8="fbase_key";class Xg{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function H1(n,t){return n.transaction([a1],t?"readwrite":"readonly").objectStore(a1)}function aK(){const n=indexedDB.deleteDatabase(x8);return new Xg(n).toPromise()}function F2(){const n=indexedDB.open(x8,sK);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(a1,{keyPath:w8})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(a1)?t(r):(r.close(),await aK(),t(await F2()))})})}async function UR(n,t,e){const r=H1(n,!0).put({[w8]:t,value:e});return new Xg(r).toPromise()}async function oK(n,t){const e=H1(n,!1).get(t),r=await new Xg(e).toPromise();return r===void 0?null:r.value}function jR(n,t){const e=H1(n,!0).delete(t);return new Xg(e).toPromise()}const cK=800,lK=3;class b8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await F2(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>lK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=z1._getInstance(iK()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await nK(),!this.activeServiceWorker)return;this.sender=new tK(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||rK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await F2();return await UR(t,s1,"1"),await jR(t,s1),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>UR(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>oK(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>jR(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=H1(i,!1).getAll();return new Xg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b8.type="LOCAL";const uK=b8;new Wg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hK(n,t){return t?Oa(t):(qt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Gb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return lh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return lh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return lh(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function fK(n){return f8(n.auth,new Xb(n),n.bypassAuthState)}function dK(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),h8(e,new Xb(n),n.bypassAuthState)}async function gK(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),UX(e,new Xb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(t,e,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return fK;case"linkViaPopup":case"linkViaRedirect":return gK;case"reauthViaPopup":case"reauthViaRedirect":return dK;default:as(this.auth,"internal-error")}}resolve(t){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK=new Wg(2e3,1e4);class nh extends E8{constructor(t,e,r,i,s){super(t,e,i,s),this.provider=r,this.authWindow=null,this.pollId=null,nh.currentPopupAction&&nh.currentPopupAction.cancel(),nh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qt(t,this.auth,"internal-error"),t}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const t=Yb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Hs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Hs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,pK.get())};t()}}nh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK="pendingRedirect",wm=new Map;class yK extends E8{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=wm.get(this.auth._key());if(!t){try{const r=await vK(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}wm.set(this.auth._key(),t)}return this.bypassAuthState||wm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vK(n,t){const e=wK(t),r=xK(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function _K(n,t){wm.set(n._key(),t)}function xK(n){return Oa(n._redirectPersistence)}function wK(n){return xm(mK,n.config.apiKey,n.name)}async function bK(n,t,e=!1){if(gi(n.app))return Promise.reject(Gs(n));const r=Vl(n),i=hK(r,t),a=await new yK(r,i,e).execute();return a&&!e&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK=10*60*1e3;class AK{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!TK(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!A8(t)){const i=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(Hs(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=EK&&this.cachedEventUids.clear(),this.cachedEventUids.has(zR(t))}saveEventToCache(t){this.cachedEventUids.add(zR(t)),this.lastProcessedEventTime=Date.now()}}function zR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function A8({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function TK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A8(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SK(n,t={}){return Fa(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IK=/^https?/;async function RK(n){if(n.config.emulator)return;const{authorizedDomains:t}=await SK(n);for(const e of t)try{if(DK(e))return}catch{}as(n,"unauthorized-domain")}function DK(n){const t=L2(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===r}if(!IK.test(e))return!1;if(CK.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK=new Wg(3e4,6e4);function HR(){const n=Ws().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function MK(n){return new Promise((t,e)=>{var i,s,a;function r(){HR(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{HR(),e(Hs(n,"network-request-failed"))},timeout:OK.get()})}if((s=(i=Ws().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Ws().gapi)!=null&&a.load)r();else{const o=wX("iframefcb");return Ws()[o]=()=>{gapi.load?r():e(Hs(n,"network-request-failed"))},a8(`${xX()}?onload=${o}`).catch(l=>e(l))}}).catch(t=>{throw bm=null,t})}let bm=null;function NK(n){return bm=bm||MK(n),bm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PK=new Wg(5e3,15e3),kK="__/auth/iframe",LK="emulator/auth/iframe",VK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FK(n){const t=n.config;qt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?jb(t,LK):`https://${n.config.authDomain}/${kK}`,r={apiKey:t.apiKey,appName:n.name,v:Hh},i=BK.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${Gg(r).slice(1)}`}async function UK(n){const t=await NK(n),e=Ws().gapi;return qt(e,n,"internal-error"),t.open({where:document.body,url:FK(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Hs(n,"network-request-failed"),o=Ws().setTimeout(()=>{s(a)},PK.get());function l(){Ws().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zK=500,HK=600,GK="_blank",WK="http://localhost";class GR{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qK(n,t,e,r=zK,i=HK){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...jK,width:r.toString(),height:i.toString(),top:s,left:a},h=Jn().toLowerCase();e&&(o=JP(h)?GK:e),QP(h)&&(t=t||WK,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(hX(h)&&o!=="_self")return YK(t||"",o),new GR(null);const g=window.open(t||"",o,d);qt(g,n,"popup-blocked");try{g.focus()}catch{}return new GR(g)}function YK(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XK="__/auth/handler",KK="emulator/auth/handler",$K=encodeURIComponent("fac");async function WR(n,t,e,r,i,s){qt(n.config.authDomain,n,"auth-domain-config-required"),qt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:Hh,eventId:i};if(t instanceof l8){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",QG(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Yg){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await n._getAppCheckToken(),h=l?`#${$K}=${encodeURIComponent(l)}`:"";return`${QK(n)}?${Gg(o).slice(1)}${h}`}function QK({config:n}){return n.emulator?jb(n,KK):`https://${n.authDomain}/${XK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="webStorageSupport";class ZK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qb,this._completeRedirectFn=bK,this._overrideRedirectResult=_K}async _openPopup(t,e,r,i){var a;La((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await WR(t,e,r,L2(),i);return qK(t,s,Yb())}async _openRedirect(t,e,r,i){await this._originValidation(t);const s=await WR(t,e,r,L2(),i);return eK(s),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:s}=this.eventManagers[e];return i?Promise.resolve(i):(La(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await UK(t),r=new AK(t);return e.register("authEvent",i=>(qt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(cx,{type:cx},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[cx];s!==void 0&&e(!!s),as(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=RK(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return i8()||ZP()||Hb()}}const JK=ZK;var qR="@firebase/auth",YR="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n$(n){Ks(new ss("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;qt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s8(n)},h=new yX(r,i,s,l);return CX(h,e),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Ks(new ss("auth-internal",t=>{const e=Vl(t.getProvider("auth").getImmediate());return(r=>new t$(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ui(qR,YR,e$(n)),Ui(qR,YR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$=5*60,i$=aP("authIdTokenMaxAge")||r$;let XR=null;const s$=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>i$)return;const i=e==null?void 0:e.token;XR!==i&&(XR=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Kb(n=mP()){const t=Ll(n,"auth");if(t.isInitialized())return t.getImmediate();const e=SX(n,{popupRedirectResolver:JK,persistence:[uK,y8,qb]}),r=aP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=s$(s.toString());KX(e,a,()=>a(e.currentUser)),XX(e,o=>a(o))}}const i=BG("auth");return i&&IX(e,`http://${i}`),e}function a$(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}vX({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const s=Hs("internal-error");s.customData=i,e(s)},r.type="text/javascript",r.charset="UTF-8",a$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n$("Browser");var KR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ho,T8;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,C){function N(){}N.prototype=C.prototype,M.D=C.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(B,z,G){for(var F=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)F[xt-2]=arguments[xt];return C.prototype[z].apply(B,F)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,C,N){N||(N=0);var B=Array(16);if(typeof C=="string")for(var z=0;16>z;++z)B[z]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(z=0;16>z;++z)B[z]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=M.g[0],N=M.g[1],z=M.g[2];var G=M.g[3],F=C+(G^N&(z^G))+B[0]+3614090360&4294967295;C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[1]+3905402710&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[2]+606105819&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[3]+3250441966&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(G^N&(z^G))+B[4]+4118548399&4294967295,C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[5]+1200080426&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[6]+2821735955&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[7]+4249261313&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(G^N&(z^G))+B[8]+1770035416&4294967295,C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[9]+2336552879&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[10]+4294925233&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[11]+2304563134&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(G^N&(z^G))+B[12]+1804603682&4294967295,C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[13]+4254626195&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[14]+2792965006&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[15]+1236535329&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(z^G&(N^z))+B[1]+4129170786&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[6]+3225465664&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[11]+643717713&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[0]+3921069994&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(z^G&(N^z))+B[5]+3593408605&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[10]+38016083&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[15]+3634488961&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[4]+3889429448&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(z^G&(N^z))+B[9]+568446438&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[14]+3275163606&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[3]+4107603335&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[8]+1163531501&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(z^G&(N^z))+B[13]+2850285829&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[2]+4243563512&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[7]+1735328473&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[12]+2368359562&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(N^z^G)+B[5]+4294588738&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[8]+2272392833&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[11]+1839030562&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[14]+4259657740&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(N^z^G)+B[1]+2763975236&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[4]+1272893353&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[7]+4139469664&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[10]+3200236656&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(N^z^G)+B[13]+681279174&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[0]+3936430074&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[3]+3572445317&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[6]+76029189&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(N^z^G)+B[9]+3654602809&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[12]+3873151461&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[15]+530742520&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[2]+3299628645&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(z^(N|~G))+B[0]+4096336452&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[7]+1126891415&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[14]+2878612391&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[5]+4237533241&4294967295,N=z+(F<<21&4294967295|F>>>11),F=C+(z^(N|~G))+B[12]+1700485571&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[3]+2399980690&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[10]+4293915773&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[1]+2240044497&4294967295,N=z+(F<<21&4294967295|F>>>11),F=C+(z^(N|~G))+B[8]+1873313359&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[15]+4264355552&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[6]+2734768916&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[13]+1309151649&4294967295,N=z+(F<<21&4294967295|F>>>11),F=C+(z^(N|~G))+B[4]+4149444226&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[11]+3174756917&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[2]+718787259&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(z+(F<<21&4294967295|F>>>11))&4294967295,M.g[2]=M.g[2]+z&4294967295,M.g[3]=M.g[3]+G&4294967295}r.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var N=C-this.blockSize,B=this.B,z=this.h,G=0;G<C;){if(z==0)for(;G<=N;)i(this,M,G),G+=this.blockSize;if(typeof M=="string"){for(;G<C;)if(B[z++]=M.charCodeAt(G++),z==this.blockSize){i(this,B),z=0;break}}else for(;G<C;)if(B[z++]=M[G++],z==this.blockSize){i(this,B),z=0;break}}this.h=z,this.o+=C},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var N=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=N&255,N/=256;for(this.u(M),M=Array(16),C=N=0;4>C;++C)for(var B=0;32>B;B+=8)M[N++]=this.g[C]>>>B&255;return M};function s(M,C){var N=o;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=C(M)}function a(M,C){this.h=C;for(var N=[],B=!0,z=M.length-1;0<=z;z--){var G=M[z]|0;B&&G==C||(N[z]=G,B=!1)}this.g=N}var o={};function l(M){return-128<=M&&128>M?s(M,function(C){return new a([C|0],0>C?-1:0)}):new a([M|0],0>M?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return g;if(0>M)return E(h(-M));for(var C=[],N=1,B=0;M>=N;B++)C[B]=M/N|0,N*=4294967296;return new a(C,0)}function d(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return E(d(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(C,8)),B=g,z=0;z<M.length;z+=8){var G=Math.min(8,M.length-z),F=parseInt(M.substring(z,z+G),C);8>G?(G=h(Math.pow(C,G)),B=B.j(G).add(h(F))):(B=B.j(N),B=B.add(h(F)))}return B}var g=l(0),m=l(1),v=l(16777216);n=a.prototype,n.m=function(){if(b(this))return-E(this).m();for(var M=0,C=1,N=0;N<this.g.length;N++){var B=this.i(N);M+=(0<=B?B:4294967296+B)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(w(this))return"0";if(b(this))return"-"+E(this).toString(M);for(var C=h(Math.pow(M,6)),N=this,B="";;){var z=k(N,C).g;N=S(N,z.j(C));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=z,w(N))return G+B;for(;6>G.length;)G="0"+G;B=G+B}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function w(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function b(M){return M.h==-1}n.l=function(M){return M=S(this,M),b(M)?-1:w(M)?0:1};function E(M){for(var C=M.g.length,N=[],B=0;B<C;B++)N[B]=~M.g[B];return new a(N,~M.h).add(m)}n.abs=function(){return b(this)?E(this):this},n.add=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],B=0,z=0;z<=C;z++){var G=B+(this.i(z)&65535)+(M.i(z)&65535),F=(G>>>16)+(this.i(z)>>>16)+(M.i(z)>>>16);B=F>>>16,G&=65535,F&=65535,N[z]=F<<16|G}return new a(N,N[N.length-1]&-2147483648?-1:0)};function S(M,C){return M.add(E(C))}n.j=function(M){if(w(this)||w(M))return g;if(b(this))return b(M)?E(this).j(E(M)):E(E(this).j(M));if(b(M))return E(this.j(E(M)));if(0>this.l(v)&&0>M.l(v))return h(this.m()*M.m());for(var C=this.g.length+M.g.length,N=[],B=0;B<2*C;B++)N[B]=0;for(B=0;B<this.g.length;B++)for(var z=0;z<M.g.length;z++){var G=this.i(B)>>>16,F=this.i(B)&65535,xt=M.i(z)>>>16,bt=M.i(z)&65535;N[2*B+2*z]+=F*bt,T(N,2*B+2*z),N[2*B+2*z+1]+=G*bt,T(N,2*B+2*z+1),N[2*B+2*z+1]+=F*xt,T(N,2*B+2*z+1),N[2*B+2*z+2]+=G*xt,T(N,2*B+2*z+2)}for(B=0;B<C;B++)N[B]=N[2*B+1]<<16|N[2*B];for(B=C;B<2*C;B++)N[B]=0;return new a(N,0)};function T(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function I(M,C){this.g=M,this.h=C}function k(M,C){if(w(C))throw Error("division by zero");if(w(M))return new I(g,g);if(b(M))return C=k(E(M),C),new I(E(C.g),E(C.h));if(b(C))return C=k(M,E(C)),new I(E(C.g),C.h);if(30<M.g.length){if(b(M)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var N=m,B=C;0>=B.l(M);)N=P(N),B=P(B);var z=j(N,1),G=j(B,1);for(B=j(B,2),N=j(N,2);!w(B);){var F=G.add(B);0>=F.l(M)&&(z=z.add(N),G=F),B=j(B,1),N=j(N,1)}return C=S(M,z.j(C)),new I(z,C)}for(z=g;0<=M.l(C);){for(N=Math.max(1,Math.floor(M.m()/C.m())),B=Math.ceil(Math.log(N)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),G=h(N),F=G.j(C);b(F)||0<F.l(M);)N-=B,G=h(N),F=G.j(C);w(G)&&(G=m),z=z.add(G),M=S(M,F)}return new I(z,M)}n.A=function(M){return k(this,M).h},n.and=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],B=0;B<C;B++)N[B]=this.i(B)&M.i(B);return new a(N,this.h&M.h)},n.or=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],B=0;B<C;B++)N[B]=this.i(B)|M.i(B);return new a(N,this.h|M.h)},n.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],B=0;B<C;B++)N[B]=this.i(B)^M.i(B);return new a(N,this.h^M.h)};function P(M){for(var C=M.g.length+1,N=[],B=0;B<C;B++)N[B]=M.i(B)<<1|M.i(B-1)>>>31;return new a(N,M.h)}function j(M,C){var N=C>>5;C%=32;for(var B=M.g.length-N,z=[],G=0;G<B;G++)z[G]=0<C?M.i(G+N)>>>C|M.i(G+N+1)<<32-C:M.i(G+N);return new a(z,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,T8=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Ho=a}).apply(typeof KR<"u"?KR:typeof self<"u"?self:typeof window<"u"?window:{});var q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S8,Dd,C8,Em,U2,I8,R8,D8;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,R){return y==Array.prototype||y==Object.prototype||(y[A]=R.value),y};function e(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof q0=="object"&&q0];for(var A=0;A<y.length;++A){var R=y[A];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=e(this);function i(y,A){if(A)t:{var R=r;y=y.split(".");for(var U=0;U<y.length-1;U++){var $=y[U];if(!($ in R))break t;R=R[$]}y=y[y.length-1],U=R[y],A=A(U),A!=U&&A!=null&&t(R,y,{configurable:!0,writable:!0,value:A})}}function s(y,A){y instanceof String&&(y+="");var R=0,U=!1,$={next:function(){if(!U&&R<y.length){var at=R++;return{value:A(at,y[at]),done:!1}}return U=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(y){return y||function(){return s(this,function(A,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function h(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function d(y,A,R){return y.call.apply(y.bind,arguments)}function g(y,A,R){if(!y)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,U),y.apply(A,$)}}return function(){return y.apply(A,arguments)}}function m(y,A,R){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function v(y,A){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),y.apply(this,U)}}function w(y,A){function R(){}R.prototype=A.prototype,y.aa=A.prototype,y.prototype=new R,y.prototype.constructor=y,y.Qb=function(U,$,at){for(var At=Array(arguments.length-2),de=2;de<arguments.length;de++)At[de-2]=arguments[de];return A.prototype[$].apply(U,At)}}function b(y){const A=y.length;if(0<A){const R=Array(A);for(let U=0;U<A;U++)R[U]=y[U];return R}return[]}function E(y,A){for(let R=1;R<arguments.length;R++){const U=arguments[R];if(l(U)){const $=y.length||0,at=U.length||0;y.length=$+at;for(let At=0;At<at;At++)y[$+At]=U[At]}else y.push(U)}}class S{constructor(A,R){this.i=A,this.j=R,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function T(y){return/^[\s\xa0]*$/.test(y)}function I(){var y=o.navigator;return y&&(y=y.userAgent)?y:""}function k(y){return k[" "](y),y}k[" "]=function(){};var P=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function j(y,A,R){for(const U in y)A.call(R,y[U],U,y)}function M(y,A){for(const R in y)A.call(void 0,y[R],R,y)}function C(y){const A={};for(const R in y)A[R]=y[R];return A}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(y,A){let R,U;for(let $=1;$<arguments.length;$++){U=arguments[$];for(R in U)y[R]=U[R];for(let at=0;at<N.length;at++)R=N[at],Object.prototype.hasOwnProperty.call(U,R)&&(y[R]=U[R])}}function z(y){var A=1;y=y.split(":");const R=[];for(;0<A&&y.length;)R.push(y.shift()),A--;return y.length&&R.push(y.join(":")),R}function G(y){o.setTimeout(()=>{throw y},0)}function F(){var y=et;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class xt{constructor(){this.h=this.g=null}add(A,R){const U=bt.get();U.set(A,R),this.h?this.h.next=U:this.g=U,this.h=U}}var bt=new S(()=>new K,y=>y.reset());class K{constructor(){this.next=this.g=this.h=null}set(A,R){this.h=A,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,vt=!1,et=new xt,V=()=>{const y=o.Promise.resolve(void 0);ct=()=>{y.then(q)}};var q=()=>{for(var y;y=F();){try{y.h.call(y.g)}catch(R){G(R)}var A=bt;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}vt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const R=()=>{};o.addEventListener("test",R,A),o.removeEventListener("test",R,A)}catch{}return y}();function _t(y,A){if(nt.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var R=this.type=y.type,U=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(P){t:{try{k(A.nodeName);var $=!0;break t}catch{}$=!1}$||(A=null)}}else R=="mouseover"?A=y.fromElement:R=="mouseout"&&(A=y.toElement);this.relatedTarget=A,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:wt[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&_t.aa.h.call(this)}}w(_t,nt);var wt={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),Ut=0;function kt(y,A,R,U,$){this.listener=y,this.proxy=null,this.src=A,this.type=R,this.capture=!!U,this.ha=$,this.key=++Ut,this.da=this.fa=!1}function zt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function te(y){this.src=y,this.g={},this.h=0}te.prototype.add=function(y,A,R,U,$){var at=y.toString();y=this.g[at],y||(y=this.g[at]=[],this.h++);var At=Ke(y,A,U,$);return-1<At?(A=y[At],R||(A.fa=!1)):(A=new kt(A,this.src,at,!!U,$),A.fa=R,y.push(A)),A};function Fe(y,A){var R=A.type;if(R in y.g){var U=y.g[R],$=Array.prototype.indexOf.call(U,A,void 0),at;(at=0<=$)&&Array.prototype.splice.call(U,$,1),at&&(zt(A),y.g[R].length==0&&(delete y.g[R],y.h--))}}function Ke(y,A,R,U){for(var $=0;$<y.length;++$){var at=y[$];if(!at.da&&at.listener==A&&at.capture==!!R&&at.ha==U)return $}return-1}var rn="closure_lm_"+(1e6*Math.random()|0),ri={};function Rt(y,A,R,U,$){if(Array.isArray(A)){for(var at=0;at<A.length;at++)Rt(y,A[at],R,U,$);return null}return R=Hr(R),y&&y[Zt]?y.K(A,R,h(U)?!!U.capture:!1,$):Nt(y,A,R,!1,U,$)}function Nt(y,A,R,U,$,at){if(!A)throw Error("Invalid event type");var At=h($)?!!$.capture:!!$,de=De(y);if(de||(y[rn]=de=new te(y)),R=de.add(A,R,U,At,at),R.proxy)return R;if(U=pt(),R.proxy=U,U.src=y,U.listener=R,y.addEventListener)mt||($=At),$===void 0&&($=!1),y.addEventListener(A.toString(),U,$);else if(y.attachEvent)y.attachEvent(Et(A.toString()),U);else if(y.addListener&&y.removeListener)y.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function pt(){function y(R){return A.call(y.src,y.listener,R)}const A=Vt;return y}function Pt(y,A,R,U,$){if(Array.isArray(A))for(var at=0;at<A.length;at++)Pt(y,A[at],R,U,$);else U=h(U)?!!U.capture:!!U,R=Hr(R),y&&y[Zt]?(y=y.i,A=String(A).toString(),A in y.g&&(at=y.g[A],R=Ke(at,R,U,$),-1<R&&(zt(at[R]),Array.prototype.splice.call(at,R,1),at.length==0&&(delete y.g[A],y.h--)))):y&&(y=De(y))&&(A=y.g[A.toString()],y=-1,A&&(y=Ke(A,R,U,$)),(R=-1<y?A[y]:null)&&Jt(R))}function Jt(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[Zt])Fe(A.i,y);else{var R=y.type,U=y.proxy;A.removeEventListener?A.removeEventListener(R,U,y.capture):A.detachEvent?A.detachEvent(Et(R),U):A.addListener&&A.removeListener&&A.removeListener(U),(R=De(A))?(Fe(R,y),R.h==0&&(R.src=null,A[rn]=null)):zt(y)}}}function Et(y){return y in ri?ri[y]:ri[y]="on"+y}function Vt(y,A){if(y.da)y=!0;else{A=new _t(A,this);var R=y.listener,U=y.ha||y.src;y.fa&&Jt(y),y=R.call(U,A)}return y}function De(y){return y=y[rn],y instanceof te?y:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(y){return typeof y=="function"?y:(y[En]||(y[En]=function(A){return y.handleEvent(A)}),y[En])}function fe(){ot.call(this),this.i=new te(this),this.M=this,this.F=null}w(fe,ot),fe.prototype[Zt]=!0,fe.prototype.removeEventListener=function(y,A,R,U){Pt(this,y,A,R,U)};function Kt(y,A){var R,U=y.F;if(U)for(R=[];U;U=U.F)R.push(U);if(y=y.M,U=A.type||A,typeof A=="string")A=new nt(A,y);else if(A instanceof nt)A.target=A.target||y;else{var $=A;A=new nt(U,y),B(A,$)}if($=!0,R)for(var at=R.length-1;0<=at;at--){var At=A.g=R[at];$=qe(At,U,!0,A)&&$}if(At=A.g=y,$=qe(At,U,!0,A)&&$,$=qe(At,U,!1,A)&&$,R)for(at=0;at<R.length;at++)At=A.g=R[at],$=qe(At,U,!1,A)&&$}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var R=y.g[A],U=0;U<R.length;U++)zt(R[U]);delete y.g[A],y.h--}}this.F=null},fe.prototype.K=function(y,A,R,U){return this.i.add(String(y),A,!1,R,U)},fe.prototype.L=function(y,A,R,U){return this.i.add(String(y),A,!0,R,U)};function qe(y,A,R,U){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var $=!0,at=0;at<A.length;++at){var At=A[at];if(At&&!At.da&&At.capture==R){var de=At.listener,zn=At.ha||At.src;At.fa&&Fe(y.i,At),$=de.call(zn,U)!==!1&&$}}return $&&!U.defaultPrevented}function $e(y,A,R){if(typeof y=="function")R&&(y=m(y,R));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:o.setTimeout(y,A||0)}function Hi(y){y.g=$e(()=>{y.g=null,y.i&&(y.i=!1,Hi(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class cs extends ot{constructor(A,R){super(),this.m=A,this.l=R,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Hi(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(y){ot.call(this),this.h=y,this.g={}}w(ls,ot);var us=[];function hs(y){j(y.g,function(A,R){this.g.hasOwnProperty(R)&&Jt(A)},y),y.g={}}ls.prototype.N=function(){ls.aa.N.call(this),hs(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gi=o.JSON.stringify,Hl=o.JSON.parse,lc=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function $h(){}$h.prototype.h=null;function Qh(y){return y.h||(y.h=y.i())}function Zh(){}var ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ea(){nt.call(this,"d")}w(ea,nt);function Jh(){nt.call(this,"c")}w(Jh,nt);var fs={},tf=null;function Ga(){return tf=tf||new fe}fs.La="serverreachability";function Gl(y){nt.call(this,fs.La,y)}w(Gl,nt);function Wa(y){const A=Ga();Kt(A,new Gl(A))}fs.STAT_EVENT="statevent";function op(y,A){nt.call(this,fs.STAT_EVENT,y),this.stat=A}w(op,nt);function sn(y){const A=Ga();Kt(A,new op(A,y))}fs.Ma="timingevent";function jn(y,A){nt.call(this,fs.Ma,y),this.size=A}w(jn,nt);function Nn(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},A)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function ef(y,A,R,U,$,at){y.info(function(){if(y.g)if(at)for(var At="",de=at.split("&"),zn=0;zn<de.length;zn++){var ge=de[zn].split("=");if(1<ge.length){var nr=ge[0];ge=ge[1];var Hn=nr.split("_");At=2<=Hn.length&&Hn[1]=="type"?At+(nr+"="+ge+"&"):At+(nr+"=redacted&")}}else At=null;else At=at;return"XMLHTTP REQ ("+U+") [attempt "+$+"]: "+A+`
`+R+`
`+At})}function wy(y,A,R,U,$,at,At){y.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+$+"]: "+A+`
`+R+`
`+at+" "+At})}function qa(y,A,R,U){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+uc(y,R)+(U?" "+U:"")})}function cp(y,A){y.info(function(){return"TIMEOUT: "+A})}xi.prototype.info=function(){};function uc(y,A){if(!y.g)return A;if(!A)return null;try{var R=JSON.parse(A);if(R){for(y=0;y<R.length;y++)if(Array.isArray(R[y])){var U=R[y];if(!(2>U.length)){var $=U[1];if(Array.isArray($)&&!(1>$.length)){var at=$[0];if(at!="noop"&&at!="stop"&&at!="close")for(var At=1;At<$.length;At++)$[At]=""}}}}return Gi(R)}catch{return A}}var Ya={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},na={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ds;function gs(){}w(gs,$h),gs.prototype.g=function(){return new XMLHttpRequest},gs.prototype.i=function(){return{}},ds=new gs;function Pr(y,A,R,U){this.j=y,this.i=A,this.l=R,this.R=U||1,this.U=new ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new An}function An(){this.i=null,this.g="",this.h=!1}var nf={},Wl={};function Wi(y,A,R){y.L=1,y.v=pc(ii(A)),y.m=R,y.P=!0,ra(y,null)}function ra(y,A){y.F=Date.now(),hc(y),y.A=ii(y.v);var R=y.A,U=y.R;Array.isArray(U)||(U=[String(U)]),lf(R.i,"t",U),y.C=0,R=y.j.J,y.h=new An,y.g=Ap(y.j,R?A:null,!y.m),0<y.O&&(y.M=new cs(m(y.Y,y,y.g),y.O)),A=y.U,R=y.g,U=y.ca;var $="readystatechange";Array.isArray($)||($&&(us[0]=$.toString()),$=us);for(var at=0;at<$.length;at++){var At=Rt(R,$[at],U||A.handleEvent,!1,A.h||A);if(!At)break;A.g[At.key]=At}A=y.H?C(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),Wa(),ef(y.i,y.u,y.A,y.l,y.R,y.m)}Pr.prototype.ca=function(y){y=y.target;const A=this.M;A&&Ai(y)==3?A.j():this.Y(y)},Pr.prototype.Y=function(y){try{if(y==this.g)t:{const Hn=Ai(this.g);var A=this.g.Ba();const ha=this.g.Z();if(!(3>Hn)&&(Hn!=3||this.g&&(this.h.h||this.g.oa()||mp(this.g)))){this.J||Hn!=4||A==7||(A==8||0>=ha?Wa(3):Wa(2)),Xa(this);var R=this.g.Z();this.X=R;e:if(lp(this)){var U=mp(this.g);y="";var $=U.length,at=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fr(this),ps(this);var At="";break e}this.h.i=new o.TextDecoder}for(A=0;A<$;A++)this.h.h=!0,y+=this.h.i.decode(U[A],{stream:!(at&&A==$-1)});U.length=0,this.h.g+=y,this.C=0,At=this.h.g}else At=this.g.oa();if(this.o=R==200,wy(this.i,this.u,this.A,this.l,this.R,Hn,R),this.o){if(this.T&&!this.K){e:{if(this.g){var de,zn=this.g;if((de=zn.g?zn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(de)){var ge=de;break e}}ge=null}if(R=ge)qa(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fc(this,R);else{this.o=!1,this.s=3,sn(12),fr(this),ps(this);break t}}if(this.P){R=!0;let dr;for(;!this.J&&this.C<At.length;)if(dr=up(this,At),dr==Wl){Hn==4&&(this.s=4,sn(14),R=!1),qa(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==nf){this.s=4,sn(15),qa(this.i,this.l,At,"[Invalid Chunk]"),R=!1;break}else qa(this.i,this.l,dr,null),fc(this,dr);if(lp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hn!=4||At.length!=0||this.h.h||(this.s=1,sn(16),R=!1),this.o=this.o&&R,!R)qa(this.i,this.l,At,"[Invalid Chunked Response]"),fr(this),ps(this);else if(0<At.length&&!this.W){this.W=!0;var nr=this.j;nr.g==this&&nr.ba&&!nr.M&&(nr.j.info("Great, no buffering proxy detected. Bytes received: "+At.length),Ec(nr),nr.M=!0,sn(11))}}else qa(this.i,this.l,At,null),fc(this,At);Hn==4&&fr(this),this.o&&!this.J&&(Hn==4?wp(this.j,this):(this.o=!1,hc(this)))}else Sy(this.g),R==400&&0<At.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),fr(this),ps(this)}}}catch{}finally{}};function lp(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function up(y,A){var R=y.C,U=A.indexOf(`
`,R);return U==-1?Wl:(R=Number(A.substring(R,U)),isNaN(R)?nf:(U+=1,U+R>A.length?Wl:(A=A.slice(U,U+R),y.C=U+R,A)))}Pr.prototype.cancel=function(){this.J=!0,fr(this)};function hc(y){y.S=Date.now()+y.I,hp(y,y.I)}function hp(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Nn(m(y.ba,y),A)}function Xa(y){y.B&&(o.clearTimeout(y.B),y.B=null)}Pr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(cp(this.i,this.A),this.L!=2&&(Wa(),sn(17)),fr(this),this.s=2,ps(this)):hp(this,this.S-y)};function ps(y){y.j.G==0||y.J||wp(y.j,y)}function fr(y){Xa(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,hs(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function fc(y,A){try{var R=y.j;if(R.G!=0&&(R.g==y||rf(R.h,y))){if(!y.K&&rf(R.h,y)&&R.G==3){try{var U=R.Da.g.parse(A)}catch{U=null}if(Array.isArray(U)&&U.length==3){var $=U;if($[0]==0){t:if(!R.u){if(R.g)if(R.g.F+3e3<y.F)ru(R),eu(R);else break t;gf(R),sn(18)}}else R.za=$[1],0<R.za-R.T&&37500>$[2]&&R.F&&R.v==0&&!R.C&&(R.C=Nn(m(R.Za,R),6e3));if(1>=Yl(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else ua(R,11)}else if((y.K||R.g==y)&&ru(R),!T(A))for($=R.Da.g.parse(A),A=0;A<$.length;A++){let ge=$[A];if(R.T=ge[0],ge=ge[1],R.G==2)if(ge[0]=="c"){R.K=ge[1],R.ia=ge[2];const nr=ge[3];nr!=null&&(R.la=nr,R.j.info("VER="+R.la));const Hn=ge[4];Hn!=null&&(R.Aa=Hn,R.j.info("SVER="+R.Aa));const ha=ge[5];ha!=null&&typeof ha=="number"&&0<ha&&(U=1.5*ha,R.L=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const dr=y.g;if(dr){const bs=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var at=U.h;at.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Xl(at,at.h),at.h=null))}if(U.D){const mf=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;mf&&(U.ya=mf,Ue(U.I,U.D,mf))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-y.F,R.j.info("Handshake RTT: "+R.R+"ms")),U=R;var At=y;if(U.qa=Ep(U,U.J?U.ia:null,U.W),At.K){kr(U.h,At);var de=At,zn=U.L;zn&&(de.I=zn),de.B&&(Xa(de),hc(de)),U.g=At}else _p(U);0<R.i.length&&nu(R)}else ge[0]!="stop"&&ge[0]!="close"||ua(R,7);else R.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ua(R,7):ff(R):ge[0]!="noop"&&R.l&&R.l.ta(ge),R.v=0)}}Wa(4)}catch{}}var fp=class{constructor(y,A){this.g=y,this.map=A}};function ia(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ql(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Yl(y){return y.h?1:y.g?y.g.size:0}function rf(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function Xl(y,A){y.g?y.g.add(A):y.h=A}function kr(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}ia.prototype.cancel=function(){if(this.i=sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function sf(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const R of y.g.values())A=A.concat(R.D);return A}return b(y.i)}function by(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var A=[],R=y.length,U=0;U<R;U++)A.push(y[U]);return A}A=[],R=0;for(U in y)A[R++]=y[U];return A}function Kl(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var A=[];y=y.length;for(var R=0;R<y;R++)A.push(R);return A}A=[],R=0;for(const U in y)A[R++]=U;return A}}}function af(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var R=Kl(y),U=by(y),$=U.length,at=0;at<$;at++)A.call(void 0,U[at],R&&R[at],y)}var dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ey(y,A){if(y){y=y.split("&");for(var R=0;R<y.length;R++){var U=y[R].indexOf("="),$=null;if(0<=U){var at=y[R].substring(0,U);$=y[R].substring(U+1)}else at=y[R];A(at,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Pn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Pn){this.h=y.h,gc(this,y.j),this.o=y.o,this.g=y.g,Ka(this,y.s),this.l=y.l;var A=y.i,R=new aa;R.i=A.i,A.g&&(R.g=new Map(A.g),R.h=A.h),sa(this,R),this.m=y.m}else y&&(A=String(y).match(dc))?(this.h=!1,gc(this,A[1]||"",!0),this.o=wi(A[2]||""),this.g=wi(A[3]||"",!0),Ka(this,A[4]),this.l=wi(A[5]||"",!0),sa(this,A[6]||"",!0),this.m=wi(A[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}Pn.prototype.toString=function(){var y=[],A=this.j;A&&y.push(mc(A,of,!0),":");var R=this.g;return(R||A=="file")&&(y.push("//"),(A=this.o)&&y.push(mc(A,of,!0),"@"),y.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&y.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&y.push("/"),y.push(mc(R,R.charAt(0)=="/"?Ay:cf,!0))),(R=this.i.toString())&&y.push("?",R),(R=this.m)&&y.push("#",mc(R,$l)),y.join("")};function ii(y){return new Pn(y)}function gc(y,A,R){y.j=R?wi(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function Ka(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function sa(y,A,R){A instanceof aa?(y.i=A,gp(y.i,y.h)):(R||(A=mc(A,Ty)),y.i=new aa(A,y.h))}function Ue(y,A,R){y.i.set(A,R)}function pc(y){return Ue(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function wi(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function mc(y,A,R){return typeof y=="string"?(y=encodeURI(y).replace(A,dp),R&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function dp(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var of=/[#\/\?@]/g,cf=/[#\?:]/g,Ay=/[#\?]/g,Ty=/[#\?@]/g,$l=/#/g;function aa(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function bi(y){y.g||(y.g=new Map,y.h=0,y.i&&Ey(y.i,function(A,R){y.add(decodeURIComponent(A.replace(/\+/g," ")),R)}))}n=aa.prototype,n.add=function(y,A){bi(this),this.i=null,y=ms(this,y);var R=this.g.get(y);return R||this.g.set(y,R=[]),R.push(A),this.h+=1,this};function oa(y,A){bi(y),A=ms(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function ca(y,A){return bi(y),A=ms(y,A),y.g.has(A)}n.forEach=function(y,A){bi(this),this.g.forEach(function(R,U){R.forEach(function($){y.call(A,$,U,this)},this)},this)},n.na=function(){bi(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),R=[];for(let U=0;U<A.length;U++){const $=y[U];for(let at=0;at<$.length;at++)R.push(A[U])}return R},n.V=function(y){bi(this);let A=[];if(typeof y=="string")ca(this,y)&&(A=A.concat(this.g.get(ms(this,y))));else{y=Array.from(this.g.values());for(let R=0;R<y.length;R++)A=A.concat(y[R])}return A},n.set=function(y,A){return bi(this),this.i=null,y=ms(this,y),ca(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},n.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function lf(y,A,R){oa(y,A),0<R.length&&(y.i=null,y.g.set(ms(y,A),b(R)),y.h+=R.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var R=0;R<A.length;R++){var U=A[R];const at=encodeURIComponent(String(U)),At=this.V(U);for(U=0;U<At.length;U++){var $=at;At[U]!==""&&($+="="+encodeURIComponent(String(At[U]))),y.push($)}}return this.i=y.join("&")};function ms(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function gp(y,A){A&&!y.j&&(bi(y),y.i=null,y.g.forEach(function(R,U){var $=U.toLowerCase();U!=$&&(oa(this,U),lf(this,$,R))},y)),y.j=A}function yc(y,A){const R=new xi;if(o.Image){const U=new Image;U.onload=v(Ei,R,"TestLoadImage: loaded",!0,A,U),U.onerror=v(Ei,R,"TestLoadImage: error",!1,A,U),U.onabort=v(Ei,R,"TestLoadImage: abort",!1,A,U),U.ontimeout=v(Ei,R,"TestLoadImage: timeout",!1,A,U),o.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=y}else A(!1)}function qi(y,A){const R=new xi,U=new AbortController,$=setTimeout(()=>{U.abort(),Ei(R,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:U.signal}).then(at=>{clearTimeout($),at.ok?Ei(R,"TestPingServer: ok",!0,A):Ei(R,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout($),Ei(R,"TestPingServer: error",!1,A)})}function Ei(y,A,R,U,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),U(R)}catch{}}function vc(){this.g=new lc}function ys(y,A,R){const U=R||"";try{af(y,function($,at){let At=$;h($)&&(At=Gi($)),A.push(U+at+"="+encodeURIComponent(At))})}catch($){throw A.push(U+"type="+encodeURIComponent("_badmap")),$}}function $a(y){this.l=y.Ub||null,this.j=y.eb||!1}w($a,$h),$a.prototype.g=function(){return new la(this.l,this.j)},$a.prototype.i=function(y){return function(){return y}}({});function la(y,A){fe.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(la,fe),n=la.prototype,n.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,_s(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||o).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uf(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function uf(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?vs(this):_s(this),this.readyState==3&&uf(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,vs(this))},n.Qa=function(y){this.g&&(this.response=y,vs(this))},n.ga=function(){this.g&&vs(this)};function vs(y){y.readyState=4,y.l=null,y.j=null,y.v=null,_s(y)}n.setRequestHeader=function(y,A){this.u.append(y,A)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var R=A.next();!R.done;)R=R.value,y.push(R[0]+": "+R[1]),R=A.next();return y.join(`\r
`)};function _s(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function hf(y){let A="";return j(y,function(R,U){A+=U,A+=":",A+=R,A+=`\r
`}),A}function er(y,A,R){t:{for(U in R){var U=!1;break t}U=!0}U||(R=hf(R),typeof y=="string"?R!=null&&encodeURIComponent(String(R)):Ue(y,A,R))}function Se(y){fe.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Se,fe);var Ql=/^https?$/i,_c=["POST","PUT"];n=Se.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,A,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ds.g(),this.v=this.o?Qh(this.o):Qh(ds),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(at){pp(this,at);return}if(y=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var $ in U)R.set($,U[$]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const at of U.keys())R.set(at,U.get(at));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(at=>at.toLowerCase()=="content-type"),$=o.FormData&&y instanceof o.FormData,!(0<=Array.prototype.indexOf.call(_c,A,void 0))||U||$||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,At]of R)this.g.setRequestHeader(at,At);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xc(this),this.u=!0,this.g.send(y),this.u=!1}catch(at){pp(this,at)}};function pp(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,Zl(y),xs(y)}function Zl(y){y.A||(y.A=!0,Kt(y,"complete"),Kt(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Kt(this,"complete"),Kt(this,"abort"),xs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),Se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Jl(this):this.bb())},n.bb=function(){Jl(this)};function Jl(y){if(y.h&&typeof a<"u"&&(!y.v[1]||Ai(y)!=4||y.Z()!=2)){if(y.u&&Ai(y)==4)$e(y.Ea,0,y);else if(Kt(y,"readystatechange"),Ai(y)==4){y.h=!1;try{const At=y.Z();t:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var R;if(!(R=A)){var U;if(U=At===0){var $=String(y.D).match(dc)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),U=!Ql.test($?$.toLowerCase():"")}R=U}if(R)Kt(y,"complete"),Kt(y,"success");else{y.m=6;try{var at=2<Ai(y)?y.g.statusText:""}catch{at=""}y.l=at+" ["+y.Z()+"]",Zl(y)}}finally{xs(y)}}}}function xs(y,A){if(y.g){xc(y);const R=y.g,U=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||Kt(y,"ready");try{R.onreadystatechange=U}catch{}}}function xc(y){y.I&&(o.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function Ai(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),Hl(A)}};function mp(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Sy(y){const A={};y=(y.g&&2<=Ai(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<y.length;U++){if(T(y[U]))continue;var R=z(y[U]);const $=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const at=A[$]||[];A[$]=at,at.push(R)}M(A,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wc(y,A,R){return R&&R.internalChannelParams&&R.internalChannelParams[y]||A}function tu(y){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wc("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wc("baseRetryDelayMs",5e3,y),this.cb=wc("retryDelaySeedMs",1e4,y),this.Wa=wc("forwardChannelMaxRetries",2,y),this.wa=wc("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new ia(y&&y.concurrentRequestLimit),this.Da=new vc,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=tu.prototype,n.la=8,n.G=1,n.connect=function(y,A,R,U){sn(0),this.W=y,this.H=A||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.I=Ep(this,null,this.W),nu(this)};function ff(y){if(yp(y),y.G==3){var A=y.U++,R=ii(y.I);if(Ue(R,"SID",y.K),Ue(R,"RID",A),Ue(R,"TYPE","terminate"),bc(y,R),A=new Pr(y,y.j,A),A.L=2,A.v=pc(ii(R)),R=!1,o.navigator&&o.navigator.sendBeacon)try{R=o.navigator.sendBeacon(A.v.toString(),"")}catch{}!R&&o.Image&&(new Image().src=A.v,R=!0),R||(A.g=Ap(A.j,null),A.g.ea(A.v)),A.F=Date.now(),hc(A)}bp(y)}function eu(y){y.g&&(Ec(y),y.g.cancel(),y.g=null)}function yp(y){eu(y),y.u&&(o.clearTimeout(y.u),y.u=null),ru(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&o.clearTimeout(y.s),y.s=null)}function nu(y){if(!ql(y.h)&&!y.s){y.s=!0;var A=y.Ga;ct||V(),vt||(ct(),vt=!0),et.add(A,y),y.B=0}}function Cy(y,A){return Yl(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Nn(m(y.Ga,y,A),pf(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const $=new Pr(this,this.j,y);let at=this.o;if(this.S&&(at?(at=C(at),B(at,this.S)):at=this.S),this.m!==null||this.O||($.H=at,at=null),this.P)t:{for(var A=0,R=0;R<this.i.length;R++){e:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break e}U=void 0}if(U===void 0)break;if(A+=U,4096<A){A=R;break t}if(A===4096||R===this.i.length-1){A=R+1;break t}}A=1e3}else A=1e3;A=vp(this,$,A),R=ii(this.I),Ue(R,"RID",y),Ue(R,"CVER",22),this.D&&Ue(R,"X-HTTP-Session-Id",this.D),bc(this,R),at&&(this.O?A="headers="+encodeURIComponent(String(hf(at)))+"&"+A:this.m&&er(R,this.m,at)),Xl(this.h,$),this.Ua&&Ue(R,"TYPE","init"),this.P?(Ue(R,"$req",A),Ue(R,"SID","null"),$.T=!0,Wi($,R,null)):Wi($,R,A),this.G=2}}else this.G==3&&(y?df(this,y):this.i.length==0||ql(this.h)||df(this))};function df(y,A){var R;A?R=A.l:R=y.U++;const U=ii(y.I);Ue(U,"SID",y.K),Ue(U,"RID",R),Ue(U,"AID",y.T),bc(y,U),y.m&&y.o&&er(U,y.m,y.o),R=new Pr(y,y.j,R,y.B+1),y.m===null&&(R.H=y.o),A&&(y.i=A.D.concat(y.i)),A=vp(y,R,1e3),R.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Xl(y.h,R),Wi(R,U,A)}function bc(y,A){y.H&&j(y.H,function(R,U){Ue(A,U,R)}),y.l&&af({},function(R,U){Ue(A,U,R)})}function vp(y,A,R){R=Math.min(y.i.length,R);var U=y.l?m(y.l.Na,y.l,y):null;t:{var $=y.i;let at=-1;for(;;){const At=["count="+R];at==-1?0<R?(at=$[0].g,At.push("ofs="+at)):at=0:At.push("ofs="+at);let de=!0;for(let zn=0;zn<R;zn++){let ge=$[zn].g;const nr=$[zn].map;if(ge-=at,0>ge)at=Math.max(0,$[zn].g-100),de=!1;else try{ys(nr,At,"req"+ge+"_")}catch{U&&U(nr)}}if(de){U=At.join("&");break t}}}return y=y.i.splice(0,R),A.D=y,U}function _p(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;ct||V(),vt||(ct(),vt=!0),et.add(A,y),y.v=0}}function gf(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Nn(m(y.Fa,y),pf(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,xp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Nn(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),eu(this),xp(this))};function Ec(y){y.A!=null&&(o.clearTimeout(y.A),y.A=null)}function xp(y){y.g=new Pr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=ii(y.qa);Ue(A,"RID","rpc"),Ue(A,"SID",y.K),Ue(A,"AID",y.T),Ue(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&Ue(A,"TO",y.ja),Ue(A,"TYPE","xmlhttp"),bc(y,A),y.m&&y.o&&er(A,y.m,y.o),y.L&&(y.g.I=y.L);var R=y.g;y=y.ia,R.L=1,R.v=pc(ii(A)),R.m=null,R.P=!0,ra(R,y)}n.Za=function(){this.C!=null&&(this.C=null,eu(this),gf(this),sn(19))};function ru(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function wp(y,A){var R=null;if(y.g==A){ru(y),Ec(y),y.g=null;var U=2}else if(rf(y.h,A))R=A.D,kr(y.h,A),U=1;else return;if(y.G!=0){if(A.o)if(U==1){R=A.m?A.m.length:0,A=Date.now()-A.F;var $=y.B;U=Ga(),Kt(U,new jn(U,R)),nu(y)}else _p(y);else if($=A.s,$==3||$==0&&0<A.X||!(U==1&&Cy(y,A)||U==2&&gf(y)))switch(R&&0<R.length&&(A=y.h,A.i=A.i.concat(R)),$){case 1:ua(y,5);break;case 4:ua(y,10);break;case 3:ua(y,6);break;default:ua(y,2)}}}function pf(y,A){let R=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(R*=2),R*A}function ua(y,A){if(y.j.info("Error code "+A),A==2){var R=m(y.fb,y),U=y.Xa;const $=!U;U=new Pn(U||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||gc(U,"https"),pc(U),$?yc(U.toString(),R):qi(U.toString(),R)}else sn(2);y.G=0,y.l&&y.l.sa(A),bp(y),yp(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function bp(y){if(y.G=0,y.ka=[],y.l){const A=sf(y.h);(A.length!=0||y.i.length!=0)&&(E(y.ka,A),E(y.ka,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.ra()}}function Ep(y,A,R){var U=R instanceof Pn?ii(R):new Pn(R);if(U.g!="")A&&(U.g=A+"."+U.g),Ka(U,U.s);else{var $=o.location;U=$.protocol,A=A?A+"."+$.hostname:$.hostname,$=+$.port;var at=new Pn(null);U&&gc(at,U),A&&(at.g=A),$&&Ka(at,$),R&&(at.l=R),U=at}return R=y.D,A=y.ya,R&&A&&Ue(U,R,A),Ue(U,"VER",y.la),bc(y,U),U}function Ap(y,A,R){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new Se(new $a({eb:R})):new Se(y.pa),A.Ha(y.J),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tp(){}n=Tp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function iu(){}iu.prototype.g=function(y,A){return new Lr(y,A)};function Lr(y,A){fe.call(this),this.g=new tu(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!T(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!T(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new ws(this)}w(Lr,fe),Lr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lr.prototype.close=function(){ff(this.g)},Lr.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var R={};R.__data__=y,y=R}else this.u&&(R={},R.__data__=Gi(y),y=R);A.i.push(new fp(A.Ya++,y)),A.G==3&&nu(A)},Lr.prototype.N=function(){this.g.l=null,delete this.j,ff(this.g),delete this.g,Lr.aa.N.call(this)};function Sp(y){ea.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){t:{for(const R in A){y=R;break t}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}w(Sp,ea);function Cp(){Jh.call(this),this.status=1}w(Cp,Jh);function ws(y){this.g=y}w(ws,Tp),ws.prototype.ua=function(){Kt(this.g,"a")},ws.prototype.ta=function(y){Kt(this.g,new Sp(y))},ws.prototype.sa=function(y){Kt(this.g,new Cp)},ws.prototype.ra=function(){Kt(this.g,"b")},iu.prototype.createWebChannel=iu.prototype.g,Lr.prototype.send=Lr.prototype.o,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,D8=function(){return new iu},R8=function(){return Ga()},I8=fs,U2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ya.NO_ERROR=0,Ya.TIMEOUT=8,Ya.HTTP_ERROR=6,Em=Ya,na.COMPLETE="complete",C8=na,Zh.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",fe.prototype.listen=fe.prototype.K,Dd=Zh,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,S8=Se}).apply(typeof q0<"u"?q0:typeof self<"u"?self:typeof window<"u"?window:{});const $R="@firebase/firestore",QR="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new B1("@firebase/firestore");function Gu(){return Sl.logLevel}function yt(n,...t){if(Sl.logLevel<=ue.DEBUG){const e=t.map($b);Sl.debug(`Firestore (${Gh}): ${n}`,...e)}}function In(n,...t){if(Sl.logLevel<=ue.ERROR){const e=t.map($b);Sl.error(`Firestore (${Gh}): ${n}`,...e)}}function Tg(n,...t){if(Sl.logLevel<=ue.WARN){const e=t.map($b);Sl.warn(`Firestore (${Gh}): ${n}`,...e)}}function $b(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,O8(n,r,e)}function O8(n,t,e){let r=`FIRESTORE (${Gh}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw In(r),new Error(r)}function Lt(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||O8(t,i,r)}function Mt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends os{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class c${getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Sr.UNAUTHENTICATED))}shutdown(){}}class l${constructor(t){this.t=t,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Lt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,e(l)):Promise.resolve();let s=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qs,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qs)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt(typeof r.accessToken=="string",31837,{l:r}),new o$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Lt(t===null||typeof t=="string",2055,{h:t}),new Sr(t)}}class u${constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h${constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new u$(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f${constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Lt(this.o===void 0,3512);const r=s=>{s.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,yt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ZR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new ZR(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=d$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<e&&(r+=t.charAt(i[s]%62))}return r}}function $t(n,t){return n<t?-1:n>t?1:0}function j2(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const i=n.charAt(r),s=t.charAt(r);if(i!==s)return lx(i)===lx(s)?$t(i,s):lx(i)?1:-1}return $t(n.length,t.length)}const g$=55296,p$=57343;function lx(n){const t=n.charCodeAt(0);return t>=g$&&t<=p$}function yh(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function M8(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="__name__";class Os{constructor(t,e,r){e===void 0?e=0:e>t.length&&It(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&It(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Os.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Os?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const s=Os.compareSegments(t.get(i),e.get(i));if(s!==0)return s}return $t(t.length,e.length)}static compareSegments(t,e){const r=Os.isNumericId(t),i=Os.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?Os.extractNumericId(t).compare(Os.extractNumericId(e)):j2(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ho.fromString(t.substring(4,t.length-2))}}class Ie extends Os{construct(t,e,r){return new Ie(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new St(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Ie(e)}static emptyPath(){return new Ie([])}}const m$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Os{construct(t,e,r){return new dn(t,e,r)}static isValidIdentifier(t){return m$.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JR}static keyField(){return new dn([JR])}static fromServerFormat(t){const e=[];let r="",i=0;const s=()=>{if(r.length===0)throw new St(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let a=!1;for(;i<t.length;){const o=t[i];if(o==="\\"){if(i+1===t.length)throw new St(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new St(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new St(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new dn(e)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.path=t}static fromPath(t){return new Ct(Ie.fromString(t))}static fromName(t){return new Ct(Ie.fromString(t).popFirst(5))}static empty(){return new Ct(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ie.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ie.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ct(new Ie(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(n,t,e){if(!e)throw new St(dt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function y$(n,t,e,r){if(t===!0&&r===!0)throw new St(dt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function tD(n){if(!Ct.isDocumentKey(n))throw new St(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eD(n){if(Ct.isDocumentKey(n))throw new St(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function P8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":It(12329,{type:typeof n})}function $s(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new St(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Zb(n);throw new St(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(n,t){const e={typeString:n};return t&&(e.value=t),e}function Kg(n,t){if(!P8(n))throw new St(dt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){e=`Expected '${r}' field to equal '${s.value}'`;break}}if(e)throw new St(dt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=-62135596800,rD=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(t){return Ve.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*rD);return new Ve(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new St(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new St(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<nD)throw new St(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new St(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rD}_compareTo(t){return this.seconds===t.seconds?$t(this.nanoseconds,t.nanoseconds):$t(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Kg(t,Ve._jsonSchema))return new Ve(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-nD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:Fn("string",Ve._jsonSchemaVersion),seconds:Fn("number"),nanoseconds:Fn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{static fromTimestamp(t){return new Ft(t)}static min(){return new Ft(new Ve(0,0))}static max(){return new Ft(new Ve(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=-1;class o1{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function z2(n){return n.fields.find(t=>t.kind===2)}function $c(n){return n.fields.filter(t=>t.kind!==2)}o1.UNKNOWN_ID=-1;class Am{constructor(t,e){this.fieldPath=t,this.kind=e}}class Sg{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Sg(0,vi.min())}}function k8(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(r===1e9?new Ve(e+1,0):new Ve(e,r));return new vi(i,Ct.empty(),t)}function L8(n){return new vi(n.readTime,n.key,vh)}class vi{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new vi(Ft.min(),Ct.empty(),vh)}static max(){return new vi(Ft.max(),Ct.empty(),vh)}}function Jb(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Ct.comparator(n.documentKey,t.documentKey),e!==0?e:$t(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(n){if(n.code!==dt.FAILED_PRECONDITION||n.message!==V8)throw n;yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Q?e:Q.resolve(e)}catch(e){return Q.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.reject(e)}static resolve(t){return new Q((e,r)=>{e(t)})}static reject(t){return new Q((e,r)=>{r(t)})}static waitFor(t){return new Q((e,r)=>{let i=0,s=0,a=!1;t.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&e()},l=>r(l))}),a=!0,s===i&&e()})}static or(t){let e=Q.resolve(!1);for(const r of t)e=e.next(i=>i?Q.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,s)=>{r.push(e.call(this,i,s))}),this.waitFor(r)}static mapArray(t,e){return new Q((r,i)=>{const s=t.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(d=>{a[h]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(t,e){return new Q((r,i)=>{const s=()=>{t()===!0?e().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="SimpleDb";class G1{static open(t,e,r,i){try{return new G1(e,t.transaction(i,r))}catch(s){throw new Zd(e,s)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new qs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Zd(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=tE(r.target.error);this.S.reject(new Zd(t,i))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(yt(di,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new _$(e)}}class Go{static delete(t){return yt(di,"Removing database:",t),el(iP().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!Mb())return!1;if(Go.F())return!0;const t=Jn(),e=Go.M(t),r=0<e&&e<10,i=F8(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,Go.M(Jn())===12.2&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(yt(di,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;e(a)},i.onblocked=()=>{r(new Zd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new St(dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new St(dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Zd(t,a))},i.onupgradeneeded=s=>{yt(di,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next(()=>{yt(di,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,i){const s=e==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(t);const o=G1.open(this.db,t,s?"readonly":"readwrite",r),l=i(o).next(h=>(o.C(),h)).catch(h=>(o.abort(h),Q.reject(h))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,h=l.name!=="FirebaseError"&&a<3;if(yt(di,"Transaction failed with error:",l.message,"Retrying:",h),this.close(),!h)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function F8(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class v${constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return el(this.U.delete())}}class Zd extends St{constructor(t,e){super(dt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ac(n){return n.name==="IndexedDbTransactionError"}class _${constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(yt(di,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(yt(di,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),el(r)}add(t){return yt(di,"ADD",this.store.name,t,t),el(this.store.add(t))}get(t){return el(this.store.get(t)).next(e=>(e===void 0&&(e=null),yt(di,"GET",this.store.name,t,e),e))}delete(t){return yt(di,"DELETE",this.store.name,t),el(this.store.delete(t))}count(){return yt(di,"COUNT",this.store.name),el(this.store.count())}J(t,e){const r=this.options(t,e),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Q((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(r),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new Q((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}Z(t,e){yt(di,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const i=this.cursor(r);return this.H(i,(s,a,o)=>o.delete())}ee(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.H(i,e)}te(t){const e=this.cursor({});return new Q((r,i)=>{e.onerror=s=>{const a=tE(s.target.error);i(a)},e.onsuccess=s=>{const a=s.target.result;a?t(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(t,e){const r=[];return new Q((i,s)=>{t.onerror=a=>{s(a.target.error)},t.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new v$(o),h=e(o.primaryKey,o.value,l);if(h instanceof Q){const d=h.catch(g=>(l.done(),Q.reject(g)));r.push(d)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}}).next(()=>Q.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function el(n){return new Q((t,e)=>{n.onsuccess=r=>{const i=r.target.result;t(i)},n.onerror=r=>{const i=tE(r.target.error);e(i)}})}let iD=!1;function tE(n){const t=Go.M(Jn());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iD||(iD=!0,setTimeout(()=>{throw r},0)),r}}return n}const Jd="IndexBackfiller";class x${constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){yt(Jd,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ne.ie();yt(Jd,`Documents written: ${e}`)}catch(e){ac(e)?yt(Jd,"Ignoring IndexedDB error during index backfill: ",e):await sc(e)}await this.re(6e4)})}}class w${constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.se(e,t))}se(t,e){const r=new Set;let i=e,s=!0;return Q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(a!==null&&!r.has(a))return yt(Jd,`Processing collection: ${a}`),this.oe(t,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>e-i)}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this._e(i,s)).next(o=>(yt(Jd,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(t,e,o))).next(()=>a.size)}))}_e(t,e){let r=t;return e.changes.forEach((i,s)=>{const a=L8(s);Jb(a,r)>0&&(r=a)}),new vi(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Jr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function W1(n){return n==null}function Cg(n){return n===0&&1/n==-1/0}function U8(n){return typeof n=="number"&&Number.isInteger(n)&&!Cg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="";function Mr(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=sD(t)),t=b$(n.get(e),t);return sD(t)}function b$(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":e+="";break;case c1:e+="";break;default:e+=s}}return e}function sD(n){return n+c1+""}function Ls(n){const t=n.length;if(Lt(t>=2,64408,{path:n}),t===2)return Lt(n.charAt(0)===c1&&n.charAt(1)==="",56145,{path:n}),Ie.emptyPath();const e=t-2,r=[];let i="";for(let s=0;s<t;){const a=n.indexOf(c1,s);switch((a<0||a>e)&&It(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:It(61167,{path:n})}s=a+2}return new Ie(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="remoteDocuments",$g="owner",ku="owner",Ig="mutationQueues",E$="userId",ts="mutations",aD="batchId",ll="userMutationsIndex",oD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,t){return[n,Mr(t)]}function j8(n,t,e){return[n,Mr(t),e]}const A$={},_h="documentMutations",l1="remoteDocumentsV14",T$=["prefixPath","collectionGroup","readTime","documentId"],Sm="documentKeyIndex",S$=["prefixPath","collectionGroup","documentId"],z8="collectionGroupIndex",C$=["collectionGroup","readTime","prefixPath","documentId"],Rg="remoteDocumentGlobal",H2="remoteDocumentGlobalKey",xh="targets",H8="queryTargetsIndex",I$=["canonicalId","targetId"],wh="targetDocuments",R$=["targetId","path"],eE="documentTargetsIndex",D$=["path","targetId"],u1="targetGlobalKey",ml="targetGlobal",Dg="collectionParents",O$=["collectionId","parent"],bh="clientMetadata",M$="clientId",q1="bundles",N$="bundleId",Y1="namedQueries",P$="name",nE="indexConfiguration",k$="indexId",G2="collectionGroupIndex",L$="collectionGroup",tg="indexState",V$=["indexId","uid"],G8="sequenceNumberIndex",B$=["uid","sequenceNumber"],eg="indexEntries",F$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W8="documentKeyIndex",U$=["indexId","uid","orderedDocumentKey"],X1="documentOverlays",j$=["userId","collectionPath","documentId"],W2="collectionPathOverlayIndex",z$=["userId","collectionPath","largestBatchId"],q8="collectionGroupOverlayIndex",H$=["userId","collectionGroup","largestBatchId"],rE="globals",G$="name",Y8=[Ig,ts,_h,Qc,xh,$g,ml,wh,bh,Rg,Dg,q1,Y1],W$=[...Y8,X1],X8=[Ig,ts,_h,l1,xh,$g,ml,wh,bh,Rg,Dg,q1,Y1,X1],K8=X8,iE=[...K8,nE,tg,eg],q$=iE,$8=[...iE,rE],Y$=$8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2 extends B8{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function tr(n,t){const e=Mt(n);return Go.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function oc(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Q8(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,e){this.comparator=t,this.root=e||xr.EMPTY}insert(t,e){return new Je(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(t){return new Je(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Y0(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Y0(this.root,t,this.comparator,!1)}getReverseIterator(){return new Y0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Y0(this.root,t,this.comparator,!0)}}class Y0{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?r(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xr{constructor(t,e,r,i,s){this.key=t,this.value=e,this.color=r??xr.RED,this.left=i??xr.EMPTY,this.right=s??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,s){return new xr(t??this.key,e??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,r),null):s===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw It(27949);return t+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1;xr.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(t,e,r,i,s){return this}insert(t,e,r){return new xr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.comparator=t,this.data=new Je(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new lD(this.data.getIterator())}getIteratorFrom(t){return new lD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Be)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Be(this.comparator);return e.data=t,e}}class lD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t){this.fields=t,t.sort(dn.comparator)}static empty(){return new ti([])}unionWith(t){let e=new Be(dn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new ti(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return yh(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Z8("Invalid base64 string: "+s):s}}(t);return new Mn(e)}static fromUint8Array(t){const e=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new Mn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return $t(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const X$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Va(n){if(Lt(!!n,39018),typeof n=="string"){let t=0;const e=X$.exec(n);if(Lt(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ba(n){return typeof n=="string"?Mn.fromBase64String(n):Mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8="server_timestamp",t6="__type__",e6="__previous_value__",n6="__local_write_time__";function sE(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[t6])==null?void 0:r.stringValue)===J8}function K1(n){const t=n.mapValue.fields[e6];return sE(t)?K1(t):t}function Og(n){const t=Va(n.mapValue.fields[n6].timestampValue);return new Ve(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(t,e,r,i,s,a,o,l,h,d){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=d}}const h1="(default)";class Cl{constructor(t,e){this.projectId=t,this.database=e||h1}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===h1}isEqual(t){return t instanceof Cl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__type__",r6="__max__",Bo={mapValue:{fields:{__type__:{stringValue:r6}}}},oE="__vector__",Eh="value",Cm={nullValue:"NULL_VALUE"};function Zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sE(n)?4:i6(n)?9007199254740991:$1(n)?10:11:It(28295,{value:n})}function Qs(n,t){if(n===t)return!0;const e=Zo(n);if(e!==Zo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Og(n).isEqual(Og(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Va(i.timestampValue),o=Va(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,s){return Ba(i.bytesValue).isEqual(Ba(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,s){return on(i.geoPointValue.latitude)===on(s.geoPointValue.latitude)&&on(i.geoPointValue.longitude)===on(s.geoPointValue.longitude)}(n,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return on(i.integerValue)===on(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=on(i.doubleValue),o=on(s.doubleValue);return a===o?Cg(a)===Cg(o):isNaN(a)&&isNaN(o)}return!1}(n,t);case 9:return yh(n.arrayValue.values||[],t.arrayValue.values||[],Qs);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(cD(a)!==cD(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Qs(a[l],o[l])))return!1;return!0}(n,t);default:return It(52216,{left:n})}}function Mg(n,t){return(n.values||[]).find(e=>Qs(e,t))!==void 0}function Jo(n,t){if(n===t)return 0;const e=Zo(n),r=Zo(t);if(e!==r)return $t(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,t.booleanValue);case 2:return function(s,a){const o=on(s.integerValue||s.doubleValue),l=on(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,t);case 3:return uD(n.timestampValue,t.timestampValue);case 4:return uD(Og(n),Og(t));case 5:return j2(n.stringValue,t.stringValue);case 6:return function(s,a){const o=Ba(s),l=Ba(a);return o.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let h=0;h<o.length&&h<l.length;h++){const d=$t(o[h],l[h]);if(d!==0)return d}return $t(o.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){const o=$t(on(s.latitude),on(a.latitude));return o!==0?o:$t(on(s.longitude),on(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return hD(n.arrayValue,t.arrayValue);case 10:return function(s,a){var m,v,w,b;const o=s.fields||{},l=a.fields||{},h=(m=o[Eh])==null?void 0:m.arrayValue,d=(v=l[Eh])==null?void 0:v.arrayValue,g=$t(((w=h==null?void 0:h.values)==null?void 0:w.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return g!==0?g:hD(h,d)}(n.mapValue,t.mapValue);case 11:return function(s,a){if(s===Bo.mapValue&&a===Bo.mapValue)return 0;if(s===Bo.mapValue)return 1;if(a===Bo.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),h=a.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let g=0;g<l.length&&g<d.length;++g){const m=j2(l[g],d[g]);if(m!==0)return m;const v=Jo(o[l[g]],h[d[g]]);if(v!==0)return v}return $t(l.length,d.length)}(n.mapValue,t.mapValue);default:throw It(23264,{he:e})}}function uD(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return $t(n,t);const e=Va(n),r=Va(t),i=$t(e.seconds,r.seconds);return i!==0?i:$t(e.nanos,r.nanos)}function hD(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const s=Jo(e[i],r[i]);if(s)return s}return $t(e.length,r.length)}function Ah(n){return Y2(n)}function Y2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=Va(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Ba(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Ct.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const s of e.values||[])i?i=!1:r+=",",r+=Y2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Y2(e.fields[a])}`;return i+"}"}(n.mapValue):It(61005,{value:n})}function Im(n){switch(Zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=K1(n);return t?16+Im(t):16;case 5:return 2*n.stringValue.length;case 6:return Ba(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Im(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return oc(r.fields,(s,a)=>{i+=s.length+Im(a)}),i}(n.mapValue);default:throw It(13486,{value:n})}}function cE(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function X2(n){return!!n&&"integerValue"in n}function Ng(n){return!!n&&"arrayValue"in n}function fD(n){return!!n&&"nullValue"in n}function dD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rm(n){return!!n&&"mapValue"in n}function $1(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[aE])==null?void 0:r.stringValue)===oE}function ng(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return oc(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=ng(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ng(n.arrayValue.values[e]);return t}return{...n}}function i6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===r6}const s6={mapValue:{fields:{[aE]:{stringValue:oE},[Eh]:{arrayValue:{}}}}};function $$(n){return"nullValue"in n?Cm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cE(Cl.empty(),Ct.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?$1(n)?s6:{mapValue:{}}:It(35942,{value:n})}function Q$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cE(Cl.empty(),Ct.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?s6:"mapValue"in n?$1(n)?{mapValue:{}}:Bo:It(61959,{value:n})}function gD(n,t){const e=Jo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function pD(n,t){const e=Jo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t){this.value=t}static empty(){return new Ir({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Rm(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ng(e)}setAll(t){let e=dn.emptyPath(),r={},i=[];t.forEach((a,o)=>{if(!e.isImmediateParentOf(o)){const l=this.getFieldsMap(e);this.applyChanges(l,r,i),r={},i=[],e=o.popLast()}a?r[o.lastSegment()]=ng(a):i.push(o.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,i)}delete(t){const e=this.field(t.popLast());Rm(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Qs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];Rm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){oc(e,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Ir(ng(this.value))}}function a6(n){const t=[];return oc(n.fields,(e,r)=>{const i=new dn([e]);if(Rm(r)){const s=a6(r.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)}),new ti(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t,e,r,i,s,a,o){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(t){return new vn(t,0,Ft.min(),Ft.min(),Ft.min(),Ir.empty(),0)}static newFoundDocument(t,e,r,i){return new vn(t,1,e,Ft.min(),r,i,0)}static newNoDocument(t,e){return new vn(t,2,e,Ft.min(),Ft.min(),Ir.empty(),0)}static newUnknownDocument(t,e){return new vn(t,3,e,Ft.min(),Ft.min(),Ir.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof vn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,e){this.position=t,this.inclusive=e}}function mD(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const s=t[i],a=n.position[i];if(s.field.isKeyField()?r=Ct.comparator(Ct.fromName(a.referenceValue),e.key):r=Jo(a,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yD(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Qs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t,e="asc"){this.field=t,this.dir=e}}function Z$(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{}class he extends o6{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new J$(t,e,r):e==="array-contains"?new nQ(t,r):e==="in"?new d6(t,r):e==="not-in"?new rQ(t,r):e==="array-contains-any"?new iQ(t,r):new he(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new tQ(t,r):new eQ(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Jo(e,this.value)):e!==null&&Zo(this.value)===Zo(e)&&this.matchesComparison(Jo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends o6{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new We(t,e)}matches(t){return Sh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sh(n){return n.op==="and"}function K2(n){return n.op==="or"}function lE(n){return c6(n)&&Sh(n)}function c6(n){for(const t of n.filters)if(t instanceof We)return!1;return!0}function $2(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+Ah(n.value);if(lE(n))return n.filters.map(t=>$2(t)).join(",");{const t=n.filters.map(e=>$2(e)).join(",");return`${n.op}(${t})`}}function l6(n,t){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&Qs(r.value,i.value)}(n,t):n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&l6(a,i.filters[o]),!0):!1}(n,t):void It(19439)}function u6(n,t){const e=n.filters.concat(t);return We.create(e,n.op)}function h6(n){return n instanceof he?function(e){return`${e.field.canonicalString()} ${e.op} ${Ah(e.value)}`}(n):n instanceof We?function(e){return e.op.toString()+" {"+e.getFilters().map(h6).join(" ,")+"}"}(n):"Filter"}class J$ extends he{constructor(t,e,r){super(t,e,r),this.key=Ct.fromName(r.referenceValue)}matches(t){const e=Ct.comparator(t.key,this.key);return this.matchesComparison(e)}}class tQ extends he{constructor(t,e){super(t,"in",e),this.keys=f6("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class eQ extends he{constructor(t,e){super(t,"not-in",e),this.keys=f6("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function f6(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(r=>Ct.fromName(r.referenceValue))}class nQ extends he{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ng(e)&&Mg(e.arrayValue,this.value)}}class d6 extends he{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Mg(this.value.arrayValue,e)}}class rQ extends he{constructor(t,e){super(t,"not-in",e)}matches(t){if(Mg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Mg(this.value.arrayValue,e)}}class iQ extends he{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ng(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Mg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(t,e=null,r=[],i=[],s=null,a=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function Q2(n,t=null,e=[],r=[],i=null,s=null,a=null){return new sQ(n,t,e,r,i,s,a)}function Il(n){const t=Mt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>$2(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),W1(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Ah(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Ah(r)).join(",")),t.Te=e}return t.Te}function Qg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Z$(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!l6(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!yD(n.startAt,t.startAt)&&yD(n.endAt,t.endAt)}function d1(n){return Ct.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function g1(n,t){return n.filters.filter(e=>e instanceof he&&e.field.isEqual(t))}function vD(n,t,e){let r=Cm,i=!0;for(const s of g1(n,t)){let a=Cm,o=!0;switch(s.op){case"<":case"<=":a=$$(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Cm}gD({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];gD({value:r,inclusive:i},{value:a,inclusive:e.inclusive})<0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}function _D(n,t,e){let r=Bo,i=!0;for(const s of g1(n,t)){let a=Bo,o=!0;switch(s.op){case">=":case">":a=Q$(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Bo}pD({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];pD({value:r,inclusive:i},{value:a,inclusive:e.inclusive})>0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,e=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function g6(n,t,e,r,i,s,a,o){return new Q1(n,t,e,r,i,s,a,o)}function Z1(n){return new Q1(n)}function xD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aQ(n){return n.collectionGroup!==null}function rg(n){const t=Mt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Be(dn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new f1(s,r))}),e.has(dn.keyField().canonicalString())||t.Ie.push(new f1(dn.keyField(),r))}return t.Ie}function yi(n){const t=Mt(n);return t.Ee||(t.Ee=oQ(t,rg(n))),t.Ee}function oQ(n,t){if(n.limitType==="F")return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new f1(i.field,s)});const e=n.endAt?new Th(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Th(n.startAt.position,n.startAt.inclusive):null;return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Z2(n,t,e){return new Q1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function J1(n,t){return Qg(yi(n),yi(t))&&n.limitType===t.limitType}function p6(n){return`${Il(yi(n))}|lt:${n.limitType}`}function Wu(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>h6(i)).join(", ")}]`),W1(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Ah(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Ah(i)).join(",")),`Target(${r})`}(yi(n))}; limitType=${n.limitType})`}function Zg(n,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ct.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,t)&&function(r,i){for(const s of rg(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(a,o,l){const h=mD(a,o,l);return a.inclusive?h<=0:h<0}(r.startAt,rg(r),i)||r.endAt&&!function(a,o,l){const h=mD(a,o,l);return a.inclusive?h>=0:h>0}(r.endAt,rg(r),i))}(n,t)}function m6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y6(n){return(t,e)=>{let r=!1;for(const i of rg(n)){const s=cQ(i,t,e);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cQ(n,t,e){const r=n.field.isKeyField()?Ct.comparator(t.key,e.key):function(s,a,o){const l=a.data.field(s),h=o.data.field(s);return l!==null&&h!==null?Jo(l,h):It(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){oc(this.inner,(e,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Q8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQ=new Je(Ct.comparator);function pi(){return lQ}const v6=new Je(Ct.comparator);function Od(...n){let t=v6;for(const e of n)t=t.insert(e.key,e);return t}function _6(n){let t=v6;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Vs(){return ig()}function x6(){return ig()}function ig(){return new Ua(n=>n.toString(),(n,t)=>n.isEqual(t))}const uQ=new Je(Ct.comparator),hQ=new Be(Ct.comparator);function se(...n){let t=hQ;for(const e of n)t=t.add(e);return t}const fQ=new Be($t);function uE(){return fQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cg(t)?"-0":t}}function w6(n){return{integerValue:""+n}}function dQ(n,t){return U8(t)?w6(t):hE(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this._=void 0}}function gQ(n,t,e){return n instanceof Pg?function(i,s){const a={fields:{[t6]:{stringValue:J8},[n6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sE(s)&&(s=K1(s)),s&&(a.fields[e6]=s),{mapValue:a}}(e,t):n instanceof Ch?E6(n,t):n instanceof Ih?A6(n,t):function(i,s){const a=b6(i,s),o=wD(a)+wD(i.Ae);return X2(a)&&X2(i.Ae)?w6(o):hE(i.serializer,o)}(n,t)}function pQ(n,t,e){return n instanceof Ch?E6(n,t):n instanceof Ih?A6(n,t):e}function b6(n,t){return n instanceof kg?function(r){return X2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class Pg extends ty{}class Ch extends ty{constructor(t){super(),this.elements=t}}function E6(n,t){const e=T6(t);for(const r of n.elements)e.some(i=>Qs(i,r))||e.push(r);return{arrayValue:{values:e}}}class Ih extends ty{constructor(t){super(),this.elements=t}}function A6(n,t){let e=T6(t);for(const r of n.elements)e=e.filter(i=>!Qs(i,r));return{arrayValue:{values:e}}}class kg extends ty{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function wD(n){return on(n.integerValue||n.doubleValue)}function T6(n){return Ng(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(t,e){this.field=t,this.transform=e}}function yQ(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof Ch&&i instanceof Ch||r instanceof Ih&&i instanceof Ih?yh(r.elements,i.elements,Qs):r instanceof kg&&i instanceof kg?Qs(r.Ae,i.Ae):r instanceof Pg&&i instanceof Pg}(n.transform,t.transform)}class vQ{constructor(t,e){this.version=t,this.transformResults=e}}class Or{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Or}static exists(t){return new Or(void 0,t)}static updateTime(t){return new Or(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Dm(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ey{}function S6(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new ny(n.key,Or.none()):new Wh(n.key,n.data,Or.none());{const e=n.data,r=Ir.empty();let i=new Be(dn.comparator);for(let s of t.fields)if(!i.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ja(n.key,r,new ti(i.toArray()),Or.none())}}function _Q(n,t,e){n instanceof Wh?function(i,s,a){const o=i.value.clone(),l=ED(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,t,e):n instanceof ja?function(i,s,a){if(!Dm(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=ED(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(C6(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function sg(n,t,e,r){return n instanceof Wh?function(s,a,o,l){if(!Dm(s.precondition,a))return o;const h=s.value.clone(),d=AD(s.fieldTransforms,l,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,r):n instanceof ja?function(s,a,o,l){if(!Dm(s.precondition,a))return o;const h=AD(s.fieldTransforms,l,a),d=a.data;return d.setAll(C6(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,t,e,r):function(s,a,o){return Dm(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,t,e)}function xQ(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),s=b6(r.transform,i||null);s!=null&&(e===null&&(e=Ir.empty()),e.set(r.field,s))}return e||null}function bD(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yh(r,i,(s,a)=>yQ(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Wh extends ey{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ja extends ey{constructor(t,e,r,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function C6(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function ED(n,t,e){const r=new Map;Lt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const s=n[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,pQ(a,o,e[i]))}return r}function AD(n,t,e){const r=new Map;for(const i of n){const s=i.transform,a=e.data.field(i.field);r.set(i.field,gQ(s,a,t))}return r}class ny extends ey{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I6 extends ey{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&_Q(s,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=sg(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=sg(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=x6();return this.mutations.forEach(i=>{const s=t.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=e.has(i.key)?null:o;const l=S6(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),se())}isEqual(t){return this.batchId===t.batchId&&yh(this.mutations,t.mutations,(e,r)=>bD(e,r))&&yh(this.baseMutations,t.baseMutations,(e,r)=>bD(e,r))}}class dE{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Lt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return uQ}();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new dE(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQ{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn,me;function bQ(n){switch(n){case dt.OK:return It(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return It(15467,{code:n})}}function R6(n){if(n===void 0)return In("GRPC error has no .code"),dt.UNKNOWN;switch(n){case Vn.OK:return dt.OK;case Vn.CANCELLED:return dt.CANCELLED;case Vn.UNKNOWN:return dt.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return dt.INTERNAL;case Vn.UNAVAILABLE:return dt.UNAVAILABLE;case Vn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case Vn.NOT_FOUND:return dt.NOT_FOUND;case Vn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case Vn.ABORTED:return dt.ABORTED;case Vn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case Vn.DATA_LOSS:return dt.DATA_LOSS;default:return It(39323,{code:n})}}(me=Vn||(Vn={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ=new Ho([4294967295,4294967295],0);function TD(n){const t=EQ().encode(n),e=new T8;return e.update(t),new Uint8Array(e.digest())}function SD(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ho([e,r],0),new Ho([i,s],0)]}class pE{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Md(`Invalid padding: ${e}`);if(r<0)throw new Md(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Md(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Md(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Ho.fromNumber(this.ge)}ye(t,e,r){let i=t.add(e.multiply(Ho.fromNumber(r)));return i.compare(AQ)===1&&(i=new Ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=TD(t),[r,i]=SD(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new pE(s,i,e);return r.forEach(o=>a.insert(o)),a}insert(t){if(this.ge===0)return;const e=TD(t),[r,i]=SD(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Md extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t,e,r,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,tp.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Jg(Ft.min(),i,new Je($t),pi(),se())}}class tp{constructor(t,e,r,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new tp(r,e,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t,e,r,i){this.be=t,this.removedTargetIds=e,this.key=r,this.De=i}}class D6{constructor(t,e){this.targetId=t,this.Ce=e}}class O6{constructor(t,e,r=Mn.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class CD{constructor(){this.ve=0,this.Fe=ID(),this.Me=Mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=se(),e=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:It(38017,{changeType:s})}}),new tp(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=ID()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class TQ{constructor(t){this.Ge=t,this.ze=new Map,this.je=pi(),this.Je=X0(),this.He=X0(),this.Ye=new Je($t)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:It(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((r,i)=>{this.rt(i)&&e(i)})}st(t){const e=t.targetId,r=t.Ce.count,i=this.ot(e);if(i){const s=i.target;if(d1(s))if(r===0){const a=new Ct(s.path);this.et(e,a,vn.newNoDocument(a,Ft.min()))}else Lt(r===1,20013,{expectedCount:r});else{const a=this._t(e);if(a!==r){const o=this.ut(t),l=o?this.ct(o,t,a):1;if(l!==0){this.it(e);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,h)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=e;let a,o;try{a=Ba(r).toUint8Array()}catch(l){if(l instanceof Z8)return Tg("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new pE(a,i,s)}catch(l){return Tg(l instanceof Md?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(e,s,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&d1(o.target)){const l=new Ct(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,vn.newNoDocument(l,t))}s.Be&&(e.set(a,s.ke()),s.qe())}});let r=se();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const i=new Jg(t,e,this.Ye,this.je,r);return this.je=pi(),this.Je=X0(),this.He=X0(),this.Ye=new Je($t),i}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new CD,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Be($t),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Be($t),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||yt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new CD),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function X0(){return new Je(Ct.comparator)}function ID(){return new Je(Ct.comparator)}const SQ={asc:"ASCENDING",desc:"DESCENDING"},CQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IQ={and:"AND",or:"OR"};class RQ{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function J2(n,t){return n.useProto3Json||W1(t)?t:{value:t}}function Rh(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function M6(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function DQ(n,t){return Rh(n,t.toTimestamp())}function zr(n){return Lt(!!n,49232),Ft.fromTimestamp(function(e){const r=Va(e);return new Ve(r.seconds,r.nanos)}(n))}function mE(n,t){return tw(n,t).canonicalString()}function tw(n,t){const e=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function N6(n){const t=Ie.fromString(n);return Lt(z6(t),10190,{key:t.toString()}),t}function p1(n,t){return mE(n.databaseId,t.path)}function yl(n,t){const e=N6(t);if(e.get(1)!==n.databaseId.projectId)throw new St(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new St(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ct(L6(e))}function P6(n,t){return mE(n.databaseId,t)}function k6(n){const t=N6(n);return t.length===4?Ie.emptyPath():L6(t)}function ew(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L6(n){return Lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function RD(n,t,e){return{name:p1(n,t),fields:e.value.mapValue.fields}}function OQ(n,t,e){const r=yl(n,t.name),i=zr(t.updateTime),s=t.createTime?zr(t.createTime):Ft.min(),a=new Ir({mapValue:{fields:t.fields}}),o=vn.newFoundDocument(r,i,s,a);return e&&o.setHasCommittedMutations(),e?o.setHasCommittedMutations():o}function MQ(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:It(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(Lt(d===void 0||typeof d=="string",58123),Mn.fromBase64String(d||"")):(Lt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Mn.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(h){const d=h.code===void 0?dt.UNKNOWN:R6(h.code);return new St(d,h.message||"")}(a);e=new O6(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=yl(n,r.document.name),s=zr(r.document.updateTime),a=r.document.createTime?zr(r.document.createTime):Ft.min(),o=new Ir({mapValue:{fields:r.document.fields}}),l=vn.newFoundDocument(i,s,a,o),h=r.targetIds||[],d=r.removedTargetIds||[];e=new Om(h,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=yl(n,r.document),s=r.readTime?zr(r.readTime):Ft.min(),a=vn.newNoDocument(i,s),o=r.removedTargetIds||[];e=new Om([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=yl(n,r.document),s=r.removedTargetIds||[];e=new Om([],s,i,null)}else{if(!("filter"in t))return It(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new wQ(i,s),o=r.targetId;e=new D6(o,a)}}return e}function m1(n,t){let e;if(t instanceof Wh)e={update:RD(n,t.key,t.value)};else if(t instanceof ny)e={delete:p1(n,t.key)};else if(t instanceof ja)e={update:RD(n,t.key,t.data),updateMask:BQ(t.fieldMask)};else{if(!(t instanceof I6))return It(16599,{Vt:t.type});e={verify:p1(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Pg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ch)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ih)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof kg)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw It(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:DQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:It(27497)}(n,t.precondition)),e}function nw(n,t){const e=t.currentDocument?function(s){return s.updateTime!==void 0?Or.updateTime(zr(s.updateTime)):s.exists!==void 0?Or.exists(s.exists):Or.none()}(t.currentDocument):Or.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,o){let l=null;if("setToServerValue"in o)Lt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new Pg;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new Ch(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new Ih(d)}else"increment"in o?l=new kg(a,o.increment):It(16584,{proto:o});const h=dn.fromServerFormat(o.fieldPath);return new mQ(h,l)}(n,i)):[];if(t.update){t.update.name;const i=yl(n,t.update.name),s=new Ir({mapValue:{fields:t.update.fields}});if(t.updateMask){const a=function(l){const h=l.fieldPaths||[];return new ti(h.map(d=>dn.fromServerFormat(d)))}(t.updateMask);return new ja(i,s,a,e,r)}return new Wh(i,s,e,r)}if(t.delete){const i=yl(n,t.delete);return new ny(i,e)}if(t.verify){const i=yl(n,t.verify);return new I6(i,e)}return It(1463,{proto:t})}function NQ(n,t){return n&&n.length>0?(Lt(t!==void 0,14353),n.map(e=>function(i,s){let a=i.updateTime?zr(i.updateTime):zr(s);return a.isEqual(Ft.min())&&(a=zr(s)),new vQ(a,i.transformResults||[])}(e,t))):[]}function V6(n,t){return{documents:[P6(n,t.path)]}}function B6(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=P6(n,i);const s=function(h){if(h.length!==0)return j6(We.create(h,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:qu(m.field),direction:kQ(m.dir)}}(d))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const o=J2(n,t.limit);return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:e,parent:i}}function F6(n){let t=k6(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Lt(r===1,65062);const d=e.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let s=[];e.where&&(s=function(g){const m=U6(g);return m instanceof We&&lE(m)?m.getFilters():[m]}(e.where));let a=[];e.orderBy&&(a=function(g){return g.map(m=>function(w){return new f1(Yu(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(e.orderBy));let o=null;e.limit&&(o=function(g){let m;return m=typeof g=="object"?g.value:g,W1(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(g){const m=!!g.before,v=g.values||[];return new Th(v,m)}(e.startAt));let h=null;return e.endAt&&(h=function(g){const m=!g.before,v=g.values||[];return new Th(v,m)}(e.endAt)),g6(t,i,a,s,o,"F",l,h)}function PQ(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function U6(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Yu(e.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yu(e.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yu(e.unaryFilter.field);return he.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Yu(e.unaryFilter.field);return he.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(n):n.fieldFilter!==void 0?function(e){return he.create(Yu(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return We.create(e.compositeFilter.filters.map(r=>U6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(e.compositeFilter.op))}(n):It(30097,{filter:n})}function kQ(n){return SQ[n]}function LQ(n){return CQ[n]}function VQ(n){return IQ[n]}function qu(n){return{fieldPath:n.canonicalString()}}function Yu(n){return dn.fromServerFormat(n.fieldPath)}function j6(n){return n instanceof he?function(e){if(e.op==="=="){if(dD(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NAN"}};if(fD(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(dD(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NOT_NAN"}};if(fD(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(e.field),op:LQ(e.op),value:e.value}}}(n):n instanceof We?function(e){const r=e.getFilters().map(i=>j6(i));return r.length===1?r[0]:{compositeFilter:{op:VQ(e.op),filters:r}}}(n):It(54877,{filter:n})}function BQ(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function z6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(t,e,r,i,s=Ft.min(),a=Ft.min(),o=Mn.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new Ma(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(t){this.yt=t}}function FQ(n,t){let e;if(t.document)e=OQ(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Ct.fromSegments(t.noDocument.path),i=Dl(t.noDocument.readTime);e=vn.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return It(56709);{const r=Ct.fromSegments(t.unknownDocument.path),i=Dl(t.unknownDocument.version);e=vn.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(i){const s=new Ve(i[0],i[1]);return Ft.fromTimestamp(s)}(t.readTime)),e}function DD(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:y1(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(s,a){return{name:p1(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Rh(s,a.version.toTimestamp()),createTime:Rh(s,a.createTime.toTimestamp())}}(n.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Rl(t.version)};else{if(!t.isUnknownDocument())return It(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Rl(t.version)}}return r}function y1(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Rl(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Dl(n){const t=new Ve(n.seconds,n.nanoseconds);return Ft.fromTimestamp(t)}function nl(n,t){const e=(t.baseMutations||[]).map(s=>nw(n.yt,s));for(let s=0;s<t.mutations.length-1;++s){const a=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){const o=t.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(s=>nw(n.yt,s)),i=Ve.fromMillis(t.localWriteTimeMs);return new fE(t.batchId,i,e,r)}function Nd(n){const t=Dl(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?Dl(n.lastLimboFreeSnapshotVersion):Ft.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){const a=s.documents.length;return Lt(a===1,1966,{count:a}),yi(Z1(k6(s.documents[0])))}(n.query):function(s){return yi(F6(s))}(n.query),new Ma(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Mn.fromBase64String(n.resumeToken))}function G6(n,t){const e=Rl(t.snapshotVersion),r=Rl(t.lastLimboFreeSnapshotVersion);let i;i=d1(t.target)?V6(n.yt,t.target):B6(n.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Il(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function W6(n){const t=F6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Z2(t,t.limit,"L"):t}function ux(n,t){return new gE(t.largestBatchId,nw(n.yt,t.overlayMutation))}function OD(n,t){const e=t.path.lastSegment();return[n,Mr(t.path.popLast()),e]}function MD(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:Rl(r.readTime),documentKey:Mr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{getBundleMetadata(t,e){return ND(t).get(e).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Dl(s.createTime),version:s.version}}(r)})}saveBundleMetadata(t,e){return ND(t).put(function(i){return{bundleId:i.id,createTime:Rl(zr(i.createTime)),version:i.version}}(e))}getNamedQuery(t,e){return PD(t).get(e).next(r=>{if(r)return function(s){return{name:s.name,query:W6(s.bundledQuery),readTime:Dl(s.readTime)}}(r)})}saveNamedQuery(t,e){return PD(t).put(function(i){return{name:i.name,readTime:Rl(zr(i.readTime)),bundledQuery:i.bundledQuery}}(e))}}function ND(n){return tr(n,q1)}function PD(n){return tr(n,Y1)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new ry(t,r)}getOverlay(t,e){return ud(t).get(OD(this.userId,e)).next(r=>r?ux(this.serializer,r):null)}getOverlays(t,e){const r=Vs();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){const i=[];return r.forEach((s,a)=>{const o=new gE(e,a);i.push(this.St(t,o))}),Q.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(a=>i.add(Mr(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(ud(t).Z(W2,o))}),Q.waitFor(s)}getOverlaysForCollection(t,e,r){const i=Vs(),s=Mr(e),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ud(t).J(W2,a).next(o=>{for(const l of o){const h=ux(this.serializer,l);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const s=Vs();let a;const o=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ud(t).ee({index:q8,range:o},(l,h,d)=>{const g=ux(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):d.done()}).next(()=>s)}St(t,e){return ud(t).put(function(i,s,a){const[o,l,h]=OD(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:m1(i.yt,a.mutation)}}(this.serializer,this.userId,e))}}function ud(n){return tr(n,X1)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{bt(t){return tr(t,rE)}getSessionToken(t){return this.bt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?Mn.fromUint8Array(r):Mn.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(on(t.integerValue));else if("doubleValue"in t){const r=on(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Cg(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=Va(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Ba(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?i6(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):$1(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):It(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const i of Object.keys(r))this.Ot(i,e),this.Ct(r[i],e)}kt(t,e){var a,o;const r=t.fields||{};this.Ft(e,53);const i=Eh,s=((o=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(e,15),e.Mt(on(s)),this.Ot(i,e),this.Ct(r[i],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const i of r)this.Ct(i,e)}Lt(t,e){this.Ft(e,37),Ct.fromName(t).path.forEach(r=>{this.Ft(e,60),this.Ut(r,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}rl.Kt=new rl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=255;function zQ(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function kD(n){const t=64-function(r){let i=0;for(let s=0;s<8;++s){const a=zQ(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(t/8)}class HQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=e.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=e.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(t){const e=this.en(t),r=kD(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}nn(t){const e=this.en(t),r=kD(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}rn(){this.sn(Vu),this.sn(255)}_n(){this.an(Vu),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Vu?(this.sn(Vu),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Vu?(this.an(Vu),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class GQ{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class WQ{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class hd{constructor(){this.cn=new HQ,this.ln=new GQ(this.cn),this.hn=new WQ(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t,e,r,i){this.Tn=t,this.In=e,this.En=r,this.dn=i}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new il(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:Mm(this.En),directionalValue:Mm(this.dn),orderedDocumentKey:Mm(e),documentKey:r.path.toArray()}}Vn(t,e,r){const i=this.Rn(t,e,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function xo(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=LD(n.En,t.En),e!==0?e:(e=LD(n.dn,t.dn),e!==0?e:Ct.comparator(n.In,t.In)))}function LD(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function Mm(n){return hP()?function(e){let r="";for(let i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);return r}(n):n}function VD(n){return typeof n!="string"?n:function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(n)}class BD{constructor(t){this.mn=new Be((e,r)=>dn.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(Lt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=z2(t);if(e!==void 0&&!this.wn(e))return!1;const r=$c(t);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let t=new Be(dn.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new Am(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new Am(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new Am(r.field,r.dir==="asc"?0:1)));return new o1(o1.UNKNOWN_ID,this.collectionId,e,Sg.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(n){var e,r;if(Lt(n instanceof he||n instanceof We,20012),n instanceof he){if(n instanceof d6){const i=((r=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map(s=>he.create(n.field,"==",s)))||[];return We.create(i,"or")}return n}const t=n.filters.map(i=>q6(i));return We.create(t,n.op)}function qQ(n){if(n.getFilters().length===0)return[];const t=sw(q6(n));return Lt(Y6(t),7391),rw(t)||iw(t)?[t]:t.getFilters()}function rw(n){return n instanceof he}function iw(n){return n instanceof We&&lE(n)}function Y6(n){return rw(n)||iw(n)||function(e){if(e instanceof We&&K2(e)){for(const r of e.getFilters())if(!rw(r)&&!iw(r))return!1;return!0}return!1}(n)}function sw(n){if(Lt(n instanceof he||n instanceof We,34018),n instanceof he)return n;if(n.filters.length===1)return sw(n.filters[0]);const t=n.filters.map(r=>sw(r));let e=We.create(t,n.op);return e=v1(e),Y6(e)?e:(Lt(e instanceof We,64498),Lt(Sh(e),40251),Lt(e.filters.length>1,57927),e.filters.reduce((r,i)=>yE(r,i)))}function yE(n,t){let e;return Lt(n instanceof he||n instanceof We,38388),Lt(t instanceof he||t instanceof We,25473),e=n instanceof he?t instanceof he?function(i,s){return We.create([i,s],"and")}(n,t):FD(n,t):t instanceof he?FD(t,n):function(i,s){if(Lt(i.filters.length>0&&s.filters.length>0,48005),Sh(i)&&Sh(s))return u6(i,s.getFilters());const a=K2(i)?i:s,o=K2(i)?s:i,l=a.filters.map(h=>yE(h,o));return We.create(l,"or")}(n,t),v1(e)}function FD(n,t){if(Sh(t))return u6(t,n.getFilters());{const e=t.filters.map(r=>yE(n,r));return We.create(e,"or")}}function v1(n){if(Lt(n instanceof he||n instanceof We,11850),n instanceof he)return n;const t=n.getFilters();if(t.length===1)return v1(t[0]);if(c6(n))return n;const e=t.map(i=>v1(i)),r=[];return e.forEach(i=>{i instanceof he?r.push(i):i instanceof We&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:We.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(){this.Cn=new vE}addToCollectionParentIndex(t,e){return this.Cn.add(e),Q.resolve()}getCollectionParents(t,e){return Q.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Q.resolve()}deleteFieldIndex(t,e){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,e){return Q.resolve()}getDocumentsMatchingTarget(t,e){return Q.resolve(null)}getIndexType(t,e){return Q.resolve(0)}getFieldIndexes(t,e){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,e){return Q.resolve(vi.min())}getMinOffsetFromCollectionGroup(t,e){return Q.resolve(vi.min())}updateCollectionGroup(t,e,r){return Q.resolve()}updateIndexEntries(t,e){return Q.resolve()}}class vE{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Be(Ie.comparator),s=!i.has(r);return this.index[e]=i.add(r),s}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Be(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="IndexedDbIndexManager",K0=new Uint8Array(0);class XQ{constructor(t,e){this.databaseId=e,this.vn=new vE,this.Fn=new Ua(r=>Il(r),(r,i)=>Qg(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const s={collectionId:r,parent:Mr(i)};return jD(t).put(s)}return Q.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[M8(e),""],!1,!0);return jD(t).J(i).next(s=>{for(const a of s){if(a.collectionId!==e)break;r.push(Ls(a.parent))}return r})}addFieldIndex(t,e){const r=fd(t),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(e);delete i.indexId;const s=r.add(i);if(e.indexState){const a=Fu(t);return s.next(o=>{a.put(MD(o,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const r=fd(t),i=Fu(t),s=Bu(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=fd(t),r=Bu(t),i=Fu(t);return e.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(t,e){return Q.forEach(this.Mn(e),r=>this.getIndexType(t,r).next(i=>{if(i===0||i===1){const s=new BD(r).Dn();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const r=Bu(t);let i=!0;const s=new Map;return Q.forEach(this.Mn(e),a=>this.xn(t,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=se();const o=[];return Q.forEach(s,(l,h)=>{yt(UD,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Il(e)}`);const d=function(I,k){const P=z2(k);if(P===void 0)return null;for(const j of g1(I,P.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(h,l),g=function(I,k){const P=new Map;for(const j of $c(k))for(const M of g1(I,j.fieldPath))switch(M.op){case"==":case"in":P.set(j.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return P.set(j.fieldPath.canonicalString(),M.value),Array.from(P.values())}return null}(h,l),m=function(I,k){const P=[];let j=!0;for(const M of $c(k)){const C=M.kind===0?vD(I,M.fieldPath,I.startAt):_D(I,M.fieldPath,I.startAt);P.push(C.value),j&&(j=C.inclusive)}return new Th(P,j)}(h,l),v=function(I,k){const P=[];let j=!0;for(const M of $c(k)){const C=M.kind===0?_D(I,M.fieldPath,I.endAt):vD(I,M.fieldPath,I.endAt);P.push(C.value),j&&(j=C.inclusive)}return new Th(P,j)}(h,l),w=this.On(l,h,m),b=this.On(l,h,v),E=this.Nn(l,h,g),S=this.Bn(l.indexId,d,w,m.inclusive,b,v.inclusive,E);return Q.forEach(S,T=>r.Y(T,e.limit).next(I=>{I.forEach(k=>{const P=Ct.fromSegments(k.documentKey);a.has(P)||(a=a.add(P),o.push(P))})}))}).next(()=>o)}return Q.resolve(null)})}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=qQ(We.create(t.filters,"and")).map(r=>Q2(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.Fn.set(t,e),e)}Bn(t,e,r,i,s,a,o){const l=(e!=null?e.length:1)*Math.max(r.length,s.length),h=l/(e!=null?e.length:1),d=[];for(let g=0;g<l;++g){const m=e?this.Ln(e[g/h]):K0,v=this.kn(t,m,r[g%h],i),w=this.qn(t,m,s[g%h],a),b=o.map(E=>this.kn(t,m,E,!0));d.push(...this.createRange(v,w,b))}return d}kn(t,e,r,i){const s=new il(t,Ct.empty(),e,r);return i?s:s.An()}qn(t,e,r,i){const s=new il(t,Ct.empty(),e,r);return i?s.An():s}xn(t,e){const r=new BD(e),i=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(t,e){let r=2;const i=this.Mn(e);return Q.forEach(i,s=>this.xn(t,s).next(a=>{a?r!==0&&a.fields.length<function(l){let h=new Be(dn.comparator),d=!1;for(const g of l.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:h=h.add(m.field));for(const g of l.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(e)&&i.length>1&&r===2?1:r)}Qn(t,e){const r=new hd;for(const i of $c(t)){const s=e.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);rl.Kt.Dt(s,a)}return r.un()}Ln(t){const e=new hd;return rl.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new hd;return rl.Kt.Dt(cE(this.databaseId,e),r.Pn(function(s){const a=$c(s);return a.length===0?0:a[a.length-1].kind}(t))),r.un()}Nn(t,e,r){if(r===null)return[];let i=[];i.push(new hd);let s=0;for(const a of $c(t)){const o=r[s++];for(const l of i)if(this.Un(e,a.fieldPath)&&Ng(o))i=this.Kn(i,a,o);else{const h=l.Pn(a.kind);rl.Kt.Dt(o,h)}}return this.Wn(i)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const i=[...t],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new hd;l.seed(o.un()),rl.Kt.Dt(a,l.Pn(e.kind)),s.push(l)}return s}Un(t,e){return!!t.filters.find(r=>r instanceof he&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=fd(t),i=Fu(t);return(e?r.J(G2,IDBKeyRange.bound(e,e)):r.J()).next(s=>{const a=[];return Q.forEach(s,o=>i.get([o.indexId,this.uid]).next(l=>{a.push(function(d,g){const m=g?new Sg(g.sequenceNumber,new vi(Dl(g.readTime),new Ct(Ls(g.documentKey)),g.largestBatchId)):Sg.empty(),v=d.fields.map(([w,b])=>new Am(dn.fromServerFormat(w),b));return new o1(d.indexId,d.collectionGroup,v,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:$t(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=fd(t),s=Fu(t);return this.Gn(t).next(a=>i.J(G2,IDBKeyRange.bound(e,e)).next(o=>Q.forEach(o,l=>s.put(MD(l.indexId,this.uid,a,r)))))}updateIndexEntries(t,e){const r=new Map;return Q.forEach(e,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Q.resolve(a):this.getFieldIndexes(t,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),Q.forEach(o,l=>this.zn(t,i,l).next(h=>{const d=this.jn(s,l);return h.isEqual(d)?Q.resolve():this.Jn(t,s,l,h,d)}))))})}Hn(t,e,r,i){return Bu(t).put(i.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,i){return Bu(t).delete(i.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const i=Bu(t);let s=new Be(xo);return i.ee({index:W8,range:IDBKeyRange.only([r.indexId,this.uid,Mm(this.$n(r,e))])},(a,o)=>{s=s.add(new il(r.indexId,e,VD(o.arrayValue),VD(o.directionalValue)))}).next(()=>s)}jn(t,e){let r=new Be(xo);const i=this.Qn(e,t);if(i==null)return r;const s=z2(e);if(s!=null){const a=t.data.field(s.fieldPath);if(Ng(a))for(const o of a.arrayValue.values||[])r=r.add(new il(e.indexId,t.key,this.Ln(o),i))}else r=r.add(new il(e.indexId,t.key,K0,i));return r}Jn(t,e,r,i,s){yt(UD,"Updating index entries for document '%s'",e.key);const a=[];return function(l,h,d,g,m){const v=l.getIterator(),w=h.getIterator();let b=Lu(v),E=Lu(w);for(;b||E;){let S=!1,T=!1;if(b&&E){const I=d(b,E);I<0?T=!0:I>0&&(S=!0)}else b!=null?T=!0:S=!0;S?(g(E),E=Lu(w)):T?(m(b),b=Lu(v)):(b=Lu(v),E=Lu(w))}}(i,s,xo,o=>{a.push(this.Hn(t,e,r,o))},o=>{a.push(this.Yn(t,e,r,o))}),Q.waitFor(a)}Gn(t){let e=1;return Fu(t).ee({index:G8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((a,o)=>xo(a,o)).filter((a,o,l)=>!o||xo(a,l[o-1])!==0);const i=[];i.push(t);for(const a of r){const o=xo(a,t),l=xo(a,e);if(o===0)i[0]=t.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(e);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,K0,Ct.empty()),l=i[a+1].Vn(this.uid,K0,Ct.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(t,e){return xo(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(zD)}getMinOffset(t,e){return Q.mapArray(this.Mn(e),r=>this.xn(t,r).next(i=>i||It(44426))).next(zD)}}function jD(n){return tr(n,Dg)}function Bu(n){return tr(n,eg)}function fd(n){return tr(n,nE)}function Fu(n){return tr(n,tg)}function zD(n){Lt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Jb(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new vi(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X6=41943040;class Cr{static withCacheSize(t){return new Cr(t,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(n,t,e){const r=n.store(ts),i=n.store(_h),s=[],a=IDBKeyRange.only(e.batchId);let o=0;const l=r.ee({range:a},(d,g,m)=>(o++,m.delete()));s.push(l.next(()=>{Lt(o===1,47070,{batchId:e.batchId})}));const h=[];for(const d of e.mutations){const g=j8(t,d.key.path,e.batchId);s.push(i.delete(g)),h.push(d.key)}return Q.waitFor(s).next(()=>h)}function _1(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw It(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(X6,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);class iy{constructor(t,e,r,i){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(t,e,r,i){Lt(t.uid!=="",64387);const s=t.isAuthenticated()?t.uid:"";return new iy(s,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wo(t).ee({index:ll,range:r},(i,s,a)=>{e=!1,a.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const s=Xu(t),a=wo(t);return a.add({}).next(o=>{Lt(typeof o=="number",49019);const l=new fE(o,e,r,i),h=function(v,w,b){const E=b.baseMutations.map(T=>m1(v.yt,T)),S=b.mutations.map(T=>m1(v.yt,T));return{userId:w,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:E,mutations:S}}(this.serializer,this.userId,l),d=[];let g=new Be((m,v)=>$t(m.canonicalString(),v.canonicalString()));for(const m of i){const v=j8(this.userId,m.key.path,o);g=g.add(m.key.path.popLast()),d.push(a.put(h)),d.push(s.put(v,A$))}return g.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),Q.waitFor(d).next(()=>l)})}lookupMutationBatch(t,e){return wo(t).get(e).next(r=>r?(Lt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),nl(this.serializer,r)):null)}er(t,e){return this.Xn[e]?Q.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.Xn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return wo(t).ee({index:ll,range:i},(a,o,l)=>{o.userId===this.userId&&(Lt(o.batchId>=r,47524,{tr:r}),s=nl(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=pl;return wo(t).ee({index:ll,range:e,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,pl],[this.userId,Number.POSITIVE_INFINITY]);return wo(t).J(ll,e).next(r=>r.map(i=>nl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=Tm(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Xu(t).ee({range:i},(a,o,l)=>{const[h,d,g]=a,m=Ls(d);if(h===this.userId&&e.path.isEqual(m))return wo(t).get(g).next(v=>{if(!v)throw It(61480,{nr:a,batchId:g});Lt(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:g}),s.push(nl(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Be($t);const i=[];return e.forEach(s=>{const a=Tm(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Xu(t).ee({range:o},(h,d,g)=>{const[m,v,w]=h,b=Ls(v);m===this.userId&&s.path.isEqual(b)?r=r.add(w):g.done()});i.push(l)}),Q.waitFor(i).next(()=>this.rr(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,s=Tm(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Be($t);return Xu(t).ee({range:a},(l,h,d)=>{const[g,m,v]=l,w=Ls(m);g===this.userId&&r.isPrefixOf(w)?w.length===i&&(o=o.add(v)):d.done()}).next(()=>this.rr(t,o))}rr(t,e){const r=[],i=[];return e.forEach(s=>{i.push(wo(t).get(s).next(a=>{if(a===null)throw It(35274,{batchId:s});Lt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(nl(this.serializer,a))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return K6(t.le,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.ir(e.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Q.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Xu(t).ee({range:r},(s,a,o)=>{if(s[0]===this.userId){const l=Ls(s[1]);i.push(l)}else o.done()}).next(()=>{Lt(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(t,e){return $6(t,this.userId,e)}_r(t){return Q6(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:pl,lastStreamToken:""})}}function $6(n,t,e){const r=Tm(t,e.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Xu(n).ee({range:s,X:!0},(o,l,h)=>{const[d,g,m]=o;d===t&&g===i&&(a=!0),h.done()}).next(()=>a)}function wo(n){return tr(n,ts)}function Xu(n){return tr(n,_h)}function Q6(n){return tr(n,Ig)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ol(0)}static cr(){return new Ol(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next(e=>{const r=new Ol(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.lr(t).next(e=>Ft.fromTimestamp(new Ve(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.lr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.lr(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.hr(t,i)))}addTargetData(t,e){return this.Pr(t,e).next(()=>this.lr(t).next(r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Uu(t).delete(e.targetId)).next(()=>this.lr(t)).next(r=>(Lt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r)))}removeTargets(t,e,r){let i=0;const s=[];return Uu(t).ee((a,o)=>{const l=Nd(o);l.sequenceNumber<=e&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(t,l)))}).next(()=>Q.waitFor(s)).next(()=>i)}forEachTarget(t,e){return Uu(t).ee((r,i)=>{const s=Nd(i);e(s)})}lr(t){return GD(t).get(u1).next(e=>(Lt(e!==null,2888),e))}hr(t,e){return GD(t).put(u1,e)}Pr(t,e){return Uu(t).put(G6(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Il(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Uu(t).ee({range:i,index:H8},(a,o,l)=>{const h=Nd(o);Qg(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,r){const i=[],s=No(t);return e.forEach(a=>{const o=Mr(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(t,r,a))}),Q.waitFor(i)}removeMatchingKeys(t,e,r){const i=No(t);return Q.forEach(e,s=>{const a=Mr(s.path);return Q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(t,r,s)])})}removeMatchingKeysForTargetId(t,e){const r=No(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=No(t);let s=se();return i.ee({range:r,X:!0},(a,o,l)=>{const h=Ls(a[1]),d=new Ct(h);s=s.add(d)}).next(()=>s)}containsKey(t,e){const r=Mr(e.path),i=IDBKeyRange.bound([r],[M8(r)],!1,!0);let s=0;return No(t).ee({index:eE,X:!0,range:i},([a,o],l,h)=>{a!==0&&(s++,h.done())}).next(()=>s>0)}At(t,e){return Uu(t).get(e).next(r=>r?Nd(r):null)}}function Uu(n){return tr(n,xh)}function GD(n){return tr(n,ml)}function No(n){return tr(n,wh)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="LruGarbageCollector",Z6=1048576;function qD([n,t],[e,r]){const i=$t(n,e);return i===0?$t(t,r):i}class $Q{constructor(t){this.Ir=t,this.buffer=new Be(qD),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();qD(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class J6{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){yt(WD,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ac(e)?yt(WD,"Ignoring IndexedDB error during garbage collection: ",e):await sc(e)}await this.Vr(3e5)})}}class QQ{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return Q.resolve(Jr.ce);const r=new $Q(e);return this.mr.forEachTarget(t,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(t,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(HD)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HD):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,i,s,a,o,l,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(r=g,o=Date.now(),this.removeTargets(t,r,e))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(g=>(h=Date.now(),Gu()<=ue.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${g} documents in `+(h-l)+`ms
Total Duration: ${h-d}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function t5(n,t){return new QQ(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(t,e){this.db=t,this.garbageCollector=t5(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,(r,i)=>e(i))}addReference(t,e,r){return $0(t,r)}removeReference(t,e,r){return $0(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return $0(t,e)}br(t,e){return function(i,s){let a=!1;return Q6(i).te(o=>$6(i,o,s).next(l=>(l&&(a=!0),Q.resolve(!l)))).next(()=>a)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(t,(a,o)=>{if(o<=e){const l=this.br(t,a).next(h=>{if(!h)return s++,r.getEntry(t,a).next(()=>(r.removeEntry(a,Ft.min()),No(t).delete(function(g){return[0,Mr(g.path)]}(a))))});i.push(l)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(t)).next(()=>s)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return $0(t,e)}Sr(t,e){const r=No(t);let i,s=Jr.ce;return r.ee({index:eE},([a,o],{path:l,sequenceNumber:h})=>{a===0?(s!==Jr.ce&&e(new Ct(Ls(i)),s),s=h,i=l):s=Jr.ce}).next(()=>{s!==Jr.ce&&e(new Ct(Ls(i)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function $0(n,t){return No(n).put(function(r,i){return{targetId:0,path:Mr(r.path),sequenceNumber:i}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.changes=new Ua(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,vn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?Q.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Hc(t).put(r)}removeEntry(t,e,r){return Hc(t).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],y1(a),o[o.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Dr(t,r)))}getEntry(t,e){let r=vn.newInvalidDocument(e);return Hc(t).ee({index:Sm,range:IDBKeyRange.only(dd(e))},(i,s)=>{r=this.Cr(e,s)}).next(()=>r)}vr(t,e){let r={size:0,document:vn.newInvalidDocument(e)};return Hc(t).ee({index:Sm,range:IDBKeyRange.only(dd(e))},(i,s)=>{r={document:this.Cr(e,s),size:_1(s)}}).next(()=>r)}getEntries(t,e){let r=pi();return this.Fr(t,e,(i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)}).next(()=>r)}Mr(t,e){let r=pi(),i=new Je(Ct.comparator);return this.Fr(t,e,(s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,_1(a))}).next(()=>({documents:r,Or:i}))}Fr(t,e,r){if(e.isEmpty())return Q.resolve();let i=new Be(KD);e.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(dd(i.first()),dd(i.last())),a=i.getIterator();let o=a.getNext();return Hc(t).ee({index:Sm,range:s},(l,h,d)=>{const g=Ct.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;o&&KD(o,g)<0;)r(o,null),o=a.getNext();o&&o.isEqual(g)&&(r(o,h),o=a.hasNext()?a.getNext():null),o?d.j(dd(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,e,r,i,s){const a=e.path,o=[a.popLast().toArray(),a.lastSegment(),y1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hc(t).J(IDBKeyRange.bound(o,l,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let d=pi();for(const g of h){const m=this.Cr(Ct.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(Zg(e,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(t,e,r,i){let s=pi();const a=XD(e,r),o=XD(e,vi.max());return Hc(t).ee({index:z8,range:IDBKeyRange.bound(a,o,!0)},(l,h,d)=>{const g=this.Cr(Ct.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(t){return new tZ(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return YD(t).get(H2).next(e=>(Lt(!!e,20021),e))}Dr(t,e){return YD(t).put(H2,e)}Cr(t,e){if(e){const r=FQ(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(Ft.min())))return r}return vn.newInvalidDocument(t)}}function n5(n){return new JQ(n)}class tZ extends e5{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new Ua(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new Be((s,a)=>$t(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(e.push(this.Nr.removeEntry(t,s,o.readTime)),a.isValidDocument()){const l=DD(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=_1(l);r+=h-o.size,e.push(this.Nr.addEntry(t,s,l))}else if(r-=o.size,this.trackRemovals){const l=DD(this.Nr.serializer,a.convertToNoDocument(Ft.min()));e.push(this.Nr.addEntry(t,s,l))}}),i.forEach(s=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Nr.updateMetadata(t,r)),Q.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next(r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next(({documents:r,Or:i})=>(i.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function YD(n){return tr(n,Rg)}function Hc(n){return tr(n,l1)}function dd(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function XD(n,t){const e=t.documentKey.path.toArray();return[n,y1(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function KD(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<e.length-2&&s<r.length-2;++s)if(i=$t(e[s],r[s]),i)return i;return i=$t(e.length,r.length),i||(i=$t(e[e.length-2],r[r.length-2]),i||$t(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&sg(r.mutation,i,ti.empty(),Ve.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,se()).next(()=>r))}getLocalViewOfDocuments(t,e,r=se()){const i=Vs();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(s=>{let a=Od();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const r=Vs();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,se()))}populateOverlays(t,e,r){const i=[];return r.forEach(s=>{e.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,o)=>{e.set(a,o)})})}computeViews(t,e,r,i){let s=pi();const a=ig(),o=function(){return ig()}();return e.forEach((l,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof ja)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),sg(d.mutation,h,d.mutation.getFieldMask(),Ve.now())):a.set(h.key,ti.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,d)=>a.set(h,d)),e.forEach((h,d)=>o.set(h,new eZ(d,a.get(h)??null))),o))}recalculateAndSaveOverlays(t,e){const r=ig();let i=new Je((a,o)=>a-o),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const o of a)o.keys().forEach(l=>{const h=e.get(l);if(h===null)return;let d=r.get(l)||ti.empty();d=o.applyToLocalView(h,d),r.set(l,d);const g=(i.get(o.batchId)||se()).add(l);i=i.insert(o.batchId,g)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,d=l.value,g=x6();d.forEach(m=>{if(!s.has(m)){const v=S6(e.get(m),r.get(m));v!==null&&g.set(m,v),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return Q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(a){return Ct.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):aQ(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-s.size):Q.resolve(Vs());let o=vh,l=s;return a.next(h=>Q.forEach(h,(d,g)=>(o<g.largestBatchId&&(o=g.largestBatchId),s.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,se())).next(d=>({batchId:o,changes:_6(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ct(e)).next(r=>{let i=Od();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const s=e.collectionGroup;let a=Od();return this.indexManager.getCollectionParents(t,s).next(o=>Q.forEach(o,l=>{const h=function(g,m){return new Q1(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,r,i).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,s,i))).next(a=>{s.forEach((l,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,vn.newInvalidDocument(d)))});let o=Od();return a.forEach((l,h)=>{const d=s.get(l);d!==void 0&&sg(d.mutation,h,ti.empty(),Ve.now()),Zg(e,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Q.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:zr(i.createTime)}}(e)),Q.resolve()}getNamedQuery(t,e){return Q.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(i){return{name:i.name,query:W6(i.bundledQuery),readTime:zr(i.readTime)}}(e)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(){this.overlays=new Je(Ct.comparator),this.qr=new Map}getOverlay(t,e){return Q.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Vs();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,s)=>{this.St(t,e,s)}),Q.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(t,e,r){const i=Vs(),s=e.length+1,a=new Ct(e.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let s=new Je((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Vs(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const o=Vs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>o.set(h,d)),!(o.size()>=i)););return Q.resolve(o)}St(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gE(e,r));let s=this.qr.get(e);s===void 0&&(s=se(),this.qr.set(e,s)),this.qr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.Qr=new Be(cr.$r),this.Ur=new Be(cr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new cr(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Gr(new cr(t,e))}zr(t,e){t.forEach(r=>this.removeReference(r,e))}jr(t){const e=new Ct(new Ie([])),r=new cr(e,t),i=new cr(e,t+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Ct(new Ie([])),r=new cr(e,t),i=new cr(e,t+1);let s=se();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){const e=new cr(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class cr{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Ct.comparator(t.key,e.key)||$t(t.Yr,e.Yr)}static Kr(t,e){return $t(t.Yr,e.Yr)||Ct.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Be(cr.$r)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fE(s,e,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new cr(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(t,e){return Q.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?pl:this.tr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new cr(e,0),i=new cr(e,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Be($t);return e.forEach(i=>{const s=new cr(i,0),a=new cr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let s=r;Ct.isDocumentKey(s)||(s=s.child(""));const a=new cr(new Ct(s),0);let o=new Be($t);return this.Zr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Yr)),!0)},a),Q.resolve(this.ti(o))}ti(t){const e=[];return t.forEach(r=>{const i=this.Xr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){Lt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(e.mutations,i=>{const s=new cr(i.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,e){const r=new cr(e,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(t){this.ri=t,this.docs=function(){return new Je(Ct.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return Q.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(e))}getEntries(t,e){let r=pi();return e.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let s=pi();const a=e.path,o=new Ct(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Jb(L8(d),r)<=0||(i.has(d.key)||Zg(e,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(t,e,r,i){It(9500)}ii(t,e){return Q.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new oZ(this)}getSize(t){return Q.resolve(this.size)}}class oZ extends e5{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)}),Q.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(t){this.persistence=t,this.si=new Ua(e=>Il(e),Qg),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.oi=0,this._i=new _E,this.targetCount=0,this.ai=Ol.ur()}forEachTarget(t,e){return this.si.forEach((r,i)=>e(i)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),Q.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ol(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Q.resolve()}updateTargetData(t,e){return this.Pr(e),Q.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,e,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=e&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return Q.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),Q.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),Q.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Q.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return Q.resolve(r)}containsKey(t,e){return Q.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(t,e){this.ui={},this.overlays={},this.ci=new Jr(0),this.li=!1,this.li=!0,this.hi=new iZ,this.referenceDelegate=t(this),this.Pi=new cZ(this),this.indexManager=new YQ,this.remoteDocumentCache=function(i){return new aZ(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new H6(e),this.Ii=new nZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new rZ,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new sZ(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){yt("MemoryPersistence","Starting transaction:",t);const i=new lZ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(t,e){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,e)))}}class lZ extends B8{constructor(t){super(),this.currentSequenceNumber=t}}class sy{constructor(t){this.persistence=t,this.Ri=new _E,this.Vi=null}static mi(t){return new sy(t)}get fi(){if(this.Vi)return this.Vi;throw It(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),Q.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Q.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{const i=Ct.fromPath(r);return this.gi(t,i).next(s=>{s||e.removeEntry(i,Ft.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return Q.or([()=>Q.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class x1{constructor(t,e){this.persistence=t,this.pi=new Ua(r=>Mr(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=t5(this,e)}static mi(t,e){return new x1(t,e)}Ei(){}di(t){return Q.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}pr(t,e){return Q.forEach(this.pi,(r,i)=>this.br(t,r,i).next(s=>s?Q.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(t,a=>this.br(t,a,e).next(o=>{o||(r++,s.removeEntry(a,Ft.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Im(t.data.value)),e}br(t,e,r){return Q.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{constructor(t){this.serializer=t}k(t,e,r,i){const s=new G1("createOrUpgrade",e);r<1&&i>=1&&(function(l){l.createObjectStore($g)}(t),function(l){l.createObjectStore(Ig,{keyPath:E$}),l.createObjectStore(ts,{keyPath:aD,autoIncrement:!0}).createIndex(ll,oD,{unique:!0}),l.createObjectStore(_h)}(t),$D(t),function(l){l.createObjectStore(Qc)}(t));let a=Q.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(wh),l.deleteObjectStore(xh),l.deleteObjectStore(ml)}(t),$D(t)),a=a.next(()=>function(l){const h=l.store(ml),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return h.put(u1,d)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,h){return h.store(ts).J().next(g=>{l.deleteObjectStore(ts),l.createObjectStore(ts,{keyPath:aD,autoIncrement:!0}).createIndex(ll,oD,{unique:!0});const m=h.store(ts),v=g.map(w=>m.put(w));return Q.waitFor(v)})}(t,s))),a=a.next(()=>{(function(l){l.createObjectStore(bh,{keyPath:M$})})(t)})),r<5&&i>=5&&(a=a.next(()=>this.yi(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Rg)}(t),this.wi(s)))),r<7&&i>=7&&(a=a.next(()=>this.Si(s))),r<8&&i>=8&&(a=a.next(()=>this.bi(t,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&i>=10&&(a=a.next(()=>this.Di(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(q1,{keyPath:N$})})(t),function(l){l.createObjectStore(Y1,{keyPath:P$})}(t)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){const h=l.createObjectStore(X1,{keyPath:j$});h.createIndex(W2,z$,{unique:!1}),h.createIndex(q8,H$,{unique:!1})})(t)})),r<13&&i>=13&&(a=a.next(()=>function(l){const h=l.createObjectStore(l1,{keyPath:T$});h.createIndex(Sm,S$),h.createIndex(z8,C$)}(t)).next(()=>this.Ci(t,s)).next(()=>t.deleteObjectStore(Qc))),r<14&&i>=14&&(a=a.next(()=>this.Fi(t,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore(nE,{keyPath:k$,autoIncrement:!0}).createIndex(G2,L$,{unique:!1}),l.createObjectStore(tg,{keyPath:V$}).createIndex(G8,B$,{unique:!1}),l.createObjectStore(eg,{keyPath:F$}).createIndex(W8,U$,{unique:!1})}(t))),r<16&&i>=16&&(a=a.next(()=>{e.objectStore(tg).clear()}).next(()=>{e.objectStore(eg).clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(rE,{keyPath:G$})})(t)})),r<18&&i>=18&&hP()&&(a=a.next(()=>{e.objectStore(tg).clear()}).next(()=>{e.objectStore(eg).clear()})),a}wi(t){let e=0;return t.store(Qc).ee((r,i)=>{e+=_1(i)}).next(()=>{const r={byteSize:e};return t.store(Rg).put(H2,r)})}yi(t){const e=t.store(Ig),r=t.store(ts);return e.J().next(i=>Q.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,pl],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ll,a).next(o=>Q.forEach(o,l=>{Lt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const h=nl(this.serializer,l);return K6(t,s.userId,h).next(()=>{})}))}))}Si(t){const e=t.store(wh),r=t.store(Qc);return t.store(ml).get(u1).next(i=>{const s=[];return r.ee((a,o)=>{const l=new Ie(a),h=function(g){return[0,Mr(g)]}(l);s.push(e.get(h).next(d=>d?Q.resolve():(g=>e.put({targetId:0,path:Mr(g),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>Q.waitFor(s))})}bi(t,e){t.createObjectStore(Dg,{keyPath:O$});const r=e.store(Dg),i=new vE,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Mr(l)})}};return e.store(Qc).ee({X:!0},(a,o)=>{const l=new Ie(a);return s(l.popLast())}).next(()=>e.store(_h).ee({X:!0},([a,o,l],h)=>{const d=Ls(o);return s(d.popLast())}))}Di(t){const e=t.store(xh);return e.ee((r,i)=>{const s=Nd(i),a=G6(this.serializer,s);return e.put(a)})}Ci(t,e){const r=e.store(Qc),i=[];return r.ee((s,a)=>{const o=e.store(l1),l=function(g){return g.document?new Ct(Ie.fromString(g.document.name).popFirst(5)):g.noDocument?Ct.fromSegments(g.noDocument.path):g.unknownDocument?Ct.fromSegments(g.unknownDocument.path):It(36783)}(a).path.toArray(),h={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(h))}).next(()=>Q.waitFor(i))}Fi(t,e){const r=e.store(ts),i=n5(this.serializer),s=new xE(sy.mi,this.serializer.yt);return r.J().next(a=>{const o=new Map;return a.forEach(l=>{let h=o.get(l.userId)??se();nl(this.serializer,l).keys().forEach(d=>h=h.add(d)),o.set(l.userId,h)}),Q.forEach(o,(l,h)=>{const d=new Sr(h),g=ry.wt(this.serializer,d),m=s.getIndexManager(d),v=iy.wt(d,this.serializer,m,s.referenceDelegate);return new r5(i,v,g,m).recalculateAndSaveOverlaysForDocumentKeys(new q2(e,Jr.ce),l).next()})})}}function $D(n){n.createObjectStore(wh,{keyPath:R$}).createIndex(eE,D$,{unique:!0}),n.createObjectStore(xh,{keyPath:"targetId"}).createIndex(H8,I$,{unique:!0}),n.createObjectStore(ml)}const bo="IndexedDbPersistence",hx=18e5,fx=5e3,dx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hZ="main";class wE{constructor(t,e,r,i,s,a,o,l,h,d,g=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=h,this.Oi=d,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!wE.v())throw new St(dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZQ(this,i),this.$i=e+hZ,this.serializer=new H6(l),this.Ui=new Go(this.$i,this.Ni,new uZ(this.serializer)),this.hi=new jQ,this.Pi=new KQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=n5(this.serializer),this.Ii=new UQ,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&In(bo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(dt.FAILED_PRECONDITION,dx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Pi.getHighestSequenceNumber(t))}).then(t=>{this.ci=new Jr(t,this.xi)}).then(()=>{this.li=!0}).catch(t=>(this.Ui&&this.Ui.close(),Promise.reject(t)))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Q0(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(t).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(t)).next(e=>this.isPrimary&&!e?this.Zi(t).next(()=>!1):!!e&&this.Xi(t).next(()=>!0))).catch(t=>{if(ac(t))return yt(bo,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return yt(bo,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable(()=>this.Qi(t)),this.isPrimary=t})}Hi(t){return gd(t).get(ku).next(e=>Q.resolve(this.es(e)))}ts(t){return Q0(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,hx)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=tr(e,bh);return r.J().next(i=>{const s=this.ss(i,hx),a=i.filter(o=>s.indexOf(o)===-1);return Q.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?Q.resolve(!0):gd(t).get(ku).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,fx)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new St(dt.FAILED_PRECONDITION,dx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Q0(t).J().next(r=>this.ss(r,fx).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&yt(bo,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[$g,bh],t=>{const e=new q2(t,Jr.ce);return this.Zi(e).next(()=>this.ts(e))}),this.Ui.close(),this.Ps()}ss(t,e){return t.filter(r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",t=>Q0(t).J().next(e=>this.ss(e,hx).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return iy.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new XQ(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return ry.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){yt(bo,"Starting transaction:",t);const i=e==="readonly"?"readonly":"readwrite",s=function(l){return l===18?Y$:l===17?$8:l===16?q$:l===15?iE:l===14?K8:l===13?X8:l===12?W$:l===11?Y8:void It(60245)}(this.Ni);let a;return this.Ui.runTransaction(t,i,s,o=>(a=new q2(o,this.ci?this.ci.next():Jr.ce),e==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw In(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new St(dt.FAILED_PRECONDITION,V8);return r(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(t){return gd(t).get(ku).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,fx)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new St(dt.FAILED_PRECONDITION,dx)})}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gd(t).put(ku,e)}static v(){return Go.v()}Zi(t){const e=gd(t);return e.get(ku).next(r=>this.es(r)?(yt(bo,"Releasing primary lease."),e.delete(ku)):Q.resolve())}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(In(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;uP()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return yt(bo,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return In(bo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){In("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function gd(n){return tr(n,$g)}function Q0(n){return tr(n,bh)}function i5(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=i}static As(t,e){let r=se(),i=se();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bE(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return uP()?8:F8(Jn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,i){const s={result:null};return this.ys(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,e,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new fZ;return this.Ss(t,e,a).next(o=>{if(s.result=o,this.Vs)return this.bs(t,e,a,o.size)})}).next(()=>s.result)}bs(t,e,r,i){return r.documentReadCount<this.fs?(Gu()<=ue.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",Wu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Gu()<=ue.DEBUG&&yt("QueryEngine","Query:",Wu(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Gu()<=ue.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",Wu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yi(e))):Q.resolve())}ys(t,e){if(xD(e))return Q.resolve(null);let r=yi(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=Z2(e,null,"F"),r=yi(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=se(...s);return this.ps.getDocuments(t,a).next(o=>this.indexManager.getMinOffset(t,r).next(l=>{const h=this.Ds(e,o);return this.Cs(e,h,a,l.readTime)?this.ys(t,Z2(e,null,"F")):this.vs(t,h,e,l)}))})))}ws(t,e,r,i){return xD(e)||i.isEqual(Ft.min())?Q.resolve(null):this.ps.getDocuments(t,r).next(s=>{const a=this.Ds(e,s);return this.Cs(e,a,r,i)?Q.resolve(null):(Gu()<=ue.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wu(e)),this.vs(t,a,e,k8(i,vh)).next(o=>o))})}Ds(t,e){let r=new Be(y6(t));return e.forEach((i,s)=>{Zg(t,s)&&(r=r.add(s))}),r}Cs(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(t,e,r){return Gu()<=ue.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Wu(e)),this.ps.getDocumentsMatchingQuery(t,e,vi.min(),r)}vs(t,e,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="LocalStore",dZ=3e8;class gZ{constructor(t,e,r,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new Je($t),this.xs=new Ua(s=>Il(s),Qg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new r5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function a5(n,t,e,r){return new gZ(n,t,e,r)}async function o5(n,t){const e=Mt(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,e.Bs(t),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=se();for(const h of i){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of s){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return e.localDocuments.getDocuments(r,l).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:o}))})})}function pZ(n,t){const e=Mt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=e.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,h,d){const g=h.batch,m=g.keys();let v=Q.resolve();return m.forEach(w=>{v=v.next(()=>d.getEntry(l,w)).next(b=>{const E=h.docVersions.get(w);Lt(E!==null,48541),b.version.compareTo(E)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),d.addEntry(b)))})}),v.next(()=>o.mutationQueue.removeMutationBatch(l,g))}(e,r,t,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=se();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function c5(n){const t=Mt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function mZ(n,t){const e=Mt(n),r=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const o=[];t.targetChanges.forEach((d,g)=>{const m=i.get(g);if(!m)return;o.push(e.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>e.Pi.addMatchingKeys(s,d.addedDocuments,g)));let v=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?v=v.withResumeToken(Mn.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(g,v),function(b,E,S){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=dZ?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,v,d)&&o.push(e.Pi.updateTargetData(s,v))});let l=pi(),h=se();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(yZ(s,a,t.documentUpdates).next(d=>{l=d.ks,h=d.qs})),!r.isEqual(Ft.min())){const d=e.Pi.getLastRemoteSnapshotVersion(s).next(g=>e.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return Q.waitFor(o).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.Ms=i,s))}function yZ(n,t,e){let r=se(),i=se();return e.forEach(s=>r=r.add(s)),t.getEntries(n,r).next(s=>{let a=pi();return e.forEach((o,l)=>{const h=s.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ft.min())?(t.removeEntry(o,l.readTime),a=a.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(l),a=a.insert(o,l)):yt(EE,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{ks:a,qs:i}})}function vZ(n,t){const e=Mt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=pl),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function w1(n,t){const e=Mt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Pi.getTargetData(r,t).next(s=>s?(i=s,Q.resolve(i)):e.Pi.allocateTargetId(r).next(a=>(i=new Ma(t,a,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r})}async function Dh(n,t,e){const r=Mt(n),i=r.Ms.get(t),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ac(a))throw a;yt(EE,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function aw(n,t,e){const r=Mt(n);let i=Ft.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,h,d){const g=Mt(l),m=g.xs.get(d);return m!==void 0?Q.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(r,a,yi(t)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,t,e?i:Ft.min(),e?s:se())).next(o=>(h5(r,m6(t),o),{documents:o,Qs:s})))}function l5(n,t){const e=Mt(n),r=Mt(e.Pi),i=e.Ms.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",s=>r.At(s,t).next(a=>a?a.target:null))}function u5(n,t){const e=Mt(n),r=e.Os.get(t)||Ft.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ns.getAllFromCollectionGroup(i,t,k8(r,vh),Number.MAX_SAFE_INTEGER)).then(i=>(h5(e,t,i),i))}function h5(n,t,e){let r=n.Os.get(t)||Ft.min();e.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="firestore_clients";function QD(n,t){return`${f5}_${n}_${t}`}const d5="firestore_mutations";function ZD(n,t,e){let r=`${d5}_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const g5="firestore_targets";function gx(n,t){return`${g5}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="SharedClientState";class b1{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ws(t,e,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new St(i.error.code,i.error.message))),a?new b1(t,e,i.state,s):(In(Ms,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ag{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new St(r.error.code,r.error.message))),s?new ag(t,r.state,i):(In(Ms,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class E1{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=uE();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=U8(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new E1(t,s):(In(Ms,`Failed to parse client data for instance '${t}': ${e}`),null)}}class AE{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new AE(e.clientId,e.onlineState):(In(Ms,`Failed to parse online state: ${t}`),null)}}class ow{constructor(){this.activeTargetIds=uE()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class px{constructor(t,e,r,i,s){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Je($t),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=QD(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ow),this.ro=new RegExp(`^${f5}_${a}_([^_]*)$`),this.io=new RegExp(`^${d5}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${g5}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const i=this.getItem(QD(this.persistenceKey,r));if(i){const s=E1.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(gx(this.persistenceKey,t));if(i){const s=ag.Ws(t,i);s&&(r=s.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(gx(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Po(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return yt(Ms,"READ",t,e),e}setItem(t,e){yt(Ms,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){yt(Ms,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(yt(Ms,"EVENT",e.key,e.newValue),e.key===this.eo)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=function(s){let a=Jr.ce;if(s!=null)try{const o=JSON.parse(s);Lt(typeof o=="number",30636,{So:s}),a=o}catch(o){In(Ms,"Failed to read sequence number from WebStorage",o)}return a}(e.newValue);r!==Jr.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(e)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const i=new b1(this.currentUser,t,e,r),s=ZD(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Gs())}Po(t){const e=ZD(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const i=gx(this.persistenceKey,t),s=new ag(t,e,r);this.setItem(i,s.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return E1.Ws(r,e)}fo(t,e){const r=this.io.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return b1.Ws(new Sr(s),i,e)}yo(t,e){const r=this.so.exec(t),i=Number(r[1]);return ag.Ws(i,e)}uo(t){return AE.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);yt(Ms,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),i=this.lo(this.Zs),s=this.lo(r),a=[],o=[];return s.forEach(l=>{i.has(l)||a.push(l)}),i.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=r})}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=uE();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class p5{constructor(){this.Mo=new ow,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ow,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="ConnectivityMonitor";class tO{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yt(JD,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){yt(JD,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z0=null;function cw(){return Z0===null?Z0=function(){return 268435456+Math.round(2147483648*Math.random())}():Z0++,"0x"+Z0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="RestConnection",xZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wZ{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===h1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,e,r,i,s){const a=cw(),o=this.zo(t,e.toUriEncodedString());yt(mx,`Sending RPC '${t}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:h}=new URL(o),d=zh(h);return this.Jo(t,o,l,r,d).then(g=>(yt(mx,`Received RPC '${t}' ${a}: `,g),g),g=>{throw Tg(mx,`RPC '${t}' ${a} failed with error: `,g,"url: ",o,"request:",r),g})}Ho(t,e,r,i,s,a){return this.Go(t,e,r,i,s)}jo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}zo(t,e){const r=xZ[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="WebChannelConnection";class EZ extends wZ{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,i,s){const a=cw();return new Promise((o,l)=>{const h=new S8;h.setWithCredentials(!0),h.listenOnce(C8.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Em.NO_ERROR:const g=h.getResponseJson();yt(Ar,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),o(g);break;case Em.TIMEOUT:yt(Ar,`RPC '${t}' ${a} timed out`),l(new St(dt.DEADLINE_EXCEEDED,"Request time out"));break;case Em.HTTP_ERROR:const m=h.getStatus();if(yt(Ar,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const b=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(T)>=0?T:dt.UNKNOWN}(w.status);l(new St(b,w.message))}else l(new St(dt.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new St(dt.UNAVAILABLE,"Connection failed."));break;default:It(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{yt(Ar,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(i);yt(Ar,`RPC '${t}' ${a} sending request:`,i),h.send(e,"POST",d,r,15)})}T_(t,e,r){const i=cw(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=D8(),o=R8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,e,r),l.encodeInitMessageHeaders=!0;const d=s.join("");yt(Ar,`Creating RPC '${t}' stream ${i}: ${d}`,l);const g=a.createWebChannel(d,l);this.I_(g);let m=!1,v=!1;const w=new bZ({Yo:E=>{v?yt(Ar,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(m||(yt(Ar,`Opening RPC '${t}' stream ${i} transport.`),g.open(),m=!0),yt(Ar,`RPC '${t}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),b=(E,S,T)=>{E.listen(S,I=>{try{T(I)}catch(k){setTimeout(()=>{throw k},0)}})};return b(g,Dd.EventType.OPEN,()=>{v||(yt(Ar,`RPC '${t}' stream ${i} transport opened.`),w.o_())}),b(g,Dd.EventType.CLOSE,()=>{v||(v=!0,yt(Ar,`RPC '${t}' stream ${i} transport closed`),w.a_(),this.E_(g))}),b(g,Dd.EventType.ERROR,E=>{v||(v=!0,Tg(Ar,`RPC '${t}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),w.a_(new St(dt.UNAVAILABLE,"The operation could not be completed")))}),b(g,Dd.EventType.MESSAGE,E=>{var S;if(!v){const T=E.data[0];Lt(!!T,16349);const I=T,k=(I==null?void 0:I.error)||((S=I[0])==null?void 0:S.error);if(k){yt(Ar,`RPC '${t}' stream ${i} received error:`,k);const P=k.status;let j=function(N){const B=Vn[N];if(B!==void 0)return R6(B)}(P),M=k.message;j===void 0&&(j=dt.INTERNAL,M="Unknown error status: "+P+" with message "+k.message),v=!0,w.a_(new St(j,M)),g.close()}else yt(Ar,`RPC '${t}' stream ${i} received:`,T),w.u_(T)}}),b(o,I8.STAT_EVENT,E=>{E.stat===U2.PROXY?yt(Ar,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===U2.NOPROXY&&yt(Ar,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(){return typeof window<"u"?window:null}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(n){return new RQ(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(t,e,r=1e3,i=1.5,s=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-r);i>0&&yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="PersistentStream";class v5{constructor(t,e,r,i,s,a,o,l){this.Mi=t,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y5(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===dt.RESOURCE_EXHAUSTED?(In(e.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===e&&this.G_(r,i)},r=>{t(()=>{const i=new St(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return yt(eO,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(yt(eO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AZ extends v5{constructor(t,e,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=MQ(this.serializer,t),r=function(s){if(!("targetChange"in s))return Ft.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ft.min():a.readTime?zr(a.readTime):Ft.min()}(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=ew(this.serializer),e.addTarget=function(s,a){let o;const l=a.target;if(o=d1(l)?{documents:V6(s,l)}:{query:B6(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=M6(s,a.resumeToken);const h=J2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ft.min())>0){o.readTime=Rh(s,a.snapshotVersion.toTimestamp());const h=J2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,t);const r=PQ(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=ew(this.serializer),e.removeTarget=t,this.q_(e)}}class TZ extends v5{constructor(t,e,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=NQ(t.writeResults,t.commitTime),r=zr(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=ew(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>m1(this.serializer,r))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{}class CZ extends SZ{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new St(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,tw(e,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new St(dt.UNKNOWN,s.toString())})}Ho(t,e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(t,tw(e,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new St(dt.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class IZ{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(In(e),this.aa=!1):yt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml="RemoteStore";class RZ{constructor(t,e,r,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Fl(this)&&(yt(Ml,"Restarting streams for network reachability change."),await async function(l){const h=Mt(l);h.Ea.add(4),await ep(h),h.Ra.set("Unknown"),h.Ea.delete(4),await oy(h)}(this))})}),this.Ra=new IZ(r,i)}}async function oy(n){if(Fl(n))for(const t of n.da)await t(!0)}async function ep(n){for(const t of n.da)await t(!1)}function cy(n,t){const e=Mt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),CE(e)?SE(e):Yh(e).O_()&&TE(e,t))}function Oh(n,t){const e=Mt(n),r=Yh(e);e.Ia.delete(t),r.O_()&&_5(e,t),e.Ia.size===0&&(r.O_()?r.L_():Fl(e)&&e.Ra.set("Unknown"))}function TE(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ft.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Yh(n).Y_(t)}function _5(n,t){n.Va.Ue(t),Yh(n).Z_(t)}function SE(n){n.Va=new TQ({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Yh(n).start(),n.Ra.ua()}function CE(n){return Fl(n)&&!Yh(n).x_()&&n.Ia.size>0}function Fl(n){return Mt(n).Ea.size===0}function x5(n){n.Va=void 0}async function DZ(n){n.Ra.set("Online")}async function OZ(n){n.Ia.forEach((t,e)=>{TE(n,t)})}async function MZ(n,t){x5(n),CE(n)?(n.Ra.ha(t),SE(n)):n.Ra.set("Unknown")}async function NZ(n,t,e){if(n.Ra.set("Online"),t instanceof O6&&t.state===2&&t.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(n,t)}catch(r){yt(Ml,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await A1(n,r)}else if(t instanceof Om?n.Va.Ze(t):t instanceof D6?n.Va.st(t):n.Va.tt(t),!e.isEqual(Ft.min()))try{const r=await c5(n.localStore);e.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,h)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(Mn.EMPTY_BYTE_STRING,d.snapshotVersion)),_5(s,l);const g=new Ma(d.target,l,h,d.sequenceNumber);TE(s,g)}),s.remoteSyncer.applyRemoteEvent(o)}(n,e)}catch(r){yt(Ml,"Failed to raise snapshot:",r),await A1(n,r)}}async function A1(n,t,e){if(!ac(t))throw t;n.Ea.add(1),await ep(n),n.Ra.set("Offline"),e||(e=()=>c5(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{yt(Ml,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await oy(n)})}function w5(n,t){return t().catch(e=>A1(n,e,t))}async function qh(n){const t=Mt(n),e=tc(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:pl;for(;PZ(t);)try{const i=await vZ(t.localStore,r);if(i===null){t.Ta.length===0&&e.L_();break}r=i.batchId,kZ(t,i)}catch(i){await A1(t,i)}b5(t)&&E5(t)}function PZ(n){return Fl(n)&&n.Ta.length<10}function kZ(n,t){n.Ta.push(t);const e=tc(n);e.O_()&&e.X_&&e.ea(t.mutations)}function b5(n){return Fl(n)&&!tc(n).x_()&&n.Ta.length>0}function E5(n){tc(n).start()}async function LZ(n){tc(n).ra()}async function VZ(n){const t=tc(n);for(const e of n.Ta)t.ea(e.mutations)}async function BZ(n,t,e){const r=n.Ta.shift(),i=dE.from(r,t,e);await w5(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await qh(n)}async function FZ(n,t){t&&tc(n).X_&&await async function(r,i){if(function(a){return bQ(a)&&a!==dt.ABORTED}(i.code)){const s=r.Ta.shift();tc(r).B_(),await w5(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await qh(r)}}(n,t),b5(n)&&E5(n)}async function nO(n,t){const e=Mt(n);e.asyncQueue.verifyOperationInProgress(),yt(Ml,"RemoteStore received new credentials");const r=Fl(e);e.Ea.add(3),await ep(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await oy(e)}async function lw(n,t){const e=Mt(n);t?(e.Ea.delete(2),await oy(e)):t||(e.Ea.add(2),await ep(e),e.Ra.set("Unknown"))}function Yh(n){return n.ma||(n.ma=function(e,r,i){const s=Mt(e);return s.sa(),new AZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:DZ.bind(null,n),t_:OZ.bind(null,n),r_:MZ.bind(null,n),H_:NZ.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),CE(n)?SE(n):n.Ra.set("Unknown")):(await n.ma.stop(),x5(n))})),n.ma}function tc(n){return n.fa||(n.fa=function(e,r,i){const s=Mt(e);return s.sa(),new TZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:LZ.bind(null,n),r_:FZ.bind(null,n),ta:VZ.bind(null,n),na:BZ.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await qh(n)):(await n.fa.stop(),n.Ta.length>0&&(yt(Ml,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,e,r,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,s){const a=Date.now()+r,o=new IE(t,e,a,i,s);return o.start(r),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function RE(n,t){if(In("AsyncQueue",`${t}: ${n}`),ac(n))return new St(dt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{static emptySet(t){return new uh(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ct.comparator(e.key,r.key):(e,r)=>Ct.comparator(e.key,r.key),this.keyedMap=Od(),this.sortedSet=new Je(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof uh)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new uh;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.ga=new Je(Ct.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):It(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,r)=>{t.push(r)}),t}}class Mh{constructor(t,e,r,i,s,a,o,l,h){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,r,i,s){const a=[];return e.forEach(o=>{a.push({type:0,doc:o})}),new Mh(t,e,uh.emptySet(e),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&J1(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class jZ{constructor(){this.queries=iO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const i=Mt(e),s=i.queries;i.queries=iO(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new St(dt.ABORTED,"Firestore shutting down"))}}function iO(){return new Ua(n=>p6(n),J1)}async function A5(n,t){const e=Mt(n);let r=3;const i=t.query;let s=e.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new UZ,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await e.onListen(i,!0);break;case 1:s.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(a){const o=RE(a,`Initialization of query '${Wu(t.query)}' failed`);return void t.onError(o)}e.queries.set(i,s),s.Sa.push(t),t.va(e.onlineState),s.wa&&t.Fa(s.wa)&&DE(e)}async function T5(n,t){const e=Mt(n),r=t.query;let i=3;const s=e.queries.get(r);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function zZ(n,t){const e=Mt(n);let r=!1;for(const i of t){const s=i.query,a=e.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&DE(e)}function HZ(n,t,e){const r=Mt(n),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(e);r.queries.delete(t)}function DE(n){n.Ca.forEach(t=>{t.next()})}var uw,sO;(sO=uw||(uw={})).Ma="default",sO.Cache="cache";class S5{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Mh(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Mh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==uw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(t){this.key=t}}class I5{constructor(t){this.key=t}}class GZ{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=y6(t),this.tu=new uh(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new rO,i=e?e.tu:this.tu;let s=e?e.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,g)=>{const m=i.get(d),v=Zg(this.query,g)?g:null,w=!!m&&this.mutatedKeys.has(m.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let E=!1;m&&v?m.data.isEqual(v.data)?w!==b&&(r.track({type:3,doc:v}),E=!0):this.su(m,v)||(r.track({type:2,doc:v}),E=!0,(l&&this.eu(v,l)>0||h&&this.eu(v,h)<0)&&(o=!0)):!m&&v?(r.track({type:0,doc:v}),E=!0):m&&!v&&(r.track({type:1,doc:m}),E=!0,(l||h)&&(o=!0)),E&&(v?(a=a.add(v),s=b?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(v,w){const b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Rt:E})}};return b(v)-b(w)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(r),i=i??!1;const o=e&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,h=l!==this.Za;return this.Za=l,a.length!==0||h?{snapshot:new Mh(this.query,t.tu,s,a,t.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const e=[];return t.forEach(r=>{this.Xa.has(r)||e.push(new I5(r))}),this.Xa.forEach(r=>{t.has(r)||e.push(new C5(r))}),e}cu(t){this.Ya=t.Qs,this.Xa=se();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Mh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xh="SyncEngine";class WZ{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class qZ{constructor(t){this.key=t,this.hu=!1}}class YZ{constructor(t,e,r,i,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ua(o=>p6(o),J1),this.Iu=new Map,this.Eu=new Set,this.du=new Je(Ct.comparator),this.Au=new Map,this.Ru=new _E,this.Vu={},this.mu=new Map,this.fu=Ol.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XZ(n,t,e=!0){const r=ly(n);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await R5(r,t,e,!0),i}async function KZ(n,t){const e=ly(n);await R5(e,t,!0,!1)}async function R5(n,t,e,r){const i=await w1(n.localStore,yi(t)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,e);let o;return r&&(o=await OE(n,t,s,a==="current",i.resumeToken)),n.isPrimaryClient&&e&&cy(n.remoteStore,i),o}async function OE(n,t,e,r,i){n.pu=(g,m,v)=>async function(b,E,S,T){let I=E.view.ru(S);I.Cs&&(I=await aw(b.localStore,E.query,!1).then(({documents:M})=>E.view.ru(M,I)));const k=T&&T.targetChanges.get(E.targetId),P=T&&T.targetMismatches.get(E.targetId)!=null,j=E.view.applyChanges(I,b.isPrimaryClient,k,P);return hw(b,E.targetId,j.au),j.snapshot}(n,g,m,v);const s=await aw(n.localStore,t,!0),a=new GZ(t,s.Qs),o=a.ru(s.documents),l=tp.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),h=a.applyChanges(o,n.isPrimaryClient,l);hw(n,e,h.au);const d=new WZ(t,e,a);return n.Tu.set(t,d),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),h.snapshot}async function $Z(n,t,e){const r=Mt(n),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!J1(a,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Oh(r.remoteStore,i.targetId),Nh(r,i.targetId)}).catch(sc)):(Nh(r,i.targetId),await Dh(r.localStore,i.targetId,!0))}async function QZ(n,t){const e=Mt(n),r=e.Tu.get(t),i=e.Iu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Oh(e.remoteStore,r.targetId))}async function ZZ(n,t,e){const r=kE(n);try{const i=await function(a,o){const l=Mt(a),h=Ve.now(),d=o.reduce((v,w)=>v.add(w.key),se());let g,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=pi(),b=se();return l.Ns.getEntries(v,d).next(E=>{w=E,w.forEach((S,T)=>{T.isValidDocument()||(b=b.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,w)).next(E=>{g=E;const S=[];for(const T of o){const I=xQ(T,g.get(T.key).overlayedDocument);I!=null&&S.push(new ja(T.key,I,a6(I.value.mapValue),Or.exists(!0)))}return l.mutationQueue.addMutationBatch(v,h,S,o)}).next(E=>{m=E;const S=E.applyToLocalDocumentSet(g,b);return l.documentOverlayCache.saveOverlays(v,E.batchId,S)})}).then(()=>({batchId:m.batchId,changes:_6(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let h=a.Vu[a.currentUser.toKey()];h||(h=new Je($t)),h=h.insert(o,l),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,e),await cc(r,i.changes),await qh(r.remoteStore)}catch(i){const s=RE(i,"Failed to persist write");e.reject(s)}}async function D5(n,t){const e=Mt(n);try{const r=await mZ(e.localStore,t);t.targetChanges.forEach((i,s)=>{const a=e.Au.get(s);a&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Lt(a.hu,14607):i.removedDocuments.size>0&&(Lt(a.hu,42227),a.hu=!1))}),await cc(e,r,t)}catch(r){await sc(r)}}function aO(n,t,e){const r=Mt(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(t);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Mt(a);l.onlineState=o;let h=!1;l.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(o)&&(h=!0)}),h&&DE(l)}(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function JZ(n,t,e){const r=Mt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Au.get(t),s=i&&i.key;if(s){let a=new Je(Ct.comparator);a=a.insert(s,vn.newNoDocument(s,Ft.min()));const o=se().add(s),l=new Jg(Ft.min(),new Map,new Je($t),a,o);await D5(r,l),r.du=r.du.remove(s),r.Au.delete(t),PE(r)}else await Dh(r.localStore,t,!1).then(()=>Nh(r,t,e)).catch(sc)}async function tJ(n,t){const e=Mt(n),r=t.batch.batchId;try{const i=await pZ(e.localStore,t);NE(e,r,null),ME(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await cc(e,i)}catch(i){await sc(i)}}async function eJ(n,t,e){const r=Mt(n);try{const i=await function(a,o){const l=Mt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return l.mutationQueue.lookupMutationBatch(h,o).next(g=>(Lt(g!==null,37113),d=g.keys(),l.mutationQueue.removeMutationBatch(h,g))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>l.localDocuments.getDocuments(h,d))})}(r.localStore,t);NE(r,t,e),ME(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await cc(r,i)}catch(i){await sc(i)}}function ME(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function NE(n,t,e){const r=Mt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(e?s.reject(e):s.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Nh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(r=>{n.Ru.containsKey(r)||O5(n,r)})}function O5(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Oh(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),PE(n))}function hw(n,t,e){for(const r of e)r instanceof C5?(n.Ru.addReference(r.key,t),nJ(n,r)):r instanceof I5?(yt(Xh,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||O5(n,r.key)):It(19791,{wu:r})}function nJ(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(yt(Xh,"New document in limbo: "+e),n.Eu.add(r),PE(n))}function PE(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Ct(Ie.fromString(t)),r=n.fu.next();n.Au.set(r,new qZ(e)),n.du=n.du.insert(e,r),cy(n.remoteStore,new Ma(yi(Z1(e.path)),r,"TargetPurposeLimboResolution",Jr.ce))}}async function cc(n,t,e){const r=Mt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,t,e).then(h=>{var d;if((h||e)&&r.isPrimaryClient){const g=h?!h.fromCache:(d=e==null?void 0:e.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(h){i.push(h);const g=bE.As(l.targetId,h);s.push(g)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(l,h){const d=Mt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Q.forEach(h,m=>Q.forEach(m.Es,v=>d.persistence.referenceDelegate.addReference(g,m.targetId,v)).next(()=>Q.forEach(m.ds,v=>d.persistence.referenceDelegate.removeReference(g,m.targetId,v)))))}catch(g){if(!ac(g))throw g;yt(EE,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const v=d.Ms.get(m),w=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(m,b)}}}(r.localStore,s))}async function rJ(n,t){const e=Mt(n);if(!e.currentUser.isEqual(t)){yt(Xh,"User change. New user:",t.toKey());const r=await o5(e.localStore,t);e.currentUser=t,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new St(dt.CANCELLED,a))})}),s.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await cc(e,r.Ls)}}function iJ(n,t){const e=Mt(n),r=e.Au.get(t);if(r&&r.hu)return se().add(r.key);{let i=se();const s=e.Iu.get(t);if(!s)return i;for(const a of s){const o=e.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function sJ(n,t){const e=Mt(n),r=await aw(e.localStore,t.query,!0),i=t.view.cu(r);return e.isPrimaryClient&&hw(e,t.targetId,i.au),i}async function aJ(n,t){const e=Mt(n);return u5(e.localStore,t).then(r=>cc(e,r))}async function oJ(n,t,e,r){const i=Mt(n),s=await function(o,l){const h=Mt(o),d=Mt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>d.er(g,l).next(m=>m?h.localDocuments.getDocuments(g,m):Q.resolve(null)))}(i.localStore,t);s!==null?(e==="pending"?await qh(i.remoteStore):e==="acknowledged"||e==="rejected"?(NE(i,t,r||null),ME(i,t),function(o,l){Mt(Mt(o).mutationQueue).ir(l)}(i.localStore,t)):It(6720,"Unknown batchState",{Su:e}),await cc(i,s)):yt(Xh,"Cannot apply mutation batch with id: "+t)}async function cJ(n,t){const e=Mt(n);if(ly(e),kE(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),i=await oO(e,r.toArray());e.gu=!0,await lw(e.remoteStore,!0);for(const s of i)cy(e.remoteStore,s)}else if(t===!1&&e.gu!==!1){const r=[];let i=Promise.resolve();e.Iu.forEach((s,a)=>{e.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(Nh(e,a),Dh(e.localStore,a,!0))),Oh(e.remoteStore,a)}),await i,await oO(e,r),function(a){const o=Mt(a);o.Au.forEach((l,h)=>{Oh(o.remoteStore,h)}),o.Ru.Jr(),o.Au=new Map,o.du=new Je(Ct.comparator)}(e),e.gu=!1,await lw(e.remoteStore,!1)}}async function oO(n,t,e){const r=Mt(n),i=[],s=[];for(const a of t){let o;const l=r.Iu.get(a);if(l&&l.length!==0){o=await w1(r.localStore,yi(l[0]));for(const h of l){const d=r.Tu.get(h),g=await sJ(r,d);g.snapshot&&s.push(g.snapshot)}}else{const h=await l5(r.localStore,a);o=await w1(r.localStore,h),await OE(r,M5(h),a,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(s),i}function M5(n){return g6(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lJ(n){return function(e){return Mt(Mt(e).persistence).Ts()}(Mt(n).localStore)}async function uJ(n,t,e,r){const i=Mt(n);if(i.gu)return void yt(Xh,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const a=await u5(i.localStore,m6(s[0])),o=Jg.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Mn.EMPTY_BYTE_STRING);await cc(i,a,o);break}case"rejected":await Dh(i.localStore,t,!0),Nh(i,t,r);break;default:It(64155,e)}}async function hJ(n,t,e){const r=ly(n);if(r.gu){for(const i of t){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){yt(Xh,"Adding an already active target "+i);continue}const s=await l5(r.localStore,i),a=await w1(r.localStore,s);await OE(r,M5(s),a.targetId,!1,a.resumeToken),cy(r.remoteStore,a)}for(const i of e)r.Iu.has(i)&&await Dh(r.localStore,i,!1).then(()=>{Oh(r.remoteStore,i),Nh(r,i)}).catch(sc)}}function ly(n){const t=Mt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=D5.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iJ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=JZ.bind(null,t),t.Pu.H_=zZ.bind(null,t.eventManager),t.Pu.yu=HZ.bind(null,t.eventManager),t}function kE(n){const t=Mt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tJ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eJ.bind(null,t),t}class Lg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ay(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return a5(this.persistence,new s5,t.initialUser,this.serializer)}Cu(t){return new xE(sy.mi,this.serializer)}Du(t){return new p5}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lg.provider={build:()=>new Lg};class fJ extends Lg{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Lt(this.persistence.referenceDelegate instanceof x1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new J6(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new xE(r=>x1.mi(r,e),this.serializer)}}class N5 extends Lg{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await kE(this.xu.syncEngine),await qh(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return a5(this.persistence,new s5,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new J6(r,t.asyncQueue,e)}Mu(t,e){const r=new w$(e,this.persistence);return new x$(t.asyncQueue,r)}Cu(t){const e=i5(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new wE(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,m5(),Nm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new p5}}class dJ extends N5{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof px&&(this.sharedClientState.syncEngine={Co:oJ.bind(null,e),vo:uJ.bind(null,e),Fo:hJ.bind(null,e),Ts:lJ.bind(null,e),Do:aJ.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await cJ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(t){const e=m5();if(!px.v(e))throw new St(dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=i5(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new px(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Vg{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rJ.bind(null,this.syncEngine),await lw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new jZ}()}createDatastore(t){const e=ay(t.databaseInfo.databaseId),r=function(s){return new EZ(s)}(t.databaseInfo);return function(s,a,o,l){return new CZ(s,a,o,l)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,s,a,o){return new RZ(r,i,s,a,o)}(this.localStore,this.datastore,t.asyncQueue,e=>aO(this.syncEngine,e,0),function(){return tO.v()?new tO:new _Z}())}createSyncEngine(t,e){return function(i,s,a,o,l,h,d){const g=new YZ(i,s,a,o,l,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const s=Mt(i);yt(Ml,"RemoteStore shutting down."),s.Ea.add(5),await ep(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Vg.provider={build:()=>new Vg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):In("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="FirestoreClient";class gJ{constructor(t,e,r,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Sr.UNAUTHENTICATED,this.clientId=Qb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{yt(ec,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(yt(ec,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=RE(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function yx(n,t){n.asyncQueue.verifyOperationInProgress(),yt(ec,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await o5(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function cO(n,t){n.asyncQueue.verifyOperationInProgress();const e=await pJ(n);yt(ec,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>nO(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nO(t.remoteStore,i)),n._onlineComponents=t}async function pJ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){yt(ec,"Using user provided OfflineComponentProvider");try{await yx(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===dt.FAILED_PRECONDITION||i.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;Tg("Error using user provided cache. Falling back to memory cache: "+e),await yx(n,new Lg)}}else yt(ec,"Using default OfflineComponentProvider"),await yx(n,new fJ(void 0));return n._offlineComponents}async function k5(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(yt(ec,"Using user provided OnlineComponentProvider"),await cO(n,n._uninitializedComponentsProvider._online)):(yt(ec,"Using default OnlineComponentProvider"),await cO(n,new Vg))),n._onlineComponents}function mJ(n){return k5(n).then(t=>t.syncEngine)}async function L5(n){const t=await k5(n),e=t.eventManager;return e.onListen=XZ.bind(null,t.syncEngine),e.onUnlisten=$Z.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=KZ.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=QZ.bind(null,t.syncEngine),e}function yJ(n,t,e={}){const r=new qs;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new P5({next:m=>{d.Nu(),a.enqueueAndForget(()=>T5(s,g));const v=m.docs.has(o);!v&&m.fromCache?h.reject(new St(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?h.reject(new St(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new S5(Z1(o.path),d,{includeMetadataChanges:!0,qa:!0});return A5(s,g)}(await L5(n),n.asyncQueue,t,e,r)),r.promise}function vJ(n,t,e={}){const r=new qs;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new P5({next:m=>{d.Nu(),a.enqueueAndForget(()=>T5(s,g)),m.fromCache&&l.source==="server"?h.reject(new St(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new S5(o,d,{includeMetadataChanges:!0,qa:!0});return A5(s,g)}(await L5(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J="firestore.googleapis.com",uO=!0;class hO{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new St(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_J,this.ssl=uO}else this.host=t.host,this.ssl=t.ssl??uO;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=X6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Z6)throw new St(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}y$("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V5(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new St(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class LE{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new St(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hO(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new c$;switch(r.type){case"firstParty":return new h$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=lO.get(e);r&&(yt("ComponentProvider","Removing Datastore"),lO.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new uy(this.firestore,t,this._query)}}class Un{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Un(this.firestore,t,this._key)}toJSON(){return{type:Un._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Kg(e,Un._jsonSchema))return new Un(t,r||null,new Ct(Ie.fromString(e.referencePath)))}}Un._jsonSchemaVersion="firestore/documentReference/1.0",Un._jsonSchema={type:Fn("string",Un._jsonSchemaVersion),referencePath:Fn("string")};class Wo extends uy{constructor(t,e,r){super(t,e,Z1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Un(this.firestore,null,new Ct(t))}withConverter(t){return new Wo(this.firestore,t,this._path)}}function np(n,t,...e){if(n=xn(n),N8("collection","path",t),n instanceof LE){const r=Ie.fromString(t,...e);return eD(r),new Wo(n,null,r)}{if(!(n instanceof Un||n instanceof Wo))throw new St(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ie.fromString(t,...e));return eD(r),new Wo(n.firestore,null,r)}}function za(n,t,...e){if(n=xn(n),arguments.length===1&&(t=Qb.newId()),N8("doc","path",t),n instanceof LE){const r=Ie.fromString(t,...e);return tD(r),new Un(n,null,new Ct(r))}{if(!(n instanceof Un||n instanceof Wo))throw new St(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ie.fromString(t,...e));return tD(r),new Un(n.firestore,n instanceof Wo?n.converter:null,new Ct(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="AsyncQueue";class dO{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y5(this,"async_queue_retry"),this._c=()=>{const r=Nm();r&&yt(fO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=Nm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Nm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new qs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ac(t))throw t;yt(fO,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,In("INTERNAL UNHANDLED ERROR: ",gO(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=IE.createAndSchedule(this,t,e,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&It(47125,{Pc:gO(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function gO(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Ul extends LE{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new dO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new dO(t),this._firestoreClient=void 0,await t}}}function xJ(n,t,e){e||(e=h1);const r=Ll(n,"firestore");if(r.isInitialized(e)){const i=r.getImmediate({identifier:e}),s=r.getOptions(e);if(Qo(s,t))return i;throw new St(dt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new St(dt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Z6)throw new St(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&zh(t.host)&&oP(t.host),r.initialize({options:t,instanceIdentifier:e})}function VE(n){if(n._terminated)throw new St(dt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wJ(n),n._firestoreClient}function wJ(n){var r,i,s;const t=n._freezeSettings(),e=function(o,l,h,d){return new K$(o,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,V5(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(i=t.localCache)!=null&&i._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new gJ(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Vi(Mn.fromBase64String(t))}catch(e){throw new St(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Vi(Mn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Kg(t,Vi._jsonSchema))return Vi.fromBase64String(t.bytes)}}Vi._jsonSchemaVersion="firestore/bytes/1.0",Vi._jsonSchema={type:Fn("string",Vi._jsonSchemaVersion),bytes:Fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new St(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new St(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new St(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return $t(this._lat,t._lat)||$t(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ys._jsonSchemaVersion}}static fromJSON(t){if(Kg(t,Ys._jsonSchema))return new Ys(t.latitude,t.longitude)}}Ys._jsonSchemaVersion="firestore/geoPoint/1.0",Ys._jsonSchema={type:Fn("string",Ys._jsonSchemaVersion),latitude:Fn("number"),longitude:Fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Kg(t,Xs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Xs(t.vectorValues);throw new St(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xs._jsonSchemaVersion="firestore/vectorValue/1.0",Xs._jsonSchema={type:Fn("string",Xs._jsonSchemaVersion),vectorValues:Fn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ=/^__.*__$/;class EJ{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new ja(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wh(t,this.data,e,this.fieldTransforms)}}class B5{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new ja(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function F5(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ac:n})}}class FE{constructor(t,e,r,i,s,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new FE({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return T1(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(F5(this.Ac)&&bJ.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class AJ{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||ay(t)}Cc(t,e,r,i=!1){return new FE({Ac:t,methodName:e,Dc:r,path:dn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UE(n){const t=n._freezeSettings(),e=ay(n._databaseId);return new AJ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function U5(n,t,e,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,t,e,i);jE("Data must be an object, but it was:",a,r);const o=j5(r,a);let l,h;if(s.merge)l=new ti(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=fw(t,g,e);if(!a.contains(m))throw new St(dt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);H5(d,m)||d.push(m)}l=new ti(d),h=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,h=a.fieldTransforms;return new EJ(new Ir(o),l,h)}class fy extends BE{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof fy}}function TJ(n,t,e,r){const i=n.Cc(1,t,e);jE("Data must be an object, but it was:",i,r);const s=[],a=Ir.empty();oc(r,(l,h)=>{const d=zE(t,l,e);h=xn(h);const g=i.yc(d);if(h instanceof fy)s.push(d);else{const m=dy(h,g);m!=null&&(s.push(d),a.set(d,m))}});const o=new ti(s);return new B5(a,o,i.fieldTransforms)}function SJ(n,t,e,r,i,s){const a=n.Cc(1,t,e),o=[fw(t,r,e)],l=[i];if(s.length%2!=0)throw new St(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(fw(t,s[m])),l.push(s[m+1]);const h=[],d=Ir.empty();for(let m=o.length-1;m>=0;--m)if(!H5(h,o[m])){const v=o[m];let w=l[m];w=xn(w);const b=a.yc(v);if(w instanceof fy)h.push(v);else{const E=dy(w,b);E!=null&&(h.push(v),d.set(v,E))}}const g=new ti(h);return new B5(d,g,a.fieldTransforms)}function dy(n,t){if(z5(n=xn(n)))return jE("Unsupported field value:",t,n),j5(n,t);if(n instanceof BE)return function(r,i){if(!F5(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=dy(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,t)}return function(r,i){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dQ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ve.fromDate(r);return{timestampValue:Rh(i.serializer,s)}}if(r instanceof Ve){const s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rh(i.serializer,s)}}if(r instanceof Ys)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vi)return{bytesValue:M6(i.serializer,r._byteString)};if(r instanceof Un){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xs)return function(a,o){return{mapValue:{fields:{[aE]:{stringValue:oE},[Eh]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw o.Sc("VectorValues must only contain numeric values.");return hE(o.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Zb(r)}`)}(n,t)}function j5(n,t){const e={};return Q8(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oc(n,(r,i)=>{const s=dy(i,t.mc(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function z5(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof Ys||n instanceof Vi||n instanceof Un||n instanceof BE||n instanceof Xs)}function jE(n,t,e){if(!z5(e)||!P8(e)){const r=Zb(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function fw(n,t,e){if((t=xn(t))instanceof hy)return t._internalPath;if(typeof t=="string")return zE(n,t);throw T1("Field path arguments must be of type string or ",n,!1,void 0,e)}const CJ=new RegExp("[~\\*/\\[\\]]");function zE(n,t,e){if(t.search(CJ)>=0)throw T1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new hy(...t.split("."))._internalPath}catch{throw T1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function T1(n,t,e,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${t}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new St(dt.INVALID_ARGUMENT,o+n+l)}function H5(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(t,e,r,i,s){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new IJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(W5("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class IJ extends G5{data(){return super.data()}}function W5(n,t){return typeof t=="string"?zE(n,t):t instanceof hy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new St(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DJ{convertValue(t,e="none"){switch(Zo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return on(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ba(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw It(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return oc(t,(i,s)=>{r[i]=this.convertValue(s,e)}),r}convertVectorValue(t){var r,i,s;const e=(s=(i=(r=t.fields)==null?void 0:r[Eh].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>on(a.doubleValue));return new Xs(e)}convertGeoPoint(t){return new Ys(on(t.latitude),on(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=K1(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Og(t));default:return null}}convertTimestamp(t){const e=Va(t);return new Ve(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Ie.fromString(t);Lt(z6(r),9688,{name:t});const i=new Cl(r.get(1),r.get(3)),s=new Ct(r.popFirst(5));return i.isEqual(e)||In(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class Pd{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class vl extends G5{constructor(t,e,r,i,s,a){super(t,e,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(W5("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=vl._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}vl._jsonSchemaVersion="firestore/documentSnapshot/1.0",vl._jsonSchema={type:Fn("string",vl._jsonSchemaVersion),bundleSource:Fn("string","DocumentSnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class Pm extends vl{data(t={}){return super.data(t)}}class hh{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Pd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Pm(this._firestore,this._userDataWriter,r.key,r,new Pd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new St(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new Pm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Pd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new Pm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Pd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return o.type!==0&&(h=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:OJ(o.type),doc:l,oldIndex:h,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=hh._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(e.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function OJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n){n=$s(n,Un);const t=$s(n.firestore,Ul);return yJ(VE(t),n._key).then(e=>NJ(t,n,e))}hh._jsonSchemaVersion="firestore/querySnapshot/1.0",hh._jsonSchema={type:Fn("string",hh._jsonSchemaVersion),bundleSource:Fn("string","QuerySnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class Y5 extends DJ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Vi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Un(this.firestore,null,e)}}function gy(n){n=$s(n,uy);const t=$s(n.firestore,Ul),e=VE(t),r=new Y5(t);return RJ(n._query),vJ(e,n._query).then(i=>new hh(t,r,n,i))}function X5(n,t,e){n=$s(n,Un);const r=$s(n.firestore,Ul),i=q5(n.converter,t);return my(r,[U5(UE(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,Or.none())])}function py(n,t,e,...r){n=$s(n,Un);const i=$s(n.firestore,Ul),s=UE(i);let a;return a=typeof(t=xn(t))=="string"||t instanceof hy?SJ(s,"updateDoc",n._key,t,e,r):TJ(s,"updateDoc",n._key,t),my(i,[a.toMutation(n._key,Or.exists(!0))])}function K5(n){return my($s(n.firestore,Ul),[new ny(n._key,Or.none())])}function MJ(n,t){const e=$s(n.firestore,Ul),r=za(n),i=q5(n.converter,t);return my(e,[U5(UE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Or.exists(!1))]).then(()=>r)}function my(n,t){return function(r,i){const s=new qs;return r.asyncQueue.enqueueAndForget(async()=>ZZ(await mJ(r),i,s)),s.promise}(VE(n),t)}function NJ(n,t,e){const r=e.docs.get(t._key),i=new Y5(n);return new vl(n,i,t._key,r,new Pd(e.hasPendingWrites,e.fromCache),t.converter)}class PJ{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=BJ(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function kJ(n){return new PJ(n)}class LJ{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Vg.provider,this._offlineComponentProvider={build:e=>new N5(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class VJ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Vg.provider,this._offlineComponentProvider={build:e=>new dJ(e,t==null?void 0:t.cacheSizeBytes)}}}function BJ(n){return new LJ(n==null?void 0:n.forceOwnership)}function FJ(){return new VJ}(function(t,e=!0){(function(i){Gh=i})(Hh),Ks(new ss("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Ul(new l$(r.getProvider("auth-internal")),new f$(a,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new St(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(h.options.projectId,d)}(a,i),a);return s={useFetchStreams:e,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Ui($R,QR,t),Ui($R,QR,"esm2020")})();const UJ={apiKey:"AIzaSyBc4CZnGGOTDvfPvEwaA0dXFOwbocdwCa8",authDomain:"knowurfood-d2b78.firebaseapp.com",projectId:"knowurfood-d2b78",storageBucket:"knowurfood-d2b78.firebasestorage.app",messagingSenderId:"643565214463",appId:"1:643565214463:web:8681aadcc4f49c6afdcaca",measurementId:"G-HB4L7NXGNE"},GE=pP(UJ);jY(GE);const WE=Kb(GE),_i=xJ(GE,{localCache:kJ({tabManager:FJ()})}),$5=n=>Math.floor(n/100)+1,jJ=async(n,t)=>{await MJ(np(_i,"users",t,"meals"),n);const e=za(_i,"users",t),r=await HE(e);if(r.exists()){const s=(r.data().xp||0)+10,a=$5(s);await py(e,{xp:s,level:a})}},vx=async n=>(await gy(np(_i,"users",n,"meals"))).docs.map(e=>({id:e.id,...e.data()})),zJ=async(n,t)=>{const e=za(_i,"users",t,"meals",n.id),{id:r,...i}=n;await py(e,i)},HJ=async(n,t)=>{const e=za(_i,"users",t,"meals",n);await K5(e)},GJ=async n=>{const t=np(_i,"users",n,"meals"),r=(await gy(t)).docs.map(i=>K5(i.ref));await Promise.all(r)},pO=async(n,t)=>{const e=za(_i,"users",n);await py(e,t)},WJ=async(n,t,e)=>{const r=za(_i,"users",n,"weightLogs",t);await X5(r,{date:t,weight:e})},Ph=async n=>(await gy(np(_i,"users",n,"weightLogs"))).docs.map(e=>e.data()),qJ=async({email:n,password:t,...e})=>{const i=(await HX(WE,n,t)).user,{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,height:g,goalDate:m,breakfastTime:v,lunchTime:w,dinnerTime:b,calorieGoal:E,age:S=25,gender:T="male"}=e,I=Math.max(1,Math.ceil((new Date(m)-new Date)/(1e3*60*60*24))),k=T==="male"?10*h+6.25*g-5*S+5:10*h+6.25*g-5*S-161,P=(d-h)*7700/I,j=Math.round(k+P),M=isNaN(E)?j:Number(E);return await X5(za(_i,"users",i.uid),{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,goalDate:m,height:g,breakfastTime:v,lunchTime:w,dinnerTime:b,xp:0,level:1,streak:1,lastLogin:new Date().toISOString().split("T")[0],badges:[],calorieGoal:M,age:S,gender:T}),{...i,...e,calorieGoal:M}},YJ=async()=>{await $X(WE)},mO=async()=>new Promise(n=>{const t=WE.onAuthStateChanged(async e=>{if(t(),!e)return n(null);const r=za(_i,"users",e.uid),i=await HE(r);if(!i.exists())return n(e);const s=i.data(),a=new Date().toISOString().split("T")[0],o=s.lastLogin||a,l=XJ(o,a);let h={};h.streak=l===1?(s.streak||0)+1:l>1?1:s.streak||1,h.lastLogin=a;const d=[5,15,30,60,100],g=s.badges||[];if(d.includes(h.streak)){const m=`${h.streak}-Day Streak`;g.includes(m)||(g.push(m),h.badges=g)}try{const v=(await gy(np(_i,"users",e.uid,"weightLogs"))).docs.map(w=>w.data());if(v.length>0&&s.goalWeight&&s.goalDate&&!g.includes(" Goal Achieved")){const w=v.reduce((S,T)=>S.date>T.date?S:T),b=s.goalWeight>=s.currentWeight&&w.weight>=s.goalWeight||s.goalWeight<s.currentWeight&&w.weight<=s.goalWeight,E=new Date(w.date)<=new Date(s.goalDate);if(b&&E){g.push(" Goal Achieved");const S=(s.xp||0)+50,T=$5(S);h.badges=g,h.xp=S,h.level=T}}}catch(m){console.error("Error checking goal badge:",m)}(h.streak!==s.streak||h.lastLogin!==o||h.badges||h.xp)&&(await py(r,h),Object.assign(s,h)),n({...e,...s})})}),XJ=(n,t)=>{const e=new Date(n),r=new Date(t);return Math.floor((r-e)/(1e3*60*60*24))};function KJ({user:n}){const[t,e]=rt.useState(""),[r,i]=rt.useState([]),[s,a]=rt.useState(new Date().toISOString().split("T")[0]);rt.useEffect(()=>{n!=null&&n.uid&&Ph(n.uid).then(i)},[n]);const o=async()=>{if(!t||isNaN(t))return;await WJ(n.uid,s,parseFloat(t));const l=await Ph(n.uid);i(l),e("")};return O.jsxs("div",{className:"card bg-dark p-3 mb-3 text-white shadow-sm",children:[O.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Tracker"}),O.jsxs("div",{className:"d-flex gap-2 mb-2",children:[O.jsx("input",{type:"date",className:"form-control",value:s,max:new Date().toISOString().split("T")[0],onChange:l=>a(l.target.value)}),O.jsx("input",{type:"number",placeholder:"Weight (kg)",className:"form-control",value:t,onChange:l=>e(l.target.value)}),O.jsx("button",{className:"btn btn-primary",onClick:o,children:"Save"})]})]})}const Q5=6048e5,$J=864e5,rp=6e4,ip=36e5,QJ=1e3,yO=Symbol.for("constructDateFrom");function wn(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&yO in n?n[yO](t):n instanceof Date?new n.constructor(t):new Date(t)}function Qt(n,t){return wn(t||n,n)}function yy(n,t,e){const r=Qt(n,e==null?void 0:e.in);return isNaN(t)?wn((e==null?void 0:e.in)||n,NaN):(t&&r.setDate(r.getDate()+t),r)}function qE(n,t,e){const r=Qt(n,e==null?void 0:e.in);if(isNaN(t))return wn(n,NaN);if(!t)return r;const i=r.getDate(),s=wn(n,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function YE(n,t,e){return wn(n,+Qt(n)+t)}function ZJ(n,t,e){return YE(n,t*ip)}let JJ={};function jl(){return JJ}function Zs(n,t){var o,l,h,d;const e=jl(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??0,i=Qt(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function kh(n,t){return Zs(n,{...t,weekStartsOn:1})}function Z5(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getFullYear(),i=wn(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=kh(i),a=wn(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=kh(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function S1(n){const t=Qt(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function zl(n,...t){const e=wn.bind(null,t.find(r=>typeof r=="object"));return t.map(e)}function dw(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function J5(n,t,e){const[r,i]=zl(e==null?void 0:e.in,n,t),s=dw(r),a=dw(i),o=+s-S1(s),l=+a-S1(a);return Math.round((o-l)/$J)}function ttt(n,t){const e=Z5(n,t),r=wn(n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),kh(r)}function ett(n,t,e){const r=Qt(n,e==null?void 0:e.in);return r.setTime(r.getTime()+t*rp),r}function ntt(n,t,e){return qE(n,t*3,e)}function rtt(n,t,e){return YE(n,t*1e3)}function itt(n,t,e){return yy(n,t*7,e)}function stt(n,t,e){return qE(n,t*12,e)}function og(n,t){const e=+Qt(n)-+Qt(t);return e<0?-1:e>0?1:e}function att(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function tk(n){return!(!att(n)&&typeof n!="number"||isNaN(+Qt(n)))}function ott(n,t,e){const[r,i]=zl(e==null?void 0:e.in,n,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function ctt(n,t,e){const[r,i]=zl(e==null?void 0:e.in,n,t);return r.getFullYear()-i.getFullYear()}function ek(n,t,e){const[r,i]=zl(e==null?void 0:e.in,n,t),s=vO(r,i),a=Math.abs(J5(r,i));r.setDate(r.getDate()-s*a);const o=+(vO(r,i)===-s),l=s*(a-o);return l===0?0:l}function vO(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function sp(n){return t=>{const r=(n?Math[n]:Math.trunc)(t);return r===0?0:r}}function ltt(n,t,e){const[r,i]=zl(e==null?void 0:e.in,n,t),s=(+r-+i)/ip;return sp(e==null?void 0:e.roundingMethod)(s)}function XE(n,t){return+Qt(n)-+Qt(t)}function utt(n,t,e){const r=XE(n,t)/rp;return sp(e==null?void 0:e.roundingMethod)(r)}function nk(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function rk(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function htt(n,t){const e=Qt(n,t==null?void 0:t.in);return+nk(e,t)==+rk(e,t)}function ik(n,t,e){const[r,i,s]=zl(e==null?void 0:e.in,n,n,t),a=og(i,s),o=Math.abs(ott(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=og(i,s)===-a;htt(r)&&o===1&&og(r,s)===1&&(l=!1);const h=a*(o-+l);return h===0?0:h}function ftt(n,t,e){const r=ik(n,t,e)/3;return sp(e==null?void 0:e.roundingMethod)(r)}function dtt(n,t,e){const r=XE(n,t)/1e3;return sp(e==null?void 0:e.roundingMethod)(r)}function gtt(n,t,e){const r=ek(n,t,e)/7;return sp(e==null?void 0:e.roundingMethod)(r)}function ptt(n,t,e){const[r,i]=zl(e==null?void 0:e.in,n,t),s=og(r,i),a=Math.abs(ctt(r,i));r.setFullYear(1584),i.setFullYear(1584);const o=og(r,i)===-s,l=s*(a-+o);return l===0?0:l}function mtt(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}function ytt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function vtt(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function sk(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function _tt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function xtt(n,t){var o,l;const e=jl(),r=e.weekStartsOn??((l=(o=e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??0,i=Qt(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function wtt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setSeconds(59,999),e}function btt(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}function Ett(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMilliseconds(999),e}const Att={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ttt=(n,t,e)=>{let r;const i=Att[n];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function _x(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const Stt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ctt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Itt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rtt={date:_x({formats:Stt,defaultWidth:"full"}),time:_x({formats:Ctt,defaultWidth:"full"}),dateTime:_x({formats:Itt,defaultWidth:"full"})},Dtt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ott=(n,t,e,r)=>Dtt[n];function pd(n){return(t,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=e!=null&&e.width?String(e.width):a;i=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=e!=null&&e.width?String(e.width):n.defaultWidth;i=n.values[o]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(t):t;return i[s]}}const Mtt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ntt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ptt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ktt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ltt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vtt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Btt=(n,t)=>{const e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Ftt={ordinalNumber:Btt,era:pd({values:Mtt,defaultWidth:"wide"}),quarter:pd({values:Ntt,defaultWidth:"wide",argumentCallback:n=>n-1}),month:pd({values:Ptt,defaultWidth:"wide"}),day:pd({values:ktt,defaultWidth:"wide"}),dayPeriod:pd({values:Ltt,defaultWidth:"wide",formattingValues:Vtt,defaultFormattingWidth:"wide"})};function md(n){return(t,e={})=>{const r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?jtt(o,g=>g.test(a)):Utt(o,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(l):l,h=e.valueCallback?e.valueCallback(h):h;const d=t.slice(a.length);return{value:h,rest:d}}}function Utt(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function jtt(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function ztt(n){return(t,e={})=>{const r=t.match(n.matchPattern);if(!r)return null;const i=r[0],s=t.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=e.valueCallback?e.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const Htt=/^(\d+)(th|st|nd|rd)?/i,Gtt=/\d+/i,Wtt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qtt={any:[/^b/i,/^(a|c)/i]},Ytt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xtt={any:[/1/i,/2/i,/3/i,/4/i]},Ktt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$tt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qtt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ztt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Jtt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tet={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eet={ordinalNumber:ztt({matchPattern:Htt,parsePattern:Gtt,valueCallback:n=>parseInt(n,10)}),era:md({matchPatterns:Wtt,defaultMatchWidth:"wide",parsePatterns:qtt,defaultParseWidth:"any"}),quarter:md({matchPatterns:Ytt,defaultMatchWidth:"wide",parsePatterns:Xtt,defaultParseWidth:"any",valueCallback:n=>n+1}),month:md({matchPatterns:Ktt,defaultMatchWidth:"wide",parsePatterns:$tt,defaultParseWidth:"any"}),day:md({matchPatterns:Qtt,defaultMatchWidth:"wide",parsePatterns:Ztt,defaultParseWidth:"any"}),dayPeriod:md({matchPatterns:Jtt,defaultMatchWidth:"any",parsePatterns:tet,defaultParseWidth:"any"})},ak={code:"en-US",formatDistance:Ttt,formatLong:Rtt,formatRelative:Ott,localize:Ftt,match:eet,options:{weekStartsOn:0,firstWeekContainsDate:1}};function net(n,t){const e=Qt(n,t==null?void 0:t.in);return J5(e,sk(e))+1}function ok(n,t){const e=Qt(n,t==null?void 0:t.in),r=+kh(e)-+ttt(e);return Math.round(r/Q5)+1}function KE(n,t){var d,g,m,v;const e=Qt(n,t==null?void 0:t.in),r=e.getFullYear(),i=jl(),s=(t==null?void 0:t.firstWeekContainsDate)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,a=wn((t==null?void 0:t.in)||n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Zs(a,t),l=wn((t==null?void 0:t.in)||n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const h=Zs(l,t);return+e>=+o?r+1:+e>=+h?r:r-1}function ret(n,t){var o,l,h,d;const e=jl(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,i=KE(n,t),s=wn((t==null?void 0:t.in)||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Zs(s,t)}function ck(n,t){const e=Qt(n,t==null?void 0:t.in),r=+Zs(e,t)-+ret(e,t);return Math.round(r/Q5)+1}function ke(n,t){const e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}const Eo={y(n,t){const e=n.getFullYear(),r=e>0?e:1-e;return ke(t==="yy"?r%100:r,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):ke(e+1,2)},d(n,t){return ke(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return ke(n.getHours()%12||12,t.length)},H(n,t){return ke(n.getHours(),t.length)},m(n,t){return ke(n.getMinutes(),t.length)},s(n,t){return ke(n.getSeconds(),t.length)},S(n,t){const e=t.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,e-3));return ke(i,t.length)}},ju={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_O={G:function(n,t,e){const r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return Eo.y(n,t)},Y:function(n,t,e,r){const i=KE(n,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return ke(a,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):ke(s,t.length)},R:function(n,t){const e=Z5(n);return ke(e,t.length)},u:function(n,t){const e=n.getFullYear();return ke(e,t.length)},Q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ke(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ke(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){const r=n.getMonth();switch(t){case"M":case"MM":return Eo.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){const r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return ke(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){const i=ck(n,r);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):ke(i,t.length)},I:function(n,t,e){const r=ok(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):ke(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Eo.d(n,t)},D:function(n,t,e){const r=net(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):ke(r,t.length)},E:function(n,t,e){const r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return ke(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return ke(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(n,t,e){const r=n.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return ke(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){const i=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,t,e){const r=n.getHours();let i;switch(r===12?i=ju.noon:r===0?i=ju.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,t,e){const r=n.getHours();let i;switch(r>=17?i=ju.evening:r>=12?i=ju.afternoon:r>=4?i=ju.morning:i=ju.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return Eo.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Eo.H(n,t)},K:function(n,t,e){const r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):ke(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):ke(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Eo.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Eo.s(n,t)},S:function(n,t){return Eo.S(n,t)},X:function(n,t,e){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return wO(r);case"XXXX":case"XX":return Zc(r);case"XXXXX":case"XXX":default:return Zc(r,":")}},x:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"x":return wO(r);case"xxxx":case"xx":return Zc(r);case"xxxxx":case"xxx":default:return Zc(r,":")}},O:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xO(r,":");case"OOOO":default:return"GMT"+Zc(r,":")}},z:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xO(r,":");case"zzzz":default:return"GMT"+Zc(r,":")}},t:function(n,t,e){const r=Math.trunc(+n/1e3);return ke(r,t.length)},T:function(n,t,e){return ke(+n,t.length)}};function xO(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?e+String(i):e+String(i)+t+ke(s,2)}function wO(n,t){return n%60===0?(n>0?"-":"+")+ke(Math.abs(n)/60,2):Zc(n,t)}function Zc(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=ke(Math.trunc(r/60),2),s=ke(r%60,2);return e+i+t+s}const bO=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lk=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},iet=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return bO(n,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",bO(r,t)).replace("{{time}}",lk(i,t))},gw={p:lk,P:iet},set=/^D+$/,aet=/^Y+$/,oet=["D","DD","YY","YYYY"];function uk(n){return set.test(n)}function hk(n){return aet.test(n)}function pw(n,t,e){const r=cet(n,t,e);if(console.warn(r),oet.includes(n))throw new RangeError(r)}function cet(n,t,e){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const uet=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,het=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fet=/^'([^]*?)'?$/,det=/''/g,get=/[a-zA-Z]/;function pet(n,t,e){var d,g,m,v,w,b,E,S;const r=jl(),i=(e==null?void 0:e.locale)??r.locale??ak,s=(e==null?void 0:e.firstWeekContainsDate)??((g=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,a=(e==null?void 0:e.weekStartsOn)??((b=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((S=(E=r.locale)==null?void 0:E.options)==null?void 0:S.weekStartsOn)??0,o=Qt(n,e==null?void 0:e.in);if(!tk(o))throw new RangeError("Invalid time value");let l=t.match(het).map(T=>{const I=T[0];if(I==="p"||I==="P"){const k=gw[I];return k(T,i.formatLong)}return T}).join("").match(uet).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const I=T[0];if(I==="'")return{isToken:!1,value:met(T)};if(_O[I])return{isToken:!0,value:T};if(I.match(get))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(T=>{if(!T.isToken)return T.value;const I=T.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&hk(I)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&uk(I))&&pw(I,t,String(n));const k=_O[I[0]];return k(o,I,i.localize,h)}).join("")}function met(n){const t=n.match(fet);return t?t[1].replace(det,"'"):n}function yet(){return Object.assign({},jl())}function vet(n,t){const e=Qt(n,t==null?void 0:t.in).getDay();return e===0?7:e}function _et(n,t){const e=xet(t)?new t(0):wn(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function xet(n){var t;return typeof n=="function"&&((t=n.prototype)==null?void 0:t.constructor)===n}const wet=10;class fk{constructor(){lt(this,"subPriority",0)}validate(t,e){return!0}}class bet extends fk{constructor(t,e,r,i,s){super(),this.value=t,this.validateValue=e,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,r){return this.setValue(t,e,this.value,r)}}class Eet extends fk{constructor(e,r){super();lt(this,"priority",wet);lt(this,"subPriority",-1);this.context=e||(i=>wn(r,i))}set(e,r){return r.timestampIsSet?e:wn(e,_et(e,this.context))}}class Te{run(t,e,r,i){const s=this.parse(t,e,r,i);return s?{setter:new bet(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,r){return!0}}class Aet extends Te{constructor(){super(...arguments);lt(this,"priority",140);lt(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,r,i){return r.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}const Dn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function On(n,t){return n&&{value:t(n.value),rest:n.rest}}function gn(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Ps(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const r=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,a=e[5]?parseInt(e[5],10):0;return{value:r*(i*ip+s*rp+a*QJ),rest:t.slice(e[0].length)}}function dk(n){return gn(Dn.anyDigitsSigned,n)}function bn(n,t){switch(n){case 1:return gn(Dn.singleDigit,t);case 2:return gn(Dn.twoDigits,t);case 3:return gn(Dn.threeDigits,t);case 4:return gn(Dn.fourDigits,t);default:return gn(new RegExp("^\\d{1,"+n+"}"),t)}}function C1(n,t){switch(n){case 1:return gn(Dn.singleDigitSigned,t);case 2:return gn(Dn.twoDigitsSigned,t);case 3:return gn(Dn.threeDigitsSigned,t);case 4:return gn(Dn.fourDigitsSigned,t);default:return gn(new RegExp("^-?\\d{1,"+n+"}"),t)}}function $E(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function gk(n,t){const e=t>0,r=e?t:1-t;let i;if(r<=50)i=n||100;else{const s=r+50,a=Math.trunc(s/100)*100,o=n>=s%100;i=n+a-(o?100:0)}return e?i:1-i}function pk(n){return n%400===0||n%4===0&&n%100!==0}class Tet extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return On(bn(4,e),s);case"yo":return On(i.ordinalNumber(e,{unit:"year"}),s);default:return On(bn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i){const s=e.getFullYear();if(i.isTwoDigitYear){const o=gk(i.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const a=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Cet extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return On(bn(4,e),s);case"Yo":return On(i.ordinalNumber(e,{unit:"year"}),s);default:return On(bn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i,s){const a=KE(e,s);if(i.isTwoDigitYear){const l=gk(i.year,a);return e.setFullYear(l,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Zs(e,s)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Zs(e,s)}}class Iet extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return C1(r==="R"?4:r.length,e)}set(e,r,i){const s=wn(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),kh(s)}}class Ret extends Te{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return C1(r==="u"?4:r.length,e)}set(e,r,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Det extends Te{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"Q":case"QQ":return bn(r.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Oet extends Te{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"q":case"qq":return bn(r.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Met extends Te{constructor(){super(...arguments);lt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);lt(this,"priority",110)}parse(e,r,i){const s=a=>a-1;switch(r){case"M":return On(gn(Dn.month,e),s);case"MM":return On(bn(2,e),s);case"Mo":return On(i.ordinalNumber(e,{unit:"month"}),s);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}class Net extends Te{constructor(){super(...arguments);lt(this,"priority",110);lt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,i){const s=a=>a-1;switch(r){case"L":return On(gn(Dn.month,e),s);case"LL":return On(bn(2,e),s);case"Lo":return On(i.ordinalNumber(e,{unit:"month"}),s);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}function Pet(n,t,e){const r=Qt(n,e==null?void 0:e.in),i=ck(r,e)-t;return r.setDate(r.getDate()-i*7),Qt(r,e==null?void 0:e.in)}class ket extends Te{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,i){switch(r){case"w":return gn(Dn.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return bn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i,s){return Zs(Pet(e,i,s),s)}}function Let(n,t,e){const r=Qt(n,e==null?void 0:e.in),i=ok(r,e)-t;return r.setDate(r.getDate()-i*7),r}class Vet extends Te{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,i){switch(r){case"I":return gn(Dn.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return bn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i){return kh(Let(e,i))}}const Bet=[31,28,31,30,31,30,31,31,30,31,30,31],Fet=[31,29,31,30,31,30,31,31,30,31,30,31];class Uet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subPriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"d":return gn(Dn.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return bn(r.length,e)}}validate(e,r){const i=e.getFullYear(),s=pk(i),a=e.getMonth();return s?r>=1&&r<=Fet[a]:r>=1&&r<=Bet[a]}set(e,r,i){return e.setDate(i),e.setHours(0,0,0,0),e}}class jet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subpriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,i){switch(r){case"D":case"DD":return gn(Dn.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return bn(r.length,e)}}validate(e,r){const i=e.getFullYear();return pk(i)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}}function QE(n,t,e){var g,m,v,w;const r=jl(),i=(e==null?void 0:e.weekStartsOn)??((m=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((w=(v=r.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??0,s=Qt(n,e==null?void 0:e.in),a=s.getDay(),l=(t%7+7)%7,h=7-i,d=t<0||t>6?t-(a+h)%7:(l+h)%7-(a+h)%7;return yy(s,d,e)}class zet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=QE(e,i,s),e.setHours(0,0,0,0),e}}class Het extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return On(bn(r.length,e),a);case"eo":return On(i.ordinalNumber(e,{unit:"day"}),a);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=QE(e,i,s),e.setHours(0,0,0,0),e}}class Get extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return On(bn(r.length,e),a);case"co":return On(i.ordinalNumber(e,{unit:"day"}),a);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=QE(e,i,s),e.setHours(0,0,0,0),e}}function Wet(n,t,e){const r=Qt(n,e==null?void 0:e.in),i=vet(r,e),s=t-i;return yy(r,s,e)}class qet extends Te{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,i){const s=a=>a===0?7:a;switch(r){case"i":case"ii":return bn(r.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return On(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return On(i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return On(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return On(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,r){return r>=1&&r<=7}set(e,r,i){return e=Wet(e,i),e.setHours(0,0,0,0),e}}class Yet extends Te{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours($E(i),0,0,0),e}}class Xet extends Te{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours($E(i),0,0,0),e}}class Ket extends Te{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours($E(i),0,0,0),e}}class $et extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,i){switch(r){case"h":return gn(Dn.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return bn(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,i){const s=e.getHours()>=12;return s&&i<12?e.setHours(i+12,0,0,0):!s&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}}class Qet extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,i){switch(r){case"H":return gn(Dn.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return bn(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,i){return e.setHours(i,0,0,0),e}}class Zet extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,i){switch(r){case"K":return gn(Dn.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return bn(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}}class Jet extends Te{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,i){switch(r){case"k":return gn(Dn.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return bn(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,i){const s=i<=24?i%24:i;return e.setHours(s,0,0,0),e}}class tnt extends Te{constructor(){super(...arguments);lt(this,"priority",60);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"m":return gn(Dn.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return bn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setMinutes(i,0,0),e}}class ent extends Te{constructor(){super(...arguments);lt(this,"priority",50);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"s":return gn(Dn.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return bn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setSeconds(i,0),e}}class nnt extends Te{constructor(){super(...arguments);lt(this,"priority",30);lt(this,"incompatibleTokens",["t","T"])}parse(e,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return On(bn(r.length,e),i)}set(e,r,i){return e.setMilliseconds(i),e}}class rnt extends Te{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return Ps(Ns.basicOptionalMinutes,e);case"XX":return Ps(Ns.basic,e);case"XXXX":return Ps(Ns.basicOptionalSeconds,e);case"XXXXX":return Ps(Ns.extendedOptionalSeconds,e);case"XXX":default:return Ps(Ns.extended,e)}}set(e,r,i){return r.timestampIsSet?e:wn(e,e.getTime()-S1(e)-i)}}class int extends Te{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return Ps(Ns.basicOptionalMinutes,e);case"xx":return Ps(Ns.basic,e);case"xxxx":return Ps(Ns.basicOptionalSeconds,e);case"xxxxx":return Ps(Ns.extendedOptionalSeconds,e);case"xxx":default:return Ps(Ns.extended,e)}}set(e,r,i){return r.timestampIsSet?e:wn(e,e.getTime()-S1(e)-i)}}class snt extends Te{constructor(){super(...arguments);lt(this,"priority",40);lt(this,"incompatibleTokens","*")}parse(e){return dk(e)}set(e,r,i){return[wn(e,i*1e3),{timestampIsSet:!0}]}}class ant extends Te{constructor(){super(...arguments);lt(this,"priority",20);lt(this,"incompatibleTokens","*")}parse(e){return dk(e)}set(e,r,i){return[wn(e,i),{timestampIsSet:!0}]}}const ont={G:new Aet,y:new Tet,Y:new Cet,R:new Iet,u:new Ret,Q:new Det,q:new Oet,M:new Met,L:new Net,w:new ket,I:new Vet,d:new Uet,D:new jet,E:new zet,e:new Het,c:new Get,i:new qet,a:new Yet,b:new Xet,B:new Ket,h:new $et,H:new Qet,K:new Zet,k:new Jet,m:new tnt,s:new ent,S:new nnt,X:new rnt,x:new int,t:new snt,T:new ant},cnt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lnt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,unt=/^'([^]*?)'?$/,hnt=/''/g,fnt=/\S/,dnt=/[a-zA-Z]/;function gnt(n,t,e,r){var E,S,T,I,k,P,j,M;const i=()=>wn((r==null?void 0:r.in)||e,NaN),s=yet(),a=(r==null?void 0:r.locale)??s.locale??ak,o=(r==null?void 0:r.firstWeekContainsDate)??((S=(E=r==null?void 0:r.locale)==null?void 0:E.options)==null?void 0:S.firstWeekContainsDate)??s.firstWeekContainsDate??((I=(T=s.locale)==null?void 0:T.options)==null?void 0:I.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((P=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:P.weekStartsOn)??s.weekStartsOn??((M=(j=s.locale)==null?void 0:j.options)==null?void 0:M.weekStartsOn)??0;if(!t)return n?i():Qt(e,r==null?void 0:r.in);const h={firstWeekContainsDate:o,weekStartsOn:l,locale:a},d=[new Eet(r==null?void 0:r.in,e)],g=t.match(lnt).map(C=>{const N=C[0];if(N in gw){const B=gw[N];return B(C,a.formatLong)}return C}).join("").match(cnt),m=[];for(let C of g){!(r!=null&&r.useAdditionalWeekYearTokens)&&hk(C)&&pw(C,t,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&uk(C)&&pw(C,t,n);const N=C[0],B=ont[N];if(B){const{incompatibleTokens:z}=B;if(Array.isArray(z)){const F=m.find(xt=>z.includes(xt.token)||xt.token===N);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${C}\` at the same time`)}else if(B.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);m.push({token:N,fullToken:C});const G=B.run(n,C,a.match,h);if(!G)return i();d.push(G.setter),n=G.rest}else{if(N.match(dnt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(C==="''"?C="'":N==="'"&&(C=pnt(C)),n.indexOf(C)===0)n=n.slice(C.length);else return i()}}if(n.length>0&&fnt.test(n))return i();const v=d.map(C=>C.priority).sort((C,N)=>N-C).filter((C,N,B)=>B.indexOf(C)===N).map(C=>d.filter(N=>N.priority===C).sort((N,B)=>B.subPriority-N.subPriority)).map(C=>C[0]);let w=Qt(e,r==null?void 0:r.in);if(isNaN(+w))return i();const b={};for(const C of v){if(!C.validate(w,h))return i();const N=C.set(w,b,h);Array.isArray(N)?(w=N[0],Object.assign(b,N[1])):w=N}return w}function pnt(n){return n.match(unt)[1].replace(hnt,"'")}function mnt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function ynt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setSeconds(0,0),e}function vnt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMilliseconds(0),e}function _nt(n,t){const e=()=>wn(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,i=Ent(n);let s;if(i.date){const h=Ant(i.date,r);s=Tnt(h.restDateString,h.year)}if(!s||isNaN(+s))return e();const a=+s;let o=0,l;if(i.time&&(o=Snt(i.time),isNaN(o)))return e();if(i.timezone){if(l=Cnt(i.timezone),isNaN(l))return e()}else{const h=new Date(a+o),d=Qt(0,t==null?void 0:t.in);return d.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),d.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),d}return Qt(a+o+l,t==null?void 0:t.in)}const J0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},xnt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,wnt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bnt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ent(n){const t={},e=n.split(J0.dateTimeDelimiter);let r;if(e.length>2)return t;if(/:/.test(e[0])?r=e[0]:(t.date=e[0],r=e[1],J0.timeZoneDelimiter.test(t.date)&&(t.date=n.split(J0.timeZoneDelimiter)[0],r=n.substr(t.date.length,n.length))),r){const i=J0.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function Ant(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=n.match(e);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function Tnt(n,t){if(t===null)return new Date(NaN);const e=n.match(xnt);if(!e)return new Date(NaN);const r=!!e[4],i=yd(e[1]),s=yd(e[2])-1,a=yd(e[3]),o=yd(e[4]),l=yd(e[5])-1;if(r)return Mnt(t,o,l)?Int(t,o,l):new Date(NaN);{const h=new Date(0);return!Dnt(t,s,a)||!Ont(t,i)?new Date(NaN):(h.setUTCFullYear(t,s,Math.max(i,a)),h)}}function yd(n){return n?parseInt(n):1}function Snt(n){const t=n.match(wnt);if(!t)return NaN;const e=xx(t[1]),r=xx(t[2]),i=xx(t[3]);return Nnt(e,r,i)?e*ip+r*rp+i*1e3:NaN}function xx(n){return n&&parseFloat(n.replace(",","."))||0}function Cnt(n){if(n==="Z")return 0;const t=n.match(bnt);if(!t)return 0;const e=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return Pnt(r,i)?e*(r*ip+i*rp):NaN}function Int(n,t,e){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+e+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Rnt=[31,null,31,30,31,30,31,31,30,31,30,31];function mk(n){return n%400===0||n%4===0&&n%100!==0}function Dnt(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(Rnt[t]||(mk(n)?29:28))}function Ont(n,t){return t>=1&&t<=(mk(n)?366:365)}function Mnt(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Nnt(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function Pnt(n,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const knt={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};nM._date.override({_id:"date-fns",formats:function(){return knt},parse:function(n,t){if(n===null||typeof n>"u")return null;const e=typeof n;return e==="number"||n instanceof Date?n=Qt(n):e==="string"&&(typeof t=="string"?n=gnt(n,t,new Date,this.options):n=_nt(n,this.options)),tk(n)?n.getTime():null},format:function(n,t){return pet(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return YE(n,t);case"second":return rtt(n,t);case"minute":return ett(n,t);case"hour":return ZJ(n,t);case"day":return yy(n,t);case"week":return itt(n,t);case"month":return qE(n,t);case"quarter":return ntt(n,t);case"year":return stt(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return XE(n,t);case"second":return dtt(n,t);case"minute":return utt(n,t);case"hour":return ltt(n,t);case"day":return ek(n,t);case"week":return gtt(n,t);case"month":return ik(n,t);case"quarter":return ftt(n,t);case"year":return ptt(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return vnt(n);case"minute":return ynt(n);case"hour":return mnt(n);case"day":return dw(n);case"week":return Zs(n);case"isoWeek":return Zs(n,{weekStartsOn:+e});case"month":return ytt(n);case"quarter":return mtt(n);case"year":return sk(n);default:return n}},endOf:function(n,t){switch(t){case"second":return Ett(n);case"minute":return wtt(n);case"hour":return _tt(n);case"day":return nk(n);case"week":return xtt(n);case"month":return rk(n);case"quarter":return btt(n);case"year":return vtt(n);default:return n}}});Pl.register(Td,dm,qm,pg,Zw,Qw);function Lnt({user:n}){const[t,e]=rt.useState([]);if(rt.useEffect(()=>{n!=null&&n.uid&&Ph(n.uid).then(e)},[n]),!n.goalDate||!n.goalWeight)return null;const r=[...t].sort((a,o)=>new Date(a.date)-new Date(o.date)),i={labels:r.map(a=>a.date),datasets:[{label:"Weight (kg)",data:r.map(a=>a.weight),borderColor:"deepskyblue",backgroundColor:"rgba(0, 191, 255, 0.2)",tension:.2},{label:`Goal (${n.goalWeight}kg by ${n.goalDate})`,data:r.map(()=>n.goalWeight),borderDash:[5,5],borderColor:"lime",pointRadius:0,borderWidth:1}]},s={responsive:!0,scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"PP"},ticks:{color:"white"},grid:{color:"#444"}},y:{ticks:{color:"white"},grid:{color:"#444"},beginAtZero:!1}},plugins:{legend:{labels:{color:"white"}}}};return O.jsxs("div",{className:"card bg-dark text-white p-3 mb-2 shadow-sm",children:[O.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Progress"}),O.jsx(VF,{data:i,options:s})]})}const Vnt=n=>{const t=Math.floor(n/100)+1,e=n%100,r=100,i=e/r*100;return{level:t,currentXP:e,nextXP:r,percent:i}};function Bnt({meals:n,onEditMeal:t,onDeleteMeal:e,user:r}){const{level:i,currentXP:s,nextXP:a,percent:o}=Vnt(r.xp||0),l=new Date().toISOString().split("T")[0],[h,d]=rt.useState(r.currentWeight||null);rt.useEffect(()=>{r!=null&&r.uid&&Ph(r.uid).then(j=>{if(j.length>0){const M=[...j].sort((C,N)=>new Date(N.date)-new Date(C.date))[0];d(M.weight)}})},[r]);const g=j=>n.filter(M=>M.mealType===j&&M.date===l),m=j=>{const M=new Date(j),C=M.getDay(),N=M.getDate()-C+(C===0?-6:1);return new Date(M.setDate(N))},[v,w]=rt.useState(m(new Date)),b=j=>{const M=new Date(v);M.setDate(v.getDate()+j),w(M)},E=j=>new Date(j).toLocaleDateString("en-GB"),S=(j,M)=>{if(!j||!M)return null;const C=M/100;return j/(C*C)},T=j=>j<18.5?"Underweight":j<25?"Normal":j<30?"Overweight":"Obese",I=S(h,r.height),k=T(I),P=Math.min(I/40*100,100);return O.jsxs("div",{className:"home-container",children:[O.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[O.jsxs("p",{className:"TitleName mb-1",children:["Hello ",r.firstName]}),O.jsxs("div",{className:"text-end",children:[O.jsxs("span",{className:"small fw-bold",style:{color:"deepskyblue"},children:["Level ",i]}),O.jsx("div",{className:"progress",style:{height:"6px",width:"150px",background:"#444"},children:O.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${o}%`,backgroundColor:"deepskyblue"},"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":a})})]})]}),O.jsxs("div",{className:"CalBarCharSection bg-dark",children:[O.jsxs("div",{className:"d-flex col-md-12 mb-2 justify-content-between",children:[O.jsx("p",{className:"SubTitleName mb-0",children:"Calories Consumed"}),O.jsxs("div",{className:"d-flex align-items-center DateRangePicker",children:[O.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>b(-7),children:""}),E(v),"  ",E(new Date(v.getTime()+6*864e5)),O.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>b(7),children:""})]})]}),O.jsx(wM,{meals:n,startOfWeek:v})]}),O.jsx(Lnt,{user:r}),I&&O.jsxs("div",{className:"card bg-dark text-white p-3 mb-3 shadow-sm text-center",children:[O.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Your BMI"}),O.jsxs("p",{className:"fs-5 mb-1",children:[I.toFixed(1),"  ",O.jsx("span",{className:"fw-bold text-info",children:k})]}),O.jsx("div",{className:"progress bmi-progress mb-1",style:{height:"15px"},children:O.jsx("div",{className:`progress-bar ${k.toLowerCase()}-bar`,role:"progressbar",style:{width:`${P}%`},"aria-valuenow":P,"aria-valuemin":0,"aria-valuemax":100})}),O.jsxs("div",{className:"d-flex justify-content-between text-muted small px-2",children:[O.jsx("span",{children:"Underweight"}),O.jsx("span",{children:"Normal"}),O.jsx("span",{children:"Overweight"}),O.jsx("span",{children:"Obese"})]})]}),O.jsxs("div",{className:"TodayChartsSection col-md-12",children:[O.jsxs("div",{className:"CalDonutSection bg-dark",children:[O.jsx("p",{className:"SubTitleName",children:"Calorie Intake"}),O.jsx(bM,{meals:n,selectedDate:l,goal:r.calorieGoal})]}),O.jsxs("div",{className:"NutriDonutSection bg-dark",children:[O.jsx("p",{className:"SubTitleName",children:"Nutrition Intake"}),O.jsx(EM,{meals:n,selectedDate:l})]})]}),n.some(j=>j.date===l)&&O.jsx("div",{className:"FoodItemList bg-dark",children:(r.mealOrder||["Breakfast","Lunch","Dinner"]).map(j=>{const M=g(j);return M.length===0?null:O.jsxs("div",{className:"mb-3",children:[O.jsx("p",{className:"SubTitleName",children:j}),M.map(C=>C.foodItems.map((N,B)=>O.jsx(DG,{name:N.name,nutrients:N.nutrients,kcal:C.kcal||null,onEdit:()=>t(C),onDelete:()=>e(C.id),unit:r.unit||"g"},`${j}-${C.id}-${B}`)))]},j)})})]})}function Fnt({user:n,meals:t}){var S;const[e,r]=rt.useState(new Date().toISOString().split("T")[0]),[i,s]=rt.useState(""),a=t.filter(T=>T.date===e),[o,l]=rt.useState([]);rt.useEffect(()=>{n!=null&&n.uid&&Ph(n.uid).then(l)},[n]);const h=T=>{const I=new Date(e);I.setDate(I.getDate()+T);const k=new Date;k.setHours(0,0,0,0),!(I>k)&&r(I.toISOString().split("T")[0])},d=(T,I)=>{const k=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),P=document.createElement("a");P.href=URL.createObjectURL(k),P.download=`meals-${I}.json`,P.click()},g=(T,I)=>{const k=[["Food Name","Calories","Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"]];T.forEach(C=>{C.foodItems.forEach(N=>{const B=[N.name,N.kcal||"",...["Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"].map(z=>{const G=N.nutrients.find(F=>F.type===z);return(G==null?void 0:G.total)||""})];k.push(B)})});const P=k.map(C=>C.join(",")).join(`
`),j=new Blob([P],{type:"text/csv"}),M=document.createElement("a");M.href=URL.createObjectURL(j),M.download=`meals-${I}.csv`,M.click()},m=a.filter(T=>T.foodItems.some(I=>I.name.toLowerCase().includes(i.toLowerCase())||I.nutrients.some(k=>k.type.toLowerCase().includes(i.toLowerCase())))),v={Protein:50,Carbohydrate:260,Fat:70,Sugar:30,Fibre:30,Salt:6},b=(()=>{const T={};return a.forEach(I=>I.foodItems.forEach(k=>k.nutrients.forEach(P=>{const j=parseFloat(P.total)||0;T[P.type]=(T[P.type]||0)+j}))),T})(),E=((S=o.find(T=>T.date===e))==null?void 0:S.weight)||null;return O.jsxs("div",{className:"home-container",children:[O.jsx("h5",{className:"TitleName mb-4",children:"History"}),O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:"10px"},children:[O.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2 DateRangePicker",children:[O.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>h(-1),children:""}),O.jsx("input",{type:"date",className:"form-control",value:e,max:new Date().toISOString().split("T")[0],onChange:T=>r(T.target.value),style:{maxWidth:"150px"}}),O.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>h(1),children:""})]}),O.jsxs("div",{className:"d-flex gap-2 mb-2",children:[O.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>d(a,e),children:"Export JSON"}),O.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>g(a,e),children:"Export CSV"})]})]}),O.jsx("input",{type:"text",className:"form-control mb-3",placeholder:" Search food or nutrient...",value:i,onChange:T=>s(T.target.value)}),E!==null&&O.jsxs("div",{className:"mb-2 text-white FoodItemList",children:[O.jsx("strong",{children:"Weight Logged:"})," ",E," kg"]}),a.length===0?O.jsxs("div",{className:"text-center text-white mt-4",children:[O.jsxs("p",{className:"fw-bold",children:["No data available for ",e]}),O.jsx("p",{className:"small ",children:"Try selecting a different date or log a meal to see your history."})]}):O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"TodayChartsSection mb-3",children:[O.jsx("div",{className:"CalDonutSection",children:O.jsx(bM,{meals:a,goal:n.calorieGoal,selectedDate:e})}),O.jsx("div",{className:"NutriDonutSection",children:O.jsx(EM,{meals:a,selectedDate:e})})]}),O.jsxs("div",{className:"bg-dark p-3 rounded mb-3",children:[O.jsx("p",{className:"SubTitleName mb-2",children:"Daily Goal Progress"}),Object.entries(v).map(([T,I])=>{const k=b[T]||0,P=Math.min(k/I*100,100);return O.jsxs("div",{className:"mb-2",children:[O.jsxs("div",{className:"d-flex justify-content-between small text-white",children:[O.jsx("span",{children:T}),O.jsxs("span",{children:[k.toFixed(1)," / ",I,"g"]})]}),O.jsx("div",{className:"progress",style:{height:"8px"},children:O.jsx("div",{className:`progress-bar ${k>=I?"bg-success":"bg-warning"} progress-bar-striped progress-bar-animated`,style:{width:`${P}%`}})})]},T)})]}),m.map((T,I)=>O.jsxs("div",{className:"FoodItemList",children:[O.jsx("h6",{className:"SubTitleName",children:T.mealType}),T.foodItems.map((k,P)=>O.jsxs("div",{className:"card bg-dark text-white p-2 mb-2",children:[O.jsx("p",{className:"fw-bold mb-1",children:k.name}),O.jsxs("p",{className:"mb-1",children:["Calories: ",k.kcal," kcal"]}),k.nutrients.map((j,M)=>O.jsxs("p",{className:"mb-0",children:[j.type,": ",j.total," ",j.unit||"g"]},M))]},P))]},I))]})]})}function Unt(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function jnt(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var znt=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hnt=function(n){znt(t,n);function t(e,r){var i=this.constructor,s=n.call(this,e,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),Unt(s,i.prototype),jnt(s),s}return t}(Error),Gnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ni=function(n){Gnt(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(Hnt),Wnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qi=function(n){Wnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(ni),qnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ht=function(n){qnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(ni),Ynt=function(){function n(t){if(this.binarizer=t,t===null)throw new Ht("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var s=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(s))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Xnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ur=function(n){Xnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(ni),Knt=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Ze=function(){function n(){}return n.arraycopy=function(t,e,r,i,s){for(;s--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),$nt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZE=function(n){$nt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(ni),Qnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),EO=function(n){Qnt(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(ZE),Znt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$n=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var s=e;s<r;s++)t[s]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new Ht("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new EO(e);if(r>t)throw new EO(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var s=Znt(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=31*i+o}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,s=new Int32Array(i);return Ze.arraycopy(t,e,s,0,i),s},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,s=t.length-1;i<=s;){var a=s+i>>1,o=r(e,t[a]);if(o>0)i=a+1;else if(o<0)s=a-1;else return a}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),oe=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),hr=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);Ze.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=r[i]}var o=i*32+oe.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=~r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=~r[i]}var o=i*32+oe.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new Ht;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),s=this.bits,a=r;a<=i;a++){var o=a>r?0:t&31,l=a<i?31:e&31,h=(2<<l)-(1<<o);s[a]|=h}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new Ht;if(e===t)return!0;e--;for(var i=Math.floor(t/32),s=Math.floor(e/32),a=this.bits,o=i;o<=s;o++){var l=o>i?0:t&31,h=o<s?31:e&31,d=(2<<h)-(1<<l)&4294967295;if((a[o]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new Ht("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new Ht("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var s=0;s<i;s++){for(var a=0,o=0;o<8;o++)this.get(t)&&(a|=1<<7-o),t++;e[r+s]=a}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,s=0;s<r;s++){var a=i[s];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,t[e-s]=a}if(this.size!==r*32){for(var o=r*32-this.size,l=t[0]>>>o,s=1;s<r;s++){var h=t[s];l|=h<<32-o,t[s-1]=l,l=h>>>o}t[r-1]=l}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&$n.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+$n.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),mw;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(mw||(mw={}));const ln=mw;var Jnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tt=function(n){Jnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(ni),trt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ne;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Ne||(Ne={}));var Kn=function(){function n(t,e,r){for(var i,s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=a,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var l=this.values,h=0,d=l.length;h!==d;h++){var g=l[h];n.VALUES_TO_ECI.set(g,this)}try{for(var m=trt(a),v=m.next();!v.done;v=m.next()){var w=v.value;n.NAME_TO_ECI.set(w,this)}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new Tt("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new Tt("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new Tt("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ne.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ne.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ne.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ne.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ne.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ne.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ne.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ne.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ne.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ne.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ne.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ne.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ne.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ne.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ne.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ne.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ne.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ne.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ne.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ne.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ne.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ne.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ne.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ne.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ne.Big5,28,"Big5"),n.GB18030=new n(Ne.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ne.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),ert=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),km=function(n){ert(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(ni),ji=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof Kn?t:Kn.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",s=0,a=t.length;s<a;s++){var o=t[s].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Kn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new km("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(Kn.UTF8)||t.equals(Kn.ISO8859_1)||t.equals(Kn.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],s=0;s<r.length;s++)i.push(r[s].charCodeAt(0));return new Uint8Array(i)},n}(),ye=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return ji.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(ln.CHARACTER_SET)!==void 0)return e.get(ln.CHARACTER_SET).toString();for(var r=t.length,i=!0,s=!0,a=!0,o=0,l=0,h=0,d=0,g=0,m=0,v=0,w=0,b=0,E=0,S=0,T=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,I=0;I<r&&(i||s||a);I++){var k=t[I]&255;a&&(o>0?(k&128)===0?a=!1:o--:(k&128)!==0&&((k&64)===0?a=!1:(o++,(k&32)===0?l++:(o++,(k&16)===0?h++:(o++,(k&8)===0?d++:a=!1))))),i&&(k>127&&k<160?i=!1:k>159&&(k<192||k===215||k===247)&&S++),s&&(g>0?k<64||k===127||k>252?s=!1:g--:k===128||k===160||k>239?s=!1:k>160&&k<224?(m++,w=0,v++,v>b&&(b=v)):k>127?(g++,v=0,w++,w>E&&(E=w)):(v=0,w=0))}return a&&o>0&&(a=!1),s&&g>0&&(s=!1),a&&(T||l+h+d>0)?n.UTF8:s&&(n.ASSUME_SHIFT_JIS||b>=3||E>=3)?n.SHIFT_JIS:i&&s?b===2&&m===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:s?n.SHIFT_JIS:a?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function s(o,l,h,d,g,m){if(o==="%%")return"%";if(e[++i]!==void 0){o=d?parseInt(d.substr(1)):void 0;var v=g?parseInt(g.substr(1)):void 0,w;switch(m){case"s":w=e[i];break;case"c":w=e[i][0];break;case"f":w=parseFloat(e[i]).toFixed(o);break;case"p":w=parseFloat(e[i]).toPrecision(o);break;case"e":w=parseFloat(e[i]).toExponential(o);break;case"x":w=parseInt(e[i]).toString(v||16);break;case"d":w=parseFloat(parseInt(e[i],v||10).toPrecision(o)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(v);for(var b=parseInt(h),E=h&&h[0]+""=="0"?"0":" ";w.length<b;)w=l!==void 0?w+E:E+w;return w}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,s)},n.getBytes=function(t,e){return ji.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=Kn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Kn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Kn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),re=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ye.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),Js=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new Ht("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),s=0;s<e;s++)for(var a=t[s],o=0;o<r;o++)a[o]&&i.set(o,s);return i},n.parseFromString=function(t,e,r){if(t===null)throw new Ht("stringRepresentation cannot be null");for(var i=new Array(t.length),s=0,a=0,o=-1,l=0,h=0;h<t.length;)if(t.charAt(h)===`
`||t.charAt(h)==="\r"){if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new Ht("row lengths do not match");a=s,l++}h++}else if(t.substring(h,h+e.length)===e)h+=e.length,i[s]=!0,s++;else if(t.substring(h,h+r.length)===r)h+=r.length,i[s]=!1,s++;else throw new Ht("illegal character encountered: "+t.substring(h));if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new Ht("row lengths do not match");l++}for(var d=new n(o,l),g=0;g<s;g++)i[g]&&d.set(Math.floor(g%o),Math.floor(g/o));return d},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new Ht("input matrix dimensions do not match");for(var e=new hr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,s=0,a=this.height;s<a;s++)for(var o=s*r,l=t.getRow(s,e).getBitArray(),h=0;h<r;h++)i[o+h]^=l[h]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new Ht("Left and top must be nonnegative");if(i<1||r<1)throw new Ht("Height and width must be at least 1");var s=t+r,a=e+i;if(a>this.height||s>this.width)throw new Ht("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,h=e;h<a;h++)for(var d=h*o,g=t;g<s;g++)l[d+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new hr(this.width):e.clear();for(var r=this.rowSize,i=this.bits,s=t*r,a=0;a<r;a++)e.setBulk(a*32,i[s+a]);return e},n.prototype.setRow=function(t,e){Ze.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new hr(t),i=new hr(t),s=0,a=Math.floor((e+1)/2);s<a;s++)r=this.getRow(s,r),i=this.getRow(e-1-s,i),r.reverse(),i.reverse(),this.setRow(s,i),this.setRow(e-1-s,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,s=t,a=e,o=-1,l=-1,h=0;h<e;h++)for(var d=0;d<r;d++){var g=i[h*r+d];if(g!==0){if(h<a&&(a=h),h>l&&(l=h),d*32<s){for(var m=0;(g<<31-m&4294967295)===0;)m++;d*32+m<s&&(s=d*32+m)}if(d*32+31>o){for(var m=31;!(g>>>m);)m--;d*32+m>o&&(o=d*32+m)}}}return o<s||l<a?null:Int32Array.from([s,a,o-s+1,l-a+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,s=r%t*32,a=e[r],o=0;(a<<31-o&4294967295)===0;)o++;return s+=o,Int32Array.from([s,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),s=Math.floor(r%t)*32,a=e[r],o=31;!(a>>>o);)o--;return s+=o,Int32Array.from([s,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&$n.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+$n.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new re,s=0,a=this.height;s<a;s++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,s)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),nrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ut=function(n){nrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(ni),rrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),irt=function(n){rrt(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new hr(s):r.clear(),this.initArrays(s);for(var a=i.getRow(e,this.luminances),o=this.buckets,l=0;l<s;l++)o[(a[l]&255)>>t.LUMINANCE_SHIFT]++;var h=t.estimateBlackPoint(o);if(s<3)for(var l=0;l<s;l++)(a[l]&255)<h&&r.set(l);else for(var d=a[0]&255,g=a[1]&255,l=1;l<s-1;l++){var m=a[l+1]&255;(g*4-d-m)/2<h&&r.set(l),d=g,g=m}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),s=new Js(r,i);this.initArrays(r);for(var a=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),h=e.getRow(l,this.luminances),d=Math.floor(r*4/5),g=Math.floor(r/5);g<d;g++){var m=h[g]&255;a[m>>t.LUMINANCE_SHIFT]++}for(var v=t.estimateBlackPoint(a),w=e.getMatrix(),o=0;o<i;o++)for(var b=o*r,g=0;g<r;g++){var m=w[b+g]&255;m<v&&s.set(g,o)}return s},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,s=0,a=0,o=0;o<r;o++)e[o]>a&&(s=o,a=e[o]),e[o]>i&&(i=e[o]);for(var l=0,h=0,o=0;o<r;o++){var d=o-s,g=e[o]*d*d;g>h&&(l=o,h=g)}if(s>l){var m=s;s=l,l=m}if(l-s<=r/16)throw new ut;for(var v=l-1,w=-1,o=l-1;o>s;o--){var b=o-s,g=b*b*(l-o)*(i-e[o]);g>w&&(v=o,w=g)}return v<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(Knt),srt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),art=function(n){srt(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var s=e.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&a++;var o=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&o++;var l=t.calculateBlackPoints(s,a,o,r,i),h=new Js(r,i);t.calculateThresholdForBlock(s,a,o,r,i,l,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,s,a,o,l){for(var h=a-t.BLOCK_SIZE,d=s-t.BLOCK_SIZE,g=0;g<i;g++){var m=g<<t.BLOCK_SIZE_POWER;m>h&&(m=h);for(var v=t.cap(g,2,i-3),w=0;w<r;w++){var b=w<<t.BLOCK_SIZE_POWER;b>d&&(b=d);for(var E=t.cap(w,2,r-3),S=0,T=-2;T<=2;T++){var I=o[v+T];S+=I[E-2]+I[E-1]+I[E]+I[E+1]+I[E+2]}var k=S/25;t.thresholdBlock(e,b,m,k,s,l)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,s,a,o){for(var l=0,h=i*a+r;l<t.BLOCK_SIZE;l++,h+=a)for(var d=0;d<t.BLOCK_SIZE;d++)(e[h+d]&255)<=s&&o.set(r+d,i+l)},t.calculateBlackPoints=function(e,r,i,s,a){for(var o=a-t.BLOCK_SIZE,l=s-t.BLOCK_SIZE,h=new Array(i),d=0;d<i;d++){h[d]=new Int32Array(r);var g=d<<t.BLOCK_SIZE_POWER;g>o&&(g=o);for(var m=0;m<r;m++){var v=m<<t.BLOCK_SIZE_POWER;v>l&&(v=l);for(var w=0,b=255,E=0,S=0,T=g*s+v;S<t.BLOCK_SIZE;S++,T+=s){for(var I=0;I<t.BLOCK_SIZE;I++){var k=e[T+I]&255;w+=k,k<b&&(b=k),k>E&&(E=k)}if(E-b>t.MIN_DYNAMIC_RANGE)for(S++,T+=s;S<t.BLOCK_SIZE;S++,T+=s)for(var I=0;I<t.BLOCK_SIZE;I++)w+=e[T+I]&255}var P=w>>t.BLOCK_SIZE_POWER*2;if(E-b<=t.MIN_DYNAMIC_RANGE&&(P=b/2,d>0&&m>0)){var j=(h[d-1][m]+2*h[d][m-1]+h[d-1][m-1])/4;b<j&&(P=j)}h[d][m]=P}}return h},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(irt),vy=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new km("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new km("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new km("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new re,r=0;r<this.height;r++){for(var i=this.getRow(r,t),s=0;s<this.width;s++){var a=i[s]&255,o=void 0;a<64?o="#":a<128?o="+":a<192?o=".":o=" ",e.append(o)}e.append(`
`)}return e.toString()},n}(),ort=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JE=function(n){ort(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),s=this.getWidth(),a=0;a<s;a++)i[a]=255-(i[a]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),s=0;s<r;s++)i[s]=255-(e[s]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,s){return new t(this.delegate.crop(e,r,i,s))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(vy),crt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lrt=function(n){crt(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,s){s===void 0&&(s=!1);var a=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!s)for(var o=0,l=0,h=e.length;o<h;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],v=e[o+1],w=e[o+2];d=306*m+601*v+117*w+512>>10}a[l]=d}else for(var o=0,l=0,b=e.length;o<b;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],v=e[o+1],w=e[o+2];d=306*m+601*v+117*w+512>>10}a[l]=255-d}return a},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new Ht("Requested row is outside the image: "+e);var i=this.getWidth(),s=e*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return n.prototype.crop.call(this,e,r,i,s),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),s=e*t.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(s))*a+Math.abs(Math.sin(s))*o),h=Math.ceil(Math.abs(Math.sin(s))*a+Math.abs(Math.cos(s))*o);return r.width=l,r.height=h,i.translate(l/2,h/2),i.rotate(s),i.drawImage(this.canvas,a/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new JE(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(vy),urt=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Br=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(d){try{h(r.next(d))}catch(g){a(g)}}function l(d){try{h(r.throw(d))}catch(g){a(g)}}function h(d){d.done?s(d.value):i(d.value).then(o,l)}h((r=r.apply(n,t||[])).next())})},Fr=function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(d){return l([h,d])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){e.label=h[1];break}if(h[0]===6&&e.label<s[1]){e.label=s[1],s=h;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(h);break}s[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},hrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kh=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Br(this,void 0,void 0,function(){var t,e,r,i,s,a,o,l,h,d,g,m;return Fr(this,function(v){switch(v.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=v.sent(),e=[];try{for(r=hrt(t),i=r.next();!i.done;i=r.next())s=i.value,a=s.kind==="video"?"videoinput":s.kind,a==="videoinput"&&(o=s.deviceId||s.id,l=s.label||"Video device "+(e.length+1),h=s.groupId,d={deviceId:o,label:l,kind:a,groupId:h},e.push(d))}catch(w){g={error:w}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(g)throw g.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return Br(this,void 0,void 0,function(){var t;return Fr(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new urt(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return Br(this,void 0,void 0,function(){var e;return Fr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return Br(this,void 0,void 0,function(){return Fr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return Br(this,void 0,void 0,function(){var r,i;return Fr(this,function(s){switch(s.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,s.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return Br(this,void 0,void 0,function(){var r;return Fr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return Br(this,void 0,void 0,function(){var r,i;return Fr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=s.sent(),[4,this.decodeOnce(r)];case 2:return i=s.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return Br(this,void 0,void 0,function(){return Fr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return Br(this,void 0,void 0,function(){var i,s;return Fr(this,function(a){switch(a.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,e,r)];case 1:return[2,a.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return Br(this,void 0,void 0,function(){var i;return Fr(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,s.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return Br(this,void 0,void 0,function(){var i;return Fr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,s.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return Br(this,void 0,void 0,function(){var r;return Fr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return Br(this,void 0,void 0,function(){return Fr(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new Qi("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new Qi("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new Qi("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new Qi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new Qi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new Qi("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new Qi("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new Qi("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new Qi("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new Qi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return Br(this,void 0,void 0,function(){return Fr(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return Br(this,void 0,void 0,function(){return Fr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var s=function(a,o){if(i._stopAsyncDecode){o(new ut("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(t);a(l)}catch(m){var h=e&&m instanceof ut,d=m instanceof ur||m instanceof Tt,g=d&&r;if(h||g)return setTimeout(s,i._timeBetweenDecodingAttempts,a,o);o(m)}};return new Promise(function(a,o){return s(a,o)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var s=r.decode(t);e(s,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){e(null,l);var a=l instanceof ur||l instanceof Tt,o=l instanceof ut;(a||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new lrt(r,e),s=new art(i);return new Ynt(s)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),Nr=function(){function n(t,e,r,i,s,a){r===void 0&&(r=e==null?0:8*e.length),a===void 0&&(a=Ze.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=s,this.timestamp=a,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=s,this.resultMetadata=null,a==null?this.timestamp=Ze.currentTimeMillis():this.timestamp=a}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);Ze.arraycopy(e,0,r,0,e.length),Ze.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),yw;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yw||(yw={}));const jt=yw;var vw;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(vw||(vw={}));const wr=vw;var _y=function(){function n(t,e,r,i,s,a){s===void 0&&(s=-1),a===void 0&&(a=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=a,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),kd=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new Ht;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),qo=function(){function n(t,e){if(e.length===0)throw new Ht;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ze.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,s=e.length;i!==s;i++){var a=e[i];r=kd.addOrSubtract(r,a)}return r}r=e[0];for(var o=e.length,l=this.field,i=1;i<o;i++)r=kd.addOrSubtract(l.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new Ht("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;Ze.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=kd.addOrSubtract(e[o-a],r[o]);return new n(this.field,s)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new Ht("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=this.field,l=0;l<r;l++)for(var h=e[l],d=0;d<s;d++)a[l+d]=kd.addOrSubtract(a[l+d],o.multiply(h,i[d]));return new n(o,a)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),s=this.coefficients,a=0;a<e;a++)i[a]=r.multiply(s[a],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new Ht;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,s=new Int32Array(i+t),a=this.field,o=0;o<i;o++)s[o]=a.multiply(r[o],e);return new n(a,s)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new Ht("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new Ht("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,s=t.getCoefficient(t.getDegree()),a=e.inverse(s);i.getDegree()>=t.getDegree()&&!i.isZero();){var o=i.getDegree()-t.getDegree(),l=e.multiply(i.getCoefficient(i.getDegree()),a),h=t.multiplyByMonomial(o,l),d=e.buildMonomial(o,l);r=r.addOrSubtract(d),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),frt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yk=function(n){frt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(ni),drt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$r=function(n){drt(t,n);function t(e,r,i){var s=n.call(this)||this;s.primitive=e,s.size=r,s.generatorBase=i;for(var a=new Int32Array(r),o=1,l=0;l<r;l++)a[l]=o,o*=2,o>=r&&(o^=e,o&=r-1);s.expTable=a;for(var h=new Int32Array(r),l=0;l<r-1;l++)h[a[l]]=l;return s.logTable=h,s.zero=new qo(s,Int32Array.from([0])),s.one=new qo(s,Int32Array.from([1])),s}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new Ht;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new qo(this,i)},t.prototype.inverse=function(e){if(e===0)throw new yk;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+oe.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(kd),grt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tm=function(n){grt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(ni),prt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ap=function(n){prt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(ni),xy=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new qo(r,t),s=new Int32Array(e),a=!0,o=0;o<e;o++){var l=i.evaluateAt(r.exp(o+r.getGeneratorBase()));s[s.length-1-o]=l,l!==0&&(a=!1)}if(!a)for(var h=new qo(r,s),d=this.runEuclideanAlgorithm(r.buildMonomial(e,1),h,e),g=d[0],m=d[1],v=this.findErrorLocations(g),w=this.findErrorMagnitudes(m,v),o=0;o<v.length;o++){var b=t.length-1-r.log(v[o]);if(b<0)throw new tm("Bad error location");t[b]=$r.addOrSubtract(t[b],w[o])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=this.field,a=t,o=e,l=s.getZero(),h=s.getOne();o.getDegree()>=(r/2|0);){var d=a,g=l;if(a=o,l=h,a.isZero())throw new tm("r_{i-1} was zero");o=d;for(var m=s.getZero(),v=a.getCoefficient(a.getDegree()),w=s.inverse(v);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),E=s.multiply(o.getCoefficient(o.getDegree()),w);m=m.addOrSubtract(s.buildMonomial(b,E)),o=o.addOrSubtract(a.multiplyByMonomial(b,E))}if(h=m.multiply(l).addOrSubtract(g),o.getDegree()>=a.getDegree())throw new ap("Division algorithm failed to reduce polynomial?")}var S=h.getCoefficient(0);if(S===0)throw new tm("sigmaTilde(0) was zero");var T=s.inverse(S),I=h.multiplyScalar(T),k=o.multiplyScalar(T);return[I,k]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,s=this.field,a=1;a<s.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=s.inverse(a),i++);if(i!==e)throw new tm("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),s=this.field,a=0;a<r;a++){for(var o=s.inverse(e[a]),l=1,h=0;h<r;h++)if(a!==h){var d=s.multiply(e[h],o),g=(d&1)===0?d|1:d&-2;l=s.multiply(l,g)}i[a]=s.multiply(t.evaluateAt(o),s.inverse(l)),s.getGeneratorBase()!==0&&(i[a]=s.multiply(i[a],o))}return i},n}(),yr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(yr||(yr={}));var AO=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),s=n.convertBoolArrayToByteArray(i),a=n.getEncodedData(i),o=new _y(s,a,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=yr.UPPER,i=yr.UPPER,s="",a=0;a<e;)if(i===yr.BINARY){if(e-a<5)break;var o=n.readCode(t,a,5);if(a+=5,o===0){if(e-a<11)break;o=n.readCode(t,a,11)+31,a+=11}for(var l=0;l<o;l++){if(e-a<8){a=e;break}var h=n.readCode(t,a,8);s+=ye.castAsNonUtf8Char(h),a+=8}i=r}else{var d=i===yr.DIGIT?4:5;if(e-a<d)break;var h=n.readCode(t,a,d);a+=d;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(s+=g,i=r)}return s},n.getTable=function(t){switch(t){case"L":return yr.LOWER;case"P":return yr.PUNCT;case"M":return yr.MIXED;case"D":return yr.DIGIT;case"B":return yr.BINARY;case"U":default:return yr.UPPER}},n.getCharacter=function(t,e){switch(t){case yr.UPPER:return n.UPPER_TABLE[e];case yr.LOWER:return n.LOWER_TABLE[e];case yr.MIXED:return n.MIXED_TABLE[e];case yr.PUNCT:return n.PUNCT_TABLE[e];case yr.DIGIT:return n.DIGIT_TABLE[e];default:throw new ap("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=$r.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=$r.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=$r.AZTEC_DATA_10):(r=12,e=$r.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=t.length/r;if(s<i)throw new Tt;for(var a=t.length%r,o=new Int32Array(s),l=0;l<s;l++,a+=r)o[l]=n.readCode(t,a,r);try{var h=new xy(e);h.decode(o,s-i)}catch(E){throw new Tt(E)}for(var d=(1<<r)-1,g=0,l=0;l<i;l++){var m=o[l];if(m===0||m===d)throw new Tt;(m===1||m===d-1)&&g++}for(var v=new Array(i*r-g),w=0,l=0;l<i;l++){var m=o[l];if(m===1||m===d-1)v.fill(m>1,w,w+r-1),w+=r-1;else for(var b=r-1;b>=0;--b)v[w++]=(m&1<<b)!==0}return v},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,s=new Int32Array(i),a=new Array(this.totalBitsInLayer(r,e));if(e)for(var o=0;o<s.length;o++)s[o]=o;else for(var l=i+1+2*oe.truncDivision(oe.truncDivision(i,2)-1,15),h=i/2,d=oe.truncDivision(l,2),o=0;o<h;o++){var g=o+oe.truncDivision(o,15);s[h-o-1]=d-g-1,s[h+o]=d+g+1}for(var o=0,m=0;o<r;o++){for(var v=(r-o)*4+(e?9:12),w=o*2,b=i-1-w,E=0;E<v;E++)for(var S=E*2,T=0;T<2;T++)a[m+S+T]=t.get(s[w+T],s[w+E]),a[m+2*v+S+T]=t.get(s[w+E],s[b-T]),a[m+4*v+S+T]=t.get(s[b-T],s[b-E]),a[m+6*v+S+T]=t.get(s[b-E],s[w+T]);m+=v*8}return a},n.readCode=function(t,e,r){for(var i=0,s=e;s<e+r;s++)i<<=1,t[s]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),we=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var s=t-r,a=e-i;return Math.sqrt(s*s+a*a)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var s=t[r];e+=s}return e},n}(),_w=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ot=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*_w.floatToIntBits(this.x)+_w.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),s,a,o;if(r>=e&&r>=i?(a=t[0],s=t[1],o=t[2]):i>=r&&i>=e?(a=t[1],s=t[0],o=t[2]):(a=t[2],s=t[0],o=t[1]),this.crossProductZ(s,a,o)<0){var l=s;s=o,o=l}t[0]=s,t[1]=a,t[2]=o},n.distance=function(t,e){return we.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,s=e.y;return(r.x-i)*(t.y-s)-(r.y-s)*(t.x-i)},n}(),tA=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),mrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yrt=function(n){mrt(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r)||this;return o.compact=i,o.nbDatablocks=s,o.nbLayers=a,o}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(tA),xw=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var s=e/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ut}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,s=!1,a=!0,o=!1,l=!1,h=!1,d=!1,g=!1,m=this.width,v=this.height;a;){a=!1;for(var w=!0;(w||!l)&&e<m;)w=this.containsBlackPoint(r,i,e,!1),w?(e++,a=!0,l=!0):l||e++;if(e>=m){s=!0;break}for(var b=!0;(b||!h)&&i<v;)b=this.containsBlackPoint(t,e,i,!0),b?(i++,a=!0,h=!0):h||i++;if(i>=v){s=!0;break}for(var E=!0;(E||!d)&&t>=0;)E=this.containsBlackPoint(r,i,t,!1),E?(t--,a=!0,d=!0):d||t--;if(t<0){s=!0;break}for(var S=!0;(S||!g)&&r>=0;)S=this.containsBlackPoint(t,e,r,!0),S?(r--,a=!0,g=!0):g||r--;if(r<0){s=!0;break}a&&(o=!0)}if(!s&&o){for(var T=e-t,I=null,k=1;I===null&&k<T;k++)I=this.getBlackPointOnSegment(t,i-k,t+k,i);if(I==null)throw new ut;for(var P=null,k=1;P===null&&k<T;k++)P=this.getBlackPointOnSegment(t,r+k,t+k,r);if(P==null)throw new ut;for(var j=null,k=1;j===null&&k<T;k++)j=this.getBlackPointOnSegment(e,r+k,e-k,r);if(j==null)throw new ut;for(var M=null,k=1;M===null&&k<T;k++)M=this.getBlackPointOnSegment(e,i-k,e-k,i);if(M==null)throw new ut;return this.centerEdges(M,I,j,P)}else throw new ut},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var s=we.round(we.distance(t,e,r,i)),a=(r-t)/s,o=(i-e)/s,l=this.image,h=0;h<s;h++){var d=we.round(t+h*a),g=we.round(e+h*o);if(l.get(d,g))return new Ot(d,g)}return null},n.prototype.centerEdges=function(t,e,r,i){var s=t.getX(),a=t.getY(),o=e.getX(),l=e.getY(),h=r.getX(),d=r.getY(),g=i.getX(),m=i.getY(),v=n.CORR;return s<this.width/2?[new Ot(g-v,m+v),new Ot(o+v,l+v),new Ot(h-v,d-v),new Ot(s+v,a-v)]:[new Ot(g+v,m+v),new Ot(o+v,l-v),new Ot(h-v,d+v),new Ot(s-v,a-v)]},n.prototype.containsBlackPoint=function(t,e,r,i){var s=this.image;if(i){for(var a=t;a<=e;a++)if(s.get(a,r))return!0}else for(var o=t;o<=e;o++)if(s.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),TO=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),s=!0,a=0;a<e.length&&s;a+=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}s=!0;for(var a=e.length-2;a>=0&&s;a-=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}},n}(),vk=function(){function n(t,e,r,i,s,a,o,l,h){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=s,this.a32=a,this.a13=o,this.a23=l,this.a33=h}return n.quadrilateralToQuadrilateral=function(t,e,r,i,s,a,o,l,h,d,g,m,v,w,b,E){var S=n.quadrilateralToSquare(t,e,r,i,s,a,o,l),T=n.squareToQuadrilateral(h,d,g,m,v,w,b,E);return T.times(S)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=0;m<e;m+=2){var v=t[m],w=t[m+1],b=s*v+l*w+g;t[m]=(r*v+a*w+h)/b,t[m+1]=(i*v+o*w+d)/b}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=t.length,v=0;v<m;v++){var w=t[v],b=e[v],E=s*w+l*b+g;t[v]=(r*w+a*b+h)/E,e[v]=(i*w+o*b+d)/E}},n.squareToQuadrilateral=function(t,e,r,i,s,a,o,l){var h=t-r+s-o,d=e-i+a-l;if(h===0&&d===0)return new n(r-t,s-r,t,i-e,a-i,e,0,0,1);var g=r-s,m=o-s,v=i-a,w=l-a,b=g*w-m*v,E=(h*w-m*d)/b,S=(g*d-h*v)/b;return new n(r-t+E*r,o-t+S*o,t,i-e+E*i,l-e+S*l,e,E,S,1)},n.quadrilateralToSquare=function(t,e,r,i,s,a,o,l){return n.squareToQuadrilateral(t,e,r,i,s,a,o,l).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),vrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_rt=function(n){vrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,s,a,o,l,h,d,g,m,v,w,b,E,S,T,I,k){var P=vk.quadrilateralToQuadrilateral(s,a,o,l,h,d,g,m,v,w,b,E,S,T,I,k);return this.sampleGridWithTransform(e,r,i,P)},t.prototype.sampleGridWithTransform=function(e,r,i,s){if(r<=0||i<=0)throw new ut;for(var a=new Js(r,i),o=new Float32Array(2*r),l=0;l<i;l++){for(var h=o.length,d=l+.5,g=0;g<h;g+=2)o[g]=g/2+.5,o[g+1]=d;s.transformPoints(o),TO.checkAndNudgePoints(e,o);try{for(var g=0;g<h;g+=2)e.get(Math.floor(o[g]),Math.floor(o[g+1]))&&a.set(g/2,l)}catch{throw new ut}}return a},t}(TO),eA=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new _rt,n}(),Xr=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new Ot(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),xrt=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new yrt(s,a,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ut;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,s=0;s<4;s++){var a=r[(this.shift+s)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(s,a,o){var l=(s>>e-2<<1)+(s&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(oe.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ut},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var s=r-i,a=new Int32Array(r),o=r-1;o>=0;--o)a[o]=t&15,t>>=4;try{var l=new xy($r.AZTEC_PARAM);l.decode(a,s)}catch{throw new ut}for(var h=0,o=0;o<i;o++)h=(h<<4)+a[o];return h},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,s=t,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(e,a,1,-1),l=this.getFirstDifferent(r,a,1,1),h=this.getFirstDifferent(i,a,-1,1),d=this.getFirstDifferent(s,a,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(d,o)*this.nbCenterLayers/(this.distancePoint(s,e)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(o,l,h,d))break}e=o,r=l,i=h,s=d,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ut;this.compact=this.nbCenterLayers===5;var m=new Ot(e.getX()+.5,e.getY()-.5),v=new Ot(r.getX()+.5,r.getY()+.5),w=new Ot(i.getX()-.5,i.getY()+.5),b=new Ot(s.getX()-.5,s.getY()-.5);return this.expandSquare([m,v,w,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var s=new xw(this.image).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{var a=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new Xr(a+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Xr(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xr(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xr(a-7,o-7),!1,-1,-1).toResultPoint()}var l=we.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=we.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var s=new xw(this.image,15,l,h).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{t=this.getFirstDifferent(new Xr(l+7,h-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Xr(l+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xr(l-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xr(l-7,h-7),!1,-1,-1).toResultPoint()}return l=we.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=we.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new Xr(l,h)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,s){var a=eA.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,h=o/2+this.nbCenterLayers;return a.sampleGrid(t,o,o,l,l,h,l,h,h,l,h,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,s=this.distanceResultPoint(t,e),a=s/r,o=t.getX(),l=t.getY(),h=a*(e.getX()-t.getX())/s,d=a*(e.getY()-t.getY())/s,g=0;g<r;g++)this.image.get(we.round(o+g*h),we.round(l+g*d))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var s=3;t=new Xr(t.getX()-s,t.getY()+s),e=new Xr(e.getX()-s,e.getY()-s),r=new Xr(r.getX()+s,r.getY()-s),i=new Xr(i.getX()+s,i.getY()+s);var a=this.getColor(i,t);if(a===0)return!1;var o=this.getColor(t,e);return o!==a||(o=this.getColor(e,r),o!==a)?!1:(o=this.getColor(r,i),o===a)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,s=(e.getY()-t.getY())/r,a=0,o=t.getX(),l=t.getY(),h=this.image.get(t.getX(),t.getY()),d=Math.ceil(r),g=0;g<d;g++)o+=i,l+=s,this.image.get(we.round(o),we.round(l))!==h&&a++;var m=a/r;return m>.1&&m<.9?0:m<=.1===h?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var s=t.getX()+r,a=t.getY()+i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r,a+=i;for(s-=r,a-=i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r;for(s-=r;this.isValid(s,a)&&this.image.get(s,a)===e;)a+=i;return a-=i,new Xr(s,a)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),s=t[0].getX()-t[2].getX(),a=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,h=new Ot(o+i*s,l+i*a),d=new Ot(o-i*s,l-i*a);s=t[1].getX()-t[3].getX(),a=t[1].getY()-t[3].getY(),o=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2;var g=new Ot(o+i*s,l+i*a),m=new Ot(o-i*s,l-i*a),v=[h,g,d,m];return v},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=we.round(t.getX()),r=we.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return we.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return we.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(oe.truncDivision(this.nbLayers-4,8)+1)+15},n}(),ww=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new xrt(t.getBlackMatrix()),s=null,a=null;try{var o=i.detectMirror(!1);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new AO().decode(o)}catch(g){r=g}if(a==null)try{var o=i.detectMirror(!0);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new AO().decode(o)}catch(g){throw r??g}var l=new Nr(a.getText(),a.getRawBytes(),a.getNumBits(),s,jt.AZTEC,Ze.currentTimeMillis()),h=a.getByteSegments();h!=null&&l.putMetadata(wr.BYTE_SEGMENTS,h);var d=a.getECLevel();return d!=null&&l.putMetadata(wr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(ln.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,s,a){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),wrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){wrt(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new ww,e)||this}return t})(Kh);var Zn=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(ln.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),s=this.doDecode(i,e),a=s.getResultMetadata(),o=270;a!==null&&a.get(wr.ORIENTATION)===!0&&(o=o+a.get(wr.ORIENTATION)%360),s.putMetadata(wr.ORIENTATION,o);var l=s.getResultPoints();if(l!==null)for(var h=i.getHeight(),d=0;d<l.length;d++)l[d]=new Ot(h-l[d].getY()-1,l[d].getX());return s}else throw new ut}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),s=new hr(r),a=e&&e.get(ln.TRY_HARDER)===!0,o=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var h=Math.trunc(i/2),d=0;d<l;d++){var g=Math.trunc((d+1)/2),m=(d&1)===0,v=h+o*(m?g:-g);if(v<0||v>=i)break;try{s=t.getBlackRow(v,s)}catch{continue}for(var w=function(T){if(T===1&&(s.reverse(),e&&e.get(ln.NEED_RESULT_POINT_CALLBACK)===!0)){var I=new Map;e.forEach(function(j,M){return I.set(M,j)}),I.delete(ln.NEED_RESULT_POINT_CALLBACK),e=I}try{var k=b.decodeRow(v,s,e);if(T===1){k.putMetadata(wr.ORIENTATION,180);var P=k.getResultPoints();P!==null&&(P[0]=new Ot(r-P[0].getX()-1,P[0].getY()),P[1]=new Ot(r-P[1].getX()-1,P[1].getY()))}return{value:k}}catch{}},b=this,E=0;E<2;E++){var S=w(E);if(typeof S=="object")return S.value}}throw new ut},n.recordPattern=function(t,e,r){for(var i=r.length,s=0;s<i;s++)r[s]=0;var a=t.getSize();if(e>=a)throw new ut;for(var o=!t.get(e),l=0,h=e;h<a;){if(t.get(h)!==o)r[l]++;else{if(++l===i)break;r[l]=1,o=!o}h++}if(!(l===i||l===i-1&&h===a))throw new ut},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,s=t.get(e);e>0&&i>=0;)t.get(--e)!==s&&(i--,s=!s);if(i>=0)throw new ut;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return Number.POSITIVE_INFINITY;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,v=g>m?g-m:m-g;if(v>r)return Number.POSITIVE_INFINITY;h+=v}return h/s},n}(),brt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SO=function(n){brt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),s=0,a=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,h=6,d=i;d<r;d++)if(e.get(d)!==l)a[s]++;else{if(s===h-1){for(var g=t.MAX_AVG_VARIANCE,m=-1,v=t.CODE_START_A;v<=t.CODE_START_C;v++){var w=Zn.patternMatchVariance(a,t.CODE_PATTERNS[v],t.MAX_INDIVIDUAL_VARIANCE);w<g&&(g=w,m=v)}if(m>=0&&e.isRange(Math.max(0,o-(d-o)/2),o,!1))return Int32Array.from([o,d,m]);o+=a[0]+a[1],a=a.slice(2,a.length),a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,l=!l}throw new ut},t.decodeCode=function(e,r,i){Zn.recordPattern(e,i,r);for(var s=t.MAX_AVG_VARIANCE,a=-1,o=0;o<t.CODE_PATTERNS.length;o++){var l=t.CODE_PATTERNS[o],h=this.patternMatchVariance(r,l,t.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=o)}if(a>=0)return a;throw new ut},t.prototype.decodeRow=function(e,r,i){var s=i&&i.get(ln.ASSUME_GS1)===!0,a=t.findStartPattern(r),o=a[2],l=0,h=new Uint8Array(20);h[l++]=o;var d;switch(o){case t.CODE_START_A:d=t.CODE_CODE_A;break;case t.CODE_START_B:d=t.CODE_CODE_B;break;case t.CODE_START_C:d=t.CODE_CODE_C;break;default:throw new Tt}for(var g=!1,m=!1,v="",w=a[0],b=a[1],E=Int32Array.from([0,0,0,0,0,0]),S=0,T=0,I=o,k=0,P=!0,j=!1,M=!1;!g;){var C=m;switch(m=!1,S=T,T=t.decodeCode(r,E,b),h[l++]=T,T!==t.CODE_STOP&&(P=!0),T!==t.CODE_STOP&&(k++,I+=k*T),w=b,b+=E.reduce(function(ct,vt){return ct+vt},0),T){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new Tt}switch(d){case t.CODE_CODE_A:if(T<64)M===j?v+=String.fromCharCode(32+T):v+=String.fromCharCode(32+T+128),M=!1;else if(T<96)M===j?v+=String.fromCharCode(T-64):v+=String.fromCharCode(T+64),M=!1;else switch(T!==t.CODE_STOP&&(P=!1),T){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!j&&M?(j=!0,M=!1):j&&M?(j=!1,M=!1):M=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_B;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_B:if(T<96)M===j?v+=String.fromCharCode(32+T):v+=String.fromCharCode(32+T+128),M=!1;else switch(T!==t.CODE_STOP&&(P=!1),T){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!j&&M?(j=!0,M=!1):j&&M?(j=!1,M=!1):M=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_A;break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_C:if(T<100)T<10&&(v+="0"),v+=T;else switch(T!==t.CODE_STOP&&(P=!1),T){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_STOP:g=!0;break}break}C&&(d=d===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var N=b-w;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-w)/2),!1))throw new ut;if(I-=k*S,I%103!==S)throw new ur;var B=v.length;if(B===0)throw new ut;B>0&&P&&(d===t.CODE_CODE_C?v=v.substring(0,B-2):v=v.substring(0,B-1));for(var z=(a[1]+a[0])/2,G=w+N/2,F=h.length,xt=new Uint8Array(F),bt=0;bt<F;bt++)xt[bt]=h[bt];var K=[new Ot(z,e),new Ot(G,e)];return new Nr(v,xt,0,K,jt.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(Zn),Ert=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CO=function(n){Ert(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.counters;h.fill(0),this.decodeRowResult="";var d=t.findAsteriskPattern(r,h),g=r.getNextSet(d[1]),m=r.getSize(),v,w;do{t.recordPattern(r,g,h);var b=t.toNarrowWidePattern(h);if(b<0)throw new ut;v=t.patternToChar(b),this.decodeRowResult+=v,w=g;try{for(var E=(s=void 0,wx(h)),S=E.next();!S.done;S=E.next()){var T=S.value;g+=T}}catch(F){s={error:F}}finally{try{S&&!S.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}g=r.getNextSet(g)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var k=wx(h),P=k.next();!P.done;P=k.next()){var T=P.value;I+=T}}catch(F){o={error:F}}finally{try{P&&!P.done&&(l=k.return)&&l.call(k)}finally{if(o)throw o.error}}var j=g-w-I;if(g!==m&&j*2<I)throw new ut;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,C=0,N=0;N<M;N++)C+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(M)!==t.ALPHABET_STRING.charAt(C%43))throw new ur;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new ut;var B;this.extendedMode?B=t.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var z=(d[1]+d[0])/2,G=w+I/2;return new Nr(B,null,0,[new Ot(z,e),new Ot(G,e)],jt.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),s=e.getNextSet(0),a=0,o=s,l=!1,h=r.length,d=s;d<i;d++)if(e.get(d)!==l)r[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((d-o)/2)),o,!1))return[o,d];o+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,l=!l}throw new ut},t.toNarrowWidePattern=function(e){var r,i,s=e.length,a=0,o;do{var l=2147483647;try{for(var h=(r=void 0,wx(e)),d=h.next();!d.done;d=h.next()){var g=d.value;g<l&&g>a&&(l=g)}}catch(b){r={error:b}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}a=l,o=0;for(var m=0,v=0,w=0;w<s;w++){var g=e[w];g>a&&(v|=1<<s-1-w,o++,m+=g)}if(o===3){for(var w=0;w<s&&o>0;w++){var g=e[w];if(g>a&&(o--,g*2>=m))return-1}return v}}while(o>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new ut},t.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a==="+"||a==="$"||a==="%"||a==="/"){var o=e.charAt(s+1),l="\0";switch(a){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Tt;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Tt;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new Tt;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Tt;break}i+=l,s++}else i+=a}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(Zn),Art=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},IO=function(n){Art(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.findAsteriskPattern(r),d=r.getNextSet(h[1]),g=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var v,w;do{t.recordPattern(r,d,m);var b=this.toPattern(m);if(b<0)throw new ut;v=this.patternToChar(b),this.decodeRowResult+=v,w=d;try{for(var E=(s=void 0,bx(m)),S=E.next();!S.done;S=E.next()){var T=S.value;d+=T}}catch(N){s={error:N}}finally{try{S&&!S.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}d=r.getNextSet(d)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var I=0;try{for(var k=bx(m),P=k.next();!P.done;P=k.next()){var T=P.value;I+=T}}catch(N){o={error:N}}finally{try{P&&!P.done&&(l=k.return)&&l.call(k)}finally{if(o)throw o.error}}if(d===g||!r.get(d))throw new ut;if(this.decodeRowResult.length<2)throw new ut;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var j=this.decodeExtended(this.decodeRowResult),M=(h[1]+h[0])/2,C=w+I/2;return new Nr(j,null,0,[new Ot(M,e),new Ot(C,e)],jt.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var s=this.counters,a=i,o=!1,l=s.length,h=0,d=i;d<r;d++)if(e.get(d)!==o)s[h]++;else{if(h===l-1){if(this.toPattern(s)===t.ASTERISK_ENCODING)return new Int32Array([a,d]);a+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,o=!o}throw new ut},t.prototype.toPattern=function(e){var r,i,s=0;try{for(var a=bx(e),o=a.next();!o.done;o=a.next()){var l=o.value;s+=l}}catch(w){r={error:w}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}for(var h=0,d=e.length,g=0;g<d;g++){var m=Math.round(e[g]*9/s);if(m<1||m>4)return-1;if((g&1)===0)for(var v=0;v<m;v++)h=h<<1|1;else h<<=m}return h},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new ut},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a>="a"&&a<="d"){if(s>=r-1)throw new Tt;var o=e.charAt(s+1),l="\0";switch(a){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Tt;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Tt;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new Tt;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Tt;break}i+=l,s++}else i+=a}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var s=1,a=0,o=r-1;o>=0;o--)a+=s*t.ALPHABET_STRING.indexOf(e.charAt(o)),++s>i&&(s=1);if(e.charAt(r)!==t.ALPHABET_STRING[a%47])throw new ur},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(Zn),Trt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Srt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},RO=function(n){Trt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var s,a,o=this.decodeStart(r),l=this.decodeEnd(r),h=new re;t.decodeMiddle(r,o[1],l[0],h);var d=h.toString(),g=null;i!=null&&(g=i.get(ln.ALLOWED_LENGTHS)),g==null&&(g=t.DEFAULT_ALLOWED_LENGTHS);var m=d.length,v=!1,w=0;try{for(var b=Srt(g),E=b.next();!E.done;E=b.next()){var S=E.value;if(m===S){v=!0;break}S>w&&(w=S)}}catch(k){s={error:k}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}if(!v&&m>w&&(v=!0),!v)throw new Tt;var T=[new Ot(o[1],e),new Ot(l[0],e)],I=new Nr(d,null,0,T,jt.ITF,new Date().getTime());return I},t.decodeMiddle=function(e,r,i,s){var a=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),o.fill(0),l.fill(0);r<i;){Zn.recordPattern(e,r,a);for(var h=0;h<5;h++){var d=2*h;o[h]=a[d],l[h]=a[d+1]}var g=t.decodeDigit(o);s.append(g.toString()),g=this.decodeDigit(l),s.append(g.toString()),a.forEach(function(m){r+=m})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var s=r-1;i>0&&s>=0&&!e.get(s);s--)i--;if(i!==0)throw new ut},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new ut;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(a){a instanceof ut&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var s=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-s,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var s=i.length,a=new Int32Array(s),o=e.getSize(),l=!1,h=0,d=r;a.fill(0);for(var g=r;g<o;g++)if(e.get(g)!==l)a[h]++;else{if(h===s-1){if(Zn.patternMatchVariance(a,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[d,g];d+=a[0]+a[1],Ze.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new ut},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,s=t.PATTERNS.length,a=0;a<s;a++){var o=t.PATTERNS[a],l=Zn.patternMatchVariance(e,o,t.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=a):l===r&&(i=-1)}if(i>=0)return i%10;throw new ut},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(Zn),Crt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lh=function(n){Crt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,s=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,s,!1,this.START_END_PATTERN,a);var o=i[0];s=i[1];var l=o-(s-o);l>=0&&(r=e.isRange(l,o,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,s){return this.findGuardPattern(e,r,i,s,new Int32Array(s.length))},t.findGuardPattern=function(e,r,i,s,a){var o=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var l=0,h=r,d=s.length,g=i,m=r;m<o;m++)if(e.get(m)!==g)a[l]++;else{if(l===d-1){if(Zn.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([h,m]);h+=a[0]+a[1];for(var v=a.slice(2,a.length),w=0;w<l-1;w++)a[w]=v[w];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,g=!g}throw new ut},t.decodeDigit=function(e,r,i,s){this.recordPattern(e,i,r);for(var a=this.MAX_AVG_VARIANCE,o=-1,l=s.length,h=0;h<l;h++){var d=s[h],g=Zn.patternMatchVariance(r,d,t.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,o=h)}if(o>=0)return o;throw new ut},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(Zn),Irt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rrt=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Ot((r[0]+r[1])/2,t),new Ot(s,t)],h=new Nr(a,null,0,l,jt.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<5&&l<o;d++){var g=Lh.decodeDigit(t,a,l,Lh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Irt(a)),v=m.next();!v.done;v=m.next()){var w=v.value;l+=w}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-d),d!==4&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==5)throw new ut;var b=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==b)throw new ut;return l},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new ut},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[wr.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),s=r%100,a=s<10?"0"+s:s.toString();return e+i+"."+a},n}(),Drt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ort=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Ot((r[0]+r[1])/2,t),new Ot(s,t)],h=new Nr(a,null,0,l,jt.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<2&&l<o;d++){var g=Lh.decodeDigit(t,a,l,Lh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Drt(a)),v=m.next();!v.done;v=m.next()){var w=v.value;l+=w}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-d),d!==1&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==2)throw new ut;if(parseInt(r.toString())%4!==h)throw new ut;return l},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[wr.ISSUE_NUMBER,parseInt(t)]])},n}(),Mrt=function(){function n(){}return n.decodeRow=function(t,e,r){var i=Lh.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new Rrt;return s.decodeRow(t,e,i)}catch{var a=new Ort;return a.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),Nrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xn=function(n){Nrt(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],s=new Int32Array(i.length),a=0;a<i.length;a++)s[a]=i[i.length-a-1];t.L_AND_G_PATTERNS[r]=s}return e}return t.prototype.decodeRow=function(e,r,i){var s=t.findStartGuardPattern(r),a=i==null?null:i.get(ln.NEED_RESULT_POINT_CALLBACK);if(a!=null){var o=new Ot((s[0]+s[1])/2,e);a.foundPossibleResultPoint(o)}var l=this.decodeMiddle(r,s,this.decodeRowStringBuffer),h=l.rowOffset,d=l.resultString;if(a!=null){var g=new Ot(h,e);a.foundPossibleResultPoint(g)}var m=t.decodeEnd(r,h);if(a!=null){var v=new Ot((m[0]+m[1])/2,e);a.foundPossibleResultPoint(v)}var w=m[1],b=w+(w-m[0]);if(b>=r.getSize()||!r.isRange(w,b,!1))throw new ut;var E=d.toString();if(E.length<8)throw new Tt;if(!t.checkChecksum(E))throw new ur;var S=(s[1]+s[0])/2,T=(m[1]+m[0])/2,I=this.getBarcodeFormat(),k=[new Ot(S,e),new Ot(T,e)],P=new Nr(E,null,0,k,I,new Date().getTime()),j=0;try{var M=Mrt.decodeRow(e,r,m[1]);P.putMetadata(wr.UPC_EAN_EXTENSION,M.getText()),P.putAllMetadata(M.getResultMetadata()),P.addResultPoints(M.getResultPoints()),j=M.getText().length}catch{}var C=i==null?null:i.get(ln.ALLOWED_EAN_EXTENSIONS);if(C!=null){var N=!1;for(var B in C)if(j.toString()===B){N=!0;break}if(!N)throw new ut}return I===jt.EAN_13||jt.UPC_A,P},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new Tt;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Lh),Prt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),DO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bw=function(n){Prt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0,v=0;v<6&&g<d;v++){var w=Xn.decodeDigit(e,h,g,Xn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);try{for(var b=(s=void 0,DO(h)),E=b.next();!E.done;E=b.next()){var S=E.value;g+=S}}catch(P){s={error:P}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}w>=10&&(m|=1<<5-v)}i=t.determineFirstDigit(i,m);var T=Xn.findGuardPattern(e,g,!0,Xn.MIDDLE_PATTERN,new Int32Array(Xn.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var v=0;v<6&&g<d;v++){var w=Xn.decodeDigit(e,h,g,Xn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var I=(o=void 0,DO(h)),k=I.next();!k.done;k=I.next()){var S=k.value;g+=S}}catch(M){o={error:M}}finally{try{k&&!k.done&&(l=I.return)&&l.call(I)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return jt.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ut},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Xn),krt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),OO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},MO=function(n){krt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0;m<4&&g<d;m++){var v=Xn.decodeDigit(e,h,g,Xn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var w=(s=void 0,OO(h)),b=w.next();!b.done;b=w.next()){var E=b.value;g+=E}}catch(k){s={error:k}}finally{try{b&&!b.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}}var S=Xn.findGuardPattern(e,g,!0,Xn.MIDDLE_PATTERN,new Int32Array(Xn.MIDDLE_PATTERN.length).fill(0));g=S[1];for(var m=0;m<4&&g<d;m++){var v=Xn.decodeDigit(e,h,g,Xn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var T=(o=void 0,OO(h)),I=T.next();!I.done;I=T.next()){var E=I.value;g+=E}}catch(j){o={error:j}}finally{try{I&&!I.done&&(l=T.return)&&l.call(T)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return jt.EAN_8},t}(Xn),Lrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),NO=function(n){Lrt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new bw,e}return t.prototype.getBarcodeFormat=function(){return jt.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new Nr(r.substring(1),null,null,e.getResultPoints(),jt.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ut},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Xn),Vrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Brt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},PO=function(n){Vrt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o=this.decodeMiddleCounters.map(function(E){return E});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),h=r[1],d=0,g=0;g<6&&h<l;g++){var m=t.decodeDigit(e,o,h,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(s=void 0,Brt(o)),w=v.next();!w.done;w=v.next()){var b=w.value;h+=b}}catch(E){s={error:E}}finally{try{w&&!w.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}m>=10&&(d|=1<<5-g)}return t.determineNumSysAndCheckDigit(new re(i),d),h},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Xn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){e.insert(0,"0"+i),e.append("0"+s);return}throw ut.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return jt.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new re;i.append(e.charAt(0));var s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Xn),Frt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ex=function(n){Frt(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(ln.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(jt.EAN_13)>-1&&s.push(new bw),i.indexOf(jt.UPC_A)>-1&&s.push(new NO),i.indexOf(jt.EAN_8)>-1&&s.push(new MO),i.indexOf(jt.UPC_E)>-1&&s.push(new PO)),s.length===0&&(s.push(new bw),s.push(new NO),s.push(new MO),s.push(new PO)),r.readers=s,r}return t.prototype.decodeRow=function(e,r,i){var s,a;try{for(var o=kO(this.readers),l=o.next();!l.done;l=o.next()){var h=l.value;try{var d=h.decodeRow(e,r,i),g=d.getBarcodeFormat()===jt.EAN_13&&d.getText().charAt(0)==="0",m=i==null?null:i.get(ln.POSSIBLE_FORMATS),v=m==null||m.includes(jt.UPC_A);if(g&&v){var w=d.getRawBytes(),b=new Nr(d.getText().substring(1),w,w?w.length:null,d.getResultPoints(),jt.UPC_A);return b.putAllMetadata(d.getResultMetadata()),b}return d}catch{}}}catch(E){s={error:E}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}throw new ut},t.prototype.reset=function(){var e,r;try{for(var i=kO(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;a.reset()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}(Zn),Urt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jrt=function(n){Urt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var s=this.getValidRowData(r);if(!s)throw new ut;var a=this.codaBarDecodeRow(s.row);if(!a)throw new ut;return new Nr(a,null,0,[new Ot(s.left,e),new Ot(s.right,e)],jt.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var s=r.lastIndexOf(!0);if(s<=i)return null;r=r.slice(i,s+1);for(var a=[],o=r[0],l=1,h=1;h<r.length;h++)r[h]===o?l++:(o=r[h],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:s}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(l,h){return(l+h)/2},0));e.length>0;){var s=e.splice(0,8).splice(0,7),a=s.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[a])}var o=r.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}(Zn),zrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jc=function(n){zrt(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(Zn.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new ut},t.count=function(e){return we.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]>s&&(s=r[a],i=a);e[i]++},t.decrement=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]<s&&(s=r[a],i=a);e[i]--},t.isFinderPattern=function(e){var r,i,s=e[0]+e[1],a=s+e[2]+e[3],o=s/a;if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var d=Hrt(e),g=d.next();!g.done;g=d.next()){var m=g.value;m>h&&(h=m),m<l&&(l=m)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return h<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(Zn),I1=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),_k=function(){function n(t,e,r,i,s){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Ot(r,s)),this.resultPoints.push(new Ot(i,s))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),Grt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rh=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,s,a=0;try{for(var o=Grt(t),l=o.next();!l.done;l=o.next()){var h=l.value;a+=h}}catch(T){i={error:T}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}for(var d=0,g=0,m=t.length,v=0;v<m-1;v++){var w=void 0;for(w=1,g|=1<<v;w<t[v];w++,g&=~(1<<v)){var b=n.combins(a-w-1,m-v-2);if(r&&g===0&&a-w-(m-v-1)>=m-v-1&&(b-=n.combins(a-w-(m-v),m-v-2)),m-v-1>1){for(var E=0,S=a-w-(m-v-2);S>e;S--)E+=n.combins(a-w-S-1,m-v-3);b-=E*(m-1-v)}else a-w>e&&b--;d+=b}a-=w}return d},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var s=1,a=1,o=t;o>r;o--)s*=o,a<=i&&(s/=a,a++);for(;a<=i;)s/=a,a++;return s},n}(),Wrt=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new hr(r),s=0,a=t[0],o=a.getRightChar().getValue(),l=11;l>=0;--l)(o&1<<l)!==0&&i.set(s),s++;for(var l=1;l<t.length;++l){for(var h=t[l],d=h.getLeftChar().getValue(),g=11;g>=0;--g)(d&1<<g)!==0&&i.set(s),s++;if(h.getRightChar()!==null)for(var m=h.getRightChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(s),s++}return i},n}(),Gc=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),nA=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),qrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$i=function(n){qrt(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(nA),Yrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wc=function(n){Yrt(t,n);function t(e,r,i){var s=n.call(this,e)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=r,s}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(nA),Xrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zu=function(n){Xrt(t,n);function t(e,r,i){var s=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new Tt;return s.firstDigit=r,s.secondDigit=i,s}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(nA),em=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Krt=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,s,a,o,l,h;if(!t)return null;if(t.length<2)throw new ut;var d=t.substring(0,2);try{for(var g=em(n.TWO_DIGIT_DATA_LENGTH),m=g.next();!m.done;m=g.next()){var v=m.value;if(v[0]===d)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,v[2],t):n.processFixedAI(2,v[1],t)}}catch(j){e={error:j}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(t.length<3)throw new ut;var w=t.substring(0,3);try{for(var b=em(n.THREE_DIGIT_DATA_LENGTH),E=b.next();!E.done;E=b.next()){var v=E.value;if(v[0]===w)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,v[2],t):n.processFixedAI(3,v[1],t)}}catch(j){i={error:j}}finally{try{E&&!E.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}try{for(var S=em(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=S.next();!T.done;T=S.next()){var v=T.value;if(v[0]===w)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(j){a={error:j}}finally{try{T&&!T.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(t.length<4)throw new ut;var I=t.substring(0,4);try{for(var k=em(n.FOUR_DIGIT_DATA_LENGTH),P=k.next();!P.done;P=k.next()){var v=P.value;if(v[0]===I)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(j){l={error:j}}finally{try{P&&!P.done&&(h=k.return)&&h.call(k)}finally{if(l)throw l.error}}throw new ut},n.processFixedAI=function(t,e,r){if(r.length<t)throw new ut;var i=r.substring(0,t);if(r.length<t+e)throw new ut;var s=r.substring(t,t+e),a=r.substring(t+e),o="("+i+")"+s,l=n.parseFieldsInGeneralPurpose(a);return l==null?o:o+l},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),s;r.length<t+e?s=r.length:s=t+e;var a=r.substring(t,s),o=r.substring(s),l="("+i+")"+a,h=n.parseFieldsInGeneralPurpose(o);return h==null?l:l+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Lm=function(){function n(t){this.buffer=new re,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var s=this.decodeGeneralPurposeField(r,i),a=Krt.parseFieldsInGeneralPurpose(s.getNewString());if(a!=null&&t.append(a),s.isRemaining()?i=""+s.getRemainingValue():i=null,r===s.getNewPosition())break;r=s.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new zu(this.information.getSize(),zu.FNC1,zu.FNC1):new zu(this.information.getSize(),e-1,zu.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,s=(r-8)%11;return new zu(t+7,i,s)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,s=0;s<r;++s)t.get(e+s)&&(i|=1<<r-s-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Wc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Wc(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new Wc(this.current.getPosition(),this.buffer.toString()):e=new Wc(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Gc(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new Wc(this.current.getPosition(),this.buffer.toString());return new Gc(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Gc(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Wc(this.current.getPosition(),this.buffer.toString());return new Gc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Gc(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Wc(this.current.getPosition(),this.buffer.toString());return new Gc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Gc(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new $i(t+5,$i.FNC1);if(e>=5&&e<15)return new $i(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new $i(t+7,""+(r+1));if(r>=90&&r<116)return new $i(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Tt}return new $i(t+8,s)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new $i(t+5,$i.FNC1);if(e>=5&&e<15)return new $i(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new $i(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new ap("Decoding invalid alphanumeric value: "+r)}return new $i(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),xk=function(){function n(t){this.information=t,this.generalDecoder=new Lm(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),$rt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),es=function(n){$rt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var s=0;s<4;++s){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,s=0;s<13;s++){var a=e.charAt(s+r).charCodeAt(0)-48;i+=(s&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(xk),Qrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zrt=function(n){Qrt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new re;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(es),Jrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tit=function(n){Jrt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new re;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(xk),eit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vm=function(n){eit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,s);for(var a=this.checkWeight(s),o=1e5,l=0;l<5;++l)a/o===0&&e.append("0"),o/=10;e.append(a)},t}(es),nit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wk=function(n){nit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+Vm.GTIN_SIZE+t.WEIGHT_SIZE)throw new ut;var e=new re;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+Vm.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(Vm),rit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iit=function(n){rit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(wk),sit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ait=function(n){sit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(wk),oit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cit=function(n){oit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+es.GTIN_SIZE)throw new ut;var e=new re;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+es.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+es.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(es),lit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uit=function(n){lit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+es.GTIN_SIZE)throw new ut;var e=new re;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+es.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+es.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+es.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(s.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(es),hit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ao=function(n){hit(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.dateCode=i,s.firstAIdigits=r,s}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new ut;var e=new re;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var s=i%32;i/=32;var a=i%12+1;i/=12;var o=i;o/10===0&&e.append("0"),e.append(o),a/10===0&&e.append("0"),e.append(a),s/10===0&&e.append("0"),e.append(s)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(Vm);function fit(n){try{if(n.get(1))return new Zrt(n);if(!n.get(2))return new tit(n);var t=Lm.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new iit(n);case 5:return new ait(n)}var e=Lm.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new cit(n);case 13:return new uit(n)}var r=Lm.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ao(n,"310","11");case 57:return new Ao(n,"320","11");case 58:return new Ao(n,"310","13");case 59:return new Ao(n,"320","13");case 60:return new Ao(n,"310","15");case 61:return new Ao(n,"320","15");case 62:return new Ao(n,"310","17");case 63:return new Ao(n,"320","17")}}catch(i){throw console.log(i),new ap("unknown decoder: "+n)}}var LO=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),dit=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,s){e.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),git=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),To=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pit=function(n){git(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(o){if(o instanceof ut){if(!this.pairs.length)throw new ut;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(e,!1),s){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new ut},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,s,a=r;a<this.rows.length;a++){var o=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,To(e)),h=l.next();!h.done;h=l.next()){var d=h.value;this.pairs.push(d.getPairs())}}catch(m){i={error:m}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(e);g.push(o);try{return this.checkRows(g,a+1)}catch(m){console.log(m)}}}throw new ut},t.isValidSequence=function(e){var r,i;try{for(var s=To(t.FINDER_PATTERN_SEQUENCES),a=s.next();!a.done;a=s.next()){var o=a.value;if(!(e.length>o.length)){for(var l=!0,h=0;h<e.length;h++)if(e[h].getFinderPattern().getValue()!==o[h]){l=!1;break}if(l)return!0}}}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,s=!1,a=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}s=o.isEquivalent(this.pairs),i++}a||s||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new dit(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,s,a,o,l,h;try{for(var d=To(r),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.getPairs().length!==e.length){var v=!0;try{for(var w=(a=void 0,To(m.getPairs())),b=w.next();!b.done;b=w.next()){var E=b.value,S=!1;try{for(var T=(l=void 0,To(e)),I=T.next();!I.done;I=T.next()){var k=I.value;if(LO.equals(E,k)){S=!0;break}}}catch(P){l={error:P}}finally{try{I&&!I.done&&(h=T.return)&&h.call(T)}finally{if(l)throw l.error}}S||(v=!1)}}catch(P){a={error:P}}finally{try{b&&!b.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}}}}catch(P){i={error:P}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,s,a,o,l,h;try{for(var d=To(r),g=d.next();!g.done;g=d.next()){var m=g.value,v=!0;try{for(var w=(a=void 0,To(e)),b=w.next();!b.done;b=w.next()){var E=b.value,S=!1;try{for(var T=(l=void 0,To(m.getPairs())),I=T.next();!I.done;I=T.next()){var k=I.value;if(E.equals(k)){S=!0;break}}}catch(P){l={error:P}}finally{try{I&&!I.done&&(h=T.return)&&h.call(T)}finally{if(l)throw l.error}}if(!S){v=!1;break}}}catch(P){a={error:P}}finally{try{b&&!b.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}if(v)return!0}}catch(P){i={error:P}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=Wrt.buildBitArray(e),i=fit(r),s=i.parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],o[0],o[1]];return new Nr(s,null,null,l,jt.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var s=i.getChecksumPortion(),a=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);s+=l.getLeftChar().getChecksumPortion(),a++;var h=l.getRightChar();h!=null&&(s+=h.getChecksumPortion(),a++)}s%=211;var d=211*(a-4)+s;return d===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var s=r.length%2===0;this.startFromEven&&(s=!s);var a,o=!0,l=-1;do this.findNextPair(e,r,l),a=this.parseFoundFinderPattern(e,i,s),a===null?l=t.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);var h=this.decodeDataCharacter(e,a,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ut;var d;try{d=this.decodeDataCharacter(e,a,s,!1)}catch(g){d=null,console.log(g)}return new LO(h,d,a,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var a=e.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var l=r[r.length-1];o=l.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var d=!1;o<a&&(d=!e.get(o),!!d);)o++;for(var g=0,m=o,v=o;v<a;v++)if(e.get(v)!==d)s[g]++;else{if(g===3){if(h&&t.reverseCounters(s),t.isFinderPattern(s)){this.startEnd[0]=m,this.startEnd[1]=v;return}h&&t.reverseCounters(s),m+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,g--}else g++;s[g]=1,d=!d}throw new ut},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var s=e[i];e[i]=e[r-i-1],e[r-i-1]=s}},t.prototype.parseFoundFinderPattern=function(e,r,i){var s,a,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!e.get(l);)l--;l++,s=this.startEnd[0]-l,a=l,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),s=o-this.startEnd[1];var h=this.getDecodeFinderCounters();Ze.arraycopy(h,0,h,1,h.length-1),h[0]=s;var d;try{d=this.parseFinderValue(h,t.FINDER_PATTERNS)}catch{return null}return new _k(d,[a,o],a,o,r)},t.prototype.decodeDataCharacter=function(e,r,i,s){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(s)t.recordPatternInReverse(e,r.getStartEnd()[0],a);else{t.recordPattern(e,r.getStartEnd()[1],a);for(var l=0,h=a.length-1;l<h;l++,h--){var d=a[l];a[l]=a[h],a[h]=d}}var g=17,m=we.sum(new Int32Array(a))/g,v=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-v)/v>.3)throw new ut;for(var w=this.getOddCounts(),b=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var T=1*a[l]/m,I=T+.5;if(I<1){if(T<.3)throw new ut;I=1}else if(I>8){if(T>8.7)throw new ut;I=8}var k=l/2;(l&1)===0?(w[k]=I,E[k]=T-I):(b[k]=I,S[k]=T-I)}this.adjustOddEvenCounts(g);for(var P=4*r.getValue()+(i?0:2)+(s?0:1)-1,j=0,M=0,l=w.length-1;l>=0;l--){if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[P][2*l];M+=w[l]*C}j+=w[l]}for(var N=0,l=b.length-1;l>=0;l--)if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[P][2*l+1];N+=b[l]*C}var B=M+N;if((j&1)!==0||j>13||j<4)throw new ut;var z=(13-j)/2,G=t.SYMBOL_WIDEST[z],F=9-G,xt=rh.getRSSvalue(w,G,!0),bt=rh.getRSSvalue(b,F,!1),K=t.EVEN_TOTAL_SUBSET[z],ct=t.GSUM[z],vt=xt*K+bt+ct;return new I1(vt,B)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=we.sum(new Int32Array(this.getOddCounts())),i=we.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1;r>13?a=!0:r<4&&(s=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var h=r+i-e,d=(r&1)===1,g=(i&1)===0;if(h===1)if(d){if(g)throw new ut;a=!0}else{if(!g)throw new ut;l=!0}else if(h===-1)if(d){if(g)throw new ut;s=!0}else{if(!g)throw new ut;o=!0}else if(h===0){if(d){if(!g)throw new ut;r<i?(s=!0,l=!0):(a=!0,o=!0)}else if(g)throw new ut}else throw new ut;if(s){if(a)throw new ut;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new ut;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Jc),mit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yit=function(n){mit(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.count=0,s.finderPattern=i,s}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(I1),vit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ax=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VO=function(n){vit(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,h),r.reverse();var d=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var g=Ax(this.possibleLeftPairs),m=g.next();!m.done;m=g.next()){var v=m.value;if(v.getCount()>1)try{for(var w=(o=void 0,Ax(this.possibleRightPairs)),b=w.next();!b.done;b=w.next()){var E=b.value;if(E.getCount()>1&&t.checkChecksum(v,E))return t.constructResult(v,E)}}catch(S){o={error:S}}finally{try{b&&!b.done&&(l=w.return)&&l.call(w)}finally{if(o)throw o.error}}}}catch(S){s={error:S}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}throw new ut},t.addOrTally=function(e,r){var i,s;if(r!=null){var a=!1;try{for(var o=Ax(e),l=o.next();!l.done;l=o.next()){var h=l.value;if(h.getValue()===r.getValue()){h.incrementCount(),a=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}a||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),s=new String(i).toString(),a=new re,o=13-s.length;o>0;o--)a.append("0");a.append(s);for(var l=0,o=0;o<13;o++){var h=a.charAt(o).charCodeAt(0)-48;l+=(o&1)===0?3*h:h}l=10-l%10,l===10&&(l=0),a.append(l.toString());var d=e.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new Nr(a.toString(),null,0,[d[0],d[1],g[0],g[1]],jt.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},t.prototype.decodePair=function(e,r,i,s){try{var a=this.findFinderPattern(e,r),o=this.parseFoundFinderPattern(e,i,r,a),l=s==null?null:s.get(ln.NEED_RESULT_POINT_CALLBACK);if(l!=null){var h=(a[0]+a[1])/2;r&&(h=e.getSize()-1-h),l.foundPossibleResultPoint(new Ot(h,i))}var d=this.decodeDataCharacter(e,o,!0),g=this.decodeDataCharacter(e,o,!1);return new yit(1597*d.getValue()+g.getValue(),d.getChecksumPortion()+4*g.getChecksumPortion(),o)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(i)Zn.recordPatternInReverse(e,r.getStartEnd()[0],s);else{Zn.recordPattern(e,r.getStartEnd()[1]+1,s);for(var o=0,l=s.length-1;o<l;o++,l--){var h=s[o];s[o]=s[l],s[l]=h}}for(var d=i?16:15,g=we.sum(new Int32Array(s))/d,m=this.getOddCounts(),v=this.getEvenCounts(),w=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<s.length;o++){var E=s[o]/g,S=Math.floor(E+.5);S<1?S=1:S>8&&(S=8);var T=Math.floor(o/2);(o&1)===0?(m[T]=S,w[T]=E-S):(v[T]=S,b[T]=E-S)}this.adjustOddEvenCounts(i,d);for(var I=0,k=0,o=m.length-1;o>=0;o--)k*=9,k+=m[o],I+=m[o];for(var P=0,j=0,o=v.length-1;o>=0;o--)P*=9,P+=v[o],j+=v[o];var M=k+3*P;if(i){if((I&1)!==0||I>12||I<4)throw new ut;var C=(12-I)/2,N=t.OUTSIDE_ODD_WIDEST[C],B=9-N,z=rh.getRSSvalue(m,N,!1),G=rh.getRSSvalue(v,B,!0),F=t.OUTSIDE_EVEN_TOTAL_SUBSET[C],xt=t.OUTSIDE_GSUM[C];return new I1(z*F+G+xt,M)}else{if((j&1)!==0||j>10||j<4)throw new ut;var C=(10-j)/2,N=t.INSIDE_ODD_WIDEST[C],B=9-N,z=rh.getRSSvalue(m,N,!0),G=rh.getRSSvalue(v,B,!1),bt=t.INSIDE_ODD_TOTAL_SUBSET[C],xt=t.INSIDE_GSUM[C];return new I1(G*bt+z+xt,M)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),a=!1,o=0;o<s&&(a=!e.get(o),r!==a);)o++;for(var l=0,h=o,d=o;d<s;d++)if(e.get(d)!==a)i[l]++;else{if(l===3){if(Jc.isFinderPattern(i))return[h,d];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new ut},t.prototype.parseFoundFinderPattern=function(e,r,i,s){for(var a=e.get(s[0]),o=s[0]-1;o>=0&&a!==e.get(o);)o--;o++;var l=s[0]-o,h=this.getDecodeFinderCounters(),d=new Int32Array(h.length);Ze.arraycopy(h,0,d,1,h.length-1),d[0]=l;var g=this.parseFinderValue(d,t.FINDER_PATTERNS),m=o,v=s[1];return i&&(m=e.getSize()-1-m,v=e.getSize()-1-v),new _k(g,[o,s[1]],m,v,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=we.sum(new Int32Array(this.getOddCounts())),s=we.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,l=!1,h=!1;e?(i>12?o=!0:i<4&&(a=!0),s>12?h=!0:s<4&&(l=!0)):(i>11?o=!0:i<5&&(a=!0),s>10?h=!0:s<4&&(l=!0));var d=i+s-r,g=(i&1)===(e?1:0),m=(s&1)===1;if(d===1)if(g){if(m)throw new ut;o=!0}else{if(!m)throw new ut;h=!0}else if(d===-1)if(g){if(m)throw new ut;a=!0}else{if(!m)throw new ut;l=!0}else if(d===0){if(g){if(!m)throw new ut;i<s?(a=!0,h=!0):(o=!0,l=!0)}else if(m)throw new ut}else throw new ut;if(a){if(o)throw new ut;Jc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Jc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(h)throw new ut;Jc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Jc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Jc),_it=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ld=function(n){_it(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(ln.POSSIBLE_FORMATS):null,s=e&&e.get(ln.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=e&&e.get(ln.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(jt.EAN_13)||i.includes(jt.UPC_A)||i.includes(jt.EAN_8)||i.includes(jt.UPC_E))&&r.readers.push(new Ex(e)),i.includes(jt.CODE_39)&&r.readers.push(new CO(s,a)),i.includes(jt.CODE_93)&&r.readers.push(new IO),i.includes(jt.CODE_128)&&r.readers.push(new SO),i.includes(jt.ITF)&&r.readers.push(new RO),i.includes(jt.CODABAR)&&r.readers.push(new jrt),i.includes(jt.RSS_14)&&r.readers.push(new VO),i.includes(jt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new pit))),r.readers.length===0&&(r.readers.push(new Ex(e)),r.readers.push(new CO),r.readers.push(new IO),r.readers.push(new Ex(e)),r.readers.push(new SO),r.readers.push(new RO),r.readers.push(new VO)),r}return t.prototype.decodeRow=function(e,r,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(e,r,i)}catch{}throw new ut},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(Zn),xit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){xit(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new Ld(r),e,r)||this}return t})(Kh);var BO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ce=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Ee=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),wit=function(){function n(t,e,r,i,s,a){var o,l;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=a;var h=0,d=a.getECCodewords(),g=a.getECBlocks();try{for(var m=BO(g),v=m.next();!v.done;v=m.next()){var w=v.value;h+=w.getCount()*(w.getDataCodewords()+d)}}catch(b){o={error:b}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new Tt;try{for(var s=BO(n.VERSIONS),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.symbolSizeRows===t&&o.symbolSizeColumns===e)return o}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}throw new Tt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Ce(5,new Ee(1,3))),new n(2,12,12,10,10,new Ce(7,new Ee(1,5))),new n(3,14,14,12,12,new Ce(10,new Ee(1,8))),new n(4,16,16,14,14,new Ce(12,new Ee(1,12))),new n(5,18,18,16,16,new Ce(14,new Ee(1,18))),new n(6,20,20,18,18,new Ce(18,new Ee(1,22))),new n(7,22,22,20,20,new Ce(20,new Ee(1,30))),new n(8,24,24,22,22,new Ce(24,new Ee(1,36))),new n(9,26,26,24,24,new Ce(28,new Ee(1,44))),new n(10,32,32,14,14,new Ce(36,new Ee(1,62))),new n(11,36,36,16,16,new Ce(42,new Ee(1,86))),new n(12,40,40,18,18,new Ce(48,new Ee(1,114))),new n(13,44,44,20,20,new Ce(56,new Ee(1,144))),new n(14,48,48,22,22,new Ce(68,new Ee(1,174))),new n(15,52,52,24,24,new Ce(42,new Ee(2,102))),new n(16,64,64,14,14,new Ce(56,new Ee(2,140))),new n(17,72,72,16,16,new Ce(36,new Ee(4,92))),new n(18,80,80,18,18,new Ce(48,new Ee(4,114))),new n(19,88,88,20,20,new Ce(56,new Ee(4,144))),new n(20,96,96,22,22,new Ce(68,new Ee(4,174))),new n(21,104,104,24,24,new Ce(56,new Ee(6,136))),new n(22,120,120,18,18,new Ce(68,new Ee(6,175))),new n(23,132,132,20,20,new Ce(62,new Ee(8,163))),new n(24,144,144,22,22,new Ce(62,new Ee(8,156),new Ee(2,155))),new n(25,8,18,6,16,new Ce(7,new Ee(1,5))),new n(26,8,32,6,14,new Ce(11,new Ee(1,10))),new n(27,12,26,10,24,new Ce(14,new Ee(1,16))),new n(28,12,36,10,16,new Ce(18,new Ee(1,22))),new n(29,16,36,14,16,new Ce(24,new Ee(1,32))),new n(30,16,48,14,22,new Ce(28,new Ee(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),bit=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new Tt;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Js(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return wit.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,s=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),o=!1,l=!1,h=!1,d=!1;do if(r===s&&i===0&&!o)t[e++]=this.readCorner1(s,a)&255,r-=2,i+=2,o=!0;else if(r===s-2&&i===0&&(a&3)!==0&&!l)t[e++]=this.readCorner2(s,a)&255,r-=2,i+=2,l=!0;else if(r===s+4&&i===2&&(a&7)===0&&!h)t[e++]=this.readCorner3(s,a)&255,r-=2,i+=2,h=!0;else if(r===s-2&&i===0&&(a&7)===4&&!d)t[e++]=this.readCorner4(s,a)&255,r-=2,i+=2,d=!0;else{do r<s&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r-=2,i+=2;while(r>=0&&i<a);r+=1,i+=3;do r>=0&&i<a&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r+=2,i-=2;while(r<s&&i>=0);r+=3,i+=1}while(r<s||i<a);if(e!==this.version.getTotalCodewords())throw new Tt;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var s=0;return this.readModule(t-2,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-2,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e,r,i)&&(s|=1),s<<=1,this.readModule(t,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t,e,r,i)&&(s|=1),s},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new Ht("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),a=e/i|0,o=r/s|0,l=a*i,h=o*s,d=new Js(h,l),g=0;g<a;++g)for(var m=g*i,v=0;v<o;++v)for(var w=v*s,b=0;b<i;++b)for(var E=g*(i+2)+1+b,S=m+b,T=0;T<s;++T){var I=v*(s+2)+1+T;if(t.get(I,E)){var k=w+T;d.set(k,S)}}return d},n}(),FO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Eit=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,s,a,o=e.getECBlocks(),l=0,h=o.getECBlocks();try{for(var d=FO(h),g=d.next();!g.done;g=d.next()){var m=g.value;l+=m.getCount()}}catch(xt){r={error:xt}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var v=new Array(l),w=0;try{for(var b=FO(h),E=b.next();!E.done;E=b.next())for(var m=E.value,S=0;S<m.getCount();S++){var T=m.getDataCodewords(),I=o.getECCodewords()+T;v[w++]=new n(T,new Uint8Array(I))}}catch(xt){s={error:xt}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}for(var k=v[0].codewords.length,P=k-o.getECCodewords(),j=P-1,M=0,S=0;S<j;S++)for(var C=0;C<w;C++)v[C].codewords[S]=t[M++];for(var N=e.getVersionNumber()===24,B=N?8:w,C=0;C<B;C++)v[C].codewords[P-1]=t[M++];for(var z=v[0].codewords.length,S=P;S<z;S++)for(var C=0;C<w;C++){var G=N?(C+8)%w:C,F=N&&G>7?S-1:S;v[G].codewords[F]=t[M++]}if(M!==t.length)throw new Ht;return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),bk=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new Ht(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,s=this.bytes;if(r>0){var a=8-r,o=t<a?t:a,l=a-o,h=255>>8-o<<l;e=(s[i]&h)>>l,t-=o,r+=o,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|s[i]&255,i++,t-=8;if(t>0){var l=8-t,h=255>>l<<l;e=e<<t|(s[i]&h)>>l,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),qn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(qn||(qn={}));var Ait=function(){function n(){}return n.decode=function(t){var e=new bk(t),r=new re,i=new re,s=new Array,a=qn.ASCII_ENCODE;do if(a===qn.ASCII_ENCODE)a=this.decodeAsciiSegment(e,r,i);else{switch(a){case qn.C40_ENCODE:this.decodeC40Segment(e,r);break;case qn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case qn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case qn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case qn.BASE256_ENCODE:this.decodeBase256Segment(e,r,s);break;default:throw new Tt}a=qn.ASCII_ENCODE}while(a!==qn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new _y(t,r.toString(),s.length===0?null:s,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var s=t.readBits(8);if(s===0)throw new Tt;if(s<=128)return i&&(s+=128),e.append(String.fromCharCode(s-1)),qn.ASCII_ENCODE;if(s===129)return qn.PAD_ENCODE;if(s<=229){var a=s-130;a<10&&e.append("0"),e.append(""+a)}else switch(s){case 230:return qn.C40_ENCODE;case 231:return qn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return qn.ANSIX12_ENCODE;case 239:return qn.TEXT_ENCODE;case 240:return qn.EDIFACT_ENCODE;case 241:break;default:if(s!==254||t.available()!==0)throw new Tt;break}}while(t.available()>0);return qn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new Tt;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new Tt}s=0;break;case 3:r?(e.append(String.fromCharCode(l+224)),r=!1):e.append(String.fromCharCode(l+96)),s=0;break;default:throw new Tt}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new Tt;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new Tt}s=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h),s=0}else throw new Tt;break;default:throw new Tt}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var s=0;s<3;s++){var a=r[s];switch(a){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(a<14)e.append(String.fromCharCode(a+44));else if(a<40)e.append(String.fromCharCode(a+51));else throw new Tt;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,s=Math.floor(i/1600);r[0]=s,i-=s*1600,s=Math.floor(i/40),r[1]=s,r[2]=i-s*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var s=8-t.getBitOffset();s!==8&&t.readBits(s);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),s=this.unrandomize255State(t.readBits(8),i++),a;if(s===0?a=t.available()/8|0:s<250?a=s:a=250*(s-249)+this.unrandomize255State(t.readBits(8),i++),a<0)throw new Tt;for(var o=new Uint8Array(a),l=0;l<a;l++){if(t.available()<8)throw new Tt;o[l]=this.unrandomize255State(t.readBits(8),i++)}r.push(o);try{e.append(ji.decode(o,ye.ISO88591))}catch(h){throw new ap("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),Tit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sit=function(){function n(){this.rsDecoder=new xy($r.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new bit(t),s=i.getVersion(),a=i.readCodewords(),o=Eit.getDataBlocks(a,s),l=0;try{for(var h=Tit(o),d=h.next();!d.done;d=h.next()){var g=d.value;l+=g.getNumDataCodewords()}}catch(I){e={error:I}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var m=new Uint8Array(l),v=o.length,w=0;w<v;w++){var b=o[w],E=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(E,S);for(var T=0;T<S;T++)m[T*v+w]=E[T]}return Ait.decode(m)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new ur}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Cit=function(){function n(t){this.image=t,this.rectangleDetector=new xw(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new ut;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],s=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(s,a)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var h=n.sampleGrid(this.image,r,i,s,a,o,l);return new tA(h,[r,i,s,a])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),s=(e.getY()-t.getY())/(r+1);return new Ot(t.getX()+i,t.getY()+s)},n.moveAway=function(t,e,r){var i=t.getX(),s=t.getY();return i<e?i-=1:i+=1,s<r?s-=1:s+=1,new Ot(i,s)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],s=t[2],a=this.transitionsBetween(e,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,s),h=this.transitionsBetween(s,e),d=a,g=[s,e,r,i];return d>o&&(d=o,g[0]=e,g[1]=r,g[2]=i,g[3]=s),d>l&&(d=l,g[0]=r,g[1]=i,g[2]=s,g[3]=e),d>h&&(g[0]=i,g[1]=s,g[2]=e,g[3]=r),g},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=n.shiftPoint(r,i,(a+1)*4),l=n.shiftPoint(i,r,(a+1)*4),h=this.transitionsBetween(o,e),d=this.transitionsBetween(l,s);return h<d?(t[0]=e,t[1]=r,t[2]=i,t[3]=s):(t[0]=r,t[1]=i,t[2]=s,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=this.transitionsBetween(r,s),l=n.shiftPoint(e,r,(o+1)*4),h=n.shiftPoint(i,r,(a+1)*4);a=this.transitionsBetween(l,s),o=this.transitionsBetween(h,s);var d=new Ot(s.getX()+(i.getX()-r.getX())/(a+1),s.getY()+(i.getY()-r.getY())/(a+1)),g=new Ot(s.getX()+(e.getX()-r.getX())/(o+1),s.getY()+(e.getY()-r.getY())/(o+1));if(!this.isValid(d))return this.isValid(g)?g:null;if(!this.isValid(g))return d;var m=this.transitionsBetween(l,d)+this.transitionsBetween(h,d),v=this.transitionsBetween(l,g)+this.transitionsBetween(h,g);return m>v?d:g},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s)+1,o=this.transitionsBetween(i,s)+1,l=n.shiftPoint(e,r,o*4),h=n.shiftPoint(i,r,a*4);a=this.transitionsBetween(l,s)+1,o=this.transitionsBetween(h,s)+1,(a&1)===1&&(a+=1),(o&1)===1&&(o+=1);var d=(e.getX()+r.getX()+i.getX()+s.getX())/4,g=(e.getY()+r.getY()+i.getY()+s.getY())/4;e=n.moveAway(e,d,g),r=n.moveAway(r,d,g),i=n.moveAway(i,d,g),s=n.moveAway(s,d,g);var m,v;return l=n.shiftPoint(e,r,o*4),l=n.shiftPoint(l,s,a*4),m=n.shiftPoint(r,e,o*4),m=n.shiftPoint(m,i,a*4),h=n.shiftPoint(i,s,o*4),h=n.shiftPoint(h,r,a*4),v=n.shiftPoint(s,i,o*4),v=n.shiftPoint(v,e,a*4),[l,m,h,v]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,s,a,o){var l=eA.getInstance();return l.sampleGrid(t,a,o,.5,.5,a-.5,.5,a-.5,o-.5,.5,o-.5,e.getX(),e.getY(),s.getX(),s.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),s=Math.trunc(e.getX()),a=Math.trunc(e.getY()),o=Math.abs(a-i)>Math.abs(s-r);if(o){var l=r;r=i,i=l,l=s,s=a,a=l}for(var h=Math.abs(s-r),d=Math.abs(a-i),g=-h/2,m=i<a?1:-1,v=r<s?1:-1,w=0,b=this.image.get(o?i:r,o?r:i),E=r,S=i;E!==s;E+=v){var T=this.image.get(o?S:E,o?E:S);if(T!==b&&(w++,b=T),g+=d,g>0){if(S===a)break;S+=m,g-=h}}return w},n}(),Ew=function(){function n(){this.decoder=new Sit}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(ln.PURE_BARCODE)){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(s),i=n.NO_POINTS}else{var a=new Cit(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var o=r.getRawBytes(),l=new Nr(r.getText(),o,8*o.length,i,jt.DATA_MATRIX,Ze.currentTimeMillis()),h=r.getByteSegments();h!=null&&l.putMetadata(wr.BYTE_SEGMENTS,h);var d=r.getECLevel();return d!=null&&l.putMetadata(wr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0],h=(l-o+1)/i,d=(a-s+1)/i;if(h<=0||d<=0)throw new ut;var g=i/2;s+=g,o+=g;for(var m=new Js(h,d),v=0;v<d;v++)for(var w=s+v*i,b=0;b<h;b++)t.get(o+b*i,w)&&m.set(b,v);return m},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],s=t[1];i<r&&e.get(i,s);)i++;if(i===r)throw new ut;var a=i-t[0];if(a===0)throw new ut;return a},n.NO_POINTS=[],n}(),Iit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Iit(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Ew,e)||this}return t})(Kh);var ih;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(ih||(ih={}));var Rit=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Qi(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new Ht;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(ih.L,"L",1),n.M=new n(ih.M,"M",0),n.Q=new n(ih.Q,"Q",3),n.H=new n(ih.H,"H",2),n}(),Dit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ek=function(){function n(t){this.errorCorrectionLevel=Rit.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return oe.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,s=Number.MAX_SAFE_INTEGER,a=0;try{for(var o=Dit(n.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var h=l.value,d=h[0];if(d===t||d===e)return new n(h[1]);var g=n.numBitsDiffering(t,d);g<s&&(a=h[1],s=g),t!==e&&(g=n.numBitsDiffering(e,d),g<s&&(a=h[1],s=g))}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s<=3?new n(a):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Oit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var s=Oit(i),a=s.next();!a.done;a=s.next()){var o=a.value;r+=o.getCount()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),H=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Mit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_l=function(){function n(t,e){for(var r,i,s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=s;var o=0,l=s[0].getECCodewordsPerBlock(),h=s[0].getECBlocks();try{for(var d=Mit(h),g=d.next();!g.done;g=d.next()){var m=g.value;o+=m.getCount()*(m.getDataCodewords()+l)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new Tt;try{return this.getVersionForNumber((t-17)/4)}catch{throw new Tt}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new Ht;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var s=n.VERSION_DECODE_INFO[i];if(s===t)return n.getVersionForNumber(i+7);var a=Ek.numBitsDiffering(t,s);a<e&&(r=i+7,e=a)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new Js(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var s=this.alignmentPatternCenters[i]-2,a=0;a<r;a++)i===0&&(a===0||a===r-1)||i===r-1&&a===0||e.setRegion(this.alignmentPatternCenters[a]-2,s,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new tt(7,new H(1,19)),new tt(10,new H(1,16)),new tt(13,new H(1,13)),new tt(17,new H(1,9))),new n(2,Int32Array.from([6,18]),new tt(10,new H(1,34)),new tt(16,new H(1,28)),new tt(22,new H(1,22)),new tt(28,new H(1,16))),new n(3,Int32Array.from([6,22]),new tt(15,new H(1,55)),new tt(26,new H(1,44)),new tt(18,new H(2,17)),new tt(22,new H(2,13))),new n(4,Int32Array.from([6,26]),new tt(20,new H(1,80)),new tt(18,new H(2,32)),new tt(26,new H(2,24)),new tt(16,new H(4,9))),new n(5,Int32Array.from([6,30]),new tt(26,new H(1,108)),new tt(24,new H(2,43)),new tt(18,new H(2,15),new H(2,16)),new tt(22,new H(2,11),new H(2,12))),new n(6,Int32Array.from([6,34]),new tt(18,new H(2,68)),new tt(16,new H(4,27)),new tt(24,new H(4,19)),new tt(28,new H(4,15))),new n(7,Int32Array.from([6,22,38]),new tt(20,new H(2,78)),new tt(18,new H(4,31)),new tt(18,new H(2,14),new H(4,15)),new tt(26,new H(4,13),new H(1,14))),new n(8,Int32Array.from([6,24,42]),new tt(24,new H(2,97)),new tt(22,new H(2,38),new H(2,39)),new tt(22,new H(4,18),new H(2,19)),new tt(26,new H(4,14),new H(2,15))),new n(9,Int32Array.from([6,26,46]),new tt(30,new H(2,116)),new tt(22,new H(3,36),new H(2,37)),new tt(20,new H(4,16),new H(4,17)),new tt(24,new H(4,12),new H(4,13))),new n(10,Int32Array.from([6,28,50]),new tt(18,new H(2,68),new H(2,69)),new tt(26,new H(4,43),new H(1,44)),new tt(24,new H(6,19),new H(2,20)),new tt(28,new H(6,15),new H(2,16))),new n(11,Int32Array.from([6,30,54]),new tt(20,new H(4,81)),new tt(30,new H(1,50),new H(4,51)),new tt(28,new H(4,22),new H(4,23)),new tt(24,new H(3,12),new H(8,13))),new n(12,Int32Array.from([6,32,58]),new tt(24,new H(2,92),new H(2,93)),new tt(22,new H(6,36),new H(2,37)),new tt(26,new H(4,20),new H(6,21)),new tt(28,new H(7,14),new H(4,15))),new n(13,Int32Array.from([6,34,62]),new tt(26,new H(4,107)),new tt(22,new H(8,37),new H(1,38)),new tt(24,new H(8,20),new H(4,21)),new tt(22,new H(12,11),new H(4,12))),new n(14,Int32Array.from([6,26,46,66]),new tt(30,new H(3,115),new H(1,116)),new tt(24,new H(4,40),new H(5,41)),new tt(20,new H(11,16),new H(5,17)),new tt(24,new H(11,12),new H(5,13))),new n(15,Int32Array.from([6,26,48,70]),new tt(22,new H(5,87),new H(1,88)),new tt(24,new H(5,41),new H(5,42)),new tt(30,new H(5,24),new H(7,25)),new tt(24,new H(11,12),new H(7,13))),new n(16,Int32Array.from([6,26,50,74]),new tt(24,new H(5,98),new H(1,99)),new tt(28,new H(7,45),new H(3,46)),new tt(24,new H(15,19),new H(2,20)),new tt(30,new H(3,15),new H(13,16))),new n(17,Int32Array.from([6,30,54,78]),new tt(28,new H(1,107),new H(5,108)),new tt(28,new H(10,46),new H(1,47)),new tt(28,new H(1,22),new H(15,23)),new tt(28,new H(2,14),new H(17,15))),new n(18,Int32Array.from([6,30,56,82]),new tt(30,new H(5,120),new H(1,121)),new tt(26,new H(9,43),new H(4,44)),new tt(28,new H(17,22),new H(1,23)),new tt(28,new H(2,14),new H(19,15))),new n(19,Int32Array.from([6,30,58,86]),new tt(28,new H(3,113),new H(4,114)),new tt(26,new H(3,44),new H(11,45)),new tt(26,new H(17,21),new H(4,22)),new tt(26,new H(9,13),new H(16,14))),new n(20,Int32Array.from([6,34,62,90]),new tt(28,new H(3,107),new H(5,108)),new tt(26,new H(3,41),new H(13,42)),new tt(30,new H(15,24),new H(5,25)),new tt(28,new H(15,15),new H(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new tt(28,new H(4,116),new H(4,117)),new tt(26,new H(17,42)),new tt(28,new H(17,22),new H(6,23)),new tt(30,new H(19,16),new H(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new tt(28,new H(2,111),new H(7,112)),new tt(28,new H(17,46)),new tt(30,new H(7,24),new H(16,25)),new tt(24,new H(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new tt(30,new H(4,121),new H(5,122)),new tt(28,new H(4,47),new H(14,48)),new tt(30,new H(11,24),new H(14,25)),new tt(30,new H(16,15),new H(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new tt(30,new H(6,117),new H(4,118)),new tt(28,new H(6,45),new H(14,46)),new tt(30,new H(11,24),new H(16,25)),new tt(30,new H(30,16),new H(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new tt(26,new H(8,106),new H(4,107)),new tt(28,new H(8,47),new H(13,48)),new tt(30,new H(7,24),new H(22,25)),new tt(30,new H(22,15),new H(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new tt(28,new H(10,114),new H(2,115)),new tt(28,new H(19,46),new H(4,47)),new tt(28,new H(28,22),new H(6,23)),new tt(30,new H(33,16),new H(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new tt(30,new H(8,122),new H(4,123)),new tt(28,new H(22,45),new H(3,46)),new tt(30,new H(8,23),new H(26,24)),new tt(30,new H(12,15),new H(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new tt(30,new H(3,117),new H(10,118)),new tt(28,new H(3,45),new H(23,46)),new tt(30,new H(4,24),new H(31,25)),new tt(30,new H(11,15),new H(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new tt(30,new H(7,116),new H(7,117)),new tt(28,new H(21,45),new H(7,46)),new tt(30,new H(1,23),new H(37,24)),new tt(30,new H(19,15),new H(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new tt(30,new H(5,115),new H(10,116)),new tt(28,new H(19,47),new H(10,48)),new tt(30,new H(15,24),new H(25,25)),new tt(30,new H(23,15),new H(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new tt(30,new H(13,115),new H(3,116)),new tt(28,new H(2,46),new H(29,47)),new tt(30,new H(42,24),new H(1,25)),new tt(30,new H(23,15),new H(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new tt(30,new H(17,115)),new tt(28,new H(10,46),new H(23,47)),new tt(30,new H(10,24),new H(35,25)),new tt(30,new H(19,15),new H(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new tt(30,new H(17,115),new H(1,116)),new tt(28,new H(14,46),new H(21,47)),new tt(30,new H(29,24),new H(19,25)),new tt(30,new H(11,15),new H(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new tt(30,new H(13,115),new H(6,116)),new tt(28,new H(14,46),new H(23,47)),new tt(30,new H(44,24),new H(7,25)),new tt(30,new H(59,16),new H(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new tt(30,new H(12,121),new H(7,122)),new tt(28,new H(12,47),new H(26,48)),new tt(30,new H(39,24),new H(14,25)),new tt(30,new H(22,15),new H(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new tt(30,new H(6,121),new H(14,122)),new tt(28,new H(6,47),new H(34,48)),new tt(30,new H(46,24),new H(10,25)),new tt(30,new H(2,15),new H(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new tt(30,new H(17,122),new H(4,123)),new tt(28,new H(29,46),new H(14,47)),new tt(30,new H(49,24),new H(10,25)),new tt(30,new H(24,15),new H(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new tt(30,new H(4,122),new H(18,123)),new tt(28,new H(13,46),new H(32,47)),new tt(30,new H(48,24),new H(14,25)),new tt(30,new H(42,15),new H(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new tt(30,new H(20,117),new H(4,118)),new tt(28,new H(40,47),new H(7,48)),new tt(30,new H(43,24),new H(22,25)),new tt(30,new H(10,15),new H(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new tt(30,new H(19,118),new H(6,119)),new tt(28,new H(18,47),new H(31,48)),new tt(30,new H(34,24),new H(34,25)),new tt(30,new H(20,15),new H(61,16)))],n}(),ar;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(ar||(ar={}));var UO=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[ar.DATA_MASK_000,new n(ar.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[ar.DATA_MASK_001,new n(ar.DATA_MASK_001,function(t,e){return(t&1)===0})],[ar.DATA_MASK_010,new n(ar.DATA_MASK_010,function(t,e){return e%3===0})],[ar.DATA_MASK_011,new n(ar.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[ar.DATA_MASK_100,new n(ar.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[ar.DATA_MASK_101,new n(ar.DATA_MASK_101,function(t,e){return t*e%6===0})],[ar.DATA_MASK_110,new n(ar.DATA_MASK_110,function(t,e){return t*e%6<3})],[ar.DATA_MASK_111,new n(ar.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),Nit=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new Tt;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),s=0,a=i-7,r=i-1;r>=a;r--)s=this.copyBit(8,r,s);for(var e=i-8;e<i;e++)s=this.copyBit(e,8,s);if(this.parsedFormatInfo=Ek.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Tt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return _l.getVersionForNumber(e);for(var r=0,i=t-11,s=5;s>=0;s--)for(var a=t-9;a>=i;a--)r=this.copyBit(a,s,r);var o=_l.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(var a=5;a>=0;a--)for(var s=t-9;s>=i;s--)r=this.copyBit(a,s,r);if(o=_l.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new Tt},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=UO.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var s=e.buildFunctionPattern(),a=!0,o=new Uint8Array(e.getTotalCodewords()),l=0,h=0,d=0,g=i-1;g>0;g-=2){g===6&&g--;for(var m=0;m<i;m++)for(var v=a?i-1-m:m,w=0;w<2;w++)s.get(g-w,v)||(d++,h<<=1,this.bitMatrix.get(g-w,v)&&(h|=1),d===8&&(o[l++]=h,d=0,h=0));a=!a}if(l!==e.getTotalCodewords())throw new Tt;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=UO.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,s=t.getHeight();i<s;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),jO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pit=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,s,a,o;if(t.length!==e.getTotalCodewords())throw new Ht;var l=e.getECBlocksForLevel(r),h=0,d=l.getECBlocks();try{for(var g=jO(d),m=g.next();!m.done;m=g.next()){var v=m.value;h+=v.getCount()}}catch(F){i={error:F}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}var w=new Array(h),b=0;try{for(var E=jO(d),S=E.next();!S.done;S=E.next())for(var v=S.value,T=0;T<v.getCount();T++){var I=v.getDataCodewords(),k=l.getECCodewordsPerBlock()+I;w[b++]=new n(I,new Uint8Array(k))}}catch(F){a={error:F}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}for(var P=w[0].codewords.length,j=w.length-1;j>=0;){var M=w[j].codewords.length;if(M===P)break;j--}j++;for(var C=P-l.getECCodewordsPerBlock(),N=0,T=0;T<C;T++)for(var B=0;B<b;B++)w[B].codewords[T]=t[N++];for(var B=j;B<b;B++)w[B].codewords[C]=t[N++];for(var z=w[0].codewords.length,T=C;T<z;T++)for(var B=0;B<b;B++){var G=B<j?T:T+1;w[B].codewords[G]=t[N++]}return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),ki;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ki||(ki={}));var en=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new Ht;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ki.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ki.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ki.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ki.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ki.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ki.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ki.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ki.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ki.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ki.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),kit=function(){function n(){}return n.decode=function(t,e,r,i){var s=new bk(t),a=new re,o=new Array,l=-1,h=-1;try{var d=null,g=!1,m=void 0;do{if(s.available()<4)m=en.TERMINATOR;else{var v=s.readBits(4);m=en.forBits(v)}switch(m){case en.TERMINATOR:break;case en.FNC1_FIRST_POSITION:case en.FNC1_SECOND_POSITION:g=!0;break;case en.STRUCTURED_APPEND:if(s.available()<16)throw new Tt;l=s.readBits(8),h=s.readBits(8);break;case en.ECI:var w=n.parseECIValue(s);if(d=Kn.getCharacterSetECIByValue(w),d===null)throw new Tt;break;case en.HANZI:var b=s.readBits(4),E=s.readBits(m.getCharacterCountBits(e));b===n.GB2312_SUBSET&&n.decodeHanziSegment(s,a,E);break;default:var S=s.readBits(m.getCharacterCountBits(e));switch(m){case en.NUMERIC:n.decodeNumericSegment(s,a,S);break;case en.ALPHANUMERIC:n.decodeAlphanumericSegment(s,a,S,g);break;case en.BYTE:n.decodeByteSegment(s,a,S,d,o,i);break;case en.KANJI:n.decodeKanjiSegment(s,a,S);break;default:throw new Tt}break}}while(m!==en.TERMINATOR)}catch{throw new Tt}return new _y(t,a.toString(),o.length===0?null:o,r===null?null:r.toString(),l,h)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new Tt;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/96<<8&4294967295|a%96;o<959?o+=41377:o+=42657,i[s]=o>>8&255,i[s+1]=o&255,s+=2,r--}try{e.append(ji.decode(i,ye.GB2312))}catch(l){throw new Tt(l)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new Tt;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/192<<8&4294967295|a%192;o<7936?o+=33088:o+=49472,i[s]=o>>8,i[s+1]=o,s+=2,r--}try{e.append(ji.decode(i,ye.SHIFT_JIS))}catch(l){throw new Tt(l)}},n.decodeByteSegment=function(t,e,r,i,s,a){if(8*r>t.available())throw new Tt;for(var o=new Uint8Array(r),l=0;l<r;l++)o[l]=t.readBits(8);var h;i===null?h=ye.guessEncoding(o,a):h=i.getName();try{e.append(ji.decode(o,h))}catch(d){throw new Tt(d)}s.push(o)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new Tt;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var s=e.length();r>1;){if(t.available()<11)throw new Tt;var a=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(a/45))),e.append(n.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(t.available()<6)throw new Tt;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var o=s;o<e.length();o++)e.charAt(o)==="%"&&(o<e.length()-1&&e.charAt(o+1)==="%"?e.deleteCharAt(o+1):e.setCharAt(o,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new Tt;var i=t.readBits(10);if(i>=1e3)throw new Tt;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new Tt;var s=t.readBits(7);if(s>=100)throw new Tt;e.append(n.toAlphaNumericChar(Math.floor(s/10))),e.append(n.toAlphaNumericChar(s%10))}else if(r===1){if(t.available()<4)throw new Tt;var a=t.readBits(4);if(a>=10)throw new Tt;e.append(n.toAlphaNumericChar(a))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new Tt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),Ak=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),zO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lit=function(){function n(){this.rsDecoder=new xy($r.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(Js.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new Nit(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var s=this.decodeBitMatrixParser(r,e);return s.setOther(new Ak(!0)),s}catch(a){throw i!==null?i:a}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,s,a,o=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),d=Pit.getDataBlocks(h,o,l),g=0;try{for(var m=zO(d),v=m.next();!v.done;v=m.next()){var w=v.value;g+=w.getNumDataCodewords()}}catch(j){r={error:j}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var b=new Uint8Array(g),E=0;try{for(var S=zO(d),T=S.next();!T.done;T=S.next()){var w=T.value,I=w.getCodewords(),k=w.getNumDataCodewords();this.correctErrors(I,k);for(var P=0;P<k;P++)b[E++]=I[P]}}catch(j){s={error:j}}finally{try{T&&!T.done&&(a=S.return)&&a.call(S)}finally{if(s)throw s.error}}return kit.decode(b,o,l,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new ur}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Vit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bit=function(n){Vit(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.estimatedModuleSize=i,s}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=(this.getX()+r)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+i)/2;return new t(s,a,o)},t}(Ot),Fit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Uit=function(){function n(t,e,r,i,s,a,o){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=s,this.moduleSize=a,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,s=this.startY+e/2,a=new Int32Array(3),o=this.image,l=0;l<e;l++){var h=s+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var d=t;d<i&&!o.get(d,h);)d++;for(var g=0;d<i;){if(o.get(d,h))if(g===1)a[1]++;else if(g===2){if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,d);if(m!==null)return m}a[0]=a[2],a[1]=1,a[2]=0,g=1}else a[++g]++;else g===1&&g++,a[g]++;d++}if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ut},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var s=this.image,a=s.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=t;l>=0&&s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&!s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l)&&o[1]<=r;)o[1]++,l++;if(l===a||o[1]>r)return NaN;for(;l<a&&!s.get(e,l)&&o[2]<=r;)o[2]++,l++;if(o[2]>r)return NaN;var h=o[0]+o[1]+o[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,s,a=t[0]+t[1]+t[2],o=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,o,2*t[1],a);if(!isNaN(l)){var h=(t[0]+t[1]+t[2])/3;try{for(var d=Fit(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.aboutEquals(h,l,o))return m.combineEstimate(l,o,h)}}catch(w){i={error:w}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var v=new Bit(o,l,h);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null},n}(),jit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zit=function(n){jit(t,n);function t(e,r,i,s){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a.count=s,s===void 0&&(a.count=1),a}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=this.count+1,a=(this.count*this.getX()+r)/s,o=(this.count*this.getY()+e)/s,l=(this.count*this.estimatedModuleSize+i)/s;return new t(a,o,l,s)},t}(Ot),Hit=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),vd=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Git=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(ln.TRY_HARDER)!==void 0,r=t!=null&&t.get(ln.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),a=i.getWidth(),o=Math.floor(3*s/(4*n.MAX_MODULES));(o<n.MIN_SKIP||e)&&(o=n.MIN_SKIP);for(var l=!1,h=new Int32Array(5),d=o-1;d<s&&!l;d+=o){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,m=0;m<a;m++)if(i.get(m,d))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var v=this.handlePossibleCenter(h,d,m,r);if(v===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var w=this.findRowSkip();w>h[2]&&(d+=w-h[2]-o,m=a-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var v=this.handlePossibleCenter(h,d,a,r);v===!0&&(o=h[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return Ot.orderBestPatterns(b),new Hit(b)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var s=e/7,a=s/2;return Math.abs(s-t[0])<a&&Math.abs(s-t[1])<a&&Math.abs(3*s-t[2])<3*a&&Math.abs(s-t[3])<a&&Math.abs(s-t[4])<a},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var s=this.getCrossCheckStateCount(),a=0,o=this.image;t>=a&&e>=a&&o.get(e-a,t-a);)s[2]++,a++;if(t<a||e<a)return!1;for(;t>=a&&e>=a&&!o.get(e-a,t-a)&&s[1]<=r;)s[1]++,a++;if(t<a||e<a||s[1]>r)return!1;for(;t>=a&&e>=a&&o.get(e-a,t-a)&&s[0]<=r;)s[0]++,a++;if(s[0]>r)return!1;var l=o.getHeight(),h=o.getWidth();for(a=1;t+a<l&&e+a<h&&o.get(e+a,t+a);)s[2]++,a++;if(t+a>=l||e+a>=h)return!1;for(;t+a<l&&e+a<h&&!o.get(e+a,t+a)&&s[3]<r;)s[3]++,a++;if(t+a>=l||e+a>=h||s[3]>=r)return!1;for(;t+a<l&&e+a<h&&o.get(e+a,t+a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(s)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var s=this.image,a=s.getHeight(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(e,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(e,l)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(e,l)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var s=this.image,a=s.getWidth(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(l,e);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(l,e)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(l,e)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(l,e);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(l,e)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(l,e)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var s=t[0]+t[1]+t[2]+t[3]+t[4],a=n.centerFromEnd(t,r),o=this.crossCheckVertical(e,Math.floor(a),t[2],s);if(!isNaN(o)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(o),t[2],s),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(a),t[2],s)))){for(var l=s/7,h=!1,d=this.possibleCenters,g=0,m=d.length;g<m;g++){var v=d[g];if(v.aboutEquals(l,o,a)){d[g]=v.combineEstimate(o,a,l),h=!0;break}}if(!h){var w=new zit(a,o,l);d.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var s=vd(this.possibleCenters),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,s=0,a=0,o=this.possibleCenters.length;try{for(var l=vd(this.possibleCenters),h=l.next();!h.done;h=l.next()){var d=h.value;d.getCount()>=n.CENTER_QUORUM&&(s++,a+=d.getEstimatedModuleSize())}}catch(b){t={error:b}}finally{try{h&&!h.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}if(s<3)return!1;var g=a/o,m=0;try{for(var v=vd(this.possibleCenters),w=v.next();!w.done;w=v.next()){var d=w.value;m+=Math.abs(d.getEstimatedModuleSize()-g)}}catch(b){r={error:b}}finally{try{w&&!w.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}return m<=.05*a},n.prototype.selectBestPatterns=function(){var t,e,r,i,s=this.possibleCenters.length;if(s<3)throw new ut;var a=this.possibleCenters,o;if(s>3){var l=0,h=0;try{for(var d=vd(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value,v=m.getEstimatedModuleSize();l+=v,h+=v*v}}catch(P){t={error:P}}finally{try{g&&!g.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}o=l/s;var w=Math.sqrt(h/s-o*o);a.sort(function(P,j){var M=Math.abs(j.getEstimatedModuleSize()-o),C=Math.abs(P.getEstimatedModuleSize()-o);return M<C?-1:M>C?1:0});for(var b=Math.max(.2*o,w),E=0;E<a.length&&a.length>3;E++){var S=a[E];Math.abs(S.getEstimatedModuleSize()-o)>b&&(a.splice(E,1),E--)}}if(a.length>3){var l=0;try{for(var T=vd(a),I=T.next();!I.done;I=T.next()){var k=I.value;l+=k.getEstimatedModuleSize()}}catch(j){r={error:j}}finally{try{I&&!I.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}o=l/a.length,a.sort(function(j,M){if(M.getCount()===j.getCount()){var C=Math.abs(M.getEstimatedModuleSize()-o),N=Math.abs(j.getEstimatedModuleSize()-o);return C<N?1:C>N?-1:0}else return M.getCount()-j.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Wit=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(ln.NEED_RESULT_POINT_CALLBACK);var e=new Git(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),s=this.calculateModuleSize(e,r,i);if(s<1)throw new ut("No pattern found in proccess finder.");var a=n.computeDimension(e,r,i,s),o=_l.getProvisionalVersionForDimension(a),l=o.getDimensionForVersion()-7,h=null;if(o.getAlignmentPatternCenters().length>0)for(var d=r.getX()-e.getX()+i.getX(),g=r.getY()-e.getY()+i.getY(),m=1-3/l,v=Math.floor(e.getX()+m*(d-e.getX())),w=Math.floor(e.getY()+m*(g-e.getY())),b=4;b<=16;b<<=1)try{h=this.findAlignmentInRegion(s,v,w,b);break}catch(I){if(!(I instanceof ut))throw I}var E=n.createTransform(e,r,i,h,a),S=n.sampleGrid(this.image,E,a),T;return h===null?T=[i,e,r]:T=[i,e,r,h],new tA(S,T)},n.createTransform=function(t,e,r,i,s){var a=s-3.5,o,l,h,d;return i!==null?(o=i.getX(),l=i.getY(),h=a-3,d=h):(o=e.getX()-t.getX()+r.getX(),l=e.getY()-t.getY()+r.getY(),h=a,d=a),vk.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,h,d,3.5,a,t.getX(),t.getY(),e.getX(),e.getY(),o,l,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=eA.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var s=we.round(Ot.distance(t,e)/i),a=we.round(Ot.distance(t,r)/i),o=Math.floor((s+a)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new ut("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var s=this.sizeOfBlackWhiteBlackRun(t,e,r,i),a=1,o=t-(r-t);o<0?(a=t/(t-o),o=0):o>=this.image.getWidth()&&(a=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);var l=Math.floor(e-(i-e)*a);return a=1,l<0?(a=e/(e-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-e)/(l-e),l=this.image.getHeight()-1),o=Math.floor(t+(o-t)*a),s+=this.sizeOfBlackWhiteBlackRun(t,e,o,l),s-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var s=Math.abs(i-e)>Math.abs(r-t);if(s){var a=t;t=e,e=a,a=r,r=i,i=a}for(var o=Math.abs(r-t),l=Math.abs(i-e),h=-o/2,d=t<r?1:-1,g=e<i?1:-1,m=0,v=r+d,w=t,b=e;w!==v;w+=d){var E=s?b:w,S=s?w:b;if(m===1===this.image.get(E,S)){if(m===2)return we.distance(w,b,t,e);m++}if(h+=l,h>0){if(b===i)break;b+=g,h-=o}}return m===2?we.distance(r+d,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var s=Math.floor(i*t),a=Math.max(0,e-s),o=Math.min(this.image.getWidth()-1,e+s);if(o-a<t*3)throw new ut("Alignment top exceeds estimated module size.");var l=Math.max(0,r-s),h=Math.min(this.image.getHeight()-1,r+s);if(h-l<t*3)throw new ut("Alignment bottom exceeds estimated module size.");var d=new Uit(this.image,a,l,o-a,h-l,t,this.resultPointCallback);return d.find()},n}(),Aw=function(){function n(){this.decoder=new Lit}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(ln.PURE_BARCODE)!==void 0){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,e),i=n.NO_POINTS}else{var a=new Wit(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(a.getBits(),e),i=a.getPoints()}r.getOther()instanceof Ak&&r.getOther().applyMirroredCorrection(i);var o=new Nr(r.getText(),r.getRawBytes(),void 0,i,jt.QR_CODE,void 0),l=r.getByteSegments();l!==null&&o.putMetadata(wr.BYTE_SEGMENTS,l);var h=r.getECLevel();return h!==null&&o.putMetadata(wr.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(o.putMetadata(wr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(wr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0];if(o>=l||s>=a)throw new ut;if(a-s!==l-o&&(l=o+(a-s),l>=t.getWidth()))throw new ut;var h=Math.round((l-o+1)/i),d=Math.round((a-s+1)/i);if(h<=0||d<=0)throw new ut;if(d!==h)throw new ut;var g=Math.floor(i/2);s+=g,o+=g;var m=o+Math.floor((h-1)*i)-l;if(m>0){if(m>g)throw new ut;o-=m}var v=s+Math.floor((d-1)*i)-a;if(v>0){if(v>g)throw new ut;s-=v}for(var w=new Js(h,d),b=0;b<d;b++)for(var E=s+Math.floor(b*i),S=0;S<h;S++)t.get(o+Math.floor(S*i),E)&&w.set(S,b);return w},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),s=t[0],a=t[1],o=!0,l=0;s<i&&a<r;){if(o!==e.get(s,a)){if(++l===5)break;o=!o}s++,a++}if(s===i||a===r)throw new ut;return(s-t[0])/7},n.NO_POINTS=new Array,n}(),qit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ve=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return we.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),s=0;try{for(var a=qit(t),o=a.next();!o.done;o=a.next()){var l=o.value;i[s++]=l}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=$n.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),Yit=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Xit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kit=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),s=n.detect(r,i);return s.length||(i=i.clone(),i.rotate180(),s=n.detect(r,i)),new Yit(i,s)},n.detect=function(t,e){for(var r,i,s=new Array,a=0,o=0,l=!1;a<e.getHeight();){var h=n.findVertices(e,a,o);if(h[0]==null&&h[3]==null){if(!l)break;l=!1,o=0;try{for(var d=(r=void 0,Xit(s)),g=d.next();!g.done;g=d.next()){var m=g.value;m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())))}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}a+=n.ROW_STEP;continue}if(l=!0,s.push(h),!t)break;h[2]!=null?(o=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(o=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return s},n.findVertices=function(t,e,r){var i=t.getHeight(),s=t.getWidth(),a=new Array(8);return n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),e=Math.trunc(a[4].getY())),n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),a},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,s,a){for(var o=new Array(4),l=!1,h=new Int32Array(a.length);i<e;i+=n.ROW_STEP){var d=n.findGuardPattern(t,s,i,r,!1,a,h);if(d!=null){for(;i>0;){var g=n.findGuardPattern(t,s,--i,r,!1,a,h);if(g!=null)d=g;else{i++;break}}o[0]=new Ot(d[0],i),o[1]=new Ot(d[1],i),l=!0;break}}var m=i+1;if(l){for(var v=0,g=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);m<e;m++){var d=n.findGuardPattern(t,g[0],m,r,!1,a,h);if(d!=null&&Math.abs(g[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-d[1])<n.MAX_PATTERN_DRIFT)g=d,v=0;else{if(v>n.SKIPPED_ROW_COUNT_MAX)break;v++}}m-=v+1,o[2]=new Ot(g[0],m),o[3]=new Ot(g[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&$n.fill(o,null),o},n.findGuardPattern=function(t,e,r,i,s,a,o){$n.fillWithin(o,0,o.length,0);for(var l=e,h=0;t.get(l,r)&&l>0&&h++<n.MAX_PIXEL_DRIFT;)l--;for(var d=l,g=0,m=a.length,v=s;d<i;d++){var w=t.get(d,r);if(w!==v)o[g]++;else{if(g===m-1){if(n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=o[0]+o[1],Ze.arraycopy(o,2,o,0,g-1),o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,v=!v}}return g===m-1&&n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return 1/0;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,v=g>m?g-m:m-g;if(v>r)return 1/0;h+=v}return h/s},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),$it=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ul=function(){function n(t,e){if(e.length===0)throw new Ht;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ze.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var s=$it(this.coefficients),a=s.next();!a.done;a=s.next()){var o=a.value;i=this.field.add(i,o)}}catch(g){e={error:g}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}for(var l=this.coefficients[0],h=this.coefficients.length,d=1;d<h;d++)l=this.field.add(this.field.multiply(t,l),this.coefficients[d]);return l},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new Ht("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;Ze.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=this.field.add(e[o-a],r[o]);return new n(this.field,s)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new Ht("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new Ht("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=0;o<r;o++)for(var l=e[o],h=0;h<s;h++)a[o+h]=this.field.add(a[o+h],this.field.multiply(l,i[h]));return new n(this.field,a)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new Ht;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new re,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),Qit=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new Ht;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new yk;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),Zit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jit=function(n){Zit(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var s=1,a=0;a<e;a++)i.expTable[a]=s,s=s*r%e;for(var a=0;a<e-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new ul(i,new Int32Array([0])),i.one=new ul(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new Ht;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new ul(this,i)},t.PDF417_GF=new t(ve.NUMBER_OF_CODEWORDS,3),t}(Qit),tst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},est=function(){function n(){this.field=Jit.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,s,a=new ul(this.field,t),o=new Int32Array(e),l=!1,h=e;h>0;h--){var d=a.evaluateAt(this.field.exp(h));o[e-h]=d,d!==0&&(l=!0)}if(!l)return 0;var g=this.field.getOne();if(r!=null)try{for(var m=tst(r),v=m.next();!v.done;v=m.next()){var w=v.value,b=this.field.exp(t.length-1-w),E=new ul(this.field,new Int32Array([this.field.subtract(0,b),1]));g=g.multiply(E)}}catch(C){i={error:C}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}for(var S=new ul(this.field,o),T=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),S,e),I=T[0],k=T[1],P=this.findErrorLocations(I),j=this.findErrorMagnitudes(k,I,P),h=0;h<P.length;h++){var M=t.length-1-this.field.log(P[h]);if(M<0)throw ur.getChecksumInstance();t[M]=this.field.subtract(t[M],j[h])}return P.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=t,a=e,o=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(r/2);){var h=s,d=o;if(s=a,o=l,s.isZero())throw ur.getChecksumInstance();a=h;for(var g=this.field.getZero(),m=s.getCoefficient(s.getDegree()),v=this.field.inverse(m);a.getDegree()>=s.getDegree()&&!a.isZero();){var w=a.getDegree()-s.getDegree(),b=this.field.multiply(a.getCoefficient(a.getDegree()),v);g=g.add(this.field.buildMonomial(w,b)),a=a.subtract(s.multiplyByMonomial(w,b))}l=g.multiply(o).subtract(d).negative()}var E=l.getCoefficient(0);if(E===0)throw ur.getChecksumInstance();var S=this.field.inverse(E),T=l.multiply(S),I=a.multiply(S);return[T,I]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,s=1;s<this.field.getSize()&&i<e;s++)t.evaluateAt(s)===0&&(r[i]=this.field.inverse(s),i++);if(i!==e)throw ur.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),s=new Int32Array(i),a=1;a<=i;a++)s[i-a]=this.field.multiply(a,e.getCoefficient(a));for(var o=new ul(this.field,s),l=r.length,h=new Int32Array(l),a=0;a<l;a++){var d=this.field.inverse(r[a]),g=this.field.subtract(0,t.evaluateAt(d)),m=this.field.inverse(o.evaluateAt(d));h[a]=this.field.multiply(g,m)}return h},n}(),Tw=function(){function n(t,e,r,i,s){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,s)}return n.prototype.constructor_1=function(t,e,r,i,s){var a=e==null||r==null,o=i==null||s==null;if(a&&o)throw new ut;a?(e=new Ot(0,i.getY()),r=new Ot(0,s.getY())):o&&(i=new Ot(t.getWidth()-1,e.getY()),s=new Ot(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,s=this.bottomLeft,a=this.topRight,o=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,h=Math.trunc(l.getY()-t);h<0&&(h=0);var d=new Ot(l.getX(),h);r?i=d:a=d}if(e>0){var g=r?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+e);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var v=new Ot(g.getX(),m);r?s=v:o=v}return new n(this.image,i,s,a,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),nst=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),rA=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(a,o,l,h,d,g){if(a==="%%")return"%";if(e[++r]!==void 0){a=h?parseInt(h.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,v;switch(g){case"s":v=e[r];break;case"c":v=e[r][0];break;case"f":v=parseFloat(e[r]).toFixed(a);break;case"p":v=parseFloat(e[r]).toPrecision(a);break;case"e":v=parseFloat(e[r]).toExponential(a);break;case"x":v=parseInt(e[r]).toString(m||16);break;case"d":v=parseFloat(parseInt(e[r],m||10).toPrecision(a)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(m);for(var w=parseInt(l),b=l&&l[0]+""=="0"?"0":" ";v.length<w;)v=o!==void 0?v+b:b+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(s,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),rst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tk=function(){function n(t){this.boundingBox=new Tw(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new rA,i=0;try{for(var s=rst(this.codewords),a=s.next();!a.done;a=s.next()){var o=a.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),ist=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sst=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return s},Vd=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,s=function(g,m){var v={getKey:function(){return g},getValue:function(){return m}};v.getValue()>r?(r=v.getValue(),i=[],i.push(v.getKey())):v.getValue()===r&&i.push(v.getKey())};try{for(var a=ist(this.values.entries()),o=a.next();!o.done;o=a.next()){var l=sst(o.value,2),h=l[0],d=l[1];s(h,d)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return ve.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),ast=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},HO=function(n){ast(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=Tx(this.getCodewords()),s=i.next();!s.done;s=i.next()){var a=s.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,d=1,g=0,m=o;m<l;m++)if(r[m]!=null){var v=r[m],w=v.getRowNumber()-h;if(w===0)g++;else if(w===1)d=Math.max(d,g),g=1,h=v.getRowNumber();else if(w<0||v.getRowNumber()>=e.getRowCount()||w>m)r[m]=null;else{var b=void 0;d>2?b=(d-2)*w:b=w;for(var E=b>=m,S=1;S<=b&&!E;S++)E=r[m-S]!=null;E?r[m]=null:(h=v.getRowNumber(),g=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var a=Tx(this.getCodewords()),o=a.next();!o.done;o=a.next()){var l=o.value;if(l!=null){var h=l.getRowNumber();if(h>=s.length)continue;s[h]++}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return s},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.getCodewords(),h=-1,d=a;d<o;d++)if(l[d]!=null){var g=l[d];g.setRowNumberAsRowIndicatorColumn();var m=g.getRowNumber()-h;m===0||(m===1?h=g.getRowNumber():g.getRowNumber()>=e.getRowCount()?l[d]=null:h=g.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),s=new Vd,a=new Vd,o=new Vd,l=new Vd;try{for(var h=Tx(i),d=h.next();!d.done;d=h.next()){var g=d.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var m=g.getValue()%30,v=g.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:a.setValue(m*3+1);break;case 1:l.setValue(m/3),o.setValue(m%3);break;case 2:s.setValue(m+1);break}}}}catch(b){e={error:b}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}if(s.getValue().length===0||a.getValue().length===0||o.getValue().length===0||l.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<ve.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>ve.MAX_ROWS_IN_BARCODE)return null;var w=new nst(s.getValue()[0],a.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,w),w},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var s=e[i];if(e[i]!=null){var a=s.getValue()%30,o=s.getRowNumber();if(o>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:a+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(Tk),ost=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cst=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=ve.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[r];s!=null&&(s.setRowNumber(t[r].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=this.barcodeColumnCount+1;a>0&&s<this.ADJUST_ROW_NUMBER_SKIP;a--){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=1;a<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;a++){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,s;if(this.detectionResultColumns[t-1]!=null){var a=r[e],o=this.detectionResultColumns[t-1].getCodewords(),l=o;this.detectionResultColumns[t+1]!=null&&(l=this.detectionResultColumns[t+1].getCodewords());var h=new Array(14);h[2]=o[e],h[3]=l[e],e>0&&(h[0]=r[e-1],h[4]=o[e-1],h[5]=l[e-1]),e>1&&(h[8]=r[e-2],h[10]=o[e-2],h[11]=l[e-2]),e<r.length-1&&(h[1]=r[e+1],h[6]=o[e+1],h[7]=l[e+1]),e<r.length-2&&(h[9]=r[e+2],h[12]=o[e+2],h[13]=l[e+2]);try{for(var d=ost(h),g=d.next();!g.done;g=d.next()){var m=g.value;if(n.adjustRowNumber(a,m))return}}catch(v){i={error:v}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new rA,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[r];if(s==null){e.format("    |   ");continue}e.format(" %3d|%3d",s.getRowNumber(),s.getValue())}e.format("%n")}return e.toString()},n}(),lst=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),ust=function(){function n(){}return n.initialize=function(){for(var t=0;t<ve.SYMBOL_TABLE.length;t++)for(var e=ve.SYMBOL_TABLE[t],r=e&1,i=0;i<ve.BARS_IN_MODULE;i++){for(var s=0;(e&1)===r;)s+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(ve.BARS_IN_MODULE)),n.RATIOS_TABLE[t][ve.BARS_IN_MODULE-i-1]=Math.fround(s/ve.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=we.sum(t),r=new Int32Array(ve.BARS_IN_MODULE),i=0,s=0,a=0;a<ve.MODULES_IN_CODEWORD;a++){var o=e/(2*ve.MODULES_IN_CODEWORD)+a*e/ve.MODULES_IN_CODEWORD;s+t[i]<=o&&(s+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return ve.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=we.sum(t),r=new Array(ve.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var s=_w.MAX_VALUE,a=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var l=0,h=n.RATIOS_TABLE[o],d=0;d<ve.BARS_IN_MODULE;d++){var g=Math.fround(h[d]-r[d]);if(l+=Math.fround(g*g),l>=s)break}l<s&&(s=l,a=ve.SYMBOL_TABLE[o])}return a},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ve.SYMBOL_TABLE.length).map(function(t){return new Array(ve.BARS_IN_MODULE)}),n}(),hst=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),GO=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),fst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dst=function(n){fst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(ni),gst=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new dst;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new ZE;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),pst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mst=function(n){pst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(ni),yst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vst=function(n){yst(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new Ht("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new mst;i=oe.MAX_VALUE}this.buf=$n.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new ZE;this.ensureCapacity(this.count+i),Ze.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return $n.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(gst),Ge;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ge||(Ge={}));function Sk(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var nm;function Io(n){if(typeof nm>"u"&&(nm=Sk()),nm===null)throw new Error("BigInt is not supported!");return nm(n)}function _st(){var n=[];n[0]=Io(1);var t=Io(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var xst=function(){function n(){}return n.decode=function(t,e){var r=new re(""),i=Kn.ISO8859_1;r.enableDecoding(i);for(var s=1,a=t[s++],o=new hst;s<t[0];){switch(a){case n.TEXT_COMPACTION_MODE_LATCH:s=n.textCompaction(t,s,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:s=n.byteCompaction(a,t,i,s,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:s=n.numericCompaction(t,s,r);break;case n.ECI_CHARSET:Kn.getCharacterSetECIByValue(t[s++]);break;case n.ECI_GENERAL_PURPOSE:s+=2;break;case n.ECI_USER_DEFINED:s++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=n.decodeMacroBlock(t,s,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new Tt;default:s--,s=n.textCompaction(t,s,r);break}if(s<t.length)a=t[s++];else throw Tt.getFormatInstance()}if(r.length()===0)throw Tt.getFormatInstance();var l=new _y(null,r.toString(),null,e);return l.setOther(o),l},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Tt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<n.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)i[s]=t[e];r.setSegmentIndex(oe.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new re;e=n.textCompaction(t,e,a),r.setFileId(a.toString());var o=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new re;e=n.textCompaction(t,e+1,l),r.setFileName(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new re;e=n.textCompaction(t,e+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new re;e=n.textCompaction(t,e+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new re;e=n.numericCompaction(t,e+1,g),r.setSegmentCount(oe.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new re;e=n.numericCompaction(t,e+1,m),r.setTimestamp(GO.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var v=new re;e=n.numericCompaction(t,e+1,v),r.setChecksum(oe.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var w=new re;e=n.numericCompaction(t,e+1,w),r.setFileSize(GO.parseLong(w.toString()));break;default:throw Tt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw Tt.getFormatInstance()}if(o!==-1){var b=e-o;r.isLastSegment()&&b--,r.setOptionalData($n.copyOfRange(t,o,o+b))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),s=new Int32Array((t[0]-e)*2),a=0,o=!1;e<t[0]&&!o;){var l=t[e++];if(l<n.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:i[a++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[e++],s[a]=l,a++;break}}return n.decodeTextCompaction(i,s,a,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var s=Ge.ALPHA,a=Ge.ALPHA,o=0;o<r;){var l=t[o],h="";switch(s){case Ge.ALPHA:if(l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.LL:s=Ge.LOWER;break;case n.ML:s=Ge.MIXED;break;case n.PS:a=s,s=Ge.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ge.ALPHA;break}break;case Ge.LOWER:if(l<26)h=String.fromCharCode(97+l);else switch(l){case 26:h=" ";break;case n.AS:a=s,s=Ge.ALPHA_SHIFT;break;case n.ML:s=Ge.MIXED;break;case n.PS:a=s,s=Ge.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ge.ALPHA;break}break;case Ge.MIXED:if(l<n.PL)h=n.MIXED_CHARS[l];else switch(l){case n.PL:s=Ge.PUNCT;break;case 26:h=" ";break;case n.LL:s=Ge.LOWER;break;case n.AL:s=Ge.ALPHA;break;case n.PS:a=s,s=Ge.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ge.ALPHA;break}break;case Ge.PUNCT:if(l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ge.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ge.ALPHA;break}break;case Ge.ALPHA_SHIFT:if(s=a,l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ge.ALPHA;break}break;case Ge.PUNCT_SHIFT:if(s=a,l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ge.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ge.ALPHA;break}break}h!==""&&i.append(h),o++}},n.byteCompaction=function(t,e,r,i,s){var a=new vst,o=0,l=0,h=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),g=e[i++];i<e[0]&&!h;)switch(d[o++]=g,l=900*l+g,g=e[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(Io(l)>>Io(8*(5-m))));l=0,o=0}break}i===e[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(d[o++]=g);for(var v=0;v<o;v++)a.write(d[v]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!h;){var w=e[i++];if(w<n.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+w;else switch(w){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(Io(l)>>Io(8*(5-m))));l=0,o=0}}break}return s.append(ji.decode(a.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,s=!1,a=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!s;){var o=t[e++];if(e===t[0]&&(s=!0),o<n.TEXT_COMPACTION_MODE_LATCH)a[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,s=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(r.append(n.decodeBase900toBase10(a,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=Io(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*Io(t[i]);var s=r.toString();if(s.charAt(0)!=="1")throw new Tt;return s.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Sk()?_st():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),_d=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wst=function(){function n(){}return n.decode=function(t,e,r,i,s,a,o){for(var l=new Tw(t,e,r,i,s),h=null,d=null,g,m=!0;;m=!1){if(e!=null&&(h=n.getRowIndicatorColumn(t,l,e,!0,a,o)),i!=null&&(d=n.getRowIndicatorColumn(t,l,i,!1,a,o)),g=n.merge(h,d),g==null)throw ut.getNotFoundInstance();var v=g.getBoundingBox();if(m&&v!=null&&(v.getMinY()<l.getMinY()||v.getMaxY()>l.getMaxY()))l=v;else break}g.setBoundingBox(l);var w=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(w,d);for(var b=h!=null,E=1;E<=w;E++){var S=b?E:w-E;if(g.getDetectionResultColumn(S)===void 0){var T=void 0;S===0||S===w?T=new HO(l,S===0):T=new Tk(l),g.setDetectionResultColumn(S,T);for(var I=-1,k=I,P=l.getMinY();P<=l.getMaxY();P++){if(I=n.getStartColumn(g,S,P,b),I<0||I>l.getMaxX()){if(k===-1)continue;I=k}var j=n.detectCodeword(t,l.getMinX(),l.getMaxX(),b,I,P,a,o);j!=null&&(T.setCodeword(P,j),k=I,a=Math.min(a,j.getWidth()),o=Math.max(o,j.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=Tw.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new cst(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var s=n.getMax(i),a=0;try{for(var o=_d(i),l=o.next();!l.done;l=o.next()){var h=l.value;if(a+=s-h,h>0)break}}catch(v){e={error:v}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var d=t.getCodewords(),g=0;a>0&&d[g]==null;g++)a--;for(var m=0,g=i.length-1;g>=0&&(m+=s-i[g],!(i[g]>0));g--);for(var g=d.length-1;m>0&&d[g]==null;g--)m--;return t.getBoundingBox().addMissingRows(a,m,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var s=_d(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=Math.max(i,o)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,s,a){for(var o=new HO(e,i),l=0;l<2;l++)for(var h=l===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=e.getMaxY()&&g>=e.getMinY();g+=h){var m=n.detectCodeword(t,0,t.getWidth(),i,d,g,s,a);m!=null&&(o.setCodeword(g,m),i?d=m.getStartX():d=m.getEndX())}return o},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),s=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(s<1||s>ve.MAX_CODEWORDS_IN_BARCODE)throw ut.getNotFoundInstance();r.setValue(s)}else i[0]!==s&&r.setValue(s)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),s=[],a=new Array,o=0;o<t.getBarcodeRowCount();o++)for(var l=0;l<t.getBarcodeColumnCount();l++){var h=e[o][l+1].getValue(),d=o*t.getBarcodeColumnCount()+l;h.length===0?r.push(d):h.length===1?i[d]=h[0]:(a.push(d),s.push(h))}for(var g=new Array(s.length),m=0;m<g.length;m++)g[m]=s[m];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,ve.toIntArray(r),ve.toIntArray(a),g)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,s){for(var a=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<a.length;l++)e[i[l]]=s[l][a[l]];try{return n.decodeCodewords(e,t,r)}catch(d){var h=d instanceof ur;if(!h)throw d}if(a.length===0)throw ur.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<s[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw ur.getChecksumInstance()}throw ur.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,s,a=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),o=0;o<a.length;o++)for(var l=0;l<a[o].length;l++)a[o][l]=new Vd;var h=0;try{for(var d=_d(t.getDetectionResultColumns()),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)try{for(var v=(i=void 0,_d(m.getCodewords())),w=v.next();!w.done;w=v.next()){var b=w.value;if(b!=null){var E=b.getRowNumber();if(E>=0){if(E>=a.length)continue;a[E][h].setValue(b.getValue())}}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}h++}}catch(S){e={error:S}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return a},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var s,a,o=i?1:-1,l=null;if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=t.getDetectionResultColumn(e).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var h=0;n.isValidBarcodeColumn(t,e-o);){e-=o;try{for(var d=(s=void 0,_d(t.getDetectionResultColumn(e).getCodewords())),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)return(i?m.getEndX():m.getStartX())+o*h*(m.getEndX()-m.getStartX())}}catch(v){s={error:v}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}h++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,s,a,o,l){s=n.adjustCodewordStartColumn(t,e,r,i,s,a);var h=n.getModuleBitCount(t,e,r,i,s,a);if(h==null)return null;var d,g=we.sum(h);if(i)d=s+g;else{for(var m=0;m<h.length/2;m++){var v=h[m];h[m]=h[h.length-1-m],h[h.length-1-m]=v}d=s,s=d-g}if(!n.checkCodewordSkew(g,o,l))return null;var w=ust.getDecodedValue(h),b=ve.getCodeword(w);return b===-1?null:new lst(s,d,n.getCodewordBucketNumber(w),b)},n.getModuleBitCount=function(t,e,r,i,s,a){for(var o=s,l=new Int32Array(8),h=0,d=i?1:-1,g=i;(i?o<r:o>=e)&&h<l.length;)t.get(o,a)===g?(l[h]++,o+=d):(h++,g=!g);return h===l.length||o===(i?r:e)&&h===l.length-1?l:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,s,a){for(var o=s,l=i?-1:1,h=0;h<2;h++){for(;(i?o>=e:o<r)&&i===t.get(o,a);){if(Math.abs(s-o)>n.CODEWORD_SKEW_SIZE)return s;o+=l}l=-l,i=!i}return o},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw Tt.getFormatInstance();var i=1<<e+1,s=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var a=xst.decode(t,""+e);return a.setErrorsCorrected(s),a.setErasures(r.length),a},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw ur.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw Tt.getFormatInstance();var r=t[0];if(r>t.length)throw Tt.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw Tt.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new rA,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var s=t[r][i];s.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new est,n}(),bst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sw=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw ut.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof Tt||r instanceof ur?ut.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,s,a=new Array,o=Kit.detectMultiple(t,e,r);try{for(var l=bst(o.getPoints()),h=l.next();!h.done;h=l.next()){var d=h.value,g=wst.decode(o.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),m=new Nr(g.getText(),g.getRawBytes(),void 0,d,jt.PDF_417);m.putMetadata(wr.ERROR_CORRECTION_LEVEL,g.getECLevel());var v=g.getOther();v!=null&&m.putMetadata(wr.PDF417_EXTRA_METADATA,v),a.push(m)}}catch(w){i={error:w}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a.map(function(w){return w})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?oe.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),Est=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),WO=function(n){Est(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(ni),qO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ast=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(ln.TRY_HARDER)!==void 0,r=t==null?null:t.get(ln.POSSIBLE_FORMATS),i=new Array;if(r!=null){var s=r.some(function(a){return a===jt.UPC_A||a===jt.UPC_E||a===jt.EAN_13||a===jt.EAN_8||a===jt.CODABAR||a===jt.CODE_39||a===jt.CODE_93||a===jt.CODE_128||a===jt.ITF||a===jt.RSS_14||a===jt.RSS_EXPANDED});s&&!e&&i.push(new Ld(t)),r.includes(jt.QR_CODE)&&i.push(new Aw),r.includes(jt.DATA_MATRIX)&&i.push(new Ew),r.includes(jt.AZTEC)&&i.push(new ww),r.includes(jt.PDF_417)&&i.push(new Sw),s&&e&&i.push(new Ld(t))}i.length===0&&(e||i.push(new Ld(t)),i.push(new Aw),i.push(new Ew),i.push(new ww),i.push(new Sw),e&&i.push(new Ld(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=qO(this.readers),i=r.next();!i.done;i=r.next()){var s=i.value;s.reset()}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new WO("No readers where selected, nothing can be read.");try{for(var i=qO(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;try{return a.decode(t,this.hints)}catch(o){if(o instanceof WO)continue}}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new ut("No MultiFormat Readers were able to detect the code.")},n}(),Tst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sst=function(n){Tst(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,s=new Ast;return s.setHints(e),i=n.call(this,s,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(Kh),Cst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Cst(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Sw,e)||this}return t})(Kh);var Ist=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Ist(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Aw,e)||this}return t})(Kh);var Cw;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Cw||(Cw={}));const rm=Cw;var Ck=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new qo(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,s=e.length;s<=t;s++){var a=r.multiply(new qo(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));e.push(a),r=a}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new Ht("No error correction bytes");var r=t.length-e;if(r<=0)throw new Ht("No data bytes provided");var i=this.buildGenerator(e),s=new Int32Array(r);Ze.arraycopy(t,0,s,0,r);var a=new qo(this.field,s);a=a.multiplyByMonomial(e,1);for(var o=a.divide(i)[1],l=o.getCoefficients(),h=e-l.length,d=0;d<h;d++)t[r+d]=0;Ze.arraycopy(l,0,t,r+h,l.length)},n}(),Bd=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s-1;a++)for(var o=r[a],l=0;l<i-1;l++){var h=o[l];h===o[l+1]&&h===r[a+1][l]&&h===r[a+1][l+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=0;o<i;o++){var l=r[a];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(n.isWhiteHorizontal(l,o-4,o)||n.isWhiteHorizontal(l,o+7,o+11))&&e++,a+6<s&&r[a][o]===1&&r[a+1][o]===0&&r[a+2][o]===1&&r[a+3][o]===1&&r[a+4][o]===1&&r[a+5][o]===0&&r[a+6][o]===1&&(n.isWhiteVertical(r,o,a-4,a)||n.isWhiteVertical(r,o,a+7,a+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var s=r;s<i;s++)if(t[s][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=r[a],l=0;l<i;l++)o[l]===1&&e++;var h=t.getHeight()*t.getWidth(),d=Math.floor(Math.abs(e*2-h)*10/h);return d*n.N4},n.getDataMaskBit=function(t,e,r){var i,s;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:s=r*e,i=(s&1)+s%3;break;case 6:s=r*e,i=(s&1)+s%3&1;break;case 7:s=r*e,i=s%3+(r+e&1)&1;break;default:throw new Ht("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),s=e?t.getWidth():t.getHeight(),a=t.getArray(),o=0;o<i;o++){for(var l=0,h=-1,d=0;d<s;d++){var g=e?a[o][d]:a[d][o];g===h?l++:(l>=5&&(r+=n.N1+(l-5)),l=1,h=g)}l>=5&&(r+=n.N1+(l-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Rst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dst=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=Rst(this.bytes),s=i.next();!s.done;s=i.next()){var a=s.value;$n.fill(a,t)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var s=this.bytes[r],a=e.bytes[r],o=0,l=this.width;o<l;++o)if(s[o]!==a[o])return!1;return!0},n.prototype.toString=function(){for(var t=new re,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],s=0,a=this.width;s<a;++s)switch(i[s]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),Iw=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new re;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Ost=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tn=function(n){Ost(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(ni),YO=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,s){n.clearMatrix(s),n.embedBasicPatterns(r,s),n.embedTypeInfo(e,i,s),n.maybeEmbedVersionInfo(r,s),n.embedDataBits(t,i,s)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new hr;n.makeTypeInfoBits(t,e,i);for(var s=0,a=i.getSize();s<a;++s){var o=i.get(i.getSize()-1-s),l=n.TYPE_INFO_COORDINATES[s],h=l[0],d=l[1];if(r.setBoolean(h,d,o),s<8){var g=r.getWidth()-s-1,m=8;r.setBoolean(g,m,o)}else{var g=8,m=r.getHeight()-7+(s-8);r.setBoolean(g,m,o)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new hr;n.makeVersionInfoBits(t,r);for(var i=6*3-1,s=0;s<6;++s)for(var a=0;a<3;++a){var o=r.get(i);i--,e.setBoolean(s,e.getHeight()-11+a,o),e.setBoolean(e.getHeight()-11+a,s,o)}}},n.embedDataBits=function(t,e,r){for(var i=0,s=-1,a=r.getWidth()-1,o=r.getHeight()-1;a>0;){for(a===6&&(a-=1);o>=0&&o<r.getHeight();){for(var l=0;l<2;++l){var h=a-l;if(n.isEmpty(r.get(h,o))){var d=void 0;i<t.getSize()?(d=t.get(i),++i):d=!1,e!==255&&Bd.getDataMaskBit(e,h,o)&&(d=!d),r.setBoolean(h,o,d)}}o+=s}s=-s,o+=s,a-=2}if(i!==t.getSize())throw new tn("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-oe.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new Ht("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!Iw.isValidMaskPattern(e))throw new tn("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var s=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(s,10);var a=new hr;if(a.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new tn("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new tn("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new tn;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new tn;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new tn;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var s=n.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var s=n.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],s=0,a=i.length;s!==a;s++){var o=i[s];if(o>=0)for(var l=0;l!==a;l++){var h=i[l];h>=0&&n.isEmpty(e.get(h,o))&&n.embedPositionAdjustmentPattern(h-2,o-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Mst=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),XO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return Bd.applyMaskPenaltyRule1(t)+Bd.applyMaskPenaltyRule2(t)+Bd.applyMaskPenaltyRule3(t)+Bd.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,s=r!==null&&r.get(rm.CHARACTER_SET)!==void 0;s&&(i=r.get(rm.CHARACTER_SET).toString());var a=this.chooseMode(t,i),o=new hr;if(a===en.BYTE&&(s||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Kn.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(a,o);var h=new hr;this.appendBytes(t,a,h,i);var d;if(r!==null&&r.get(rm.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(rm.QR_VERSION).toString(),10);d=_l.getVersionForNumber(g);var m=this.calculateBitsNeeded(a,o,h,d);if(!this.willFit(m,d,e))throw new tn("Data too big for requested version")}else d=this.recommendVersion(e,a,o,h);var v=new hr;v.appendBitArray(o);var w=a===en.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(w,d,a,v),v.appendBitArray(h);var b=d.getECBlocksForLevel(e),E=d.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(E,v);var S=this.interleaveWithECBytes(v,d.getTotalCodewords(),E,b.getNumBlocks()),T=new Iw;T.setECLevel(e),T.setMode(a),T.setVersion(d);var I=d.getDimensionForVersion(),k=new Dst(I,I),P=this.chooseMaskPattern(S,e,d,k);return T.setMaskPattern(P),YO.buildMatrix(S,e,d,P,k),T.setMatrix(k),T},n.recommendVersion=function(t,e,r,i){var s=this.calculateBitsNeeded(e,r,i,_l.getVersionForNumber(1)),a=this.chooseVersion(s,t),o=this.calculateBitsNeeded(e,r,i,a);return this.chooseVersion(o,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),Kn.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return en.KANJI;for(var r=!1,i=!1,s=0,a=t.length;s<a;++s){var o=t.charAt(s);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return en.BYTE}return i?en.ALPHANUMERIC:r?en.NUMERIC:en.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=ji.encode(t,Kn.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var s=e[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var s=Number.MAX_SAFE_INTEGER,a=-1,o=0;o<Iw.NUM_MASK_PATTERNS;o++){YO.buildMatrix(t,e,r,o,i);var l=this.calculateMaskPenalty(i);l<s&&(s=l,a=o)}return a},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=_l.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new tn("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),s=e.getECBlocksForLevel(r),a=s.getTotalECCodewords(),o=i-a,l=(t+7)/8;return o>=l},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new tn("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var s=e.getSize()&7;if(s>0)for(var i=s;i<8;i++)e.appendBit(!1);for(var a=t-e.getSizeInBytes(),i=0;i<a;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new tn("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,s,a){if(i>=r)throw new tn("Block ID too large");var o=t%r,l=r-o,h=Math.floor(t/r),d=h+1,g=Math.floor(e/r),m=g+1,v=h-g,w=d-m;if(v!==w)throw new tn("EC bytes mismatch");if(r!==l+o)throw new tn("RS blocks mismatch");if(t!==(g+v)*l+(m+w)*o)throw new tn("Total bytes mismatch");i<l?(s[0]=g,a[0]=v):(s[0]=m,a[0]=w)},n.interleaveWithECBytes=function(t,e,r,i){var s,a,o,l;if(t.getSizeInBytes()!==r)throw new tn("Number of bits and data bytes does not match");for(var h=0,d=0,g=0,m=new Array,v=0;v<i;++v){var w=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,v,w,b);var E=w[0],S=new Uint8Array(E);t.toBytes(8*h,S,0,E);var T=n.generateECBytes(S,b[0]);m.push(new Mst(S,T)),d=Math.max(d,E),g=Math.max(g,T.length),h+=w[0]}if(r!==h)throw new tn("Data bytes does not match offset");for(var I=new hr,v=0;v<d;++v)try{for(var k=(s=void 0,XO(m)),P=k.next();!P.done;P=k.next()){var j=P.value,S=j.getDataBytes();v<S.length&&I.appendBits(S[v],8)}}catch(B){s={error:B}}finally{try{P&&!P.done&&(a=k.return)&&a.call(k)}finally{if(s)throw s.error}}for(var v=0;v<g;++v)try{for(var M=(o=void 0,XO(m)),C=M.next();!C.done;C=M.next()){var j=C.value,T=j.getErrorCorrectionBytes();v<T.length&&I.appendBits(T[v],8)}}catch(B){o={error:B}}finally{try{C&&!C.done&&(l=M.return)&&l.call(M)}finally{if(o)throw o.error}}if(e!==I.getSizeInBytes())throw new tn("Interleaving error: "+e+" and "+I.getSizeInBytes()+" differ.");return I},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),s=0;s<r;s++)i[s]=t[s]&255;new Ck($r.QR_CODE_FIELD_256).encode(i,e);for(var a=new Uint8Array(e),s=0;s<e;s++)a[s]=i[r+s];return a},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var s=r.getCharacterCountBits(e);if(t>=1<<s)throw new tn(t+" is bigger than "+((1<<s)-1));i.appendBits(t,s)},n.appendBytes=function(t,e,r,i){switch(e){case en.NUMERIC:n.appendNumericBytes(t,r);break;case en.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case en.BYTE:n.append8BitBytes(t,r,i);break;case en.KANJI:n.appendKanjiBytes(t,r);break;default:throw new tn("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getDigit(t.charAt(i));if(i+2<r){var a=n.getDigit(t.charAt(i+1)),o=n.getDigit(t.charAt(i+2));e.appendBits(s*100+a*10+o,10),i+=3}else if(i+1<r){var a=n.getDigit(t.charAt(i+1));e.appendBits(s*10+a,7),i+=2}else e.appendBits(s,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getAlphanumericCode(t.charCodeAt(i));if(s===-1)throw new tn;if(i+1<r){var a=n.getAlphanumericCode(t.charCodeAt(i+1));if(a===-1)throw new tn;e.appendBits(s*45+a,11),i+=2}else e.appendBits(s,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=ji.encode(t,r)}catch(l){throw new tn(l)}for(var s=0,a=i.length;s!==a;s++){var o=i[s];e.appendBits(o,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=ji.encode(t,Kn.SJIS)}catch(g){throw new tn(g)}for(var i=r.length,s=0;s<i;s+=2){var a=r[s]&255,o=r[s+1]&255,l=a<<8&4294967295|o,h=-1;if(l>=33088&&l<=40956?h=l-33088:l>=57408&&l<=60351&&(h=l-49472),h===-1)throw new tn("Invalid byte sequence");var d=(h>>8)*192+(h&255);e.appendBits(d,13)}},n.appendECI=function(t,e){e.appendBits(en.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Kn.UTF8.getName(),n})();var Nst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Nst(t,n);function t(e,r,i,s,a,o,l,h){var d=n.call(this,o,l)||this;if(d.yuvData=e,d.dataWidth=r,d.dataHeight=i,d.left=s,d.top=a,s+o>r||a+l>i)throw new Ht("Crop rectangle does not fit within image data.");return h&&d.reverseHorizontal(o,l),d}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new Ht("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return Ze.arraycopy(this.yuvData,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Ze.arraycopy(this.yuvData,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;Ze.arraycopy(this.yuvData,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,s,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),s=this.yuvData,a=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var l=o*e,h=0;h<e;h++){var d=s[a+h*t.THUMBNAIL_SCALE_FACTOR]&255;i[l+h]=4278190080|d*65793}a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,s=0,a=this.top*this.dataWidth+this.left;s<r;s++,a+=this.dataWidth)for(var o=a+e/2,l=a,h=a+e-1;l<o;l++,h--){var d=i[l];i[l]=i[h],i[h]=d}},t.prototype.invert=function(){return new JE(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(vy);var Pst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Pst(t,n);function t(e,r,i,s,a,o,l){var h=n.call(this,r,i)||this;if(h.dataWidth=s,h.dataHeight=a,h.left=o,h.top=l,e.BYTES_PER_ELEMENT===4){for(var d=r*i,g=new Uint8ClampedArray(d),m=0;m<d;m++){var v=e[m],w=v>>16&255,b=v>>7&510,E=v&255;g[m]=(w+b+E)/4&255}h.luminances=g}else h.luminances=e;if(s===void 0&&(h.dataWidth=r),a===void 0&&(h.dataHeight=i),o===void 0&&(h.left=0),l===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Ht("Crop rectangle does not fit within image data.");return h}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new Ht("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return Ze.arraycopy(this.luminances,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Ze.arraycopy(this.luminances,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;Ze.arraycopy(this.luminances,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new JE(this)},t})(vy);var kst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lst=function(n){kst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Kn),Vst=function(){function n(){}return n.ISO_8859_1=Kn.ISO8859_1,n}(),Rw,Bst=301,Fst=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=Bst);return{LOG:n,ALOG:t}};Rw=Fst([],[]),Rw.LOG;Rw.ALOG;var KO;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(KO||(KO={}));var $O=129,Ik=230,Ust=231,jst=235,zst=236,Hst=237,Gst=238,Wst=239,qst=240,Sx=254,Yst=254,QO="[)>05",ZO="[)>06",JO="",Pe=0,vr=1,Ur=2,Yn=3,or=4,Tr=5,Xst=function(){function n(){}return n.prototype.getEncodingMode=function(){return Pe},n.prototype.encode=function(t){var e=ns.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=ns.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Tr:t.writeCodeword(Ust),t.signalEncoderChange(Tr);return;case vr:t.writeCodeword(Ik),t.signalEncoderChange(vr);return;case Yn:t.writeCodeword(Gst),t.signalEncoderChange(Yn);break;case Ur:t.writeCodeword(Wst),t.signalEncoderChange(Ur);break;case or:t.writeCodeword(qst),t.signalEncoderChange(or);break;default:throw new Error("Illegal mode: "+i)}else ns.isExtendedASCII(r)?(t.writeCodeword(jst),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(ns.isDigit(t)&&ns.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),Kst=function(){function n(){}return n.prototype.getEncodingMode=function(){return Tr},n.prototype.encode=function(t){var e=new re;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=ns.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Pe);break}}var s=e.length()-1,a=1,o=t.getCodewordCount()+s+a;t.updateSymbolInfo(o);var l=t.getSymbolInfo().getDataCapacity()-o>0;if(t.hasMoreCharacters()||l)if(s<=249)e.setCharAt(0,ye.getCharAt(s));else if(s<=1555)e.setCharAt(0,ye.getCharAt(Math.floor(s/250)+249)),e.insert(1,ye.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var h=0,r=e.length();h<r;h++)t.writeCodeword(this.randomize255State(e.charAt(h).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),iA=function(){function n(){}return n.prototype.getEncodingMode=function(){return vr},n.prototype.encodeMaximal=function(t){for(var e=new re,r=0,i=t.pos,s=0;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,r=this.encodeChar(a,e),e.length()%3===0&&(i=t.pos,s=e.length())}if(s!==e.length()){var o=Math.floor(e.length()/3*2),l=Math.floor(t.getCodewordCount()+o+1);t.updateSymbolInfo(l);var h=t.getSymbolInfo().getDataCapacity()-l,d=Math.floor(e.length()%3);(d===2&&h!==2||d===1&&(r>3||h!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(Ik),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new re;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),s=Math.floor(e.length()/3)*2,a=t.getCodewordCount()+s;t.updateSymbolInfo(a);var o=t.getSymbolInfo().getDataCapacity()-a;if(!t.hasMoreCharacters()){var l=new re;for(e.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(t,e,l,i));e.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(t,e,l,i);break}var h=e.length();if(h%3===0){var d=ns.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){t.signalEncoderChange(Pe);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var s=e.length(),a=e.toString().substring(0,s-i);e.setLengthToZero(),e.append(a),t.pos--;var o=t.getCurrentChar();return i=this.encodeChar(o,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,s=t.getCodewordCount()+r;t.updateSymbolInfo(s);var a=t.getSymbolInfo().getDataCapacity()-s;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Sx)}else if(a===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Sx),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(a>0||t.hasMoreCharacters())&&t.writeCodeword(Sx)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(Pe)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,s=new re;return s.append(r),s.append(i),s.toString()},n}(),$st=function(){function n(){}return n.prototype.getEncodingMode=function(){return or},n.prototype.encode=function(t){for(var e=new re;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var s=e.toString().substring(4);e.setLengthToZero(),e.append(s);var a=ns.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(Pe);break}}}e.append(ye.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),s=t.getRemainingCharacters();if(s>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),s<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var a=r-1,o=this.encodeToCodewords(e.toString()),l=!t.hasMoreCharacters(),h=l&&a<=2;if(a<=2){t.updateSymbolInfo(t.getCodewordCount()+a);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(h=!1,t.updateSymbolInfo(t.getCodewordCount()+o.length))}h?(t.resetSymbolInfo(),t.pos-=a):t.writeCodewords(o)}finally{t.signalEncoderChange(Pe)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(ye.getCharAt(t-64)):ns.illegalCharacter(ye.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,s=e>=3?t.charAt(2).charCodeAt(0):0,a=e>=4?t.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(s<<6)+a,l=o>>16&255,h=o>>8&255,d=o&255,g=new re;return g.append(l),e>=2&&g.append(h),e>=3&&g.append(d),g.toString()},n}(),Qst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ae=function(){function n(t,e,r,i,s,a,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=s,this.dataRegions=a,this.rsBlockData=o,this.rsBlockError=l}return n.lookup=function(t,e,r,i,s){var a,o;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!0);try{for(var l=Zst(tat),h=l.next();!h.done;h=l.next()){var d=h.value;if(!(e===1&&d.rectangular)&&!(e===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&t<=d.dataCapacity)return d}}catch(g){a={error:g}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),Jst=function(n){Qst(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(Ae),tat=[new Ae(!1,3,5,8,8,1),new Ae(!1,5,7,10,10,1),new Ae(!0,5,7,16,6,1),new Ae(!1,8,10,12,12,1),new Ae(!0,10,11,14,6,2),new Ae(!1,12,12,14,14,1),new Ae(!0,16,14,24,10,1),new Ae(!1,18,14,16,16,1),new Ae(!1,22,18,18,18,1),new Ae(!0,22,18,16,10,2),new Ae(!1,30,20,20,20,1),new Ae(!0,32,24,16,14,2),new Ae(!1,36,24,22,22,1),new Ae(!1,44,28,24,24,1),new Ae(!0,49,28,22,14,2),new Ae(!1,62,36,14,14,4),new Ae(!1,86,42,16,16,4),new Ae(!1,114,48,18,18,4),new Ae(!1,144,56,20,20,4),new Ae(!1,174,68,22,22,4),new Ae(!1,204,84,24,24,4,102,42),new Ae(!1,280,112,14,14,16,140,56),new Ae(!1,368,144,16,16,16,92,36),new Ae(!1,456,192,18,18,16,114,48),new Ae(!1,576,224,20,20,16,144,56),new Ae(!1,696,272,22,22,16,174,68),new Ae(!1,816,336,24,24,16,136,56),new Ae(!1,1050,408,18,18,36,175,68),new Ae(!1,1304,496,20,20,36,163,62),new Jst],eat=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(o){return o.charCodeAt(0)}),r=new re,i=0,s=e.length;i<s;i++){var a=String.fromCharCode(e[i]&255);if(a==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(a)}this.msg=r.toString(),this.shape=0,this.codewords=new re,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ae.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),nat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rat=function(n){nat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Yn},t.prototype.encode=function(e){for(var r=new re;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var s=r.length();if(s%3===0){this.writeNextTriplet(e,r);var a=ns.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Pe);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):ns.illegalCharacter(ye.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=r.length();e.pos-=s,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(Yst),e.getNewEncoding()<0&&e.signalEncoderChange(Pe)},t}(iA),iat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sat=function(n){iat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Ur},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(iA),ns=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=$O+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!1);var a=new iA,o=[new Xst,a,new sat,new rat,new $st,new Kst],l=new eat(t);l.setSymbolShape(e),l.setSizeConstraints(r,i),t.startsWith(QO)&&t.endsWith(JO)?(l.writeCodeword(zst),l.setSkipAtEnd(2),l.pos+=QO.length):t.startsWith(ZO)&&t.endsWith(JO)&&(l.writeCodeword(Hst),l.setSkipAtEnd(2),l.pos+=ZO.length);var h=Pe;for(s&&(a.encodeMaximal(l),h=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[h].encode(l),l.getNewEncoding()>=0&&(h=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var g=l.getSymbolInfo().getDataCapacity();d<g&&h!==Pe&&h!==Tr&&h!==or&&l.writeCodeword("");var m=l.getCodewords();for(m.length()<g&&m.append($O);m.length()<g;)m.append(this.randomize253State(m.length()+1));return l.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===Yn&&i===Yn){for(var s=Math.min(e+3,t.length),a=e;a<s;a++)if(!this.isNativeX12(t.charCodeAt(a)))return Pe}else if(r===or&&i===or){for(var s=Math.min(e+4,t.length),a=e;a<s;a++)if(!this.isNativeEDIFACT(t.charCodeAt(a)))return Pe}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===Pe?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var s=0,a=new Uint8Array(6),o=[];;){if(e+s===t.length){$n.fill(a,0),$n.fill(o,0);var l=this.findMinimums(i,o,oe.MAX_VALUE,a),h=this.getMinimumCount(a);if(o[Pe]===l)return Pe;if(h===1){if(a[Tr]>0)return Tr;if(a[or]>0)return or;if(a[Ur]>0)return Ur;if(a[Yn]>0)return Yn}return vr}var d=t.charCodeAt(e+s);if(s++,this.isDigit(d)?i[Pe]+=.5:this.isExtendedASCII(d)?(i[Pe]=Math.ceil(i[Pe]),i[Pe]+=2):(i[Pe]=Math.ceil(i[Pe]),i[Pe]++),this.isNativeC40(d)?i[vr]+=2/3:this.isExtendedASCII(d)?i[vr]+=8/3:i[vr]+=4/3,this.isNativeText(d)?i[Ur]+=2/3:this.isExtendedASCII(d)?i[Ur]+=8/3:i[Ur]+=4/3,this.isNativeX12(d)?i[Yn]+=2/3:this.isExtendedASCII(d)?i[Yn]+=13/3:i[Yn]+=10/3,this.isNativeEDIFACT(d)?i[or]+=3/4:this.isExtendedASCII(d)?i[or]+=17/4:i[or]+=13/4,this.isSpecialB256(d)?i[Tr]+=4:i[Tr]++,s>=4){if($n.fill(a,0),$n.fill(o,0),this.findMinimums(i,o,oe.MAX_VALUE,a),o[Pe]<this.min(o[Tr],o[vr],o[Ur],o[Yn],o[or]))return Pe;if(o[Tr]<o[Pe]||o[Tr]+1<this.min(o[vr],o[Ur],o[Yn],o[or]))return Tr;if(o[or]+1<this.min(o[Tr],o[vr],o[Ur],o[Yn],o[Pe]))return or;if(o[Ur]+1<this.min(o[Tr],o[vr],o[or],o[Yn],o[Pe]))return Ur;if(o[Yn]+1<this.min(o[Tr],o[vr],o[or],o[Ur],o[Pe]))return Yn;if(o[vr]+1<this.min(o[Pe],o[Tr],o[or],o[Ur])){if(o[vr]<o[Yn])return vr;if(o[vr]===o[Yn]){for(var g=e+s+1;g<t.length;){var m=t.charCodeAt(g);if(this.isX12TermSep(m))return Yn;if(!this.isNativeX12(m))break;g++}return vr}}}}},n.min=function(t,e,r,i,s){var a=Math.min(t,Math.min(e,Math.min(r,i)));return s===void 0?a:Math.min(a,s)},n.findMinimums=function(t,e,r,i){for(var s=0;s<6;s++){var a=e[s]=Math.ceil(t[s]);r>a&&(r=a,$n.fill(i,0)),r===a&&(i[s]=i[s]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=oe.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),Cx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},t4=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return ji.encode(t,this.charset)!=null}catch{return!1}},n}(),aat=function(){function n(t,e,r){var i,s,a,o,l,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new t4(Lst.forName(N))}),this.encoders=[];var d=[];d.push(new t4(Vst.ISO_8859_1));for(var g=e!=null&&e.name.startsWith("UTF"),m=0;m<t.length;m++){var v=!1;try{for(var w=(i=void 0,Cx(d)),b=w.next();!b.done;b=w.next()){var E=b.value,S=t.charAt(m),T=S.charCodeAt(0);if(T===r||E.canEncode(S)){v=!0;break}}}catch(N){i={error:N}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}if(!v)try{for(var I=(a=void 0,Cx(this.ENCODERS)),k=I.next();!k.done;k=I.next()){var E=k.value;if(E.canEncode(t.charAt(m))){d.push(E),v=!0;break}}}catch(N){a={error:N}}finally{try{k&&!k.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}v||(g=!0)}if(d.length===1&&!g)this.encoders=[d[0]];else{this.encoders=[];var P=0;try{for(var j=Cx(d),M=j.next();!M.done;M=j.next()){var E=M.value;this.encoders[P++]=E}}catch(N){l={error:N}}finally{try{M&&!M.done&&(h=j.return)&&h.call(j)}finally{if(l)throw l.error}}}var C=-1;if(e!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&e.name===this.encoders[m].name){C=m;break}}this.priorityEncoderIndex=C}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return ji.encode(ye.getCharAt(t),this.encoders[e].name)},n}(),oat=3,cat=function(){function n(t,e,r){this.fnc1=r;var i=new aat(t,e,r);if(i.length()===1)for(var s=0;s<this.bytes.length;s++){var a=t.charAt(s).charCodeAt(0);this.bytes[s]=a===r?1e3:a}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new re,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,s,a){var o=t.charAt(i).charCodeAt(0),l=0,h=e.length();e.getPriorityEncoderIndex()>=0&&(o===a||e.canEncode(o,e.getPriorityEncoderIndex()))&&(l=e.getPriorityEncoderIndex(),h=l+1);for(var d=l;d<h;d++)(o===a||e.canEncode(o,d))&&this.addEdge(r,i+1,new e4(o,e,d,s,a))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,s=new e4[i+1][e.length()];this.addEdges(t,e,s,0,null,r);for(var a=1;a<=i;a++){for(var o=0;o<e.length();o++)s[a][o]!=null&&a<i&&this.addEdges(t,e,s,a,s[a][o],r);for(var o=0;o<e.length();o++)s[a-1][o]=null}for(var l=-1,h=oe.MAX_VALUE,o=0;o<e.length();o++)if(s[i][o]!=null){var d=s[i][o];d.cachedTotalSize<h&&(h=d.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+t+'"');for(var g=[],m=s[i][l];m!=null;){if(m.isFNC1())g.unshift(1e3);else for(var v=e.encode(m.c,m.encoderIndex),a=v.length-1;a>=0;a--)g.unshift(v[a]&255);var w=m.previous===null?0:m.previous.encoderIndex;w!==m.encoderIndex&&g.unshift(256+e.getECIValue(m.encoderIndex)),m=m.previous}for(var b=[],a=0;a<b.length;a++)b[a]=g[a];return b},n}(),e4=function(){function n(t,e,r,i,s){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=s,this.c=t===s?1e3:t;var a=this.isFNC1()?1:e.encode(t,r).length,o=i===null?0:i.encoderIndex;o!==r&&(a+=oat),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),lat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var n4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(n4||(n4={}));(function(n){lat(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r,i)||this;return o.shape=s,o.macroId=a,o}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(cat);var uat=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),r4=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),hat=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),fat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sA=function(n){fat(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.value=r,s.bitCount=i,s}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+oe.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(hat),dat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gat=function(n){dat(t,n);function t(e,r,i){var s=n.call(this,e,0,0)||this;return s.binaryShiftStart=r,s.binaryShiftByteCount=i,s}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(sA);function pat(n,t,e){return new gat(n,t,e)}function xd(n,t,e){return new sA(n,t,e)}var mat=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yo=0,R1=1,Bi=2,Rk=3,Bs=4,yat=new sA(null,0,0),Ix=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],vat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function _at(n){var t,e;try{for(var r=vat(n),i=r.next();!i.done;i=r.next()){var s=i.value;$n.fill(s,-1)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[Yo][Bs]=0,n[R1][Bs]=0,n[R1][Yo]=28,n[Rk][Bs]=0,n[Bi][Bs]=0,n[Bi][Yo]=15,n}var Dk=_at($n.createInt32Array(6,6)),xat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wat=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var s=Ix[this.mode][t];i=xd(i,s&65535,s>>16),r+=s>>16}var a=t===Bi?4:5;return i=xd(i,e,a),new n(i,t,0,r+a)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===Bi?4:5;return r=xd(r,Dk[this.mode][t],i),r=xd(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===Bs||this.mode===Bi){var s=Ix[r][Yo];e=xd(e,s&65535,s>>16),i+=s>>16,r=Yo}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(e,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(t+1)),o},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=pat(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(Ix[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],s=this.endBinaryShift(t.length).token;s!==null;s=s.getPrevious())i.unshift(s);var a=new hr;try{for(var o=xat(i),l=o.next();!l.done;l=o.next()){var h=l.value;h.appendTo(a,t)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n.prototype.toString=function(){return ye.format("%s bits=%d bytes=%d",mat[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(yat,Yo,0,0),n}();function bat(n){var t=ye.getCharCode(" "),e=ye.getCharCode("."),r=ye.getCharCode(",");n[Yo][t]=1;for(var i=ye.getCharCode("Z"),s=ye.getCharCode("A"),a=s;a<=i;a++)n[Yo][a]=a-s+2;n[R1][t]=1;for(var o=ye.getCharCode("z"),l=ye.getCharCode("a"),a=l;a<=o;a++)n[R1][a]=a-l+2;n[Bi][t]=1;for(var h=ye.getCharCode("9"),d=ye.getCharCode("0"),a=d;a<=h;a++)n[Bi][a]=a-d+2;n[Bi][r]=12,n[Bi][e]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<g.length;m++)n[Rk][ye.getCharCode(g[m])]=m;for(var v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<v.length;m++)ye.getCharCode(v[m])>0&&(n[Bs][ye.getCharCode(v[m])]=m);return n}var Rx=bat($n.createInt32Array(5,256)),im=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Eat=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=ye.getCharCode(" "),e=ye.getCharCode(`
`),r=r4.singletonList(wat.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ye.getCharCode("\r"):s=a===e?2:0;break;case ye.getCharCode("."):s=a===t?3:0;break;case ye.getCharCode(","):s=a===t?4:0;break;case ye.getCharCode(":"):s=a===t?5:0;break;default:s=0}s>0?(r=n.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}var o=r4.min(r,function(l,h){return l.getBitCount()-h.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,s=[];try{for(var a=im(t),o=a.next();!o.done;o=a.next()){var l=o.value;this.updateStateForChar(l,e,s)}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return n.simplifyStates(s)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,s=Rx[t.getMode()][i]>0,a=null,o=0;o<=Bs;o++){var l=Rx[o][i];if(l>0){if(a==null&&(a=t.endBinaryShift(e)),!s||o===t.getMode()||o===Bi){var h=a.latchAndAppend(o,l);r.push(h)}if(!s&&Dk[t.getMode()][o]>=0){var d=a.shiftAndAppend(o,l);r.push(d)}}}if(t.getBinaryShiftByteCount()>0||Rx[t.getMode()][i]===0){var g=t.addBinaryShiftChar(e);r.push(g)}},n.updateStateListForPair=function(t,e,r){var i,s,a=[];try{for(var o=im(t),l=o.next();!l.done;l=o.next()){var h=l.value;this.updateStateForPair(h,e,r,a)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(a)},n.updateStateForPair=function(t,e,r,i){var s=t.endBinaryShift(e);if(i.push(s.latchAndAppend(Bs,r)),t.getMode()!==Bs&&i.push(s.shiftAndAppend(Bs,r)),r===3||r===4){var a=s.latchAndAppend(Bi,16-r).latchAndAppend(Bi,1);i.push(a)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(o)}},n.simplifyStates=function(t){var e,r,i,s,a=[];try{for(var o=im(t),l=o.next();!l.done;l=o.next()){var h=l.value,d=!0,g=function(E){if(E.isBetterThanOrEqualTo(h))return d=!1,"break";h.isBetterThanOrEqualTo(E)&&(a=a.filter(function(S){return S!==E}))};try{for(var m=(i=void 0,im(a)),v=m.next();!v.done;v=m.next()){var w=v.value,b=g(w);if(b==="break")break}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}d&&a.push(h)}}catch(E){e={error:E}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n}(),Aat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new Eat(t).encode(),s=oe.truncDivision(i.getSize()*e,100)+11,a=i.getSize()+s,o,l,h,d,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,l=Math.abs(r),l>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ht(ye.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(l,o),d=n.WORD_SIZE[l];var m=h-h%d;if(g=n.stuffBits(i,d),g.getSize()+s>m)throw new Ht("Data to large for user specified layer");if(o&&g.getSize()>d*64)throw new Ht("Data to large for user specified layer")}else{d=0,g=null;for(var v=0;;v++){if(v>n.MAX_NB_BITS)throw new Ht("Data too large for an Aztec code");if(o=v<=3,l=o?v+1:v,h=n.totalBitsInLayer(l,o),!(a>h)){(g==null||d!==n.WORD_SIZE[l])&&(d=n.WORD_SIZE[l],g=n.stuffBits(i,d));var m=h-h%d;if(!(o&&g.getSize()>d*64)&&g.getSize()+s<=m)break}}}var w=n.generateCheckWords(g,h,d),b=g.getSize()/d,E=n.generateModeMessage(o,l,b),S=(o?11:14)+l*4,T=new Int32Array(S),I;if(o){I=S;for(var v=0;v<T.length;v++)T[v]=v}else{I=S+1+2*oe.truncDivision(oe.truncDivision(S,2)-1,15);for(var k=oe.truncDivision(S,2),P=oe.truncDivision(I,2),v=0;v<k;v++){var j=v+oe.truncDivision(v,15);T[k-v-1]=P-j-1,T[k+v]=P+j+1}}for(var M=new Js(I),v=0,C=0;v<l;v++){for(var N=(l-v)*4+(o?9:12),B=0;B<N;B++)for(var z=B*2,G=0;G<2;G++)w.get(C+z+G)&&M.set(T[v*2+G],T[v*2+B]),w.get(C+N*2+z+G)&&M.set(T[v*2+B],T[S-1-v*2-G]),w.get(C+N*4+z+G)&&M.set(T[S-1-v*2-G],T[S-1-v*2-B]),w.get(C+N*6+z+G)&&M.set(T[S-1-v*2-B],T[v*2+G]);C+=N*8}if(n.drawModeMessage(M,o,I,E),o)n.drawBullsEye(M,oe.truncDivision(I,2),5);else{n.drawBullsEye(M,oe.truncDivision(I,2),7);for(var v=0,B=0;v<oe.truncDivision(S,2)-1;v+=15,B+=16)for(var G=oe.truncDivision(I,2)&1;G<I;G+=2)M.set(oe.truncDivision(I,2)-B,G),M.set(oe.truncDivision(I,2)+B,G),M.set(G,oe.truncDivision(I,2)-B),M.set(G,oe.truncDivision(I,2)+B)}var F=new uat;return F.setCompact(o),F.setSize(I),F.setLayers(l),F.setCodeWords(b),F.setMatrix(M),F},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var s=e-i;s<=e+i;s++)t.set(s,e-i),t.set(s,e+i),t.set(e-i,s),t.set(e+i,s);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new hr;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var s=oe.truncDivision(r,2);if(e)for(var a=0;a<7;a++){var o=s-3+a;i.get(a)&&t.set(o,s-5),i.get(a+7)&&t.set(s+5,o),i.get(20-a)&&t.set(o,s+5),i.get(27-a)&&t.set(s-5,o)}else for(var a=0;a<10;a++){var o=s-5+a+oe.truncDivision(a,5);i.get(a)&&t.set(o,s-7),i.get(a+10)&&t.set(s+7,o),i.get(29-a)&&t.set(o,s+7),i.get(39-a)&&t.set(s-7,o)}},n.generateCheckWords=function(t,e,r){var i,s,a=t.getSize()/r,o=new Ck(n.getGF(r)),l=oe.truncDivision(e,r),h=n.bitsToWords(t,r,l);o.encode(h,l-a);var d=e%r,g=new hr;g.appendBits(0,d);try{for(var m=Aat(Array.from(h)),v=m.next();!v.done;v=m.next()){var w=v.value;g.appendBits(w,r)}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),s,a;for(s=0,a=t.getSize()/e;s<a;s++){for(var o=0,l=0;l<e;l++)o|=t.get(s*e+l)?1<<e-l-1:0;i[s]=o}return i},n.getGF=function(t){switch(t){case 4:return $r.AZTEC_PARAM;case 6:return $r.AZTEC_DATA_6;case 8:return $r.AZTEC_DATA_8;case 10:return $r.AZTEC_DATA_10;case 12:return $r.AZTEC_DATA_12;default:throw new Ht("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new hr,i=t.getSize(),s=(1<<e)-2,a=0;a<i;a+=e){for(var o=0,l=0;l<e;l++)(a+l>=i||t.get(a+l))&&(o|=1<<e-1-l);(o&s)===s?(r.appendBits(o&s,e),a--):(o&s)===0?(r.appendBits(o|1,e),a--):r.appendBits(o,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const Ok=rt.createContext(),Tat=({children:n})=>{const[t,e]=rt.useState({message:"",type:"",visible:!1}),r=rt.useCallback((i,s="info")=>{e({message:i,type:s,visible:!0}),setTimeout(()=>e({...t,visible:!1}),4e3)},[]);return O.jsxs(Ok.Provider,{value:{showToast:r},children:[n,t.visible&&O.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:O.jsx("div",{className:`toast show text-white bg-${t.type}`,children:O.jsx("div",{className:"toast-body fw-bold text-center",children:t.message})})})]})},Mk=()=>rt.useContext(Ok);var Dx={exports:{}},i4;function Sat(){return i4||(i4=1,function(n){var t=function(e){var r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(et,V,q){et[V]=q.value},a,o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",h=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function g(et,V,q){return Object.defineProperty(et,V,{value:q,enumerable:!0,configurable:!0,writable:!0}),et[V]}try{g({},"")}catch{g=function(V,q,ot){return V[q]=ot}}function m(et,V,q,ot){var nt=V&&V.prototype instanceof I?V:I,mt=Object.create(nt.prototype),_t=new K(ot||[]);return s(mt,"_invoke",{value:G(et,q,_t)}),mt}e.wrap=m;function v(et,V,q){try{return{type:"normal",arg:et.call(V,q)}}catch(ot){return{type:"throw",arg:ot}}}var w="suspendedStart",b="suspendedYield",E="executing",S="completed",T={};function I(){}function k(){}function P(){}var j={};g(j,l,function(){return this});var M=Object.getPrototypeOf,C=M&&M(M(ct([])));C&&C!==r&&i.call(C,l)&&(j=C);var N=P.prototype=I.prototype=Object.create(j);k.prototype=P,s(N,"constructor",{value:P,configurable:!0}),s(P,"constructor",{value:k,configurable:!0}),k.displayName=g(P,d,"GeneratorFunction");function B(et){["next","throw","return"].forEach(function(V){g(et,V,function(q){return this._invoke(V,q)})})}e.isGeneratorFunction=function(et){var V=typeof et=="function"&&et.constructor;return V?V===k||(V.displayName||V.name)==="GeneratorFunction":!1},e.mark=function(et){return Object.setPrototypeOf?Object.setPrototypeOf(et,P):(et.__proto__=P,g(et,d,"GeneratorFunction")),et.prototype=Object.create(N),et},e.awrap=function(et){return{__await:et}};function z(et,V){function q(mt,_t,wt,Zt){var Ut=v(et[mt],et,_t);if(Ut.type==="throw")Zt(Ut.arg);else{var kt=Ut.arg,zt=kt.value;return zt&&typeof zt=="object"&&i.call(zt,"__await")?V.resolve(zt.__await).then(function(te){q("next",te,wt,Zt)},function(te){q("throw",te,wt,Zt)}):V.resolve(zt).then(function(te){kt.value=te,wt(kt)},function(te){return q("throw",te,wt,Zt)})}}var ot;function nt(mt,_t){function wt(){return new V(function(Zt,Ut){q(mt,_t,Zt,Ut)})}return ot=ot?ot.then(wt,wt):wt()}s(this,"_invoke",{value:nt})}B(z.prototype),g(z.prototype,h,function(){return this}),e.AsyncIterator=z,e.async=function(et,V,q,ot,nt){nt===void 0&&(nt=Promise);var mt=new z(m(et,V,q,ot),nt);return e.isGeneratorFunction(V)?mt:mt.next().then(function(_t){return _t.done?_t.value:mt.next()})};function G(et,V,q){var ot=w;return function(mt,_t){if(ot===E)throw new Error("Generator is already running");if(ot===S){if(mt==="throw")throw _t;return vt()}for(q.method=mt,q.arg=_t;;){var wt=q.delegate;if(wt){var Zt=F(wt,q);if(Zt){if(Zt===T)continue;return Zt}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(ot===w)throw ot=S,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);ot=E;var Ut=v(et,V,q);if(Ut.type==="normal"){if(ot=q.done?S:b,Ut.arg===T)continue;return{value:Ut.arg,done:q.done}}else Ut.type==="throw"&&(ot=S,q.method="throw",q.arg=Ut.arg)}}}function F(et,V){var q=V.method,ot=et.iterator[q];if(ot===a)return V.delegate=null,q==="throw"&&et.iterator.return&&(V.method="return",V.arg=a,F(et,V),V.method==="throw")||q!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+q+"' method")),T;var nt=v(ot,et.iterator,V.arg);if(nt.type==="throw")return V.method="throw",V.arg=nt.arg,V.delegate=null,T;var mt=nt.arg;if(!mt)return V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,T;if(mt.done)V[et.resultName]=mt.value,V.next=et.nextLoc,V.method!=="return"&&(V.method="next",V.arg=a);else return mt;return V.delegate=null,T}B(N),g(N,d,"Generator"),g(N,l,function(){return this}),g(N,"toString",function(){return"[object Generator]"});function xt(et){var V={tryLoc:et[0]};1 in et&&(V.catchLoc=et[1]),2 in et&&(V.finallyLoc=et[2],V.afterLoc=et[3]),this.tryEntries.push(V)}function bt(et){var V=et.completion||{};V.type="normal",delete V.arg,et.completion=V}function K(et){this.tryEntries=[{tryLoc:"root"}],et.forEach(xt,this),this.reset(!0)}e.keys=function(et){var V=Object(et),q=[];for(var ot in V)q.push(ot);return q.reverse(),function nt(){for(;q.length;){var mt=q.pop();if(mt in V)return nt.value=mt,nt.done=!1,nt}return nt.done=!0,nt}};function ct(et){if(et){var V=et[l];if(V)return V.call(et);if(typeof et.next=="function")return et;if(!isNaN(et.length)){var q=-1,ot=function nt(){for(;++q<et.length;)if(i.call(et,q))return nt.value=et[q],nt.done=!1,nt;return nt.value=a,nt.done=!0,nt};return ot.next=ot}}return{next:vt}}e.values=ct;function vt(){return{value:a,done:!0}}return K.prototype={constructor:K,reset:function(et){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(bt),!et)for(var V in this)V.charAt(0)==="t"&&i.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=a)},stop:function(){this.done=!0;var et=this.tryEntries[0],V=et.completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(et){if(this.done)throw et;var V=this;function q(Zt,Ut){return mt.type="throw",mt.arg=et,V.next=Zt,Ut&&(V.method="next",V.arg=a),!!Ut}for(var ot=this.tryEntries.length-1;ot>=0;--ot){var nt=this.tryEntries[ot],mt=nt.completion;if(nt.tryLoc==="root")return q("end");if(nt.tryLoc<=this.prev){var _t=i.call(nt,"catchLoc"),wt=i.call(nt,"finallyLoc");if(_t&&wt){if(this.prev<nt.catchLoc)return q(nt.catchLoc,!0);if(this.prev<nt.finallyLoc)return q(nt.finallyLoc)}else if(_t){if(this.prev<nt.catchLoc)return q(nt.catchLoc,!0)}else if(wt){if(this.prev<nt.finallyLoc)return q(nt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(et,V){for(var q=this.tryEntries.length-1;q>=0;--q){var ot=this.tryEntries[q];if(ot.tryLoc<=this.prev&&i.call(ot,"finallyLoc")&&this.prev<ot.finallyLoc){var nt=ot;break}}nt&&(et==="break"||et==="continue")&&nt.tryLoc<=V&&V<=nt.finallyLoc&&(nt=null);var mt=nt?nt.completion:{};return mt.type=et,mt.arg=V,nt?(this.method="next",this.next=nt.finallyLoc,T):this.complete(mt)},complete:function(et,V){if(et.type==="throw")throw et.arg;return et.type==="break"||et.type==="continue"?this.next=et.arg:et.type==="return"?(this.rval=this.arg=et.arg,this.method="return",this.next="end"):et.type==="normal"&&V&&(this.next=V),T},finish:function(et){for(var V=this.tryEntries.length-1;V>=0;--V){var q=this.tryEntries[V];if(q.finallyLoc===et)return this.complete(q.completion,q.afterLoc),bt(q),T}},catch:function(et){for(var V=this.tryEntries.length-1;V>=0;--V){var q=this.tryEntries[V];if(q.tryLoc===et){var ot=q.completion;if(ot.type==="throw"){var nt=ot.arg;bt(q)}return nt}}throw new Error("illegal catch attempt")},delegateYield:function(et,V,q){return this.delegate={iterator:ct(et),resultName:V,nextLoc:q},this.method==="next"&&(this.arg=a),T}},e}(n.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Dx)),Dx.exports}var Ox,s4;function aA(){return s4||(s4=1,Ox=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`),Ox}var Mx,a4;function Nk(){if(a4)return Mx;a4=1;const n=aA();let t=0;return Mx=({id:e,action:r,payload:i={}})=>{let s=e;return typeof s>"u"&&(s=n("Job",t),t+=1),{id:s,action:r,payload:i}},Mx}var wd={},o4;function oA(){if(o4)return wd;o4=1;let n=!1;return wd.logging=n,wd.setLogging=t=>{n=t},wd.log=(...t)=>n?console.log.apply(this,t):null,wd}var Nx,c4;function Cat(){if(c4)return Nx;c4=1;const n=Nk(),{log:t}=oA(),e=aA();let r=0;return Nx=()=>{const i=e("Scheduler",r),s={},a={};let o=[];r+=1;const l=()=>o.length,h=()=>Object.keys(s).length,d=()=>{if(o.length!==0){const b=Object.keys(s);for(let E=0;E<b.length;E+=1)if(typeof a[b[E]]>"u"){o[0](s[b[E]]);break}}},g=(b,E)=>new Promise((S,T)=>{const I=n({action:b,payload:E});o.push(async k=>{o.shift(),a[k.id]=I;try{S(await k[b].apply(this,[...E,I.id]))}catch(P){T(P)}finally{delete a[k.id],d()}}),t(`[${i}]: Add ${I.id} to JobQueue`),t(`[${i}]: JobQueue length=${o.length}`),d()});return{addWorker:b=>(s[b.id]=b,t(`[${i}]: Add ${b.id}`),t(`[${i}]: Number of workers=${h()}`),d(),b.id),addJob:async(b,...E)=>{if(h()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return g(b,E)},terminate:async()=>{Object.keys(s).forEach(async b=>{await s[b].terminate()}),o=[]},getQueueLen:l,getNumWorkers:h}},Nx}function Iat(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Px,l4;function Rat(){return l4||(l4=1,Px=n=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof Iat=="function"&&(t.type="node"),typeof n>"u"?t:t[n]}),Px}var kx,u4;function Dat(){if(u4)return kx;u4=1;const t=Rat()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return kx=e=>{const r={...e};return["corePath","workerPath","langPath"].forEach(i=>{e[i]&&(r[i]=t(r[i]))}),r},kx}var Lx,h4;function Pk(){return h4||(h4=1,Lx={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Lx}const Oat="6.0.1",Mat={version:Oat};var Vx,f4;function Nat(){return f4||(f4=1,Vx={workerBlobURL:!0,logger:()=>{}}),Vx}var Bx,d4;function Pat(){if(d4)return Bx;d4=1;const n=Mat.version;return Bx={...Nat(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},Bx}var Fx,g4;function kat(){return g4||(g4=1,Fx=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(r))}else e=new Worker(n);return e}),Fx}var Ux,p4;function Lat(){return p4||(p4=1,Ux=n=>{n.terminate()}),Ux}var jx,m4;function Vat(){return m4||(m4=1,jx=(n,t)=>{n.onmessage=({data:e})=>{t(e)}}),jx}var zx,y4;function Bat(){return y4||(y4=1,zx=async(n,t)=>{n.postMessage(t)}),zx}var Hx,v4;function Fat(){if(v4)return Hx;v4=1;const n=e=>new Promise((r,i)=>{const s=new FileReader;s.onload=()=>{r(s.result)},s.onerror=({target:{error:{code:a}}})=>{i(Error(`File could not be read! Code=${a}`))},s.readAsArrayBuffer(e)}),t=async e=>{let r=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(r=await t(e.src)),e.tagName==="VIDEO"&&(r=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(i=>{e.toBlob(async s=>{r=await n(s),i()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const i=await e.convertToBlob();r=await n(i)}else(e instanceof File||e instanceof Blob)&&(r=await n(e));return new Uint8Array(r)};return Hx=t,Hx}var Gx,_4;function Uat(){if(_4)return Gx;_4=1;const n=Pat(),t=kat(),e=Lat(),r=Vat(),i=Bat(),s=Fat();return Gx={defaultOptions:n,spawnWorker:t,terminateWorker:e,onMessage:r,send:i,loadImage:s},Gx}var Wx,x4;function kk(){if(x4)return Wx;x4=1;const n=Dat(),t=Nk(),{log:e}=oA(),r=aA(),i=Pk(),{defaultOptions:s,spawnWorker:a,terminateWorker:o,onMessage:l,loadImage:h,send:d}=Uat();let g=0;return Wx=async(m="eng",v=i.LSTM_ONLY,w={},b={})=>{const E=r("Worker",g),{logger:S,errorHandler:T,...I}=n({...s,...w}),k={},P=typeof m=="string"?m.split("+"):m;let j=v,M=b;const C=[i.DEFAULT,i.LSTM_ONLY].includes(v)&&!I.legacyCore;let N,B;const z=new Promise((kt,zt)=>{B=kt,N=zt}),G=kt=>{N(kt.message)};let F=a(I);F.onerror=G,g+=1;const xt=({id:kt,action:zt,payload:te})=>new Promise((Fe,Ke)=>{e(`[${E}]: Start ${kt}, action=${zt}`);const rn=`${zt}-${kt}`;k[rn]={resolve:Fe,reject:Ke},d(F,{workerId:E,jobId:kt,action:zt,payload:te})}),bt=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),K=kt=>xt(t({id:kt,action:"load",payload:{options:{lstmOnly:C,corePath:I.corePath,logging:I.logging}}})),ct=(kt,zt,te)=>xt(t({id:te,action:"FS",payload:{method:"writeFile",args:[kt,zt]}})),vt=(kt,zt)=>xt(t({id:zt,action:"FS",payload:{method:"readFile",args:[kt,{encoding:"utf8"}]}})),et=(kt,zt)=>xt(t({id:zt,action:"FS",payload:{method:"unlink",args:[kt]}})),V=(kt,zt,te)=>xt(t({id:te,action:"FS",payload:{method:kt,args:zt}})),q=(kt,zt)=>xt(t({id:zt,action:"loadLanguage",payload:{langs:kt,options:{langPath:I.langPath,dataPath:I.dataPath,cachePath:I.cachePath,cacheMethod:I.cacheMethod,gzip:I.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(j)&&!I.legacyLang}}})),ot=(kt,zt,te,Fe)=>xt(t({id:Fe,action:"initialize",payload:{langs:kt,oem:zt,config:te}})),nt=(kt="eng",zt,te,Fe)=>{if(C&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(zt))throw Error("Legacy model requested but code missing.");const Ke=zt||j;j=Ke;const rn=te||M;M=rn;const Rt=(typeof kt=="string"?kt.split("+"):kt).filter(Nt=>!P.includes(Nt));return P.push(...Rt),Rt.length>0?q(Rt,Fe).then(()=>ot(kt,Ke,rn,Fe)):ot(kt,Ke,rn,Fe)},mt=(kt={},zt)=>xt(t({id:zt,action:"setParameters",payload:{params:kt}})),_t=async(kt,zt={},te={text:!0},Fe)=>xt(t({id:Fe,action:"recognize",payload:{image:await h(kt),options:zt,output:te}})),wt=async(kt,zt)=>{if(C)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return xt(t({id:zt,action:"detect",payload:{image:await h(kt)}}))},Zt=async()=>(F!==null&&(o(F),F=null),Promise.resolve());l(F,({workerId:kt,jobId:zt,status:te,action:Fe,data:Ke})=>{const rn=`${Fe}-${zt}`;if(te==="resolve")e(`[${kt}]: Complete ${zt}`),k[rn].resolve({jobId:zt,data:Ke}),delete k[rn];else if(te==="reject")if(k[rn].reject(Ke),delete k[rn],Fe==="load"&&N(Ke),T)T(Ke);else throw Error(Ke);else te==="progress"&&S({...Ke,userJobId:zt})});const Ut={id:E,worker:F,load:bt,writeText:ct,readText:vt,removeFile:et,FS:V,reinitialize:nt,setParameters:mt,recognize:_t,detect:wt,terminate:Zt};return K().then(()=>q(m)).then(()=>ot(m,v,b)).then(()=>B(Ut)).catch(()=>{}),z},Wx}var qx,w4;function jat(){if(w4)return qx;w4=1;const n=kk();return qx={recognize:async(r,i,s)=>{const a=await n(i,1,s);return a.recognize(r).finally(async()=>{await a.terminate()})},detect:async(r,i)=>{const s=await n("osd",0,i);return s.detect(r).finally(async()=>{await s.terminate()})}},qx}var Yx,b4;function zat(){return b4||(b4=1,Yx={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Yx}var Xx,E4;function Hat(){return E4||(E4=1,Xx={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Xx}var Kx,A4;function Gat(){if(A4)return Kx;A4=1,Sat();const n=Cat(),t=kk(),e=jat(),r=zat(),i=Pk(),s=Hat(),{setLogging:a}=oA();return Kx={languages:r,OEM:i,PSM:s,createScheduler:n,createWorker:t,setLogging:a,...e},Kx}var Wat=Gat();const T4=Nw(Wat),qat={Fat:["fat","saturates","of which saturates"],Carbohydrate:["carbohydrate","carb"],Sugar:["sugar","sugars","of which sugars"],Fibre:["fibre","fiber"],Protein:["protein","protien"],Salt:["salt","sodium"]};function Yat(n){const t=n.match(/([\d.]+)\s*(g|mg)?/i);if(t){const e=parseFloat(t[1]);if(!isNaN(e)&&e<1e3)return e}return null}function S4(n){const t=n.split(`
`).map(r=>r.trim()).filter(Boolean),e=[];for(const r of t)for(const i of Object.keys(qat))if(r.toLowerCase().includes(i.toLowerCase())){const s=Yat(r);s!==null&&!e.find(a=>a.type===i)&&e.push({type:i,count:s.toFixed(2),serving:"1",total:s.toFixed(2)})}return e}function Xat({isOpen:n,onClose:t,onSave:e,editMeal:r,user:i}){const[s,a]=rt.useState("Breakfast"),[o,l]=rt.useState(new Date),[h,d]=rt.useState([""]),[g,m]=rt.useState([[{type:"Protein",count:"",serving:"1",total:""}]]),[v,w]=rt.useState(!1),[b,E]=rt.useState(!1),[S,T]=rt.useState(!1),I=rt.useRef(null),[k,P]=rt.useState(null),[j,M]=rt.useState(null),{showToast:C}=Mk(),[N,B]=rt.useState(!1),z=[{label:"100 g",value:100},{label:"slice (30 g)",value:30},{label:"cup (200 ml)",value:200},{label:"package (250 g)",value:250}],[G,F]=rt.useState(1),[xt,bt]=rt.useState(z[0].value),[K,ct]=rt.useState(0);rt.useEffect(()=>{r&&(Ut(),P(null),a(r.mealType),l(new Date(r.timestamp)),d(r.foodItems.map(Rt=>Rt.name)),m(r.foodItems.map(Rt=>Rt.nutrients)),w(!0),T(!1),E(!1))},[r]);const vt=["Protein","Fat","Carbohydrate","Sugar","Sugars","Fibre","Fiber","Salt","Caffeine"],et=(Rt="")=>{const Nt=Rt.toLowerCase();return Nt==="sugars"?"Sugar":Nt==="fiber"?"Fibre":Nt==="proteins"?"Protein":Nt==="carbohydrates"?"Carbohydrate":Nt==="saturated fat"?"Fat":Rt},V=()=>{Ut(),P(null),m([[{type:"Protein",count:"",serving:"1",total:""}]]),d([""]),l(new Date),w(!1),T(!1),E(!1),M(null)},q=Rt=>{Ut(),w(Rt==="manual"),T(Rt==="auto"),E(Rt==="scan")},ot=()=>{m([...g,[{type:"Protein",count:"",serving:"1",total:""}]]),d([...h,""])},nt=Rt=>{const Nt=[...g];Nt[Rt].push({type:"Protein",count:"",serving:"1",total:""}),m(Nt)},mt=(Rt,Nt)=>{const pt=[...g];pt[Rt].splice(Nt,1),m(pt)},_t=g.every(Rt=>Rt.every(Nt=>!Nt.count||parseFloat(Nt.count)===0)),wt=(Rt,Nt,pt,Pt)=>{const Jt=[...g],Et=Jt[Rt];if(pt==="serving")Et.forEach(Vt=>{Vt.serving=Pt;const De=parseFloat(Vt.count)||0,En=parseFloat(Pt)||1;Vt.total=(De*En).toFixed(2)});else{const Vt=Et[Nt];Vt[pt]=Pt;const De=parseFloat(Vt.count)||0,En=parseFloat(Vt.serving)||1;Vt.total=(De*En).toFixed(2)}m(Jt)},Zt=()=>{const Rt=g.map((pt,Pt)=>({name:h[Pt]||`Food ${Pt+1}`,nutrients:pt})),Nt={mealType:s,date:o.toISOString().split("T")[0],timestamp:o.toISOString(),foodItems:Rt,kcal:j||rn(Rt)};e(Nt),V(),t()},Ut=()=>{const Rt=I.current;Rt&&Rt.srcObject&&(Rt.srcObject.getTracks().forEach(Nt=>Nt.stop()),Rt.srcObject=null),E(!1)},kt=()=>{const Rt=I.current;if(!Rt||Rt.videoWidth===0){C("Camera not ready yet. Wait a moment.");return}const Nt=document.createElement("canvas");Nt.width=Rt.videoWidth,Nt.height=Rt.videoHeight;const pt=Nt.getContext("2d");pt.drawImage(Rt,0,0);const Pt=pt.getImageData(0,0,Nt.width,Nt.height),Jt=Pt.data;for(let Et=0;Et<Jt.length;Et+=4){const Vt=(Jt[Et]+Jt[Et+1]+Jt[Et+2])/3;Jt[Et]=Vt,Jt[Et+1]=Vt,Jt[Et+2]=Vt}pt.putImageData(Pt,0,0),T4.recognize(Nt,"eng").then(({data:{text:Et}})=>{const Vt=S4(Et);Vt.length>0?(m([Vt]),q("manual")):C("No nutritional values detected. Try again or enter manually."),Ut()})},zt=async(Rt,Nt)=>{var pt;try{const Et=(pt=(await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Rt)}&search_simple=1&action=process&json=1`)).json()).products)==null?void 0:pt.find(fe=>fe.nutriments&&fe.nutriments["energy-kcal_100g"]&&fe.nutriments.proteins_100g);if(!Et||!Et.nutriments)throw new Error("No valid nutrition info found.");const Vt=Et.nutriments,De={Protein:Vt.proteins_100g,Fat:Vt.fat_100g,Carbohydrate:Vt.carbohydrates_100g,Sugar:Vt.sugars_100g,Fibre:Vt.fiber_100g,Salt:Vt.salt_100g,Caffeine:Vt.caffeine_100g},En=Object.entries(De).filter(([fe,Kt])=>vt.includes(fe)&&Kt!==void 0).map(([fe,Kt])=>({type:fe,count:parseFloat(Kt).toFixed(2),serving:"1",total:parseFloat(Kt).toFixed(2)})),Hr=[...g];Hr[Nt]=En,m(Hr),q("auto")}catch{C(" Could not fetch nutrition info. Try a more specific food name.")}},te=async Rt=>{const Nt=Rt.target.files[0];if(!Nt)return;const pt=new Image;pt.src=URL.createObjectURL(Nt),pt.onload=async()=>{const Pt=new Sst;try{const Jt=await Pt.decodeFromImageElement(pt);await Fe(Jt.getText())}catch{B(!0)}}},Fe=async Rt=>{try{const pt=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${Rt}.json`)).json();if(pt.status===0){C(" Product not found.");return}const Pt=pt.product.nutriments,Jt=pt.product.product_name||"Scanned Product",Et={Fat:Pt.fat_100g,Carbohydrate:Pt.carbohydrates_100g,Protein:Pt.proteins_100g,Sugar:Pt.sugars_100g,Fibre:Pt.fiber_100g,Salt:Pt.salt_100g,Caffeine:Pt.caffeine_100g},Vt=parseFloat(Pt["energy-kcal_100g"])||0;M(Vt);const De=Object.entries(Et).filter(([En,Hr])=>vt.includes(En)&&Hr!==void 0).map(([En,Hr])=>({type:En,count:parseFloat(Hr).toFixed(2),serving:"1",total:parseFloat(Hr).toFixed(2)}));d([Jt]),m([De]),q("manual")}catch(Nt){C(" Nutrition fetch failed."),console.error(Nt)}},Ke=async Rt=>{const Nt=Rt.target.files[0];if(!Nt)return;const pt=new Image;pt.src=URL.createObjectURL(Nt),pt.onload=()=>{const Pt=document.createElement("canvas");Pt.width=pt.width,Pt.height=pt.height,Pt.getContext("2d").drawImage(pt,0,0),T4.recognize(Pt,"eng").then(({data:{text:Et}})=>{const Vt=S4(Et);Vt.length>0?(m([Vt]),w(!0),C(" Nutrients extracted from label","success")):C(" Could not detect nutrients. Try again or enter manually.","warning")})}},rn=Rt=>{let Nt=0;return Rt.forEach(pt=>{pt.nutrients.forEach(Pt=>{(Pt.type.toLowerCase().includes("calorie")||Pt.type.toLowerCase().includes("kcal"))&&(Nt+=parseFloat(Pt.total||0))})}),Nt};if(!n)return null;if(k===null)return O.jsx("div",{className:"modal-backdrop",children:O.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[O.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),O.jsxs("div",{className:"d-flex flex-column gap-2",children:[O.jsx("button",{className:"btn btn-primary",onClick:()=>P("meal"),children:"Log Meal"}),O.jsx("button",{className:"btn btn-outline-light",onClick:()=>P("weight"),children:"Log Weight"}),O.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{V(),t()},children:"Cancel"})]})]})});return O.jsxs(O.Fragment,{children:[k===null&&O.jsx("div",{className:"modal-backdrop",children:O.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[O.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),O.jsxs("div",{className:"d-flex flex-column gap-2",children:[O.jsx("button",{className:"btn btn-primary",onClick:()=>P("meal"),children:" Log Meal"}),O.jsx("button",{className:"btn btn-outline-light",onClick:()=>P("weight"),children:" Log Weight"}),O.jsx("button",{className:"btn btn-secondary mt-2",onClick:()=>{V(),t()},children:"Cancel"})]})]})}),k==="meal"&&O.jsx("div",{className:"modal-backdrop",children:O.jsxs("div",{className:"modal-container bg-dark",children:[O.jsxs("div",{className:"modal-header col-md-12 mb-2",style:{display:"flex"},children:[O.jsxs("div",{style:{display:"flex",width:"100%",marginRight:"5%",alignItems:"center"},children:[O.jsx("p",{className:"ModelTitleName",children:"Select Meal"}),O.jsxs("select",{className:"DropDownMeal",value:s,onChange:Rt=>a(Rt.target.value),children:[O.jsx("option",{children:"Breakfast"}),O.jsx("option",{children:"Lunch"}),O.jsx("option",{children:"Dinner"})]})]}),O.jsx("input",{type:"date",className:"form-control",value:o.toISOString().split("T")[0],onChange:Rt=>l(new Date(Rt.target.value)),max:new Date().toISOString().split("T")[0],style:{width:"30%"}})]}),O.jsxs("div",{className:"manual-scan-buttons mb-2",children:[O.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>q("manual"),children:"Manual Entry"}),O.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>q("auto"),children:"Auto Fill"}),O.jsxs("label",{className:"btn btn-primary btn-sm",children:["Scan Barcode",O.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:te,style:{display:"none"}})]})]}),N&&O.jsx("div",{className:"modal-backdrop",children:O.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[O.jsx("h5",{className:"mb-3",children:"Barcode not recognized"}),O.jsx("p",{children:"Would you like to try scanning the nutrition label instead?"}),O.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[O.jsx("button",{className:"btn btn-secondary",onClick:()=>B(!1),children:"Cancel"}),O.jsxs("label",{className:"btn btn-primary",children:[" Scan Label",O.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:Rt=>{Ke(Rt),B(!1)},style:{display:"none"}})]})]})]})}),b&&O.jsxs("div",{className:"scan-box text-center",children:[O.jsx("video",{ref:I,style:{width:"100%",maxHeight:"200px"}}),O.jsx("button",{className:"btn btn-primary mt-2",onClick:kt,children:"Capture"}),O.jsx("button",{className:"btn btn-danger mt-2 ms-2",onClick:Ut,children:"Cancel"})]}),v&&ri(),S&&ri(!0),O.jsxs("div",{className:"modal-footer mt-3",children:[O.jsx("button",{className:"btn btn-save btn-primary",onClick:Zt,disabled:_t,children:"Save"}),O.jsx("button",{className:"btn btn-exit btn-danger",onClick:()=>{V(),t()},children:"Exit"})]})]})}),k==="weight"&&O.jsx("div",{className:"modal-backdrop",children:O.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[O.jsx(KJ,{user:i}),O.jsx("div",{className:"d-flex justify-content-end",children:O.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{V(),t()},children:"Close"})})]})})]});function ri(Rt=!1){return O.jsxs("div",{className:"TotalFoodSection",children:[g.map((Nt,pt)=>O.jsxs("div",{className:"food-section",children:[O.jsxs("div",{className:"FoodNameSection d-flex align-items-center gap-2",children:[O.jsx("textarea",{className:"FoodNameTextArea",value:h[pt],style:{width:"100%"},onChange:Pt=>{const Jt=[...h];Jt[pt]=Pt.target.value,d(Jt)},placeholder:"Enter food name (e.g., boiled egg)"}),Rt&&O.jsx("button",{className:"btn btn-sm btn-info",style:{fontSize:"12px",width:"35%"},onClick:()=>zt(h[pt],pt),children:" Auto-Fill"})]}),O.jsxs("div",{className:"d-flex align-items-center mb-3 mt-2",children:[O.jsx("input",{type:"number",min:"0.1",step:"0.1",value:G,onChange:Pt=>F(parseFloat(Pt.target.value)||0),className:"form-control me-2",style:{width:"80px"}}),O.jsx("select",{className:"form-select",value:xt,onChange:Pt=>bt(Pt.target.value),style:{flex:1},children:z.map((Pt,Jt)=>O.jsx("option",{value:Pt.value,children:Pt.label},Jt))})]}),O.jsxs("div",{className:"row fw-bold mb-2 text-white",style:{fontSize:"12px",padding:"0 10px"},children:[O.jsx("div",{className:"col",children:"Type"}),O.jsx("div",{className:"col",children:"Count (per 100g)"}),O.jsx("div",{className:"col",children:"Total"}),O.jsx("div",{className:"col",children:"Remove"})]}),O.jsx("div",{className:"SplitTable",children:Nt.map((Pt,Jt)=>{const Et=xt==="custom"?K:xt,Vt=Et>0?G*Et/100:1;return O.jsxs("div",{className:"row mb-1",children:[O.jsxs("div",{className:"col",children:[O.jsx("input",{list:`nutrient-options-${pt}-${Jt}`,className:"form-control",value:Pt.type,onChange:De=>{const En=et(De.target.value);wt(pt,Jt,"type",En)}}),O.jsx("datalist",{id:`nutrient-options-${pt}-${Jt}`,children:vt.map(De=>O.jsx("option",{value:De},De))})]}),O.jsx("div",{className:"col",children:O.jsx("input",{type:"number",className:"form-control",value:Pt.count,onChange:De=>wt(pt,Jt,"count",De.target.value)})}),O.jsx("div",{className:"col",children:O.jsx("input",{type:"number",className:"form-control",value:(parseFloat(Pt.count||0)*Vt).toFixed(2),disabled:!0})}),O.jsx("div",{className:"col text-center",children:O.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>mt(pt,Jt),children:""})})]},Jt)})}),O.jsx("button",{className:"AddItemButton mt-1",onClick:()=>nt(pt),children:"Add Nutrient"})]},pt)),O.jsx("button",{className:"AddItemButton mt-3",onClick:ot,children:"Add Food Item"})]})}}const Dw="/knowurfood/assets/Logo-L9hp3FVR.png",Kat=async n=>{const t=za(_i,"users",n),e=await HE(t);return e.exists()?e.data():null};function $at({onLoginSuccess:n}){const[t,e]=rt.useState("login"),[r,i]=rt.useState(1),[s,a]=rt.useState(""),[o,l]=rt.useState(""),[h,d]=rt.useState(""),[g,m]=rt.useState(""),[v,w]=rt.useState(""),[b,E]=rt.useState(2e3),[S,T]=rt.useState("Breakfast,Lunch,Dinner"),[I,k]=rt.useState("g"),[P,j]=rt.useState(""),[M,C]=rt.useState(""),[N,B]=rt.useState(""),[z,G]=rt.useState(""),[F,xt]=rt.useState("08:00"),[bt,K]=rt.useState("13:00"),[ct,vt]=rt.useState("19:00"),[et,V]=rt.useState(""),[q,ot]=rt.useState("male"),[nt,mt]=rt.useState(""),[_t,wt]=rt.useState({}),[Zt,Ut]=rt.useState(!1),[kt,zt]=rt.useState(!1),[te,Fe]=rt.useState(!1);rt.useEffect(()=>{if(P&&M&&N&&z&&et&&q){const pt=Math.max(1,Math.ceil((new Date(z)-new Date)/864e5)),Jt=(N-P)*7700/pt,Et=q==="male"?10*P+6.25*M-5*et+5:10*P+6.25*M-5*et-161,Vt=Math.round(Et+Jt);isNaN(Vt)||E(Vt)}},[P,M,N,z,et,q]);const Ke=()=>{a(""),l(""),d(""),m(""),w(""),E(2e3),T("Breakfast,Lunch,Dinner"),k("g"),j(""),C(""),B(""),G(""),xt("08:00"),K("13:00"),vt("19:00"),V(""),ot("male"),mt(""),wt({}),i(1),Fe(!1)},rn=()=>{e(pt=>pt==="login"?"register":"login"),Ke()},ri=()=>{const pt={};if(r===1&&(s||(pt.username="Email is required"),o||(pt.password="Password is required"),h||(pt.confirmPassword="Please confirm your password"),o&&h&&o!==h&&(pt.confirmPassword="Passwords do not match")),r===2&&(g||(pt.firstName="First name is required"),v||(pt.lastName="Last name is required"),et||(pt.age="Age is required"),P||(pt.currentWeight="Current weight is required"),M||(pt.height="Height is required"),N||(pt.goalWeight="Goal weight is required"),z||(pt.goalDate="Goal date is required")),Object.keys(pt).length>0){wt(pt);return}wt({}),mt(""),i(r+1)},Rt=async pt=>{pt.preventDefault(),mt(""),wt({}),Ut(!0);try{let Pt;if(t==="register")Pt=await qJ({email:s,password:o,firstName:g,lastName:v,calorieGoal:Number(b),mealOrder:S.split(","),unit:I,currentWeight:parseFloat(P),height:parseFloat(M),goalWeight:parseFloat(N),goalDate:z,breakfastTime:F,lunchTime:bt,dinnerTime:ct,age:parseInt(et),gender:q});else{const Jt=Kb();await YX(Jt,te?y8:qb);const De=(await GX(Jt,s,o)).user;te?localStorage.setItem("rememberMe","true"):localStorage.removeItem("rememberMe");const En=await Kat(De.uid);Pt={uid:De.uid,email:De.email,...En}}n(Pt)}catch(Pt){mt(Pt.message)}finally{Ut(!1)}},Nt=()=>{switch(r){case 1:return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Email"}),O.jsx("input",{type:"email",className:`form-control ${_t.username?"is-invalid":""}`,value:s,onChange:pt=>a(pt.target.value)}),_t.username&&O.jsx("div",{className:"text-danger",children:_t.username})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Password"}),O.jsx("input",{type:kt?"text":"password",className:`form-control ${_t.password?"is-invalid":""}`,value:o,onChange:pt=>l(pt.target.value)}),_t.password&&O.jsx("div",{className:"text-danger",children:_t.password})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Confirm Password"}),O.jsx("input",{type:kt?"text":"password",className:`form-control ${_t.confirmPassword?"is-invalid":""}`,value:h,onChange:pt=>d(pt.target.value)}),_t.confirmPassword&&O.jsx("div",{className:"text-danger",children:_t.confirmPassword})]})]});case 2:return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"First Name"}),O.jsx("input",{type:"text",className:`form-control ${_t.firstName?"is-invalid":""}`,value:g,onChange:pt=>m(pt.target.value)}),_t.firstName&&O.jsx("div",{className:"text-danger",children:_t.firstName})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Last Name"}),O.jsx("input",{type:"text",className:`form-control ${_t.lastName?"is-invalid":""}`,value:v,onChange:pt=>w(pt.target.value)}),_t.lastName&&O.jsx("div",{className:"text-danger",children:_t.lastName})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Age"}),O.jsx("input",{type:"number",className:`form-control ${_t.age?"is-invalid":""}`,value:et,onChange:pt=>V(pt.target.value)}),_t.age&&O.jsx("div",{className:"text-danger",children:_t.age})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Gender"}),O.jsxs("select",{className:"form-control",value:q,onChange:pt=>ot(pt.target.value),children:[O.jsx("option",{value:"male",children:"Male"}),O.jsx("option",{value:"female",children:"Female"})]})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Current Weight (kg)"}),O.jsx("input",{type:"number",className:`form-control ${_t.currentWeight?"is-invalid":""}`,value:P,onChange:pt=>j(pt.target.value)}),_t.currentWeight&&O.jsx("div",{className:"text-danger",children:_t.currentWeight})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Height (cm)"}),O.jsx("input",{type:"number",className:`form-control ${_t.height?"is-invalid":""}`,value:M,onChange:pt=>C(pt.target.value)}),_t.height&&O.jsx("div",{className:"text-danger",children:_t.height})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Goal Weight (kg)"}),O.jsx("input",{type:"number",className:`form-control ${_t.goalWeight?"is-invalid":""}`,value:N,onChange:pt=>B(pt.target.value)}),_t.goalWeight&&O.jsx("div",{className:"text-danger",children:_t.goalWeight})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Goal Date"}),O.jsx("input",{type:"date",className:`form-control ${_t.goalDate?"is-invalid":""}`,value:z,onChange:pt=>G(pt.target.value)}),_t.goalDate&&O.jsx("div",{className:"text-danger",children:_t.goalDate})]})]});case 3:return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Calorie Goal"}),O.jsx("input",{type:"number",className:"form-control",value:b,onChange:pt=>E(pt.target.value)})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Meal Order"}),O.jsxs("select",{className:"form-control",value:S,onChange:pt=>T(pt.target.value),children:[O.jsx("option",{value:"Breakfast,Lunch,Dinner",children:"Breakfast  Lunch  Dinner"}),O.jsx("option",{value:"Dinner,Lunch,Breakfast",children:"Dinner  Lunch  Breakfast"})]})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Preferred Unit"}),O.jsxs("select",{className:"form-control",value:I,onChange:pt=>k(pt.target.value),children:[O.jsx("option",{value:"g",children:"Grams"}),O.jsx("option",{value:"mg",children:"Milligrams"}),O.jsx("option",{value:"kcal",children:"Calories"})]})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Breakfast Time"}),O.jsx("input",{type:"time",className:"form-control",value:F,onChange:pt=>xt(pt.target.value)})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Lunch Time"}),O.jsx("input",{type:"time",className:"form-control",value:bt,onChange:pt=>K(pt.target.value)})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Dinner Time"}),O.jsx("input",{type:"time",className:"form-control",value:ct,onChange:pt=>vt(pt.target.value)})]})]});default:return null}};return O.jsxs("div",{className:"auth-container fade-slide-in",children:[O.jsx("div",{className:"text-center",children:O.jsx("img",{src:Dw,alt:"KnowUrFood Logo",style:{width:"200px"}})}),O.jsxs("div",{className:"auth-box shadow rounded",children:[O.jsx("h2",{className:"auth-title",children:t==="login"?"LOGIN":"REGISTER"}),O.jsx("form",{onSubmit:pt=>pt.preventDefault(),className:"auth-form",children:t==="login"?O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Email"}),O.jsx("input",{type:"email",className:"form-control",value:s,onChange:pt=>a(pt.target.value),required:!0})]}),O.jsxs("div",{className:"form-row",children:[O.jsx("label",{children:"Password"}),O.jsx("input",{type:kt?"text":"password",className:"form-control",value:o,onChange:pt=>l(pt.target.value),required:!0})]}),O.jsxs("div",{className:"form-check",children:[O.jsx("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",checked:te,onChange:pt=>Fe(pt.target.checked)}),O.jsx("label",{className:"form-check-label",htmlFor:"rememberMe",children:"Remember Me"})]}),O.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3 mb-2",onClick:Rt,disabled:Zt,children:Zt?O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Logging in..."]}):"Login"})]}):O.jsxs("div",{className:`fade-step step-${r}`,children:[Nt(),O.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[r>1&&O.jsx("button",{type:"button",className:"btn btn-outline-light",onClick:()=>i(r-1),children:" Back"}),r<3?O.jsx("button",{type:"button",className:"btn btn-primary ms-auto",onClick:ri,children:"Next "}):O.jsx("button",{type:"submit",onClick:Rt,className:"btn btn-success ms-auto",disabled:Zt,children:Zt?O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Registering..."]}):"Register"})]})]})}),O.jsxs("p",{className:"text-white text-center mt-3",children:[t==="login"?"Don't have an account?":"Already have an account?"," ",O.jsx("span",{className:"text-link",onClick:rn,children:t==="login"?"Register":"Login"})]}),nt&&O.jsx("p",{className:"text-danger text-center mt-2",children:nt})]})]})}function Qat({user:n,meals:t,onLogout:e,clearAllMeals:r}){const[i,s]=rt.useState(""),[a,o]=rt.useState(""),[l,h]=rt.useState(25),[d,g]=rt.useState("male"),[m,v]=rt.useState(""),[w,b]=rt.useState(""),[E,S]=rt.useState(""),[T,I]=rt.useState(""),[k,P]=rt.useState("Breakfast-Lunch-Dinner"),[j,M]=rt.useState("g"),[C,N]=rt.useState(!1),[B,z]=rt.useState(!1),[G,F]=rt.useState("08:00"),[xt,bt]=rt.useState("13:00"),[K,ct]=rt.useState("19:00"),[vt,et]=rt.useState(""),[V,q]=rt.useState(""),[ot,nt]=rt.useState(""),[mt,_t]=rt.useState(!1),{showToast:wt}=Mk(),Zt=n.level||1,kt=(n.xp||0)%100,zt=100,te=kt/zt*100,Fe=n.badges||[];rt.useEffect(()=>{var Et;n&&(s(n.firstName||""),o(n.lastName||""),h(n.age||25),g(n.gender||"male"),v(n.height||""),b(n.currentWeight||""),S(n.goalWeight||""),I(n.goalDate||""),P(((Et=n.mealOrder)==null?void 0:Et.join("-"))||"Breakfast-Lunch-Dinner"),M(n.unit||"g"),N(n.darkMode??!1),F(n.breakfastTime||"08:00"),bt(n.lunchTime||"13:00"),ct(n.dinnerTime||"19:00"))},[n]);const Ke=async()=>{const Et={firstName:i,lastName:a,age:l,gender:d,height:m,currentWeight:w,goalWeight:E,goalDate:T,mealOrder:k.split("-"),unit:j,darkMode:C,breakfastTime:G,lunchTime:xt,dinnerTime:K};await pO(n.uid,Et),wt("Preferences updated successfully!","success")},rn=()=>{const Et=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),Vt=document.createElement("a");Vt.href=URL.createObjectURL(Et),Vt.download="meals.json",Vt.click()},ri=()=>{if(!t||t.length===0){wt(" No meals to export.","warning");return}const Et=[["Date","Meal Type","Food Name","Calories (kcal)","Protein (g)","Fat (g)","Carbohydrate (g)","Sugar (g)","Fibre (g)","Salt (g)","Caffeine (mg)","Unit"]],Vt=(Kt,qe)=>{var $e;return(($e=Kt.nutrients.find(Hi=>{var cs;return((cs=Hi.type)==null?void 0:cs.toLowerCase())===qe.toLowerCase()}))==null?void 0:$e.total)||""},De=(Kt,qe)=>{if(Kt.kcal)return Kt.kcal;let $e=0;return qe.nutrients.forEach(Hi=>{var ls,us,hs;const cs=parseFloat(Hi.total||0);((ls=Hi.type)==null?void 0:ls.toLowerCase())==="fat"&&($e+=cs*9),((us=Hi.type)==null?void 0:us.toLowerCase())==="protein"&&($e+=cs*4),(hs=Hi.type)!=null&&hs.toLowerCase().includes("carbohydrate")&&($e+=cs*4)}),Math.round($e)};t.forEach(Kt=>{Kt.foodItems.forEach(qe=>{const $e=De(Kt,qe);Et.push([Kt.date,Kt.mealType,qe.name,$e,Vt(qe,"protein"),Vt(qe,"fat"),Vt(qe,"carbohydrate"),Vt(qe,"sugar"),Vt(qe,"fibre"),Vt(qe,"salt"),Vt(qe,"caffeine"),j])})});const En=Et.map(Kt=>Kt.join(",")).join(`
`),Hr=new Blob([En],{type:"text/csv"}),fe=document.createElement("a");fe.href=URL.createObjectURL(Hr),fe.download="meals.csv",fe.click()},Rt=async()=>{window.confirm(" Are you sure you want to clear all meal data?")&&(z(!0),await r(),z(!1),wt("All meals deleted.","success"))},Nt=async()=>{if(!vt&&!V){wt("Please enter a new email or password.","warning");return}try{_t(!0);const Vt=Kb().currentUser,De=Bl.credential(Vt.email,ot);await zX(Vt,De),vt&&(await WX(Vt,vt),await pO(Vt.uid,{email:vt}),wt("Email updated.","success")),V&&(await qX(Vt,V),wt("Password updated.","success")),et(""),q(""),nt("")}catch(Et){console.error(Et),wt(`${Et.message}`,"danger")}finally{_t(!1)}},pt=(t==null?void 0:t.length)||0,Pt=[...new Set(t==null?void 0:t.map(Et=>Et.date))],Jt=Pt.length>0?(pt/Pt.length).toFixed(1):0;return O.jsxs("div",{className:"home-container",children:[O.jsxs("div",{className:"text-center mb-4",children:[O.jsx("i",{className:"bi bi-person-circle TitleName",style:{fontSize:"3rem"}}),O.jsx("h4",{className:"mt-2 fw-bold TitleName",children:i}),O.jsx("small",{className:"text-white",children:"Profile"})]}),O.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Usage Summary"}),O.jsxs("p",{children:[" Days Tracked: ",Pt.length]}),O.jsxs("p",{children:[" Meals Logged: ",pt]}),O.jsxs("p",{children:[" Avg Meals/Day: ",Jt]})]}),O.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Your Rewards"}),O.jsxs("p",{children:[" Level ",Zt]}),O.jsx("div",{className:"progress mb-2",style:{height:"6px",background:"#444"},children:O.jsx("div",{className:"progress-bar bg-success",style:{width:`${te}%`},title:`${kt}/${zt} XP`})}),O.jsx("p",{children:" Badges Unlocked:"}),Fe.length===0?O.jsx("p",{className:"text-muted small",children:"No badges yet."}):O.jsx("div",{className:"d-flex flex-wrap gap-2",children:Fe.map((Et,Vt)=>O.jsx("span",{className:"badge rounded-pill bg-info text-dark p-2",children:Et},Vt))})]}),O.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Personal Info"}),O.jsxs("div",{className:"row g-2",children:[O.jsx("div",{className:"col",children:O.jsx("input",{className:"form-control form-control-sm",placeholder:"First Name",value:i,onChange:Et=>s(Et.target.value)})}),O.jsx("div",{className:"col",children:O.jsx("input",{className:"form-control form-control-sm",placeholder:"Last Name",value:a,onChange:Et=>o(Et.target.value)})})]}),O.jsxs("div",{className:"row g-2 mt-2",children:[O.jsx("div",{className:"col",children:O.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Age",value:l,onChange:Et=>h(Et.target.value)})}),O.jsx("div",{className:"col",children:O.jsxs("select",{className:"form-select form-select-sm",value:d,onChange:Et=>g(Et.target.value),children:[O.jsx("option",{value:"male",children:"Male"}),O.jsx("option",{value:"female",children:"Female"})]})})]}),O.jsxs("div",{className:"row g-2 mt-2",children:[O.jsx("div",{className:"col",children:O.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Height (cm)",value:m,onChange:Et=>v(Et.target.value)})}),O.jsx("div",{className:"col",children:O.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Current Weight",value:w,onChange:Et=>b(Et.target.value)})})]}),O.jsxs("div",{className:"row g-2 mt-2",children:[O.jsx("div",{className:"col",children:O.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Goal Weight",value:E,onChange:Et=>S(Et.target.value)})}),O.jsx("div",{className:"col",children:O.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:Et=>I(Et.target.value)})})]})]}),O.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Preferences"}),O.jsxs("div",{className:"mb-2",children:[O.jsx("label",{className:"form-label small",children:"Meal Order"}),O.jsxs("select",{className:"form-select form-select-sm",value:k,onChange:Et=>P(Et.target.value),children:[O.jsx("option",{children:"Breakfast-Lunch-Dinner"}),O.jsx("option",{children:"Lunch-Dinner-Breakfast"}),O.jsx("option",{children:"Dinner-Breakfast-Lunch"})]})]}),O.jsxs("div",{className:"mb-2",children:[O.jsx("label",{className:"form-label small",children:"Units"}),O.jsxs("select",{className:"form-select form-select-sm",value:j,onChange:Et=>M(Et.target.value),children:[O.jsx("option",{children:"g"}),O.jsx("option",{children:"mg"}),O.jsx("option",{children:"kcal"})]})]})]}),O.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Reminder Times"}),O.jsxs("div",{className:"row g-2 mb-2",children:[O.jsx("div",{className:"col",children:O.jsx("input",{type:"time",className:"form-control form-control-sm",value:G,onChange:Et=>F(Et.target.value)})}),O.jsx("div",{className:"col",children:O.jsx("input",{type:"time",className:"form-control form-control-sm",value:xt,onChange:Et=>bt(Et.target.value)})}),O.jsx("div",{className:"col",children:O.jsx("input",{type:"time",className:"form-control form-control-sm",value:K,onChange:Et=>ct(Et.target.value)})})]})]}),O.jsx("button",{className:"btn btn-primary btn-sm w-100 mb-3",onClick:Ke,children:"Save All Changes"}),O.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Update Email / Password"}),O.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"Current Password",value:ot,onChange:Et=>nt(Et.target.value)}),O.jsx("input",{type:"email",className:"form-control form-control-sm mb-2",placeholder:"New Email",value:vt,onChange:Et=>et(Et.target.value)}),O.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"New Password",value:V,onChange:Et=>q(Et.target.value)}),O.jsx("button",{className:"btn btn-outline-light btn-sm w-100",onClick:Nt,disabled:mt,children:mt?"Updating...":"Update Email / Password"})]}),O.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Data Management"}),O.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:rn,children:"Export JSON"}),O.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:ri,children:"Export CSV"}),O.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:Rt,disabled:B,children:B?"Clearing...":"Clear All Meals"})]}),O.jsxs("div",{className:"card bg-dark border-0 p-3 text-white",children:[O.jsx("h6",{className:"fw-bold",children:"Account"}),O.jsx("button",{className:"btn btn-danger w-100 mt-2",onClick:e,children:"Logout"})]})]})}function Zat({meals:n,user:t}){const[e,r]=rt.useState({}),[i,s]=rt.useState({}),[a,o]=rt.useState(!1),l=new Date,h=l.getDay(),d=h===0?-6:1-h,g=new Date(l);g.setDate(l.getDate()+d);const m=new Date(g);m.setDate(g.getDate()-7);const v=new Date(m);v.setDate(m.getDate()+6);const w={Protein:50*7,Carbohydrate:260*7,Fat:70*7,"Carbs as Sugar":30*7,Fibre:30*7,Salt:6*7},b=(T,I)=>{const k=[],P=new Date(T);for(;P<=I;)k.push(P.toISOString().split("T")[0]),P.setDate(P.getDate()+1);return k},E=T=>{const I={};let k=0;T.forEach(j=>{const M=n.filter(C=>C.date===j);M.length>0&&(k++,M.forEach(C=>{C.foodItems.forEach(N=>{N.nutrients.forEach(B=>{const z=parseFloat(B.total)||0;I[B.type]=(I[B.type]||0)+z})})}))});const P={};return Object.keys(I).forEach(j=>{P[j]=I[j]/k}),P};rt.useEffect(()=>{const T=b(g,new Date(g.getTime()+5184e5)),I=b(m,v);r(E(T)),s(E(I))},[n]),rt.useEffect(()=>{(async()=>{if(!(t!=null&&t.goalDate)||!(t!=null&&t.goalWeight)||!(t!=null&&t.currentWeight))return;const I=await Ph(t.uid);if(I.length===0)return;const k=new Date(t.createdAt||I[0].date),P=new Date,j=new Date(t.goalDate),M=Math.max(1,(j-k)/864e5),C=Math.max(1,(P-k)/864e5),N=t.goalWeight-t.currentWeight,B=N/M*C,z=t.currentWeight+B,G=I.reduce((F,xt)=>F.date>xt.date?F:xt).weight;(N>0&&G<z-.5||N<0&&G>z+.5)&&o(!0)})()},[t]);const S=[];return Object.keys(w).forEach(T=>{const I=e[T]||0,k=(e[T]||0)-(i[T]||0);I<.6*w[T]?S.push(` Your ${T} intake is quite low this week. Consider improving it.`):I>1.2*w[T]?S.push(` You're exceeding recommended ${T} levels.`):k>5?S.push(` ${T} increased significantly this week.`):k<-5&&S.push(` ${T} dropped since last week.`)}),O.jsxs("div",{className:"home-container",children:[O.jsx("p",{className:"TitleName",children:"Suggestions"}),a&&O.jsx("div",{className:"CalBarCharSection text-white fw-bold small mb-2 bg-dark",children:" You're behind your weight goal progress. Try adjusting your intake!"}),O.jsxs("div",{className:"CalBarCharSection bg-dark mb-2",children:[O.jsxs("p",{className:"SubTitleName mb-2",children:["Last Week's Calories (",m.toLocaleDateString()," - ",v.toLocaleDateString(),")"]}),O.jsx(wM,{meals:n,startOfWeek:m})]}),O.jsxs("div",{className:"NutritionProgressSection mb-2 bg-dark list-group",style:{padding:"5%"},children:[O.jsx("p",{className:"SubTitleName",children:"This Week's Nutrient Averages"}),Object.keys(w).map(T=>{const I=e[T]||0,k=w[T],P=(e[T]||0)-(i[T]||0),j=Math.min(I/k*100,150),M=I>k,C=P>1?"":P<-1?"":"",N=P?`${C} ${Math.abs(P).toFixed(1)}g from last week`:"";return O.jsxs("div",{className:"mb-3",children:[O.jsxs("div",{className:"d-flex justify-content-between small",children:[O.jsx("span",{className:"text-white",children:T}),O.jsxs("span",{className:"text-white",children:[I.toFixed(1)," / ",k,"g"]})]}),O.jsx("div",{className:"progress",style:{height:"8px"},children:O.jsx("div",{className:`progress-bar ${M?"bg-danger":"bg-success"} progress-bar-striped progress-bar-animated`,style:{width:`${j}%`}})}),O.jsx("div",{className:"small text-white",children:N})]},T)})]}),O.jsx("div",{className:"SuggestionsBox",children:S.length>0?O.jsxs("ul",{className:"list-group bg-dark",style:{padding:"5%"},children:[O.jsx("p",{className:"SubTitleName",children:"Suggestions"}),S.map((T,I)=>O.jsx("li",{className:"list-group-item small bg-dark text-white border-0 ps-0",children:T},I))]}):O.jsx("p",{className:"text-success",children:" You're on track this week!"})})]})}function Ow(){return Ow=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ow.apply(null,arguments)}function Lk(n,t){if(n==null)return{};var e={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.indexOf(r)!==-1)continue;e[r]=n[r]}return e}function Mw(n,t){return Mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Mw(n,t)}function cA(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Mw(n,t)}function Jat(n,t){return n.classList?!!t&&n.classList.contains(t):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+t+" ")!==-1}function tot(n,t){n.classList?n.classList.add(t):Jat(n,t)||(typeof n.className=="string"?n.className=n.className+" "+t:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+t))}function C4(n,t){return n.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function eot(n,t){n.classList?n.classList.remove(t):typeof n.className=="string"?n.className=C4(n.className,t):n.setAttribute("class",C4(n.className&&n.className.baseVal||"",t))}var not=R4();const sm=Nw(not),I4={disabled:!1},lA=hn.createContext(null);var Vk=function(t){return t.scrollTop},Fd="unmounted",tl="exited",Li="entering",ks="entered",Bg="exiting",Ha=function(n){cA(t,n);function t(r,i){var s;s=n.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=tl,s.appearStatus=Li):l=ks:r.unmountOnExit||r.mountOnEnter?l=Fd:l=tl,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===Fd?{status:tl}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Li&&a!==ks&&(s=Li):(a===Li||a===ks)&&(s=Bg)}this.updateStatus(!1,s)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},e.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Li){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:sm.findDOMNode(this);a&&Vk(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===tl&&this.setState({status:Fd})},e.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[sm.findDOMNode(this),o],h=l[0],d=l[1],g=this.getTimeouts(),m=o?g.appear:g.enter;if(!i&&!a||I4.disabled){this.safeSetState({status:ks},function(){s.props.onEntered(h)});return}this.props.onEnter(h,d),this.safeSetState({status:Li},function(){s.props.onEntering(h,d),s.onTransitionEnd(m,function(){s.safeSetState({status:ks},function(){s.props.onEntered(h,d)})})})},e.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:sm.findDOMNode(this);if(!s||I4.disabled){this.safeSetState({status:tl},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Bg},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:tl},function(){i.props.onExited(o)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},e.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:sm.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],h=l[0],d=l[1];this.props.addEndListener(h,d)}i!=null&&setTimeout(this.nextCallback,i)},e.render=function(){var i=this.state.status;if(i===Fd)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=Lk(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return hn.createElement(lA.Provider,{value:null},typeof a=="function"?a(i,o):hn.cloneElement(hn.Children.only(a),o))},t}(hn.Component);Ha.contextType=lA;Ha.propTypes={};function Hu(){}Ha.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Hu,onEntering:Hu,onEntered:Hu,onExit:Hu,onExiting:Hu,onExited:Hu};Ha.UNMOUNTED=Fd;Ha.EXITED=tl;Ha.ENTERING=Li;Ha.ENTERED=ks;Ha.EXITING=Bg;var rot=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return tot(t,r)})},$x=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return eot(t,r)})},uA=function(n){cA(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1];r.removeClasses(d,"exit"),r.addClass(d,g?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(o,l)},r.onEntering=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1],m=g?"appear":"enter";r.addClass(d,m,"active"),r.props.onEntering&&r.props.onEntering(o,l)},r.onEntered=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1],m=g?"appear":"enter";r.removeClasses(d,m),r.addClass(d,m,"done"),r.props.onEntered&&r.props.onEntered(o,l)},r.onExit=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(o)},r.onExiting=function(o){var l=r.resolveArguments(o),h=l[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(o)},r.onExited=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(o)},r.resolveArguments=function(o,l){return r.props.nodeRef?[r.props.nodeRef.current,o]:[o,l]},r.getClassNames=function(o){var l=r.props.classNames,h=typeof l=="string",d=h&&l?l+"-":"",g=h?""+d+o:l[o],m=h?g+"-active":l[o+"Active"],v=h?g+"-done":l[o+"Done"];return{baseClassName:g,activeClassName:m,doneClassName:v}},r}var e=t.prototype;return e.addClass=function(i,s,a){var o=this.getClassNames(s)[a+"ClassName"],l=this.getClassNames("enter"),h=l.doneClassName;s==="appear"&&a==="done"&&h&&(o+=" "+h),a==="active"&&i&&Vk(i),o&&(this.appliedClasses[s][a]=o,rot(i,o))},e.removeClasses=function(i,s){var a=this.appliedClasses[s],o=a.base,l=a.active,h=a.done;this.appliedClasses[s]={},o&&$x(i,o),l&&$x(i,l),h&&$x(i,h)},e.render=function(){var i=this.props;i.classNames;var s=Lk(i,["classNames"]);return hn.createElement(Ha,Ow({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(hn.Component);uA.defaultProps={classNames:""};uA.propTypes={};var am,om;function iot(n,t){return!(n===t||hn.isValidElement(n)&&hn.isValidElement(t)&&n.key!=null&&n.key===t.key)}var Vh={out:"out-in",in:"in-out"},D1=function(t,e,r){return function(){var i;t.props[e]&&(i=t.props)[e].apply(i,arguments),r()}},sot=(am={},am[Vh.out]=function(n){var t=n.current,e=n.changeState;return hn.cloneElement(t,{in:!1,onExited:D1(t,"onExited",function(){e(Li,null)})})},am[Vh.in]=function(n){var t=n.current,e=n.changeState,r=n.children;return[t,hn.cloneElement(r,{in:!0,onEntered:D1(r,"onEntered",function(){e(Li)})})]},am),aot=(om={},om[Vh.out]=function(n){var t=n.children,e=n.changeState;return hn.cloneElement(t,{in:!0,onEntered:D1(t,"onEntered",function(){e(ks,hn.cloneElement(t,{in:!0}))})})},om[Vh.in]=function(n){var t=n.current,e=n.children,r=n.changeState;return[hn.cloneElement(t,{in:!1,onExited:D1(t,"onExited",function(){r(ks,hn.cloneElement(e,{in:!0}))})}),hn.cloneElement(e,{in:!0})]},om),hA=function(n){cA(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.state={status:ks,current:null},r.appeared=!1,r.changeState=function(o,l){l===void 0&&(l=r.state.current),r.setState({status:o,current:l})},r}var e=t.prototype;return e.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(i,s){return i.children==null?{current:null}:s.status===Li&&i.mode===Vh.in?{status:Li}:s.current&&iot(s.current,i.children)?{status:Bg}:{current:hn.cloneElement(i.children,{in:!0})}},e.render=function(){var i=this.props,s=i.children,a=i.mode,o=this.state,l=o.status,h=o.current,d={children:s,current:h,changeState:this.changeState,status:l},g;switch(l){case Li:g=aot[a](d);break;case Bg:g=sot[a](d);break;case ks:g=h}return hn.createElement(lA.Provider,{value:{isMounting:!this.appeared}},g)},t}(hn.Component);hA.propTypes={};hA.defaultProps={mode:Vh.out};function oot(){const[n,t]=rt.useState(null),[e,r]=rt.useState([]),[i,s]=rt.useState("dashboard"),[a,o]=rt.useState(!1),[l,h]=rt.useState(null),[d,g]=rt.useState(!1),[m,v]=rt.useState(null),[w,b]=rt.useState(""),[E,S]=rt.useState(!1),[T,I]=rt.useState(!0),k=rt.useRef(!1),P=rt.useRef(null),[j,M]=rt.useState(!1);rt.useEffect(()=>{const F=async()=>{const xt=await mO();if(t(xt||null),M(!0),xt){t(xt);const bt=await vx(xt.uid);r(bt)}};k.current?I(!1):setTimeout(()=>{I(!1),k.current=!0},1500),F()},[]),rt.useEffect(()=>{"Notification"in window&&n&&Notification.requestPermission().then(F=>{F==="granted"&&G(n)})},[n]);const C=async F=>{t(F);const xt=await vx(F.uid);r(xt)},N=async F=>{if(!n)return;const xt={...F,userId:n.uid};if(l){await zJ({...xt,id:l.id},n.uid);const bt=e.map(K=>K.id===l.id?{...xt,id:l.id}:K);r(bt),h(null)}else{await jJ(xt,n.uid),b("+10 XP! "),S(!0),setTimeout(()=>S(!1),3e3);const bt=await vx(n.uid),K=await mO();r(bt),t(K)}o(!1)},B=async F=>{await HJ(F,n.uid);const xt=e.filter(bt=>bt.id!==F);r(xt)},z=async()=>{await YJ(),t(null),r([])};function G(F){[{label:"Breakfast",time:F.breakfastTime||"08:00"},{label:"Lunch",time:F.lunchTime||"13:00"},{label:"Dinner",time:F.dinnerTime||"19:00"}].forEach(({label:bt,time:K})=>{const[ct,vt]=K.split(":").map(Number),et=new Date,V=new Date;V.setHours(ct,vt,0,0),V<=et&&V.setDate(V.getDate()+1);const q=V.getTime()-et.getTime();setTimeout(()=>{new Notification(`${bt} Reminder `,{body:`It's time to log your ${bt.toLowerCase()}!`})},q)})}return!j||T?O.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:O.jsx("img",{src:Dw,alt:"Logo",style:{width:"150px",height:"150px"}})}):n?T?O.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:O.jsx("img",{src:Dw,alt:"Logo",style:{width:"150px",height:"150px"}})}):O.jsx(hA,{mode:"out-in",children:O.jsx(uA,{timeout:300,classNames:"tab-transition",unmountOnExit:!0,nodeRef:P,children:O.jsxs("div",{style:{height:"100%"},ref:P,children:[i==="dashboard"&&O.jsx(Bnt,{user:n,meals:e,onEditMeal:F=>{h(F),o(!0)},onDeleteMeal:F=>{v(F),g(!0)}}),i==="history"&&O.jsx(Fnt,{user:n,meals:e,onEditMeal:F=>{h(F),o(!0)},onDeleteMeal:F=>{v(F),g(!0)}}),i==="suggestions"&&O.jsx(Zat,{meals:e,user:n}),i==="profile"&&O.jsx(Qat,{user:n,meals:e,onLogout:z,clearAllMeals:async()=>{await GJ(n.uid),r([])}}),O.jsx(_L,{onAddClick:()=>o(!0),onLogout:z,onTabChange:F=>s(F),currentTab:i}),O.jsx(Xat,{isOpen:a,onClose:()=>{o(!1),h(null)},onSave:N,user:n,editMeal:l}),d&&O.jsx("div",{className:"modal-backdrop",children:O.jsxs("div",{className:"modal-container p-4 text-center",children:[O.jsx("p",{className:"text-white fw-bold",children:"Are you sure you want to delete this meal?"}),O.jsxs("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[O.jsx("button",{className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),O.jsx("button",{className:"btn btn-danger",onClick:async()=>{m!==null&&(await B(m),g(!1),v(null))},children:"Delete"})]})]})}),E&&O.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:O.jsx("div",{className:"toast show bg-success text-white",children:O.jsx("div",{className:"toast-body fw-bold text-center",children:w})})})]})},i)}):O.jsx($at,{onLoginSuccess:C})}vL.createRoot(document.getElementById("root")).render(O.jsx(hn.StrictMode,{children:O.jsx(Tat,{children:O.jsx(oot,{})})}));serviceWorkerRegistration.register();

var o7=Object.defineProperty;var c7=(n,t,e)=>t in n?o7(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var lt=(n,t,e)=>c7(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();function Nw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v_={exports:{}},Jf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wC;function l7(){if(wC)return Jf;wC=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Jf.Fragment=t,Jf.jsx=e,Jf.jsxs=e,Jf}var bC;function u7(){return bC||(bC=1,v_.exports=l7()),v_.exports}var k=u7(),__={exports:{}},td={},x_={exports:{}},w_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC;function h7(){return EC||(EC=1,function(n){function t(K,ot){var vt=K.length;K.push(ot);t:for(;0<vt;){var et=vt-1>>>1,V=K[et];if(0<i(V,ot))K[et]=ot,K[vt]=V,vt=et;else break t}}function e(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ot=K[0],vt=K.pop();if(vt!==ot){K[0]=vt;t:for(var et=0,V=K.length,q=V>>>1;et<q;){var ct=2*(et+1)-1,nt=K[ct],mt=ct+1,St=K[mt];if(0>i(nt,vt))mt<V&&0>i(St,nt)?(K[et]=St,K[mt]=vt,et=mt):(K[et]=nt,K[ct]=vt,et=ct);else if(mt<V&&0>i(St,vt))K[et]=St,K[mt]=vt,et=mt;else break t}}return ot}function i(K,ot){var vt=K.sortIndex-ot.sortIndex;return vt!==0?vt:K.id-ot.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],h=[],d=1,g=null,m=3,v=!1,x=!1,b=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function P(K){for(var ot=e(h);ot!==null;){if(ot.callback===null)r(h);else if(ot.startTime<=K)r(h),ot.sortIndex=ot.expirationTime,t(l,ot);else break;ot=e(h)}}function M(K){if(b=!1,P(K),!x)if(e(l)!==null)x=!0,H||(H=!0,G());else{var ot=e(h);ot!==null&&wt(M,ot.startTime-K)}}var H=!1,O=-1,C=5,N=-1;function B(){return E?!0:!(n.unstable_now()-N<C)}function z(){if(E=!1,H){var K=n.unstable_now();N=K;var ot=!0;try{t:{x=!1,b&&(b=!1,S(O),O=-1),v=!0;var vt=m;try{e:{for(P(K),g=e(l);g!==null&&!(g.expirationTime>K&&B());){var et=g.callback;if(typeof et=="function"){g.callback=null,m=g.priorityLevel;var V=et(g.expirationTime<=K);if(K=n.unstable_now(),typeof V=="function"){g.callback=V,P(K),ot=!0;break e}g===e(l)&&r(l),P(K)}else r(l);g=e(l)}if(g!==null)ot=!0;else{var q=e(h);q!==null&&wt(M,q.startTime-K),ot=!1}}break t}finally{g=null,m=vt,v=!1}ot=void 0}}finally{ot?G():H=!1}}}var G;if(typeof R=="function")G=function(){R(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,xt=F.port2;F.port1.onmessage=z,G=function(){xt.postMessage(null)}}else G=function(){T(z,0)};function wt(K,ot){O=T(function(){K(n.unstable_now())},ot)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(K){switch(m){case 1:case 2:case 3:var ot=3;break;default:ot=m}var vt=m;m=ot;try{return K()}finally{m=vt}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(K,ot){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var vt=m;m=K;try{return ot()}finally{m=vt}},n.unstable_scheduleCallback=function(K,ot,vt){var et=n.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?et+vt:et):vt=et,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=vt+V,K={id:d++,callback:ot,priorityLevel:K,startTime:vt,expirationTime:V,sortIndex:-1},vt>et?(K.sortIndex=vt,t(h,K),e(l)===null&&K===e(h)&&(b?(S(O),O=-1):b=!0,wt(M,vt-et))):(K.sortIndex=V,t(l,K),x||v||(x=!0,H||(H=!0,G()))),K},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(K){var ot=m;return function(){var vt=m;m=ot;try{return K.apply(this,arguments)}finally{m=vt}}}}(w_)),w_}var AC;function f7(){return AC||(AC=1,x_.exports=h7()),x_.exports}var b_={exports:{}},Jt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function d7(){if(TC)return Jt;TC=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function m(V){return V===null||typeof V!="object"?null:(V=g&&V[g]||V["@@iterator"],typeof V=="function"?V:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function E(V,q,ct){this.props=V,this.context=q,this.refs=b,this.updater=ct||v}E.prototype.isReactComponent={},E.prototype.setState=function(V,q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,q,"setState")},E.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function T(){}T.prototype=E.prototype;function S(V,q,ct){this.props=V,this.context=q,this.refs=b,this.updater=ct||v}var R=S.prototype=new T;R.constructor=S,x(R,E.prototype),R.isPureReactComponent=!0;var P=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function O(V,q,ct,nt,mt,St){return ct=St.ref,{$$typeof:n,type:V,key:q,ref:ct!==void 0?ct:null,props:St}}function C(V,q){return O(V.type,q,void 0,void 0,void 0,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function B(V){var q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return q[ct]})}var z=/\/+/g;function G(V,q){return typeof V=="object"&&V!==null&&V.key!=null?B(""+V.key):q.toString(36)}function F(){}function xt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(F,F):(V.status="pending",V.then(function(q){V.status==="pending"&&(V.status="fulfilled",V.value=q)},function(q){V.status==="pending"&&(V.status="rejected",V.reason=q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function wt(V,q,ct,nt,mt){var St=typeof V;(St==="undefined"||St==="boolean")&&(V=null);var Tt=!1;if(V===null)Tt=!0;else switch(St){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(V.$$typeof){case n:case t:Tt=!0;break;case d:return Tt=V._init,wt(Tt(V._payload),q,ct,nt,mt)}}if(Tt)return mt=mt(V),Tt=nt===""?"."+G(V,0):nt,P(mt)?(ct="",Tt!=null&&(ct=Tt.replace(z,"$&/")+"/"),wt(mt,q,ct,"",function(pt){return pt})):mt!=null&&(N(mt)&&(mt=C(mt,ct+(mt.key==null||V&&V.key===mt.key?"":(""+mt.key).replace(z,"$&/")+"/")+Tt)),q.push(mt)),1;Tt=0;var Zt=nt===""?".":nt+":";if(P(V))for(var Ut=0;Ut<V.length;Ut++)nt=V[Ut],St=Zt+G(nt,Ut),Tt+=wt(nt,q,ct,St,mt);else if(Ut=m(V),typeof Ut=="function")for(V=Ut.call(V),Ut=0;!(nt=V.next()).done;)nt=nt.value,St=Zt+G(nt,Ut++),Tt+=wt(nt,q,ct,St,mt);else if(St==="object"){if(typeof V.then=="function")return wt(xt(V),q,ct,nt,mt);throw q=String(V),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function K(V,q,ct){if(V==null)return V;var nt=[],mt=0;return wt(V,nt,"","",function(St){return q.call(ct,St,mt++)}),nt}function ot(V){if(V._status===-1){var q=V._result;q=q(),q.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=q)}if(V._status===1)return V._result.default;throw V._result}var vt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function et(){}return Jt.Children={map:K,forEach:function(V,q,ct){K(V,function(){q.apply(this,arguments)},ct)},count:function(V){var q=0;return K(V,function(){q++}),q},toArray:function(V){return K(V,function(q){return q})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Jt.Component=E,Jt.Fragment=e,Jt.Profiler=i,Jt.PureComponent=S,Jt.StrictMode=r,Jt.Suspense=l,Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Jt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return M.H.useMemoCache(V)}},Jt.cache=function(V){return function(){return V.apply(null,arguments)}},Jt.cloneElement=function(V,q,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var nt=x({},V.props),mt=V.key,St=void 0;if(q!=null)for(Tt in q.ref!==void 0&&(St=void 0),q.key!==void 0&&(mt=""+q.key),q)!H.call(q,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&q.ref===void 0||(nt[Tt]=q[Tt]);var Tt=arguments.length-2;if(Tt===1)nt.children=ct;else if(1<Tt){for(var Zt=Array(Tt),Ut=0;Ut<Tt;Ut++)Zt[Ut]=arguments[Ut+2];nt.children=Zt}return O(V.type,mt,void 0,void 0,St,nt)},Jt.createContext=function(V){return V={$$typeof:a,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},Jt.createElement=function(V,q,ct){var nt,mt={},St=null;if(q!=null)for(nt in q.key!==void 0&&(St=""+q.key),q)H.call(q,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(mt[nt]=q[nt]);var Tt=arguments.length-2;if(Tt===1)mt.children=ct;else if(1<Tt){for(var Zt=Array(Tt),Ut=0;Ut<Tt;Ut++)Zt[Ut]=arguments[Ut+2];mt.children=Zt}if(V&&V.defaultProps)for(nt in Tt=V.defaultProps,Tt)mt[nt]===void 0&&(mt[nt]=Tt[nt]);return O(V,St,void 0,void 0,null,mt)},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(V){return{$$typeof:o,render:V}},Jt.isValidElement=N,Jt.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:ot}},Jt.memo=function(V,q){return{$$typeof:h,type:V,compare:q===void 0?null:q}},Jt.startTransition=function(V){var q=M.T,ct={};M.T=ct;try{var nt=V(),mt=M.S;mt!==null&&mt(ct,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(et,vt)}catch(St){vt(St)}finally{M.T=q}},Jt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Jt.use=function(V){return M.H.use(V)},Jt.useActionState=function(V,q,ct){return M.H.useActionState(V,q,ct)},Jt.useCallback=function(V,q){return M.H.useCallback(V,q)},Jt.useContext=function(V){return M.H.useContext(V)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(V,q){return M.H.useDeferredValue(V,q)},Jt.useEffect=function(V,q,ct){var nt=M.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nt.useEffect(V,q)},Jt.useId=function(){return M.H.useId()},Jt.useImperativeHandle=function(V,q,ct){return M.H.useImperativeHandle(V,q,ct)},Jt.useInsertionEffect=function(V,q){return M.H.useInsertionEffect(V,q)},Jt.useLayoutEffect=function(V,q){return M.H.useLayoutEffect(V,q)},Jt.useMemo=function(V,q){return M.H.useMemo(V,q)},Jt.useOptimistic=function(V,q){return M.H.useOptimistic(V,q)},Jt.useReducer=function(V,q,ct){return M.H.useReducer(V,q,ct)},Jt.useRef=function(V){return M.H.useRef(V)},Jt.useState=function(V){return M.H.useState(V)},Jt.useSyncExternalStore=function(V,q,ct){return M.H.useSyncExternalStore(V,q,ct)},Jt.useTransition=function(){return M.H.useTransition()},Jt.version="19.1.0",Jt}var SC;function Pw(){return SC||(SC=1,b_.exports=d7()),b_.exports}var E_={exports:{}},wr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC;function g7(){if(CC)return wr;CC=1;var n=Pw();function t(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:l,containerInfo:h,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,h){if(l==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return wr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,wr.createPortal=function(l,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(l,h,null,d)},wr.flushSync=function(l){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=h,r.p=d,r.d.f()}},wr.preconnect=function(l,h){typeof l=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(l,h))},wr.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},wr.preinit=function(l,h){if(typeof l=="string"&&h&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(l,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:v}):d==="script"&&r.d.X(l,{crossOrigin:g,integrity:m,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},wr.preinitModule=function(l,h){if(typeof l=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=o(h.as,h.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(l)},wr.preload=function(l,h){if(typeof l=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin);r.d.L(l,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},wr.preloadModule=function(l,h){if(typeof l=="string")if(h){var d=o(h.as,h.crossOrigin);r.d.m(l,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(l)},wr.requestFormReset=function(l){r.d.r(l)},wr.unstable_batchedUpdates=function(l,h){return l(h)},wr.useFormState=function(l,h,d){return a.H.useFormState(l,h,d)},wr.useFormStatus=function(){return a.H.useHostTransitionStatus()},wr.version="19.1.0",wr}var IC;function I4(){if(IC)return E_.exports;IC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),E_.exports=g7(),E_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC;function p7(){if(RC)return td;RC=1;var n=f7(),t=Pw(),e=I4();function r(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var u=c,f=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(f=u.return),c=u.return;while(c)}return u.tag===3?f:null}function a(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function o(c){if(s(c)!==c)throw Error(r(188))}function l(c){var u=c.alternate;if(!u){if(u=s(c),u===null)throw Error(r(188));return u!==c?null:c}for(var f=c,p=u;;){var _=f.return;if(_===null)break;var w=_.alternate;if(w===null){if(p=_.return,p!==null){f=p;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===f)return o(_),c;if(w===p)return o(_),u;w=w.sibling}throw Error(r(188))}if(f.return!==p.return)f=_,p=w;else{for(var D=!1,L=_.child;L;){if(L===f){D=!0,f=_,p=w;break}if(L===p){D=!0,p=_,f=w;break}L=L.sibling}if(!D){for(L=w.child;L;){if(L===f){D=!0,f=w,p=_;break}if(L===p){D=!0,p=w,f=_;break}L=L.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?c:u}function h(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(u=h(c),u!==null)return u;c=c.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function G(c){return c===null||typeof c!="object"?null:(c=z&&c[z]||c["@@iterator"],typeof c=="function"?c:null)}var F=Symbol.for("react.client.reference");function xt(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===F?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case x:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case H:return"SuspenseList";case N:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case R:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case P:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case O:return u=c.displayName||null,u!==null?u:xt(c.type)||"Memo";case C:u=c._payload,c=c._init;try{return xt(c(u))}catch{}}return null}var wt=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},et=[],V=-1;function q(c){return{current:c}}function ct(c){0>V||(c.current=et[V],et[V]=null,V--)}function nt(c,u){V++,et[V]=c.current,c.current=u}var mt=q(null),St=q(null),Tt=q(null),Zt=q(null);function Ut(c,u){switch(nt(Tt,u),nt(St,c),nt(mt,null),u.nodeType){case 9:case 11:c=(c=u.documentElement)&&(c=c.namespaceURI)?KS(c):0;break;default:if(c=u.tagName,u=u.namespaceURI)u=KS(u),c=$S(u,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}ct(mt),nt(mt,c)}function pt(){ct(mt),ct(St),ct(Tt)}function _t(c){c.memoizedState!==null&&nt(Zt,c);var u=mt.current,f=$S(u,c.type);u!==f&&(nt(St,c),nt(mt,f))}function bt(c){St.current===c&&(ct(mt),ct(St)),Zt.current===c&&(ct(Zt),Xf._currentValue=vt)}var Ot=Object.prototype.hasOwnProperty,jt=n.unstable_scheduleCallback,Bt=n.unstable_cancelCallback,$t=n.unstable_shouldYield,_n=n.unstable_requestPaint,Ie=n.unstable_now,Wt=n.unstable_getCurrentPriorityLevel,un=n.unstable_ImmediatePriority,Rt=n.unstable_UserBlockingPriority,Ze=n.unstable_NormalPriority,pi=n.unstable_LowPriority,ss=n.unstable_IdlePriority,Ui=n.log,as=n.unstable_setDisableYieldValue,Xe=null,ye=null;function vr(c){if(typeof Ui=="function"&&as(c),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(Xe,c)}catch{}}var _r=Math.clz32?Math.clz32:ic,i0=Math.log,xy=Math.LN2;function ic(c){return c>>>=0,c===0?32:31-(i0(c)/xy|0)|0}var sc=256,ac=4194304;function ji(c){var u=c&42;if(u!==0)return u;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function jl(c,u,f){var p=c.pendingLanes;if(p===0)return 0;var _=0,w=c.suspendedLanes,D=c.pingedLanes;c=c.warmLanes;var L=p&134217727;return L!==0?(p=L&~w,p!==0?_=ji(p):(D&=L,D!==0?_=ji(D):f||(f=L&~c,f!==0&&(_=ji(f))))):(L=p&~w,L!==0?_=ji(L):D!==0?_=ji(D):f||(f=p&~c,f!==0&&(_=ji(f)))),_===0?0:u!==0&&u!==_&&(u&w)===0&&(w=_&-_,f=u&-u,w>=f||w===32&&(f&4194048)!==0)?u:_}function oc(c,u){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&u)===0}function Yh(c,u){switch(c){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xh(){var c=sc;return sc<<=1,(sc&4194048)===0&&(sc=256),c}function Kh(){var c=ac;return ac<<=1,(ac&62914560)===0&&(ac=4194304),c}function Ks(c){for(var u=[],f=0;31>f;f++)u.push(c);return u}function $s(c,u){c.pendingLanes|=u,u!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function $h(c,u,f,p,_,w){var D=c.pendingLanes;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=f,c.entangledLanes&=f,c.errorRecoveryDisabledLanes&=f,c.shellSuspendCounter=0;var L=c.entanglements,W=c.expirationTimes,J=c.hiddenUpdates;for(f=D&~f;0<f;){var ht=31-_r(f),gt=1<<ht;L[ht]=0,W[ht]=-1;var rt=J[ht];if(rt!==null)for(J[ht]=null,ht=0;ht<rt.length;ht++){var it=rt[ht];it!==null&&(it.lane&=-536870913)}f&=~gt}p!==0&&os(c,p,0),w!==0&&_===0&&c.tag!==0&&(c.suspendedLanes|=w&~(D&~u))}function os(c,u,f){c.pendingLanes|=u,c.suspendedLanes&=~u;var p=31-_r(u);c.entangledLanes|=u,c.entanglements[p]=c.entanglements[p]|1073741824|f&4194090}function Qh(c,u){var f=c.entangledLanes|=u;for(c=c.entanglements;f;){var p=31-_r(f),_=1<<p;_&u|c[p]&u&&(c[p]|=u),f&=~_}}function Ba(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function zl(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Fa(){var c=ot.p;return c!==0?c:(c=window.event,c===void 0?32:pC(c.type))}function s0(c,u){var f=ot.p;try{return ot.p=c,u()}finally{ot.p=f}}var Je=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Je,Rn="__reactProps$"+Je,mi="__reactContainer$"+Je,Zh="__reactEvents$"+Je,wy="__reactListeners$"+Je,Ua="__reactHandles$"+Je,a0="__reactResources$"+Je,cc="__reactMarker$"+Je;function ja(c){delete c[Vn],delete c[Rn],delete c[Zh],delete c[wy],delete c[Ua]}function Qs(c){var u=c[Vn];if(u)return u;for(var f=c.parentNode;f;){if(u=f[mi]||f[Vn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(c=tC(c);c!==null;){if(f=c[Vn])return f;c=tC(c)}return u}c=f,f=c.parentNode}return null}function cs(c){if(c=c[Vn]||c[mi]){var u=c.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return c}return null}function ls(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c.stateNode;throw Error(r(33))}function Mr(c){var u=c[a0];return u||(u=c[a0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function xn(c){c[cc]=!0}var Jh=new Set,Hl={};function zi(c,u){Zs(c,u),Zs(c+"Capture",u)}function Zs(c,u){for(Hl[c]=u,c=0;c<u.length;c++)Jh.add(u[c])}var o0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),c0={},lc={};function l0(c){return Ot.call(lc,c)?!0:Ot.call(c0,c)?!1:o0.test(c)?lc[c]=!0:(c0[c]=!0,!1)}function za(c,u,f){if(l0(u))if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":c.removeAttribute(u);return;case"boolean":var p=u.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){c.removeAttribute(u);return}}c.setAttribute(u,""+f)}}function us(c,u,f){if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(u);return}c.setAttribute(u,""+f)}}function cr(c,u,f,p){if(p===null)c.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttributeNS(u,f,""+p)}}var uc,u0;function Js(c){if(uc===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);uc=u&&u[1]||"",u0=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uc+c+u0}var Gl=!1;function Wl(c,u){if(!c||Gl)return"";Gl=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(u){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(it){var rt=it}Reflect.construct(c,[],gt)}else{try{gt.call()}catch(it){rt=it}c.call(gt.prototype)}}else{try{throw Error()}catch(it){rt=it}(gt=c())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch(it){if(it&&rt&&typeof it.stack=="string")return[it.stack,rt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),D=w[0],L=w[1];if(D&&L){var W=D.split(`
`),J=L.split(`
`);for(_=p=0;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;for(;_<J.length&&!J[_].includes("DetermineComponentFrameRoot");)_++;if(p===W.length||_===J.length)for(p=W.length-1,_=J.length-1;1<=p&&0<=_&&W[p]!==J[_];)_--;for(;1<=p&&0<=_;p--,_--)if(W[p]!==J[_]){if(p!==1||_!==1)do if(p--,_--,0>_||W[p]!==J[_]){var ht=`
`+W[p].replace(" at new "," at ");return c.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",c.displayName)),ht}while(1<=p&&0<=_);break}}}finally{Gl=!1,Error.prepareStackTrace=f}return(f=c?c.displayName||c.name:"")?Js(f):""}function tf(c){switch(c.tag){case 26:case 27:case 5:return Js(c.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 15:return Wl(c.type,!1);case 11:return Wl(c.type.render,!1);case 1:return Wl(c.type,!0);case 31:return Js("Activity");default:return""}}function ql(c){try{var u="";do u+=tf(c),c=c.return;while(c);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Nr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ef(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function by(c){var u=ef(c)?"checked":"value",f=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),p=""+c[u];if(!c.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,w=f.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return _.call(this)},set:function(D){p=""+D,w.call(this,D)}}),Object.defineProperty(c,u,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Yl(c){c._valueTracker||(c._valueTracker=by(c))}function nf(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var f=u.getValue(),p="";return c&&(p=ef(c)?c.checked?"true":"false":c.value),c=p,c!==f?(u.setValue(c),!0):!1}function hc(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Ey=/[\n"\\]/g;function Dn(c){return c.replace(Ey,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ti(c,u,f,p,_,w,D,L){c.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?c.type=D:c.removeAttribute("type"),u!=null?D==="number"?(u===0&&c.value===""||c.value!=u)&&(c.value=""+Nr(u)):c.value!==""+Nr(u)&&(c.value=""+Nr(u)):D!=="submit"&&D!=="reset"||c.removeAttribute("value"),u!=null?Ha(c,D,Nr(u)):f!=null?Ha(c,D,Nr(f)):p!=null&&c.removeAttribute("value"),_==null&&w!=null&&(c.defaultChecked=!!w),_!=null&&(c.checked=_&&typeof _!="function"&&typeof _!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?c.name=""+Nr(L):c.removeAttribute("name")}function fc(c,u,f,p,_,w,D,L){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(c.type=w),u!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||u!=null))return;f=f!=null?""+Nr(f):"",u=u!=null?""+Nr(u):f,L||u===c.value||(c.value=u),c.defaultValue=u}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,c.checked=L?c.checked:!!p,c.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(c.name=D)}function Ha(c,u,f){u==="number"&&hc(c.ownerDocument)===c||c.defaultValue===""+f||(c.defaultValue=""+f)}function ta(c,u,f,p){if(c=c.options,u){u={};for(var _=0;_<f.length;_++)u["$"+f[_]]=!0;for(f=0;f<c.length;f++)_=u.hasOwnProperty("$"+c[f].value),c[f].selected!==_&&(c[f].selected=_),_&&p&&(c[f].defaultSelected=!0)}else{for(f=""+Nr(f),u=null,_=0;_<c.length;_++){if(c[_].value===f){c[_].selected=!0,p&&(c[_].defaultSelected=!0);return}u!==null||c[_].disabled||(u=c[_])}u!==null&&(u.selected=!0)}}function Ve(c,u,f){if(u!=null&&(u=""+Nr(u),u!==c.value&&(c.value=u),f==null)){c.defaultValue!==u&&(c.defaultValue=u);return}c.defaultValue=f!=null?""+Nr(f):""}function dc(c,u,f,p){if(u==null){if(p!=null){if(f!=null)throw Error(r(92));if(wt(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),u=f}f=Nr(u),c.defaultValue=f,p=c.textContent,p===f&&p!==""&&p!==null&&(c.value=p)}function yi(c,u){if(u){var f=c.firstChild;if(f&&f===c.lastChild&&f.nodeType===3){f.nodeValue=u;return}}c.textContent=u}var gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function h0(c,u,f){var p=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?c.setProperty(u,""):u==="float"?c.cssFloat="":c[u]="":p?c.setProperty(u,f):typeof f!="number"||f===0||gc.has(u)?u==="float"?c.cssFloat=f:c[u]=(""+f).trim():c[u]=f+"px"}function rf(c,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(c=c.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||u!=null&&u.hasOwnProperty(p)||(p.indexOf("--")===0?c.setProperty(p,""):p==="float"?c.cssFloat="":c[p]="");for(var _ in u)p=u[_],u.hasOwnProperty(_)&&f[_]!==p&&h0(c,_,p)}else for(var w in u)u.hasOwnProperty(w)&&h0(c,w,u[w])}function sf(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ay=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ty=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xl(c){return Ty.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var ea=null;function vi(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var na=null,ra=null;function af(c){var u=cs(c);if(u&&(c=u.stateNode)){var f=c[Rn]||null;t:switch(c=u.stateNode,u.type){case"input":if(ti(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=c;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Dn(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var p=f[u];if(p!==c&&p.form===c.form){var _=p[Rn]||null;if(!_)throw Error(r(90));ti(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<f.length;u++)p=f[u],p.form===c.form&&nf(p)}break t;case"textarea":Ve(c,f.value,f.defaultValue);break t;case"select":u=f.value,u!=null&&ta(c,!!f.multiple,u,!1)}}}var hs=!1;function f0(c,u,f){if(hs)return c(u,f);hs=!0;try{var p=c(u);return p}finally{if(hs=!1,(na!==null||ra!==null)&&(sp(),na&&(u=na,c=ra,ra=na=null,af(u),c)))for(u=0;u<c.length;u++)af(c[u])}}function pc(c,u){var f=c.stateNode;if(f===null)return null;var p=f[Rn]||null;if(p===null)return null;f=p[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(c=c.type,p=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!p;break t;default:c=!1}if(c)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_i=!1;if(Hi)try{var mc={};Object.defineProperty(mc,"passive",{get:function(){_i=!0}}),window.addEventListener("test",mc,mc),window.removeEventListener("test",mc,mc)}catch{_i=!1}var fs=null,Ga=null,ia=null;function of(){if(ia)return ia;var c,u=Ga,f=u.length,p,_="value"in fs?fs.value:fs.textContent,w=_.length;for(c=0;c<f&&u[c]===_[c];c++);var D=f-c;for(p=1;p<=D&&u[f-p]===_[w-p];p++);return ia=_.slice(c,1<p?1-p:void 0)}function ds(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function gs(){return!0}function cf(){return!1}function Qn(c){function u(f,p,_,w,D){this._reactName=f,this._targetInst=_,this.type=p,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var L in c)c.hasOwnProperty(L)&&(f=c[L],this[L]=f?f(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?gs:cf,this.isPropagationStopped=cf,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),u}var Ae={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=Qn(Ae),yc=d({},Ae,{view:0,detail:0}),d0=Qn(yc),$l,Ql,ps,vc=d({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ps&&(ps&&c.type==="mousemove"?($l=c.screenX-ps.screenX,Ql=c.screenY-ps.screenY):Ql=$l=0,ps=c),$l)},movementY:function(c){return"movementY"in c?c.movementY:Ql}}),xi=Qn(vc),g0=d({},vc,{dataTransfer:0}),Sy=Qn(g0),_c=d({},yc,{relatedTarget:0}),Zl=Qn(_c),lf=d({},Ae,{animationName:0,elapsedTime:0,pseudoElement:0}),Jl=Qn(lf),p0=d({},Ae,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),tu=Qn(p0),Cy=d({},Ae,{data:0}),uf=Qn(Cy),xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hf(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=y0[c])?!!u[c]:!1}function wc(){return hf}var v0=d({},yc,{key:function(c){if(c.key){var u=xc[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=ds(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?m0[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(c){return c.type==="keypress"?ds(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?ds(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),eu=Qn(v0),_0=d({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=Qn(_0),sa=d({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),x0=Qn(sa),w0=d({},Ae,{propertyName:0,elapsedTime:0,pseudoElement:0}),b0=Qn(w0),E0=d({},vc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),nu=Qn(E0),Pr=d({},Ae,{newState:0,oldState:0}),A0=Qn(Pr),T0=[9,13,27,32],ms=Hi&&"CompositionEvent"in window,y=null;Hi&&"documentMode"in document&&(y=document.documentMode);var A=Hi&&"TextEvent"in window&&!y,I=Hi&&(!ms||y&&8<y&&11>=y),U=" ",$=!1;function at(c,u){switch(c){case"keyup":return T0.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Et(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ue=!1;function Bn(c,u){switch(c){case"compositionend":return Et(u);case"keypress":return u.which!==32?null:($=!0,U);case"textInput":return c=u.data,c===U&&$?null:c;default:return null}}function he(c,u){if(ue)return c==="compositionend"||!ms&&at(c,u)?(c=of(),ia=Ga=fs=null,ue=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return I&&u.locale!=="ko"?null:u.data;default:return null}}var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!Zn[c.type]:u==="textarea"}function aa(c,u,f,p){na?ra?ra.push(p):ra=[p]:na=p,u=hp(u,"onChange"),0<u.length&&(f=new Kl("onChange","change",null,f,p),c.push({event:f,listeners:u}))}var lr=null,ys=null;function df(c){GS(c,0)}function S0(c){var u=ls(c);if(nf(u))return c}function hA(c,u){if(c==="change")return u}var fA=!1;if(Hi){var Iy;if(Hi){var Ry="oninput"in document;if(!Ry){var dA=document.createElement("div");dA.setAttribute("oninput","return;"),Ry=typeof dA.oninput=="function"}Iy=Ry}else Iy=!1;fA=Iy&&(!document.documentMode||9<document.documentMode)}function gA(){lr&&(lr.detachEvent("onpropertychange",pA),ys=lr=null)}function pA(c){if(c.propertyName==="value"&&S0(ys)){var u=[];aa(u,ys,c,vi(c)),f0(df,u)}}function Vk(c,u,f){c==="focusin"?(gA(),lr=u,ys=f,lr.attachEvent("onpropertychange",pA)):c==="focusout"&&gA()}function Bk(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return S0(ys)}function Fk(c,u){if(c==="click")return S0(u)}function Uk(c,u){if(c==="input"||c==="change")return S0(u)}function jk(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var ei=typeof Object.is=="function"?Object.is:jk;function gf(c,u){if(ei(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var f=Object.keys(c),p=Object.keys(u);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var _=f[p];if(!Ot.call(u,_)||!ei(c[_],u[_]))return!1}return!0}function mA(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function yA(c,u){var f=mA(c);c=0;for(var p;f;){if(f.nodeType===3){if(p=c+f.textContent.length,c<=u&&p>=u)return{node:f,offset:u-c};c=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=mA(f)}}function vA(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?vA(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function _A(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var u=hc(c.document);u instanceof c.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)c=u.contentWindow;else break;u=hc(c.document)}return u}function Dy(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}var zk=Hi&&"documentMode"in document&&11>=document.documentMode,ru=null,Oy=null,pf=null,My=!1;function xA(c,u,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;My||ru==null||ru!==hc(p)||(p=ru,"selectionStart"in p&&Dy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),pf&&gf(pf,p)||(pf=p,p=hp(Oy,"onSelect"),0<p.length&&(u=new Kl("onSelect","select",null,u,f),c.push({event:u,listeners:p}),u.target=ru)))}function bc(c,u){var f={};return f[c.toLowerCase()]=u.toLowerCase(),f["Webkit"+c]="webkit"+u,f["Moz"+c]="moz"+u,f}var iu={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionrun:bc("Transition","TransitionRun"),transitionstart:bc("Transition","TransitionStart"),transitioncancel:bc("Transition","TransitionCancel"),transitionend:bc("Transition","TransitionEnd")},Ny={},wA={};Hi&&(wA=document.createElement("div").style,"AnimationEvent"in window||(delete iu.animationend.animation,delete iu.animationiteration.animation,delete iu.animationstart.animation),"TransitionEvent"in window||delete iu.transitionend.transition);function Ec(c){if(Ny[c])return Ny[c];if(!iu[c])return c;var u=iu[c],f;for(f in u)if(u.hasOwnProperty(f)&&f in wA)return Ny[c]=u[f];return c}var bA=Ec("animationend"),EA=Ec("animationiteration"),AA=Ec("animationstart"),Hk=Ec("transitionrun"),Gk=Ec("transitionstart"),Wk=Ec("transitioncancel"),TA=Ec("transitionend"),SA=new Map,Py="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Py.push("scrollEnd");function Gi(c,u){SA.set(c,u),zi(u,[c])}var CA=new WeakMap;function wi(c,u){if(typeof c=="object"&&c!==null){var f=CA.get(c);return f!==void 0?f:(u={value:c,source:u,stack:ql(u)},CA.set(c,u),u)}return{value:c,source:u,stack:ql(u)}}var bi=[],su=0,ky=0;function C0(){for(var c=su,u=ky=su=0;u<c;){var f=bi[u];bi[u++]=null;var p=bi[u];bi[u++]=null;var _=bi[u];bi[u++]=null;var w=bi[u];if(bi[u++]=null,p!==null&&_!==null){var D=p.pending;D===null?_.next=_:(_.next=D.next,D.next=_),p.pending=_}w!==0&&IA(f,_,w)}}function I0(c,u,f,p){bi[su++]=c,bi[su++]=u,bi[su++]=f,bi[su++]=p,ky|=p,c.lanes|=p,c=c.alternate,c!==null&&(c.lanes|=p)}function Ly(c,u,f,p){return I0(c,u,f,p),R0(c)}function au(c,u){return I0(c,null,null,u),R0(c)}function IA(c,u,f){c.lanes|=f;var p=c.alternate;p!==null&&(p.lanes|=f);for(var _=!1,w=c.return;w!==null;)w.childLanes|=f,p=w.alternate,p!==null&&(p.childLanes|=f),w.tag===22&&(c=w.stateNode,c===null||c._visibility&1||(_=!0)),c=w,w=w.return;return c.tag===3?(w=c.stateNode,_&&u!==null&&(_=31-_r(f),c=w.hiddenUpdates,p=c[_],p===null?c[_]=[u]:p.push(u),u.lane=f|536870912),w):null}function R0(c){if(50<Uf)throw Uf=0,zv=null,Error(r(185));for(var u=c.return;u!==null;)c=u,u=c.return;return c.tag===3?c.stateNode:null}var ou={};function qk(c,u,f,p){this.tag=c,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(c,u,f,p){return new qk(c,u,f,p)}function Vy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function oa(c,u){var f=c.alternate;return f===null?(f=ni(c.tag,u,c.key,c.mode),f.elementType=c.elementType,f.type=c.type,f.stateNode=c.stateNode,f.alternate=c,c.alternate=f):(f.pendingProps=u,f.type=c.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=c.flags&65011712,f.childLanes=c.childLanes,f.lanes=c.lanes,f.child=c.child,f.memoizedProps=c.memoizedProps,f.memoizedState=c.memoizedState,f.updateQueue=c.updateQueue,u=c.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=c.sibling,f.index=c.index,f.ref=c.ref,f.refCleanup=c.refCleanup,f}function RA(c,u){c.flags&=65011714;var f=c.alternate;return f===null?(c.childLanes=0,c.lanes=u,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,u=f.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),c}function D0(c,u,f,p,_,w){var D=0;if(p=c,typeof c=="function")Vy(c)&&(D=1);else if(typeof c=="string")D=X9(c,f,mt.current)?26:c==="html"||c==="head"||c==="body"?27:5;else t:switch(c){case N:return c=ni(31,f,u,_),c.elementType=N,c.lanes=w,c;case x:return Ac(f.children,_,w,u);case b:D=8,_|=24;break;case E:return c=ni(12,f,u,_|2),c.elementType=E,c.lanes=w,c;case M:return c=ni(13,f,u,_),c.elementType=M,c.lanes=w,c;case H:return c=ni(19,f,u,_),c.elementType=H,c.lanes=w,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case T:case R:D=10;break t;case S:D=9;break t;case P:D=11;break t;case O:D=14;break t;case C:D=16,p=null;break t}D=29,f=Error(r(130,c===null?"null":typeof c,"")),p=null}return u=ni(D,f,u,_),u.elementType=c,u.type=p,u.lanes=w,u}function Ac(c,u,f,p){return c=ni(7,c,p,u),c.lanes=f,c}function By(c,u,f){return c=ni(6,c,null,u),c.lanes=f,c}function Fy(c,u,f){return u=ni(4,c.children!==null?c.children:[],c.key,u),u.lanes=f,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}var cu=[],lu=0,O0=null,M0=0,Ei=[],Ai=0,Tc=null,ca=1,la="";function Sc(c,u){cu[lu++]=M0,cu[lu++]=O0,O0=c,M0=u}function DA(c,u,f){Ei[Ai++]=ca,Ei[Ai++]=la,Ei[Ai++]=Tc,Tc=c;var p=ca;c=la;var _=32-_r(p)-1;p&=~(1<<_),f+=1;var w=32-_r(u)+_;if(30<w){var D=_-_%5;w=(p&(1<<D)-1).toString(32),p>>=D,_-=D,ca=1<<32-_r(u)+_|f<<_|p,la=w+c}else ca=1<<w|f<<_|p,la=c}function Uy(c){c.return!==null&&(Sc(c,1),DA(c,1,0))}function jy(c){for(;c===O0;)O0=cu[--lu],cu[lu]=null,M0=cu[--lu],cu[lu]=null;for(;c===Tc;)Tc=Ei[--Ai],Ei[Ai]=null,la=Ei[--Ai],Ei[Ai]=null,ca=Ei[--Ai],Ei[Ai]=null}var kr=null,hn=null,xe=!1,Cc=null,vs=!1,zy=Error(r(519));function Ic(c){var u=Error(r(418,""));throw vf(wi(u,c)),zy}function OA(c){var u=c.stateNode,f=c.type,p=c.memoizedProps;switch(u[Vn]=c,u[Rn]=p,f){case"dialog":oe("cancel",u),oe("close",u);break;case"iframe":case"object":case"embed":oe("load",u);break;case"video":case"audio":for(f=0;f<zf.length;f++)oe(zf[f],u);break;case"source":oe("error",u);break;case"img":case"image":case"link":oe("error",u),oe("load",u);break;case"details":oe("toggle",u);break;case"input":oe("invalid",u),fc(u,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Yl(u);break;case"select":oe("invalid",u);break;case"textarea":oe("invalid",u),dc(u,p.value,p.defaultValue,p.children),Yl(u)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||p.suppressHydrationWarning===!0||XS(u.textContent,f)?(p.popover!=null&&(oe("beforetoggle",u),oe("toggle",u)),p.onScroll!=null&&oe("scroll",u),p.onScrollEnd!=null&&oe("scrollend",u),p.onClick!=null&&(u.onclick=fp),u=!0):u=!1,u||Ic(c)}function MA(c){for(kr=c.return;kr;)switch(kr.tag){case 5:case 13:vs=!1;return;case 27:case 3:vs=!0;return;default:kr=kr.return}}function mf(c){if(c!==kr)return!1;if(!xe)return MA(c),xe=!0,!1;var u=c.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=c.type,f=!(f!=="form"&&f!=="button")||i_(c.type,c.memoizedProps)),f=!f),f&&hn&&Ic(c),MA(c),u===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));t:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8)if(f=c.data,f==="/$"){if(u===0){hn=qi(c.nextSibling);break t}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;c=c.nextSibling}hn=null}}else u===27?(u=hn,ao(c.type)?(c=c_,c_=null,hn=c):hn=u):hn=kr?qi(c.stateNode.nextSibling):null;return!0}function yf(){hn=kr=null,xe=!1}function NA(){var c=Cc;return c!==null&&(Hr===null?Hr=c:Hr.push.apply(Hr,c),Cc=null),c}function vf(c){Cc===null?Cc=[c]:Cc.push(c)}var Hy=q(null),Rc=null,ua=null;function Wa(c,u,f){nt(Hy,u._currentValue),u._currentValue=f}function ha(c){c._currentValue=Hy.current,ct(Hy)}function Gy(c,u,f){for(;c!==null;){var p=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),c===f)break;c=c.return}}function Wy(c,u,f,p){var _=c.child;for(_!==null&&(_.return=c);_!==null;){var w=_.dependencies;if(w!==null){var D=_.child;w=w.firstContext;t:for(;w!==null;){var L=w;w=_;for(var W=0;W<u.length;W++)if(L.context===u[W]){w.lanes|=f,L=w.alternate,L!==null&&(L.lanes|=f),Gy(w.return,f,c),p||(D=null);break t}w=L.next}}else if(_.tag===18){if(D=_.return,D===null)throw Error(r(341));D.lanes|=f,w=D.alternate,w!==null&&(w.lanes|=f),Gy(D,f,c),D=null}else D=_.child;if(D!==null)D.return=_;else for(D=_;D!==null;){if(D===c){D=null;break}if(_=D.sibling,_!==null){_.return=D.return,D=_;break}D=D.return}_=D}}function _f(c,u,f,p){c=null;for(var _=u,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var D=_.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var L=_.type;ei(_.pendingProps.value,D.value)||(c!==null?c.push(L):c=[L])}}else if(_===Zt.current){if(D=_.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(c!==null?c.push(Xf):c=[Xf])}_=_.return}c!==null&&Wy(u,c,f,p),u.flags|=262144}function N0(c){for(c=c.firstContext;c!==null;){if(!ei(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Dc(c){Rc=c,ua=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function xr(c){return PA(Rc,c)}function P0(c,u){return Rc===null&&Dc(c),PA(c,u)}function PA(c,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},ua===null){if(c===null)throw Error(r(308));ua=u,c.dependencies={lanes:0,firstContext:u},c.flags|=524288}else ua=ua.next=u;return f}var Yk=typeof AbortController<"u"?AbortController:function(){var c=[],u=this.signal={aborted:!1,addEventListener:function(f,p){c.push(p)}};this.abort=function(){u.aborted=!0,c.forEach(function(f){return f()})}},Xk=n.unstable_scheduleCallback,Kk=n.unstable_NormalPriority,Un={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qy(){return{controller:new Yk,data:new Map,refCount:0}}function xf(c){c.refCount--,c.refCount===0&&Xk(Kk,function(){c.controller.abort()})}var wf=null,Yy=0,uu=0,hu=null;function $k(c,u){if(wf===null){var f=wf=[];Yy=0,uu=Kv(),hu={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Yy++,u.then(kA,kA),u}function kA(){if(--Yy===0&&wf!==null){hu!==null&&(hu.status="fulfilled");var c=wf;wf=null,uu=0,hu=null;for(var u=0;u<c.length;u++)(0,c[u])()}}function Qk(c,u){var f=[],p={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return c.then(function(){p.status="fulfilled",p.value=u;for(var _=0;_<f.length;_++)(0,f[_])(u)},function(_){for(p.status="rejected",p.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),p}var LA=K.S;K.S=function(c,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&$k(c,u),LA!==null&&LA(c,u)};var Oc=q(null);function Xy(){var c=Oc.current;return c!==null?c:We.pooledCache}function k0(c,u){u===null?nt(Oc,Oc.current):nt(Oc,u.pool)}function VA(){var c=Xy();return c===null?null:{parent:Un._currentValue,pool:c}}var bf=Error(r(460)),BA=Error(r(474)),L0=Error(r(542)),Ky={then:function(){}};function FA(c){return c=c.status,c==="fulfilled"||c==="rejected"}function V0(){}function UA(c,u,f){switch(f=c[f],f===void 0?c.push(u):f!==u&&(u.then(V0,V0),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,zA(c),c;default:if(typeof u.status=="string")u.then(V0,V0);else{if(c=We,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=u,c.status="pending",c.then(function(p){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=p}},function(p){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=p}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,zA(c),c}throw Ef=u,bf}}var Ef=null;function jA(){if(Ef===null)throw Error(r(459));var c=Ef;return Ef=null,c}function zA(c){if(c===bf||c===L0)throw Error(r(483))}var qa=!1;function $y(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qy(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ya(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Xa(c,u,f){var p=c.updateQueue;if(p===null)return null;if(p=p.shared,(Re&2)!==0){var _=p.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),p.pending=u,u=R0(c),IA(c,null,f),u}return I0(c,p,u,f),R0(c)}function Af(c,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,Qh(c,f)}}function Zy(c,u){var f=c.updateQueue,p=c.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var _=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?_=w=D:w=w.next=D,f=f.next}while(f!==null);w===null?_=w=u:w=w.next=u}else _=w=u;f={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},c.updateQueue=f;return}c=f.lastBaseUpdate,c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=u}var Jy=!1;function Tf(){if(Jy){var c=hu;if(c!==null)throw c}}function Sf(c,u,f,p){Jy=!1;var _=c.updateQueue;qa=!1;var w=_.firstBaseUpdate,D=_.lastBaseUpdate,L=_.shared.pending;if(L!==null){_.shared.pending=null;var W=L,J=W.next;W.next=null,D===null?w=J:D.next=J,D=W;var ht=c.alternate;ht!==null&&(ht=ht.updateQueue,L=ht.lastBaseUpdate,L!==D&&(L===null?ht.firstBaseUpdate=J:L.next=J,ht.lastBaseUpdate=W))}if(w!==null){var gt=_.baseState;D=0,ht=J=W=null,L=w;do{var rt=L.lane&-536870913,it=rt!==L.lane;if(it?(fe&rt)===rt:(p&rt)===rt){rt!==0&&rt===uu&&(Jy=!0),ht!==null&&(ht=ht.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var Yt=c,Ht=L;rt=u;var Ue=f;switch(Ht.tag){case 1:if(Yt=Ht.payload,typeof Yt=="function"){gt=Yt.call(Ue,gt,rt);break t}gt=Yt;break t;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=Ht.payload,rt=typeof Yt=="function"?Yt.call(Ue,gt,rt):Yt,rt==null)break t;gt=d({},gt,rt);break t;case 2:qa=!0}}rt=L.callback,rt!==null&&(c.flags|=64,it&&(c.flags|=8192),it=_.callbacks,it===null?_.callbacks=[rt]:it.push(rt))}else it={lane:rt,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ht===null?(J=ht=it,W=gt):ht=ht.next=it,D|=rt;if(L=L.next,L===null){if(L=_.shared.pending,L===null)break;it=L,L=it.next,it.next=null,_.lastBaseUpdate=it,_.shared.pending=null}}while(!0);ht===null&&(W=gt),_.baseState=W,_.firstBaseUpdate=J,_.lastBaseUpdate=ht,w===null&&(_.shared.lanes=0),no|=D,c.lanes=D,c.memoizedState=gt}}function HA(c,u){if(typeof c!="function")throw Error(r(191,c));c.call(u)}function GA(c,u){var f=c.callbacks;if(f!==null)for(c.callbacks=null,c=0;c<f.length;c++)HA(f[c],u)}var fu=q(null),B0=q(0);function WA(c,u){c=va,nt(B0,c),nt(fu,u),va=c|u.baseLanes}function tv(){nt(B0,va),nt(fu,fu.current)}function ev(){va=B0.current,ct(fu),ct(B0)}var Ka=0,te=null,Be=null,On=null,F0=!1,du=!1,Mc=!1,U0=0,Cf=0,gu=null,Zk=0;function wn(){throw Error(r(321))}function nv(c,u){if(u===null)return!1;for(var f=0;f<u.length&&f<c.length;f++)if(!ei(c[f],u[f]))return!1;return!0}function rv(c,u,f,p,_,w){return Ka=w,te=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,K.H=c===null||c.memoizedState===null?IT:RT,Mc=!1,w=f(p,_),Mc=!1,du&&(w=YA(u,f,p,_)),qA(c),w}function qA(c){K.H=q0;var u=Be!==null&&Be.next!==null;if(Ka=0,On=Be=te=null,F0=!1,Cf=0,gu=null,u)throw Error(r(300));c===null||Jn||(c=c.dependencies,c!==null&&N0(c)&&(Jn=!0))}function YA(c,u,f,p){te=c;var _=0;do{if(du&&(gu=null),Cf=0,du=!1,25<=_)throw Error(r(301));if(_+=1,On=Be=null,c.updateQueue!=null){var w=c.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}K.H=s9,w=u(f,p)}while(du);return w}function Jk(){var c=K.H,u=c.useState()[0];return u=typeof u.then=="function"?If(u):u,c=c.useState()[0],(Be!==null?Be.memoizedState:null)!==c&&(te.flags|=1024),u}function iv(){var c=U0!==0;return U0=0,c}function sv(c,u,f){u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~f}function av(c){if(F0){for(c=c.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}F0=!1}Ka=0,On=Be=te=null,du=!1,Cf=U0=0,gu=null}function jr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?te.memoizedState=On=c:On=On.next=c,On}function Mn(){if(Be===null){var c=te.alternate;c=c!==null?c.memoizedState:null}else c=Be.next;var u=On===null?te.memoizedState:On.next;if(u!==null)On=u,Be=c;else{if(c===null)throw te.alternate===null?Error(r(467)):Error(r(310));Be=c,c={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},On===null?te.memoizedState=On=c:On=On.next=c}return On}function ov(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function If(c){var u=Cf;return Cf+=1,gu===null&&(gu=[]),c=UA(gu,c,u),u=te,(On===null?u.memoizedState:On.next)===null&&(u=u.alternate,K.H=u===null||u.memoizedState===null?IT:RT),c}function j0(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return If(c);if(c.$$typeof===R)return xr(c)}throw Error(r(438,String(c)))}function cv(c){var u=null,f=te.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var p=te.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(u={data:p.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=ov(),te.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(c),p=0;p<c;p++)f[p]=B;return u.index++,f}function fa(c,u){return typeof u=="function"?u(c):u}function z0(c){var u=Mn();return lv(u,Be,c)}function lv(c,u,f){var p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var _=c.baseQueue,w=p.pending;if(w!==null){if(_!==null){var D=_.next;_.next=w.next,w.next=D}u.baseQueue=_=w,p.pending=null}if(w=c.baseState,_===null)c.memoizedState=w;else{u=_.next;var L=D=null,W=null,J=u,ht=!1;do{var gt=J.lane&-536870913;if(gt!==J.lane?(fe&gt)===gt:(Ka&gt)===gt){var rt=J.revertLane;if(rt===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),gt===uu&&(ht=!0);else if((Ka&rt)===rt){J=J.next,rt===uu&&(ht=!0);continue}else gt={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},W===null?(L=W=gt,D=w):W=W.next=gt,te.lanes|=rt,no|=rt;gt=J.action,Mc&&f(w,gt),w=J.hasEagerState?J.eagerState:f(w,gt)}else rt={lane:gt,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},W===null?(L=W=rt,D=w):W=W.next=rt,te.lanes|=gt,no|=gt;J=J.next}while(J!==null&&J!==u);if(W===null?D=w:W.next=L,!ei(w,c.memoizedState)&&(Jn=!0,ht&&(f=hu,f!==null)))throw f;c.memoizedState=w,c.baseState=D,c.baseQueue=W,p.lastRenderedState=w}return _===null&&(p.lanes=0),[c.memoizedState,p.dispatch]}function uv(c){var u=Mn(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var p=f.dispatch,_=f.pending,w=u.memoizedState;if(_!==null){f.pending=null;var D=_=_.next;do w=c(w,D.action),D=D.next;while(D!==_);ei(w,u.memoizedState)||(Jn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),f.lastRenderedState=w}return[w,p]}function XA(c,u,f){var p=te,_=Mn(),w=xe;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=u();var D=!ei((Be||_).memoizedState,f);D&&(_.memoizedState=f,Jn=!0),_=_.queue;var L=QA.bind(null,p,_,c);if(Rf(2048,8,L,[c]),_.getSnapshot!==u||D||On!==null&&On.memoizedState.tag&1){if(p.flags|=2048,pu(9,H0(),$A.bind(null,p,_,f,u),null),We===null)throw Error(r(349));w||(Ka&124)!==0||KA(p,u,f)}return f}function KA(c,u,f){c.flags|=16384,c={getSnapshot:u,value:f},u=te.updateQueue,u===null?(u=ov(),te.updateQueue=u,u.stores=[c]):(f=u.stores,f===null?u.stores=[c]:f.push(c))}function $A(c,u,f,p){u.value=f,u.getSnapshot=p,ZA(u)&&JA(c)}function QA(c,u,f){return f(function(){ZA(u)&&JA(c)})}function ZA(c){var u=c.getSnapshot;c=c.value;try{var f=u();return!ei(c,f)}catch{return!0}}function JA(c){var u=au(c,2);u!==null&&oi(u,c,2)}function hv(c){var u=jr();if(typeof c=="function"){var f=c;if(c=f(),Mc){vr(!0);try{f()}finally{vr(!1)}}}return u.memoizedState=u.baseState=c,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:c},u}function tT(c,u,f,p){return c.baseState=f,lv(c,Be,typeof p=="function"?p:fa)}function t9(c,u,f,p,_){if(W0(c))throw Error(r(485));if(c=u.action,c!==null){var w={payload:_,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};K.T!==null?f(!0):w.isTransition=!1,p(w),f=u.pending,f===null?(w.next=u.pending=w,eT(u,w)):(w.next=f.next,u.pending=f.next=w)}}function eT(c,u){var f=u.action,p=u.payload,_=c.state;if(u.isTransition){var w=K.T,D={};K.T=D;try{var L=f(_,p),W=K.S;W!==null&&W(D,L),nT(c,u,L)}catch(J){fv(c,u,J)}finally{K.T=w}}else try{w=f(_,p),nT(c,u,w)}catch(J){fv(c,u,J)}}function nT(c,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){rT(c,u,p)},function(p){return fv(c,u,p)}):rT(c,u,f)}function rT(c,u,f){u.status="fulfilled",u.value=f,iT(u),c.state=f,u=c.pending,u!==null&&(f=u.next,f===u?c.pending=null:(f=f.next,u.next=f,eT(c,f)))}function fv(c,u,f){var p=c.pending;if(c.pending=null,p!==null){p=p.next;do u.status="rejected",u.reason=f,iT(u),u=u.next;while(u!==p)}c.action=null}function iT(c){c=c.listeners;for(var u=0;u<c.length;u++)(0,c[u])()}function sT(c,u){return u}function aT(c,u){if(xe){var f=We.formState;if(f!==null){t:{var p=te;if(xe){if(hn){e:{for(var _=hn,w=vs;_.nodeType!==8;){if(!w){_=null;break e}if(_=qi(_.nextSibling),_===null){_=null;break e}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){hn=qi(_.nextSibling),p=_.data==="F!";break t}}Ic(p)}p=!1}p&&(u=f[0])}}return f=jr(),f.memoizedState=f.baseState=u,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sT,lastRenderedState:u},f.queue=p,f=TT.bind(null,te,p),p.dispatch=f,p=hv(!1),w=yv.bind(null,te,!1,p.queue),p=jr(),_={state:u,dispatch:null,action:c,pending:null},p.queue=_,f=t9.bind(null,te,_,w,f),_.dispatch=f,p.memoizedState=c,[u,f,!1]}function oT(c){var u=Mn();return cT(u,Be,c)}function cT(c,u,f){if(u=lv(c,u,sT)[0],c=z0(fa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var p=If(u)}catch(D){throw D===bf?L0:D}else p=u;u=Mn();var _=u.queue,w=_.dispatch;return f!==u.memoizedState&&(te.flags|=2048,pu(9,H0(),e9.bind(null,_,f),null)),[p,w,c]}function e9(c,u){c.action=u}function lT(c){var u=Mn(),f=Be;if(f!==null)return cT(u,f,c);Mn(),u=u.memoizedState,f=Mn();var p=f.queue.dispatch;return f.memoizedState=c,[u,p,!1]}function pu(c,u,f,p){return c={tag:c,create:f,deps:p,inst:u,next:null},u=te.updateQueue,u===null&&(u=ov(),te.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=c.next=c:(p=f.next,f.next=c,c.next=p,u.lastEffect=c),c}function H0(){return{destroy:void 0,resource:void 0}}function uT(){return Mn().memoizedState}function G0(c,u,f,p){var _=jr();p=p===void 0?null:p,te.flags|=c,_.memoizedState=pu(1|u,H0(),f,p)}function Rf(c,u,f,p){var _=Mn();p=p===void 0?null:p;var w=_.memoizedState.inst;Be!==null&&p!==null&&nv(p,Be.memoizedState.deps)?_.memoizedState=pu(u,w,f,p):(te.flags|=c,_.memoizedState=pu(1|u,w,f,p))}function hT(c,u){G0(8390656,8,c,u)}function fT(c,u){Rf(2048,8,c,u)}function dT(c,u){return Rf(4,2,c,u)}function gT(c,u){return Rf(4,4,c,u)}function pT(c,u){if(typeof u=="function"){c=c();var f=u(c);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function mT(c,u,f){f=f!=null?f.concat([c]):null,Rf(4,4,pT.bind(null,u,c),f)}function dv(){}function yT(c,u){var f=Mn();u=u===void 0?null:u;var p=f.memoizedState;return u!==null&&nv(u,p[1])?p[0]:(f.memoizedState=[c,u],c)}function vT(c,u){var f=Mn();u=u===void 0?null:u;var p=f.memoizedState;if(u!==null&&nv(u,p[1]))return p[0];if(p=c(),Mc){vr(!0);try{c()}finally{vr(!1)}}return f.memoizedState=[p,u],p}function gv(c,u,f){return f===void 0||(Ka&1073741824)!==0?c.memoizedState=u:(c.memoizedState=f,c=wS(),te.lanes|=c,no|=c,f)}function _T(c,u,f,p){return ei(f,u)?f:fu.current!==null?(c=gv(c,f,p),ei(c,u)||(Jn=!0),c):(Ka&42)===0?(Jn=!0,c.memoizedState=f):(c=wS(),te.lanes|=c,no|=c,u)}function xT(c,u,f,p,_){var w=ot.p;ot.p=w!==0&&8>w?w:8;var D=K.T,L={};K.T=L,yv(c,!1,u,f);try{var W=_(),J=K.S;if(J!==null&&J(L,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ht=Qk(W,p);Df(c,u,ht,ai(c))}else Df(c,u,p,ai(c))}catch(gt){Df(c,u,{then:function(){},status:"rejected",reason:gt},ai())}finally{ot.p=w,K.T=D}}function n9(){}function pv(c,u,f,p){if(c.tag!==5)throw Error(r(476));var _=wT(c).queue;xT(c,_,u,vt,f===null?n9:function(){return bT(c),f(p)})}function wT(c){var u=c.memoizedState;if(u!==null)return u;u={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:vt},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:f},next:null},c.memoizedState=u,c=c.alternate,c!==null&&(c.memoizedState=u),u}function bT(c){var u=wT(c).next.queue;Df(c,u,{},ai())}function mv(){return xr(Xf)}function ET(){return Mn().memoizedState}function AT(){return Mn().memoizedState}function r9(c){for(var u=c.return;u!==null;){switch(u.tag){case 24:case 3:var f=ai();c=Ya(f);var p=Xa(u,c,f);p!==null&&(oi(p,u,f),Af(p,u,f)),u={cache:qy()},c.payload=u;return}u=u.return}}function i9(c,u,f){var p=ai();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},W0(c)?ST(u,f):(f=Ly(c,u,f,p),f!==null&&(oi(f,c,p),CT(f,u,p)))}function TT(c,u,f){var p=ai();Df(c,u,f,p)}function Df(c,u,f,p){var _={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(W0(c))ST(u,_);else{var w=c.alternate;if(c.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var D=u.lastRenderedState,L=w(D,f);if(_.hasEagerState=!0,_.eagerState=L,ei(L,D))return I0(c,u,_,0),We===null&&C0(),!1}catch{}finally{}if(f=Ly(c,u,_,p),f!==null)return oi(f,c,p),CT(f,u,p),!0}return!1}function yv(c,u,f,p){if(p={lane:2,revertLane:Kv(),action:p,hasEagerState:!1,eagerState:null,next:null},W0(c)){if(u)throw Error(r(479))}else u=Ly(c,f,p,2),u!==null&&oi(u,c,2)}function W0(c){var u=c.alternate;return c===te||u!==null&&u===te}function ST(c,u){du=F0=!0;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}function CT(c,u,f){if((f&4194048)!==0){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,Qh(c,f)}}var q0={readContext:xr,use:j0,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn,useHostTransitionStatus:wn,useFormState:wn,useActionState:wn,useOptimistic:wn,useMemoCache:wn,useCacheRefresh:wn},IT={readContext:xr,use:j0,useCallback:function(c,u){return jr().memoizedState=[c,u===void 0?null:u],c},useContext:xr,useEffect:hT,useImperativeHandle:function(c,u,f){f=f!=null?f.concat([c]):null,G0(4194308,4,pT.bind(null,u,c),f)},useLayoutEffect:function(c,u){return G0(4194308,4,c,u)},useInsertionEffect:function(c,u){G0(4,2,c,u)},useMemo:function(c,u){var f=jr();u=u===void 0?null:u;var p=c();if(Mc){vr(!0);try{c()}finally{vr(!1)}}return f.memoizedState=[p,u],p},useReducer:function(c,u,f){var p=jr();if(f!==void 0){var _=f(u);if(Mc){vr(!0);try{f(u)}finally{vr(!1)}}}else _=u;return p.memoizedState=p.baseState=_,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:_},p.queue=c,c=c.dispatch=i9.bind(null,te,c),[p.memoizedState,c]},useRef:function(c){var u=jr();return c={current:c},u.memoizedState=c},useState:function(c){c=hv(c);var u=c.queue,f=TT.bind(null,te,u);return u.dispatch=f,[c.memoizedState,f]},useDebugValue:dv,useDeferredValue:function(c,u){var f=jr();return gv(f,c,u)},useTransition:function(){var c=hv(!1);return c=xT.bind(null,te,c.queue,!0,!1),jr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,u,f){var p=te,_=jr();if(xe){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),We===null)throw Error(r(349));(fe&124)!==0||KA(p,u,f)}_.memoizedState=f;var w={value:f,getSnapshot:u};return _.queue=w,hT(QA.bind(null,p,w,c),[c]),p.flags|=2048,pu(9,H0(),$A.bind(null,p,w,f,u),null),f},useId:function(){var c=jr(),u=We.identifierPrefix;if(xe){var f=la,p=ca;f=(p&~(1<<32-_r(p)-1)).toString(32)+f,u="«"+u+"R"+f,f=U0++,0<f&&(u+="H"+f.toString(32)),u+="»"}else f=Zk++,u="«"+u+"r"+f.toString(32)+"»";return c.memoizedState=u},useHostTransitionStatus:mv,useFormState:aT,useActionState:aT,useOptimistic:function(c){var u=jr();u.memoizedState=u.baseState=c;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=yv.bind(null,te,!0,f),f.dispatch=u,[c,u]},useMemoCache:cv,useCacheRefresh:function(){return jr().memoizedState=r9.bind(null,te)}},RT={readContext:xr,use:j0,useCallback:yT,useContext:xr,useEffect:fT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:gT,useMemo:vT,useReducer:z0,useRef:uT,useState:function(){return z0(fa)},useDebugValue:dv,useDeferredValue:function(c,u){var f=Mn();return _T(f,Be.memoizedState,c,u)},useTransition:function(){var c=z0(fa)[0],u=Mn().memoizedState;return[typeof c=="boolean"?c:If(c),u]},useSyncExternalStore:XA,useId:ET,useHostTransitionStatus:mv,useFormState:oT,useActionState:oT,useOptimistic:function(c,u){var f=Mn();return tT(f,Be,c,u)},useMemoCache:cv,useCacheRefresh:AT},s9={readContext:xr,use:j0,useCallback:yT,useContext:xr,useEffect:fT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:gT,useMemo:vT,useReducer:uv,useRef:uT,useState:function(){return uv(fa)},useDebugValue:dv,useDeferredValue:function(c,u){var f=Mn();return Be===null?gv(f,c,u):_T(f,Be.memoizedState,c,u)},useTransition:function(){var c=uv(fa)[0],u=Mn().memoizedState;return[typeof c=="boolean"?c:If(c),u]},useSyncExternalStore:XA,useId:ET,useHostTransitionStatus:mv,useFormState:lT,useActionState:lT,useOptimistic:function(c,u){var f=Mn();return Be!==null?tT(f,Be,c,u):(f.baseState=c,[c,f.queue.dispatch])},useMemoCache:cv,useCacheRefresh:AT},mu=null,Of=0;function Y0(c){var u=Of;return Of+=1,mu===null&&(mu=[]),UA(mu,c,u)}function Mf(c,u){u=u.props.ref,c.ref=u!==void 0?u:null}function X0(c,u){throw u.$$typeof===g?Error(r(525)):(c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c)))}function DT(c){var u=c._init;return u(c._payload)}function OT(c){function u(X,Y){if(c){var Z=X.deletions;Z===null?(X.deletions=[Y],X.flags|=16):Z.push(Y)}}function f(X,Y){if(!c)return null;for(;Y!==null;)u(X,Y),Y=Y.sibling;return null}function p(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function _(X,Y){return X=oa(X,Y),X.index=0,X.sibling=null,X}function w(X,Y,Z){return X.index=Z,c?(Z=X.alternate,Z!==null?(Z=Z.index,Z<Y?(X.flags|=67108866,Y):Z):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function D(X){return c&&X.alternate===null&&(X.flags|=67108866),X}function L(X,Y,Z,ft){return Y===null||Y.tag!==6?(Y=By(Z,X.mode,ft),Y.return=X,Y):(Y=_(Y,Z),Y.return=X,Y)}function W(X,Y,Z,ft){var Mt=Z.type;return Mt===x?ht(X,Y,Z.props.children,ft,Z.key):Y!==null&&(Y.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===C&&DT(Mt)===Y.type)?(Y=_(Y,Z.props),Mf(Y,Z),Y.return=X,Y):(Y=D0(Z.type,Z.key,Z.props,null,X.mode,ft),Mf(Y,Z),Y.return=X,Y)}function J(X,Y,Z,ft){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=Fy(Z,X.mode,ft),Y.return=X,Y):(Y=_(Y,Z.children||[]),Y.return=X,Y)}function ht(X,Y,Z,ft,Mt){return Y===null||Y.tag!==7?(Y=Ac(Z,X.mode,ft,Mt),Y.return=X,Y):(Y=_(Y,Z),Y.return=X,Y)}function gt(X,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=By(""+Y,X.mode,Z),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case m:return Z=D0(Y.type,Y.key,Y.props,null,X.mode,Z),Mf(Z,Y),Z.return=X,Z;case v:return Y=Fy(Y,X.mode,Z),Y.return=X,Y;case C:var ft=Y._init;return Y=ft(Y._payload),gt(X,Y,Z)}if(wt(Y)||G(Y))return Y=Ac(Y,X.mode,Z,null),Y.return=X,Y;if(typeof Y.then=="function")return gt(X,Y0(Y),Z);if(Y.$$typeof===R)return gt(X,P0(X,Y),Z);X0(X,Y)}return null}function rt(X,Y,Z,ft){var Mt=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Mt!==null?null:L(X,Y,""+Z,ft);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:return Z.key===Mt?W(X,Y,Z,ft):null;case v:return Z.key===Mt?J(X,Y,Z,ft):null;case C:return Mt=Z._init,Z=Mt(Z._payload),rt(X,Y,Z,ft)}if(wt(Z)||G(Z))return Mt!==null?null:ht(X,Y,Z,ft,null);if(typeof Z.then=="function")return rt(X,Y,Y0(Z),ft);if(Z.$$typeof===R)return rt(X,Y,P0(X,Z),ft);X0(X,Z)}return null}function it(X,Y,Z,ft,Mt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return X=X.get(Z)||null,L(Y,X,""+ft,Mt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case m:return X=X.get(ft.key===null?Z:ft.key)||null,W(Y,X,ft,Mt);case v:return X=X.get(ft.key===null?Z:ft.key)||null,J(Y,X,ft,Mt);case C:var ie=ft._init;return ft=ie(ft._payload),it(X,Y,Z,ft,Mt)}if(wt(ft)||G(ft))return X=X.get(Z)||null,ht(Y,X,ft,Mt,null);if(typeof ft.then=="function")return it(X,Y,Z,Y0(ft),Mt);if(ft.$$typeof===R)return it(X,Y,Z,P0(Y,ft),Mt);X0(Y,ft)}return null}function Yt(X,Y,Z,ft){for(var Mt=null,ie=null,Lt=Y,Gt=Y=0,er=null;Lt!==null&&Gt<Z.length;Gt++){Lt.index>Gt?(er=Lt,Lt=null):er=Lt.sibling;var ve=rt(X,Lt,Z[Gt],ft);if(ve===null){Lt===null&&(Lt=er);break}c&&Lt&&ve.alternate===null&&u(X,Lt),Y=w(ve,Y,Gt),ie===null?Mt=ve:ie.sibling=ve,ie=ve,Lt=er}if(Gt===Z.length)return f(X,Lt),xe&&Sc(X,Gt),Mt;if(Lt===null){for(;Gt<Z.length;Gt++)Lt=gt(X,Z[Gt],ft),Lt!==null&&(Y=w(Lt,Y,Gt),ie===null?Mt=Lt:ie.sibling=Lt,ie=Lt);return xe&&Sc(X,Gt),Mt}for(Lt=p(Lt);Gt<Z.length;Gt++)er=it(Lt,X,Gt,Z[Gt],ft),er!==null&&(c&&er.alternate!==null&&Lt.delete(er.key===null?Gt:er.key),Y=w(er,Y,Gt),ie===null?Mt=er:ie.sibling=er,ie=er);return c&&Lt.forEach(function(ho){return u(X,ho)}),xe&&Sc(X,Gt),Mt}function Ht(X,Y,Z,ft){if(Z==null)throw Error(r(151));for(var Mt=null,ie=null,Lt=Y,Gt=Y=0,er=null,ve=Z.next();Lt!==null&&!ve.done;Gt++,ve=Z.next()){Lt.index>Gt?(er=Lt,Lt=null):er=Lt.sibling;var ho=rt(X,Lt,ve.value,ft);if(ho===null){Lt===null&&(Lt=er);break}c&&Lt&&ho.alternate===null&&u(X,Lt),Y=w(ho,Y,Gt),ie===null?Mt=ho:ie.sibling=ho,ie=ho,Lt=er}if(ve.done)return f(X,Lt),xe&&Sc(X,Gt),Mt;if(Lt===null){for(;!ve.done;Gt++,ve=Z.next())ve=gt(X,ve.value,ft),ve!==null&&(Y=w(ve,Y,Gt),ie===null?Mt=ve:ie.sibling=ve,ie=ve);return xe&&Sc(X,Gt),Mt}for(Lt=p(Lt);!ve.done;Gt++,ve=Z.next())ve=it(Lt,X,Gt,ve.value,ft),ve!==null&&(c&&ve.alternate!==null&&Lt.delete(ve.key===null?Gt:ve.key),Y=w(ve,Y,Gt),ie===null?Mt=ve:ie.sibling=ve,ie=ve);return c&&Lt.forEach(function(a7){return u(X,a7)}),xe&&Sc(X,Gt),Mt}function Ue(X,Y,Z,ft){if(typeof Z=="object"&&Z!==null&&Z.type===x&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:t:{for(var Mt=Z.key;Y!==null;){if(Y.key===Mt){if(Mt=Z.type,Mt===x){if(Y.tag===7){f(X,Y.sibling),ft=_(Y,Z.props.children),ft.return=X,X=ft;break t}}else if(Y.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===C&&DT(Mt)===Y.type){f(X,Y.sibling),ft=_(Y,Z.props),Mf(ft,Z),ft.return=X,X=ft;break t}f(X,Y);break}else u(X,Y);Y=Y.sibling}Z.type===x?(ft=Ac(Z.props.children,X.mode,ft,Z.key),ft.return=X,X=ft):(ft=D0(Z.type,Z.key,Z.props,null,X.mode,ft),Mf(ft,Z),ft.return=X,X=ft)}return D(X);case v:t:{for(Mt=Z.key;Y!==null;){if(Y.key===Mt)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){f(X,Y.sibling),ft=_(Y,Z.children||[]),ft.return=X,X=ft;break t}else{f(X,Y);break}else u(X,Y);Y=Y.sibling}ft=Fy(Z,X.mode,ft),ft.return=X,X=ft}return D(X);case C:return Mt=Z._init,Z=Mt(Z._payload),Ue(X,Y,Z,ft)}if(wt(Z))return Yt(X,Y,Z,ft);if(G(Z)){if(Mt=G(Z),typeof Mt!="function")throw Error(r(150));return Z=Mt.call(Z),Ht(X,Y,Z,ft)}if(typeof Z.then=="function")return Ue(X,Y,Y0(Z),ft);if(Z.$$typeof===R)return Ue(X,Y,P0(X,Z),ft);X0(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(f(X,Y.sibling),ft=_(Y,Z),ft.return=X,X=ft):(f(X,Y),ft=By(Z,X.mode,ft),ft.return=X,X=ft),D(X)):f(X,Y)}return function(X,Y,Z,ft){try{Of=0;var Mt=Ue(X,Y,Z,ft);return mu=null,Mt}catch(Lt){if(Lt===bf||Lt===L0)throw Lt;var ie=ni(29,Lt,null,X.mode);return ie.lanes=ft,ie.return=X,ie}finally{}}}var yu=OT(!0),MT=OT(!1),Ti=q(null),_s=null;function $a(c){var u=c.alternate;nt(jn,jn.current&1),nt(Ti,c),_s===null&&(u===null||fu.current!==null||u.memoizedState!==null)&&(_s=c)}function NT(c){if(c.tag===22){if(nt(jn,jn.current),nt(Ti,c),_s===null){var u=c.alternate;u!==null&&u.memoizedState!==null&&(_s=c)}}else Qa()}function Qa(){nt(jn,jn.current),nt(Ti,Ti.current)}function da(c){ct(Ti),_s===c&&(_s=null),ct(jn)}var jn=q(0);function K0(c){for(var u=c;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||o_(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function vv(c,u,f,p){u=c.memoizedState,f=f(p,u),f=f==null?u:d({},u,f),c.memoizedState=f,c.lanes===0&&(c.updateQueue.baseState=f)}var _v={enqueueSetState:function(c,u,f){c=c._reactInternals;var p=ai(),_=Ya(p);_.payload=u,f!=null&&(_.callback=f),u=Xa(c,_,p),u!==null&&(oi(u,c,p),Af(u,c,p))},enqueueReplaceState:function(c,u,f){c=c._reactInternals;var p=ai(),_=Ya(p);_.tag=1,_.payload=u,f!=null&&(_.callback=f),u=Xa(c,_,p),u!==null&&(oi(u,c,p),Af(u,c,p))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var f=ai(),p=Ya(f);p.tag=2,u!=null&&(p.callback=u),u=Xa(c,p,f),u!==null&&(oi(u,c,f),Af(u,c,f))}};function PT(c,u,f,p,_,w,D){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(p,w,D):u.prototype&&u.prototype.isPureReactComponent?!gf(f,p)||!gf(_,w):!0}function kT(c,u,f,p){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,p),u.state!==c&&_v.enqueueReplaceState(u,u.state,null)}function Nc(c,u){var f=u;if("ref"in u){f={};for(var p in u)p!=="ref"&&(f[p]=u[p])}if(c=c.defaultProps){f===u&&(f=d({},f));for(var _ in c)f[_]===void 0&&(f[_]=c[_])}return f}var $0=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function LT(c){$0(c)}function VT(c){console.error(c)}function BT(c){$0(c)}function Q0(c,u){try{var f=c.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(p){setTimeout(function(){throw p})}}function FT(c,u,f){try{var p=c.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function xv(c,u,f){return f=Ya(f),f.tag=3,f.payload={element:null},f.callback=function(){Q0(c,u)},f}function UT(c){return c=Ya(c),c.tag=3,c}function jT(c,u,f,p){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var w=p.value;c.payload=function(){return _(w)},c.callback=function(){FT(u,f,p)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(c.callback=function(){FT(u,f,p),typeof _!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function a9(c,u,f,p,_){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(u=f.alternate,u!==null&&_f(u,f,_,!0),f=Ti.current,f!==null){switch(f.tag){case 13:return _s===null?Gv():f.alternate===null&&fn===0&&(fn=3),f.flags&=-257,f.flags|=65536,f.lanes=_,p===Ky?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([p]):u.add(p),qv(c,p,_)),!1;case 22:return f.flags|=65536,p===Ky?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([p]):f.add(p)),qv(c,p,_)),!1}throw Error(r(435,f.tag))}return qv(c,p,_),Gv(),!1}if(xe)return u=Ti.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,p!==zy&&(c=Error(r(422),{cause:p}),vf(wi(c,f)))):(p!==zy&&(u=Error(r(423),{cause:p}),vf(wi(u,f))),c=c.current.alternate,c.flags|=65536,_&=-_,c.lanes|=_,p=wi(p,f),_=xv(c.stateNode,p,_),Zy(c,_),fn!==4&&(fn=2)),!1;var w=Error(r(520),{cause:p});if(w=wi(w,f),Ff===null?Ff=[w]:Ff.push(w),fn!==4&&(fn=2),u===null)return!0;p=wi(p,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,c=_&-_,f.lanes|=c,c=xv(f.stateNode,p,c),Zy(f,c),!1;case 1:if(u=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ro===null||!ro.has(w))))return f.flags|=65536,_&=-_,f.lanes|=_,_=UT(_),jT(_,c,f,p),Zy(f,_),!1}f=f.return}while(f!==null);return!1}var zT=Error(r(461)),Jn=!1;function ur(c,u,f,p){u.child=c===null?MT(u,null,f,p):yu(u,c.child,f,p)}function HT(c,u,f,p,_){f=f.render;var w=u.ref;if("ref"in p){var D={};for(var L in p)L!=="ref"&&(D[L]=p[L])}else D=p;return Dc(u),p=rv(c,u,f,D,w,_),L=iv(),c!==null&&!Jn?(sv(c,u,_),ga(c,u,_)):(xe&&L&&Uy(u),u.flags|=1,ur(c,u,p,_),u.child)}function GT(c,u,f,p,_){if(c===null){var w=f.type;return typeof w=="function"&&!Vy(w)&&w.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=w,WT(c,u,w,p,_)):(c=D0(f.type,null,p,u,u.mode,_),c.ref=u.ref,c.return=u,u.child=c)}if(w=c.child,!Iv(c,_)){var D=w.memoizedProps;if(f=f.compare,f=f!==null?f:gf,f(D,p)&&c.ref===u.ref)return ga(c,u,_)}return u.flags|=1,c=oa(w,p),c.ref=u.ref,c.return=u,u.child=c}function WT(c,u,f,p,_){if(c!==null){var w=c.memoizedProps;if(gf(w,p)&&c.ref===u.ref)if(Jn=!1,u.pendingProps=p=w,Iv(c,_))(c.flags&131072)!==0&&(Jn=!0);else return u.lanes=c.lanes,ga(c,u,_)}return wv(c,u,f,p,_)}function qT(c,u,f){var p=u.pendingProps,_=p.children,w=c!==null?c.memoizedState:null;if(p.mode==="hidden"){if((u.flags&128)!==0){if(p=w!==null?w.baseLanes|f:f,c!==null){for(_=u.child=c.child,w=0;_!==null;)w=w|_.lanes|_.childLanes,_=_.sibling;u.childLanes=w&~p}else u.childLanes=0,u.child=null;return YT(c,u,p,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},c!==null&&k0(u,w!==null?w.cachePool:null),w!==null?WA(u,w):tv(),NT(u);else return u.lanes=u.childLanes=536870912,YT(c,u,w!==null?w.baseLanes|f:f,f)}else w!==null?(k0(u,w.cachePool),WA(u,w),Qa(),u.memoizedState=null):(c!==null&&k0(u,null),tv(),Qa());return ur(c,u,_,f),u.child}function YT(c,u,f,p){var _=Xy();return _=_===null?null:{parent:Un._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},c!==null&&k0(u,null),tv(),NT(u),c!==null&&_f(c,u,p,!0),null}function Z0(c,u){var f=u.ref;if(f===null)c!==null&&c.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(c===null||c.ref!==f)&&(u.flags|=4194816)}}function wv(c,u,f,p,_){return Dc(u),f=rv(c,u,f,p,void 0,_),p=iv(),c!==null&&!Jn?(sv(c,u,_),ga(c,u,_)):(xe&&p&&Uy(u),u.flags|=1,ur(c,u,f,_),u.child)}function XT(c,u,f,p,_,w){return Dc(u),u.updateQueue=null,f=YA(u,p,f,_),qA(c),p=iv(),c!==null&&!Jn?(sv(c,u,w),ga(c,u,w)):(xe&&p&&Uy(u),u.flags|=1,ur(c,u,f,w),u.child)}function KT(c,u,f,p,_){if(Dc(u),u.stateNode===null){var w=ou,D=f.contextType;typeof D=="object"&&D!==null&&(w=xr(D)),w=new f(p,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=_v,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=p,w.state=u.memoizedState,w.refs={},$y(u),D=f.contextType,w.context=typeof D=="object"&&D!==null?xr(D):ou,w.state=u.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(vv(u,f,D,p),w.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&_v.enqueueReplaceState(w,w.state,null),Sf(u,p,w,_),Tf(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),p=!0}else if(c===null){w=u.stateNode;var L=u.memoizedProps,W=Nc(f,L);w.props=W;var J=w.context,ht=f.contextType;D=ou,typeof ht=="object"&&ht!==null&&(D=xr(ht));var gt=f.getDerivedStateFromProps;ht=typeof gt=="function"||typeof w.getSnapshotBeforeUpdate=="function",L=u.pendingProps!==L,ht||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L||J!==D)&&kT(u,w,p,D),qa=!1;var rt=u.memoizedState;w.state=rt,Sf(u,p,w,_),Tf(),J=u.memoizedState,L||rt!==J||qa?(typeof gt=="function"&&(vv(u,f,gt,p),J=u.memoizedState),(W=qa||PT(u,f,W,p,rt,J,D))?(ht||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=J),w.props=p,w.state=J,w.context=D,p=W):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{w=u.stateNode,Qy(c,u),D=u.memoizedProps,ht=Nc(f,D),w.props=ht,gt=u.pendingProps,rt=w.context,J=f.contextType,W=ou,typeof J=="object"&&J!==null&&(W=xr(J)),L=f.getDerivedStateFromProps,(J=typeof L=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==gt||rt!==W)&&kT(u,w,p,W),qa=!1,rt=u.memoizedState,w.state=rt,Sf(u,p,w,_),Tf();var it=u.memoizedState;D!==gt||rt!==it||qa||c!==null&&c.dependencies!==null&&N0(c.dependencies)?(typeof L=="function"&&(vv(u,f,L,p),it=u.memoizedState),(ht=qa||PT(u,f,ht,p,rt,it,W)||c!==null&&c.dependencies!==null&&N0(c.dependencies))?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,it,W),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,it,W)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===c.memoizedProps&&rt===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&rt===c.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=it),w.props=p,w.state=it,w.context=W,p=ht):(typeof w.componentDidUpdate!="function"||D===c.memoizedProps&&rt===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&rt===c.memoizedState||(u.flags|=1024),p=!1)}return w=p,Z0(c,u),p=(u.flags&128)!==0,w||p?(w=u.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,c!==null&&p?(u.child=yu(u,c.child,null,_),u.child=yu(u,null,f,_)):ur(c,u,f,_),u.memoizedState=w.state,c=u.child):c=ga(c,u,_),c}function $T(c,u,f,p){return yf(),u.flags|=256,ur(c,u,f,p),u.child}var bv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ev(c){return{baseLanes:c,cachePool:VA()}}function Av(c,u,f){return c=c!==null?c.childLanes&~f:0,u&&(c|=Si),c}function QT(c,u,f){var p=u.pendingProps,_=!1,w=(u.flags&128)!==0,D;if((D=w)||(D=c!==null&&c.memoizedState===null?!1:(jn.current&2)!==0),D&&(_=!0,u.flags&=-129),D=(u.flags&32)!==0,u.flags&=-33,c===null){if(xe){if(_?$a(u):Qa(),xe){var L=hn,W;if(W=L){t:{for(W=L,L=vs;W.nodeType!==8;){if(!L){L=null;break t}if(W=qi(W.nextSibling),W===null){L=null;break t}}L=W}L!==null?(u.memoizedState={dehydrated:L,treeContext:Tc!==null?{id:ca,overflow:la}:null,retryLane:536870912,hydrationErrors:null},W=ni(18,null,null,0),W.stateNode=L,W.return=u,u.child=W,kr=u,hn=null,W=!0):W=!1}W||Ic(u)}if(L=u.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return o_(L)?u.lanes=32:u.lanes=536870912,null;da(u)}return L=p.children,p=p.fallback,_?(Qa(),_=u.mode,L=J0({mode:"hidden",children:L},_),p=Ac(p,_,f,null),L.return=u,p.return=u,L.sibling=p,u.child=L,_=u.child,_.memoizedState=Ev(f),_.childLanes=Av(c,D,f),u.memoizedState=bv,p):($a(u),Tv(u,L))}if(W=c.memoizedState,W!==null&&(L=W.dehydrated,L!==null)){if(w)u.flags&256?($a(u),u.flags&=-257,u=Sv(c,u,f)):u.memoizedState!==null?(Qa(),u.child=c.child,u.flags|=128,u=null):(Qa(),_=p.fallback,L=u.mode,p=J0({mode:"visible",children:p.children},L),_=Ac(_,L,f,null),_.flags|=2,p.return=u,_.return=u,p.sibling=_,u.child=p,yu(u,c.child,null,f),p=u.child,p.memoizedState=Ev(f),p.childLanes=Av(c,D,f),u.memoizedState=bv,u=_);else if($a(u),o_(L)){if(D=L.nextSibling&&L.nextSibling.dataset,D)var J=D.dgst;D=J,p=Error(r(419)),p.stack="",p.digest=D,vf({value:p,source:null,stack:null}),u=Sv(c,u,f)}else if(Jn||_f(c,u,f,!1),D=(f&c.childLanes)!==0,Jn||D){if(D=We,D!==null&&(p=f&-f,p=(p&42)!==0?1:Ba(p),p=(p&(D.suspendedLanes|f))!==0?0:p,p!==0&&p!==W.retryLane))throw W.retryLane=p,au(c,p),oi(D,c,p),zT;L.data==="$?"||Gv(),u=Sv(c,u,f)}else L.data==="$?"?(u.flags|=192,u.child=c.child,u=null):(c=W.treeContext,hn=qi(L.nextSibling),kr=u,xe=!0,Cc=null,vs=!1,c!==null&&(Ei[Ai++]=ca,Ei[Ai++]=la,Ei[Ai++]=Tc,ca=c.id,la=c.overflow,Tc=u),u=Tv(u,p.children),u.flags|=4096);return u}return _?(Qa(),_=p.fallback,L=u.mode,W=c.child,J=W.sibling,p=oa(W,{mode:"hidden",children:p.children}),p.subtreeFlags=W.subtreeFlags&65011712,J!==null?_=oa(J,_):(_=Ac(_,L,f,null),_.flags|=2),_.return=u,p.return=u,p.sibling=_,u.child=p,p=_,_=u.child,L=c.child.memoizedState,L===null?L=Ev(f):(W=L.cachePool,W!==null?(J=Un._currentValue,W=W.parent!==J?{parent:J,pool:J}:W):W=VA(),L={baseLanes:L.baseLanes|f,cachePool:W}),_.memoizedState=L,_.childLanes=Av(c,D,f),u.memoizedState=bv,p):($a(u),f=c.child,c=f.sibling,f=oa(f,{mode:"visible",children:p.children}),f.return=u,f.sibling=null,c!==null&&(D=u.deletions,D===null?(u.deletions=[c],u.flags|=16):D.push(c)),u.child=f,u.memoizedState=null,f)}function Tv(c,u){return u=J0({mode:"visible",children:u},c.mode),u.return=c,c.child=u}function J0(c,u){return c=ni(22,c,null,u),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function Sv(c,u,f){return yu(u,c.child,null,f),c=Tv(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function ZT(c,u,f){c.lanes|=u;var p=c.alternate;p!==null&&(p.lanes|=u),Gy(c.return,u,f)}function Cv(c,u,f,p,_){var w=c.memoizedState;w===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:_}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=f,w.tailMode=_)}function JT(c,u,f){var p=u.pendingProps,_=p.revealOrder,w=p.tail;if(ur(c,u,p.children,f),p=jn.current,(p&2)!==0)p=p&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&ZT(c,f,u);else if(c.tag===19)ZT(c,f,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break t;for(;c.sibling===null;){if(c.return===null||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}p&=1}switch(nt(jn,p),_){case"forwards":for(f=u.child,_=null;f!==null;)c=f.alternate,c!==null&&K0(c)===null&&(_=f),f=f.sibling;f=_,f===null?(_=u.child,u.child=null):(_=f.sibling,f.sibling=null),Cv(u,!1,_,f,w);break;case"backwards":for(f=null,_=u.child,u.child=null;_!==null;){if(c=_.alternate,c!==null&&K0(c)===null){u.child=_;break}c=_.sibling,_.sibling=f,f=_,_=c}Cv(u,!0,f,null,w);break;case"together":Cv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ga(c,u,f){if(c!==null&&(u.dependencies=c.dependencies),no|=u.lanes,(f&u.childLanes)===0)if(c!==null){if(_f(c,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,f=oa(c,c.pendingProps),u.child=f,f.return=u;c.sibling!==null;)c=c.sibling,f=f.sibling=oa(c,c.pendingProps),f.return=u;f.sibling=null}return u.child}function Iv(c,u){return(c.lanes&u)!==0?!0:(c=c.dependencies,!!(c!==null&&N0(c)))}function o9(c,u,f){switch(u.tag){case 3:Ut(u,u.stateNode.containerInfo),Wa(u,Un,c.memoizedState.cache),yf();break;case 27:case 5:_t(u);break;case 4:Ut(u,u.stateNode.containerInfo);break;case 10:Wa(u,u.type,u.memoizedProps.value);break;case 13:var p=u.memoizedState;if(p!==null)return p.dehydrated!==null?($a(u),u.flags|=128,null):(f&u.child.childLanes)!==0?QT(c,u,f):($a(u),c=ga(c,u,f),c!==null?c.sibling:null);$a(u);break;case 19:var _=(c.flags&128)!==0;if(p=(f&u.childLanes)!==0,p||(_f(c,u,f,!1),p=(f&u.childLanes)!==0),_){if(p)return JT(c,u,f);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),nt(jn,jn.current),p)break;return null;case 22:case 23:return u.lanes=0,qT(c,u,f);case 24:Wa(u,Un,c.memoizedState.cache)}return ga(c,u,f)}function tS(c,u,f){if(c!==null)if(c.memoizedProps!==u.pendingProps)Jn=!0;else{if(!Iv(c,f)&&(u.flags&128)===0)return Jn=!1,o9(c,u,f);Jn=(c.flags&131072)!==0}else Jn=!1,xe&&(u.flags&1048576)!==0&&DA(u,M0,u.index);switch(u.lanes=0,u.tag){case 16:t:{c=u.pendingProps;var p=u.elementType,_=p._init;if(p=_(p._payload),u.type=p,typeof p=="function")Vy(p)?(c=Nc(p,c),u.tag=1,u=KT(null,u,p,c,f)):(u.tag=0,u=wv(null,u,p,c,f));else{if(p!=null){if(_=p.$$typeof,_===P){u.tag=11,u=HT(null,u,p,c,f);break t}else if(_===O){u.tag=14,u=GT(null,u,p,c,f);break t}}throw u=xt(p)||p,Error(r(306,u,""))}}return u;case 0:return wv(c,u,u.type,u.pendingProps,f);case 1:return p=u.type,_=Nc(p,u.pendingProps),KT(c,u,p,_,f);case 3:t:{if(Ut(u,u.stateNode.containerInfo),c===null)throw Error(r(387));p=u.pendingProps;var w=u.memoizedState;_=w.element,Qy(c,u),Sf(u,p,null,f);var D=u.memoizedState;if(p=D.cache,Wa(u,Un,p),p!==w.cache&&Wy(u,[Un],f,!0),Tf(),p=D.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:D.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=$T(c,u,p,f);break t}else if(p!==_){_=wi(Error(r(424)),u),vf(_),u=$T(c,u,p,f);break t}else{switch(c=u.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(hn=qi(c.firstChild),kr=u,xe=!0,Cc=null,vs=!0,f=MT(u,null,p,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(yf(),p===_){u=ga(c,u,f);break t}ur(c,u,p,f)}u=u.child}return u;case 26:return Z0(c,u),c===null?(f=iC(u.type,null,u.pendingProps,null))?u.memoizedState=f:xe||(f=u.type,c=u.pendingProps,p=dp(Tt.current).createElement(f),p[Vn]=u,p[Rn]=c,fr(p,f,c),xn(p),u.stateNode=p):u.memoizedState=iC(u.type,c.memoizedProps,u.pendingProps,c.memoizedState),null;case 27:return _t(u),c===null&&xe&&(p=u.stateNode=eC(u.type,u.pendingProps,Tt.current),kr=u,vs=!0,_=hn,ao(u.type)?(c_=_,hn=qi(p.firstChild)):hn=_),ur(c,u,u.pendingProps.children,f),Z0(c,u),c===null&&(u.flags|=4194304),u.child;case 5:return c===null&&xe&&((_=p=hn)&&(p=k9(p,u.type,u.pendingProps,vs),p!==null?(u.stateNode=p,kr=u,hn=qi(p.firstChild),vs=!1,_=!0):_=!1),_||Ic(u)),_t(u),_=u.type,w=u.pendingProps,D=c!==null?c.memoizedProps:null,p=w.children,i_(_,w)?p=null:D!==null&&i_(_,D)&&(u.flags|=32),u.memoizedState!==null&&(_=rv(c,u,Jk,null,null,f),Xf._currentValue=_),Z0(c,u),ur(c,u,p,f),u.child;case 6:return c===null&&xe&&((c=f=hn)&&(f=L9(f,u.pendingProps,vs),f!==null?(u.stateNode=f,kr=u,hn=null,c=!0):c=!1),c||Ic(u)),null;case 13:return QT(c,u,f);case 4:return Ut(u,u.stateNode.containerInfo),p=u.pendingProps,c===null?u.child=yu(u,null,p,f):ur(c,u,p,f),u.child;case 11:return HT(c,u,u.type,u.pendingProps,f);case 7:return ur(c,u,u.pendingProps,f),u.child;case 8:return ur(c,u,u.pendingProps.children,f),u.child;case 12:return ur(c,u,u.pendingProps.children,f),u.child;case 10:return p=u.pendingProps,Wa(u,u.type,p.value),ur(c,u,p.children,f),u.child;case 9:return _=u.type._context,p=u.pendingProps.children,Dc(u),_=xr(_),p=p(_),u.flags|=1,ur(c,u,p,f),u.child;case 14:return GT(c,u,u.type,u.pendingProps,f);case 15:return WT(c,u,u.type,u.pendingProps,f);case 19:return JT(c,u,f);case 31:return p=u.pendingProps,f=u.mode,p={mode:p.mode,children:p.children},c===null?(f=J0(p,f),f.ref=u.ref,u.child=f,f.return=u,u=f):(f=oa(c.child,p),f.ref=u.ref,u.child=f,f.return=u,u=f),u;case 22:return qT(c,u,f);case 24:return Dc(u),p=xr(Un),c===null?(_=Xy(),_===null&&(_=We,w=qy(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=f),_=w),u.memoizedState={parent:p,cache:_},$y(u),Wa(u,Un,_)):((c.lanes&f)!==0&&(Qy(c,u),Sf(u,null,null,f),Tf()),_=c.memoizedState,w=u.memoizedState,_.parent!==p?(_={parent:p,cache:p},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Wa(u,Un,p)):(p=w.cache,Wa(u,Un,p),p!==_.cache&&Wy(u,[Un],f,!0))),ur(c,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function pa(c){c.flags|=4}function eS(c,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!lC(u)){if(u=Ti.current,u!==null&&((fe&4194048)===fe?_s!==null:(fe&62914560)!==fe&&(fe&536870912)===0||u!==_s))throw Ef=Ky,BA;c.flags|=8192}}function tp(c,u){u!==null&&(c.flags|=4),c.flags&16384&&(u=c.tag!==22?Kh():536870912,c.lanes|=u,wu|=u)}function Nf(c,u){if(!xe)switch(c.tailMode){case"hidden":u=c.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?c.tail=null:f.sibling=null;break;case"collapsed":f=c.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:p.sibling=null}}function sn(c){var u=c.alternate!==null&&c.alternate.child===c.child,f=0,p=0;if(u)for(var _=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=c,_=_.sibling;else for(_=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=c,_=_.sibling;return c.subtreeFlags|=p,c.childLanes=f,u}function c9(c,u,f){var p=u.pendingProps;switch(jy(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(u),null;case 1:return sn(u),null;case 3:return f=u.stateNode,p=null,c!==null&&(p=c.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),ha(Un),pt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(c===null||c.child===null)&&(mf(u)?pa(u):c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,NA())),sn(u),null;case 26:return f=u.memoizedState,c===null?(pa(u),f!==null?(sn(u),eS(u,f)):(sn(u),u.flags&=-16777217)):f?f!==c.memoizedState?(pa(u),sn(u),eS(u,f)):(sn(u),u.flags&=-16777217):(c.memoizedProps!==p&&pa(u),sn(u),u.flags&=-16777217),null;case 27:bt(u),f=Tt.current;var _=u.type;if(c!==null&&u.stateNode!=null)c.memoizedProps!==p&&pa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return sn(u),null}c=mt.current,mf(u)?OA(u):(c=eC(_,p,f),u.stateNode=c,pa(u))}return sn(u),null;case 5:if(bt(u),f=u.type,c!==null&&u.stateNode!=null)c.memoizedProps!==p&&pa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return sn(u),null}if(c=mt.current,mf(u))OA(u);else{switch(_=dp(Tt.current),c){case 1:c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":c=_.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?c.multiple=!0:p.size&&(c.size=p.size);break;default:c=typeof p.is=="string"?_.createElement(f,{is:p.is}):_.createElement(f)}}c[Vn]=u,c[Rn]=p;t:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)c.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break t;for(;_.sibling===null;){if(_.return===null||_.return===u)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=c;t:switch(fr(c,f,p),f){case"button":case"input":case"select":case"textarea":c=!!p.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&pa(u)}}return sn(u),u.flags&=-16777217,null;case 6:if(c&&u.stateNode!=null)c.memoizedProps!==p&&pa(u);else{if(typeof p!="string"&&u.stateNode===null)throw Error(r(166));if(c=Tt.current,mf(u)){if(c=u.stateNode,f=u.memoizedProps,p=null,_=kr,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}c[Vn]=u,c=!!(c.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||XS(c.nodeValue,f)),c||Ic(u)}else c=dp(c).createTextNode(p),c[Vn]=u,u.stateNode=c}return sn(u),null;case 13:if(p=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(_=mf(u),p!==null&&p.dehydrated!==null){if(c===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Vn]=u}else yf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;sn(u),_=!1}else _=NA(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(da(u),u):(da(u),null)}if(da(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=p!==null,c=c!==null&&c.memoizedState!==null,f){p=u.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var w=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==_&&(p.flags|=2048)}return f!==c&&f&&(u.child.flags|=8192),tp(u,u.updateQueue),sn(u),null;case 4:return pt(),c===null&&Jv(u.stateNode.containerInfo),sn(u),null;case 10:return ha(u.type),sn(u),null;case 19:if(ct(jn),_=u.memoizedState,_===null)return sn(u),null;if(p=(u.flags&128)!==0,w=_.rendering,w===null)if(p)Nf(_,!1);else{if(fn!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(w=K0(c),w!==null){for(u.flags|=128,Nf(_,!1),c=w.updateQueue,u.updateQueue=c,tp(u,c),u.subtreeFlags=0,c=f,f=u.child;f!==null;)RA(f,c),f=f.sibling;return nt(jn,jn.current&1|2),u.child}c=c.sibling}_.tail!==null&&Ie()>rp&&(u.flags|=128,p=!0,Nf(_,!1),u.lanes=4194304)}else{if(!p)if(c=K0(w),c!==null){if(u.flags|=128,p=!0,c=c.updateQueue,u.updateQueue=c,tp(u,c),Nf(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!xe)return sn(u),null}else 2*Ie()-_.renderingStartTime>rp&&f!==536870912&&(u.flags|=128,p=!0,Nf(_,!1),u.lanes=4194304);_.isBackwards?(w.sibling=u.child,u.child=w):(c=_.last,c!==null?c.sibling=w:u.child=w,_.last=w)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Ie(),u.sibling=null,c=jn.current,nt(jn,p?c&1|2:c&1),u):(sn(u),null);case 22:case 23:return da(u),ev(),p=u.memoizedState!==null,c!==null?c.memoizedState!==null!==p&&(u.flags|=8192):p&&(u.flags|=8192),p?(f&536870912)!==0&&(u.flags&128)===0&&(sn(u),u.subtreeFlags&6&&(u.flags|=8192)):sn(u),f=u.updateQueue,f!==null&&tp(u,f.retryQueue),f=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048),c!==null&&ct(Oc),null;case 24:return f=null,c!==null&&(f=c.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),ha(Un),sn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function l9(c,u){switch(jy(u),u.tag){case 1:return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return ha(Un),pt(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 26:case 27:case 5:return bt(u),null;case 13:if(da(u),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));yf()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return ct(jn),null;case 4:return pt(),null;case 10:return ha(u.type),null;case 22:case 23:return da(u),ev(),c!==null&&ct(Oc),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 24:return ha(Un),null;case 25:return null;default:return null}}function nS(c,u){switch(jy(u),u.tag){case 3:ha(Un),pt();break;case 26:case 27:case 5:bt(u);break;case 4:pt();break;case 13:da(u);break;case 19:ct(jn);break;case 10:ha(u.type);break;case 22:case 23:da(u),ev(),c!==null&&ct(Oc);break;case 24:ha(Un)}}function Pf(c,u){try{var f=u.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&c)===c){p=void 0;var w=f.create,D=f.inst;p=w(),D.destroy=p}f=f.next}while(f!==_)}}catch(L){He(u,u.return,L)}}function Za(c,u,f){try{var p=u.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var w=_.next;p=w;do{if((p.tag&c)===c){var D=p.inst,L=D.destroy;if(L!==void 0){D.destroy=void 0,_=u;var W=f,J=L;try{J()}catch(ht){He(_,W,ht)}}}p=p.next}while(p!==w)}}catch(ht){He(u,u.return,ht)}}function rS(c){var u=c.updateQueue;if(u!==null){var f=c.stateNode;try{GA(u,f)}catch(p){He(c,c.return,p)}}}function iS(c,u,f){f.props=Nc(c.type,c.memoizedProps),f.state=c.memoizedState;try{f.componentWillUnmount()}catch(p){He(c,u,p)}}function kf(c,u){try{var f=c.ref;if(f!==null){switch(c.tag){case 26:case 27:case 5:var p=c.stateNode;break;case 30:p=c.stateNode;break;default:p=c.stateNode}typeof f=="function"?c.refCleanup=f(p):f.current=p}}catch(_){He(c,u,_)}}function xs(c,u){var f=c.ref,p=c.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(_){He(c,u,_)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){He(c,u,_)}else f.current=null}function sS(c){var u=c.type,f=c.memoizedProps,p=c.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(_){He(c,c.return,_)}}function Rv(c,u,f){try{var p=c.stateNode;D9(p,c.type,f,u),p[Rn]=u}catch(_){He(c,c.return,_)}}function aS(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&ao(c.type)||c.tag===4}function Dv(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||aS(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&ao(c.type)||c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ov(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(c,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(c),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=fp));else if(p!==4&&(p===27&&ao(c.type)&&(f=c.stateNode,u=null),c=c.child,c!==null))for(Ov(c,u,f),c=c.sibling;c!==null;)Ov(c,u,f),c=c.sibling}function ep(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?f.insertBefore(c,u):f.appendChild(c);else if(p!==4&&(p===27&&ao(c.type)&&(f=c.stateNode),c=c.child,c!==null))for(ep(c,u,f),c=c.sibling;c!==null;)ep(c,u,f),c=c.sibling}function oS(c){var u=c.stateNode,f=c.memoizedProps;try{for(var p=c.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);fr(u,p,f),u[Vn]=c,u[Rn]=f}catch(w){He(c,c.return,w)}}var ma=!1,bn=!1,Mv=!1,cS=typeof WeakSet=="function"?WeakSet:Set,tr=null;function u9(c,u){if(c=c.containerInfo,n_=_p,c=_A(c),Dy(c)){if("selectionStart"in c)var f={start:c.selectionStart,end:c.selectionEnd};else t:{f=(f=c.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var _=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break t}var D=0,L=-1,W=-1,J=0,ht=0,gt=c,rt=null;e:for(;;){for(var it;gt!==f||_!==0&&gt.nodeType!==3||(L=D+_),gt!==w||p!==0&&gt.nodeType!==3||(W=D+p),gt.nodeType===3&&(D+=gt.nodeValue.length),(it=gt.firstChild)!==null;)rt=gt,gt=it;for(;;){if(gt===c)break e;if(rt===f&&++J===_&&(L=D),rt===w&&++ht===p&&(W=D),(it=gt.nextSibling)!==null)break;gt=rt,rt=gt.parentNode}gt=it}f=L===-1||W===-1?null:{start:L,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(r_={focusedElem:c,selectionRange:f},_p=!1,tr=u;tr!==null;)if(u=tr,c=u.child,(u.subtreeFlags&1024)!==0&&c!==null)c.return=u,tr=c;else for(;tr!==null;){switch(u=tr,w=u.alternate,c=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&w!==null){c=void 0,f=u,_=w.memoizedProps,w=w.memoizedState,p=f.stateNode;try{var Yt=Nc(f.type,_,f.elementType===f.type);c=p.getSnapshotBeforeUpdate(Yt,w),p.__reactInternalSnapshotBeforeUpdate=c}catch(Ht){He(f,f.return,Ht)}}break;case 3:if((c&1024)!==0){if(c=u.stateNode.containerInfo,f=c.nodeType,f===9)a_(c);else if(f===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":a_(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=u.sibling,c!==null){c.return=u.return,tr=c;break}tr=u.return}}function lS(c,u,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:Ja(c,f),p&4&&Pf(5,f);break;case 1:if(Ja(c,f),p&4)if(c=f.stateNode,u===null)try{c.componentDidMount()}catch(D){He(f,f.return,D)}else{var _=Nc(f.type,u.memoizedProps);u=u.memoizedState;try{c.componentDidUpdate(_,u,c.__reactInternalSnapshotBeforeUpdate)}catch(D){He(f,f.return,D)}}p&64&&rS(f),p&512&&kf(f,f.return);break;case 3:if(Ja(c,f),p&64&&(c=f.updateQueue,c!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{GA(c,u)}catch(D){He(f,f.return,D)}}break;case 27:u===null&&p&4&&oS(f);case 26:case 5:Ja(c,f),u===null&&p&4&&sS(f),p&512&&kf(f,f.return);break;case 12:Ja(c,f);break;case 13:Ja(c,f),p&4&&fS(c,f),p&64&&(c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(f=_9.bind(null,f),V9(c,f))));break;case 22:if(p=f.memoizedState!==null||ma,!p){u=u!==null&&u.memoizedState!==null||bn,_=ma;var w=bn;ma=p,(bn=u)&&!w?to(c,f,(f.subtreeFlags&8772)!==0):Ja(c,f),ma=_,bn=w}break;case 30:break;default:Ja(c,f)}}function uS(c){var u=c.alternate;u!==null&&(c.alternate=null,uS(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&ja(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var tn=null,zr=!1;function ya(c,u,f){for(f=f.child;f!==null;)hS(c,u,f),f=f.sibling}function hS(c,u,f){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(Xe,f)}catch{}switch(f.tag){case 26:bn||xs(f,u),ya(c,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:bn||xs(f,u);var p=tn,_=zr;ao(f.type)&&(tn=f.stateNode,zr=!1),ya(c,u,f),Gf(f.stateNode),tn=p,zr=_;break;case 5:bn||xs(f,u);case 6:if(p=tn,_=zr,tn=null,ya(c,u,f),tn=p,zr=_,tn!==null)if(zr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(f.stateNode)}catch(w){He(f,u,w)}else try{tn.removeChild(f.stateNode)}catch(w){He(f,u,w)}break;case 18:tn!==null&&(zr?(c=tn,JS(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,f.stateNode),Zf(c)):JS(tn,f.stateNode));break;case 4:p=tn,_=zr,tn=f.stateNode.containerInfo,zr=!0,ya(c,u,f),tn=p,zr=_;break;case 0:case 11:case 14:case 15:bn||Za(2,f,u),bn||Za(4,f,u),ya(c,u,f);break;case 1:bn||(xs(f,u),p=f.stateNode,typeof p.componentWillUnmount=="function"&&iS(f,u,p)),ya(c,u,f);break;case 21:ya(c,u,f);break;case 22:bn=(p=bn)||f.memoizedState!==null,ya(c,u,f),bn=p;break;default:ya(c,u,f)}}function fS(c,u){if(u.memoizedState===null&&(c=u.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Zf(c)}catch(f){He(u,u.return,f)}}function h9(c){switch(c.tag){case 13:case 19:var u=c.stateNode;return u===null&&(u=c.stateNode=new cS),u;case 22:return c=c.stateNode,u=c._retryCache,u===null&&(u=c._retryCache=new cS),u;default:throw Error(r(435,c.tag))}}function Nv(c,u){var f=h9(c);u.forEach(function(p){var _=x9.bind(null,c,p);f.has(p)||(f.add(p),p.then(_,_))})}function ri(c,u){var f=u.deletions;if(f!==null)for(var p=0;p<f.length;p++){var _=f[p],w=c,D=u,L=D;t:for(;L!==null;){switch(L.tag){case 27:if(ao(L.type)){tn=L.stateNode,zr=!1;break t}break;case 5:tn=L.stateNode,zr=!1;break t;case 3:case 4:tn=L.stateNode.containerInfo,zr=!0;break t}L=L.return}if(tn===null)throw Error(r(160));hS(w,D,_),tn=null,zr=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)dS(u,c),u=u.sibling}var Wi=null;function dS(c,u){var f=c.alternate,p=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ri(u,c),ii(c),p&4&&(Za(3,c,c.return),Pf(3,c),Za(5,c,c.return));break;case 1:ri(u,c),ii(c),p&512&&(bn||f===null||xs(f,f.return)),p&64&&ma&&(c=c.updateQueue,c!==null&&(p=c.callbacks,p!==null&&(f=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var _=Wi;if(ri(u,c),ii(c),p&512&&(bn||f===null||xs(f,f.return)),p&4){var w=f!==null?f.memoizedState:null;if(p=c.memoizedState,f===null)if(p===null)if(c.stateNode===null){t:{p=c.type,f=c.memoizedProps,_=_.ownerDocument||_;e:switch(p){case"title":w=_.getElementsByTagName("title")[0],(!w||w[cc]||w[Vn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(p),_.head.insertBefore(w,_.querySelector("head > title"))),fr(w,p,f),w[Vn]=c,xn(w),p=w;break t;case"link":var D=oC("link","href",_).get(p+(f.href||""));if(D){for(var L=0;L<D.length;L++)if(w=D[L],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(L,1);break e}}w=_.createElement(p),fr(w,p,f),_.head.appendChild(w);break;case"meta":if(D=oC("meta","content",_).get(p+(f.content||""))){for(L=0;L<D.length;L++)if(w=D[L],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(L,1);break e}}w=_.createElement(p),fr(w,p,f),_.head.appendChild(w);break;default:throw Error(r(468,p))}w[Vn]=c,xn(w),p=w}c.stateNode=p}else cC(_,c.type,c.stateNode);else c.stateNode=aC(_,p,c.memoizedProps);else w!==p?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,p===null?cC(_,c.type,c.stateNode):aC(_,p,c.memoizedProps)):p===null&&c.stateNode!==null&&Rv(c,c.memoizedProps,f.memoizedProps)}break;case 27:ri(u,c),ii(c),p&512&&(bn||f===null||xs(f,f.return)),f!==null&&p&4&&Rv(c,c.memoizedProps,f.memoizedProps);break;case 5:if(ri(u,c),ii(c),p&512&&(bn||f===null||xs(f,f.return)),c.flags&32){_=c.stateNode;try{yi(_,"")}catch(it){He(c,c.return,it)}}p&4&&c.stateNode!=null&&(_=c.memoizedProps,Rv(c,_,f!==null?f.memoizedProps:_)),p&1024&&(Mv=!0);break;case 6:if(ri(u,c),ii(c),p&4){if(c.stateNode===null)throw Error(r(162));p=c.memoizedProps,f=c.stateNode;try{f.nodeValue=p}catch(it){He(c,c.return,it)}}break;case 3:if(mp=null,_=Wi,Wi=gp(u.containerInfo),ri(u,c),Wi=_,ii(c),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Zf(u.containerInfo)}catch(it){He(c,c.return,it)}Mv&&(Mv=!1,gS(c));break;case 4:p=Wi,Wi=gp(c.stateNode.containerInfo),ri(u,c),ii(c),Wi=p;break;case 12:ri(u,c),ii(c);break;case 13:ri(u,c),ii(c),c.child.flags&8192&&c.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Fv=Ie()),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,Nv(c,p)));break;case 22:_=c.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,J=ma,ht=bn;if(ma=J||_,bn=ht||W,ri(u,c),bn=ht,ma=J,ii(c),p&8192)t:for(u=c.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(f===null||W||ma||bn||Pc(c)),f=null,u=c;;){if(u.tag===5||u.tag===26){if(f===null){W=f=u;try{if(w=W.stateNode,_)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{L=W.stateNode;var gt=W.memoizedProps.style,rt=gt!=null&&gt.hasOwnProperty("display")?gt.display:null;L.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(it){He(W,W.return,it)}}}else if(u.tag===6){if(f===null){W=u;try{W.stateNode.nodeValue=_?"":W.memoizedProps}catch(it){He(W,W.return,it)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break t;for(;u.sibling===null;){if(u.return===null||u.return===c)break t;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}p&4&&(p=c.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Nv(c,f))));break;case 19:ri(u,c),ii(c),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,Nv(c,p)));break;case 30:break;case 21:break;default:ri(u,c),ii(c)}}function ii(c){var u=c.flags;if(u&2){try{for(var f,p=c.return;p!==null;){if(aS(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,w=Dv(c);ep(c,w,_);break;case 5:var D=f.stateNode;f.flags&32&&(yi(D,""),f.flags&=-33);var L=Dv(c);ep(c,L,D);break;case 3:case 4:var W=f.stateNode.containerInfo,J=Dv(c);Ov(c,J,W);break;default:throw Error(r(161))}}catch(ht){He(c,c.return,ht)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function gS(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var u=c;gS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),c=c.sibling}}function Ja(c,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)lS(c,u.alternate,u),u=u.sibling}function Pc(c){for(c=c.child;c!==null;){var u=c;switch(u.tag){case 0:case 11:case 14:case 15:Za(4,u,u.return),Pc(u);break;case 1:xs(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&iS(u,u.return,f),Pc(u);break;case 27:Gf(u.stateNode);case 26:case 5:xs(u,u.return),Pc(u);break;case 22:u.memoizedState===null&&Pc(u);break;case 30:Pc(u);break;default:Pc(u)}c=c.sibling}}function to(c,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var p=u.alternate,_=c,w=u,D=w.flags;switch(w.tag){case 0:case 11:case 15:to(_,w,f),Pf(4,w);break;case 1:if(to(_,w,f),p=w,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(J){He(p,p.return,J)}if(p=w,_=p.updateQueue,_!==null){var L=p.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_<W.length;_++)HA(W[_],L)}catch(J){He(p,p.return,J)}}f&&D&64&&rS(w),kf(w,w.return);break;case 27:oS(w);case 26:case 5:to(_,w,f),f&&p===null&&D&4&&sS(w),kf(w,w.return);break;case 12:to(_,w,f);break;case 13:to(_,w,f),f&&D&4&&fS(_,w);break;case 22:w.memoizedState===null&&to(_,w,f),kf(w,w.return);break;case 30:break;default:to(_,w,f)}u=u.sibling}}function Pv(c,u){var f=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),c=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),c!==f&&(c!=null&&c.refCount++,f!=null&&xf(f))}function kv(c,u){c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&xf(c))}function ws(c,u,f,p){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)pS(c,u,f,p),u=u.sibling}function pS(c,u,f,p){var _=u.flags;switch(u.tag){case 0:case 11:case 15:ws(c,u,f,p),_&2048&&Pf(9,u);break;case 1:ws(c,u,f,p);break;case 3:ws(c,u,f,p),_&2048&&(c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&xf(c)));break;case 12:if(_&2048){ws(c,u,f,p),c=u.stateNode;try{var w=u.memoizedProps,D=w.id,L=w.onPostCommit;typeof L=="function"&&L(D,u.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(W){He(u,u.return,W)}}else ws(c,u,f,p);break;case 13:ws(c,u,f,p);break;case 23:break;case 22:w=u.stateNode,D=u.alternate,u.memoizedState!==null?w._visibility&2?ws(c,u,f,p):Lf(c,u):w._visibility&2?ws(c,u,f,p):(w._visibility|=2,vu(c,u,f,p,(u.subtreeFlags&10256)!==0)),_&2048&&Pv(D,u);break;case 24:ws(c,u,f,p),_&2048&&kv(u.alternate,u);break;default:ws(c,u,f,p)}}function vu(c,u,f,p,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=c,D=u,L=f,W=p,J=D.flags;switch(D.tag){case 0:case 11:case 15:vu(w,D,L,W,_),Pf(8,D);break;case 23:break;case 22:var ht=D.stateNode;D.memoizedState!==null?ht._visibility&2?vu(w,D,L,W,_):Lf(w,D):(ht._visibility|=2,vu(w,D,L,W,_)),_&&J&2048&&Pv(D.alternate,D);break;case 24:vu(w,D,L,W,_),_&&J&2048&&kv(D.alternate,D);break;default:vu(w,D,L,W,_)}u=u.sibling}}function Lf(c,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=c,p=u,_=p.flags;switch(p.tag){case 22:Lf(f,p),_&2048&&Pv(p.alternate,p);break;case 24:Lf(f,p),_&2048&&kv(p.alternate,p);break;default:Lf(f,p)}u=u.sibling}}var Vf=8192;function _u(c){if(c.subtreeFlags&Vf)for(c=c.child;c!==null;)mS(c),c=c.sibling}function mS(c){switch(c.tag){case 26:_u(c),c.flags&Vf&&c.memoizedState!==null&&$9(Wi,c.memoizedState,c.memoizedProps);break;case 5:_u(c);break;case 3:case 4:var u=Wi;Wi=gp(c.stateNode.containerInfo),_u(c),Wi=u;break;case 22:c.memoizedState===null&&(u=c.alternate,u!==null&&u.memoizedState!==null?(u=Vf,Vf=16777216,_u(c),Vf=u):_u(c));break;default:_u(c)}}function yS(c){var u=c.alternate;if(u!==null&&(c=u.child,c!==null)){u.child=null;do u=c.sibling,c.sibling=null,c=u;while(c!==null)}}function Bf(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];tr=p,_S(p,c)}yS(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)vS(c),c=c.sibling}function vS(c){switch(c.tag){case 0:case 11:case 15:Bf(c),c.flags&2048&&Za(9,c,c.return);break;case 3:Bf(c);break;case 12:Bf(c);break;case 22:var u=c.stateNode;c.memoizedState!==null&&u._visibility&2&&(c.return===null||c.return.tag!==13)?(u._visibility&=-3,np(c)):Bf(c);break;default:Bf(c)}}function np(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];tr=p,_S(p,c)}yS(c)}for(c=c.child;c!==null;){switch(u=c,u.tag){case 0:case 11:case 15:Za(8,u,u.return),np(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,np(u));break;default:np(u)}c=c.sibling}}function _S(c,u){for(;tr!==null;){var f=tr;switch(f.tag){case 0:case 11:case 15:Za(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:xf(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,tr=p;else t:for(f=c;tr!==null;){p=tr;var _=p.sibling,w=p.return;if(uS(p),p===f){tr=null;break t}if(_!==null){_.return=w,tr=_;break t}tr=w}}}var f9={getCacheForType:function(c){var u=xr(Un),f=u.data.get(c);return f===void 0&&(f=c(),u.data.set(c,f)),f}},d9=typeof WeakMap=="function"?WeakMap:Map,Re=0,We=null,ae=null,fe=0,De=0,si=null,eo=!1,xu=!1,Lv=!1,va=0,fn=0,no=0,kc=0,Vv=0,Si=0,wu=0,Ff=null,Hr=null,Bv=!1,Fv=0,rp=1/0,ip=null,ro=null,hr=0,io=null,bu=null,Eu=0,Uv=0,jv=null,xS=null,Uf=0,zv=null;function ai(){if((Re&2)!==0&&fe!==0)return fe&-fe;if(K.T!==null){var c=uu;return c!==0?c:Kv()}return Fa()}function wS(){Si===0&&(Si=(fe&536870912)===0||xe?Xh():536870912);var c=Ti.current;return c!==null&&(c.flags|=32),Si}function oi(c,u,f){(c===We&&(De===2||De===9)||c.cancelPendingCommit!==null)&&(Au(c,0),so(c,fe,Si,!1)),$s(c,f),((Re&2)===0||c!==We)&&(c===We&&((Re&2)===0&&(kc|=f),fn===4&&so(c,fe,Si,!1)),bs(c))}function bS(c,u,f){if((Re&6)!==0)throw Error(r(327));var p=!f&&(u&124)===0&&(u&c.expiredLanes)===0||oc(c,u),_=p?m9(c,u):Wv(c,u,!0),w=p;do{if(_===0){xu&&!p&&so(c,u,0,!1);break}else{if(f=c.current.alternate,w&&!g9(f)){_=Wv(c,u,!1),w=!1;continue}if(_===2){if(w=u,c.errorRecoveryDisabledLanes&w)var D=0;else D=c.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){u=D;t:{var L=c;_=Ff;var W=L.current.memoizedState.isDehydrated;if(W&&(Au(L,D).flags|=256),D=Wv(L,D,!1),D!==2){if(Lv&&!W){L.errorRecoveryDisabledLanes|=w,kc|=w,_=4;break t}w=Hr,Hr=_,w!==null&&(Hr===null?Hr=w:Hr.push.apply(Hr,w))}_=D}if(w=!1,_!==2)continue}}if(_===1){Au(c,0),so(c,u,0,!0);break}t:{switch(p=c,w=_,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:so(p,u,Si,!eo);break t;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=Fv+300-Ie(),10<_)){if(so(p,u,Si,!eo),jl(p,0,!0)!==0)break t;p.timeoutHandle=QS(ES.bind(null,p,f,Hr,ip,Bv,u,Si,kc,wu,eo,w,2,-0,0),_);break t}ES(p,f,Hr,ip,Bv,u,Si,kc,wu,eo,w,0,-0,0)}}break}while(!0);bs(c)}function ES(c,u,f,p,_,w,D,L,W,J,ht,gt,rt,it){if(c.timeoutHandle=-1,gt=u.subtreeFlags,(gt&8192||(gt&16785408)===16785408)&&(Yf={stylesheets:null,count:0,unsuspend:K9},mS(u),gt=Q9(),gt!==null)){c.cancelPendingCommit=gt(DS.bind(null,c,u,w,f,p,_,D,L,W,ht,1,rt,it)),so(c,w,D,!J);return}DS(c,u,w,f,p,_,D,L,W)}function g9(c){for(var u=c;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var _=f[p],w=_.getSnapshot;_=_.value;try{if(!ei(w(),_))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function so(c,u,f,p){u&=~Vv,u&=~kc,c.suspendedLanes|=u,c.pingedLanes&=~u,p&&(c.warmLanes|=u),p=c.expirationTimes;for(var _=u;0<_;){var w=31-_r(_),D=1<<w;p[w]=-1,_&=~D}f!==0&&os(c,f,u)}function sp(){return(Re&6)===0?(jf(0),!1):!0}function Hv(){if(ae!==null){if(De===0)var c=ae.return;else c=ae,ua=Rc=null,av(c),mu=null,Of=0,c=ae;for(;c!==null;)nS(c.alternate,c),c=c.return;ae=null}}function Au(c,u){var f=c.timeoutHandle;f!==-1&&(c.timeoutHandle=-1,M9(f)),f=c.cancelPendingCommit,f!==null&&(c.cancelPendingCommit=null,f()),Hv(),We=c,ae=f=oa(c.current,null),fe=u,De=0,si=null,eo=!1,xu=oc(c,u),Lv=!1,wu=Si=Vv=kc=no=fn=0,Hr=Ff=null,Bv=!1,(u&8)!==0&&(u|=u&32);var p=c.entangledLanes;if(p!==0)for(c=c.entanglements,p&=u;0<p;){var _=31-_r(p),w=1<<_;u|=c[_],p&=~w}return va=u,C0(),f}function AS(c,u){te=null,K.H=q0,u===bf||u===L0?(u=jA(),De=3):u===BA?(u=jA(),De=4):De=u===zT?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,si=u,ae===null&&(fn=1,Q0(c,wi(u,c.current)))}function TS(){var c=K.H;return K.H=q0,c===null?q0:c}function SS(){var c=K.A;return K.A=f9,c}function Gv(){fn=4,eo||(fe&4194048)!==fe&&Ti.current!==null||(xu=!0),(no&134217727)===0&&(kc&134217727)===0||We===null||so(We,fe,Si,!1)}function Wv(c,u,f){var p=Re;Re|=2;var _=TS(),w=SS();(We!==c||fe!==u)&&(ip=null,Au(c,u)),u=!1;var D=fn;t:do try{if(De!==0&&ae!==null){var L=ae,W=si;switch(De){case 8:Hv(),D=6;break t;case 3:case 2:case 9:case 6:Ti.current===null&&(u=!0);var J=De;if(De=0,si=null,Tu(c,L,W,J),f&&xu){D=0;break t}break;default:J=De,De=0,si=null,Tu(c,L,W,J)}}p9(),D=fn;break}catch(ht){AS(c,ht)}while(!0);return u&&c.shellSuspendCounter++,ua=Rc=null,Re=p,K.H=_,K.A=w,ae===null&&(We=null,fe=0,C0()),D}function p9(){for(;ae!==null;)CS(ae)}function m9(c,u){var f=Re;Re|=2;var p=TS(),_=SS();We!==c||fe!==u?(ip=null,rp=Ie()+500,Au(c,u)):xu=oc(c,u);t:do try{if(De!==0&&ae!==null){u=ae;var w=si;e:switch(De){case 1:De=0,si=null,Tu(c,u,w,1);break;case 2:case 9:if(FA(w)){De=0,si=null,IS(u);break}u=function(){De!==2&&De!==9||We!==c||(De=7),bs(c)},w.then(u,u);break t;case 3:De=7;break t;case 4:De=5;break t;case 7:FA(w)?(De=0,si=null,IS(u)):(De=0,si=null,Tu(c,u,w,7));break;case 5:var D=null;switch(ae.tag){case 26:D=ae.memoizedState;case 5:case 27:var L=ae;if(!D||lC(D)){De=0,si=null;var W=L.sibling;if(W!==null)ae=W;else{var J=L.return;J!==null?(ae=J,ap(J)):ae=null}break e}}De=0,si=null,Tu(c,u,w,5);break;case 6:De=0,si=null,Tu(c,u,w,6);break;case 8:Hv(),fn=6;break t;default:throw Error(r(462))}}y9();break}catch(ht){AS(c,ht)}while(!0);return ua=Rc=null,K.H=p,K.A=_,Re=f,ae!==null?0:(We=null,fe=0,C0(),fn)}function y9(){for(;ae!==null&&!$t();)CS(ae)}function CS(c){var u=tS(c.alternate,c,va);c.memoizedProps=c.pendingProps,u===null?ap(c):ae=u}function IS(c){var u=c,f=u.alternate;switch(u.tag){case 15:case 0:u=XT(f,u,u.pendingProps,u.type,void 0,fe);break;case 11:u=XT(f,u,u.pendingProps,u.type.render,u.ref,fe);break;case 5:av(u);default:nS(f,u),u=ae=RA(u,va),u=tS(f,u,va)}c.memoizedProps=c.pendingProps,u===null?ap(c):ae=u}function Tu(c,u,f,p){ua=Rc=null,av(u),mu=null,Of=0;var _=u.return;try{if(a9(c,_,u,f,fe)){fn=1,Q0(c,wi(f,c.current)),ae=null;return}}catch(w){if(_!==null)throw ae=_,w;fn=1,Q0(c,wi(f,c.current)),ae=null;return}u.flags&32768?(xe||p===1?c=!0:xu||(fe&536870912)!==0?c=!1:(eo=c=!0,(p===2||p===9||p===3||p===6)&&(p=Ti.current,p!==null&&p.tag===13&&(p.flags|=16384))),RS(u,c)):ap(u)}function ap(c){var u=c;do{if((u.flags&32768)!==0){RS(u,eo);return}c=u.return;var f=c9(u.alternate,u,va);if(f!==null){ae=f;return}if(u=u.sibling,u!==null){ae=u;return}ae=u=c}while(u!==null);fn===0&&(fn=5)}function RS(c,u){do{var f=l9(c.alternate,c);if(f!==null){f.flags&=32767,ae=f;return}if(f=c.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(c=c.sibling,c!==null)){ae=c;return}ae=c=f}while(c!==null);fn=6,ae=null}function DS(c,u,f,p,_,w,D,L,W){c.cancelPendingCommit=null;do op();while(hr!==0);if((Re&6)!==0)throw Error(r(327));if(u!==null){if(u===c.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=ky,$h(c,f,w,D,L,W),c===We&&(ae=We=null,fe=0),bu=u,io=c,Eu=f,Uv=w,jv=_,xS=p,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,w9(Ze,function(){return kS(),null})):(c.callbackNode=null,c.callbackPriority=0),p=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||p){p=K.T,K.T=null,_=ot.p,ot.p=2,D=Re,Re|=4;try{u9(c,u,f)}finally{Re=D,ot.p=_,K.T=p}}hr=1,OS(),MS(),NS()}}function OS(){if(hr===1){hr=0;var c=io,u=bu,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=K.T,K.T=null;var p=ot.p;ot.p=2;var _=Re;Re|=4;try{dS(u,c);var w=r_,D=_A(c.containerInfo),L=w.focusedElem,W=w.selectionRange;if(D!==L&&L&&L.ownerDocument&&vA(L.ownerDocument.documentElement,L)){if(W!==null&&Dy(L)){var J=W.start,ht=W.end;if(ht===void 0&&(ht=J),"selectionStart"in L)L.selectionStart=J,L.selectionEnd=Math.min(ht,L.value.length);else{var gt=L.ownerDocument||document,rt=gt&&gt.defaultView||window;if(rt.getSelection){var it=rt.getSelection(),Yt=L.textContent.length,Ht=Math.min(W.start,Yt),Ue=W.end===void 0?Ht:Math.min(W.end,Yt);!it.extend&&Ht>Ue&&(D=Ue,Ue=Ht,Ht=D);var X=yA(L,Ht),Y=yA(L,Ue);if(X&&Y&&(it.rangeCount!==1||it.anchorNode!==X.node||it.anchorOffset!==X.offset||it.focusNode!==Y.node||it.focusOffset!==Y.offset)){var Z=gt.createRange();Z.setStart(X.node,X.offset),it.removeAllRanges(),Ht>Ue?(it.addRange(Z),it.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),it.addRange(Z))}}}}for(gt=[],it=L;it=it.parentNode;)it.nodeType===1&&gt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<gt.length;L++){var ft=gt[L];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}_p=!!n_,r_=n_=null}finally{Re=_,ot.p=p,K.T=f}}c.current=u,hr=2}}function MS(){if(hr===2){hr=0;var c=io,u=bu,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=K.T,K.T=null;var p=ot.p;ot.p=2;var _=Re;Re|=4;try{lS(c,u.alternate,u)}finally{Re=_,ot.p=p,K.T=f}}hr=3}}function NS(){if(hr===4||hr===3){hr=0,_n();var c=io,u=bu,f=Eu,p=xS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?hr=5:(hr=0,bu=io=null,PS(c,c.pendingLanes));var _=c.pendingLanes;if(_===0&&(ro=null),zl(f),u=u.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(Xe,u,void 0,(u.current.flags&128)===128)}catch{}if(p!==null){u=K.T,_=ot.p,ot.p=2,K.T=null;try{for(var w=c.onRecoverableError,D=0;D<p.length;D++){var L=p[D];w(L.value,{componentStack:L.stack})}}finally{K.T=u,ot.p=_}}(Eu&3)!==0&&op(),bs(c),_=c.pendingLanes,(f&4194090)!==0&&(_&42)!==0?c===zv?Uf++:(Uf=0,zv=c):Uf=0,jf(0)}}function PS(c,u){(c.pooledCacheLanes&=u)===0&&(u=c.pooledCache,u!=null&&(c.pooledCache=null,xf(u)))}function op(c){return OS(),MS(),NS(),kS()}function kS(){if(hr!==5)return!1;var c=io,u=Uv;Uv=0;var f=zl(Eu),p=K.T,_=ot.p;try{ot.p=32>f?32:f,K.T=null,f=jv,jv=null;var w=io,D=Eu;if(hr=0,bu=io=null,Eu=0,(Re&6)!==0)throw Error(r(331));var L=Re;if(Re|=4,vS(w.current),pS(w,w.current,D,f),Re=L,jf(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(Xe,w)}catch{}return!0}finally{ot.p=_,K.T=p,PS(c,u)}}function LS(c,u,f){u=wi(f,u),u=xv(c.stateNode,u,2),c=Xa(c,u,2),c!==null&&($s(c,2),bs(c))}function He(c,u,f){if(c.tag===3)LS(c,c,f);else for(;u!==null;){if(u.tag===3){LS(u,c,f);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ro===null||!ro.has(p))){c=wi(f,c),f=UT(2),p=Xa(u,f,2),p!==null&&(jT(f,p,u,c),$s(p,2),bs(p));break}}u=u.return}}function qv(c,u,f){var p=c.pingCache;if(p===null){p=c.pingCache=new d9;var _=new Set;p.set(u,_)}else _=p.get(u),_===void 0&&(_=new Set,p.set(u,_));_.has(f)||(Lv=!0,_.add(f),c=v9.bind(null,c,u,f),u.then(c,c))}function v9(c,u,f){var p=c.pingCache;p!==null&&p.delete(u),c.pingedLanes|=c.suspendedLanes&f,c.warmLanes&=~f,We===c&&(fe&f)===f&&(fn===4||fn===3&&(fe&62914560)===fe&&300>Ie()-Fv?(Re&2)===0&&Au(c,0):Vv|=f,wu===fe&&(wu=0)),bs(c)}function VS(c,u){u===0&&(u=Kh()),c=au(c,u),c!==null&&($s(c,u),bs(c))}function _9(c){var u=c.memoizedState,f=0;u!==null&&(f=u.retryLane),VS(c,f)}function x9(c,u){var f=0;switch(c.tag){case 13:var p=c.stateNode,_=c.memoizedState;_!==null&&(f=_.retryLane);break;case 19:p=c.stateNode;break;case 22:p=c.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(u),VS(c,f)}function w9(c,u){return jt(c,u)}var cp=null,Su=null,Yv=!1,lp=!1,Xv=!1,Lc=0;function bs(c){c!==Su&&c.next===null&&(Su===null?cp=Su=c:Su=Su.next=c),lp=!0,Yv||(Yv=!0,E9())}function jf(c,u){if(!Xv&&lp){Xv=!0;do for(var f=!1,p=cp;p!==null;){if(c!==0){var _=p.pendingLanes;if(_===0)var w=0;else{var D=p.suspendedLanes,L=p.pingedLanes;w=(1<<31-_r(42|c)+1)-1,w&=_&~(D&~L),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,jS(p,w))}else w=fe,w=jl(p,p===We?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||oc(p,w)||(f=!0,jS(p,w));p=p.next}while(f);Xv=!1}}function b9(){BS()}function BS(){lp=Yv=!1;var c=0;Lc!==0&&(O9()&&(c=Lc),Lc=0);for(var u=Ie(),f=null,p=cp;p!==null;){var _=p.next,w=FS(p,u);w===0?(p.next=null,f===null?cp=_:f.next=_,_===null&&(Su=f)):(f=p,(c!==0||(w&3)!==0)&&(lp=!0)),p=_}jf(c)}function FS(c,u){for(var f=c.suspendedLanes,p=c.pingedLanes,_=c.expirationTimes,w=c.pendingLanes&-62914561;0<w;){var D=31-_r(w),L=1<<D,W=_[D];W===-1?((L&f)===0||(L&p)!==0)&&(_[D]=Yh(L,u)):W<=u&&(c.expiredLanes|=L),w&=~L}if(u=We,f=fe,f=jl(c,c===u?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p=c.callbackNode,f===0||c===u&&(De===2||De===9)||c.cancelPendingCommit!==null)return p!==null&&p!==null&&Bt(p),c.callbackNode=null,c.callbackPriority=0;if((f&3)===0||oc(c,f)){if(u=f&-f,u===c.callbackPriority)return u;switch(p!==null&&Bt(p),zl(f)){case 2:case 8:f=Rt;break;case 32:f=Ze;break;case 268435456:f=ss;break;default:f=Ze}return p=US.bind(null,c),f=jt(f,p),c.callbackPriority=u,c.callbackNode=f,u}return p!==null&&p!==null&&Bt(p),c.callbackPriority=2,c.callbackNode=null,2}function US(c,u){if(hr!==0&&hr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var f=c.callbackNode;if(op()&&c.callbackNode!==f)return null;var p=fe;return p=jl(c,c===We?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p===0?null:(bS(c,p,u),FS(c,Ie()),c.callbackNode!=null&&c.callbackNode===f?US.bind(null,c):null)}function jS(c,u){if(op())return null;bS(c,u,!0)}function E9(){N9(function(){(Re&6)!==0?jt(un,b9):BS()})}function Kv(){return Lc===0&&(Lc=Xh()),Lc}function zS(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Xl(""+c)}function HS(c,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,c.id&&f.setAttribute("form",c.id),u.parentNode.insertBefore(f,u),c=new FormData(c),f.parentNode.removeChild(f),c}function A9(c,u,f,p,_){if(u==="submit"&&f&&f.stateNode===_){var w=zS((_[Rn]||null).action),D=p.submitter;D&&(u=(u=D[Rn]||null)?zS(u.formAction):D.getAttribute("formAction"),u!==null&&(w=u,D=null));var L=new Kl("action","action",null,p,_);c.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Lc!==0){var W=D?HS(_,D):new FormData(_);pv(f,{pending:!0,data:W,method:_.method,action:w},null,W)}}else typeof w=="function"&&(L.preventDefault(),W=D?HS(_,D):new FormData(_),pv(f,{pending:!0,data:W,method:_.method,action:w},w,W))},currentTarget:_}]})}}for(var $v=0;$v<Py.length;$v++){var Qv=Py[$v],T9=Qv.toLowerCase(),S9=Qv[0].toUpperCase()+Qv.slice(1);Gi(T9,"on"+S9)}Gi(bA,"onAnimationEnd"),Gi(EA,"onAnimationIteration"),Gi(AA,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(Hk,"onTransitionRun"),Gi(Gk,"onTransitionStart"),Gi(Wk,"onTransitionCancel"),Gi(TA,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zf));function GS(c,u){u=(u&4)!==0;for(var f=0;f<c.length;f++){var p=c[f],_=p.event;p=p.listeners;t:{var w=void 0;if(u)for(var D=p.length-1;0<=D;D--){var L=p[D],W=L.instance,J=L.currentTarget;if(L=L.listener,W!==w&&_.isPropagationStopped())break t;w=L,_.currentTarget=J;try{w(_)}catch(ht){$0(ht)}_.currentTarget=null,w=W}else for(D=0;D<p.length;D++){if(L=p[D],W=L.instance,J=L.currentTarget,L=L.listener,W!==w&&_.isPropagationStopped())break t;w=L,_.currentTarget=J;try{w(_)}catch(ht){$0(ht)}_.currentTarget=null,w=W}}}}function oe(c,u){var f=u[Zh];f===void 0&&(f=u[Zh]=new Set);var p=c+"__bubble";f.has(p)||(WS(u,c,2,!1),f.add(p))}function Zv(c,u,f){var p=0;u&&(p|=4),WS(f,c,p,u)}var up="_reactListening"+Math.random().toString(36).slice(2);function Jv(c){if(!c[up]){c[up]=!0,Jh.forEach(function(f){f!=="selectionchange"&&(C9.has(f)||Zv(f,!1,c),Zv(f,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[up]||(u[up]=!0,Zv("selectionchange",!1,u))}}function WS(c,u,f,p){switch(pC(u)){case 2:var _=t7;break;case 8:_=e7;break;default:_=d_}f=_.bind(null,u,f,c),_=void 0,!_i||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),p?_!==void 0?c.addEventListener(u,f,{capture:!0,passive:_}):c.addEventListener(u,f,!0):_!==void 0?c.addEventListener(u,f,{passive:_}):c.addEventListener(u,f,!1)}function t_(c,u,f,p,_){var w=p;if((u&1)===0&&(u&2)===0&&p!==null)t:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var L=p.stateNode.containerInfo;if(L===_)break;if(D===4)for(D=p.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===_)return;D=D.return}for(;L!==null;){if(D=Qs(L),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){p=w=D;continue t}L=L.parentNode}}p=p.return}f0(function(){var J=w,ht=vi(f),gt=[];t:{var rt=SA.get(c);if(rt!==void 0){var it=Kl,Yt=c;switch(c){case"keypress":if(ds(f)===0)break t;case"keydown":case"keyup":it=eu;break;case"focusin":Yt="focus",it=Zl;break;case"focusout":Yt="blur",it=Zl;break;case"beforeblur":case"afterblur":it=Zl;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=x0;break;case bA:case EA:case AA:it=Jl;break;case TA:it=b0;break;case"scroll":case"scrollend":it=d0;break;case"wheel":it=nu;break;case"copy":case"cut":case"paste":it=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=ff;break;case"toggle":case"beforetoggle":it=A0}var Ht=(u&4)!==0,Ue=!Ht&&(c==="scroll"||c==="scrollend"),X=Ht?rt!==null?rt+"Capture":null:rt;Ht=[];for(var Y=J,Z;Y!==null;){var ft=Y;if(Z=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Z===null||X===null||(ft=pc(Y,X),ft!=null&&Ht.push(Hf(Y,ft,Z))),Ue)break;Y=Y.return}0<Ht.length&&(rt=new it(rt,Yt,null,f,ht),gt.push({event:rt,listeners:Ht}))}}if((u&7)===0){t:{if(rt=c==="mouseover"||c==="pointerover",it=c==="mouseout"||c==="pointerout",rt&&f!==ea&&(Yt=f.relatedTarget||f.fromElement)&&(Qs(Yt)||Yt[mi]))break t;if((it||rt)&&(rt=ht.window===ht?ht:(rt=ht.ownerDocument)?rt.defaultView||rt.parentWindow:window,it?(Yt=f.relatedTarget||f.toElement,it=J,Yt=Yt?Qs(Yt):null,Yt!==null&&(Ue=s(Yt),Ht=Yt.tag,Yt!==Ue||Ht!==5&&Ht!==27&&Ht!==6)&&(Yt=null)):(it=null,Yt=J),it!==Yt)){if(Ht=xi,ft="onMouseLeave",X="onMouseEnter",Y="mouse",(c==="pointerout"||c==="pointerover")&&(Ht=ff,ft="onPointerLeave",X="onPointerEnter",Y="pointer"),Ue=it==null?rt:ls(it),Z=Yt==null?rt:ls(Yt),rt=new Ht(ft,Y+"leave",it,f,ht),rt.target=Ue,rt.relatedTarget=Z,ft=null,Qs(ht)===J&&(Ht=new Ht(X,Y+"enter",Yt,f,ht),Ht.target=Z,Ht.relatedTarget=Ue,ft=Ht),Ue=ft,it&&Yt)e:{for(Ht=it,X=Yt,Y=0,Z=Ht;Z;Z=Cu(Z))Y++;for(Z=0,ft=X;ft;ft=Cu(ft))Z++;for(;0<Y-Z;)Ht=Cu(Ht),Y--;for(;0<Z-Y;)X=Cu(X),Z--;for(;Y--;){if(Ht===X||X!==null&&Ht===X.alternate)break e;Ht=Cu(Ht),X=Cu(X)}Ht=null}else Ht=null;it!==null&&qS(gt,rt,it,Ht,!1),Yt!==null&&Ue!==null&&qS(gt,Ue,Yt,Ht,!0)}}t:{if(rt=J?ls(J):window,it=rt.nodeName&&rt.nodeName.toLowerCase(),it==="select"||it==="input"&&rt.type==="file")var Mt=hA;else if(Fn(rt))if(fA)Mt=Uk;else{Mt=Bk;var ie=Vk}else it=rt.nodeName,!it||it.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?J&&sf(J.elementType)&&(Mt=hA):Mt=Fk;if(Mt&&(Mt=Mt(c,J))){aa(gt,Mt,f,ht);break t}ie&&ie(c,rt,J),c==="focusout"&&J&&rt.type==="number"&&J.memoizedProps.value!=null&&Ha(rt,"number",rt.value)}switch(ie=J?ls(J):window,c){case"focusin":(Fn(ie)||ie.contentEditable==="true")&&(ru=ie,Oy=J,pf=null);break;case"focusout":pf=Oy=ru=null;break;case"mousedown":My=!0;break;case"contextmenu":case"mouseup":case"dragend":My=!1,xA(gt,f,ht);break;case"selectionchange":if(zk)break;case"keydown":case"keyup":xA(gt,f,ht)}var Lt;if(ms)t:{switch(c){case"compositionstart":var Gt="onCompositionStart";break t;case"compositionend":Gt="onCompositionEnd";break t;case"compositionupdate":Gt="onCompositionUpdate";break t}Gt=void 0}else ue?at(c,f)&&(Gt="onCompositionEnd"):c==="keydown"&&f.keyCode===229&&(Gt="onCompositionStart");Gt&&(I&&f.locale!=="ko"&&(ue||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&ue&&(Lt=of()):(fs=ht,Ga="value"in fs?fs.value:fs.textContent,ue=!0)),ie=hp(J,Gt),0<ie.length&&(Gt=new uf(Gt,c,null,f,ht),gt.push({event:Gt,listeners:ie}),Lt?Gt.data=Lt:(Lt=Et(f),Lt!==null&&(Gt.data=Lt)))),(Lt=A?Bn(c,f):he(c,f))&&(Gt=hp(J,"onBeforeInput"),0<Gt.length&&(ie=new uf("onBeforeInput","beforeinput",null,f,ht),gt.push({event:ie,listeners:Gt}),ie.data=Lt)),A9(gt,c,J,f,ht)}GS(gt,u)})}function Hf(c,u,f){return{instance:c,listener:u,currentTarget:f}}function hp(c,u){for(var f=u+"Capture",p=[];c!==null;){var _=c,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=pc(c,f),_!=null&&p.unshift(Hf(c,_,w)),_=pc(c,u),_!=null&&p.push(Hf(c,_,w))),c.tag===3)return p;c=c.return}return[]}function Cu(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function qS(c,u,f,p,_){for(var w=u._reactName,D=[];f!==null&&f!==p;){var L=f,W=L.alternate,J=L.stateNode;if(L=L.tag,W!==null&&W===p)break;L!==5&&L!==26&&L!==27||J===null||(W=J,_?(J=pc(f,w),J!=null&&D.unshift(Hf(f,J,W))):_||(J=pc(f,w),J!=null&&D.push(Hf(f,J,W)))),f=f.return}D.length!==0&&c.push({event:u,listeners:D})}var I9=/\r\n?/g,R9=/\u0000|\uFFFD/g;function YS(c){return(typeof c=="string"?c:""+c).replace(I9,`
`).replace(R9,"")}function XS(c,u){return u=YS(u),YS(c)===u}function fp(){}function Fe(c,u,f,p,_,w){switch(f){case"children":typeof p=="string"?u==="body"||u==="textarea"&&p===""||yi(c,p):(typeof p=="number"||typeof p=="bigint")&&u!=="body"&&yi(c,""+p);break;case"className":us(c,"class",p);break;case"tabIndex":us(c,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":us(c,f,p);break;case"style":rf(c,p,w);break;case"data":if(u!=="object"){us(c,"data",p);break}case"src":case"href":if(p===""&&(u!=="a"||f!=="href")){c.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=Xl(""+p),c.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){c.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(u!=="input"&&Fe(c,u,"name",_.name,_,null),Fe(c,u,"formEncType",_.formEncType,_,null),Fe(c,u,"formMethod",_.formMethod,_,null),Fe(c,u,"formTarget",_.formTarget,_,null)):(Fe(c,u,"encType",_.encType,_,null),Fe(c,u,"method",_.method,_,null),Fe(c,u,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=Xl(""+p),c.setAttribute(f,p);break;case"onClick":p!=null&&(c.onclick=fp);break;case"onScroll":p!=null&&oe("scroll",c);break;case"onScrollEnd":p!=null&&oe("scrollend",c);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"multiple":c.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":c.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){c.removeAttribute("xlink:href");break}f=Xl(""+p),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""+p):c.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""):c.removeAttribute(f);break;case"capture":case"download":p===!0?c.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,p):c.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?c.setAttribute(f,p):c.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?c.removeAttribute(f):c.setAttribute(f,p);break;case"popover":oe("beforetoggle",c),oe("toggle",c),za(c,"popover",p);break;case"xlinkActuate":cr(c,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":cr(c,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":cr(c,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":cr(c,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":cr(c,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":cr(c,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":cr(c,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":cr(c,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":cr(c,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":za(c,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ay.get(f)||f,za(c,f,p))}}function e_(c,u,f,p,_,w){switch(f){case"style":rf(c,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"children":typeof p=="string"?yi(c,p):(typeof p=="number"||typeof p=="bigint")&&yi(c,""+p);break;case"onScroll":p!=null&&oe("scroll",c);break;case"onScrollEnd":p!=null&&oe("scrollend",c);break;case"onClick":p!=null&&(c.onclick=fp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),u=f.slice(2,_?f.length-7:void 0),w=c[Rn]||null,w=w!=null?w[f]:null,typeof w=="function"&&c.removeEventListener(u,w,_),typeof p=="function")){typeof w!="function"&&w!==null&&(f in c?c[f]=null:c.hasAttribute(f)&&c.removeAttribute(f)),c.addEventListener(u,p,_);break t}f in c?c[f]=p:p===!0?c.setAttribute(f,""):za(c,f,p)}}}function fr(c,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",c),oe("load",c);var p=!1,_=!1,w;for(w in f)if(f.hasOwnProperty(w)){var D=f[w];if(D!=null)switch(w){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Fe(c,u,w,D,f,null)}}_&&Fe(c,u,"srcSet",f.srcSet,f,null),p&&Fe(c,u,"src",f.src,f,null);return;case"input":oe("invalid",c);var L=w=D=_=null,W=null,J=null;for(p in f)if(f.hasOwnProperty(p)){var ht=f[p];if(ht!=null)switch(p){case"name":_=ht;break;case"type":D=ht;break;case"checked":W=ht;break;case"defaultChecked":J=ht;break;case"value":w=ht;break;case"defaultValue":L=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,u));break;default:Fe(c,u,p,ht,f,null)}}fc(c,w,L,W,J,D,_,!1),Yl(c);return;case"select":oe("invalid",c),p=D=w=null;for(_ in f)if(f.hasOwnProperty(_)&&(L=f[_],L!=null))switch(_){case"value":w=L;break;case"defaultValue":D=L;break;case"multiple":p=L;default:Fe(c,u,_,L,f,null)}u=w,f=D,c.multiple=!!p,u!=null?ta(c,!!p,u,!1):f!=null&&ta(c,!!p,f,!0);return;case"textarea":oe("invalid",c),w=_=p=null;for(D in f)if(f.hasOwnProperty(D)&&(L=f[D],L!=null))switch(D){case"value":p=L;break;case"defaultValue":_=L;break;case"children":w=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Fe(c,u,D,L,f,null)}dc(c,p,_,w),Yl(c);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(p=f[W],p!=null))switch(W){case"selected":c.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Fe(c,u,W,p,f,null)}return;case"dialog":oe("beforetoggle",c),oe("toggle",c),oe("cancel",c),oe("close",c);break;case"iframe":case"object":oe("load",c);break;case"video":case"audio":for(p=0;p<zf.length;p++)oe(zf[p],c);break;case"image":oe("error",c),oe("load",c);break;case"details":oe("toggle",c);break;case"embed":case"source":case"link":oe("error",c),oe("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in f)if(f.hasOwnProperty(J)&&(p=f[J],p!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Fe(c,u,J,p,f,null)}return;default:if(sf(u)){for(ht in f)f.hasOwnProperty(ht)&&(p=f[ht],p!==void 0&&e_(c,u,ht,p,f,void 0));return}}for(L in f)f.hasOwnProperty(L)&&(p=f[L],p!=null&&Fe(c,u,L,p,f,null))}function D9(c,u,f,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,D=null,L=null,W=null,J=null,ht=null;for(it in f){var gt=f[it];if(f.hasOwnProperty(it)&&gt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":W=gt;default:p.hasOwnProperty(it)||Fe(c,u,it,null,p,gt)}}for(var rt in p){var it=p[rt];if(gt=f[rt],p.hasOwnProperty(rt)&&(it!=null||gt!=null))switch(rt){case"type":w=it;break;case"name":_=it;break;case"checked":J=it;break;case"defaultChecked":ht=it;break;case"value":D=it;break;case"defaultValue":L=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,u));break;default:it!==gt&&Fe(c,u,rt,it,p,gt)}}ti(c,D,L,W,J,ht,w,_);return;case"select":it=D=L=rt=null;for(w in f)if(W=f[w],f.hasOwnProperty(w)&&W!=null)switch(w){case"value":break;case"multiple":it=W;default:p.hasOwnProperty(w)||Fe(c,u,w,null,p,W)}for(_ in p)if(w=p[_],W=f[_],p.hasOwnProperty(_)&&(w!=null||W!=null))switch(_){case"value":rt=w;break;case"defaultValue":L=w;break;case"multiple":D=w;default:w!==W&&Fe(c,u,_,w,p,W)}u=L,f=D,p=it,rt!=null?ta(c,!!f,rt,!1):!!p!=!!f&&(u!=null?ta(c,!!f,u,!0):ta(c,!!f,f?[]:"",!1));return;case"textarea":it=rt=null;for(L in f)if(_=f[L],f.hasOwnProperty(L)&&_!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Fe(c,u,L,null,p,_)}for(D in p)if(_=p[D],w=f[D],p.hasOwnProperty(D)&&(_!=null||w!=null))switch(D){case"value":rt=_;break;case"defaultValue":it=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==w&&Fe(c,u,D,_,p,w)}Ve(c,rt,it);return;case"option":for(var Yt in f)if(rt=f[Yt],f.hasOwnProperty(Yt)&&rt!=null&&!p.hasOwnProperty(Yt))switch(Yt){case"selected":c.selected=!1;break;default:Fe(c,u,Yt,null,p,rt)}for(W in p)if(rt=p[W],it=f[W],p.hasOwnProperty(W)&&rt!==it&&(rt!=null||it!=null))switch(W){case"selected":c.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Fe(c,u,W,rt,p,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in f)rt=f[Ht],f.hasOwnProperty(Ht)&&rt!=null&&!p.hasOwnProperty(Ht)&&Fe(c,u,Ht,null,p,rt);for(J in p)if(rt=p[J],it=f[J],p.hasOwnProperty(J)&&rt!==it&&(rt!=null||it!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(137,u));break;default:Fe(c,u,J,rt,p,it)}return;default:if(sf(u)){for(var Ue in f)rt=f[Ue],f.hasOwnProperty(Ue)&&rt!==void 0&&!p.hasOwnProperty(Ue)&&e_(c,u,Ue,void 0,p,rt);for(ht in p)rt=p[ht],it=f[ht],!p.hasOwnProperty(ht)||rt===it||rt===void 0&&it===void 0||e_(c,u,ht,rt,p,it);return}}for(var X in f)rt=f[X],f.hasOwnProperty(X)&&rt!=null&&!p.hasOwnProperty(X)&&Fe(c,u,X,null,p,rt);for(gt in p)rt=p[gt],it=f[gt],!p.hasOwnProperty(gt)||rt===it||rt==null&&it==null||Fe(c,u,gt,rt,p,it)}var n_=null,r_=null;function dp(c){return c.nodeType===9?c:c.ownerDocument}function KS(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $S(c,u){if(c===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&u==="foreignObject"?0:c}function i_(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var s_=null;function O9(){var c=window.event;return c&&c.type==="popstate"?c===s_?!1:(s_=c,!0):(s_=null,!1)}var QS=typeof setTimeout=="function"?setTimeout:void 0,M9=typeof clearTimeout=="function"?clearTimeout:void 0,ZS=typeof Promise=="function"?Promise:void 0,N9=typeof queueMicrotask=="function"?queueMicrotask:typeof ZS<"u"?function(c){return ZS.resolve(null).then(c).catch(P9)}:QS;function P9(c){setTimeout(function(){throw c})}function ao(c){return c==="head"}function JS(c,u){var f=u,p=0,_=0;do{var w=f.nextSibling;if(c.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(0<p&&8>p){f=p;var D=c.ownerDocument;if(f&1&&Gf(D.documentElement),f&2&&Gf(D.body),f&4)for(f=D.head,Gf(f),D=f.firstChild;D;){var L=D.nextSibling,W=D.nodeName;D[cc]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=L}}if(_===0){c.removeChild(w),Zf(u);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:p=f.charCodeAt(0)-48;else p=0;f=w}while(f);Zf(u)}function a_(c){var u=c.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":a_(f),ja(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}c.removeChild(f)}}function k9(c,u,f,p){for(;c.nodeType===1;){var _=f;if(c.nodeName.toLowerCase()!==u.toLowerCase()){if(!p&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(p){if(!c[cc])switch(u){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(w=c.getAttribute("rel"),w==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(w!==_.rel||c.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||c.getAttribute("title")!==(_.title==null?null:_.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(w=c.getAttribute("src"),(w!==(_.src==null?null:_.src)||c.getAttribute("type")!==(_.type==null?null:_.type)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(u==="input"&&c.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&c.getAttribute("name")===w)return c}else return c;if(c=qi(c.nextSibling),c===null)break}return null}function L9(c,u,f){if(u==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=qi(c.nextSibling),c===null))return null;return c}function o_(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function V9(c,u){var f=c.ownerDocument;if(c.data!=="$?"||f.readyState==="complete")u();else{var p=function(){u(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),c._reactRetry=p}}function qi(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return c}var c_=null;function tC(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var f=c.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return c;u--}else f==="/$"&&u++}c=c.previousSibling}return null}function eC(c,u,f){switch(u=dp(f),c){case"html":if(c=u.documentElement,!c)throw Error(r(452));return c;case"head":if(c=u.head,!c)throw Error(r(453));return c;case"body":if(c=u.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Gf(c){for(var u=c.attributes;u.length;)c.removeAttributeNode(u[0]);ja(c)}var Ci=new Map,nC=new Set;function gp(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var _a=ot.d;ot.d={f:B9,r:F9,D:U9,C:j9,L:z9,m:H9,X:W9,S:G9,M:q9};function B9(){var c=_a.f(),u=sp();return c||u}function F9(c){var u=cs(c);u!==null&&u.tag===5&&u.type==="form"?bT(u):_a.r(c)}var Iu=typeof document>"u"?null:document;function rC(c,u,f){var p=Iu;if(p&&typeof u=="string"&&u){var _=Dn(u);_='link[rel="'+c+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),nC.has(_)||(nC.add(_),c={rel:c,crossOrigin:f,href:u},p.querySelector(_)===null&&(u=p.createElement("link"),fr(u,"link",c),xn(u),p.head.appendChild(u)))}}function U9(c){_a.D(c),rC("dns-prefetch",c,null)}function j9(c,u){_a.C(c,u),rC("preconnect",c,u)}function z9(c,u,f){_a.L(c,u,f);var p=Iu;if(p&&c&&u){var _='link[rel="preload"][as="'+Dn(u)+'"]';u==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+Dn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+Dn(f.imageSizes)+'"]')):_+='[href="'+Dn(c)+'"]';var w=_;switch(u){case"style":w=Ru(c);break;case"script":w=Du(c)}Ci.has(w)||(c=d({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:c,as:u},f),Ci.set(w,c),p.querySelector(_)!==null||u==="style"&&p.querySelector(Wf(w))||u==="script"&&p.querySelector(qf(w))||(u=p.createElement("link"),fr(u,"link",c),xn(u),p.head.appendChild(u)))}}function H9(c,u){_a.m(c,u);var f=Iu;if(f&&c){var p=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+Dn(p)+'"][href="'+Dn(c)+'"]',w=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Du(c)}if(!Ci.has(w)&&(c=d({rel:"modulepreload",href:c},u),Ci.set(w,c),f.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(qf(w)))return}p=f.createElement("link"),fr(p,"link",c),xn(p),f.head.appendChild(p)}}}function G9(c,u,f){_a.S(c,u,f);var p=Iu;if(p&&c){var _=Mr(p).hoistableStyles,w=Ru(c);u=u||"default";var D=_.get(w);if(!D){var L={loading:0,preload:null};if(D=p.querySelector(Wf(w)))L.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":u},f),(f=Ci.get(w))&&l_(c,f);var W=D=p.createElement("link");xn(W),fr(W,"link",c),W._p=new Promise(function(J,ht){W.onload=J,W.onerror=ht}),W.addEventListener("load",function(){L.loading|=1}),W.addEventListener("error",function(){L.loading|=2}),L.loading|=4,pp(D,u,p)}D={type:"stylesheet",instance:D,count:1,state:L},_.set(w,D)}}}function W9(c,u){_a.X(c,u);var f=Iu;if(f&&c){var p=Mr(f).hoistableScripts,_=Du(c),w=p.get(_);w||(w=f.querySelector(qf(_)),w||(c=d({src:c,async:!0},u),(u=Ci.get(_))&&u_(c,u),w=f.createElement("script"),xn(w),fr(w,"link",c),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function q9(c,u){_a.M(c,u);var f=Iu;if(f&&c){var p=Mr(f).hoistableScripts,_=Du(c),w=p.get(_);w||(w=f.querySelector(qf(_)),w||(c=d({src:c,async:!0,type:"module"},u),(u=Ci.get(_))&&u_(c,u),w=f.createElement("script"),xn(w),fr(w,"link",c),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function iC(c,u,f,p){var _=(_=Tt.current)?gp(_):null;if(!_)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=Ru(f.href),f=Mr(_).hoistableStyles,p=f.get(u),p||(p={type:"style",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){c=Ru(f.href);var w=Mr(_).hoistableStyles,D=w.get(c);if(D||(_=_.ownerDocument||_,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(c,D),(w=_.querySelector(Wf(c)))&&!w._p&&(D.instance=w,D.state.loading=5),Ci.has(c)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ci.set(c,f),w||Y9(_,c,f,D.state))),u&&p===null)throw Error(r(528,""));return D}if(u&&p!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Du(f),f=Mr(_).hoistableScripts,p=f.get(u),p||(p={type:"script",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Ru(c){return'href="'+Dn(c)+'"'}function Wf(c){return'link[rel="stylesheet"]['+c+"]"}function sC(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function Y9(c,u,f,p){c.querySelector('link[rel="preload"][as="style"]['+u+"]")?p.loading=1:(u=c.createElement("link"),p.preload=u,u.addEventListener("load",function(){return p.loading|=1}),u.addEventListener("error",function(){return p.loading|=2}),fr(u,"link",f),xn(u),c.head.appendChild(u))}function Du(c){return'[src="'+Dn(c)+'"]'}function qf(c){return"script[async]"+c}function aC(c,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var p=c.querySelector('style[data-href~="'+Dn(f.href)+'"]');if(p)return u.instance=p,xn(p),p;var _=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(c.ownerDocument||c).createElement("style"),xn(p),fr(p,"style",_),pp(p,f.precedence,c),u.instance=p;case"stylesheet":_=Ru(f.href);var w=c.querySelector(Wf(_));if(w)return u.state.loading|=4,u.instance=w,xn(w),w;p=sC(f),(_=Ci.get(_))&&l_(p,_),w=(c.ownerDocument||c).createElement("link"),xn(w);var D=w;return D._p=new Promise(function(L,W){D.onload=L,D.onerror=W}),fr(w,"link",p),u.state.loading|=4,pp(w,f.precedence,c),u.instance=w;case"script":return w=Du(f.src),(_=c.querySelector(qf(w)))?(u.instance=_,xn(_),_):(p=f,(_=Ci.get(w))&&(p=d({},f),u_(p,_)),c=c.ownerDocument||c,_=c.createElement("script"),xn(_),fr(_,"link",p),c.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(p=u.instance,u.state.loading|=4,pp(p,f.precedence,c));return u.instance}function pp(c,u,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,w=_,D=0;D<p.length;D++){var L=p[D];if(L.dataset.precedence===u)w=L;else if(w!==_)break}w?w.parentNode.insertBefore(c,w.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(c,u.firstChild))}function l_(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.title==null&&(c.title=u.title)}function u_(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.integrity==null&&(c.integrity=u.integrity)}var mp=null;function oC(c,u,f){if(mp===null){var p=new Map,_=mp=new Map;_.set(f,p)}else _=mp,p=_.get(f),p||(p=new Map,_.set(f,p));if(p.has(c))return p;for(p.set(c,null),f=f.getElementsByTagName(c),_=0;_<f.length;_++){var w=f[_];if(!(w[cc]||w[Vn]||c==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(u)||"";D=c+D;var L=p.get(D);L?L.push(w):p.set(D,[w])}}return p}function cC(c,u,f){c=c.ownerDocument||c,c.head.insertBefore(f,u==="title"?c.querySelector("head > title"):null)}function X9(c,u,f){if(f===1||u.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return c=u.disabled,typeof u.precedence=="string"&&c==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function lC(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Yf=null;function K9(){}function $9(c,u,f){if(Yf===null)throw Error(r(475));var p=Yf;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Ru(f.href),w=c.querySelector(Wf(_));if(w){c=w._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(p.count++,p=yp.bind(p),c.then(p,p)),u.state.loading|=4,u.instance=w,xn(w);return}w=c.ownerDocument||c,f=sC(f),(_=Ci.get(_))&&l_(f,_),w=w.createElement("link"),xn(w);var D=w;D._p=new Promise(function(L,W){D.onload=L,D.onerror=W}),fr(w,"link",f),u.instance=w}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(u,c),(c=u.state.preload)&&(u.state.loading&3)===0&&(p.count++,u=yp.bind(p),c.addEventListener("load",u),c.addEventListener("error",u))}}function Q9(){if(Yf===null)throw Error(r(475));var c=Yf;return c.stylesheets&&c.count===0&&h_(c,c.stylesheets),0<c.count?function(u){var f=setTimeout(function(){if(c.stylesheets&&h_(c,c.stylesheets),c.unsuspend){var p=c.unsuspend;c.unsuspend=null,p()}},6e4);return c.unsuspend=u,function(){c.unsuspend=null,clearTimeout(f)}}:null}function yp(){if(this.count--,this.count===0){if(this.stylesheets)h_(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var vp=null;function h_(c,u){c.stylesheets=null,c.unsuspend!==null&&(c.count++,vp=new Map,u.forEach(Z9,c),vp=null,yp.call(c))}function Z9(c,u){if(!(u.state.loading&4)){var f=vp.get(c);if(f)var p=f.get(null);else{f=new Map,vp.set(c,f);for(var _=c.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var D=_[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),p=D)}p&&f.set(null,p)}_=u.instance,D=_.getAttribute("data-precedence"),w=f.get(D)||p,w===p&&f.set(null,_),f.set(D,_),this.count++,p=yp.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),w?w.parentNode.insertBefore(_,w.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(_,c.firstChild)),u.state.loading|=4}}var Xf={$$typeof:R,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function J9(c,u,f,p,_,w,D,L){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ks(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.hiddenUpdates=Ks(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function uC(c,u,f,p,_,w,D,L,W,J,ht,gt){return c=new J9(c,u,f,D,L,W,J,gt),u=1,w===!0&&(u|=24),w=ni(3,null,null,u),c.current=w,w.stateNode=c,u=qy(),u.refCount++,c.pooledCache=u,u.refCount++,w.memoizedState={element:p,isDehydrated:f,cache:u},$y(w),c}function hC(c){return c?(c=ou,c):ou}function fC(c,u,f,p,_,w){_=hC(_),p.context===null?p.context=_:p.pendingContext=_,p=Ya(u),p.payload={element:f},w=w===void 0?null:w,w!==null&&(p.callback=w),f=Xa(c,p,u),f!==null&&(oi(f,c,u),Af(f,c,u))}function dC(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var f=c.retryLane;c.retryLane=f!==0&&f<u?f:u}}function f_(c,u){dC(c,u),(c=c.alternate)&&dC(c,u)}function gC(c){if(c.tag===13){var u=au(c,67108864);u!==null&&oi(u,c,67108864),f_(c,67108864)}}var _p=!0;function t7(c,u,f,p){var _=K.T;K.T=null;var w=ot.p;try{ot.p=2,d_(c,u,f,p)}finally{ot.p=w,K.T=_}}function e7(c,u,f,p){var _=K.T;K.T=null;var w=ot.p;try{ot.p=8,d_(c,u,f,p)}finally{ot.p=w,K.T=_}}function d_(c,u,f,p){if(_p){var _=g_(p);if(_===null)t_(c,u,p,xp,f),mC(c,p);else if(r7(_,c,u,f,p))p.stopPropagation();else if(mC(c,p),u&4&&-1<n7.indexOf(c)){for(;_!==null;){var w=cs(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=ji(w.pendingLanes);if(D!==0){var L=w;for(L.pendingLanes|=2,L.entangledLanes|=2;D;){var W=1<<31-_r(D);L.entanglements[1]|=W,D&=~W}bs(w),(Re&6)===0&&(rp=Ie()+500,jf(0))}}break;case 13:L=au(w,2),L!==null&&oi(L,w,2),sp(),f_(w,2)}if(w=g_(p),w===null&&t_(c,u,p,xp,f),w===_)break;_=w}_!==null&&p.stopPropagation()}else t_(c,u,p,null,f)}}function g_(c){return c=vi(c),p_(c)}var xp=null;function p_(c){if(xp=null,c=Qs(c),c!==null){var u=s(c);if(u===null)c=null;else{var f=u.tag;if(f===13){if(c=a(u),c!==null)return c;c=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null)}}return xp=c,null}function pC(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wt()){case un:return 2;case Rt:return 8;case Ze:case pi:return 32;case ss:return 268435456;default:return 32}default:return 32}}var m_=!1,oo=null,co=null,lo=null,Kf=new Map,$f=new Map,uo=[],n7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mC(c,u){switch(c){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Kf.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(u.pointerId)}}function Qf(c,u,f,p,_,w){return c===null||c.nativeEvent!==w?(c={blockedOn:u,domEventName:f,eventSystemFlags:p,nativeEvent:w,targetContainers:[_]},u!==null&&(u=cs(u),u!==null&&gC(u)),c):(c.eventSystemFlags|=p,u=c.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),c)}function r7(c,u,f,p,_){switch(u){case"focusin":return oo=Qf(oo,c,u,f,p,_),!0;case"dragenter":return co=Qf(co,c,u,f,p,_),!0;case"mouseover":return lo=Qf(lo,c,u,f,p,_),!0;case"pointerover":var w=_.pointerId;return Kf.set(w,Qf(Kf.get(w)||null,c,u,f,p,_)),!0;case"gotpointercapture":return w=_.pointerId,$f.set(w,Qf($f.get(w)||null,c,u,f,p,_)),!0}return!1}function yC(c){var u=Qs(c.target);if(u!==null){var f=s(u);if(f!==null){if(u=f.tag,u===13){if(u=a(f),u!==null){c.blockedOn=u,s0(c.priority,function(){if(f.tag===13){var p=ai();p=Ba(p);var _=au(f,p);_!==null&&oi(_,f,p),f_(f,p)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){c.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}c.blockedOn=null}function wp(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var f=g_(c.nativeEvent);if(f===null){f=c.nativeEvent;var p=new f.constructor(f.type,f);ea=p,f.target.dispatchEvent(p),ea=null}else return u=cs(f),u!==null&&gC(u),c.blockedOn=f,!1;u.shift()}return!0}function vC(c,u,f){wp(c)&&f.delete(u)}function i7(){m_=!1,oo!==null&&wp(oo)&&(oo=null),co!==null&&wp(co)&&(co=null),lo!==null&&wp(lo)&&(lo=null),Kf.forEach(vC),$f.forEach(vC)}function bp(c,u){c.blockedOn===u&&(c.blockedOn=null,m_||(m_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,i7)))}var Ep=null;function _C(c){Ep!==c&&(Ep=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ep===c&&(Ep=null);for(var u=0;u<c.length;u+=3){var f=c[u],p=c[u+1],_=c[u+2];if(typeof p!="function"){if(p_(p||f)===null)continue;break}var w=cs(f);w!==null&&(c.splice(u,3),u-=3,pv(w,{pending:!0,data:_,method:f.method,action:p},p,_))}}))}function Zf(c){function u(W){return bp(W,c)}oo!==null&&bp(oo,c),co!==null&&bp(co,c),lo!==null&&bp(lo,c),Kf.forEach(u),$f.forEach(u);for(var f=0;f<uo.length;f++){var p=uo[f];p.blockedOn===c&&(p.blockedOn=null)}for(;0<uo.length&&(f=uo[0],f.blockedOn===null);)yC(f),f.blockedOn===null&&uo.shift();if(f=(c.ownerDocument||c).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var _=f[p],w=f[p+1],D=_[Rn]||null;if(typeof w=="function")D||_C(f);else if(D){var L=null;if(w&&w.hasAttribute("formAction")){if(_=w,D=w[Rn]||null)L=D.formAction;else if(p_(_)!==null)continue}else L=D.action;typeof L=="function"?f[p+1]=L:(f.splice(p,3),p-=3),_C(f)}}}function y_(c){this._internalRoot=c}Ap.prototype.render=y_.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,p=ai();fC(f,p,c,u,null,null)},Ap.prototype.unmount=y_.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;fC(c.current,2,null,c,null,null),sp(),u[mi]=null}};function Ap(c){this._internalRoot=c}Ap.prototype.unstable_scheduleHydration=function(c){if(c){var u=Fa();c={blockedOn:null,target:c,priority:u};for(var f=0;f<uo.length&&u!==0&&u<uo[f].priority;f++);uo.splice(f,0,c),f===0&&yC(c)}};var xC=t.version;if(xC!=="19.1.0")throw Error(r(527,xC,"19.1.0"));ot.findDOMNode=function(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(u),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var s7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{Xe=Tp.inject(s7),ye=Tp}catch{}}return td.createRoot=function(c,u){if(!i(c))throw Error(r(299));var f=!1,p="",_=LT,w=VT,D=BT,L=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(L=u.unstable_transitionCallbacks)),u=uC(c,1,!1,null,null,f,p,_,w,D,L,null),c[mi]=u.current,Jv(c),new y_(u)},td.hydrateRoot=function(c,u,f){if(!i(c))throw Error(r(299));var p=!1,_="",w=LT,D=VT,L=BT,W=null,J=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(L=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(W=f.unstable_transitionCallbacks),f.formState!==void 0&&(J=f.formState)),u=uC(c,1,!0,u,f??null,p,_,w,D,L,W,J),u.context=hC(null),f=u.current,p=ai(),p=Ba(p),_=Ya(p),_.callback=null,Xa(f,_,p),f=p,u.current.lanes=f,$s(u,f),bs(u),c[mi]=u.current,Jv(c),new Ap(u)},td.version="19.1.0",td}var DC;function m7(){if(DC)return __.exports;DC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),__.exports=p7(),__.exports}var y7=m7(),st=Pw();const an=Nw(st);function v7({onAddClick:n,onLogout:t,onTabChange:e,currentTab:r}){return k.jsxs("nav",{className:"navbar",children:[k.jsx("button",{onClick:()=>e("dashboard"),title:"Dashboard",className:r==="dashboard"?"text-warning":"text-info",children:k.jsx("i",{className:"bi bi-house-fill"})}),k.jsx("button",{onClick:()=>e("history"),title:"History",children:k.jsx("i",{className:`bi bi-clock-history ${r==="history"?"text-warning":"text-info"}`})}),k.jsx("button",{onClick:n,title:"Add Meal",children:k.jsx("i",{className:`bi bi-plus-circle-fill ${r==="addmead"?"text-warning":"text-info"}`})}),k.jsx("button",{title:"Suggestions",onClick:()=>e("suggestions"),children:k.jsx("i",{className:`bi bi-lightbulb-fill	 ${r==="suggestions"?"text-warning":"text-info"}`})}),k.jsx("button",{onClick:()=>e("profile"),title:"Profile",children:k.jsx("i",{className:`bi bi-person-circle ${r==="profile"?"text-warning":"text-info"}`})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Lg(n){return n+.5|0}const Io=(n,t,e)=>Math.max(Math.min(n,e),t);function _d(n){return Io(Lg(n*2.55),0,255)}function No(n){return Io(Lg(n*255),0,255)}function Ea(n){return Io(Lg(n/2.55)/100,0,1)}function OC(n){return Io(Lg(n*100),0,100)}const Ii={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qx=[..."0123456789ABCDEF"],_7=n=>Qx[n&15],x7=n=>Qx[(n&240)>>4]+Qx[n&15],Sp=n=>(n&240)>>4===(n&15),w7=n=>Sp(n.r)&&Sp(n.g)&&Sp(n.b)&&Sp(n.a);function b7(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Ii[n[1]]*17,g:255&Ii[n[2]]*17,b:255&Ii[n[3]]*17,a:t===5?Ii[n[4]]*17:255}:(t===7||t===9)&&(e={r:Ii[n[1]]<<4|Ii[n[2]],g:Ii[n[3]]<<4|Ii[n[4]],b:Ii[n[5]]<<4|Ii[n[6]],a:t===9?Ii[n[7]]<<4|Ii[n[8]]:255})),e}const E7=(n,t)=>n<255?t(n):"";function A7(n){var t=w7(n)?_7:x7;return n?"#"+t(n.r)+t(n.g)+t(n.b)+E7(n.a,t):void 0}const T7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function R4(n,t,e){const r=t*Math.min(e,1-e),i=(s,a=(s+n/30)%12)=>e-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function S7(n,t,e){const r=(i,s=(i+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function C7(n,t,e){const r=R4(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function I7(n,t,e,r,i){return n===i?(t-e)/r+(t<e?6:0):t===i?(e-n)/r+2:(n-t)/r+4}function kw(n){const e=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(e,r,i),a=Math.min(e,r,i),o=(s+a)/2;let l,h,d;return s!==a&&(d=s-a,h=o>.5?d/(2-s-a):d/(s+a),l=I7(e,r,i,d,s),l=l*60+.5),[l|0,h||0,o]}function Lw(n,t,e,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,r)).map(No)}function Vw(n,t,e){return Lw(R4,n,t,e)}function R7(n,t,e){return Lw(C7,n,t,e)}function D7(n,t,e){return Lw(S7,n,t,e)}function D4(n){return(n%360+360)%360}function O7(n){const t=T7.exec(n);let e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?_d(+t[5]):No(+t[5]));const i=D4(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=R7(i,s,a):t[1]==="hsv"?r=D7(i,s,a):r=Vw(i,s,a),{r:r[0],g:r[1],b:r[2],a:e}}function M7(n,t){var e=kw(n);e[0]=D4(e[0]+t),e=Vw(e),n.r=e[0],n.g=e[1],n.b=e[2]}function N7(n){if(!n)return;const t=kw(n),e=t[0],r=OC(t[1]),i=OC(t[2]);return n.a<255?`hsla(${e}, ${r}%, ${i}%, ${Ea(n.a)})`:`hsl(${e}, ${r}%, ${i}%)`}const MC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function P7(){const n={},t=Object.keys(NC),e=Object.keys(MC);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<e.length;i++)s=e[i],o=o.replace(s,MC[s]);s=parseInt(NC[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let Cp;function k7(n){Cp||(Cp=P7(),Cp.transparent=[0,0,0,0]);const t=Cp[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const L7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function V7(n){const t=L7.exec(n);let e=255,r,i,s;if(t){if(t[7]!==r){const a=+t[7];e=t[8]?_d(a):Io(a*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?_d(r):Io(r,0,255)),i=255&(t[4]?_d(i):Io(i,0,255)),s=255&(t[6]?_d(s):Io(s,0,255)),{r,g:i,b:s,a:e}}}function B7(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ea(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const A_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ou=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function F7(n,t,e){const r=Ou(Ea(n.r)),i=Ou(Ea(n.g)),s=Ou(Ea(n.b));return{r:No(A_(r+e*(Ou(Ea(t.r))-r))),g:No(A_(i+e*(Ou(Ea(t.g))-i))),b:No(A_(s+e*(Ou(Ea(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Ip(n,t,e){if(n){let r=kw(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=Vw(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function O4(n,t){return n&&Object.assign(t||{},n)}function PC(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=No(n[3]))):(t=O4(n,{r:0,g:0,b:0,a:1}),t.a=No(t.a)),t}function U7(n){return n.charAt(0)==="r"?V7(n):O7(n)}class sg{constructor(t){if(t instanceof sg)return t;const e=typeof t;let r;e==="object"?r=PC(t):e==="string"&&(r=b7(t)||k7(t)||U7(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=O4(this._rgb);return t&&(t.a=Ea(t.a)),t}set rgb(t){this._rgb=PC(t)}rgbString(){return this._valid?B7(this._rgb):void 0}hexString(){return this._valid?A7(this._rgb):void 0}hslString(){return this._valid?N7(this._rgb):void 0}mix(t,e){if(t){const r=this.rgb,i=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,l=r.a-i.a,h=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=F7(this._rgb,t._rgb,e)),this}clone(){return new sg(this.rgb)}alpha(t){return this._rgb.a=No(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Lg(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ip(this._rgb,2,t),this}darken(t){return Ip(this._rgb,2,-t),this}saturate(t){return Ip(this._rgb,1,t),this}desaturate(t){return Ip(this._rgb,1,-t),this}rotate(t){return M7(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xa(){}const j7=(()=>{let n=0;return()=>n++})();function Ce(n){return n==null}function sr(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function me(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Bi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Es(n,t){return Bi(n)?n:t}function ne(n,t){return typeof n>"u"?t:n}const z7=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,M4=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Qe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Pe(n,t,e,r){let i,s,a;if(sr(n))for(s=n.length,i=0;i<s;i++)t.call(e,n[i],i);else if(me(n))for(a=Object.keys(n),s=a.length,i=0;i<s;i++)t.call(e,n[a[i]],a[i])}function L1(n,t){let e,r,i,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,r=n.length;e<r;++e)if(i=n[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function V1(n){if(sr(n))return n.map(V1);if(me(n)){const t=Object.create(null),e=Object.keys(n),r=e.length;let i=0;for(;i<r;++i)t[e[i]]=V1(n[e[i]]);return t}return n}function N4(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function H7(n,t,e,r){if(!N4(n))return;const i=t[n],s=e[n];me(i)&&me(s)?ag(i,s,r):t[n]=V1(s)}function ag(n,t,e){const r=sr(t)?t:[t],i=r.length;if(!me(n))return n;e=e||{};const s=e.merger||H7;let a;for(let o=0;o<i;++o){if(a=r[o],!me(a))continue;const l=Object.keys(a);for(let h=0,d=l.length;h<d;++h)s(l[h],n,a,e)}return n}function Vd(n,t){return ag(n,t,{merger:G7})}function G7(n,t,e){if(!N4(n))return;const r=t[n],i=e[n];me(r)&&me(i)?Vd(r,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=V1(i))}const kC={"":n=>n,x:n=>n.x,y:n=>n.y};function W7(n){const t=n.split("."),e=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function q7(n){const t=W7(n);return e=>{for(const r of t){if(r==="")break;e=e&&e[r]}return e}}function vl(n,t){return(kC[t]||(kC[t]=q7(t)))(n)}function Bw(n){return n.charAt(0).toUpperCase()+n.slice(1)}const og=n=>typeof n<"u",zo=n=>typeof n=="function",LC=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Y7(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Ge=Math.PI,pn=2*Ge,X7=pn+Ge,B1=Number.POSITIVE_INFINITY,K7=Ge/180,Yn=Ge/2,Vc=Ge/4,VC=Ge*2/3,P4=Math.log10,Ps=Math.sign;function Bd(n,t,e){return Math.abs(n-t)<e}function BC(n){const t=Math.round(n);n=Bd(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(P4(n))),r=n/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function $7(n){const t=[],e=Math.sqrt(n);let r;for(r=1;r<e;r++)n%r===0&&(t.push(r),t.push(n/r));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function Q7(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function cg(n){return!Q7(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Z7(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function J7(n,t,e){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Aa(n){return n*(Ge/180)}function tL(n){return n*(180/Ge)}function FC(n){if(!Bi(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function k4(n,t){const e=t.x-n.x,r=t.y-n.y,i=Math.sqrt(e*e+r*r);let s=Math.atan2(r,e);return s<-.5*Ge&&(s+=pn),{angle:s,distance:i}}function Zx(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function eL(n,t){return(n-t+X7)%pn-Ge}function $i(n){return(n%pn+pn)%pn}function lg(n,t,e,r){const i=$i(n),s=$i(t),a=$i(e),o=$i(s-i),l=$i(a-i),h=$i(i-s),d=$i(i-a);return i===s||i===a||r&&s===a||o>l&&h<d}function Cr(n,t,e){return Math.max(t,Math.min(e,n))}function nL(n){return Cr(n,-32768,32767)}function Ro(n,t,e,r=1e-6){return n>=Math.min(t,e)-r&&n<=Math.max(t,e)+r}function Fw(n,t,e){e=e||(a=>n[a]<t);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,e(s)?i=s:r=s;return{lo:i,hi:r}}const rl=(n,t,e,r)=>Fw(n,e,r?i=>{const s=n[i][t];return s<e||s===e&&n[i+1][t]===e}:i=>n[i][t]<e),rL=(n,t,e)=>Fw(n,e,r=>n[r][t]>=e);function iL(n,t,e){let r=0,i=n.length;for(;r<i&&n[r]<t;)r++;for(;i>r&&n[i-1]>e;)i--;return r>0||i<n.length?n.slice(r,i):n}const L4=["push","pop","shift","splice","unshift"];function sL(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),L4.forEach(e=>{const r="_onData"+Bw(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...s)}),a}})})}function UC(n,t){const e=n._chartjs;if(!e)return;const r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(L4.forEach(s=>{delete n[s]}),delete n._chartjs)}function V4(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const B4=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function F4(n,t){let e=[],r=!1;return function(...i){e=i,r||(r=!0,B4.call(window,()=>{r=!1,n.apply(t,e)}))}}function aL(n,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(n,t,r)):n.apply(this,r),t}}const U4=n=>n==="start"?"left":n==="end"?"right":"center",ci=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,oL=(n,t,e,r)=>n===(r?"left":"right")?e:n==="center"?(t+e)/2:t;function cL(n,t,e){const r=t.length;let i=0,s=r;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=a.axis,{min:g,max:m,minDefined:v,maxDefined:x}=a.getUserBounds();if(v){if(i=Math.min(rl(l,d,g).lo,e?r:rl(t,d,a.getPixelForValue(g)).lo),h){const b=l.slice(0,i+1).reverse().findIndex(E=>!Ce(E[o.axis]));i-=Math.max(0,b)}i=Cr(i,0,r-1)}if(x){let b=Math.max(rl(l,a.axis,m,!0).hi+1,e?0:rl(t,d,a.getPixelForValue(m),!0).hi+1);if(h){const E=l.slice(b-1).findIndex(T=>!Ce(T[o.axis]));b+=Math.max(0,E)}s=Cr(b,i,r)-i}else s=r-i}return{start:i,count:s}}function lL(n){const{xScale:t,yScale:e,_scaleRanges:r}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),s}const Rp=n=>n===0||n===1,jC=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*pn/e)),zC=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*pn/e)+1,Fd={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Yn)+1,easeOutSine:n=>Math.sin(n*Yn),easeInOutSine:n=>-.5*(Math.cos(Ge*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Rp(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Rp(n)?n:jC(n,.075,.3),easeOutElastic:n=>Rp(n)?n:zC(n,.075,.3),easeInOutElastic(n){return Rp(n)?n:n<.5?.5*jC(n*2,.1125,.45):.5+.5*zC(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Fd.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Fd.easeInBounce(n*2)*.5:Fd.easeOutBounce(n*2-1)*.5+.5};function Uw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function HC(n){return Uw(n)?n:new sg(n)}function T_(n){return Uw(n)?n:new sg(n).saturate(.5).darken(.1).hexString()}const uL=["x","y","borderWidth","radius","tension"],hL=["color","borderColor","backgroundColor"];function fL(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:hL},numbers:{type:"number",properties:uL}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function dL(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const GC=new Map;function gL(n,t){t=t||{};const e=n+JSON.stringify(t);let r=GC.get(e);return r||(r=new Intl.NumberFormat(n,t),GC.set(e,r)),r}function jw(n,t,e){return gL(t,e).format(n)}const pL={values(n){return sr(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),s=mL(n,e)}const a=P4(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),jw(n,r,l)}};function mL(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var j4={formatters:pL};function yL(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:j4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const _l=Object.create(null),Jx=Object.create(null);function Ud(n,t){if(!t)return n;const e=t.split(".");for(let r=0,i=e.length;r<i;++r){const s=e[r];n=n[s]||(n[s]=Object.create(null))}return n}function S_(n,t,e){return typeof t=="string"?ag(Ud(n,t),e):ag(Ud(n,""),t)}class vL{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>T_(i.backgroundColor),this.hoverBorderColor=(r,i)=>T_(i.borderColor),this.hoverColor=(r,i)=>T_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return S_(this,t,e)}get(t){return Ud(this,t)}describe(t,e){return S_(Jx,t,e)}override(t,e){return S_(_l,t,e)}route(t,e,r,i){const s=Ud(this,t),a=Ud(this,r),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[o],h=a[i];return me(l)?Object.assign({},h,l):ne(l,h)},set(l){this[o]=l}}})}apply(t){t.forEach(e=>e(this))}}var Tn=new vL({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[fL,dL,yL]);function _L(n){return!n||Ce(n.size)||Ce(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function WC(n,t,e,r,i){let s=t[i];return s||(s=t[i]=n.measureText(i).width,e.push(i)),s>r&&(r=s),r}function Bc(n,t,e){const r=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function qC(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function t2(n,t,e,r){z4(n,t,e,r,null)}function z4(n,t,e,r,i){let s,a,o,l,h,d,g,m;const v=t.pointStyle,x=t.rotation,b=t.radius;let E=(x||0)*K7;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,r),n.rotate(E),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),v){default:i?n.ellipse(e,r,i/2,b,0,0,pn):n.arc(e,r,b,0,pn),n.closePath();break;case"triangle":d=i?i/2:b,n.moveTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=VC,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=VC,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),n.closePath();break;case"rectRounded":h=b*.516,l=b-h,a=Math.cos(E+Vc)*l,g=Math.cos(E+Vc)*(i?i/2-h:l),o=Math.sin(E+Vc)*l,m=Math.sin(E+Vc)*(i?i/2-h:l),n.arc(e-g,r-o,h,E-Ge,E-Yn),n.arc(e+m,r-a,h,E-Yn,E),n.arc(e+g,r+o,h,E,E+Yn),n.arc(e-m,r+a,h,E+Yn,E+Ge),n.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*b,d=i?i/2:l,n.rect(e-d,r-l,2*d,2*l);break}E+=Vc;case"rectRot":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+m,r-a),n.lineTo(e+g,r+o),n.lineTo(e-m,r+a),n.closePath();break;case"crossRot":E+=Vc;case"cross":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"star":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a),E+=Vc,g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"line":a=i?i/2:Math.cos(E)*b,o=Math.sin(E)*b,n.moveTo(e-a,r-o),n.lineTo(e+a,r+o);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(E)*(i?i/2:b),r+Math.sin(E)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ug(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function zw(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Hw(n){n.restore()}function xL(n,t,e,r,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else i==="after"!=!!r?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function wL(n,t,e,r){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function bL(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ce(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function EL(n,t,e,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,h=e+s.actualBoundingBoxDescent,d=i.strikethrough?(l+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,d),n.lineTo(o,d),n.stroke()}}function AL(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function F1(n,t,e,r,i,s={}){const a=sr(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let l,h;for(n.save(),n.font=i.string,bL(n,s),l=0;l<a.length;++l)h=a[l],s.backdrop&&AL(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ce(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(h,e,r,s.maxWidth)),n.fillText(h,e,r,s.maxWidth),EL(n,e,r,h,s),r+=Number(i.lineHeight);n.restore()}function U1(n,t){const{x:e,y:r,w:i,h:s,radius:a}=t;n.arc(e+a.topLeft,r+a.topLeft,a.topLeft,1.5*Ge,Ge,!0),n.lineTo(e,r+s-a.bottomLeft),n.arc(e+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Ge,Yn,!0),n.lineTo(e+i-a.bottomRight,r+s),n.arc(e+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Yn,0,!0),n.lineTo(e+i,r+a.topRight),n.arc(e+i-a.topRight,r+a.topRight,a.topRight,0,-Yn,!0),n.lineTo(e+a.topLeft,r)}const TL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function CL(n,t){const e=(""+n).match(TL);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const IL=n=>+n||0;function Gw(n,t){const e={},r=me(t),i=r?Object.keys(t):t,s=me(n)?r?a=>ne(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of i)e[a]=IL(s(a));return e}function H4(n){return Gw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function rh(n){return Gw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function es(n){const t=H4(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Xr(n,t){n=n||{},t=t||Tn.font;let e=ne(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=ne(n.style,t.style);r&&!(""+r).match(SL)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ne(n.family,t.family),lineHeight:CL(ne(n.lineHeight,t.lineHeight),e),size:e,style:r,weight:ne(n.weight,t.weight),string:""};return i.string=_L(i),i}function Dp(n,t,e,r){let i,s,a;for(i=0,s=n.length;i<s;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function RL(n,t,e){const{min:r,max:i}=n,s=M4(t,(i-r)/2),a=(o,l)=>e&&o===0?0:o+l;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function Ol(n,t){return Object.assign(Object.create(n),t)}function Ww(n,t=[""],e,r,i=()=>n[0]){const s=e||n;typeof r>"u"&&(r=Y4("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:o=>Ww([o,...n],t,s,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return W4(o,l,()=>VL(l,t,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return XC(o).includes(l)},ownKeys(o){return XC(o)},set(o,l,h){const d=o._storage||(o._storage=i());return o[l]=d[l]=h,delete o._keys,!0}})}function uh(n,t,e,r){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:G4(n,r),setContext:s=>uh(n,s,e,r),override:s=>uh(n.override(s),t,e,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return W4(s,a,()=>OL(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function G4(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:r,isScriptable:zo(e)?e:()=>e,isIndexable:zo(r)?r:()=>r}}const DL=(n,t)=>n?n+Bw(t):t,qw=(n,t)=>me(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function W4(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const r=e();return n[t]=r,r}function OL(n,t,e){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=n;let o=r[t];return zo(o)&&a.isScriptable(t)&&(o=ML(t,o,n,e)),sr(o)&&o.length&&(o=NL(t,o,n,a.isIndexable)),qw(t,o)&&(o=uh(o,i,s&&s[t],a)),o}function ML(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=e;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=t(s,a||r);return o.delete(n),qw(n,l)&&(l=Yw(i._scopes,i,n,l)),l}function NL(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=e;if(typeof s.index<"u"&&r(n))return t[s.index%t.length];if(me(t[0])){const l=t,h=i._scopes.filter(d=>d!==l);t=[];for(const d of l){const g=Yw(h,i,n,d);t.push(uh(g,s,a&&a[n],o))}}return t}function q4(n,t,e){return zo(n)?n(t,e):n}const PL=(n,t)=>n===!0?t:typeof n=="string"?vl(t,n):void 0;function kL(n,t,e,r,i){for(const s of t){const a=PL(e,s);if(a){n.add(a);const o=q4(a._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==r)return o}else if(a===!1&&typeof r<"u"&&e!==r)return null}return!1}function Yw(n,t,e,r){const i=t._rootScopes,s=q4(t._fallback,e,r),a=[...n,...i],o=new Set;o.add(r);let l=YC(o,a,e,s||e,r);return l===null||typeof s<"u"&&s!==e&&(l=YC(o,a,s,l,r),l===null)?!1:Ww(Array.from(o),[""],i,s,()=>LL(t,e,r))}function YC(n,t,e,r,i){for(;e;)e=kL(n,t,e,r,i);return e}function LL(n,t,e){const r=n._getTarget();t in r||(r[t]={});const i=r[t];return sr(i)&&me(e)?e:i||{}}function VL(n,t,e,r){let i;for(const s of t)if(i=Y4(DL(s,n),e),typeof i<"u")return qw(n,i)?Yw(e,r,n,i):i}function Y4(n,t){for(const e of t){if(!e)continue;const r=e[n];if(typeof r<"u")return r}}function XC(n){let t=n._keys;return t||(t=n._keys=BL(n._scopes)),t}function BL(n){const t=new Set;for(const e of n)for(const r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const FL=Number.EPSILON||1e-14,hh=(n,t)=>t<n.length&&!n[t].skip&&n[t],X4=n=>n==="x"?"y":"x";function UL(n,t,e,r){const i=n.skip?t:n,s=t,a=e.skip?t:e,o=Zx(s,i),l=Zx(a,s);let h=o/(o+l),d=l/(o+l);h=isNaN(h)?0:h,d=isNaN(d)?0:d;const g=r*h,m=r*d;return{previous:{x:s.x-g*(a.x-i.x),y:s.y-g*(a.y-i.y)},next:{x:s.x+m*(a.x-i.x),y:s.y+m*(a.y-i.y)}}}function jL(n,t,e){const r=n.length;let i,s,a,o,l,h=hh(n,0);for(let d=0;d<r-1;++d)if(l=h,h=hh(n,d+1),!(!l||!h)){if(Bd(t[d],0,FL)){e[d]=e[d+1]=0;continue}i=e[d]/t[d],s=e[d+1]/t[d],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),e[d]=i*a*t[d],e[d+1]=s*a*t[d])}}function zL(n,t,e="x"){const r=X4(e),i=n.length;let s,a,o,l=hh(n,0);for(let h=0;h<i;++h){if(a=o,o=l,l=hh(n,h+1),!o)continue;const d=o[e],g=o[r];a&&(s=(d-a[e])/3,o[`cp1${e}`]=d-s,o[`cp1${r}`]=g-s*t[h]),l&&(s=(l[e]-d)/3,o[`cp2${e}`]=d+s,o[`cp2${r}`]=g+s*t[h])}}function HL(n,t="x"){const e=X4(t),r=n.length,i=Array(r).fill(0),s=Array(r);let a,o,l,h=hh(n,0);for(a=0;a<r;++a)if(o=l,l=h,h=hh(n,a+1),!!l){if(h){const d=h[t]-l[t];i[a]=d!==0?(h[e]-l[e])/d:0}s[a]=o?h?Ps(i[a-1])!==Ps(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}jL(n,i,s),zL(n,s,t)}function Op(n,t,e){return Math.max(Math.min(n,e),t)}function GL(n,t){let e,r,i,s,a,o=ug(n[0],t);for(e=0,r=n.length;e<r;++e)a=s,s=o,o=e<r-1&&ug(n[e+1],t),s&&(i=n[e],a&&(i.cp1x=Op(i.cp1x,t.left,t.right),i.cp1y=Op(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Op(i.cp2x,t.left,t.right),i.cp2y=Op(i.cp2y,t.top,t.bottom)))}function WL(n,t,e,r,i){let s,a,o,l;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")HL(n,i);else{let h=r?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],l=UL(h,o,n[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,h=o}t.capBezierPoints&&GL(n,e)}function Xw(){return typeof window<"u"&&typeof document<"u"}function Kw(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function j1(n,t,e){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=n,r}const Dm=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function qL(n,t){return Dm(n).getPropertyValue(t)}const YL=["top","right","bottom","left"];function ll(n,t,e){const r={};e=e?"-"+e:"";for(let i=0;i<4;i++){const s=YL[i];r[s]=parseFloat(n[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const XL=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function KL(n,t){const e=n.touches,r=e&&e.length?e[0]:n,{offsetX:i,offsetY:s}=r;let a=!1,o,l;if(XL(i,s,n.target))o=i,l=s;else{const h=t.getBoundingClientRect();o=r.clientX-h.left,l=r.clientY-h.top,a=!0}return{x:o,y:l,box:a}}function Gc(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:r}=t,i=Dm(e),s=i.boxSizing==="border-box",a=ll(i,"padding"),o=ll(i,"border","width"),{x:l,y:h,box:d}=KL(n,e),g=a.left+(d&&o.left),m=a.top+(d&&o.top);let{width:v,height:x}=t;return s&&(v-=a.width+o.width,x-=a.height+o.height),{x:Math.round((l-g)/v*e.width/r),y:Math.round((h-m)/x*e.height/r)}}function $L(n,t,e){let r,i;if(t===void 0||e===void 0){const s=n&&Kw(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const a=s.getBoundingClientRect(),o=Dm(s),l=ll(o,"border","width"),h=ll(o,"padding");t=a.width-h.width-l.width,e=a.height-h.height-l.height,r=j1(o.maxWidth,s,"clientWidth"),i=j1(o.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||B1,maxHeight:i||B1}}const Mp=n=>Math.round(n*10)/10;function QL(n,t,e,r){const i=Dm(n),s=ll(i,"margin"),a=j1(i.maxWidth,n,"clientWidth")||B1,o=j1(i.maxHeight,n,"clientHeight")||B1,l=$L(n,t,e);let{width:h,height:d}=l;if(i.boxSizing==="content-box"){const m=ll(i,"border","width"),v=ll(i,"padding");h-=v.width+m.width,d-=v.height+m.height}return h=Math.max(0,h-s.width),d=Math.max(0,r?h/r:d-s.height),h=Mp(Math.min(h,a,l.maxWidth)),d=Mp(Math.min(d,o,l.maxHeight)),h&&!d&&(d=Mp(h/2)),(t!==void 0||e!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,h=Mp(Math.floor(d*r))),{width:h,height:d}}function KC(n,t,e){const r=t||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(n.currentDevicePixelRatio=r,a.height=i,a.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const ZL=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Xw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function $C(n,t){const e=qL(n,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Wc(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function JL(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:r==="middle"?e<.5?n.y:t.y:r==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function tV(n,t,e,r){const i={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},a=Wc(n,i,e),o=Wc(i,s,e),l=Wc(s,t,e),h=Wc(a,o,e),d=Wc(o,l,e);return Wc(h,d,e)}const eV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},nV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function ih(n,t,e){return n?eV(t,e):nV()}function K4(n,t){let e,r;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=r)}function $4(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Q4(n){return n==="angle"?{between:lg,compare:eL,normalize:$i}:{between:Ro,compare:(t,e)=>t-e,normalize:t=>t}}function QC({start:n,end:t,count:e,loop:r,style:i}){return{start:n%e,end:t%e,loop:r&&(t-n+1)%e===0,style:i}}function rV(n,t,e){const{property:r,start:i,end:s}=e,{between:a,normalize:o}=Q4(r),l=t.length;let{start:h,end:d,loop:g}=n,m,v;if(g){for(h+=l,d+=l,m=0,v=l;m<v&&a(o(t[h%l][r]),i,s);++m)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:g,style:n.style}}function iV(n,t,e){if(!e)return[n];const{property:r,start:i,end:s}=e,a=t.length,{compare:o,between:l,normalize:h}=Q4(r),{start:d,end:g,loop:m,style:v}=rV(n,t,e),x=[];let b=!1,E=null,T,S,R;const P=()=>l(i,R,T)&&o(i,R)!==0,M=()=>o(s,T)===0||l(s,R,T),H=()=>b||P(),O=()=>!b||M();for(let C=d,N=d;C<=g;++C)S=t[C%a],!S.skip&&(T=h(S[r]),T!==R&&(b=l(T,i,s),E===null&&H()&&(E=o(T,i)===0?C:N),E!==null&&O()&&(x.push(QC({start:E,end:C,loop:m,count:a,style:v})),E=null),N=C,R=T));return E!==null&&x.push(QC({start:E,end:g,loop:m,count:a,style:v})),x}function sV(n,t){const e=[],r=n.segments;for(let i=0;i<r.length;i++){const s=iV(r[i],n.points,t);s.length&&e.push(...s)}return e}function aV(n,t,e,r){let i=0,s=t-1;if(e&&!r)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&n[s%t].skip;)s--;return s%=t,{start:i,end:s}}function oV(n,t,e,r){const i=n.length,s=[];let a=t,o=n[t],l;for(l=t+1;l<=e;++l){const h=n[l%i];h.skip||h.stop?o.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=a=h.stop?l:null):(a=l,o.skip&&(t=l)),o=h}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function cV(n,t){const e=n.points,r=n.options.spanGaps,i=e.length;if(!i)return[];const s=!!n._loop,{start:a,end:o}=aV(e,i,s,r);if(r===!0)return ZC(n,[{start:a,end:o,loop:s}],e,t);const l=o<a?o+i:o,h=!!n._fullLoop&&a===0&&o===i-1;return ZC(n,oV(e,a,l,h),e,t)}function ZC(n,t,e,r){return!r||!r.setContext||!e?t:lV(n,t,e,r)}function lV(n,t,e,r){const i=n._chart.getContext(),s=JC(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=e.length,h=[];let d=s,g=t[0].start,m=g;function v(x,b,E,T){const S=o?-1:1;if(x!==b){for(x+=l;e[x%l].skip;)x-=S;for(;e[b%l].skip;)b+=S;x%l!==b%l&&(h.push({start:x%l,end:b%l,loop:E,style:T}),d=T,g=b%l)}}for(const x of t){g=o?g:x.start;let b=e[g%l],E;for(m=g+1;m<=x.end;m++){const T=e[m%l];E=JC(r.setContext(Ol(i,{type:"segment",p0:b,p1:T,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:a}))),uV(E,d)&&v(g,m-1,x.loop,d),b=T,d=E}g<m-1&&v(g,m-1,x.loop,d)}return h}function JC(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function uV(n,t){if(!t)return!1;const e=[],r=function(i,s){return Uw(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(t,r)}function Np(n,t,e){return n.options.clip?n[e]:t[e]}function hV(n,t){const{xScale:e,yScale:r}=n;return e&&r?{left:Np(e,t,"left"),right:Np(e,t,"right"),top:Np(r,t,"top"),bottom:Np(r,t,"bottom")}:t}function fV(n,t){const e=t._clip;if(e.disabled)return!1;const r=hV(t,n.chartArea);return{left:e.left===!1?0:r.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:r.right+(e.right===!0?0:e.right),top:e.top===!1?0:r.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:r.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){const s=e.listeners[i],a=e.duration;s.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(r-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=B4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var wa=new dV;const tI="transparent",gV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const r=HC(n||tI),i=r.valid&&HC(t||tI);return i&&i.valid?i.mix(r,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class pV{constructor(t,e,r,i){const s=e[r];i=Dp([t.to,i,s,t.from]);const a=Dp([t.from,s,i]);this._active=!0,this._fn=t.fn||gV[t.type||typeof a],this._easing=Fd[t.easing]||Fd.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Dp([t.to,e,i,t.from]),this._from=Dp([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||e<r),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=s;return}l=e/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}}class Z4{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!me(t))return;const e=Object.keys(Tn.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!me(s))return;const a={};for(const o of e)a[o]=s[o];(sr(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,a)})})}_animateOptions(t,e){const r=e.options,i=yV(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&mV(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const h=a[l];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(t,e));continue}const d=e[h];let g=s[h];const m=r.get(h);if(g)if(m&&g.active()){g.update(m,d,o);continue}else g.cancel();if(!m||!m.duration){t[h]=d;continue}s[h]=g=new pV(m,t,h,d),i.push(g)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const r=this._createAnimations(t,e);if(r.length)return wa.add(this._chart,r),!0}}function mV(n,t){const e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function yV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function eI(n,t){const e=n&&n.options||{},r=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function vV(n,t,e){if(e===!1)return!1;const r=eI(n,e),i=eI(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function _V(n){let t,e,r,i;return me(n)?(t=n.top,e=n.right,r=n.bottom,i=n.left):t=e=r=i=n,{top:t,right:e,bottom:r,left:i,disabled:n===!1}}function J4(n,t){const e=[],r=n._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)e.push(r[i].index);return e}function nI(n,t,e,r={}){const i=n.keys,s=r.mode==="single";let a,o,l,h;if(t===null)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===e){if(d=!0,r.all)continue;break}h=n.values[l],Bi(h)&&(s||t===0||Ps(t)===Ps(h))&&(t+=h)}return!d&&!r.all?0:t}function xV(n,t){const{iScale:e,vScale:r}=t,i=e.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,h,d;for(l=0,h=a.length;l<h;++l)d=a[l],o[l]={[i]:d,[s]:n[d]};return o}function C_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function wV(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function bV(n){const{min:t,max:e,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function EV(n,t,e){const r=n[t]||(n[t]={});return r[e]||(r[e]={})}function rI(n,t,e,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function iI(n,t){const{chart:e,_cachedMeta:r}=n,i=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,h=a.axis,d=wV(s,a,r),g=t.length;let m;for(let v=0;v<g;++v){const x=t[v],{[l]:b,[h]:E}=x,T=x._stacks||(x._stacks={});m=T[h]=EV(i,d,b),m[o]=E,m._top=rI(m,a,!0,r.type),m._bottom=rI(m,a,!1,r.type);const S=m._visualValues||(m._visualValues={});S[o]=E}}function I_(n,t){const e=n.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function AV(n,t){return Ol(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function TV(n,t,e){return Ol(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ed(n,t){const e=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){t=t||n._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e],s[r]._visualValues!==void 0&&s[r]._visualValues[e]!==void 0&&delete s[r]._visualValues[e]}}}const R_=n=>n==="reset"||n==="none",sI=(n,t)=>t?n:Object.assign({},n),SV=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:J4(e,!0),values:null};class ul{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=C_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ed(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),i=(g,m,v,x)=>g==="x"?m:g==="r"?x:v,s=e.xAxisID=ne(r.xAxisID,I_(t,"x")),a=e.yAxisID=ne(r.yAxisID,I_(t,"y")),o=e.rAxisID=ne(r.rAxisID,I_(t,"r")),l=e.indexAxis,h=e.iAxisID=i(l,s,a,o),d=e.vAxisID=i(l,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&UC(this._data,this),t._stacked&&ed(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(me(e)){const i=this._cachedMeta;this._data=xV(e,i)}else if(r!==e){if(r){UC(r,this);const i=this._cachedMeta;ed(i),i._parsed=[]}e&&Object.isExtensible(e)&&sL(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=C_(e.vScale,e),e.stack!==r.stack&&(i=!0,ed(e),e.stack=r.stack),this._resyncElements(t),(i||s!==e._stacked)&&(iI(this,e._parsed),e._stacked=C_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,o=s.axis;let l=t===0&&e===i.length?!0:r._sorted,h=t>0&&r._parsed[t-1],d,g,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{sr(i[t])?m=this.parseArrayData(r,i,t,e):me(i[t])?m=this.parseObjectData(r,i,t,e):m=this.parsePrimitiveData(r,i,t,e);const v=()=>g[o]===null||h&&g[o]<h[o];for(d=0;d<e;++d)r._parsed[d+t]=g=m[d],l&&(v()&&(l=!1),h=g);r._sorted=l}a&&iI(this,m)}parsePrimitiveData(t,e,r,i){const{iScale:s,vScale:a}=t,o=s.axis,l=a.axis,h=s.getLabels(),d=s===a,g=new Array(i);let m,v,x;for(m=0,v=i;m<v;++m)x=m+r,g[m]={[o]:d||s.parse(h[x],x),[l]:a.parse(e[x],x)};return g}parseArrayData(t,e,r,i){const{xScale:s,yScale:a}=t,o=new Array(i);let l,h,d,g;for(l=0,h=i;l<h;++l)d=l+r,g=e[d],o[l]={x:s.parse(g[0],d),y:a.parse(g[1],d)};return o}parseObjectData(t,e,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=new Array(i);let d,g,m,v;for(d=0,g=i;d<g;++d)m=d+r,v=e[m],h[d]={x:s.parse(vl(v,o),m),y:a.parse(vl(v,l),m)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const i=this.chart,s=this._cachedMeta,a=e[t.axis],o={keys:J4(i,!0),values:e._stacks[t.axis]._visualValues};return nI(o,a,s.index,{mode:r})}updateRangeFromParsed(t,e,r,i){const s=r[e.axis];let a=s===null?NaN:s;const o=i&&r._stacks[e.axis];i&&o&&(i.values=o,a=nI(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,o=this._getOtherScale(t),l=SV(e,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:g}=bV(o);let m,v;function x(){v=i[m];const b=v[o.axis];return!Bi(v[t.axis])||d>b||g<b}for(m=0;m<a&&!(!x()&&(this.updateRangeFromParsed(h,t,v,l),s));++m);if(s){for(m=a-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(h,t,v,l);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=e.length;i<s;++i)a=e[i][t.axis],Bi(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=_V(ne(this.options.clip,vV(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,i=r.data||[],s=e.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,h=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,s,o,l),d=o;d<o+l;++d){const g=i[d];g.hidden||(g.active&&h?a.push(g):g.draw(t,s))}for(d=0;d<a.length;++d)a[d].draw(t,s)}getStyle(t,e){const r=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=TV(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=AV(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const i=e==="active",s=this._cachedDataOpts,a=t+"-"+e,o=s[a],l=this.enableOptionSharing&&og(r);if(o)return sI(o,l);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),g=i?[`${t}Hover`,"hover",t,""]:[t,""],m=h.getOptionScopes(this.getDataset(),d),v=Object.keys(Tn.elements[t]),x=()=>this.getContext(r,i,e),b=h.resolveNamedOptions(m,v,x,g);return b.$shared&&(b.$shared=l,s[a]=Object.freeze(sI(b,l))),b}_resolveAnimations(t,e,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){const d=this.chart.config,g=d.datasetAnimationScopeKeys(this._type,e),m=d.getOptionScopes(this.getDataset(),g);l=d.createResolver(m,this.getContext(t,r,e))}const h=new Z4(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||R_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const r=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,r),{sharedOptions:s,includeOptions:a}}updateElement(t,e,r,i){R_(i)?Object.assign(t,r):this._resolveAnimations(e,i).update(t,r)}updateSharedOptions(t,e,r){t&&!R_(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[o,l,h]of this._syncList)this[o](l,h);this._syncList=[];const i=r.length,s=e.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,r=!0){const i=this._cachedMeta,s=i.data,a=t+e;let o;const l=h=>{for(h.length+=e,o=h.length-1;o>=a;o--)h[o]=h[o-e]};for(l(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),r&&this.updateElements(s,t,e,"reset")}updateElements(t,e,r,i){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,e);r._stacked&&ed(r,i)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,i]=t;this[e](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}lt(ul,"defaults",{}),lt(ul,"datasetElementType",null),lt(ul,"dataElementType",null);function CV(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=e.length;i<s;i++)r=r.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=V4(r.sort((i,s)=>i-s))}return n._cache.$bar}function IV(n){const t=n.iScale,e=CV(t,n.type);let r=t._length,i,s,a,o;const l=()=>{a===32767||a===-32768||(og(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(i=0,s=e.length;i<s;++i)a=t.getPixelForValue(e[i]),l();for(o=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),l();return r}function RV(n,t,e,r){const i=e.barThickness;let s,a;return Ce(i)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[n]-s/2}}function DV(n,t,e,r){const i=t.pixels,s=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;a===null&&(a=s-(o===null?t.end-t.start:o-s)),o===null&&(o=s+s-a);const h=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:e.barPercentage,start:h}}function OV(n,t,e,r){const i=e.parse(n[0],r),s=e.parse(n[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,h=o;Math.abs(a)>Math.abs(o)&&(l=o,h=a),t[e.axis]=h,t._custom={barStart:l,barEnd:h,start:i,end:s,min:a,max:o}}function tM(n,t,e,r){return sr(n)?OV(n,t,e,r):t[e.axis]=e.parse(n,r),t}function aI(n,t,e,r){const i=n.iScale,s=n.vScale,a=i.getLabels(),o=i===s,l=[];let h,d,g,m;for(h=e,d=e+r;h<d;++h)m=t[h],g={},g[i.axis]=o||i.parse(a[h],h),l.push(tM(m,g,s,h));return l}function D_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function MV(n,t,e){return n!==0?Ps(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function NV(n){let t,e,r,i,s;return n.horizontal?(t=n.base>n.x,e="left",r="right"):(t=n.base<n.y,e="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:r,reverse:t,top:i,bottom:s}}function PV(n,t,e,r){let i=t.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:h,bottom:d}=NV(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===r?i=h:(e._bottom||0)===r?i=d:(s[oI(d,a,o,l)]=!0,i=h)),s[oI(i,a,o,l)]=!0,n.borderSkipped=s}function oI(n,t,e,r){return r?(n=kV(n,t,e),n=cI(n,e,t)):n=cI(n,t,e),n}function kV(n,t,e){return n===t?e:n===e?t:n}function cI(n,t,e){return n==="start"?t:n==="end"?e:n}function LV(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class o1 extends ul{parsePrimitiveData(t,e,r,i){return aI(t,e,r,i)}parseArrayData(t,e,r,i){return aI(t,e,r,i)}parseObjectData(t,e,r,i){const{iScale:s,vScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=s.axis==="x"?o:l,d=a.axis==="x"?o:l,g=[];let m,v,x,b;for(m=r,v=r+i;m<v;++m)b=e[m],x={},x[s.axis]=s.parse(vl(b,h),m),g.push(tM(vl(b,d),x,a,m));return g}updateRangeFromParsed(t,e,r,i){super.updateRangeFromParsed(t,e,r,i);const s=r._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:i}=e,s=this.getParsed(t),a=s._custom,o=D_(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),h=o.isHorizontal(),d=this._getRuler(),{sharedOptions:g,includeOptions:m}=this._getSharedOptions(e,i);for(let v=e;v<e+r;v++){const x=this.getParsed(v),b=s||Ce(x[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),E=this._calculateBarIndexPixels(v,d),T=(x._stacks||{})[o.axis],S={horizontal:h,base:b.base,enableBorderRadius:!T||D_(x._custom)||a===T._top||a===T._bottom,x:h?b.head:E.center,y:h?E.center:b.head,height:h?E.size:Math.abs(b.size),width:h?Math.abs(b.size):E.size};m&&(S.options=g||this.resolveDataElementOptions(v,t[v].active?"active":i));const R=S.options||t[v].options;PV(S,R,T,a),LV(S,R,d.ratio),this.updateElement(t[v],v,S,i)}}_getStacks(t,e){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),l=o&&o[r.axis],h=d=>{const g=d._parsed.find(v=>v[r.axis]===l),m=g&&g[d.vScale.axis];if(Ce(m)||isNaN(m))return!0};for(const d of i)if(!(e!==void 0&&h(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[ne(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,r){const i=this._getStacks(t,r),s=e!==void 0?i.indexOf(e):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,i=[];let s,a;for(s=0,a=e.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const o=t.barThickness;return{min:o||IV(e),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(t),h=l._custom,d=D_(h);let g=l[e.axis],m=0,v=r?this.applyStack(e,l,r):g,x,b;v!==g&&(m=v-g,v=g),d&&(g=h.barStart,v=h.barEnd-h.barStart,g!==0&&Ps(g)!==Ps(h.barEnd)&&(m=0),m+=g);const E=!Ce(s)&&!d?s:m;let T=e.getPixelForValue(E);if(this.chart.getDataVisibility(t)?x=e.getPixelForValue(m+v):x=T,b=x-T,Math.abs(b)<a){b=MV(b,e,o)*a,g===o&&(T-=b/2);const S=e.getPixelForDecimal(0),R=e.getPixelForDecimal(1),P=Math.min(S,R),M=Math.max(S,R);T=Math.max(Math.min(T,M),P),x=T+b,r&&!d&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(x)-e.getValueForPixel(T))}if(T===e.getPixelForValue(o)){const S=Ps(b)*e.getLineWidthForValue(o)/2;T+=S,b-=S}return{size:b,base:T,head:x,center:x+b/2}}_calculateBarIndexPixels(t,e){const r=e.scale,i=this.options,s=i.skipNull,a=ne(i.maxBarThickness,1/0);let o,l;const h=this._getAxisCount();if(e.grouped){const d=s?this._getStackCount(t):e.stackCount,g=i.barThickness==="flex"?DV(t,e,i,d*h):RV(t,e,i,d*h),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(ne(m,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+v;o=g.start+g.chunk*x+g.chunk/2,l=Math.min(a,g.chunk*g.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,e.min*e.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[e.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}lt(o1,"id","bar"),lt(o1,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),lt(o1,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function VV(n,t,e){let r=1,i=1,s=0,a=0;if(t<pn){const o=n,l=o+t,h=Math.cos(o),d=Math.sin(o),g=Math.cos(l),m=Math.sin(l),v=(R,P,M)=>lg(R,o,l,!0)?1:Math.max(P,P*e,M,M*e),x=(R,P,M)=>lg(R,o,l,!0)?-1:Math.min(P,P*e,M,M*e),b=v(0,h,g),E=v(Yn,d,m),T=x(Ge,h,g),S=x(Ge+Yn,d,m);r=(b-T)/2,i=(E-S)/2,s=-(b+T)/2,a=-(E+S)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class xd extends ul{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(me(r[t])){const{key:l="value"}=this._parsing;s=h=>+vl(r[h],l)}let a,o;for(a=t,o=t+e;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return Aa(this.options.rotation-90)}_getCircumference(){return Aa(this.options.circumference)}_getRotationExtents(){let t=pn,e=-pn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(z7(this.options.cutout,o),1),h=this._getRingWeight(this.index),{circumference:d,rotation:g}=this._getRotationExtents(),{ratioX:m,ratioY:v,offsetX:x,offsetY:b}=VV(g,d,l),E=(r.width-a)/m,T=(r.height-a)/v,S=Math.max(Math.min(E,T)/2,0),R=M4(this.options.radius,S),P=Math.max(R*l,0),M=(R-P)/this._getVisibleDatasetWeightTotal();this.offsetX=x*R,this.offsetY=b*R,i.total=this.calculateTotal(),this.outerRadius=R-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*h,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/pn)}updateElements(t,e,r,i){const s=i==="reset",a=this.chart,o=a.chartArea,h=a.options.animation,d=(o.left+o.right)/2,g=(o.top+o.bottom)/2,m=s&&h.animateScale,v=m?0:this.innerRadius,x=m?0:this.outerRadius,{sharedOptions:b,includeOptions:E}=this._getSharedOptions(e,i);let T=this._getRotation(),S;for(S=0;S<e;++S)T+=this._circumference(S,s);for(S=e;S<e+r;++S){const R=this._circumference(S,s),P=t[S],M={x:d+this.offsetX,y:g+this.offsetY,startAngle:T,endAngle:T+R,circumference:R,outerRadius:x,innerRadius:v};E&&(M.options=b||this.resolveDataElementOptions(S,P.active?"active":i)),T+=R,this.updateElement(P,S,M,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let r=0,i;for(i=0;i<e.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?pn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=jw(e._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const r=this.chart;let i,s,a,o,l;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),t=a.data,o=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)l=o.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(ne(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}lt(xd,"id","doughnut"),lt(xd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),lt(xd,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),lt(xd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return e.labels.map((s,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}});class c1 extends ul{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=e,a=this.chart._animationsDisabled;let{start:o,count:l}=cL(e,i,a);this._drawStart=o,this._drawCount=l,lL(e)&&(o=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:h},t),this.updateElements(i,o,l,t)}updateElements(t,e,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(e,i),m=a.axis,v=o.axis,{spanGaps:x,segment:b}=this.options,E=cg(x)?x:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||i==="none",S=e+r,R=t.length;let P=e>0&&this.getParsed(e-1);for(let M=0;M<R;++M){const H=t[M],O=T?H:{};if(M<e||M>=S){O.skip=!0;continue}const C=this.getParsed(M),N=Ce(C[v]),B=O[m]=a.getPixelForValue(C[m],M),z=O[v]=s||N?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,C,l):C[v],M);O.skip=isNaN(B)||isNaN(z)||N,O.stop=M>0&&Math.abs(C[m]-P[m])>E,b&&(O.parsed=C,O.raw=h.data[M]),g&&(O.options=d||this.resolveDataElementOptions(M,H.active?"active":i)),T||this.updateElement(H,M,O,i),P=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}lt(c1,"id","line"),lt(c1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),lt(c1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Fc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $w{constructor(t){lt(this,"options");this.options=t||{}}static override(t){Object.assign($w.prototype,t)}init(){}formats(){return Fc()}parse(){return Fc()}format(){return Fc()}add(){return Fc()}diff(){return Fc()}startOf(){return Fc()}endOf(){return Fc()}}var eM={_date:$w};function BV(n,t,e,r){const{controller:i,data:s,_sorted:a}=n,o=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const h=o._reversePixels?rL:rl;if(r){if(i._sharedOptions){const d=s[0],g=typeof d.getRange=="function"&&d.getRange(t);if(g){const m=h(s,t,e-g),v=h(s,t,e+g);return{lo:m.lo,hi:v.hi}}}}else{const d=h(s,t,e);if(l){const{vScale:g}=i._cachedMeta,{_parsed:m}=n,v=m.slice(0,d.lo+1).reverse().findIndex(b=>!Ce(b[g.axis]));d.lo-=Math.max(0,v);const x=m.slice(d.hi).findIndex(b=>!Ce(b[g.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:s.length-1}}function Om(n,t,e,r,i){const s=n.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,l=s.length;o<l;++o){const{index:h,data:d}=s[o],{lo:g,hi:m}=BV(s[o],t,a,i);for(let v=g;v<=m;++v){const x=d[v];x.skip||r(x,h,v)}}}function FV(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function O_(n,t,e,r,i){const s=[];return!i&&!n.isPointInArea(t)||Om(n,e,t,function(o,l,h){!i&&!ug(o,n.chartArea,0)||o.inRange(t.x,t.y,r)&&s.push({element:o,datasetIndex:l,index:h})},!0),s}function UV(n,t,e,r){let i=[];function s(a,o,l){const{startAngle:h,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:g}=k4(a,{x:t.x,y:t.y});lg(g,h,d)&&i.push({element:a,datasetIndex:o,index:l})}return Om(n,e,t,s),i}function jV(n,t,e,r,i,s){let a=[];const o=FV(e);let l=Number.POSITIVE_INFINITY;function h(d,g,m){const v=d.inRange(t.x,t.y,i);if(r&&!v)return;const x=d.getCenterPoint(i);if(!(!!s||n.isPointInArea(x))&&!v)return;const E=o(t,x);E<l?(a=[{element:d,datasetIndex:g,index:m}],l=E):E===l&&a.push({element:d,datasetIndex:g,index:m})}return Om(n,e,t,h),a}function M_(n,t,e,r,i,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!r?UV(n,t,e,i):jV(n,t,e,r,i,s)}function lI(n,t,e,r,i){const s=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return Om(n,e,t,(l,h,d)=>{l[a]&&l[a](t[e],i)&&(s.push({element:l,datasetIndex:h,index:d}),o=o||l.inRange(t.x,t.y,i))}),r&&!o?[]:s}var zV={modes:{index(n,t,e,r){const i=Gc(t,n),s=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?O_(n,i,s,r,a):M_(n,i,s,!1,r,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const d=o[0].index,g=h.data[d];g&&!g.skip&&l.push({element:g,datasetIndex:h.index,index:d})}),l):[]},dataset(n,t,e,r){const i=Gc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?O_(n,i,s,r,a):M_(n,i,s,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,h=n.getDatasetMeta(l).data;o=[];for(let d=0;d<h.length;++d)o.push({element:h[d],datasetIndex:l,index:d})}return o},point(n,t,e,r){const i=Gc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return O_(n,i,s,r,a)},nearest(n,t,e,r){const i=Gc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return M_(n,i,s,e.intersect,r,a)},x(n,t,e,r){const i=Gc(t,n);return lI(n,i,"x",e.intersect,r)},y(n,t,e,r){const i=Gc(t,n);return lI(n,i,"y",e.intersect,r)}}};const nM=["left","top","right","bottom"];function nd(n,t){return n.filter(e=>e.pos===t)}function uI(n,t){return n.filter(e=>nM.indexOf(e.pos)===-1&&e.box.axis===t)}function rd(n,t){return n.sort((e,r)=>{const i=t?r:e,s=t?e:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function HV(n){const t=[];let e,r,i,s,a,o;for(e=0,r=(n||[]).length;e<r;++e)i=n[e],{position:s,options:{stack:a,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}function GV(n){const t={};for(const e of n){const{stack:r,pos:i,stackWeight:s}=e;if(!r||!nM.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function WV(n,t){const e=GV(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,h=e[o.stack],d=h&&o.stackWeight/h.weight;o.horizontal?(o.width=d?d*r:l&&t.availableWidth,o.height=i):(o.width=r,o.height=d?d*i:l&&t.availableHeight)}return e}function qV(n){const t=HV(n),e=rd(t.filter(h=>h.box.fullSize),!0),r=rd(nd(t,"left"),!0),i=rd(nd(t,"right")),s=rd(nd(t,"top"),!0),a=rd(nd(t,"bottom")),o=uI(t,"x"),l=uI(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:nd(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function hI(n,t,e,r){return Math.max(n[e],t[e])+Math.max(n[r],t[r])}function rM(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function YV(n,t,e,r){const{pos:i,box:s}=e,a=n.maxPadding;if(!me(i)){e.size&&(n[i]-=e.size);const g=r[e.stack]||{size:0,count:1};g.size=Math.max(g.size,e.horizontal?s.height:s.width),e.size=g.size/g.count,n[i]+=e.size}s.getPadding&&rM(a,s.getPadding());const o=Math.max(0,t.outerWidth-hI(a,n,"left","right")),l=Math.max(0,t.outerHeight-hI(a,n,"top","bottom")),h=o!==n.w,d=l!==n.h;return n.w=o,n.h=l,e.horizontal?{same:h,other:d}:{same:d,other:h}}function XV(n){const t=n.maxPadding;function e(r){const i=Math.max(t[r]-n[r],0);return n[r]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function KV(n,t){const e=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return r(n?["left","right"]:["top","bottom"])}function wd(n,t,e,r){const i=[];let s,a,o,l,h,d;for(s=0,a=n.length,h=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||t.w,o.height||t.h,KV(o.horizontal,t));const{same:g,other:m}=YV(t,e,o,r);h|=g&&i.length,d=d||m,l.fullSize||i.push(o)}return h&&wd(i,t,e,r)||d}function Pp(n,t,e,r,i){n.top=e,n.left=t,n.right=t+r,n.bottom=e+i,n.width=r,n.height=i}function fI(n,t,e,r){const i=e.padding;let{x:s,y:a}=t;for(const o of n){const l=o.box,h=r[o.stack]||{placed:0,weight:1},d=o.stackWeight/h.weight||1;if(o.horizontal){const g=t.w*d,m=h.size||l.height;og(h.start)&&(a=h.start),l.fullSize?Pp(l,i.left,a,e.outerWidth-i.right-i.left,m):Pp(l,t.left+h.placed,a,g,m),h.start=a,h.placed+=g,a=l.bottom}else{const g=t.h*d,m=h.size||l.width;og(h.start)&&(s=h.start),l.fullSize?Pp(l,s,i.top,m,e.outerHeight-i.bottom-i.top):Pp(l,s,t.top+h.placed,m,g),h.start=s,h.placed+=g,s=l.right}}t.x=s,t.y=a}var Do={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,r){if(!n)return;const i=es(n.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(e-i.height,0),o=qV(n.boxes),l=o.vertical,h=o.horizontal;Pe(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=l.reduce((b,E)=>E.box.options&&E.box.options.display===!1?b:b+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),m=Object.assign({},i);rM(m,es(r));const v=Object.assign({maxPadding:m,w:s,h:a,x:i.left,y:i.top},i),x=WV(l.concat(h),g);wd(o.fullSize,v,g,x),wd(l,v,g,x),wd(h,v,g,x)&&wd(l,v,g,x),XV(v),fI(o.leftAndTop,v,g,x),v.x+=v.w,v.y+=v.h,fI(o.rightAndBottom,v,g,x),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Pe(o.chartArea,b=>{const E=b.box;Object.assign(E,n.chartArea),E.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class iM{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}}class $V extends iM{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const l1="$chartjs",QV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},dI=n=>n===null||n==="";function ZV(n,t){const e=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[l1]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",dI(i)){const s=$C(n,"width");s!==void 0&&(n.width=s)}if(dI(r))if(n.style.height==="")n.height=n.width/(t||2);else{const s=$C(n,"height");s!==void 0&&(n.height=s)}return n}const sM=ZL?{passive:!0}:!1;function JV(n,t,e){n&&n.addEventListener(t,e,sM)}function tB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,sM)}function eB(n,t){const e=QV[n.type]||n.type,{x:r,y:i}=Gc(n,t);return{type:e,chart:t,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function z1(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function nB(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||z1(o.addedNodes,r),a=a&&!z1(o.removedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function rB(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||z1(o.removedNodes,r),a=a&&!z1(o.addedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const hg=new Map;let gI=0;function aM(){const n=window.devicePixelRatio;n!==gI&&(gI=n,hg.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function iB(n,t){hg.size||window.addEventListener("resize",aM),hg.set(n,t)}function sB(n){hg.delete(n),hg.size||window.removeEventListener("resize",aM)}function aB(n,t,e){const r=n.canvas,i=r&&Kw(r);if(!i)return;const s=F4((o,l)=>{const h=i.clientWidth;e(o,l),h<i.clientWidth&&e()},window),a=new ResizeObserver(o=>{const l=o[0],h=l.contentRect.width,d=l.contentRect.height;h===0&&d===0||s(h,d)});return a.observe(i),iB(n,s),a}function N_(n,t,e){e&&e.disconnect(),t==="resize"&&sB(n)}function oB(n,t,e){const r=n.canvas,i=F4(s=>{n.ctx!==null&&e(eB(s,n))},n);return JV(r,t,i),i}class cB extends iM{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(ZV(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[l1])return!1;const r=e[l1].initial;["height","width"].forEach(s=>{const a=r[s];Ce(a)?e.removeAttribute(s):e.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[l1],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),a={attach:nB,detach:rB,resize:aB}[e]||oB;i[e]=a(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:N_,detach:N_,resize:N_}[e]||tB)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return QL(t,e,r,i)}isAttached(t){const e=t&&Kw(t);return!!(e&&e.isConnected)}}function lB(n){return!Xw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?$V:cB}var a1;let $o=(a1=class{constructor(){lt(this,"x");lt(this,"y");lt(this,"active",!1);lt(this,"options");lt(this,"$animations")}tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return cg(this.x)&&cg(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},lt(a1,"defaults",{}),lt(a1,"defaultRoutes"),a1);function uB(n,t){const e=n.options.ticks,r=hB(n),i=Math.min(e.maxTicksLimit||r,r),s=e.major.enabled?dB(t):[],a=s.length,o=s[0],l=s[a-1],h=[];if(a>i)return gB(t,h,s,a/i),h;const d=fB(s,t,i);if(a>0){let g,m;const v=a>1?Math.round((l-o)/(a-1)):null;for(kp(t,h,d,Ce(v)?0:o-v,o),g=0,m=a-1;g<m;g++)kp(t,h,d,s[g],s[g+1]);return kp(t,h,d,l,Ce(v)?t.length:l+v),h}return kp(t,h,d),h}function hB(n){const t=n.options.offset,e=n._tickSize(),r=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(r,i))}function fB(n,t,e){const r=pB(n),i=t.length/e;if(!r)return Math.max(i,1);const s=$7(r);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>i)return l}return Math.max(i,1)}function dB(n){const t=[];let e,r;for(e=0,r=n.length;e<r;e++)n[e].major&&t.push(e);return t}function gB(n,t,e,r){let i=0,s=e[0],a;for(r=Math.ceil(r),a=0;a<n.length;a++)a===s&&(t.push(n[a]),i++,s=e[i*r])}function kp(n,t,e,r,i){const s=ne(r,0),a=Math.min(ne(i,n.length),n.length);let o=0,l,h,d;for(e=Math.ceil(e),i&&(l=i-r,e=l/Math.floor(l/e)),d=s;d<0;)o++,d=Math.round(s+o*e);for(h=Math.max(s,0);h<a;h++)h===d&&(t.push(n[h]),o++,d=Math.round(s+o*e))}function pB(n){const t=n.length;let e,r;if(t<2)return!1;for(r=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==r)return!1;return r}const mB=n=>n==="left"?"right":n==="right"?"left":n,pI=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,mI=(n,t)=>Math.min(t||n,n);function yI(n,t){const e=[],r=n.length/t,i=n.length;let s=0;for(;s<i;s+=r)e.push(n[Math.floor(s)]);return e}function yB(n,t,e){const r=n.ticks.length,i=Math.min(t,r-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(i),h;if(!(e&&(r===1?h=Math.max(l-s,a-l):t===0?h=(n.getPixelForTick(1)-l)/2:h=(l-n.getPixelForTick(i-1))/2,l+=i<t?h:-h,l<s-o||l>a+o)))return l}function vB(n,t){Pe(n,e=>{const r=e.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[r[s]];r.splice(0,i)}})}function id(n){return n.drawTicks?n.tickLength:0}function vI(n,t){if(!n.display)return 0;const e=Xr(n.font,t),r=es(n.padding);return(sr(n.text)?n.text.length:1)*e.lineHeight+r.height}function _B(n,t){return Ol(n,{scale:t,type:"scale"})}function xB(n,t,e){return Ol(n,{tick:e,index:t,type:"tick"})}function wB(n,t,e){let r=U4(n);return(e&&t!=="right"||!e&&t==="right")&&(r=mB(r)),r}function bB(n,t,e,r){const{top:i,left:s,bottom:a,right:o,chart:l}=n,{chartArea:h,scales:d}=l;let g=0,m,v,x;const b=a-i,E=o-s;if(n.isHorizontal()){if(v=ci(r,s,o),me(e)){const T=Object.keys(e)[0],S=e[T];x=d[T].getPixelForValue(S)+b-t}else e==="center"?x=(h.bottom+h.top)/2+b-t:x=pI(n,e,t);m=o-s}else{if(me(e)){const T=Object.keys(e)[0],S=e[T];v=d[T].getPixelForValue(S)-E+t}else e==="center"?v=(h.left+h.right)/2-E+t:v=pI(n,e,t);x=ci(r,a,i),g=e==="left"?-Yn:Yn}return{titleX:v,titleY:x,maxWidth:m,rotation:g}}class kh extends $o{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=Es(t,Number.POSITIVE_INFINITY),e=Es(e,Number.NEGATIVE_INFINITY),r=Es(r,Number.POSITIVE_INFINITY),i=Es(i,Number.NEGATIVE_INFINITY),{min:Es(t,r),max:Es(e,i),minDefined:Bi(t),maxDefined:Bi(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:e,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,h=o.length;l<h;++l)a=o[l].controller.getMinMax(this,t),i||(e=Math.min(e,a.min)),s||(r=Math.max(r,a.max));return e=s&&e>r?r:e,r=i&&e>r?e:r,{min:Es(e,Es(r,e)),max:Es(r,Es(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qe(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=RL(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?yI(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=uB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qe(this.options.afterUpdate,[this])}beforeSetDimensions(){Qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Qe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=Qe(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){Qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=mI(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let a=i,o,l,h;if(!this._isVisible()||!e.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),g=d.widest.width,m=d.highest.height,v=Cr(this.chart.width-g,0,this.maxWidth);o=t.offset?this.maxWidth/r:v/(r-1),g+6>o&&(o=v/(r-(t.offset?.5:1)),l=this.maxHeight-id(t.grid)-e.padding-vI(t.title,this.chart.options.font),h=Math.sqrt(g*g+m*m),a=tL(Math.min(Math.asin(Cr((d.highest.height+6)/o,-1,1)),Math.asin(Cr(l/h,-1,1))-Math.asin(Cr(m/h,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=vI(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=id(s)+l):(t.height=this.maxHeight,t.width=id(s)+l),r.display&&this.ticks.length){const{first:h,last:d,widest:g,highest:m}=this._getLabelSizes(),v=r.padding*2,x=Aa(this.labelRotation),b=Math.cos(x),E=Math.sin(x);if(o){const T=r.mirror?0:E*g.width+b*m.height;t.height=Math.min(this.maxHeight,t.height+T+v)}else{const T=r.mirror?0:b*g.width+E*m.height;t.width=Math.min(this.maxWidth,t.width+T+v)}this._calculatePadding(h,d,E,b)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,h=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;l?h?(m=i*t.width,v=r*e.height):(m=r*t.height,v=i*e.width):s==="start"?v=e.width:s==="end"?m=t.width:s!=="inner"&&(m=t.width/2,v=e.width/2),this.paddingLeft=Math.max((m-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((v-g+a)*this.width/(this.width-g),0)}else{let d=e.height/2,g=t.height/2;s==="start"?(d=0,g=t.height):s==="end"&&(d=e.height,g=0),this.paddingTop=d+a,this.paddingBottom=g+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)Ce(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=yI(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(e/mI(e,r));let h=0,d=0,g,m,v,x,b,E,T,S,R,P,M;for(g=0;g<e;g+=l){if(x=t[g].label,b=this._resolveTickFontOptions(g),i.font=E=b.string,T=s[E]=s[E]||{data:{},gc:[]},S=b.lineHeight,R=P=0,!Ce(x)&&!sr(x))R=WC(i,T.data,T.gc,R,x),P=S;else if(sr(x))for(m=0,v=x.length;m<v;++m)M=x[m],!Ce(M)&&!sr(M)&&(R=WC(i,T.data,T.gc,R,M),P+=S);a.push(R),o.push(P),h=Math.max(R,h),d=Math.max(P,d)}vB(s,e);const H=a.indexOf(h),O=o.indexOf(d),C=N=>({width:a[N]||0,height:o[N]||0});return{first:C(0),last:C(e-1),widest:C(H),highest:C(O),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return nL(this._alignToPixels?Bc(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=xB(this.getContext(),t,r))}return this.$context||(this.$context=_B(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Aa(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,h=this.isHorizontal(),g=this.ticks.length+(l?1:0),m=id(s),v=[],x=o.setContext(this.getContext()),b=x.display?x.width:0,E=b/2,T=function(K){return Bc(r,K,b)};let S,R,P,M,H,O,C,N,B,z,G,F;if(a==="top")S=T(this.bottom),O=this.bottom-m,N=S-E,z=T(t.top)+E,F=t.bottom;else if(a==="bottom")S=T(this.top),z=t.top,F=T(t.bottom)-E,O=S+E,N=this.top+m;else if(a==="left")S=T(this.right),H=this.right-m,C=S-E,B=T(t.left)+E,G=t.right;else if(a==="right")S=T(this.left),B=t.left,G=T(t.right)-E,H=S+E,C=this.left+m;else if(e==="x"){if(a==="center")S=T((t.top+t.bottom)/2+.5);else if(me(a)){const K=Object.keys(a)[0],ot=a[K];S=T(this.chart.scales[K].getPixelForValue(ot))}z=t.top,F=t.bottom,O=S+E,N=O+m}else if(e==="y"){if(a==="center")S=T((t.left+t.right)/2);else if(me(a)){const K=Object.keys(a)[0],ot=a[K];S=T(this.chart.scales[K].getPixelForValue(ot))}H=S-E,C=H-m,B=t.left,G=t.right}const xt=ne(i.ticks.maxTicksLimit,g),wt=Math.max(1,Math.ceil(g/xt));for(R=0;R<g;R+=wt){const K=this.getContext(R),ot=s.setContext(K),vt=o.setContext(K),et=ot.lineWidth,V=ot.color,q=vt.dash||[],ct=vt.dashOffset,nt=ot.tickWidth,mt=ot.tickColor,St=ot.tickBorderDash||[],Tt=ot.tickBorderDashOffset;P=yB(this,R,l),P!==void 0&&(M=Bc(r,P,et),h?H=C=B=G=M:O=N=z=F=M,v.push({tx1:H,ty1:O,tx2:C,ty2:N,x1:B,y1:z,x2:G,y2:F,width:et,color:V,borderDash:q,borderDashOffset:ct,tickWidth:nt,tickColor:mt,tickBorderDash:St,tickBorderDashOffset:Tt}))}return this._ticksLength=g,this._borderValue=S,v}_computeLabelItems(t){const e=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:h,padding:d,mirror:g}=s,m=id(r.grid),v=m+d,x=g?-d:v,b=-Aa(this.labelRotation),E=[];let T,S,R,P,M,H,O,C,N,B,z,G,F="middle";if(i==="top")H=this.bottom-x,O=this._getXAxisLabelAlignment();else if(i==="bottom")H=this.top+x,O=this._getXAxisLabelAlignment();else if(i==="left"){const wt=this._getYAxisLabelAlignment(m);O=wt.textAlign,M=wt.x}else if(i==="right"){const wt=this._getYAxisLabelAlignment(m);O=wt.textAlign,M=wt.x}else if(e==="x"){if(i==="center")H=(t.top+t.bottom)/2+v;else if(me(i)){const wt=Object.keys(i)[0],K=i[wt];H=this.chart.scales[wt].getPixelForValue(K)+v}O=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")M=(t.left+t.right)/2-v;else if(me(i)){const wt=Object.keys(i)[0],K=i[wt];M=this.chart.scales[wt].getPixelForValue(K)}O=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const xt=this._getLabelSizes();for(T=0,S=o.length;T<S;++T){R=o[T],P=R.label;const wt=s.setContext(this.getContext(T));C=this.getPixelForTick(T)+s.labelOffset,N=this._resolveTickFontOptions(T),B=N.lineHeight,z=sr(P)?P.length:1;const K=z/2,ot=wt.color,vt=wt.textStrokeColor,et=wt.textStrokeWidth;let V=O;a?(M=C,O==="inner"&&(T===S-1?V=this.options.reverse?"left":"right":T===0?V=this.options.reverse?"right":"left":V="center"),i==="top"?h==="near"||b!==0?G=-z*B+B/2:h==="center"?G=-xt.highest.height/2-K*B+B:G=-xt.highest.height+B/2:h==="near"||b!==0?G=B/2:h==="center"?G=xt.highest.height/2-K*B:G=xt.highest.height-z*B,g&&(G*=-1),b!==0&&!wt.showLabelBackdrop&&(M+=B/2*Math.sin(b))):(H=C,G=(1-z)*B/2);let q;if(wt.showLabelBackdrop){const ct=es(wt.backdropPadding),nt=xt.heights[T],mt=xt.widths[T];let St=G-ct.top,Tt=0-ct.left;switch(F){case"middle":St-=nt/2;break;case"bottom":St-=nt;break}switch(O){case"center":Tt-=mt/2;break;case"right":Tt-=mt;break;case"inner":T===S-1?Tt-=mt:T>0&&(Tt-=mt/2);break}q={left:Tt,top:St,width:mt+ct.width,height:nt+ct.height,color:wt.backdropColor}}E.push({label:P,font:N,textOffset:G,options:{rotation:b,color:ot,strokeColor:vt,strokeWidth:et,textAlign:V,textBaseline:F,translation:[M,H],backdrop:q}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Aa(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,l=a.widest.width;let h,d;return e==="left"?i?(d=this.right+s,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d+=l)):(d=this.right-o,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d=this.left)):e==="right"?i?(d=this.left+s,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d-=l)):(d=this.left+o,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:i,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(l,h,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(e.display)for(s=0,a=i.length;s<a;++s){const l=i[s];e.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,d,g,m;this.isHorizontal()?(h=Bc(t,this.left,a)-a/2,d=Bc(t,this.right,o)+o/2,g=m=l):(g=Bc(t,this.top,a)-a/2,m=Bc(t,this.bottom,o)+o/2,h=d=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(h,g),e.lineTo(d,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&zw(r,i);const s=this.getLabelItems(t);for(const a of s){const o=a.options,l=a.font,h=a.label,d=a.textOffset;F1(r,h,0,d,l,o)}i&&Hw(r)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;const s=Xr(r.font),a=es(r.padding),o=r.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||me(e)?(l+=a.bottom,sr(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:h,titleY:d,maxWidth:g,rotation:m}=bB(this,l,e,o);F1(t,r.text,0,0,s,{color:r.color,maxWidth:g,rotation:m,textAlign:wB(o,e,i),textBaseline:"middle",translation:[h,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=ne(t.grid&&t.grid.z,-1),i=ne(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==kh.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];o[r]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Xr(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Lp{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;TB(e)&&(r=this.register(e));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,EB(t,a,r),this.override&&Tn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in Tn[i]&&(delete Tn[i][r],this.override&&delete _l[r])}}function EB(n,t,e){const r=ag(Object.create(null),[e?Tn.get(e):{},Tn.get(t),n.defaults]);Tn.set(t,r),n.defaultRoutes&&AB(t,n.defaultRoutes),n.descriptors&&Tn.describe(t,n.descriptors)}function AB(n,t){Object.keys(t).forEach(e=>{const r=e.split("."),i=r.pop(),s=[n].concat(r).join("."),a=t[e].split("."),o=a.pop(),l=a.join(".");Tn.route(s,i,l,o)})}function TB(n){return"id"in n&&"defaults"in n}class SB{constructor(){this.controllers=new Lp(ul,"datasets",!0),this.elements=new Lp($o,"elements"),this.plugins=new Lp(Object,"plugins"),this.scales=new Lp(kh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):Pe(i,a=>{const o=r||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,r){const i=Bw(t);Qe(r["before"+i],[],r),e[t](r),Qe(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var Ts=new SB;class CB{constructor(){this._init=[]}notify(t,e,r,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,r,i){i=i||{};for(const s of t){const a=s.plugin,o=a[r],l=[e,i,s.options];if(Qe(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Ce(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,i=ne(r.options&&r.options.plugins,{}),s=IB(r);return i===!1&&!e?[]:DB(t,s,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}}function IB(n){const t={},e=[],r=Object.keys(Ts.plugins.items);for(let s=0;s<r.length;s++)e.push(Ts.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function RB(n,t){return!t&&n===!1?null:n===!0?{}:n}function DB(n,{plugins:t,localIds:e},r,i){const s=[],a=n.getContext();for(const o of t){const l=o.id,h=RB(r[l],i);h!==null&&s.push({plugin:o,options:OB(n.config,{plugin:o,local:e[l]},h,a)})}return s}function OB(n,{plugin:t,local:e},r,i){const s=n.pluginScopeKeys(t),a=n.getOptionScopes(r,s);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function e2(n,t){const e=Tn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function MB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function NB(n,t){return n===t?"_index_":"_value_"}function _I(n){if(n==="x"||n==="y"||n==="r")return n}function PB(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function n2(n,...t){if(_I(n))return n;for(const e of t){const r=e.axis||PB(e.position)||n.length>1&&_I(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function xI(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function kB(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(e.length)return xI(n,"x",e[0])||xI(n,"y",e[0])}return{}}function LB(n,t){const e=_l[n.type]||{scales:{}},r=t.scales||{},i=e2(n.type,t),s=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!me(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=n2(a,o,kB(a,n),Tn.scales[o.type]),h=NB(l,i),d=e.scales||{};s[a]=Vd(Object.create(null),[{axis:l},o,d[l],d[h]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||e2(o,t),d=(_l[o]||{}).scales||{};Object.keys(d).forEach(g=>{const m=MB(g,l),v=a[m+"AxisID"]||m;s[v]=s[v]||Object.create(null),Vd(s[v],[{axis:m},r[v],d[g]])})}),Object.keys(s).forEach(a=>{const o=s[a];Vd(o,[Tn.scales[o.type],Tn.scale])}),s}function oM(n){const t=n.options||(n.options={});t.plugins=ne(t.plugins,{}),t.scales=LB(n,t)}function cM(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function VB(n){return n=n||{},n.data=cM(n.data),oM(n),n}const wI=new Map,lM=new Set;function Vp(n,t){let e=wI.get(n);return e||(e=t(),wI.set(n,e),lM.add(e)),e}const sd=(n,t,e)=>{const r=vl(t,e);r!==void 0&&n.add(r)};class BB{constructor(t){this._config=VB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=cM(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),oM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Vp(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Vp(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Vp(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,r=this.type;return Vp(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),o=a.get(e);if(o)return o;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(g=>sd(l,t,g))),d.forEach(g=>sd(l,i,g)),d.forEach(g=>sd(l,_l[s]||{},g)),d.forEach(g=>sd(l,Tn,g)),d.forEach(g=>sd(l,Jx,g))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),lM.has(e)&&a.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,_l[e]||{},Tn.datasets[e]||{},{type:e},Tn,Jx]}resolveNamedOptions(t,e,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=bI(this._resolverCache,t,i);let l=a;if(UB(a,e)){s.$shared=!1,r=zo(r)?r():r;const h=this.createResolver(t,r,o);l=uh(a,r,h)}for(const h of e)s[h]=l[h];return s}createResolver(t,e,r=[""],i){const{resolver:s}=bI(this._resolverCache,t,r);return me(e)?uh(s,e,void 0,i):s}}function bI(n,t,e){let r=n.get(t);r||(r=new Map,n.set(t,r));const i=e.join();let s=r.get(i);return s||(s={resolver:Ww(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,s)),s}const FB=n=>me(n)&&Object.getOwnPropertyNames(n).some(t=>zo(n[t]));function UB(n,t){const{isScriptable:e,isIndexable:r}=G4(n);for(const i of t){const s=e(i),a=r(i),o=(a||s)&&n[i];if(s&&(zo(o)||FB(o))||a&&sr(o))return!0}return!1}var jB="4.5.0";const zB=["top","bottom","left","right","chartArea"];function EI(n,t){return n==="top"||n==="bottom"||zB.indexOf(n)===-1&&t==="x"}function AI(n,t){return function(e,r){return e[n]===r[n]?e[t]-r[t]:e[n]-r[n]}}function TI(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Qe(e&&e.onComplete,[n],t)}function HB(n){const t=n.chart,e=t.options.animation;Qe(e&&e.onProgress,[n],t)}function uM(n){return Xw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const u1={},SI=n=>{const t=uM(n);return Object.values(u1).filter(e=>e.canvas===t).pop()};function GB(n,t,e){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=t){const a=n[i];delete n[i],(e>0||s>t)&&(n[s+e]=a)}}}function WB(n,t,e,r){return!e||n.type==="mouseout"?null:r?t:n}var xo;let Ml=(xo=class{static register(...t){Ts.add(...t),CI()}static unregister(...t){Ts.remove(...t),CI()}constructor(t,e){const r=this.config=new BB(e),i=uM(t),s=SI(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||lB(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,h=l&&l.height,d=l&&l.width;if(this.id=j7(),this.ctx=o,this.canvas=l,this.width=d,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new CB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=aL(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],u1[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wa.listen(this,"complete",TI),wa.listen(this,"progress",HB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:i,_aspectRatio:s}=this;return Ce(t)?e&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ts}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():KC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qC(this.canvas,this.ctx),this}stop(){return wa.stop(this),this}resize(t,e){wa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,e,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,KC(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Qe(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Pe(e,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,i=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const o=e[a],l=n2(a,o),h=l==="r",d=l==="x";return{options:o,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),Pe(s,a=>{const o=a.options,l=o.id,h=n2(l,o),d=ne(o.type,a.dtype);(o.position===void 0||EI(o.position,h)!==EI(a.dposition))&&(o.position=a.dposition),i[l]=!0;let g=null;if(l in r&&r[l].type===d)g=r[l];else{const m=Ts.getScale(d);g=new m({id:l,type:d,ctx:this.ctx,chart:this}),r[g.id]=g}g.init(o,t)}),Pe(i,(a,o)=>{a||delete r[o]}),Pe(r,a=>{Do.configure(this,a,a.options),Do.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>e){for(let i=e;i<r;++i)this._destroyDatasetMeta(i);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(AI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,i)=>{e.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=e.length;r<i;r++){const s=e[r];let a=this.getDatasetMeta(r);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=s.indexAxis||e2(o,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=Ts.getController(o),{datasetElementType:h,dataElementType:d}=Tn.datasets[o];Object.assign(l,{dataElementType:Ts.getElement(d),datasetElementType:h&&Ts.getElement(h)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Pe(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:g}=this.getDatasetMeta(h),m=!i&&s.indexOf(g)===-1;g.buildOrUpdateElements(m),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||Pe(s,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(AI("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Pe(this.scales,t=>{Do.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!LC(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of e){const a=r==="_removeElements"?-s:s;GB(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<e;s++)if(!LC(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Do.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],Pe(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,zo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wa.has(this)?this.attached&&!wa.running(this)&&wa.start(this):(this.draw(),TI({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let i,s;for(i=0,s=e.length;i<s;++i){const a=e[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=fV(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&zw(e,i),t.controller.draw(),i&&Hw(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return ug(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,i){const s=zV.modes[e];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ol(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);og(e)?(s.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),wa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),qC(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete u1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};Pe(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(l,h)=>{e.addEventListener(this,l,h),t[l]=h},i=(l,h)=>{t[l]&&(e.removeEventListener(this,l,h),delete t[l])},s=(l,h)=>{this.canvas&&this.resize(l,h)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){Pe(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Pe(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const i=r?"set":"remove";let s,a,o,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){a=t[o];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!L1(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,r){const i=this.options.hover,s=(l,h)=>l.filter(d=>!h.some(g=>d.datasetIndex===g.datasetIndex&&d.index===g.index)),a=s(e,t),o=r?t:s(t,e);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:i=[],options:s}=this,a=e,o=this._getActiveElements(t,i,r,a),l=Y7(t),h=WB(t,this._lastEvent,r,l);r&&(this._lastEvent=null,Qe(s.onHover,[t,o,this],this),l&&Qe(s.onClick,[t,o,this],this));const d=!L1(o,i);return(d||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=h,d}_getActiveElements(t,e,r,i){if(t.type==="mouseout")return[];if(!r)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},lt(xo,"defaults",Tn),lt(xo,"instances",u1),lt(xo,"overrides",_l),lt(xo,"registry",Ts),lt(xo,"version",jB),lt(xo,"getChart",SI),xo);function CI(){return Pe(Ml.instances,n=>n._plugins.invalidate())}function qB(n,t,e){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:h,borderJoinStyle:d}=l,g=Math.min(h/a,$i(r-e));if(n.beginPath(),n.arc(i,s,a-h/2,r+g/2,e-g/2),o>0){const m=Math.min(h/o,$i(r-e));n.arc(i,s,o+h/2,e-m/2,r+m/2,!0)}else{const m=Math.min(h/2,a*$i(r-e));if(d==="round")n.arc(i,s,m,e-Ge/2,r+Ge/2,!0);else if(d==="bevel"){const v=2*m*m,x=-v*Math.cos(e+Ge/2)+i,b=-v*Math.sin(e+Ge/2)+s,E=v*Math.cos(r+Ge/2)+i,T=v*Math.sin(r+Ge/2)+s;n.lineTo(x,b),n.lineTo(E,T)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function YB(n,t,e){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let h=i/o;n.beginPath(),n.arc(s,a,o,r-h,e+h),l>i?(h=i/l,n.arc(s,a,l,e+h,r-h,!0)):n.arc(s,a,i,e+Yn,r-Yn),n.closePath(),n.clip()}function XB(n){return Gw(n,["outerStart","outerEnd","innerStart","innerEnd"])}function KB(n,t,e,r){const i=XB(n.options.borderRadius),s=(e-t)/2,a=Math.min(s,r*t/2),o=l=>{const h=(e-Math.min(s,l))*r/2;return Cr(l,0,Math.min(s,h))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Cr(i.innerStart,0,a),innerEnd:Cr(i.innerEnd,0,a)}}function Mu(n,t,e,r){return{x:e+n*Math.cos(t),y:r+n*Math.sin(t)}}function H1(n,t,e,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:h,innerRadius:d}=t,g=Math.max(t.outerRadius+r+e-h,0),m=d>0?d+r+e+h:0;let v=0;const x=i-l;if(r){const wt=d>0?d-r:0,K=g>0?g-r:0,ot=(wt+K)/2,vt=ot!==0?x*ot/(ot+r):x;v=(x-vt)/2}const b=Math.max(.001,x*g-e/Ge)/g,E=(x-b)/2,T=l+E+v,S=i-E-v,{outerStart:R,outerEnd:P,innerStart:M,innerEnd:H}=KB(t,m,g,S-T),O=g-R,C=g-P,N=T+R/O,B=S-P/C,z=m+M,G=m+H,F=T+M/z,xt=S-H/G;if(n.beginPath(),s){const wt=(N+B)/2;if(n.arc(a,o,g,N,wt),n.arc(a,o,g,wt,B),P>0){const et=Mu(C,B,a,o);n.arc(et.x,et.y,P,B,S+Yn)}const K=Mu(G,S,a,o);if(n.lineTo(K.x,K.y),H>0){const et=Mu(G,xt,a,o);n.arc(et.x,et.y,H,S+Yn,xt+Math.PI)}const ot=(S-H/m+(T+M/m))/2;if(n.arc(a,o,m,S-H/m,ot,!0),n.arc(a,o,m,ot,T+M/m,!0),M>0){const et=Mu(z,F,a,o);n.arc(et.x,et.y,M,F+Math.PI,T-Yn)}const vt=Mu(O,T,a,o);if(n.lineTo(vt.x,vt.y),R>0){const et=Mu(O,N,a,o);n.arc(et.x,et.y,R,T-Yn,N)}}else{n.moveTo(a,o);const wt=Math.cos(N)*g+a,K=Math.sin(N)*g+o;n.lineTo(wt,K);const ot=Math.cos(B)*g+a,vt=Math.sin(B)*g+o;n.lineTo(ot,vt)}n.closePath()}function $B(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){H1(n,t,e,r,l,i);for(let h=0;h<s;++h)n.fill();isNaN(o)||(l=a+(o%pn||pn))}return H1(n,t,e,r,l,i),n.fill(),l}function QB(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:h,borderJoinStyle:d,borderDash:g,borderDashOffset:m,borderRadius:v}=l,x=l.borderAlign==="inner";if(!h)return;n.setLineDash(g||[]),n.lineDashOffset=m,x?(n.lineWidth=h*2,n.lineJoin=d||"round"):(n.lineWidth=h,n.lineJoin=d||"bevel");let b=t.endAngle;if(s){H1(n,t,e,r,b,i);for(let E=0;E<s;++E)n.stroke();isNaN(o)||(b=a+(o%pn||pn))}x&&YB(n,t,b),l.selfJoin&&b-a>=Ge&&v===0&&d!=="miter"&&qB(n,t,b),s||(H1(n,t,e,r,b,i),n.stroke())}class Yu extends $o{constructor(e){super();lt(this,"circumference");lt(this,"endAngle");lt(this,"fullCircles");lt(this,"innerRadius");lt(this,"outerRadius");lt(this,"pixelMargin");lt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=k4(s,{x:e,y:r}),{startAngle:l,endAngle:h,innerRadius:d,outerRadius:g,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,x=ne(m,h-l),b=lg(a,l,h)&&l!==h,E=x>=pn||b,T=Ro(o,d+v,g+v);return E&&T}getCenterPoint(e){const{x:r,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:d}=this.options,g=(s+a)/2,m=(o+l+d+h)/2;return{x:r+Math.cos(g)*m,y:i+Math.sin(g)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:i}=this,s=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>pn?Math.floor(i/pn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const h=1-Math.sin(Math.min(Ge,i||0)),d=s*h;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,$B(e,this,d,a,o),QB(e,this,d,a,o),e.restore()}}lt(Yu,"id","arc"),lt(Yu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),lt(Yu,"defaultRoutes",{backgroundColor:"backgroundColor"}),lt(Yu,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function hM(n,t,e=t){n.lineCap=ne(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ne(e.borderDash,t.borderDash)),n.lineDashOffset=ne(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ne(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ne(e.borderWidth,t.borderWidth),n.strokeStyle=ne(e.borderColor,t.borderColor)}function ZB(n,t,e){n.lineTo(e.x,e.y)}function JB(n){return n.stepped?xL:n.tension||n.cubicInterpolationMode==="monotone"?wL:ZB}function fM(n,t,e={}){const r=n.length,{start:i=0,end:s=r-1}=e,{start:a,end:o}=t,l=Math.max(i,a),h=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:h<l&&!d?r+h-l:h-l}}function tF(n,t,e,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:h}=fM(i,e,r),d=JB(s);let{move:g=!0,reverse:m}=r||{},v,x,b;for(v=0;v<=h;++v)x=i[(o+(m?h-v:v))%a],!x.skip&&(g?(n.moveTo(x.x,x.y),g=!1):d(n,b,x,m,s.stepped),b=x);return l&&(x=i[(o+(m?h:0))%a],d(n,b,x,m,s.stepped)),!!l}function eF(n,t,e,r){const i=t.points,{count:s,start:a,ilen:o}=fM(i,e,r),{move:l=!0,reverse:h}=r||{};let d=0,g=0,m,v,x,b,E,T;const S=P=>(a+(h?o-P:P))%s,R=()=>{b!==E&&(n.lineTo(d,E),n.lineTo(d,b),n.lineTo(d,T))};for(l&&(v=i[S(0)],n.moveTo(v.x,v.y)),m=0;m<=o;++m){if(v=i[S(m)],v.skip)continue;const P=v.x,M=v.y,H=P|0;H===x?(M<b?b=M:M>E&&(E=M),d=(g*d+P)/++g):(R(),n.lineTo(P,M),x=H,g=0,b=E=M),T=M}R()}function r2(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?eF:tF}function nF(n){return n.stepped?JL:n.tension||n.cubicInterpolationMode==="monotone"?tV:Wc}function rF(n,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),hM(n,t.options),n.stroke(i)}function iF(n,t,e,r){const{segments:i,options:s}=t,a=r2(t);for(const o of i)hM(n,s,o.style),n.beginPath(),a(n,t,o,{start:e,end:e+r-1})&&n.closePath(),n.stroke()}const sF=typeof Path2D=="function";function aF(n,t,e,r){sF&&!t.options.segment?rF(n,t,e,r):iF(n,t,e,r)}class bd extends $o{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;WL(this._points,r,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,i=t[e],s=this.points,a=sV(this,{property:e,start:i,end:i});if(!a.length)return;const o=[],l=nF(r);let h,d;for(h=0,d=a.length;h<d;++h){const{start:g,end:m}=a[h],v=s[g],x=s[m];if(v===x){o.push(v);continue}const b=Math.abs((i-v[e])/(x[e]-v[e])),E=l(v,x,b,r.stepped);E[e]=t[e],o.push(E)}return o.length===1?o[0]:o}pathSegment(t,e,r){return r2(this)(t,this,e,r)}path(t,e,r){const i=this.segments,s=r2(this);let a=this._loop;e=e||0,r=r||this.points.length-e;for(const o of i)a&=s(t,this,o,{start:e,end:e+r-1});return!!a}draw(t,e,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),aF(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}lt(bd,"id","line"),lt(bd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),lt(bd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),lt(bd,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function II(n,t,e,r){const i=n.options,{[e]:s}=n.getProps([e],r);return Math.abs(t-s)<i.radius+i.hitRadius}class h1 extends $o{constructor(e){super();lt(this,"parsed");lt(this,"skip");lt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(r-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return II(this,e,"x",r)}inYRange(e,r){return II(this,e,"y",r)}getCenterPoint(e){const{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const i=r&&e.borderWidth||0;return(r+i)*2}draw(e,r){const i=this.options;this.skip||i.radius<.1||!ug(this,r,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,t2(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}lt(h1,"id","point"),lt(h1,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),lt(h1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function dM(n,t){const{x:e,y:r,base:i,width:s,height:a}=n.getProps(["x","y","base","width","height"],t);let o,l,h,d,g;return n.horizontal?(g=a/2,o=Math.min(e,i),l=Math.max(e,i),h=r-g,d=r+g):(g=s/2,o=e-g,l=e+g,h=Math.min(r,i),d=Math.max(r,i)),{left:o,top:h,right:l,bottom:d}}function Oo(n,t,e,r){return n?0:Cr(t,e,r)}function oF(n,t,e){const r=n.options.borderWidth,i=n.borderSkipped,s=H4(r);return{t:Oo(i.top,s.top,0,e),r:Oo(i.right,s.right,0,t),b:Oo(i.bottom,s.bottom,0,e),l:Oo(i.left,s.left,0,t)}}function cF(n,t,e){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=rh(i),a=Math.min(t,e),o=n.borderSkipped,l=r||me(i);return{topLeft:Oo(!l||o.top||o.left,s.topLeft,0,a),topRight:Oo(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Oo(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Oo(!l||o.bottom||o.right,s.bottomRight,0,a)}}function lF(n){const t=dM(n),e=t.right-t.left,r=t.bottom-t.top,i=oF(n,e/2,r/2),s=cF(n,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function P_(n,t,e,r){const i=t===null,s=e===null,o=n&&!(i&&s)&&dM(n,r);return o&&(i||Ro(t,o.left,o.right))&&(s||Ro(e,o.top,o.bottom))}function uF(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function hF(n,t){n.rect(t.x,t.y,t.w,t.h)}function k_(n,t,e={}){const r=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-r,a=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+a,radius:n.radius}}class f1 extends $o{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=lF(this),o=uF(a.radius)?U1:hF;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),o(t,k_(a,e,s)),t.clip(),o(t,k_(s,-e,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,k_(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return P_(this,t,e,r)}inXRange(t,e){return P_(this,t,null,e)}inYRange(t,e){return P_(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}lt(f1,"id","bar"),lt(f1,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),lt(f1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const RI=(n,t)=>{let{boxHeight:e=t,boxWidth:r=t}=n;return n.usePointStyle&&(e=Math.min(e,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},fF=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class DI extends $o{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Qe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=Xr(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=RI(r,s);let h,d;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(a,s,o,l)+10):(d=this.maxHeight,h=this._fitCols(a,i,o,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],d=i+o;let g=t;s.textAlign="left",s.textBaseline="middle";let m=-1,v=-d;return this.legendItems.forEach((x,b)=>{const E=r+e/2+s.measureText(x.text).width;(b===0||h[h.length-1]+E+2*o>a)&&(g+=d,h[h.length-(b>0?0:1)]=0,v+=d,m++),l[b]={left:0,top:v,row:m,width:E,height:i},h[h.length-1]+=E+o}),g}_fitCols(t,e,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],d=a-t;let g=o,m=0,v=0,x=0,b=0;return this.legendItems.forEach((E,T)=>{const{itemWidth:S,itemHeight:R}=dF(r,e,s,E,i);T>0&&v+R+2*o>d&&(g+=m+o,h.push({width:m,height:v}),x+=m+o,b++,m=v=0),l[T]={left:x,top:v,col:b,width:S,height:R},m=Math.max(m,S),v+=R+o}),g+=m,h.push({width:m,height:v}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:s}}=this,a=ih(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=ci(r,this.left+i,this.right-this.lineWidths[o]);for(const h of e)o!==h.row&&(o=h.row,l=ci(r,this.left+i,this.right-this.lineWidths[o])),h.top+=this.top+t+i,h.left=a.leftForLtr(a.x(l),h.width),l+=h.width+i}else{let o=0,l=ci(r,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const h of e)h.col!==o&&(o=h.col,l=ci(r,this.top+t+i,this.bottom-this.columnSizes[o].height)),h.top=l,h.left+=this.left+i,h.left=a.leftForLtr(a.x(h.left),h.width),l+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;zw(t,this),this._draw(),Hw(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,o=Tn.color,l=ih(t.rtl,this.left,this.width),h=Xr(a.font),{padding:d}=a,g=h.size,m=g/2;let v;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:x,boxHeight:b,itemHeight:E}=RI(a,g),T=function(H,O,C){if(isNaN(x)||x<=0||isNaN(b)||b<0)return;i.save();const N=ne(C.lineWidth,1);if(i.fillStyle=ne(C.fillStyle,o),i.lineCap=ne(C.lineCap,"butt"),i.lineDashOffset=ne(C.lineDashOffset,0),i.lineJoin=ne(C.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=ne(C.strokeStyle,o),i.setLineDash(ne(C.lineDash,[])),a.usePointStyle){const B={radius:b*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:N},z=l.xPlus(H,x/2),G=O+m;z4(i,B,z,G,a.pointStyleWidth&&x)}else{const B=O+Math.max((g-b)/2,0),z=l.leftForLtr(H,x),G=rh(C.borderRadius);i.beginPath(),Object.values(G).some(F=>F!==0)?U1(i,{x:z,y:B,w:x,h:b,radius:G}):i.rect(z,B,x,b),i.fill(),N!==0&&i.stroke()}i.restore()},S=function(H,O,C){F1(i,C.text,H,O+E/2,h,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},R=this.isHorizontal(),P=this._computeTitleHeight();R?v={x:ci(s,this.left+d,this.right-r[0]),y:this.top+d+P,line:0}:v={x:this.left+d,y:ci(s,this.top+P+d,this.bottom-e[0].height),line:0},K4(this.ctx,t.textDirection);const M=E+d;this.legendItems.forEach((H,O)=>{i.strokeStyle=H.fontColor,i.fillStyle=H.fontColor;const C=i.measureText(H.text).width,N=l.textAlign(H.textAlign||(H.textAlign=a.textAlign)),B=x+m+C;let z=v.x,G=v.y;l.setWidth(this.width),R?O>0&&z+B+d>this.right&&(G=v.y+=M,v.line++,z=v.x=ci(s,this.left+d,this.right-r[v.line])):O>0&&G+M>this.bottom&&(z=v.x=z+e[v.line].width+d,v.line++,G=v.y=ci(s,this.top+P+d,this.bottom-e[v.line].height));const F=l.x(z);if(T(F,G,H),z=oL(N,z+x+m,R?z+B:this.right,t.rtl),S(l.x(z),G,H),R)v.x+=B+d;else if(typeof H.text!="string"){const xt=h.lineHeight;v.y+=gM(H,xt)+d}else v.y+=M}),$4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=Xr(e.font),i=es(e.padding);if(!e.display)return;const s=ih(t.rtl,this.left,this.width),a=this.ctx,o=e.position,l=r.size/2,h=i.top+l;let d,g=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+h,g=ci(t.align,g,this.right-m);else{const x=this.columnSizes.reduce((b,E)=>Math.max(b,E.height),0);d=h+ci(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const v=ci(o,g,g+m);a.textAlign=s.textAlign(U4(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=r.string,F1(a,e.text,v,d,r)}_computeTitleHeight(){const t=this.options.title,e=Xr(t.font),r=es(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,s;if(Ro(t,this.left,this.right)&&Ro(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ro(t,i.left,i.left+i.width)&&Ro(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const e=this.options;if(!mF(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=fF(i,r);i&&!s&&Qe(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&Qe(e.onHover,[t,r,this],this)}else r&&Qe(e.onClick,[t,r,this],this)}}function dF(n,t,e,r,i){const s=gF(r,n,t,e),a=pF(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}function gF(n,t,e,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+r.measureText(i).width}function pF(n,t,e){let r=n;return typeof t.text!="string"&&(r=gM(t,e)),r}function gM(n,t){const e=n.text?n.text.length:0;return t*e}function mF(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Qw={id:"legend",_element:DI,start(n,t,e){const r=n.legend=new DI({ctx:n.ctx,options:e,chart:n});Do.configure(n,r,e),Do.addBox(n,r)},stop(n){Do.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const r=n.legend;Do.configure(n,r,e),r.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(e?0:void 0),d=es(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:a&&(o||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Ed={average(n){if(!n.length)return!1;let t,e,r=new Set,i=0,s=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),d=Zx(t,h);d<i&&(i=d,o=l)}}if(o){const l=o.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function As(n,t){return t&&(sr(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ba(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function yF(n,t){const{element:e,datasetIndex:r,index:i}=t,s=n.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:n,label:a,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function OI(n,t){const e=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:a,boxHeight:o}=t,l=Xr(t.bodyFont),h=Xr(t.titleFont),d=Xr(t.footerFont),g=s.length,m=i.length,v=r.length,x=es(t.padding);let b=x.height,E=0,T=r.reduce((P,M)=>P+M.before.length+M.lines.length+M.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,g&&(b+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),T){const P=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;b+=v*P+(T-v)*l.lineHeight+(T-1)*t.bodySpacing}m&&(b+=t.footerMarginTop+m*d.lineHeight+(m-1)*t.footerSpacing);let S=0;const R=function(P){E=Math.max(E,e.measureText(P).width+S)};return e.save(),e.font=h.string,Pe(n.title,R),e.font=l.string,Pe(n.beforeBody.concat(n.afterBody),R),S=t.displayColors?a+2+t.boxPadding:0,Pe(r,P=>{Pe(P.before,R),Pe(P.lines,R),Pe(P.after,R)}),S=0,e.font=d.string,Pe(n.footer,R),e.restore(),E+=x.width,{width:E,height:b}}function vF(n,t){const{y:e,height:r}=t;return e<r/2?"top":e>n.height-r/2?"bottom":"center"}function _F(n,t,e,r){const{x:i,width:s}=r,a=e.caretSize+e.caretPadding;if(n==="left"&&i+s+a>t.width||n==="right"&&i-s-a<0)return!0}function xF(n,t,e,r){const{x:i,width:s}=e,{width:a,chartArea:{left:o,right:l}}=n;let h="center";return r==="center"?h=i<=(o+l)/2?"left":"right":i<=s/2?h="left":i>=a-s/2&&(h="right"),_F(h,n,t,e)&&(h="center"),h}function MI(n,t,e){const r=e.yAlign||t.yAlign||vF(n,e);return{xAlign:e.xAlign||t.xAlign||xF(n,t,e,r),yAlign:r}}function wF(n,t){let{x:e,width:r}=n;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function bF(n,t,e){let{y:r,height:i}=n;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function NI(n,t,e,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=e,h=i+s,{topLeft:d,topRight:g,bottomLeft:m,bottomRight:v}=rh(a);let x=wF(t,o);const b=bF(t,l,h);return l==="center"?o==="left"?x+=h:o==="right"&&(x-=h):o==="left"?x-=Math.max(d,m)+i:o==="right"&&(x+=Math.max(g,v)+i),{x:Cr(x,0,r.width-t.width),y:Cr(b,0,r.height-t.height)}}function Bp(n,t,e){const r=es(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-r.right:n.x+r.left}function PI(n){return As([],ba(n))}function EF(n,t,e){return Ol(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function kI(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const pM={beforeTitle:xa,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:xa,beforeBody:xa,beforeLabel:xa,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Ce(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:xa,afterBody:xa,beforeFooter:xa,footer:xa,afterFooter:xa};function Gr(n,t,e,r){const i=n[t].call(e,r);return typeof i>"u"?pM[t].call(e,r):i}class i2 extends $o{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&e.options.animation&&r.animations,s=new Z4(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=EF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:r}=e,i=Gr(r,"beforeTitle",this,t),s=Gr(r,"title",this,t),a=Gr(r,"afterTitle",this,t);let o=[];return o=As(o,ba(i)),o=As(o,ba(s)),o=As(o,ba(a)),o}getBeforeBody(t,e){return PI(Gr(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:r}=e,i=[];return Pe(t,s=>{const a={before:[],lines:[],after:[]},o=kI(r,s);As(a.before,ba(Gr(o,"beforeLabel",this,s))),As(a.lines,Gr(o,"label",this,s)),As(a.after,ba(Gr(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,e){return PI(Gr(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:r}=e,i=Gr(r,"beforeFooter",this,t),s=Gr(r,"footer",this,t),a=Gr(r,"afterFooter",this,t);let o=[];return o=As(o,ba(i)),o=As(o,ba(s)),o=As(o,ba(a)),o}_createItems(t){const e=this._active,r=this.chart.data,i=[],s=[],a=[];let o=[],l,h;for(l=0,h=e.length;l<h;++l)o.push(yF(this.chart,e[l]));return t.filter&&(o=o.filter((d,g,m)=>t.filter(d,g,m,r))),t.itemSort&&(o=o.sort((d,g)=>t.itemSort(d,g,r))),Pe(o,d=>{const g=kI(t.callbacks,d);i.push(Gr(g,"labelColor",this,d)),s.push(Gr(g,"labelPointStyle",this,d)),a.push(Gr(g,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=Ed[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=OI(this,r),h=Object.assign({},o,l),d=MI(this.chart,r,h),g=NI(r,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:g.x,y:g.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,i){const s=this.getCaretPosition(t,r,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:h,bottomLeft:d,bottomRight:g}=rh(o),{x:m,y:v}=t,{width:x,height:b}=e;let E,T,S,R,P,M;return s==="center"?(P=v+b/2,i==="left"?(E=m,T=E-a,R=P+a,M=P-a):(E=m+x,T=E+a,R=P-a,M=P+a),S=E):(i==="left"?T=m+Math.max(l,d)+a:i==="right"?T=m+x-Math.max(h,g)-a:T=this.caretX,s==="top"?(R=v,P=R-a,E=T-a,S=T+a):(R=v+b,P=R+a,E=T+a,S=T-a),M=R),{x1:E,x2:T,x3:S,y1:R,y2:P,y3:M}}drawTitle(t,e,r){const i=this.title,s=i.length;let a,o,l;if(s){const h=ih(r.rtl,this.x,this.width);for(t.x=Bp(this,r.titleAlign,r),e.textAlign=h.textAlign(r.titleAlign),e.textBaseline="middle",a=Xr(r.titleFont),o=r.titleSpacing,e.fillStyle=r.titleColor,e.font=a.string,l=0;l<s;++l)e.fillText(i[l],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,l+1===s&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,e,r,i,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:h}=s,d=Xr(s.bodyFont),g=Bp(this,"left",s),m=i.x(g),v=l<d.lineHeight?(d.lineHeight-l)/2:0,x=e.y+v;if(s.usePointStyle){const b={radius:Math.min(h,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},E=i.leftForLtr(m,h)+h/2,T=x+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,t2(t,b,E,T),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,t2(t,b,E,T)}else{t.lineWidth=me(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const b=i.leftForLtr(m,h),E=i.leftForLtr(i.xPlus(m,1),h-2),T=rh(a.borderRadius);Object.values(T).some(S=>S!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,U1(t,{x:b,y:x,w:h,h:l,radius:T}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),U1(t,{x:E,y:x+1,w:h-2,h:l-2,radius:T}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(b,x,h,l),t.strokeRect(b,x,h,l),t.fillStyle=a.backgroundColor,t.fillRect(E,x+1,h-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:h,boxPadding:d}=r,g=Xr(r.bodyFont);let m=g.lineHeight,v=0;const x=ih(r.rtl,this.x,this.width),b=function(C){e.fillText(C,x.x(t.x+v),t.y+m/2),t.y+=m+s},E=x.textAlign(a);let T,S,R,P,M,H,O;for(e.textAlign=a,e.textBaseline="middle",e.font=g.string,t.x=Bp(this,E,r),e.fillStyle=r.bodyColor,Pe(this.beforeBody,b),v=o&&E!=="right"?a==="center"?h/2+d:h+2+d:0,P=0,H=i.length;P<H;++P){for(T=i[P],S=this.labelTextColors[P],e.fillStyle=S,Pe(T.before,b),R=T.lines,o&&R.length&&(this._drawColorBox(e,t,P,x,r),m=Math.max(g.lineHeight,l)),M=0,O=R.length;M<O;++M)b(R[M]),m=g.lineHeight;Pe(T.after,b)}v=0,m=g.lineHeight,Pe(this.afterBody,b),t.y-=s}drawFooter(t,e,r){const i=this.footer,s=i.length;let a,o;if(s){const l=ih(r.rtl,this.x,this.width);for(t.x=Bp(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=l.textAlign(r.footerAlign),e.textBaseline="middle",a=Xr(r.footerFont),e.fillStyle=r.footerColor,e.font=a.string,o=0;o<s;++o)e.fillText(i[o],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,e,r,i){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=t,{width:h,height:d}=r,{topLeft:g,topRight:m,bottomLeft:v,bottomRight:x}=rh(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+g,l),a==="top"&&this.drawCaret(t,e,r,i),e.lineTo(o+h-m,l),e.quadraticCurveTo(o+h,l,o+h,l+m),a==="center"&&s==="right"&&this.drawCaret(t,e,r,i),e.lineTo(o+h,l+d-x),e.quadraticCurveTo(o+h,l+d,o+h-x,l+d),a==="bottom"&&this.drawCaret(t,e,r,i),e.lineTo(o+v,l+d),e.quadraticCurveTo(o,l+d,o,l+d-v),a==="center"&&s==="left"&&this.drawCaret(t,e,r,i),e.lineTo(o,l+g),e.quadraticCurveTo(o,l,o+g,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=Ed[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=OI(this,t),l=Object.assign({},a,this._size),h=MI(e,t,l),d=NI(t,l,h,e);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=es(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,e),K4(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),$4(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,i=t.map(({datasetIndex:o,index:l})=>{const h=this.chart.getDatasetMeta(o);if(!h)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:h.data[l],index:l}}),s=!L1(r,i),a=this._positionChanged(i,e);(s||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,r),o=this._positionChanged(a,t),l=e||!L1(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:r,caretY:i,options:s}=this,a=Ed[s.position].call(this,t,e);return a!==!1&&(r!==a.x||i!==a.y)}}lt(i2,"positioners",Ed);var Zw={id:"tooltip",_element:i2,positioners:Ed,afterInit(n,t,e){e&&(n.tooltip=new i2({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const AF=(n,t,e,r)=>(typeof t=="string"?(e=n.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function TF(n,t,e,r){const i=n.indexOf(t);if(i===-1)return AF(n,t,e,r);const s=n.lastIndexOf(t);return i!==s?e:i}const SF=(n,t)=>n===null?null:Cr(Math.round(n),0,t);function LI(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class s2 extends kh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const r=this.getLabels();for(const{index:i,label:s}of e)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ce(t))return null;const r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:TF(r,t,ne(e,t),this._addedLabels),SF(e,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=e;a++)i.push({value:a});return i}getLabelForValue(t){return LI.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}lt(s2,"id","category"),lt(s2,"defaults",{ticks:{callback:LI}});function CF(n,t){const e=[],{bounds:i,step:s,min:a,max:o,precision:l,count:h,maxTicks:d,maxDigits:g,includeBounds:m}=n,v=s||1,x=d-1,{min:b,max:E}=t,T=!Ce(a),S=!Ce(o),R=!Ce(h),P=(E-b)/(g+1);let M=BC((E-b)/x/v)*v,H,O,C,N;if(M<1e-14&&!T&&!S)return[{value:b},{value:E}];N=Math.ceil(E/M)-Math.floor(b/M),N>x&&(M=BC(N*M/x/v)*v),Ce(l)||(H=Math.pow(10,l),M=Math.ceil(M*H)/H),i==="ticks"?(O=Math.floor(b/M)*M,C=Math.ceil(E/M)*M):(O=b,C=E),T&&S&&s&&Z7((o-a)/s,M/1e3)?(N=Math.round(Math.min((o-a)/M,d)),M=(o-a)/N,O=a,C=o):R?(O=T?a:O,C=S?o:C,N=h-1,M=(C-O)/N):(N=(C-O)/M,Bd(N,Math.round(N),M/1e3)?N=Math.round(N):N=Math.ceil(N));const B=Math.max(FC(M),FC(O));H=Math.pow(10,Ce(l)?B:l),O=Math.round(O*H)/H,C=Math.round(C*H)/H;let z=0;for(T&&(m&&O!==a?(e.push({value:a}),O<a&&z++,Bd(Math.round((O+z*M)*H)/H,a,VI(a,P,n))&&z++):O<a&&z++);z<N;++z){const G=Math.round((O+z*M)*H)/H;if(S&&G>o)break;e.push({value:G})}return S&&m&&C!==o?e.length&&Bd(e[e.length-1].value,o,VI(o,P,n))?e[e.length-1].value=o:e.push({value:o}):(!S||C===o)&&e.push({value:C}),e}function VI(n,t,{horizontal:e,minRotation:r}){const i=Aa(r),s=(e?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+n).length;return Math.min(t/s,a)}class IF extends kh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ce(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=l=>i=e?i:l,o=l=>s=r?s:l;if(t){const l=Ps(i),h=Ps(s);l<0&&h<0?o(0):l>0&&h>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),t||a(i-l)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=CF(i,s);return t.bounds==="ticks"&&J7(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return jw(t,this.chart.options.locale,this.options.ticks.format)}}class G1 extends IF{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Bi(t)?t:0,this.max=Bi(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=Aa(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}lt(G1,"id","linear"),lt(G1,"defaults",{ticks:{callback:j4.formatters.numeric}});const Mm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qr=Object.keys(Mm);function BI(n,t){return n-t}function FI(n,t){if(Ce(t))return null;const e=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),Bi(a)||(a=typeof r=="string"?e.parse(a,r):e.parse(a)),a===null?null:(i&&(a=i==="week"&&(cg(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,i)),+a)}function UI(n,t,e,r){const i=qr.length;for(let s=qr.indexOf(n);s<i-1;++s){const a=Mm[qr[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=r)return qr[s]}return qr[i-1]}function RF(n,t,e,r,i){for(let s=qr.length-1;s>=qr.indexOf(e);s--){const a=qr[s];if(Mm[a].common&&n._adapter.diff(i,r,a)>=t-1)return a}return qr[e?qr.indexOf(e):0]}function DF(n){for(let t=qr.indexOf(n)+1,e=qr.length;t<e;++t)if(Mm[qr[t]].common)return qr[t]}function jI(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:r,hi:i}=Fw(e,t),s=e[r]>=t?e[r]:e[i];n[s]=!0}}function OF(n,t,e,r){const i=n._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=e[o],l>=0&&(t[l].major=!0);return t}function zI(n,t,e){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return s===0||!e?r:OF(n,r,i,e)}class fg extends kh{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const r=t.time||(t.time={}),i=this._adapter=new eM._date(t.adapters.date);i.init(e),Vd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:FI(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(h){!a&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!o&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!a||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Bi(i)&&!isNaN(i)?i:+e.startOf(Date.now(),r),s=Bi(s)&&!isNaN(s)?s:+e.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=iL(i,s,a);return this._unit=e.unit||(r.autoSkip?UI(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):RF(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:DF(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),zI(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Cr(e,0,a),r=Cr(r,0,a),this._offsets={start:e,end:r,factor:1/(e+1+r)}}_generate(){const t=this._adapter,e=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||UI(s.minUnit,e,r,this._getLabelCapacity(e)),o=ne(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,h=cg(l)||l===!0,d={};let g=e,m,v;if(h&&(g=+t.startOf(g,"isoWeek",l)),g=+t.startOf(g,h?"day":a),t.diff(r,e,a)>1e5*o)throw new Error(e+" and "+r+" are too far apart with stepSize of "+o+" "+a);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(m=g,v=0;m<r;m=+t.add(m,o,a),v++)jI(d,m,x);return(m===r||i.bounds==="ticks"||v===1)&&jI(d,m,x),Object.keys(d).sort(BI).map(b=>+b)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,a=e||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,e,r,i){const s=this.options,a=s.ticks.callback;if(a)return Qe(a,[t,e,r],this);const o=s.time.displayFormats,l=this._unit,h=this._majorUnit,d=l&&o[l],g=h&&o[h],m=r[e],v=h&&g&&m&&m.major;return this._adapter.format(t,i||(v?g:d))}generateTickLabels(t){let e,r,i;for(e=0,r=t.length;e<r;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,i=Aa(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,i=r[e.unit]||r.millisecond,s=this._tickFormatFunction(t,0,zI(this,[t],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,r=i.length;e<r;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const i=this.getLabels();for(e=0,r=i.length;e<r;++e)t.push(FI(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return V4(t.sort(BI))}}lt(fg,"id","time"),lt(fg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Fp(n,t,e){let r=0,i=n.length-1,s,a,o,l;e?(t>=n[r].pos&&t<=n[i].pos&&({lo:r,hi:i}=rl(n,"pos",t)),{pos:s,time:o}=n[r],{pos:a,time:l}=n[i]):(t>=n[r].time&&t<=n[i].time&&({lo:r,hi:i}=rl(n,"time",t)),{time:s,pos:o}=n[r],{time:a,pos:l}=n[i]);const h=a-s;return h?o+(l-o)*(t-s)/h:o}class HI extends fg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Fp(e,this.min),this._tableRange=Fp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,i=[],s=[];let a,o,l,h,d;for(a=0,o=t.length;a<o;++a)h=t[a],h>=e&&h<=r&&i.push(h);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(a=0,o=i.length;a<o;++a)d=i[a+1],l=i[a-1],h=i[a],Math.round((d+l)/2)!==h&&s.push({time:h,pos:a/(o-1)});return s}_generate(){const t=this.min,e=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(e)||r.length===1)&&r.push(e),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Fp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return Fp(this._table,r*this._tableRange+this._minPos,!0)}}lt(HI,"id","timeseries"),lt(HI,"defaults",fg.defaults);const mM="label";function GI(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function MF(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function yM(n,t){n.labels=t}function vM(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mM;const r=[];n.datasets=t.map(i=>{const s=n.datasets.find(a=>a[e]===i[e]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function NF(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mM;const e={labels:[],datasets:[]};return yM(e,n.labels),vM(e,n.datasets,t),e}function PF(n,t){const{height:e=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:h=[],fallbackContent:d,updateMode:g,...m}=n,v=st.useRef(null),x=st.useRef(null),b=()=>{v.current&&(x.current=new Ml(v.current,{type:a,data:NF(o,s),options:l&&{...l},plugins:h}),GI(t,x.current))},E=()=>{GI(t,null),x.current&&(x.current.destroy(),x.current=null)};return st.useEffect(()=>{!i&&x.current&&l&&MF(x.current,l)},[i,l]),st.useEffect(()=>{!i&&x.current&&yM(x.current.config.data,o.labels)},[i,o.labels]),st.useEffect(()=>{!i&&x.current&&o.datasets&&vM(x.current.config.data,o.datasets,s)},[i,o.datasets]),st.useEffect(()=>{x.current&&(i?(E(),setTimeout(b)):x.current.update(g))},[i,l,o.labels,o.datasets,g]),st.useEffect(()=>{x.current&&(E(),setTimeout(b))},[a]),st.useEffect(()=>(b(),()=>E()),[]),an.createElement("canvas",{ref:v,role:"img",height:e,width:r,...m},d)}const kF=st.forwardRef(PF);function Jw(n,t){return Ml.register(t),st.forwardRef((e,r)=>an.createElement(kF,{...e,ref:r,type:n}))}const LF=Jw("line",c1),VF=Jw("bar",o1),_M=Jw("doughnut",xd);Ml.register(f1,s2,G1);function xM({meals:n,startOfWeek:t}){const e=()=>{const a=[];for(let o=0;o<7;o++){const l=new Date(t);l.setDate(t.getDate()+o),a.push(l.toISOString().split("T")[0])}return a},i={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories",data:e().map(o=>{let l=0;return n.filter(h=>h.date===o).forEach(h=>{h.kcal?l+=h.kcal:h.foodItems.forEach(d=>{d.nutrients.forEach(g=>{const m=parseFloat(g.total)||0;(g.type==="Carbohydrate"||g.type==="Protein")&&(l+=m*4),g.type==="Fat"&&(l+=m*9)})})}),Math.round(l)}),backgroundColor:"deepskyblue"}]},s={plugins:{tooltip:{enabled:!0},legend:{display:!1}},scales:{y:{ticks:{color:"white"},grid:{color:"#444"}},x:{ticks:{color:"white"},grid:{color:"#444"}}}};return k.jsx(VF,{data:i,options:s})}Ml.register(Yu,Zw,Qw);function wM({meals:n,selectedDate:t,goal:e=2e3}){const r=t||new Date().toISOString().split("T")[0],s=n.filter(d=>d.date===r).reduce((d,g)=>{if(g.kcal)return d+g.kcal;let m=0;return g.foodItems.forEach(v=>{v.nutrients.forEach(x=>{const b=parseFloat(x.total)||0;(x.type==="Carbohydrate"||x.type==="Protein")&&(m+=b*4),x.type==="Fat"&&(m+=b*9)})}),d+m},0),a=Math.round(s),o=e-a,l={labels:["Calories Consumed"],datasets:[{data:[s,o>0?o:0],backgroundColor:["deepskyblue","#a9c9f8ff"],borderWidth:0}]},h={cutout:"85%",plugins:{legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:12,weight:"bold"},padding:15,boxWidth:10,boxHeight:10}}}};return k.jsxs("div",{className:"donut-chart",style:{position:"relative"},children:[k.jsx(_M,{data:l,options:h}),k.jsx("div",{className:"DonutWordings",children:o>0?`${o} Remaining`:"Goal Reached"})]})}Ml.register(Yu,Zw,Qw);function bM({meals:n,selectedDate:t}){const e=t||new Date().toISOString().split("T")[0],r=n.filter(m=>m.date===e),i=["Protein","Fat","Carbohydrate","Sugar","Fibre","Salt","Caffeine"],s={};r.forEach(m=>{m.foodItems.forEach(v=>{v.nutrients.forEach(x=>{var T;const b=(T=x.type)==null?void 0:T.toLowerCase();if(!b||b.includes("kcal")||b.includes("calorie"))return;const E=b.charAt(0).toUpperCase()+b.slice(1);if(i.includes(E)){const S=parseFloat(x.total)||0;s[E]=(s[E]||0)+S}})})});const a=Object.entries(s).sort((m,v)=>v[1]-m[1]),o=a.slice(0,4),l=a.slice(4),h=o.map(([m,v],x)=>({label:m,value:v,color:["#4CAF50","#FF9800","#03A9F4","teal"][x%4]}));if(l.length>0){const m=l.reduce((v,[,x])=>v+x,0);h.push({label:"Others",value:m,color:"gray"})}const d={labels:h.map(m=>m.label),datasets:[{data:h.map(m=>m.value),backgroundColor:h.map(m=>m.color),borderWidth:0}]},g={cutout:"85%",plugins:{tooltip:{enabled:!0},legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:8,weight:"bold"},padding:5,boxWidth:5,boxHeight:5}}}};return k.jsx("div",{className:"donut-chart",style:{position:"relative"},children:k.jsx(_M,{data:d,options:g})})}const BF="Left",FF="Right",UF="Up",jF="Down",Xu={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},a2={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},WI="mousemove",qI="mouseup",zF="touchend",HF="touchmove",GF="touchstart";function WF(n,t,e,r){return n>t?e>0?FF:BF:r>0?jF:UF}function YI(n,t){if(t===0)return n;const e=Math.PI/180*t,r=n[0]*Math.cos(e)+n[1]*Math.sin(e),i=n[1]*Math.cos(e)-n[0]*Math.sin(e);return[r,i]}function qF(n,t){const e=d=>{const g="touches"in d;g&&d.touches.length>1||n((m,v)=>{v.trackMouse&&!g&&(document.addEventListener(WI,r),document.addEventListener(qI,a));const{clientX:x,clientY:b}=g?d.touches[0]:d,E=YI([x,b],v.rotationAngle);return v.onTouchStartOrOnMouseDown&&v.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},m),a2),{initial:E.slice(),xy:E,start:d.timeStamp||0})})},r=d=>{n((g,m)=>{const v="touches"in d;if(v&&d.touches.length>1)return g;if(d.timeStamp-g.start>m.swipeDuration)return g.swiping?Object.assign(Object.assign({},g),{swiping:!1}):g;const{clientX:x,clientY:b}=v?d.touches[0]:d,[E,T]=YI([x,b],m.rotationAngle),S=E-g.xy[0],R=T-g.xy[1],P=Math.abs(S),M=Math.abs(R),H=(d.timeStamp||0)-g.start,O=Math.sqrt(P*P+M*M)/(H||1),C=[S/(H||1),R/(H||1)],N=WF(P,M,S,R),B=typeof m.delta=="number"?m.delta:m.delta[N.toLowerCase()]||Xu.delta;if(P<B&&M<B&&!g.swiping)return g;const z={absX:P,absY:M,deltaX:S,deltaY:R,dir:N,event:d,first:g.first,initial:g.initial,velocity:O,vxvy:C};z.first&&m.onSwipeStart&&m.onSwipeStart(z),m.onSwiping&&m.onSwiping(z);let G=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${N}`])&&(G=!0),G&&m.preventScrollOnSwipe&&m.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},g),{first:!1,eventData:z,swiping:!0})})},i=d=>{n((g,m)=>{let v;if(g.swiping&&g.eventData){if(d.timeStamp-g.start<m.swipeDuration){v=Object.assign(Object.assign({},g.eventData),{event:d}),m.onSwiped&&m.onSwiped(v);const x=m[`onSwiped${v.dir}`];x&&x(v)}}else m.onTap&&m.onTap({event:d});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},g),a2),{eventData:v})})},s=()=>{document.removeEventListener(WI,r),document.removeEventListener(qI,a)},a=d=>{s(),i(d)},o=(d,g)=>{let m=()=>{};if(d&&d.addEventListener){const v=Object.assign(Object.assign({},Xu.touchEventOptions),g.touchEventOptions),x=[[GF,e,v],[HF,r,Object.assign(Object.assign({},v),g.preventScrollOnSwipe?{passive:!1}:{})],[zF,i,v]];x.forEach(([b,E,T])=>d.addEventListener(b,E,T)),m=()=>x.forEach(([b,E])=>d.removeEventListener(b,E))}return m},h={ref:d=>{d!==null&&n((g,m)=>{if(g.el===d)return g;const v={};return g.el&&g.el!==d&&g.cleanUpTouch&&(g.cleanUpTouch(),v.cleanUpTouch=void 0),m.trackTouch&&d&&(v.cleanUpTouch=o(d,m)),Object.assign(Object.assign(Object.assign({},g),{el:d}),v)})}};return t.trackMouse&&(h.onMouseDown=e),[h,o]}function YF(n,t,e,r){return!t.trackTouch||!n.el?(n.cleanUpTouch&&n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:void 0})):n.cleanUpTouch?t.preventScrollOnSwipe!==e.preventScrollOnSwipe||t.touchEventOptions.passive!==e.touchEventOptions.passive?(n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})):n:Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})}function XF(n){const{trackMouse:t}=n,e=st.useRef(Object.assign({},a2)),r=st.useRef(Object.assign({},Xu)),i=st.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Xu),n);let s;for(s in Xu)r.current[s]===void 0&&(r.current[s]=Xu[s]);const[a,o]=st.useMemo(()=>qF(l=>e.current=l(e.current,r.current),{trackMouse:t}),[t]);return e.current=YF(e.current,r.current,i.current,o),a}const EM=st.createContext({});function KF(n){const t=st.useRef(null);return t.current===null&&(t.current=n()),t.current}const tb=typeof window<"u",$F=tb?st.useLayoutEffect:st.useEffect,eb=st.createContext(null);function nb(n,t){n.indexOf(t)===-1&&n.push(t)}function rb(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Ia=(n,t,e)=>e>t?t:e<n?n:e;let ib=()=>{};const Ra={},AM=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function TM(n){return typeof n=="object"&&n!==null}const SM=n=>/^0[^.\s]+$/u.test(n);function sb(n){let t;return()=>(t===void 0&&(t=n()),t)}const ki=n=>n,QF=(n,t)=>e=>t(n(e)),Vg=(...n)=>n.reduce(QF),dg=(n,t,e)=>{const r=t-n;return r===0?1:(e-n)/r};class ab{constructor(){this.subscriptions=[]}add(t){return nb(this.subscriptions,t),()=>rb(this.subscriptions,t)}notify(t,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ks=n=>n*1e3,Ls=n=>n/1e3;function CM(n,t){return t?n*(1e3/t):0}const IM=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,ZF=1e-7,JF=12;function tU(n,t,e,r,i){let s,a,o=0;do a=t+(e-t)/2,s=IM(a,r,i)-n,s>0?e=a:t=a;while(Math.abs(s)>ZF&&++o<JF);return a}function Bg(n,t,e,r){if(n===t&&e===r)return ki;const i=s=>tU(s,0,1,n,e);return s=>s===0||s===1?s:IM(i(s),t,r)}const RM=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,DM=n=>t=>1-n(1-t),OM=Bg(.33,1.53,.69,.99),ob=DM(OM),MM=RM(ob),NM=n=>(n*=2)<1?.5*ob(n):.5*(2-Math.pow(2,-10*(n-1))),cb=n=>1-Math.sin(Math.acos(n)),PM=DM(cb),kM=RM(cb),eU=Bg(.42,0,1,1),nU=Bg(0,0,.58,1),LM=Bg(.42,0,.58,1),rU=n=>Array.isArray(n)&&typeof n[0]!="number",VM=n=>Array.isArray(n)&&typeof n[0]=="number",iU={linear:ki,easeIn:eU,easeInOut:LM,easeOut:nU,circIn:cb,circInOut:kM,circOut:PM,backIn:ob,backInOut:MM,backOut:OM,anticipate:NM},sU=n=>typeof n=="string",XI=n=>{if(VM(n)){ib(n.length===4);const[t,e,r,i]=n;return Bg(t,e,r,i)}else if(sU(n))return iU[n];return n},Up=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aU(n,t){let e=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(h.schedule(d),n()),d(o)}const h={schedule:(d,g=!1,m=!1)=>{const x=m&&i?e:r;return g&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[e,r]=[r,e],e.forEach(l),e.clear(),i=!1,s&&(s=!1,h.process(d))}};return h}const oU=40;function BM(n,t){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,a=Up.reduce((R,P)=>(R[P]=aU(s),R),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:d,update:g,preRender:m,render:v,postRender:x}=a,b=()=>{const R=Ra.useManualTiming?i.timestamp:performance.now();e=!1,Ra.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,oU),1)),i.timestamp=R,i.isProcessing=!0,o.process(i),l.process(i),h.process(i),d.process(i),g.process(i),m.process(i),v.process(i),x.process(i),i.isProcessing=!1,e&&t&&(r=!1,n(b))},E=()=>{e=!0,r=!0,i.isProcessing||n(b)};return{schedule:Up.reduce((R,P)=>{const M=a[P];return R[P]=(H,O=!1,C=!1)=>(e||E(),M.schedule(H,O,C)),R},{}),cancel:R=>{for(let P=0;P<Up.length;P++)a[Up[P]].cancel(R)},state:i,steps:a}}const{schedule:nn,cancel:Ho,state:pr,steps:L_}=BM(typeof requestAnimationFrame<"u"?requestAnimationFrame:ki,!0);let d1;function cU(){d1=void 0}const Kr={now:()=>(d1===void 0&&Kr.set(pr.isProcessing||Ra.useManualTiming?pr.timestamp:performance.now()),d1),set:n=>{d1=n,queueMicrotask(cU)}},FM=n=>t=>typeof t=="string"&&t.startsWith(n),lb=FM("--"),lU=FM("var(--"),ub=n=>lU(n)?uU.test(n.split("/*")[0].trim()):!1,uU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},gg={...Lh,transform:n=>Ia(0,1,n)},jp={...Lh,default:1},jd=n=>Math.round(n*1e5)/1e5,hb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hU(n){return n==null}const fU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fb=(n,t)=>e=>!!(typeof e=="string"&&fU.test(e)&&e.startsWith(n)||t&&!hU(e)&&Object.prototype.hasOwnProperty.call(e,t)),UM=(n,t,e)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(hb);return{[n]:parseFloat(i),[t]:parseFloat(s),[e]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},dU=n=>Ia(0,255,n),V_={...Lh,transform:n=>Math.round(dU(n))},il={test:fb("rgb","red"),parse:UM("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:r=1})=>"rgba("+V_.transform(n)+", "+V_.transform(t)+", "+V_.transform(e)+", "+jd(gg.transform(r))+")"};function gU(n){let t="",e="",r="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const o2={test:fb("#"),parse:gU,transform:il.transform},Fg=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),wo=Fg("deg"),Vs=Fg("%"),Xt=Fg("px"),pU=Fg("vh"),mU=Fg("vw"),KI={...Vs,parse:n=>Vs.parse(n)/100,transform:n=>Vs.transform(n*100)},Ku={test:fb("hsl","hue"),parse:UM("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:r=1})=>"hsla("+Math.round(n)+", "+Vs.transform(jd(t))+", "+Vs.transform(jd(e))+", "+jd(gg.transform(r))+")"},Pn={test:n=>il.test(n)||o2.test(n)||Ku.test(n),parse:n=>il.test(n)?il.parse(n):Ku.test(n)?Ku.parse(n):o2.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?il.transform(n):Ku.transform(n),getAnimatableNone:n=>{const t=Pn.parse(n);return t.alpha=0,Pn.transform(t)}},yU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vU(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(hb))==null?void 0:t.length)||0)+(((e=n.match(yU))==null?void 0:e.length)||0)>0}const jM="number",zM="color",_U="var",xU="var(",$I="${}",wU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pg(n){const t=n.toString(),e=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(wU,l=>(Pn.test(l)?(r.color.push(s),i.push(zM),e.push(Pn.parse(l))):l.startsWith(xU)?(r.var.push(s),i.push(_U),e.push(l)):(r.number.push(s),i.push(jM),e.push(parseFloat(l))),++s,$I)).split($I);return{values:e,split:o,indexes:r,types:i}}function HM(n){return pg(n).values}function GM(n){const{split:t,types:e}=pg(n),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=e[a];o===jM?s+=jd(i[a]):o===zM?s+=Pn.transform(i[a]):s+=i[a]}return s}}const bU=n=>typeof n=="number"?0:Pn.test(n)?Pn.getAnimatableNone(n):n;function EU(n){const t=HM(n);return GM(n)(t.map(bU))}const Go={test:vU,parse:HM,createTransformer:GM,getAnimatableNone:EU};function B_(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function AU({hue:n,saturation:t,lightness:e,alpha:r}){n/=360,t/=100,e/=100;let i=0,s=0,a=0;if(!t)i=s=a=e;else{const o=e<.5?e*(1+t):e+t-e*t,l=2*e-o;i=B_(l,o,n+1/3),s=B_(l,o,n),a=B_(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function W1(n,t){return e=>e>0?t:n}const on=(n,t,e)=>n+(t-n)*e,F_=(n,t,e)=>{const r=n*n,i=e*(t*t-r)+r;return i<0?0:Math.sqrt(i)},TU=[o2,il,Ku],SU=n=>TU.find(t=>t.test(n));function QI(n){const t=SU(n);if(!t)return!1;let e=t.parse(n);return t===Ku&&(e=AU(e)),e}const ZI=(n,t)=>{const e=QI(n),r=QI(t);if(!e||!r)return W1(n,t);const i={...e};return s=>(i.red=F_(e.red,r.red,s),i.green=F_(e.green,r.green,s),i.blue=F_(e.blue,r.blue,s),i.alpha=on(e.alpha,r.alpha,s),il.transform(i))},c2=new Set(["none","hidden"]);function CU(n,t){return c2.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function IU(n,t){return e=>on(n,t,e)}function db(n){return typeof n=="number"?IU:typeof n=="string"?ub(n)?W1:Pn.test(n)?ZI:OU:Array.isArray(n)?WM:typeof n=="object"?Pn.test(n)?ZI:RU:W1}function WM(n,t){const e=[...n],r=e.length,i=n.map((s,a)=>db(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)e[a]=i[a](s);return e}}function RU(n,t){const e={...n,...t},r={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(r[i]=db(n[i])(n[i],t[i]));return i=>{for(const s in r)e[s]=r[s](i);return e}}function DU(n,t){const e=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=n.indexes[s][r[s]],o=n.values[a]??0;e[i]=o,r[s]++}return e}const OU=(n,t)=>{const e=Go.createTransformer(t),r=pg(n),i=pg(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?c2.has(n)&&!i.values.length||c2.has(t)&&!r.values.length?CU(n,t):Vg(WM(DU(r,i),i.values),e):W1(n,t)};function qM(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?on(n,t,e):db(n)(n,t)}const MU=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>nn.update(t,e),stop:()=>Ho(t),now:()=>pr.isProcessing?pr.timestamp:Kr.now()}},YM=(n,t,e=10)=>{let r="";const i=Math.max(Math.round(t/e),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},q1=2e4;function gb(n){let t=0;const e=50;let r=n.next(t);for(;!r.done&&t<q1;)t+=e,r=n.next(t);return t>=q1?1/0:t}function NU(n,t=100,e){const r=e({...n,keyframes:[0,t]}),i=Math.min(gb(r),q1);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Ls(i)}}const PU=5;function XM(n,t,e){const r=Math.max(t-PU,0);return CM(e-n(r),t-r)}const dn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},U_=.001;function kU({duration:n=dn.duration,bounce:t=dn.bounce,velocity:e=dn.velocity,mass:r=dn.mass}){let i,s,a=1-t;a=Ia(dn.minDamping,dn.maxDamping,a),n=Ia(dn.minDuration,dn.maxDuration,Ls(n)),a<1?(i=h=>{const d=h*a,g=d*n,m=d-e,v=l2(h,a),x=Math.exp(-g);return U_-m/v*x},s=h=>{const g=h*a*n,m=g*e+e,v=Math.pow(a,2)*Math.pow(h,2)*n,x=Math.exp(-g),b=l2(Math.pow(h,2),a);return(-i(h)+U_>0?-1:1)*((m-v)*x)/b}):(i=h=>{const d=Math.exp(-h*n),g=(h-e)*n+1;return-U_+d*g},s=h=>{const d=Math.exp(-h*n),g=(e-h)*(n*n);return d*g});const o=5/n,l=VU(i,s,o);if(n=ks(n),isNaN(l))return{stiffness:dn.stiffness,damping:dn.damping,duration:n};{const h=Math.pow(l,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const LU=12;function VU(n,t,e){let r=e;for(let i=1;i<LU;i++)r=r-n(r)/t(r);return r}function l2(n,t){return n*Math.sqrt(1-t*t)}const BU=["duration","bounce"],FU=["stiffness","damping","mass"];function JI(n,t){return t.some(e=>n[e]!==void 0)}function UU(n){let t={velocity:dn.velocity,stiffness:dn.stiffness,damping:dn.damping,mass:dn.mass,isResolvedFromDuration:!1,...n};if(!JI(n,FU)&&JI(n,BU))if(n.visualDuration){const e=n.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,s=2*Ia(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:dn.mass,stiffness:i,damping:s}}else{const e=kU(n);t={...t,...e,mass:dn.mass},t.isResolvedFromDuration=!0}return t}function Y1(n=dn.visualDuration,t=dn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:i}=e;const s=e.keyframes[0],a=e.keyframes[e.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:h,mass:d,duration:g,velocity:m,isResolvedFromDuration:v}=UU({...e,velocity:-Ls(e.velocity||0)}),x=m||0,b=h/(2*Math.sqrt(l*d)),E=a-s,T=Ls(Math.sqrt(l/d)),S=Math.abs(E)<5;r||(r=S?dn.restSpeed.granular:dn.restSpeed.default),i||(i=S?dn.restDelta.granular:dn.restDelta.default);let R;if(b<1){const M=l2(T,b);R=H=>{const O=Math.exp(-b*T*H);return a-O*((x+b*T*E)/M*Math.sin(M*H)+E*Math.cos(M*H))}}else if(b===1)R=M=>a-Math.exp(-T*M)*(E+(x+T*E)*M);else{const M=T*Math.sqrt(b*b-1);R=H=>{const O=Math.exp(-b*T*H),C=Math.min(M*H,300);return a-O*((x+b*T*E)*Math.sinh(C)+M*E*Math.cosh(C))/M}}const P={calculatedDuration:v&&g||null,next:M=>{const H=R(M);if(v)o.done=M>=g;else{let O=M===0?x:0;b<1&&(O=M===0?ks(x):XM(R,M,H));const C=Math.abs(O)<=r,N=Math.abs(a-H)<=i;o.done=C&&N}return o.value=o.done?a:H,o},toString:()=>{const M=Math.min(gb(P),q1),H=YM(O=>P.next(M*O).value,M,30);return M+"ms "+H},toTransition:()=>{}};return P}Y1.applyToOptions=n=>{const t=NU(n,100,Y1);return n.ease=t.ease,n.duration=ks(t.duration),n.type="keyframes",n};function u2({keyframes:n,velocity:t=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:d}){const g=n[0],m={done:!1,value:g},v=C=>o!==void 0&&C<o||l!==void 0&&C>l,x=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let b=e*t;const E=g+b,T=a===void 0?E:a(E);T!==E&&(b=T-g);const S=C=>-b*Math.exp(-C/r),R=C=>T+S(C),P=C=>{const N=S(C),B=R(C);m.done=Math.abs(N)<=h,m.value=m.done?T:B};let M,H;const O=C=>{v(m.value)&&(M=C,H=Y1({keyframes:[m.value,x(m.value)],velocity:XM(R,C,m.value),damping:i,stiffness:s,restDelta:h,restSpeed:d}))};return O(0),{calculatedDuration:null,next:C=>{let N=!1;return!H&&M===void 0&&(N=!0,P(C),O(C)),M!==void 0&&C>=M?H.next(C-M):(!N&&P(C),m)}}}function jU(n,t,e){const r=[],i=e||Ra.mix||qM,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(t){const l=Array.isArray(t)?t[a]||ki:t;o=Vg(l,o)}r.push(o)}return r}function zU(n,t,{clamp:e=!0,ease:r,mixer:i}={}){const s=n.length;if(ib(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=jU(t,r,i),l=o.length,h=d=>{if(a&&d<n[0])return t[0];let g=0;if(l>1)for(;g<n.length-2&&!(d<n[g+1]);g++);const m=dg(n[g],n[g+1],d);return o[g](m)};return e?d=>h(Ia(n[0],n[s-1],d)):h}function HU(n,t){const e=n[n.length-1];for(let r=1;r<=t;r++){const i=dg(0,t,r);n.push(on(e,1,i))}}function GU(n){const t=[0];return HU(t,n.length-1),t}function WU(n,t){return n.map(e=>e*t)}function qU(n,t){return n.map(()=>t||LM).splice(0,n.length-1)}function zd({duration:n=300,keyframes:t,times:e,ease:r="easeInOut"}){const i=rU(r)?r.map(XI):XI(r),s={done:!1,value:t[0]},a=WU(e&&e.length===t.length?e:GU(t),n),o=zU(a,t,{ease:Array.isArray(i)?i:qU(t,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const YU=n=>n!==null;function pb(n,{repeat:t,repeatType:e="loop"},r,i=1){const s=n.filter(YU),o=i<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const XU={decay:u2,inertia:u2,tween:zd,keyframes:zd,spring:Y1};function KM(n){typeof n.type=="string"&&(n.type=XU[n.type])}class mb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const KU=n=>n/100;class yb extends mb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:e}=this.options;e&&e.updatedAt!==Kr.now()&&this.tick(Kr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;KM(t);const{type:e=zd,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=e||zd;l!==zd&&typeof o[0]!="number"&&(this.mixKeyframes=Vg(KU,qM(o[0],o[1])),o=[0,100]);const h=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=gb(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:d,repeat:g,repeatType:m,repeatDelay:v,type:x,onUpdate:b,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,P=r;if(g){const C=Math.min(this.currentTime,i)/o;let N=Math.floor(C),B=C%1;!B&&C>=1&&(B=1),B===1&&N--,N=Math.min(N,g+1),!!(N%2)&&(m==="reverse"?(B=1-B,v&&(B-=v/o)):m==="mirror"&&(P=a)),R=Ia(0,1,B)*o}const M=S?{done:!1,value:d[0]}:P.next(R);s&&(M.value=s(M.value));let{done:H}=M;!S&&l!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return O&&x!==u2&&(M.value=pb(d,this.options,E,this.speed)),b&&b(M.value),O&&this.finish(),M}then(t,e){return this.finished.then(t,e)}get duration(){return Ls(this.calculatedDuration)}get time(){return Ls(this.currentTime)}set time(t){var e;t=ks(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Kr.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Ls(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=MU,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function $U(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const sl=n=>n*180/Math.PI,h2=n=>{const t=sl(Math.atan2(n[1],n[0]));return f2(t)},QU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:h2,rotateZ:h2,skewX:n=>sl(Math.atan(n[1])),skewY:n=>sl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},f2=n=>(n=n%360,n<0&&(n+=360),n),t3=h2,e3=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),n3=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),ZU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:e3,scaleY:n3,scale:n=>(e3(n)+n3(n))/2,rotateX:n=>f2(sl(Math.atan2(n[6],n[5]))),rotateY:n=>f2(sl(Math.atan2(-n[2],n[0]))),rotateZ:t3,rotate:t3,skewX:n=>sl(Math.atan(n[4])),skewY:n=>sl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function d2(n){return n.includes("scale")?1:0}function g2(n,t){if(!n||n==="none")return d2(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=ZU,i=e;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=QU,i=o}if(!i)return d2(t);const s=r[t],a=i[1].split(",").map(tj);return typeof s=="function"?s(a):a[s]}const JU=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return g2(e,t)};function tj(n){return parseFloat(n.trim())}const Vh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bh=new Set(Vh),r3=n=>n===Lh||n===Xt,ej=new Set(["x","y","z"]),nj=Vh.filter(n=>!ej.has(n));function rj(n){const t=[];return nj.forEach(e=>{const r=n.getValue(e);r!==void 0&&(t.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),t}const hl={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>g2(t,"x"),y:(n,{transform:t})=>g2(t,"y")};hl.translateX=hl.x;hl.translateY=hl.y;const fl=new Set;let p2=!1,m2=!1,y2=!1;function $M(){if(m2){const n=Array.from(fl).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),e=new Map;t.forEach(r=>{const i=rj(r);i.length&&(e.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}m2=!1,p2=!1,fl.forEach(n=>n.complete(y2)),fl.clear()}function QM(){fl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(m2=!0)})}function ij(){y2=!0,QM(),$M(),y2=!1}class vb{constructor(t,e,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(fl.add(this),p2||(p2=!0,nn.read(QM),nn.resolveKeyframes($M))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&e){const o=r.readValue(e,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}$U(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),fl.delete(this)}cancel(){this.state==="scheduled"&&(fl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sj=n=>n.startsWith("--");function aj(n,t,e){sj(t)?n.style.setProperty(t,e):n.style[t]=e}const oj=sb(()=>window.ScrollTimeline!==void 0),cj={};function lj(n,t){const e=sb(n);return()=>cj[t]??e()}const ZM=lj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ad=([n,t,e,r])=>`cubic-bezier(${n}, ${t}, ${e}, ${r})`,i3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ad([0,.65,.55,1]),circOut:Ad([.55,0,1,.45]),backIn:Ad([.31,.01,.66,-.59]),backOut:Ad([.33,1.53,.69,.99])};function JM(n,t){if(n)return typeof n=="function"?ZM()?YM(n,t):"ease-out":VM(n)?Ad(n):Array.isArray(n)?n.map(e=>JM(e,t)||i3.easeOut):i3[n]}function uj(n,t,e,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h=void 0){const d={[t]:e};l&&(d.offset=l);const g=JM(o,i);Array.isArray(g)&&(d.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),n.animate(d,m)}function tN(n){return typeof n=="function"&&"applyToOptions"in n}function hj({type:n,...t}){return tN(n)&&ZM()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class fj extends mb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,ib(typeof t.type!="string");const h=hj(t);this.animation=uj(e,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=pb(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):aj(e,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,r;const t=((r=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:r.call(e).duration)||0;return Ls(Number(t))}get time(){return Ls(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ks(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&oj()?(this.animation.timeline=t,ki):e(this)}}const eN={anticipate:NM,backInOut:MM,circInOut:kM};function dj(n){return n in eN}function gj(n){typeof n.ease=="string"&&dj(n.ease)&&(n.ease=eN[n.ease])}const s3=10;class pj extends fj{constructor(t){gj(t),KM(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const o=new yb({...a,autoplay:!1}),l=ks(this.finishedTime??this.time);e.setWithVelocity(o.sample(l-s3).value,o.sample(l).value,s3),o.stop()}}const a3=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Go.test(n)||n==="0")&&!n.startsWith("url("));function mj(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function yj(n,t,e,r){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],a=a3(i,t),o=a3(s,t);return!a||!o?!1:mj(n)||(e==="spring"||tN(e))&&r}function v2(n){n.duration=0,n.type}const vj=new Set(["opacity","clipPath","filter","transform"]),_j=sb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xj(n){var d;const{motionValue:t,name:e,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=t.owner.getProps();return _j()&&e&&vj.has(e)&&(e!=="transform"||!h)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const wj=40;class bj extends mb{constructor({autoplay:t=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:h,element:d,...g}){var x;super(),this.stop=()=>{var b,E;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Kr.now();const m={autoplay:t,delay:e,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:h,element:d,...g},v=(d==null?void 0:d.KeyframeResolver)||vb;this.keyframeResolver=new v(o,(b,E,T)=>this.onKeyframesResolved(b,E,m,!T),l,h,d),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,e,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:h,onUpdate:d}=r;this.resolvedAt=Kr.now(),yj(t,s,a,o)||((Ra.instantAnimations||!l)&&(d==null||d(pb(t,r,e))),t[0]=t[t.length-1],v2(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:t},v=!h&&xj(m)?new pj({...m,element:m.motionValue.owner.current}):new yb(m);v.finished.then(()=>this.notifyFinished()).catch(ki),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),ij()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Ej=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Aj(n){const t=Ej.exec(n);if(!t)return[,];const[,e,r,i]=t;return[`--${e??r}`,i]}function nN(n,t,e=1){const[r,i]=Aj(n);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return AM(a)?parseFloat(a):a}return ub(i)?nN(i,t,e+1):i}function _b(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const rN=new Set(["width","height","top","left","right","bottom",...Vh]),Tj={test:n=>n==="auto",parse:n=>n},iN=n=>t=>t.test(n),sN=[Lh,Xt,Vs,wo,mU,pU,Tj],o3=n=>sN.find(iN(n));function Sj(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||SM(n):!0}const Cj=new Set(["brightness","contrast","saturate","opacity"]);function Ij(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=e.match(hb)||[];if(!r)return n;const i=e.replace(r,"");let s=Cj.has(t)?1:0;return r!==e&&(s*=100),t+"("+s+i+")"}const Rj=/\b([a-z-]*)\(.*?\)/gu,_2={...Go,getAnimatableNone:n=>{const t=n.match(Rj);return t?t.map(Ij).join(" "):n}},c3={...Lh,transform:Math.round},Dj={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:jp,scaleX:jp,scaleY:jp,scaleZ:jp,skew:wo,skewX:wo,skewY:wo,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:gg,originX:KI,originY:KI,originZ:Xt},xb={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...Dj,zIndex:c3,fillOpacity:gg,strokeOpacity:gg,numOctaves:c3},Oj={...xb,color:Pn,backgroundColor:Pn,outlineColor:Pn,fill:Pn,stroke:Pn,borderColor:Pn,borderTopColor:Pn,borderRightColor:Pn,borderBottomColor:Pn,borderLeftColor:Pn,filter:_2,WebkitFilter:_2},aN=n=>Oj[n];function oN(n,t){let e=aN(n);return e!==_2&&(e=Go),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Mj=new Set(["auto","none","0"]);function Nj(n,t,e){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Mj.has(s)&&pg(s).values.length&&(i=n[r]),r++}if(i&&e)for(const s of t)n[s]=oN(e,i)}class Pj extends vb{constructor(t,e,r,i,s){super(t,e,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),ub(h))){const d=nN(h,e.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!rN.has(r)||t.length!==2)return;const[i,s]=t,a=o3(i),o=o3(s);if(a!==o)if(r3(a)&&r3(o))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else hl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||Sj(t[i]))&&r.push(i);r.length&&Nj(t,r,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:e,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=hl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,h])=>{t.getValue(l).set(h)}),this.resolveNoneKeyframes()}}function kj(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(e==null?void 0:e[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const cN=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function Lj(n){return TM(n)&&"offsetHeight"in n}const l3=30,Vj=n=>!isNaN(parseFloat(n));class Bj{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Kr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Kr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Vj(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ab);const r=this.events[t].add(e);return t==="change"?()=>{r(),nn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Kr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>l3)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,l3);return CM(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fh(n,t){return new Bj(n,t)}const{schedule:wb}=BM(queueMicrotask,!1),Ki={x:!1,y:!1};function lN(){return Ki.x||Ki.y}function Fj(n){return n==="x"||n==="y"?Ki[n]?null:(Ki[n]=!0,()=>{Ki[n]=!1}):Ki.x||Ki.y?null:(Ki.x=Ki.y=!0,()=>{Ki.x=Ki.y=!1})}function uN(n,t){const e=kj(n),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[e,i,()=>r.abort()]}function u3(n){return!(n.pointerType==="touch"||lN())}function Uj(n,t,e={}){const[r,i,s]=uN(n,e),a=o=>{if(!u3(o))return;const{target:l}=o,h=t(l,o);if(typeof h!="function"||!l)return;const d=g=>{u3(g)&&(h(g),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const hN=(n,t)=>t?n===t?!0:hN(n,t.parentElement):!1,bb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,jj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zj(n){return jj.has(n.tagName)||n.tabIndex!==-1}const g1=new WeakSet;function h3(n){return t=>{t.key==="Enter"&&n(t)}}function j_(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Hj=(n,t)=>{const e=n.currentTarget;if(!e)return;const r=h3(()=>{if(g1.has(e))return;j_(e,"down");const i=h3(()=>{j_(e,"up")}),s=()=>j_(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",r,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),t)};function f3(n){return bb(n)&&!lN()}function Gj(n,t,e={}){const[r,i,s]=uN(n,e),a=o=>{const l=o.currentTarget;if(!f3(o))return;g1.add(l);const h=t(l,o),d=(v,x)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),g1.has(l)&&g1.delete(l),f3(v)&&typeof h=="function"&&h(v,{success:x})},g=v=>{d(v,l===window||l===document||e.useGlobalTarget||hN(l,v.target))},m=v=>{d(v,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(e.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),Lj(o)&&(o.addEventListener("focus",h=>Hj(h,i)),!zj(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function fN(n){return TM(n)&&"ownerSVGElement"in n}function Wj(n){return fN(n)&&n.tagName==="svg"}const Ir=n=>!!(n&&n.getVelocity),qj=[...sN,Pn,Go],Yj=n=>qj.find(iN(n)),dN=st.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Xj(n=!0){const t=st.useContext(eb);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,s=st.useId();st.useEffect(()=>{if(n)return i(s)},[n]);const a=st.useCallback(()=>n&&r&&r(s),[s,r,n]);return!e&&r?[!1,a]:[!0]}const gN=st.createContext({strict:!1}),d3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dh={};for(const n in d3)dh[n]={isEnabled:t=>d3[n].some(e=>!!t[e])};function Kj(n){for(const t in n)dh[t]={...dh[t],...n[t]}}const $j=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function X1(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||$j.has(n)}let pN=n=>!X1(n);function Qj(n){typeof n=="function"&&(pN=t=>t.startsWith("on")?!X1(t):n(t))}try{Qj(require("@emotion/is-prop-valid").default)}catch{}function Zj(n,t,e){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(pN(i)||e===!0&&X1(i)||!t&&!X1(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Nm=st.createContext({});function Pm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function mg(n){return typeof n=="string"||Array.isArray(n)}const Eb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ab=["initial",...Eb];function km(n){return Pm(n.animate)||Ab.some(t=>mg(n[t]))}function mN(n){return!!(km(n)||n.variants)}function Jj(n,t){if(km(n)){const{initial:e,animate:r}=n;return{initial:e===!1||mg(e)?e:void 0,animate:mg(r)?r:void 0}}return n.inherit!==!1?t:{}}function tz(n){const{initial:t,animate:e}=Jj(n,st.useContext(Nm));return st.useMemo(()=>({initial:t,animate:e}),[g3(t),g3(e)])}function g3(n){return Array.isArray(n)?n.join(" "):n}const yg={};function ez(n){for(const t in n)yg[t]=n[t],lb(t)&&(yg[t].isCSSVariable=!0)}function yN(n,{layout:t,layoutId:e}){return Bh.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!yg[n]||n==="opacity")}const nz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rz=Vh.length;function iz(n,t,e){let r="",i=!0;for(let s=0;s<rz;s++){const a=Vh[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||e){const h=cN(o,xb[a]);if(!l){i=!1;const d=nz[a]||a;r+=`${d}(${h}) `}e&&(t[a]=h)}}return r=r.trim(),e?r=e(t,i?"":r):i&&(r="none"),r}function Tb(n,t,e){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in t){const h=t[l];if(Bh.has(l)){a=!0;continue}else if(lb(l)){i[l]=h;continue}else{const d=cN(h,xb[l]);l.startsWith("origin")?(o=!0,s[l]=d):r[l]=d}}if(t.transform||(a||e?r.transform=iz(t,n.transform,e):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${h} ${d}`}}const Sb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vN(n,t,e){for(const r in t)!Ir(t[r])&&!yN(r,e)&&(n[r]=t[r])}function sz({transformTemplate:n},t){return st.useMemo(()=>{const e=Sb();return Tb(e,t,n),Object.assign({},e.vars,e.style)},[t])}function az(n,t){const e=n.style||{},r={};return vN(r,e,n),Object.assign(r,sz(n,t)),r}function oz(n,t){const e={},r=az(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=r,e}const cz={offset:"stroke-dashoffset",array:"stroke-dasharray"},lz={offset:"strokeDashoffset",array:"strokeDasharray"};function uz(n,t,e=1,r=0,i=!0){n.pathLength=1;const s=i?cz:lz;n[s.offset]=Xt.transform(-r);const a=Xt.transform(t),o=Xt.transform(e);n[s.array]=`${a} ${o}`}function _N(n,{attrX:t,attrY:e,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,h,d){if(Tb(n,o,h),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:m}=n;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),r!==void 0&&(g.scale=r),i!==void 0&&uz(g,i,s,a,!1)}const xN=()=>({...Sb(),attrs:{}}),wN=n=>typeof n=="string"&&n.toLowerCase()==="svg";function hz(n,t,e,r){const i=st.useMemo(()=>{const s=xN();return _N(s,t,wN(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};vN(s,n.style,n),i.style={...s,...i.style}}return i}const fz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cb(n){return typeof n!="string"||n.includes("-")?!1:!!(fz.indexOf(n)>-1||/[A-Z]/u.test(n))}function dz(n,t,e,{latestValues:r},i,s=!1){const o=(Cb(n)?hz:oz)(t,r,i,n),l=Zj(t,typeof n=="string",s),h=n!==st.Fragment?{...l,...o,ref:e}:{},{children:d}=t,g=st.useMemo(()=>Ir(d)?d.get():d,[d]);return st.createElement(n,{...h,children:g})}function p3(n){const t=[{},{}];return n==null||n.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function Ib(n,t,e,r){if(typeof t=="function"){const[i,s]=p3(r);t=t(e!==void 0?e:n.custom,i,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,s]=p3(r);t=t(e!==void 0?e:n.custom,i,s)}return t}function p1(n){return Ir(n)?n.get():n}function gz({scrapeMotionValuesFromProps:n,createRenderState:t},e,r,i){return{latestValues:pz(e,r,i,n),renderState:t()}}function pz(n,t,e,r){const i={},s=r(n,{});for(const m in s)i[m]=p1(s[m]);let{initial:a,animate:o}=n;const l=km(n),h=mN(n);t&&h&&!l&&n.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=e?e.initial===!1:!1;d=d||a===!1;const g=d?o:a;if(g&&typeof g!="boolean"&&!Pm(g)){const m=Array.isArray(g)?g:[g];for(let v=0;v<m.length;v++){const x=Ib(n,m[v]);if(x){const{transitionEnd:b,transition:E,...T}=x;for(const S in T){let R=T[S];if(Array.isArray(R)){const P=d?R.length-1:0;R=R[P]}R!==null&&(i[S]=R)}for(const S in b)i[S]=b[S]}}}return i}const bN=n=>(t,e)=>{const r=st.useContext(Nm),i=st.useContext(eb),s=()=>gz(n,t,r,i);return e?s():KF(s)};function Rb(n,t,e){var s;const{style:r}=n,i={};for(const a in r)(Ir(r[a])||t.style&&Ir(t.style[a])||yN(a,n)||((s=e==null?void 0:e.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const mz=bN({scrapeMotionValuesFromProps:Rb,createRenderState:Sb});function EN(n,t,e){const r=Rb(n,t,e);for(const i in n)if(Ir(n[i])||Ir(t[i])){const s=Vh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const yz=bN({scrapeMotionValuesFromProps:EN,createRenderState:xN}),vz=Symbol.for("motionComponentSymbol");function $u(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function _z(n,t,e){return st.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),e&&(typeof e=="function"?e(r):$u(e)&&(e.current=r))},[t])}const Db=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xz="framerAppearId",AN="data-"+Db(xz),TN=st.createContext({});function wz(n,t,e,r,i){var b,E;const{visualElement:s}=st.useContext(Nm),a=st.useContext(gN),o=st.useContext(eb),l=st.useContext(dN).reducedMotion,h=st.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(n,{visualState:t,parent:s,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=h.current,g=st.useContext(TN);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&bz(h.current,e,i,g);const m=st.useRef(!1);st.useInsertionEffect(()=>{d&&m.current&&d.update(e,o)});const v=e[AN],x=st.useRef(!!v&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,v))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,v)));return $F(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),st.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,v)}),x.current=!1))}),d}function bz(n,t,e,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:d}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:SN(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&$u(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:h})}function SN(n){if(n)return n.options.allowProjection!==!1?n.projection:SN(n.parent)}function z_(n,{forwardMotionProps:t=!1}={},e,r){e&&Kj(e);const i=Cb(n)?yz:mz;function s(o,l){let h;const d={...st.useContext(dN),...o,layoutId:Ez(o)},{isStatic:g}=d,m=tz(o),v=i(o,g);if(!g&&tb){Az();const x=Tz(d);h=x.MeasureLayout,m.visualElement=wz(n,v,d,r,x.ProjectionNode)}return k.jsxs(Nm.Provider,{value:m,children:[h&&m.visualElement?k.jsx(h,{visualElement:m.visualElement,...d}):null,dz(n,o,_z(v,m.visualElement,l),v,g,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=st.forwardRef(s);return a[vz]=n,a}function Ez({layoutId:n}){const t=st.useContext(EM).id;return t&&n!==void 0?t+"-"+n:n}function Az(n,t){st.useContext(gN).strict}function Tz(n){const{drag:t,layout:e}=dh;if(!t&&!e)return{};const r={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Sz(n,t){if(typeof Proxy>"u")return z_;const e=new Map,r=(s,a)=>z_(s,a,n,t),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(e.has(a)||e.set(a,z_(a,void 0,n,t)),e.get(a))})}function CN({top:n,left:t,right:e,bottom:r}){return{x:{min:t,max:e},y:{min:n,max:r}}}function Cz({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function Iz(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function H_(n){return n===void 0||n===1}function x2({scale:n,scaleX:t,scaleY:e}){return!H_(n)||!H_(t)||!H_(e)}function qc(n){return x2(n)||IN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function IN(n){return m3(n.x)||m3(n.y)}function m3(n){return n&&n!=="0%"}function K1(n,t,e){const r=n-e,i=t*r;return e+i}function y3(n,t,e,r,i){return i!==void 0&&(n=K1(n,i,r)),K1(n,e,r)+t}function w2(n,t=0,e=1,r,i){n.min=y3(n.min,t,e,r,i),n.max=y3(n.max,t,e,r,i)}function RN(n,{x:t,y:e}){w2(n.x,t.translate,t.scale,t.originPoint),w2(n.y,e.translate,e.scale,e.originPoint)}const v3=.999999999999,_3=1.0000000000001;function Rz(n,t,e,r=!1){const i=e.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=e[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Zu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,RN(n,a)),r&&qc(s.latestValues)&&Zu(n,s.latestValues))}t.x<_3&&t.x>v3&&(t.x=1),t.y<_3&&t.y>v3&&(t.y=1)}function Qu(n,t){n.min=n.min+t,n.max=n.max+t}function x3(n,t,e,r,i=.5){const s=on(n.min,n.max,i);w2(n,t,e,s,r)}function Zu(n,t){x3(n.x,t.x,t.scaleX,t.scale,t.originX),x3(n.y,t.y,t.scaleY,t.scale,t.originY)}function DN(n,t){return CN(Iz(n.getBoundingClientRect(),t))}function Dz(n,t,e){const r=DN(n,e),{scroll:i}=t;return i&&(Qu(r.x,i.offset.x),Qu(r.y,i.offset.y)),r}const w3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ju=()=>({x:w3(),y:w3()}),b3=()=>({min:0,max:0}),En=()=>({x:b3(),y:b3()}),b2={current:null},ON={current:!1};function Oz(){if(ON.current=!0,!!tb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>b2.current=n.matches;n.addEventListener("change",t),t()}else b2.current=!1}const Mz=new WeakMap;function Nz(n,t,e){for(const r in t){const i=t[r],s=e[r];if(Ir(i))n.addValue(r,i);else if(Ir(s))n.addValue(r,fh(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,fh(a!==void 0?a:i,{owner:n}))}}for(const r in e)t[r]===void 0&&n.removeValue(r);return t}const E3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Pz{scrapeMotionValuesFromProps(t,e,r){return{}}constructor({parent:t,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Kr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,nn.render(this.render,!1,!0))};const{latestValues:l,renderState:h}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=km(e),this.isVariantNode=mN(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in g){const v=g[m];l[m]!==void 0&&Ir(v)&&v.set(l[m])}}mount(t){this.current=t,Mz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),ON.current||Oz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:b2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ho(this.notifyUpdate),Ho(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Bh.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&nn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in dh){const e=dh[t];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):En()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<E3.length;r++){const i=E3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Nz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const r=this.values.get(t);e!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&e!==void 0&&(r=fh(e===null?void 0:e,{owner:this}),this.addValue(t,r)),r}readValue(t,e){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(AM(r)||SM(r))?r=parseFloat(r):!Yj(r)&&Go.test(e)&&(r=oN(t,e)),this.setBaseTarget(t,Ir(r)?r.get():r)),Ir(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var s;const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=Ib(this.props,e,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ir(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new ab),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){wb.render(this.render)}}class MN extends Pz{constructor(){super(...arguments),this.KeyframeResolver=Pj}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:r}){delete e[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ir(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function NN(n,{style:t,vars:e},r,i){const s=n.style;let a;for(a in t)s[a]=t[a];i==null||i.applyProjectionStyles(s,r);for(a in e)s.setProperty(a,e[a])}function kz(n){return window.getComputedStyle(n)}class Lz extends MN{constructor(){super(...arguments),this.type="html",this.renderInstance=NN}readValueFromInstance(t,e){var r;if(Bh.has(e))return(r=this.projection)!=null&&r.isProjecting?d2(e):JU(t,e);{const i=kz(t),s=(lb(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return DN(t,e)}build(t,e,r){Tb(t,e,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,r){return Rb(t,e,r)}}const PN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vz(n,t,e,r){NN(n,t,void 0,r);for(const i in t.attrs)n.setAttribute(PN.has(i)?i:Db(i),t.attrs[i])}class Bz extends MN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=En}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Bh.has(e)){const r=aN(e);return r&&r.default||0}return e=PN.has(e)?e:Db(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,r){return EN(t,e,r)}build(t,e,r){_N(t,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,e,r,i){Vz(t,e,r,i)}mount(t){this.isSVGTag=wN(t.tagName),super.mount(t)}}const Fz=(n,t)=>Cb(n)?new Bz(t):new Lz(t,{allowProjection:n!==st.Fragment});function vg(n,t,e){const r=n.getProps();return Ib(r,t,e!==void 0?e:r.custom,n)}const E2=n=>Array.isArray(n);function Uz(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,fh(e))}function jz(n){return E2(n)?n[n.length-1]||0:n}function zz(n,t){const e=vg(n,t);let{transitionEnd:r={},transition:i={},...s}=e||{};s={...s,...r};for(const a in s){const o=jz(s[a]);Uz(n,a,o)}}function Hz(n){return!!(Ir(n)&&n.add)}function A2(n,t){const e=n.getValue("willChange");if(Hz(e))return e.add(t);if(!e&&Ra.WillChange){const r=new Ra.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function kN(n){return n.props[AN]}const Gz=n=>n!==null;function Wz(n,{repeat:t,repeatType:e="loop"},r){const i=n.filter(Gz),s=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[s]}const qz={type:"spring",stiffness:500,damping:25,restSpeed:10},Yz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Xz={type:"keyframes",duration:.8},Kz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$z=(n,{keyframes:t})=>t.length>2?Xz:Bh.has(n)?n.startsWith("scale")?Yz(t[1]):qz:Kz;function Qz({when:n,delay:t,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...d}){return!!Object.keys(d).length}const Ob=(n,t,e,r={},i,s)=>a=>{const o=_b(r,n)||{},l=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ks(l);const d={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:t,element:s?void 0:i};Qz(o)||Object.assign(d,$z(n,d)),d.duration&&(d.duration=ks(d.duration)),d.repeatDelay&&(d.repeatDelay=ks(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let g=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(v2(d),d.delay===0&&(g=!0)),(Ra.instantAnimations||Ra.skipAnimations)&&(g=!0,v2(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,g&&!s&&t.get()!==void 0){const m=Wz(d.keyframes,o);if(m!==void 0){nn.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new yb(d):new bj(d)};function Zz({protectedKeys:n,needsAnimating:t},e){const r=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,r}function LN(n,t,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in o){const g=n.getValue(d,n.latestValues[d]??null),m=o[d];if(m===void 0||h&&Zz(h,d))continue;const v={delay:e,..._b(s||{},d)},x=g.get();if(x!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===x&&!v.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const T=kN(n);if(T){const S=window.MotionHandoffAnimation(T,d,nn);S!==null&&(v.startTime=S,b=!0)}}A2(n,d),g.start(Ob(d,g,m,n.shouldReduceMotion&&rN.has(d)?{type:!1}:v,n,b));const E=g.animation;E&&l.push(E)}return a&&Promise.all(l).then(()=>{nn.update(()=>{a&&zz(n,a)})}),l}function T2(n,t,e={}){var l;const r=vg(n,t,e.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const s=r?()=>Promise.all(LN(n,r,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:m}=i;return Jz(n,t,h,d,g,m,e)}:()=>Promise.resolve(),{when:o}=i;if(o){const[h,d]=o==="beforeChildren"?[s,a]:[a,s];return h().then(()=>d())}else return Promise.all([s(),a(e.delay)])}function Jz(n,t,e=0,r=0,i=0,s=1,a){const o=[],l=n.variantChildren.size,h=(l-1)*i,d=typeof r=="function",g=d?m=>r(m,l):s===1?(m=0)=>m*i:(m=0)=>h-m*i;return Array.from(n.variantChildren).sort(tH).forEach((m,v)=>{m.notify("AnimationStart",t),o.push(T2(m,t,{...a,delay:e+(d?0:r)+g(v)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(o)}function tH(n,t){return n.sortNodePosition(t)}function eH(n,t,e={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>T2(n,s,e));r=Promise.all(i)}else if(typeof t=="string")r=T2(n,t,e);else{const i=typeof t=="function"?vg(n,t,e.custom):t;r=Promise.all(LN(n,i,e))}return r.then(()=>{n.notify("AnimationComplete",t)})}function VN(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}const nH=Ab.length;function BN(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?BN(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<nH;e++){const r=Ab[e],i=n.props[r];(mg(i)||i===!1)&&(t[r]=i)}return t}const rH=[...Eb].reverse(),iH=Eb.length;function sH(n){return t=>Promise.all(t.map(({animation:e,options:r})=>eH(n,e,r)))}function aH(n){let t=sH(n),e=A3(),r=!0;const i=l=>(h,d)=>{var m;const g=vg(n,d,l==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);if(g){const{transition:v,transitionEnd:x,...b}=g;h={...h,...b,...x}}return h};function s(l){t=l(n)}function a(l){const{props:h}=n,d=BN(n.parent)||{},g=[],m=new Set;let v={},x=1/0;for(let E=0;E<iH;E++){const T=rH[E],S=e[T],R=h[T]!==void 0?h[T]:d[T],P=mg(R),M=T===l?S.isActive:null;M===!1&&(x=E);let H=R===d[T]&&R!==h[T]&&P;if(H&&r&&n.manuallyAnimateOnMount&&(H=!1),S.protectedKeys={...v},!S.isActive&&M===null||!R&&!S.prevProp||Pm(R)||typeof R=="boolean")continue;const O=oH(S.prevProp,R);let C=O||T===l&&S.isActive&&!H&&P||E>x&&P,N=!1;const B=Array.isArray(R)?R:[R];let z=B.reduce(i(T),{});M===!1&&(z={});const{prevResolvedValues:G={}}=S,F={...G,...z},xt=ot=>{C=!0,m.has(ot)&&(N=!0,m.delete(ot)),S.needsAnimating[ot]=!0;const vt=n.getValue(ot);vt&&(vt.liveStyle=!1)};for(const ot in F){const vt=z[ot],et=G[ot];if(v.hasOwnProperty(ot))continue;let V=!1;E2(vt)&&E2(et)?V=!VN(vt,et):V=vt!==et,V?vt!=null?xt(ot):m.add(ot):vt!==void 0&&m.has(ot)?xt(ot):S.protectedKeys[ot]=!0}S.prevProp=R,S.prevResolvedValues=z,S.isActive&&(v={...v,...z}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(H&&O)||N)&&g.push(...B.map(ot=>({animation:ot,options:{type:T}})))}if(m.size){const E={};if(typeof h.initial!="boolean"){const T=vg(n,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(E.transition=T.transition)}m.forEach(T=>{const S=n.getBaseTarget(T),R=n.getValue(T);R&&(R.liveStyle=!0),E[T]=S??null}),g.push({animation:E})}let b=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(g):Promise.resolve()}function o(l,h){var g;if(e[l].isActive===h)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(m=>{var v;return(v=m.animationState)==null?void 0:v.setActive(l,h)}),e[l].isActive=h;const d=a(l);for(const m in e)e[m].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>e,reset:()=>{e=A3(),r=!0}}}function oH(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!VN(t,n):!1}function Uc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A3(){return{animate:Uc(!0),whileInView:Uc(),whileHover:Uc(),whileTap:Uc(),whileDrag:Uc(),whileFocus:Uc(),exit:Uc()}}class Qo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class cH extends Qo{constructor(t){super(t),t.animationState||(t.animationState=aH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let lH=0;class uH extends Qo{constructor(){super(...arguments),this.id=lH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const hH={animation:{Feature:cH},exit:{Feature:uH}};function _g(n,t,e,r={passive:!0}){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e)}function Ug(n){return{point:{x:n.pageX,y:n.pageY}}}const fH=n=>t=>bb(t)&&n(t,Ug(t));function Hd(n,t,e,r){return _g(n,t,fH(e),r)}const FN=1e-4,dH=1-FN,gH=1+FN,UN=.01,pH=0-UN,mH=0+UN;function Fr(n){return n.max-n.min}function yH(n,t,e){return Math.abs(n-t)<=e}function T3(n,t,e,r=.5){n.origin=r,n.originPoint=on(t.min,t.max,n.origin),n.scale=Fr(e)/Fr(t),n.translate=on(e.min,e.max,n.origin)-n.originPoint,(n.scale>=dH&&n.scale<=gH||isNaN(n.scale))&&(n.scale=1),(n.translate>=pH&&n.translate<=mH||isNaN(n.translate))&&(n.translate=0)}function Gd(n,t,e,r){T3(n.x,t.x,e.x,r?r.originX:void 0),T3(n.y,t.y,e.y,r?r.originY:void 0)}function S3(n,t,e){n.min=e.min+t.min,n.max=n.min+Fr(t)}function vH(n,t,e){S3(n.x,t.x,e.x),S3(n.y,t.y,e.y)}function C3(n,t,e){n.min=t.min-e.min,n.max=n.min+Fr(t)}function Wd(n,t,e){C3(n.x,t.x,e.x),C3(n.y,t.y,e.y)}function Di(n){return[n("x"),n("y")]}const jN=({current:n})=>n?n.ownerDocument.defaultView:null,I3=(n,t)=>Math.abs(n-t);function _H(n,t){const e=I3(n.x,t.x),r=I3(n.y,t.y);return Math.sqrt(e**2+r**2)}class zN{constructor(t,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=W_(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,x=_H(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!x)return;const{point:b}=m,{timestamp:E}=pr;this.history.push({...b,timestamp:E});const{onStart:T,onMove:S}=this.handlers;v||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=G_(v,this.transformPagePoint),nn.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=W_(m.type==="pointercancel"?this.lastMoveEventInfo:G_(v,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,T),b&&b(m,T)},!bb(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=Ug(t),l=G_(o,this.transformPagePoint),{point:h}=l,{timestamp:d}=pr;this.history=[{...h,timestamp:d}];const{onSessionStart:g}=e;g&&g(t,W_(l,this.history)),this.removeListeners=Vg(Hd(this.contextWindow,"pointermove",this.handlePointerMove),Hd(this.contextWindow,"pointerup",this.handlePointerUp),Hd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ho(this.updatePoint)}}function G_(n,t){return t?{point:t(n.point)}:n}function R3(n,t){return{x:n.x-t.x,y:n.y-t.y}}function W_({point:n},t){return{point:n,delta:R3(n,HN(t)),offset:R3(n,xH(t)),velocity:wH(t,.1)}}function xH(n){return n[0]}function HN(n){return n[n.length-1]}function wH(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,r=null;const i=HN(n);for(;e>=0&&(r=n[e],!(i.timestamp-r.timestamp>ks(t)));)e--;if(!r)return{x:0,y:0};const s=Ls(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function bH(n,{min:t,max:e},r){return t!==void 0&&n<t?n=r?on(t,n,r.min):Math.max(n,t):e!==void 0&&n>e&&(n=r?on(e,n,r.max):Math.min(n,e)),n}function D3(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function EH(n,{top:t,left:e,bottom:r,right:i}){return{x:D3(n.x,e,i),y:D3(n.y,t,r)}}function O3(n,t){let e=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,r]=[r,e]),{min:e,max:r}}function AH(n,t){return{x:O3(n.x,t.x),y:O3(n.y,t.y)}}function TH(n,t){let e=.5;const r=Fr(n),i=Fr(t);return i>r?e=dg(t.min,t.max-r,n.min):r>i&&(e=dg(n.min,n.max-i,t.min)),Ia(0,1,e)}function SH(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const S2=.35;function CH(n=S2){return n===!1?n=0:n===!0&&(n=S2),{x:M3(n,"left","right"),y:M3(n,"top","bottom")}}function M3(n,t,e){return{min:N3(n,t),max:N3(n,e)}}function N3(n,t){return typeof n=="number"?n:n[t]||0}const IH=new WeakMap;class RH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=En(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Ug(g).point)},a=(g,m)=>{const{drag:v,dragPropagation:x,onDragStart:b}=this.getProps();if(v&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fj(v),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Di(T=>{let S=this.getAxisMotionValue(T).get()||0;if(Vs.test(S)){const{projection:R}=this.visualElement;if(R&&R.layout){const P=R.layout.layoutBox[T];P&&(S=Fr(P)*(parseFloat(S)/100))}}this.originPoint[T]=S}),b&&nn.postRender(()=>b(g,m)),A2(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:x,onDirectionLock:b,onDrag:E}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:T}=m;if(x&&this.currentDirection===null){this.currentDirection=DH(T),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),E&&E(g,m)},l=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Di(g=>{var m;return this.getAnimationState(g)==="paused"&&((m=this.getAxisMotionValue(g).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new zN(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:jN(this.visualElement)})}stop(t,e){const r=t||this.latestPointerEvent,i=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&nn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,r){const{drag:i}=this.getProps();if(!r||!zp(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=bH(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&$u(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=EH(r.layoutBox,t):this.constraints=!1,this.elastic=CH(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Di(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=SH(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!$u(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Dz(r,i.root,this.visualElement.getTransformPagePoint());let a=AH(i.layout.layoutBox,s);if(e){const o=e(Cz(a));this.hasMutatedConstraints=!!o,o&&(a=CN(o))}return a}startAnimation(t){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},h=Di(d=>{if(!zp(d,e,this.currentDirection))return;let g=l&&l[d]||{};a&&(g={min:0,max:0});const m=i?200:1e6,v=i?40:1e7,x={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(d,x)});return Promise.all(h).then(o)}startAxisValueAnimation(t,e){const r=this.getAxisMotionValue(t);return A2(this.visualElement,t),r.start(Ob(t,r,0,e,this.visualElement,!1))}stopAnimation(){Di(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Di(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Di(e=>{const{drag:r}=this.getProps();if(!zp(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(e);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[e];s.set(t[e]-on(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!$u(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Di(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=TH({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Di(a=>{if(!zp(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:h}=this.constraints[a];o.set(on(l,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;IH.set(this.visualElement,this);const t=this.visualElement.current,e=Hd(t,"pointerdown",l=>{const{drag:h,dragListener:d=!0}=this.getProps();h&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();$u(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nn.read(r);const a=_g(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(Di(d=>{const g=this.getAxisMotionValue(d);g&&(this.originPoint[d]+=l[d].translate,g.set(g.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),e(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=S2,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function zp(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function DH(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class OH extends Qo{constructor(t){super(t),this.removeGroupControls=ki,this.removeListeners=ki,this.controls=new RH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ki}unmount(){this.removeGroupControls(),this.removeListeners()}}const P3=n=>(t,e)=>{n&&nn.postRender(()=>n(t,e))};class MH extends Qo{constructor(){super(...arguments),this.removePointerDownListener=ki}onPointerDown(t){this.session=new zN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jN(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:P3(t),onStart:P3(e),onMove:r,onEnd:(s,a)=>{delete this.session,i&&nn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Hd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const m1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function k3(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const ad={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Xt.test(n))n=parseFloat(n);else return n;const e=k3(n,t.target.x),r=k3(n,t.target.y);return`${e}% ${r}%`}},NH={correct:(n,{treeScale:t,projectionDelta:e})=>{const r=n,i=Go.parse(n);if(i.length>5)return r;const s=Go.createTransformer(n),a=typeof i[0]!="number"?1:0,o=e.x.scale*t.x,l=e.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const h=on(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};let L3=!1;class PH extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;ez(kH),s&&(e.group&&e.group.add(s),r&&r.register&&i&&r.register(s),L3&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),m1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,L3=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||nn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),wb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function GN(n){const[t,e]=Xj(),r=st.useContext(EM);return k.jsx(PH,{...n,layoutGroup:r,switchLayoutGroup:st.useContext(TN),isPresent:t,safeToRemove:e})}const kH={borderRadius:{...ad,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ad,borderTopRightRadius:ad,borderBottomLeftRadius:ad,borderBottomRightRadius:ad,boxShadow:NH};function LH(n,t,e){const r=Ir(n)?n:fh(n);return r.start(Ob("",r,t,e)),r.animation}const VH=(n,t)=>n.depth-t.depth;class BH{constructor(){this.children=[],this.isDirty=!1}add(t){nb(this.children,t),this.isDirty=!0}remove(t){rb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(VH),this.isDirty=!1,this.children.forEach(t)}}function FH(n,t){const e=Kr.now(),r=({timestamp:i})=>{const s=i-e;s>=t&&(Ho(r),n(s-t))};return nn.setup(r,!0),()=>Ho(r)}const WN=["TopLeft","TopRight","BottomLeft","BottomRight"],UH=WN.length,V3=n=>typeof n=="string"?parseFloat(n):n,B3=n=>typeof n=="number"||Xt.test(n);function jH(n,t,e,r,i,s){i?(n.opacity=on(0,e.opacity??1,zH(r)),n.opacityExit=on(t.opacity??1,0,HH(r))):s&&(n.opacity=on(t.opacity??1,e.opacity??1,r));for(let a=0;a<UH;a++){const o=`border${WN[a]}Radius`;let l=F3(t,o),h=F3(e,o);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||B3(l)===B3(h)?(n[o]=Math.max(on(V3(l),V3(h),r),0),(Vs.test(h)||Vs.test(l))&&(n[o]+="%")):n[o]=h}(t.rotate||e.rotate)&&(n.rotate=on(t.rotate||0,e.rotate||0,r))}function F3(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const zH=qN(0,.5,PM),HH=qN(.5,.95,ki);function qN(n,t,e){return r=>r<n?0:r>t?1:e(dg(n,t,r))}function U3(n,t){n.min=t.min,n.max=t.max}function Ri(n,t){U3(n.x,t.x),U3(n.y,t.y)}function j3(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function z3(n,t,e,r,i){return n-=t,n=K1(n,1/e,r),i!==void 0&&(n=K1(n,1/i,r)),n}function GH(n,t=0,e=1,r=.5,i,s=n,a=n){if(Vs.test(t)&&(t=parseFloat(t),t=on(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=on(s.min,s.max,r);n===s&&(o-=t),n.min=z3(n.min,t,e,o,i),n.max=z3(n.max,t,e,o,i)}function H3(n,t,[e,r,i],s,a){GH(n,t[e],t[r],t[i],t.scale,s,a)}const WH=["x","scaleX","originX"],qH=["y","scaleY","originY"];function G3(n,t,e,r){H3(n.x,t,WH,e?e.x:void 0,r?r.x:void 0),H3(n.y,t,qH,e?e.y:void 0,r?r.y:void 0)}function W3(n){return n.translate===0&&n.scale===1}function YN(n){return W3(n.x)&&W3(n.y)}function q3(n,t){return n.min===t.min&&n.max===t.max}function YH(n,t){return q3(n.x,t.x)&&q3(n.y,t.y)}function Y3(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function XN(n,t){return Y3(n.x,t.x)&&Y3(n.y,t.y)}function X3(n){return Fr(n.x)/Fr(n.y)}function K3(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class XH{constructor(){this.members=[]}add(t){nb(this.members,t),t.scheduleRender()}remove(t){if(rb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,e){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:r}=t;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function KH(n,t,e){let r="";const i=n.x.translate/t.x,s=n.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:d,rotateX:g,rotateY:m,skewX:v,skewY:x}=e;h&&(r=`perspective(${h}px) ${r}`),d&&(r+=`rotate(${d}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),v&&(r+=`skewX(${v}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=n.x.scale*t.x,l=n.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const q_=["","X","Y","Z"],$H=1e3;let QH=0;function Y_(n,t,e,r){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),r&&(r[n]=0))}function KN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=kN(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",nn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&KN(r)}function $N({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=QH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tG),this.nodes.forEach(iG),this.nodes.forEach(sG),this.nodes.forEach(eG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new BH)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ab),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=fN(a)&&!Wj(a),this.instance=a;const{layoutId:o,layout:l,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let d,g=0;const m=()=>this.root.updateBlockedByResize=!1;nn.read(()=>{g=window.innerWidth}),n(a,()=>{const v=window.innerWidth;v!==g&&(g=v,this.root.updateBlockedByResize=!0,d&&d(),d=FH(m,250),m1.hasAnimatedSinceResize&&(m1.hasAnimatedSinceResize=!1,this.nodes.forEach(Z3)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||uG,{onLayoutAnimationStart:b,onLayoutAnimationComplete:E}=h.getProps(),T=!this.targetLayout||!XN(this.targetLayout,v),S=!g&&m;if(this.options.layoutRoot||this.resumeFrom||S||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={..._b(x,"layout"),onPlay:b,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(d,S)}else g||Z3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ho(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aG),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const g=this.path[d];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Q3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rG),this.nodes.forEach(ZH),this.nodes.forEach(JH)):this.nodes.forEach(Q3),this.clearAllSnapshots();const o=Kr.now();pr.delta=Ia(0,1e3/60,o-pr.timestamp),pr.timestamp=o,pr.isProcessing=!0,L_.update.process(pr),L_.preRender.process(pr),L_.render.process(pr),pr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nG),this.sharedNodes.forEach(oG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fr(this.snapshot.measuredBox.x)&&!Fr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=En(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!YN(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,d=h!==this.prevTransformTemplateValue;a&&this.instance&&(o||qc(this.latestValues)||d)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),hG(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return En();const o=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(fG))){const{scroll:d}=this.root;d&&(Qu(o.x,d.offset.x),Qu(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=En();if(Ri(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:g,options:m}=d;d!==this.root&&g&&m.layoutScroll&&(g.wasRoot&&Ri(o,a),Qu(o.x,g.offset.x),Qu(o.y,g.offset.y))}return o}applyTransform(a,o=!1){const l=En();Ri(l,a);for(let h=0;h<this.path.length;h++){const d=this.path[h];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Zu(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qc(d.latestValues)&&Zu(l,d.latestValues)}return qc(this.latestValues)&&Zu(l,this.latestValues),l}removeTransform(a){const o=En();Ri(o,a);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!qc(h.latestValues))continue;x2(h.latestValues)&&h.updateSnapshot();const d=En(),g=h.measurePageBox();Ri(d,g),G3(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,d)}return qc(this.latestValues)&&G3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=pr.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Wd(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=En(),this.targetWithTransforms=En()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ri(this.target,this.layout.layoutBox),RN(this.target,this.targetDelta)):Ri(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Wd(this.relativeTargetOrigin,this.target,v.target),Ri(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||x2(this.parent.latestValues)||IN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===pr.timestamp&&(l=!1),l)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Ri(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;Rz(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=En());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(j3(this.prevProjectionDelta.x,this.projectionDelta.x),j3(this.prevProjectionDelta.y,this.projectionDelta.y)),Gd(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!K3(this.projectionDelta.x,this.prevProjectionDelta.x)||!K3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ju(),this.projectionDelta=Ju(),this.projectionDeltaWithTransform=Ju()}setAnimationOrigin(a,o=!1){const l=this.snapshot,h=l?l.latestValues:{},d={...this.latestValues},g=Ju();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=En(),v=l?l.source:void 0,x=this.layout?this.layout.source:void 0,b=v!==x,E=this.getStack(),T=!E||E.members.length<=1,S=!!(b&&!T&&this.options.crossfade===!0&&!this.path.some(lG));this.animationProgress=0;let R;this.mixTargetDelta=P=>{const M=P/1e3;J3(g.x,a.x,M),J3(g.y,a.y,M),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cG(this.relativeTarget,this.relativeTargetOrigin,m,M),R&&YH(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=En()),Ri(R,this.relativeTarget)),b&&(this.animationValues=d,jH(d,h,this.latestValues,M,S,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,h;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(h=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Ho(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nn.update(()=>{m1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fh(0)),this.currentAnimation=LH(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($H),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:h,latestValues:d}=a;if(!(!o||!l||!h)){if(this!==a&&this.layout&&h&&QN(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||En();const g=Fr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+g;const m=Fr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Ri(o,l),Zu(o,d),Gd(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new XH),this.sharedNodes.get(a).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const h={};l.z&&Y_("z",a,h,this.animationValues);for(let d=0;d<q_.length;d++)Y_(`rotate${q_[d]}`,a,h,this.animationValues),Y_(`skew${q_[d]}`,a,h,this.animationValues);a.render();for(const d in h)a.setStaticValue(d,h[d]),this.animationValues&&(this.animationValues[d]=h[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=p1(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=p1(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!qc(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=KH(this.projectionDeltaWithTransform,this.treeScale,d);l&&(g=l(d,g)),a.transform=g;const{x:m,y:v}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?a.opacity=h===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in yg){if(d[x]===void 0)continue;const{correct:b,applyTo:E,isCSSVariable:T}=yg[x],S=g==="none"?d[x]:b(d[x],h);if(E){const R=E.length;for(let P=0;P<R;P++)a[E[P]]=S}else T?this.options.visualElement.renderState.vars[x]=S:a[x]=S}this.options.layoutId&&(a.pointerEvents=h===this?p1(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach($3),this.root.sharedNodes.clear()}}}function ZH(n){n.updateLayout()}function JH(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Di(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],v=Fr(m);m.min=r[g].min,m.max=m.min+v}):QN(s,t.layoutBox,r)&&Di(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],v=Fr(r[g]);m.max=m.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+v)});const o=Ju();Gd(o,r,t.layoutBox);const l=Ju();a?Gd(l,n.applyTransform(i,!0),t.measuredBox):Gd(l,r,t.layoutBox);const h=!YN(o);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:m,layout:v}=g;if(m&&v){const x=En();Wd(x,t.layoutBox,m.layoutBox);const b=En();Wd(b,r,v.layoutBox),XN(x,b)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=x,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function tG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function eG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function nG(n){n.clearSnapshot()}function $3(n){n.clearMeasurements()}function Q3(n){n.isLayoutDirty=!1}function rG(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function Z3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function iG(n){n.resolveTargetDelta()}function sG(n){n.calcProjection()}function aG(n){n.resetSkewAndRotation()}function oG(n){n.removeLeadSnapshot()}function J3(n,t,e){n.translate=on(t.translate,0,e),n.scale=on(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function tR(n,t,e,r){n.min=on(t.min,e.min,r),n.max=on(t.max,e.max,r)}function cG(n,t,e,r){tR(n.x,t.x,e.x,r),tR(n.y,t.y,e.y,r)}function lG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const uG={duration:.45,ease:[.4,0,.1,1]},eR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),nR=eR("applewebkit/")&&!eR("chrome/")?Math.round:ki;function rR(n){n.min=nR(n.min),n.max=nR(n.max)}function hG(n){rR(n.x),rR(n.y)}function QN(n,t,e){return n==="position"||n==="preserve-aspect"&&!yH(X3(t),X3(e),.2)}function fG(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const dG=$N({attachResizeListener:(n,t)=>_g(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),X_={current:void 0},ZN=$N({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!X_.current){const n=new dG({});n.mount(window),n.setOptions({layoutScroll:!0}),X_.current=n}return X_.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),gG={pan:{Feature:MH},drag:{Feature:OH,ProjectionNode:ZN,MeasureLayout:GN}};function iR(n,t,e){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,s=r[i];s&&nn.postRender(()=>s(t,Ug(t)))}class pG extends Qo{mount(){const{current:t}=this.node;t&&(this.unmount=Uj(t,(e,r)=>(iR(this.node,r,"Start"),i=>iR(this.node,i,"End"))))}unmount(){}}class mG extends Qo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vg(_g(this.node.current,"focus",()=>this.onFocus()),_g(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sR(n,t,e){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),s=r[i];s&&nn.postRender(()=>s(t,Ug(t)))}class yG extends Qo{mount(){const{current:t}=this.node;t&&(this.unmount=Gj(t,(e,r)=>(sR(this.node,r,"Start"),(i,{success:s})=>sR(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const C2=new WeakMap,K_=new WeakMap,vG=n=>{const t=C2.get(n.target);t&&t(n)},_G=n=>{n.forEach(vG)};function xG({root:n,...t}){const e=n||document;K_.has(e)||K_.set(e,{});const r=K_.get(e),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(_G,{root:n,...t})),r[i]}function wG(n,t,e){const r=xG(t);return C2.set(n,e),r.observe(n),()=>{C2.delete(n),r.unobserve(n)}}const bG={some:0,all:1};class EG extends Qo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:s}=t,a={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bG[i]},o=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:g}=this.node.getProps(),m=h?d:g;m&&m(l)};return wG(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(AG(t,e))&&this.startObserver()}unmount(){}}function AG({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const TG={inView:{Feature:EG},tap:{Feature:yG},focus:{Feature:mG},hover:{Feature:pG}},SG={layout:{ProjectionNode:ZN,MeasureLayout:GN}},CG={...hH,...TG,...gG,...SG},IG=Sz(CG,Fz);function RG({name:n,nutrients:t,kcal:e=null,onEdit:r,onDelete:i,unit:s="g",disableSwipe:a}){const[o,l]=an.useState(null),d=e??((v=[])=>{let x=0;return v.forEach(b=>{var T,S,R;const E=parseFloat(b.count||0);((T=b.type)==null?void 0:T.toLowerCase())==="fat"&&(x+=E*9),((S=b.type)==null?void 0:S.toLowerCase())==="protein"&&(x+=E*4),(R=b.type)!=null&&R.toLowerCase().includes("carbohydrate")&&(x+=E*4)}),Math.round(x)})(t),g=v=>v.charAt(0).toUpperCase()+v.slice(1),m=XF({onSwipedLeft:()=>{a||(l("left"),setTimeout(()=>{i&&i(),l(null)},300))},onSwipedRight:()=>{a||(l("right"),setTimeout(()=>{r&&r(),l(null)},300))},preventScrollOnSwipe:!0,trackMouse:!0});return k.jsxs("div",{...m,className:"position-relative mb-2",children:[o==="left"&&k.jsx("div",{className:"position-absolute top-50 start-100 translate-middle-y text-danger fw-bold",style:{zIndex:1},children:"🗑️"}),o==="right"&&k.jsx("div",{className:"position-absolute top-50 start-20 translate-middle-y text-warning fw-bold",style:{zIndex:1},children:"🖊️"}),k.jsxs(IG.div,{initial:{x:0},animate:{x:o==="left"?-100:o==="right"?100:0},transition:{duration:.75},className:"meal-card text-white p-3 rounded shadow-sm",style:{backgroundColor:"#00bfff17"},children:[k.jsx("p",{className:"MealCardText mb-1 fw-bold",children:n}),k.jsxs("p",{className:"MealCardText mb-1",children:["Calories: ",d," kcal"]}),t.filter(v=>{var x;return["protein","fat","carbohydrate","sugar","sugars","fibre","fiber","salt","caffeine"].includes((x=v.type)==null?void 0:x.toLowerCase())}).map((v,x)=>k.jsxs("p",{className:"MealCardText mb-1",children:[g(v.type),": ",v.total," ",s]},x))]})]})}const DG=()=>{};var aR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},OG=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[e++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[e++],a=n[e++],o=n[e++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[e++],a=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},tP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,d=s>>2,g=(s&3)<<4|o>>4;let m=(o&15)<<2|h>>6,v=h&63;l||(v=64,a||(m=64)),r.push(e[d],e[g],e[m],e[v])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(JN(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):OG(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=e[n.charAt(i++)],o=i<n.length?e[n.charAt(i)]:0;++i;const h=i<n.length?e[n.charAt(i)]:64;++i;const g=i<n.length?e[n.charAt(i)]:64;if(++i,s==null||o==null||h==null||g==null)throw new MG;const m=s<<2|o>>4;if(r.push(m),h!==64){const v=o<<4&240|h>>2;if(r.push(v),g!==64){const x=h<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NG=function(n){const t=JN(n);return tP.encodeByteArray(t,!0)},eP=function(n){return NG(n).replace(/\./g,"")},nP=function(n){try{return tP.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG=()=>rP().__FIREBASE_DEFAULTS__,kG=()=>{if(typeof process>"u"||typeof aR>"u")return;const n=aR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LG=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&nP(n[1]);return t&&JSON.parse(t)},Lm=()=>{try{return DG()||PG()||kG()||LG()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VG=n=>{var t,e;return(e=(t=Lm())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},iP=()=>{var n;return(n=Lm())==null?void 0:n.config},sP=n=>{var t;return(t=Lm())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aP(n){return(await fetch(n,{credentials:"include"})).ok}const qd={};function FG(){const n={prod:[],emulator:[]};for(const t of Object.keys(qd))qd[t]?n.emulator.push(t):n.prod.push(t);return n}function UG(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let oR=!1;function jG(n,t){if(typeof window>"u"||typeof document>"u"||!Fh(window.location.host)||qd[n]===t||qd[n]||oR)return;qd[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=FG().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{oR=!0,a()},m}function d(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=UG(r),v=e("text"),x=document.getElementById(v)||document.createElement("span"),b=e("learnmore"),E=document.getElementById(b)||document.createElement("a"),T=e("preprendIcon"),S=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;o(R),d(E,b);const P=h();l(S,T),R.append(S,x,E,P),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function oP(){var t;const n=(t=Lm())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WG(){const n=Kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lP(){return!oP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uP(){return!oP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Mb(){try{return typeof indexedDB=="object"}catch{return!1}}function hP(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)==null?void 0:s.message)||"")}}catch(e){t(e)}})}function qG(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG="FirebaseError";class is extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=YG,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?XG(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new is(i,o,r)}}function XG(n,t){return n.replace(KG,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const KG=/\{\$([^}]+)}/g;function $G(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Wo(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const s=n[i],a=t[i];if(cR(s)&&cR(a)){if(!Wo(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function cR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Td(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function Sd(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function QG(n,t){const e=new ZG(n,t);return e.subscribe.bind(e)}class ZG{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");JG(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=$_),i.error===void 0&&(i.error=$_),i.complete===void 0&&(i.complete=$_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JG(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function $_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=1e3,eW=2,nW=4*60*60*1e3,rW=.5;function lR(n,t=tW,e=eW){const r=t*Math.pow(e,n),i=Math.round(rW*r*(Math.random()-.5)*2);return Math.min(nW,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(n){return n&&n._delegate?n._delegate:n}class ns{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new BG;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(aW(t))try{this.getOrInitializeService({instanceIdentifier:Yc})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Yc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Yc){return this.instances.has(t)}getOptions(t=Yc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sW(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Yc){return this.component?this.component.multipleInstances?t:Yc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sW(n){return n===Yc?void 0:n}function aW(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new iW(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ce||(ce={}));const cW={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},lW=ce.INFO,uW={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},hW=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=uW[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Vm{constructor(t){this.name=t,this._logLevel=lW,this._logHandler=hW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ce))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?cW[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...t),this._logHandler(this,ce.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...t),this._logHandler(this,ce.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...t),this._logHandler(this,ce.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...t),this._logHandler(this,ce.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...t),this._logHandler(this,ce.ERROR,...t)}}const fW=(n,t)=>t.some(e=>n instanceof e);let uR,hR;function dW(){return uR||(uR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gW(){return hR||(hR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fP=new WeakMap,I2=new WeakMap,dP=new WeakMap,Q_=new WeakMap,Nb=new WeakMap;function pW(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Po(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&fP.set(e,n)}).catch(()=>{}),Nb.set(t,n),t}function mW(n){if(I2.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});I2.set(n,t)}let R2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return I2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||dP.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Po(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function yW(n){R2=n(R2)}function vW(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Z_(this),t,...e);return dP.set(r,t.sort?t.sort():[t]),Po(r)}:gW().includes(n)?function(...t){return n.apply(Z_(this),t),Po(fP.get(this))}:function(...t){return Po(n.apply(Z_(this),t))}}function _W(n){return typeof n=="function"?vW(n):(n instanceof IDBTransaction&&mW(n),fW(n,dW())?new Proxy(n,R2):n)}function Po(n){if(n instanceof IDBRequest)return pW(n);if(Q_.has(n))return Q_.get(n);const t=_W(n);return t!==n&&(Q_.set(n,t),Nb.set(t,n)),t}const Z_=n=>Nb.get(n);function xW(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=Po(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Po(a.result),l.oldVersion,l.newVersion,Po(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const wW=["get","getKey","getAll","getAllKeys","count"],bW=["put","add","delete","clear"],J_=new Map;function fR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(J_.get(t))return J_.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=bW.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wW.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return J_.set(t,s),s}yW(n=>({...n,get:(t,e,r)=>fR(t,e)||n.get(t,e,r),has:(t,e)=>!!fR(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(AW(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function AW(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const D2="@firebase/app",dR="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Vm("@firebase/app"),TW="@firebase/app-compat",SW="@firebase/analytics-compat",CW="@firebase/analytics",IW="@firebase/app-check-compat",RW="@firebase/app-check",DW="@firebase/auth",OW="@firebase/auth-compat",MW="@firebase/database",NW="@firebase/data-connect",PW="@firebase/database-compat",kW="@firebase/functions",LW="@firebase/functions-compat",VW="@firebase/installations",BW="@firebase/installations-compat",FW="@firebase/messaging",UW="@firebase/messaging-compat",jW="@firebase/performance",zW="@firebase/performance-compat",HW="@firebase/remote-config",GW="@firebase/remote-config-compat",WW="@firebase/storage",qW="@firebase/storage-compat",YW="@firebase/firestore",XW="@firebase/ai",KW="@firebase/firestore-compat",$W="firebase",QW="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="[DEFAULT]",ZW={[D2]:"fire-core",[TW]:"fire-core-compat",[CW]:"fire-analytics",[SW]:"fire-analytics-compat",[RW]:"fire-app-check",[IW]:"fire-app-check-compat",[DW]:"fire-auth",[OW]:"fire-auth-compat",[MW]:"fire-rtdb",[NW]:"fire-data-connect",[PW]:"fire-rtdb-compat",[kW]:"fire-fn",[LW]:"fire-fn-compat",[VW]:"fire-iid",[BW]:"fire-iid-compat",[FW]:"fire-fcm",[UW]:"fire-fcm-compat",[jW]:"fire-perf",[zW]:"fire-perf-compat",[HW]:"fire-rc",[GW]:"fire-rc-compat",[WW]:"fire-gcs",[qW]:"fire-gcs-compat",[YW]:"fire-fst",[KW]:"fire-fst-compat",[XW]:"fire-vertex","fire-js":"fire-js",[$W]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=new Map,JW=new Map,M2=new Map;function gR(n,t){try{n.container.addComponent(t)}catch(e){Da.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Gs(n){const t=n.name;if(M2.has(t))return Da.debug(`There were multiple attempts to register component ${t}.`),!1;M2.set(t,n);for(const e of $1.values())gR(e,n);for(const e of JW.values())gR(e,n);return!0}function Pl(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function ui(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new Nl("app","Firebase",tq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=QW;function gP(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:O2,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw ko.create("bad-app-name",{appName:String(i)});if(e||(e=iP()),!e)throw ko.create("no-options");const s=$1.get(i);if(s){if(Wo(e,s.options)&&Wo(r,s.config))return s;throw ko.create("duplicate-app",{appName:i})}const a=new oW(i);for(const l of M2.values())a.addComponent(l);const o=new eq(e,r,a);return $1.set(i,o),o}function pP(n=O2){const t=$1.get(n);if(!t&&n===O2&&iP())return gP();if(!t)throw ko.create("no-app",{appName:n});return t}function Li(n,t,e){let r=ZW[n]??n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${t}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Da.warn(a.join(" "));return}Gs(new ns(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq="firebase-heartbeat-database",rq=1,xg="firebase-heartbeat-store";let tx=null;function mP(){return tx||(tx=xW(nq,rq,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(xg)}catch(e){console.warn(e)}}}}).catch(n=>{throw ko.create("idb-open",{originalErrorMessage:n.message})})),tx}async function iq(n){try{const e=(await mP()).transaction(xg),r=await e.objectStore(xg).get(yP(n));return await e.done,r}catch(t){if(t instanceof is)Da.warn(t.message);else{const e=ko.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Da.warn(e.message)}}}async function pR(n,t){try{const r=(await mP()).transaction(xg,"readwrite");await r.objectStore(xg).put(t,yP(n)),await r.done}catch(e){if(e instanceof is)Da.warn(e.message);else{const r=ko.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Da.warn(r.message)}}}function yP(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=1024,aq=30;class oq{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lq(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mR();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>aq){const a=uq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Da.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mR(),{heartbeatsToSend:r,unsentEntries:i}=cq(this._heartbeatsCache.heartbeats),s=eP(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Da.warn(e),""}}}function mR(){return new Date().toISOString().substring(0,10)}function cq(n,t=sq){const e=[];let r=n.slice();for(const i of n){const s=e.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),yR(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),yR(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class lq{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mb()?hP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await iq(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return pR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return pR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function yR(n){return eP(JSON.stringify({version:2,heartbeats:n})).length}function uq(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(n){Gs(new ns("platform-logger",t=>new EW(t),"PRIVATE")),Gs(new ns("heartbeat",t=>new oq(t),"PRIVATE")),Li(D2,dR,n),Li(D2,dR,"esm2020"),Li("fire-js","")}hq("");var fq="firebase",dq="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(fq,dq,"app");const gq=(n,t)=>t.some(e=>n instanceof e);let vR,_R;function pq(){return vR||(vR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mq(){return _R||(_R=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vP=new WeakMap,N2=new WeakMap,_P=new WeakMap,ex=new WeakMap,Pb=new WeakMap;function yq(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Lo(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&vP.set(e,n)}).catch(()=>{}),Pb.set(t,n),t}function vq(n){if(N2.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});N2.set(n,t)}let P2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return N2.get(n);if(t==="objectStoreNames")return n.objectStoreNames||_P.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Lo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function _q(n){P2=n(P2)}function xq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(nx(this),t,...e);return _P.set(r,t.sort?t.sort():[t]),Lo(r)}:mq().includes(n)?function(...t){return n.apply(nx(this),t),Lo(vP.get(this))}:function(...t){return Lo(n.apply(nx(this),t))}}function wq(n){return typeof n=="function"?xq(n):(n instanceof IDBTransaction&&vq(n),gq(n,pq())?new Proxy(n,P2):n)}function Lo(n){if(n instanceof IDBRequest)return yq(n);if(ex.has(n))return ex.get(n);const t=wq(n);return t!==n&&(ex.set(n,t),Pb.set(t,n)),t}const nx=n=>Pb.get(n);function bq(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=Lo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Lo(a.result),l.oldVersion,l.newVersion,Lo(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const Eq=["get","getKey","getAll","getAllKeys","count"],Aq=["put","add","delete","clear"],rx=new Map;function xR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(rx.get(t))return rx.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=Aq.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Eq.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return rx.set(t,s),s}_q(n=>({...n,get:(t,e,r)=>xR(t,e)||n.get(t,e,r),has:(t,e)=>!!xR(t,e)||n.has(t,e)}));const xP="@firebase/installations",kb="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=1e4,bP=`w:${kb}`,EP="FIS_v2",Tq="https://firebaseinstallations.googleapis.com/v1",Sq=60*60*1e3,Cq="installations",Iq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xl=new Nl(Cq,Iq,Rq);function AP(n){return n instanceof is&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP({projectId:n}){return`${Tq}/projects/${n}/installations`}function SP(n){return{token:n.token,requestStatus:2,expiresIn:Oq(n.expiresIn),creationTime:Date.now()}}async function CP(n,t){const r=(await t.json()).error;return xl.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function IP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Dq(n,{refreshToken:t}){const e=IP(n);return e.append("Authorization",Mq(t)),e}async function RP(n){const t=await n();return t.status>=500&&t.status<600?n():t}function Oq(n){return Number(n.replace("s","000"))}function Mq(n){return`${EP} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nq({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const r=TP(n),i=IP(n),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:e,authVersion:EP,appId:n.appId,sdkVersion:bP},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await RP(()=>fetch(r,o));if(l.ok){const h=await l.json();return{fid:h.fid||e,registrationStatus:2,refreshToken:h.refreshToken,authToken:SP(h.authToken)}}else throw await CP("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=/^[cdef][\w-]{21}$/,k2="";function Lq(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=Vq(n);return kq.test(e)?e:k2}catch{return k2}}function Vq(n){return Pq(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new Map;function MP(n,t){const e=Bm(n);NP(e,t),Bq(e,t)}function NP(n,t){const e=OP.get(n);if(e)for(const r of e)r(t)}function Bq(n,t){const e=Fq();e&&e.postMessage({key:n,fid:t}),Uq()}let al=null;function Fq(){return!al&&"BroadcastChannel"in self&&(al=new BroadcastChannel("[Firebase] FID Change"),al.onmessage=n=>{NP(n.data.key,n.data.fid)}),al}function Uq(){OP.size===0&&al&&(al.close(),al=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq="firebase-installations-database",zq=1,wl="firebase-installations-store";let ix=null;function Lb(){return ix||(ix=bq(jq,zq,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(wl)}}})),ix}async function Q1(n,t){const e=Bm(n),i=(await Lb()).transaction(wl,"readwrite"),s=i.objectStore(wl),a=await s.get(e);return await s.put(t,e),await i.done,(!a||a.fid!==t.fid)&&MP(n,t.fid),t}async function PP(n){const t=Bm(n),r=(await Lb()).transaction(wl,"readwrite");await r.objectStore(wl).delete(t),await r.done}async function Fm(n,t){const e=Bm(n),i=(await Lb()).transaction(wl,"readwrite"),s=i.objectStore(wl),a=await s.get(e),o=t(a);return o===void 0?await s.delete(e):await s.put(o,e),await i.done,o&&(!a||a.fid!==o.fid)&&MP(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(n){let t;const e=await Fm(n.appConfig,r=>{const i=Hq(r),s=Gq(n,i);return t=s.registrationPromise,s.installationEntry});return e.fid===k2?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function Hq(n){const t=n||{fid:Lq(),registrationStatus:0};return kP(t)}function Gq(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xl.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=Wq(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:qq(n)}:{installationEntry:t}}async function Wq(n,t){try{const e=await Nq(n,t);return Q1(n.appConfig,e)}catch(e){throw AP(e)&&e.customData.serverCode===409?await PP(n.appConfig):await Q1(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function qq(n){let t=await wR(n.appConfig);for(;t.registrationStatus===1;)await DP(100),t=await wR(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await Vb(n);return r||e}return t}function wR(n){return Fm(n,t=>{if(!t)throw xl.create("installation-not-found");return kP(t)})}function kP(n){return Yq(n)?{fid:n.fid,registrationStatus:0}:n}function Yq(n){return n.registrationStatus===1&&n.registrationTime+wP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq({appConfig:n,heartbeatServiceProvider:t},e){const r=Kq(n,e),i=Dq(n,e),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:bP,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await RP(()=>fetch(r,o));if(l.ok){const h=await l.json();return SP(h)}else throw await CP("Generate Auth Token",l)}function Kq(n,{fid:t}){return`${TP(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(n,t=!1){let e;const r=await Fm(n.appConfig,s=>{if(!LP(s))throw xl.create("not-registered");const a=s.authToken;if(!t&&Zq(a))return s;if(a.requestStatus===1)return e=$q(n,t),s;{if(!navigator.onLine)throw xl.create("app-offline");const o=tY(s);return e=Qq(n,o),o}});return e?await e:r.authToken}async function $q(n,t){let e=await bR(n.appConfig);for(;e.authToken.requestStatus===1;)await DP(100),e=await bR(n.appConfig);const r=e.authToken;return r.requestStatus===0?Bb(n,t):r}function bR(n){return Fm(n,t=>{if(!LP(t))throw xl.create("not-registered");const e=t.authToken;return eY(e)?{...t,authToken:{requestStatus:0}}:t})}async function Qq(n,t){try{const e=await Xq(n,t),r={...t,authToken:e};return await Q1(n.appConfig,r),e}catch(e){if(AP(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await PP(n.appConfig);else{const r={...t,authToken:{requestStatus:0}};await Q1(n.appConfig,r)}throw e}}function LP(n){return n!==void 0&&n.registrationStatus===2}function Zq(n){return n.requestStatus===2&&!Jq(n)}function Jq(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+Sq}function tY(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function eY(n){return n.requestStatus===1&&n.requestTime+wP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nY(n){const t=n,{installationEntry:e,registrationPromise:r}=await Vb(t);return r?r.catch(console.error):Bb(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rY(n,t=!1){const e=n;return await iY(e),(await Bb(e,t)).token}async function iY(n){const{registrationPromise:t}=await Vb(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sY(n){if(!n||!n.options)throw sx("App Configuration");if(!n.name)throw sx("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw sx(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sx(n){return xl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="installations",aY="installations-internal",oY=n=>{const t=n.getProvider("app").getImmediate(),e=sY(t),r=Pl(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},cY=n=>{const t=n.getProvider("app").getImmediate(),e=Pl(t,VP).getImmediate();return{getId:()=>nY(e),getToken:i=>rY(e,i)}};function lY(){Gs(new ns(VP,oY,"PUBLIC")),Gs(new ns(aY,cY,"PRIVATE"))}lY();Li(xP,kb);Li(xP,kb,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="analytics",uY="firebase_id",hY="origin",fY=60*1e3,dY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Vm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},fi=new Nl("analytics","Analytics",gY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(n){if(!n.startsWith(Fb)){const t=fi.create("invalid-gtag-resource",{gtagURL:n});return Zr.warn(t.message),""}return n}function BP(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function mY(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function yY(n,t){const e=mY("firebase-js-sdk-policy",{createScriptURL:pY}),r=document.createElement("script"),i=`${Fb}?l=${n}&id=${t}`;r.src=e?e==null?void 0:e.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function vY(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function _Y(n,t,e,r,i,s){const a=r[i];try{if(a)await t[a];else{const l=(await BP(e)).find(h=>h.measurementId===i);l&&await t[l.appId]}}catch(o){Zr.error(o)}n("config",i,s)}async function xY(n,t,e,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const o=await BP(e);for(const l of a){const h=o.find(g=>g.measurementId===l),d=h&&t[h.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(t)),await Promise.all(s),n("event",r,i||{})}catch(s){Zr.error(s)}}function wY(n,t,e,r){async function i(s,...a){try{if(s==="event"){const[o,l]=a;await xY(n,t,e,o,l)}else if(s==="config"){const[o,l]=a;await _Y(n,t,e,r,o,l)}else if(s==="consent"){const[o,l]=a;n("consent",o,l)}else if(s==="get"){const[o,l,h]=a;n("get",o,l,h)}else if(s==="set"){const[o]=a;n("set",o)}else n(s,...a)}catch(o){Zr.error(o)}}return i}function bY(n,t,e,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=wY(s,n,t,e),{gtagCore:s,wrappedGtag:window[i]}}function EY(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(Fb)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY=30,TY=1e3;class SY{constructor(t={},e=TY){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const FP=new SY;function CY(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function IY(n){var a;const{appId:t,apiKey:e}=n,r={method:"GET",headers:CY(e)},i=dY.replace("{app-id}",t),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let o="";try{const l=await s.json();(a=l.error)!=null&&a.message&&(o=l.error.message)}catch{}throw fi.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function RY(n,t=FP,e){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw fi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw fi.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new MY;return setTimeout(async()=>{o.abort()},fY),UP({appId:r,apiKey:i,measurementId:s},a,o,t)}async function UP(n,{throttleEndTimeMillis:t,backoffCount:e},r,i=FP){var o;const{appId:s,measurementId:a}=n;try{await DY(r,t)}catch(l){if(a)return Zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:a};throw l}try{const l=await IY(n);return i.deleteThrottleMetadata(s),l}catch(l){const h=l;if(!OY(h)){if(i.deleteThrottleMetadata(s),a)return Zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:s,measurementId:a};throw l}const d=Number((o=h==null?void 0:h.customData)==null?void 0:o.httpStatus)===503?lR(e,i.intervalMillis,AY):lR(e,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+d,backoffCount:e+1};return i.setThrottleMetadata(s,g),Zr.debug(`Calling attemptFetch again in ${d} millis`),UP(n,g,r,i)}}function DY(n,t){return new Promise((e,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(e,i);n.addEventListener(()=>{clearTimeout(s),r(fi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function OY(n){if(!(n instanceof is)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class MY{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function NY(n,t,e,r,i){if(i&&i.global){n("event",e,r);return}else{const s=await t,a={...r,send_to:s};n("event",e,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PY(){if(Mb())try{await hP()}catch(n){return Zr.warn(fi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Zr.warn(fi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function kY(n,t,e,r,i,s,a){const o=RY(n);o.then(m=>{e[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Zr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Zr.error(m)),t.push(o);const l=PY().then(m=>{if(m)return r.getId()}),[h,d]=await Promise.all([o,l]);EY(s)||yY(s,h.measurementId),i("js",new Date);const g=(a==null?void 0:a.config)??{};return g[hY]="firebase",g.update=!0,d!=null&&(g[uY]=d),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(t){this.app=t}_delete(){return delete Yd[this.app.options.appId],Promise.resolve()}}let Yd={},ER=[];const AR={};let ax="dataLayer",VY="gtag",TR,jP,SR=!1;function BY(){const n=[];if(cP()&&n.push("This is a browser extension environment."),qG()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),e=fi.create("invalid-analytics-context",{errorInfo:t});Zr.warn(e.message)}}function FY(n,t,e){BY();const r=n.options.appId;if(!r)throw fi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw fi.create("no-api-key");if(Yd[r]!=null)throw fi.create("already-exists",{id:r});if(!SR){vY(ax);const{wrappedGtag:s,gtagCore:a}=bY(Yd,ER,AR,ax,VY);jP=s,TR=a,SR=!0}return Yd[r]=kY(n,ER,AR,t,TR,ax,e),new LY(n)}function UY(n=pP()){n=mn(n);const t=Pl(n,Z1);return t.isInitialized()?t.getImmediate():jY(n)}function jY(n,t={}){const e=Pl(n,Z1);if(e.isInitialized()){const i=e.getImmediate();if(Wo(t,e.getOptions()))return i;throw fi.create("already-initialized")}return e.initialize({options:t})}function zY(n,t,e,r){n=mn(n),NY(jP,Yd[n.app.options.appId],t,e,r).catch(i=>Zr.error(i))}const CR="@firebase/analytics",IR="0.10.18";function HY(){Gs(new ns(Z1,(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return FY(r,i,e)},"PUBLIC")),Gs(new ns("analytics-internal",n,"PRIVATE")),Li(CR,IR),Li(CR,IR,"esm2020");function n(t){try{const e=t.getProvider(Z1).getImmediate();return{logEvent:(r,i,s)=>zY(e,r,i,s)}}catch(e){throw fi.create("interop-component-reg-failed",{reason:e})}}}HY();function zP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GY=zP,HP=new Nl("auth","Firebase",zP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Vm("@firebase/auth");function WY(n,...t){J1.logLevel<=ce.WARN&&J1.warn(`Auth (${Uh}): ${n}`,...t)}function y1(n,...t){J1.logLevel<=ce.ERROR&&J1.error(`Auth (${Uh}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n,...t){throw Ub(n,...t)}function Bs(n,...t){return Ub(n,...t)}function GP(n,t,e){const r={...GY(),[t]:e};return new Nl("auth","Firebase",r).create(t,{appName:n.name})}function Fs(n){return GP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ub(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return HP.create(n,...t)}function qt(n,t,...e){if(!n)throw Ub(t,...e)}function Ta(n){const t="INTERNAL ASSERTION FAILED: "+n;throw y1(t),new Error(t)}function Oa(n,t){n||Ta(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function qY(){return RR()==="http:"||RR()==="https:"}function RR(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qY()||cP()||"connection"in navigator)?navigator.onLine:!0}function XY(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t,e){this.shortDelay=t,this.longDelay=e,Oa(e>t,"Short delay should be less than long delay!"),this.isMobile=zG()||GG()}get(){return YY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(n,t){Oa(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Y=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QY=new zg(3e4,6e4);function Zo(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Pa(n,t,e,r,i={}){return qP(n,i,async()=>{let s={},a={};r&&(t==="GET"?a=r:s={body:JSON.stringify(r)});const o=jg({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:t,headers:l,...s};return HG()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Fh(n.emulatorConfig.host)&&(h.credentials="include"),WP.fetch()(await YP(n,n.config.apiHost,e,o),h)})}async function qP(n,t,e){n._canInitEmulator=!1;const r={...KY,...t};try{const i=new JY(n),s=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Hp(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hp(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Hp(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Hp(n,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw GP(n,d,h);rs(n,d)}}catch(i){if(i instanceof is)throw i;rs(n,"network-request-failed",{message:String(i)})}}async function Hg(n,t,e,r,i={}){const s=await Pa(n,t,e,r,i);return"mfaPendingCredential"in s&&rs(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function YP(n,t,e,r){const i=`${t}${e}?${r}`,s=n,a=s.config.emulator?jb(n.config,i):`${n.config.apiScheme}://${i}`;return $Y.includes(e)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function ZY(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Bs(this.auth,"network-request-failed")),QY.get())})}}function Hp(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=Bs(n,t,r);return i.customData._tokenResponse=e,i}function DR(n){return n!==void 0&&n.enterprise!==void 0}class tX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return ZY(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eX(n,t){return Pa(n,"GET","/v2/recaptchaConfig",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nX(n,t){return Pa(n,"POST","/v1/accounts:delete",t)}async function tm(n,t){return Pa(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rX(n,t=!1){const e=mn(n),r=await e.getIdToken(t),i=zb(r);qt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xd(ox(i.auth_time)),issuedAtTime:Xd(ox(i.iat)),expirationTime:Xd(ox(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ox(n){return Number(n)*1e3}function zb(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return y1("JWT malformed, contained fewer than 3 sections"),null;try{const i=nP(e);return i?JSON.parse(i):(y1("Failed to decode base64 JWT payload"),null)}catch(i){return y1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function OR(n){const t=zb(n);return qt(t,"internal-error"),qt(typeof t.exp<"u","internal-error"),qt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof is&&iX(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function iX({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xd(this.lastLoginAt),this.creationTime=Xd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function em(n){var g;const t=n.auth,e=await n.getIdToken(),r=await gh(n,tm(t,{idToken:e}));qt(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(g=i.providerUserInfo)!=null&&g.length?XP(i.providerUserInfo):[],a=oX(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),h=o?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new V2(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function aX(n){const t=mn(n);await em(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oX(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function XP(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cX(n,t){const e=await qP(n,{},async()=>{const r=jg({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await YP(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&Fh(n.emulatorConfig.host)&&(l.credentials="include"),WP.fetch()(a,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function lX(n,t){return Pa(n,"POST","/v2/accounts:revokeToken",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qt(t.idToken,"internal-error"),qt(typeof t.idToken<"u","internal-error"),qt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):OR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){qt(t.length!==0,"internal-error");const e=OR(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(qt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:s}=await cX(t,e);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:s}=e,a=new sh;return r&&(qt(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(qt(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),s&&(qt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new sh,this.toJSON())}_performRefresh(){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(n,t){qt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ts{constructor({uid:t,auth:e,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new sX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new V2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await gh(this,this.stsTokenManager.getToken(this.auth,t));return qt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return rX(this,t)}reload(){return aX(this)}_assign(t){this!==t&&(qt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ts({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await em(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(Fs(this.auth));const t=await this.getIdToken();return await gh(this,nX(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,i=e.email??void 0,s=e.phoneNumber??void 0,a=e.photoURL??void 0,o=e.tenantId??void 0,l=e._redirectEventId??void 0,h=e.createdAt??void 0,d=e.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:v,providerData:x,stsTokenManager:b}=e;qt(g&&b,t,"internal-error");const E=sh.fromJSON(this.name,b);qt(typeof g=="string",t,"internal-error"),fo(r,t.name),fo(i,t.name),qt(typeof m=="boolean",t,"internal-error"),qt(typeof v=="boolean",t,"internal-error"),fo(s,t.name),fo(a,t.name),fo(o,t.name),fo(l,t.name),fo(h,t.name),fo(d,t.name);const T=new ts({uid:g,auth:t,email:i,emailVerified:m,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(T.providerData=x.map(S=>({...S}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(t,e,r=!1){const i=new sh;i.updateFromServerResponse(e);const s=new ts({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await em(s),s}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];qt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?XP(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new sh;o.updateFromIdToken(r);const l=new ts({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new V2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new Map;function Sa(n){Oa(n instanceof Function,"Expected a class definition");let t=MR.get(n);return t?(Oa(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,MR.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}KP.type="NONE";const NR=KP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(n,t,e){return`firebase:${n}:${t}:${e}`}class ah{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=v1(this.userKey,i.apiKey,s),this.fullPersistenceKey=v1("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await tm(this.auth,{idToken:t}).catch(()=>{});return e?ts._fromGetAccountInfoResponse(this.auth,e,t):null}return ts._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new ah(Sa(NR),t,r);const i=(await Promise.all(e.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Sa(NR);const a=v1(r,t.config.apiKey,t.name);let o=null;for(const h of e)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await tm(t,{idToken:d}).catch(()=>{});if(!m)break;g=await ts._fromGetAccountInfoResponse(t,m,d)}else g=ts._fromJSON(t,d);h!==s&&(o=g),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ah(s,t,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(e.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new ah(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(JP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($P(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(e8(t))return"Blackberry";if(n8(t))return"Webos";if(QP(t))return"Safari";if((t.includes("chrome/")||ZP(t))&&!t.includes("edge/"))return"Chrome";if(t8(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $P(n=Kn()){return/firefox\//i.test(n)}function QP(n=Kn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ZP(n=Kn()){return/crios\//i.test(n)}function JP(n=Kn()){return/iemobile/i.test(n)}function t8(n=Kn()){return/android/i.test(n)}function e8(n=Kn()){return/blackberry/i.test(n)}function n8(n=Kn()){return/webos/i.test(n)}function Hb(n=Kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uX(n=Kn()){var t;return Hb(n)&&!!((t=window.navigator)!=null&&t.standalone)}function hX(){return WG()&&document.documentMode===10}function r8(n=Kn()){return Hb(n)||t8(n)||n8(n)||e8(n)||/windows phone/i.test(n)||JP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(n,t=[]){let e;switch(n){case"Browser":e=PR(Kn());break;case"Worker":e=`${PR(Kn())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Uh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=s=>new Promise((a,o)=>{try{const l=t(s);a(l)}catch(l){o(l)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dX(n,t={}){return Pa(n,"GET","/v2/passwordPolicy",Zo(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gX=6;class pX{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??gX,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mX{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kR(this),this.idTokenSubscription=new kR(this),this.beforeStateQueue=new fX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Sa(e)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ah.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await tm(this,{idToken:t}),r=await ts._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(ui(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await em(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XY()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ui(this.app))return Promise.reject(Fs(this));const e=t?mn(t):null;return e&&qt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&qt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(Fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ui(this.app)?Promise.reject(Fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await dX(this),e=new pX(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Nl("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await lX(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Sa(t)||this._popupRedirectResolver;qt(e,this,"argument-error"),this.redirectPersistenceManager=await ah.create(this,[Sa(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,r,i);return()=>{a=!0,l()}}else{const l=t.addObserver(e);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=i8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&WY(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function kl(n){return mn(n)}class kR{constructor(t){this.auth=t,this.observer=null,this.addObserver=QG(e=>this.observer=e)}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yX(n){Um=n}function s8(n){return Um.loadJS(n)}function vX(){return Um.recaptchaEnterpriseScript}function _X(){return Um.gapiScript}function xX(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class wX{constructor(){this.enterprise=new bX}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class bX{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const EX="recaptcha-enterprise",a8="NO_RECAPTCHA";class AX{constructor(t){this.type=EX,this.auth=kl(t)}async verify(t="verify",e=!1){async function r(s){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{eX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const h=new tX(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;DR(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(a8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wX().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!e&&DR(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vX();l.length!==0&&(l+=o),s8(l).then(()=>{i(o,s,a)}).catch(h=>{a(h)})}}).catch(o=>{a(o)})})}}async function LR(n,t,e,r=!1,i=!1){const s=new AX(n);let a;if(i)a=a8;else try{a=await s.verify(e)}catch{a=await s.verify(e,!0)}const o={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function B2(n,t,e,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await LR(n,t,e,e==="getOobCode");return r(n,a)}else return r(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await LR(n,t,e,e==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TX(n,t){const e=Pl(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),s=e.getOptions();if(Wo(s,t??{}))return i;rs(i,"already-initialized")}return e.initialize({options:t})}function SX(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Sa);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function CX(n,t,e){const r=kl(n);qt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=o8(t),{host:a,port:o}=IX(t),l=o===null?"":`:${o}`,h={url:`${s}//${a}${l}/`},d=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){qt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qt(Wo(h,r.config.emulator)&&Wo(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Fh(a)?(aP(`${s}//${a}${l}`),jG("Auth",!0)):RX()}function o8(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function IX(n){const t=o8(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:VR(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:VR(a)}}}function VR(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function RX(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ta("not implemented")}_getIdTokenResponse(t){return Ta("not implemented")}_linkToIdToken(t,e){return Ta("not implemented")}_getReauthenticationResolver(t){return Ta("not implemented")}}async function DX(n,t){return Pa(n,"POST","/v1/accounts:update",t)}async function OX(n,t){return Pa(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MX(n,t){return Hg(n,"POST","/v1/accounts:signInWithPassword",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NX(n,t){return Hg(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}async function PX(n,t){return Hg(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends Gb{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new wg(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new wg(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B2(t,e,"signInWithPassword",MX);case"emailLink":return NX(t,{email:this._email,oobCode:this._password});default:rs(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B2(t,r,"signUpPassword",OX);case"emailLink":return PX(t,{idToken:e,email:this._email,oobCode:this._password});default:rs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(n,t){return Hg(n,"POST","/v1/accounts:signInWithIdp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX="http://localhost";class bl extends Gb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new bl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):rs("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...s}=e;if(!r||!i)return null;const a=new bl(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const e=this.buildRequest();return oh(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,oh(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,oh(t,e)}buildRequest(){const t={requestUri:kX,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=jg(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LX(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VX(n){const t=Td(Sd(n)).link,e=t?Td(Sd(t)).deep_link_id:null,r=Td(Sd(n)).deep_link_id;return(r?Td(Sd(r)).link:null)||r||e||t||n}class Wb{constructor(t){const e=Td(Sd(t)),r=e.apiKey??null,i=e.oobCode??null,s=LX(e.mode??null);qt(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=VX(t);try{return new Wb(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.providerId=Ll.PROVIDER_ID}static credential(t,e){return wg._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=Wb.parseLink(e);return qt(r,"argument-error"),wg._fromEmailAndCode(t,r.code,r.tenantId)}}Ll.PROVIDER_ID="password";Ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends c8{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Gg{constructor(){super("facebook.com")}static credential(t){return bl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Eo.credentialFromTaggedObject(t)}static credentialFromError(t){return Eo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Eo.credential(t.oauthAccessToken)}catch{return null}}}Eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Gg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return bl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ao.credentialFromTaggedObject(t)}static credentialFromError(t){return Ao.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return Ao.credential(e,r)}catch{return null}}}Ao.GOOGLE_SIGN_IN_METHOD="google.com";Ao.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Gg{constructor(){super("github.com")}static credential(t){return bl._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return To.credentialFromTaggedObject(t)}static credentialFromError(t){return To.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Gg{constructor(){super("twitter.com")}static credential(t,e){return bl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return So.credentialFromTaggedObject(t)}static credentialFromError(t){return So.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return So.credential(e,r)}catch{return null}}}So.TWITTER_SIGN_IN_METHOD="twitter.com";So.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BX(n,t){return Hg(n,"POST","/v1/accounts:signUp",Zo(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const s=await ts._fromIdTokenResponse(t,r,i),a=BR(r);return new El({user:s,providerId:a,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=BR(r);return new El({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function BR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends is{constructor(t,e,r,i){super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,nm.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new nm(t,e,r,i)}}function l8(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nm._fromErrorAndOperation(n,s,t,r):s})}async function FX(n,t,e=!1){const r=await gh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return El._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8(n,t,e=!1){const{auth:r}=n;if(ui(r.app))return Promise.reject(Fs(r));const i="reauthenticate";try{const s=await gh(n,l8(r,i,t,n),e);qt(s.idToken,r,"internal-error");const a=zb(s.idToken);qt(a,r,"internal-error");const{sub:o}=a;return qt(n.uid===o,r,"user-mismatch"),El._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8(n,t,e=!1){if(ui(n.app))return Promise.reject(Fs(n));const r="signIn",i=await l8(n,r,t),s=await El._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(s.user),s}async function UX(n,t){return h8(kl(n),t)}async function jX(n,t){return u8(mn(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(n){const t=kl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zX(n,t,e){if(ui(n.app))return Promise.reject(Fs(n));const r=kl(n),a=await B2(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BX).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&f8(n),l}),o=await El._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function HX(n,t,e){return ui(n.app)?Promise.reject(Fs(n)):UX(mn(n),Ll.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&f8(n),r})}function GX(n,t){const e=mn(n);return ui(e.auth.app)?Promise.reject(Fs(e.auth)):d8(e,t,null)}function WX(n,t){return d8(mn(n),null,t)}async function d8(n,t,e){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(s.email=t),e&&(s.password=e);const a=await gh(n,DX(r,s));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qX(n,t){return mn(n).setPersistence(t)}function YX(n,t,e,r){return mn(n).onIdTokenChanged(t,e,r)}function XX(n,t,e){return mn(n).beforeAuthStateChanged(t,e)}function KX(n){return mn(n).signOut()}const rm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(rm,"1"),this.storage.removeItem(rm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $X=1e3,QX=10;class p8 extends g8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!e&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);hX()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,QX):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},$X)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}p8.type="LOCAL";const m8=p8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8 extends g8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}y8.type="SESSION";const qb=y8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZX(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new jm(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:s}=e.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async h=>h(e.origin,s)),l=await ZX(o);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const h=Yb("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:e},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function tK(n){Us().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function eK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nK(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function rK(){return v8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="firebaseLocalStorageDb",iK=1,im="firebaseLocalStorage",x8="fbase_key";class Wg{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function zm(n,t){return n.transaction([im],t?"readwrite":"readonly").objectStore(im)}function sK(){const n=indexedDB.deleteDatabase(_8);return new Wg(n).toPromise()}function F2(){const n=indexedDB.open(_8,iK);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(im,{keyPath:x8})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(im)?t(r):(r.close(),await sK(),t(await F2()))})})}async function FR(n,t,e){const r=zm(n,!0).put({[x8]:t,value:e});return new Wg(r).toPromise()}async function aK(n,t){const e=zm(n,!1).get(t),r=await new Wg(e).toPromise();return r===void 0?null:r.value}function UR(n,t){const e=zm(n,!0).delete(t);return new Wg(e).toPromise()}const oK=800,cK=3;class w8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await F2(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>cK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jm._getInstance(rK()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await eK(),!this.activeServiceWorker)return;this.sender=new JX(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||nK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await F2();return await FR(t,rm,"1"),await UR(t,rm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>FR(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>aK(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>UR(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=zm(i,!1).getAll();return new Wg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w8.type="LOCAL";const lK=w8;new zg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(n,t){return t?Sa(t):(qt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Gb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return oh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return oh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return oh(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function hK(n){return h8(n.auth,new Xb(n),n.bypassAuthState)}function fK(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),u8(e,new Xb(n),n.bypassAuthState)}async function dK(n){const{auth:t,user:e}=n;return qt(e,t,"internal-error"),FX(e,new Xb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(t,e,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return hK;case"linkViaPopup":case"linkViaRedirect":return dK;case"reauthViaPopup":case"reauthViaRedirect":return fK;default:rs(this.auth,"internal-error")}}resolve(t){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK=new zg(2e3,1e4);class th extends b8{constructor(t,e,r,i,s){super(t,e,i,s),this.provider=r,this.authWindow=null,this.pollId=null,th.currentPopupAction&&th.currentPopupAction.cancel(),th.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qt(t,this.auth,"internal-error"),t}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const t=Yb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,th.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,gK.get())};t()}}th.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK="pendingRedirect",_1=new Map;class mK extends b8{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=_1.get(this.auth._key());if(!t){try{const r=await yK(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}_1.set(this.auth._key(),t)}return this.bypassAuthState||_1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yK(n,t){const e=xK(t),r=_K(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function vK(n,t){_1.set(n._key(),t)}function _K(n){return Sa(n._redirectPersistence)}function xK(n){return v1(pK,n.config.apiKey,n.name)}async function wK(n,t,e=!1){if(ui(n.app))return Promise.reject(Fs(n));const r=kl(n),i=uK(r,t),a=await new mK(r,i,e).execute();return a&&!e&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK=10*60*1e3;class EK{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!AK(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!E8(t)){const i=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(Bs(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=bK&&this.cachedEventUids.clear(),this.cachedEventUids.has(jR(t))}saveEventToCache(t){this.cachedEventUids.add(jR(t)),this.lastProcessedEventTime=Date.now()}}function jR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function E8({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function AK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E8(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TK(n,t={}){return Pa(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CK=/^https?/;async function IK(n){if(n.config.emulator)return;const{authorizedDomains:t}=await TK(n);for(const e of t)try{if(RK(e))return}catch{}rs(n,"unauthorized-domain")}function RK(n){const t=L2(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===r}if(!CK.test(e))return!1;if(SK.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK=new zg(3e4,6e4);function zR(){const n=Us().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function OK(n){return new Promise((t,e)=>{var i,s,a;function r(){zR(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zR(),e(Bs(n,"network-request-failed"))},timeout:DK.get()})}if((s=(i=Us().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Us().gapi)!=null&&a.load)r();else{const o=xX("iframefcb");return Us()[o]=()=>{gapi.load?r():e(Bs(n,"network-request-failed"))},s8(`${_X()}?onload=${o}`).catch(l=>e(l))}}).catch(t=>{throw x1=null,t})}let x1=null;function MK(n){return x1=x1||OK(n),x1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=new zg(5e3,15e3),PK="__/auth/iframe",kK="emulator/auth/iframe",LK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BK(n){const t=n.config;qt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?jb(t,kK):`https://${n.config.authDomain}/${PK}`,r={apiKey:t.apiKey,appName:n.name,v:Uh},i=VK.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${jg(r).slice(1)}`}async function FK(n){const t=await MK(n),e=Us().gapi;return qt(e,n,"internal-error"),t.open({where:document.body,url:BK(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Bs(n,"network-request-failed"),o=Us().setTimeout(()=>{s(a)},NK.get());function l(){Us().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jK=500,zK=600,HK="_blank",GK="http://localhost";class HR{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WK(n,t,e,r=jK,i=zK){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...UK,width:r.toString(),height:i.toString(),top:s,left:a},h=Kn().toLowerCase();e&&(o=ZP(h)?HK:e),$P(h)&&(t=t||GK,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(uX(h)&&o!=="_self")return qK(t||"",o),new HR(null);const g=window.open(t||"",o,d);qt(g,n,"popup-blocked");try{g.focus()}catch{}return new HR(g)}function qK(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK="__/auth/handler",XK="emulator/auth/handler",KK=encodeURIComponent("fac");async function GR(n,t,e,r,i,s){qt(n.config.authDomain,n,"auth-domain-config-required"),qt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:Uh,eventId:i};if(t instanceof c8){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",$G(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Gg){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await n._getAppCheckToken(),h=l?`#${KK}=${encodeURIComponent(l)}`:"";return`${$K(n)}?${jg(o).slice(1)}${h}`}function $K({config:n}){return n.emulator?jb(n,XK):`https://${n.authDomain}/${YK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="webStorageSupport";class QK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qb,this._completeRedirectFn=wK,this._overrideRedirectResult=vK}async _openPopup(t,e,r,i){var a;Oa((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await GR(t,e,r,L2(),i);return WK(t,s,Yb())}async _openRedirect(t,e,r,i){await this._originValidation(t);const s=await GR(t,e,r,L2(),i);return tK(s),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:s}=this.eventManagers[e];return i?Promise.resolve(i):(Oa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await FK(t),r=new EK(t);return e.register("authEvent",i=>(qt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(cx,{type:cx},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[cx];s!==void 0&&e(!!s),rs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=IK(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return r8()||QP()||Hb()}}const ZK=QK;var WR="@firebase/auth",qR="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e$(n){Gs(new ns("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;qt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i8(n)},h=new mX(r,i,s,l);return SX(h,e),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Gs(new ns("auth-internal",t=>{const e=kl(t.getProvider("auth").getImmediate());return(r=>new JK(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(WR,qR,t$(n)),Li(WR,qR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=5*60,r$=sP("authIdTokenMaxAge")||n$;let YR=null;const i$=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>r$)return;const i=e==null?void 0:e.token;YR!==i&&(YR=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Kb(n=pP()){const t=Pl(n,"auth");if(t.isInitialized())return t.getImmediate();const e=TX(n,{popupRedirectResolver:ZK,persistence:[lK,m8,qb]}),r=sP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=i$(s.toString());XX(e,a,()=>a(e.currentUser)),YX(e,o=>a(o))}}const i=VG("auth");return i&&CX(e,`http://${i}`),e}function s$(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}yX({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const s=Bs("internal-error");s.customData=i,e(s)},r.type="text/javascript",r.charset="UTF-8",s$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e$("Browser");var XR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vo,A8;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,C){function N(){}N.prototype=C.prototype,O.D=C.prototype,O.prototype=new N,O.prototype.constructor=O,O.C=function(B,z,G){for(var F=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)F[xt-2]=arguments[xt];return C.prototype[z].apply(B,F)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,C,N){N||(N=0);var B=Array(16);if(typeof C=="string")for(var z=0;16>z;++z)B[z]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(z=0;16>z;++z)B[z]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=O.g[0],N=O.g[1],z=O.g[2];var G=O.g[3],F=C+(G^N&(z^G))+B[0]+3614090360&4294967295;C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[1]+3905402710&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[2]+606105819&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[3]+3250441966&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(G^N&(z^G))+B[4]+4118548399&4294967295,C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[5]+1200080426&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[6]+2821735955&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[7]+4249261313&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(G^N&(z^G))+B[8]+1770035416&4294967295,C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[9]+2336552879&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[10]+4294925233&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[11]+2304563134&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(G^N&(z^G))+B[12]+1804603682&4294967295,C=N+(F<<7&4294967295|F>>>25),F=G+(z^C&(N^z))+B[13]+4254626195&4294967295,G=C+(F<<12&4294967295|F>>>20),F=z+(N^G&(C^N))+B[14]+2792965006&4294967295,z=G+(F<<17&4294967295|F>>>15),F=N+(C^z&(G^C))+B[15]+1236535329&4294967295,N=z+(F<<22&4294967295|F>>>10),F=C+(z^G&(N^z))+B[1]+4129170786&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[6]+3225465664&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[11]+643717713&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[0]+3921069994&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(z^G&(N^z))+B[5]+3593408605&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[10]+38016083&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[15]+3634488961&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[4]+3889429448&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(z^G&(N^z))+B[9]+568446438&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[14]+3275163606&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[3]+4107603335&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[8]+1163531501&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(z^G&(N^z))+B[13]+2850285829&4294967295,C=N+(F<<5&4294967295|F>>>27),F=G+(N^z&(C^N))+B[2]+4243563512&4294967295,G=C+(F<<9&4294967295|F>>>23),F=z+(C^N&(G^C))+B[7]+1735328473&4294967295,z=G+(F<<14&4294967295|F>>>18),F=N+(G^C&(z^G))+B[12]+2368359562&4294967295,N=z+(F<<20&4294967295|F>>>12),F=C+(N^z^G)+B[5]+4294588738&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[8]+2272392833&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[11]+1839030562&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[14]+4259657740&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(N^z^G)+B[1]+2763975236&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[4]+1272893353&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[7]+4139469664&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[10]+3200236656&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(N^z^G)+B[13]+681279174&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[0]+3936430074&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[3]+3572445317&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[6]+76029189&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(N^z^G)+B[9]+3654602809&4294967295,C=N+(F<<4&4294967295|F>>>28),F=G+(C^N^z)+B[12]+3873151461&4294967295,G=C+(F<<11&4294967295|F>>>21),F=z+(G^C^N)+B[15]+530742520&4294967295,z=G+(F<<16&4294967295|F>>>16),F=N+(z^G^C)+B[2]+3299628645&4294967295,N=z+(F<<23&4294967295|F>>>9),F=C+(z^(N|~G))+B[0]+4096336452&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[7]+1126891415&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[14]+2878612391&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[5]+4237533241&4294967295,N=z+(F<<21&4294967295|F>>>11),F=C+(z^(N|~G))+B[12]+1700485571&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[3]+2399980690&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[10]+4293915773&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[1]+2240044497&4294967295,N=z+(F<<21&4294967295|F>>>11),F=C+(z^(N|~G))+B[8]+1873313359&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[15]+4264355552&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[6]+2734768916&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[13]+1309151649&4294967295,N=z+(F<<21&4294967295|F>>>11),F=C+(z^(N|~G))+B[4]+4149444226&4294967295,C=N+(F<<6&4294967295|F>>>26),F=G+(N^(C|~z))+B[11]+3174756917&4294967295,G=C+(F<<10&4294967295|F>>>22),F=z+(C^(G|~N))+B[2]+718787259&4294967295,z=G+(F<<15&4294967295|F>>>17),F=N+(G^(z|~C))+B[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(z+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+z&4294967295,O.g[3]=O.g[3]+G&4294967295}r.prototype.u=function(O,C){C===void 0&&(C=O.length);for(var N=C-this.blockSize,B=this.B,z=this.h,G=0;G<C;){if(z==0)for(;G<=N;)i(this,O,G),G+=this.blockSize;if(typeof O=="string"){for(;G<C;)if(B[z++]=O.charCodeAt(G++),z==this.blockSize){i(this,B),z=0;break}}else for(;G<C;)if(B[z++]=O[G++],z==this.blockSize){i(this,B),z=0;break}}this.h=z,this.o+=C},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;var N=8*this.o;for(C=O.length-8;C<O.length;++C)O[C]=N&255,N/=256;for(this.u(O),O=Array(16),C=N=0;4>C;++C)for(var B=0;32>B;B+=8)O[N++]=this.g[C]>>>B&255;return O};function s(O,C){var N=o;return Object.prototype.hasOwnProperty.call(N,O)?N[O]:N[O]=C(O)}function a(O,C){this.h=C;for(var N=[],B=!0,z=O.length-1;0<=z;z--){var G=O[z]|0;B&&G==C||(N[z]=G,B=!1)}this.g=N}var o={};function l(O){return-128<=O&&128>O?s(O,function(C){return new a([C|0],0>C?-1:0)}):new a([O|0],0>O?-1:0)}function h(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return E(h(-O));for(var C=[],N=1,B=0;O>=N;B++)C[B]=O/N|0,N*=4294967296;return new a(C,0)}function d(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return E(d(O.substring(1),C));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(C,8)),B=g,z=0;z<O.length;z+=8){var G=Math.min(8,O.length-z),F=parseInt(O.substring(z,z+G),C);8>G?(G=h(Math.pow(C,G)),B=B.j(G).add(h(F))):(B=B.j(N),B=B.add(h(F)))}return B}var g=l(0),m=l(1),v=l(16777216);n=a.prototype,n.m=function(){if(b(this))return-E(this).m();for(var O=0,C=1,N=0;N<this.g.length;N++){var B=this.i(N);O+=(0<=B?B:4294967296+B)*C,C*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(x(this))return"0";if(b(this))return"-"+E(this).toString(O);for(var C=h(Math.pow(O,6)),N=this,B="";;){var z=P(N,C).g;N=T(N,z.j(C));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(O);if(N=z,x(N))return G+B;for(;6>G.length;)G="0"+G;B=G+B}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function x(O){if(O.h!=0)return!1;for(var C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function b(O){return O.h==-1}n.l=function(O){return O=T(this,O),b(O)?-1:x(O)?0:1};function E(O){for(var C=O.g.length,N=[],B=0;B<C;B++)N[B]=~O.g[B];return new a(N,~O.h).add(m)}n.abs=function(){return b(this)?E(this):this},n.add=function(O){for(var C=Math.max(this.g.length,O.g.length),N=[],B=0,z=0;z<=C;z++){var G=B+(this.i(z)&65535)+(O.i(z)&65535),F=(G>>>16)+(this.i(z)>>>16)+(O.i(z)>>>16);B=F>>>16,G&=65535,F&=65535,N[z]=F<<16|G}return new a(N,N[N.length-1]&-2147483648?-1:0)};function T(O,C){return O.add(E(C))}n.j=function(O){if(x(this)||x(O))return g;if(b(this))return b(O)?E(this).j(E(O)):E(E(this).j(O));if(b(O))return E(this.j(E(O)));if(0>this.l(v)&&0>O.l(v))return h(this.m()*O.m());for(var C=this.g.length+O.g.length,N=[],B=0;B<2*C;B++)N[B]=0;for(B=0;B<this.g.length;B++)for(var z=0;z<O.g.length;z++){var G=this.i(B)>>>16,F=this.i(B)&65535,xt=O.i(z)>>>16,wt=O.i(z)&65535;N[2*B+2*z]+=F*wt,S(N,2*B+2*z),N[2*B+2*z+1]+=G*wt,S(N,2*B+2*z+1),N[2*B+2*z+1]+=F*xt,S(N,2*B+2*z+1),N[2*B+2*z+2]+=G*xt,S(N,2*B+2*z+2)}for(B=0;B<C;B++)N[B]=N[2*B+1]<<16|N[2*B];for(B=C;B<2*C;B++)N[B]=0;return new a(N,0)};function S(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function R(O,C){this.g=O,this.h=C}function P(O,C){if(x(C))throw Error("division by zero");if(x(O))return new R(g,g);if(b(O))return C=P(E(O),C),new R(E(C.g),E(C.h));if(b(C))return C=P(O,E(C)),new R(E(C.g),C.h);if(30<O.g.length){if(b(O)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var N=m,B=C;0>=B.l(O);)N=M(N),B=M(B);var z=H(N,1),G=H(B,1);for(B=H(B,2),N=H(N,2);!x(B);){var F=G.add(B);0>=F.l(O)&&(z=z.add(N),G=F),B=H(B,1),N=H(N,1)}return C=T(O,z.j(C)),new R(z,C)}for(z=g;0<=O.l(C);){for(N=Math.max(1,Math.floor(O.m()/C.m())),B=Math.ceil(Math.log(N)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),G=h(N),F=G.j(C);b(F)||0<F.l(O);)N-=B,G=h(N),F=G.j(C);x(G)&&(G=m),z=z.add(G),O=T(O,F)}return new R(z,O)}n.A=function(O){return P(this,O).h},n.and=function(O){for(var C=Math.max(this.g.length,O.g.length),N=[],B=0;B<C;B++)N[B]=this.i(B)&O.i(B);return new a(N,this.h&O.h)},n.or=function(O){for(var C=Math.max(this.g.length,O.g.length),N=[],B=0;B<C;B++)N[B]=this.i(B)|O.i(B);return new a(N,this.h|O.h)},n.xor=function(O){for(var C=Math.max(this.g.length,O.g.length),N=[],B=0;B<C;B++)N[B]=this.i(B)^O.i(B);return new a(N,this.h^O.h)};function M(O){for(var C=O.g.length+1,N=[],B=0;B<C;B++)N[B]=O.i(B)<<1|O.i(B-1)>>>31;return new a(N,O.h)}function H(O,C){var N=C>>5;C%=32;for(var B=O.g.length-N,z=[],G=0;G<B;G++)z[G]=0<C?O.i(G+N)>>>C|O.i(G+N+1)<<32-C:O.i(G+N);return new a(z,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,A8=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Vo=a}).apply(typeof XR<"u"?XR:typeof self<"u"?self:typeof window<"u"?window:{});var Gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T8,Cd,S8,w1,U2,C8,I8,R8;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,I){return y==Array.prototype||y==Object.prototype||(y[A]=I.value),y};function e(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gp=="object"&&Gp];for(var A=0;A<y.length;++A){var I=y[A];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=e(this);function i(y,A){if(A)t:{var I=r;y=y.split(".");for(var U=0;U<y.length-1;U++){var $=y[U];if(!($ in I))break t;I=I[$]}y=y[y.length-1],U=I[y],A=A(U),A!=U&&A!=null&&t(I,y,{configurable:!0,writable:!0,value:A})}}function s(y,A){y instanceof String&&(y+="");var I=0,U=!1,$={next:function(){if(!U&&I<y.length){var at=I++;return{value:A(at,y[at]),done:!1}}return U=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(y){return y||function(){return s(this,function(A,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function h(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function d(y,A,I){return y.call.apply(y.bind,arguments)}function g(y,A,I){if(!y)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,U),y.apply(A,$)}}return function(){return y.apply(A,arguments)}}function m(y,A,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function v(y,A){var I=Array.prototype.slice.call(arguments,1);return function(){var U=I.slice();return U.push.apply(U,arguments),y.apply(this,U)}}function x(y,A){function I(){}I.prototype=A.prototype,y.aa=A.prototype,y.prototype=new I,y.prototype.constructor=y,y.Qb=function(U,$,at){for(var Et=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)Et[ue-2]=arguments[ue];return A.prototype[$].apply(U,Et)}}function b(y){const A=y.length;if(0<A){const I=Array(A);for(let U=0;U<A;U++)I[U]=y[U];return I}return[]}function E(y,A){for(let I=1;I<arguments.length;I++){const U=arguments[I];if(l(U)){const $=y.length||0,at=U.length||0;y.length=$+at;for(let Et=0;Et<at;Et++)y[$+Et]=U[Et]}else y.push(U)}}class T{constructor(A,I){this.i=A,this.j=I,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function S(y){return/^[\s\xa0]*$/.test(y)}function R(){var y=o.navigator;return y&&(y=y.userAgent)?y:""}function P(y){return P[" "](y),y}P[" "]=function(){};var M=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(y,A,I){for(const U in y)A.call(I,y[U],U,y)}function O(y,A){for(const I in y)A.call(void 0,y[I],I,y)}function C(y){const A={};for(const I in y)A[I]=y[I];return A}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(y,A){let I,U;for(let $=1;$<arguments.length;$++){U=arguments[$];for(I in U)y[I]=U[I];for(let at=0;at<N.length;at++)I=N[at],Object.prototype.hasOwnProperty.call(U,I)&&(y[I]=U[I])}}function z(y){var A=1;y=y.split(":");const I=[];for(;0<A&&y.length;)I.push(y.shift()),A--;return y.length&&I.push(y.join(":")),I}function G(y){o.setTimeout(()=>{throw y},0)}function F(){var y=et;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class xt{constructor(){this.h=this.g=null}add(A,I){const U=wt.get();U.set(A,I),this.h?this.h.next=U:this.g=U,this.h=U}}var wt=new T(()=>new K,y=>y.reset());class K{constructor(){this.next=this.g=this.h=null}set(A,I){this.h=A,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,vt=!1,et=new xt,V=()=>{const y=o.Promise.resolve(void 0);ot=()=>{y.then(q)}};var q=()=>{for(var y;y=F();){try{y.h.call(y.g)}catch(I){G(I)}var A=wt;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}vt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const I=()=>{};o.addEventListener("test",I,A),o.removeEventListener("test",I,A)}catch{}return y}();function St(y,A){if(nt.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var I=this.type=y.type,U=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(M){t:{try{P(A.nodeName);var $=!0;break t}catch{}$=!1}$||(A=null)}}else I=="mouseover"?A=y.fromElement:I=="mouseout"&&(A=y.toElement);this.relatedTarget=A,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Tt[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&St.aa.h.call(this)}}x(St,nt);var Tt={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),Ut=0;function pt(y,A,I,U,$){this.listener=y,this.proxy=null,this.src=A,this.type=I,this.capture=!!U,this.ha=$,this.key=++Ut,this.da=this.fa=!1}function _t(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function bt(y){this.src=y,this.g={},this.h=0}bt.prototype.add=function(y,A,I,U,$){var at=y.toString();y=this.g[at],y||(y=this.g[at]=[],this.h++);var Et=jt(y,A,U,$);return-1<Et?(A=y[Et],I||(A.fa=!1)):(A=new pt(A,this.src,at,!!U,$),A.fa=I,y.push(A)),A};function Ot(y,A){var I=A.type;if(I in y.g){var U=y.g[I],$=Array.prototype.indexOf.call(U,A,void 0),at;(at=0<=$)&&Array.prototype.splice.call(U,$,1),at&&(_t(A),y.g[I].length==0&&(delete y.g[I],y.h--))}}function jt(y,A,I,U){for(var $=0;$<y.length;++$){var at=y[$];if(!at.da&&at.listener==A&&at.capture==!!I&&at.ha==U)return $}return-1}var Bt="closure_lm_"+(1e6*Math.random()|0),$t={};function _n(y,A,I,U,$){if(Array.isArray(A)){for(var at=0;at<A.length;at++)_n(y,A[at],I,U,$);return null}return I=as(I),y&&y[Zt]?y.K(A,I,h(U)?!!U.capture:!1,$):Ie(y,A,I,!1,U,$)}function Ie(y,A,I,U,$,at){if(!A)throw Error("Invalid event type");var Et=h($)?!!$.capture:!!$,ue=ss(y);if(ue||(y[Bt]=ue=new bt(y)),I=ue.add(A,I,U,Et,at),I.proxy)return I;if(U=Wt(),I.proxy=U,U.src=y,U.listener=I,y.addEventListener)mt||($=Et),$===void 0&&($=!1),y.addEventListener(A.toString(),U,$);else if(y.attachEvent)y.attachEvent(Ze(A.toString()),U);else if(y.addListener&&y.removeListener)y.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Wt(){function y(I){return A.call(y.src,y.listener,I)}const A=pi;return y}function un(y,A,I,U,$){if(Array.isArray(A))for(var at=0;at<A.length;at++)un(y,A[at],I,U,$);else U=h(U)?!!U.capture:!!U,I=as(I),y&&y[Zt]?(y=y.i,A=String(A).toString(),A in y.g&&(at=y.g[A],I=jt(at,I,U,$),-1<I&&(_t(at[I]),Array.prototype.splice.call(at,I,1),at.length==0&&(delete y.g[A],y.h--)))):y&&(y=ss(y))&&(A=y.g[A.toString()],y=-1,A&&(y=jt(A,I,U,$)),(I=-1<y?A[y]:null)&&Rt(I))}function Rt(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[Zt])Ot(A.i,y);else{var I=y.type,U=y.proxy;A.removeEventListener?A.removeEventListener(I,U,y.capture):A.detachEvent?A.detachEvent(Ze(I),U):A.addListener&&A.removeListener&&A.removeListener(U),(I=ss(A))?(Ot(I,y),I.h==0&&(I.src=null,A[Bt]=null)):_t(y)}}}function Ze(y){return y in $t?$t[y]:$t[y]="on"+y}function pi(y,A){if(y.da)y=!0;else{A=new St(A,this);var I=y.listener,U=y.ha||y.src;y.fa&&Rt(y),y=I.call(U,A)}return y}function ss(y){return y=y[Bt],y instanceof bt?y:null}var Ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function as(y){return typeof y=="function"?y:(y[Ui]||(y[Ui]=function(A){return y.handleEvent(A)}),y[Ui])}function Xe(){ct.call(this),this.i=new bt(this),this.M=this,this.F=null}x(Xe,ct),Xe.prototype[Zt]=!0,Xe.prototype.removeEventListener=function(y,A,I,U){un(this,y,A,I,U)};function ye(y,A){var I,U=y.F;if(U)for(I=[];U;U=U.F)I.push(U);if(y=y.M,U=A.type||A,typeof A=="string")A=new nt(A,y);else if(A instanceof nt)A.target=A.target||y;else{var $=A;A=new nt(U,y),B(A,$)}if($=!0,I)for(var at=I.length-1;0<=at;at--){var Et=A.g=I[at];$=vr(Et,U,!0,A)&&$}if(Et=A.g=y,$=vr(Et,U,!0,A)&&$,$=vr(Et,U,!1,A)&&$,I)for(at=0;at<I.length;at++)Et=A.g=I[at],$=vr(Et,U,!1,A)&&$}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var I=y.g[A],U=0;U<I.length;U++)_t(I[U]);delete y.g[A],y.h--}}this.F=null},Xe.prototype.K=function(y,A,I,U){return this.i.add(String(y),A,!1,I,U)},Xe.prototype.L=function(y,A,I,U){return this.i.add(String(y),A,!0,I,U)};function vr(y,A,I,U){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var $=!0,at=0;at<A.length;++at){var Et=A[at];if(Et&&!Et.da&&Et.capture==I){var ue=Et.listener,Bn=Et.ha||Et.src;Et.fa&&Ot(y.i,Et),$=ue.call(Bn,U)!==!1&&$}}return $&&!U.defaultPrevented}function _r(y,A,I){if(typeof y=="function")I&&(y=m(y,I));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:o.setTimeout(y,A||0)}function i0(y){y.g=_r(()=>{y.g=null,y.i&&(y.i=!1,i0(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class xy extends ct{constructor(A,I){super(),this.m=A,this.l=I,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:i0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ic(y){ct.call(this),this.h=y,this.g={}}x(ic,ct);var sc=[];function ac(y){H(y.g,function(A,I){this.g.hasOwnProperty(I)&&Rt(A)},y),y.g={}}ic.prototype.N=function(){ic.aa.N.call(this),ac(this)},ic.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=o.JSON.stringify,jl=o.JSON.parse,oc=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function Yh(){}Yh.prototype.h=null;function Xh(y){return y.h||(y.h=y.i())}function Kh(){}var Ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $s(){nt.call(this,"d")}x($s,nt);function $h(){nt.call(this,"c")}x($h,nt);var os={},Qh=null;function Ba(){return Qh=Qh||new Xe}os.La="serverreachability";function zl(y){nt.call(this,os.La,y)}x(zl,nt);function Fa(y){const A=Ba();ye(A,new zl(A))}os.STAT_EVENT="statevent";function s0(y,A){nt.call(this,os.STAT_EVENT,y),this.stat=A}x(s0,nt);function Je(y){const A=Ba();ye(A,new s0(A,y))}os.Ma="timingevent";function Vn(y,A){nt.call(this,os.Ma,y),this.size=A}x(Vn,nt);function Rn(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},A)}function mi(){this.g=!0}mi.prototype.xa=function(){this.g=!1};function Zh(y,A,I,U,$,at){y.info(function(){if(y.g)if(at)for(var Et="",ue=at.split("&"),Bn=0;Bn<ue.length;Bn++){var he=ue[Bn].split("=");if(1<he.length){var Zn=he[0];he=he[1];var Fn=Zn.split("_");Et=2<=Fn.length&&Fn[1]=="type"?Et+(Zn+"="+he+"&"):Et+(Zn+"=redacted&")}}else Et=null;else Et=at;return"XMLHTTP REQ ("+U+") [attempt "+$+"]: "+A+`
`+I+`
`+Et})}function wy(y,A,I,U,$,at,Et){y.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+$+"]: "+A+`
`+I+`
`+at+" "+Et})}function Ua(y,A,I,U){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+cc(y,I)+(U?" "+U:"")})}function a0(y,A){y.info(function(){return"TIMEOUT: "+A})}mi.prototype.info=function(){};function cc(y,A){if(!y.g)return A;if(!A)return null;try{var I=JSON.parse(A);if(I){for(y=0;y<I.length;y++)if(Array.isArray(I[y])){var U=I[y];if(!(2>U.length)){var $=U[1];if(Array.isArray($)&&!(1>$.length)){var at=$[0];if(at!="noop"&&at!="stop"&&at!="close")for(var Et=1;Et<$.length;Et++)$[Et]=""}}}}return ji(I)}catch{return A}}var ja={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cs;function ls(){}x(ls,Yh),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},cs=new ls;function Mr(y,A,I,U){this.j=y,this.i=A,this.l=I,this.R=U||1,this.U=new ic(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xn}function xn(){this.i=null,this.g="",this.h=!1}var Jh={},Hl={};function zi(y,A,I){y.L=1,y.v=dc(ti(A)),y.m=I,y.P=!0,Zs(y,null)}function Zs(y,A){y.F=Date.now(),lc(y),y.A=ti(y.v);var I=y.A,U=y.R;Array.isArray(U)||(U=[String(U)]),af(I.i,"t",U),y.C=0,I=y.j.J,y.h=new xn,y.g=b0(y.j,I?A:null,!y.m),0<y.O&&(y.M=new xy(m(y.Y,y,y.g),y.O)),A=y.U,I=y.g,U=y.ca;var $="readystatechange";Array.isArray($)||($&&(sc[0]=$.toString()),$=sc);for(var at=0;at<$.length;at++){var Et=_n(I,$[at],U||A.handleEvent,!1,A.h||A);if(!Et)break;A.g[Et.key]=Et}A=y.H?C(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),Fa(),Zh(y.i,y.u,y.A,y.l,y.R,y.m)}Mr.prototype.ca=function(y){y=y.target;const A=this.M;A&&xi(y)==3?A.j():this.Y(y)},Mr.prototype.Y=function(y){try{if(y==this.g)t:{const Fn=xi(this.g);var A=this.g.Ba();const aa=this.g.Z();if(!(3>Fn)&&(Fn!=3||this.g&&(this.h.h||this.g.oa()||g0(this.g)))){this.J||Fn!=4||A==7||(A==8||0>=aa?Fa(3):Fa(2)),za(this);var I=this.g.Z();this.X=I;e:if(o0(this)){var U=g0(this.g);y="";var $=U.length,at=xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),us(this);var Et="";break e}this.h.i=new o.TextDecoder}for(A=0;A<$;A++)this.h.h=!0,y+=this.h.i.decode(U[A],{stream:!(at&&A==$-1)});U.length=0,this.h.g+=y,this.C=0,Et=this.h.g}else Et=this.g.oa();if(this.o=I==200,wy(this.i,this.u,this.A,this.l,this.R,Fn,I),this.o){if(this.T&&!this.K){e:{if(this.g){var ue,Bn=this.g;if((ue=Bn.g?Bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(ue)){var he=ue;break e}}he=null}if(I=he)Ua(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uc(this,I);else{this.o=!1,this.s=3,Je(12),cr(this),us(this);break t}}if(this.P){I=!0;let lr;for(;!this.J&&this.C<Et.length;)if(lr=c0(this,Et),lr==Hl){Fn==4&&(this.s=4,Je(14),I=!1),Ua(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==Jh){this.s=4,Je(15),Ua(this.i,this.l,Et,"[Invalid Chunk]"),I=!1;break}else Ua(this.i,this.l,lr,null),uc(this,lr);if(o0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fn!=4||Et.length!=0||this.h.h||(this.s=1,Je(16),I=!1),this.o=this.o&&I,!I)Ua(this.i,this.l,Et,"[Invalid Chunked Response]"),cr(this),us(this);else if(0<Et.length&&!this.W){this.W=!0;var Zn=this.j;Zn.g==this&&Zn.ba&&!Zn.M&&(Zn.j.info("Great, no buffering proxy detected. Bytes received: "+Et.length),wc(Zn),Zn.M=!0,Je(11))}}else Ua(this.i,this.l,Et,null),uc(this,Et);Fn==4&&cr(this),this.o&&!this.J&&(Fn==4?_0(this.j,this):(this.o=!1,lc(this)))}else Sy(this.g),I==400&&0<Et.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),cr(this),us(this)}}}catch{}finally{}};function o0(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function c0(y,A){var I=y.C,U=A.indexOf(`
`,I);return U==-1?Hl:(I=Number(A.substring(I,U)),isNaN(I)?Jh:(U+=1,U+I>A.length?Hl:(A=A.slice(U,U+I),y.C=U+I,A)))}Mr.prototype.cancel=function(){this.J=!0,cr(this)};function lc(y){y.S=Date.now()+y.I,l0(y,y.I)}function l0(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Rn(m(y.ba,y),A)}function za(y){y.B&&(o.clearTimeout(y.B),y.B=null)}Mr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(a0(this.i,this.A),this.L!=2&&(Fa(),Je(17)),cr(this),this.s=2,us(this)):l0(this,this.S-y)};function us(y){y.j.G==0||y.J||_0(y.j,y)}function cr(y){za(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,ac(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function uc(y,A){try{var I=y.j;if(I.G!=0&&(I.g==y||tf(I.h,y))){if(!y.K&&tf(I.h,y)&&I.G==3){try{var U=I.Da.g.parse(A)}catch{U=null}if(Array.isArray(U)&&U.length==3){var $=U;if($[0]==0){t:if(!I.u){if(I.g)if(I.g.F+3e3<y.F)eu(I),Jl(I);else break t;hf(I),Je(18)}}else I.za=$[1],0<I.za-I.T&&37500>$[2]&&I.F&&I.v==0&&!I.C&&(I.C=Rn(m(I.Za,I),6e3));if(1>=Wl(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else sa(I,11)}else if((y.K||I.g==y)&&eu(I),!S(A))for($=I.Da.g.parse(A),A=0;A<$.length;A++){let he=$[A];if(I.T=he[0],he=he[1],I.G==2)if(he[0]=="c"){I.K=he[1],I.ia=he[2];const Zn=he[3];Zn!=null&&(I.la=Zn,I.j.info("VER="+I.la));const Fn=he[4];Fn!=null&&(I.Aa=Fn,I.j.info("SVER="+I.Aa));const aa=he[5];aa!=null&&typeof aa=="number"&&0<aa&&(U=1.5*aa,I.L=U,I.j.info("backChannelRequestTimeoutMs_="+U)),U=I;const lr=y.g;if(lr){const ys=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var at=U.h;at.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(ql(at,at.h),at.h=null))}if(U.D){const df=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;df&&(U.ya=df,Ve(U.I,U.D,df))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-y.F,I.j.info("Handshake RTT: "+I.R+"ms")),U=I;var Et=y;if(U.qa=w0(U,U.J?U.ia:null,U.W),Et.K){Nr(U.h,Et);var ue=Et,Bn=U.L;Bn&&(ue.I=Bn),ue.B&&(za(ue),lc(ue)),U.g=Et}else y0(U);0<I.i.length&&tu(I)}else he[0]!="stop"&&he[0]!="close"||sa(I,7);else I.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?sa(I,7):lf(I):he[0]!="noop"&&I.l&&I.l.ta(he),I.v=0)}}Fa(4)}catch{}}var u0=class{constructor(y,A){this.g=y,this.map=A}};function Js(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gl(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Wl(y){return y.h?1:y.g?y.g.size:0}function tf(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function ql(y,A){y.g?y.g.add(A):y.h=A}function Nr(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}Js.prototype.cancel=function(){if(this.i=ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function ef(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const I of y.g.values())A=A.concat(I.D);return A}return b(y.i)}function by(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var A=[],I=y.length,U=0;U<I;U++)A.push(y[U]);return A}A=[],I=0;for(U in y)A[I++]=y[U];return A}function Yl(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var A=[];y=y.length;for(var I=0;I<y;I++)A.push(I);return A}A=[],I=0;for(const U in y)A[I++]=U;return A}}}function nf(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var I=Yl(y),U=by(y),$=U.length,at=0;at<$;at++)A.call(void 0,U[at],I&&I[at],y)}var hc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ey(y,A){if(y){y=y.split("&");for(var I=0;I<y.length;I++){var U=y[I].indexOf("="),$=null;if(0<=U){var at=y[I].substring(0,U);$=y[I].substring(U+1)}else at=y[I];A(at,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Dn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Dn){this.h=y.h,fc(this,y.j),this.o=y.o,this.g=y.g,Ha(this,y.s),this.l=y.l;var A=y.i,I=new ea;I.i=A.i,A.g&&(I.g=new Map(A.g),I.h=A.h),ta(this,I),this.m=y.m}else y&&(A=String(y).match(hc))?(this.h=!1,fc(this,A[1]||"",!0),this.o=yi(A[2]||""),this.g=yi(A[3]||"",!0),Ha(this,A[4]),this.l=yi(A[5]||"",!0),ta(this,A[6]||"",!0),this.m=yi(A[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}Dn.prototype.toString=function(){var y=[],A=this.j;A&&y.push(gc(A,rf,!0),":");var I=this.g;return(I||A=="file")&&(y.push("//"),(A=this.o)&&y.push(gc(A,rf,!0),"@"),y.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&y.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&y.push("/"),y.push(gc(I,I.charAt(0)=="/"?Ay:sf,!0))),(I=this.i.toString())&&y.push("?",I),(I=this.m)&&y.push("#",gc(I,Xl)),y.join("")};function ti(y){return new Dn(y)}function fc(y,A,I){y.j=I?yi(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function Ha(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function ta(y,A,I){A instanceof ea?(y.i=A,f0(y.i,y.h)):(I||(A=gc(A,Ty)),y.i=new ea(A,y.h))}function Ve(y,A,I){y.i.set(A,I)}function dc(y){return Ve(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function yi(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function gc(y,A,I){return typeof y=="string"?(y=encodeURI(y).replace(A,h0),I&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function h0(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var rf=/[#\/\?@]/g,sf=/[#\?:]/g,Ay=/[#\?]/g,Ty=/[#\?@]/g,Xl=/#/g;function ea(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function vi(y){y.g||(y.g=new Map,y.h=0,y.i&&Ey(y.i,function(A,I){y.add(decodeURIComponent(A.replace(/\+/g," ")),I)}))}n=ea.prototype,n.add=function(y,A){vi(this),this.i=null,y=hs(this,y);var I=this.g.get(y);return I||this.g.set(y,I=[]),I.push(A),this.h+=1,this};function na(y,A){vi(y),A=hs(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function ra(y,A){return vi(y),A=hs(y,A),y.g.has(A)}n.forEach=function(y,A){vi(this),this.g.forEach(function(I,U){I.forEach(function($){y.call(A,$,U,this)},this)},this)},n.na=function(){vi(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),I=[];for(let U=0;U<A.length;U++){const $=y[U];for(let at=0;at<$.length;at++)I.push(A[U])}return I},n.V=function(y){vi(this);let A=[];if(typeof y=="string")ra(this,y)&&(A=A.concat(this.g.get(hs(this,y))));else{y=Array.from(this.g.values());for(let I=0;I<y.length;I++)A=A.concat(y[I])}return A},n.set=function(y,A){return vi(this),this.i=null,y=hs(this,y),ra(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},n.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function af(y,A,I){na(y,A),0<I.length&&(y.i=null,y.g.set(hs(y,A),b(I)),y.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var I=0;I<A.length;I++){var U=A[I];const at=encodeURIComponent(String(U)),Et=this.V(U);for(U=0;U<Et.length;U++){var $=at;Et[U]!==""&&($+="="+encodeURIComponent(String(Et[U]))),y.push($)}}return this.i=y.join("&")};function hs(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function f0(y,A){A&&!y.j&&(vi(y),y.i=null,y.g.forEach(function(I,U){var $=U.toLowerCase();U!=$&&(na(this,U),af(this,$,I))},y)),y.j=A}function pc(y,A){const I=new mi;if(o.Image){const U=new Image;U.onload=v(_i,I,"TestLoadImage: loaded",!0,A,U),U.onerror=v(_i,I,"TestLoadImage: error",!1,A,U),U.onabort=v(_i,I,"TestLoadImage: abort",!1,A,U),U.ontimeout=v(_i,I,"TestLoadImage: timeout",!1,A,U),o.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=y}else A(!1)}function Hi(y,A){const I=new mi,U=new AbortController,$=setTimeout(()=>{U.abort(),_i(I,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:U.signal}).then(at=>{clearTimeout($),at.ok?_i(I,"TestPingServer: ok",!0,A):_i(I,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout($),_i(I,"TestPingServer: error",!1,A)})}function _i(y,A,I,U,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),U(I)}catch{}}function mc(){this.g=new oc}function fs(y,A,I){const U=I||"";try{nf(y,function($,at){let Et=$;h($)&&(Et=ji($)),A.push(U+at+"="+encodeURIComponent(Et))})}catch($){throw A.push(U+"type="+encodeURIComponent("_badmap")),$}}function Ga(y){this.l=y.Ub||null,this.j=y.eb||!1}x(Ga,Yh),Ga.prototype.g=function(){return new ia(this.l,this.j)},Ga.prototype.i=function(y){return function(){return y}}({});function ia(y,A){Xe.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ia,Xe),n=ia.prototype,n.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,gs(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||o).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;of(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function of(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?ds(this):gs(this),this.readyState==3&&of(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,ds(this))},n.Qa=function(y){this.g&&(this.response=y,ds(this))},n.ga=function(){this.g&&ds(this)};function ds(y){y.readyState=4,y.l=null,y.j=null,y.v=null,gs(y)}n.setRequestHeader=function(y,A){this.u.append(y,A)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var I=A.next();!I.done;)I=I.value,y.push(I[0]+": "+I[1]),I=A.next();return y.join(`\r
`)};function gs(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function cf(y){let A="";return H(y,function(I,U){A+=U,A+=":",A+=I,A+=`\r
`}),A}function Qn(y,A,I){t:{for(U in I){var U=!1;break t}U=!0}U||(I=cf(I),typeof y=="string"?I!=null&&encodeURIComponent(String(I)):Ve(y,A,I))}function Ae(y){Xe.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ae,Xe);var Kl=/^https?$/i,yc=["POST","PUT"];n=Ae.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,A,I,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cs.g(),this.v=this.o?Xh(this.o):Xh(cs),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(at){d0(this,at);return}if(y=I||"",I=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var $ in U)I.set($,U[$]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const at of U.keys())I.set(at,U.get(at));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(I.keys()).find(at=>at.toLowerCase()=="content-type"),$=o.FormData&&y instanceof o.FormData,!(0<=Array.prototype.indexOf.call(yc,A,void 0))||U||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,Et]of I)this.g.setRequestHeader(at,Et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vc(this),this.u=!0,this.g.send(y),this.u=!1}catch(at){d0(this,at)}};function d0(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,$l(y),ps(y)}function $l(y){y.A||(y.A=!0,ye(y,"complete"),ye(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,ye(this,"complete"),ye(this,"abort"),ps(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ps(this,!0)),Ae.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ql(this):this.bb())},n.bb=function(){Ql(this)};function Ql(y){if(y.h&&typeof a<"u"&&(!y.v[1]||xi(y)!=4||y.Z()!=2)){if(y.u&&xi(y)==4)_r(y.Ea,0,y);else if(ye(y,"readystatechange"),xi(y)==4){y.h=!1;try{const Et=y.Z();t:switch(Et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var I;if(!(I=A)){var U;if(U=Et===0){var $=String(y.D).match(hc)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),U=!Kl.test($?$.toLowerCase():"")}I=U}if(I)ye(y,"complete"),ye(y,"success");else{y.m=6;try{var at=2<xi(y)?y.g.statusText:""}catch{at=""}y.l=at+" ["+y.Z()+"]",$l(y)}}finally{ps(y)}}}}function ps(y,A){if(y.g){vc(y);const I=y.g,U=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||ye(y,"ready");try{I.onreadystatechange=U}catch{}}}function vc(y){y.I&&(o.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function xi(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),jl(A)}};function g0(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Sy(y){const A={};y=(y.g&&2<=xi(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<y.length;U++){if(S(y[U]))continue;var I=z(y[U]);const $=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const at=A[$]||[];A[$]=at,at.push(I)}O(A,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _c(y,A,I){return I&&I.internalChannelParams&&I.internalChannelParams[y]||A}function Zl(y){this.Aa=0,this.i=[],this.j=new mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_c("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_c("baseRetryDelayMs",5e3,y),this.cb=_c("retryDelaySeedMs",1e4,y),this.Wa=_c("forwardChannelMaxRetries",2,y),this.wa=_c("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Js(y&&y.concurrentRequestLimit),this.Da=new mc,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zl.prototype,n.la=8,n.G=1,n.connect=function(y,A,I,U){Je(0),this.W=y,this.H=A||{},I&&U!==void 0&&(this.H.OSID=I,this.H.OAID=U),this.F=this.X,this.I=w0(this,null,this.W),tu(this)};function lf(y){if(p0(y),y.G==3){var A=y.U++,I=ti(y.I);if(Ve(I,"SID",y.K),Ve(I,"RID",A),Ve(I,"TYPE","terminate"),xc(y,I),A=new Mr(y,y.j,A),A.L=2,A.v=dc(ti(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(A.v.toString(),"")}catch{}!I&&o.Image&&(new Image().src=A.v,I=!0),I||(A.g=b0(A.j,null),A.g.ea(A.v)),A.F=Date.now(),lc(A)}x0(y)}function Jl(y){y.g&&(wc(y),y.g.cancel(),y.g=null)}function p0(y){Jl(y),y.u&&(o.clearTimeout(y.u),y.u=null),eu(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&o.clearTimeout(y.s),y.s=null)}function tu(y){if(!Gl(y.h)&&!y.s){y.s=!0;var A=y.Ga;ot||V(),vt||(ot(),vt=!0),et.add(A,y),y.B=0}}function Cy(y,A){return Wl(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Rn(m(y.Ga,y,A),ff(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const $=new Mr(this,this.j,y);let at=this.o;if(this.S&&(at?(at=C(at),B(at,this.S)):at=this.S),this.m!==null||this.O||($.H=at,at=null),this.P)t:{for(var A=0,I=0;I<this.i.length;I++){e:{var U=this.i[I];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break e}U=void 0}if(U===void 0)break;if(A+=U,4096<A){A=I;break t}if(A===4096||I===this.i.length-1){A=I+1;break t}}A=1e3}else A=1e3;A=m0(this,$,A),I=ti(this.I),Ve(I,"RID",y),Ve(I,"CVER",22),this.D&&Ve(I,"X-HTTP-Session-Id",this.D),xc(this,I),at&&(this.O?A="headers="+encodeURIComponent(String(cf(at)))+"&"+A:this.m&&Qn(I,this.m,at)),ql(this.h,$),this.Ua&&Ve(I,"TYPE","init"),this.P?(Ve(I,"$req",A),Ve(I,"SID","null"),$.T=!0,zi($,I,null)):zi($,I,A),this.G=2}}else this.G==3&&(y?uf(this,y):this.i.length==0||Gl(this.h)||uf(this))};function uf(y,A){var I;A?I=A.l:I=y.U++;const U=ti(y.I);Ve(U,"SID",y.K),Ve(U,"RID",I),Ve(U,"AID",y.T),xc(y,U),y.m&&y.o&&Qn(U,y.m,y.o),I=new Mr(y,y.j,I,y.B+1),y.m===null&&(I.H=y.o),A&&(y.i=A.D.concat(y.i)),A=m0(y,I,1e3),I.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),ql(y.h,I),zi(I,U,A)}function xc(y,A){y.H&&H(y.H,function(I,U){Ve(A,U,I)}),y.l&&nf({},function(I,U){Ve(A,U,I)})}function m0(y,A,I){I=Math.min(y.i.length,I);var U=y.l?m(y.l.Na,y.l,y):null;t:{var $=y.i;let at=-1;for(;;){const Et=["count="+I];at==-1?0<I?(at=$[0].g,Et.push("ofs="+at)):at=0:Et.push("ofs="+at);let ue=!0;for(let Bn=0;Bn<I;Bn++){let he=$[Bn].g;const Zn=$[Bn].map;if(he-=at,0>he)at=Math.max(0,$[Bn].g-100),ue=!1;else try{fs(Zn,Et,"req"+he+"_")}catch{U&&U(Zn)}}if(ue){U=Et.join("&");break t}}}return y=y.i.splice(0,I),A.D=y,U}function y0(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;ot||V(),vt||(ot(),vt=!0),et.add(A,y),y.v=0}}function hf(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Rn(m(y.Fa,y),ff(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,v0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Rn(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),Jl(this),v0(this))};function wc(y){y.A!=null&&(o.clearTimeout(y.A),y.A=null)}function v0(y){y.g=new Mr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=ti(y.qa);Ve(A,"RID","rpc"),Ve(A,"SID",y.K),Ve(A,"AID",y.T),Ve(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&Ve(A,"TO",y.ja),Ve(A,"TYPE","xmlhttp"),xc(y,A),y.m&&y.o&&Qn(A,y.m,y.o),y.L&&(y.g.I=y.L);var I=y.g;y=y.ia,I.L=1,I.v=dc(ti(A)),I.m=null,I.P=!0,Zs(I,y)}n.Za=function(){this.C!=null&&(this.C=null,Jl(this),hf(this),Je(19))};function eu(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function _0(y,A){var I=null;if(y.g==A){eu(y),wc(y),y.g=null;var U=2}else if(tf(y.h,A))I=A.D,Nr(y.h,A),U=1;else return;if(y.G!=0){if(A.o)if(U==1){I=A.m?A.m.length:0,A=Date.now()-A.F;var $=y.B;U=Ba(),ye(U,new Vn(U,I)),tu(y)}else y0(y);else if($=A.s,$==3||$==0&&0<A.X||!(U==1&&Cy(y,A)||U==2&&hf(y)))switch(I&&0<I.length&&(A=y.h,A.i=A.i.concat(I)),$){case 1:sa(y,5);break;case 4:sa(y,10);break;case 3:sa(y,6);break;default:sa(y,2)}}}function ff(y,A){let I=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(I*=2),I*A}function sa(y,A){if(y.j.info("Error code "+A),A==2){var I=m(y.fb,y),U=y.Xa;const $=!U;U=new Dn(U||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||fc(U,"https"),dc(U),$?pc(U.toString(),I):Hi(U.toString(),I)}else Je(2);y.G=0,y.l&&y.l.sa(A),x0(y),p0(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function x0(y){if(y.G=0,y.ka=[],y.l){const A=ef(y.h);(A.length!=0||y.i.length!=0)&&(E(y.ka,A),E(y.ka,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.ra()}}function w0(y,A,I){var U=I instanceof Dn?ti(I):new Dn(I);if(U.g!="")A&&(U.g=A+"."+U.g),Ha(U,U.s);else{var $=o.location;U=$.protocol,A=A?A+"."+$.hostname:$.hostname,$=+$.port;var at=new Dn(null);U&&fc(at,U),A&&(at.g=A),$&&Ha(at,$),I&&(at.l=I),U=at}return I=y.D,A=y.ya,I&&A&&Ve(U,I,A),Ve(U,"VER",y.la),xc(y,U),U}function b0(y,A,I){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new Ae(new Ga({eb:I})):new Ae(y.pa),A.Ha(y.J),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function E0(){}n=E0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function nu(){}nu.prototype.g=function(y,A){return new Pr(y,A)};function Pr(y,A){Xe.call(this),this.g=new Zl(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!S(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!S(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new ms(this)}x(Pr,Xe),Pr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pr.prototype.close=function(){lf(this.g)},Pr.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var I={};I.__data__=y,y=I}else this.u&&(I={},I.__data__=ji(y),y=I);A.i.push(new u0(A.Ya++,y)),A.G==3&&tu(A)},Pr.prototype.N=function(){this.g.l=null,delete this.j,lf(this.g),delete this.g,Pr.aa.N.call(this)};function A0(y){$s.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){t:{for(const I in A){y=I;break t}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}x(A0,$s);function T0(){$h.call(this),this.status=1}x(T0,$h);function ms(y){this.g=y}x(ms,E0),ms.prototype.ua=function(){ye(this.g,"a")},ms.prototype.ta=function(y){ye(this.g,new A0(y))},ms.prototype.sa=function(y){ye(this.g,new T0)},ms.prototype.ra=function(){ye(this.g,"b")},nu.prototype.createWebChannel=nu.prototype.g,Pr.prototype.send=Pr.prototype.o,Pr.prototype.open=Pr.prototype.m,Pr.prototype.close=Pr.prototype.close,R8=function(){return new nu},I8=function(){return Ba()},C8=os,U2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,w1=ja,Qs.COMPLETE="complete",S8=Qs,Kh.EventType=Ks,Ks.OPEN="a",Ks.CLOSE="b",Ks.ERROR="c",Ks.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Cd=Kh,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,T8=Ae}).apply(typeof Gp<"u"?Gp:typeof self<"u"?self:typeof window<"u"?window:{});const KR="@firebase/firestore",$R="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new Vm("@firebase/firestore");function zu(){return Al.logLevel}function yt(n,...t){if(Al.logLevel<=ce.DEBUG){const e=t.map($b);Al.debug(`Firestore (${jh}): ${n}`,...e)}}function An(n,...t){if(Al.logLevel<=ce.ERROR){const e=t.map($b);Al.error(`Firestore (${jh}): ${n}`,...e)}}function bg(n,...t){if(Al.logLevel<=ce.WARN){const e=t.map($b);Al.warn(`Firestore (${jh}): ${n}`,...e)}}function $b(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,D8(n,r,e)}function D8(n,t,e){let r=`FIRESTORE (${jh}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw An(r),new Error(r)}function kt(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||D8(t,i,r)}function Pt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends is{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class o${getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ar.UNAUTHENTICATED))}shutdown(){}}class c${constructor(t){this.t=t,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){kt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,e(l)):Promise.resolve();let s=new js;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new js,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new js)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt(typeof r.accessToken=="string",31837,{l:r}),new a$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return kt(t===null||typeof t=="string",2055,{h:t}),new Ar(t)}}class l${constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u${constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new l$(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h${constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ui(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){kt(this.o===void 0,3512);const r=s=>{s.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,yt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new QR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(kt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new QR(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=f$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<e&&(r+=t.charAt(i[s]%62))}return r}}function Kt(n,t){return n<t?-1:n>t?1:0}function j2(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const i=n.charAt(r),s=t.charAt(r);if(i!==s)return lx(i)===lx(s)?Kt(i,s):lx(i)?1:-1}return Kt(n.length,t.length)}const d$=55296,g$=57343;function lx(n){const t=n.charCodeAt(0);return t>=d$&&t<=g$}function ph(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function O8(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="__name__";class Ss{constructor(t,e,r){e===void 0?e=0:e>t.length&&Dt(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&Dt(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Ss.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ss?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const s=Ss.compareSegments(t.get(i),e.get(i));if(s!==0)return s}return Kt(t.length,e.length)}static compareSegments(t,e){const r=Ss.isNumericId(t),i=Ss.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?Ss.extractNumericId(t).compare(Ss.extractNumericId(e)):j2(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vo.fromString(t.substring(4,t.length-2))}}class Se extends Ss{construct(t,e,r){return new Se(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ct(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Se(e)}static emptyPath(){return new Se([])}}const p$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Ss{construct(t,e,r){return new cn(t,e,r)}static isValidIdentifier(t){return p$.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ZR}static keyField(){return new cn([ZR])}static fromServerFormat(t){const e=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ct(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let a=!1;for(;i<t.length;){const o=t[i];if(o==="\\"){if(i+1===t.length)throw new Ct(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ct(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Ct(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new cn(e)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t){this.path=t}static fromPath(t){return new It(Se.fromString(t))}static fromName(t){return new It(Se.fromString(t).popFirst(5))}static empty(){return new It(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Se.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Se.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new It(new Se(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(n,t,e){if(!e)throw new Ct(dt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function m$(n,t,e,r){if(t===!0&&r===!0)throw new Ct(dt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function JR(n){if(!It.isDocumentKey(n))throw new Ct(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tD(n){if(It.isDocumentKey(n))throw new Ct(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function N8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Dt(12329,{type:typeof n})}function Ws(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ct(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Zb(n);throw new Ct(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(n,t){const e={typeString:n};return t&&(e.value=t),e}function qg(n,t){if(!N8(n))throw new Ct(dt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){e=`Expected '${r}' field to equal '${s.value}'`;break}}if(e)throw new Ct(dt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=-62135596800,nD=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(t){return ke.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*nD);return new ke(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<eD)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nD}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(qg(t,ke._jsonSchema))return new ke(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-eD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:kn("string",ke._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{static fromTimestamp(t){return new Vt(t)}static min(){return new Vt(new ke(0,0))}static max(){return new Vt(new ke(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=-1;class sm{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function z2(n){return n.fields.find(t=>t.kind===2)}function Xc(n){return n.fields.filter(t=>t.kind!==2)}sm.UNKNOWN_ID=-1;class b1{constructor(t,e){this.fieldPath=t,this.kind=e}}class Eg{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Eg(0,gi.min())}}function P8(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(r===1e9?new ke(e+1,0):new ke(e,r));return new gi(i,It.empty(),t)}function k8(n){return new gi(n.readTime,n.key,mh)}class gi{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new gi(Vt.min(),It.empty(),mh)}static max(){return new gi(Vt.max(),It.empty(),mh)}}function Jb(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=It.comparator(n.documentKey,t.documentKey),e!==0?e:Kt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==dt.FAILED_PRECONDITION||n.message!==L8)throw n;yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Q?e:Q.resolve(e)}catch(e){return Q.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Q.reject(e)}static resolve(t){return new Q((e,r)=>{e(t)})}static reject(t){return new Q((e,r)=>{r(t)})}static waitFor(t){return new Q((e,r)=>{let i=0,s=0,a=!1;t.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&e()},l=>r(l))}),a=!0,s===i&&e()})}static or(t){let e=Q.resolve(!1);for(const r of t)e=e.next(i=>i?Q.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,s)=>{r.push(e.call(this,i,s))}),this.waitFor(r)}static mapArray(t,e){return new Q((r,i)=>{const s=t.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(d=>{a[h]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(t,e){return new Q((r,i)=>{const s=()=>{t()===!0?e().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="SimpleDb";class Hm{static open(t,e,r,i){try{return new Hm(e,t.transaction(i,r))}catch(s){throw new Kd(e,s)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new js,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Kd(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=tE(r.target.error);this.S.reject(new Kd(t,i))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(yt(li,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new v$(e)}}class Bo{static delete(t){return yt(li,"Removing database:",t),Jc(rP().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!Mb())return!1;if(Bo.F())return!0;const t=Kn(),e=Bo.M(t),r=0<e&&e<10,i=B8(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,Bo.M(Kn())===12.2&&An("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(yt(li,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;e(a)},i.onblocked=()=>{r(new Kd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new Ct(dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new Ct(dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Kd(t,a))},i.onupgradeneeded=s=>{yt(li,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next(()=>{yt(li,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,i){const s=e==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(t);const o=Hm.open(this.db,t,s?"readonly":"readwrite",r),l=i(o).next(h=>(o.C(),h)).catch(h=>(o.abort(h),Q.reject(h))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,h=l.name!=="FirebaseError"&&a<3;if(yt(li,"Transaction failed with error:",l.message,"Retrying:",h),this.close(),!h)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function B8(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class y${constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return Jc(this.U.delete())}}class Kd extends Ct{constructor(t,e){super(dt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function tc(n){return n.name==="IndexedDbTransactionError"}class v${constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(yt(li,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(yt(li,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Jc(r)}add(t){return yt(li,"ADD",this.store.name,t,t),Jc(this.store.add(t))}get(t){return Jc(this.store.get(t)).next(e=>(e===void 0&&(e=null),yt(li,"GET",this.store.name,t,e),e))}delete(t){return yt(li,"DELETE",this.store.name,t),Jc(this.store.delete(t))}count(){return yt(li,"COUNT",this.store.name),Jc(this.store.count())}J(t,e){const r=this.options(t,e),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Q((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(r),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new Q((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}Z(t,e){yt(li,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const i=this.cursor(r);return this.H(i,(s,a,o)=>o.delete())}ee(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.H(i,e)}te(t){const e=this.cursor({});return new Q((r,i)=>{e.onerror=s=>{const a=tE(s.target.error);i(a)},e.onsuccess=s=>{const a=s.target.result;a?t(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(t,e){const r=[];return new Q((i,s)=>{t.onerror=a=>{s(a.target.error)},t.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new y$(o),h=e(o.primaryKey,o.value,l);if(h instanceof Q){const d=h.catch(g=>(l.done(),Q.reject(g)));r.push(d)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}}).next(()=>Q.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Jc(n){return new Q((t,e)=>{n.onsuccess=r=>{const i=r.target.result;t(i)},n.onerror=r=>{const i=tE(r.target.error);e(i)}})}let rD=!1;function tE(n){const t=Bo.M(Kn());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rD||(rD=!0,setTimeout(()=>{throw r},0)),r}}return n}const $d="IndexBackfiller";class _${constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){yt($d,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ne.ie();yt($d,`Documents written: ${e}`)}catch(e){tc(e)?yt($d,"Ignoring IndexedDB error during index backfill: ",e):await Jo(e)}await this.re(6e4)})}}class x${constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.se(e,t))}se(t,e){const r=new Set;let i=e,s=!0;return Q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(a!==null&&!r.has(a))return yt($d,`Processing collection: ${a}`),this.oe(t,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>e-i)}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this._e(i,s)).next(o=>(yt($d,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(t,e,o))).next(()=>a.size)}))}_e(t,e){let r=t;return e.changes.forEach((i,s)=>{const a=k8(s);Jb(a,r)>0&&(r=a)}),new gi(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}$r.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function Gm(n){return n==null}function Ag(n){return n===0&&1/n==-1/0}function F8(n){return typeof n=="number"&&Number.isInteger(n)&&!Ag(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="";function Dr(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=iD(t)),t=w$(n.get(e),t);return iD(t)}function w$(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":e+="";break;case am:e+="";break;default:e+=s}}return e}function iD(n){return n+am+""}function Os(n){const t=n.length;if(kt(t>=2,64408,{path:n}),t===2)return kt(n.charAt(0)===am&&n.charAt(1)==="",56145,{path:n}),Se.emptyPath();const e=t-2,r=[];let i="";for(let s=0;s<t;){const a=n.indexOf(am,s);switch((a<0||a>e)&&Dt(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Dt(61167,{path:n})}s=a+2}return new Se(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="remoteDocuments",Yg="owner",Nu="owner",Tg="mutationQueues",b$="userId",Qi="mutations",sD="batchId",ol="userMutationsIndex",aD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n,t){return[n,Dr(t)]}function U8(n,t,e){return[n,Dr(t),e]}const E$={},yh="documentMutations",om="remoteDocumentsV14",A$=["prefixPath","collectionGroup","readTime","documentId"],A1="documentKeyIndex",T$=["prefixPath","collectionGroup","documentId"],j8="collectionGroupIndex",S$=["collectionGroup","readTime","prefixPath","documentId"],Sg="remoteDocumentGlobal",H2="remoteDocumentGlobalKey",vh="targets",z8="queryTargetsIndex",C$=["canonicalId","targetId"],_h="targetDocuments",I$=["targetId","path"],eE="documentTargetsIndex",R$=["path","targetId"],cm="targetGlobalKey",gl="targetGlobal",Cg="collectionParents",D$=["collectionId","parent"],xh="clientMetadata",O$="clientId",Wm="bundles",M$="bundleId",qm="namedQueries",N$="name",nE="indexConfiguration",P$="indexId",G2="collectionGroupIndex",k$="collectionGroup",Qd="indexState",L$=["indexId","uid"],H8="sequenceNumberIndex",V$=["uid","sequenceNumber"],Zd="indexEntries",B$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G8="documentKeyIndex",F$=["indexId","uid","orderedDocumentKey"],Ym="documentOverlays",U$=["userId","collectionPath","documentId"],W2="collectionPathOverlayIndex",j$=["userId","collectionPath","largestBatchId"],W8="collectionGroupOverlayIndex",z$=["userId","collectionGroup","largestBatchId"],rE="globals",H$="name",q8=[Tg,Qi,yh,Kc,vh,Yg,gl,_h,xh,Sg,Cg,Wm,qm],G$=[...q8,Ym],Y8=[Tg,Qi,yh,om,vh,Yg,gl,_h,xh,Sg,Cg,Wm,qm,Ym],X8=Y8,iE=[...X8,nE,Qd,Zd],W$=iE,K8=[...iE,rE],q$=K8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2 extends V8{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function $n(n,t){const e=Pt(n);return Bo.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ec(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function $8(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,e){this.comparator=t,this.root=e||mr.EMPTY}insert(t,e){return new Ye(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(t){return new Ye(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wp(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wp(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wp(this.root,t,this.comparator,!0)}}class Wp{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?r(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class mr{constructor(t,e,r,i,s){this.key=t,this.value=e,this.color=r??mr.RED,this.left=i??mr.EMPTY,this.right=s??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,s){return new mr(t??this.key,e??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,r),null):s===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,e,r,i,s){return this}insert(t,e,r){return new mr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.comparator=t,this.data=new Ye(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new cD(this.data.getIterator())}getIteratorFrom(t){return new cD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Le)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Le(this.comparator);return e.data=t,e}}class cD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t){this.fields=t,t.sort(cn.comparator)}static empty(){return new Qr([])}unionWith(t){let e=new Le(cn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Qr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ph(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Q8("Invalid base64 string: "+s):s}}(t);return new In(e)}static fromUint8Array(t){const e=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new In(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}In.EMPTY_BYTE_STRING=new In("");const Y$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(kt(!!n,39018),typeof n=="string"){let t=0;const e=Y$.exec(n);if(kt(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:en(n.seconds),nanos:en(n.nanos)}}function en(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Na(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="server_timestamp",J8="__type__",t6="__previous_value__",e6="__local_write_time__";function sE(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[J8])==null?void 0:r.stringValue)===Z8}function Xm(n){const t=n.mapValue.fields[t6];return sE(t)?Xm(t):t}function Ig(n){const t=Ma(n.mapValue.fields[e6].timestampValue);return new ke(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(t,e,r,i,s,a,o,l,h,d){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=d}}const lm="(default)";class Tl{constructor(t,e){this.projectId=t,this.database=e||lm}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===lm}isEqual(t){return t instanceof Tl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__type__",n6="__max__",Mo={mapValue:{fields:{__type__:{stringValue:n6}}}},oE="__vector__",wh="value",T1={nullValue:"NULL_VALUE"};function qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sE(n)?4:r6(n)?9007199254740991:Km(n)?10:11:Dt(28295,{value:n})}function qs(n,t){if(n===t)return!0;const e=qo(n);if(e!==qo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ig(n).isEqual(Ig(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ma(i.timestampValue),o=Ma(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,s){return Na(i.bytesValue).isEqual(Na(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,s){return en(i.geoPointValue.latitude)===en(s.geoPointValue.latitude)&&en(i.geoPointValue.longitude)===en(s.geoPointValue.longitude)}(n,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return en(i.integerValue)===en(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=en(i.doubleValue),o=en(s.doubleValue);return a===o?Ag(a)===Ag(o):isNaN(a)&&isNaN(o)}return!1}(n,t);case 9:return ph(n.arrayValue.values||[],t.arrayValue.values||[],qs);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(oD(a)!==oD(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!qs(a[l],o[l])))return!1;return!0}(n,t);default:return Dt(52216,{left:n})}}function Rg(n,t){return(n.values||[]).find(e=>qs(e,t))!==void 0}function Yo(n,t){if(n===t)return 0;const e=qo(n),r=qo(t);if(e!==r)return Kt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return function(s,a){const o=en(s.integerValue||s.doubleValue),l=en(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,t);case 3:return lD(n.timestampValue,t.timestampValue);case 4:return lD(Ig(n),Ig(t));case 5:return j2(n.stringValue,t.stringValue);case 6:return function(s,a){const o=Na(s),l=Na(a);return o.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let h=0;h<o.length&&h<l.length;h++){const d=Kt(o[h],l[h]);if(d!==0)return d}return Kt(o.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){const o=Kt(en(s.latitude),en(a.latitude));return o!==0?o:Kt(en(s.longitude),en(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return uD(n.arrayValue,t.arrayValue);case 10:return function(s,a){var m,v,x,b;const o=s.fields||{},l=a.fields||{},h=(m=o[wh])==null?void 0:m.arrayValue,d=(v=l[wh])==null?void 0:v.arrayValue,g=Kt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return g!==0?g:uD(h,d)}(n.mapValue,t.mapValue);case 11:return function(s,a){if(s===Mo.mapValue&&a===Mo.mapValue)return 0;if(s===Mo.mapValue)return 1;if(a===Mo.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),h=a.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let g=0;g<l.length&&g<d.length;++g){const m=j2(l[g],d[g]);if(m!==0)return m;const v=Yo(o[l[g]],h[d[g]]);if(v!==0)return v}return Kt(l.length,d.length)}(n.mapValue,t.mapValue);default:throw Dt(23264,{he:e})}}function lD(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Kt(n,t);const e=Ma(n),r=Ma(t),i=Kt(e.seconds,r.seconds);return i!==0?i:Kt(e.nanos,r.nanos)}function uD(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const s=Yo(e[i],r[i]);if(s)return s}return Kt(e.length,r.length)}function bh(n){return Y2(n)}function Y2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=Ma(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Na(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return It.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const s of e.values||[])i?i=!1:r+=",",r+=Y2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Y2(e.fields[a])}`;return i+"}"}(n.mapValue):Dt(61005,{value:n})}function S1(n){switch(qo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xm(n);return t?16+S1(t):16;case 5:return 2*n.stringValue.length;case 6:return Na(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+S1(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ec(r.fields,(s,a)=>{i+=s.length+S1(a)}),i}(n.mapValue);default:throw Dt(13486,{value:n})}}function cE(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function X2(n){return!!n&&"integerValue"in n}function Dg(n){return!!n&&"arrayValue"in n}function hD(n){return!!n&&"nullValue"in n}function fD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function C1(n){return!!n&&"mapValue"in n}function Km(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[aE])==null?void 0:r.stringValue)===oE}function Jd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return ec(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Jd(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Jd(n.arrayValue.values[e]);return t}return{...n}}function r6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===n6}const i6={mapValue:{fields:{[aE]:{stringValue:oE},[wh]:{arrayValue:{}}}}};function K$(n){return"nullValue"in n?T1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cE(Tl.empty(),It.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Km(n)?i6:{mapValue:{}}:Dt(35942,{value:n})}function $$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cE(Tl.empty(),It.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?i6:"mapValue"in n?Km(n)?{mapValue:{}}:Mo:Dt(61959,{value:n})}function dD(n,t){const e=Yo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function gD(n,t){const e=Yo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t){this.value=t}static empty(){return new Sr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!C1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Jd(e)}setAll(t){let e=cn.emptyPath(),r={},i=[];t.forEach((a,o)=>{if(!e.isImmediateParentOf(o)){const l=this.getFieldsMap(e);this.applyChanges(l,r,i),r={},i=[],e=o.popLast()}a?r[o.lastSegment()]=Jd(a):i.push(o.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,i)}delete(t){const e=this.field(t.popLast());C1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];C1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){ec(e,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Sr(Jd(this.value))}}function s6(n){const t=[];return ec(n.fields,(e,r)=>{const i=new cn([e]);if(C1(r)){const s=s6(r.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)}),new Qr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,e,r,i,s,a,o){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(t){return new gn(t,0,Vt.min(),Vt.min(),Vt.min(),Sr.empty(),0)}static newFoundDocument(t,e,r,i){return new gn(t,1,e,Vt.min(),r,i,0)}static newNoDocument(t,e){return new gn(t,2,e,Vt.min(),Vt.min(),Sr.empty(),0)}static newUnknownDocument(t,e){return new gn(t,3,e,Vt.min(),Vt.min(),Sr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof gn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,e){this.position=t,this.inclusive=e}}function pD(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const s=t[i],a=n.position[i];if(s.field.isKeyField()?r=It.comparator(It.fromName(a.referenceValue),e.key):r=Yo(a,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mD(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!qs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(t,e="asc"){this.field=t,this.dir=e}}function Q$(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{}class le extends a6{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new Z$(t,e,r):e==="array-contains"?new eQ(t,r):e==="in"?new f6(t,r):e==="not-in"?new nQ(t,r):e==="array-contains-any"?new rQ(t,r):new le(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new J$(t,r):new tQ(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Yo(e,this.value)):e!==null&&qo(this.value)===qo(e)&&this.matchesComparison(Yo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ze extends a6{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ze(t,e)}matches(t){return Ah(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ah(n){return n.op==="and"}function K2(n){return n.op==="or"}function lE(n){return o6(n)&&Ah(n)}function o6(n){for(const t of n.filters)if(t instanceof ze)return!1;return!0}function $2(n){if(n instanceof le)return n.field.canonicalString()+n.op.toString()+bh(n.value);if(lE(n))return n.filters.map(t=>$2(t)).join(",");{const t=n.filters.map(e=>$2(e)).join(",");return`${n.op}(${t})`}}function c6(n,t){return n instanceof le?function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&qs(r.value,i.value)}(n,t):n instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&c6(a,i.filters[o]),!0):!1}(n,t):void Dt(19439)}function l6(n,t){const e=n.filters.concat(t);return ze.create(e,n.op)}function u6(n){return n instanceof le?function(e){return`${e.field.canonicalString()} ${e.op} ${bh(e.value)}`}(n):n instanceof ze?function(e){return e.op.toString()+" {"+e.getFilters().map(u6).join(" ,")+"}"}(n):"Filter"}class Z$ extends le{constructor(t,e,r){super(t,e,r),this.key=It.fromName(r.referenceValue)}matches(t){const e=It.comparator(t.key,this.key);return this.matchesComparison(e)}}class J$ extends le{constructor(t,e){super(t,"in",e),this.keys=h6("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class tQ extends le{constructor(t,e){super(t,"not-in",e),this.keys=h6("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function h6(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(r=>It.fromName(r.referenceValue))}class eQ extends le{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Dg(e)&&Rg(e.arrayValue,this.value)}}class f6 extends le{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Rg(this.value.arrayValue,e)}}class nQ extends le{constructor(t,e){super(t,"not-in",e)}matches(t){if(Rg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Rg(this.value.arrayValue,e)}}class rQ extends le{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Dg(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Rg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(t,e=null,r=[],i=[],s=null,a=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function Q2(n,t=null,e=[],r=[],i=null,s=null,a=null){return new iQ(n,t,e,r,i,s,a)}function Sl(n){const t=Pt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>$2(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>bh(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>bh(r)).join(",")),t.Te=e}return t.Te}function Xg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Q$(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!c6(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!mD(n.startAt,t.startAt)&&mD(n.endAt,t.endAt)}function hm(n){return It.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function fm(n,t){return n.filters.filter(e=>e instanceof le&&e.field.isEqual(t))}function yD(n,t,e){let r=T1,i=!0;for(const s of fm(n,t)){let a=T1,o=!0;switch(s.op){case"<":case"<=":a=K$(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=T1}dD({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];dD({value:r,inclusive:i},{value:a,inclusive:e.inclusive})<0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}function vD(n,t,e){let r=Mo,i=!0;for(const s of fm(n,t)){let a=Mo,o=!0;switch(s.op){case">=":case">":a=$$(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Mo}gD({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];gD({value:r,inclusive:i},{value:a,inclusive:e.inclusive})>0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,e=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function d6(n,t,e,r,i,s,a,o){return new $m(n,t,e,r,i,s,a,o)}function Qm(n){return new $m(n)}function _D(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sQ(n){return n.collectionGroup!==null}function tg(n){const t=Pt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Le(cn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new um(s,r))}),e.has(cn.keyField().canonicalString())||t.Ie.push(new um(cn.keyField(),r))}return t.Ie}function di(n){const t=Pt(n);return t.Ee||(t.Ee=aQ(t,tg(n))),t.Ee}function aQ(n,t){if(n.limitType==="F")return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new um(i.field,s)});const e=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Z2(n,t,e){return new $m(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Zm(n,t){return Xg(di(n),di(t))&&n.limitType===t.limitType}function g6(n){return`${Sl(di(n))}|lt:${n.limitType}`}function Hu(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>u6(i)).join(", ")}]`),Gm(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>bh(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>bh(i)).join(",")),`Target(${r})`}(di(n))}; limitType=${n.limitType})`}function Kg(n,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):It.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,t)&&function(r,i){for(const s of tg(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(a,o,l){const h=pD(a,o,l);return a.inclusive?h<=0:h<0}(r.startAt,tg(r),i)||r.endAt&&!function(a,o,l){const h=pD(a,o,l);return a.inclusive?h>=0:h>0}(r.endAt,tg(r),i))}(n,t)}function p6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function m6(n){return(t,e)=>{let r=!1;for(const i of tg(n)){const s=oQ(i,t,e);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oQ(n,t,e){const r=n.field.isKeyField()?It.comparator(t.key,e.key):function(s,a,o){const l=a.data.field(s),h=o.data.field(s);return l!==null&&h!==null?Yo(l,h):Dt(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ec(this.inner,(e,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return $8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=new Ye(It.comparator);function hi(){return cQ}const y6=new Ye(It.comparator);function Id(...n){let t=y6;for(const e of n)t=t.insert(e.key,e);return t}function v6(n){let t=y6;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Ms(){return eg()}function _6(){return eg()}function eg(){return new ka(n=>n.toString(),(n,t)=>n.isEqual(t))}const lQ=new Ye(It.comparator),uQ=new Le(It.comparator);function re(...n){let t=uQ;for(const e of n)t=t.add(e);return t}const hQ=new Le(Kt);function uE(){return hQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ag(t)?"-0":t}}function x6(n){return{integerValue:""+n}}function fQ(n,t){return F8(t)?x6(t):hE(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this._=void 0}}function dQ(n,t,e){return n instanceof Og?function(i,s){const a={fields:{[J8]:{stringValue:Z8},[e6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sE(s)&&(s=Xm(s)),s&&(a.fields[t6]=s),{mapValue:a}}(e,t):n instanceof Th?b6(n,t):n instanceof Sh?E6(n,t):function(i,s){const a=w6(i,s),o=xD(a)+xD(i.Ae);return X2(a)&&X2(i.Ae)?x6(o):hE(i.serializer,o)}(n,t)}function gQ(n,t,e){return n instanceof Th?b6(n,t):n instanceof Sh?E6(n,t):e}function w6(n,t){return n instanceof Mg?function(r){return X2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class Og extends Jm{}class Th extends Jm{constructor(t){super(),this.elements=t}}function b6(n,t){const e=A6(t);for(const r of n.elements)e.some(i=>qs(i,r))||e.push(r);return{arrayValue:{values:e}}}class Sh extends Jm{constructor(t){super(),this.elements=t}}function E6(n,t){let e=A6(t);for(const r of n.elements)e=e.filter(i=>!qs(i,r));return{arrayValue:{values:e}}}class Mg extends Jm{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function xD(n){return en(n.integerValue||n.doubleValue)}function A6(n){return Dg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(t,e){this.field=t,this.transform=e}}function mQ(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof Th&&i instanceof Th||r instanceof Sh&&i instanceof Sh?ph(r.elements,i.elements,qs):r instanceof Mg&&i instanceof Mg?qs(r.Ae,i.Ae):r instanceof Og&&i instanceof Og}(n.transform,t.transform)}class yQ{constructor(t,e){this.version=t,this.transformResults=e}}class Rr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Rr}static exists(t){return new Rr(void 0,t)}static updateTime(t){return new Rr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function I1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ty{}function T6(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new ey(n.key,Rr.none()):new zh(n.key,n.data,Rr.none());{const e=n.data,r=Sr.empty();let i=new Le(cn.comparator);for(let s of t.fields)if(!i.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new La(n.key,r,new Qr(i.toArray()),Rr.none())}}function vQ(n,t,e){n instanceof zh?function(i,s,a){const o=i.value.clone(),l=bD(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,t,e):n instanceof La?function(i,s,a){if(!I1(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=bD(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(S6(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function ng(n,t,e,r){return n instanceof zh?function(s,a,o,l){if(!I1(s.precondition,a))return o;const h=s.value.clone(),d=ED(s.fieldTransforms,l,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,r):n instanceof La?function(s,a,o,l){if(!I1(s.precondition,a))return o;const h=ED(s.fieldTransforms,l,a),d=a.data;return d.setAll(S6(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,t,e,r):function(s,a,o){return I1(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,t,e)}function _Q(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),s=w6(r.transform,i||null);s!=null&&(e===null&&(e=Sr.empty()),e.set(r.field,s))}return e||null}function wD(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ph(r,i,(s,a)=>mQ(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class zh extends ty{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class La extends ty{constructor(t,e,r,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function S6(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function bD(n,t,e){const r=new Map;kt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const s=n[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,gQ(a,o,e[i]))}return r}function ED(n,t,e){const r=new Map;for(const i of n){const s=i.transform,a=e.data.field(i.field);r.set(i.field,dQ(s,a,t))}return r}class ey extends ty{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C6 extends ty{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&vQ(s,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=ng(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=ng(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=_6();return this.mutations.forEach(i=>{const s=t.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=e.has(i.key)?null:o;const l=T6(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),re())}isEqual(t){return this.batchId===t.batchId&&ph(this.mutations,t.mutations,(e,r)=>wD(e,r))&&ph(this.baseMutations,t.baseMutations,(e,r)=>wD(e,r))}}class dE{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){kt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return lQ}();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new dE(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn,de;function wQ(n){switch(n){case dt.OK:return Dt(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Dt(15467,{code:n})}}function I6(n){if(n===void 0)return An("GRPC error has no .code"),dt.UNKNOWN;switch(n){case Nn.OK:return dt.OK;case Nn.CANCELLED:return dt.CANCELLED;case Nn.UNKNOWN:return dt.UNKNOWN;case Nn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case Nn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case Nn.INTERNAL:return dt.INTERNAL;case Nn.UNAVAILABLE:return dt.UNAVAILABLE;case Nn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case Nn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case Nn.NOT_FOUND:return dt.NOT_FOUND;case Nn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case Nn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case Nn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case Nn.ABORTED:return dt.ABORTED;case Nn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case Nn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case Nn.DATA_LOSS:return dt.DATA_LOSS;default:return Dt(39323,{code:n})}}(de=Nn||(Nn={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ=new Vo([4294967295,4294967295],0);function AD(n){const t=bQ().encode(n),e=new A8;return e.update(t),new Uint8Array(e.digest())}function TD(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Vo([e,r],0),new Vo([i,s],0)]}class pE{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Rd(`Invalid padding: ${e}`);if(r<0)throw new Rd(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Rd(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Rd(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Vo.fromNumber(this.ge)}ye(t,e,r){let i=t.add(e.multiply(Vo.fromNumber(r)));return i.compare(EQ)===1&&(i=new Vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=AD(t),[r,i]=TD(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new pE(s,i,e);return r.forEach(o=>a.insert(o)),a}insert(t){if(this.ge===0)return;const e=AD(t),[r,i]=TD(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Rd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(t,e,r,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,Qg.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new $g(Vt.min(),i,new Ye(Kt),hi(),re())}}class Qg{constructor(t,e,r,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Qg(r,e,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t,e,r,i){this.be=t,this.removedTargetIds=e,this.key=r,this.De=i}}class R6{constructor(t,e){this.targetId=t,this.Ce=e}}class D6{constructor(t,e,r=In.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class SD{constructor(){this.ve=0,this.Fe=CD(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=re(),e=re(),r=re();return this.Fe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:Dt(38017,{changeType:s})}}),new Qg(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=CD()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AQ{constructor(t){this.Ge=t,this.ze=new Map,this.je=hi(),this.Je=qp(),this.He=qp(),this.Ye=new Ye(Kt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((r,i)=>{this.rt(i)&&e(i)})}st(t){const e=t.targetId,r=t.Ce.count,i=this.ot(e);if(i){const s=i.target;if(hm(s))if(r===0){const a=new It(s.path);this.et(e,a,gn.newNoDocument(a,Vt.min()))}else kt(r===1,20013,{expectedCount:r});else{const a=this._t(e);if(a!==r){const o=this.ut(t),l=o?this.ct(o,t,a):1;if(l!==0){this.it(e);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,h)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=e;let a,o;try{a=Na(r).toUint8Array()}catch(l){if(l instanceof Q8)return bg("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new pE(a,i,s)}catch(l){return bg(l instanceof Rd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(e,s,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&hm(o.target)){const l=new It(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,gn.newNoDocument(l,t))}s.Be&&(e.set(a,s.ke()),s.qe())}});let r=re();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const i=new $g(t,e,this.Ye,this.je,r);return this.je=hi(),this.Je=qp(),this.He=qp(),this.Ye=new Ye(Kt),i}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new SD,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Le(Kt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Le(Kt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||yt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new SD),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function qp(){return new Ye(It.comparator)}function CD(){return new Ye(It.comparator)}const TQ={asc:"ASCENDING",desc:"DESCENDING"},SQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CQ={and:"AND",or:"OR"};class IQ{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function J2(n,t){return n.useProto3Json||Gm(t)?t:{value:t}}function Ch(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function O6(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function RQ(n,t){return Ch(n,t.toTimestamp())}function Ur(n){return kt(!!n,49232),Vt.fromTimestamp(function(e){const r=Ma(e);return new ke(r.seconds,r.nanos)}(n))}function mE(n,t){return tw(n,t).canonicalString()}function tw(n,t){const e=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function M6(n){const t=Se.fromString(n);return kt(j6(t),10190,{key:t.toString()}),t}function dm(n,t){return mE(n.databaseId,t.path)}function pl(n,t){const e=M6(t);if(e.get(1)!==n.databaseId.projectId)throw new Ct(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ct(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new It(k6(e))}function N6(n,t){return mE(n.databaseId,t)}function P6(n){const t=M6(n);return t.length===4?Se.emptyPath():k6(t)}function ew(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function k6(n){return kt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ID(n,t,e){return{name:dm(n,t),fields:e.value.mapValue.fields}}function DQ(n,t,e){const r=pl(n,t.name),i=Ur(t.updateTime),s=t.createTime?Ur(t.createTime):Vt.min(),a=new Sr({mapValue:{fields:t.fields}}),o=gn.newFoundDocument(r,i,s,a);return e&&o.setHasCommittedMutations(),e?o.setHasCommittedMutations():o}function OQ(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Dt(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(kt(d===void 0||typeof d=="string",58123),In.fromBase64String(d||"")):(kt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),In.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(h){const d=h.code===void 0?dt.UNKNOWN:I6(h.code);return new Ct(d,h.message||"")}(a);e=new D6(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=pl(n,r.document.name),s=Ur(r.document.updateTime),a=r.document.createTime?Ur(r.document.createTime):Vt.min(),o=new Sr({mapValue:{fields:r.document.fields}}),l=gn.newFoundDocument(i,s,a,o),h=r.targetIds||[],d=r.removedTargetIds||[];e=new R1(h,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=pl(n,r.document),s=r.readTime?Ur(r.readTime):Vt.min(),a=gn.newNoDocument(i,s),o=r.removedTargetIds||[];e=new R1([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=pl(n,r.document),s=r.removedTargetIds||[];e=new R1([],s,i,null)}else{if(!("filter"in t))return Dt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new xQ(i,s),o=r.targetId;e=new R6(o,a)}}return e}function gm(n,t){let e;if(t instanceof zh)e={update:ID(n,t.key,t.value)};else if(t instanceof ey)e={delete:dm(n,t.key)};else if(t instanceof La)e={update:ID(n,t.key,t.data),updateMask:VQ(t.fieldMask)};else{if(!(t instanceof C6))return Dt(16599,{Vt:t.type});e={verify:dm(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Og)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Th)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Sh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Mg)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Dt(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Dt(27497)}(n,t.precondition)),e}function nw(n,t){const e=t.currentDocument?function(s){return s.updateTime!==void 0?Rr.updateTime(Ur(s.updateTime)):s.exists!==void 0?Rr.exists(s.exists):Rr.none()}(t.currentDocument):Rr.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,o){let l=null;if("setToServerValue"in o)kt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new Og;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new Th(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new Sh(d)}else"increment"in o?l=new Mg(a,o.increment):Dt(16584,{proto:o});const h=cn.fromServerFormat(o.fieldPath);return new pQ(h,l)}(n,i)):[];if(t.update){t.update.name;const i=pl(n,t.update.name),s=new Sr({mapValue:{fields:t.update.fields}});if(t.updateMask){const a=function(l){const h=l.fieldPaths||[];return new Qr(h.map(d=>cn.fromServerFormat(d)))}(t.updateMask);return new La(i,s,a,e,r)}return new zh(i,s,e,r)}if(t.delete){const i=pl(n,t.delete);return new ey(i,e)}if(t.verify){const i=pl(n,t.verify);return new C6(i,e)}return Dt(1463,{proto:t})}function MQ(n,t){return n&&n.length>0?(kt(t!==void 0,14353),n.map(e=>function(i,s){let a=i.updateTime?Ur(i.updateTime):Ur(s);return a.isEqual(Vt.min())&&(a=Ur(s)),new yQ(a,i.transformResults||[])}(e,t))):[]}function L6(n,t){return{documents:[N6(n,t.path)]}}function V6(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=N6(n,i);const s=function(h){if(h.length!==0)return U6(ze.create(h,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Gu(m.field),direction:PQ(m.dir)}}(d))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const o=J2(n,t.limit);return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:e,parent:i}}function B6(n){let t=P6(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){kt(r===1,65062);const d=e.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let s=[];e.where&&(s=function(g){const m=F6(g);return m instanceof ze&&lE(m)?m.getFilters():[m]}(e.where));let a=[];e.orderBy&&(a=function(g){return g.map(m=>function(x){return new um(Wu(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(e.orderBy));let o=null;e.limit&&(o=function(g){let m;return m=typeof g=="object"?g.value:g,Gm(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(g){const m=!!g.before,v=g.values||[];return new Eh(v,m)}(e.startAt));let h=null;return e.endAt&&(h=function(g){const m=!g.before,v=g.values||[];return new Eh(v,m)}(e.endAt)),d6(t,i,a,s,o,"F",l,h)}function NQ(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function F6(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Wu(e.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wu(e.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wu(e.unaryFilter.field);return le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wu(e.unaryFilter.field);return le.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(n):n.fieldFilter!==void 0?function(e){return le.create(Wu(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ze.create(e.compositeFilter.filters.map(r=>F6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(e.compositeFilter.op))}(n):Dt(30097,{filter:n})}function PQ(n){return TQ[n]}function kQ(n){return SQ[n]}function LQ(n){return CQ[n]}function Gu(n){return{fieldPath:n.canonicalString()}}function Wu(n){return cn.fromServerFormat(n.fieldPath)}function U6(n){return n instanceof le?function(e){if(e.op==="=="){if(fD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NAN"}};if(hD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(fD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NAN"}};if(hD(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gu(e.field),op:kQ(e.op),value:e.value}}}(n):n instanceof ze?function(e){const r=e.getFilters().map(i=>U6(i));return r.length===1?r[0]:{compositeFilter:{op:LQ(e.op),filters:r}}}(n):Dt(54877,{filter:n})}function VQ(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function j6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,e,r,i,s=Vt.min(),a=Vt.min(),o=In.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new Ca(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(t){this.yt=t}}function BQ(n,t){let e;if(t.document)e=DQ(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=It.fromSegments(t.noDocument.path),i=Il(t.noDocument.readTime);e=gn.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Dt(56709);{const r=It.fromSegments(t.unknownDocument.path),i=Il(t.unknownDocument.version);e=gn.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(i){const s=new ke(i[0],i[1]);return Vt.fromTimestamp(s)}(t.readTime)),e}function RD(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:pm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(s,a){return{name:dm(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Ch(s,a.version.toTimestamp()),createTime:Ch(s,a.createTime.toTimestamp())}}(n.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Cl(t.version)};else{if(!t.isUnknownDocument())return Dt(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Cl(t.version)}}return r}function pm(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Cl(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Il(n){const t=new ke(n.seconds,n.nanoseconds);return Vt.fromTimestamp(t)}function tl(n,t){const e=(t.baseMutations||[]).map(s=>nw(n.yt,s));for(let s=0;s<t.mutations.length-1;++s){const a=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){const o=t.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(s=>nw(n.yt,s)),i=ke.fromMillis(t.localWriteTimeMs);return new fE(t.batchId,i,e,r)}function Dd(n){const t=Il(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?Il(n.lastLimboFreeSnapshotVersion):Vt.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){const a=s.documents.length;return kt(a===1,1966,{count:a}),di(Qm(P6(s.documents[0])))}(n.query):function(s){return di(B6(s))}(n.query),new Ca(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,In.fromBase64String(n.resumeToken))}function H6(n,t){const e=Cl(t.snapshotVersion),r=Cl(t.lastLimboFreeSnapshotVersion);let i;i=hm(t.target)?L6(n.yt,t.target):V6(n.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sl(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function G6(n){const t=B6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Z2(t,t.limit,"L"):t}function ux(n,t){return new gE(t.largestBatchId,nw(n.yt,t.overlayMutation))}function DD(n,t){const e=t.path.lastSegment();return[n,Dr(t.path.popLast()),e]}function OD(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:Cl(r.readTime),documentKey:Dr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{getBundleMetadata(t,e){return MD(t).get(e).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Il(s.createTime),version:s.version}}(r)})}saveBundleMetadata(t,e){return MD(t).put(function(i){return{bundleId:i.id,createTime:Cl(Ur(i.createTime)),version:i.version}}(e))}getNamedQuery(t,e){return ND(t).get(e).next(r=>{if(r)return function(s){return{name:s.name,query:G6(s.bundledQuery),readTime:Il(s.readTime)}}(r)})}saveNamedQuery(t,e){return ND(t).put(function(i){return{name:i.name,readTime:Cl(Ur(i.readTime)),bundledQuery:i.bundledQuery}}(e))}}function MD(n){return $n(n,Wm)}function ND(n){return $n(n,qm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new ny(t,r)}getOverlay(t,e){return od(t).get(DD(this.userId,e)).next(r=>r?ux(this.serializer,r):null)}getOverlays(t,e){const r=Ms();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){const i=[];return r.forEach((s,a)=>{const o=new gE(e,a);i.push(this.St(t,o))}),Q.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(a=>i.add(Dr(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(od(t).Z(W2,o))}),Q.waitFor(s)}getOverlaysForCollection(t,e,r){const i=Ms(),s=Dr(e),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return od(t).J(W2,a).next(o=>{for(const l of o){const h=ux(this.serializer,l);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const s=Ms();let a;const o=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return od(t).ee({index:W8,range:o},(l,h,d)=>{const g=ux(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):d.done()}).next(()=>s)}St(t,e){return od(t).put(function(i,s,a){const[o,l,h]=DD(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:gm(i.yt,a.mutation)}}(this.serializer,this.userId,e))}}function od(n){return $n(n,Ym)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{bt(t){return $n(t,rE)}getSessionToken(t){return this.bt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?In.fromUint8Array(r):In.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(en(t.integerValue));else if("doubleValue"in t){const r=en(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Ag(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=Ma(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Na(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?r6(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Km(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):Dt(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const i of Object.keys(r))this.Ot(i,e),this.Ct(r[i],e)}kt(t,e){var a,o;const r=t.fields||{};this.Ft(e,53);const i=wh,s=((o=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(e,15),e.Mt(en(s)),this.Ot(i,e),this.Ct(r[i],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const i of r)this.Ct(i,e)}Lt(t,e){this.Ft(e,37),It.fromName(t).path.forEach(r=>{this.Ft(e,60),this.Ut(r,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}el.Kt=new el;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=255;function jQ(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function PD(n){const t=64-function(r){let i=0;for(let s=0;s<8;++s){const a=jQ(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(t/8)}class zQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=e.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=e.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(t){const e=this.en(t),r=PD(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}nn(t){const e=this.en(t),r=PD(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}rn(){this.sn(ku),this.sn(255)}_n(){this.an(ku),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===ku?(this.sn(ku),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===ku?(this.an(ku),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HQ{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class GQ{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class cd{constructor(){this.cn=new zQ,this.ln=new HQ(this.cn),this.hn=new GQ(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,e,r,i){this.Tn=t,this.In=e,this.En=r,this.dn=i}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new nl(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:D1(this.En),directionalValue:D1(this.dn),orderedDocumentKey:D1(e),documentKey:r.path.toArray()}}Vn(t,e,r){const i=this.Rn(t,e,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function go(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=kD(n.En,t.En),e!==0?e:(e=kD(n.dn,t.dn),e!==0?e:It.comparator(n.In,t.In)))}function kD(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function D1(n){return uP()?function(e){let r="";for(let i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);return r}(n):n}function LD(n){return typeof n!="string"?n:function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(n)}class VD{constructor(t){this.mn=new Le((e,r)=>cn.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(kt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=z2(t);if(e!==void 0&&!this.wn(e))return!1;const r=Xc(t);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let t=new Le(cn.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new b1(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new b1(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new b1(r.field,r.dir==="asc"?0:1)));return new sm(sm.UNKNOWN_ID,this.collectionId,e,Eg.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n){var e,r;if(kt(n instanceof le||n instanceof ze,20012),n instanceof le){if(n instanceof f6){const i=((r=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map(s=>le.create(n.field,"==",s)))||[];return ze.create(i,"or")}return n}const t=n.filters.map(i=>W6(i));return ze.create(t,n.op)}function WQ(n){if(n.getFilters().length===0)return[];const t=sw(W6(n));return kt(q6(t),7391),rw(t)||iw(t)?[t]:t.getFilters()}function rw(n){return n instanceof le}function iw(n){return n instanceof ze&&lE(n)}function q6(n){return rw(n)||iw(n)||function(e){if(e instanceof ze&&K2(e)){for(const r of e.getFilters())if(!rw(r)&&!iw(r))return!1;return!0}return!1}(n)}function sw(n){if(kt(n instanceof le||n instanceof ze,34018),n instanceof le)return n;if(n.filters.length===1)return sw(n.filters[0]);const t=n.filters.map(r=>sw(r));let e=ze.create(t,n.op);return e=mm(e),q6(e)?e:(kt(e instanceof ze,64498),kt(Ah(e),40251),kt(e.filters.length>1,57927),e.filters.reduce((r,i)=>yE(r,i)))}function yE(n,t){let e;return kt(n instanceof le||n instanceof ze,38388),kt(t instanceof le||t instanceof ze,25473),e=n instanceof le?t instanceof le?function(i,s){return ze.create([i,s],"and")}(n,t):BD(n,t):t instanceof le?BD(t,n):function(i,s){if(kt(i.filters.length>0&&s.filters.length>0,48005),Ah(i)&&Ah(s))return l6(i,s.getFilters());const a=K2(i)?i:s,o=K2(i)?s:i,l=a.filters.map(h=>yE(h,o));return ze.create(l,"or")}(n,t),mm(e)}function BD(n,t){if(Ah(t))return l6(t,n.getFilters());{const e=t.filters.map(r=>yE(n,r));return ze.create(e,"or")}}function mm(n){if(kt(n instanceof le||n instanceof ze,11850),n instanceof le)return n;const t=n.getFilters();if(t.length===1)return mm(t[0]);if(o6(n))return n;const e=t.map(i=>mm(i)),r=[];return e.forEach(i=>{i instanceof le?r.push(i):i instanceof ze&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ze.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(){this.Cn=new vE}addToCollectionParentIndex(t,e){return this.Cn.add(e),Q.resolve()}getCollectionParents(t,e){return Q.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Q.resolve()}deleteFieldIndex(t,e){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,e){return Q.resolve()}getDocumentsMatchingTarget(t,e){return Q.resolve(null)}getIndexType(t,e){return Q.resolve(0)}getFieldIndexes(t,e){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,e){return Q.resolve(gi.min())}getMinOffsetFromCollectionGroup(t,e){return Q.resolve(gi.min())}updateCollectionGroup(t,e,r){return Q.resolve()}updateIndexEntries(t,e){return Q.resolve()}}class vE{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Le(Se.comparator),s=!i.has(r);return this.index[e]=i.add(r),s}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Le(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="IndexedDbIndexManager",Yp=new Uint8Array(0);class YQ{constructor(t,e){this.databaseId=e,this.vn=new vE,this.Fn=new ka(r=>Sl(r),(r,i)=>Xg(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const s={collectionId:r,parent:Dr(i)};return UD(t).put(s)}return Q.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[O8(e),""],!1,!0);return UD(t).J(i).next(s=>{for(const a of s){if(a.collectionId!==e)break;r.push(Os(a.parent))}return r})}addFieldIndex(t,e){const r=ld(t),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(e);delete i.indexId;const s=r.add(i);if(e.indexState){const a=Vu(t);return s.next(o=>{a.put(OD(o,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const r=ld(t),i=Vu(t),s=Lu(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=ld(t),r=Lu(t),i=Vu(t);return e.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(t,e){return Q.forEach(this.Mn(e),r=>this.getIndexType(t,r).next(i=>{if(i===0||i===1){const s=new VD(r).Dn();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const r=Lu(t);let i=!0;const s=new Map;return Q.forEach(this.Mn(e),a=>this.xn(t,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=re();const o=[];return Q.forEach(s,(l,h)=>{yt(FD,`Using index ${function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${Sl(e)}`);const d=function(R,P){const M=z2(P);if(M===void 0)return null;for(const H of fm(R,M.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(h,l),g=function(R,P){const M=new Map;for(const H of Xc(P))for(const O of fm(R,H.fieldPath))switch(O.op){case"==":case"in":M.set(H.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return M.set(H.fieldPath.canonicalString(),O.value),Array.from(M.values())}return null}(h,l),m=function(R,P){const M=[];let H=!0;for(const O of Xc(P)){const C=O.kind===0?yD(R,O.fieldPath,R.startAt):vD(R,O.fieldPath,R.startAt);M.push(C.value),H&&(H=C.inclusive)}return new Eh(M,H)}(h,l),v=function(R,P){const M=[];let H=!0;for(const O of Xc(P)){const C=O.kind===0?vD(R,O.fieldPath,R.endAt):yD(R,O.fieldPath,R.endAt);M.push(C.value),H&&(H=C.inclusive)}return new Eh(M,H)}(h,l),x=this.On(l,h,m),b=this.On(l,h,v),E=this.Nn(l,h,g),T=this.Bn(l.indexId,d,x,m.inclusive,b,v.inclusive,E);return Q.forEach(T,S=>r.Y(S,e.limit).next(R=>{R.forEach(P=>{const M=It.fromSegments(P.documentKey);a.has(M)||(a=a.add(M),o.push(M))})}))}).next(()=>o)}return Q.resolve(null)})}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=WQ(ze.create(t.filters,"and")).map(r=>Q2(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.Fn.set(t,e),e)}Bn(t,e,r,i,s,a,o){const l=(e!=null?e.length:1)*Math.max(r.length,s.length),h=l/(e!=null?e.length:1),d=[];for(let g=0;g<l;++g){const m=e?this.Ln(e[g/h]):Yp,v=this.kn(t,m,r[g%h],i),x=this.qn(t,m,s[g%h],a),b=o.map(E=>this.kn(t,m,E,!0));d.push(...this.createRange(v,x,b))}return d}kn(t,e,r,i){const s=new nl(t,It.empty(),e,r);return i?s:s.An()}qn(t,e,r,i){const s=new nl(t,It.empty(),e,r);return i?s.An():s}xn(t,e){const r=new VD(e),i=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(t,e){let r=2;const i=this.Mn(e);return Q.forEach(i,s=>this.xn(t,s).next(a=>{a?r!==0&&a.fields.length<function(l){let h=new Le(cn.comparator),d=!1;for(const g of l.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:h=h.add(m.field));for(const g of l.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(e)&&i.length>1&&r===2?1:r)}Qn(t,e){const r=new cd;for(const i of Xc(t)){const s=e.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);el.Kt.Dt(s,a)}return r.un()}Ln(t){const e=new cd;return el.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new cd;return el.Kt.Dt(cE(this.databaseId,e),r.Pn(function(s){const a=Xc(s);return a.length===0?0:a[a.length-1].kind}(t))),r.un()}Nn(t,e,r){if(r===null)return[];let i=[];i.push(new cd);let s=0;for(const a of Xc(t)){const o=r[s++];for(const l of i)if(this.Un(e,a.fieldPath)&&Dg(o))i=this.Kn(i,a,o);else{const h=l.Pn(a.kind);el.Kt.Dt(o,h)}}return this.Wn(i)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const i=[...t],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new cd;l.seed(o.un()),el.Kt.Dt(a,l.Pn(e.kind)),s.push(l)}return s}Un(t,e){return!!t.filters.find(r=>r instanceof le&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=ld(t),i=Vu(t);return(e?r.J(G2,IDBKeyRange.bound(e,e)):r.J()).next(s=>{const a=[];return Q.forEach(s,o=>i.get([o.indexId,this.uid]).next(l=>{a.push(function(d,g){const m=g?new Eg(g.sequenceNumber,new gi(Il(g.readTime),new It(Os(g.documentKey)),g.largestBatchId)):Eg.empty(),v=d.fields.map(([x,b])=>new b1(cn.fromServerFormat(x),b));return new sm(d.indexId,d.collectionGroup,v,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Kt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=ld(t),s=Vu(t);return this.Gn(t).next(a=>i.J(G2,IDBKeyRange.bound(e,e)).next(o=>Q.forEach(o,l=>s.put(OD(l.indexId,this.uid,a,r)))))}updateIndexEntries(t,e){const r=new Map;return Q.forEach(e,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Q.resolve(a):this.getFieldIndexes(t,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),Q.forEach(o,l=>this.zn(t,i,l).next(h=>{const d=this.jn(s,l);return h.isEqual(d)?Q.resolve():this.Jn(t,s,l,h,d)}))))})}Hn(t,e,r,i){return Lu(t).put(i.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,i){return Lu(t).delete(i.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const i=Lu(t);let s=new Le(go);return i.ee({index:G8,range:IDBKeyRange.only([r.indexId,this.uid,D1(this.$n(r,e))])},(a,o)=>{s=s.add(new nl(r.indexId,e,LD(o.arrayValue),LD(o.directionalValue)))}).next(()=>s)}jn(t,e){let r=new Le(go);const i=this.Qn(e,t);if(i==null)return r;const s=z2(e);if(s!=null){const a=t.data.field(s.fieldPath);if(Dg(a))for(const o of a.arrayValue.values||[])r=r.add(new nl(e.indexId,t.key,this.Ln(o),i))}else r=r.add(new nl(e.indexId,t.key,Yp,i));return r}Jn(t,e,r,i,s){yt(FD,"Updating index entries for document '%s'",e.key);const a=[];return function(l,h,d,g,m){const v=l.getIterator(),x=h.getIterator();let b=Pu(v),E=Pu(x);for(;b||E;){let T=!1,S=!1;if(b&&E){const R=d(b,E);R<0?S=!0:R>0&&(T=!0)}else b!=null?S=!0:T=!0;T?(g(E),E=Pu(x)):S?(m(b),b=Pu(v)):(b=Pu(v),E=Pu(x))}}(i,s,go,o=>{a.push(this.Hn(t,e,r,o))},o=>{a.push(this.Yn(t,e,r,o))}),Q.waitFor(a)}Gn(t){let e=1;return Vu(t).ee({index:H8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((a,o)=>go(a,o)).filter((a,o,l)=>!o||go(a,l[o-1])!==0);const i=[];i.push(t);for(const a of r){const o=go(a,t),l=go(a,e);if(o===0)i[0]=t.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(e);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,Yp,It.empty()),l=i[a+1].Vn(this.uid,Yp,It.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(t,e){return go(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(jD)}getMinOffset(t,e){return Q.mapArray(this.Mn(e),r=>this.xn(t,r).next(i=>i||Dt(44426))).next(jD)}}function UD(n){return $n(n,Cg)}function Lu(n){return $n(n,Zd)}function ld(n){return $n(n,nE)}function Vu(n){return $n(n,Qd)}function jD(n){kt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Jb(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new gi(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y6=41943040;class Tr{static withCacheSize(t){return new Tr(t,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(n,t,e){const r=n.store(Qi),i=n.store(yh),s=[],a=IDBKeyRange.only(e.batchId);let o=0;const l=r.ee({range:a},(d,g,m)=>(o++,m.delete()));s.push(l.next(()=>{kt(o===1,47070,{batchId:e.batchId})}));const h=[];for(const d of e.mutations){const g=U8(t,d.key.path,e.batchId);s.push(i.delete(g)),h.push(d.key)}return Q.waitFor(s).next(()=>h)}function ym(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Dt(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr.DEFAULT_COLLECTION_PERCENTILE=10,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tr.DEFAULT=new Tr(Y6,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tr.DISABLED=new Tr(-1,0,0);class ry{constructor(t,e,r,i){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(t,e,r,i){kt(t.uid!=="",64387);const s=t.isAuthenticated()?t.uid:"";return new ry(s,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return po(t).ee({index:ol,range:r},(i,s,a)=>{e=!1,a.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const s=qu(t),a=po(t);return a.add({}).next(o=>{kt(typeof o=="number",49019);const l=new fE(o,e,r,i),h=function(v,x,b){const E=b.baseMutations.map(S=>gm(v.yt,S)),T=b.mutations.map(S=>gm(v.yt,S));return{userId:x,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:E,mutations:T}}(this.serializer,this.userId,l),d=[];let g=new Le((m,v)=>Kt(m.canonicalString(),v.canonicalString()));for(const m of i){const v=U8(this.userId,m.key.path,o);g=g.add(m.key.path.popLast()),d.push(a.put(h)),d.push(s.put(v,E$))}return g.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),Q.waitFor(d).next(()=>l)})}lookupMutationBatch(t,e){return po(t).get(e).next(r=>r?(kt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),tl(this.serializer,r)):null)}er(t,e){return this.Xn[e]?Q.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.Xn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return po(t).ee({index:ol,range:i},(a,o,l)=>{o.userId===this.userId&&(kt(o.batchId>=r,47524,{tr:r}),s=tl(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=dl;return po(t).ee({index:ol,range:e,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,dl],[this.userId,Number.POSITIVE_INFINITY]);return po(t).J(ol,e).next(r=>r.map(i=>tl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=E1(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return qu(t).ee({range:i},(a,o,l)=>{const[h,d,g]=a,m=Os(d);if(h===this.userId&&e.path.isEqual(m))return po(t).get(g).next(v=>{if(!v)throw Dt(61480,{nr:a,batchId:g});kt(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:g}),s.push(tl(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Le(Kt);const i=[];return e.forEach(s=>{const a=E1(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=qu(t).ee({range:o},(h,d,g)=>{const[m,v,x]=h,b=Os(v);m===this.userId&&s.path.isEqual(b)?r=r.add(x):g.done()});i.push(l)}),Q.waitFor(i).next(()=>this.rr(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,s=E1(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Le(Kt);return qu(t).ee({range:a},(l,h,d)=>{const[g,m,v]=l,x=Os(m);g===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(v)):d.done()}).next(()=>this.rr(t,o))}rr(t,e){const r=[],i=[];return e.forEach(s=>{i.push(po(t).get(s).next(a=>{if(a===null)throw Dt(35274,{batchId:s});kt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(tl(this.serializer,a))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return X6(t.le,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.ir(e.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Q.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return qu(t).ee({range:r},(s,a,o)=>{if(s[0]===this.userId){const l=Os(s[1]);i.push(l)}else o.done()}).next(()=>{kt(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(t,e){return K6(t,this.userId,e)}_r(t){return $6(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:dl,lastStreamToken:""})}}function K6(n,t,e){const r=E1(t,e.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return qu(n).ee({range:s,X:!0},(o,l,h)=>{const[d,g,m]=o;d===t&&g===i&&(a=!0),h.done()}).next(()=>a)}function po(n){return $n(n,Qi)}function qu(n){return $n(n,yh)}function $6(n){return $n(n,Tg)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Rl(0)}static cr(){return new Rl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next(e=>{const r=new Rl(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.lr(t).next(e=>Vt.fromTimestamp(new ke(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.lr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.lr(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.hr(t,i)))}addTargetData(t,e){return this.Pr(t,e).next(()=>this.lr(t).next(r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Bu(t).delete(e.targetId)).next(()=>this.lr(t)).next(r=>(kt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r)))}removeTargets(t,e,r){let i=0;const s=[];return Bu(t).ee((a,o)=>{const l=Dd(o);l.sequenceNumber<=e&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(t,l)))}).next(()=>Q.waitFor(s)).next(()=>i)}forEachTarget(t,e){return Bu(t).ee((r,i)=>{const s=Dd(i);e(s)})}lr(t){return HD(t).get(cm).next(e=>(kt(e!==null,2888),e))}hr(t,e){return HD(t).put(cm,e)}Pr(t,e){return Bu(t).put(H6(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Sl(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Bu(t).ee({range:i,index:z8},(a,o,l)=>{const h=Dd(o);Xg(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,r){const i=[],s=Co(t);return e.forEach(a=>{const o=Dr(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(t,r,a))}),Q.waitFor(i)}removeMatchingKeys(t,e,r){const i=Co(t);return Q.forEach(e,s=>{const a=Dr(s.path);return Q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(t,r,s)])})}removeMatchingKeysForTargetId(t,e){const r=Co(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=Co(t);let s=re();return i.ee({range:r,X:!0},(a,o,l)=>{const h=Os(a[1]),d=new It(h);s=s.add(d)}).next(()=>s)}containsKey(t,e){const r=Dr(e.path),i=IDBKeyRange.bound([r],[O8(r)],!1,!0);let s=0;return Co(t).ee({index:eE,X:!0,range:i},([a,o],l,h)=>{a!==0&&(s++,h.done())}).next(()=>s>0)}At(t,e){return Bu(t).get(e).next(r=>r?Dd(r):null)}}function Bu(n){return $n(n,vh)}function HD(n){return $n(n,gl)}function Co(n){return $n(n,_h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="LruGarbageCollector",Q6=1048576;function WD([n,t],[e,r]){const i=Kt(n,e);return i===0?Kt(t,r):i}class KQ{constructor(t){this.Ir=t,this.buffer=new Le(WD),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();WD(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Z6{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){yt(GD,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){tc(e)?yt(GD,"Ignoring IndexedDB error during garbage collection: ",e):await Jo(e)}await this.Vr(3e5)})}}class $Q{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return Q.resolve($r.ce);const r=new KQ(e);return this.mr.forEachTarget(t,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(t,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(zD)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zD):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,i,s,a,o,l,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(r=g,o=Date.now(),this.removeTargets(t,r,e))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(g=>(h=Date.now(),zu()<=ce.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${g} documents in `+(h-l)+`ms
Total Duration: ${h-d}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function J6(n,t){return new $Q(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(t,e){this.db=t,this.garbageCollector=J6(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,(r,i)=>e(i))}addReference(t,e,r){return Xp(t,r)}removeReference(t,e,r){return Xp(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Xp(t,e)}br(t,e){return function(i,s){let a=!1;return $6(i).te(o=>K6(i,o,s).next(l=>(l&&(a=!0),Q.resolve(!l)))).next(()=>a)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(t,(a,o)=>{if(o<=e){const l=this.br(t,a).next(h=>{if(!h)return s++,r.getEntry(t,a).next(()=>(r.removeEntry(a,Vt.min()),Co(t).delete(function(g){return[0,Dr(g.path)]}(a))))});i.push(l)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(t)).next(()=>s)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Xp(t,e)}Sr(t,e){const r=Co(t);let i,s=$r.ce;return r.ee({index:eE},([a,o],{path:l,sequenceNumber:h})=>{a===0?(s!==$r.ce&&e(new It(Os(i)),s),s=h,i=l):s=$r.ce}).next(()=>{s!==$r.ce&&e(new It(Os(i)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Xp(n,t){return Co(n).put(function(r,i){return{targetId:0,path:Dr(r.path),sequenceNumber:i}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.changes=new ka(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,gn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?Q.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return jc(t).put(r)}removeEntry(t,e,r){return jc(t).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],pm(a),o[o.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Dr(t,r)))}getEntry(t,e){let r=gn.newInvalidDocument(e);return jc(t).ee({index:A1,range:IDBKeyRange.only(ud(e))},(i,s)=>{r=this.Cr(e,s)}).next(()=>r)}vr(t,e){let r={size:0,document:gn.newInvalidDocument(e)};return jc(t).ee({index:A1,range:IDBKeyRange.only(ud(e))},(i,s)=>{r={document:this.Cr(e,s),size:ym(s)}}).next(()=>r)}getEntries(t,e){let r=hi();return this.Fr(t,e,(i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)}).next(()=>r)}Mr(t,e){let r=hi(),i=new Ye(It.comparator);return this.Fr(t,e,(s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,ym(a))}).next(()=>({documents:r,Or:i}))}Fr(t,e,r){if(e.isEmpty())return Q.resolve();let i=new Le(XD);e.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(ud(i.first()),ud(i.last())),a=i.getIterator();let o=a.getNext();return jc(t).ee({index:A1,range:s},(l,h,d)=>{const g=It.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;o&&XD(o,g)<0;)r(o,null),o=a.getNext();o&&o.isEqual(g)&&(r(o,h),o=a.hasNext()?a.getNext():null),o?d.j(ud(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,e,r,i,s){const a=e.path,o=[a.popLast().toArray(),a.lastSegment(),pm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jc(t).J(IDBKeyRange.bound(o,l,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let d=hi();for(const g of h){const m=this.Cr(It.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(Kg(e,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(t,e,r,i){let s=hi();const a=YD(e,r),o=YD(e,gi.max());return jc(t).ee({index:j8,range:IDBKeyRange.bound(a,o,!0)},(l,h,d)=>{const g=this.Cr(It.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(t){return new JQ(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return qD(t).get(H2).next(e=>(kt(!!e,20021),e))}Dr(t,e){return qD(t).put(H2,e)}Cr(t,e){if(e){const r=BQ(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(Vt.min())))return r}return gn.newInvalidDocument(t)}}function e5(n){return new ZQ(n)}class JQ extends t5{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new ka(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new Le((s,a)=>Kt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(e.push(this.Nr.removeEntry(t,s,o.readTime)),a.isValidDocument()){const l=RD(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=ym(l);r+=h-o.size,e.push(this.Nr.addEntry(t,s,l))}else if(r-=o.size,this.trackRemovals){const l=RD(this.Nr.serializer,a.convertToNoDocument(Vt.min()));e.push(this.Nr.addEntry(t,s,l))}}),i.forEach(s=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Nr.updateMetadata(t,r)),Q.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next(r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next(({documents:r,Or:i})=>(i.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function qD(n){return $n(n,Sg)}function jc(n){return $n(n,om)}function ud(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function YD(n,t){const e=t.documentKey.path.toArray();return[n,pm(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function XD(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<e.length-2&&s<r.length-2;++s)if(i=Kt(e[s],r[s]),i)return i;return i=Kt(e.length,r.length),i||(i=Kt(e[e.length-2],r[r.length-2]),i||Kt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&ng(r.mutation,i,Qr.empty(),ke.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,re()).next(()=>r))}getLocalViewOfDocuments(t,e,r=re()){const i=Ms();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(s=>{let a=Id();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const r=Ms();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,re()))}populateOverlays(t,e,r){const i=[];return r.forEach(s=>{e.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,o)=>{e.set(a,o)})})}computeViews(t,e,r,i){let s=hi();const a=eg(),o=function(){return eg()}();return e.forEach((l,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof La)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),ng(d.mutation,h,d.mutation.getFieldMask(),ke.now())):a.set(h.key,Qr.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,d)=>a.set(h,d)),e.forEach((h,d)=>o.set(h,new tZ(d,a.get(h)??null))),o))}recalculateAndSaveOverlays(t,e){const r=eg();let i=new Ye((a,o)=>a-o),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const o of a)o.keys().forEach(l=>{const h=e.get(l);if(h===null)return;let d=r.get(l)||Qr.empty();d=o.applyToLocalView(h,d),r.set(l,d);const g=(i.get(o.batchId)||re()).add(l);i=i.insert(o.batchId,g)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,d=l.value,g=_6();d.forEach(m=>{if(!s.has(m)){const v=T6(e.get(m),r.get(m));v!==null&&g.set(m,v),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return Q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(a){return It.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):sQ(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-s.size):Q.resolve(Ms());let o=mh,l=s;return a.next(h=>Q.forEach(h,(d,g)=>(o<g.largestBatchId&&(o=g.largestBatchId),s.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,re())).next(d=>({batchId:o,changes:v6(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new It(e)).next(r=>{let i=Id();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const s=e.collectionGroup;let a=Id();return this.indexManager.getCollectionParents(t,s).next(o=>Q.forEach(o,l=>{const h=function(g,m){return new $m(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,r,i).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,s,i))).next(a=>{s.forEach((l,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,gn.newInvalidDocument(d)))});let o=Id();return a.forEach((l,h)=>{const d=s.get(l);d!==void 0&&ng(d.mutation,h,Qr.empty(),ke.now()),Kg(e,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Q.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(e)),Q.resolve()}getNamedQuery(t,e){return Q.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(i){return{name:i.name,query:G6(i.bundledQuery),readTime:Ur(i.readTime)}}(e)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(){this.overlays=new Ye(It.comparator),this.qr=new Map}getOverlay(t,e){return Q.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ms();return Q.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,s)=>{this.St(t,e,s)}),Q.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(t,e,r){const i=Ms(),s=e.length+1,a=new It(e.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let s=new Ye((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Ms(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const o=Ms(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>o.set(h,d)),!(o.size()>=i)););return Q.resolve(o)}St(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gE(e,r));let s=this.qr.get(e);s===void 0&&(s=re(),this.qr.set(e,s)),this.qr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.Qr=new Le(ir.$r),this.Ur=new Le(ir.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new ir(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Gr(new ir(t,e))}zr(t,e){t.forEach(r=>this.removeReference(r,e))}jr(t){const e=new It(new Se([])),r=new ir(e,t),i=new ir(e,t+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new It(new Se([])),r=new ir(e,t),i=new ir(e,t+1);let s=re();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){const e=new ir(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class ir{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return It.comparator(t.key,e.key)||Kt(t.Yr,e.Yr)}static Kr(t,e){return Kt(t.Yr,e.Yr)||It.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Le(ir.$r)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fE(s,e,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new ir(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(t,e){return Q.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?dl:this.tr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new ir(e,0),i=new ir(e,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Le(Kt);return e.forEach(i=>{const s=new ir(i,0),a=new ir(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let s=r;It.isDocumentKey(s)||(s=s.child(""));const a=new ir(new It(s),0);let o=new Le(Kt);return this.Zr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Yr)),!0)},a),Q.resolve(this.ti(o))}ti(t){const e=[];return t.forEach(r=>{const i=this.Xr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){kt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(e.mutations,i=>{const s=new ir(i.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,e){const r=new ir(e,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(t){this.ri=t,this.docs=function(){return new Ye(It.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return Q.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(e))}getEntries(t,e){let r=hi();return e.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let s=hi();const a=e.path,o=new It(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Jb(k8(d),r)<=0||(i.has(d.key)||Kg(e,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(t,e,r,i){Dt(9500)}ii(t,e){return Q.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new aZ(this)}getSize(t){return Q.resolve(this.size)}}class aZ extends t5{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)}),Q.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(t){this.persistence=t,this.si=new ka(e=>Sl(e),Xg),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.oi=0,this._i=new _E,this.targetCount=0,this.ai=Rl.ur()}forEachTarget(t,e){return this.si.forEach((r,i)=>e(i)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),Q.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Rl(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Q.resolve()}updateTargetData(t,e){return this.Pr(e),Q.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,e,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=e&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return Q.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),Q.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),Q.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Q.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return Q.resolve(r)}containsKey(t,e){return Q.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(t,e){this.ui={},this.overlays={},this.ci=new $r(0),this.li=!1,this.li=!0,this.hi=new rZ,this.referenceDelegate=t(this),this.Pi=new oZ(this),this.indexManager=new qQ,this.remoteDocumentCache=function(i){return new sZ(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new z6(e),this.Ii=new eZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new nZ,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new iZ(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){yt("MemoryPersistence","Starting transaction:",t);const i=new cZ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(t,e){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,e)))}}class cZ extends V8{constructor(t){super(),this.currentSequenceNumber=t}}class iy{constructor(t){this.persistence=t,this.Ri=new _E,this.Vi=null}static mi(t){return new iy(t)}get fi(){if(this.Vi)return this.Vi;throw Dt(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),Q.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Q.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{const i=It.fromPath(r);return this.gi(t,i).next(s=>{s||e.removeEntry(i,Vt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return Q.or([()=>Q.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class vm{constructor(t,e){this.persistence=t,this.pi=new ka(r=>Dr(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=J6(this,e)}static mi(t,e){return new vm(t,e)}Ei(){}di(t){return Q.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}pr(t,e){return Q.forEach(this.pi,(r,i)=>this.br(t,r,i).next(s=>s?Q.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(t,a=>this.br(t,a,e).next(o=>{o||(r++,s.removeEntry(a,Vt.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Q.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Q.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=S1(t.data.value)),e}br(t,e,r){return Q.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(t){this.serializer=t}k(t,e,r,i){const s=new Hm("createOrUpgrade",e);r<1&&i>=1&&(function(l){l.createObjectStore(Yg)}(t),function(l){l.createObjectStore(Tg,{keyPath:b$}),l.createObjectStore(Qi,{keyPath:sD,autoIncrement:!0}).createIndex(ol,aD,{unique:!0}),l.createObjectStore(yh)}(t),KD(t),function(l){l.createObjectStore(Kc)}(t));let a=Q.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(_h),l.deleteObjectStore(vh),l.deleteObjectStore(gl)}(t),KD(t)),a=a.next(()=>function(l){const h=l.store(gl),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return h.put(cm,d)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,h){return h.store(Qi).J().next(g=>{l.deleteObjectStore(Qi),l.createObjectStore(Qi,{keyPath:sD,autoIncrement:!0}).createIndex(ol,aD,{unique:!0});const m=h.store(Qi),v=g.map(x=>m.put(x));return Q.waitFor(v)})}(t,s))),a=a.next(()=>{(function(l){l.createObjectStore(xh,{keyPath:O$})})(t)})),r<5&&i>=5&&(a=a.next(()=>this.yi(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Sg)}(t),this.wi(s)))),r<7&&i>=7&&(a=a.next(()=>this.Si(s))),r<8&&i>=8&&(a=a.next(()=>this.bi(t,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&i>=10&&(a=a.next(()=>this.Di(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(Wm,{keyPath:M$})})(t),function(l){l.createObjectStore(qm,{keyPath:N$})}(t)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){const h=l.createObjectStore(Ym,{keyPath:U$});h.createIndex(W2,j$,{unique:!1}),h.createIndex(W8,z$,{unique:!1})})(t)})),r<13&&i>=13&&(a=a.next(()=>function(l){const h=l.createObjectStore(om,{keyPath:A$});h.createIndex(A1,T$),h.createIndex(j8,S$)}(t)).next(()=>this.Ci(t,s)).next(()=>t.deleteObjectStore(Kc))),r<14&&i>=14&&(a=a.next(()=>this.Fi(t,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore(nE,{keyPath:P$,autoIncrement:!0}).createIndex(G2,k$,{unique:!1}),l.createObjectStore(Qd,{keyPath:L$}).createIndex(H8,V$,{unique:!1}),l.createObjectStore(Zd,{keyPath:B$}).createIndex(G8,F$,{unique:!1})}(t))),r<16&&i>=16&&(a=a.next(()=>{e.objectStore(Qd).clear()}).next(()=>{e.objectStore(Zd).clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(rE,{keyPath:H$})})(t)})),r<18&&i>=18&&uP()&&(a=a.next(()=>{e.objectStore(Qd).clear()}).next(()=>{e.objectStore(Zd).clear()})),a}wi(t){let e=0;return t.store(Kc).ee((r,i)=>{e+=ym(i)}).next(()=>{const r={byteSize:e};return t.store(Sg).put(H2,r)})}yi(t){const e=t.store(Tg),r=t.store(Qi);return e.J().next(i=>Q.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,dl],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ol,a).next(o=>Q.forEach(o,l=>{kt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const h=tl(this.serializer,l);return X6(t,s.userId,h).next(()=>{})}))}))}Si(t){const e=t.store(_h),r=t.store(Kc);return t.store(gl).get(cm).next(i=>{const s=[];return r.ee((a,o)=>{const l=new Se(a),h=function(g){return[0,Dr(g)]}(l);s.push(e.get(h).next(d=>d?Q.resolve():(g=>e.put({targetId:0,path:Dr(g),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>Q.waitFor(s))})}bi(t,e){t.createObjectStore(Cg,{keyPath:D$});const r=e.store(Cg),i=new vE,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Dr(l)})}};return e.store(Kc).ee({X:!0},(a,o)=>{const l=new Se(a);return s(l.popLast())}).next(()=>e.store(yh).ee({X:!0},([a,o,l],h)=>{const d=Os(o);return s(d.popLast())}))}Di(t){const e=t.store(vh);return e.ee((r,i)=>{const s=Dd(i),a=H6(this.serializer,s);return e.put(a)})}Ci(t,e){const r=e.store(Kc),i=[];return r.ee((s,a)=>{const o=e.store(om),l=function(g){return g.document?new It(Se.fromString(g.document.name).popFirst(5)):g.noDocument?It.fromSegments(g.noDocument.path):g.unknownDocument?It.fromSegments(g.unknownDocument.path):Dt(36783)}(a).path.toArray(),h={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(h))}).next(()=>Q.waitFor(i))}Fi(t,e){const r=e.store(Qi),i=e5(this.serializer),s=new xE(iy.mi,this.serializer.yt);return r.J().next(a=>{const o=new Map;return a.forEach(l=>{let h=o.get(l.userId)??re();tl(this.serializer,l).keys().forEach(d=>h=h.add(d)),o.set(l.userId,h)}),Q.forEach(o,(l,h)=>{const d=new Ar(h),g=ny.wt(this.serializer,d),m=s.getIndexManager(d),v=ry.wt(d,this.serializer,m,s.referenceDelegate);return new n5(i,v,g,m).recalculateAndSaveOverlaysForDocumentKeys(new q2(e,$r.ce),l).next()})})}}function KD(n){n.createObjectStore(_h,{keyPath:I$}).createIndex(eE,R$,{unique:!0}),n.createObjectStore(vh,{keyPath:"targetId"}).createIndex(z8,C$,{unique:!0}),n.createObjectStore(gl)}const mo="IndexedDbPersistence",hx=18e5,fx=5e3,dx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uZ="main";class wE{constructor(t,e,r,i,s,a,o,l,h,d,g=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=h,this.Oi=d,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!wE.v())throw new Ct(dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QQ(this,i),this.$i=e+uZ,this.serializer=new z6(l),this.Ui=new Bo(this.$i,this.Ni,new lZ(this.serializer)),this.hi=new UQ,this.Pi=new XQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=e5(this.serializer),this.Ii=new FQ,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&An(mo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ct(dt.FAILED_PRECONDITION,dx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Pi.getHighestSequenceNumber(t))}).then(t=>{this.ci=new $r(t,this.xi)}).then(()=>{this.li=!0}).catch(t=>(this.Ui&&this.Ui.close(),Promise.reject(t)))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Kp(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(t).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(t)).next(e=>this.isPrimary&&!e?this.Zi(t).next(()=>!1):!!e&&this.Xi(t).next(()=>!0))).catch(t=>{if(tc(t))return yt(mo,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return yt(mo,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable(()=>this.Qi(t)),this.isPrimary=t})}Hi(t){return hd(t).get(Nu).next(e=>Q.resolve(this.es(e)))}ts(t){return Kp(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,hx)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=$n(e,xh);return r.J().next(i=>{const s=this.ss(i,hx),a=i.filter(o=>s.indexOf(o)===-1);return Q.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?Q.resolve(!0):hd(t).get(Nu).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,fx)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new Ct(dt.FAILED_PRECONDITION,dx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kp(t).J().next(r=>this.ss(r,fx).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&yt(mo,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Yg,xh],t=>{const e=new q2(t,$r.ce);return this.Zi(e).next(()=>this.ts(e))}),this.Ui.close(),this.Ps()}ss(t,e){return t.filter(r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",t=>Kp(t).J().next(e=>this.ss(e,hx).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return ry.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new YQ(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return ny.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){yt(mo,"Starting transaction:",t);const i=e==="readonly"?"readonly":"readwrite",s=function(l){return l===18?q$:l===17?K8:l===16?W$:l===15?iE:l===14?X8:l===13?Y8:l===12?G$:l===11?q8:void Dt(60245)}(this.Ni);let a;return this.Ui.runTransaction(t,i,s,o=>(a=new q2(o,this.ci?this.ci.next():$r.ce),e==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw An(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Ct(dt.FAILED_PRECONDITION,L8);return r(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(t){return hd(t).get(Nu).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,fx)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ct(dt.FAILED_PRECONDITION,dx)})}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hd(t).put(Nu,e)}static v(){return Bo.v()}Zi(t){const e=hd(t);return e.get(Nu).next(r=>this.es(r)?(yt(mo,"Releasing primary lease."),e.delete(Nu)):Q.resolve())}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(An(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;lP()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return yt(mo,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return An(mo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){An("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function hd(n){return $n(n,Yg)}function Kp(n){return $n(n,xh)}function r5(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=i}static As(t,e){let r=re(),i=re();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bE(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lP()?8:B8(Kn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,i){const s={result:null};return this.ys(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,e,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new hZ;return this.Ss(t,e,a).next(o=>{if(s.result=o,this.Vs)return this.bs(t,e,a,o.size)})}).next(()=>s.result)}bs(t,e,r,i){return r.documentReadCount<this.fs?(zu()<=ce.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",Hu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(zu()<=ce.DEBUG&&yt("QueryEngine","Query:",Hu(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(zu()<=ce.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",Hu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,di(e))):Q.resolve())}ys(t,e){if(_D(e))return Q.resolve(null);let r=di(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=Z2(e,null,"F"),r=di(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=re(...s);return this.ps.getDocuments(t,a).next(o=>this.indexManager.getMinOffset(t,r).next(l=>{const h=this.Ds(e,o);return this.Cs(e,h,a,l.readTime)?this.ys(t,Z2(e,null,"F")):this.vs(t,h,e,l)}))})))}ws(t,e,r,i){return _D(e)||i.isEqual(Vt.min())?Q.resolve(null):this.ps.getDocuments(t,r).next(s=>{const a=this.Ds(e,s);return this.Cs(e,a,r,i)?Q.resolve(null):(zu()<=ce.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hu(e)),this.vs(t,a,e,P8(i,mh)).next(o=>o))})}Ds(t,e){let r=new Le(m6(t));return e.forEach((i,s)=>{Kg(t,s)&&(r=r.add(s))}),r}Cs(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(t,e,r){return zu()<=ce.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Hu(e)),this.ps.getDocumentsMatchingQuery(t,e,gi.min(),r)}vs(t,e,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="LocalStore",fZ=3e8;class dZ{constructor(t,e,r,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new Ye(Kt),this.xs=new ka(s=>Sl(s),Xg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new n5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function s5(n,t,e,r){return new dZ(n,t,e,r)}async function a5(n,t){const e=Pt(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,e.Bs(t),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=re();for(const h of i){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of s){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return e.localDocuments.getDocuments(r,l).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:o}))})})}function gZ(n,t){const e=Pt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=e.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,h,d){const g=h.batch,m=g.keys();let v=Q.resolve();return m.forEach(x=>{v=v.next(()=>d.getEntry(l,x)).next(b=>{const E=h.docVersions.get(x);kt(E!==null,48541),b.version.compareTo(E)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),d.addEntry(b)))})}),v.next(()=>o.mutationQueue.removeMutationBatch(l,g))}(e,r,t,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=re();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function o5(n){const t=Pt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function pZ(n,t){const e=Pt(n),r=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const o=[];t.targetChanges.forEach((d,g)=>{const m=i.get(g);if(!m)return;o.push(e.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>e.Pi.addMatchingKeys(s,d.addedDocuments,g)));let v=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?v=v.withResumeToken(In.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(g,v),function(b,E,T){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=fZ?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,v,d)&&o.push(e.Pi.updateTargetData(s,v))});let l=hi(),h=re();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(mZ(s,a,t.documentUpdates).next(d=>{l=d.ks,h=d.qs})),!r.isEqual(Vt.min())){const d=e.Pi.getLastRemoteSnapshotVersion(s).next(g=>e.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return Q.waitFor(o).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.Ms=i,s))}function mZ(n,t,e){let r=re(),i=re();return e.forEach(s=>r=r.add(s)),t.getEntries(n,r).next(s=>{let a=hi();return e.forEach((o,l)=>{const h=s.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Vt.min())?(t.removeEntry(o,l.readTime),a=a.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(l),a=a.insert(o,l)):yt(EE,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{ks:a,qs:i}})}function yZ(n,t){const e=Pt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=dl),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function _m(n,t){const e=Pt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Pi.getTargetData(r,t).next(s=>s?(i=s,Q.resolve(i)):e.Pi.allocateTargetId(r).next(a=>(i=new Ca(t,a,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r})}async function Ih(n,t,e){const r=Pt(n),i=r.Ms.get(t),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!tc(a))throw a;yt(EE,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function aw(n,t,e){const r=Pt(n);let i=Vt.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,h,d){const g=Pt(l),m=g.xs.get(d);return m!==void 0?Q.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(r,a,di(t)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,t,e?i:Vt.min(),e?s:re())).next(o=>(u5(r,p6(t),o),{documents:o,Qs:s})))}function c5(n,t){const e=Pt(n),r=Pt(e.Pi),i=e.Ms.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",s=>r.At(s,t).next(a=>a?a.target:null))}function l5(n,t){const e=Pt(n),r=e.Os.get(t)||Vt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ns.getAllFromCollectionGroup(i,t,P8(r,mh),Number.MAX_SAFE_INTEGER)).then(i=>(u5(e,t,i),i))}function u5(n,t,e){let r=n.Os.get(t)||Vt.min();e.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="firestore_clients";function $D(n,t){return`${h5}_${n}_${t}`}const f5="firestore_mutations";function QD(n,t,e){let r=`${f5}_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const d5="firestore_targets";function gx(n,t){return`${d5}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="SharedClientState";class xm{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ws(t,e,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Ct(i.error.code,i.error.message))),a?new xm(t,e,i.state,s):(An(Cs,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class rg{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Ct(r.error.code,r.error.message))),s?new rg(t,r.state,i):(An(Cs,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class wm{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=uE();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=F8(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new wm(t,s):(An(Cs,`Failed to parse client data for instance '${t}': ${e}`),null)}}class AE{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new AE(e.clientId,e.onlineState):(An(Cs,`Failed to parse online state: ${t}`),null)}}class ow{constructor(){this.activeTargetIds=uE()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class px{constructor(t,e,r,i,s){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ye(Kt),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=$D(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ow),this.ro=new RegExp(`^${h5}_${a}_([^_]*)$`),this.io=new RegExp(`^${f5}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${d5}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const i=this.getItem($D(this.persistenceKey,r));if(i){const s=wm.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(gx(this.persistenceKey,t));if(i){const s=rg.Ws(t,i);s&&(r=s.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(gx(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Po(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return yt(Cs,"READ",t,e),e}setItem(t,e){yt(Cs,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){yt(Cs,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(yt(Cs,"EVENT",e.key,e.newValue),e.key===this.eo)return void An("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=function(s){let a=$r.ce;if(s!=null)try{const o=JSON.parse(s);kt(typeof o=="number",30636,{So:s}),a=o}catch(o){An(Cs,"Failed to read sequence number from WebStorage",o)}return a}(e.newValue);r!==$r.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(e)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const i=new xm(this.currentUser,t,e,r),s=QD(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Gs())}Po(t){const e=QD(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const i=gx(this.persistenceKey,t),s=new rg(t,e,r);this.setItem(i,s.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return wm.Ws(r,e)}fo(t,e){const r=this.io.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return xm.Ws(new Ar(s),i,e)}yo(t,e){const r=this.so.exec(t),i=Number(r[1]);return rg.Ws(i,e)}uo(t){return AE.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);yt(Cs,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),i=this.lo(this.Zs),s=this.lo(r),a=[],o=[];return s.forEach(l=>{i.has(l)||a.push(l)}),i.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=r})}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=uE();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class g5{constructor(){this.Mo=new ow,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ow,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="ConnectivityMonitor";class JD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yt(ZD,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){yt(ZD,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $p=null;function cw(){return $p===null?$p=function(){return 268435456+Math.round(2147483648*Math.random())}():$p++,"0x"+$p.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="RestConnection",_Z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xZ{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===lm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,e,r,i,s){const a=cw(),o=this.zo(t,e.toUriEncodedString());yt(mx,`Sending RPC '${t}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:h}=new URL(o),d=Fh(h);return this.Jo(t,o,l,r,d).then(g=>(yt(mx,`Received RPC '${t}' ${a}: `,g),g),g=>{throw bg(mx,`RPC '${t}' ${a} failed with error: `,g,"url: ",o,"request:",r),g})}Ho(t,e,r,i,s,a){return this.Go(t,e,r,i,s)}jo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}zo(t,e){const r=_Z[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="WebChannelConnection";class bZ extends xZ{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,i,s){const a=cw();return new Promise((o,l)=>{const h=new T8;h.setWithCredentials(!0),h.listenOnce(S8.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case w1.NO_ERROR:const g=h.getResponseJson();yt(br,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),o(g);break;case w1.TIMEOUT:yt(br,`RPC '${t}' ${a} timed out`),l(new Ct(dt.DEADLINE_EXCEEDED,"Request time out"));break;case w1.HTTP_ERROR:const m=h.getStatus();if(yt(br,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const b=function(T){const S=T.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(S)>=0?S:dt.UNKNOWN}(x.status);l(new Ct(b,x.message))}else l(new Ct(dt.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ct(dt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{yt(br,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(i);yt(br,`RPC '${t}' ${a} sending request:`,i),h.send(e,"POST",d,r,15)})}T_(t,e,r){const i=cw(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=R8(),o=I8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,e,r),l.encodeInitMessageHeaders=!0;const d=s.join("");yt(br,`Creating RPC '${t}' stream ${i}: ${d}`,l);const g=a.createWebChannel(d,l);this.I_(g);let m=!1,v=!1;const x=new wZ({Yo:E=>{v?yt(br,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(m||(yt(br,`Opening RPC '${t}' stream ${i} transport.`),g.open(),m=!0),yt(br,`RPC '${t}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),b=(E,T,S)=>{E.listen(T,R=>{try{S(R)}catch(P){setTimeout(()=>{throw P},0)}})};return b(g,Cd.EventType.OPEN,()=>{v||(yt(br,`RPC '${t}' stream ${i} transport opened.`),x.o_())}),b(g,Cd.EventType.CLOSE,()=>{v||(v=!0,yt(br,`RPC '${t}' stream ${i} transport closed`),x.a_(),this.E_(g))}),b(g,Cd.EventType.ERROR,E=>{v||(v=!0,bg(br,`RPC '${t}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),x.a_(new Ct(dt.UNAVAILABLE,"The operation could not be completed")))}),b(g,Cd.EventType.MESSAGE,E=>{var T;if(!v){const S=E.data[0];kt(!!S,16349);const R=S,P=(R==null?void 0:R.error)||((T=R[0])==null?void 0:T.error);if(P){yt(br,`RPC '${t}' stream ${i} received error:`,P);const M=P.status;let H=function(N){const B=Nn[N];if(B!==void 0)return I6(B)}(M),O=P.message;H===void 0&&(H=dt.INTERNAL,O="Unknown error status: "+M+" with message "+P.message),v=!0,x.a_(new Ct(H,O)),g.close()}else yt(br,`RPC '${t}' stream ${i} received:`,S),x.u_(S)}}),b(o,C8.STAT_EVENT,E=>{E.stat===U2.PROXY?yt(br,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===U2.NOPROXY&&yt(br,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(){return typeof window<"u"?window:null}function O1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n){return new IQ(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(t,e,r=1e3,i=1.5,s=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-r);i>0&&yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="PersistentStream";class y5{constructor(t,e,r,i,s,a,o,l){this.Mi=t,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new m5(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===dt.RESOURCE_EXHAUSTED?(An(e.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===e&&this.G_(r,i)},r=>{t(()=>{const i=new Ct(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return yt(tO,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(yt(tO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EZ extends y5{constructor(t,e,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=OQ(this.serializer,t),r=function(s){if(!("targetChange"in s))return Vt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Vt.min():a.readTime?Ur(a.readTime):Vt.min()}(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=ew(this.serializer),e.addTarget=function(s,a){let o;const l=a.target;if(o=hm(l)?{documents:L6(s,l)}:{query:V6(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=O6(s,a.resumeToken);const h=J2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}else if(a.snapshotVersion.compareTo(Vt.min())>0){o.readTime=Ch(s,a.snapshotVersion.toTimestamp());const h=J2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,t);const r=NQ(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=ew(this.serializer),e.removeTarget=t,this.q_(e)}}class AZ extends y5{constructor(t,e,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return kt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,kt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){kt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=MQ(t.writeResults,t.commitTime),r=Ur(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=ew(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>gm(this.serializer,r))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{}class SZ extends TZ{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ct(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,tw(e,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ct(dt.UNKNOWN,s.toString())})}Ho(t,e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(t,tw(e,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ct(dt.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class CZ{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(e),this.aa=!1):yt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="RemoteStore";class IZ{constructor(t,e,r,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Vl(this)&&(yt(Dl,"Restarting streams for network reachability change."),await async function(l){const h=Pt(l);h.Ea.add(4),await Zg(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ay(h)}(this))})}),this.Ra=new CZ(r,i)}}async function ay(n){if(Vl(n))for(const t of n.da)await t(!0)}async function Zg(n){for(const t of n.da)await t(!1)}function oy(n,t){const e=Pt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),CE(e)?SE(e):Gh(e).O_()&&TE(e,t))}function Rh(n,t){const e=Pt(n),r=Gh(e);e.Ia.delete(t),r.O_()&&v5(e,t),e.Ia.size===0&&(r.O_()?r.L_():Vl(e)&&e.Ra.set("Unknown"))}function TE(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Gh(n).Y_(t)}function v5(n,t){n.Va.Ue(t),Gh(n).Z_(t)}function SE(n){n.Va=new AQ({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Gh(n).start(),n.Ra.ua()}function CE(n){return Vl(n)&&!Gh(n).x_()&&n.Ia.size>0}function Vl(n){return Pt(n).Ea.size===0}function _5(n){n.Va=void 0}async function RZ(n){n.Ra.set("Online")}async function DZ(n){n.Ia.forEach((t,e)=>{TE(n,t)})}async function OZ(n,t){_5(n),CE(n)?(n.Ra.ha(t),SE(n)):n.Ra.set("Unknown")}async function MZ(n,t,e){if(n.Ra.set("Online"),t instanceof D6&&t.state===2&&t.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(n,t)}catch(r){yt(Dl,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await bm(n,r)}else if(t instanceof R1?n.Va.Ze(t):t instanceof R6?n.Va.st(t):n.Va.tt(t),!e.isEqual(Vt.min()))try{const r=await o5(n.localStore);e.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,h)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(In.EMPTY_BYTE_STRING,d.snapshotVersion)),v5(s,l);const g=new Ca(d.target,l,h,d.sequenceNumber);TE(s,g)}),s.remoteSyncer.applyRemoteEvent(o)}(n,e)}catch(r){yt(Dl,"Failed to raise snapshot:",r),await bm(n,r)}}async function bm(n,t,e){if(!tc(t))throw t;n.Ea.add(1),await Zg(n),n.Ra.set("Offline"),e||(e=()=>o5(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{yt(Dl,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await ay(n)})}function x5(n,t){return t().catch(e=>bm(n,e,t))}async function Hh(n){const t=Pt(n),e=Xo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:dl;for(;NZ(t);)try{const i=await yZ(t.localStore,r);if(i===null){t.Ta.length===0&&e.L_();break}r=i.batchId,PZ(t,i)}catch(i){await bm(t,i)}w5(t)&&b5(t)}function NZ(n){return Vl(n)&&n.Ta.length<10}function PZ(n,t){n.Ta.push(t);const e=Xo(n);e.O_()&&e.X_&&e.ea(t.mutations)}function w5(n){return Vl(n)&&!Xo(n).x_()&&n.Ta.length>0}function b5(n){Xo(n).start()}async function kZ(n){Xo(n).ra()}async function LZ(n){const t=Xo(n);for(const e of n.Ta)t.ea(e.mutations)}async function VZ(n,t,e){const r=n.Ta.shift(),i=dE.from(r,t,e);await x5(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Hh(n)}async function BZ(n,t){t&&Xo(n).X_&&await async function(r,i){if(function(a){return wQ(a)&&a!==dt.ABORTED}(i.code)){const s=r.Ta.shift();Xo(r).B_(),await x5(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Hh(r)}}(n,t),w5(n)&&b5(n)}async function eO(n,t){const e=Pt(n);e.asyncQueue.verifyOperationInProgress(),yt(Dl,"RemoteStore received new credentials");const r=Vl(e);e.Ea.add(3),await Zg(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await ay(e)}async function lw(n,t){const e=Pt(n);t?(e.Ea.delete(2),await ay(e)):t||(e.Ea.add(2),await Zg(e),e.Ra.set("Unknown"))}function Gh(n){return n.ma||(n.ma=function(e,r,i){const s=Pt(e);return s.sa(),new EZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:RZ.bind(null,n),t_:DZ.bind(null,n),r_:OZ.bind(null,n),H_:MZ.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),CE(n)?SE(n):n.Ra.set("Unknown")):(await n.ma.stop(),_5(n))})),n.ma}function Xo(n){return n.fa||(n.fa=function(e,r,i){const s=Pt(e);return s.sa(),new AZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:kZ.bind(null,n),r_:BZ.bind(null,n),ta:LZ.bind(null,n),na:VZ.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Hh(n)):(await n.fa.stop(),n.Ta.length>0&&(yt(Dl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,e,r,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,s){const a=Date.now()+r,o=new IE(t,e,a,i,s);return o.start(r),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function RE(n,t){if(An("AsyncQueue",`${t}: ${n}`),tc(n))return new Ct(dt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{static emptySet(t){return new ch(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||It.comparator(e.key,r.key):(e,r)=>It.comparator(e.key,r.key),this.keyedMap=Id(),this.sortedSet=new Ye(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ch)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new ch;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.ga=new Ye(It.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Dt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,r)=>{t.push(r)}),t}}class Dh{constructor(t,e,r,i,s,a,o,l,h){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,r,i,s){const a=[];return e.forEach(o=>{a.push({type:0,doc:o})}),new Dh(t,e,ch.emptySet(e),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class UZ{constructor(){this.queries=rO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const i=Pt(e),s=i.queries;i.queries=rO(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new Ct(dt.ABORTED,"Firestore shutting down"))}}function rO(){return new ka(n=>g6(n),Zm)}async function E5(n,t){const e=Pt(n);let r=3;const i=t.query;let s=e.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new FZ,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await e.onListen(i,!0);break;case 1:s.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(a){const o=RE(a,`Initialization of query '${Hu(t.query)}' failed`);return void t.onError(o)}e.queries.set(i,s),s.Sa.push(t),t.va(e.onlineState),s.wa&&t.Fa(s.wa)&&DE(e)}async function A5(n,t){const e=Pt(n),r=t.query;let i=3;const s=e.queries.get(r);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function jZ(n,t){const e=Pt(n);let r=!1;for(const i of t){const s=i.query,a=e.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&DE(e)}function zZ(n,t,e){const r=Pt(n),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(e);r.queries.delete(t)}function DE(n){n.Ca.forEach(t=>{t.next()})}var uw,iO;(iO=uw||(uw={})).Ma="default",iO.Cache="cache";class T5{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Dh(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Dh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==uw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(t){this.key=t}}class C5{constructor(t){this.key=t}}class HZ{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=m6(t),this.tu=new ch(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new nO,i=e?e.tu:this.tu;let s=e?e.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,g)=>{const m=i.get(d),v=Kg(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let E=!1;m&&v?m.data.isEqual(v.data)?x!==b&&(r.track({type:3,doc:v}),E=!0):this.su(m,v)||(r.track({type:2,doc:v}),E=!0,(l&&this.eu(v,l)>0||h&&this.eu(v,h)<0)&&(o=!0)):!m&&v?(r.track({type:0,doc:v}),E=!0):m&&!v&&(r.track({type:1,doc:m}),E=!0,(l||h)&&(o=!0)),E&&(v?(a=a.add(v),s=b?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(v,x){const b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Rt:E})}};return b(v)-b(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(r),i=i??!1;const o=e&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,h=l!==this.Za;return this.Za=l,a.length!==0||h?{snapshot:new Dh(this.query,t.tu,s,a,t.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const e=[];return t.forEach(r=>{this.Xa.has(r)||e.push(new C5(r))}),this.Xa.forEach(r=>{t.has(r)||e.push(new S5(r))}),e}cu(t){this.Ya=t.Qs,this.Xa=re();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Dh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wh="SyncEngine";class GZ{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class WZ{constructor(t){this.key=t,this.hu=!1}}class qZ{constructor(t,e,r,i,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ka(o=>g6(o),Zm),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(It.comparator),this.Au=new Map,this.Ru=new _E,this.Vu={},this.mu=new Map,this.fu=Rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YZ(n,t,e=!0){const r=cy(n);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await I5(r,t,e,!0),i}async function XZ(n,t){const e=cy(n);await I5(e,t,!0,!1)}async function I5(n,t,e,r){const i=await _m(n.localStore,di(t)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,e);let o;return r&&(o=await OE(n,t,s,a==="current",i.resumeToken)),n.isPrimaryClient&&e&&oy(n.remoteStore,i),o}async function OE(n,t,e,r,i){n.pu=(g,m,v)=>async function(b,E,T,S){let R=E.view.ru(T);R.Cs&&(R=await aw(b.localStore,E.query,!1).then(({documents:O})=>E.view.ru(O,R)));const P=S&&S.targetChanges.get(E.targetId),M=S&&S.targetMismatches.get(E.targetId)!=null,H=E.view.applyChanges(R,b.isPrimaryClient,P,M);return hw(b,E.targetId,H.au),H.snapshot}(n,g,m,v);const s=await aw(n.localStore,t,!0),a=new HZ(t,s.Qs),o=a.ru(s.documents),l=Qg.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),h=a.applyChanges(o,n.isPrimaryClient,l);hw(n,e,h.au);const d=new GZ(t,e,a);return n.Tu.set(t,d),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),h.snapshot}async function KZ(n,t,e){const r=Pt(n),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!Zm(a,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ih(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Rh(r.remoteStore,i.targetId),Oh(r,i.targetId)}).catch(Jo)):(Oh(r,i.targetId),await Ih(r.localStore,i.targetId,!0))}async function $Z(n,t){const e=Pt(n),r=e.Tu.get(t),i=e.Iu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Rh(e.remoteStore,r.targetId))}async function QZ(n,t,e){const r=kE(n);try{const i=await function(a,o){const l=Pt(a),h=ke.now(),d=o.reduce((v,x)=>v.add(x.key),re());let g,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=hi(),b=re();return l.Ns.getEntries(v,d).next(E=>{x=E,x.forEach((T,S)=>{S.isValidDocument()||(b=b.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,x)).next(E=>{g=E;const T=[];for(const S of o){const R=_Q(S,g.get(S.key).overlayedDocument);R!=null&&T.push(new La(S.key,R,s6(R.value.mapValue),Rr.exists(!0)))}return l.mutationQueue.addMutationBatch(v,h,T,o)}).next(E=>{m=E;const T=E.applyToLocalDocumentSet(g,b);return l.documentOverlayCache.saveOverlays(v,E.batchId,T)})}).then(()=>({batchId:m.batchId,changes:v6(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ye(Kt)),h=h.insert(o,l),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,e),await nc(r,i.changes),await Hh(r.remoteStore)}catch(i){const s=RE(i,"Failed to persist write");e.reject(s)}}async function R5(n,t){const e=Pt(n);try{const r=await pZ(e.localStore,t);t.targetChanges.forEach((i,s)=>{const a=e.Au.get(s);a&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?kt(a.hu,14607):i.removedDocuments.size>0&&(kt(a.hu,42227),a.hu=!1))}),await nc(e,r,t)}catch(r){await Jo(r)}}function sO(n,t,e){const r=Pt(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(t);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Pt(a);l.onlineState=o;let h=!1;l.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(o)&&(h=!0)}),h&&DE(l)}(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZZ(n,t,e){const r=Pt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Au.get(t),s=i&&i.key;if(s){let a=new Ye(It.comparator);a=a.insert(s,gn.newNoDocument(s,Vt.min()));const o=re().add(s),l=new $g(Vt.min(),new Map,new Ye(Kt),a,o);await R5(r,l),r.du=r.du.remove(s),r.Au.delete(t),PE(r)}else await Ih(r.localStore,t,!1).then(()=>Oh(r,t,e)).catch(Jo)}async function JZ(n,t){const e=Pt(n),r=t.batch.batchId;try{const i=await gZ(e.localStore,t);NE(e,r,null),ME(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await nc(e,i)}catch(i){await Jo(i)}}async function tJ(n,t,e){const r=Pt(n);try{const i=await function(a,o){const l=Pt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return l.mutationQueue.lookupMutationBatch(h,o).next(g=>(kt(g!==null,37113),d=g.keys(),l.mutationQueue.removeMutationBatch(h,g))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>l.localDocuments.getDocuments(h,d))})}(r.localStore,t);NE(r,t,e),ME(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await nc(r,i)}catch(i){await Jo(i)}}function ME(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function NE(n,t,e){const r=Pt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(e?s.reject(e):s.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Oh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(r=>{n.Ru.containsKey(r)||D5(n,r)})}function D5(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Rh(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),PE(n))}function hw(n,t,e){for(const r of e)r instanceof S5?(n.Ru.addReference(r.key,t),eJ(n,r)):r instanceof C5?(yt(Wh,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||D5(n,r.key)):Dt(19791,{wu:r})}function eJ(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(yt(Wh,"New document in limbo: "+e),n.Eu.add(r),PE(n))}function PE(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new It(Se.fromString(t)),r=n.fu.next();n.Au.set(r,new WZ(e)),n.du=n.du.insert(e,r),oy(n.remoteStore,new Ca(di(Qm(e.path)),r,"TargetPurposeLimboResolution",$r.ce))}}async function nc(n,t,e){const r=Pt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,t,e).then(h=>{var d;if((h||e)&&r.isPrimaryClient){const g=h?!h.fromCache:(d=e==null?void 0:e.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(h){i.push(h);const g=bE.As(l.targetId,h);s.push(g)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(l,h){const d=Pt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Q.forEach(h,m=>Q.forEach(m.Es,v=>d.persistence.referenceDelegate.addReference(g,m.targetId,v)).next(()=>Q.forEach(m.ds,v=>d.persistence.referenceDelegate.removeReference(g,m.targetId,v)))))}catch(g){if(!tc(g))throw g;yt(EE,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const v=d.Ms.get(m),x=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,b)}}}(r.localStore,s))}async function nJ(n,t){const e=Pt(n);if(!e.currentUser.isEqual(t)){yt(Wh,"User change. New user:",t.toKey());const r=await a5(e.localStore,t);e.currentUser=t,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Ct(dt.CANCELLED,a))})}),s.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await nc(e,r.Ls)}}function rJ(n,t){const e=Pt(n),r=e.Au.get(t);if(r&&r.hu)return re().add(r.key);{let i=re();const s=e.Iu.get(t);if(!s)return i;for(const a of s){const o=e.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function iJ(n,t){const e=Pt(n),r=await aw(e.localStore,t.query,!0),i=t.view.cu(r);return e.isPrimaryClient&&hw(e,t.targetId,i.au),i}async function sJ(n,t){const e=Pt(n);return l5(e.localStore,t).then(r=>nc(e,r))}async function aJ(n,t,e,r){const i=Pt(n),s=await function(o,l){const h=Pt(o),d=Pt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>d.er(g,l).next(m=>m?h.localDocuments.getDocuments(g,m):Q.resolve(null)))}(i.localStore,t);s!==null?(e==="pending"?await Hh(i.remoteStore):e==="acknowledged"||e==="rejected"?(NE(i,t,r||null),ME(i,t),function(o,l){Pt(Pt(o).mutationQueue).ir(l)}(i.localStore,t)):Dt(6720,"Unknown batchState",{Su:e}),await nc(i,s)):yt(Wh,"Cannot apply mutation batch with id: "+t)}async function oJ(n,t){const e=Pt(n);if(cy(e),kE(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),i=await aO(e,r.toArray());e.gu=!0,await lw(e.remoteStore,!0);for(const s of i)oy(e.remoteStore,s)}else if(t===!1&&e.gu!==!1){const r=[];let i=Promise.resolve();e.Iu.forEach((s,a)=>{e.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(Oh(e,a),Ih(e.localStore,a,!0))),Rh(e.remoteStore,a)}),await i,await aO(e,r),function(a){const o=Pt(a);o.Au.forEach((l,h)=>{Rh(o.remoteStore,h)}),o.Ru.Jr(),o.Au=new Map,o.du=new Ye(It.comparator)}(e),e.gu=!1,await lw(e.remoteStore,!1)}}async function aO(n,t,e){const r=Pt(n),i=[],s=[];for(const a of t){let o;const l=r.Iu.get(a);if(l&&l.length!==0){o=await _m(r.localStore,di(l[0]));for(const h of l){const d=r.Tu.get(h),g=await iJ(r,d);g.snapshot&&s.push(g.snapshot)}}else{const h=await c5(r.localStore,a);o=await _m(r.localStore,h),await OE(r,O5(h),a,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(s),i}function O5(n){return d6(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function cJ(n){return function(e){return Pt(Pt(e).persistence).Ts()}(Pt(n).localStore)}async function lJ(n,t,e,r){const i=Pt(n);if(i.gu)return void yt(Wh,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const a=await l5(i.localStore,p6(s[0])),o=$g.createSynthesizedRemoteEventForCurrentChange(t,e==="current",In.EMPTY_BYTE_STRING);await nc(i,a,o);break}case"rejected":await Ih(i.localStore,t,!0),Oh(i,t,r);break;default:Dt(64155,e)}}async function uJ(n,t,e){const r=cy(n);if(r.gu){for(const i of t){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){yt(Wh,"Adding an already active target "+i);continue}const s=await c5(r.localStore,i),a=await _m(r.localStore,s);await OE(r,O5(s),a.targetId,!1,a.resumeToken),oy(r.remoteStore,a)}for(const i of e)r.Iu.has(i)&&await Ih(r.localStore,i,!1).then(()=>{Rh(r.remoteStore,i),Oh(r,i)}).catch(Jo)}}function cy(n){const t=Pt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=R5.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rJ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZZ.bind(null,t),t.Pu.H_=jZ.bind(null,t.eventManager),t.Pu.yu=zZ.bind(null,t.eventManager),t}function kE(n){const t=Pt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JZ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tJ.bind(null,t),t}class Ng{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sy(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return s5(this.persistence,new i5,t.initialUser,this.serializer)}Cu(t){return new xE(iy.mi,this.serializer)}Du(t){return new g5}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ng.provider={build:()=>new Ng};class hJ extends Ng{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){kt(this.persistence.referenceDelegate instanceof vm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Z6(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Tr.withCacheSize(this.cacheSizeBytes):Tr.DEFAULT;return new xE(r=>vm.mi(r,e),this.serializer)}}class M5 extends Ng{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await kE(this.xu.syncEngine),await Hh(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return s5(this.persistence,new i5,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new Z6(r,t.asyncQueue,e)}Mu(t,e){const r=new x$(e,this.persistence);return new _$(t.asyncQueue,r)}Cu(t){const e=r5(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tr.withCacheSize(this.cacheSizeBytes):Tr.DEFAULT;return new wE(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,p5(),O1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new g5}}class fJ extends M5{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof px&&(this.sharedClientState.syncEngine={Co:aJ.bind(null,e),vo:lJ.bind(null,e),Fo:uJ.bind(null,e),Ts:cJ.bind(null,e),Do:sJ.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await oJ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(t){const e=p5();if(!px.v(e))throw new Ct(dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=r5(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new px(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Pg{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nJ.bind(null,this.syncEngine),await lw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new UZ}()}createDatastore(t){const e=sy(t.databaseInfo.databaseId),r=function(s){return new bZ(s)}(t.databaseInfo);return function(s,a,o,l){return new SZ(s,a,o,l)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,s,a,o){return new IZ(r,i,s,a,o)}(this.localStore,this.datastore,t.asyncQueue,e=>sO(this.syncEngine,e,0),function(){return JD.v()?new JD:new vZ}())}createSyncEngine(t,e){return function(i,s,a,o,l,h,d){const g=new qZ(i,s,a,o,l,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const s=Pt(i);yt(Dl,"RemoteStore shutting down."),s.Ea.add(5),await Zg(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Pg.provider={build:()=>new Pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):An("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="FirestoreClient";class dJ{constructor(t,e,r,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Ar.UNAUTHENTICATED,this.clientId=Qb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{yt(Ko,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(yt(Ko,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=RE(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function yx(n,t){n.asyncQueue.verifyOperationInProgress(),yt(Ko,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await a5(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function oO(n,t){n.asyncQueue.verifyOperationInProgress();const e=await gJ(n);yt(Ko,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>eO(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>eO(t.remoteStore,i)),n._onlineComponents=t}async function gJ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){yt(Ko,"Using user provided OfflineComponentProvider");try{await yx(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===dt.FAILED_PRECONDITION||i.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;bg("Error using user provided cache. Falling back to memory cache: "+e),await yx(n,new Ng)}}else yt(Ko,"Using default OfflineComponentProvider"),await yx(n,new hJ(void 0));return n._offlineComponents}async function P5(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(yt(Ko,"Using user provided OnlineComponentProvider"),await oO(n,n._uninitializedComponentsProvider._online)):(yt(Ko,"Using default OnlineComponentProvider"),await oO(n,new Pg))),n._onlineComponents}function pJ(n){return P5(n).then(t=>t.syncEngine)}async function k5(n){const t=await P5(n),e=t.eventManager;return e.onListen=YZ.bind(null,t.syncEngine),e.onUnlisten=KZ.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=XZ.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=$Z.bind(null,t.syncEngine),e}function mJ(n,t,e={}){const r=new js;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new N5({next:m=>{d.Nu(),a.enqueueAndForget(()=>A5(s,g));const v=m.docs.has(o);!v&&m.fromCache?h.reject(new Ct(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?h.reject(new Ct(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new T5(Qm(o.path),d,{includeMetadataChanges:!0,qa:!0});return E5(s,g)}(await k5(n),n.asyncQueue,t,e,r)),r.promise}function yJ(n,t,e={}){const r=new js;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new N5({next:m=>{d.Nu(),a.enqueueAndForget(()=>A5(s,g)),m.fromCache&&l.source==="server"?h.reject(new Ct(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new T5(o,d,{includeMetadataChanges:!0,qa:!0});return E5(s,g)}(await k5(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ="firestore.googleapis.com",lO=!0;class uO{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vJ,this.ssl=lO}else this.host=t.host,this.ssl=t.ssl??lO;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Y6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Q6)throw new Ct(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}m$("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L5(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ct(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ct(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ct(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class LE{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ct(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uO(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o$;switch(r.type){case"firstParty":return new u$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=cO.get(e);r&&(yt("ComponentProvider","Removing Datastore"),cO.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ly(this.firestore,t,this._query)}}class Ln{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ln(this.firestore,t,this._key)}toJSON(){return{type:Ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(qg(e,Ln._jsonSchema))return new Ln(t,r||null,new It(Se.fromString(e.referencePath)))}}Ln._jsonSchemaVersion="firestore/documentReference/1.0",Ln._jsonSchema={type:kn("string",Ln._jsonSchemaVersion),referencePath:kn("string")};class Fo extends ly{constructor(t,e,r){super(t,e,Qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ln(this.firestore,null,new It(t))}withConverter(t){return new Fo(this.firestore,t,this._path)}}function Jg(n,t,...e){if(n=mn(n),M8("collection","path",t),n instanceof LE){const r=Se.fromString(t,...e);return tD(r),new Fo(n,null,r)}{if(!(n instanceof Ln||n instanceof Fo))throw new Ct(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Se.fromString(t,...e));return tD(r),new Fo(n.firestore,null,r)}}function rc(n,t,...e){if(n=mn(n),arguments.length===1&&(t=Qb.newId()),M8("doc","path",t),n instanceof LE){const r=Se.fromString(t,...e);return JR(r),new Ln(n,null,new It(r))}{if(!(n instanceof Ln||n instanceof Fo))throw new Ct(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Se.fromString(t,...e));return JR(r),new Ln(n.firestore,n instanceof Fo?n.converter:null,new It(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="AsyncQueue";class fO{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new m5(this,"async_queue_retry"),this._c=()=>{const r=O1();r&&yt(hO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=O1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=O1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new js;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!tc(t))throw t;yt(hO,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",dO(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=IE.createAndSchedule(this,t,e,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Dt(47125,{Pc:dO(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function dO(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Bl extends LE{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new fO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new fO(t),this._firestoreClient=void 0,await t}}}function _J(n,t,e){e||(e=lm);const r=Pl(n,"firestore");if(r.isInitialized(e)){const i=r.getImmediate({identifier:e}),s=r.getOptions(e);if(Wo(s,t))return i;throw new Ct(dt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Ct(dt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Q6)throw new Ct(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Fh(t.host)&&aP(t.host),r.initialize({options:t,instanceIdentifier:e})}function VE(n){if(n._terminated)throw new Ct(dt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xJ(n),n._firestoreClient}function xJ(n){var r,i,s;const t=n._freezeSettings(),e=function(o,l,h,d){return new X$(o,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,L5(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(i=t.localCache)!=null&&i._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new dJ(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ni(In.fromBase64String(t))}catch(e){throw new Ct(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ni(In.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(qg(t,Ni._jsonSchema))return Ni.fromBase64String(t.bytes)}}Ni._jsonSchemaVersion="firestore/bytes/1.0",Ni._jsonSchema={type:kn("string",Ni._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Ct(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ct(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ct(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(t){if(qg(t,zs._jsonSchema))return new zs(t.latitude,t.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:kn("string",zs._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(qg(t,Hs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Hs(t.vectorValues);throw new Ct(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hs._jsonSchemaVersion="firestore/vectorValue/1.0",Hs._jsonSchema={type:kn("string",Hs._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ=/^__.*__$/;class bJ{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new La(t,this.data,this.fieldMask,e,this.fieldTransforms):new zh(t,this.data,e,this.fieldTransforms)}}class V5{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new La(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function B5(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ac:n})}}class FE{constructor(t,e,r,i,s,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new FE({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Em(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(B5(this.Ac)&&wJ.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class EJ{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||sy(t)}Cc(t,e,r,i=!1){return new FE({Ac:t,methodName:e,Dc:r,path:cn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UE(n){const t=n._freezeSettings(),e=sy(n._databaseId);return new EJ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function F5(n,t,e,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,t,e,i);jE("Data must be an object, but it was:",a,r);const o=U5(r,a);let l,h;if(s.merge)l=new Qr(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=fw(t,g,e);if(!a.contains(m))throw new Ct(dt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);z5(d,m)||d.push(m)}l=new Qr(d),h=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,h=a.fieldTransforms;return new bJ(new Sr(o),l,h)}class hy extends BE{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hy}}function AJ(n,t,e,r){const i=n.Cc(1,t,e);jE("Data must be an object, but it was:",i,r);const s=[],a=Sr.empty();ec(r,(l,h)=>{const d=zE(t,l,e);h=mn(h);const g=i.yc(d);if(h instanceof hy)s.push(d);else{const m=fy(h,g);m!=null&&(s.push(d),a.set(d,m))}});const o=new Qr(s);return new V5(a,o,i.fieldTransforms)}function TJ(n,t,e,r,i,s){const a=n.Cc(1,t,e),o=[fw(t,r,e)],l=[i];if(s.length%2!=0)throw new Ct(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(fw(t,s[m])),l.push(s[m+1]);const h=[],d=Sr.empty();for(let m=o.length-1;m>=0;--m)if(!z5(h,o[m])){const v=o[m];let x=l[m];x=mn(x);const b=a.yc(v);if(x instanceof hy)h.push(v);else{const E=fy(x,b);E!=null&&(h.push(v),d.set(v,E))}}const g=new Qr(h);return new V5(d,g,a.fieldTransforms)}function fy(n,t){if(j5(n=mn(n)))return jE("Unsupported field value:",t,n),U5(n,t);if(n instanceof BE)return function(r,i){if(!B5(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=fy(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,t)}return function(r,i){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fQ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ke.fromDate(r);return{timestampValue:Ch(i.serializer,s)}}if(r instanceof ke){const s=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ch(i.serializer,s)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ni)return{bytesValue:O6(i.serializer,r._byteString)};if(r instanceof Ln){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hs)return function(a,o){return{mapValue:{fields:{[aE]:{stringValue:oE},[wh]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw o.Sc("VectorValues must only contain numeric values.");return hE(o.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Zb(r)}`)}(n,t)}function U5(n,t){const e={};return $8(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ec(n,(r,i)=>{const s=fy(i,t.mc(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function j5(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof zs||n instanceof Ni||n instanceof Ln||n instanceof BE||n instanceof Hs)}function jE(n,t,e){if(!j5(e)||!N8(e)){const r=Zb(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function fw(n,t,e){if((t=mn(t))instanceof uy)return t._internalPath;if(typeof t=="string")return zE(n,t);throw Em("Field path arguments must be of type string or ",n,!1,void 0,e)}const SJ=new RegExp("[~\\*/\\[\\]]");function zE(n,t,e){if(t.search(SJ)>=0)throw Em(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new uy(...t.split("."))._internalPath}catch{throw Em(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Em(n,t,e,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${t}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ct(dt.INVALID_ARGUMENT,o+n+l)}function z5(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(t,e,r,i,s){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(G5("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class CJ extends H5{data(){return super.data()}}function G5(n,t){return typeof t=="string"?zE(n,t):t instanceof uy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RJ{convertValue(t,e="none"){switch(qo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return en(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Na(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return ec(t,(i,s)=>{r[i]=this.convertValue(s,e)}),r}convertVectorValue(t){var r,i,s;const e=(s=(i=(r=t.fields)==null?void 0:r[wh].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>en(a.doubleValue));return new Hs(e)}convertGeoPoint(t){return new zs(en(t.latitude),en(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Xm(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Ig(t));default:return null}}convertTimestamp(t){const e=Ma(t);return new ke(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Se.fromString(t);kt(j6(r),9688,{name:t});const i=new Tl(r.get(1),r.get(3)),s=new It(r.popFirst(5));return i.isEqual(e)||An(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class Od{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ml extends H5{constructor(t,e,r,i,s,a){super(t,e,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new M1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(G5("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ml._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ml._jsonSchemaVersion="firestore/documentSnapshot/1.0",ml._jsonSchema={type:kn("string",ml._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class M1 extends ml{data(t={}){return super.data(t)}}class lh{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Od(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new M1(this._firestore,this._userDataWriter,r.key,r,new Od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ct(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new M1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Od(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new M1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Od(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return o.type!==0&&(h=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:DJ(o.type),doc:l,oldIndex:h,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=lh._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(e.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function DJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(n){n=Ws(n,Ln);const t=Ws(n.firestore,Bl);return mJ(VE(t),n._key).then(e=>MJ(t,n,e))}lh._jsonSchemaVersion="firestore/querySnapshot/1.0",lh._jsonSchema={type:kn("string",lh._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class Y5 extends RJ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ni(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ln(this.firestore,null,e)}}function dy(n){n=Ws(n,ly);const t=Ws(n.firestore,Bl),e=VE(t),r=new Y5(t);return IJ(n._query),yJ(e,n._query).then(i=>new lh(t,r,n,i))}function X5(n,t,e){n=Ws(n,Ln);const r=Ws(n.firestore,Bl),i=W5(n.converter,t);return py(r,[F5(UE(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,Rr.none())])}function gy(n,t,e,...r){n=Ws(n,Ln);const i=Ws(n.firestore,Bl),s=UE(i);let a;return a=typeof(t=mn(t))=="string"||t instanceof uy?TJ(s,"updateDoc",n._key,t,e,r):AJ(s,"updateDoc",n._key,t),py(i,[a.toMutation(n._key,Rr.exists(!0))])}function K5(n){return py(Ws(n.firestore,Bl),[new ey(n._key,Rr.none())])}function OJ(n,t){const e=Ws(n.firestore,Bl),r=rc(n),i=W5(n.converter,t);return py(e,[F5(UE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Rr.exists(!1))]).then(()=>r)}function py(n,t){return function(r,i){const s=new js;return r.asyncQueue.enqueueAndForget(async()=>QZ(await pJ(r),i,s)),s.promise}(VE(n),t)}function MJ(n,t,e){const r=e.docs.get(t._key),i=new Y5(n);return new ml(n,i,t._key,r,new Od(e.hasPendingWrites,e.fromCache),t.converter)}class NJ{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=VJ(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function PJ(n){return new NJ(n)}class kJ{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Pg.provider,this._offlineComponentProvider={build:e=>new M5(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class LJ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Pg.provider,this._offlineComponentProvider={build:e=>new fJ(e,t==null?void 0:t.cacheSizeBytes)}}}function VJ(n){return new kJ(n==null?void 0:n.forceOwnership)}function BJ(){return new LJ}(function(t,e=!0){(function(i){jh=i})(Uh),Gs(new ns("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Bl(new c$(r.getProvider("auth-internal")),new h$(a,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ct(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(h.options.projectId,d)}(a,i),a);return s={useFetchStreams:e,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Li(KR,$R,t),Li(KR,$R,"esm2020")})();const FJ={apiKey:"AIzaSyBc4CZnGGOTDvfPvEwaA0dXFOwbocdwCa8",authDomain:"knowurfood-d2b78.firebaseapp.com",projectId:"knowurfood-d2b78",storageBucket:"knowurfood-d2b78.firebasestorage.app",messagingSenderId:"643565214463",appId:"1:643565214463:web:8681aadcc4f49c6afdcaca",measurementId:"G-HB4L7NXGNE"},HE=gP(FJ);UY(HE);const GE=Kb(HE),Fi=_J(HE,{localCache:PJ({tabManager:BJ()})}),$5=n=>Math.floor(n/100)+1,UJ=async(n,t)=>{await OJ(Jg(Fi,"users",t,"meals"),n);const e=rc(Fi,"users",t),r=await q5(e);if(r.exists()){const s=(r.data().xp||0)+10,a=$5(s);await gy(e,{xp:s,level:a})}},vx=async n=>(await dy(Jg(Fi,"users",n,"meals"))).docs.map(e=>({id:e.id,...e.data()})),jJ=async(n,t)=>{const e=rc(Fi,"users",t,"meals",n.id),{id:r,...i}=n;await gy(e,i)},zJ=async(n,t)=>{const e=rc(Fi,"users",t,"meals",n);await K5(e)},HJ=async n=>{const t=Jg(Fi,"users",n,"meals"),r=(await dy(t)).docs.map(i=>K5(i.ref));await Promise.all(r)},gO=async(n,t)=>{const e=rc(Fi,"users",n);await gy(e,t)},GJ=async(n,t,e)=>{const r=rc(Fi,"users",n,"weightLogs",t);await X5(r,{date:t,weight:e})},Am=async n=>(await dy(Jg(Fi,"users",n,"weightLogs"))).docs.map(e=>e.data()),WJ=async({email:n,password:t,...e})=>{const i=(await zX(GE,n,t)).user,{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,height:g,goalDate:m,breakfastTime:v,lunchTime:x,dinnerTime:b,calorieGoal:E,age:T=25,gender:S="male"}=e,R=Math.max(1,Math.ceil((new Date(m)-new Date)/(1e3*60*60*24))),P=S==="male"?10*h+6.25*g-5*T+5:10*h+6.25*g-5*T-161,M=(d-h)*7700/R,H=Math.round(P+M),O=isNaN(E)?H:Number(E);return await X5(rc(Fi,"users",i.uid),{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,goalDate:m,height:g,breakfastTime:v,lunchTime:x,dinnerTime:b,xp:0,level:1,streak:1,lastLogin:new Date().toISOString().split("T")[0],badges:[],calorieGoal:O,age:T,gender:S}),{...i,...e,calorieGoal:O}},qJ=async()=>{await KX(GE)},pO=async()=>new Promise(n=>{const t=GE.onAuthStateChanged(async e=>{if(t(),!e)return n(null);const r=rc(Fi,"users",e.uid),i=await q5(r);if(!i.exists())return n(e);const s=i.data(),a=new Date().toISOString().split("T")[0],o=s.lastLogin||a,l=YJ(o,a);let h={};h.streak=l===1?(s.streak||0)+1:l>1?1:s.streak||1,h.lastLogin=a;const d=[5,15,30,60,100],g=s.badges||[];if(d.includes(h.streak)){const m=`${h.streak}-Day Streak`;g.includes(m)||(g.push(m),h.badges=g)}try{const v=(await dy(Jg(Fi,"users",e.uid,"weightLogs"))).docs.map(x=>x.data());if(v.length>0&&s.goalWeight&&s.goalDate&&!g.includes("🎯 Goal Achieved")){const x=v.reduce((T,S)=>T.date>S.date?T:S),b=s.goalWeight>=s.currentWeight&&x.weight>=s.goalWeight||s.goalWeight<s.currentWeight&&x.weight<=s.goalWeight,E=new Date(x.date)<=new Date(s.goalDate);if(b&&E){g.push("🎯 Goal Achieved");const T=(s.xp||0)+50,S=$5(T);h.badges=g,h.xp=T,h.level=S}}}catch(m){console.error("Error checking goal badge:",m)}(h.streak!==s.streak||h.lastLogin!==o||h.badges||h.xp)&&(await gy(r,h),Object.assign(s,h)),n({...e,...s})})}),YJ=(n,t)=>{const e=new Date(n),r=new Date(t);return Math.floor((r-e)/(1e3*60*60*24))};function XJ({user:n}){const[t,e]=st.useState(""),[r,i]=st.useState([]),[s,a]=st.useState(new Date().toISOString().split("T")[0]);st.useEffect(()=>{n!=null&&n.uid&&Am(n.uid).then(i)},[n]);const o=async()=>{if(!t||isNaN(t))return;await GJ(n.uid,s,parseFloat(t));const l=await Am(n.uid);i(l),e("")};return k.jsxs("div",{className:"card bg-dark p-3 mb-3 text-white shadow-sm",children:[k.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Tracker"}),k.jsxs("div",{className:"d-flex gap-2 mb-2",children:[k.jsx("input",{type:"date",className:"form-control",value:s,max:new Date().toISOString().split("T")[0],onChange:l=>a(l.target.value)}),k.jsx("input",{type:"number",placeholder:"Weight (kg)",className:"form-control",value:t,onChange:l=>e(l.target.value)}),k.jsx("button",{className:"btn btn-primary",onClick:o,children:"Save"})]})]})}const Q5=6048e5,KJ=864e5,t0=6e4,e0=36e5,$J=1e3,mO=Symbol.for("constructDateFrom");function yn(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&mO in n?n[mO](t):n instanceof Date?new n.constructor(t):new Date(t)}function Qt(n,t){return yn(t||n,n)}function my(n,t,e){const r=Qt(n,e==null?void 0:e.in);return isNaN(t)?yn((e==null?void 0:e.in)||n,NaN):(t&&r.setDate(r.getDate()+t),r)}function WE(n,t,e){const r=Qt(n,e==null?void 0:e.in);if(isNaN(t))return yn(n,NaN);if(!t)return r;const i=r.getDate(),s=yn(n,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function qE(n,t,e){return yn(n,+Qt(n)+t)}function QJ(n,t,e){return qE(n,t*e0)}let ZJ={};function Fl(){return ZJ}function Ys(n,t){var o,l,h,d;const e=Fl(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??0,i=Qt(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Mh(n,t){return Ys(n,{...t,weekStartsOn:1})}function Z5(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getFullYear(),i=yn(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Mh(i),a=yn(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Mh(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Tm(n){const t=Qt(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Ul(n,...t){const e=yn.bind(null,t.find(r=>typeof r=="object"));return t.map(e)}function dw(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function J5(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=dw(r),a=dw(i),o=+s-Tm(s),l=+a-Tm(a);return Math.round((o-l)/KJ)}function JJ(n,t){const e=Z5(n,t),r=yn(n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Mh(r)}function ttt(n,t,e){const r=Qt(n,e==null?void 0:e.in);return r.setTime(r.getTime()+t*t0),r}function ett(n,t,e){return WE(n,t*3,e)}function ntt(n,t,e){return qE(n,t*1e3)}function rtt(n,t,e){return my(n,t*7,e)}function itt(n,t,e){return WE(n,t*12,e)}function ig(n,t){const e=+Qt(n)-+Qt(t);return e<0?-1:e>0?1:e}function stt(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function tk(n){return!(!stt(n)&&typeof n!="number"||isNaN(+Qt(n)))}function att(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function ott(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t);return r.getFullYear()-i.getFullYear()}function ek(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=yO(r,i),a=Math.abs(J5(r,i));r.setDate(r.getDate()-s*a);const o=+(yO(r,i)===-s),l=s*(a-o);return l===0?0:l}function yO(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function n0(n){return t=>{const r=(n?Math[n]:Math.trunc)(t);return r===0?0:r}}function ctt(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=(+r-+i)/e0;return n0(e==null?void 0:e.roundingMethod)(s)}function YE(n,t){return+Qt(n)-+Qt(t)}function ltt(n,t,e){const r=YE(n,t)/t0;return n0(e==null?void 0:e.roundingMethod)(r)}function nk(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function rk(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function utt(n,t){const e=Qt(n,t==null?void 0:t.in);return+nk(e,t)==+rk(e,t)}function ik(n,t,e){const[r,i,s]=Ul(e==null?void 0:e.in,n,n,t),a=ig(i,s),o=Math.abs(att(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=ig(i,s)===-a;utt(r)&&o===1&&ig(r,s)===1&&(l=!1);const h=a*(o-+l);return h===0?0:h}function htt(n,t,e){const r=ik(n,t,e)/3;return n0(e==null?void 0:e.roundingMethod)(r)}function ftt(n,t,e){const r=YE(n,t)/1e3;return n0(e==null?void 0:e.roundingMethod)(r)}function dtt(n,t,e){const r=ek(n,t,e)/7;return n0(e==null?void 0:e.roundingMethod)(r)}function gtt(n,t,e){const[r,i]=Ul(e==null?void 0:e.in,n,t),s=ig(r,i),a=Math.abs(ott(r,i));r.setFullYear(1584),i.setFullYear(1584);const o=ig(r,i)===-s,l=s*(a-+o);return l===0?0:l}function ptt(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}function mtt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function ytt(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function sk(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function vtt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function _tt(n,t){var o,l;const e=Fl(),r=e.weekStartsOn??((l=(o=e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??0,i=Qt(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function xtt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setSeconds(59,999),e}function wtt(n,t){const e=Qt(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}function btt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMilliseconds(999),e}const Ett={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Att=(n,t,e)=>{let r;const i=Ett[n];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function _x(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const Ttt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Stt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ctt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Itt={date:_x({formats:Ttt,defaultWidth:"full"}),time:_x({formats:Stt,defaultWidth:"full"}),dateTime:_x({formats:Ctt,defaultWidth:"full"})},Rtt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Dtt=(n,t,e,r)=>Rtt[n];function fd(n){return(t,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=e!=null&&e.width?String(e.width):a;i=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=e!=null&&e.width?String(e.width):n.defaultWidth;i=n.values[o]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(t):t;return i[s]}}const Ott={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mtt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ntt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ptt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ktt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ltt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vtt=(n,t)=>{const e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Btt={ordinalNumber:Vtt,era:fd({values:Ott,defaultWidth:"wide"}),quarter:fd({values:Mtt,defaultWidth:"wide",argumentCallback:n=>n-1}),month:fd({values:Ntt,defaultWidth:"wide"}),day:fd({values:Ptt,defaultWidth:"wide"}),dayPeriod:fd({values:ktt,defaultWidth:"wide",formattingValues:Ltt,defaultFormattingWidth:"wide"})};function dd(n){return(t,e={})=>{const r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Utt(o,g=>g.test(a)):Ftt(o,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(l):l,h=e.valueCallback?e.valueCallback(h):h;const d=t.slice(a.length);return{value:h,rest:d}}}function Ftt(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Utt(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function jtt(n){return(t,e={})=>{const r=t.match(n.matchPattern);if(!r)return null;const i=r[0],s=t.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=e.valueCallback?e.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const ztt=/^(\d+)(th|st|nd|rd)?/i,Htt=/\d+/i,Gtt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wtt={any:[/^b/i,/^(a|c)/i]},qtt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ytt={any:[/1/i,/2/i,/3/i,/4/i]},Xtt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ktt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$tt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qtt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ztt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Jtt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tet={ordinalNumber:jtt({matchPattern:ztt,parsePattern:Htt,valueCallback:n=>parseInt(n,10)}),era:dd({matchPatterns:Gtt,defaultMatchWidth:"wide",parsePatterns:Wtt,defaultParseWidth:"any"}),quarter:dd({matchPatterns:qtt,defaultMatchWidth:"wide",parsePatterns:Ytt,defaultParseWidth:"any",valueCallback:n=>n+1}),month:dd({matchPatterns:Xtt,defaultMatchWidth:"wide",parsePatterns:Ktt,defaultParseWidth:"any"}),day:dd({matchPatterns:$tt,defaultMatchWidth:"wide",parsePatterns:Qtt,defaultParseWidth:"any"}),dayPeriod:dd({matchPatterns:Ztt,defaultMatchWidth:"any",parsePatterns:Jtt,defaultParseWidth:"any"})},ak={code:"en-US",formatDistance:Att,formatLong:Itt,formatRelative:Dtt,localize:Btt,match:tet,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eet(n,t){const e=Qt(n,t==null?void 0:t.in);return J5(e,sk(e))+1}function ok(n,t){const e=Qt(n,t==null?void 0:t.in),r=+Mh(e)-+JJ(e);return Math.round(r/Q5)+1}function XE(n,t){var d,g,m,v;const e=Qt(n,t==null?void 0:t.in),r=e.getFullYear(),i=Fl(),s=(t==null?void 0:t.firstWeekContainsDate)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,a=yn((t==null?void 0:t.in)||n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Ys(a,t),l=yn((t==null?void 0:t.in)||n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const h=Ys(l,t);return+e>=+o?r+1:+e>=+h?r:r-1}function net(n,t){var o,l,h,d;const e=Fl(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,i=XE(n,t),s=yn((t==null?void 0:t.in)||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Ys(s,t)}function ck(n,t){const e=Qt(n,t==null?void 0:t.in),r=+Ys(e,t)-+net(e,t);return Math.round(r/Q5)+1}function Ne(n,t){const e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}const yo={y(n,t){const e=n.getFullYear(),r=e>0?e:1-e;return Ne(t==="yy"?r%100:r,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):Ne(e+1,2)},d(n,t){return Ne(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return Ne(n.getHours()%12||12,t.length)},H(n,t){return Ne(n.getHours(),t.length)},m(n,t){return Ne(n.getMinutes(),t.length)},s(n,t){return Ne(n.getSeconds(),t.length)},S(n,t){const e=t.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,e-3));return Ne(i,t.length)}},Fu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vO={G:function(n,t,e){const r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return yo.y(n,t)},Y:function(n,t,e,r){const i=XE(n,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Ne(a,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):Ne(s,t.length)},R:function(n,t){const e=Z5(n);return Ne(e,t.length)},u:function(n,t){const e=n.getFullYear();return Ne(e,t.length)},Q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ne(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ne(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){const r=n.getMonth();switch(t){case"M":case"MM":return yo.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){const r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ne(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){const i=ck(n,r);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):Ne(i,t.length)},I:function(n,t,e){const r=ok(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):Ne(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):yo.d(n,t)},D:function(n,t,e){const r=eet(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):Ne(r,t.length)},E:function(n,t,e){const r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ne(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ne(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(n,t,e){const r=n.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Ne(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){const i=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,t,e){const r=n.getHours();let i;switch(r===12?i=Fu.noon:r===0?i=Fu.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,t,e){const r=n.getHours();let i;switch(r>=17?i=Fu.evening:r>=12?i=Fu.afternoon:r>=4?i=Fu.morning:i=Fu.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return yo.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):yo.H(n,t)},K:function(n,t,e){const r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):Ne(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):Ne(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):yo.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):yo.s(n,t)},S:function(n,t){return yo.S(n,t)},X:function(n,t,e){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return xO(r);case"XXXX":case"XX":return $c(r);case"XXXXX":case"XXX":default:return $c(r,":")}},x:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"x":return xO(r);case"xxxx":case"xx":return $c(r);case"xxxxx":case"xxx":default:return $c(r,":")}},O:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_O(r,":");case"OOOO":default:return"GMT"+$c(r,":")}},z:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_O(r,":");case"zzzz":default:return"GMT"+$c(r,":")}},t:function(n,t,e){const r=Math.trunc(+n/1e3);return Ne(r,t.length)},T:function(n,t,e){return Ne(+n,t.length)}};function _O(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?e+String(i):e+String(i)+t+Ne(s,2)}function xO(n,t){return n%60===0?(n>0?"-":"+")+Ne(Math.abs(n)/60,2):$c(n,t)}function $c(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Ne(Math.trunc(r/60),2),s=Ne(r%60,2);return e+i+t+s}const wO=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lk=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ret=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return wO(n,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",wO(r,t)).replace("{{time}}",lk(i,t))},gw={p:lk,P:ret},iet=/^D+$/,set=/^Y+$/,aet=["D","DD","YY","YYYY"];function uk(n){return iet.test(n)}function hk(n){return set.test(n)}function pw(n,t,e){const r=oet(n,t,e);if(console.warn(r),aet.includes(n))throw new RangeError(r)}function oet(n,t,e){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cet=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uet=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,het=/^'([^]*?)'?$/,fet=/''/g,det=/[a-zA-Z]/;function get(n,t,e){var d,g,m,v,x,b,E,T;const r=Fl(),i=(e==null?void 0:e.locale)??r.locale??ak,s=(e==null?void 0:e.firstWeekContainsDate)??((g=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,a=(e==null?void 0:e.weekStartsOn)??((b=(x=e==null?void 0:e.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((T=(E=r.locale)==null?void 0:E.options)==null?void 0:T.weekStartsOn)??0,o=Qt(n,e==null?void 0:e.in);if(!tk(o))throw new RangeError("Invalid time value");let l=t.match(uet).map(S=>{const R=S[0];if(R==="p"||R==="P"){const P=gw[R];return P(S,i.formatLong)}return S}).join("").match(cet).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const R=S[0];if(R==="'")return{isToken:!1,value:pet(S)};if(vO[R])return{isToken:!0,value:S};if(R.match(det))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(S=>{if(!S.isToken)return S.value;const R=S.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&hk(R)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&uk(R))&&pw(R,t,String(n));const P=vO[R[0]];return P(o,R,i.localize,h)}).join("")}function pet(n){const t=n.match(het);return t?t[1].replace(fet,"'"):n}function met(){return Object.assign({},Fl())}function yet(n,t){const e=Qt(n,t==null?void 0:t.in).getDay();return e===0?7:e}function vet(n,t){const e=_et(t)?new t(0):yn(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function _et(n){var t;return typeof n=="function"&&((t=n.prototype)==null?void 0:t.constructor)===n}const xet=10;class fk{constructor(){lt(this,"subPriority",0)}validate(t,e){return!0}}class wet extends fk{constructor(t,e,r,i,s){super(),this.value=t,this.validateValue=e,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,r){return this.setValue(t,e,this.value,r)}}class bet extends fk{constructor(e,r){super();lt(this,"priority",xet);lt(this,"subPriority",-1);this.context=e||(i=>yn(r,i))}set(e,r){return r.timestampIsSet?e:yn(e,vet(e,this.context))}}class Ee{run(t,e,r,i){const s=this.parse(t,e,r,i);return s?{setter:new wet(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,r){return!0}}class Eet extends Ee{constructor(){super(...arguments);lt(this,"priority",140);lt(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,r,i){return r.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}const Sn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Is={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Cn(n,t){return n&&{value:t(n.value),rest:n.rest}}function ln(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Rs(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const r=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,a=e[5]?parseInt(e[5],10):0;return{value:r*(i*e0+s*t0+a*$J),rest:t.slice(e[0].length)}}function dk(n){return ln(Sn.anyDigitsSigned,n)}function vn(n,t){switch(n){case 1:return ln(Sn.singleDigit,t);case 2:return ln(Sn.twoDigits,t);case 3:return ln(Sn.threeDigits,t);case 4:return ln(Sn.fourDigits,t);default:return ln(new RegExp("^\\d{1,"+n+"}"),t)}}function Sm(n,t){switch(n){case 1:return ln(Sn.singleDigitSigned,t);case 2:return ln(Sn.twoDigitsSigned,t);case 3:return ln(Sn.threeDigitsSigned,t);case 4:return ln(Sn.fourDigitsSigned,t);default:return ln(new RegExp("^-?\\d{1,"+n+"}"),t)}}function KE(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function gk(n,t){const e=t>0,r=e?t:1-t;let i;if(r<=50)i=n||100;else{const s=r+50,a=Math.trunc(s/100)*100,o=n>=s%100;i=n+a-(o?100:0)}return e?i:1-i}function pk(n){return n%400===0||n%4===0&&n%100!==0}class Aet extends Ee{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return Cn(vn(4,e),s);case"yo":return Cn(i.ordinalNumber(e,{unit:"year"}),s);default:return Cn(vn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i){const s=e.getFullYear();if(i.isTwoDigitYear){const o=gk(i.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const a=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Tet extends Ee{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Cn(vn(4,e),s);case"Yo":return Cn(i.ordinalNumber(e,{unit:"year"}),s);default:return Cn(vn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i,s){const a=XE(e,s);if(i.isTwoDigitYear){const l=gk(i.year,a);return e.setFullYear(l,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ys(e,s)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ys(e,s)}}class Cet extends Ee{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return Sm(r==="R"?4:r.length,e)}set(e,r,i){const s=yn(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Mh(s)}}class Iet extends Ee{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return Sm(r==="u"?4:r.length,e)}set(e,r,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Ret extends Ee{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"Q":case"QQ":return vn(r.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Det extends Ee{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"q":case"qq":return vn(r.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class Oet extends Ee{constructor(){super(...arguments);lt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);lt(this,"priority",110)}parse(e,r,i){const s=a=>a-1;switch(r){case"M":return Cn(ln(Sn.month,e),s);case"MM":return Cn(vn(2,e),s);case"Mo":return Cn(i.ordinalNumber(e,{unit:"month"}),s);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}class Met extends Ee{constructor(){super(...arguments);lt(this,"priority",110);lt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,i){const s=a=>a-1;switch(r){case"L":return Cn(ln(Sn.month,e),s);case"LL":return Cn(vn(2,e),s);case"Lo":return Cn(i.ordinalNumber(e,{unit:"month"}),s);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}function Net(n,t,e){const r=Qt(n,e==null?void 0:e.in),i=ck(r,e)-t;return r.setDate(r.getDate()-i*7),Qt(r,e==null?void 0:e.in)}class Pet extends Ee{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,i){switch(r){case"w":return ln(Sn.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return vn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i,s){return Ys(Net(e,i,s),s)}}function ket(n,t,e){const r=Qt(n,e==null?void 0:e.in),i=ok(r,e)-t;return r.setDate(r.getDate()-i*7),r}class Let extends Ee{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,i){switch(r){case"I":return ln(Sn.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return vn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i){return Mh(ket(e,i))}}const Vet=[31,28,31,30,31,30,31,31,30,31,30,31],Bet=[31,29,31,30,31,30,31,31,30,31,30,31];class Fet extends Ee{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subPriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"d":return ln(Sn.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return vn(r.length,e)}}validate(e,r){const i=e.getFullYear(),s=pk(i),a=e.getMonth();return s?r>=1&&r<=Bet[a]:r>=1&&r<=Vet[a]}set(e,r,i){return e.setDate(i),e.setHours(0,0,0,0),e}}class Uet extends Ee{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subpriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,i){switch(r){case"D":case"DD":return ln(Sn.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return vn(r.length,e)}}validate(e,r){const i=e.getFullYear();return pk(i)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}}function $E(n,t,e){var g,m,v,x;const r=Fl(),i=(e==null?void 0:e.weekStartsOn)??((m=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,s=Qt(n,e==null?void 0:e.in),a=s.getDay(),l=(t%7+7)%7,h=7-i,d=t<0||t>6?t-(a+h)%7:(l+h)%7-(a+h)%7;return my(s,d,e)}class jet extends Ee{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=$E(e,i,s),e.setHours(0,0,0,0),e}}class zet extends Ee{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Cn(vn(r.length,e),a);case"eo":return Cn(i.ordinalNumber(e,{unit:"day"}),a);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=$E(e,i,s),e.setHours(0,0,0,0),e}}class Het extends Ee{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Cn(vn(r.length,e),a);case"co":return Cn(i.ordinalNumber(e,{unit:"day"}),a);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=$E(e,i,s),e.setHours(0,0,0,0),e}}function Get(n,t,e){const r=Qt(n,e==null?void 0:e.in),i=yet(r,e),s=t-i;return my(r,s,e)}class Wet extends Ee{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,i){const s=a=>a===0?7:a;switch(r){case"i":case"ii":return vn(r.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return Cn(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Cn(i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Cn(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Cn(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,r){return r>=1&&r<=7}set(e,r,i){return e=Get(e,i),e.setHours(0,0,0,0),e}}class qet extends Ee{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(KE(i),0,0,0),e}}class Yet extends Ee{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(KE(i),0,0,0),e}}class Xet extends Ee{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(KE(i),0,0,0),e}}class Ket extends Ee{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,i){switch(r){case"h":return ln(Sn.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return vn(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,i){const s=e.getHours()>=12;return s&&i<12?e.setHours(i+12,0,0,0):!s&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}}class $et extends Ee{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,i){switch(r){case"H":return ln(Sn.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return vn(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,i){return e.setHours(i,0,0,0),e}}class Qet extends Ee{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,i){switch(r){case"K":return ln(Sn.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return vn(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}}class Zet extends Ee{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,i){switch(r){case"k":return ln(Sn.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return vn(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,i){const s=i<=24?i%24:i;return e.setHours(s,0,0,0),e}}class Jet extends Ee{constructor(){super(...arguments);lt(this,"priority",60);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"m":return ln(Sn.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return vn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setMinutes(i,0,0),e}}class tnt extends Ee{constructor(){super(...arguments);lt(this,"priority",50);lt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"s":return ln(Sn.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return vn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setSeconds(i,0),e}}class ent extends Ee{constructor(){super(...arguments);lt(this,"priority",30);lt(this,"incompatibleTokens",["t","T"])}parse(e,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Cn(vn(r.length,e),i)}set(e,r,i){return e.setMilliseconds(i),e}}class nnt extends Ee{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return Rs(Is.basicOptionalMinutes,e);case"XX":return Rs(Is.basic,e);case"XXXX":return Rs(Is.basicOptionalSeconds,e);case"XXXXX":return Rs(Is.extendedOptionalSeconds,e);case"XXX":default:return Rs(Is.extended,e)}}set(e,r,i){return r.timestampIsSet?e:yn(e,e.getTime()-Tm(e)-i)}}class rnt extends Ee{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return Rs(Is.basicOptionalMinutes,e);case"xx":return Rs(Is.basic,e);case"xxxx":return Rs(Is.basicOptionalSeconds,e);case"xxxxx":return Rs(Is.extendedOptionalSeconds,e);case"xxx":default:return Rs(Is.extended,e)}}set(e,r,i){return r.timestampIsSet?e:yn(e,e.getTime()-Tm(e)-i)}}class int extends Ee{constructor(){super(...arguments);lt(this,"priority",40);lt(this,"incompatibleTokens","*")}parse(e){return dk(e)}set(e,r,i){return[yn(e,i*1e3),{timestampIsSet:!0}]}}class snt extends Ee{constructor(){super(...arguments);lt(this,"priority",20);lt(this,"incompatibleTokens","*")}parse(e){return dk(e)}set(e,r,i){return[yn(e,i),{timestampIsSet:!0}]}}const ant={G:new Eet,y:new Aet,Y:new Tet,R:new Cet,u:new Iet,Q:new Ret,q:new Det,M:new Oet,L:new Met,w:new Pet,I:new Let,d:new Fet,D:new Uet,E:new jet,e:new zet,c:new Het,i:new Wet,a:new qet,b:new Yet,B:new Xet,h:new Ket,H:new $et,K:new Qet,k:new Zet,m:new Jet,s:new tnt,S:new ent,X:new nnt,x:new rnt,t:new int,T:new snt},ont=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cnt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lnt=/^'([^]*?)'?$/,unt=/''/g,hnt=/\S/,fnt=/[a-zA-Z]/;function dnt(n,t,e,r){var E,T,S,R,P,M,H,O;const i=()=>yn((r==null?void 0:r.in)||e,NaN),s=met(),a=(r==null?void 0:r.locale)??s.locale??ak,o=(r==null?void 0:r.firstWeekContainsDate)??((T=(E=r==null?void 0:r.locale)==null?void 0:E.options)==null?void 0:T.firstWeekContainsDate)??s.firstWeekContainsDate??((R=(S=s.locale)==null?void 0:S.options)==null?void 0:R.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((M=(P=r==null?void 0:r.locale)==null?void 0:P.options)==null?void 0:M.weekStartsOn)??s.weekStartsOn??((O=(H=s.locale)==null?void 0:H.options)==null?void 0:O.weekStartsOn)??0;if(!t)return n?i():Qt(e,r==null?void 0:r.in);const h={firstWeekContainsDate:o,weekStartsOn:l,locale:a},d=[new bet(r==null?void 0:r.in,e)],g=t.match(cnt).map(C=>{const N=C[0];if(N in gw){const B=gw[N];return B(C,a.formatLong)}return C}).join("").match(ont),m=[];for(let C of g){!(r!=null&&r.useAdditionalWeekYearTokens)&&hk(C)&&pw(C,t,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&uk(C)&&pw(C,t,n);const N=C[0],B=ant[N];if(B){const{incompatibleTokens:z}=B;if(Array.isArray(z)){const F=m.find(xt=>z.includes(xt.token)||xt.token===N);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${C}\` at the same time`)}else if(B.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);m.push({token:N,fullToken:C});const G=B.run(n,C,a.match,h);if(!G)return i();d.push(G.setter),n=G.rest}else{if(N.match(fnt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(C==="''"?C="'":N==="'"&&(C=gnt(C)),n.indexOf(C)===0)n=n.slice(C.length);else return i()}}if(n.length>0&&hnt.test(n))return i();const v=d.map(C=>C.priority).sort((C,N)=>N-C).filter((C,N,B)=>B.indexOf(C)===N).map(C=>d.filter(N=>N.priority===C).sort((N,B)=>B.subPriority-N.subPriority)).map(C=>C[0]);let x=Qt(e,r==null?void 0:r.in);if(isNaN(+x))return i();const b={};for(const C of v){if(!C.validate(x,h))return i();const N=C.set(x,b,h);Array.isArray(N)?(x=N[0],Object.assign(b,N[1])):x=N}return x}function gnt(n){return n.match(lnt)[1].replace(unt,"'")}function pnt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function mnt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setSeconds(0,0),e}function ynt(n,t){const e=Qt(n,t==null?void 0:t.in);return e.setMilliseconds(0),e}function vnt(n,t){const e=()=>yn(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,i=bnt(n);let s;if(i.date){const h=Ent(i.date,r);s=Ant(h.restDateString,h.year)}if(!s||isNaN(+s))return e();const a=+s;let o=0,l;if(i.time&&(o=Tnt(i.time),isNaN(o)))return e();if(i.timezone){if(l=Snt(i.timezone),isNaN(l))return e()}else{const h=new Date(a+o),d=Qt(0,t==null?void 0:t.in);return d.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),d.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),d}return Qt(a+o+l,t==null?void 0:t.in)}const Qp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_nt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,xnt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wnt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function bnt(n){const t={},e=n.split(Qp.dateTimeDelimiter);let r;if(e.length>2)return t;if(/:/.test(e[0])?r=e[0]:(t.date=e[0],r=e[1],Qp.timeZoneDelimiter.test(t.date)&&(t.date=n.split(Qp.timeZoneDelimiter)[0],r=n.substr(t.date.length,n.length))),r){const i=Qp.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function Ent(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=n.match(e);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function Ant(n,t){if(t===null)return new Date(NaN);const e=n.match(_nt);if(!e)return new Date(NaN);const r=!!e[4],i=gd(e[1]),s=gd(e[2])-1,a=gd(e[3]),o=gd(e[4]),l=gd(e[5])-1;if(r)return Ont(t,o,l)?Cnt(t,o,l):new Date(NaN);{const h=new Date(0);return!Rnt(t,s,a)||!Dnt(t,i)?new Date(NaN):(h.setUTCFullYear(t,s,Math.max(i,a)),h)}}function gd(n){return n?parseInt(n):1}function Tnt(n){const t=n.match(xnt);if(!t)return NaN;const e=xx(t[1]),r=xx(t[2]),i=xx(t[3]);return Mnt(e,r,i)?e*e0+r*t0+i*1e3:NaN}function xx(n){return n&&parseFloat(n.replace(",","."))||0}function Snt(n){if(n==="Z")return 0;const t=n.match(wnt);if(!t)return 0;const e=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return Nnt(r,i)?e*(r*e0+i*t0):NaN}function Cnt(n,t,e){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+e+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Int=[31,null,31,30,31,30,31,31,30,31,30,31];function mk(n){return n%400===0||n%4===0&&n%100!==0}function Rnt(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(Int[t]||(mk(n)?29:28))}function Dnt(n,t){return t>=1&&t<=(mk(n)?366:365)}function Ont(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Mnt(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function Nnt(n,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Pnt={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};eM._date.override({_id:"date-fns",formats:function(){return Pnt},parse:function(n,t){if(n===null||typeof n>"u")return null;const e=typeof n;return e==="number"||n instanceof Date?n=Qt(n):e==="string"&&(typeof t=="string"?n=dnt(n,t,new Date,this.options):n=vnt(n,this.options)),tk(n)?n.getTime():null},format:function(n,t){return get(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return qE(n,t);case"second":return ntt(n,t);case"minute":return ttt(n,t);case"hour":return QJ(n,t);case"day":return my(n,t);case"week":return rtt(n,t);case"month":return WE(n,t);case"quarter":return ett(n,t);case"year":return itt(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return YE(n,t);case"second":return ftt(n,t);case"minute":return ltt(n,t);case"hour":return ctt(n,t);case"day":return ek(n,t);case"week":return dtt(n,t);case"month":return ik(n,t);case"quarter":return htt(n,t);case"year":return gtt(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return ynt(n);case"minute":return mnt(n);case"hour":return pnt(n);case"day":return dw(n);case"week":return Ys(n);case"isoWeek":return Ys(n,{weekStartsOn:+e});case"month":return mtt(n);case"quarter":return ptt(n);case"year":return sk(n);default:return n}},endOf:function(n,t){switch(t){case"second":return btt(n);case"minute":return xtt(n);case"hour":return vtt(n);case"day":return nk(n);case"week":return _tt(n);case"month":return rk(n);case"quarter":return wtt(n);case"year":return ytt(n);default:return n}}});Ml.register(bd,h1,G1,fg,Zw,Qw);function knt({user:n}){const[t,e]=st.useState([]);if(st.useEffect(()=>{n!=null&&n.uid&&Am(n.uid).then(e)},[n]),!n.goalDate||!n.goalWeight)return null;const r=[...t].sort((a,o)=>new Date(a.date)-new Date(o.date)),i={labels:r.map(a=>a.date),datasets:[{label:"Weight (kg)",data:r.map(a=>a.weight),borderColor:"deepskyblue",backgroundColor:"rgba(0, 191, 255, 0.2)",tension:.2},{label:`Goal (${n.goalWeight}kg by ${n.goalDate})`,data:r.map(()=>n.goalWeight),borderDash:[5,5],borderColor:"lime",pointRadius:0,borderWidth:1}]},s={responsive:!0,scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"PP"},ticks:{color:"white"},grid:{color:"#444"}},y:{ticks:{color:"white"},grid:{color:"#444"},beginAtZero:!1}},plugins:{legend:{labels:{color:"white"}}}};return k.jsxs("div",{className:"card bg-dark text-white p-3 mb-2 shadow-sm",children:[k.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Progress"}),k.jsx(LF,{data:i,options:s})]})}const Lnt=n=>{const t=Math.floor(n/100)+1,e=n%100,r=100,i=e/r*100;return{level:t,currentXP:e,nextXP:r,percent:i}};function Vnt({meals:n,onEditMeal:t,onDeleteMeal:e,user:r}){const{level:i,currentXP:s,nextXP:a,percent:o}=Lnt(r.xp||0),l=new Date().toISOString().split("T")[0],h=P=>n.filter(M=>M.mealType===P&&M.date===l),d=P=>{const M=new Date(P),H=M.getDay(),O=M.getDate()-H+(H===0?-6:1);return new Date(M.setDate(O))},[g,m]=st.useState(d(new Date)),v=P=>{const M=new Date(g);M.setDate(g.getDate()+P),m(M)},x=P=>new Date(P).toLocaleDateString("en-GB"),b=(P,M)=>{if(!P||!M)return null;const H=M/100;return P/(H*H)},E=P=>P<18.5?"Underweight":P<25?"Normal":P<30?"Overweight":"Obese",T=b(r.currentWeight,r.height),S=E(T),R=Math.min(T/40*100,100);return k.jsxs("div",{className:"home-container",children:[k.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[k.jsxs("p",{className:"TitleName mb-1",children:["Hello ",r.firstName]}),k.jsxs("div",{className:"text-end",children:[k.jsxs("span",{className:"small fw-bold",style:{color:"deepskyblue"},children:["Level ",i]}),k.jsx("div",{className:"progress",style:{height:"6px",width:"150px",background:"#444"},children:k.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${o}%`,backgroundColor:"deepskyblue"},"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":a})})]})]}),k.jsxs("div",{className:"CalBarCharSection bg-dark",children:[k.jsxs("div",{className:"d-flex col-md-12 mb-2 justify-content-between",children:[k.jsx("p",{className:"SubTitleName mb-0",children:"Calories Consumed"}),k.jsxs("div",{className:"d-flex align-items-center DateRangePicker",children:[k.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>v(-7),children:"◀"}),x(g)," – ",x(new Date(g.getTime()+6*864e5)),k.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>v(7),children:"▶"})]})]}),k.jsx(xM,{meals:n,startOfWeek:g})]}),k.jsx(knt,{user:r}),T&&k.jsxs("div",{className:"card bg-dark text-white p-3 mb-3 shadow-sm text-center",children:[k.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Your BMI"}),k.jsxs("p",{className:"fs-5 mb-1",children:[T.toFixed(1)," – ",k.jsx("span",{className:"fw-bold text-info",children:S})]}),k.jsx("div",{className:"progress bmi-progress mb-1",style:{height:"15px"},children:k.jsx("div",{className:`progress-bar ${S.toLowerCase()}-bar`,role:"progressbar",style:{width:`${R}%`},"aria-valuenow":R,"aria-valuemin":0,"aria-valuemax":100})}),k.jsxs("div",{className:"d-flex justify-content-between text-muted small px-2",children:[k.jsx("span",{children:"Underweight"}),k.jsx("span",{children:"Normal"}),k.jsx("span",{children:"Overweight"}),k.jsx("span",{children:"Obese"})]})]}),k.jsxs("div",{className:"TodayChartsSection col-md-12",children:[k.jsxs("div",{className:"CalDonutSection bg-dark",children:[k.jsx("p",{className:"SubTitleName",children:"Calorie Intake"}),k.jsx(wM,{meals:n,selectedDate:l,goal:r.calorieGoal})]}),k.jsxs("div",{className:"NutriDonutSection bg-dark",children:[k.jsx("p",{className:"SubTitleName",children:"Nutrition Intake"}),k.jsx(bM,{meals:n,selectedDate:l})]})]}),k.jsx("div",{className:"FoodItemList bg-dark",children:(r.mealOrder||["Breakfast","Lunch","Dinner"]).map(P=>k.jsxs("div",{className:"mb-3",children:[k.jsx("p",{className:"SubTitleName",children:P}),h(P).map(M=>M.foodItems.map((H,O)=>k.jsx(RG,{name:H.name,nutrients:H.nutrients,kcal:M.kcal||null,onEdit:()=>t(M),onDelete:()=>e(M.id),unit:r.unit||"g"},`${P}-${M.id}-${O}`)))]},P))})]})}function Bnt({user:n,meals:t}){const[e,r]=st.useState(new Date().toISOString().split("T")[0]),[i,s]=st.useState(""),a=t.filter(x=>x.date===e),o=x=>{const b=new Date(e);b.setDate(b.getDate()+x),r(b.toISOString().split("T")[0])},l=(x,b)=>{const E=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),T=document.createElement("a");T.href=URL.createObjectURL(E),T.download=`meals-${b}.json`,T.click()},h=(x,b)=>{const E=[["Food Name","Calories","Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"]];x.forEach(P=>{P.foodItems.forEach(M=>{const H=[M.name,M.kcal||"",...["Protein","Fat","Carbohydrate","Sugar","Salt","Fibre"].map(O=>{const C=M.nutrients.find(N=>N.type===O);return(C==null?void 0:C.total)||""})];E.push(H)})});const T=E.map(P=>P.join(",")).join(`
`),S=new Blob([T],{type:"text/csv"}),R=document.createElement("a");R.href=URL.createObjectURL(S),R.download=`meals-${b}.csv`,R.click()},d=a.filter(x=>x.foodItems.some(b=>b.name.toLowerCase().includes(i.toLowerCase())||b.nutrients.some(E=>E.type.toLowerCase().includes(i.toLowerCase())))),g={Protein:50,Carbohydrate:260,Fat:70,Sugar:30,Fibre:30,Salt:6},v=(()=>{const x={};return a.forEach(b=>b.foodItems.forEach(E=>E.nutrients.forEach(T=>{const S=parseFloat(T.total)||0;x[T.type]=(x[T.type]||0)+S}))),x})();return k.jsxs("div",{className:"home-container",children:[k.jsx("h5",{className:"TitleName",children:"History"}),k.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[k.jsx("button",{className:"btn btn-outline-light btn-sm",onClick:()=>o(-1),children:"◀️"}),k.jsx("input",{type:"date",className:"form-control",value:e,max:new Date().toISOString().split("T")[0],onChange:x=>r(x.target.value),style:{maxWidth:"150px"}}),k.jsx("button",{className:"btn btn-outline-light btn-sm",onClick:()=>o(1),children:"▶️"})]}),k.jsxs("div",{className:"d-flex gap-2 mb-2",children:[k.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>l(a,e),children:"Export JSON"}),k.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>h(a,e),children:"Export CSV"})]}),k.jsx("input",{type:"text",className:"form-control mb-3",placeholder:"🔍 Search food or nutrient...",value:i,onChange:x=>s(x.target.value)}),k.jsxs("div",{className:"TodayChartsSection mb-3",children:[k.jsx("div",{className:"CalDonutSection",children:k.jsx(wM,{meals:a,user:n})}),k.jsx("div",{className:"NutriDonutSection",children:k.jsx(bM,{meals:a})})]}),k.jsxs("div",{className:"bg-dark p-3 rounded mb-3",children:[k.jsx("p",{className:"SubTitleName mb-2",children:"Daily Goal Progress"}),Object.entries(g).map(([x,b])=>{const E=v[x]||0,T=Math.min(E/b*100,100);return k.jsxs("div",{className:"mb-2",children:[k.jsxs("div",{className:"d-flex justify-content-between small text-white",children:[k.jsx("span",{children:x}),k.jsxs("span",{children:[E.toFixed(1)," / ",b,"g"]})]}),k.jsx("div",{className:"progress",style:{height:"8px"},children:k.jsx("div",{className:`progress-bar ${E>=b?"bg-success":"bg-warning"} progress-bar-striped progress-bar-animated`,style:{width:`${T}%`}})})]},x)})]}),d.length===0?k.jsx("p",{className:"text-white text-center",children:"No meals found for this date."}):d.map((x,b)=>k.jsxs("div",{className:"FoodItemList",children:[k.jsx("h6",{className:"SubTitleName",children:x.mealType}),x.foodItems.map((E,T)=>k.jsxs("div",{className:"card bg-dark text-white p-2 mb-2",children:[k.jsx("p",{className:"fw-bold mb-1",children:E.name}),k.jsxs("p",{className:"mb-1",children:["Calories: ",E.kcal," kcal"]}),E.nutrients.map((S,R)=>k.jsxs("p",{className:"mb-0",children:[S.type,": ",S.total," ",S.unit||"g"]},R))]},T))]},b))]})}function Fnt(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function Unt(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var jnt=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),znt=function(n){jnt(t,n);function t(e,r){var i=this.constructor,s=n.call(this,e,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),Fnt(s,i.prototype),Unt(s),s}return t}(Error),Hnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jr=function(n){Hnt(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(znt),Gnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xi=function(n){Gnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(Jr),Wnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zt=function(n){Wnt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(Jr),qnt=function(){function n(t){if(this.binarizer=t,t===null)throw new zt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var s=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(s))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Ynt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ar=function(n){Ynt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Jr),Xnt=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),qe=function(){function n(){}return n.arraycopy=function(t,e,r,i,s){for(;s--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),Knt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),QE=function(n){Knt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(Jr),$nt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bO=function(n){$nt(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(QE),Qnt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qn=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var s=e;s<r;s++)t[s]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new zt("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new bO(e);if(r>t)throw new bO(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var s=Qnt(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=31*i+o}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,s=new Int32Array(i);return qe.arraycopy(t,e,s,0,i),s},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,s=t.length-1;i<=s;){var a=s+i>>1,o=r(e,t[a]);if(o>0)i=a+1;else if(o<0)s=a-1;else return a}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),se=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),or=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);qe.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=r[i]}var o=i*32+se.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=~r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=~r[i]}var o=i*32+se.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new zt;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),s=this.bits,a=r;a<=i;a++){var o=a>r?0:t&31,l=a<i?31:e&31,h=(2<<l)-(1<<o);s[a]|=h}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new zt;if(e===t)return!0;e--;for(var i=Math.floor(t/32),s=Math.floor(e/32),a=this.bits,o=i;o<=s;o++){var l=o>i?0:t&31,h=o<s?31:e&31,d=(2<<h)-(1<<l)&4294967295;if((a[o]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new zt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new zt("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var s=0;s<i;s++){for(var a=0,o=0;o<8;o++)this.get(t)&&(a|=1<<7-o),t++;e[r+s]=a}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,s=0;s<r;s++){var a=i[s];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,t[e-s]=a}if(this.size!==r*32){for(var o=r*32-this.size,l=t[0]>>>o,s=1;s<r;s++){var h=t[s];l|=h<<32-o,t[s-1]=l,l=h>>>o}t[r-1]=l}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&qn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+qn.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),mw;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(mw||(mw={}));const rn=mw;var Znt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),At=function(n){Znt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Jr),Jnt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Oe;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Oe||(Oe={}));var Wn=function(){function n(t,e,r){for(var i,s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=a,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var l=this.values,h=0,d=l.length;h!==d;h++){var g=l[h];n.VALUES_TO_ECI.set(g,this)}try{for(var m=Jnt(a),v=m.next();!v.done;v=m.next()){var x=v.value;n.NAME_TO_ECI.set(x,this)}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new At("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new At("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new At("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Oe.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Oe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Oe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Oe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Oe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Oe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Oe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Oe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Oe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Oe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Oe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Oe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Oe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Oe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Oe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Oe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Oe.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Oe.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Oe.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Oe.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Oe.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Oe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Oe.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Oe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Oe.Big5,28,"Big5"),n.GB18030=new n(Oe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Oe.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),trt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),N1=function(n){trt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(Jr),Vi=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof Wn?t:Wn.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",s=0,a=t.length;s<a;s++){var o=t[s].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Wn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new N1("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(Wn.UTF8)||t.equals(Wn.ISO8859_1)||t.equals(Wn.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],s=0;s<r.length;s++)i.push(r[s].charCodeAt(0));return new Uint8Array(i)},n}(),ge=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return Vi.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(rn.CHARACTER_SET)!==void 0)return e.get(rn.CHARACTER_SET).toString();for(var r=t.length,i=!0,s=!0,a=!0,o=0,l=0,h=0,d=0,g=0,m=0,v=0,x=0,b=0,E=0,T=0,S=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,R=0;R<r&&(i||s||a);R++){var P=t[R]&255;a&&(o>0?(P&128)===0?a=!1:o--:(P&128)!==0&&((P&64)===0?a=!1:(o++,(P&32)===0?l++:(o++,(P&16)===0?h++:(o++,(P&8)===0?d++:a=!1))))),i&&(P>127&&P<160?i=!1:P>159&&(P<192||P===215||P===247)&&T++),s&&(g>0?P<64||P===127||P>252?s=!1:g--:P===128||P===160||P>239?s=!1:P>160&&P<224?(m++,x=0,v++,v>b&&(b=v)):P>127?(g++,v=0,x++,x>E&&(E=x)):(v=0,x=0))}return a&&o>0&&(a=!1),s&&g>0&&(s=!1),a&&(S||l+h+d>0)?n.UTF8:s&&(n.ASSUME_SHIFT_JIS||b>=3||E>=3)?n.SHIFT_JIS:i&&s?b===2&&m===2||T*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:s?n.SHIFT_JIS:a?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function s(o,l,h,d,g,m){if(o==="%%")return"%";if(e[++i]!==void 0){o=d?parseInt(d.substr(1)):void 0;var v=g?parseInt(g.substr(1)):void 0,x;switch(m){case"s":x=e[i];break;case"c":x=e[i][0];break;case"f":x=parseFloat(e[i]).toFixed(o);break;case"p":x=parseFloat(e[i]).toPrecision(o);break;case"e":x=parseFloat(e[i]).toExponential(o);break;case"x":x=parseInt(e[i]).toString(v||16);break;case"d":x=parseFloat(parseInt(e[i],v||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(v);for(var b=parseInt(h),E=h&&h[0]+""=="0"?"0":" ";x.length<b;)x=l!==void 0?x+E:E+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,s)},n.getBytes=function(t,e){return Vi.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=Wn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Wn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Wn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),ee=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ge.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),Xs=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new zt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),s=0;s<e;s++)for(var a=t[s],o=0;o<r;o++)a[o]&&i.set(o,s);return i},n.parseFromString=function(t,e,r){if(t===null)throw new zt("stringRepresentation cannot be null");for(var i=new Array(t.length),s=0,a=0,o=-1,l=0,h=0;h<t.length;)if(t.charAt(h)===`
`||t.charAt(h)==="\r"){if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new zt("row lengths do not match");a=s,l++}h++}else if(t.substring(h,h+e.length)===e)h+=e.length,i[s]=!0,s++;else if(t.substring(h,h+r.length)===r)h+=r.length,i[s]=!1,s++;else throw new zt("illegal character encountered: "+t.substring(h));if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new zt("row lengths do not match");l++}for(var d=new n(o,l),g=0;g<s;g++)i[g]&&d.set(Math.floor(g%o),Math.floor(g/o));return d},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new zt("input matrix dimensions do not match");for(var e=new or(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,s=0,a=this.height;s<a;s++)for(var o=s*r,l=t.getRow(s,e).getBitArray(),h=0;h<r;h++)i[o+h]^=l[h]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new zt("Left and top must be nonnegative");if(i<1||r<1)throw new zt("Height and width must be at least 1");var s=t+r,a=e+i;if(a>this.height||s>this.width)throw new zt("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,h=e;h<a;h++)for(var d=h*o,g=t;g<s;g++)l[d+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new or(this.width):e.clear();for(var r=this.rowSize,i=this.bits,s=t*r,a=0;a<r;a++)e.setBulk(a*32,i[s+a]);return e},n.prototype.setRow=function(t,e){qe.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new or(t),i=new or(t),s=0,a=Math.floor((e+1)/2);s<a;s++)r=this.getRow(s,r),i=this.getRow(e-1-s,i),r.reverse(),i.reverse(),this.setRow(s,i),this.setRow(e-1-s,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,s=t,a=e,o=-1,l=-1,h=0;h<e;h++)for(var d=0;d<r;d++){var g=i[h*r+d];if(g!==0){if(h<a&&(a=h),h>l&&(l=h),d*32<s){for(var m=0;(g<<31-m&4294967295)===0;)m++;d*32+m<s&&(s=d*32+m)}if(d*32+31>o){for(var m=31;!(g>>>m);)m--;d*32+m>o&&(o=d*32+m)}}}return o<s||l<a?null:Int32Array.from([s,a,o-s+1,l-a+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,s=r%t*32,a=e[r],o=0;(a<<31-o&4294967295)===0;)o++;return s+=o,Int32Array.from([s,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),s=Math.floor(r%t)*32,a=e[r],o=31;!(a>>>o);)o--;return s+=o,Int32Array.from([s,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&qn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+qn.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new ee,s=0,a=this.height;s<a;s++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,s)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),ert=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ut=function(n){ert(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Jr),nrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rrt=function(n){nrt(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new or(s):r.clear(),this.initArrays(s);for(var a=i.getRow(e,this.luminances),o=this.buckets,l=0;l<s;l++)o[(a[l]&255)>>t.LUMINANCE_SHIFT]++;var h=t.estimateBlackPoint(o);if(s<3)for(var l=0;l<s;l++)(a[l]&255)<h&&r.set(l);else for(var d=a[0]&255,g=a[1]&255,l=1;l<s-1;l++){var m=a[l+1]&255;(g*4-d-m)/2<h&&r.set(l),d=g,g=m}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),s=new Xs(r,i);this.initArrays(r);for(var a=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),h=e.getRow(l,this.luminances),d=Math.floor(r*4/5),g=Math.floor(r/5);g<d;g++){var m=h[g]&255;a[m>>t.LUMINANCE_SHIFT]++}for(var v=t.estimateBlackPoint(a),x=e.getMatrix(),o=0;o<i;o++)for(var b=o*r,g=0;g<r;g++){var m=x[b+g]&255;m<v&&s.set(g,o)}return s},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,s=0,a=0,o=0;o<r;o++)e[o]>a&&(s=o,a=e[o]),e[o]>i&&(i=e[o]);for(var l=0,h=0,o=0;o<r;o++){var d=o-s,g=e[o]*d*d;g>h&&(l=o,h=g)}if(s>l){var m=s;s=l,l=m}if(l-s<=r/16)throw new ut;for(var v=l-1,x=-1,o=l-1;o>s;o--){var b=o-s,g=b*b*(l-o)*(i-e[o]);g>x&&(v=o,x=g)}return v<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(Xnt),irt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),srt=function(n){irt(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var s=e.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&a++;var o=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&o++;var l=t.calculateBlackPoints(s,a,o,r,i),h=new Xs(r,i);t.calculateThresholdForBlock(s,a,o,r,i,l,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,s,a,o,l){for(var h=a-t.BLOCK_SIZE,d=s-t.BLOCK_SIZE,g=0;g<i;g++){var m=g<<t.BLOCK_SIZE_POWER;m>h&&(m=h);for(var v=t.cap(g,2,i-3),x=0;x<r;x++){var b=x<<t.BLOCK_SIZE_POWER;b>d&&(b=d);for(var E=t.cap(x,2,r-3),T=0,S=-2;S<=2;S++){var R=o[v+S];T+=R[E-2]+R[E-1]+R[E]+R[E+1]+R[E+2]}var P=T/25;t.thresholdBlock(e,b,m,P,s,l)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,s,a,o){for(var l=0,h=i*a+r;l<t.BLOCK_SIZE;l++,h+=a)for(var d=0;d<t.BLOCK_SIZE;d++)(e[h+d]&255)<=s&&o.set(r+d,i+l)},t.calculateBlackPoints=function(e,r,i,s,a){for(var o=a-t.BLOCK_SIZE,l=s-t.BLOCK_SIZE,h=new Array(i),d=0;d<i;d++){h[d]=new Int32Array(r);var g=d<<t.BLOCK_SIZE_POWER;g>o&&(g=o);for(var m=0;m<r;m++){var v=m<<t.BLOCK_SIZE_POWER;v>l&&(v=l);for(var x=0,b=255,E=0,T=0,S=g*s+v;T<t.BLOCK_SIZE;T++,S+=s){for(var R=0;R<t.BLOCK_SIZE;R++){var P=e[S+R]&255;x+=P,P<b&&(b=P),P>E&&(E=P)}if(E-b>t.MIN_DYNAMIC_RANGE)for(T++,S+=s;T<t.BLOCK_SIZE;T++,S+=s)for(var R=0;R<t.BLOCK_SIZE;R++)x+=e[S+R]&255}var M=x>>t.BLOCK_SIZE_POWER*2;if(E-b<=t.MIN_DYNAMIC_RANGE&&(M=b/2,d>0&&m>0)){var H=(h[d-1][m]+2*h[d][m-1]+h[d-1][m-1])/4;b<H&&(M=H)}h[d][m]=M}}return h},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(rrt),yy=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new N1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new N1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new N1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new ee,r=0;r<this.height;r++){for(var i=this.getRow(r,t),s=0;s<this.width;s++){var a=i[s]&255,o=void 0;a<64?o="#":a<128?o="+":a<192?o=".":o=" ",e.append(o)}e.append(`
`)}return e.toString()},n}(),art=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZE=function(n){art(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),s=this.getWidth(),a=0;a<s;a++)i[a]=255-(i[a]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),s=0;s<r;s++)i[s]=255-(e[s]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,s){return new t(this.delegate.crop(e,r,i,s))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(yy),ort=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),crt=function(n){ort(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,s){s===void 0&&(s=!1);var a=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!s)for(var o=0,l=0,h=e.length;o<h;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],v=e[o+1],x=e[o+2];d=306*m+601*v+117*x+512>>10}a[l]=d}else for(var o=0,l=0,b=e.length;o<b;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],v=e[o+1],x=e[o+2];d=306*m+601*v+117*x+512>>10}a[l]=255-d}return a},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new zt("Requested row is outside the image: "+e);var i=this.getWidth(),s=e*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return n.prototype.crop.call(this,e,r,i,s),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),s=e*t.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(s))*a+Math.abs(Math.sin(s))*o),h=Math.ceil(Math.abs(Math.sin(s))*a+Math.abs(Math.cos(s))*o);return r.width=l,r.height=h,i.translate(l/2,h/2),i.rotate(s),i.drawImage(this.canvas,a/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new ZE(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(yy),lrt=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Lr=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(d){try{h(r.next(d))}catch(g){a(g)}}function l(d){try{h(r.throw(d))}catch(g){a(g)}}function h(d){d.done?s(d.value):i(d.value).then(o,l)}h((r=r.apply(n,t||[])).next())})},Vr=function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(d){return l([h,d])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){e.label=h[1];break}if(h[0]===6&&e.label<s[1]){e.label=s[1],s=h;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(h);break}s[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},urt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qh=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Lr(this,void 0,void 0,function(){var t,e,r,i,s,a,o,l,h,d,g,m;return Vr(this,function(v){switch(v.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=v.sent(),e=[];try{for(r=urt(t),i=r.next();!i.done;i=r.next())s=i.value,a=s.kind==="video"?"videoinput":s.kind,a==="videoinput"&&(o=s.deviceId||s.id,l=s.label||"Video device "+(e.length+1),h=s.groupId,d={deviceId:o,label:l,kind:a,groupId:h},e.push(d))}catch(x){g={error:x}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(g)throw g.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return Lr(this,void 0,void 0,function(){var t;return Vr(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new lrt(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return Lr(this,void 0,void 0,function(){var e;return Vr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return Lr(this,void 0,void 0,function(){return Vr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return Lr(this,void 0,void 0,function(){var r,i;return Vr(this,function(s){switch(s.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,s.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return Lr(this,void 0,void 0,function(){var r;return Vr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return Lr(this,void 0,void 0,function(){var r,i;return Vr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=s.sent(),[4,this.decodeOnce(r)];case 2:return i=s.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return Lr(this,void 0,void 0,function(){return Vr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return Lr(this,void 0,void 0,function(){var i,s;return Vr(this,function(a){switch(a.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,e,r)];case 1:return[2,a.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return Lr(this,void 0,void 0,function(){var i;return Vr(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,s.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return Lr(this,void 0,void 0,function(){var i;return Vr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,s.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return Lr(this,void 0,void 0,function(){var r;return Vr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return Lr(this,void 0,void 0,function(){return Vr(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new Xi("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new Xi("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new Xi("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new Xi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new Xi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new Xi("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new Xi("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new Xi("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new Xi("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new Xi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return Lr(this,void 0,void 0,function(){return Vr(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return Lr(this,void 0,void 0,function(){return Vr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var s=function(a,o){if(i._stopAsyncDecode){o(new ut("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(t);a(l)}catch(m){var h=e&&m instanceof ut,d=m instanceof ar||m instanceof At,g=d&&r;if(h||g)return setTimeout(s,i._timeBetweenDecodingAttempts,a,o);o(m)}};return new Promise(function(a,o){return s(a,o)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var s=r.decode(t);e(s,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){e(null,l);var a=l instanceof ar||l instanceof At,o=l instanceof ut;(a||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new crt(r,e),s=new srt(i);return new qnt(s)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),Or=function(){function n(t,e,r,i,s,a){r===void 0&&(r=e==null?0:8*e.length),a===void 0&&(a=qe.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=s,this.timestamp=a,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=s,this.resultMetadata=null,a==null?this.timestamp=qe.currentTimeMillis():this.timestamp=a}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);qe.arraycopy(e,0,r,0,e.length),qe.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),yw;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yw||(yw={}));const Ft=yw;var vw;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(vw||(vw={}));const yr=vw;var vy=function(){function n(t,e,r,i,s,a){s===void 0&&(s=-1),a===void 0&&(a=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=a,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Md=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new zt;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),Uo=function(){function n(t,e){if(e.length===0)throw new zt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),qe.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,s=e.length;i!==s;i++){var a=e[i];r=Md.addOrSubtract(r,a)}return r}r=e[0];for(var o=e.length,l=this.field,i=1;i<o;i++)r=Md.addOrSubtract(l.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new zt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;qe.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=Md.addOrSubtract(e[o-a],r[o]);return new n(this.field,s)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new zt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=this.field,l=0;l<r;l++)for(var h=e[l],d=0;d<s;d++)a[l+d]=Md.addOrSubtract(a[l+d],o.multiply(h,i[d]));return new n(o,a)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),s=this.coefficients,a=0;a<e;a++)i[a]=r.multiply(s[a],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new zt;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,s=new Int32Array(i+t),a=this.field,o=0;o<i;o++)s[o]=a.multiply(r[o],e);return new n(a,s)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new zt("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new zt("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,s=t.getCoefficient(t.getDegree()),a=e.inverse(s);i.getDegree()>=t.getDegree()&&!i.isZero();){var o=i.getDegree()-t.getDegree(),l=e.multiply(i.getCoefficient(i.getDegree()),a),h=t.multiplyByMonomial(o,l),d=e.buildMonomial(o,l);r=r.addOrSubtract(d),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),hrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yk=function(n){hrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(Jr),frt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yr=function(n){frt(t,n);function t(e,r,i){var s=n.call(this)||this;s.primitive=e,s.size=r,s.generatorBase=i;for(var a=new Int32Array(r),o=1,l=0;l<r;l++)a[l]=o,o*=2,o>=r&&(o^=e,o&=r-1);s.expTable=a;for(var h=new Int32Array(r),l=0;l<r-1;l++)h[a[l]]=l;return s.logTable=h,s.zero=new Uo(s,Int32Array.from([0])),s.one=new Uo(s,Int32Array.from([1])),s}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new zt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new Uo(this,i)},t.prototype.inverse=function(e){if(e===0)throw new yk;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+se.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(Md),drt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zp=function(n){drt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(Jr),grt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),r0=function(n){grt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(Jr),_y=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new Uo(r,t),s=new Int32Array(e),a=!0,o=0;o<e;o++){var l=i.evaluateAt(r.exp(o+r.getGeneratorBase()));s[s.length-1-o]=l,l!==0&&(a=!1)}if(!a)for(var h=new Uo(r,s),d=this.runEuclideanAlgorithm(r.buildMonomial(e,1),h,e),g=d[0],m=d[1],v=this.findErrorLocations(g),x=this.findErrorMagnitudes(m,v),o=0;o<v.length;o++){var b=t.length-1-r.log(v[o]);if(b<0)throw new Zp("Bad error location");t[b]=Yr.addOrSubtract(t[b],x[o])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=this.field,a=t,o=e,l=s.getZero(),h=s.getOne();o.getDegree()>=(r/2|0);){var d=a,g=l;if(a=o,l=h,a.isZero())throw new Zp("r_{i-1} was zero");o=d;for(var m=s.getZero(),v=a.getCoefficient(a.getDegree()),x=s.inverse(v);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),E=s.multiply(o.getCoefficient(o.getDegree()),x);m=m.addOrSubtract(s.buildMonomial(b,E)),o=o.addOrSubtract(a.multiplyByMonomial(b,E))}if(h=m.multiply(l).addOrSubtract(g),o.getDegree()>=a.getDegree())throw new r0("Division algorithm failed to reduce polynomial?")}var T=h.getCoefficient(0);if(T===0)throw new Zp("sigmaTilde(0) was zero");var S=s.inverse(T),R=h.multiplyScalar(S),P=o.multiplyScalar(S);return[R,P]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,s=this.field,a=1;a<s.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=s.inverse(a),i++);if(i!==e)throw new Zp("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),s=this.field,a=0;a<r;a++){for(var o=s.inverse(e[a]),l=1,h=0;h<r;h++)if(a!==h){var d=s.multiply(e[h],o),g=(d&1)===0?d|1:d&-2;l=s.multiply(l,g)}i[a]=s.multiply(t.evaluateAt(o),s.inverse(l)),s.getGeneratorBase()!==0&&(i[a]=s.multiply(i[a],o))}return i},n}(),dr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(dr||(dr={}));var EO=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),s=n.convertBoolArrayToByteArray(i),a=n.getEncodedData(i),o=new vy(s,a,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=dr.UPPER,i=dr.UPPER,s="",a=0;a<e;)if(i===dr.BINARY){if(e-a<5)break;var o=n.readCode(t,a,5);if(a+=5,o===0){if(e-a<11)break;o=n.readCode(t,a,11)+31,a+=11}for(var l=0;l<o;l++){if(e-a<8){a=e;break}var h=n.readCode(t,a,8);s+=ge.castAsNonUtf8Char(h),a+=8}i=r}else{var d=i===dr.DIGIT?4:5;if(e-a<d)break;var h=n.readCode(t,a,d);a+=d;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(s+=g,i=r)}return s},n.getTable=function(t){switch(t){case"L":return dr.LOWER;case"P":return dr.PUNCT;case"M":return dr.MIXED;case"D":return dr.DIGIT;case"B":return dr.BINARY;case"U":default:return dr.UPPER}},n.getCharacter=function(t,e){switch(t){case dr.UPPER:return n.UPPER_TABLE[e];case dr.LOWER:return n.LOWER_TABLE[e];case dr.MIXED:return n.MIXED_TABLE[e];case dr.PUNCT:return n.PUNCT_TABLE[e];case dr.DIGIT:return n.DIGIT_TABLE[e];default:throw new r0("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=Yr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=Yr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=Yr.AZTEC_DATA_10):(r=12,e=Yr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=t.length/r;if(s<i)throw new At;for(var a=t.length%r,o=new Int32Array(s),l=0;l<s;l++,a+=r)o[l]=n.readCode(t,a,r);try{var h=new _y(e);h.decode(o,s-i)}catch(E){throw new At(E)}for(var d=(1<<r)-1,g=0,l=0;l<i;l++){var m=o[l];if(m===0||m===d)throw new At;(m===1||m===d-1)&&g++}for(var v=new Array(i*r-g),x=0,l=0;l<i;l++){var m=o[l];if(m===1||m===d-1)v.fill(m>1,x,x+r-1),x+=r-1;else for(var b=r-1;b>=0;--b)v[x++]=(m&1<<b)!==0}return v},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,s=new Int32Array(i),a=new Array(this.totalBitsInLayer(r,e));if(e)for(var o=0;o<s.length;o++)s[o]=o;else for(var l=i+1+2*se.truncDivision(se.truncDivision(i,2)-1,15),h=i/2,d=se.truncDivision(l,2),o=0;o<h;o++){var g=o+se.truncDivision(o,15);s[h-o-1]=d-g-1,s[h+o]=d+g+1}for(var o=0,m=0;o<r;o++){for(var v=(r-o)*4+(e?9:12),x=o*2,b=i-1-x,E=0;E<v;E++)for(var T=E*2,S=0;S<2;S++)a[m+T+S]=t.get(s[x+S],s[x+E]),a[m+2*v+T+S]=t.get(s[x+E],s[b-S]),a[m+4*v+T+S]=t.get(s[b-S],s[b-E]),a[m+6*v+T+S]=t.get(s[b-E],s[x+S]);m+=v*8}return a},n.readCode=function(t,e,r){for(var i=0,s=e;s<e+r;s++)i<<=1,t[s]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),_e=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var s=t-r,a=e-i;return Math.sqrt(s*s+a*a)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var s=t[r];e+=s}return e},n}(),_w=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Nt=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*_w.floatToIntBits(this.x)+_w.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),s,a,o;if(r>=e&&r>=i?(a=t[0],s=t[1],o=t[2]):i>=r&&i>=e?(a=t[1],s=t[0],o=t[2]):(a=t[2],s=t[0],o=t[1]),this.crossProductZ(s,a,o)<0){var l=s;s=o,o=l}t[0]=s,t[1]=a,t[2]=o},n.distance=function(t,e){return _e.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,s=e.y;return(r.x-i)*(t.y-s)-(r.y-s)*(t.x-i)},n}(),JE=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),prt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mrt=function(n){prt(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r)||this;return o.compact=i,o.nbDatablocks=s,o.nbLayers=a,o}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(JE),xw=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var s=e/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ut}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,s=!1,a=!0,o=!1,l=!1,h=!1,d=!1,g=!1,m=this.width,v=this.height;a;){a=!1;for(var x=!0;(x||!l)&&e<m;)x=this.containsBlackPoint(r,i,e,!1),x?(e++,a=!0,l=!0):l||e++;if(e>=m){s=!0;break}for(var b=!0;(b||!h)&&i<v;)b=this.containsBlackPoint(t,e,i,!0),b?(i++,a=!0,h=!0):h||i++;if(i>=v){s=!0;break}for(var E=!0;(E||!d)&&t>=0;)E=this.containsBlackPoint(r,i,t,!1),E?(t--,a=!0,d=!0):d||t--;if(t<0){s=!0;break}for(var T=!0;(T||!g)&&r>=0;)T=this.containsBlackPoint(t,e,r,!0),T?(r--,a=!0,g=!0):g||r--;if(r<0){s=!0;break}a&&(o=!0)}if(!s&&o){for(var S=e-t,R=null,P=1;R===null&&P<S;P++)R=this.getBlackPointOnSegment(t,i-P,t+P,i);if(R==null)throw new ut;for(var M=null,P=1;M===null&&P<S;P++)M=this.getBlackPointOnSegment(t,r+P,t+P,r);if(M==null)throw new ut;for(var H=null,P=1;H===null&&P<S;P++)H=this.getBlackPointOnSegment(e,r+P,e-P,r);if(H==null)throw new ut;for(var O=null,P=1;O===null&&P<S;P++)O=this.getBlackPointOnSegment(e,i-P,e-P,i);if(O==null)throw new ut;return this.centerEdges(O,R,H,M)}else throw new ut},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var s=_e.round(_e.distance(t,e,r,i)),a=(r-t)/s,o=(i-e)/s,l=this.image,h=0;h<s;h++){var d=_e.round(t+h*a),g=_e.round(e+h*o);if(l.get(d,g))return new Nt(d,g)}return null},n.prototype.centerEdges=function(t,e,r,i){var s=t.getX(),a=t.getY(),o=e.getX(),l=e.getY(),h=r.getX(),d=r.getY(),g=i.getX(),m=i.getY(),v=n.CORR;return s<this.width/2?[new Nt(g-v,m+v),new Nt(o+v,l+v),new Nt(h-v,d-v),new Nt(s+v,a-v)]:[new Nt(g+v,m+v),new Nt(o+v,l-v),new Nt(h-v,d+v),new Nt(s-v,a-v)]},n.prototype.containsBlackPoint=function(t,e,r,i){var s=this.image;if(i){for(var a=t;a<=e;a++)if(s.get(a,r))return!0}else for(var o=t;o<=e;o++)if(s.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),AO=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),s=!0,a=0;a<e.length&&s;a+=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}s=!0;for(var a=e.length-2;a>=0&&s;a-=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new ut;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}},n}(),vk=function(){function n(t,e,r,i,s,a,o,l,h){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=s,this.a32=a,this.a13=o,this.a23=l,this.a33=h}return n.quadrilateralToQuadrilateral=function(t,e,r,i,s,a,o,l,h,d,g,m,v,x,b,E){var T=n.quadrilateralToSquare(t,e,r,i,s,a,o,l),S=n.squareToQuadrilateral(h,d,g,m,v,x,b,E);return S.times(T)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=0;m<e;m+=2){var v=t[m],x=t[m+1],b=s*v+l*x+g;t[m]=(r*v+a*x+h)/b,t[m+1]=(i*v+o*x+d)/b}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=t.length,v=0;v<m;v++){var x=t[v],b=e[v],E=s*x+l*b+g;t[v]=(r*x+a*b+h)/E,e[v]=(i*x+o*b+d)/E}},n.squareToQuadrilateral=function(t,e,r,i,s,a,o,l){var h=t-r+s-o,d=e-i+a-l;if(h===0&&d===0)return new n(r-t,s-r,t,i-e,a-i,e,0,0,1);var g=r-s,m=o-s,v=i-a,x=l-a,b=g*x-m*v,E=(h*x-m*d)/b,T=(g*d-h*v)/b;return new n(r-t+E*r,o-t+T*o,t,i-e+E*i,l-e+T*l,e,E,T,1)},n.quadrilateralToSquare=function(t,e,r,i,s,a,o,l){return n.squareToQuadrilateral(t,e,r,i,s,a,o,l).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),yrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vrt=function(n){yrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,s,a,o,l,h,d,g,m,v,x,b,E,T,S,R,P){var M=vk.quadrilateralToQuadrilateral(s,a,o,l,h,d,g,m,v,x,b,E,T,S,R,P);return this.sampleGridWithTransform(e,r,i,M)},t.prototype.sampleGridWithTransform=function(e,r,i,s){if(r<=0||i<=0)throw new ut;for(var a=new Xs(r,i),o=new Float32Array(2*r),l=0;l<i;l++){for(var h=o.length,d=l+.5,g=0;g<h;g+=2)o[g]=g/2+.5,o[g+1]=d;s.transformPoints(o),AO.checkAndNudgePoints(e,o);try{for(var g=0;g<h;g+=2)e.get(Math.floor(o[g]),Math.floor(o[g+1]))&&a.set(g/2,l)}catch{throw new ut}}return a},t}(AO),tA=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new vrt,n}(),Wr=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new Nt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),_rt=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new mrt(s,a,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ut;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,s=0;s<4;s++){var a=r[(this.shift+s)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(s,a,o){var l=(s>>e-2<<1)+(s&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(se.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ut},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var s=r-i,a=new Int32Array(r),o=r-1;o>=0;--o)a[o]=t&15,t>>=4;try{var l=new _y(Yr.AZTEC_PARAM);l.decode(a,s)}catch{throw new ut}for(var h=0,o=0;o<i;o++)h=(h<<4)+a[o];return h},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,s=t,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(e,a,1,-1),l=this.getFirstDifferent(r,a,1,1),h=this.getFirstDifferent(i,a,-1,1),d=this.getFirstDifferent(s,a,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(d,o)*this.nbCenterLayers/(this.distancePoint(s,e)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(o,l,h,d))break}e=o,r=l,i=h,s=d,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ut;this.compact=this.nbCenterLayers===5;var m=new Nt(e.getX()+.5,e.getY()-.5),v=new Nt(r.getX()+.5,r.getY()+.5),x=new Nt(i.getX()-.5,i.getY()+.5),b=new Nt(s.getX()-.5,s.getY()-.5);return this.expandSquare([m,v,x,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var s=new xw(this.image).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{var a=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new Wr(a+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Wr(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Wr(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Wr(a-7,o-7),!1,-1,-1).toResultPoint()}var l=_e.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=_e.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var s=new xw(this.image,15,l,h).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{t=this.getFirstDifferent(new Wr(l+7,h-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Wr(l+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Wr(l-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Wr(l-7,h-7),!1,-1,-1).toResultPoint()}return l=_e.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=_e.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new Wr(l,h)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,s){var a=tA.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,h=o/2+this.nbCenterLayers;return a.sampleGrid(t,o,o,l,l,h,l,h,h,l,h,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,s=this.distanceResultPoint(t,e),a=s/r,o=t.getX(),l=t.getY(),h=a*(e.getX()-t.getX())/s,d=a*(e.getY()-t.getY())/s,g=0;g<r;g++)this.image.get(_e.round(o+g*h),_e.round(l+g*d))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var s=3;t=new Wr(t.getX()-s,t.getY()+s),e=new Wr(e.getX()-s,e.getY()-s),r=new Wr(r.getX()+s,r.getY()-s),i=new Wr(i.getX()+s,i.getY()+s);var a=this.getColor(i,t);if(a===0)return!1;var o=this.getColor(t,e);return o!==a||(o=this.getColor(e,r),o!==a)?!1:(o=this.getColor(r,i),o===a)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,s=(e.getY()-t.getY())/r,a=0,o=t.getX(),l=t.getY(),h=this.image.get(t.getX(),t.getY()),d=Math.ceil(r),g=0;g<d;g++)o+=i,l+=s,this.image.get(_e.round(o),_e.round(l))!==h&&a++;var m=a/r;return m>.1&&m<.9?0:m<=.1===h?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var s=t.getX()+r,a=t.getY()+i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r,a+=i;for(s-=r,a-=i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r;for(s-=r;this.isValid(s,a)&&this.image.get(s,a)===e;)a+=i;return a-=i,new Wr(s,a)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),s=t[0].getX()-t[2].getX(),a=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,h=new Nt(o+i*s,l+i*a),d=new Nt(o-i*s,l-i*a);s=t[1].getX()-t[3].getX(),a=t[1].getY()-t[3].getY(),o=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2;var g=new Nt(o+i*s,l+i*a),m=new Nt(o-i*s,l-i*a),v=[h,g,d,m];return v},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=_e.round(t.getX()),r=_e.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return _e.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return _e.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(se.truncDivision(this.nbLayers-4,8)+1)+15},n}(),ww=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new _rt(t.getBlackMatrix()),s=null,a=null;try{var o=i.detectMirror(!1);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new EO().decode(o)}catch(g){r=g}if(a==null)try{var o=i.detectMirror(!0);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new EO().decode(o)}catch(g){throw r??g}var l=new Or(a.getText(),a.getRawBytes(),a.getNumBits(),s,Ft.AZTEC,qe.currentTimeMillis()),h=a.getByteSegments();h!=null&&l.putMetadata(yr.BYTE_SEGMENTS,h);var d=a.getECLevel();return d!=null&&l.putMetadata(yr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(rn.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,s,a){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),xrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){xrt(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new ww,e)||this}return t})(qh);var Xn=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(rn.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),s=this.doDecode(i,e),a=s.getResultMetadata(),o=270;a!==null&&a.get(yr.ORIENTATION)===!0&&(o=o+a.get(yr.ORIENTATION)%360),s.putMetadata(yr.ORIENTATION,o);var l=s.getResultPoints();if(l!==null)for(var h=i.getHeight(),d=0;d<l.length;d++)l[d]=new Nt(h-l[d].getY()-1,l[d].getX());return s}else throw new ut}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),s=new or(r),a=e&&e.get(rn.TRY_HARDER)===!0,o=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var h=Math.trunc(i/2),d=0;d<l;d++){var g=Math.trunc((d+1)/2),m=(d&1)===0,v=h+o*(m?g:-g);if(v<0||v>=i)break;try{s=t.getBlackRow(v,s)}catch{continue}for(var x=function(S){if(S===1&&(s.reverse(),e&&e.get(rn.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;e.forEach(function(H,O){return R.set(O,H)}),R.delete(rn.NEED_RESULT_POINT_CALLBACK),e=R}try{var P=b.decodeRow(v,s,e);if(S===1){P.putMetadata(yr.ORIENTATION,180);var M=P.getResultPoints();M!==null&&(M[0]=new Nt(r-M[0].getX()-1,M[0].getY()),M[1]=new Nt(r-M[1].getX()-1,M[1].getY()))}return{value:P}}catch{}},b=this,E=0;E<2;E++){var T=x(E);if(typeof T=="object")return T.value}}throw new ut},n.recordPattern=function(t,e,r){for(var i=r.length,s=0;s<i;s++)r[s]=0;var a=t.getSize();if(e>=a)throw new ut;for(var o=!t.get(e),l=0,h=e;h<a;){if(t.get(h)!==o)r[l]++;else{if(++l===i)break;r[l]=1,o=!o}h++}if(!(l===i||l===i-1&&h===a))throw new ut},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,s=t.get(e);e>0&&i>=0;)t.get(--e)!==s&&(i--,s=!s);if(i>=0)throw new ut;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return Number.POSITIVE_INFINITY;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,v=g>m?g-m:m-g;if(v>r)return Number.POSITIVE_INFINITY;h+=v}return h/s},n}(),wrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),TO=function(n){wrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),s=0,a=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,h=6,d=i;d<r;d++)if(e.get(d)!==l)a[s]++;else{if(s===h-1){for(var g=t.MAX_AVG_VARIANCE,m=-1,v=t.CODE_START_A;v<=t.CODE_START_C;v++){var x=Xn.patternMatchVariance(a,t.CODE_PATTERNS[v],t.MAX_INDIVIDUAL_VARIANCE);x<g&&(g=x,m=v)}if(m>=0&&e.isRange(Math.max(0,o-(d-o)/2),o,!1))return Int32Array.from([o,d,m]);o+=a[0]+a[1],a=a.slice(2,a.length),a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,l=!l}throw new ut},t.decodeCode=function(e,r,i){Xn.recordPattern(e,i,r);for(var s=t.MAX_AVG_VARIANCE,a=-1,o=0;o<t.CODE_PATTERNS.length;o++){var l=t.CODE_PATTERNS[o],h=this.patternMatchVariance(r,l,t.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=o)}if(a>=0)return a;throw new ut},t.prototype.decodeRow=function(e,r,i){var s=i&&i.get(rn.ASSUME_GS1)===!0,a=t.findStartPattern(r),o=a[2],l=0,h=new Uint8Array(20);h[l++]=o;var d;switch(o){case t.CODE_START_A:d=t.CODE_CODE_A;break;case t.CODE_START_B:d=t.CODE_CODE_B;break;case t.CODE_START_C:d=t.CODE_CODE_C;break;default:throw new At}for(var g=!1,m=!1,v="",x=a[0],b=a[1],E=Int32Array.from([0,0,0,0,0,0]),T=0,S=0,R=o,P=0,M=!0,H=!1,O=!1;!g;){var C=m;switch(m=!1,T=S,S=t.decodeCode(r,E,b),h[l++]=S,S!==t.CODE_STOP&&(M=!0),S!==t.CODE_STOP&&(P++,R+=P*S),x=b,b+=E.reduce(function(ot,vt){return ot+vt},0),S){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new At}switch(d){case t.CODE_CODE_A:if(S<64)O===H?v+=String.fromCharCode(32+S):v+=String.fromCharCode(32+S+128),O=!1;else if(S<96)O===H?v+=String.fromCharCode(S-64):v+=String.fromCharCode(S+64),O=!1;else switch(S!==t.CODE_STOP&&(M=!1),S){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!H&&O?(H=!0,O=!1):H&&O?(H=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_B;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_B:if(S<96)O===H?v+=String.fromCharCode(32+S):v+=String.fromCharCode(32+S+128),O=!1;else switch(S!==t.CODE_STOP&&(M=!1),S){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!H&&O?(H=!0,O=!1):H&&O?(H=!1,O=!1):O=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_A;break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_C:if(S<100)S<10&&(v+="0"),v+=S;else switch(S!==t.CODE_STOP&&(M=!1),S){case t.CODE_FNC_1:s&&(v.length===0?v+="]C1":v+="");break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_STOP:g=!0;break}break}C&&(d=d===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var N=b-x;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-x)/2),!1))throw new ut;if(R-=P*T,R%103!==T)throw new ar;var B=v.length;if(B===0)throw new ut;B>0&&M&&(d===t.CODE_CODE_C?v=v.substring(0,B-2):v=v.substring(0,B-1));for(var z=(a[1]+a[0])/2,G=x+N/2,F=h.length,xt=new Uint8Array(F),wt=0;wt<F;wt++)xt[wt]=h[wt];var K=[new Nt(z,e),new Nt(G,e)];return new Or(v,xt,0,K,Ft.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(Xn),brt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SO=function(n){brt(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.counters;h.fill(0),this.decodeRowResult="";var d=t.findAsteriskPattern(r,h),g=r.getNextSet(d[1]),m=r.getSize(),v,x;do{t.recordPattern(r,g,h);var b=t.toNarrowWidePattern(h);if(b<0)throw new ut;v=t.patternToChar(b),this.decodeRowResult+=v,x=g;try{for(var E=(s=void 0,wx(h)),T=E.next();!T.done;T=E.next()){var S=T.value;g+=S}}catch(F){s={error:F}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}g=r.getNextSet(g)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var P=wx(h),M=P.next();!M.done;M=P.next()){var S=M.value;R+=S}}catch(F){o={error:F}}finally{try{M&&!M.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}var H=g-x-R;if(g!==m&&H*2<R)throw new ut;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,C=0,N=0;N<O;N++)C+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(O)!==t.ALPHABET_STRING.charAt(C%43))throw new ar;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new ut;var B;this.extendedMode?B=t.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var z=(d[1]+d[0])/2,G=x+R/2;return new Or(B,null,0,[new Nt(z,e),new Nt(G,e)],Ft.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),s=e.getNextSet(0),a=0,o=s,l=!1,h=r.length,d=s;d<i;d++)if(e.get(d)!==l)r[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((d-o)/2)),o,!1))return[o,d];o+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,l=!l}throw new ut},t.toNarrowWidePattern=function(e){var r,i,s=e.length,a=0,o;do{var l=2147483647;try{for(var h=(r=void 0,wx(e)),d=h.next();!d.done;d=h.next()){var g=d.value;g<l&&g>a&&(l=g)}}catch(b){r={error:b}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}a=l,o=0;for(var m=0,v=0,x=0;x<s;x++){var g=e[x];g>a&&(v|=1<<s-1-x,o++,m+=g)}if(o===3){for(var x=0;x<s&&o>0;x++){var g=e[x];if(g>a&&(o--,g*2>=m))return-1}return v}}while(o>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new ut},t.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a==="+"||a==="$"||a==="%"||a==="/"){var o=e.charAt(s+1),l="\0";switch(a){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new At;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new At;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new At;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new At;break}i+=l,s++}else i+=a}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(Xn),Ert=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CO=function(n){Ert(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.findAsteriskPattern(r),d=r.getNextSet(h[1]),g=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var v,x;do{t.recordPattern(r,d,m);var b=this.toPattern(m);if(b<0)throw new ut;v=this.patternToChar(b),this.decodeRowResult+=v,x=d;try{for(var E=(s=void 0,bx(m)),T=E.next();!T.done;T=E.next()){var S=T.value;d+=S}}catch(N){s={error:N}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}d=r.getNextSet(d)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var P=bx(m),M=P.next();!M.done;M=P.next()){var S=M.value;R+=S}}catch(N){o={error:N}}finally{try{M&&!M.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}if(d===g||!r.get(d))throw new ut;if(this.decodeRowResult.length<2)throw new ut;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var H=this.decodeExtended(this.decodeRowResult),O=(h[1]+h[0])/2,C=x+R/2;return new Or(H,null,0,[new Nt(O,e),new Nt(C,e)],Ft.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var s=this.counters,a=i,o=!1,l=s.length,h=0,d=i;d<r;d++)if(e.get(d)!==o)s[h]++;else{if(h===l-1){if(this.toPattern(s)===t.ASTERISK_ENCODING)return new Int32Array([a,d]);a+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,o=!o}throw new ut},t.prototype.toPattern=function(e){var r,i,s=0;try{for(var a=bx(e),o=a.next();!o.done;o=a.next()){var l=o.value;s+=l}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}for(var h=0,d=e.length,g=0;g<d;g++){var m=Math.round(e[g]*9/s);if(m<1||m>4)return-1;if((g&1)===0)for(var v=0;v<m;v++)h=h<<1|1;else h<<=m}return h},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new ut},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a>="a"&&a<="d"){if(s>=r-1)throw new At;var o=e.charAt(s+1),l="\0";switch(a){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new At;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new At;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new At;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new At;break}i+=l,s++}else i+=a}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var s=1,a=0,o=r-1;o>=0;o--)a+=s*t.ALPHABET_STRING.indexOf(e.charAt(o)),++s>i&&(s=1);if(e.charAt(r)!==t.ALPHABET_STRING[a%47])throw new ar},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(Xn),Art=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Trt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},IO=function(n){Art(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var s,a,o=this.decodeStart(r),l=this.decodeEnd(r),h=new ee;t.decodeMiddle(r,o[1],l[0],h);var d=h.toString(),g=null;i!=null&&(g=i.get(rn.ALLOWED_LENGTHS)),g==null&&(g=t.DEFAULT_ALLOWED_LENGTHS);var m=d.length,v=!1,x=0;try{for(var b=Trt(g),E=b.next();!E.done;E=b.next()){var T=E.value;if(m===T){v=!0;break}T>x&&(x=T)}}catch(P){s={error:P}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}if(!v&&m>x&&(v=!0),!v)throw new At;var S=[new Nt(o[1],e),new Nt(l[0],e)],R=new Or(d,null,0,S,Ft.ITF,new Date().getTime());return R},t.decodeMiddle=function(e,r,i,s){var a=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),o.fill(0),l.fill(0);r<i;){Xn.recordPattern(e,r,a);for(var h=0;h<5;h++){var d=2*h;o[h]=a[d],l[h]=a[d+1]}var g=t.decodeDigit(o);s.append(g.toString()),g=this.decodeDigit(l),s.append(g.toString()),a.forEach(function(m){r+=m})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var s=r-1;i>0&&s>=0&&!e.get(s);s--)i--;if(i!==0)throw new ut},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new ut;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(a){a instanceof ut&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var s=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-s,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var s=i.length,a=new Int32Array(s),o=e.getSize(),l=!1,h=0,d=r;a.fill(0);for(var g=r;g<o;g++)if(e.get(g)!==l)a[h]++;else{if(h===s-1){if(Xn.patternMatchVariance(a,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[d,g];d+=a[0]+a[1],qe.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new ut},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,s=t.PATTERNS.length,a=0;a<s;a++){var o=t.PATTERNS[a],l=Xn.patternMatchVariance(e,o,t.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=a):l===r&&(i=-1)}if(i>=0)return i%10;throw new ut},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(Xn),Srt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nh=function(n){Srt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,s=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,s,!1,this.START_END_PATTERN,a);var o=i[0];s=i[1];var l=o-(s-o);l>=0&&(r=e.isRange(l,o,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new At;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new At;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,s){return this.findGuardPattern(e,r,i,s,new Int32Array(s.length))},t.findGuardPattern=function(e,r,i,s,a){var o=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var l=0,h=r,d=s.length,g=i,m=r;m<o;m++)if(e.get(m)!==g)a[l]++;else{if(l===d-1){if(Xn.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([h,m]);h+=a[0]+a[1];for(var v=a.slice(2,a.length),x=0;x<l-1;x++)a[x]=v[x];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,g=!g}throw new ut},t.decodeDigit=function(e,r,i,s){this.recordPattern(e,i,r);for(var a=this.MAX_AVG_VARIANCE,o=-1,l=s.length,h=0;h<l;h++){var d=s[h],g=Xn.patternMatchVariance(r,d,t.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,o=h)}if(o>=0)return o;throw new ut},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(Xn),Crt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Irt=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Nt((r[0]+r[1])/2,t),new Nt(s,t)],h=new Or(a,null,0,l,Ft.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<5&&l<o;d++){var g=Nh.decodeDigit(t,a,l,Nh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Crt(a)),v=m.next();!v.done;v=m.next()){var x=v.value;l+=x}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-d),d!==4&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==5)throw new ut;var b=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==b)throw new ut;return l},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new ut},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[yr.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),s=r%100,a=s<10?"0"+s:s.toString();return e+i+"."+a},n}(),Rrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Drt=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new Nt((r[0]+r[1])/2,t),new Nt(s,t)],h=new Or(a,null,0,l,Ft.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<2&&l<o;d++){var g=Nh.decodeDigit(t,a,l,Nh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,Rrt(a)),v=m.next();!v.done;v=m.next()){var x=v.value;l+=x}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-d),d!==1&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==2)throw new ut;if(parseInt(r.toString())%4!==h)throw new ut;return l},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[yr.ISSUE_NUMBER,parseInt(t)]])},n}(),Ort=function(){function n(){}return n.decodeRow=function(t,e,r){var i=Nh.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new Irt;return s.decodeRow(t,e,i)}catch{var a=new Drt;return a.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),Mrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gn=function(n){Mrt(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],s=new Int32Array(i.length),a=0;a<i.length;a++)s[a]=i[i.length-a-1];t.L_AND_G_PATTERNS[r]=s}return e}return t.prototype.decodeRow=function(e,r,i){var s=t.findStartGuardPattern(r),a=i==null?null:i.get(rn.NEED_RESULT_POINT_CALLBACK);if(a!=null){var o=new Nt((s[0]+s[1])/2,e);a.foundPossibleResultPoint(o)}var l=this.decodeMiddle(r,s,this.decodeRowStringBuffer),h=l.rowOffset,d=l.resultString;if(a!=null){var g=new Nt(h,e);a.foundPossibleResultPoint(g)}var m=t.decodeEnd(r,h);if(a!=null){var v=new Nt((m[0]+m[1])/2,e);a.foundPossibleResultPoint(v)}var x=m[1],b=x+(x-m[0]);if(b>=r.getSize()||!r.isRange(x,b,!1))throw new ut;var E=d.toString();if(E.length<8)throw new At;if(!t.checkChecksum(E))throw new ar;var T=(s[1]+s[0])/2,S=(m[1]+m[0])/2,R=this.getBarcodeFormat(),P=[new Nt(T,e),new Nt(S,e)],M=new Or(E,null,0,P,R,new Date().getTime()),H=0;try{var O=Ort.decodeRow(e,r,m[1]);M.putMetadata(yr.UPC_EAN_EXTENSION,O.getText()),M.putAllMetadata(O.getResultMetadata()),M.addResultPoints(O.getResultPoints()),H=O.getText().length}catch{}var C=i==null?null:i.get(rn.ALLOWED_EAN_EXTENSIONS);if(C!=null){var N=!1;for(var B in C)if(H.toString()===B){N=!0;break}if(!N)throw new ut}return R===Ft.EAN_13||Ft.UPC_A,M},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new At;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new At;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Nh),Nrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),RO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bw=function(n){Nrt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0,v=0;v<6&&g<d;v++){var x=Gn.decodeDigit(e,h,g,Gn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var b=(s=void 0,RO(h)),E=b.next();!E.done;E=b.next()){var T=E.value;g+=T}}catch(M){s={error:M}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}x>=10&&(m|=1<<5-v)}i=t.determineFirstDigit(i,m);var S=Gn.findGuardPattern(e,g,!0,Gn.MIDDLE_PATTERN,new Int32Array(Gn.MIDDLE_PATTERN.length).fill(0));g=S[1];for(var v=0;v<6&&g<d;v++){var x=Gn.decodeDigit(e,h,g,Gn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var R=(o=void 0,RO(h)),P=R.next();!P.done;P=R.next()){var T=P.value;g+=T}}catch(O){o={error:O}}finally{try{P&&!P.done&&(l=R.return)&&l.call(R)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Ft.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ut},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Gn),Prt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),DO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OO=function(n){Prt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0;m<4&&g<d;m++){var v=Gn.decodeDigit(e,h,g,Gn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var x=(s=void 0,DO(h)),b=x.next();!b.done;b=x.next()){var E=b.value;g+=E}}catch(P){s={error:P}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}}var T=Gn.findGuardPattern(e,g,!0,Gn.MIDDLE_PATTERN,new Int32Array(Gn.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var m=0;m<4&&g<d;m++){var v=Gn.decodeDigit(e,h,g,Gn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var S=(o=void 0,DO(h)),R=S.next();!R.done;R=S.next()){var E=R.value;g+=E}}catch(H){o={error:H}}finally{try{R&&!R.done&&(l=S.return)&&l.call(S)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Ft.EAN_8},t}(Gn),krt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MO=function(n){krt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new bw,e}return t.prototype.getBarcodeFormat=function(){return Ft.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new Or(r.substring(1),null,null,e.getResultPoints(),Ft.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ut},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Gn),Lrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},NO=function(n){Lrt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o=this.decodeMiddleCounters.map(function(E){return E});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),h=r[1],d=0,g=0;g<6&&h<l;g++){var m=t.decodeDigit(e,o,h,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(s=void 0,Vrt(o)),x=v.next();!x.done;x=v.next()){var b=x.value;h+=b}}catch(E){s={error:E}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}m>=10&&(d|=1<<5-g)}return t.determineNumSysAndCheckDigit(new ee(i),d),h},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Gn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){e.insert(0,"0"+i),e.append("0"+s);return}throw ut.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Ft.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new ee;i.append(e.charAt(0));var s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Gn),Brt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ex=function(n){Brt(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(rn.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(Ft.EAN_13)>-1&&s.push(new bw),i.indexOf(Ft.UPC_A)>-1&&s.push(new MO),i.indexOf(Ft.EAN_8)>-1&&s.push(new OO),i.indexOf(Ft.UPC_E)>-1&&s.push(new NO)),s.length===0&&(s.push(new bw),s.push(new MO),s.push(new OO),s.push(new NO)),r.readers=s,r}return t.prototype.decodeRow=function(e,r,i){var s,a;try{for(var o=PO(this.readers),l=o.next();!l.done;l=o.next()){var h=l.value;try{var d=h.decodeRow(e,r,i),g=d.getBarcodeFormat()===Ft.EAN_13&&d.getText().charAt(0)==="0",m=i==null?null:i.get(rn.POSSIBLE_FORMATS),v=m==null||m.includes(Ft.UPC_A);if(g&&v){var x=d.getRawBytes(),b=new Or(d.getText().substring(1),x,x?x.length:null,d.getResultPoints(),Ft.UPC_A);return b.putAllMetadata(d.getResultMetadata()),b}return d}catch{}}}catch(E){s={error:E}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}throw new ut},t.prototype.reset=function(){var e,r;try{for(var i=PO(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;a.reset()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}(Xn),Frt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Urt=function(n){Frt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var s=this.getValidRowData(r);if(!s)throw new ut;var a=this.codaBarDecodeRow(s.row);if(!a)throw new ut;return new Or(a,null,0,[new Nt(s.left,e),new Nt(s.right,e)],Ft.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var s=r.lastIndexOf(!0);if(s<=i)return null;r=r.slice(i,s+1);for(var a=[],o=r[0],l=1,h=1;h<r.length;h++)r[h]===o?l++:(o=r[h],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:s}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(l,h){return(l+h)/2},0));e.length>0;){var s=e.splice(0,8).splice(0,7),a=s.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[a])}var o=r.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}(Xn),jrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qc=function(n){jrt(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(Xn.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new ut},t.count=function(e){return _e.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]>s&&(s=r[a],i=a);e[i]++},t.decrement=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]<s&&(s=r[a],i=a);e[i]--},t.isFinderPattern=function(e){var r,i,s=e[0]+e[1],a=s+e[2]+e[3],o=s/a;if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var d=zrt(e),g=d.next();!g.done;g=d.next()){var m=g.value;m>h&&(h=m),m<l&&(l=m)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return h<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(Xn),Cm=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),_k=function(){function n(t,e,r,i,s){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Nt(r,s)),this.resultPoints.push(new Nt(i,s))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),Hrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eh=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,s,a=0;try{for(var o=Hrt(t),l=o.next();!l.done;l=o.next()){var h=l.value;a+=h}}catch(S){i={error:S}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}for(var d=0,g=0,m=t.length,v=0;v<m-1;v++){var x=void 0;for(x=1,g|=1<<v;x<t[v];x++,g&=~(1<<v)){var b=n.combins(a-x-1,m-v-2);if(r&&g===0&&a-x-(m-v-1)>=m-v-1&&(b-=n.combins(a-x-(m-v),m-v-2)),m-v-1>1){for(var E=0,T=a-x-(m-v-2);T>e;T--)E+=n.combins(a-x-T-1,m-v-3);b-=E*(m-1-v)}else a-x>e&&b--;d+=b}a-=x}return d},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var s=1,a=1,o=t;o>r;o--)s*=o,a<=i&&(s/=a,a++);for(;a<=i;)s/=a,a++;return s},n}(),Grt=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new or(r),s=0,a=t[0],o=a.getRightChar().getValue(),l=11;l>=0;--l)(o&1<<l)!==0&&i.set(s),s++;for(var l=1;l<t.length;++l){for(var h=t[l],d=h.getLeftChar().getValue(),g=11;g>=0;--g)(d&1<<g)!==0&&i.set(s),s++;if(h.getRightChar()!==null)for(var m=h.getRightChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(s),s++}return i},n}(),zc=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),eA=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),Wrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yi=function(n){Wrt(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(eA),qrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hc=function(n){qrt(t,n);function t(e,r,i){var s=n.call(this,e)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=r,s}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(eA),Yrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Uu=function(n){Yrt(t,n);function t(e,r,i){var s=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new At;return s.firstDigit=r,s.secondDigit=i,s}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(eA),Jp=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xrt=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,s,a,o,l,h;if(!t)return null;if(t.length<2)throw new ut;var d=t.substring(0,2);try{for(var g=Jp(n.TWO_DIGIT_DATA_LENGTH),m=g.next();!m.done;m=g.next()){var v=m.value;if(v[0]===d)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,v[2],t):n.processFixedAI(2,v[1],t)}}catch(H){e={error:H}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(t.length<3)throw new ut;var x=t.substring(0,3);try{for(var b=Jp(n.THREE_DIGIT_DATA_LENGTH),E=b.next();!E.done;E=b.next()){var v=E.value;if(v[0]===x)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,v[2],t):n.processFixedAI(3,v[1],t)}}catch(H){i={error:H}}finally{try{E&&!E.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}try{for(var T=Jp(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),S=T.next();!S.done;S=T.next()){var v=S.value;if(v[0]===x)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(H){a={error:H}}finally{try{S&&!S.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}if(t.length<4)throw new ut;var R=t.substring(0,4);try{for(var P=Jp(n.FOUR_DIGIT_DATA_LENGTH),M=P.next();!M.done;M=P.next()){var v=M.value;if(v[0]===R)return v[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,v[2],t):n.processFixedAI(4,v[1],t)}}catch(H){l={error:H}}finally{try{M&&!M.done&&(h=P.return)&&h.call(P)}finally{if(l)throw l.error}}throw new ut},n.processFixedAI=function(t,e,r){if(r.length<t)throw new ut;var i=r.substring(0,t);if(r.length<t+e)throw new ut;var s=r.substring(t,t+e),a=r.substring(t+e),o="("+i+")"+s,l=n.parseFieldsInGeneralPurpose(a);return l==null?o:o+l},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),s;r.length<t+e?s=r.length:s=t+e;var a=r.substring(t,s),o=r.substring(s),l="("+i+")"+a,h=n.parseFieldsInGeneralPurpose(o);return h==null?l:l+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),P1=function(){function n(t){this.buffer=new ee,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var s=this.decodeGeneralPurposeField(r,i),a=Xrt.parseFieldsInGeneralPurpose(s.getNewString());if(a!=null&&t.append(a),s.isRemaining()?i=""+s.getRemainingValue():i=null,r===s.getNewPosition())break;r=s.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new Uu(this.information.getSize(),Uu.FNC1,Uu.FNC1):new Uu(this.information.getSize(),e-1,Uu.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,s=(r-8)%11;return new Uu(t+7,i,s)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,s=0;s<r;++s)t.get(e+s)&&(i|=1<<r-s-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Hc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Hc(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new Hc(this.current.getPosition(),this.buffer.toString()):e=new Hc(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new zc(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new Hc(this.current.getPosition(),this.buffer.toString());return new zc(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new zc(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Hc(this.current.getPosition(),this.buffer.toString());return new zc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new zc(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Hc(this.current.getPosition(),this.buffer.toString());return new zc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new zc(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Yi(t+5,Yi.FNC1);if(e>=5&&e<15)return new Yi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new Yi(t+7,""+(r+1));if(r>=90&&r<116)return new Yi(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new At}return new Yi(t+8,s)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new Yi(t+5,Yi.FNC1);if(e>=5&&e<15)return new Yi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new Yi(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new r0("Decoding invalid alphanumeric value: "+r)}return new Yi(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),xk=function(){function n(t){this.information=t,this.generalDecoder=new P1(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),Krt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zi=function(n){Krt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var s=0;s<4;++s){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,s=0;s<13;s++){var a=e.charAt(s+r).charCodeAt(0)-48;i+=(s&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(xk),$rt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qrt=function(n){$rt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new ee;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(Zi),Zrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jrt=function(n){Zrt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new ee;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(xk),tit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),k1=function(n){tit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,s);for(var a=this.checkWeight(s),o=1e5,l=0;l<5;++l)a/o===0&&e.append("0"),o/=10;e.append(a)},t}(Zi),eit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wk=function(n){eit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+k1.GTIN_SIZE+t.WEIGHT_SIZE)throw new ut;var e=new ee;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+k1.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(k1),nit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rit=function(n){nit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(wk),iit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sit=function(n){iit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(wk),ait=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oit=function(n){ait(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Zi.GTIN_SIZE)throw new ut;var e=new ee;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Zi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Zi.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(Zi),cit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lit=function(n){cit(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Zi.GTIN_SIZE)throw new ut;var e=new ee;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Zi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Zi.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Zi.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(s.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Zi),uit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vo=function(n){uit(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.dateCode=i,s.firstAIdigits=r,s}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new ut;var e=new ee;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var s=i%32;i/=32;var a=i%12+1;i/=12;var o=i;o/10===0&&e.append("0"),e.append(o),a/10===0&&e.append("0"),e.append(a),s/10===0&&e.append("0"),e.append(s)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(k1);function hit(n){try{if(n.get(1))return new Qrt(n);if(!n.get(2))return new Jrt(n);var t=P1.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new rit(n);case 5:return new sit(n)}var e=P1.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new oit(n);case 13:return new lit(n)}var r=P1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new vo(n,"310","11");case 57:return new vo(n,"320","11");case 58:return new vo(n,"310","13");case 59:return new vo(n,"320","13");case 60:return new vo(n,"310","15");case 61:return new vo(n,"320","15");case 62:return new vo(n,"310","17");case 63:return new vo(n,"320","17")}}catch(i){throw console.log(i),new r0("unknown decoder: "+n)}}var kO=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),fit=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,s){e.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),dit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_o=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},git=function(n){dit(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(o){if(o instanceof ut){if(!this.pairs.length)throw new ut;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(e,!1),s){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new ut},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,s,a=r;a<this.rows.length;a++){var o=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,_o(e)),h=l.next();!h.done;h=l.next()){var d=h.value;this.pairs.push(d.getPairs())}}catch(m){i={error:m}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(e);g.push(o);try{return this.checkRows(g,a+1)}catch(m){console.log(m)}}}throw new ut},t.isValidSequence=function(e){var r,i;try{for(var s=_o(t.FINDER_PATTERN_SEQUENCES),a=s.next();!a.done;a=s.next()){var o=a.value;if(!(e.length>o.length)){for(var l=!0,h=0;h<e.length;h++)if(e[h].getFinderPattern().getValue()!==o[h]){l=!1;break}if(l)return!0}}}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,s=!1,a=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}s=o.isEquivalent(this.pairs),i++}a||s||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new fit(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,s,a,o,l,h;try{for(var d=_o(r),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.getPairs().length!==e.length){var v=!0;try{for(var x=(a=void 0,_o(m.getPairs())),b=x.next();!b.done;b=x.next()){var E=b.value,T=!1;try{for(var S=(l=void 0,_o(e)),R=S.next();!R.done;R=S.next()){var P=R.value;if(kO.equals(E,P)){T=!0;break}}}catch(M){l={error:M}}finally{try{R&&!R.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}T||(v=!1)}}catch(M){a={error:M}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}}}catch(M){i={error:M}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,s,a,o,l,h;try{for(var d=_o(r),g=d.next();!g.done;g=d.next()){var m=g.value,v=!0;try{for(var x=(a=void 0,_o(e)),b=x.next();!b.done;b=x.next()){var E=b.value,T=!1;try{for(var S=(l=void 0,_o(m.getPairs())),R=S.next();!R.done;R=S.next()){var P=R.value;if(E.equals(P)){T=!0;break}}}catch(M){l={error:M}}finally{try{R&&!R.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}if(!T){v=!1;break}}}catch(M){a={error:M}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}if(v)return!0}}catch(M){i={error:M}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=Grt.buildBitArray(e),i=hit(r),s=i.parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],o[0],o[1]];return new Or(s,null,null,l,Ft.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var s=i.getChecksumPortion(),a=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);s+=l.getLeftChar().getChecksumPortion(),a++;var h=l.getRightChar();h!=null&&(s+=h.getChecksumPortion(),a++)}s%=211;var d=211*(a-4)+s;return d===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var s=r.length%2===0;this.startFromEven&&(s=!s);var a,o=!0,l=-1;do this.findNextPair(e,r,l),a=this.parseFoundFinderPattern(e,i,s),a===null?l=t.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);var h=this.decodeDataCharacter(e,a,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ut;var d;try{d=this.decodeDataCharacter(e,a,s,!1)}catch(g){d=null,console.log(g)}return new kO(h,d,a,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var a=e.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var l=r[r.length-1];o=l.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var d=!1;o<a&&(d=!e.get(o),!!d);)o++;for(var g=0,m=o,v=o;v<a;v++)if(e.get(v)!==d)s[g]++;else{if(g===3){if(h&&t.reverseCounters(s),t.isFinderPattern(s)){this.startEnd[0]=m,this.startEnd[1]=v;return}h&&t.reverseCounters(s),m+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,g--}else g++;s[g]=1,d=!d}throw new ut},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var s=e[i];e[i]=e[r-i-1],e[r-i-1]=s}},t.prototype.parseFoundFinderPattern=function(e,r,i){var s,a,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!e.get(l);)l--;l++,s=this.startEnd[0]-l,a=l,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),s=o-this.startEnd[1];var h=this.getDecodeFinderCounters();qe.arraycopy(h,0,h,1,h.length-1),h[0]=s;var d;try{d=this.parseFinderValue(h,t.FINDER_PATTERNS)}catch{return null}return new _k(d,[a,o],a,o,r)},t.prototype.decodeDataCharacter=function(e,r,i,s){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(s)t.recordPatternInReverse(e,r.getStartEnd()[0],a);else{t.recordPattern(e,r.getStartEnd()[1],a);for(var l=0,h=a.length-1;l<h;l++,h--){var d=a[l];a[l]=a[h],a[h]=d}}var g=17,m=_e.sum(new Int32Array(a))/g,v=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-v)/v>.3)throw new ut;for(var x=this.getOddCounts(),b=this.getEvenCounts(),E=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var S=1*a[l]/m,R=S+.5;if(R<1){if(S<.3)throw new ut;R=1}else if(R>8){if(S>8.7)throw new ut;R=8}var P=l/2;(l&1)===0?(x[P]=R,E[P]=S-R):(b[P]=R,T[P]=S-R)}this.adjustOddEvenCounts(g);for(var M=4*r.getValue()+(i?0:2)+(s?0:1)-1,H=0,O=0,l=x.length-1;l>=0;l--){if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[M][2*l];O+=x[l]*C}H+=x[l]}for(var N=0,l=b.length-1;l>=0;l--)if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[M][2*l+1];N+=b[l]*C}var B=O+N;if((H&1)!==0||H>13||H<4)throw new ut;var z=(13-H)/2,G=t.SYMBOL_WIDEST[z],F=9-G,xt=eh.getRSSvalue(x,G,!0),wt=eh.getRSSvalue(b,F,!1),K=t.EVEN_TOTAL_SUBSET[z],ot=t.GSUM[z],vt=xt*K+wt+ot;return new Cm(vt,B)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=_e.sum(new Int32Array(this.getOddCounts())),i=_e.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1;r>13?a=!0:r<4&&(s=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var h=r+i-e,d=(r&1)===1,g=(i&1)===0;if(h===1)if(d){if(g)throw new ut;a=!0}else{if(!g)throw new ut;l=!0}else if(h===-1)if(d){if(g)throw new ut;s=!0}else{if(!g)throw new ut;o=!0}else if(h===0){if(d){if(!g)throw new ut;r<i?(s=!0,l=!0):(a=!0,o=!0)}else if(g)throw new ut}else throw new ut;if(s){if(a)throw new ut;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new ut;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Qc),pit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mit=function(n){pit(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.count=0,s.finderPattern=i,s}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Cm),yit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ax=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LO=function(n){yit(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,h),r.reverse();var d=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var g=Ax(this.possibleLeftPairs),m=g.next();!m.done;m=g.next()){var v=m.value;if(v.getCount()>1)try{for(var x=(o=void 0,Ax(this.possibleRightPairs)),b=x.next();!b.done;b=x.next()){var E=b.value;if(E.getCount()>1&&t.checkChecksum(v,E))return t.constructResult(v,E)}}catch(T){o={error:T}}finally{try{b&&!b.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}}}catch(T){s={error:T}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}throw new ut},t.addOrTally=function(e,r){var i,s;if(r!=null){var a=!1;try{for(var o=Ax(e),l=o.next();!l.done;l=o.next()){var h=l.value;if(h.getValue()===r.getValue()){h.incrementCount(),a=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}a||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),s=new String(i).toString(),a=new ee,o=13-s.length;o>0;o--)a.append("0");a.append(s);for(var l=0,o=0;o<13;o++){var h=a.charAt(o).charCodeAt(0)-48;l+=(o&1)===0?3*h:h}l=10-l%10,l===10&&(l=0),a.append(l.toString());var d=e.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new Or(a.toString(),null,0,[d[0],d[1],g[0],g[1]],Ft.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},t.prototype.decodePair=function(e,r,i,s){try{var a=this.findFinderPattern(e,r),o=this.parseFoundFinderPattern(e,i,r,a),l=s==null?null:s.get(rn.NEED_RESULT_POINT_CALLBACK);if(l!=null){var h=(a[0]+a[1])/2;r&&(h=e.getSize()-1-h),l.foundPossibleResultPoint(new Nt(h,i))}var d=this.decodeDataCharacter(e,o,!0),g=this.decodeDataCharacter(e,o,!1);return new mit(1597*d.getValue()+g.getValue(),d.getChecksumPortion()+4*g.getChecksumPortion(),o)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(i)Xn.recordPatternInReverse(e,r.getStartEnd()[0],s);else{Xn.recordPattern(e,r.getStartEnd()[1]+1,s);for(var o=0,l=s.length-1;o<l;o++,l--){var h=s[o];s[o]=s[l],s[l]=h}}for(var d=i?16:15,g=_e.sum(new Int32Array(s))/d,m=this.getOddCounts(),v=this.getEvenCounts(),x=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<s.length;o++){var E=s[o]/g,T=Math.floor(E+.5);T<1?T=1:T>8&&(T=8);var S=Math.floor(o/2);(o&1)===0?(m[S]=T,x[S]=E-T):(v[S]=T,b[S]=E-T)}this.adjustOddEvenCounts(i,d);for(var R=0,P=0,o=m.length-1;o>=0;o--)P*=9,P+=m[o],R+=m[o];for(var M=0,H=0,o=v.length-1;o>=0;o--)M*=9,M+=v[o],H+=v[o];var O=P+3*M;if(i){if((R&1)!==0||R>12||R<4)throw new ut;var C=(12-R)/2,N=t.OUTSIDE_ODD_WIDEST[C],B=9-N,z=eh.getRSSvalue(m,N,!1),G=eh.getRSSvalue(v,B,!0),F=t.OUTSIDE_EVEN_TOTAL_SUBSET[C],xt=t.OUTSIDE_GSUM[C];return new Cm(z*F+G+xt,O)}else{if((H&1)!==0||H>10||H<4)throw new ut;var C=(10-H)/2,N=t.INSIDE_ODD_WIDEST[C],B=9-N,z=eh.getRSSvalue(m,N,!0),G=eh.getRSSvalue(v,B,!1),wt=t.INSIDE_ODD_TOTAL_SUBSET[C],xt=t.INSIDE_GSUM[C];return new Cm(G*wt+z+xt,O)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),a=!1,o=0;o<s&&(a=!e.get(o),r!==a);)o++;for(var l=0,h=o,d=o;d<s;d++)if(e.get(d)!==a)i[l]++;else{if(l===3){if(Qc.isFinderPattern(i))return[h,d];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new ut},t.prototype.parseFoundFinderPattern=function(e,r,i,s){for(var a=e.get(s[0]),o=s[0]-1;o>=0&&a!==e.get(o);)o--;o++;var l=s[0]-o,h=this.getDecodeFinderCounters(),d=new Int32Array(h.length);qe.arraycopy(h,0,d,1,h.length-1),d[0]=l;var g=this.parseFinderValue(d,t.FINDER_PATTERNS),m=o,v=s[1];return i&&(m=e.getSize()-1-m,v=e.getSize()-1-v),new _k(g,[o,s[1]],m,v,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=_e.sum(new Int32Array(this.getOddCounts())),s=_e.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,l=!1,h=!1;e?(i>12?o=!0:i<4&&(a=!0),s>12?h=!0:s<4&&(l=!0)):(i>11?o=!0:i<5&&(a=!0),s>10?h=!0:s<4&&(l=!0));var d=i+s-r,g=(i&1)===(e?1:0),m=(s&1)===1;if(d===1)if(g){if(m)throw new ut;o=!0}else{if(!m)throw new ut;h=!0}else if(d===-1)if(g){if(m)throw new ut;a=!0}else{if(!m)throw new ut;l=!0}else if(d===0){if(g){if(!m)throw new ut;i<s?(a=!0,h=!0):(o=!0,l=!0)}else if(m)throw new ut}else throw new ut;if(a){if(o)throw new ut;Qc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Qc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(h)throw new ut;Qc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Qc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Qc),vit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nd=function(n){vit(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(rn.POSSIBLE_FORMATS):null,s=e&&e.get(rn.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=e&&e.get(rn.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Ft.EAN_13)||i.includes(Ft.UPC_A)||i.includes(Ft.EAN_8)||i.includes(Ft.UPC_E))&&r.readers.push(new Ex(e)),i.includes(Ft.CODE_39)&&r.readers.push(new SO(s,a)),i.includes(Ft.CODE_93)&&r.readers.push(new CO),i.includes(Ft.CODE_128)&&r.readers.push(new TO),i.includes(Ft.ITF)&&r.readers.push(new IO),i.includes(Ft.CODABAR)&&r.readers.push(new Urt),i.includes(Ft.RSS_14)&&r.readers.push(new LO),i.includes(Ft.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new git))),r.readers.length===0&&(r.readers.push(new Ex(e)),r.readers.push(new SO),r.readers.push(new CO),r.readers.push(new Ex(e)),r.readers.push(new TO),r.readers.push(new IO),r.readers.push(new LO)),r}return t.prototype.decodeRow=function(e,r,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(e,r,i)}catch{}throw new ut},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(Xn),_it=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){_it(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new Nd(r),e,r)||this}return t})(qh);var VO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Te=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),we=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),xit=function(){function n(t,e,r,i,s,a){var o,l;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=a;var h=0,d=a.getECCodewords(),g=a.getECBlocks();try{for(var m=VO(g),v=m.next();!v.done;v=m.next()){var x=v.value;h+=x.getCount()*(x.getDataCodewords()+d)}}catch(b){o={error:b}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new At;try{for(var s=VO(n.VERSIONS),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.symbolSizeRows===t&&o.symbolSizeColumns===e)return o}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}throw new At},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Te(5,new we(1,3))),new n(2,12,12,10,10,new Te(7,new we(1,5))),new n(3,14,14,12,12,new Te(10,new we(1,8))),new n(4,16,16,14,14,new Te(12,new we(1,12))),new n(5,18,18,16,16,new Te(14,new we(1,18))),new n(6,20,20,18,18,new Te(18,new we(1,22))),new n(7,22,22,20,20,new Te(20,new we(1,30))),new n(8,24,24,22,22,new Te(24,new we(1,36))),new n(9,26,26,24,24,new Te(28,new we(1,44))),new n(10,32,32,14,14,new Te(36,new we(1,62))),new n(11,36,36,16,16,new Te(42,new we(1,86))),new n(12,40,40,18,18,new Te(48,new we(1,114))),new n(13,44,44,20,20,new Te(56,new we(1,144))),new n(14,48,48,22,22,new Te(68,new we(1,174))),new n(15,52,52,24,24,new Te(42,new we(2,102))),new n(16,64,64,14,14,new Te(56,new we(2,140))),new n(17,72,72,16,16,new Te(36,new we(4,92))),new n(18,80,80,18,18,new Te(48,new we(4,114))),new n(19,88,88,20,20,new Te(56,new we(4,144))),new n(20,96,96,22,22,new Te(68,new we(4,174))),new n(21,104,104,24,24,new Te(56,new we(6,136))),new n(22,120,120,18,18,new Te(68,new we(6,175))),new n(23,132,132,20,20,new Te(62,new we(8,163))),new n(24,144,144,22,22,new Te(62,new we(8,156),new we(2,155))),new n(25,8,18,6,16,new Te(7,new we(1,5))),new n(26,8,32,6,14,new Te(11,new we(1,10))),new n(27,12,26,10,24,new Te(14,new we(1,16))),new n(28,12,36,10,16,new Te(18,new we(1,22))),new n(29,16,36,14,16,new Te(24,new we(1,32))),new n(30,16,48,14,22,new Te(28,new we(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),wit=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new At;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Xs(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return xit.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,s=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),o=!1,l=!1,h=!1,d=!1;do if(r===s&&i===0&&!o)t[e++]=this.readCorner1(s,a)&255,r-=2,i+=2,o=!0;else if(r===s-2&&i===0&&(a&3)!==0&&!l)t[e++]=this.readCorner2(s,a)&255,r-=2,i+=2,l=!0;else if(r===s+4&&i===2&&(a&7)===0&&!h)t[e++]=this.readCorner3(s,a)&255,r-=2,i+=2,h=!0;else if(r===s-2&&i===0&&(a&7)===4&&!d)t[e++]=this.readCorner4(s,a)&255,r-=2,i+=2,d=!0;else{do r<s&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r-=2,i+=2;while(r>=0&&i<a);r+=1,i+=3;do r>=0&&i<a&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r+=2,i-=2;while(r<s&&i>=0);r+=3,i+=1}while(r<s||i<a);if(e!==this.version.getTotalCodewords())throw new At;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var s=0;return this.readModule(t-2,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-2,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e,r,i)&&(s|=1),s<<=1,this.readModule(t,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t,e,r,i)&&(s|=1),s},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new zt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),a=e/i|0,o=r/s|0,l=a*i,h=o*s,d=new Xs(h,l),g=0;g<a;++g)for(var m=g*i,v=0;v<o;++v)for(var x=v*s,b=0;b<i;++b)for(var E=g*(i+2)+1+b,T=m+b,S=0;S<s;++S){var R=v*(s+2)+1+S;if(t.get(R,E)){var P=x+S;d.set(P,T)}}return d},n}(),BO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bit=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,s,a,o=e.getECBlocks(),l=0,h=o.getECBlocks();try{for(var d=BO(h),g=d.next();!g.done;g=d.next()){var m=g.value;l+=m.getCount()}}catch(xt){r={error:xt}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var v=new Array(l),x=0;try{for(var b=BO(h),E=b.next();!E.done;E=b.next())for(var m=E.value,T=0;T<m.getCount();T++){var S=m.getDataCodewords(),R=o.getECCodewords()+S;v[x++]=new n(S,new Uint8Array(R))}}catch(xt){s={error:xt}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}for(var P=v[0].codewords.length,M=P-o.getECCodewords(),H=M-1,O=0,T=0;T<H;T++)for(var C=0;C<x;C++)v[C].codewords[T]=t[O++];for(var N=e.getVersionNumber()===24,B=N?8:x,C=0;C<B;C++)v[C].codewords[M-1]=t[O++];for(var z=v[0].codewords.length,T=M;T<z;T++)for(var C=0;C<x;C++){var G=N?(C+8)%x:C,F=N&&G>7?T-1:T;v[G].codewords[F]=t[O++]}if(O!==t.length)throw new zt;return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),bk=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new zt(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,s=this.bytes;if(r>0){var a=8-r,o=t<a?t:a,l=a-o,h=255>>8-o<<l;e=(s[i]&h)>>l,t-=o,r+=o,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|s[i]&255,i++,t-=8;if(t>0){var l=8-t,h=255>>l<<l;e=e<<t|(s[i]&h)>>l,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),zn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(zn||(zn={}));var Eit=function(){function n(){}return n.decode=function(t){var e=new bk(t),r=new ee,i=new ee,s=new Array,a=zn.ASCII_ENCODE;do if(a===zn.ASCII_ENCODE)a=this.decodeAsciiSegment(e,r,i);else{switch(a){case zn.C40_ENCODE:this.decodeC40Segment(e,r);break;case zn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case zn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case zn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case zn.BASE256_ENCODE:this.decodeBase256Segment(e,r,s);break;default:throw new At}a=zn.ASCII_ENCODE}while(a!==zn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new vy(t,r.toString(),s.length===0?null:s,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var s=t.readBits(8);if(s===0)throw new At;if(s<=128)return i&&(s+=128),e.append(String.fromCharCode(s-1)),zn.ASCII_ENCODE;if(s===129)return zn.PAD_ENCODE;if(s<=229){var a=s-130;a<10&&e.append("0"),e.append(""+a)}else switch(s){case 230:return zn.C40_ENCODE;case 231:return zn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return zn.ANSIX12_ENCODE;case 239:return zn.TEXT_ENCODE;case 240:return zn.EDIFACT_ENCODE;case 241:break;default:if(s!==254||t.available()!==0)throw new At;break}}while(t.available()>0);return zn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new At;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new At}s=0;break;case 3:r?(e.append(String.fromCharCode(l+224)),r=!1):e.append(String.fromCharCode(l+96)),s=0;break;default:throw new At}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new At;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new At}s=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h),s=0}else throw new At;break;default:throw new At}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var s=0;s<3;s++){var a=r[s];switch(a){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(a<14)e.append(String.fromCharCode(a+44));else if(a<40)e.append(String.fromCharCode(a+51));else throw new At;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,s=Math.floor(i/1600);r[0]=s,i-=s*1600,s=Math.floor(i/40),r[1]=s,r[2]=i-s*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var s=8-t.getBitOffset();s!==8&&t.readBits(s);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),s=this.unrandomize255State(t.readBits(8),i++),a;if(s===0?a=t.available()/8|0:s<250?a=s:a=250*(s-249)+this.unrandomize255State(t.readBits(8),i++),a<0)throw new At;for(var o=new Uint8Array(a),l=0;l<a;l++){if(t.available()<8)throw new At;o[l]=this.unrandomize255State(t.readBits(8),i++)}r.push(o);try{e.append(Vi.decode(o,ge.ISO88591))}catch(h){throw new r0("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),Ait=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tit=function(){function n(){this.rsDecoder=new _y(Yr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new wit(t),s=i.getVersion(),a=i.readCodewords(),o=bit.getDataBlocks(a,s),l=0;try{for(var h=Ait(o),d=h.next();!d.done;d=h.next()){var g=d.value;l+=g.getNumDataCodewords()}}catch(R){e={error:R}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var m=new Uint8Array(l),v=o.length,x=0;x<v;x++){var b=o[x],E=b.getCodewords(),T=b.getNumDataCodewords();this.correctErrors(E,T);for(var S=0;S<T;S++)m[S*v+x]=E[S]}return Eit.decode(m)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new ar}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Sit=function(){function n(t){this.image=t,this.rectangleDetector=new xw(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new ut;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],s=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(s,a)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var h=n.sampleGrid(this.image,r,i,s,a,o,l);return new JE(h,[r,i,s,a])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),s=(e.getY()-t.getY())/(r+1);return new Nt(t.getX()+i,t.getY()+s)},n.moveAway=function(t,e,r){var i=t.getX(),s=t.getY();return i<e?i-=1:i+=1,s<r?s-=1:s+=1,new Nt(i,s)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],s=t[2],a=this.transitionsBetween(e,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,s),h=this.transitionsBetween(s,e),d=a,g=[s,e,r,i];return d>o&&(d=o,g[0]=e,g[1]=r,g[2]=i,g[3]=s),d>l&&(d=l,g[0]=r,g[1]=i,g[2]=s,g[3]=e),d>h&&(g[0]=i,g[1]=s,g[2]=e,g[3]=r),g},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=n.shiftPoint(r,i,(a+1)*4),l=n.shiftPoint(i,r,(a+1)*4),h=this.transitionsBetween(o,e),d=this.transitionsBetween(l,s);return h<d?(t[0]=e,t[1]=r,t[2]=i,t[3]=s):(t[0]=r,t[1]=i,t[2]=s,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=this.transitionsBetween(r,s),l=n.shiftPoint(e,r,(o+1)*4),h=n.shiftPoint(i,r,(a+1)*4);a=this.transitionsBetween(l,s),o=this.transitionsBetween(h,s);var d=new Nt(s.getX()+(i.getX()-r.getX())/(a+1),s.getY()+(i.getY()-r.getY())/(a+1)),g=new Nt(s.getX()+(e.getX()-r.getX())/(o+1),s.getY()+(e.getY()-r.getY())/(o+1));if(!this.isValid(d))return this.isValid(g)?g:null;if(!this.isValid(g))return d;var m=this.transitionsBetween(l,d)+this.transitionsBetween(h,d),v=this.transitionsBetween(l,g)+this.transitionsBetween(h,g);return m>v?d:g},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s)+1,o=this.transitionsBetween(i,s)+1,l=n.shiftPoint(e,r,o*4),h=n.shiftPoint(i,r,a*4);a=this.transitionsBetween(l,s)+1,o=this.transitionsBetween(h,s)+1,(a&1)===1&&(a+=1),(o&1)===1&&(o+=1);var d=(e.getX()+r.getX()+i.getX()+s.getX())/4,g=(e.getY()+r.getY()+i.getY()+s.getY())/4;e=n.moveAway(e,d,g),r=n.moveAway(r,d,g),i=n.moveAway(i,d,g),s=n.moveAway(s,d,g);var m,v;return l=n.shiftPoint(e,r,o*4),l=n.shiftPoint(l,s,a*4),m=n.shiftPoint(r,e,o*4),m=n.shiftPoint(m,i,a*4),h=n.shiftPoint(i,s,o*4),h=n.shiftPoint(h,r,a*4),v=n.shiftPoint(s,i,o*4),v=n.shiftPoint(v,e,a*4),[l,m,h,v]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,s,a,o){var l=tA.getInstance();return l.sampleGrid(t,a,o,.5,.5,a-.5,.5,a-.5,o-.5,.5,o-.5,e.getX(),e.getY(),s.getX(),s.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),s=Math.trunc(e.getX()),a=Math.trunc(e.getY()),o=Math.abs(a-i)>Math.abs(s-r);if(o){var l=r;r=i,i=l,l=s,s=a,a=l}for(var h=Math.abs(s-r),d=Math.abs(a-i),g=-h/2,m=i<a?1:-1,v=r<s?1:-1,x=0,b=this.image.get(o?i:r,o?r:i),E=r,T=i;E!==s;E+=v){var S=this.image.get(o?T:E,o?E:T);if(S!==b&&(x++,b=S),g+=d,g>0){if(T===a)break;T+=m,g-=h}}return x},n}(),Ew=function(){function n(){this.decoder=new Tit}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(rn.PURE_BARCODE)){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(s),i=n.NO_POINTS}else{var a=new Sit(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var o=r.getRawBytes(),l=new Or(r.getText(),o,8*o.length,i,Ft.DATA_MATRIX,qe.currentTimeMillis()),h=r.getByteSegments();h!=null&&l.putMetadata(yr.BYTE_SEGMENTS,h);var d=r.getECLevel();return d!=null&&l.putMetadata(yr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0],h=(l-o+1)/i,d=(a-s+1)/i;if(h<=0||d<=0)throw new ut;var g=i/2;s+=g,o+=g;for(var m=new Xs(h,d),v=0;v<d;v++)for(var x=s+v*i,b=0;b<h;b++)t.get(o+b*i,x)&&m.set(b,v);return m},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],s=t[1];i<r&&e.get(i,s);)i++;if(i===r)throw new ut;var a=i-t[0];if(a===0)throw new ut;return a},n.NO_POINTS=[],n}(),Cit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Cit(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Ew,e)||this}return t})(qh);var nh;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(nh||(nh={}));var Iit=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Xi(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new zt;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(nh.L,"L",1),n.M=new n(nh.M,"M",0),n.Q=new n(nh.Q,"Q",3),n.H=new n(nh.H,"H",2),n}(),Rit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ek=function(){function n(t){this.errorCorrectionLevel=Iit.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return se.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,s=Number.MAX_SAFE_INTEGER,a=0;try{for(var o=Rit(n.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var h=l.value,d=h[0];if(d===t||d===e)return new n(h[1]);var g=n.numBitsDiffering(t,d);g<s&&(a=h[1],s=g),t!==e&&(g=n.numBitsDiffering(e,d),g<s&&(a=h[1],s=g))}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s<=3?new n(a):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Dit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var s=Dit(i),a=s.next();!a.done;a=s.next()){var o=a.value;r+=o.getCount()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),j=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),Oit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yl=function(){function n(t,e){for(var r,i,s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=s;var o=0,l=s[0].getECCodewordsPerBlock(),h=s[0].getECBlocks();try{for(var d=Oit(h),g=d.next();!g.done;g=d.next()){var m=g.value;o+=m.getCount()*(m.getDataCodewords()+l)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new At;try{return this.getVersionForNumber((t-17)/4)}catch{throw new At}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new zt;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var s=n.VERSION_DECODE_INFO[i];if(s===t)return n.getVersionForNumber(i+7);var a=Ek.numBitsDiffering(t,s);a<e&&(r=i+7,e=a)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new Xs(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var s=this.alignmentPatternCenters[i]-2,a=0;a<r;a++)i===0&&(a===0||a===r-1)||i===r-1&&a===0||e.setRegion(this.alignmentPatternCenters[a]-2,s,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new tt(7,new j(1,19)),new tt(10,new j(1,16)),new tt(13,new j(1,13)),new tt(17,new j(1,9))),new n(2,Int32Array.from([6,18]),new tt(10,new j(1,34)),new tt(16,new j(1,28)),new tt(22,new j(1,22)),new tt(28,new j(1,16))),new n(3,Int32Array.from([6,22]),new tt(15,new j(1,55)),new tt(26,new j(1,44)),new tt(18,new j(2,17)),new tt(22,new j(2,13))),new n(4,Int32Array.from([6,26]),new tt(20,new j(1,80)),new tt(18,new j(2,32)),new tt(26,new j(2,24)),new tt(16,new j(4,9))),new n(5,Int32Array.from([6,30]),new tt(26,new j(1,108)),new tt(24,new j(2,43)),new tt(18,new j(2,15),new j(2,16)),new tt(22,new j(2,11),new j(2,12))),new n(6,Int32Array.from([6,34]),new tt(18,new j(2,68)),new tt(16,new j(4,27)),new tt(24,new j(4,19)),new tt(28,new j(4,15))),new n(7,Int32Array.from([6,22,38]),new tt(20,new j(2,78)),new tt(18,new j(4,31)),new tt(18,new j(2,14),new j(4,15)),new tt(26,new j(4,13),new j(1,14))),new n(8,Int32Array.from([6,24,42]),new tt(24,new j(2,97)),new tt(22,new j(2,38),new j(2,39)),new tt(22,new j(4,18),new j(2,19)),new tt(26,new j(4,14),new j(2,15))),new n(9,Int32Array.from([6,26,46]),new tt(30,new j(2,116)),new tt(22,new j(3,36),new j(2,37)),new tt(20,new j(4,16),new j(4,17)),new tt(24,new j(4,12),new j(4,13))),new n(10,Int32Array.from([6,28,50]),new tt(18,new j(2,68),new j(2,69)),new tt(26,new j(4,43),new j(1,44)),new tt(24,new j(6,19),new j(2,20)),new tt(28,new j(6,15),new j(2,16))),new n(11,Int32Array.from([6,30,54]),new tt(20,new j(4,81)),new tt(30,new j(1,50),new j(4,51)),new tt(28,new j(4,22),new j(4,23)),new tt(24,new j(3,12),new j(8,13))),new n(12,Int32Array.from([6,32,58]),new tt(24,new j(2,92),new j(2,93)),new tt(22,new j(6,36),new j(2,37)),new tt(26,new j(4,20),new j(6,21)),new tt(28,new j(7,14),new j(4,15))),new n(13,Int32Array.from([6,34,62]),new tt(26,new j(4,107)),new tt(22,new j(8,37),new j(1,38)),new tt(24,new j(8,20),new j(4,21)),new tt(22,new j(12,11),new j(4,12))),new n(14,Int32Array.from([6,26,46,66]),new tt(30,new j(3,115),new j(1,116)),new tt(24,new j(4,40),new j(5,41)),new tt(20,new j(11,16),new j(5,17)),new tt(24,new j(11,12),new j(5,13))),new n(15,Int32Array.from([6,26,48,70]),new tt(22,new j(5,87),new j(1,88)),new tt(24,new j(5,41),new j(5,42)),new tt(30,new j(5,24),new j(7,25)),new tt(24,new j(11,12),new j(7,13))),new n(16,Int32Array.from([6,26,50,74]),new tt(24,new j(5,98),new j(1,99)),new tt(28,new j(7,45),new j(3,46)),new tt(24,new j(15,19),new j(2,20)),new tt(30,new j(3,15),new j(13,16))),new n(17,Int32Array.from([6,30,54,78]),new tt(28,new j(1,107),new j(5,108)),new tt(28,new j(10,46),new j(1,47)),new tt(28,new j(1,22),new j(15,23)),new tt(28,new j(2,14),new j(17,15))),new n(18,Int32Array.from([6,30,56,82]),new tt(30,new j(5,120),new j(1,121)),new tt(26,new j(9,43),new j(4,44)),new tt(28,new j(17,22),new j(1,23)),new tt(28,new j(2,14),new j(19,15))),new n(19,Int32Array.from([6,30,58,86]),new tt(28,new j(3,113),new j(4,114)),new tt(26,new j(3,44),new j(11,45)),new tt(26,new j(17,21),new j(4,22)),new tt(26,new j(9,13),new j(16,14))),new n(20,Int32Array.from([6,34,62,90]),new tt(28,new j(3,107),new j(5,108)),new tt(26,new j(3,41),new j(13,42)),new tt(30,new j(15,24),new j(5,25)),new tt(28,new j(15,15),new j(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new tt(28,new j(4,116),new j(4,117)),new tt(26,new j(17,42)),new tt(28,new j(17,22),new j(6,23)),new tt(30,new j(19,16),new j(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new tt(28,new j(2,111),new j(7,112)),new tt(28,new j(17,46)),new tt(30,new j(7,24),new j(16,25)),new tt(24,new j(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new tt(30,new j(4,121),new j(5,122)),new tt(28,new j(4,47),new j(14,48)),new tt(30,new j(11,24),new j(14,25)),new tt(30,new j(16,15),new j(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new tt(30,new j(6,117),new j(4,118)),new tt(28,new j(6,45),new j(14,46)),new tt(30,new j(11,24),new j(16,25)),new tt(30,new j(30,16),new j(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new tt(26,new j(8,106),new j(4,107)),new tt(28,new j(8,47),new j(13,48)),new tt(30,new j(7,24),new j(22,25)),new tt(30,new j(22,15),new j(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new tt(28,new j(10,114),new j(2,115)),new tt(28,new j(19,46),new j(4,47)),new tt(28,new j(28,22),new j(6,23)),new tt(30,new j(33,16),new j(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new tt(30,new j(8,122),new j(4,123)),new tt(28,new j(22,45),new j(3,46)),new tt(30,new j(8,23),new j(26,24)),new tt(30,new j(12,15),new j(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new tt(30,new j(3,117),new j(10,118)),new tt(28,new j(3,45),new j(23,46)),new tt(30,new j(4,24),new j(31,25)),new tt(30,new j(11,15),new j(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new tt(30,new j(7,116),new j(7,117)),new tt(28,new j(21,45),new j(7,46)),new tt(30,new j(1,23),new j(37,24)),new tt(30,new j(19,15),new j(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new tt(30,new j(5,115),new j(10,116)),new tt(28,new j(19,47),new j(10,48)),new tt(30,new j(15,24),new j(25,25)),new tt(30,new j(23,15),new j(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new tt(30,new j(13,115),new j(3,116)),new tt(28,new j(2,46),new j(29,47)),new tt(30,new j(42,24),new j(1,25)),new tt(30,new j(23,15),new j(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new tt(30,new j(17,115)),new tt(28,new j(10,46),new j(23,47)),new tt(30,new j(10,24),new j(35,25)),new tt(30,new j(19,15),new j(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new tt(30,new j(17,115),new j(1,116)),new tt(28,new j(14,46),new j(21,47)),new tt(30,new j(29,24),new j(19,25)),new tt(30,new j(11,15),new j(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new tt(30,new j(13,115),new j(6,116)),new tt(28,new j(14,46),new j(23,47)),new tt(30,new j(44,24),new j(7,25)),new tt(30,new j(59,16),new j(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new tt(30,new j(12,121),new j(7,122)),new tt(28,new j(12,47),new j(26,48)),new tt(30,new j(39,24),new j(14,25)),new tt(30,new j(22,15),new j(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new tt(30,new j(6,121),new j(14,122)),new tt(28,new j(6,47),new j(34,48)),new tt(30,new j(46,24),new j(10,25)),new tt(30,new j(2,15),new j(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new tt(30,new j(17,122),new j(4,123)),new tt(28,new j(29,46),new j(14,47)),new tt(30,new j(49,24),new j(10,25)),new tt(30,new j(24,15),new j(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new tt(30,new j(4,122),new j(18,123)),new tt(28,new j(13,46),new j(32,47)),new tt(30,new j(48,24),new j(14,25)),new tt(30,new j(42,15),new j(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new tt(30,new j(20,117),new j(4,118)),new tt(28,new j(40,47),new j(7,48)),new tt(30,new j(43,24),new j(22,25)),new tt(30,new j(10,15),new j(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new tt(30,new j(19,118),new j(6,119)),new tt(28,new j(18,47),new j(31,48)),new tt(30,new j(34,24),new j(34,25)),new tt(30,new j(20,15),new j(61,16)))],n}(),nr;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(nr||(nr={}));var FO=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[nr.DATA_MASK_000,new n(nr.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[nr.DATA_MASK_001,new n(nr.DATA_MASK_001,function(t,e){return(t&1)===0})],[nr.DATA_MASK_010,new n(nr.DATA_MASK_010,function(t,e){return e%3===0})],[nr.DATA_MASK_011,new n(nr.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[nr.DATA_MASK_100,new n(nr.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[nr.DATA_MASK_101,new n(nr.DATA_MASK_101,function(t,e){return t*e%6===0})],[nr.DATA_MASK_110,new n(nr.DATA_MASK_110,function(t,e){return t*e%6<3})],[nr.DATA_MASK_111,new n(nr.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),Mit=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new At;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),s=0,a=i-7,r=i-1;r>=a;r--)s=this.copyBit(8,r,s);for(var e=i-8;e<i;e++)s=this.copyBit(e,8,s);if(this.parsedFormatInfo=Ek.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new At},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return yl.getVersionForNumber(e);for(var r=0,i=t-11,s=5;s>=0;s--)for(var a=t-9;a>=i;a--)r=this.copyBit(a,s,r);var o=yl.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(var a=5;a>=0;a--)for(var s=t-9;s>=i;s--)r=this.copyBit(a,s,r);if(o=yl.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new At},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=FO.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var s=e.buildFunctionPattern(),a=!0,o=new Uint8Array(e.getTotalCodewords()),l=0,h=0,d=0,g=i-1;g>0;g-=2){g===6&&g--;for(var m=0;m<i;m++)for(var v=a?i-1-m:m,x=0;x<2;x++)s.get(g-x,v)||(d++,h<<=1,this.bitMatrix.get(g-x,v)&&(h|=1),d===8&&(o[l++]=h,d=0,h=0));a=!a}if(l!==e.getTotalCodewords())throw new At;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=FO.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,s=t.getHeight();i<s;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),UO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nit=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,s,a,o;if(t.length!==e.getTotalCodewords())throw new zt;var l=e.getECBlocksForLevel(r),h=0,d=l.getECBlocks();try{for(var g=UO(d),m=g.next();!m.done;m=g.next()){var v=m.value;h+=v.getCount()}}catch(F){i={error:F}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}var x=new Array(h),b=0;try{for(var E=UO(d),T=E.next();!T.done;T=E.next())for(var v=T.value,S=0;S<v.getCount();S++){var R=v.getDataCodewords(),P=l.getECCodewordsPerBlock()+R;x[b++]=new n(R,new Uint8Array(P))}}catch(F){a={error:F}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}for(var M=x[0].codewords.length,H=x.length-1;H>=0;){var O=x[H].codewords.length;if(O===M)break;H--}H++;for(var C=M-l.getECCodewordsPerBlock(),N=0,S=0;S<C;S++)for(var B=0;B<b;B++)x[B].codewords[S]=t[N++];for(var B=H;B<b;B++)x[B].codewords[C]=t[N++];for(var z=x[0].codewords.length,S=C;S<z;S++)for(var B=0;B<b;B++){var G=B<H?S:S+1;x[B].codewords[G]=t[N++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Oi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Oi||(Oi={}));var $e=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new zt;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Oi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Oi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Oi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Oi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Oi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Oi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Oi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Oi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Oi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Oi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),Pit=function(){function n(){}return n.decode=function(t,e,r,i){var s=new bk(t),a=new ee,o=new Array,l=-1,h=-1;try{var d=null,g=!1,m=void 0;do{if(s.available()<4)m=$e.TERMINATOR;else{var v=s.readBits(4);m=$e.forBits(v)}switch(m){case $e.TERMINATOR:break;case $e.FNC1_FIRST_POSITION:case $e.FNC1_SECOND_POSITION:g=!0;break;case $e.STRUCTURED_APPEND:if(s.available()<16)throw new At;l=s.readBits(8),h=s.readBits(8);break;case $e.ECI:var x=n.parseECIValue(s);if(d=Wn.getCharacterSetECIByValue(x),d===null)throw new At;break;case $e.HANZI:var b=s.readBits(4),E=s.readBits(m.getCharacterCountBits(e));b===n.GB2312_SUBSET&&n.decodeHanziSegment(s,a,E);break;default:var T=s.readBits(m.getCharacterCountBits(e));switch(m){case $e.NUMERIC:n.decodeNumericSegment(s,a,T);break;case $e.ALPHANUMERIC:n.decodeAlphanumericSegment(s,a,T,g);break;case $e.BYTE:n.decodeByteSegment(s,a,T,d,o,i);break;case $e.KANJI:n.decodeKanjiSegment(s,a,T);break;default:throw new At}break}}while(m!==$e.TERMINATOR)}catch{throw new At}return new vy(t,a.toString(),o.length===0?null:o,r===null?null:r.toString(),l,h)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new At;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/96<<8&4294967295|a%96;o<959?o+=41377:o+=42657,i[s]=o>>8&255,i[s+1]=o&255,s+=2,r--}try{e.append(Vi.decode(i,ge.GB2312))}catch(l){throw new At(l)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new At;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/192<<8&4294967295|a%192;o<7936?o+=33088:o+=49472,i[s]=o>>8,i[s+1]=o,s+=2,r--}try{e.append(Vi.decode(i,ge.SHIFT_JIS))}catch(l){throw new At(l)}},n.decodeByteSegment=function(t,e,r,i,s,a){if(8*r>t.available())throw new At;for(var o=new Uint8Array(r),l=0;l<r;l++)o[l]=t.readBits(8);var h;i===null?h=ge.guessEncoding(o,a):h=i.getName();try{e.append(Vi.decode(o,h))}catch(d){throw new At(d)}s.push(o)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new At;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var s=e.length();r>1;){if(t.available()<11)throw new At;var a=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(a/45))),e.append(n.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(t.available()<6)throw new At;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var o=s;o<e.length();o++)e.charAt(o)==="%"&&(o<e.length()-1&&e.charAt(o+1)==="%"?e.deleteCharAt(o+1):e.setCharAt(o,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new At;var i=t.readBits(10);if(i>=1e3)throw new At;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new At;var s=t.readBits(7);if(s>=100)throw new At;e.append(n.toAlphaNumericChar(Math.floor(s/10))),e.append(n.toAlphaNumericChar(s%10))}else if(r===1){if(t.available()<4)throw new At;var a=t.readBits(4);if(a>=10)throw new At;e.append(n.toAlphaNumericChar(a))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new At},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),Ak=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),jO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kit=function(){function n(){this.rsDecoder=new _y(Yr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(Xs.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new Mit(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var s=this.decodeBitMatrixParser(r,e);return s.setOther(new Ak(!0)),s}catch(a){throw i!==null?i:a}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,s,a,o=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),d=Nit.getDataBlocks(h,o,l),g=0;try{for(var m=jO(d),v=m.next();!v.done;v=m.next()){var x=v.value;g+=x.getNumDataCodewords()}}catch(H){r={error:H}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var b=new Uint8Array(g),E=0;try{for(var T=jO(d),S=T.next();!S.done;S=T.next()){var x=S.value,R=x.getCodewords(),P=x.getNumDataCodewords();this.correctErrors(R,P);for(var M=0;M<P;M++)b[E++]=R[M]}}catch(H){s={error:H}}finally{try{S&&!S.done&&(a=T.return)&&a.call(T)}finally{if(s)throw s.error}}return Pit.decode(b,o,l,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new ar}for(var i=0;i<e;i++)t[i]=r[i]},n}(),Lit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vit=function(n){Lit(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.estimatedModuleSize=i,s}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=(this.getX()+r)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+i)/2;return new t(s,a,o)},t}(Nt),Bit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fit=function(){function n(t,e,r,i,s,a,o){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=s,this.moduleSize=a,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,s=this.startY+e/2,a=new Int32Array(3),o=this.image,l=0;l<e;l++){var h=s+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var d=t;d<i&&!o.get(d,h);)d++;for(var g=0;d<i;){if(o.get(d,h))if(g===1)a[1]++;else if(g===2){if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,d);if(m!==null)return m}a[0]=a[2],a[1]=1,a[2]=0,g=1}else a[++g]++;else g===1&&g++,a[g]++;d++}if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ut},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var s=this.image,a=s.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=t;l>=0&&s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&!s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l)&&o[1]<=r;)o[1]++,l++;if(l===a||o[1]>r)return NaN;for(;l<a&&!s.get(e,l)&&o[2]<=r;)o[2]++,l++;if(o[2]>r)return NaN;var h=o[0]+o[1]+o[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,s,a=t[0]+t[1]+t[2],o=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,o,2*t[1],a);if(!isNaN(l)){var h=(t[0]+t[1]+t[2])/3;try{for(var d=Bit(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.aboutEquals(h,l,o))return m.combineEstimate(l,o,h)}}catch(x){i={error:x}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var v=new Vit(o,l,h);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null},n}(),Uit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jit=function(n){Uit(t,n);function t(e,r,i,s){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a.count=s,s===void 0&&(a.count=1),a}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=this.count+1,a=(this.count*this.getX()+r)/s,o=(this.count*this.getY()+e)/s,l=(this.count*this.estimatedModuleSize+i)/s;return new t(a,o,l,s)},t}(Nt),zit=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),pd=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hit=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(rn.TRY_HARDER)!==void 0,r=t!=null&&t.get(rn.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),a=i.getWidth(),o=Math.floor(3*s/(4*n.MAX_MODULES));(o<n.MIN_SKIP||e)&&(o=n.MIN_SKIP);for(var l=!1,h=new Int32Array(5),d=o-1;d<s&&!l;d+=o){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,m=0;m<a;m++)if(i.get(m,d))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var v=this.handlePossibleCenter(h,d,m,r);if(v===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>h[2]&&(d+=x-h[2]-o,m=a-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var v=this.handlePossibleCenter(h,d,a,r);v===!0&&(o=h[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return Nt.orderBestPatterns(b),new zit(b)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var s=e/7,a=s/2;return Math.abs(s-t[0])<a&&Math.abs(s-t[1])<a&&Math.abs(3*s-t[2])<3*a&&Math.abs(s-t[3])<a&&Math.abs(s-t[4])<a},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var s=this.getCrossCheckStateCount(),a=0,o=this.image;t>=a&&e>=a&&o.get(e-a,t-a);)s[2]++,a++;if(t<a||e<a)return!1;for(;t>=a&&e>=a&&!o.get(e-a,t-a)&&s[1]<=r;)s[1]++,a++;if(t<a||e<a||s[1]>r)return!1;for(;t>=a&&e>=a&&o.get(e-a,t-a)&&s[0]<=r;)s[0]++,a++;if(s[0]>r)return!1;var l=o.getHeight(),h=o.getWidth();for(a=1;t+a<l&&e+a<h&&o.get(e+a,t+a);)s[2]++,a++;if(t+a>=l||e+a>=h)return!1;for(;t+a<l&&e+a<h&&!o.get(e+a,t+a)&&s[3]<r;)s[3]++,a++;if(t+a>=l||e+a>=h||s[3]>=r)return!1;for(;t+a<l&&e+a<h&&o.get(e+a,t+a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(s)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var s=this.image,a=s.getHeight(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(e,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(e,l)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(e,l)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var s=this.image,a=s.getWidth(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(l,e);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(l,e)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(l,e)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(l,e);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(l,e)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(l,e)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var s=t[0]+t[1]+t[2]+t[3]+t[4],a=n.centerFromEnd(t,r),o=this.crossCheckVertical(e,Math.floor(a),t[2],s);if(!isNaN(o)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(o),t[2],s),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(a),t[2],s)))){for(var l=s/7,h=!1,d=this.possibleCenters,g=0,m=d.length;g<m;g++){var v=d[g];if(v.aboutEquals(l,o,a)){d[g]=v.combineEstimate(o,a,l),h=!0;break}}if(!h){var x=new jit(a,o,l);d.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var s=pd(this.possibleCenters),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,s=0,a=0,o=this.possibleCenters.length;try{for(var l=pd(this.possibleCenters),h=l.next();!h.done;h=l.next()){var d=h.value;d.getCount()>=n.CENTER_QUORUM&&(s++,a+=d.getEstimatedModuleSize())}}catch(b){t={error:b}}finally{try{h&&!h.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}if(s<3)return!1;var g=a/o,m=0;try{for(var v=pd(this.possibleCenters),x=v.next();!x.done;x=v.next()){var d=x.value;m+=Math.abs(d.getEstimatedModuleSize()-g)}}catch(b){r={error:b}}finally{try{x&&!x.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}return m<=.05*a},n.prototype.selectBestPatterns=function(){var t,e,r,i,s=this.possibleCenters.length;if(s<3)throw new ut;var a=this.possibleCenters,o;if(s>3){var l=0,h=0;try{for(var d=pd(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value,v=m.getEstimatedModuleSize();l+=v,h+=v*v}}catch(M){t={error:M}}finally{try{g&&!g.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}o=l/s;var x=Math.sqrt(h/s-o*o);a.sort(function(M,H){var O=Math.abs(H.getEstimatedModuleSize()-o),C=Math.abs(M.getEstimatedModuleSize()-o);return O<C?-1:O>C?1:0});for(var b=Math.max(.2*o,x),E=0;E<a.length&&a.length>3;E++){var T=a[E];Math.abs(T.getEstimatedModuleSize()-o)>b&&(a.splice(E,1),E--)}}if(a.length>3){var l=0;try{for(var S=pd(a),R=S.next();!R.done;R=S.next()){var P=R.value;l+=P.getEstimatedModuleSize()}}catch(H){r={error:H}}finally{try{R&&!R.done&&(i=S.return)&&i.call(S)}finally{if(r)throw r.error}}o=l/a.length,a.sort(function(H,O){if(O.getCount()===H.getCount()){var C=Math.abs(O.getEstimatedModuleSize()-o),N=Math.abs(H.getEstimatedModuleSize()-o);return C<N?1:C>N?-1:0}else return O.getCount()-H.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Git=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(rn.NEED_RESULT_POINT_CALLBACK);var e=new Hit(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),s=this.calculateModuleSize(e,r,i);if(s<1)throw new ut("No pattern found in proccess finder.");var a=n.computeDimension(e,r,i,s),o=yl.getProvisionalVersionForDimension(a),l=o.getDimensionForVersion()-7,h=null;if(o.getAlignmentPatternCenters().length>0)for(var d=r.getX()-e.getX()+i.getX(),g=r.getY()-e.getY()+i.getY(),m=1-3/l,v=Math.floor(e.getX()+m*(d-e.getX())),x=Math.floor(e.getY()+m*(g-e.getY())),b=4;b<=16;b<<=1)try{h=this.findAlignmentInRegion(s,v,x,b);break}catch(R){if(!(R instanceof ut))throw R}var E=n.createTransform(e,r,i,h,a),T=n.sampleGrid(this.image,E,a),S;return h===null?S=[i,e,r]:S=[i,e,r,h],new JE(T,S)},n.createTransform=function(t,e,r,i,s){var a=s-3.5,o,l,h,d;return i!==null?(o=i.getX(),l=i.getY(),h=a-3,d=h):(o=e.getX()-t.getX()+r.getX(),l=e.getY()-t.getY()+r.getY(),h=a,d=a),vk.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,h,d,3.5,a,t.getX(),t.getY(),e.getX(),e.getY(),o,l,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=tA.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var s=_e.round(Nt.distance(t,e)/i),a=_e.round(Nt.distance(t,r)/i),o=Math.floor((s+a)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new ut("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var s=this.sizeOfBlackWhiteBlackRun(t,e,r,i),a=1,o=t-(r-t);o<0?(a=t/(t-o),o=0):o>=this.image.getWidth()&&(a=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);var l=Math.floor(e-(i-e)*a);return a=1,l<0?(a=e/(e-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-e)/(l-e),l=this.image.getHeight()-1),o=Math.floor(t+(o-t)*a),s+=this.sizeOfBlackWhiteBlackRun(t,e,o,l),s-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var s=Math.abs(i-e)>Math.abs(r-t);if(s){var a=t;t=e,e=a,a=r,r=i,i=a}for(var o=Math.abs(r-t),l=Math.abs(i-e),h=-o/2,d=t<r?1:-1,g=e<i?1:-1,m=0,v=r+d,x=t,b=e;x!==v;x+=d){var E=s?b:x,T=s?x:b;if(m===1===this.image.get(E,T)){if(m===2)return _e.distance(x,b,t,e);m++}if(h+=l,h>0){if(b===i)break;b+=g,h-=o}}return m===2?_e.distance(r+d,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var s=Math.floor(i*t),a=Math.max(0,e-s),o=Math.min(this.image.getWidth()-1,e+s);if(o-a<t*3)throw new ut("Alignment top exceeds estimated module size.");var l=Math.max(0,r-s),h=Math.min(this.image.getHeight()-1,r+s);if(h-l<t*3)throw new ut("Alignment bottom exceeds estimated module size.");var d=new Fit(this.image,a,l,o-a,h-l,t,this.resultPointCallback);return d.find()},n}(),Aw=function(){function n(){this.decoder=new kit}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(rn.PURE_BARCODE)!==void 0){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,e),i=n.NO_POINTS}else{var a=new Git(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(a.getBits(),e),i=a.getPoints()}r.getOther()instanceof Ak&&r.getOther().applyMirroredCorrection(i);var o=new Or(r.getText(),r.getRawBytes(),void 0,i,Ft.QR_CODE,void 0),l=r.getByteSegments();l!==null&&o.putMetadata(yr.BYTE_SEGMENTS,l);var h=r.getECLevel();return h!==null&&o.putMetadata(yr.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(o.putMetadata(yr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(yr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new ut;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0];if(o>=l||s>=a)throw new ut;if(a-s!==l-o&&(l=o+(a-s),l>=t.getWidth()))throw new ut;var h=Math.round((l-o+1)/i),d=Math.round((a-s+1)/i);if(h<=0||d<=0)throw new ut;if(d!==h)throw new ut;var g=Math.floor(i/2);s+=g,o+=g;var m=o+Math.floor((h-1)*i)-l;if(m>0){if(m>g)throw new ut;o-=m}var v=s+Math.floor((d-1)*i)-a;if(v>0){if(v>g)throw new ut;s-=v}for(var x=new Xs(h,d),b=0;b<d;b++)for(var E=s+Math.floor(b*i),T=0;T<h;T++)t.get(o+Math.floor(T*i),E)&&x.set(T,b);return x},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),s=t[0],a=t[1],o=!0,l=0;s<i&&a<r;){if(o!==e.get(s,a)){if(++l===5)break;o=!o}s++,a++}if(s===i||a===r)throw new ut;return(s-t[0])/7},n.NO_POINTS=new Array,n}(),Wit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pe=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return _e.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),s=0;try{for(var a=Wit(t),o=a.next();!o.done;o=a.next()){var l=o.value;i[s++]=l}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=qn.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),qit=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Yit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xit=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),s=n.detect(r,i);return s.length||(i=i.clone(),i.rotate180(),s=n.detect(r,i)),new qit(i,s)},n.detect=function(t,e){for(var r,i,s=new Array,a=0,o=0,l=!1;a<e.getHeight();){var h=n.findVertices(e,a,o);if(h[0]==null&&h[3]==null){if(!l)break;l=!1,o=0;try{for(var d=(r=void 0,Yit(s)),g=d.next();!g.done;g=d.next()){var m=g.value;m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())))}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}a+=n.ROW_STEP;continue}if(l=!0,s.push(h),!t)break;h[2]!=null?(o=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(o=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return s},n.findVertices=function(t,e,r){var i=t.getHeight(),s=t.getWidth(),a=new Array(8);return n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),e=Math.trunc(a[4].getY())),n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),a},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,s,a){for(var o=new Array(4),l=!1,h=new Int32Array(a.length);i<e;i+=n.ROW_STEP){var d=n.findGuardPattern(t,s,i,r,!1,a,h);if(d!=null){for(;i>0;){var g=n.findGuardPattern(t,s,--i,r,!1,a,h);if(g!=null)d=g;else{i++;break}}o[0]=new Nt(d[0],i),o[1]=new Nt(d[1],i),l=!0;break}}var m=i+1;if(l){for(var v=0,g=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);m<e;m++){var d=n.findGuardPattern(t,g[0],m,r,!1,a,h);if(d!=null&&Math.abs(g[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-d[1])<n.MAX_PATTERN_DRIFT)g=d,v=0;else{if(v>n.SKIPPED_ROW_COUNT_MAX)break;v++}}m-=v+1,o[2]=new Nt(g[0],m),o[3]=new Nt(g[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&qn.fill(o,null),o},n.findGuardPattern=function(t,e,r,i,s,a,o){qn.fillWithin(o,0,o.length,0);for(var l=e,h=0;t.get(l,r)&&l>0&&h++<n.MAX_PIXEL_DRIFT;)l--;for(var d=l,g=0,m=a.length,v=s;d<i;d++){var x=t.get(d,r);if(x!==v)o[g]++;else{if(g===m-1){if(n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=o[0]+o[1],qe.arraycopy(o,2,o,0,g-1),o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,v=!v}}return g===m-1&&n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return 1/0;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,v=g>m?g-m:m-g;if(v>r)return 1/0;h+=v}return h/s},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),Kit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cl=function(){function n(t,e){if(e.length===0)throw new zt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),qe.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var s=Kit(this.coefficients),a=s.next();!a.done;a=s.next()){var o=a.value;i=this.field.add(i,o)}}catch(g){e={error:g}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}for(var l=this.coefficients[0],h=this.coefficients.length,d=1;d<h;d++)l=this.field.add(this.field.multiply(t,l),this.coefficients[d]);return l},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new zt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;qe.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=this.field.add(e[o-a],r[o]);return new n(this.field,s)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new zt("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new zt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=0;o<r;o++)for(var l=e[o],h=0;h<s;h++)a[o+h]=this.field.add(a[o+h],this.field.multiply(l,i[h]));return new n(this.field,a)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new zt;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new ee,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),$it=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new zt;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new yk;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),Qit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zit=function(n){Qit(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var s=1,a=0;a<e;a++)i.expTable[a]=s,s=s*r%e;for(var a=0;a<e-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new cl(i,new Int32Array([0])),i.one=new cl(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new zt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new cl(this,i)},t.PDF417_GF=new t(pe.NUMBER_OF_CODEWORDS,3),t}($it),Jit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tst=function(){function n(){this.field=Zit.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,s,a=new cl(this.field,t),o=new Int32Array(e),l=!1,h=e;h>0;h--){var d=a.evaluateAt(this.field.exp(h));o[e-h]=d,d!==0&&(l=!0)}if(!l)return 0;var g=this.field.getOne();if(r!=null)try{for(var m=Jit(r),v=m.next();!v.done;v=m.next()){var x=v.value,b=this.field.exp(t.length-1-x),E=new cl(this.field,new Int32Array([this.field.subtract(0,b),1]));g=g.multiply(E)}}catch(C){i={error:C}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}for(var T=new cl(this.field,o),S=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),T,e),R=S[0],P=S[1],M=this.findErrorLocations(R),H=this.findErrorMagnitudes(P,R,M),h=0;h<M.length;h++){var O=t.length-1-this.field.log(M[h]);if(O<0)throw ar.getChecksumInstance();t[O]=this.field.subtract(t[O],H[h])}return M.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=t,a=e,o=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(r/2);){var h=s,d=o;if(s=a,o=l,s.isZero())throw ar.getChecksumInstance();a=h;for(var g=this.field.getZero(),m=s.getCoefficient(s.getDegree()),v=this.field.inverse(m);a.getDegree()>=s.getDegree()&&!a.isZero();){var x=a.getDegree()-s.getDegree(),b=this.field.multiply(a.getCoefficient(a.getDegree()),v);g=g.add(this.field.buildMonomial(x,b)),a=a.subtract(s.multiplyByMonomial(x,b))}l=g.multiply(o).subtract(d).negative()}var E=l.getCoefficient(0);if(E===0)throw ar.getChecksumInstance();var T=this.field.inverse(E),S=l.multiply(T),R=a.multiply(T);return[S,R]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,s=1;s<this.field.getSize()&&i<e;s++)t.evaluateAt(s)===0&&(r[i]=this.field.inverse(s),i++);if(i!==e)throw ar.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),s=new Int32Array(i),a=1;a<=i;a++)s[i-a]=this.field.multiply(a,e.getCoefficient(a));for(var o=new cl(this.field,s),l=r.length,h=new Int32Array(l),a=0;a<l;a++){var d=this.field.inverse(r[a]),g=this.field.subtract(0,t.evaluateAt(d)),m=this.field.inverse(o.evaluateAt(d));h[a]=this.field.multiply(g,m)}return h},n}(),Tw=function(){function n(t,e,r,i,s){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,s)}return n.prototype.constructor_1=function(t,e,r,i,s){var a=e==null||r==null,o=i==null||s==null;if(a&&o)throw new ut;a?(e=new Nt(0,i.getY()),r=new Nt(0,s.getY())):o&&(i=new Nt(t.getWidth()-1,e.getY()),s=new Nt(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,s=this.bottomLeft,a=this.topRight,o=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,h=Math.trunc(l.getY()-t);h<0&&(h=0);var d=new Nt(l.getX(),h);r?i=d:a=d}if(e>0){var g=r?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+e);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var v=new Nt(g.getX(),m);r?s=v:o=v}return new n(this.image,i,s,a,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),est=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),nA=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(a,o,l,h,d,g){if(a==="%%")return"%";if(e[++r]!==void 0){a=h?parseInt(h.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,v;switch(g){case"s":v=e[r];break;case"c":v=e[r][0];break;case"f":v=parseFloat(e[r]).toFixed(a);break;case"p":v=parseFloat(e[r]).toPrecision(a);break;case"e":v=parseFloat(e[r]).toExponential(a);break;case"x":v=parseInt(e[r]).toString(m||16);break;case"d":v=parseFloat(parseInt(e[r],m||10).toPrecision(a)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(m);for(var x=parseInt(l),b=l&&l[0]+""=="0"?"0":" ";v.length<x;)v=o!==void 0?v+b:b+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(s,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),nst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tk=function(){function n(t){this.boundingBox=new Tw(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new nA,i=0;try{for(var s=nst(this.codewords),a=s.next();!a.done;a=s.next()){var o=a.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),rst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ist=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return s},Pd=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,s=function(g,m){var v={getKey:function(){return g},getValue:function(){return m}};v.getValue()>r?(r=v.getValue(),i=[],i.push(v.getKey())):v.getValue()===r&&i.push(v.getKey())};try{for(var a=rst(this.values.entries()),o=a.next();!o.done;o=a.next()){var l=ist(o.value,2),h=l[0],d=l[1];s(h,d)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return pe.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),sst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zO=function(n){sst(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=Tx(this.getCodewords()),s=i.next();!s.done;s=i.next()){var a=s.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,d=1,g=0,m=o;m<l;m++)if(r[m]!=null){var v=r[m],x=v.getRowNumber()-h;if(x===0)g++;else if(x===1)d=Math.max(d,g),g=1,h=v.getRowNumber();else if(x<0||v.getRowNumber()>=e.getRowCount()||x>m)r[m]=null;else{var b=void 0;d>2?b=(d-2)*x:b=x;for(var E=b>=m,T=1;T<=b&&!E;T++)E=r[m-T]!=null;E?r[m]=null:(h=v.getRowNumber(),g=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var a=Tx(this.getCodewords()),o=a.next();!o.done;o=a.next()){var l=o.value;if(l!=null){var h=l.getRowNumber();if(h>=s.length)continue;s[h]++}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return s},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.getCodewords(),h=-1,d=a;d<o;d++)if(l[d]!=null){var g=l[d];g.setRowNumberAsRowIndicatorColumn();var m=g.getRowNumber()-h;m===0||(m===1?h=g.getRowNumber():g.getRowNumber()>=e.getRowCount()?l[d]=null:h=g.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),s=new Pd,a=new Pd,o=new Pd,l=new Pd;try{for(var h=Tx(i),d=h.next();!d.done;d=h.next()){var g=d.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var m=g.getValue()%30,v=g.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:a.setValue(m*3+1);break;case 1:l.setValue(m/3),o.setValue(m%3);break;case 2:s.setValue(m+1);break}}}}catch(b){e={error:b}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}if(s.getValue().length===0||a.getValue().length===0||o.getValue().length===0||l.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>pe.MAX_ROWS_IN_BARCODE)return null;var x=new est(s.getValue()[0],a.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var s=e[i];if(e[i]!=null){var a=s.getValue()%30,o=s.getRowNumber();if(o>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:a+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(Tk),ast=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ost=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=pe.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[r];s!=null&&(s.setRowNumber(t[r].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=this.barcodeColumnCount+1;a>0&&s<this.ADJUST_ROW_NUMBER_SKIP;a--){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=1;a<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;a++){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,s;if(this.detectionResultColumns[t-1]!=null){var a=r[e],o=this.detectionResultColumns[t-1].getCodewords(),l=o;this.detectionResultColumns[t+1]!=null&&(l=this.detectionResultColumns[t+1].getCodewords());var h=new Array(14);h[2]=o[e],h[3]=l[e],e>0&&(h[0]=r[e-1],h[4]=o[e-1],h[5]=l[e-1]),e>1&&(h[8]=r[e-2],h[10]=o[e-2],h[11]=l[e-2]),e<r.length-1&&(h[1]=r[e+1],h[6]=o[e+1],h[7]=l[e+1]),e<r.length-2&&(h[9]=r[e+2],h[12]=o[e+2],h[13]=l[e+2]);try{for(var d=ast(h),g=d.next();!g.done;g=d.next()){var m=g.value;if(n.adjustRowNumber(a,m))return}}catch(v){i={error:v}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new nA,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[r];if(s==null){e.format("    |   ");continue}e.format(" %3d|%3d",s.getRowNumber(),s.getValue())}e.format("%n")}return e.toString()},n}(),cst=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),lst=function(){function n(){}return n.initialize=function(){for(var t=0;t<pe.SYMBOL_TABLE.length;t++)for(var e=pe.SYMBOL_TABLE[t],r=e&1,i=0;i<pe.BARS_IN_MODULE;i++){for(var s=0;(e&1)===r;)s+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(pe.BARS_IN_MODULE)),n.RATIOS_TABLE[t][pe.BARS_IN_MODULE-i-1]=Math.fround(s/pe.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=_e.sum(t),r=new Int32Array(pe.BARS_IN_MODULE),i=0,s=0,a=0;a<pe.MODULES_IN_CODEWORD;a++){var o=e/(2*pe.MODULES_IN_CODEWORD)+a*e/pe.MODULES_IN_CODEWORD;s+t[i]<=o&&(s+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return pe.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=_e.sum(t),r=new Array(pe.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var s=_w.MAX_VALUE,a=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var l=0,h=n.RATIOS_TABLE[o],d=0;d<pe.BARS_IN_MODULE;d++){var g=Math.fround(h[d]-r[d]);if(l+=Math.fround(g*g),l>=s)break}l<s&&(s=l,a=pe.SYMBOL_TABLE[o])}return a},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(pe.SYMBOL_TABLE.length).map(function(t){return new Array(pe.BARS_IN_MODULE)}),n}(),ust=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),HO=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),hst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fst=function(n){hst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(Jr),dst=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new fst;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new QE;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),gst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pst=function(n){gst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Jr),mst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yst=function(n){mst(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new zt("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new pst;i=se.MAX_VALUE}this.buf=qn.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new QE;this.ensureCapacity(this.count+i),qe.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return qn.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(dst),je;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(je||(je={}));function Sk(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var t1;function bo(n){if(typeof t1>"u"&&(t1=Sk()),t1===null)throw new Error("BigInt is not supported!");return t1(n)}function vst(){var n=[];n[0]=bo(1);var t=bo(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var _st=function(){function n(){}return n.decode=function(t,e){var r=new ee(""),i=Wn.ISO8859_1;r.enableDecoding(i);for(var s=1,a=t[s++],o=new ust;s<t[0];){switch(a){case n.TEXT_COMPACTION_MODE_LATCH:s=n.textCompaction(t,s,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:s=n.byteCompaction(a,t,i,s,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:s=n.numericCompaction(t,s,r);break;case n.ECI_CHARSET:Wn.getCharacterSetECIByValue(t[s++]);break;case n.ECI_GENERAL_PURPOSE:s+=2;break;case n.ECI_USER_DEFINED:s++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=n.decodeMacroBlock(t,s,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new At;default:s--,s=n.textCompaction(t,s,r);break}if(s<t.length)a=t[s++];else throw At.getFormatInstance()}if(r.length()===0)throw At.getFormatInstance();var l=new vy(null,r.toString(),null,e);return l.setOther(o),l},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw At.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<n.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)i[s]=t[e];r.setSegmentIndex(se.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new ee;e=n.textCompaction(t,e,a),r.setFileId(a.toString());var o=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new ee;e=n.textCompaction(t,e+1,l),r.setFileName(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new ee;e=n.textCompaction(t,e+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new ee;e=n.textCompaction(t,e+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new ee;e=n.numericCompaction(t,e+1,g),r.setSegmentCount(se.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new ee;e=n.numericCompaction(t,e+1,m),r.setTimestamp(HO.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var v=new ee;e=n.numericCompaction(t,e+1,v),r.setChecksum(se.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new ee;e=n.numericCompaction(t,e+1,x),r.setFileSize(HO.parseLong(x.toString()));break;default:throw At.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw At.getFormatInstance()}if(o!==-1){var b=e-o;r.isLastSegment()&&b--,r.setOptionalData(qn.copyOfRange(t,o,o+b))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),s=new Int32Array((t[0]-e)*2),a=0,o=!1;e<t[0]&&!o;){var l=t[e++];if(l<n.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:i[a++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[e++],s[a]=l,a++;break}}return n.decodeTextCompaction(i,s,a,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var s=je.ALPHA,a=je.ALPHA,o=0;o<r;){var l=t[o],h="";switch(s){case je.ALPHA:if(l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.LL:s=je.LOWER;break;case n.ML:s=je.MIXED;break;case n.PS:a=s,s=je.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=je.ALPHA;break}break;case je.LOWER:if(l<26)h=String.fromCharCode(97+l);else switch(l){case 26:h=" ";break;case n.AS:a=s,s=je.ALPHA_SHIFT;break;case n.ML:s=je.MIXED;break;case n.PS:a=s,s=je.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=je.ALPHA;break}break;case je.MIXED:if(l<n.PL)h=n.MIXED_CHARS[l];else switch(l){case n.PL:s=je.PUNCT;break;case 26:h=" ";break;case n.LL:s=je.LOWER;break;case n.AL:s=je.ALPHA;break;case n.PS:a=s,s=je.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=je.ALPHA;break}break;case je.PUNCT:if(l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=je.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=je.ALPHA;break}break;case je.ALPHA_SHIFT:if(s=a,l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:s=je.ALPHA;break}break;case je.PUNCT_SHIFT:if(s=a,l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=je.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=je.ALPHA;break}break}h!==""&&i.append(h),o++}},n.byteCompaction=function(t,e,r,i,s){var a=new yst,o=0,l=0,h=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),g=e[i++];i<e[0]&&!h;)switch(d[o++]=g,l=900*l+g,g=e[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(bo(l)>>bo(8*(5-m))));l=0,o=0}break}i===e[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(d[o++]=g);for(var v=0;v<o;v++)a.write(d[v]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!h;){var x=e[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(bo(l)>>bo(8*(5-m))));l=0,o=0}}break}return s.append(Vi.decode(a.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,s=!1,a=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!s;){var o=t[e++];if(e===t[0]&&(s=!0),o<n.TEXT_COMPACTION_MODE_LATCH)a[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,s=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(r.append(n.decodeBase900toBase10(a,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=bo(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*bo(t[i]);var s=r.toString();if(s.charAt(0)!=="1")throw new At;return s.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Sk()?vst():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),md=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xst=function(){function n(){}return n.decode=function(t,e,r,i,s,a,o){for(var l=new Tw(t,e,r,i,s),h=null,d=null,g,m=!0;;m=!1){if(e!=null&&(h=n.getRowIndicatorColumn(t,l,e,!0,a,o)),i!=null&&(d=n.getRowIndicatorColumn(t,l,i,!1,a,o)),g=n.merge(h,d),g==null)throw ut.getNotFoundInstance();var v=g.getBoundingBox();if(m&&v!=null&&(v.getMinY()<l.getMinY()||v.getMaxY()>l.getMaxY()))l=v;else break}g.setBoundingBox(l);var x=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(x,d);for(var b=h!=null,E=1;E<=x;E++){var T=b?E:x-E;if(g.getDetectionResultColumn(T)===void 0){var S=void 0;T===0||T===x?S=new zO(l,T===0):S=new Tk(l),g.setDetectionResultColumn(T,S);for(var R=-1,P=R,M=l.getMinY();M<=l.getMaxY();M++){if(R=n.getStartColumn(g,T,M,b),R<0||R>l.getMaxX()){if(P===-1)continue;R=P}var H=n.detectCodeword(t,l.getMinX(),l.getMaxX(),b,R,M,a,o);H!=null&&(S.setCodeword(M,H),P=R,a=Math.min(a,H.getWidth()),o=Math.max(o,H.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=Tw.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new ost(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var s=n.getMax(i),a=0;try{for(var o=md(i),l=o.next();!l.done;l=o.next()){var h=l.value;if(a+=s-h,h>0)break}}catch(v){e={error:v}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var d=t.getCodewords(),g=0;a>0&&d[g]==null;g++)a--;for(var m=0,g=i.length-1;g>=0&&(m+=s-i[g],!(i[g]>0));g--);for(var g=d.length-1;m>0&&d[g]==null;g--)m--;return t.getBoundingBox().addMissingRows(a,m,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var s=md(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=Math.max(i,o)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,s,a){for(var o=new zO(e,i),l=0;l<2;l++)for(var h=l===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=e.getMaxY()&&g>=e.getMinY();g+=h){var m=n.detectCodeword(t,0,t.getWidth(),i,d,g,s,a);m!=null&&(o.setCodeword(g,m),i?d=m.getStartX():d=m.getEndX())}return o},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),s=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(s<1||s>pe.MAX_CODEWORDS_IN_BARCODE)throw ut.getNotFoundInstance();r.setValue(s)}else i[0]!==s&&r.setValue(s)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),s=[],a=new Array,o=0;o<t.getBarcodeRowCount();o++)for(var l=0;l<t.getBarcodeColumnCount();l++){var h=e[o][l+1].getValue(),d=o*t.getBarcodeColumnCount()+l;h.length===0?r.push(d):h.length===1?i[d]=h[0]:(a.push(d),s.push(h))}for(var g=new Array(s.length),m=0;m<g.length;m++)g[m]=s[m];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,pe.toIntArray(r),pe.toIntArray(a),g)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,s){for(var a=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<a.length;l++)e[i[l]]=s[l][a[l]];try{return n.decodeCodewords(e,t,r)}catch(d){var h=d instanceof ar;if(!h)throw d}if(a.length===0)throw ar.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<s[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw ar.getChecksumInstance()}throw ar.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,s,a=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),o=0;o<a.length;o++)for(var l=0;l<a[o].length;l++)a[o][l]=new Pd;var h=0;try{for(var d=md(t.getDetectionResultColumns()),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)try{for(var v=(i=void 0,md(m.getCodewords())),x=v.next();!x.done;x=v.next()){var b=x.value;if(b!=null){var E=b.getRowNumber();if(E>=0){if(E>=a.length)continue;a[E][h].setValue(b.getValue())}}}}catch(T){i={error:T}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}h++}}catch(T){e={error:T}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return a},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var s,a,o=i?1:-1,l=null;if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=t.getDetectionResultColumn(e).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var h=0;n.isValidBarcodeColumn(t,e-o);){e-=o;try{for(var d=(s=void 0,md(t.getDetectionResultColumn(e).getCodewords())),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)return(i?m.getEndX():m.getStartX())+o*h*(m.getEndX()-m.getStartX())}}catch(v){s={error:v}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}h++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,s,a,o,l){s=n.adjustCodewordStartColumn(t,e,r,i,s,a);var h=n.getModuleBitCount(t,e,r,i,s,a);if(h==null)return null;var d,g=_e.sum(h);if(i)d=s+g;else{for(var m=0;m<h.length/2;m++){var v=h[m];h[m]=h[h.length-1-m],h[h.length-1-m]=v}d=s,s=d-g}if(!n.checkCodewordSkew(g,o,l))return null;var x=lst.getDecodedValue(h),b=pe.getCodeword(x);return b===-1?null:new cst(s,d,n.getCodewordBucketNumber(x),b)},n.getModuleBitCount=function(t,e,r,i,s,a){for(var o=s,l=new Int32Array(8),h=0,d=i?1:-1,g=i;(i?o<r:o>=e)&&h<l.length;)t.get(o,a)===g?(l[h]++,o+=d):(h++,g=!g);return h===l.length||o===(i?r:e)&&h===l.length-1?l:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,s,a){for(var o=s,l=i?-1:1,h=0;h<2;h++){for(;(i?o>=e:o<r)&&i===t.get(o,a);){if(Math.abs(s-o)>n.CODEWORD_SKEW_SIZE)return s;o+=l}l=-l,i=!i}return o},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw At.getFormatInstance();var i=1<<e+1,s=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var a=_st.decode(t,""+e);return a.setErrorsCorrected(s),a.setErasures(r.length),a},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw ar.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw At.getFormatInstance();var r=t[0];if(r>t.length)throw At.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw At.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new nA,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var s=t[r][i];s.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new tst,n}(),wst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sw=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw ut.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof At||r instanceof ar?ut.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,s,a=new Array,o=Xit.detectMultiple(t,e,r);try{for(var l=wst(o.getPoints()),h=l.next();!h.done;h=l.next()){var d=h.value,g=xst.decode(o.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),m=new Or(g.getText(),g.getRawBytes(),void 0,d,Ft.PDF_417);m.putMetadata(yr.ERROR_CORRECTION_LEVEL,g.getECLevel());var v=g.getOther();v!=null&&m.putMetadata(yr.PDF417_EXTRA_METADATA,v),a.push(m)}}catch(x){i={error:x}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a.map(function(x){return x})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?se.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),bst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),GO=function(n){bst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(Jr),WO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Est=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(rn.TRY_HARDER)!==void 0,r=t==null?null:t.get(rn.POSSIBLE_FORMATS),i=new Array;if(r!=null){var s=r.some(function(a){return a===Ft.UPC_A||a===Ft.UPC_E||a===Ft.EAN_13||a===Ft.EAN_8||a===Ft.CODABAR||a===Ft.CODE_39||a===Ft.CODE_93||a===Ft.CODE_128||a===Ft.ITF||a===Ft.RSS_14||a===Ft.RSS_EXPANDED});s&&!e&&i.push(new Nd(t)),r.includes(Ft.QR_CODE)&&i.push(new Aw),r.includes(Ft.DATA_MATRIX)&&i.push(new Ew),r.includes(Ft.AZTEC)&&i.push(new ww),r.includes(Ft.PDF_417)&&i.push(new Sw),s&&e&&i.push(new Nd(t))}i.length===0&&(e||i.push(new Nd(t)),i.push(new Aw),i.push(new Ew),i.push(new ww),i.push(new Sw),e&&i.push(new Nd(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=WO(this.readers),i=r.next();!i.done;i=r.next()){var s=i.value;s.reset()}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new GO("No readers where selected, nothing can be read.");try{for(var i=WO(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;try{return a.decode(t,this.hints)}catch(o){if(o instanceof GO)continue}}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new ut("No MultiFormat Readers were able to detect the code.")},n}(),Ast=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tst=function(n){Ast(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,s=new Est;return s.setHints(e),i=n.call(this,s,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(qh),Sst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Sst(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Sw,e)||this}return t})(qh);var Cst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Cst(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Aw,e)||this}return t})(qh);var Cw;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Cw||(Cw={}));const e1=Cw;var Ck=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Uo(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,s=e.length;s<=t;s++){var a=r.multiply(new Uo(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));e.push(a),r=a}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new zt("No error correction bytes");var r=t.length-e;if(r<=0)throw new zt("No data bytes provided");var i=this.buildGenerator(e),s=new Int32Array(r);qe.arraycopy(t,0,s,0,r);var a=new Uo(this.field,s);a=a.multiplyByMonomial(e,1);for(var o=a.divide(i)[1],l=o.getCoefficients(),h=e-l.length,d=0;d<h;d++)t[r+d]=0;qe.arraycopy(l,0,t,r+h,l.length)},n}(),kd=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s-1;a++)for(var o=r[a],l=0;l<i-1;l++){var h=o[l];h===o[l+1]&&h===r[a+1][l]&&h===r[a+1][l+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=0;o<i;o++){var l=r[a];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(n.isWhiteHorizontal(l,o-4,o)||n.isWhiteHorizontal(l,o+7,o+11))&&e++,a+6<s&&r[a][o]===1&&r[a+1][o]===0&&r[a+2][o]===1&&r[a+3][o]===1&&r[a+4][o]===1&&r[a+5][o]===0&&r[a+6][o]===1&&(n.isWhiteVertical(r,o,a-4,a)||n.isWhiteVertical(r,o,a+7,a+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var s=r;s<i;s++)if(t[s][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=r[a],l=0;l<i;l++)o[l]===1&&e++;var h=t.getHeight()*t.getWidth(),d=Math.floor(Math.abs(e*2-h)*10/h);return d*n.N4},n.getDataMaskBit=function(t,e,r){var i,s;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:s=r*e,i=(s&1)+s%3;break;case 6:s=r*e,i=(s&1)+s%3&1;break;case 7:s=r*e,i=s%3+(r+e&1)&1;break;default:throw new zt("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),s=e?t.getWidth():t.getHeight(),a=t.getArray(),o=0;o<i;o++){for(var l=0,h=-1,d=0;d<s;d++){var g=e?a[o][d]:a[d][o];g===h?l++:(l>=5&&(r+=n.N1+(l-5)),l=1,h=g)}l>=5&&(r+=n.N1+(l-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Ist=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rst=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=Ist(this.bytes),s=i.next();!s.done;s=i.next()){var a=s.value;qn.fill(a,t)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var s=this.bytes[r],a=e.bytes[r],o=0,l=this.width;o<l;++o)if(s[o]!==a[o])return!1;return!0},n.prototype.toString=function(){for(var t=new ee,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],s=0,a=this.width;s<a;++s)switch(i[s]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),Iw=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new ee;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Dst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ke=function(n){Dst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(Jr),qO=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,s){n.clearMatrix(s),n.embedBasicPatterns(r,s),n.embedTypeInfo(e,i,s),n.maybeEmbedVersionInfo(r,s),n.embedDataBits(t,i,s)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new or;n.makeTypeInfoBits(t,e,i);for(var s=0,a=i.getSize();s<a;++s){var o=i.get(i.getSize()-1-s),l=n.TYPE_INFO_COORDINATES[s],h=l[0],d=l[1];if(r.setBoolean(h,d,o),s<8){var g=r.getWidth()-s-1,m=8;r.setBoolean(g,m,o)}else{var g=8,m=r.getHeight()-7+(s-8);r.setBoolean(g,m,o)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new or;n.makeVersionInfoBits(t,r);for(var i=6*3-1,s=0;s<6;++s)for(var a=0;a<3;++a){var o=r.get(i);i--,e.setBoolean(s,e.getHeight()-11+a,o),e.setBoolean(e.getHeight()-11+a,s,o)}}},n.embedDataBits=function(t,e,r){for(var i=0,s=-1,a=r.getWidth()-1,o=r.getHeight()-1;a>0;){for(a===6&&(a-=1);o>=0&&o<r.getHeight();){for(var l=0;l<2;++l){var h=a-l;if(n.isEmpty(r.get(h,o))){var d=void 0;i<t.getSize()?(d=t.get(i),++i):d=!1,e!==255&&kd.getDataMaskBit(e,h,o)&&(d=!d),r.setBoolean(h,o,d)}}o+=s}s=-s,o+=s,a-=2}if(i!==t.getSize())throw new Ke("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-se.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new zt("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!Iw.isValidMaskPattern(e))throw new Ke("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var s=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(s,10);var a=new or;if(a.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new Ke("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new Ke("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new Ke;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new Ke;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new Ke;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var s=n.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var s=n.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],s=0,a=i.length;s!==a;s++){var o=i[s];if(o>=0)for(var l=0;l!==a;l++){var h=i[l];h>=0&&n.isEmpty(e.get(h,o))&&n.embedPositionAdjustmentPattern(h-2,o-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Ost=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),YO=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return kd.applyMaskPenaltyRule1(t)+kd.applyMaskPenaltyRule2(t)+kd.applyMaskPenaltyRule3(t)+kd.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,s=r!==null&&r.get(e1.CHARACTER_SET)!==void 0;s&&(i=r.get(e1.CHARACTER_SET).toString());var a=this.chooseMode(t,i),o=new or;if(a===$e.BYTE&&(s||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Wn.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(a,o);var h=new or;this.appendBytes(t,a,h,i);var d;if(r!==null&&r.get(e1.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(e1.QR_VERSION).toString(),10);d=yl.getVersionForNumber(g);var m=this.calculateBitsNeeded(a,o,h,d);if(!this.willFit(m,d,e))throw new Ke("Data too big for requested version")}else d=this.recommendVersion(e,a,o,h);var v=new or;v.appendBitArray(o);var x=a===$e.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(x,d,a,v),v.appendBitArray(h);var b=d.getECBlocksForLevel(e),E=d.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(E,v);var T=this.interleaveWithECBytes(v,d.getTotalCodewords(),E,b.getNumBlocks()),S=new Iw;S.setECLevel(e),S.setMode(a),S.setVersion(d);var R=d.getDimensionForVersion(),P=new Rst(R,R),M=this.chooseMaskPattern(T,e,d,P);return S.setMaskPattern(M),qO.buildMatrix(T,e,d,M,P),S.setMatrix(P),S},n.recommendVersion=function(t,e,r,i){var s=this.calculateBitsNeeded(e,r,i,yl.getVersionForNumber(1)),a=this.chooseVersion(s,t),o=this.calculateBitsNeeded(e,r,i,a);return this.chooseVersion(o,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),Wn.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return $e.KANJI;for(var r=!1,i=!1,s=0,a=t.length;s<a;++s){var o=t.charAt(s);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return $e.BYTE}return i?$e.ALPHANUMERIC:r?$e.NUMERIC:$e.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=Vi.encode(t,Wn.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var s=e[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var s=Number.MAX_SAFE_INTEGER,a=-1,o=0;o<Iw.NUM_MASK_PATTERNS;o++){qO.buildMatrix(t,e,r,o,i);var l=this.calculateMaskPenalty(i);l<s&&(s=l,a=o)}return a},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=yl.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new Ke("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),s=e.getECBlocksForLevel(r),a=s.getTotalECCodewords(),o=i-a,l=(t+7)/8;return o>=l},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new Ke("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var s=e.getSize()&7;if(s>0)for(var i=s;i<8;i++)e.appendBit(!1);for(var a=t-e.getSizeInBytes(),i=0;i<a;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new Ke("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,s,a){if(i>=r)throw new Ke("Block ID too large");var o=t%r,l=r-o,h=Math.floor(t/r),d=h+1,g=Math.floor(e/r),m=g+1,v=h-g,x=d-m;if(v!==x)throw new Ke("EC bytes mismatch");if(r!==l+o)throw new Ke("RS blocks mismatch");if(t!==(g+v)*l+(m+x)*o)throw new Ke("Total bytes mismatch");i<l?(s[0]=g,a[0]=v):(s[0]=m,a[0]=x)},n.interleaveWithECBytes=function(t,e,r,i){var s,a,o,l;if(t.getSizeInBytes()!==r)throw new Ke("Number of bits and data bytes does not match");for(var h=0,d=0,g=0,m=new Array,v=0;v<i;++v){var x=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,v,x,b);var E=x[0],T=new Uint8Array(E);t.toBytes(8*h,T,0,E);var S=n.generateECBytes(T,b[0]);m.push(new Ost(T,S)),d=Math.max(d,E),g=Math.max(g,S.length),h+=x[0]}if(r!==h)throw new Ke("Data bytes does not match offset");for(var R=new or,v=0;v<d;++v)try{for(var P=(s=void 0,YO(m)),M=P.next();!M.done;M=P.next()){var H=M.value,T=H.getDataBytes();v<T.length&&R.appendBits(T[v],8)}}catch(B){s={error:B}}finally{try{M&&!M.done&&(a=P.return)&&a.call(P)}finally{if(s)throw s.error}}for(var v=0;v<g;++v)try{for(var O=(o=void 0,YO(m)),C=O.next();!C.done;C=O.next()){var H=C.value,S=H.getErrorCorrectionBytes();v<S.length&&R.appendBits(S[v],8)}}catch(B){o={error:B}}finally{try{C&&!C.done&&(l=O.return)&&l.call(O)}finally{if(o)throw o.error}}if(e!==R.getSizeInBytes())throw new Ke("Interleaving error: "+e+" and "+R.getSizeInBytes()+" differ.");return R},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),s=0;s<r;s++)i[s]=t[s]&255;new Ck(Yr.QR_CODE_FIELD_256).encode(i,e);for(var a=new Uint8Array(e),s=0;s<e;s++)a[s]=i[r+s];return a},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var s=r.getCharacterCountBits(e);if(t>=1<<s)throw new Ke(t+" is bigger than "+((1<<s)-1));i.appendBits(t,s)},n.appendBytes=function(t,e,r,i){switch(e){case $e.NUMERIC:n.appendNumericBytes(t,r);break;case $e.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case $e.BYTE:n.append8BitBytes(t,r,i);break;case $e.KANJI:n.appendKanjiBytes(t,r);break;default:throw new Ke("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getDigit(t.charAt(i));if(i+2<r){var a=n.getDigit(t.charAt(i+1)),o=n.getDigit(t.charAt(i+2));e.appendBits(s*100+a*10+o,10),i+=3}else if(i+1<r){var a=n.getDigit(t.charAt(i+1));e.appendBits(s*10+a,7),i+=2}else e.appendBits(s,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getAlphanumericCode(t.charCodeAt(i));if(s===-1)throw new Ke;if(i+1<r){var a=n.getAlphanumericCode(t.charCodeAt(i+1));if(a===-1)throw new Ke;e.appendBits(s*45+a,11),i+=2}else e.appendBits(s,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=Vi.encode(t,r)}catch(l){throw new Ke(l)}for(var s=0,a=i.length;s!==a;s++){var o=i[s];e.appendBits(o,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=Vi.encode(t,Wn.SJIS)}catch(g){throw new Ke(g)}for(var i=r.length,s=0;s<i;s+=2){var a=r[s]&255,o=r[s+1]&255,l=a<<8&4294967295|o,h=-1;if(l>=33088&&l<=40956?h=l-33088:l>=57408&&l<=60351&&(h=l-49472),h===-1)throw new Ke("Invalid byte sequence");var d=(h>>8)*192+(h&255);e.appendBits(d,13)}},n.appendECI=function(t,e){e.appendBits($e.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Wn.UTF8.getName(),n})();var Mst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Mst(t,n);function t(e,r,i,s,a,o,l,h){var d=n.call(this,o,l)||this;if(d.yuvData=e,d.dataWidth=r,d.dataHeight=i,d.left=s,d.top=a,s+o>r||a+l>i)throw new zt("Crop rectangle does not fit within image data.");return h&&d.reverseHorizontal(o,l),d}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new zt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return qe.arraycopy(this.yuvData,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return qe.arraycopy(this.yuvData,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;qe.arraycopy(this.yuvData,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,s,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),s=this.yuvData,a=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var l=o*e,h=0;h<e;h++){var d=s[a+h*t.THUMBNAIL_SCALE_FACTOR]&255;i[l+h]=4278190080|d*65793}a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,s=0,a=this.top*this.dataWidth+this.left;s<r;s++,a+=this.dataWidth)for(var o=a+e/2,l=a,h=a+e-1;l<o;l++,h--){var d=i[l];i[l]=i[h],i[h]=d}},t.prototype.invert=function(){return new ZE(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(yy);var Nst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Nst(t,n);function t(e,r,i,s,a,o,l){var h=n.call(this,r,i)||this;if(h.dataWidth=s,h.dataHeight=a,h.left=o,h.top=l,e.BYTES_PER_ELEMENT===4){for(var d=r*i,g=new Uint8ClampedArray(d),m=0;m<d;m++){var v=e[m],x=v>>16&255,b=v>>7&510,E=v&255;g[m]=(x+b+E)/4&255}h.luminances=g}else h.luminances=e;if(s===void 0&&(h.dataWidth=r),a===void 0&&(h.dataHeight=i),o===void 0&&(h.left=0),l===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new zt("Crop rectangle does not fit within image data.");return h}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new zt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return qe.arraycopy(this.luminances,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return qe.arraycopy(this.luminances,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;qe.arraycopy(this.luminances,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new ZE(this)},t})(yy);var Pst=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kst=function(n){Pst(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Wn),Lst=function(){function n(){}return n.ISO_8859_1=Wn.ISO8859_1,n}(),Rw,Vst=301,Bst=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=Vst);return{LOG:n,ALOG:t}};Rw=Bst([],[]),Rw.LOG;Rw.ALOG;var XO;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(XO||(XO={}));var KO=129,Ik=230,Fst=231,Ust=235,jst=236,zst=237,Hst=238,Gst=239,Wst=240,Sx=254,qst=254,$O="[)>05",QO="[)>06",ZO="",Me=0,gr=1,Br=2,Hn=3,rr=4,Er=5,Yst=function(){function n(){}return n.prototype.getEncodingMode=function(){return Me},n.prototype.encode=function(t){var e=Ji.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=Ji.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Er:t.writeCodeword(Fst),t.signalEncoderChange(Er);return;case gr:t.writeCodeword(Ik),t.signalEncoderChange(gr);return;case Hn:t.writeCodeword(Hst),t.signalEncoderChange(Hn);break;case Br:t.writeCodeword(Gst),t.signalEncoderChange(Br);break;case rr:t.writeCodeword(Wst),t.signalEncoderChange(rr);break;default:throw new Error("Illegal mode: "+i)}else Ji.isExtendedASCII(r)?(t.writeCodeword(Ust),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(Ji.isDigit(t)&&Ji.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),Xst=function(){function n(){}return n.prototype.getEncodingMode=function(){return Er},n.prototype.encode=function(t){var e=new ee;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=Ji.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Me);break}}var s=e.length()-1,a=1,o=t.getCodewordCount()+s+a;t.updateSymbolInfo(o);var l=t.getSymbolInfo().getDataCapacity()-o>0;if(t.hasMoreCharacters()||l)if(s<=249)e.setCharAt(0,ge.getCharAt(s));else if(s<=1555)e.setCharAt(0,ge.getCharAt(Math.floor(s/250)+249)),e.insert(1,ge.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var h=0,r=e.length();h<r;h++)t.writeCodeword(this.randomize255State(e.charAt(h).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),rA=function(){function n(){}return n.prototype.getEncodingMode=function(){return gr},n.prototype.encodeMaximal=function(t){for(var e=new ee,r=0,i=t.pos,s=0;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,r=this.encodeChar(a,e),e.length()%3===0&&(i=t.pos,s=e.length())}if(s!==e.length()){var o=Math.floor(e.length()/3*2),l=Math.floor(t.getCodewordCount()+o+1);t.updateSymbolInfo(l);var h=t.getSymbolInfo().getDataCapacity()-l,d=Math.floor(e.length()%3);(d===2&&h!==2||d===1&&(r>3||h!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(Ik),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new ee;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),s=Math.floor(e.length()/3)*2,a=t.getCodewordCount()+s;t.updateSymbolInfo(a);var o=t.getSymbolInfo().getDataCapacity()-a;if(!t.hasMoreCharacters()){var l=new ee;for(e.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(t,e,l,i));e.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(t,e,l,i);break}var h=e.length();if(h%3===0){var d=Ji.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){t.signalEncoderChange(Me);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var s=e.length(),a=e.toString().substring(0,s-i);e.setLengthToZero(),e.append(a),t.pos--;var o=t.getCurrentChar();return i=this.encodeChar(o,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,s=t.getCodewordCount()+r;t.updateSymbolInfo(s);var a=t.getSymbolInfo().getDataCapacity()-s;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Sx)}else if(a===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(Sx),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(a>0||t.hasMoreCharacters())&&t.writeCodeword(Sx)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(Me)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,s=new ee;return s.append(r),s.append(i),s.toString()},n}(),Kst=function(){function n(){}return n.prototype.getEncodingMode=function(){return rr},n.prototype.encode=function(t){for(var e=new ee;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var s=e.toString().substring(4);e.setLengthToZero(),e.append(s);var a=Ji.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(Me);break}}}e.append(ge.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),s=t.getRemainingCharacters();if(s>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),s<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var a=r-1,o=this.encodeToCodewords(e.toString()),l=!t.hasMoreCharacters(),h=l&&a<=2;if(a<=2){t.updateSymbolInfo(t.getCodewordCount()+a);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(h=!1,t.updateSymbolInfo(t.getCodewordCount()+o.length))}h?(t.resetSymbolInfo(),t.pos-=a):t.writeCodewords(o)}finally{t.signalEncoderChange(Me)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(ge.getCharAt(t-64)):Ji.illegalCharacter(ge.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,s=e>=3?t.charAt(2).charCodeAt(0):0,a=e>=4?t.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(s<<6)+a,l=o>>16&255,h=o>>8&255,d=o&255,g=new ee;return g.append(l),e>=2&&g.append(h),e>=3&&g.append(d),g.toString()},n}(),$st=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qst=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},be=function(){function n(t,e,r,i,s,a,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=s,this.dataRegions=a,this.rsBlockData=o,this.rsBlockError=l}return n.lookup=function(t,e,r,i,s){var a,o;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!0);try{for(var l=Qst(Jst),h=l.next();!h.done;h=l.next()){var d=h.value;if(!(e===1&&d.rectangular)&&!(e===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&t<=d.dataCapacity)return d}}catch(g){a={error:g}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),Zst=function(n){$st(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(be),Jst=[new be(!1,3,5,8,8,1),new be(!1,5,7,10,10,1),new be(!0,5,7,16,6,1),new be(!1,8,10,12,12,1),new be(!0,10,11,14,6,2),new be(!1,12,12,14,14,1),new be(!0,16,14,24,10,1),new be(!1,18,14,16,16,1),new be(!1,22,18,18,18,1),new be(!0,22,18,16,10,2),new be(!1,30,20,20,20,1),new be(!0,32,24,16,14,2),new be(!1,36,24,22,22,1),new be(!1,44,28,24,24,1),new be(!0,49,28,22,14,2),new be(!1,62,36,14,14,4),new be(!1,86,42,16,16,4),new be(!1,114,48,18,18,4),new be(!1,144,56,20,20,4),new be(!1,174,68,22,22,4),new be(!1,204,84,24,24,4,102,42),new be(!1,280,112,14,14,16,140,56),new be(!1,368,144,16,16,16,92,36),new be(!1,456,192,18,18,16,114,48),new be(!1,576,224,20,20,16,144,56),new be(!1,696,272,22,22,16,174,68),new be(!1,816,336,24,24,16,136,56),new be(!1,1050,408,18,18,36,175,68),new be(!1,1304,496,20,20,36,163,62),new Zst],tat=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(o){return o.charCodeAt(0)}),r=new ee,i=0,s=e.length;i<s;i++){var a=String.fromCharCode(e[i]&255);if(a==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(a)}this.msg=r.toString(),this.shape=0,this.codewords=new ee,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=be.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),eat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nat=function(n){eat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Hn},t.prototype.encode=function(e){for(var r=new ee;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var s=r.length();if(s%3===0){this.writeNextTriplet(e,r);var a=Ji.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Me);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):Ji.illegalCharacter(ge.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=r.length();e.pos-=s,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(qst),e.getNewEncoding()<0&&e.signalEncoderChange(Me)},t}(rA),rat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iat=function(n){rat(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Br},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(rA),Ji=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=KO+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!1);var a=new rA,o=[new Yst,a,new iat,new nat,new Kst,new Xst],l=new tat(t);l.setSymbolShape(e),l.setSizeConstraints(r,i),t.startsWith($O)&&t.endsWith(ZO)?(l.writeCodeword(jst),l.setSkipAtEnd(2),l.pos+=$O.length):t.startsWith(QO)&&t.endsWith(ZO)&&(l.writeCodeword(zst),l.setSkipAtEnd(2),l.pos+=QO.length);var h=Me;for(s&&(a.encodeMaximal(l),h=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[h].encode(l),l.getNewEncoding()>=0&&(h=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var g=l.getSymbolInfo().getDataCapacity();d<g&&h!==Me&&h!==Er&&h!==rr&&l.writeCodeword("þ");var m=l.getCodewords();for(m.length()<g&&m.append(KO);m.length()<g;)m.append(this.randomize253State(m.length()+1));return l.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===Hn&&i===Hn){for(var s=Math.min(e+3,t.length),a=e;a<s;a++)if(!this.isNativeX12(t.charCodeAt(a)))return Me}else if(r===rr&&i===rr){for(var s=Math.min(e+4,t.length),a=e;a<s;a++)if(!this.isNativeEDIFACT(t.charCodeAt(a)))return Me}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===Me?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var s=0,a=new Uint8Array(6),o=[];;){if(e+s===t.length){qn.fill(a,0),qn.fill(o,0);var l=this.findMinimums(i,o,se.MAX_VALUE,a),h=this.getMinimumCount(a);if(o[Me]===l)return Me;if(h===1){if(a[Er]>0)return Er;if(a[rr]>0)return rr;if(a[Br]>0)return Br;if(a[Hn]>0)return Hn}return gr}var d=t.charCodeAt(e+s);if(s++,this.isDigit(d)?i[Me]+=.5:this.isExtendedASCII(d)?(i[Me]=Math.ceil(i[Me]),i[Me]+=2):(i[Me]=Math.ceil(i[Me]),i[Me]++),this.isNativeC40(d)?i[gr]+=2/3:this.isExtendedASCII(d)?i[gr]+=8/3:i[gr]+=4/3,this.isNativeText(d)?i[Br]+=2/3:this.isExtendedASCII(d)?i[Br]+=8/3:i[Br]+=4/3,this.isNativeX12(d)?i[Hn]+=2/3:this.isExtendedASCII(d)?i[Hn]+=13/3:i[Hn]+=10/3,this.isNativeEDIFACT(d)?i[rr]+=3/4:this.isExtendedASCII(d)?i[rr]+=17/4:i[rr]+=13/4,this.isSpecialB256(d)?i[Er]+=4:i[Er]++,s>=4){if(qn.fill(a,0),qn.fill(o,0),this.findMinimums(i,o,se.MAX_VALUE,a),o[Me]<this.min(o[Er],o[gr],o[Br],o[Hn],o[rr]))return Me;if(o[Er]<o[Me]||o[Er]+1<this.min(o[gr],o[Br],o[Hn],o[rr]))return Er;if(o[rr]+1<this.min(o[Er],o[gr],o[Br],o[Hn],o[Me]))return rr;if(o[Br]+1<this.min(o[Er],o[gr],o[rr],o[Hn],o[Me]))return Br;if(o[Hn]+1<this.min(o[Er],o[gr],o[rr],o[Br],o[Me]))return Hn;if(o[gr]+1<this.min(o[Me],o[Er],o[rr],o[Br])){if(o[gr]<o[Hn])return gr;if(o[gr]===o[Hn]){for(var g=e+s+1;g<t.length;){var m=t.charCodeAt(g);if(this.isX12TermSep(m))return Hn;if(!this.isNativeX12(m))break;g++}return gr}}}}},n.min=function(t,e,r,i,s){var a=Math.min(t,Math.min(e,Math.min(r,i)));return s===void 0?a:Math.min(a,s)},n.findMinimums=function(t,e,r,i){for(var s=0;s<6;s++){var a=e[s]=Math.ceil(t[s]);r>a&&(r=a,qn.fill(i,0)),r===a&&(i[s]=i[s]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=se.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),Cx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JO=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return Vi.encode(t,this.charset)!=null}catch{return!1}},n}(),sat=function(){function n(t,e,r){var i,s,a,o,l,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new JO(kst.forName(N))}),this.encoders=[];var d=[];d.push(new JO(Lst.ISO_8859_1));for(var g=e!=null&&e.name.startsWith("UTF"),m=0;m<t.length;m++){var v=!1;try{for(var x=(i=void 0,Cx(d)),b=x.next();!b.done;b=x.next()){var E=b.value,T=t.charAt(m),S=T.charCodeAt(0);if(S===r||E.canEncode(T)){v=!0;break}}}catch(N){i={error:N}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}if(!v)try{for(var R=(a=void 0,Cx(this.ENCODERS)),P=R.next();!P.done;P=R.next()){var E=P.value;if(E.canEncode(t.charAt(m))){d.push(E),v=!0;break}}}catch(N){a={error:N}}finally{try{P&&!P.done&&(o=R.return)&&o.call(R)}finally{if(a)throw a.error}}v||(g=!0)}if(d.length===1&&!g)this.encoders=[d[0]];else{this.encoders=[];var M=0;try{for(var H=Cx(d),O=H.next();!O.done;O=H.next()){var E=O.value;this.encoders[M++]=E}}catch(N){l={error:N}}finally{try{O&&!O.done&&(h=H.return)&&h.call(H)}finally{if(l)throw l.error}}}var C=-1;if(e!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&e.name===this.encoders[m].name){C=m;break}}this.priorityEncoderIndex=C}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return Vi.encode(ge.getCharAt(t),this.encoders[e].name)},n}(),aat=3,oat=function(){function n(t,e,r){this.fnc1=r;var i=new sat(t,e,r);if(i.length()===1)for(var s=0;s<this.bytes.length;s++){var a=t.charAt(s).charCodeAt(0);this.bytes[s]=a===r?1e3:a}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new ee,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,s,a){var o=t.charAt(i).charCodeAt(0),l=0,h=e.length();e.getPriorityEncoderIndex()>=0&&(o===a||e.canEncode(o,e.getPriorityEncoderIndex()))&&(l=e.getPriorityEncoderIndex(),h=l+1);for(var d=l;d<h;d++)(o===a||e.canEncode(o,d))&&this.addEdge(r,i+1,new t4(o,e,d,s,a))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,s=new t4[i+1][e.length()];this.addEdges(t,e,s,0,null,r);for(var a=1;a<=i;a++){for(var o=0;o<e.length();o++)s[a][o]!=null&&a<i&&this.addEdges(t,e,s,a,s[a][o],r);for(var o=0;o<e.length();o++)s[a-1][o]=null}for(var l=-1,h=se.MAX_VALUE,o=0;o<e.length();o++)if(s[i][o]!=null){var d=s[i][o];d.cachedTotalSize<h&&(h=d.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+t+'"');for(var g=[],m=s[i][l];m!=null;){if(m.isFNC1())g.unshift(1e3);else for(var v=e.encode(m.c,m.encoderIndex),a=v.length-1;a>=0;a--)g.unshift(v[a]&255);var x=m.previous===null?0:m.previous.encoderIndex;x!==m.encoderIndex&&g.unshift(256+e.getECIValue(m.encoderIndex)),m=m.previous}for(var b=[],a=0;a<b.length;a++)b[a]=g[a];return b},n}(),t4=function(){function n(t,e,r,i,s){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=s,this.c=t===s?1e3:t;var a=this.isFNC1()?1:e.encode(t,r).length,o=i===null?0:i.encoderIndex;o!==r&&(a+=aat),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),cat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var e4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(e4||(e4={}));(function(n){cat(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r,i)||this;return o.shape=s,o.macroId=a,o}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(oat);var lat=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),n4=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),uat=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),hat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iA=function(n){hat(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.value=r,s.bitCount=i,s}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+se.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(uat),fat=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dat=function(n){fat(t,n);function t(e,r,i){var s=n.call(this,e,0,0)||this;return s.binaryShiftStart=r,s.binaryShiftByteCount=i,s}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(iA);function gat(n,t,e){return new dat(n,t,e)}function yd(n,t,e){return new iA(n,t,e)}var pat=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],jo=0,Im=1,Pi=2,Rk=3,Ns=4,mat=new iA(null,0,0),Ix=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],yat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function vat(n){var t,e;try{for(var r=yat(n),i=r.next();!i.done;i=r.next()){var s=i.value;qn.fill(s,-1)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[jo][Ns]=0,n[Im][Ns]=0,n[Im][jo]=28,n[Rk][Ns]=0,n[Pi][Ns]=0,n[Pi][jo]=15,n}var Dk=vat(qn.createInt32Array(6,6)),_at=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xat=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var s=Ix[this.mode][t];i=yd(i,s&65535,s>>16),r+=s>>16}var a=t===Pi?4:5;return i=yd(i,e,a),new n(i,t,0,r+a)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===Pi?4:5;return r=yd(r,Dk[this.mode][t],i),r=yd(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ns||this.mode===Pi){var s=Ix[r][jo];e=yd(e,s&65535,s>>16),i+=s>>16,r=jo}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(e,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(t+1)),o},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=gat(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(Ix[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],s=this.endBinaryShift(t.length).token;s!==null;s=s.getPrevious())i.unshift(s);var a=new or;try{for(var o=_at(i),l=o.next();!l.done;l=o.next()){var h=l.value;h.appendTo(a,t)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n.prototype.toString=function(){return ge.format("%s bits=%d bytes=%d",pat[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(mat,jo,0,0),n}();function wat(n){var t=ge.getCharCode(" "),e=ge.getCharCode("."),r=ge.getCharCode(",");n[jo][t]=1;for(var i=ge.getCharCode("Z"),s=ge.getCharCode("A"),a=s;a<=i;a++)n[jo][a]=a-s+2;n[Im][t]=1;for(var o=ge.getCharCode("z"),l=ge.getCharCode("a"),a=l;a<=o;a++)n[Im][a]=a-l+2;n[Pi][t]=1;for(var h=ge.getCharCode("9"),d=ge.getCharCode("0"),a=d;a<=h;a++)n[Pi][a]=a-d+2;n[Pi][r]=12,n[Pi][e]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<g.length;m++)n[Rk][ge.getCharCode(g[m])]=m;for(var v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<v.length;m++)ge.getCharCode(v[m])>0&&(n[Ns][ge.getCharCode(v[m])]=m);return n}var Rx=wat(qn.createInt32Array(5,256)),n1=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bat=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=ge.getCharCode(" "),e=ge.getCharCode(`
`),r=n4.singletonList(xat.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ge.getCharCode("\r"):s=a===e?2:0;break;case ge.getCharCode("."):s=a===t?3:0;break;case ge.getCharCode(","):s=a===t?4:0;break;case ge.getCharCode(":"):s=a===t?5:0;break;default:s=0}s>0?(r=n.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}var o=n4.min(r,function(l,h){return l.getBitCount()-h.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,s=[];try{for(var a=n1(t),o=a.next();!o.done;o=a.next()){var l=o.value;this.updateStateForChar(l,e,s)}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return n.simplifyStates(s)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,s=Rx[t.getMode()][i]>0,a=null,o=0;o<=Ns;o++){var l=Rx[o][i];if(l>0){if(a==null&&(a=t.endBinaryShift(e)),!s||o===t.getMode()||o===Pi){var h=a.latchAndAppend(o,l);r.push(h)}if(!s&&Dk[t.getMode()][o]>=0){var d=a.shiftAndAppend(o,l);r.push(d)}}}if(t.getBinaryShiftByteCount()>0||Rx[t.getMode()][i]===0){var g=t.addBinaryShiftChar(e);r.push(g)}},n.updateStateListForPair=function(t,e,r){var i,s,a=[];try{for(var o=n1(t),l=o.next();!l.done;l=o.next()){var h=l.value;this.updateStateForPair(h,e,r,a)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(a)},n.updateStateForPair=function(t,e,r,i){var s=t.endBinaryShift(e);if(i.push(s.latchAndAppend(Ns,r)),t.getMode()!==Ns&&i.push(s.shiftAndAppend(Ns,r)),r===3||r===4){var a=s.latchAndAppend(Pi,16-r).latchAndAppend(Pi,1);i.push(a)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(o)}},n.simplifyStates=function(t){var e,r,i,s,a=[];try{for(var o=n1(t),l=o.next();!l.done;l=o.next()){var h=l.value,d=!0,g=function(E){if(E.isBetterThanOrEqualTo(h))return d=!1,"break";h.isBetterThanOrEqualTo(E)&&(a=a.filter(function(T){return T!==E}))};try{for(var m=(i=void 0,n1(a)),v=m.next();!v.done;v=m.next()){var x=v.value,b=g(x);if(b==="break")break}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}d&&a.push(h)}}catch(E){e={error:E}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n}(),Eat=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new bat(t).encode(),s=se.truncDivision(i.getSize()*e,100)+11,a=i.getSize()+s,o,l,h,d,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,l=Math.abs(r),l>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new zt(ge.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(l,o),d=n.WORD_SIZE[l];var m=h-h%d;if(g=n.stuffBits(i,d),g.getSize()+s>m)throw new zt("Data to large for user specified layer");if(o&&g.getSize()>d*64)throw new zt("Data to large for user specified layer")}else{d=0,g=null;for(var v=0;;v++){if(v>n.MAX_NB_BITS)throw new zt("Data too large for an Aztec code");if(o=v<=3,l=o?v+1:v,h=n.totalBitsInLayer(l,o),!(a>h)){(g==null||d!==n.WORD_SIZE[l])&&(d=n.WORD_SIZE[l],g=n.stuffBits(i,d));var m=h-h%d;if(!(o&&g.getSize()>d*64)&&g.getSize()+s<=m)break}}}var x=n.generateCheckWords(g,h,d),b=g.getSize()/d,E=n.generateModeMessage(o,l,b),T=(o?11:14)+l*4,S=new Int32Array(T),R;if(o){R=T;for(var v=0;v<S.length;v++)S[v]=v}else{R=T+1+2*se.truncDivision(se.truncDivision(T,2)-1,15);for(var P=se.truncDivision(T,2),M=se.truncDivision(R,2),v=0;v<P;v++){var H=v+se.truncDivision(v,15);S[P-v-1]=M-H-1,S[P+v]=M+H+1}}for(var O=new Xs(R),v=0,C=0;v<l;v++){for(var N=(l-v)*4+(o?9:12),B=0;B<N;B++)for(var z=B*2,G=0;G<2;G++)x.get(C+z+G)&&O.set(S[v*2+G],S[v*2+B]),x.get(C+N*2+z+G)&&O.set(S[v*2+B],S[T-1-v*2-G]),x.get(C+N*4+z+G)&&O.set(S[T-1-v*2-G],S[T-1-v*2-B]),x.get(C+N*6+z+G)&&O.set(S[T-1-v*2-B],S[v*2+G]);C+=N*8}if(n.drawModeMessage(O,o,R,E),o)n.drawBullsEye(O,se.truncDivision(R,2),5);else{n.drawBullsEye(O,se.truncDivision(R,2),7);for(var v=0,B=0;v<se.truncDivision(T,2)-1;v+=15,B+=16)for(var G=se.truncDivision(R,2)&1;G<R;G+=2)O.set(se.truncDivision(R,2)-B,G),O.set(se.truncDivision(R,2)+B,G),O.set(G,se.truncDivision(R,2)-B),O.set(G,se.truncDivision(R,2)+B)}var F=new lat;return F.setCompact(o),F.setSize(R),F.setLayers(l),F.setCodeWords(b),F.setMatrix(O),F},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var s=e-i;s<=e+i;s++)t.set(s,e-i),t.set(s,e+i),t.set(e-i,s),t.set(e+i,s);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new or;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var s=se.truncDivision(r,2);if(e)for(var a=0;a<7;a++){var o=s-3+a;i.get(a)&&t.set(o,s-5),i.get(a+7)&&t.set(s+5,o),i.get(20-a)&&t.set(o,s+5),i.get(27-a)&&t.set(s-5,o)}else for(var a=0;a<10;a++){var o=s-5+a+se.truncDivision(a,5);i.get(a)&&t.set(o,s-7),i.get(a+10)&&t.set(s+7,o),i.get(29-a)&&t.set(o,s+7),i.get(39-a)&&t.set(s-7,o)}},n.generateCheckWords=function(t,e,r){var i,s,a=t.getSize()/r,o=new Ck(n.getGF(r)),l=se.truncDivision(e,r),h=n.bitsToWords(t,r,l);o.encode(h,l-a);var d=e%r,g=new or;g.appendBits(0,d);try{for(var m=Eat(Array.from(h)),v=m.next();!v.done;v=m.next()){var x=v.value;g.appendBits(x,r)}}catch(b){i={error:b}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),s,a;for(s=0,a=t.getSize()/e;s<a;s++){for(var o=0,l=0;l<e;l++)o|=t.get(s*e+l)?1<<e-l-1:0;i[s]=o}return i},n.getGF=function(t){switch(t){case 4:return Yr.AZTEC_PARAM;case 6:return Yr.AZTEC_DATA_6;case 8:return Yr.AZTEC_DATA_8;case 10:return Yr.AZTEC_DATA_10;case 12:return Yr.AZTEC_DATA_12;default:throw new zt("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new or,i=t.getSize(),s=(1<<e)-2,a=0;a<i;a+=e){for(var o=0,l=0;l<e;l++)(a+l>=i||t.get(a+l))&&(o|=1<<e-1-l);(o&s)===s?(r.appendBits(o&s,e),a--):(o&s)===0?(r.appendBits(o|1,e),a--):r.appendBits(o,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const Ok=st.createContext(),Aat=({children:n})=>{const[t,e]=st.useState({message:"",type:"",visible:!1}),r=st.useCallback((i,s="info")=>{e({message:i,type:s,visible:!0}),setTimeout(()=>e({...t,visible:!1}),4e3)},[]);return k.jsxs(Ok.Provider,{value:{showToast:r},children:[n,t.visible&&k.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:k.jsx("div",{className:`toast show text-white bg-${t.type}`,children:k.jsx("div",{className:"toast-body fw-bold text-center",children:t.message})})})]})},Tat=()=>st.useContext(Ok);var Dx={exports:{}},r4;function Sat(){return r4||(r4=1,function(n){var t=function(e){var r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(et,V,q){et[V]=q.value},a,o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",h=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function g(et,V,q){return Object.defineProperty(et,V,{value:q,enumerable:!0,configurable:!0,writable:!0}),et[V]}try{g({},"")}catch{g=function(V,q,ct){return V[q]=ct}}function m(et,V,q,ct){var nt=V&&V.prototype instanceof R?V:R,mt=Object.create(nt.prototype),St=new K(ct||[]);return s(mt,"_invoke",{value:G(et,q,St)}),mt}e.wrap=m;function v(et,V,q){try{return{type:"normal",arg:et.call(V,q)}}catch(ct){return{type:"throw",arg:ct}}}var x="suspendedStart",b="suspendedYield",E="executing",T="completed",S={};function R(){}function P(){}function M(){}var H={};g(H,l,function(){return this});var O=Object.getPrototypeOf,C=O&&O(O(ot([])));C&&C!==r&&i.call(C,l)&&(H=C);var N=M.prototype=R.prototype=Object.create(H);P.prototype=M,s(N,"constructor",{value:M,configurable:!0}),s(M,"constructor",{value:P,configurable:!0}),P.displayName=g(M,d,"GeneratorFunction");function B(et){["next","throw","return"].forEach(function(V){g(et,V,function(q){return this._invoke(V,q)})})}e.isGeneratorFunction=function(et){var V=typeof et=="function"&&et.constructor;return V?V===P||(V.displayName||V.name)==="GeneratorFunction":!1},e.mark=function(et){return Object.setPrototypeOf?Object.setPrototypeOf(et,M):(et.__proto__=M,g(et,d,"GeneratorFunction")),et.prototype=Object.create(N),et},e.awrap=function(et){return{__await:et}};function z(et,V){function q(mt,St,Tt,Zt){var Ut=v(et[mt],et,St);if(Ut.type==="throw")Zt(Ut.arg);else{var pt=Ut.arg,_t=pt.value;return _t&&typeof _t=="object"&&i.call(_t,"__await")?V.resolve(_t.__await).then(function(bt){q("next",bt,Tt,Zt)},function(bt){q("throw",bt,Tt,Zt)}):V.resolve(_t).then(function(bt){pt.value=bt,Tt(pt)},function(bt){return q("throw",bt,Tt,Zt)})}}var ct;function nt(mt,St){function Tt(){return new V(function(Zt,Ut){q(mt,St,Zt,Ut)})}return ct=ct?ct.then(Tt,Tt):Tt()}s(this,"_invoke",{value:nt})}B(z.prototype),g(z.prototype,h,function(){return this}),e.AsyncIterator=z,e.async=function(et,V,q,ct,nt){nt===void 0&&(nt=Promise);var mt=new z(m(et,V,q,ct),nt);return e.isGeneratorFunction(V)?mt:mt.next().then(function(St){return St.done?St.value:mt.next()})};function G(et,V,q){var ct=x;return function(mt,St){if(ct===E)throw new Error("Generator is already running");if(ct===T){if(mt==="throw")throw St;return vt()}for(q.method=mt,q.arg=St;;){var Tt=q.delegate;if(Tt){var Zt=F(Tt,q);if(Zt){if(Zt===S)continue;return Zt}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(ct===x)throw ct=T,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);ct=E;var Ut=v(et,V,q);if(Ut.type==="normal"){if(ct=q.done?T:b,Ut.arg===S)continue;return{value:Ut.arg,done:q.done}}else Ut.type==="throw"&&(ct=T,q.method="throw",q.arg=Ut.arg)}}}function F(et,V){var q=V.method,ct=et.iterator[q];if(ct===a)return V.delegate=null,q==="throw"&&et.iterator.return&&(V.method="return",V.arg=a,F(et,V),V.method==="throw")||q!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+q+"' method")),S;var nt=v(ct,et.iterator,V.arg);if(nt.type==="throw")return V.method="throw",V.arg=nt.arg,V.delegate=null,S;var mt=nt.arg;if(!mt)return V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,S;if(mt.done)V[et.resultName]=mt.value,V.next=et.nextLoc,V.method!=="return"&&(V.method="next",V.arg=a);else return mt;return V.delegate=null,S}B(N),g(N,d,"Generator"),g(N,l,function(){return this}),g(N,"toString",function(){return"[object Generator]"});function xt(et){var V={tryLoc:et[0]};1 in et&&(V.catchLoc=et[1]),2 in et&&(V.finallyLoc=et[2],V.afterLoc=et[3]),this.tryEntries.push(V)}function wt(et){var V=et.completion||{};V.type="normal",delete V.arg,et.completion=V}function K(et){this.tryEntries=[{tryLoc:"root"}],et.forEach(xt,this),this.reset(!0)}e.keys=function(et){var V=Object(et),q=[];for(var ct in V)q.push(ct);return q.reverse(),function nt(){for(;q.length;){var mt=q.pop();if(mt in V)return nt.value=mt,nt.done=!1,nt}return nt.done=!0,nt}};function ot(et){if(et){var V=et[l];if(V)return V.call(et);if(typeof et.next=="function")return et;if(!isNaN(et.length)){var q=-1,ct=function nt(){for(;++q<et.length;)if(i.call(et,q))return nt.value=et[q],nt.done=!1,nt;return nt.value=a,nt.done=!0,nt};return ct.next=ct}}return{next:vt}}e.values=ot;function vt(){return{value:a,done:!0}}return K.prototype={constructor:K,reset:function(et){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(wt),!et)for(var V in this)V.charAt(0)==="t"&&i.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=a)},stop:function(){this.done=!0;var et=this.tryEntries[0],V=et.completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(et){if(this.done)throw et;var V=this;function q(Zt,Ut){return mt.type="throw",mt.arg=et,V.next=Zt,Ut&&(V.method="next",V.arg=a),!!Ut}for(var ct=this.tryEntries.length-1;ct>=0;--ct){var nt=this.tryEntries[ct],mt=nt.completion;if(nt.tryLoc==="root")return q("end");if(nt.tryLoc<=this.prev){var St=i.call(nt,"catchLoc"),Tt=i.call(nt,"finallyLoc");if(St&&Tt){if(this.prev<nt.catchLoc)return q(nt.catchLoc,!0);if(this.prev<nt.finallyLoc)return q(nt.finallyLoc)}else if(St){if(this.prev<nt.catchLoc)return q(nt.catchLoc,!0)}else if(Tt){if(this.prev<nt.finallyLoc)return q(nt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(et,V){for(var q=this.tryEntries.length-1;q>=0;--q){var ct=this.tryEntries[q];if(ct.tryLoc<=this.prev&&i.call(ct,"finallyLoc")&&this.prev<ct.finallyLoc){var nt=ct;break}}nt&&(et==="break"||et==="continue")&&nt.tryLoc<=V&&V<=nt.finallyLoc&&(nt=null);var mt=nt?nt.completion:{};return mt.type=et,mt.arg=V,nt?(this.method="next",this.next=nt.finallyLoc,S):this.complete(mt)},complete:function(et,V){if(et.type==="throw")throw et.arg;return et.type==="break"||et.type==="continue"?this.next=et.arg:et.type==="return"?(this.rval=this.arg=et.arg,this.method="return",this.next="end"):et.type==="normal"&&V&&(this.next=V),S},finish:function(et){for(var V=this.tryEntries.length-1;V>=0;--V){var q=this.tryEntries[V];if(q.finallyLoc===et)return this.complete(q.completion,q.afterLoc),wt(q),S}},catch:function(et){for(var V=this.tryEntries.length-1;V>=0;--V){var q=this.tryEntries[V];if(q.tryLoc===et){var ct=q.completion;if(ct.type==="throw"){var nt=ct.arg;wt(q)}return nt}}throw new Error("illegal catch attempt")},delegateYield:function(et,V,q){return this.delegate={iterator:ot(et),resultName:V,nextLoc:q},this.method==="next"&&(this.arg=a),S}},e}(n.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Dx)),Dx.exports}var Ox,i4;function sA(){return i4||(i4=1,Ox=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`),Ox}var Mx,s4;function Mk(){if(s4)return Mx;s4=1;const n=sA();let t=0;return Mx=({id:e,action:r,payload:i={}})=>{let s=e;return typeof s>"u"&&(s=n("Job",t),t+=1),{id:s,action:r,payload:i}},Mx}var vd={},a4;function aA(){if(a4)return vd;a4=1;let n=!1;return vd.logging=n,vd.setLogging=t=>{n=t},vd.log=(...t)=>n?console.log.apply(this,t):null,vd}var Nx,o4;function Cat(){if(o4)return Nx;o4=1;const n=Mk(),{log:t}=aA(),e=sA();let r=0;return Nx=()=>{const i=e("Scheduler",r),s={},a={};let o=[];r+=1;const l=()=>o.length,h=()=>Object.keys(s).length,d=()=>{if(o.length!==0){const b=Object.keys(s);for(let E=0;E<b.length;E+=1)if(typeof a[b[E]]>"u"){o[0](s[b[E]]);break}}},g=(b,E)=>new Promise((T,S)=>{const R=n({action:b,payload:E});o.push(async P=>{o.shift(),a[P.id]=R;try{T(await P[b].apply(this,[...E,R.id]))}catch(M){S(M)}finally{delete a[P.id],d()}}),t(`[${i}]: Add ${R.id} to JobQueue`),t(`[${i}]: JobQueue length=${o.length}`),d()});return{addWorker:b=>(s[b.id]=b,t(`[${i}]: Add ${b.id}`),t(`[${i}]: Number of workers=${h()}`),d(),b.id),addJob:async(b,...E)=>{if(h()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return g(b,E)},terminate:async()=>{Object.keys(s).forEach(async b=>{await s[b].terminate()}),o=[]},getQueueLen:l,getNumWorkers:h}},Nx}function Iat(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Px,c4;function Rat(){return c4||(c4=1,Px=n=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof Iat=="function"&&(t.type="node"),typeof n>"u"?t:t[n]}),Px}var kx,l4;function Dat(){if(l4)return kx;l4=1;const t=Rat()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return kx=e=>{const r={...e};return["corePath","workerPath","langPath"].forEach(i=>{e[i]&&(r[i]=t(r[i]))}),r},kx}var Lx,u4;function Nk(){return u4||(u4=1,Lx={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Lx}const Oat="6.0.1",Mat={version:Oat};var Vx,h4;function Nat(){return h4||(h4=1,Vx={workerBlobURL:!0,logger:()=>{}}),Vx}var Bx,f4;function Pat(){if(f4)return Bx;f4=1;const n=Mat.version;return Bx={...Nat(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},Bx}var Fx,d4;function kat(){return d4||(d4=1,Fx=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(r))}else e=new Worker(n);return e}),Fx}var Ux,g4;function Lat(){return g4||(g4=1,Ux=n=>{n.terminate()}),Ux}var jx,p4;function Vat(){return p4||(p4=1,jx=(n,t)=>{n.onmessage=({data:e})=>{t(e)}}),jx}var zx,m4;function Bat(){return m4||(m4=1,zx=async(n,t)=>{n.postMessage(t)}),zx}var Hx,y4;function Fat(){if(y4)return Hx;y4=1;const n=e=>new Promise((r,i)=>{const s=new FileReader;s.onload=()=>{r(s.result)},s.onerror=({target:{error:{code:a}}})=>{i(Error(`File could not be read! Code=${a}`))},s.readAsArrayBuffer(e)}),t=async e=>{let r=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(r=await t(e.src)),e.tagName==="VIDEO"&&(r=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(i=>{e.toBlob(async s=>{r=await n(s),i()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const i=await e.convertToBlob();r=await n(i)}else(e instanceof File||e instanceof Blob)&&(r=await n(e));return new Uint8Array(r)};return Hx=t,Hx}var Gx,v4;function Uat(){if(v4)return Gx;v4=1;const n=Pat(),t=kat(),e=Lat(),r=Vat(),i=Bat(),s=Fat();return Gx={defaultOptions:n,spawnWorker:t,terminateWorker:e,onMessage:r,send:i,loadImage:s},Gx}var Wx,_4;function Pk(){if(_4)return Wx;_4=1;const n=Dat(),t=Mk(),{log:e}=aA(),r=sA(),i=Nk(),{defaultOptions:s,spawnWorker:a,terminateWorker:o,onMessage:l,loadImage:h,send:d}=Uat();let g=0;return Wx=async(m="eng",v=i.LSTM_ONLY,x={},b={})=>{const E=r("Worker",g),{logger:T,errorHandler:S,...R}=n({...s,...x}),P={},M=typeof m=="string"?m.split("+"):m;let H=v,O=b;const C=[i.DEFAULT,i.LSTM_ONLY].includes(v)&&!R.legacyCore;let N,B;const z=new Promise((pt,_t)=>{B=pt,N=_t}),G=pt=>{N(pt.message)};let F=a(R);F.onerror=G,g+=1;const xt=({id:pt,action:_t,payload:bt})=>new Promise((Ot,jt)=>{e(`[${E}]: Start ${pt}, action=${_t}`);const Bt=`${_t}-${pt}`;P[Bt]={resolve:Ot,reject:jt},d(F,{workerId:E,jobId:pt,action:_t,payload:bt})}),wt=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),K=pt=>xt(t({id:pt,action:"load",payload:{options:{lstmOnly:C,corePath:R.corePath,logging:R.logging}}})),ot=(pt,_t,bt)=>xt(t({id:bt,action:"FS",payload:{method:"writeFile",args:[pt,_t]}})),vt=(pt,_t)=>xt(t({id:_t,action:"FS",payload:{method:"readFile",args:[pt,{encoding:"utf8"}]}})),et=(pt,_t)=>xt(t({id:_t,action:"FS",payload:{method:"unlink",args:[pt]}})),V=(pt,_t,bt)=>xt(t({id:bt,action:"FS",payload:{method:pt,args:_t}})),q=(pt,_t)=>xt(t({id:_t,action:"loadLanguage",payload:{langs:pt,options:{langPath:R.langPath,dataPath:R.dataPath,cachePath:R.cachePath,cacheMethod:R.cacheMethod,gzip:R.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(H)&&!R.legacyLang}}})),ct=(pt,_t,bt,Ot)=>xt(t({id:Ot,action:"initialize",payload:{langs:pt,oem:_t,config:bt}})),nt=(pt="eng",_t,bt,Ot)=>{if(C&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(_t))throw Error("Legacy model requested but code missing.");const jt=_t||H;H=jt;const Bt=bt||O;O=Bt;const _n=(typeof pt=="string"?pt.split("+"):pt).filter(Ie=>!M.includes(Ie));return M.push(..._n),_n.length>0?q(_n,Ot).then(()=>ct(pt,jt,Bt,Ot)):ct(pt,jt,Bt,Ot)},mt=(pt={},_t)=>xt(t({id:_t,action:"setParameters",payload:{params:pt}})),St=async(pt,_t={},bt={text:!0},Ot)=>xt(t({id:Ot,action:"recognize",payload:{image:await h(pt),options:_t,output:bt}})),Tt=async(pt,_t)=>{if(C)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return xt(t({id:_t,action:"detect",payload:{image:await h(pt)}}))},Zt=async()=>(F!==null&&(o(F),F=null),Promise.resolve());l(F,({workerId:pt,jobId:_t,status:bt,action:Ot,data:jt})=>{const Bt=`${Ot}-${_t}`;if(bt==="resolve")e(`[${pt}]: Complete ${_t}`),P[Bt].resolve({jobId:_t,data:jt}),delete P[Bt];else if(bt==="reject")if(P[Bt].reject(jt),delete P[Bt],Ot==="load"&&N(jt),S)S(jt);else throw Error(jt);else bt==="progress"&&T({...jt,userJobId:_t})});const Ut={id:E,worker:F,load:wt,writeText:ot,readText:vt,removeFile:et,FS:V,reinitialize:nt,setParameters:mt,recognize:St,detect:Tt,terminate:Zt};return K().then(()=>q(m)).then(()=>ct(m,v,b)).then(()=>B(Ut)).catch(()=>{}),z},Wx}var qx,x4;function jat(){if(x4)return qx;x4=1;const n=Pk();return qx={recognize:async(r,i,s)=>{const a=await n(i,1,s);return a.recognize(r).finally(async()=>{await a.terminate()})},detect:async(r,i)=>{const s=await n("osd",0,i);return s.detect(r).finally(async()=>{await s.terminate()})}},qx}var Yx,w4;function zat(){return w4||(w4=1,Yx={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Yx}var Xx,b4;function Hat(){return b4||(b4=1,Xx={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Xx}var Kx,E4;function Gat(){if(E4)return Kx;E4=1,Sat();const n=Cat(),t=Pk(),e=jat(),r=zat(),i=Nk(),s=Hat(),{setLogging:a}=aA();return Kx={languages:r,OEM:i,PSM:s,createScheduler:n,createWorker:t,setLogging:a,...e},Kx}var Wat=Gat();const A4=Nw(Wat),qat={Fat:["fat","saturates","of which saturates"],Carbohydrate:["carbohydrate","carb"],Sugar:["sugar","sugars","of which sugars"],Fibre:["fibre","fiber"],Protein:["protein","protien"],Salt:["salt","sodium"]};function Yat(n){const t=n.match(/([\d.]+)\s*(g|mg)?/i);if(t){const e=parseFloat(t[1]);if(!isNaN(e)&&e<1e3)return e}return null}function T4(n){const t=n.split(`
`).map(r=>r.trim()).filter(Boolean),e=[];for(const r of t)for(const i of Object.keys(qat))if(r.toLowerCase().includes(i.toLowerCase())){const s=Yat(r);s!==null&&!e.find(a=>a.type===i)&&e.push({type:i,count:s.toFixed(2),serving:"1",total:s.toFixed(2)})}return e}function Xat({isOpen:n,onClose:t,onSave:e,editMeal:r,user:i}){const[s,a]=st.useState("Breakfast"),[o,l]=st.useState(new Date),[h,d]=st.useState([""]),[g,m]=st.useState([[{type:"Protein",count:"",serving:"1",total:""}]]),[v,x]=st.useState(!1),[b,E]=st.useState(!1),[T,S]=st.useState(!1),R=st.useRef(null),[P,M]=st.useState(null),[H,O]=st.useState(null),{showToast:C}=Tat(),[N,B]=st.useState(!1);st.useEffect(()=>{r&&(q(),M(null),a(r.mealType),l(new Date(r.timestamp)),d(r.foodItems.map(pt=>pt.name)),m(r.foodItems.map(pt=>pt.nutrients)),x(!0),S(!1),E(!1))},[r]);const z=["Protein","Fat","Carbohydrate","Sugar","Sugars","Fibre","Fiber","Salt","Caffeine"],G=(pt="")=>{const _t=pt.toLowerCase();return _t==="sugars"?"Sugar":_t==="fiber"?"Fibre":_t==="proteins"?"Protein":_t==="carbohydrates"?"Carbohydrate":_t==="saturated fat"?"Fat":pt},F=()=>{q(),M(null),m([[{type:"Protein",count:"",serving:"1",total:""}]]),d([""]),l(new Date),x(!1),S(!1),E(!1),O(null)},xt=pt=>{q(),x(pt==="manual"),S(pt==="auto"),E(pt==="scan")},wt=()=>{m([...g,[{type:"Protein",count:"",serving:"1",total:""}]]),d([...h,""])},K=pt=>{const _t=[...g];_t[pt].push({type:"Protein",count:"",serving:"1",total:""}),m(_t)},ot=(pt,_t)=>{const bt=[...g];bt[pt].splice(_t,1),m(bt)},vt=g.every(pt=>pt.every(_t=>!_t.count||parseFloat(_t.count)===0)),et=(pt,_t,bt,Ot)=>{const jt=[...g],Bt=jt[pt];if(bt==="serving")Bt.forEach($t=>{$t.serving=Ot;const _n=parseFloat($t.count)||0,Ie=parseFloat(Ot)||1;$t.total=(_n*Ie).toFixed(2)});else{const $t=Bt[_t];$t[bt]=Ot;const _n=parseFloat($t.count)||0,Ie=parseFloat($t.serving)||1;$t.total=(_n*Ie).toFixed(2)}m(jt)},V=()=>{const pt=g.map((bt,Ot)=>({name:h[Ot]||`Food ${Ot+1}`,nutrients:bt})),_t={mealType:s,date:o.toISOString().split("T")[0],timestamp:o.toISOString(),foodItems:pt,kcal:H||Zt(pt)};e(_t),F(),t()},q=()=>{const pt=R.current;pt&&pt.srcObject&&(pt.srcObject.getTracks().forEach(_t=>_t.stop()),pt.srcObject=null),E(!1)},ct=()=>{const pt=R.current;if(!pt||pt.videoWidth===0){C("Camera not ready yet. Wait a moment.");return}const _t=document.createElement("canvas");_t.width=pt.videoWidth,_t.height=pt.videoHeight;const bt=_t.getContext("2d");bt.drawImage(pt,0,0);const Ot=bt.getImageData(0,0,_t.width,_t.height),jt=Ot.data;for(let Bt=0;Bt<jt.length;Bt+=4){const $t=(jt[Bt]+jt[Bt+1]+jt[Bt+2])/3;jt[Bt]=$t,jt[Bt+1]=$t,jt[Bt+2]=$t}bt.putImageData(Ot,0,0),A4.recognize(_t,"eng").then(({data:{text:Bt}})=>{const $t=T4(Bt);$t.length>0?(m([$t]),xt("manual")):C("No nutritional values detected. Try again or enter manually."),q()})},nt=async(pt,_t)=>{var bt;try{const Bt=(bt=(await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(pt)}&search_simple=1&action=process&json=1`)).json()).products)==null?void 0:bt.find(un=>un.nutriments&&un.nutriments["energy-kcal_100g"]&&un.nutriments.proteins_100g);if(!Bt||!Bt.nutriments)throw new Error("No valid nutrition info found.");const $t=Bt.nutriments,_n={Protein:$t.proteins_100g,Fat:$t.fat_100g,Carbohydrate:$t.carbohydrates_100g,Sugar:$t.sugars_100g,Fibre:$t.fiber_100g,Salt:$t.salt_100g,Caffeine:$t.caffeine_100g},Ie=Object.entries(_n).filter(([un,Rt])=>z.includes(un)&&Rt!==void 0).map(([un,Rt])=>({type:un,count:parseFloat(Rt).toFixed(2),serving:"1",total:parseFloat(Rt).toFixed(2)})),Wt=[...g];Wt[_t]=Ie,m(Wt),xt("auto")}catch{C("⚠️ Could not fetch nutrition info. Try a more specific food name.")}},mt=async pt=>{const _t=pt.target.files[0];if(!_t)return;const bt=new Image;bt.src=URL.createObjectURL(_t),bt.onload=async()=>{const Ot=new Tst;try{const jt=await Ot.decodeFromImageElement(bt);await St(jt.getText())}catch{B(!0)}}},St=async pt=>{try{const bt=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${pt}.json`)).json();if(bt.status===0){C("❌ Product not found.");return}const Ot=bt.product.nutriments,jt=bt.product.product_name||"Scanned Product",Bt={Fat:Ot.fat_100g,Carbohydrate:Ot.carbohydrates_100g,Protein:Ot.proteins_100g,Sugar:Ot.sugars_100g,Fibre:Ot.fiber_100g,Salt:Ot.salt_100g,Caffeine:Ot.caffeine_100g},$t=parseFloat(Ot["energy-kcal_100g"])||0;O($t);const _n=Object.entries(Bt).filter(([Ie,Wt])=>z.includes(Ie)&&Wt!==void 0).map(([Ie,Wt])=>({type:Ie,count:parseFloat(Wt).toFixed(2),serving:"1",total:parseFloat(Wt).toFixed(2)}));d([jt]),m([_n]),xt("manual")}catch(_t){C("⚠️ Nutrition fetch failed."),console.error(_t)}},Tt=async pt=>{const _t=pt.target.files[0];if(!_t)return;const bt=new Image;bt.src=URL.createObjectURL(_t),bt.onload=()=>{const Ot=document.createElement("canvas");Ot.width=bt.width,Ot.height=bt.height,Ot.getContext("2d").drawImage(bt,0,0),A4.recognize(Ot,"eng").then(({data:{text:Bt}})=>{const $t=T4(Bt);$t.length>0?(m([$t]),x(!0),C("✅ Nutrients extracted from label","success")):C("⚠️ Could not detect nutrients. Try again or enter manually.","warning")})}},Zt=pt=>{let _t=0;return pt.forEach(bt=>{bt.nutrients.forEach(Ot=>{(Ot.type.toLowerCase().includes("calorie")||Ot.type.toLowerCase().includes("kcal"))&&(_t+=parseFloat(Ot.total||0))})}),_t};if(!n)return null;if(P===null)return k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[k.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),k.jsxs("div",{className:"d-flex flex-column gap-2",children:[k.jsx("button",{className:"btn btn-primary",onClick:()=>M("meal"),children:"Log Meal"}),k.jsx("button",{className:"btn btn-outline-light",onClick:()=>M("weight"),children:"Log Weight"}),k.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{F(),t()},children:"Cancel"})]})]})});return k.jsxs(k.Fragment,{children:[P===null&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[k.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),k.jsxs("div",{className:"d-flex flex-column gap-2",children:[k.jsx("button",{className:"btn btn-primary",onClick:()=>M("meal"),children:"➕ Log Meal"}),k.jsx("button",{className:"btn btn-outline-light",onClick:()=>M("weight"),children:"⚖️ Log Weight"}),k.jsx("button",{className:"btn btn-secondary mt-2",onClick:()=>{F(),t()},children:"Cancel"})]})]})}),P==="meal"&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal-container bg-dark",children:[k.jsxs("div",{className:"modal-header col-md-12 mb-2",style:{display:"flex"},children:[k.jsxs("div",{style:{display:"flex",width:"100%",marginRight:"5%",alignItems:"center"},children:[k.jsx("p",{className:"ModelTitleName",children:"Select Meal"}),k.jsxs("select",{className:"DropDownMeal",value:s,onChange:pt=>a(pt.target.value),children:[k.jsx("option",{children:"Breakfast"}),k.jsx("option",{children:"Lunch"}),k.jsx("option",{children:"Dinner"})]})]}),k.jsx("input",{type:"date",className:"form-control",value:o.toISOString().split("T")[0],onChange:pt=>l(new Date(pt.target.value)),max:new Date().toISOString().split("T")[0],style:{width:"30%"}})]}),k.jsxs("div",{className:"manual-scan-buttons mb-2",children:[k.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>xt("manual"),children:"Manual Entry"}),k.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>xt("auto"),children:"Auto Fill"}),k.jsxs("label",{className:"btn btn-primary btn-sm",children:["Scan Barcode",k.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:mt,style:{display:"none"}})]})]}),N&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[k.jsx("h5",{className:"mb-3",children:"Barcode not recognized"}),k.jsx("p",{children:"Would you like to try scanning the nutrition label instead?"}),k.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[k.jsx("button",{className:"btn btn-secondary",onClick:()=>B(!1),children:"Cancel"}),k.jsxs("label",{className:"btn btn-primary",children:["📷 Scan Label",k.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:pt=>{Tt(pt),B(!1)},style:{display:"none"}})]})]})]})}),b&&k.jsxs("div",{className:"scan-box text-center",children:[k.jsx("video",{ref:R,style:{width:"100%",maxHeight:"200px"}}),k.jsx("button",{className:"btn btn-primary mt-2",onClick:ct,children:"Capture"}),k.jsx("button",{className:"btn btn-danger mt-2 ms-2",onClick:q,children:"Cancel"})]}),v&&Ut(),T&&Ut(!0),k.jsxs("div",{className:"modal-footer mt-3",children:[k.jsx("button",{className:"btn btn-save btn-primary",onClick:V,disabled:vt,children:"Save"}),k.jsx("button",{className:"btn btn-exit btn-danger",onClick:()=>{F(),t()},children:"Exit"})]})]})}),P==="weight"&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[k.jsx(XJ,{user:i}),k.jsx("div",{className:"d-flex justify-content-end",children:k.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{F(),t()},children:"Close"})})]})})]});function Ut(pt=!1){return k.jsxs("div",{className:"TotalFoodSection",children:[g.map((_t,bt)=>k.jsxs("div",{className:"food-section",children:[k.jsxs("div",{className:"FoodNameSection d-flex align-items-center gap-2",children:[k.jsx("textarea",{className:"FoodNameTextArea",value:h[bt],style:{width:"100%"},onChange:Ot=>{const jt=[...h];jt[bt]=Ot.target.value,d(jt)},placeholder:"Enter food name (e.g., boiled egg)"}),pt&&k.jsx("button",{className:"btn btn-sm btn-info",style:{fontSize:"12px",width:"35%"},onClick:()=>nt(h[bt],bt),children:"🔍 Auto-Fill"})]}),k.jsxs("div",{className:"row fw-bold mb-2 text-white",style:{fontSize:"12px",padding:"0 10px"},children:[k.jsx("div",{className:"col",children:"Type"}),k.jsx("div",{className:"col",children:"Count"}),k.jsx("div",{className:"col",children:"Servings"}),k.jsx("div",{className:"col",children:"Total"}),k.jsx("div",{className:"col",children:"Remove"})]}),k.jsx("div",{className:"SplitTable",children:_t.map((Ot,jt)=>k.jsxs("div",{className:"row mb-1",children:[k.jsxs("div",{className:"col",children:[k.jsx("input",{list:`nutrient-options-${bt}-${jt}`,className:"form-control",value:Ot.type,onChange:Bt=>{const $t=G(Bt.target.value);et(bt,jt,"type",$t)}}),k.jsx("datalist",{id:`nutrient-options-${bt}-${jt}`,children:z.map(Bt=>k.jsx("option",{value:Bt},Bt))})]}),k.jsx("div",{className:"col",children:k.jsx("input",{type:"number",className:"form-control",value:Ot.count,onChange:Bt=>et(bt,jt,"count",Bt.target.value)})}),k.jsx("div",{className:"col",children:k.jsx("select",{className:"form-select",value:Ot.serving,onChange:Bt=>et(bt,jt,"serving",Bt.target.value),children:[...Array(10)].map((Bt,$t)=>k.jsx("option",{children:$t+1},$t+1))})}),k.jsx("div",{className:"col",children:k.jsx("input",{type:"number",className:"form-control",value:Ot.total,disabled:!0})}),k.jsx("div",{className:"col text-center",children:k.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>ot(bt,jt),children:"×"})})]},jt))}),k.jsx("button",{className:"AddItemButton mt-1",onClick:()=>K(bt),children:"Add Nutrient"})]},bt)),k.jsx("button",{className:"AddItemButton mt-3",onClick:wt,children:"Add Food Item"})]})}}const Dw="/knowurfood/assets/Logo-L9hp3FVR.png";function Kat({onLoginSuccess:n}){const[t,e]=st.useState("login"),[r,i]=st.useState(1),[s,a]=st.useState(""),[o,l]=st.useState(""),[h,d]=st.useState(""),[g,m]=st.useState(""),[v,x]=st.useState(""),[b,E]=st.useState(2e3),[T,S]=st.useState("Breakfast,Lunch,Dinner"),[R,P]=st.useState("g"),[M,H]=st.useState(""),[O,C]=st.useState(""),[N,B]=st.useState(""),[z,G]=st.useState(""),[F,xt]=st.useState("08:00"),[wt,K]=st.useState("13:00"),[ot,vt]=st.useState("19:00"),[et,V]=st.useState(""),[q,ct]=st.useState("male"),[nt,mt]=st.useState(""),[St,Tt]=st.useState({}),[Zt,Ut]=st.useState(!1),[pt,_t]=st.useState(!1),[bt,Ot]=st.useState(!1);st.useEffect(()=>{if(M&&O&&N&&z&&et&&q){const Wt=Math.max(1,Math.ceil((new Date(z)-new Date)/864e5)),Rt=(N-M)*7700/Wt,Ze=q==="male"?10*M+6.25*O-5*et+5:10*M+6.25*O-5*et-161,pi=Math.round(Ze+Rt);isNaN(pi)||E(pi)}},[M,O,N,z,et,q]);const jt=()=>{a(""),l(""),d(""),m(""),x(""),E(2e3),S("Breakfast,Lunch,Dinner"),P("g"),H(""),C(""),B(""),G(""),xt("08:00"),K("13:00"),vt("19:00"),V(""),ct("male"),mt(""),Tt({}),i(1),Ot(!1)},Bt=()=>{e(Wt=>Wt==="login"?"register":"login"),jt()},$t=()=>{const Wt={};if(r===1&&(s||(Wt.username="Email is required"),o||(Wt.password="Password is required"),h||(Wt.confirmPassword="Please confirm your password"),o&&h&&o!==h&&(Wt.confirmPassword="Passwords do not match")),r===2&&(g||(Wt.firstName="First name is required"),v||(Wt.lastName="Last name is required"),et||(Wt.age="Age is required"),M||(Wt.currentWeight="Current weight is required"),O||(Wt.height="Height is required"),N||(Wt.goalWeight="Goal weight is required"),z||(Wt.goalDate="Goal date is required")),Object.keys(Wt).length>0){Tt(Wt);return}Tt({}),mt(""),i(r+1)},_n=async Wt=>{Wt.preventDefault(),mt(""),Tt({}),Ut(!0);try{let un;if(t==="register")un=await WJ({email:s,password:o,firstName:g,lastName:v,calorieGoal:Number(b),mealOrder:T.split(","),unit:R,currentWeight:parseFloat(M),height:parseFloat(O),goalWeight:parseFloat(N),goalDate:z,breakfastTime:F,lunchTime:wt,dinnerTime:ot,age:parseInt(et),gender:q});else{const Rt=Kb();await qX(Rt,bt?m8:qb);const pi=await HX(Rt,s,o);bt?localStorage.setItem("rememberMe","true"):localStorage.removeItem("rememberMe"),un=pi.user}n(un)}catch(un){mt(un.message)}finally{Ut(!1)}},Ie=()=>{switch(r){case 1:return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"form-row",children:[k.jsx("label",{children:"Email"}),k.jsx("input",{type:"email",className:`form-control ${St.username?"is-invalid":""}`,value:s,onChange:Wt=>a(Wt.target.value)}),St.username&&k.jsx("div",{className:"text-danger",children:St.username})]}),k.jsxs("div",{className:"form-row",children:[k.jsx("label",{children:"Password"}),k.jsx("input",{type:pt?"text":"password",className:`form-control ${St.password?"is-invalid":""}`,value:o,onChange:Wt=>l(Wt.target.value)}),St.password&&k.jsx("div",{className:"text-danger",children:St.password})]}),k.jsxs("div",{className:"form-row",children:[k.jsx("label",{children:"Confirm Password"}),k.jsx("input",{type:pt?"text":"password",className:`form-control ${St.confirmPassword?"is-invalid":""}`,value:h,onChange:Wt=>d(Wt.target.value)}),St.confirmPassword&&k.jsx("div",{className:"text-danger",children:St.confirmPassword})]})]});case 2:return k.jsx(k.Fragment,{});case 3:return k.jsx(k.Fragment,{});default:return null}};return k.jsxs("div",{className:"auth-container fade-slide-in",children:[k.jsx("div",{className:"text-center",children:k.jsx("img",{src:Dw,alt:"KnowUrFood Logo",style:{width:"200px"}})}),k.jsxs("div",{className:"auth-box shadow rounded",children:[k.jsx("h2",{className:"auth-title",children:t==="login"?"LOGIN":"REGISTER"}),k.jsx("form",{onSubmit:Wt=>Wt.preventDefault(),className:"auth-form",children:t==="login"?k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"form-row",children:[k.jsx("label",{children:"Email"}),k.jsx("input",{type:"email",className:"form-control",value:s,onChange:Wt=>a(Wt.target.value),required:!0})]}),k.jsxs("div",{className:"form-row",children:[k.jsx("label",{children:"Password"}),k.jsx("input",{type:pt?"text":"password",className:"form-control",value:o,onChange:Wt=>l(Wt.target.value),required:!0})]}),k.jsxs("div",{className:"form-check",children:[k.jsx("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",checked:bt,onChange:Wt=>Ot(Wt.target.checked)}),k.jsx("label",{className:"form-check-label",htmlFor:"rememberMe",children:"Remember Me"})]}),k.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3 mb-2",onClick:_n,disabled:Zt,children:Zt?k.jsxs(k.Fragment,{children:[k.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Logging in..."]}):"Login"})]}):k.jsxs("div",{className:`fade-step step-${r}`,children:[Ie(),k.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[r>1&&k.jsx("button",{type:"button",className:"btn btn-outline-light",onClick:()=>i(r-1),children:"← Back"}),r<3?k.jsx("button",{type:"button",className:"btn btn-primary ms-auto",onClick:$t,children:"Next →"}):k.jsx("button",{type:"submit",onClick:_n,className:"btn btn-success ms-auto",disabled:Zt,children:Zt?k.jsxs(k.Fragment,{children:[k.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Registering..."]}):"Register"})]})]})}),k.jsxs("p",{className:"text-white text-center mt-3",children:[t==="login"?"Don't have an account?":"Already have an account?"," ",k.jsx("span",{className:"text-link",onClick:Bt,children:t==="login"?"Register":"Login"})]}),nt&&k.jsx("p",{className:"text-danger text-center mt-2",children:nt})]})]})}function $at({user:n,meals:t,onLogout:e,clearAllMeals:r}){const[i,s]=st.useState(""),[a,o]=st.useState(""),[l,h]=st.useState(25),[d,g]=st.useState("male"),[m,v]=st.useState(""),[x,b]=st.useState(""),[E,T]=st.useState(""),[S,R]=st.useState(""),[P,M]=st.useState("Breakfast-Lunch-Dinner"),[H,O]=st.useState("g"),[C,N]=st.useState(!1),[B,z]=st.useState(!1),[G,F]=st.useState("08:00"),[xt,wt]=st.useState("13:00"),[K,ot]=st.useState("19:00"),[vt,et]=st.useState(""),[V,q]=st.useState(""),[ct,nt]=st.useState(""),[mt,St]=st.useState(!1),Tt=n.level||1,Ut=(n.xp||0)%100,pt=100,_t=Ut/pt*100,bt=n.badges||[];st.useEffect(()=>{var Rt;n&&(s(n.firstName||""),o(n.lastName||""),h(n.age||25),g(n.gender||"male"),v(n.height||""),b(n.currentWeight||""),T(n.goalWeight||""),R(n.goalDate||""),M(((Rt=n.mealOrder)==null?void 0:Rt.join("-"))||"Breakfast-Lunch-Dinner"),O(n.unit||"g"),N(n.darkMode??!1),F(n.breakfastTime||"08:00"),wt(n.lunchTime||"13:00"),ot(n.dinnerTime||"19:00"))},[n]);const Ot=async()=>{const Rt={firstName:i,lastName:a,age:l,gender:d,height:m,currentWeight:x,goalWeight:E,goalDate:S,mealOrder:P.split("-"),unit:H,darkMode:C,breakfastTime:G,lunchTime:xt,dinnerTime:K};await gO(n.uid,Rt),alert("✅ Preferences updated successfully!")},jt=()=>{const Rt=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),Ze=document.createElement("a");Ze.href=URL.createObjectURL(Rt),Ze.download="meals.json",Ze.click()},Bt=()=>{if(!t||t.length===0){alert("No meals to export.");return}const Rt=[["Date","Meal Type","Food Name","Fat (g)","Carbs (g)","Protein (g)","Quantity","Unit"]];t.forEach(Ui=>{Ui.foodItems.forEach(as=>{var Xe,ye,vr;Rt.push([Ui.date,Ui.mealType,as.name,((Xe=as.nutrients)==null?void 0:Xe.fat)||"",((ye=as.nutrients)==null?void 0:ye.carbs)||"",((vr=as.nutrients)==null?void 0:vr.protein)||"",as.quantity||"",H])})});const Ze=Rt.map(Ui=>Ui.join(",")).join(`
`),pi=new Blob([Ze],{type:"text/csv"}),ss=document.createElement("a");ss.href=URL.createObjectURL(pi),ss.download="meals.csv",ss.click()},$t=async()=>{window.confirm("⚠️ Are you sure you want to clear all meal data?")&&(z(!0),await r(),z(!1),alert("✅ All meals deleted."))},_n=async()=>{if(!vt&&!V){alert("Please enter a new email or password.");return}try{St(!0);const Ze=Kb().currentUser,pi=Ll.credential(Ze.email,ct);await jX(Ze,pi),vt&&(await GX(Ze,vt),await gO(Ze.uid,{email:vt}),alert("✅ Email updated.")),V&&(await WX(Ze,V),alert("✅ Password updated.")),et(""),q(""),nt("")}catch(Rt){console.error(Rt),alert(`❌ ${Rt.message}`)}finally{St(!1)}},Ie=(t==null?void 0:t.length)||0,Wt=[...new Set(t==null?void 0:t.map(Rt=>Rt.date))],un=Wt.length>0?(Ie/Wt.length).toFixed(1):0;return k.jsxs("div",{className:"home-container",children:[k.jsxs("div",{className:"text-center mb-4",children:[k.jsx("i",{className:"bi bi-person-circle TitleName",style:{fontSize:"3rem"}}),k.jsx("h4",{className:"mt-2 fw-bold TitleName",children:i}),k.jsx("small",{className:"text-white",children:"Profile"})]}),k.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Usage Summary"}),k.jsxs("p",{children:["📅 Days Tracked: ",Wt.length]}),k.jsxs("p",{children:["🍽️ Meals Logged: ",Ie]}),k.jsxs("p",{children:["📊 Avg Meals/Day: ",un]})]}),k.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Your Rewards"}),k.jsxs("p",{children:["🎮 Level ",Tt]}),k.jsx("div",{className:"progress mb-2",style:{height:"6px",background:"#444"},children:k.jsx("div",{className:"progress-bar bg-success",style:{width:`${_t}%`},title:`${Ut}/${pt} XP`})}),k.jsx("p",{children:"🏅 Badges Unlocked:"}),bt.length===0?k.jsx("p",{className:"text-muted small",children:"No badges yet."}):k.jsx("div",{className:"d-flex flex-wrap gap-2",children:bt.map((Rt,Ze)=>k.jsx("span",{className:"badge rounded-pill bg-info text-dark p-2",children:Rt},Ze))})]}),k.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Personal Info"}),k.jsxs("div",{className:"row g-2",children:[k.jsx("div",{className:"col",children:k.jsx("input",{className:"form-control form-control-sm",placeholder:"First Name",value:i,onChange:Rt=>s(Rt.target.value)})}),k.jsx("div",{className:"col",children:k.jsx("input",{className:"form-control form-control-sm",placeholder:"Last Name",value:a,onChange:Rt=>o(Rt.target.value)})})]}),k.jsxs("div",{className:"row g-2 mt-2",children:[k.jsx("div",{className:"col",children:k.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Age",value:l,onChange:Rt=>h(Rt.target.value)})}),k.jsx("div",{className:"col",children:k.jsxs("select",{className:"form-select form-select-sm",value:d,onChange:Rt=>g(Rt.target.value),children:[k.jsx("option",{value:"male",children:"Male"}),k.jsx("option",{value:"female",children:"Female"})]})})]}),k.jsxs("div",{className:"row g-2 mt-2",children:[k.jsx("div",{className:"col",children:k.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Height (cm)",value:m,onChange:Rt=>v(Rt.target.value)})}),k.jsx("div",{className:"col",children:k.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Current Weight",value:x,onChange:Rt=>b(Rt.target.value)})})]}),k.jsxs("div",{className:"row g-2 mt-2",children:[k.jsx("div",{className:"col",children:k.jsx("input",{type:"number",className:"form-control form-control-sm",placeholder:"Goal Weight",value:E,onChange:Rt=>T(Rt.target.value)})}),k.jsx("div",{className:"col",children:k.jsx("input",{type:"date",className:"form-control form-control-sm",value:S,onChange:Rt=>R(Rt.target.value)})})]})]}),k.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Preferences"}),k.jsxs("div",{className:"mb-2",children:[k.jsx("label",{className:"form-label small",children:"Meal Order"}),k.jsxs("select",{className:"form-select form-select-sm",value:P,onChange:Rt=>M(Rt.target.value),children:[k.jsx("option",{children:"Breakfast-Lunch-Dinner"}),k.jsx("option",{children:"Lunch-Dinner-Breakfast"}),k.jsx("option",{children:"Dinner-Breakfast-Lunch"})]})]}),k.jsxs("div",{className:"mb-2",children:[k.jsx("label",{className:"form-label small",children:"Units"}),k.jsxs("select",{className:"form-select form-select-sm",value:H,onChange:Rt=>O(Rt.target.value),children:[k.jsx("option",{children:"g"}),k.jsx("option",{children:"mg"}),k.jsx("option",{children:"kcal"})]})]}),k.jsxs("div",{className:"form-check form-switch mb-2",children:[k.jsx("input",{className:"form-check-input",type:"checkbox",checked:C,onChange:Rt=>N(Rt.target.checked)}),k.jsx("label",{className:"form-check-label",children:"Enable Dark Mode"})]})]}),k.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Reminder Times"}),k.jsxs("div",{className:"row g-2 mb-2",children:[k.jsx("div",{className:"col",children:k.jsx("input",{type:"time",className:"form-control form-control-sm",value:G,onChange:Rt=>F(Rt.target.value)})}),k.jsx("div",{className:"col",children:k.jsx("input",{type:"time",className:"form-control form-control-sm",value:xt,onChange:Rt=>wt(Rt.target.value)})}),k.jsx("div",{className:"col",children:k.jsx("input",{type:"time",className:"form-control form-control-sm",value:K,onChange:Rt=>ot(Rt.target.value)})})]})]}),k.jsx("button",{className:"btn btn-primary btn-sm w-100 mb-3",onClick:Ot,children:"💾 Save All Changes"}),k.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Update Email / Password"}),k.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"Current Password",value:ct,onChange:Rt=>nt(Rt.target.value)}),k.jsx("input",{type:"email",className:"form-control form-control-sm mb-2",placeholder:"New Email",value:vt,onChange:Rt=>et(Rt.target.value)}),k.jsx("input",{type:"password",className:"form-control form-control-sm mb-2",placeholder:"New Password",value:V,onChange:Rt=>q(Rt.target.value)}),k.jsx("button",{className:"btn btn-outline-light btn-sm w-100",onClick:_n,disabled:mt,children:mt?"Updating...":"Update Email / Password"})]}),k.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Data Management"}),k.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:jt,children:"📤 Export JSON"}),k.jsx("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:Bt,children:"📊 Export CSV"}),k.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:$t,disabled:B,children:B?"Clearing...":"🗑 Clear All Meals"})]}),k.jsxs("div",{className:"card bg-dark border-0 p-3 text-white",children:[k.jsx("h6",{className:"fw-bold",children:"Account"}),k.jsx("button",{className:"btn btn-danger w-100 mt-2",onClick:e,children:"🚪 Logout"})]})]})}function Qat({meals:n,user:t}){const[e,r]=st.useState({}),[i,s]=st.useState({}),[a,o]=st.useState(!1),l=new Date;l.setDate(l.getDate()-6);const h={Protein:50*7,Carbohydrate:260*7,Fat:70*7,"Carbs as Sugar":30*7,Fibre:30*7,Salt:6*7},d=(v=0)=>{const x=new Date,b=new Date(x.setDate(x.getDate()-v)),E=new Date(b);E.setDate(b.getDate()-6);const T=[];for(let S=0;S<7;S++){const R=new Date(E);R.setDate(E.getDate()+S),T.push(R.toISOString().split("T")[0])}return T},g=v=>{const x={};let b=0;v.forEach(T=>{const S=n.filter(R=>R.date===T);S.length>0&&(b++,S.forEach(R=>{R.foodItems.forEach(P=>{P.nutrients.forEach(M=>{const H=parseFloat(M.total)||0;x[M.type]=(x[M.type]||0)+H})})}))});const E={};return Object.keys(x).forEach(T=>{E[T]=x[T]/b}),E};st.useEffect(()=>{const v=d(0),x=d(7);r(g(v)),s(g(x))},[n]),st.useEffect(()=>{(async()=>{if(!(t!=null&&t.goalDate)||!(t!=null&&t.goalWeight)||!(t!=null&&t.currentWeight))return;const x=await Am(t.uid);if(x.length===0)return;const b=new Date(t.createdAt||x[0].date),E=new Date,T=new Date(t.goalDate),S=Math.max(1,(T-b)/864e5),R=Math.max(1,(E-b)/864e5),P=t.goalWeight-t.currentWeight,M=P/S*R,H=t.currentWeight+M,O=x.reduce((C,N)=>C.date>N.date?C:N).weight;(P>0&&O<H-.5||P<0&&O>H+.5)&&o(!0)})()},[t]);const m=[];return Object.keys(h).forEach(v=>{const x=e[v]||0,b=(e[v]||0)-(i[v]||0);x<.6*h[v]?m.push(`⬇️ Your ${v} intake is quite low this week. Consider improving it.`):x>1.2*h[v]?m.push(`⚠️ You're exceeding recommended ${v} levels.`):b>5?m.push(`🔺 ${v} increased significantly this week.`):b<-5&&m.push(`🔻 ${v} dropped since last week.`)}),k.jsxs("div",{className:"home-container",children:[k.jsx("p",{className:"TitleName",children:"Suggestions"}),a&&k.jsx("div",{className:"CalBarCharSection text-white fw-bold small mb-2 bg-dark",children:"⚠️ You're behind your weight goal progress. Try adjusting your intake!"}),k.jsxs("div",{className:"CalBarCharSection bg-dark mb-2",children:[k.jsx("p",{className:"SubTitleName mb-2",children:"Weekly Calorie Trend"}),k.jsx(xM,{meals:n,startOfWeek:l})]}),k.jsxs("div",{className:"NutritionProgressSection mb-2 bg-dark list-group",style:{padding:"5%"},children:[k.jsx("p",{className:"SubTitleName",children:"This Week's Nutrient Averages"}),Object.keys(h).map(v=>{const x=e[v]||0,b=h[v],E=(e[v]||0)-(i[v]||0),T=Math.min(x/b*100,150),S=x>b,R=E>1?"▲":E<-1?"▼":"•",P=E?`${R} ${Math.abs(E).toFixed(1)}g from last week`:"";return k.jsxs("div",{className:"mb-3",children:[k.jsxs("div",{className:"d-flex justify-content-between small",children:[k.jsx("span",{className:"text-white",children:v}),k.jsxs("span",{className:"text-white",children:[x.toFixed(1)," / ",b,"g"]})]}),k.jsx("div",{className:"progress",style:{height:"8px"},children:k.jsx("div",{className:`progress-bar ${S?"bg-danger":"bg-success"} progress-bar-striped progress-bar-animated`,style:{width:`${T}%`}})}),k.jsx("div",{className:"small text-white",children:P})]},v)})]}),k.jsx("div",{className:"SuggestionsBox",children:m.length>0?k.jsxs("ul",{className:"list-group bg-dark",style:{padding:"5%"},children:[k.jsx("p",{className:"SubTitleName",children:"Suggestions"}),m.map((v,x)=>k.jsx("li",{className:"list-group-item small bg-dark text-white border-0 ps-0",children:v},x))]}):k.jsx("p",{className:"text-success",children:"✅ You're on track this week!"})})]})}function Ow(){return Ow=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ow.apply(null,arguments)}function kk(n,t){if(n==null)return{};var e={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.indexOf(r)!==-1)continue;e[r]=n[r]}return e}function Mw(n,t){return Mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Mw(n,t)}function oA(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Mw(n,t)}function Zat(n,t){return n.classList?!!t&&n.classList.contains(t):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+t+" ")!==-1}function Jat(n,t){n.classList?n.classList.add(t):Zat(n,t)||(typeof n.className=="string"?n.className=n.className+" "+t:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+t))}function S4(n,t){return n.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function tot(n,t){n.classList?n.classList.remove(t):typeof n.className=="string"?n.className=S4(n.className,t):n.setAttribute("class",S4(n.className&&n.className.baseVal||"",t))}var eot=I4();const r1=Nw(eot),C4={disabled:!1},cA=an.createContext(null);var Lk=function(t){return t.scrollTop},Ld="unmounted",Zc="exited",Mi="entering",Ds="entered",kg="exiting",Va=function(n){oA(t,n);function t(r,i){var s;s=n.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Zc,s.appearStatus=Mi):l=Ds:r.unmountOnExit||r.mountOnEnter?l=Ld:l=Zc,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===Ld?{status:Zc}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Mi&&a!==Ds&&(s=Mi):(a===Mi||a===Ds)&&(s=kg)}this.updateStatus(!1,s)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},e.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Mi){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:r1.findDOMNode(this);a&&Lk(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zc&&this.setState({status:Ld})},e.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[r1.findDOMNode(this),o],h=l[0],d=l[1],g=this.getTimeouts(),m=o?g.appear:g.enter;if(!i&&!a||C4.disabled){this.safeSetState({status:Ds},function(){s.props.onEntered(h)});return}this.props.onEnter(h,d),this.safeSetState({status:Mi},function(){s.props.onEntering(h,d),s.onTransitionEnd(m,function(){s.safeSetState({status:Ds},function(){s.props.onEntered(h,d)})})})},e.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:r1.findDOMNode(this);if(!s||C4.disabled){this.safeSetState({status:Zc},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:kg},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Zc},function(){i.props.onExited(o)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},e.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:r1.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],h=l[0],d=l[1];this.props.addEndListener(h,d)}i!=null&&setTimeout(this.nextCallback,i)},e.render=function(){var i=this.state.status;if(i===Ld)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=kk(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return an.createElement(cA.Provider,{value:null},typeof a=="function"?a(i,o):an.cloneElement(an.Children.only(a),o))},t}(an.Component);Va.contextType=cA;Va.propTypes={};function ju(){}Va.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ju,onEntering:ju,onEntered:ju,onExit:ju,onExiting:ju,onExited:ju};Va.UNMOUNTED=Ld;Va.EXITED=Zc;Va.ENTERING=Mi;Va.ENTERED=Ds;Va.EXITING=kg;var not=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return Jat(t,r)})},$x=function(t,e){return t&&e&&e.split(" ").forEach(function(r){return tot(t,r)})},lA=function(n){oA(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1];r.removeClasses(d,"exit"),r.addClass(d,g?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(o,l)},r.onEntering=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1],m=g?"appear":"enter";r.addClass(d,m,"active"),r.props.onEntering&&r.props.onEntering(o,l)},r.onEntered=function(o,l){var h=r.resolveArguments(o,l),d=h[0],g=h[1],m=g?"appear":"enter";r.removeClasses(d,m),r.addClass(d,m,"done"),r.props.onEntered&&r.props.onEntered(o,l)},r.onExit=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(o)},r.onExiting=function(o){var l=r.resolveArguments(o),h=l[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(o)},r.onExited=function(o){var l=r.resolveArguments(o),h=l[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(o)},r.resolveArguments=function(o,l){return r.props.nodeRef?[r.props.nodeRef.current,o]:[o,l]},r.getClassNames=function(o){var l=r.props.classNames,h=typeof l=="string",d=h&&l?l+"-":"",g=h?""+d+o:l[o],m=h?g+"-active":l[o+"Active"],v=h?g+"-done":l[o+"Done"];return{baseClassName:g,activeClassName:m,doneClassName:v}},r}var e=t.prototype;return e.addClass=function(i,s,a){var o=this.getClassNames(s)[a+"ClassName"],l=this.getClassNames("enter"),h=l.doneClassName;s==="appear"&&a==="done"&&h&&(o+=" "+h),a==="active"&&i&&Lk(i),o&&(this.appliedClasses[s][a]=o,not(i,o))},e.removeClasses=function(i,s){var a=this.appliedClasses[s],o=a.base,l=a.active,h=a.done;this.appliedClasses[s]={},o&&$x(i,o),l&&$x(i,l),h&&$x(i,h)},e.render=function(){var i=this.props;i.classNames;var s=kk(i,["classNames"]);return an.createElement(Va,Ow({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(an.Component);lA.defaultProps={classNames:""};lA.propTypes={};var i1,s1;function rot(n,t){return!(n===t||an.isValidElement(n)&&an.isValidElement(t)&&n.key!=null&&n.key===t.key)}var Ph={out:"out-in",in:"in-out"},Rm=function(t,e,r){return function(){var i;t.props[e]&&(i=t.props)[e].apply(i,arguments),r()}},iot=(i1={},i1[Ph.out]=function(n){var t=n.current,e=n.changeState;return an.cloneElement(t,{in:!1,onExited:Rm(t,"onExited",function(){e(Mi,null)})})},i1[Ph.in]=function(n){var t=n.current,e=n.changeState,r=n.children;return[t,an.cloneElement(r,{in:!0,onEntered:Rm(r,"onEntered",function(){e(Mi)})})]},i1),sot=(s1={},s1[Ph.out]=function(n){var t=n.children,e=n.changeState;return an.cloneElement(t,{in:!0,onEntered:Rm(t,"onEntered",function(){e(Ds,an.cloneElement(t,{in:!0}))})})},s1[Ph.in]=function(n){var t=n.current,e=n.children,r=n.changeState;return[an.cloneElement(t,{in:!1,onExited:Rm(t,"onExited",function(){r(Ds,an.cloneElement(e,{in:!0}))})}),an.cloneElement(e,{in:!0})]},s1),uA=function(n){oA(t,n);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=n.call.apply(n,[this].concat(s))||this,r.state={status:Ds,current:null},r.appeared=!1,r.changeState=function(o,l){l===void 0&&(l=r.state.current),r.setState({status:o,current:l})},r}var e=t.prototype;return e.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(i,s){return i.children==null?{current:null}:s.status===Mi&&i.mode===Ph.in?{status:Mi}:s.current&&rot(s.current,i.children)?{status:kg}:{current:an.cloneElement(i.children,{in:!0})}},e.render=function(){var i=this.props,s=i.children,a=i.mode,o=this.state,l=o.status,h=o.current,d={children:s,current:h,changeState:this.changeState,status:l},g;switch(l){case Mi:g=sot[a](d);break;case kg:g=iot[a](d);break;case Ds:g=h}return an.createElement(cA.Provider,{value:{isMounting:!this.appeared}},g)},t}(an.Component);uA.propTypes={};uA.defaultProps={mode:Ph.out};function aot(){const[n,t]=st.useState(null),[e,r]=st.useState([]),[i,s]=st.useState("dashboard"),[a,o]=st.useState(!1),[l,h]=st.useState(null),[d,g]=st.useState(!1),[m,v]=st.useState(null),[x,b]=st.useState(""),[E,T]=st.useState(!1),[S,R]=st.useState(!0),P=st.useRef(!1),M=st.useRef(null),[H,O]=st.useState(!1);st.useEffect(()=>{const F=async()=>{const xt=await pO();if(t(xt||null),O(!0),xt){t(xt);const wt=await vx(xt.uid);r(wt)}};P.current?R(!1):setTimeout(()=>{R(!1),P.current=!0},1500),F()},[]),st.useEffect(()=>{"Notification"in window&&n&&Notification.requestPermission().then(F=>{F==="granted"&&G(n)})},[n]);const C=async F=>{t(F);const xt=await vx(F.uid);r(xt)},N=async F=>{if(!n)return;const xt={...F,userId:n.uid};if(l){await jJ({...xt,id:l.id},n.uid);const wt=e.map(K=>K.id===l.id?{...xt,id:l.id}:K);r(wt),h(null)}else{await UJ(xt,n.uid),b("+10 XP! 🎉"),T(!0),setTimeout(()=>T(!1),3e3);const wt=await vx(n.uid),K=await pO();r(wt),t(K)}o(!1)},B=async F=>{await zJ(F,n.uid);const xt=e.filter(wt=>wt.id!==F);r(xt)},z=async()=>{await qJ(),t(null),r([])};function G(F){[{label:"Breakfast",time:F.breakfastTime||"08:00"},{label:"Lunch",time:F.lunchTime||"13:00"},{label:"Dinner",time:F.dinnerTime||"19:00"}].forEach(({label:wt,time:K})=>{const[ot,vt]=K.split(":").map(Number),et=new Date,V=new Date;V.setHours(ot,vt,0,0),V<=et&&V.setDate(V.getDate()+1);const q=V.getTime()-et.getTime();setTimeout(()=>{new Notification(`${wt} Reminder 🍽️`,{body:`It's time to log your ${wt.toLowerCase()}!`})},q)})}return!H||S?k.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:k.jsx("img",{src:Dw,alt:"Logo",style:{width:"150px",height:"150px"}})}):n?S?k.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:k.jsx("img",{src:Dw,alt:"Logo",style:{width:"150px",height:"150px"}})}):k.jsx(uA,{mode:"out-in",children:k.jsx(lA,{timeout:300,classNames:"tab-transition",unmountOnExit:!0,nodeRef:M,children:k.jsxs("div",{style:{height:"100%"},ref:M,children:[i==="dashboard"&&k.jsx(Vnt,{user:n,meals:e,onEditMeal:F=>{h(F),o(!0)},onDeleteMeal:F=>{v(F),g(!0)}}),i==="history"&&k.jsx(Bnt,{user:n,meals:e,onEditMeal:F=>{h(F),o(!0)},onDeleteMeal:F=>{v(F),g(!0)}}),i==="suggestions"&&k.jsx(Qat,{meals:e,user:n}),i==="profile"&&k.jsx($at,{user:n,meals:e,onLogout:z,clearAllMeals:async()=>{await HJ(n.uid),r([])}}),k.jsx(v7,{onAddClick:()=>o(!0),onLogout:z,onTabChange:F=>s(F),currentTab:i}),k.jsx(Xat,{isOpen:a,onClose:()=>{o(!1),h(null)},onSave:N,user:n,editMeal:l}),d&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal-container p-4 text-center",children:[k.jsx("p",{className:"text-white fw-bold",children:"Are you sure you want to delete this meal?"}),k.jsxs("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[k.jsx("button",{className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),k.jsx("button",{className:"btn btn-danger",onClick:async()=>{m!==null&&(await B(m),g(!1),v(null))},children:"Delete"})]})]})}),E&&k.jsx("div",{className:"toast-container position-fixed top-0 start-50 translate-middle-x p-3",style:{zIndex:9999},children:k.jsx("div",{className:"toast show bg-success text-white",children:k.jsx("div",{className:"toast-body fw-bold text-center",children:x})})})]})},i)}):k.jsx(Kat,{onLoginSuccess:C})}y7.createRoot(document.getElementById("root")).render(k.jsx(an.StrictMode,{children:k.jsx(Aat,{children:k.jsx(aot,{})})}));serviceWorkerRegistration.register();

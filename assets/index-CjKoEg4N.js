var $V=Object.defineProperty;var WV=(n,t,e)=>t in n?$V(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Pt=(n,t,e)=>WV(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function JC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var j_={exports:{}},lh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FA;function YV(){if(FA)return lh;FA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return lh.Fragment=t,lh.jsx=e,lh.jsxs=e,lh}var zA;function XV(){return zA||(zA=1,j_.exports=YV()),j_.exports}var B=XV(),F_={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HA;function QV(){if(HA)return Lt;HA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function x(D,H,X){this.props=D,this.context=H,this.refs=A,this.updater=X||T}x.prototype.isReactComponent={},x.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},x.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=x.prototype;function L(D,H,X){this.props=D,this.context=H,this.refs=A,this.updater=X||T}var U=L.prototype=new k;U.constructor=L,w(U,x.prototype),U.isPureReactComponent=!0;var K=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},nt=Object.prototype.hasOwnProperty;function O(D,H,X,tt,ft,vt){return X=vt.ref,{$$typeof:n,type:D,key:H,ref:X!==void 0?X:null,props:vt}}function I(D,H){return O(D.type,H,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function P(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(X){return H[X]})}var V=/\/+/g;function F(D,H){return typeof D=="object"&&D!==null&&D.key!=null?P(""+D.key):H.toString(36)}function N(){}function At(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(H){D.status==="pending"&&(D.status="fulfilled",D.value=H)},function(H){D.status==="pending"&&(D.status="rejected",D.reason=H)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Et(D,H,X,tt,ft){var vt=typeof D;(vt==="undefined"||vt==="boolean")&&(D=null);var yt=!1;if(D===null)yt=!0;else switch(vt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(D.$$typeof){case n:case t:yt=!0;break;case m:return yt=D._init,Et(yt(D._payload),H,X,tt,ft)}}if(yt)return ft=ft(D),yt=tt===""?"."+F(D,0):tt,K(ft)?(X="",yt!=null&&(X=yt.replace(V,"$&/")+"/"),Et(ft,H,X,"",function(Rt){return Rt})):ft!=null&&(C(ft)&&(ft=I(ft,X+(ft.key==null||D&&D.key===ft.key?"":(""+ft.key).replace(V,"$&/")+"/")+yt)),H.push(ft)),1;yt=0;var Yt=tt===""?".":tt+":";if(K(D))for(var Vt=0;Vt<D.length;Vt++)tt=D[Vt],vt=Yt+F(tt,Vt),yt+=Et(tt,H,X,vt,ft);else if(Vt=v(D),typeof Vt=="function")for(D=Vt.call(D),Vt=0;!(tt=D.next()).done;)tt=tt.value,vt=Yt+F(tt,Vt++),yt+=Et(tt,H,X,vt,ft);else if(vt==="object"){if(typeof D.then=="function")return Et(At(D),H,X,tt,ft);throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return yt}function G(D,H,X){if(D==null)return D;var tt=[],ft=0;return Et(D,tt,"","",function(vt){return H.call(X,vt,ft++)}),tt}function st(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(X){(D._status===0||D._status===-1)&&(D._status=1,D._result=X)},function(X){(D._status===0||D._status===-1)&&(D._status=2,D._result=X)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var ut=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Z(){}return Lt.Children={map:G,forEach:function(D,H,X){G(D,function(){H.apply(this,arguments)},X)},count:function(D){var H=0;return G(D,function(){H++}),H},toArray:function(D){return G(D,function(H){return H})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Lt.Component=x,Lt.Fragment=e,Lt.Profiler=s,Lt.PureComponent=L,Lt.StrictMode=i,Lt.Suspense=h,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return z.H.useMemoCache(D)}},Lt.cache=function(D){return function(){return D.apply(null,arguments)}},Lt.cloneElement=function(D,H,X){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var tt=w({},D.props),ft=D.key,vt=void 0;if(H!=null)for(yt in H.ref!==void 0&&(vt=void 0),H.key!==void 0&&(ft=""+H.key),H)!nt.call(H,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&H.ref===void 0||(tt[yt]=H[yt]);var yt=arguments.length-2;if(yt===1)tt.children=X;else if(1<yt){for(var Yt=Array(yt),Vt=0;Vt<yt;Vt++)Yt[Vt]=arguments[Vt+2];tt.children=Yt}return O(D.type,ft,void 0,void 0,vt,tt)},Lt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},Lt.createElement=function(D,H,X){var tt,ft={},vt=null;if(H!=null)for(tt in H.key!==void 0&&(vt=""+H.key),H)nt.call(H,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(ft[tt]=H[tt]);var yt=arguments.length-2;if(yt===1)ft.children=X;else if(1<yt){for(var Yt=Array(yt),Vt=0;Vt<yt;Vt++)Yt[Vt]=arguments[Vt+2];ft.children=Yt}if(D&&D.defaultProps)for(tt in yt=D.defaultProps,yt)ft[tt]===void 0&&(ft[tt]=yt[tt]);return O(D,vt,void 0,void 0,null,ft)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(D){return{$$typeof:c,render:D}},Lt.isValidElement=C,Lt.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:st}},Lt.memo=function(D,H){return{$$typeof:d,type:D,compare:H===void 0?null:H}},Lt.startTransition=function(D){var H=z.T,X={};z.T=X;try{var tt=D(),ft=z.S;ft!==null&&ft(X,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(Z,ut)}catch(vt){ut(vt)}finally{z.T=H}},Lt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Lt.use=function(D){return z.H.use(D)},Lt.useActionState=function(D,H,X){return z.H.useActionState(D,H,X)},Lt.useCallback=function(D,H){return z.H.useCallback(D,H)},Lt.useContext=function(D){return z.H.useContext(D)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(D,H){return z.H.useDeferredValue(D,H)},Lt.useEffect=function(D,H,X){var tt=z.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(D,H)},Lt.useId=function(){return z.H.useId()},Lt.useImperativeHandle=function(D,H,X){return z.H.useImperativeHandle(D,H,X)},Lt.useInsertionEffect=function(D,H){return z.H.useInsertionEffect(D,H)},Lt.useLayoutEffect=function(D,H){return z.H.useLayoutEffect(D,H)},Lt.useMemo=function(D,H){return z.H.useMemo(D,H)},Lt.useOptimistic=function(D,H){return z.H.useOptimistic(D,H)},Lt.useReducer=function(D,H,X){return z.H.useReducer(D,H,X)},Lt.useRef=function(D){return z.H.useRef(D)},Lt.useState=function(D){return z.H.useState(D)},Lt.useSyncExternalStore=function(D,H,X){return z.H.useSyncExternalStore(D,H,X)},Lt.useTransition=function(){return z.H.useTransition()},Lt.version="19.1.0",Lt}var qA;function E0(){return qA||(qA=1,F_.exports=QV()),F_.exports}var dt=E0();const S0=JC(dt);var z_={exports:{}},ch={},H_={exports:{}},q_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA;function ZV(){return GA||(GA=1,function(n){function t(G,st){var ut=G.length;G.push(st);t:for(;0<ut;){var Z=ut-1>>>1,D=G[Z];if(0<s(D,st))G[Z]=st,G[ut]=D,ut=Z;else break t}}function e(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var st=G[0],ut=G.pop();if(ut!==st){G[0]=ut;t:for(var Z=0,D=G.length,H=D>>>1;Z<H;){var X=2*(Z+1)-1,tt=G[X],ft=X+1,vt=G[ft];if(0>s(tt,ut))ft<D&&0>s(vt,tt)?(G[Z]=vt,G[ft]=ut,Z=ft):(G[Z]=tt,G[X]=ut,Z=X);else if(ft<D&&0>s(vt,ut))G[Z]=vt,G[ft]=ut,Z=ft;else break t}}return st}function s(G,st){var ut=G.sortIndex-st.sortIndex;return ut!==0?ut:G.id-st.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],d=[],m=1,y=null,v=3,T=!1,w=!1,A=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function K(G){for(var st=e(d);st!==null;){if(st.callback===null)i(d);else if(st.startTime<=G)i(d),st.sortIndex=st.expirationTime,t(h,st);else break;st=e(d)}}function z(G){if(A=!1,K(G),!w)if(e(h)!==null)w=!0,nt||(nt=!0,F());else{var st=e(d);st!==null&&Et(z,st.startTime-G)}}var nt=!1,O=-1,I=5,C=-1;function P(){return x?!0:!(n.unstable_now()-C<I)}function V(){if(x=!1,nt){var G=n.unstable_now();C=G;var st=!0;try{t:{w=!1,A&&(A=!1,L(O),O=-1),T=!0;var ut=v;try{e:{for(K(G),y=e(h);y!==null&&!(y.expirationTime>G&&P());){var Z=y.callback;if(typeof Z=="function"){y.callback=null,v=y.priorityLevel;var D=Z(y.expirationTime<=G);if(G=n.unstable_now(),typeof D=="function"){y.callback=D,K(G),st=!0;break e}y===e(h)&&i(h),K(G)}else i(h);y=e(h)}if(y!==null)st=!0;else{var H=e(d);H!==null&&Et(z,H.startTime-G),st=!1}}break t}finally{y=null,v=ut,T=!1}st=void 0}}finally{st?F():nt=!1}}}var F;if(typeof U=="function")F=function(){U(V)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,At=N.port2;N.port1.onmessage=V,F=function(){At.postMessage(null)}}else F=function(){k(V,0)};function Et(G,st){O=k(function(){G(n.unstable_now())},st)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(G){switch(v){case 1:case 2:case 3:var st=3;break;default:st=v}var ut=v;v=st;try{return G()}finally{v=ut}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(G,st){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ut=v;v=G;try{return st()}finally{v=ut}},n.unstable_scheduleCallback=function(G,st,ut){var Z=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Z+ut:Z):ut=Z,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ut+D,G={id:m++,callback:st,priorityLevel:G,startTime:ut,expirationTime:D,sortIndex:-1},ut>Z?(G.sortIndex=ut,t(d,G),e(h)===null&&G===e(d)&&(A?(L(O),O=-1):A=!0,Et(z,ut-Z))):(G.sortIndex=D,t(h,G),w||T||(w=!0,nt||(nt=!0,F()))),G},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(G){var st=v;return function(){var ut=v;v=st;try{return G.apply(this,arguments)}finally{v=ut}}}}(q_)),q_}var KA;function JV(){return KA||(KA=1,H_.exports=ZV()),H_.exports}var G_={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $A;function tL(){if($A)return Sn;$A=1;var n=E0();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:h,containerInfo:d,implementation:m}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Sn.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(h,d,null,m)},Sn.flushSync=function(h){var d=l.T,m=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=d,i.p=m,i.d.f()}},Sn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(h,d))},Sn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Sn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,T=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:T}):m==="script"&&i.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:T,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Sn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(h)},Sn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin);i.d.L(h,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Sn.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);i.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(h)},Sn.requestFormReset=function(h){i.d.r(h)},Sn.unstable_batchedUpdates=function(h,d){return h(d)},Sn.useFormState=function(h,d,m){return l.H.useFormState(h,d,m)},Sn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Sn.version="19.1.0",Sn}var WA;function eL(){if(WA)return G_.exports;WA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),G_.exports=tL(),G_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA;function nL(){if(YA)return ch;YA=1;var n=JV(),t=E0(),e=eL();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,f=o;;){var p=u.return;if(p===null)break;var _=p.alternate;if(_===null){if(f=p.return,f!==null){u=f;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===u)return c(p),r;if(_===f)return c(p),o;_=_.sibling}throw Error(i(188))}if(u.return!==f.return)u=p,f=_;else{for(var S=!1,R=p.child;R;){if(R===u){S=!0,u=p,f=_;break}if(R===f){S=!0,f=p,u=_;break}R=R.sibling}if(!S){for(R=_.child;R;){if(R===u){S=!0,u=_,f=p;break}if(R===f){S=!0,f=_,u=p;break}R=R.sibling}if(!S)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function d(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=d(r),o!==null)return o;r=r.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),U=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function At(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case x:return"Profiler";case A:return"StrictMode";case z:return"Suspense";case nt:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case U:return(r.displayName||"Context")+".Provider";case L:return(r._context.displayName||"Context")+".Consumer";case K:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return o=r.displayName||null,o!==null?o:At(r.type)||"Memo";case I:o=r._payload,r=r._init;try{return At(r(o))}catch{}}return null}var Et=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Z=[],D=-1;function H(r){return{current:r}}function X(r){0>D||(r.current=Z[D],Z[D]=null,D--)}function tt(r,o){D++,Z[D]=r.current,r.current=o}var ft=H(null),vt=H(null),yt=H(null),Yt=H(null);function Vt(r,o){switch(tt(yt,o),tt(vt,r),tt(ft,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?gA(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=gA(o),r=pA(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}X(ft),tt(ft,r)}function Rt(){X(ft),X(vt),X(yt)}function kt(r){r.memoizedState!==null&&tt(Yt,r);var o=ft.current,u=pA(o,r.type);o!==u&&(tt(vt,r),tt(ft,u))}function Xt(r){vt.current===r&&(X(ft),X(vt)),Yt.current===r&&(X(Yt),ih._currentValue=ut)}var Ue=Object.prototype.hasOwnProperty,je=n.unstable_scheduleCallback,rn=n.unstable_cancelCallback,Zo=n.unstable_shouldYield,dr=n.unstable_requestPaint,Ln=n.unstable_now,jp=n.unstable_getCurrentPriorityLevel,eu=n.unstable_ImmediatePriority,Jo=n.unstable_UserBlockingPriority,Ia=n.unstable_NormalPriority,Fp=n.unstable_LowPriority,tl=n.unstable_IdlePriority,nu=n.log,Gf=n.unstable_setDisableYieldValue,Ie=null,ie=null;function Yn(r){if(typeof nu=="function"&&Gf(r),ie&&typeof ie.setStrictMode=="function")try{ie.setStrictMode(Ie,r)}catch{}}var Tn=Math.clz32?Math.clz32:Ra,Kf=Math.log,zp=Math.LN2;function Ra(r){return r>>>=0,r===0?32:31-(Kf(r)/zp|0)|0}var Ca=256,Da=4194304;function Di(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function el(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var p=0,_=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var R=f&134217727;return R!==0?(f=R&~_,f!==0?p=Di(f):(S&=R,S!==0?p=Di(S):u||(u=R&~r,u!==0&&(p=Di(u))))):(R=f&~_,R!==0?p=Di(R):S!==0?p=Di(S):u||(u=f&~r,u!==0&&(p=Di(u)))),p===0?0:o!==0&&o!==p&&(o&_)===0&&(_=p&-p,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:p}function Ma(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function iu(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function su(){var r=Ca;return Ca<<=1,(Ca&4194048)===0&&(Ca=256),r}function ru(){var r=Da;return Da<<=1,(Da&62914560)===0&&(Da=4194304),r}function As(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function xs(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function au(r,o,u,f,p,_){var S=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var R=r.entanglements,j=r.expirationTimes,J=r.hiddenUpdates;for(u=S&~u;0<u;){var at=31-Tn(u),ct=1<<at;R[at]=0,j[at]=-1;var et=J[at];if(et!==null)for(J[at]=null,at=0;at<et.length;at++){var it=et[at];it!==null&&(it.lane&=-536870913)}u&=~ct}f!==0&&Hi(r,f,0),_!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=_&~(S&~o))}function Hi(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Tn(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&4194090}function ou(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-Tn(u),p=1<<f;p&o|r[f]&o&&(r[f]|=o),u&=~p}}function mr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function nl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function gr(){var r=st.p;return r!==0?r:(r=window.event,r===void 0?32:NA(r.type))}function $f(r,o){var u=st.p;try{return st.p=r,o()}finally{st.p=u}}var be=Math.random().toString(36).slice(2),Xe="__reactFiber$"+be,Fe="__reactProps$"+be,ui="__reactContainer$"+be,lu="__reactEvents$"+be,Hp="__reactListeners$"+be,pr="__reactHandles$"+be,Wf="__reactResources$"+be,Pa="__reactMarker$"+be;function yr(r){delete r[Xe],delete r[Fe],delete r[lu],delete r[Hp],delete r[pr]}function Is(r){var o=r[Xe];if(o)return o;for(var u=r.parentNode;u;){if(o=u[ui]||u[Xe]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=bA(r);r!==null;){if(u=r[Xe])return u;r=bA(r)}return o}r=u,u=r.parentNode}return null}function qi(r){if(r=r[Xe]||r[ui]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Gi(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Mn(r){var o=r[Wf];return o||(o=r[Wf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Pe(r){r[Pa]=!0}var cu=new Set,il={};function Mi(r,o){Rs(r,o),Rs(r+"Capture",o)}function Rs(r,o){for(il[r]=o,r=0;r<o.length;r++)cu.add(o[r])}var Yf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xf={},Oa={};function Qf(r){return Ue.call(Oa,r)?!0:Ue.call(Xf,r)?!1:Yf.test(r)?Oa[r]=!0:(Xf[r]=!0,!1)}function _r(r,o,u){if(Qf(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function Ki(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function mn(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}var ka,Zf;function Cs(r){if(ka===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ka=o&&o[1]||"",Zf=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ka+r+Zf}var sl=!1;function rl(r,o){if(!r||sl)return"";sl=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(it){var et=it}Reflect.construct(r,[],ct)}else{try{ct.call()}catch(it){et=it}r.call(ct.prototype)}}else{try{throw Error()}catch(it){et=it}(ct=r())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(it){if(it&&et&&typeof it.stack=="string")return[it.stack,et.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),S=_[0],R=_[1];if(S&&R){var j=S.split(`
`),J=R.split(`
`);for(p=f=0;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;for(;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;if(f===j.length||p===J.length)for(f=j.length-1,p=J.length-1;1<=f&&0<=p&&j[f]!==J[p];)p--;for(;1<=f&&0<=p;f--,p--)if(j[f]!==J[p]){if(f!==1||p!==1)do if(f--,p--,0>p||j[f]!==J[p]){var at=`
`+j[f].replace(" at new "," at ");return r.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",r.displayName)),at}while(1<=f&&0<=p);break}}}finally{sl=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Cs(u):""}function uu(r){switch(r.tag){case 26:case 27:case 5:return Cs(r.type);case 16:return Cs("Lazy");case 13:return Cs("Suspense");case 19:return Cs("SuspenseList");case 0:case 15:return rl(r.type,!1);case 11:return rl(r.type.render,!1);case 1:return rl(r.type,!0);case 31:return Cs("Activity");default:return""}}function al(r){try{var o="";do o+=uu(r),r=r.return;while(r);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Pn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function hu(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function qp(r){var o=hu(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),f=""+r[o];if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,_=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return p.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function ol(r){r._valueTracker||(r._valueTracker=qp(r))}function fu(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=hu(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function Na(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Gp=/[\n"\\]/g;function ze(r){return r.replace(Gp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Xn(r,o,u,f,p,_,S,R){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),o!=null?S==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Pn(o)):r.value!==""+Pn(o)&&(r.value=""+Pn(o)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),o!=null?vr(r,S,Pn(o)):u!=null?vr(r,S,Pn(u)):f!=null&&r.removeAttribute("value"),p==null&&_!=null&&(r.defaultChecked=!!_),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+Pn(R):r.removeAttribute("name")}function Va(r,o,u,f,p,_,S,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null))return;u=u!=null?""+Pn(u):"",o=o!=null?""+Pn(o):u,R||o===r.value||(r.value=o),r.defaultValue=o}f=f??p,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=R?r.checked:!!f,r.defaultChecked=!!f,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S)}function vr(r,o,u){o==="number"&&Na(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Ds(r,o,u,f){if(r=r.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<r.length;u++)p=o.hasOwnProperty("$"+r[u].value),r[u].selected!==p&&(r[u].selected=p),p&&f&&(r[u].defaultSelected=!0)}else{for(u=""+Pn(u),o=null,p=0;p<r.length;p++){if(r[p].value===u){r[p].selected=!0,f&&(r[p].defaultSelected=!0);return}o!==null||r[p].disabled||(o=r[p])}o!==null&&(o.selected=!0)}}function ce(r,o,u){if(o!=null&&(o=""+Pn(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+Pn(u):""}function La(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(i(92));if(Et(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=Pn(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f)}function hi(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Ba=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jf(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||Ba.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function du(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var p in o)f=o[p],o.hasOwnProperty(p)&&u[p]!==f&&Jf(r,p,f)}else for(var _ in o)o.hasOwnProperty(_)&&Jf(r,_,o[_])}function mu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$p=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ll(r){return $p.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ms=null;function fi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ps=null,Os=null;function gu(r){var o=qi(r);if(o&&(r=o.stateNode)){var u=r[Fe]||null;t:switch(r=o.stateNode,o.type){case"input":if(Xn(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ze(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var p=f[Fe]||null;if(!p)throw Error(i(90));Xn(f,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&fu(f)}break t;case"textarea":ce(r,u.value,u.defaultValue);break t;case"select":o=u.value,o!=null&&Ds(r,!!u.multiple,o,!1)}}}var $i=!1;function td(r,o,u){if($i)return r(o,u);$i=!0;try{var f=r(o);return f}finally{if($i=!1,(Ps!==null||Os!==null)&&($d(),Ps&&(o=Ps,r=Os,Os=Ps=null,gu(o),r)))for(o=0;o<r.length;o++)gu(r[o])}}function Ua(r,o){var u=r.stateNode;if(u===null)return null;var f=u[Fe]||null;if(f===null)return null;u=f[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break t;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),di=!1;if(Pi)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){di=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{di=!1}var Wi=null,br=null,ks=null;function pu(){if(ks)return ks;var r,o=br,u=o.length,f,p="value"in Wi?Wi.value:Wi.textContent,_=p.length;for(r=0;r<u&&o[r]===p[r];r++);var S=u-r;for(f=1;f<=S&&o[u-f]===p[_-f];f++);return ks=p.slice(r,1<f?1-f:void 0)}function Yi(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Xi(){return!0}function yu(){return!1}function an(r){function o(u,f,p,_,S){this._reactName=u,this._targetInst=p,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(u=r[R],this[R]=u?u(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Xi:yu,this.isPropagationStopped=yu,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),o}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=an(ee),Fa=m({},ee,{view:0,detail:0}),ed=an(Fa),ul,hl,Qi,za=m({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Qi&&(Qi&&r.type==="mousemove"?(ul=r.screenX-Qi.screenX,hl=r.screenY-Qi.screenY):hl=ul=0,Qi=r),ul)},movementY:function(r){return"movementY"in r?r.movementY:hl}}),mi=an(za),nd=m({},za,{dataTransfer:0}),Wp=an(nd),Ha=m({},Fa,{relatedTarget:0}),fl=an(Ha),_u=m({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),dl=an(_u),id=m({},ee,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ml=an(id),Yp=m({},ee,{data:0}),vu=an(Yp),qa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bu(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=rd[r])?!!o[r]:!1}function Ga(){return bu}var ad=m({},Fa,{key:function(r){if(r.key){var o=qa[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Yi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?sd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(r){return r.type==="keypress"?Yi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Yi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),gl=an(ad),od=m({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=an(od),Ns=m({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),ld=an(Ns),cd=m({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),ud=an(cd),hd=m({},za,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),pl=an(hd),On=m({},ee,{newState:0,oldState:0}),fd=an(On),dd=[9,13,27,32],Zi=Pi&&"CompositionEvent"in window,g=null;Pi&&"documentMode"in document&&(g=document.documentMode);var b=Pi&&"TextEvent"in window&&!g,E=Pi&&(!Zi||g&&8<g&&11>=g),M=" ",W=!1;function rt(r,o){switch(r){case"keyup":return dd.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mt(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Gt=!1;function Qe(r,o){switch(r){case"compositionend":return mt(o);case"keypress":return o.which!==32?null:(W=!0,M);case"textInput":return r=o.data,r===M&&W?null:r;default:return null}}function Kt(r,o){if(Gt)return r==="compositionend"||!Zi&&rt(r,o)?(r=pu(),ks=br=Wi=null,Gt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return E&&o.locale!=="ko"?null:o.data;default:return null}}var on={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ze(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!on[r.type]:o==="textarea"}function Vs(r,o,u,f){Ps?Os?Os.push(f):Os=[f]:Ps=f,o=Jd(o,"onChange"),0<o.length&&(u=new cl("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var gn=null,Ji=null;function Eu(r){uA(r,0)}function md(r){var o=Gi(r);if(fu(o))return r}function ME(r,o){if(r==="change")return o}var PE=!1;if(Pi){var Xp;if(Pi){var Qp="oninput"in document;if(!Qp){var OE=document.createElement("div");OE.setAttribute("oninput","return;"),Qp=typeof OE.oninput=="function"}Xp=Qp}else Xp=!1;PE=Xp&&(!document.documentMode||9<document.documentMode)}function kE(){gn&&(gn.detachEvent("onpropertychange",NE),Ji=gn=null)}function NE(r){if(r.propertyName==="value"&&md(Ji)){var o=[];Vs(o,Ji,r,fi(r)),td(Eu,o)}}function SN(r,o,u){r==="focusin"?(kE(),gn=o,Ji=u,gn.attachEvent("onpropertychange",NE)):r==="focusout"&&kE()}function wN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return md(Ji)}function AN(r,o){if(r==="click")return md(o)}function xN(r,o){if(r==="input"||r==="change")return md(o)}function IN(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Qn=typeof Object.is=="function"?Object.is:IN;function Su(r,o){if(Qn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var p=u[f];if(!Ue.call(o,p)||!Qn(r[p],o[p]))return!1}return!0}function VE(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function LE(r,o){var u=VE(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=VE(u)}}function BE(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?BE(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function UE(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Na(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Na(r.document)}return o}function Zp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var RN=Pi&&"documentMode"in document&&11>=document.documentMode,yl=null,Jp=null,wu=null,ty=!1;function jE(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ty||yl==null||yl!==Na(f)||(f=yl,"selectionStart"in f&&Zp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),wu&&Su(wu,f)||(wu=f,f=Jd(Jp,"onSelect"),0<f.length&&(o=new cl("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=yl)))}function Ka(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var _l={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},ey={},FE={};Pi&&(FE=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function $a(r){if(ey[r])return ey[r];if(!_l[r])return r;var o=_l[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in FE)return ey[r]=o[u];return r}var zE=$a("animationend"),HE=$a("animationiteration"),qE=$a("animationstart"),CN=$a("transitionrun"),DN=$a("transitionstart"),MN=$a("transitioncancel"),GE=$a("transitionend"),KE=new Map,ny="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ny.push("scrollEnd");function Oi(r,o){KE.set(r,o),Mi(o,[r])}var $E=new WeakMap;function gi(r,o){if(typeof r=="object"&&r!==null){var u=$E.get(r);return u!==void 0?u:(o={value:r,source:o,stack:al(o)},$E.set(r,o),o)}return{value:r,source:o,stack:al(o)}}var pi=[],vl=0,iy=0;function gd(){for(var r=vl,o=iy=vl=0;o<r;){var u=pi[o];pi[o++]=null;var f=pi[o];pi[o++]=null;var p=pi[o];pi[o++]=null;var _=pi[o];if(pi[o++]=null,f!==null&&p!==null){var S=f.pending;S===null?p.next=p:(p.next=S.next,S.next=p),f.pending=p}_!==0&&WE(u,p,_)}}function pd(r,o,u,f){pi[vl++]=r,pi[vl++]=o,pi[vl++]=u,pi[vl++]=f,iy|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function sy(r,o,u,f){return pd(r,o,u,f),yd(r)}function bl(r,o){return pd(r,null,null,o),yd(r)}function WE(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var p=!1,_=r.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(p=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,p&&o!==null&&(p=31-Tn(u),r=_.hiddenUpdates,f=r[p],f===null?r[p]=[o]:f.push(o),o.lane=u|536870912),_):null}function yd(r){if(50<Yu)throw Yu=0,u_=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Tl={};function PN(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(r,o,u,f){return new PN(r,o,u,f)}function ry(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ls(r,o){var u=r.alternate;return u===null?(u=Zn(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function YE(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function _d(r,o,u,f,p,_){var S=0;if(f=r,typeof r=="function")ry(r)&&(S=1);else if(typeof r=="string")S=kV(r,u,ft.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case C:return r=Zn(31,u,o,p),r.elementType=C,r.lanes=_,r;case w:return Wa(u.children,p,_,o);case A:S=8,p|=24;break;case x:return r=Zn(12,u,o,p|2),r.elementType=x,r.lanes=_,r;case z:return r=Zn(13,u,o,p),r.elementType=z,r.lanes=_,r;case nt:return r=Zn(19,u,o,p),r.elementType=nt,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:case U:S=10;break t;case L:S=9;break t;case K:S=11;break t;case O:S=14;break t;case I:S=16,f=null;break t}S=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=Zn(S,u,o,p),o.elementType=r,o.type=f,o.lanes=_,o}function Wa(r,o,u,f){return r=Zn(7,r,f,o),r.lanes=u,r}function ay(r,o,u){return r=Zn(6,r,null,o),r.lanes=u,r}function oy(r,o,u){return o=Zn(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var El=[],Sl=0,vd=null,bd=0,yi=[],_i=0,Ya=null,Bs=1,Us="";function Xa(r,o){El[Sl++]=bd,El[Sl++]=vd,vd=r,bd=o}function XE(r,o,u){yi[_i++]=Bs,yi[_i++]=Us,yi[_i++]=Ya,Ya=r;var f=Bs;r=Us;var p=32-Tn(f)-1;f&=~(1<<p),u+=1;var _=32-Tn(o)+p;if(30<_){var S=p-p%5;_=(f&(1<<S)-1).toString(32),f>>=S,p-=S,Bs=1<<32-Tn(o)+p|u<<p|f,Us=_+r}else Bs=1<<_|u<<p|f,Us=r}function ly(r){r.return!==null&&(Xa(r,1),XE(r,1,0))}function cy(r){for(;r===vd;)vd=El[--Sl],El[Sl]=null,bd=El[--Sl],El[Sl]=null;for(;r===Ya;)Ya=yi[--_i],yi[_i]=null,Us=yi[--_i],yi[_i]=null,Bs=yi[--_i],yi[_i]=null}var kn=null,Re=null,te=!1,Qa=null,ts=!1,uy=Error(i(519));function Za(r){var o=Error(i(418,""));throw Iu(gi(o,r)),uy}function QE(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[Xe]=r,o[Fe]=f,u){case"dialog":zt("cancel",o),zt("close",o);break;case"iframe":case"object":case"embed":zt("load",o);break;case"video":case"audio":for(u=0;u<Qu.length;u++)zt(Qu[u],o);break;case"source":zt("error",o);break;case"img":case"image":case"link":zt("error",o),zt("load",o);break;case"details":zt("toggle",o);break;case"input":zt("invalid",o),Va(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ol(o);break;case"select":zt("invalid",o);break;case"textarea":zt("invalid",o),La(o,f.value,f.defaultValue,f.children),ol(o)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||mA(o.textContent,u)?(f.popover!=null&&(zt("beforetoggle",o),zt("toggle",o)),f.onScroll!=null&&zt("scroll",o),f.onScrollEnd!=null&&zt("scrollend",o),f.onClick!=null&&(o.onclick=tm),o=!0):o=!1,o||Za(r)}function ZE(r){for(kn=r.return;kn;)switch(kn.tag){case 5:case 13:ts=!1;return;case 27:case 3:ts=!0;return;default:kn=kn.return}}function Au(r){if(r!==kn)return!1;if(!te)return ZE(r),te=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||x_(r.type,r.memoizedProps)),u=!u),u&&Re&&Za(r),ZE(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(u=r.data,u==="/$"){if(o===0){Re=Ni(r.nextSibling);break t}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;r=r.nextSibling}Re=null}}else o===27?(o=Re,Vr(r.type)?(r=D_,D_=null,Re=r):Re=o):Re=kn?Ni(r.stateNode.nextSibling):null;return!0}function xu(){Re=kn=null,te=!1}function JE(){var r=Qa;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),Qa=null),r}function Iu(r){Qa===null?Qa=[r]:Qa.push(r)}var hy=H(null),Ja=null,js=null;function Tr(r,o,u){tt(hy,o._currentValue),o._currentValue=u}function Fs(r){r._currentValue=hy.current,X(hy)}function fy(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function dy(r,o,u,f){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var _=p.dependencies;if(_!==null){var S=p.child;_=_.firstContext;t:for(;_!==null;){var R=_;_=p;for(var j=0;j<o.length;j++)if(R.context===o[j]){_.lanes|=u,R=_.alternate,R!==null&&(R.lanes|=u),fy(_.return,u,r),f||(S=null);break t}_=R.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(i(341));S.lanes|=u,_=S.alternate,_!==null&&(_.lanes|=u),fy(S,u,r),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===r){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ru(r,o,u,f){r=null;for(var p=o,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var R=p.type;Qn(p.pendingProps.value,S.value)||(r!==null?r.push(R):r=[R])}}else if(p===Yt.current){if(S=p.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(ih):r=[ih])}p=p.return}r!==null&&dy(o,r,u,f),o.flags|=262144}function Td(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function to(r){Ja=r,js=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function En(r){return tS(Ja,r)}function Ed(r,o){return Ja===null&&to(r),tS(r,o)}function tS(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},js===null){if(r===null)throw Error(i(308));js=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else js=js.next=o;return u}var ON=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},kN=n.unstable_scheduleCallback,NN=n.unstable_NormalPriority,Je={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function my(){return{controller:new ON,data:new Map,refCount:0}}function Cu(r){r.refCount--,r.refCount===0&&kN(NN,function(){r.controller.abort()})}var Du=null,gy=0,wl=0,Al=null;function VN(r,o){if(Du===null){var u=Du=[];gy=0,wl=y_(),Al={status:"pending",value:void 0,then:function(f){u.push(f)}}}return gy++,o.then(eS,eS),o}function eS(){if(--gy===0&&Du!==null){Al!==null&&(Al.status="fulfilled");var r=Du;Du=null,wl=0,Al=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function LN(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var p=0;p<u.length;p++)(0,u[p])(o)},function(p){for(f.status="rejected",f.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),f}var nS=G.S;G.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&VN(r,o),nS!==null&&nS(r,o)};var eo=H(null);function py(){var r=eo.current;return r!==null?r:pe.pooledCache}function Sd(r,o){o===null?tt(eo,eo.current):tt(eo,o.pool)}function iS(){var r=py();return r===null?null:{parent:Je._currentValue,pool:r}}var Mu=Error(i(460)),sS=Error(i(474)),wd=Error(i(542)),yy={then:function(){}};function rS(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ad(){}function aS(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Ad,Ad),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,lS(r),r;default:if(typeof o.status=="string")o.then(Ad,Ad);else{if(r=pe,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=f}},function(f){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,lS(r),r}throw Pu=o,Mu}}var Pu=null;function oS(){if(Pu===null)throw Error(i(459));var r=Pu;return Pu=null,r}function lS(r){if(r===Mu||r===wd)throw Error(i(483))}var Er=!1;function _y(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vy(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Sr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function wr(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(se&2)!==0){var p=f.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),f.pending=o,o=yd(r),WE(r,null,u),o}return pd(r,f,o,u),yd(r)}function Ou(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,ou(r,u)}}function by(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var p=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var S={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?p=_=S:_=_.next=S,u=u.next}while(u!==null);_===null?p=_=o:_=_.next=o}else p=_=o;u={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Ty=!1;function ku(){if(Ty){var r=Al;if(r!==null)throw r}}function Nu(r,o,u,f){Ty=!1;var p=r.updateQueue;Er=!1;var _=p.firstBaseUpdate,S=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var j=R,J=j.next;j.next=null,S===null?_=J:S.next=J,S=j;var at=r.alternate;at!==null&&(at=at.updateQueue,R=at.lastBaseUpdate,R!==S&&(R===null?at.firstBaseUpdate=J:R.next=J,at.lastBaseUpdate=j))}if(_!==null){var ct=p.baseState;S=0,at=J=j=null,R=_;do{var et=R.lane&-536870913,it=et!==R.lane;if(it?($t&et)===et:(f&et)===et){et!==0&&et===wl&&(Ty=!0),at!==null&&(at=at.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var Mt=r,It=R;et=o;var fe=u;switch(It.tag){case 1:if(Mt=It.payload,typeof Mt=="function"){ct=Mt.call(fe,ct,et);break t}ct=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=It.payload,et=typeof Mt=="function"?Mt.call(fe,ct,et):Mt,et==null)break t;ct=m({},ct,et);break t;case 2:Er=!0}}et=R.callback,et!==null&&(r.flags|=64,it&&(r.flags|=8192),it=p.callbacks,it===null?p.callbacks=[et]:it.push(et))}else it={lane:et,tag:R.tag,payload:R.payload,callback:R.callback,next:null},at===null?(J=at=it,j=ct):at=at.next=it,S|=et;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;it=R,R=it.next,it.next=null,p.lastBaseUpdate=it,p.shared.pending=null}}while(!0);at===null&&(j=ct),p.baseState=j,p.firstBaseUpdate=J,p.lastBaseUpdate=at,_===null&&(p.shared.lanes=0),Pr|=S,r.lanes=S,r.memoizedState=ct}}function cS(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function uS(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)cS(u[r],o)}var xl=H(null),xd=H(0);function hS(r,o){r=Ws,tt(xd,r),tt(xl,o),Ws=r|o.baseLanes}function Ey(){tt(xd,Ws),tt(xl,xl.current)}function Sy(){Ws=xd.current,X(xl),X(xd)}var Ar=0,Bt=null,ue=null,He=null,Id=!1,Il=!1,no=!1,Rd=0,Vu=0,Rl=null,BN=0;function Oe(){throw Error(i(321))}function wy(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Qn(r[u],o[u]))return!1;return!0}function Ay(r,o,u,f,p,_){return Ar=_,Bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=r===null||r.memoizedState===null?WS:YS,no=!1,_=u(f,p),no=!1,Il&&(_=dS(o,u,f,p)),fS(r),_}function fS(r){G.H=kd;var o=ue!==null&&ue.next!==null;if(Ar=0,He=ue=Bt=null,Id=!1,Vu=0,Rl=null,o)throw Error(i(300));r===null||ln||(r=r.dependencies,r!==null&&Td(r)&&(ln=!0))}function dS(r,o,u,f){Bt=r;var p=0;do{if(Il&&(Rl=null),Vu=0,Il=!1,25<=p)throw Error(i(301));if(p+=1,He=ue=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}G.H=GN,_=o(u,f)}while(Il);return _}function UN(){var r=G.H,o=r.useState()[0];return o=typeof o.then=="function"?Lu(o):o,r=r.useState()[0],(ue!==null?ue.memoizedState:null)!==r&&(Bt.flags|=1024),o}function xy(){var r=Rd!==0;return Rd=0,r}function Iy(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function Ry(r){if(Id){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Id=!1}Ar=0,He=ue=Bt=null,Il=!1,Vu=Rd=0,Rl=null}function Bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Bt.memoizedState=He=r:He=He.next=r,He}function qe(){if(ue===null){var r=Bt.alternate;r=r!==null?r.memoizedState:null}else r=ue.next;var o=He===null?Bt.memoizedState:He.next;if(o!==null)He=o,ue=r;else{if(r===null)throw Bt.alternate===null?Error(i(467)):Error(i(310));ue=r,r={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},He===null?Bt.memoizedState=He=r:He=He.next=r}return He}function Cy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lu(r){var o=Vu;return Vu+=1,Rl===null&&(Rl=[]),r=aS(Rl,r,o),o=Bt,(He===null?o.memoizedState:He.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?WS:YS),r}function Cd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Lu(r);if(r.$$typeof===U)return En(r)}throw Error(i(438,String(r)))}function Dy(r){var o=null,u=Bt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=Bt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Cy(),Bt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=P;return o.index++,u}function zs(r,o){return typeof o=="function"?o(r):o}function Dd(r){var o=qe();return My(o,ue,r)}function My(r,o,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var p=r.baseQueue,_=f.pending;if(_!==null){if(p!==null){var S=p.next;p.next=_.next,_.next=S}o.baseQueue=p=_,f.pending=null}if(_=r.baseState,p===null)r.memoizedState=_;else{o=p.next;var R=S=null,j=null,J=o,at=!1;do{var ct=J.lane&-536870913;if(ct!==J.lane?($t&ct)===ct:(Ar&ct)===ct){var et=J.revertLane;if(et===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ct===wl&&(at=!0);else if((Ar&et)===et){J=J.next,et===wl&&(at=!0);continue}else ct={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},j===null?(R=j=ct,S=_):j=j.next=ct,Bt.lanes|=et,Pr|=et;ct=J.action,no&&u(_,ct),_=J.hasEagerState?J.eagerState:u(_,ct)}else et={lane:ct,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},j===null?(R=j=et,S=_):j=j.next=et,Bt.lanes|=ct,Pr|=ct;J=J.next}while(J!==null&&J!==o);if(j===null?S=_:j.next=R,!Qn(_,r.memoizedState)&&(ln=!0,at&&(u=Al,u!==null)))throw u;r.memoizedState=_,r.baseState=S,r.baseQueue=j,f.lastRenderedState=_}return p===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Py(r){var o=qe(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,p=u.pending,_=o.memoizedState;if(p!==null){u.pending=null;var S=p=p.next;do _=r(_,S.action),S=S.next;while(S!==p);Qn(_,o.memoizedState)||(ln=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function mS(r,o,u){var f=Bt,p=qe(),_=te;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var S=!Qn((ue||p).memoizedState,u);S&&(p.memoizedState=u,ln=!0),p=p.queue;var R=yS.bind(null,f,p,r);if(Bu(2048,8,R,[r]),p.getSnapshot!==o||S||He!==null&&He.memoizedState.tag&1){if(f.flags|=2048,Cl(9,Md(),pS.bind(null,f,p,u,o),null),pe===null)throw Error(i(349));_||(Ar&124)!==0||gS(f,o,u)}return u}function gS(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Bt.updateQueue,o===null?(o=Cy(),Bt.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function pS(r,o,u,f){o.value=u,o.getSnapshot=f,_S(o)&&vS(r)}function yS(r,o,u){return u(function(){_S(o)&&vS(r)})}function _S(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Qn(r,u)}catch{return!0}}function vS(r){var o=bl(r,2);o!==null&&ii(o,r,2)}function Oy(r){var o=Bn();if(typeof r=="function"){var u=r;if(r=u(),no){Yn(!0);try{u()}finally{Yn(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:r},o}function bS(r,o,u,f){return r.baseState=u,My(r,ue,typeof f=="function"?f:zs)}function jN(r,o,u,f,p){if(Od(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};G.T!==null?u(!0):_.isTransition=!1,f(_),u=o.pending,u===null?(_.next=o.pending=_,TS(o,_)):(_.next=u.next,o.pending=u.next=_)}}function TS(r,o){var u=o.action,f=o.payload,p=r.state;if(o.isTransition){var _=G.T,S={};G.T=S;try{var R=u(p,f),j=G.S;j!==null&&j(S,R),ES(r,o,R)}catch(J){ky(r,o,J)}finally{G.T=_}}else try{_=u(p,f),ES(r,o,_)}catch(J){ky(r,o,J)}}function ES(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){SS(r,o,f)},function(f){return ky(r,o,f)}):SS(r,o,u)}function SS(r,o,u){o.status="fulfilled",o.value=u,wS(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,TS(r,u)))}function ky(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,wS(o),o=o.next;while(o!==f)}r.action=null}function wS(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function AS(r,o){return o}function xS(r,o){if(te){var u=pe.formState;if(u!==null){t:{var f=Bt;if(te){if(Re){e:{for(var p=Re,_=ts;p.nodeType!==8;){if(!_){p=null;break e}if(p=Ni(p.nextSibling),p===null){p=null;break e}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Re=Ni(p.nextSibling),f=p.data==="F!";break t}}Za(f)}f=!1}f&&(o=u[0])}}return u=Bn(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:AS,lastRenderedState:o},u.queue=f,u=GS.bind(null,Bt,f),f.dispatch=u,f=Oy(!1),_=Uy.bind(null,Bt,!1,f.queue),f=Bn(),p={state:o,dispatch:null,action:r,pending:null},f.queue=p,u=jN.bind(null,Bt,p,_,u),p.dispatch=u,f.memoizedState=r,[o,u,!1]}function IS(r){var o=qe();return RS(o,ue,r)}function RS(r,o,u){if(o=My(r,o,AS)[0],r=Dd(zs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Lu(o)}catch(S){throw S===Mu?wd:S}else f=o;o=qe();var p=o.queue,_=p.dispatch;return u!==o.memoizedState&&(Bt.flags|=2048,Cl(9,Md(),FN.bind(null,p,u),null)),[f,_,r]}function FN(r,o){r.action=o}function CS(r){var o=qe(),u=ue;if(u!==null)return RS(o,u,r);qe(),o=o.memoizedState,u=qe();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Cl(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=Bt.updateQueue,o===null&&(o=Cy(),Bt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function Md(){return{destroy:void 0,resource:void 0}}function DS(){return qe().memoizedState}function Pd(r,o,u,f){var p=Bn();f=f===void 0?null:f,Bt.flags|=r,p.memoizedState=Cl(1|o,Md(),u,f)}function Bu(r,o,u,f){var p=qe();f=f===void 0?null:f;var _=p.memoizedState.inst;ue!==null&&f!==null&&wy(f,ue.memoizedState.deps)?p.memoizedState=Cl(o,_,u,f):(Bt.flags|=r,p.memoizedState=Cl(1|o,_,u,f))}function MS(r,o){Pd(8390656,8,r,o)}function PS(r,o){Bu(2048,8,r,o)}function OS(r,o){return Bu(4,2,r,o)}function kS(r,o){return Bu(4,4,r,o)}function NS(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function VS(r,o,u){u=u!=null?u.concat([r]):null,Bu(4,4,NS.bind(null,o,r),u)}function Ny(){}function LS(r,o){var u=qe();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&wy(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function BS(r,o){var u=qe();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&wy(o,f[1]))return f[0];if(f=r(),no){Yn(!0);try{r()}finally{Yn(!1)}}return u.memoizedState=[f,o],f}function Vy(r,o,u){return u===void 0||(Ar&1073741824)!==0?r.memoizedState=o:(r.memoizedState=u,r=Fw(),Bt.lanes|=r,Pr|=r,u)}function US(r,o,u,f){return Qn(u,o)?u:xl.current!==null?(r=Vy(r,u,f),Qn(r,o)||(ln=!0),r):(Ar&42)===0?(ln=!0,r.memoizedState=u):(r=Fw(),Bt.lanes|=r,Pr|=r,o)}function jS(r,o,u,f,p){var _=st.p;st.p=_!==0&&8>_?_:8;var S=G.T,R={};G.T=R,Uy(r,!1,o,u);try{var j=p(),J=G.S;if(J!==null&&J(R,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var at=LN(j,f);Uu(r,o,at,ni(r))}else Uu(r,o,f,ni(r))}catch(ct){Uu(r,o,{then:function(){},status:"rejected",reason:ct},ni())}finally{st.p=_,G.T=S}}function zN(){}function Ly(r,o,u,f){if(r.tag!==5)throw Error(i(476));var p=FS(r).queue;jS(r,p,o,ut,u===null?zN:function(){return zS(r),u(f)})}function FS(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:ut},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function zS(r){var o=FS(r).next.queue;Uu(r,o,{},ni())}function By(){return En(ih)}function HS(){return qe().memoizedState}function qS(){return qe().memoizedState}function HN(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=ni();r=Sr(u);var f=wr(o,r,u);f!==null&&(ii(f,o,u),Ou(f,o,u)),o={cache:my()},r.payload=o;return}o=o.return}}function qN(r,o,u){var f=ni();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Od(r)?KS(o,u):(u=sy(r,o,u,f),u!==null&&(ii(u,r,f),$S(u,o,f)))}function GS(r,o,u){var f=ni();Uu(r,o,u,f)}function Uu(r,o,u,f){var p={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Od(r))KS(o,p);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var S=o.lastRenderedState,R=_(S,u);if(p.hasEagerState=!0,p.eagerState=R,Qn(R,S))return pd(r,o,p,0),pe===null&&gd(),!1}catch{}finally{}if(u=sy(r,o,p,f),u!==null)return ii(u,r,f),$S(u,o,f),!0}return!1}function Uy(r,o,u,f){if(f={lane:2,revertLane:y_(),action:f,hasEagerState:!1,eagerState:null,next:null},Od(r)){if(o)throw Error(i(479))}else o=sy(r,u,f,2),o!==null&&ii(o,r,2)}function Od(r){var o=r.alternate;return r===Bt||o!==null&&o===Bt}function KS(r,o){Il=Id=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function $S(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,ou(r,u)}}var kd={readContext:En,use:Cd,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useLayoutEffect:Oe,useInsertionEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useSyncExternalStore:Oe,useId:Oe,useHostTransitionStatus:Oe,useFormState:Oe,useActionState:Oe,useOptimistic:Oe,useMemoCache:Oe,useCacheRefresh:Oe},WS={readContext:En,use:Cd,useCallback:function(r,o){return Bn().memoizedState=[r,o===void 0?null:o],r},useContext:En,useEffect:MS,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Pd(4194308,4,NS.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Pd(4194308,4,r,o)},useInsertionEffect:function(r,o){Pd(4,2,r,o)},useMemo:function(r,o){var u=Bn();o=o===void 0?null:o;var f=r();if(no){Yn(!0);try{r()}finally{Yn(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=Bn();if(u!==void 0){var p=u(o);if(no){Yn(!0);try{u(o)}finally{Yn(!1)}}}else p=o;return f.memoizedState=f.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},f.queue=r,r=r.dispatch=qN.bind(null,Bt,r),[f.memoizedState,r]},useRef:function(r){var o=Bn();return r={current:r},o.memoizedState=r},useState:function(r){r=Oy(r);var o=r.queue,u=GS.bind(null,Bt,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Ny,useDeferredValue:function(r,o){var u=Bn();return Vy(u,r,o)},useTransition:function(){var r=Oy(!1);return r=jS.bind(null,Bt,r.queue,!0,!1),Bn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=Bt,p=Bn();if(te){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),pe===null)throw Error(i(349));($t&124)!==0||gS(f,o,u)}p.memoizedState=u;var _={value:u,getSnapshot:o};return p.queue=_,MS(yS.bind(null,f,_,r),[r]),f.flags|=2048,Cl(9,Md(),pS.bind(null,f,_,u,o),null),u},useId:function(){var r=Bn(),o=pe.identifierPrefix;if(te){var u=Us,f=Bs;u=(f&~(1<<32-Tn(f)-1)).toString(32)+u,o="«"+o+"R"+u,u=Rd++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=BN++,o="«"+o+"r"+u.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:By,useFormState:xS,useActionState:xS,useOptimistic:function(r){var o=Bn();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Uy.bind(null,Bt,!0,u),u.dispatch=o,[r,o]},useMemoCache:Dy,useCacheRefresh:function(){return Bn().memoizedState=HN.bind(null,Bt)}},YS={readContext:En,use:Cd,useCallback:LS,useContext:En,useEffect:PS,useImperativeHandle:VS,useInsertionEffect:OS,useLayoutEffect:kS,useMemo:BS,useReducer:Dd,useRef:DS,useState:function(){return Dd(zs)},useDebugValue:Ny,useDeferredValue:function(r,o){var u=qe();return US(u,ue.memoizedState,r,o)},useTransition:function(){var r=Dd(zs)[0],o=qe().memoizedState;return[typeof r=="boolean"?r:Lu(r),o]},useSyncExternalStore:mS,useId:HS,useHostTransitionStatus:By,useFormState:IS,useActionState:IS,useOptimistic:function(r,o){var u=qe();return bS(u,ue,r,o)},useMemoCache:Dy,useCacheRefresh:qS},GN={readContext:En,use:Cd,useCallback:LS,useContext:En,useEffect:PS,useImperativeHandle:VS,useInsertionEffect:OS,useLayoutEffect:kS,useMemo:BS,useReducer:Py,useRef:DS,useState:function(){return Py(zs)},useDebugValue:Ny,useDeferredValue:function(r,o){var u=qe();return ue===null?Vy(u,r,o):US(u,ue.memoizedState,r,o)},useTransition:function(){var r=Py(zs)[0],o=qe().memoizedState;return[typeof r=="boolean"?r:Lu(r),o]},useSyncExternalStore:mS,useId:HS,useHostTransitionStatus:By,useFormState:CS,useActionState:CS,useOptimistic:function(r,o){var u=qe();return ue!==null?bS(u,ue,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Dy,useCacheRefresh:qS},Dl=null,ju=0;function Nd(r){var o=ju;return ju+=1,Dl===null&&(Dl=[]),aS(Dl,r,o)}function Fu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Vd(r,o){throw o.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function XS(r){var o=r._init;return o(r._payload)}function QS(r){function o($,q){if(r){var Q=$.deletions;Q===null?($.deletions=[q],$.flags|=16):Q.push(q)}}function u($,q){if(!r)return null;for(;q!==null;)o($,q),q=q.sibling;return null}function f($){for(var q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function p($,q){return $=Ls($,q),$.index=0,$.sibling=null,$}function _($,q,Q){return $.index=Q,r?(Q=$.alternate,Q!==null?(Q=Q.index,Q<q?($.flags|=67108866,q):Q):($.flags|=67108866,q)):($.flags|=1048576,q)}function S($){return r&&$.alternate===null&&($.flags|=67108866),$}function R($,q,Q,ot){return q===null||q.tag!==6?(q=ay(Q,$.mode,ot),q.return=$,q):(q=p(q,Q),q.return=$,q)}function j($,q,Q,ot){var bt=Q.type;return bt===w?at($,q,Q.props.children,ot,Q.key):q!==null&&(q.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===I&&XS(bt)===q.type)?(q=p(q,Q.props),Fu(q,Q),q.return=$,q):(q=_d(Q.type,Q.key,Q.props,null,$.mode,ot),Fu(q,Q),q.return=$,q)}function J($,q,Q,ot){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=oy(Q,$.mode,ot),q.return=$,q):(q=p(q,Q.children||[]),q.return=$,q)}function at($,q,Q,ot,bt){return q===null||q.tag!==7?(q=Wa(Q,$.mode,ot,bt),q.return=$,q):(q=p(q,Q),q.return=$,q)}function ct($,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=ay(""+q,$.mode,Q),q.return=$,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return Q=_d(q.type,q.key,q.props,null,$.mode,Q),Fu(Q,q),Q.return=$,Q;case T:return q=oy(q,$.mode,Q),q.return=$,q;case I:var ot=q._init;return q=ot(q._payload),ct($,q,Q)}if(Et(q)||F(q))return q=Wa(q,$.mode,Q,null),q.return=$,q;if(typeof q.then=="function")return ct($,Nd(q),Q);if(q.$$typeof===U)return ct($,Ed($,q),Q);Vd($,q)}return null}function et($,q,Q,ot){var bt=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return bt!==null?null:R($,q,""+Q,ot);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:return Q.key===bt?j($,q,Q,ot):null;case T:return Q.key===bt?J($,q,Q,ot):null;case I:return bt=Q._init,Q=bt(Q._payload),et($,q,Q,ot)}if(Et(Q)||F(Q))return bt!==null?null:at($,q,Q,ot,null);if(typeof Q.then=="function")return et($,q,Nd(Q),ot);if(Q.$$typeof===U)return et($,q,Ed($,Q),ot);Vd($,Q)}return null}function it($,q,Q,ot,bt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return $=$.get(Q)||null,R(q,$,""+ot,bt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case v:return $=$.get(ot.key===null?Q:ot.key)||null,j(q,$,ot,bt);case T:return $=$.get(ot.key===null?Q:ot.key)||null,J(q,$,ot,bt);case I:var jt=ot._init;return ot=jt(ot._payload),it($,q,Q,ot,bt)}if(Et(ot)||F(ot))return $=$.get(Q)||null,at(q,$,ot,bt,null);if(typeof ot.then=="function")return it($,q,Q,Nd(ot),bt);if(ot.$$typeof===U)return it($,q,Q,Ed(q,ot),bt);Vd(q,ot)}return null}function Mt($,q,Q,ot){for(var bt=null,jt=null,wt=q,Ct=q=0,un=null;wt!==null&&Ct<Q.length;Ct++){wt.index>Ct?(un=wt,wt=null):un=wt.sibling;var Jt=et($,wt,Q[Ct],ot);if(Jt===null){wt===null&&(wt=un);break}r&&wt&&Jt.alternate===null&&o($,wt),q=_(Jt,q,Ct),jt===null?bt=Jt:jt.sibling=Jt,jt=Jt,wt=un}if(Ct===Q.length)return u($,wt),te&&Xa($,Ct),bt;if(wt===null){for(;Ct<Q.length;Ct++)wt=ct($,Q[Ct],ot),wt!==null&&(q=_(wt,q,Ct),jt===null?bt=wt:jt.sibling=wt,jt=wt);return te&&Xa($,Ct),bt}for(wt=f(wt);Ct<Q.length;Ct++)un=it(wt,$,Ct,Q[Ct],ot),un!==null&&(r&&un.alternate!==null&&wt.delete(un.key===null?Ct:un.key),q=_(un,q,Ct),jt===null?bt=un:jt.sibling=un,jt=un);return r&&wt.forEach(function(Fr){return o($,Fr)}),te&&Xa($,Ct),bt}function It($,q,Q,ot){if(Q==null)throw Error(i(151));for(var bt=null,jt=null,wt=q,Ct=q=0,un=null,Jt=Q.next();wt!==null&&!Jt.done;Ct++,Jt=Q.next()){wt.index>Ct?(un=wt,wt=null):un=wt.sibling;var Fr=et($,wt,Jt.value,ot);if(Fr===null){wt===null&&(wt=un);break}r&&wt&&Fr.alternate===null&&o($,wt),q=_(Fr,q,Ct),jt===null?bt=Fr:jt.sibling=Fr,jt=Fr,wt=un}if(Jt.done)return u($,wt),te&&Xa($,Ct),bt;if(wt===null){for(;!Jt.done;Ct++,Jt=Q.next())Jt=ct($,Jt.value,ot),Jt!==null&&(q=_(Jt,q,Ct),jt===null?bt=Jt:jt.sibling=Jt,jt=Jt);return te&&Xa($,Ct),bt}for(wt=f(wt);!Jt.done;Ct++,Jt=Q.next())Jt=it(wt,$,Ct,Jt.value,ot),Jt!==null&&(r&&Jt.alternate!==null&&wt.delete(Jt.key===null?Ct:Jt.key),q=_(Jt,q,Ct),jt===null?bt=Jt:jt.sibling=Jt,jt=Jt);return r&&wt.forEach(function(KV){return o($,KV)}),te&&Xa($,Ct),bt}function fe($,q,Q,ot){if(typeof Q=="object"&&Q!==null&&Q.type===w&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:t:{for(var bt=Q.key;q!==null;){if(q.key===bt){if(bt=Q.type,bt===w){if(q.tag===7){u($,q.sibling),ot=p(q,Q.props.children),ot.return=$,$=ot;break t}}else if(q.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===I&&XS(bt)===q.type){u($,q.sibling),ot=p(q,Q.props),Fu(ot,Q),ot.return=$,$=ot;break t}u($,q);break}else o($,q);q=q.sibling}Q.type===w?(ot=Wa(Q.props.children,$.mode,ot,Q.key),ot.return=$,$=ot):(ot=_d(Q.type,Q.key,Q.props,null,$.mode,ot),Fu(ot,Q),ot.return=$,$=ot)}return S($);case T:t:{for(bt=Q.key;q!==null;){if(q.key===bt)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){u($,q.sibling),ot=p(q,Q.children||[]),ot.return=$,$=ot;break t}else{u($,q);break}else o($,q);q=q.sibling}ot=oy(Q,$.mode,ot),ot.return=$,$=ot}return S($);case I:return bt=Q._init,Q=bt(Q._payload),fe($,q,Q,ot)}if(Et(Q))return Mt($,q,Q,ot);if(F(Q)){if(bt=F(Q),typeof bt!="function")throw Error(i(150));return Q=bt.call(Q),It($,q,Q,ot)}if(typeof Q.then=="function")return fe($,q,Nd(Q),ot);if(Q.$$typeof===U)return fe($,q,Ed($,Q),ot);Vd($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(u($,q.sibling),ot=p(q,Q),ot.return=$,$=ot):(u($,q),ot=ay(Q,$.mode,ot),ot.return=$,$=ot),S($)):u($,q)}return function($,q,Q,ot){try{ju=0;var bt=fe($,q,Q,ot);return Dl=null,bt}catch(wt){if(wt===Mu||wt===wd)throw wt;var jt=Zn(29,wt,null,$.mode);return jt.lanes=ot,jt.return=$,jt}finally{}}}var Ml=QS(!0),ZS=QS(!1),vi=H(null),es=null;function xr(r){var o=r.alternate;tt(tn,tn.current&1),tt(vi,r),es===null&&(o===null||xl.current!==null||o.memoizedState!==null)&&(es=r)}function JS(r){if(r.tag===22){if(tt(tn,tn.current),tt(vi,r),es===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(es=r)}}else Ir()}function Ir(){tt(tn,tn.current),tt(vi,vi.current)}function Hs(r){X(vi),es===r&&(es=null),X(tn)}var tn=H(0);function Ld(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||C_(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function jy(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:m({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Fy={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=ni(),p=Sr(f);p.payload=o,u!=null&&(p.callback=u),o=wr(r,p,f),o!==null&&(ii(o,r,f),Ou(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=ni(),p=Sr(f);p.tag=1,p.payload=o,u!=null&&(p.callback=u),o=wr(r,p,f),o!==null&&(ii(o,r,f),Ou(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=ni(),f=Sr(u);f.tag=2,o!=null&&(f.callback=o),o=wr(r,f,u),o!==null&&(ii(o,r,u),Ou(o,r,u))}};function tw(r,o,u,f,p,_,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,_,S):o.prototype&&o.prototype.isPureReactComponent?!Su(u,f)||!Su(p,_):!0}function ew(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&Fy.enqueueReplaceState(o,o.state,null)}function io(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=m({},u));for(var p in r)u[p]===void 0&&(u[p]=r[p])}return u}var Bd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function nw(r){Bd(r)}function iw(r){console.error(r)}function sw(r){Bd(r)}function Ud(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function rw(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function zy(r,o,u){return u=Sr(u),u.tag=3,u.payload={element:null},u.callback=function(){Ud(r,o)},u}function aw(r){return r=Sr(r),r.tag=3,r}function ow(r,o,u,f){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var _=f.value;r.payload=function(){return p(_)},r.callback=function(){rw(o,u,f)}}var S=u.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){rw(o,u,f),typeof p!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function KN(r,o,u,f,p){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&Ru(o,u,p,!0),u=vi.current,u!==null){switch(u.tag){case 13:return es===null?f_():u.alternate===null&&Ce===0&&(Ce=3),u.flags&=-257,u.flags|=65536,u.lanes=p,f===yy?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),m_(r,f,p)),!1;case 22:return u.flags|=65536,f===yy?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),m_(r,f,p)),!1}throw Error(i(435,u.tag))}return m_(r,f,p),f_(),!1}if(te)return o=vi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,f!==uy&&(r=Error(i(422),{cause:f}),Iu(gi(r,u)))):(f!==uy&&(o=Error(i(423),{cause:f}),Iu(gi(o,u))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,f=gi(f,u),p=zy(r.stateNode,f,p),by(r,p),Ce!==4&&(Ce=2)),!1;var _=Error(i(520),{cause:f});if(_=gi(_,u),Wu===null?Wu=[_]:Wu.push(_),Ce!==4&&(Ce=2),o===null)return!0;f=gi(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=p&-p,u.lanes|=r,r=zy(u.stateNode,f,r),by(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Or===null||!Or.has(_))))return u.flags|=65536,p&=-p,u.lanes|=p,p=aw(p),ow(p,r,u,f),by(u,p),!1}u=u.return}while(u!==null);return!1}var lw=Error(i(461)),ln=!1;function pn(r,o,u,f){o.child=r===null?ZS(o,null,u,f):Ml(o,r.child,u,f)}function cw(r,o,u,f,p){u=u.render;var _=o.ref;if("ref"in f){var S={};for(var R in f)R!=="ref"&&(S[R]=f[R])}else S=f;return to(o),f=Ay(r,o,u,S,_,p),R=xy(),r!==null&&!ln?(Iy(r,o,p),qs(r,o,p)):(te&&R&&ly(o),o.flags|=1,pn(r,o,f,p),o.child)}function uw(r,o,u,f,p){if(r===null){var _=u.type;return typeof _=="function"&&!ry(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,hw(r,o,_,f,p)):(r=_d(u.type,null,f,o,o.mode,p),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!Xy(r,p)){var S=_.memoizedProps;if(u=u.compare,u=u!==null?u:Su,u(S,f)&&r.ref===o.ref)return qs(r,o,p)}return o.flags|=1,r=Ls(_,f),r.ref=o.ref,r.return=o,o.child=r}function hw(r,o,u,f,p){if(r!==null){var _=r.memoizedProps;if(Su(_,f)&&r.ref===o.ref)if(ln=!1,o.pendingProps=f=_,Xy(r,p))(r.flags&131072)!==0&&(ln=!0);else return o.lanes=r.lanes,qs(r,o,p)}return Hy(r,o,u,f,p)}function fw(r,o,u){var f=o.pendingProps,p=f.children,_=r!==null?r.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=_!==null?_.baseLanes|u:u,r!==null){for(p=o.child=r.child,_=0;p!==null;)_=_|p.lanes|p.childLanes,p=p.sibling;o.childLanes=_&~f}else o.childLanes=0,o.child=null;return dw(r,o,f,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Sd(o,_!==null?_.cachePool:null),_!==null?hS(o,_):Ey(),JS(o);else return o.lanes=o.childLanes=536870912,dw(r,o,_!==null?_.baseLanes|u:u,u)}else _!==null?(Sd(o,_.cachePool),hS(o,_),Ir(),o.memoizedState=null):(r!==null&&Sd(o,null),Ey(),Ir());return pn(r,o,p,u),o.child}function dw(r,o,u,f){var p=py();return p=p===null?null:{parent:Je._currentValue,pool:p},o.memoizedState={baseLanes:u,cachePool:p},r!==null&&Sd(o,null),Ey(),JS(o),r!==null&&Ru(r,o,f,!0),null}function jd(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Hy(r,o,u,f,p){return to(o),u=Ay(r,o,u,f,void 0,p),f=xy(),r!==null&&!ln?(Iy(r,o,p),qs(r,o,p)):(te&&f&&ly(o),o.flags|=1,pn(r,o,u,p),o.child)}function mw(r,o,u,f,p,_){return to(o),o.updateQueue=null,u=dS(o,f,u,p),fS(r),f=xy(),r!==null&&!ln?(Iy(r,o,_),qs(r,o,_)):(te&&f&&ly(o),o.flags|=1,pn(r,o,u,_),o.child)}function gw(r,o,u,f,p){if(to(o),o.stateNode===null){var _=Tl,S=u.contextType;typeof S=="object"&&S!==null&&(_=En(S)),_=new u(f,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Fy,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=f,_.state=o.memoizedState,_.refs={},_y(o),S=u.contextType,_.context=typeof S=="object"&&S!==null?En(S):Tl,_.state=o.memoizedState,S=u.getDerivedStateFromProps,typeof S=="function"&&(jy(o,u,S,f),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&Fy.enqueueReplaceState(_,_.state,null),Nu(o,f,_,p),ku(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){_=o.stateNode;var R=o.memoizedProps,j=io(u,R);_.props=j;var J=_.context,at=u.contextType;S=Tl,typeof at=="object"&&at!==null&&(S=En(at));var ct=u.getDerivedStateFromProps;at=typeof ct=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,at||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||J!==S)&&ew(o,_,f,S),Er=!1;var et=o.memoizedState;_.state=et,Nu(o,f,_,p),ku(),J=o.memoizedState,R||et!==J||Er?(typeof ct=="function"&&(jy(o,u,ct,f),J=o.memoizedState),(j=Er||tw(o,u,j,f,et,J,S))?(at||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=J),_.props=f,_.state=J,_.context=S,f=j):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,vy(r,o),S=o.memoizedProps,at=io(u,S),_.props=at,ct=o.pendingProps,et=_.context,J=u.contextType,j=Tl,typeof J=="object"&&J!==null&&(j=En(J)),R=u.getDerivedStateFromProps,(J=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==ct||et!==j)&&ew(o,_,f,j),Er=!1,et=o.memoizedState,_.state=et,Nu(o,f,_,p),ku();var it=o.memoizedState;S!==ct||et!==it||Er||r!==null&&r.dependencies!==null&&Td(r.dependencies)?(typeof R=="function"&&(jy(o,u,R,f),it=o.memoizedState),(at=Er||tw(o,u,at,f,et,it,j)||r!==null&&r.dependencies!==null&&Td(r.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,it,j),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,it,j)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===r.memoizedProps&&et===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&et===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=it),_.props=f,_.state=it,_.context=j,f=at):(typeof _.componentDidUpdate!="function"||S===r.memoizedProps&&et===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&et===r.memoizedState||(o.flags|=1024),f=!1)}return _=f,jd(r,o),f=(o.flags&128)!==0,_||f?(_=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&f?(o.child=Ml(o,r.child,null,p),o.child=Ml(o,null,u,p)):pn(r,o,u,p),o.memoizedState=_.state,r=o.child):r=qs(r,o,p),r}function pw(r,o,u,f){return xu(),o.flags|=256,pn(r,o,u,f),o.child}var qy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gy(r){return{baseLanes:r,cachePool:iS()}}function Ky(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=bi),r}function yw(r,o,u){var f=o.pendingProps,p=!1,_=(o.flags&128)!==0,S;if((S=_)||(S=r!==null&&r.memoizedState===null?!1:(tn.current&2)!==0),S&&(p=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,r===null){if(te){if(p?xr(o):Ir(),te){var R=Re,j;if(j=R){t:{for(j=R,R=ts;j.nodeType!==8;){if(!R){R=null;break t}if(j=Ni(j.nextSibling),j===null){R=null;break t}}R=j}R!==null?(o.memoizedState={dehydrated:R,treeContext:Ya!==null?{id:Bs,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},j=Zn(18,null,null,0),j.stateNode=R,j.return=o,o.child=j,kn=o,Re=null,j=!0):j=!1}j||Za(o)}if(R=o.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return C_(R)?o.lanes=32:o.lanes=536870912,null;Hs(o)}return R=f.children,f=f.fallback,p?(Ir(),p=o.mode,R=Fd({mode:"hidden",children:R},p),f=Wa(f,p,u,null),R.return=o,f.return=o,R.sibling=f,o.child=R,p=o.child,p.memoizedState=Gy(u),p.childLanes=Ky(r,S,u),o.memoizedState=qy,f):(xr(o),$y(o,R))}if(j=r.memoizedState,j!==null&&(R=j.dehydrated,R!==null)){if(_)o.flags&256?(xr(o),o.flags&=-257,o=Wy(r,o,u)):o.memoizedState!==null?(Ir(),o.child=r.child,o.flags|=128,o=null):(Ir(),p=f.fallback,R=o.mode,f=Fd({mode:"visible",children:f.children},R),p=Wa(p,R,u,null),p.flags|=2,f.return=o,p.return=o,f.sibling=p,o.child=f,Ml(o,r.child,null,u),f=o.child,f.memoizedState=Gy(u),f.childLanes=Ky(r,S,u),o.memoizedState=qy,o=p);else if(xr(o),C_(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var J=S.dgst;S=J,f=Error(i(419)),f.stack="",f.digest=S,Iu({value:f,source:null,stack:null}),o=Wy(r,o,u)}else if(ln||Ru(r,o,u,!1),S=(u&r.childLanes)!==0,ln||S){if(S=pe,S!==null&&(f=u&-u,f=(f&42)!==0?1:mr(f),f=(f&(S.suspendedLanes|u))!==0?0:f,f!==0&&f!==j.retryLane))throw j.retryLane=f,bl(r,f),ii(S,r,f),lw;R.data==="$?"||f_(),o=Wy(r,o,u)}else R.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=j.treeContext,Re=Ni(R.nextSibling),kn=o,te=!0,Qa=null,ts=!1,r!==null&&(yi[_i++]=Bs,yi[_i++]=Us,yi[_i++]=Ya,Bs=r.id,Us=r.overflow,Ya=o),o=$y(o,f.children),o.flags|=4096);return o}return p?(Ir(),p=f.fallback,R=o.mode,j=r.child,J=j.sibling,f=Ls(j,{mode:"hidden",children:f.children}),f.subtreeFlags=j.subtreeFlags&65011712,J!==null?p=Ls(J,p):(p=Wa(p,R,u,null),p.flags|=2),p.return=o,f.return=o,f.sibling=p,o.child=f,f=p,p=o.child,R=r.child.memoizedState,R===null?R=Gy(u):(j=R.cachePool,j!==null?(J=Je._currentValue,j=j.parent!==J?{parent:J,pool:J}:j):j=iS(),R={baseLanes:R.baseLanes|u,cachePool:j}),p.memoizedState=R,p.childLanes=Ky(r,S,u),o.memoizedState=qy,f):(xr(o),u=r.child,r=u.sibling,u=Ls(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(S=o.deletions,S===null?(o.deletions=[r],o.flags|=16):S.push(r)),o.child=u,o.memoizedState=null,u)}function $y(r,o){return o=Fd({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Fd(r,o){return r=Zn(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Wy(r,o,u){return Ml(o,r.child,null,u),r=$y(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function _w(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),fy(r.return,o,u)}function Yy(r,o,u,f,p){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:p}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=p)}function vw(r,o,u){var f=o.pendingProps,p=f.revealOrder,_=f.tail;if(pn(r,o,f.children,u),f=tn.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&_w(r,u,o);else if(r.tag===19)_w(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break t;for(;r.sibling===null;){if(r.return===null||r.return===o)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}switch(tt(tn,f),p){case"forwards":for(u=o.child,p=null;u!==null;)r=u.alternate,r!==null&&Ld(r)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),Yy(o,!1,p,u,_);break;case"backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(r=p.alternate,r!==null&&Ld(r)===null){o.child=p;break}r=p.sibling,p.sibling=u,u=p,p=r}Yy(o,!0,u,null,_);break;case"together":Yy(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function qs(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Pr|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Ru(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Ls(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Ls(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Xy(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Td(r)))}function $N(r,o,u){switch(o.tag){case 3:Vt(o,o.stateNode.containerInfo),Tr(o,Je,r.memoizedState.cache),xu();break;case 27:case 5:kt(o);break;case 4:Vt(o,o.stateNode.containerInfo);break;case 10:Tr(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(xr(o),o.flags|=128,null):(u&o.child.childLanes)!==0?yw(r,o,u):(xr(o),r=qs(r,o,u),r!==null?r.sibling:null);xr(o);break;case 19:var p=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(Ru(r,o,u,!1),f=(u&o.childLanes)!==0),p){if(f)return vw(r,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),tt(tn,tn.current),f)break;return null;case 22:case 23:return o.lanes=0,fw(r,o,u);case 24:Tr(o,Je,r.memoizedState.cache)}return qs(r,o,u)}function bw(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)ln=!0;else{if(!Xy(r,u)&&(o.flags&128)===0)return ln=!1,$N(r,o,u);ln=(r.flags&131072)!==0}else ln=!1,te&&(o.flags&1048576)!==0&&XE(o,bd,o.index);switch(o.lanes=0,o.tag){case 16:t:{r=o.pendingProps;var f=o.elementType,p=f._init;if(f=p(f._payload),o.type=f,typeof f=="function")ry(f)?(r=io(f,r),o.tag=1,o=gw(null,o,f,r,u)):(o.tag=0,o=Hy(null,o,f,r,u));else{if(f!=null){if(p=f.$$typeof,p===K){o.tag=11,o=cw(null,o,f,r,u);break t}else if(p===O){o.tag=14,o=uw(null,o,f,r,u);break t}}throw o=At(f)||f,Error(i(306,o,""))}}return o;case 0:return Hy(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,p=io(f,o.pendingProps),gw(r,o,f,p,u);case 3:t:{if(Vt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var _=o.memoizedState;p=_.element,vy(r,o),Nu(o,f,null,u);var S=o.memoizedState;if(f=S.cache,Tr(o,Je,f),f!==_.cache&&dy(o,[Je],u,!0),ku(),f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=pw(r,o,f,u);break t}else if(f!==p){p=gi(Error(i(424)),o),Iu(p),o=pw(r,o,f,u);break t}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Re=Ni(r.firstChild),kn=o,te=!0,Qa=null,ts=!0,u=ZS(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(xu(),f===p){o=qs(r,o,u);break t}pn(r,o,f,u)}o=o.child}return o;case 26:return jd(r,o),r===null?(u=wA(o.type,null,o.pendingProps,null))?o.memoizedState=u:te||(u=o.type,r=o.pendingProps,f=em(yt.current).createElement(u),f[Xe]=o,f[Fe]=r,_n(f,u,r),Pe(f),o.stateNode=f):o.memoizedState=wA(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return kt(o),r===null&&te&&(f=o.stateNode=TA(o.type,o.pendingProps,yt.current),kn=o,ts=!0,p=Re,Vr(o.type)?(D_=p,Re=Ni(f.firstChild)):Re=p),pn(r,o,o.pendingProps.children,u),jd(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&te&&((p=f=Re)&&(f=TV(f,o.type,o.pendingProps,ts),f!==null?(o.stateNode=f,kn=o,Re=Ni(f.firstChild),ts=!1,p=!0):p=!1),p||Za(o)),kt(o),p=o.type,_=o.pendingProps,S=r!==null?r.memoizedProps:null,f=_.children,x_(p,_)?f=null:S!==null&&x_(p,S)&&(o.flags|=32),o.memoizedState!==null&&(p=Ay(r,o,UN,null,null,u),ih._currentValue=p),jd(r,o),pn(r,o,f,u),o.child;case 6:return r===null&&te&&((r=u=Re)&&(u=EV(u,o.pendingProps,ts),u!==null?(o.stateNode=u,kn=o,Re=null,r=!0):r=!1),r||Za(o)),null;case 13:return yw(r,o,u);case 4:return Vt(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=Ml(o,null,f,u):pn(r,o,f,u),o.child;case 11:return cw(r,o,o.type,o.pendingProps,u);case 7:return pn(r,o,o.pendingProps,u),o.child;case 8:return pn(r,o,o.pendingProps.children,u),o.child;case 12:return pn(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,Tr(o,o.type,f.value),pn(r,o,f.children,u),o.child;case 9:return p=o.type._context,f=o.pendingProps.children,to(o),p=En(p),f=f(p),o.flags|=1,pn(r,o,f,u),o.child;case 14:return uw(r,o,o.type,o.pendingProps,u);case 15:return hw(r,o,o.type,o.pendingProps,u);case 19:return vw(r,o,u);case 31:return f=o.pendingProps,u=o.mode,f={mode:f.mode,children:f.children},r===null?(u=Fd(f,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=Ls(r.child,f),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return fw(r,o,u);case 24:return to(o),f=En(Je),r===null?(p=py(),p===null&&(p=pe,_=my(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=u),p=_),o.memoizedState={parent:f,cache:p},_y(o),Tr(o,Je,p)):((r.lanes&u)!==0&&(vy(r,o),Nu(o,null,null,u),ku()),p=r.memoizedState,_=o.memoizedState,p.parent!==f?(p={parent:f,cache:f},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Tr(o,Je,f)):(f=_.cache,Tr(o,Je,f),f!==p.cache&&dy(o,[Je],u,!0))),pn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Gs(r){r.flags|=4}function Tw(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!CA(o)){if(o=vi.current,o!==null&&(($t&4194048)===$t?es!==null:($t&62914560)!==$t&&($t&536870912)===0||o!==es))throw Pu=yy,sS;r.flags|=8192}}function zd(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?ru():536870912,r.lanes|=o,Nl|=o)}function zu(r,o){if(!te)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function we(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var p=r.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags&65011712,f|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function WN(r,o,u){var f=o.pendingProps;switch(cy(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(o),null;case 1:return we(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Fs(Je),Rt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Au(o)?Gs(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,JE())),we(o),null;case 26:return u=o.memoizedState,r===null?(Gs(o),u!==null?(we(o),Tw(o,u)):(we(o),o.flags&=-16777217)):u?u!==r.memoizedState?(Gs(o),we(o),Tw(o,u)):(we(o),o.flags&=-16777217):(r.memoizedProps!==f&&Gs(o),we(o),o.flags&=-16777217),null;case 27:Xt(o),u=yt.current;var p=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==f&&Gs(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return we(o),null}r=ft.current,Au(o)?QE(o):(r=TA(p,f,u),o.stateNode=r,Gs(o))}return we(o),null;case 5:if(Xt(o),u=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&Gs(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return we(o),null}if(r=ft.current,Au(o))QE(o);else{switch(p=em(yt.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof f.is=="string"?p.createElement("select",{is:f.is}):p.createElement("select"),f.multiple?r.multiple=!0:f.size&&(r.size=f.size);break;default:r=typeof f.is=="string"?p.createElement(u,{is:f.is}):p.createElement(u)}}r[Xe]=o,r[Fe]=f;t:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break t;for(;p.sibling===null;){if(p.return===null||p.return===o)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=r;t:switch(_n(r,u,f),u){case"button":case"input":case"select":case"textarea":r=!!f.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Gs(o)}}return we(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&Gs(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=yt.current,Au(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,p=kn,p!==null)switch(p.tag){case 27:case 5:f=p.memoizedProps}r[Xe]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||mA(r.nodeValue,u)),r||Za(o)}else r=em(r).createTextNode(f),r[Xe]=o,o.stateNode=r}return we(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=Au(o),f!==null&&f.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Xe]=o}else xu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;we(o),p=!1}else p=JE(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(Hs(o),o):(Hs(o),null)}if(Hs(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=f!==null,r=r!==null&&r.memoizedState!==null,u){f=o.child,p=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(p=f.alternate.memoizedState.cachePool.pool);var _=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==p&&(f.flags|=2048)}return u!==r&&u&&(o.child.flags|=8192),zd(o,o.updateQueue),we(o),null;case 4:return Rt(),r===null&&T_(o.stateNode.containerInfo),we(o),null;case 10:return Fs(o.type),we(o),null;case 19:if(X(tn),p=o.memoizedState,p===null)return we(o),null;if(f=(o.flags&128)!==0,_=p.rendering,_===null)if(f)zu(p,!1);else{if(Ce!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=Ld(r),_!==null){for(o.flags|=128,zu(p,!1),r=_.updateQueue,o.updateQueue=r,zd(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)YE(u,r),u=u.sibling;return tt(tn,tn.current&1|2),o.child}r=r.sibling}p.tail!==null&&Ln()>Gd&&(o.flags|=128,f=!0,zu(p,!1),o.lanes=4194304)}else{if(!f)if(r=Ld(_),r!==null){if(o.flags|=128,f=!0,r=r.updateQueue,o.updateQueue=r,zd(o,r),zu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!te)return we(o),null}else 2*Ln()-p.renderingStartTime>Gd&&u!==536870912&&(o.flags|=128,f=!0,zu(p,!1),o.lanes=4194304);p.isBackwards?(_.sibling=o.child,o.child=_):(r=p.last,r!==null?r.sibling=_:o.child=_,p.last=_)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Ln(),o.sibling=null,r=tn.current,tt(tn,f?r&1|2:r&1),o):(we(o),null);case 22:case 23:return Hs(o),Sy(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(we(o),o.subtreeFlags&6&&(o.flags|=8192)):we(o),u=o.updateQueue,u!==null&&zd(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&X(eo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Fs(Je),we(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function YN(r,o){switch(cy(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Fs(Je),Rt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Xt(o),null;case 13:if(Hs(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));xu()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return X(tn),null;case 4:return Rt(),null;case 10:return Fs(o.type),null;case 22:case 23:return Hs(o),Sy(),r!==null&&X(eo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Fs(Je),null;case 25:return null;default:return null}}function Ew(r,o){switch(cy(o),o.tag){case 3:Fs(Je),Rt();break;case 26:case 27:case 5:Xt(o);break;case 4:Rt();break;case 13:Hs(o);break;case 19:X(tn);break;case 10:Fs(o.type);break;case 22:case 23:Hs(o),Sy(),r!==null&&X(eo);break;case 24:Fs(Je)}}function Hu(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){f=void 0;var _=u.create,S=u.inst;f=_(),S.destroy=f}u=u.next}while(u!==p)}}catch(R){me(o,o.return,R)}}function Rr(r,o,u){try{var f=o.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&r)===r){var S=f.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,p=o;var j=u,J=R;try{J()}catch(at){me(p,j,at)}}}f=f.next}while(f!==_)}}catch(at){me(o,o.return,at)}}function Sw(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{uS(o,u)}catch(f){me(r,r.return,f)}}}function ww(r,o,u){u.props=io(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){me(r,o,f)}}function qu(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(p){me(r,o,p)}}function ns(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(p){me(r,o,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){me(r,o,p)}else u.current=null}function Aw(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break t;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(p){me(r,r.return,p)}}function Qy(r,o,u){try{var f=r.stateNode;pV(f,r.type,u,o),f[Fe]=o}catch(p){me(r,r.return,p)}}function xw(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Vr(r.type)||r.tag===4}function Zy(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||xw(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Vr(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Jy(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=tm));else if(f!==4&&(f===27&&Vr(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(Jy(r,o,u),r=r.sibling;r!==null;)Jy(r,o,u),r=r.sibling}function Hd(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&Vr(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Hd(r,o,u),r=r.sibling;r!==null;)Hd(r,o,u),r=r.sibling}function Iw(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);_n(o,f,u),o[Xe]=r,o[Fe]=u}catch(_){me(r,r.return,_)}}var Ks=!1,ke=!1,t_=!1,Rw=typeof WeakSet=="function"?WeakSet:Set,cn=null;function XN(r,o){if(r=r.containerInfo,w_=om,r=UE(r),Zp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else t:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var p=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break t}var S=0,R=-1,j=-1,J=0,at=0,ct=r,et=null;e:for(;;){for(var it;ct!==u||p!==0&&ct.nodeType!==3||(R=S+p),ct!==_||f!==0&&ct.nodeType!==3||(j=S+f),ct.nodeType===3&&(S+=ct.nodeValue.length),(it=ct.firstChild)!==null;)et=ct,ct=it;for(;;){if(ct===r)break e;if(et===u&&++J===p&&(R=S),et===_&&++at===f&&(j=S),(it=ct.nextSibling)!==null)break;ct=et,et=ct.parentNode}ct=it}u=R===-1||j===-1?null:{start:R,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(A_={focusedElem:r,selectionRange:u},om=!1,cn=o;cn!==null;)if(o=cn,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,cn=r;else for(;cn!==null;){switch(o=cn,_=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,p=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var Mt=io(u.type,p,u.elementType===u.type);r=f.getSnapshotBeforeUpdate(Mt,_),f.__reactInternalSnapshotBeforeUpdate=r}catch(It){me(u,u.return,It)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)R_(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":R_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,cn=r;break}cn=o.return}}function Cw(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Cr(r,u),f&4&&Hu(5,u);break;case 1:if(Cr(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(S){me(u,u.return,S)}else{var p=io(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(p,o,r.__reactInternalSnapshotBeforeUpdate)}catch(S){me(u,u.return,S)}}f&64&&Sw(u),f&512&&qu(u,u.return);break;case 3:if(Cr(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{uS(r,o)}catch(S){me(u,u.return,S)}}break;case 27:o===null&&f&4&&Iw(u);case 26:case 5:Cr(r,u),o===null&&f&4&&Aw(u),f&512&&qu(u,u.return);break;case 12:Cr(r,u);break;case 13:Cr(r,u),f&4&&Pw(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=rV.bind(null,u),SV(r,u))));break;case 22:if(f=u.memoizedState!==null||Ks,!f){o=o!==null&&o.memoizedState!==null||ke,p=Ks;var _=ke;Ks=f,(ke=o)&&!_?Dr(r,u,(u.subtreeFlags&8772)!==0):Cr(r,u),Ks=p,ke=_}break;case 30:break;default:Cr(r,u)}}function Dw(r){var o=r.alternate;o!==null&&(r.alternate=null,Dw(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&yr(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Te=null,Un=!1;function $s(r,o,u){for(u=u.child;u!==null;)Mw(r,o,u),u=u.sibling}function Mw(r,o,u){if(ie&&typeof ie.onCommitFiberUnmount=="function")try{ie.onCommitFiberUnmount(Ie,u)}catch{}switch(u.tag){case 26:ke||ns(u,o),$s(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:ke||ns(u,o);var f=Te,p=Un;Vr(u.type)&&(Te=u.stateNode,Un=!1),$s(r,o,u),Ju(u.stateNode),Te=f,Un=p;break;case 5:ke||ns(u,o);case 6:if(f=Te,p=Un,Te=null,$s(r,o,u),Te=f,Un=p,Te!==null)if(Un)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(u.stateNode)}catch(_){me(u,o,_)}else try{Te.removeChild(u.stateNode)}catch(_){me(u,o,_)}break;case 18:Te!==null&&(Un?(r=Te,vA(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),oh(r)):vA(Te,u.stateNode));break;case 4:f=Te,p=Un,Te=u.stateNode.containerInfo,Un=!0,$s(r,o,u),Te=f,Un=p;break;case 0:case 11:case 14:case 15:ke||Rr(2,u,o),ke||Rr(4,u,o),$s(r,o,u);break;case 1:ke||(ns(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&ww(u,o,f)),$s(r,o,u);break;case 21:$s(r,o,u);break;case 22:ke=(f=ke)||u.memoizedState!==null,$s(r,o,u),ke=f;break;default:$s(r,o,u)}}function Pw(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{oh(r)}catch(u){me(o,o.return,u)}}function QN(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Rw),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Rw),o;default:throw Error(i(435,r.tag))}}function e_(r,o){var u=QN(r);o.forEach(function(f){var p=aV.bind(null,r,f);u.has(f)||(u.add(f),f.then(p,p))})}function Jn(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var p=u[f],_=r,S=o,R=S;t:for(;R!==null;){switch(R.tag){case 27:if(Vr(R.type)){Te=R.stateNode,Un=!1;break t}break;case 5:Te=R.stateNode,Un=!1;break t;case 3:case 4:Te=R.stateNode.containerInfo,Un=!0;break t}R=R.return}if(Te===null)throw Error(i(160));Mw(_,S,p),Te=null,Un=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Ow(o,r),o=o.sibling}var ki=null;function Ow(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Jn(o,r),ti(r),f&4&&(Rr(3,r,r.return),Hu(3,r),Rr(5,r,r.return));break;case 1:Jn(o,r),ti(r),f&512&&(ke||u===null||ns(u,u.return)),f&64&&Ks&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var p=ki;if(Jn(o,r),ti(r),f&512&&(ke||u===null||ns(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){t:{f=r.type,u=r.memoizedProps,p=p.ownerDocument||p;e:switch(f){case"title":_=p.getElementsByTagName("title")[0],(!_||_[Pa]||_[Xe]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(f),p.head.insertBefore(_,p.querySelector("head > title"))),_n(_,f,u),_[Xe]=r,Pe(_),f=_;break t;case"link":var S=IA("link","href",p).get(f+(u.href||""));if(S){for(var R=0;R<S.length;R++)if(_=S[R],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){S.splice(R,1);break e}}_=p.createElement(f),_n(_,f,u),p.head.appendChild(_);break;case"meta":if(S=IA("meta","content",p).get(f+(u.content||""))){for(R=0;R<S.length;R++)if(_=S[R],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){S.splice(R,1);break e}}_=p.createElement(f),_n(_,f,u),p.head.appendChild(_);break;default:throw Error(i(468,f))}_[Xe]=r,Pe(_),f=_}r.stateNode=f}else RA(p,r.type,r.stateNode);else r.stateNode=xA(p,f,r.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?RA(p,r.type,r.stateNode):xA(p,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Qy(r,r.memoizedProps,u.memoizedProps)}break;case 27:Jn(o,r),ti(r),f&512&&(ke||u===null||ns(u,u.return)),u!==null&&f&4&&Qy(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Jn(o,r),ti(r),f&512&&(ke||u===null||ns(u,u.return)),r.flags&32){p=r.stateNode;try{hi(p,"")}catch(it){me(r,r.return,it)}}f&4&&r.stateNode!=null&&(p=r.memoizedProps,Qy(r,p,u!==null?u.memoizedProps:p)),f&1024&&(t_=!0);break;case 6:if(Jn(o,r),ti(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(it){me(r,r.return,it)}}break;case 3:if(sm=null,p=ki,ki=nm(o.containerInfo),Jn(o,r),ki=p,ti(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{oh(o.containerInfo)}catch(it){me(r,r.return,it)}t_&&(t_=!1,kw(r));break;case 4:f=ki,ki=nm(r.stateNode.containerInfo),Jn(o,r),ti(r),ki=f;break;case 12:Jn(o,r),ti(r);break;case 13:Jn(o,r),ti(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(o_=Ln()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,e_(r,f)));break;case 22:p=r.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,J=Ks,at=ke;if(Ks=J||p,ke=at||j,Jn(o,r),ke=at,Ks=J,ti(r),f&8192)t:for(o=r.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(u===null||j||Ks||ke||so(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){j=u=o;try{if(_=j.stateNode,p)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=j.stateNode;var ct=j.memoizedProps.style,et=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;R.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(it){me(j,j.return,it)}}}else if(o.tag===6){if(u===null){j=o;try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(it){me(j,j.return,it)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break t;for(;o.sibling===null;){if(o.return===null||o.return===r)break t;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,e_(r,u))));break;case 19:Jn(o,r),ti(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,e_(r,f)));break;case 30:break;case 21:break;default:Jn(o,r),ti(r)}}function ti(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(xw(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var p=u.stateNode,_=Zy(r);Hd(r,_,p);break;case 5:var S=u.stateNode;u.flags&32&&(hi(S,""),u.flags&=-33);var R=Zy(r);Hd(r,R,S);break;case 3:case 4:var j=u.stateNode.containerInfo,J=Zy(r);Jy(r,J,j);break;default:throw Error(i(161))}}catch(at){me(r,r.return,at)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function kw(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;kw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Cr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Cw(r,o.alternate,o),o=o.sibling}function so(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Rr(4,o,o.return),so(o);break;case 1:ns(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&ww(o,o.return,u),so(o);break;case 27:Ju(o.stateNode);case 26:case 5:ns(o,o.return),so(o);break;case 22:o.memoizedState===null&&so(o);break;case 30:so(o);break;default:so(o)}r=r.sibling}}function Dr(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,p=r,_=o,S=_.flags;switch(_.tag){case 0:case 11:case 15:Dr(p,_,u),Hu(4,_);break;case 1:if(Dr(p,_,u),f=_,p=f.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(J){me(f,f.return,J)}if(f=_,p=f.updateQueue,p!==null){var R=f.stateNode;try{var j=p.shared.hiddenCallbacks;if(j!==null)for(p.shared.hiddenCallbacks=null,p=0;p<j.length;p++)cS(j[p],R)}catch(J){me(f,f.return,J)}}u&&S&64&&Sw(_),qu(_,_.return);break;case 27:Iw(_);case 26:case 5:Dr(p,_,u),u&&f===null&&S&4&&Aw(_),qu(_,_.return);break;case 12:Dr(p,_,u);break;case 13:Dr(p,_,u),u&&S&4&&Pw(p,_);break;case 22:_.memoizedState===null&&Dr(p,_,u),qu(_,_.return);break;case 30:break;default:Dr(p,_,u)}o=o.sibling}}function n_(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Cu(u))}function i_(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Cu(r))}function is(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Nw(r,o,u,f),o=o.sibling}function Nw(r,o,u,f){var p=o.flags;switch(o.tag){case 0:case 11:case 15:is(r,o,u,f),p&2048&&Hu(9,o);break;case 1:is(r,o,u,f);break;case 3:is(r,o,u,f),p&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Cu(r)));break;case 12:if(p&2048){is(r,o,u,f),r=o.stateNode;try{var _=o.memoizedProps,S=_.id,R=_.onPostCommit;typeof R=="function"&&R(S,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){me(o,o.return,j)}}else is(r,o,u,f);break;case 13:is(r,o,u,f);break;case 23:break;case 22:_=o.stateNode,S=o.alternate,o.memoizedState!==null?_._visibility&2?is(r,o,u,f):Gu(r,o):_._visibility&2?is(r,o,u,f):(_._visibility|=2,Pl(r,o,u,f,(o.subtreeFlags&10256)!==0)),p&2048&&n_(S,o);break;case 24:is(r,o,u,f),p&2048&&i_(o.alternate,o);break;default:is(r,o,u,f)}}function Pl(r,o,u,f,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var _=r,S=o,R=u,j=f,J=S.flags;switch(S.tag){case 0:case 11:case 15:Pl(_,S,R,j,p),Hu(8,S);break;case 23:break;case 22:var at=S.stateNode;S.memoizedState!==null?at._visibility&2?Pl(_,S,R,j,p):Gu(_,S):(at._visibility|=2,Pl(_,S,R,j,p)),p&&J&2048&&n_(S.alternate,S);break;case 24:Pl(_,S,R,j,p),p&&J&2048&&i_(S.alternate,S);break;default:Pl(_,S,R,j,p)}o=o.sibling}}function Gu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,p=f.flags;switch(f.tag){case 22:Gu(u,f),p&2048&&n_(f.alternate,f);break;case 24:Gu(u,f),p&2048&&i_(f.alternate,f);break;default:Gu(u,f)}o=o.sibling}}var Ku=8192;function Ol(r){if(r.subtreeFlags&Ku)for(r=r.child;r!==null;)Vw(r),r=r.sibling}function Vw(r){switch(r.tag){case 26:Ol(r),r.flags&Ku&&r.memoizedState!==null&&VV(ki,r.memoizedState,r.memoizedProps);break;case 5:Ol(r);break;case 3:case 4:var o=ki;ki=nm(r.stateNode.containerInfo),Ol(r),ki=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=Ku,Ku=16777216,Ol(r),Ku=o):Ol(r));break;default:Ol(r)}}function Lw(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function $u(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];cn=f,Uw(f,r)}Lw(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Bw(r),r=r.sibling}function Bw(r){switch(r.tag){case 0:case 11:case 15:$u(r),r.flags&2048&&Rr(9,r,r.return);break;case 3:$u(r);break;case 12:$u(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,qd(r)):$u(r);break;default:$u(r)}}function qd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];cn=f,Uw(f,r)}Lw(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Rr(8,o,o.return),qd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,qd(o));break;default:qd(o)}r=r.sibling}}function Uw(r,o){for(;cn!==null;){var u=cn;switch(u.tag){case 0:case 11:case 15:Rr(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Cu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,cn=f;else t:for(u=r;cn!==null;){f=cn;var p=f.sibling,_=f.return;if(Dw(f),f===u){cn=null;break t}if(p!==null){p.return=_,cn=p;break t}cn=_}}}var ZN={getCacheForType:function(r){var o=En(Je),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u}},JN=typeof WeakMap=="function"?WeakMap:Map,se=0,pe=null,Ft=null,$t=0,re=0,ei=null,Mr=!1,kl=!1,s_=!1,Ws=0,Ce=0,Pr=0,ro=0,r_=0,bi=0,Nl=0,Wu=null,jn=null,a_=!1,o_=0,Gd=1/0,Kd=null,Or=null,yn=0,kr=null,Vl=null,Ll=0,l_=0,c_=null,jw=null,Yu=0,u_=null;function ni(){if((se&2)!==0&&$t!==0)return $t&-$t;if(G.T!==null){var r=wl;return r!==0?r:y_()}return gr()}function Fw(){bi===0&&(bi=($t&536870912)===0||te?su():536870912);var r=vi.current;return r!==null&&(r.flags|=32),bi}function ii(r,o,u){(r===pe&&(re===2||re===9)||r.cancelPendingCommit!==null)&&(Bl(r,0),Nr(r,$t,bi,!1)),xs(r,u),((se&2)===0||r!==pe)&&(r===pe&&((se&2)===0&&(ro|=u),Ce===4&&Nr(r,$t,bi,!1)),ss(r))}function zw(r,o,u){if((se&6)!==0)throw Error(i(327));var f=!u&&(o&124)===0&&(o&r.expiredLanes)===0||Ma(r,o),p=f?nV(r,o):d_(r,o,!0),_=f;do{if(p===0){kl&&!f&&Nr(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!tV(u)){p=d_(r,o,!1),_=!1;continue}if(p===2){if(_=o,r.errorRecoveryDisabledLanes&_)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;t:{var R=r;p=Wu;var j=R.current.memoizedState.isDehydrated;if(j&&(Bl(R,S).flags|=256),S=d_(R,S,!1),S!==2){if(s_&&!j){R.errorRecoveryDisabledLanes|=_,ro|=_,p=4;break t}_=jn,jn=p,_!==null&&(jn===null?jn=_:jn.push.apply(jn,_))}p=S}if(_=!1,p!==2)continue}}if(p===1){Bl(r,0),Nr(r,o,0,!0);break}t:{switch(f=r,_=p,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Nr(f,o,bi,!Mr);break t;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(p=o_+300-Ln(),10<p)){if(Nr(f,o,bi,!Mr),el(f,0,!0)!==0)break t;f.timeoutHandle=yA(Hw.bind(null,f,u,jn,Kd,a_,o,bi,ro,Nl,Mr,_,2,-0,0),p);break t}Hw(f,u,jn,Kd,a_,o,bi,ro,Nl,Mr,_,0,-0,0)}}break}while(!0);ss(r)}function Hw(r,o,u,f,p,_,S,R,j,J,at,ct,et,it){if(r.timeoutHandle=-1,ct=o.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(nh={stylesheets:null,count:0,unsuspend:NV},Vw(o),ct=LV(),ct!==null)){r.cancelPendingCommit=ct(Xw.bind(null,r,o,_,u,f,p,S,R,j,at,1,et,it)),Nr(r,_,S,!J);return}Xw(r,o,_,u,f,p,S,R,j)}function tV(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var p=u[f],_=p.getSnapshot;p=p.value;try{if(!Qn(_(),p))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Nr(r,o,u,f){o&=~r_,o&=~ro,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var p=o;0<p;){var _=31-Tn(p),S=1<<_;f[_]=-1,p&=~S}u!==0&&Hi(r,u,o)}function $d(){return(se&6)===0?(Xu(0),!1):!0}function h_(){if(Ft!==null){if(re===0)var r=Ft.return;else r=Ft,js=Ja=null,Ry(r),Dl=null,ju=0,r=Ft;for(;r!==null;)Ew(r.alternate,r),r=r.return;Ft=null}}function Bl(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,_V(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),h_(),pe=r,Ft=u=Ls(r.current,null),$t=o,re=0,ei=null,Mr=!1,kl=Ma(r,o),s_=!1,Nl=bi=r_=ro=Pr=Ce=0,jn=Wu=null,a_=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var p=31-Tn(f),_=1<<p;o|=r[p],f&=~_}return Ws=o,gd(),u}function qw(r,o){Bt=null,G.H=kd,o===Mu||o===wd?(o=oS(),re=3):o===sS?(o=oS(),re=4):re=o===lw?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ei=o,Ft===null&&(Ce=1,Ud(r,gi(o,r.current)))}function Gw(){var r=G.H;return G.H=kd,r===null?kd:r}function Kw(){var r=G.A;return G.A=ZN,r}function f_(){Ce=4,Mr||($t&4194048)!==$t&&vi.current!==null||(kl=!0),(Pr&134217727)===0&&(ro&134217727)===0||pe===null||Nr(pe,$t,bi,!1)}function d_(r,o,u){var f=se;se|=2;var p=Gw(),_=Kw();(pe!==r||$t!==o)&&(Kd=null,Bl(r,o)),o=!1;var S=Ce;t:do try{if(re!==0&&Ft!==null){var R=Ft,j=ei;switch(re){case 8:h_(),S=6;break t;case 3:case 2:case 9:case 6:vi.current===null&&(o=!0);var J=re;if(re=0,ei=null,Ul(r,R,j,J),u&&kl){S=0;break t}break;default:J=re,re=0,ei=null,Ul(r,R,j,J)}}eV(),S=Ce;break}catch(at){qw(r,at)}while(!0);return o&&r.shellSuspendCounter++,js=Ja=null,se=f,G.H=p,G.A=_,Ft===null&&(pe=null,$t=0,gd()),S}function eV(){for(;Ft!==null;)$w(Ft)}function nV(r,o){var u=se;se|=2;var f=Gw(),p=Kw();pe!==r||$t!==o?(Kd=null,Gd=Ln()+500,Bl(r,o)):kl=Ma(r,o);t:do try{if(re!==0&&Ft!==null){o=Ft;var _=ei;e:switch(re){case 1:re=0,ei=null,Ul(r,o,_,1);break;case 2:case 9:if(rS(_)){re=0,ei=null,Ww(o);break}o=function(){re!==2&&re!==9||pe!==r||(re=7),ss(r)},_.then(o,o);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:rS(_)?(re=0,ei=null,Ww(o)):(re=0,ei=null,Ul(r,o,_,7));break;case 5:var S=null;switch(Ft.tag){case 26:S=Ft.memoizedState;case 5:case 27:var R=Ft;if(!S||CA(S)){re=0,ei=null;var j=R.sibling;if(j!==null)Ft=j;else{var J=R.return;J!==null?(Ft=J,Wd(J)):Ft=null}break e}}re=0,ei=null,Ul(r,o,_,5);break;case 6:re=0,ei=null,Ul(r,o,_,6);break;case 8:h_(),Ce=6;break t;default:throw Error(i(462))}}iV();break}catch(at){qw(r,at)}while(!0);return js=Ja=null,G.H=f,G.A=p,se=u,Ft!==null?0:(pe=null,$t=0,gd(),Ce)}function iV(){for(;Ft!==null&&!Zo();)$w(Ft)}function $w(r){var o=bw(r.alternate,r,Ws);r.memoizedProps=r.pendingProps,o===null?Wd(r):Ft=o}function Ww(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=mw(u,o,o.pendingProps,o.type,void 0,$t);break;case 11:o=mw(u,o,o.pendingProps,o.type.render,o.ref,$t);break;case 5:Ry(o);default:Ew(u,o),o=Ft=YE(o,Ws),o=bw(u,o,Ws)}r.memoizedProps=r.pendingProps,o===null?Wd(r):Ft=o}function Ul(r,o,u,f){js=Ja=null,Ry(o),Dl=null,ju=0;var p=o.return;try{if(KN(r,p,o,u,$t)){Ce=1,Ud(r,gi(u,r.current)),Ft=null;return}}catch(_){if(p!==null)throw Ft=p,_;Ce=1,Ud(r,gi(u,r.current)),Ft=null;return}o.flags&32768?(te||f===1?r=!0:kl||($t&536870912)!==0?r=!1:(Mr=r=!0,(f===2||f===9||f===3||f===6)&&(f=vi.current,f!==null&&f.tag===13&&(f.flags|=16384))),Yw(o,r)):Wd(o)}function Wd(r){var o=r;do{if((o.flags&32768)!==0){Yw(o,Mr);return}r=o.return;var u=WN(o.alternate,o,Ws);if(u!==null){Ft=u;return}if(o=o.sibling,o!==null){Ft=o;return}Ft=o=r}while(o!==null);Ce===0&&(Ce=5)}function Yw(r,o){do{var u=YN(r.alternate,r);if(u!==null){u.flags&=32767,Ft=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Ft=r;return}Ft=r=u}while(r!==null);Ce=6,Ft=null}function Xw(r,o,u,f,p,_,S,R,j){r.cancelPendingCommit=null;do Yd();while(yn!==0);if((se&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=iy,au(r,u,_,S,R,j),r===pe&&(Ft=pe=null,$t=0),Vl=o,kr=r,Ll=u,l_=_,c_=p,jw=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,oV(Ia,function(){return eA(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=G.T,G.T=null,p=st.p,st.p=2,S=se,se|=4;try{XN(r,o,u)}finally{se=S,st.p=p,G.T=f}}yn=1,Qw(),Zw(),Jw()}}function Qw(){if(yn===1){yn=0;var r=kr,o=Vl,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=G.T,G.T=null;var f=st.p;st.p=2;var p=se;se|=4;try{Ow(o,r);var _=A_,S=UE(r.containerInfo),R=_.focusedElem,j=_.selectionRange;if(S!==R&&R&&R.ownerDocument&&BE(R.ownerDocument.documentElement,R)){if(j!==null&&Zp(R)){var J=j.start,at=j.end;if(at===void 0&&(at=J),"selectionStart"in R)R.selectionStart=J,R.selectionEnd=Math.min(at,R.value.length);else{var ct=R.ownerDocument||document,et=ct&&ct.defaultView||window;if(et.getSelection){var it=et.getSelection(),Mt=R.textContent.length,It=Math.min(j.start,Mt),fe=j.end===void 0?It:Math.min(j.end,Mt);!it.extend&&It>fe&&(S=fe,fe=It,It=S);var $=LE(R,It),q=LE(R,fe);if($&&q&&(it.rangeCount!==1||it.anchorNode!==$.node||it.anchorOffset!==$.offset||it.focusNode!==q.node||it.focusOffset!==q.offset)){var Q=ct.createRange();Q.setStart($.node,$.offset),it.removeAllRanges(),It>fe?(it.addRange(Q),it.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),it.addRange(Q))}}}}for(ct=[],it=R;it=it.parentNode;)it.nodeType===1&&ct.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ct.length;R++){var ot=ct[R];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}om=!!w_,A_=w_=null}finally{se=p,st.p=f,G.T=u}}r.current=o,yn=2}}function Zw(){if(yn===2){yn=0;var r=kr,o=Vl,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=G.T,G.T=null;var f=st.p;st.p=2;var p=se;se|=4;try{Cw(r,o.alternate,o)}finally{se=p,st.p=f,G.T=u}}yn=3}}function Jw(){if(yn===4||yn===3){yn=0,dr();var r=kr,o=Vl,u=Ll,f=jw;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?yn=5:(yn=0,Vl=kr=null,tA(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Or=null),nl(u),o=o.stateNode,ie&&typeof ie.onCommitFiberRoot=="function")try{ie.onCommitFiberRoot(Ie,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=G.T,p=st.p,st.p=2,G.T=null;try{for(var _=r.onRecoverableError,S=0;S<f.length;S++){var R=f[S];_(R.value,{componentStack:R.stack})}}finally{G.T=o,st.p=p}}(Ll&3)!==0&&Yd(),ss(r),p=r.pendingLanes,(u&4194090)!==0&&(p&42)!==0?r===u_?Yu++:(Yu=0,u_=r):Yu=0,Xu(0)}}function tA(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Cu(o)))}function Yd(r){return Qw(),Zw(),Jw(),eA()}function eA(){if(yn!==5)return!1;var r=kr,o=l_;l_=0;var u=nl(Ll),f=G.T,p=st.p;try{st.p=32>u?32:u,G.T=null,u=c_,c_=null;var _=kr,S=Ll;if(yn=0,Vl=kr=null,Ll=0,(se&6)!==0)throw Error(i(331));var R=se;if(se|=4,Bw(_.current),Nw(_,_.current,S,u),se=R,Xu(0,!1),ie&&typeof ie.onPostCommitFiberRoot=="function")try{ie.onPostCommitFiberRoot(Ie,_)}catch{}return!0}finally{st.p=p,G.T=f,tA(r,o)}}function nA(r,o,u){o=gi(u,o),o=zy(r.stateNode,o,2),r=wr(r,o,2),r!==null&&(xs(r,2),ss(r))}function me(r,o,u){if(r.tag===3)nA(r,r,u);else for(;o!==null;){if(o.tag===3){nA(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Or===null||!Or.has(f))){r=gi(u,r),u=aw(2),f=wr(o,u,2),f!==null&&(ow(u,f,o,r),xs(f,2),ss(f));break}}o=o.return}}function m_(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new JN;var p=new Set;f.set(o,p)}else p=f.get(o),p===void 0&&(p=new Set,f.set(o,p));p.has(u)||(s_=!0,p.add(u),r=sV.bind(null,r,o,u),o.then(r,r))}function sV(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,pe===r&&($t&u)===u&&(Ce===4||Ce===3&&($t&62914560)===$t&&300>Ln()-o_?(se&2)===0&&Bl(r,0):r_|=u,Nl===$t&&(Nl=0)),ss(r)}function iA(r,o){o===0&&(o=ru()),r=bl(r,o),r!==null&&(xs(r,o),ss(r))}function rV(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),iA(r,u)}function aV(r,o){var u=0;switch(r.tag){case 13:var f=r.stateNode,p=r.memoizedState;p!==null&&(u=p.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),iA(r,u)}function oV(r,o){return je(r,o)}var Xd=null,jl=null,g_=!1,Qd=!1,p_=!1,ao=0;function ss(r){r!==jl&&r.next===null&&(jl===null?Xd=jl=r:jl=jl.next=r),Qd=!0,g_||(g_=!0,cV())}function Xu(r,o){if(!p_&&Qd){p_=!0;do for(var u=!1,f=Xd;f!==null;){if(r!==0){var p=f.pendingLanes;if(p===0)var _=0;else{var S=f.suspendedLanes,R=f.pingedLanes;_=(1<<31-Tn(42|r)+1)-1,_&=p&~(S&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,oA(f,_))}else _=$t,_=el(f,f===pe?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||Ma(f,_)||(u=!0,oA(f,_));f=f.next}while(u);p_=!1}}function lV(){sA()}function sA(){Qd=g_=!1;var r=0;ao!==0&&(yV()&&(r=ao),ao=0);for(var o=Ln(),u=null,f=Xd;f!==null;){var p=f.next,_=rA(f,o);_===0?(f.next=null,u===null?Xd=p:u.next=p,p===null&&(jl=u)):(u=f,(r!==0||(_&3)!==0)&&(Qd=!0)),f=p}Xu(r)}function rA(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,p=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var S=31-Tn(_),R=1<<S,j=p[S];j===-1?((R&u)===0||(R&f)!==0)&&(p[S]=iu(R,o)):j<=o&&(r.expiredLanes|=R),_&=~R}if(o=pe,u=$t,u=el(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(re===2||re===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&rn(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Ma(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&rn(f),nl(u)){case 2:case 8:u=Jo;break;case 32:u=Ia;break;case 268435456:u=tl;break;default:u=Ia}return f=aA.bind(null,r),u=je(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&rn(f),r.callbackPriority=2,r.callbackNode=null,2}function aA(r,o){if(yn!==0&&yn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Yd()&&r.callbackNode!==u)return null;var f=$t;return f=el(r,r===pe?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(zw(r,f,o),rA(r,Ln()),r.callbackNode!=null&&r.callbackNode===u?aA.bind(null,r):null)}function oA(r,o){if(Yd())return null;zw(r,o,!0)}function cV(){vV(function(){(se&6)!==0?je(eu,lV):sA()})}function y_(){return ao===0&&(ao=su()),ao}function lA(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ll(""+r)}function cA(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function uV(r,o,u,f,p){if(o==="submit"&&u&&u.stateNode===p){var _=lA((p[Fe]||null).action),S=f.submitter;S&&(o=(o=S[Fe]||null)?lA(o.formAction):S.getAttribute("formAction"),o!==null&&(_=o,S=null));var R=new cl("action","action",null,f,p);r.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ao!==0){var j=S?cA(p,S):new FormData(p);Ly(u,{pending:!0,data:j,method:p.method,action:_},null,j)}}else typeof _=="function"&&(R.preventDefault(),j=S?cA(p,S):new FormData(p),Ly(u,{pending:!0,data:j,method:p.method,action:_},_,j))},currentTarget:p}]})}}for(var __=0;__<ny.length;__++){var v_=ny[__],hV=v_.toLowerCase(),fV=v_[0].toUpperCase()+v_.slice(1);Oi(hV,"on"+fV)}Oi(zE,"onAnimationEnd"),Oi(HE,"onAnimationIteration"),Oi(qE,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(CN,"onTransitionRun"),Oi(DN,"onTransitionStart"),Oi(MN,"onTransitionCancel"),Oi(GE,"onTransitionEnd"),Rs("onMouseEnter",["mouseout","mouseover"]),Rs("onMouseLeave",["mouseout","mouseover"]),Rs("onPointerEnter",["pointerout","pointerover"]),Rs("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function uA(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],p=f.event;f=f.listeners;t:{var _=void 0;if(o)for(var S=f.length-1;0<=S;S--){var R=f[S],j=R.instance,J=R.currentTarget;if(R=R.listener,j!==_&&p.isPropagationStopped())break t;_=R,p.currentTarget=J;try{_(p)}catch(at){Bd(at)}p.currentTarget=null,_=j}else for(S=0;S<f.length;S++){if(R=f[S],j=R.instance,J=R.currentTarget,R=R.listener,j!==_&&p.isPropagationStopped())break t;_=R,p.currentTarget=J;try{_(p)}catch(at){Bd(at)}p.currentTarget=null,_=j}}}}function zt(r,o){var u=o[lu];u===void 0&&(u=o[lu]=new Set);var f=r+"__bubble";u.has(f)||(hA(o,r,2,!1),u.add(f))}function b_(r,o,u){var f=0;o&&(f|=4),hA(u,r,f,o)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function T_(r){if(!r[Zd]){r[Zd]=!0,cu.forEach(function(u){u!=="selectionchange"&&(dV.has(u)||b_(u,!1,r),b_(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Zd]||(o[Zd]=!0,b_("selectionchange",!1,o))}}function hA(r,o,u,f){switch(NA(o)){case 2:var p=jV;break;case 8:p=FV;break;default:p=N_}u=p.bind(null,o,u,r),p=void 0,!di||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),f?p!==void 0?r.addEventListener(o,u,{capture:!0,passive:p}):r.addEventListener(o,u,!0):p!==void 0?r.addEventListener(o,u,{passive:p}):r.addEventListener(o,u,!1)}function E_(r,o,u,f,p){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)t:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var R=f.stateNode.containerInfo;if(R===p)break;if(S===4)for(S=f.return;S!==null;){var j=S.tag;if((j===3||j===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;R!==null;){if(S=Is(R),S===null)return;if(j=S.tag,j===5||j===6||j===26||j===27){f=_=S;continue t}R=R.parentNode}}f=f.return}td(function(){var J=_,at=fi(u),ct=[];t:{var et=KE.get(r);if(et!==void 0){var it=cl,Mt=r;switch(r){case"keypress":if(Yi(u)===0)break t;case"keydown":case"keyup":it=gl;break;case"focusin":Mt="focus",it=fl;break;case"focusout":Mt="blur",it=fl;break;case"beforeblur":case"afterblur":it=fl;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=ld;break;case zE:case HE:case qE:it=dl;break;case GE:it=ud;break;case"scroll":case"scrollend":it=ed;break;case"wheel":it=pl;break;case"copy":case"cut":case"paste":it=ml;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Tu;break;case"toggle":case"beforetoggle":it=fd}var It=(o&4)!==0,fe=!It&&(r==="scroll"||r==="scrollend"),$=It?et!==null?et+"Capture":null:et;It=[];for(var q=J,Q;q!==null;){var ot=q;if(Q=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||Q===null||$===null||(ot=Ua(q,$),ot!=null&&It.push(Zu(q,ot,Q))),fe)break;q=q.return}0<It.length&&(et=new it(et,Mt,null,u,at),ct.push({event:et,listeners:It}))}}if((o&7)===0){t:{if(et=r==="mouseover"||r==="pointerover",it=r==="mouseout"||r==="pointerout",et&&u!==Ms&&(Mt=u.relatedTarget||u.fromElement)&&(Is(Mt)||Mt[ui]))break t;if((it||et)&&(et=at.window===at?at:(et=at.ownerDocument)?et.defaultView||et.parentWindow:window,it?(Mt=u.relatedTarget||u.toElement,it=J,Mt=Mt?Is(Mt):null,Mt!==null&&(fe=a(Mt),It=Mt.tag,Mt!==fe||It!==5&&It!==27&&It!==6)&&(Mt=null)):(it=null,Mt=J),it!==Mt)){if(It=mi,ot="onMouseLeave",$="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(It=Tu,ot="onPointerLeave",$="onPointerEnter",q="pointer"),fe=it==null?et:Gi(it),Q=Mt==null?et:Gi(Mt),et=new It(ot,q+"leave",it,u,at),et.target=fe,et.relatedTarget=Q,ot=null,Is(at)===J&&(It=new It($,q+"enter",Mt,u,at),It.target=Q,It.relatedTarget=fe,ot=It),fe=ot,it&&Mt)e:{for(It=it,$=Mt,q=0,Q=It;Q;Q=Fl(Q))q++;for(Q=0,ot=$;ot;ot=Fl(ot))Q++;for(;0<q-Q;)It=Fl(It),q--;for(;0<Q-q;)$=Fl($),Q--;for(;q--;){if(It===$||$!==null&&It===$.alternate)break e;It=Fl(It),$=Fl($)}It=null}else It=null;it!==null&&fA(ct,et,it,It,!1),Mt!==null&&fe!==null&&fA(ct,fe,Mt,It,!0)}}t:{if(et=J?Gi(J):window,it=et.nodeName&&et.nodeName.toLowerCase(),it==="select"||it==="input"&&et.type==="file")var bt=ME;else if(Ze(et))if(PE)bt=xN;else{bt=wN;var jt=SN}else it=et.nodeName,!it||it.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?J&&mu(J.elementType)&&(bt=ME):bt=AN;if(bt&&(bt=bt(r,J))){Vs(ct,bt,u,at);break t}jt&&jt(r,et,J),r==="focusout"&&J&&et.type==="number"&&J.memoizedProps.value!=null&&vr(et,"number",et.value)}switch(jt=J?Gi(J):window,r){case"focusin":(Ze(jt)||jt.contentEditable==="true")&&(yl=jt,Jp=J,wu=null);break;case"focusout":wu=Jp=yl=null;break;case"mousedown":ty=!0;break;case"contextmenu":case"mouseup":case"dragend":ty=!1,jE(ct,u,at);break;case"selectionchange":if(RN)break;case"keydown":case"keyup":jE(ct,u,at)}var wt;if(Zi)t:{switch(r){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Gt?rt(r,u)&&(Ct="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ct="onCompositionStart");Ct&&(E&&u.locale!=="ko"&&(Gt||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Gt&&(wt=pu()):(Wi=at,br="value"in Wi?Wi.value:Wi.textContent,Gt=!0)),jt=Jd(J,Ct),0<jt.length&&(Ct=new vu(Ct,r,null,u,at),ct.push({event:Ct,listeners:jt}),wt?Ct.data=wt:(wt=mt(u),wt!==null&&(Ct.data=wt)))),(wt=b?Qe(r,u):Kt(r,u))&&(Ct=Jd(J,"onBeforeInput"),0<Ct.length&&(jt=new vu("onBeforeInput","beforeinput",null,u,at),ct.push({event:jt,listeners:Ct}),jt.data=wt)),uV(ct,r,J,u,at)}uA(ct,o)})}function Zu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function Jd(r,o){for(var u=o+"Capture",f=[];r!==null;){var p=r,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Ua(r,u),p!=null&&f.unshift(Zu(r,p,_)),p=Ua(r,o),p!=null&&f.push(Zu(r,p,_))),r.tag===3)return f;r=r.return}return[]}function Fl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function fA(r,o,u,f,p){for(var _=o._reactName,S=[];u!==null&&u!==f;){var R=u,j=R.alternate,J=R.stateNode;if(R=R.tag,j!==null&&j===f)break;R!==5&&R!==26&&R!==27||J===null||(j=J,p?(J=Ua(u,_),J!=null&&S.unshift(Zu(u,J,j))):p||(J=Ua(u,_),J!=null&&S.push(Zu(u,J,j)))),u=u.return}S.length!==0&&r.push({event:o,listeners:S})}var mV=/\r\n?/g,gV=/\u0000|\uFFFD/g;function dA(r){return(typeof r=="string"?r:""+r).replace(mV,`
`).replace(gV,"")}function mA(r,o){return o=dA(o),dA(r)===o}function tm(){}function he(r,o,u,f,p,_){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||hi(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&hi(r,""+f);break;case"className":Ki(r,"class",f);break;case"tabIndex":Ki(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Ki(r,u,f);break;case"style":du(r,f,_);break;case"data":if(o!=="object"){Ki(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=ll(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&he(r,o,"name",p.name,p,null),he(r,o,"formEncType",p.formEncType,p,null),he(r,o,"formMethod",p.formMethod,p,null),he(r,o,"formTarget",p.formTarget,p,null)):(he(r,o,"encType",p.encType,p,null),he(r,o,"method",p.method,p,null),he(r,o,"target",p.target,p,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=ll(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=tm);break;case"onScroll":f!=null&&zt("scroll",r);break;case"onScrollEnd":f!=null&&zt("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=ll(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":zt("beforetoggle",r),zt("toggle",r),_r(r,"popover",f);break;case"xlinkActuate":mn(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":mn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":mn(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":mn(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":mn(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":mn(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":mn(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":mn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":mn(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":_r(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Kp.get(u)||u,_r(r,u,f))}}function S_(r,o,u,f,p,_){switch(u){case"style":du(r,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?hi(r,f):(typeof f=="number"||typeof f=="bigint")&&hi(r,""+f);break;case"onScroll":f!=null&&zt("scroll",r);break;case"onScrollEnd":f!=null&&zt("scrollend",r);break;case"onClick":f!=null&&(r.onclick=tm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),o=u.slice(2,p?u.length-7:void 0),_=r[Fe]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,p),typeof f=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,p);break t}u in r?r[u]=f:f===!0?r.setAttribute(u,""):_r(r,u,f)}}}function _n(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",r),zt("load",r);var f=!1,p=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var S=u[_];if(S!=null)switch(_){case"src":f=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:he(r,o,_,S,u,null)}}p&&he(r,o,"srcSet",u.srcSet,u,null),f&&he(r,o,"src",u.src,u,null);return;case"input":zt("invalid",r);var R=_=S=p=null,j=null,J=null;for(f in u)if(u.hasOwnProperty(f)){var at=u[f];if(at!=null)switch(f){case"name":p=at;break;case"type":S=at;break;case"checked":j=at;break;case"defaultChecked":J=at;break;case"value":_=at;break;case"defaultValue":R=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,o));break;default:he(r,o,f,at,u,null)}}Va(r,_,R,j,J,S,p,!1),ol(r);return;case"select":zt("invalid",r),f=S=_=null;for(p in u)if(u.hasOwnProperty(p)&&(R=u[p],R!=null))switch(p){case"value":_=R;break;case"defaultValue":S=R;break;case"multiple":f=R;default:he(r,o,p,R,u,null)}o=_,u=S,r.multiple=!!f,o!=null?Ds(r,!!f,o,!1):u!=null&&Ds(r,!!f,u,!0);return;case"textarea":zt("invalid",r),_=p=f=null;for(S in u)if(u.hasOwnProperty(S)&&(R=u[S],R!=null))switch(S){case"value":f=R;break;case"defaultValue":p=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:he(r,o,S,R,u,null)}La(r,f,p,_),ol(r);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(f=u[j],f!=null))switch(j){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:he(r,o,j,f,u,null)}return;case"dialog":zt("beforetoggle",r),zt("toggle",r),zt("cancel",r),zt("close",r);break;case"iframe":case"object":zt("load",r);break;case"video":case"audio":for(f=0;f<Qu.length;f++)zt(Qu[f],r);break;case"image":zt("error",r),zt("load",r);break;case"details":zt("toggle",r);break;case"embed":case"source":case"link":zt("error",r),zt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in u)if(u.hasOwnProperty(J)&&(f=u[J],f!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:he(r,o,J,f,u,null)}return;default:if(mu(o)){for(at in u)u.hasOwnProperty(at)&&(f=u[at],f!==void 0&&S_(r,o,at,f,u,void 0));return}}for(R in u)u.hasOwnProperty(R)&&(f=u[R],f!=null&&he(r,o,R,f,u,null))}function pV(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,S=null,R=null,j=null,J=null,at=null;for(it in u){var ct=u[it];if(u.hasOwnProperty(it)&&ct!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":j=ct;default:f.hasOwnProperty(it)||he(r,o,it,null,f,ct)}}for(var et in f){var it=f[et];if(ct=u[et],f.hasOwnProperty(et)&&(it!=null||ct!=null))switch(et){case"type":_=it;break;case"name":p=it;break;case"checked":J=it;break;case"defaultChecked":at=it;break;case"value":S=it;break;case"defaultValue":R=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(i(137,o));break;default:it!==ct&&he(r,o,et,it,f,ct)}}Xn(r,S,R,j,J,at,_,p);return;case"select":it=S=R=et=null;for(_ in u)if(j=u[_],u.hasOwnProperty(_)&&j!=null)switch(_){case"value":break;case"multiple":it=j;default:f.hasOwnProperty(_)||he(r,o,_,null,f,j)}for(p in f)if(_=f[p],j=u[p],f.hasOwnProperty(p)&&(_!=null||j!=null))switch(p){case"value":et=_;break;case"defaultValue":R=_;break;case"multiple":S=_;default:_!==j&&he(r,o,p,_,f,j)}o=R,u=S,f=it,et!=null?Ds(r,!!u,et,!1):!!f!=!!u&&(o!=null?Ds(r,!!u,o,!0):Ds(r,!!u,u?[]:"",!1));return;case"textarea":it=et=null;for(R in u)if(p=u[R],u.hasOwnProperty(R)&&p!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:he(r,o,R,null,f,p)}for(S in f)if(p=f[S],_=u[S],f.hasOwnProperty(S)&&(p!=null||_!=null))switch(S){case"value":et=p;break;case"defaultValue":it=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==_&&he(r,o,S,p,f,_)}ce(r,et,it);return;case"option":for(var Mt in u)if(et=u[Mt],u.hasOwnProperty(Mt)&&et!=null&&!f.hasOwnProperty(Mt))switch(Mt){case"selected":r.selected=!1;break;default:he(r,o,Mt,null,f,et)}for(j in f)if(et=f[j],it=u[j],f.hasOwnProperty(j)&&et!==it&&(et!=null||it!=null))switch(j){case"selected":r.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:he(r,o,j,et,f,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in u)et=u[It],u.hasOwnProperty(It)&&et!=null&&!f.hasOwnProperty(It)&&he(r,o,It,null,f,et);for(J in f)if(et=f[J],it=u[J],f.hasOwnProperty(J)&&et!==it&&(et!=null||it!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(i(137,o));break;default:he(r,o,J,et,f,it)}return;default:if(mu(o)){for(var fe in u)et=u[fe],u.hasOwnProperty(fe)&&et!==void 0&&!f.hasOwnProperty(fe)&&S_(r,o,fe,void 0,f,et);for(at in f)et=f[at],it=u[at],!f.hasOwnProperty(at)||et===it||et===void 0&&it===void 0||S_(r,o,at,et,f,it);return}}for(var $ in u)et=u[$],u.hasOwnProperty($)&&et!=null&&!f.hasOwnProperty($)&&he(r,o,$,null,f,et);for(ct in f)et=f[ct],it=u[ct],!f.hasOwnProperty(ct)||et===it||et==null&&it==null||he(r,o,ct,et,f,it)}var w_=null,A_=null;function em(r){return r.nodeType===9?r:r.ownerDocument}function gA(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pA(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function x_(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var I_=null;function yV(){var r=window.event;return r&&r.type==="popstate"?r===I_?!1:(I_=r,!0):(I_=null,!1)}var yA=typeof setTimeout=="function"?setTimeout:void 0,_V=typeof clearTimeout=="function"?clearTimeout:void 0,_A=typeof Promise=="function"?Promise:void 0,vV=typeof queueMicrotask=="function"?queueMicrotask:typeof _A<"u"?function(r){return _A.resolve(null).then(r).catch(bV)}:yA;function bV(r){setTimeout(function(){throw r})}function Vr(r){return r==="head"}function vA(r,o){var u=o,f=0,p=0;do{var _=u.nextSibling;if(r.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(0<f&&8>f){u=f;var S=r.ownerDocument;if(u&1&&Ju(S.documentElement),u&2&&Ju(S.body),u&4)for(u=S.head,Ju(u),S=u.firstChild;S;){var R=S.nextSibling,j=S.nodeName;S[Pa]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&S.rel.toLowerCase()==="stylesheet"||u.removeChild(S),S=R}}if(p===0){r.removeChild(_),oh(o);return}p--}else u==="$"||u==="$?"||u==="$!"?p++:f=u.charCodeAt(0)-48;else f=0;u=_}while(u);oh(o)}function R_(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":R_(u),yr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function TV(r,o,u,f){for(;r.nodeType===1;){var p=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Pa])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Ni(r.nextSibling),r===null)break}return null}function EV(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Ni(r.nextSibling),r===null))return null;return r}function C_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function SV(r,o){var u=r.ownerDocument;if(r.data!=="$?"||u.readyState==="complete")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function Ni(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var D_=null;function bA(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return r;o--}else u==="/$"&&o++}r=r.previousSibling}return null}function TA(r,o,u){switch(o=em(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ju(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);yr(r)}var Ti=new Map,EA=new Set;function nm(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ys=st.d;st.d={f:wV,r:AV,D:xV,C:IV,L:RV,m:CV,X:MV,S:DV,M:PV};function wV(){var r=Ys.f(),o=$d();return r||o}function AV(r){var o=qi(r);o!==null&&o.tag===5&&o.type==="form"?zS(o):Ys.r(r)}var zl=typeof document>"u"?null:document;function SA(r,o,u){var f=zl;if(f&&typeof o=="string"&&o){var p=ze(o);p='link[rel="'+r+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),EA.has(p)||(EA.add(p),r={rel:r,crossOrigin:u,href:o},f.querySelector(p)===null&&(o=f.createElement("link"),_n(o,"link",r),Pe(o),f.head.appendChild(o)))}}function xV(r){Ys.D(r),SA("dns-prefetch",r,null)}function IV(r,o){Ys.C(r,o),SA("preconnect",r,o)}function RV(r,o,u){Ys.L(r,o,u);var f=zl;if(f&&r&&o){var p='link[rel="preload"][as="'+ze(o)+'"]';o==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+ze(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+ze(u.imageSizes)+'"]')):p+='[href="'+ze(r)+'"]';var _=p;switch(o){case"style":_=Hl(r);break;case"script":_=ql(r)}Ti.has(_)||(r=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),Ti.set(_,r),f.querySelector(p)!==null||o==="style"&&f.querySelector(th(_))||o==="script"&&f.querySelector(eh(_))||(o=f.createElement("link"),_n(o,"link",r),Pe(o),f.head.appendChild(o)))}}function CV(r,o){Ys.m(r,o);var u=zl;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+ze(f)+'"][href="'+ze(r)+'"]',_=p;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ql(r)}if(!Ti.has(_)&&(r=m({rel:"modulepreload",href:r},o),Ti.set(_,r),u.querySelector(p)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(eh(_)))return}f=u.createElement("link"),_n(f,"link",r),Pe(f),u.head.appendChild(f)}}}function DV(r,o,u){Ys.S(r,o,u);var f=zl;if(f&&r){var p=Mn(f).hoistableStyles,_=Hl(r);o=o||"default";var S=p.get(_);if(!S){var R={loading:0,preload:null};if(S=f.querySelector(th(_)))R.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":o},u),(u=Ti.get(_))&&M_(r,u);var j=S=f.createElement("link");Pe(j),_n(j,"link",r),j._p=new Promise(function(J,at){j.onload=J,j.onerror=at}),j.addEventListener("load",function(){R.loading|=1}),j.addEventListener("error",function(){R.loading|=2}),R.loading|=4,im(S,o,f)}S={type:"stylesheet",instance:S,count:1,state:R},p.set(_,S)}}}function MV(r,o){Ys.X(r,o);var u=zl;if(u&&r){var f=Mn(u).hoistableScripts,p=ql(r),_=f.get(p);_||(_=u.querySelector(eh(p)),_||(r=m({src:r,async:!0},o),(o=Ti.get(p))&&P_(r,o),_=u.createElement("script"),Pe(_),_n(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(p,_))}}function PV(r,o){Ys.M(r,o);var u=zl;if(u&&r){var f=Mn(u).hoistableScripts,p=ql(r),_=f.get(p);_||(_=u.querySelector(eh(p)),_||(r=m({src:r,async:!0,type:"module"},o),(o=Ti.get(p))&&P_(r,o),_=u.createElement("script"),Pe(_),_n(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(p,_))}}function wA(r,o,u,f){var p=(p=yt.current)?nm(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Hl(u.href),u=Mn(p).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Hl(u.href);var _=Mn(p).hoistableStyles,S=_.get(r);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,S),(_=p.querySelector(th(r)))&&!_._p&&(S.instance=_,S.state.loading=5),Ti.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ti.set(r,u),_||OV(p,r,u,S.state))),o&&f===null)throw Error(i(528,""));return S}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ql(u),u=Mn(p).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Hl(r){return'href="'+ze(r)+'"'}function th(r){return'link[rel="stylesheet"]['+r+"]"}function AA(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function OV(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),_n(o,"link",u),Pe(o),r.head.appendChild(o))}function ql(r){return'[src="'+ze(r)+'"]'}function eh(r){return"script[async]"+r}function xA(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+ze(u.href)+'"]');if(f)return o.instance=f,Pe(f),f;var p=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Pe(f),_n(f,"style",p),im(f,u.precedence,r),o.instance=f;case"stylesheet":p=Hl(u.href);var _=r.querySelector(th(p));if(_)return o.state.loading|=4,o.instance=_,Pe(_),_;f=AA(u),(p=Ti.get(p))&&M_(f,p),_=(r.ownerDocument||r).createElement("link"),Pe(_);var S=_;return S._p=new Promise(function(R,j){S.onload=R,S.onerror=j}),_n(_,"link",f),o.state.loading|=4,im(_,u.precedence,r),o.instance=_;case"script":return _=ql(u.src),(p=r.querySelector(eh(_)))?(o.instance=p,Pe(p),p):(f=u,(p=Ti.get(_))&&(f=m({},u),P_(f,p)),r=r.ownerDocument||r,p=r.createElement("script"),Pe(p),_n(p,"link",f),r.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,im(f,u.precedence,r));return o.instance}function im(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=f.length?f[f.length-1]:null,_=p,S=0;S<f.length;S++){var R=f[S];if(R.dataset.precedence===o)_=R;else if(_!==p)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function M_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function P_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var sm=null;function IA(r,o,u){if(sm===null){var f=new Map,p=sm=new Map;p.set(u,f)}else p=sm,f=p.get(u),f||(f=new Map,p.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),p=0;p<u.length;p++){var _=u[p];if(!(_[Pa]||_[Xe]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(o)||"";S=r+S;var R=f.get(S);R?R.push(_):f.set(S,[_])}}return f}function RA(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function kV(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function CA(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var nh=null;function NV(){}function VV(r,o,u){if(nh===null)throw Error(i(475));var f=nh;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Hl(u.href),_=r.querySelector(th(p));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(f.count++,f=rm.bind(f),r.then(f,f)),o.state.loading|=4,o.instance=_,Pe(_);return}_=r.ownerDocument||r,u=AA(u),(p=Ti.get(p))&&M_(u,p),_=_.createElement("link"),Pe(_);var S=_;S._p=new Promise(function(R,j){S.onload=R,S.onerror=j}),_n(_,"link",u),o.instance=_}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=rm.bind(f),r.addEventListener("load",o),r.addEventListener("error",o))}}function LV(){if(nh===null)throw Error(i(475));var r=nh;return r.stylesheets&&r.count===0&&O_(r,r.stylesheets),0<r.count?function(o){var u=setTimeout(function(){if(r.stylesheets&&O_(r,r.stylesheets),r.unsuspend){var f=r.unsuspend;r.unsuspend=null,f()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u)}}:null}function rm(){if(this.count--,this.count===0){if(this.stylesheets)O_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var am=null;function O_(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,am=new Map,o.forEach(BV,r),am=null,rm.call(r))}function BV(r,o){if(!(o.state.loading&4)){var u=am.get(r);if(u)var f=u.get(null);else{u=new Map,am.set(r,u);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var S=p[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(u.set(S.dataset.precedence,S),f=S)}f&&u.set(null,f)}p=o.instance,S=p.getAttribute("data-precedence"),_=u.get(S)||f,_===f&&u.set(null,p),u.set(S,p),this.count++,f=rm.bind(this),p.addEventListener("load",f),p.addEventListener("error",f),_?_.parentNode.insertBefore(p,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),o.state.loading|=4}}var ih={$$typeof:U,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function UV(r,o,u,f,p,_,S,R){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=As(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.hiddenUpdates=As(null),this.identifierPrefix=f,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function DA(r,o,u,f,p,_,S,R,j,J,at,ct){return r=new UV(r,o,u,S,R,j,J,ct),o=1,_===!0&&(o|=24),_=Zn(3,null,null,o),r.current=_,_.stateNode=r,o=my(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:o},_y(_),r}function MA(r){return r?(r=Tl,r):Tl}function PA(r,o,u,f,p,_){p=MA(p),f.context===null?f.context=p:f.pendingContext=p,f=Sr(o),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=wr(r,f,o),u!==null&&(ii(u,r,o),Ou(u,r,o))}function OA(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function k_(r,o){OA(r,o),(r=r.alternate)&&OA(r,o)}function kA(r){if(r.tag===13){var o=bl(r,67108864);o!==null&&ii(o,r,67108864),k_(r,67108864)}}var om=!0;function jV(r,o,u,f){var p=G.T;G.T=null;var _=st.p;try{st.p=2,N_(r,o,u,f)}finally{st.p=_,G.T=p}}function FV(r,o,u,f){var p=G.T;G.T=null;var _=st.p;try{st.p=8,N_(r,o,u,f)}finally{st.p=_,G.T=p}}function N_(r,o,u,f){if(om){var p=V_(f);if(p===null)E_(r,o,f,lm,u),VA(r,f);else if(HV(p,r,o,u,f))f.stopPropagation();else if(VA(r,f),o&4&&-1<zV.indexOf(r)){for(;p!==null;){var _=qi(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Di(_.pendingLanes);if(S!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var j=1<<31-Tn(S);R.entanglements[1]|=j,S&=~j}ss(_),(se&6)===0&&(Gd=Ln()+500,Xu(0))}}break;case 13:R=bl(_,2),R!==null&&ii(R,_,2),$d(),k_(_,2)}if(_=V_(f),_===null&&E_(r,o,f,lm,u),_===p)break;p=_}p!==null&&f.stopPropagation()}else E_(r,o,f,null,u)}}function V_(r){return r=fi(r),L_(r)}var lm=null;function L_(r){if(lm=null,r=Is(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return lm=r,null}function NA(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jp()){case eu:return 2;case Jo:return 8;case Ia:case Fp:return 32;case tl:return 268435456;default:return 32}default:return 32}}var B_=!1,Lr=null,Br=null,Ur=null,sh=new Map,rh=new Map,jr=[],zV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VA(r,o){switch(r){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":sh.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(o.pointerId)}}function ah(r,o,u,f,p,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[p]},o!==null&&(o=qi(o),o!==null&&kA(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),r)}function HV(r,o,u,f,p){switch(o){case"focusin":return Lr=ah(Lr,r,o,u,f,p),!0;case"dragenter":return Br=ah(Br,r,o,u,f,p),!0;case"mouseover":return Ur=ah(Ur,r,o,u,f,p),!0;case"pointerover":var _=p.pointerId;return sh.set(_,ah(sh.get(_)||null,r,o,u,f,p)),!0;case"gotpointercapture":return _=p.pointerId,rh.set(_,ah(rh.get(_)||null,r,o,u,f,p)),!0}return!1}function LA(r){var o=Is(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,$f(r.priority,function(){if(u.tag===13){var f=ni();f=mr(f);var p=bl(u,f);p!==null&&ii(p,u,f),k_(u,f)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function cm(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=V_(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Ms=f,u.target.dispatchEvent(f),Ms=null}else return o=qi(u),o!==null&&kA(o),r.blockedOn=u,!1;o.shift()}return!0}function BA(r,o,u){cm(r)&&u.delete(o)}function qV(){B_=!1,Lr!==null&&cm(Lr)&&(Lr=null),Br!==null&&cm(Br)&&(Br=null),Ur!==null&&cm(Ur)&&(Ur=null),sh.forEach(BA),rh.forEach(BA)}function um(r,o){r.blockedOn===o&&(r.blockedOn=null,B_||(B_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qV)))}var hm=null;function UA(r){hm!==r&&(hm=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){hm===r&&(hm=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],p=r[o+2];if(typeof f!="function"){if(L_(f||u)===null)continue;break}var _=qi(u);_!==null&&(r.splice(o,3),o-=3,Ly(_,{pending:!0,data:p,method:u.method,action:f},f,p))}}))}function oh(r){function o(j){return um(j,r)}Lr!==null&&um(Lr,r),Br!==null&&um(Br,r),Ur!==null&&um(Ur,r),sh.forEach(o),rh.forEach(o);for(var u=0;u<jr.length;u++){var f=jr[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<jr.length&&(u=jr[0],u.blockedOn===null);)LA(u),u.blockedOn===null&&jr.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var p=u[f],_=u[f+1],S=p[Fe]||null;if(typeof _=="function")S||UA(u);else if(S){var R=null;if(_&&_.hasAttribute("formAction")){if(p=_,S=_[Fe]||null)R=S.formAction;else if(L_(p)!==null)continue}else R=S.action;typeof R=="function"?u[f+1]=R:(u.splice(f,3),f-=3),UA(u)}}}function U_(r){this._internalRoot=r}fm.prototype.render=U_.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,f=ni();PA(u,f,r,o,null,null)},fm.prototype.unmount=U_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;PA(r.current,2,null,r,null,null),$d(),o[ui]=null}};function fm(r){this._internalRoot=r}fm.prototype.unstable_scheduleHydration=function(r){if(r){var o=gr();r={blockedOn:null,target:r,priority:o};for(var u=0;u<jr.length&&o!==0&&o<jr[u].priority;u++);jr.splice(u,0,r),u===0&&LA(r)}};var jA=t.version;if(jA!=="19.1.0")throw Error(i(527,jA,"19.1.0"));st.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?d(r):null,r=r===null?null:r.stateNode,r};var GV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dm.isDisabled&&dm.supportsFiber)try{Ie=dm.inject(GV),ie=dm}catch{}}return ch.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,f="",p=nw,_=iw,S=sw,R=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks)),o=DA(r,1,!1,null,null,u,f,p,_,S,R,null),r[ui]=o.current,T_(r),new U_(o)},ch.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var f=!1,p="",_=nw,S=iw,R=sw,j=null,J=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(j=u.unstable_transitionCallbacks),u.formState!==void 0&&(J=u.formState)),o=DA(r,1,!0,o,u??null,f,p,_,S,R,j,J),o.context=MA(null),u=o.current,f=ni(),f=mr(f),p=Sr(f),p.callback=null,wr(u,p,f),u=f,o.current.lanes=u,xs(o,u),ss(o),r[ui]=o.current,T_(r),new fm(o)},ch.version="19.1.0",ch}var XA;function iL(){if(XA)return z_.exports;XA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),z_.exports=nL(),z_.exports}var sL=iL();function rL({onAddClick:n,onLogout:t,onTabChange:e,currentTab:i}){return B.jsxs("nav",{className:"navbar",children:[B.jsx("button",{onClick:()=>e("dashboard"),title:"Dashboard",className:i==="dashboard"?"text-warning":"text-info",children:B.jsx("i",{className:"bi bi-house-fill"})}),B.jsx("button",{onClick:()=>e("history"),title:"History",children:B.jsx("i",{className:`bi bi-clock-history ${i==="history"?"text-warning":"text-info"}`})}),B.jsx("button",{onClick:n,title:"Add Meal",children:B.jsx("i",{className:`bi bi-plus-circle-fill ${i==="addmead"?"text-warning":"text-info"}`})}),B.jsx("button",{title:"Suggestions",onClick:()=>e("suggestions"),children:B.jsx("i",{className:`bi bi-lightbulb-fill	 ${i==="suggestions"?"text-warning":"text-info"}`})}),B.jsx("button",{onClick:()=>e("profile"),title:"Profile",children:B.jsx("i",{className:`bi bi-person-circle ${i==="profile"?"text-warning":"text-info"}`})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Rf(n){return n+.5|0}const Jr=(n,t,e)=>Math.max(Math.min(n,e),t);function Eh(n){return Jr(Rf(n*2.55),0,255)}function ia(n){return Jr(Rf(n*255),0,255)}function Js(n){return Jr(Rf(n/2.55)/100,0,1)}function QA(n){return Jr(Rf(n*100),0,100)}const Ei={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ob=[..."0123456789ABCDEF"],aL=n=>ob[n&15],oL=n=>ob[(n&240)>>4]+ob[n&15],mm=n=>(n&240)>>4===(n&15),lL=n=>mm(n.r)&&mm(n.g)&&mm(n.b)&&mm(n.a);function cL(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Ei[n[1]]*17,g:255&Ei[n[2]]*17,b:255&Ei[n[3]]*17,a:t===5?Ei[n[4]]*17:255}:(t===7||t===9)&&(e={r:Ei[n[1]]<<4|Ei[n[2]],g:Ei[n[3]]<<4|Ei[n[4]],b:Ei[n[5]]<<4|Ei[n[6]],a:t===9?Ei[n[7]]<<4|Ei[n[8]]:255})),e}const uL=(n,t)=>n<255?t(n):"";function hL(n){var t=lL(n)?aL:oL;return n?"#"+t(n.r)+t(n.g)+t(n.b)+uL(n.a,t):void 0}const fL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tD(n,t,e){const i=t*Math.min(e,1-e),s=(a,l=(a+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function dL(n,t,e){const i=(s,a=(s+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function mL(n,t,e){const i=tD(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function gL(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function w0(n){const e=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(e,i,s),l=Math.min(e,i,s),c=(a+l)/2;let h,d,m;return a!==l&&(m=a-l,d=c>.5?m/(2-a-l):m/(a+l),h=gL(e,i,s,m,a),h=h*60+.5),[h|0,d||0,c]}function A0(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ia)}function x0(n,t,e){return A0(tD,n,t,e)}function pL(n,t,e){return A0(mL,n,t,e)}function yL(n,t,e){return A0(dL,n,t,e)}function eD(n){return(n%360+360)%360}function _L(n){const t=fL.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Eh(+t[5]):ia(+t[5]));const s=eD(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=pL(s,a,l):t[1]==="hsv"?i=yL(s,a,l):i=x0(s,a,l),{r:i[0],g:i[1],b:i[2],a:e}}function vL(n,t){var e=w0(n);e[0]=eD(e[0]+t),e=x0(e),n.r=e[0],n.g=e[1],n.b=e[2]}function bL(n){if(!n)return;const t=w0(n),e=t[0],i=QA(t[1]),s=QA(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${Js(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const ZA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},JA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function TL(){const n={},t=Object.keys(JA),e=Object.keys(ZA);let i,s,a,l,c;for(i=0;i<t.length;i++){for(l=c=t[i],s=0;s<e.length;s++)a=e[s],c=c.replace(a,ZA[a]);a=parseInt(JA[l],16),n[c]=[a>>16&255,a>>8&255,a&255]}return n}let gm;function EL(n){gm||(gm=TL(),gm.transparent=[0,0,0,0]);const t=gm[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const SL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wL(n){const t=SL.exec(n);let e=255,i,s,a;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?Eh(l):Jr(l*255,0,255)}return i=+t[1],s=+t[3],a=+t[5],i=255&(t[2]?Eh(i):Jr(i,0,255)),s=255&(t[4]?Eh(s):Jr(s,0,255)),a=255&(t[6]?Eh(a):Jr(a,0,255)),{r:i,g:s,b:a,a:e}}}function AL(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Js(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const K_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Gl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function xL(n,t,e){const i=Gl(Js(n.r)),s=Gl(Js(n.g)),a=Gl(Js(n.b));return{r:ia(K_(i+e*(Gl(Js(t.r))-i))),g:ia(K_(s+e*(Gl(Js(t.g))-s))),b:ia(K_(a+e*(Gl(Js(t.b))-a))),a:n.a+e*(t.a-n.a)}}function pm(n,t,e){if(n){let i=w0(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=x0(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function nD(n,t){return n&&Object.assign(t||{},n)}function tx(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ia(n[3]))):(t=nD(n,{r:0,g:0,b:0,a:1}),t.a=ia(t.a)),t}function IL(n){return n.charAt(0)==="r"?wL(n):_L(n)}class tf{constructor(t){if(t instanceof tf)return t;const e=typeof t;let i;e==="object"?i=tx(t):e==="string"&&(i=cL(t)||EL(t)||IL(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=nD(this._rgb);return t&&(t.a=Js(t.a)),t}set rgb(t){this._rgb=tx(t)}rgbString(){return this._valid?AL(this._rgb):void 0}hexString(){return this._valid?hL(this._rgb):void 0}hslString(){return this._valid?bL(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let a;const l=e===a?.5:e,c=2*l-1,h=i.a-s.a,d=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;a=1-d,i.r=255&d*i.r+a*s.r+.5,i.g=255&d*i.g+a*s.g+.5,i.b=255&d*i.b+a*s.b+.5,i.a=l*i.a+(1-l)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=xL(this._rgb,t._rgb,e)),this}clone(){return new tf(this.rgb)}alpha(t){return this._rgb.a=ia(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Rf(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return pm(this._rgb,2,t),this}darken(t){return pm(this._rgb,2,-t),this}saturate(t){return pm(this._rgb,1,t),this}desaturate(t){return pm(this._rgb,1,-t),this}rotate(t){return vL(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Xs(){}const RL=(()=>{let n=0;return()=>n++})();function ge(n){return n==null}function fn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Zt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ci(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function rs(n,t){return Ci(n)?n:t}function Qt(n,t){return typeof n>"u"?t:n}const CL=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,iD=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function _e(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ae(n,t,e,i){let s,a,l;if(fn(n))for(a=n.length,s=0;s<a;s++)t.call(e,n[s],s);else if(Zt(n))for(l=Object.keys(n),a=l.length,s=0;s<a;s++)t.call(e,n[l[s]],l[s])}function ug(n,t){let e,i,s,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],a=t[e],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function hg(n){if(fn(n))return n.map(hg);if(Zt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=hg(n[e[s]]);return t}return n}function sD(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function DL(n,t,e,i){if(!sD(n))return;const s=t[n],a=e[n];Zt(s)&&Zt(a)?ef(s,a,i):t[n]=hg(a)}function ef(n,t,e){const i=fn(t)?t:[t],s=i.length;if(!Zt(n))return n;e=e||{};const a=e.merger||DL;let l;for(let c=0;c<s;++c){if(l=i[c],!Zt(l))continue;const h=Object.keys(l);for(let d=0,m=h.length;d<m;++d)a(h[d],n,l,e)}return n}function kh(n,t){return ef(n,t,{merger:ML})}function ML(n,t,e){if(!sD(n))return;const i=t[n],s=e[n];Zt(i)&&Zt(s)?kh(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=hg(s))}const ex={"":n=>n,x:n=>n.x,y:n=>n.y};function PL(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function OL(n){const t=PL(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function ko(n,t){return(ex[t]||(ex[t]=OL(t)))(n)}function I0(n){return n.charAt(0).toUpperCase()+n.slice(1)}const nf=n=>typeof n<"u",ha=n=>typeof n=="function",nx=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function kL(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ve=Math.PI,$e=2*ve,fg=Number.POSITIVE_INFINITY,NL=ve/180,en=ve/2,oo=ve/4,ix=ve*2/3,rD=Math.log10,sa=Math.sign;function Um(n,t,e){return Math.abs(n-t)<e}function sx(n){const t=Math.round(n);n=Um(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(rD(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function VL(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,a)=>s-a).pop(),t}function LL(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function dg(n){return!LL(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function BL(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function UL(n,t,e){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][e],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function tr(n){return n*(ve/180)}function jL(n){return n*(180/ve)}function rx(n){if(!Ci(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function aD(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let a=Math.atan2(i,e);return a<-.5*ve&&(a+=$e),{angle:a,distance:s}}function FL(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ls(n){return(n%$e+$e)%$e}function mg(n,t,e,i){const s=ls(n),a=ls(t),l=ls(e),c=ls(a-s),h=ls(l-s),d=ls(s-a),m=ls(s-l);return s===a||s===l||i&&a===l||c>h&&d<m}function Hn(n,t,e){return Math.max(t,Math.min(e,n))}function zL(n){return Hn(n,-32768,32767)}function Eo(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function R0(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,e(a)?s=a:i=a;return{lo:s,hi:i}}const lb=(n,t,e,i)=>R0(n,e,i?s=>{const a=n[s][t];return a<e||a===e&&n[s+1][t]===e}:s=>n[s][t]<e),HL=(n,t,e)=>R0(n,e,i=>n[i][t]>=e);function qL(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const oD=["push","pop","shift","splice","unshift"];function GL(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),oD.forEach(e=>{const i="_onData"+I0(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const l=s.apply(this,a);return n._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...a)}),l}})})}function ax(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(oD.forEach(a=>{delete n[a]}),delete n._chartjs)}function lD(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const cD=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function uD(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,cD.call(window,()=>{i=!1,n.apply(t,e)}))}}function KL(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const hD=n=>n==="start"?"left":n==="end"?"right":"center",si=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,$L=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,ym=n=>n===0||n===1,ox=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*$e/e)),lx=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*$e/e)+1,Nh={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*en)+1,easeOutSine:n=>Math.sin(n*en),easeInOutSine:n=>-.5*(Math.cos(ve*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ym(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ym(n)?n:ox(n,.075,.3),easeOutElastic:n=>ym(n)?n:lx(n,.075,.3),easeInOutElastic(n){return ym(n)?n:n<.5?.5*ox(n*2,.1125,.45):.5+.5*lx(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Nh.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Nh.easeInBounce(n*2)*.5:Nh.easeOutBounce(n*2-1)*.5+.5};function fD(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function cx(n){return fD(n)?n:new tf(n)}function $_(n){return fD(n)?n:new tf(n).saturate(.5).darken(.1).hexString()}const WL=["x","y","borderWidth","radius","tension"],YL=["color","borderColor","backgroundColor"];function XL(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:YL},numbers:{type:"number",properties:WL}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function QL(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ux=new Map;function ZL(n,t){t=t||{};const e=n+JSON.stringify(t);let i=ux.get(e);return i||(i=new Intl.NumberFormat(n,t),ux.set(e,i)),i}function C0(n,t,e){return ZL(t,e).format(n)}const JL={values(n){return fn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),a=t4(n,e)}const l=rD(Math.abs(a)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),C0(n,i,h)}};function t4(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var dD={formatters:JL};function e4(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const No=Object.create(null),cb=Object.create(null);function Vh(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function W_(n,t,e){return typeof t=="string"?ef(Vh(n,t),e):ef(Vh(n,""),t)}class n4{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>$_(s.backgroundColor),this.hoverBorderColor=(i,s)=>$_(s.borderColor),this.hoverColor=(i,s)=>$_(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return W_(this,t,e)}get(t){return Vh(this,t)}describe(t,e){return W_(cb,t,e)}override(t,e){return W_(No,t,e)}route(t,e,i,s){const a=Vh(this,t),l=Vh(this,i),c="_"+e;Object.defineProperties(a,{[c]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[c],d=l[s];return Zt(h)?Object.assign({},d,h):Qt(h,d)},set(h){this[c]=h}}})}apply(t){t.forEach(e=>e(this))}}var Le=new n4({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XL,QL,e4]);function i4(n){return!n||ge(n.size)||ge(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function hx(n,t,e,i,s){let a=t[s];return a||(a=t[s]=n.measureText(s).width,e.push(s)),a>i&&(i=a),i}function lo(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function fx(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function dx(n,t,e,i){mD(n,t,e,i,null)}function mD(n,t,e,i,s){let a,l,c,h,d,m,y,v;const T=t.pointStyle,w=t.rotation,A=t.radius;let x=(w||0)*NL;if(T&&typeof T=="object"&&(a=T.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(x),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(A)||A<=0)){switch(n.beginPath(),T){default:s?n.ellipse(e,i,s/2,A,0,0,$e):n.arc(e,i,A,0,$e),n.closePath();break;case"triangle":m=s?s/2:A,n.moveTo(e+Math.sin(x)*m,i-Math.cos(x)*A),x+=ix,n.lineTo(e+Math.sin(x)*m,i-Math.cos(x)*A),x+=ix,n.lineTo(e+Math.sin(x)*m,i-Math.cos(x)*A),n.closePath();break;case"rectRounded":d=A*.516,h=A-d,l=Math.cos(x+oo)*h,y=Math.cos(x+oo)*(s?s/2-d:h),c=Math.sin(x+oo)*h,v=Math.sin(x+oo)*(s?s/2-d:h),n.arc(e-y,i-c,d,x-ve,x-en),n.arc(e+v,i-l,d,x-en,x),n.arc(e+y,i+c,d,x,x+en),n.arc(e-v,i+l,d,x+en,x+ve),n.closePath();break;case"rect":if(!w){h=Math.SQRT1_2*A,m=s?s/2:h,n.rect(e-m,i-h,2*m,2*h);break}x+=oo;case"rectRot":y=Math.cos(x)*(s?s/2:A),l=Math.cos(x)*A,c=Math.sin(x)*A,v=Math.sin(x)*(s?s/2:A),n.moveTo(e-y,i-c),n.lineTo(e+v,i-l),n.lineTo(e+y,i+c),n.lineTo(e-v,i+l),n.closePath();break;case"crossRot":x+=oo;case"cross":y=Math.cos(x)*(s?s/2:A),l=Math.cos(x)*A,c=Math.sin(x)*A,v=Math.sin(x)*(s?s/2:A),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l);break;case"star":y=Math.cos(x)*(s?s/2:A),l=Math.cos(x)*A,c=Math.sin(x)*A,v=Math.sin(x)*(s?s/2:A),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l),x+=oo,y=Math.cos(x)*(s?s/2:A),l=Math.cos(x)*A,c=Math.sin(x)*A,v=Math.sin(x)*(s?s/2:A),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l);break;case"line":l=s?s/2:Math.cos(x)*A,c=Math.sin(x)*A,n.moveTo(e-l,i-c),n.lineTo(e+l,i+c);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(x)*(s?s/2:A),i+Math.sin(x)*A);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function gD(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function D0(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function M0(n){n.restore()}function s4(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ge(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function r4(n,t,e,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),l=t-a.actualBoundingBoxLeft,c=t+a.actualBoundingBoxRight,h=e-a.actualBoundingBoxAscent,d=e+a.actualBoundingBoxDescent,m=s.strikethrough?(h+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,m),n.lineTo(c,m),n.stroke()}}function a4(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function gg(n,t,e,i,s,a={}){const l=fn(t)?t:[t],c=a.strokeWidth>0&&a.strokeColor!=="";let h,d;for(n.save(),n.font=s.string,s4(n,a),h=0;h<l.length;++h)d=l[h],a.backdrop&&a4(n,a.backdrop),c&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),ge(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(d,e,i,a.maxWidth)),n.fillText(d,e,i,a.maxWidth),r4(n,e,i,d,a),i+=Number(s.lineHeight);n.restore()}function pg(n,t){const{x:e,y:i,w:s,h:a,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*ve,ve,!0),n.lineTo(e,i+a-l.bottomLeft),n.arc(e+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,ve,en,!0),n.lineTo(e+s-l.bottomRight,i+a),n.arc(e+s-l.bottomRight,i+a-l.bottomRight,l.bottomRight,en,0,!0),n.lineTo(e+s,i+l.topRight),n.arc(e+s-l.topRight,i+l.topRight,l.topRight,0,-en,!0),n.lineTo(e+l.topLeft,i)}const o4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,l4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function c4(n,t){const e=(""+n).match(o4);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const u4=n=>+n||0;function P0(n,t){const e={},i=Zt(t),s=i?Object.keys(t):t,a=Zt(n)?i?l=>Qt(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of s)e[l]=u4(a(l));return e}function pD(n){return P0(n,{top:"y",right:"x",bottom:"y",left:"x"})}function fc(n){return P0(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ui(n){const t=pD(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function qn(n,t){n=n||{},t=t||Le.font;let e=Qt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Qt(n.style,t.style);i&&!(""+i).match(l4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Qt(n.family,t.family),lineHeight:c4(Qt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Qt(n.weight,t.weight),string:""};return s.string=i4(s),s}function _m(n,t,e,i){let s,a,l;for(s=0,a=n.length;s<a;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function h4(n,t,e){const{min:i,max:s}=n,a=iD(t,(s-i)/2),l=(c,h)=>e&&c===0?0:c+h;return{min:l(i,-Math.abs(a)),max:l(s,a)}}function jc(n,t){return Object.assign(Object.create(n),t)}function O0(n,t=[""],e,i,s=()=>n[0]){const a=e||n;typeof i>"u"&&(i=bD("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:c=>O0([c,...n],t,a,i)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return _D(c,h,()=>v4(h,t,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return gx(c).includes(h)},ownKeys(c){return gx(c)},set(c,h,d){const m=c._storage||(c._storage=s());return c[h]=m[h]=d,delete c._keys,!0}})}function bc(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:yD(n,i),setContext:a=>bc(n,a,e,i),override:a=>bc(n.override(a),t,e,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,c){return _D(a,l,()=>d4(a,l,c))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,c){return n[l]=c,delete a[l],!0}})}function yD(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:ha(e)?e:()=>e,isIndexable:ha(i)?i:()=>i}}const f4=(n,t)=>n?n+I0(t):t,k0=(n,t)=>Zt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function _D(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function d4(n,t,e){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;let c=i[t];return ha(c)&&l.isScriptable(t)&&(c=m4(t,c,n,e)),fn(c)&&c.length&&(c=g4(t,c,n,l.isIndexable)),k0(t,c)&&(c=bc(c,s,a&&a[t],l)),c}function m4(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_stack:c}=e;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=t(a,l||i);return c.delete(n),k0(n,h)&&(h=N0(s._scopes,s,n,h)),h}function g4(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_descriptors:c}=e;if(typeof a.index<"u"&&i(n))return t[a.index%t.length];if(Zt(t[0])){const h=t,d=s._scopes.filter(m=>m!==h);t=[];for(const m of h){const y=N0(d,s,n,m);t.push(bc(y,a,l&&l[n],c))}}return t}function vD(n,t,e){return ha(n)?n(t,e):n}const p4=(n,t)=>n===!0?t:typeof n=="string"?ko(t,n):void 0;function y4(n,t,e,i,s){for(const a of t){const l=p4(e,a);if(l){n.add(l);const c=vD(l._fallback,e,s);if(typeof c<"u"&&c!==e&&c!==i)return c}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function N0(n,t,e,i){const s=t._rootScopes,a=vD(t._fallback,e,i),l=[...n,...s],c=new Set;c.add(i);let h=mx(c,l,e,a||e,i);return h===null||typeof a<"u"&&a!==e&&(h=mx(c,l,a,h,i),h===null)?!1:O0(Array.from(c),[""],s,a,()=>_4(t,e,i))}function mx(n,t,e,i,s){for(;e;)e=y4(n,t,e,i,s);return e}function _4(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return fn(s)&&Zt(e)?e:s||{}}function v4(n,t,e,i){let s;for(const a of t)if(s=bD(f4(a,n),e),typeof s<"u")return k0(n,s)?N0(e,i,n,s):s}function bD(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function gx(n){let t=n._keys;return t||(t=n._keys=b4(n._scopes)),t}function b4(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function V0(){return typeof window<"u"&&typeof document<"u"}function L0(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function yg(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const tp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function T4(n,t){return tp(n).getPropertyValue(t)}const E4=["top","right","bottom","left"];function Io(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const a=E4[s];i[a]=parseFloat(n[t+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const S4=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function w4(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:a}=i;let l=!1,c,h;if(S4(s,a,n.target))c=s,h=a;else{const d=t.getBoundingClientRect();c=i.clientX-d.left,h=i.clientY-d.top,l=!0}return{x:c,y:h,box:l}}function fo(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=tp(e),a=s.boxSizing==="border-box",l=Io(s,"padding"),c=Io(s,"border","width"),{x:h,y:d,box:m}=w4(n,e),y=l.left+(m&&c.left),v=l.top+(m&&c.top);let{width:T,height:w}=t;return a&&(T-=l.width+c.width,w-=l.height+c.height),{x:Math.round((h-y)/T*e.width/i),y:Math.round((d-v)/w*e.height/i)}}function A4(n,t,e){let i,s;if(t===void 0||e===void 0){const a=n&&L0(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{const l=a.getBoundingClientRect(),c=tp(a),h=Io(c,"border","width"),d=Io(c,"padding");t=l.width-d.width-h.width,e=l.height-d.height-h.height,i=yg(c.maxWidth,a,"clientWidth"),s=yg(c.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:i||fg,maxHeight:s||fg}}const vm=n=>Math.round(n*10)/10;function x4(n,t,e,i){const s=tp(n),a=Io(s,"margin"),l=yg(s.maxWidth,n,"clientWidth")||fg,c=yg(s.maxHeight,n,"clientHeight")||fg,h=A4(n,t,e);let{width:d,height:m}=h;if(s.boxSizing==="content-box"){const v=Io(s,"border","width"),T=Io(s,"padding");d-=T.width+v.width,m-=T.height+v.height}return d=Math.max(0,d-a.width),m=Math.max(0,i?d/i:m-a.height),d=vm(Math.min(d,l,h.maxWidth)),m=vm(Math.min(m,c,h.maxHeight)),d&&!m&&(m=vm(d/2)),(t!==void 0||e!==void 0)&&i&&h.height&&m>h.height&&(m=h.height,d=vm(Math.floor(m*i))),{width:d,height:m}}function px(n,t,e){const i=t||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==s||l.width!==a?(n.currentDevicePixelRatio=i,l.height=s,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const I4=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};V0()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function yx(n,t){const e=T4(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const R4=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},C4=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function dc(n,t,e){return n?R4(t,e):C4()}function TD(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function ED(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function bm(n,t,e){return n.options.clip?n[e]:t[e]}function D4(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:bm(e,t,"left"),right:bm(e,t,"right"),top:bm(i,t,"top"),bottom:bm(i,t,"bottom")}:t}function M4(n,t){const e=t._clip;if(e.disabled)return!1;const i=D4(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class P4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const a=e.listeners[s],l=e.duration;a.forEach(c=>c({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=cD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,c=!1,h;for(;l>=0;--l)h=a[l],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(t),c=!0):(a[l]=a[a.length-1],a.pop());c&&(s.draw(),this._notify(s,i,t,"progress")),a.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Qs=new P4;const _x="transparent",O4={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=cx(n||_x),s=i.valid&&cx(t||_x);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class k4{constructor(t,e,i,s){const a=e[i];s=_m([t.to,s,a,t.from]);const l=_m([t.from,a,s]);this._active=!0,this._fn=t.fn||O4[t.type||typeof l],this._easing=Nh[t.easing]||Nh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=_m([t.to,e,s,t.from]),this._from=_m([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,a=this._from,l=this._loop,c=this._to;let h;if(this._active=a!==c&&(l||e<i),!this._active){this._target[s]=c,this._notify(!0);return}if(e<0){this._target[s]=a;return}h=e/i%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[s]=this._fn(a,c,h)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class SD{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Zt(t))return;const e=Object.keys(Le.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const a=t[s];if(!Zt(a))return;const l={};for(const c of e)l[c]=a[c];(fn(a.properties)&&a.properties||[s]).forEach(c=>{(c===s||!i.has(c))&&i.set(c,l)})})}_animateOptions(t,e){const i=e.options,s=V4(t,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&N4(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,e){const i=this._properties,s=[],a=t.$animations||(t.$animations={}),l=Object.keys(e),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const d=l[h];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,e));continue}const m=e[d];let y=a[d];const v=i.get(d);if(y)if(v&&y.active()){y.update(v,m,c);continue}else y.cancel();if(!v||!v.duration){t[d]=m;continue}a[d]=y=new k4(v,t,d,m),s.push(y)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Qs.add(this._chart,i),!0}}function N4(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function V4(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function vx(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:i?a:s,end:i?s:a}}function L4(n,t,e){if(e===!1)return!1;const i=vx(n,e),s=vx(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function B4(n){let t,e,i,s;return Zt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function wD(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,a;for(s=0,a=i.length;s<a;++s)e.push(i[s].index);return e}function bx(n,t,e,i={}){const s=n.keys,a=i.mode==="single";let l,c,h,d;if(t===null)return;let m=!1;for(l=0,c=s.length;l<c;++l){if(h=+s[l],h===e){if(m=!0,i.all)continue;break}d=n.values[h],Ci(d)&&(a||t===0||sa(t)===sa(d))&&(t+=d)}return!m&&!i.all?0:t}function U4(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,d,m;for(h=0,d=l.length;h<d;++h)m=l[h],c[h]={[s]:m,[a]:n[m]};return c}function Y_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function j4(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function F4(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function z4(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Tx(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(e&&a>0||!e&&a<0)return s.index}return null}function Ex(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:a,vScale:l,index:c}=i,h=a.axis,d=l.axis,m=j4(a,l,i),y=t.length;let v;for(let T=0;T<y;++T){const w=t[T],{[h]:A,[d]:x}=w,k=w._stacks||(w._stacks={});v=k[d]=z4(s,m,A),v[c]=x,v._top=Tx(v,l,!0,i.type),v._bottom=Tx(v,l,!1,i.type);const L=v._visualValues||(v._visualValues={});L[c]=x}}function X_(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function H4(n,t){return jc(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function q4(n,t,e){return jc(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function uh(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const a=s._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}const Q_=n=>n==="reset"||n==="none",Sx=(n,t)=>t?n:Object.assign({},n),G4=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:wD(e,!0),values:null};class mc{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Y_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&uh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(y,v,T,w)=>y==="x"?v:y==="r"?w:T,a=e.xAxisID=Qt(i.xAxisID,X_(t,"x")),l=e.yAxisID=Qt(i.yAxisID,X_(t,"y")),c=e.rAxisID=Qt(i.rAxisID,X_(t,"r")),h=e.indexAxis,d=e.iAxisID=s(h,a,l,c),m=e.vAxisID=s(h,l,a,c);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(c),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ax(this._data,this),t._stacked&&uh(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Zt(e)){const s=this._cachedMeta;this._data=U4(e,s)}else if(i!==e){if(i){ax(i,this);const s=this._cachedMeta;uh(s),s._parsed=[]}e&&Object.isExtensible(e)&&GL(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=e._stacked;e._stacked=Y_(e.vScale,e),e.stack!==i.stack&&(s=!0,uh(e),e.stack=i.stack),this._resyncElements(t),(s||a!==e._stacked)&&(Ex(this,e._parsed),e._stacked=Y_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,c=a.axis;let h=t===0&&e===s.length?!0:i._sorted,d=t>0&&i._parsed[t-1],m,y,v;if(this._parsing===!1)i._parsed=s,i._sorted=!0,v=s;else{fn(s[t])?v=this.parseArrayData(i,s,t,e):Zt(s[t])?v=this.parseObjectData(i,s,t,e):v=this.parsePrimitiveData(i,s,t,e);const T=()=>y[c]===null||d&&y[c]<d[c];for(m=0;m<e;++m)i._parsed[m+t]=y=v[m],h&&(T()&&(h=!1),d=y);i._sorted=h}l&&Ex(this,v)}parsePrimitiveData(t,e,i,s){const{iScale:a,vScale:l}=t,c=a.axis,h=l.axis,d=a.getLabels(),m=a===l,y=new Array(s);let v,T,w;for(v=0,T=s;v<T;++v)w=v+i,y[v]={[c]:m||a.parse(d[w],w),[h]:l.parse(e[w],w)};return y}parseArrayData(t,e,i,s){const{xScale:a,yScale:l}=t,c=new Array(s);let h,d,m,y;for(h=0,d=s;h<d;++h)m=h+i,y=e[m],c[h]={x:a.parse(y[0],m),y:l.parse(y[1],m)};return c}parseObjectData(t,e,i,s){const{xScale:a,yScale:l}=t,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d=new Array(s);let m,y,v,T;for(m=0,y=s;m<y;++m)v=m+i,T=e[v],d[m]={x:a.parse(ko(T,c),v),y:l.parse(ko(T,h),v)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,a=this._cachedMeta,l=e[t.axis],c={keys:wD(s,!0),values:e._stacks[t.axis]._visualValues};return bx(c,l,a.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const a=i[e.axis];let l=a===null?NaN:a;const c=s&&i._stacks[e.axis];s&&c&&(s.values=c,l=bx(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&t===i.iScale,l=s.length,c=this._getOtherScale(t),h=G4(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:y}=F4(c);let v,T;function w(){T=s[v];const A=T[c.axis];return!Ci(T[t.axis])||m>A||y<A}for(v=0;v<l&&!(!w()&&(this.updateRangeFromParsed(d,t,T,h),a));++v);if(a){for(v=l-1;v>=0;--v)if(!w()){this.updateRangeFromParsed(d,t,T,h);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=e.length;s<a;++s)l=e[s][t.axis],Ci(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=B4(Qt(this.options.clip,L4(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],a=e.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop;let m;for(i.dataset&&i.dataset.draw(t,a,c,h),m=c;m<c+h;++m){const y=s[m];y.hidden||(y.active&&d?l.push(y):y.draw(t,a))}for(m=0;m<l.length;++m)l[m].draw(t,a)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=q4(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=H4(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",a=this._cachedDataOpts,l=t+"-"+e,c=a[l],h=this.enableOptionSharing&&nf(i);if(c)return Sx(c,h);const d=this.chart.config,m=d.datasetElementScopeKeys(this._type,t),y=s?[`${t}Hover`,"hover",t,""]:[t,""],v=d.getOptionScopes(this.getDataset(),m),T=Object.keys(Le.elements[t]),w=()=>this.getContext(i,s,e),A=d.resolveNamedOptions(v,T,w,y);return A.$shared&&(A.$shared=h,a[l]=Object.freeze(Sx(A,h))),A}_resolveAnimations(t,e,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${e}`,c=a[l];if(c)return c;let h;if(s.options.animation!==!1){const m=this.chart.config,y=m.datasetAnimationScopeKeys(this._type,e),v=m.getOptionScopes(this.getDataset(),y);h=m.createResolver(v,this.getContext(t,i,e))}const d=new SD(s,h&&h.animations);return h&&h._cacheable&&(a[l]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Q_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(e,a)||a!==s;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:l}}updateElement(t,e,i,s){Q_(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Q_(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const a=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[c,h,d]of this._syncList)this[c](h,d);this._syncList=[];const s=i.length,a=e.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,e,i=!0){const s=this._cachedMeta,a=s.data,l=t+e;let c;const h=d=>{for(d.length+=e,c=d.length-1;c>=l;c--)d[c]=d[c-e]};for(h(a),c=t;c<l;++c)a[c]=new this.dataElementType;this._parsing&&h(s._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&uh(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Pt(mc,"defaults",{}),Pt(mc,"datasetElementType",null),Pt(mc,"dataElementType",null);function K4(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,a=e.length;s<a;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=lD(i.sort((s,a)=>s-a))}return n._cache.$bar}function $4(n){const t=n.iScale,e=K4(t,n.type);let i=t._length,s,a,l,c;const h=()=>{l===32767||l===-32768||(nf(c)&&(i=Math.min(i,Math.abs(l-c)||i)),c=l)};for(s=0,a=e.length;s<a;++s)l=t.getPixelForValue(e[s]),h();for(c=void 0,s=0,a=t.ticks.length;s<a;++s)l=t.getPixelForTick(s),h();return i}function W4(n,t,e,i){const s=e.barThickness;let a,l;return ge(s)?(a=t.min*e.categoryPercentage,l=e.barPercentage):(a=s*i,l=1),{chunk:a/i,ratio:l,start:t.pixels[n]-a/2}}function Y4(n,t,e,i){const s=t.pixels,a=s[n];let l=n>0?s[n-1]:null,c=n<s.length-1?s[n+1]:null;const h=e.categoryPercentage;l===null&&(l=a-(c===null?t.end-t.start:c-a)),c===null&&(c=a+a-l);const d=a-(a-Math.min(l,c))/2*h;return{chunk:Math.abs(c-l)/2*h/i,ratio:e.barPercentage,start:d}}function X4(n,t,e,i){const s=e.parse(n[0],i),a=e.parse(n[1],i),l=Math.min(s,a),c=Math.max(s,a);let h=l,d=c;Math.abs(l)>Math.abs(c)&&(h=c,d=l),t[e.axis]=d,t._custom={barStart:h,barEnd:d,start:s,end:a,min:l,max:c}}function AD(n,t,e,i){return fn(n)?X4(n,t,e,i):t[e.axis]=e.parse(n,i),t}function wx(n,t,e,i){const s=n.iScale,a=n.vScale,l=s.getLabels(),c=s===a,h=[];let d,m,y,v;for(d=e,m=e+i;d<m;++d)v=t[d],y={},y[s.axis]=c||s.parse(l[d],d),h.push(AD(v,y,a,d));return h}function Z_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Q4(n,t,e){return n!==0?sa(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Z4(n){let t,e,i,s,a;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",a="start"):(s="start",a="end"),{start:e,end:i,reverse:t,top:s,bottom:a}}function J4(n,t,e,i){let s=t.borderSkipped;const a={};if(!s){n.borderSkipped=a;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:c,reverse:h,top:d,bottom:m}=Z4(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=d:(e._bottom||0)===i?s=m:(a[Ax(m,l,c,h)]=!0,s=d)),a[Ax(s,l,c,h)]=!0,n.borderSkipped=a}function Ax(n,t,e,i){return i?(n=tB(n,t,e),n=xx(n,e,t)):n=xx(n,t,e),n}function tB(n,t,e){return n===t?e:n===e?t:n}function xx(n,t,e){return n==="start"?t:n==="end"?e:n}function eB(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class jm extends mc{parsePrimitiveData(t,e,i,s){return wx(t,e,i,s)}parseArrayData(t,e,i,s){return wx(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:a,vScale:l}=t,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d=a.axis==="x"?c:h,m=l.axis==="x"?c:h,y=[];let v,T,w,A;for(v=i,T=i+s;v<T;++v)A=e[v],w={},w[a.axis]=a.parse(ko(A,d),v),y.push(AD(ko(A,m),w,l,v));return y}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const a=i._custom;a&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,a=this.getParsed(t),l=a._custom,c=Z_(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const a=s==="reset",{index:l,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),d=c.isHorizontal(),m=this._getRuler(),{sharedOptions:y,includeOptions:v}=this._getSharedOptions(e,s);for(let T=e;T<e+i;T++){const w=this.getParsed(T),A=a||ge(w[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(T),x=this._calculateBarIndexPixels(T,m),k=(w._stacks||{})[c.axis],L={horizontal:d,base:A.base,enableBorderRadius:!k||Z_(w._custom)||l===k._top||l===k._bottom,x:d?A.head:x.center,y:d?x.center:A.head,height:d?x.size:Math.abs(A.size),width:d?Math.abs(A.size):x.size};v&&(L.options=y||this.resolveDataElementOptions(T,t[T].active?"active":s));const U=L.options||t[T].options;J4(L,U,k,l),eB(L,U,m.ratio),this.updateElement(t[T],T,L,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),a=i.options.stacked,l=[],c=this._cachedMeta.controller.getParsed(e),h=c&&c[i.axis],d=m=>{const y=m._parsed.find(T=>T[i.axis]===h),v=y&&y[m.vScale.axis];if(ge(v)||isNaN(v))return!0};for(const m of s)if(!(e!==void 0&&d(m))&&((a===!1||l.indexOf(m.stack)===-1||a===void 0&&m.stack===void 0)&&l.push(m.stack),m.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Qt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const s=this._getStacks(t,i),a=e!==void 0?s.indexOf(e):-1;return a===-1?s.length-1:a}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let a,l;for(a=0,l=e.data.length;a<l;++a)s.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const c=t.barThickness;return{min:c||$4(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:a,minBarLength:l}}=this,c=a||0,h=this.getParsed(t),d=h._custom,m=Z_(d);let y=h[e.axis],v=0,T=i?this.applyStack(e,h,i):y,w,A;T!==y&&(v=T-y,T=y),m&&(y=d.barStart,T=d.barEnd-d.barStart,y!==0&&sa(y)!==sa(d.barEnd)&&(v=0),v+=y);const x=!ge(a)&&!m?a:v;let k=e.getPixelForValue(x);if(this.chart.getDataVisibility(t)?w=e.getPixelForValue(v+T):w=k,A=w-k,Math.abs(A)<l){A=Q4(A,e,c)*l,y===c&&(k-=A/2);const L=e.getPixelForDecimal(0),U=e.getPixelForDecimal(1),K=Math.min(L,U),z=Math.max(L,U);k=Math.max(Math.min(k,z),K),w=k+A,i&&!m&&(h._stacks[e.axis]._visualValues[s]=e.getValueForPixel(w)-e.getValueForPixel(k))}if(k===e.getPixelForValue(c)){const L=sa(A)*e.getLineWidthForValue(c)/2;k+=L,A-=L}return{size:A,base:k,head:w,center:w+A/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,a=s.skipNull,l=Qt(s.maxBarThickness,1/0);let c,h;const d=this._getAxisCount();if(e.grouped){const m=a?this._getStackCount(t):e.stackCount,y=s.barThickness==="flex"?Y4(t,e,s,m*d):W4(t,e,s,m*d),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,T=this._getAxis().indexOf(Qt(v,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0)+T;c=y.start+y.chunk*w+y.chunk/2,h=Math.min(l,y.chunk*y.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),h=Math.min(l,e.min*e.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let a=0;for(;a<s;++a)this.getParsed(a)[e.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}Pt(jm,"id","bar"),Pt(jm,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Pt(jm,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function nB(n,t,e){let i=1,s=1,a=0,l=0;if(t<$e){const c=n,h=c+t,d=Math.cos(c),m=Math.sin(c),y=Math.cos(h),v=Math.sin(h),T=(U,K,z)=>mg(U,c,h,!0)?1:Math.max(K,K*e,z,z*e),w=(U,K,z)=>mg(U,c,h,!0)?-1:Math.min(K,K*e,z,z*e),A=T(0,d,y),x=T(en,m,v),k=w(ve,d,y),L=w(ve+en,m,v);i=(A-k)/2,s=(x-L)/2,a=-(A+k)/2,l=-(x+L)/2}return{ratioX:i,ratioY:s,offsetX:a,offsetY:l}}class Sh extends mc{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let a=h=>+i[h];if(Zt(i[t])){const{key:h="value"}=this._parsing;a=d=>+ko(i[d],h)}let l,c;for(l=t,c=t+e;l<c;++l)s._parsed[l]=a(l)}}_getRotation(){return tr(this.options.rotation-90)}_getCircumference(){return tr(this.options.circumference)}_getRotationExtents(){let t=$e,e=-$e;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),l=s._getCircumference();t=Math.min(t,a),e=Math.max(e,a+l)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,a=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(CL(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:m,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:T,offsetX:w,offsetY:A}=nB(y,m,h),x=(i.width-l)/v,k=(i.height-l)/T,L=Math.max(Math.min(x,k)/2,0),U=iD(this.options.radius,L),K=Math.max(U*h,0),z=(U-K)/this._getVisibleDatasetWeightTotal();this.offsetX=w*U,this.offsetY=A*U,s.total=this.calculateTotal(),this.outerRadius=U-z*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-z*d,0),this.updateElements(a,0,a.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*a/$e)}updateElements(t,e,i,s){const a=s==="reset",l=this.chart,c=l.chartArea,d=l.options.animation,m=(c.left+c.right)/2,y=(c.top+c.bottom)/2,v=a&&d.animateScale,T=v?0:this.innerRadius,w=v?0:this.outerRadius,{sharedOptions:A,includeOptions:x}=this._getSharedOptions(e,s);let k=this._getRotation(),L;for(L=0;L<e;++L)k+=this._circumference(L,a);for(L=e;L<e+i;++L){const U=this._circumference(L,a),K=t[L],z={x:m+this.offsetX,y:y+this.offsetY,startAngle:k,endAngle:k+U,circumference:U,outerRadius:w,innerRadius:T};x&&(z.options=A||this.resolveDataElementOptions(L,K.active?"active":s)),k+=U,this.updateElement(K,L,z,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const a=t._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?$e*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=C0(e._parsed[t],i.options.locale);return{label:s[t]||"",value:a}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,a,l,c,h;if(!t){for(s=0,a=i.data.datasets.length;s<a;++s)if(i.isDatasetVisible(s)){l=i.getDatasetMeta(s),t=l.data,c=l.controller;break}}if(!t)return 0;for(s=0,a=t.length;s<a;++s)h=c.resolveDataElementOptions(s),h.borderAlign!=="inner"&&(e=Math.max(e,h.borderWidth||0,h.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const a=this.resolveDataElementOptions(i);e=Math.max(e,a.offset||0,a.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Qt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Pt(Sh,"id","doughnut"),Pt(Sh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Pt(Sh,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Pt(Sh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((a,l)=>{const h=t.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:s,lineWidth:h.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});function co(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class B0{constructor(t){Pt(this,"options");this.options=t||{}}static override(t){Object.assign(B0.prototype,t)}init(){}formats(){return co()}parse(){return co()}format(){return co()}add(){return co()}diff(){return co()}startOf(){return co()}endOf(){return co()}}var iB={_date:B0};function sB(n,t,e,i){const{controller:s,data:a,_sorted:l}=n,c=s._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&l&&a.length){const d=c._reversePixels?HL:lb;if(i){if(s._sharedOptions){const m=a[0],y=typeof m.getRange=="function"&&m.getRange(t);if(y){const v=d(a,t,e-y),T=d(a,t,e+y);return{lo:v.lo,hi:T.hi}}}}else{const m=d(a,t,e);if(h){const{vScale:y}=s._cachedMeta,{_parsed:v}=n,T=v.slice(0,m.lo+1).reverse().findIndex(A=>!ge(A[y.axis]));m.lo-=Math.max(0,T);const w=v.slice(m.hi).findIndex(A=>!ge(A[y.axis]));m.hi+=Math.max(0,w)}return m}}return{lo:0,hi:a.length-1}}function ep(n,t,e,i,s){const a=n.getSortedVisibleDatasetMetas(),l=e[t];for(let c=0,h=a.length;c<h;++c){const{index:d,data:m}=a[c],{lo:y,hi:v}=sB(a[c],t,l,s);for(let T=y;T<=v;++T){const w=m[T];w.skip||i(w,d,T)}}}function rB(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const a=t?Math.abs(i.x-s.x):0,l=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function J_(n,t,e,i,s){const a=[];return!s&&!n.isPointInArea(t)||ep(n,e,t,function(c,h,d){!s&&!gD(c,n.chartArea,0)||c.inRange(t.x,t.y,i)&&a.push({element:c,datasetIndex:h,index:d})},!0),a}function aB(n,t,e,i){let s=[];function a(l,c,h){const{startAngle:d,endAngle:m}=l.getProps(["startAngle","endAngle"],i),{angle:y}=aD(l,{x:t.x,y:t.y});mg(y,d,m)&&s.push({element:l,datasetIndex:c,index:h})}return ep(n,e,t,a),s}function oB(n,t,e,i,s,a){let l=[];const c=rB(e);let h=Number.POSITIVE_INFINITY;function d(m,y,v){const T=m.inRange(t.x,t.y,s);if(i&&!T)return;const w=m.getCenterPoint(s);if(!(!!a||n.isPointInArea(w))&&!T)return;const x=c(t,w);x<h?(l=[{element:m,datasetIndex:y,index:v}],h=x):x===h&&l.push({element:m,datasetIndex:y,index:v})}return ep(n,e,t,d),l}function tv(n,t,e,i,s,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!i?aB(n,t,e,s):oB(n,t,e,i,s,a)}function Ix(n,t,e,i,s){const a=[],l=e==="x"?"inXRange":"inYRange";let c=!1;return ep(n,e,t,(h,d,m)=>{h[l]&&h[l](t[e],s)&&(a.push({element:h,datasetIndex:d,index:m}),c=c||h.inRange(t.x,t.y,s))}),i&&!c?[]:a}var lB={modes:{index(n,t,e,i){const s=fo(t,n),a=e.axis||"x",l=e.includeInvisible||!1,c=e.intersect?J_(n,s,a,i,l):tv(n,s,a,!1,i,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const m=c[0].index,y=d.data[m];y&&!y.skip&&h.push({element:y,datasetIndex:d.index,index:m})}),h):[]},dataset(n,t,e,i){const s=fo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;let c=e.intersect?J_(n,s,a,i,l):tv(n,s,a,!1,i,l);if(c.length>0){const h=c[0].datasetIndex,d=n.getDatasetMeta(h).data;c=[];for(let m=0;m<d.length;++m)c.push({element:d[m],datasetIndex:h,index:m})}return c},point(n,t,e,i){const s=fo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return J_(n,s,a,i,l)},nearest(n,t,e,i){const s=fo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return tv(n,s,a,e.intersect,i,l)},x(n,t,e,i){const s=fo(t,n);return Ix(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=fo(t,n);return Ix(n,s,"y",e.intersect,i)}}};const xD=["left","top","right","bottom"];function hh(n,t){return n.filter(e=>e.pos===t)}function Rx(n,t){return n.filter(e=>xD.indexOf(e.pos)===-1&&e.box.axis===t)}function fh(n,t){return n.sort((e,i)=>{const s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function cB(n){const t=[];let e,i,s,a,l,c;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:a,options:{stack:l,stackWeight:c=1}}=s,t.push({index:e,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&a+l,stackWeight:c});return t}function uB(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:a}=e;if(!i||!xD.includes(s))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function hB(n,t){const e=uB(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let a,l,c;for(a=0,l=n.length;a<l;++a){c=n[a];const{fullSize:h}=c.box,d=e[c.stack],m=d&&c.stackWeight/d.weight;c.horizontal?(c.width=m?m*i:h&&t.availableWidth,c.height=s):(c.width=i,c.height=m?m*s:h&&t.availableHeight)}return e}function fB(n){const t=cB(n),e=fh(t.filter(d=>d.box.fullSize),!0),i=fh(hh(t,"left"),!0),s=fh(hh(t,"right")),a=fh(hh(t,"top"),!0),l=fh(hh(t,"bottom")),c=Rx(t,"x"),h=Rx(t,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:s.concat(h).concat(l).concat(c),chartArea:hh(t,"chartArea"),vertical:i.concat(s).concat(h),horizontal:a.concat(l).concat(c)}}function Cx(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function ID(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function dB(n,t,e,i){const{pos:s,box:a}=e,l=n.maxPadding;if(!Zt(s)){e.size&&(n[s]-=e.size);const y=i[e.stack]||{size:0,count:1};y.size=Math.max(y.size,e.horizontal?a.height:a.width),e.size=y.size/y.count,n[s]+=e.size}a.getPadding&&ID(l,a.getPadding());const c=Math.max(0,t.outerWidth-Cx(l,n,"left","right")),h=Math.max(0,t.outerHeight-Cx(l,n,"top","bottom")),d=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,e.horizontal?{same:d,other:m}:{same:m,other:d}}function mB(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function gB(n,t){const e=t.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{a[l]=Math.max(t[l],e[l])}),a}return i(n?["left","right"]:["top","bottom"])}function wh(n,t,e,i){const s=[];let a,l,c,h,d,m;for(a=0,l=n.length,d=0;a<l;++a){c=n[a],h=c.box,h.update(c.width||t.w,c.height||t.h,gB(c.horizontal,t));const{same:y,other:v}=dB(t,e,c,i);d|=y&&s.length,m=m||v,h.fullSize||s.push(c)}return d&&wh(s,t,e,i)||m}function Tm(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function Dx(n,t,e,i){const s=e.padding;let{x:a,y:l}=t;for(const c of n){const h=c.box,d=i[c.stack]||{placed:0,weight:1},m=c.stackWeight/d.weight||1;if(c.horizontal){const y=t.w*m,v=d.size||h.height;nf(d.start)&&(l=d.start),h.fullSize?Tm(h,s.left,l,e.outerWidth-s.right-s.left,v):Tm(h,t.left+d.placed,l,y,v),d.start=l,d.placed+=y,l=h.bottom}else{const y=t.h*m,v=d.size||h.width;nf(d.start)&&(a=d.start),h.fullSize?Tm(h,a,s.top,v,e.outerHeight-s.bottom-s.top):Tm(h,a,t.top+d.placed,v,y),d.start=a,d.placed+=y,a=h.right}}t.x=a,t.y=l}var ta={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Ui(n.options.layout.padding),a=Math.max(t-s.width,0),l=Math.max(e-s.height,0),c=fB(n.boxes),h=c.vertical,d=c.horizontal;ae(n.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});const m=h.reduce((A,x)=>x.box.options&&x.box.options.display===!1?A:A+1,0)||1,y=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/m,hBoxMaxHeight:l/2}),v=Object.assign({},s);ID(v,Ui(i));const T=Object.assign({maxPadding:v,w:a,h:l,x:s.left,y:s.top},s),w=hB(h.concat(d),y);wh(c.fullSize,T,y,w),wh(h,T,y,w),wh(d,T,y,w)&&wh(h,T,y,w),mB(T),Dx(c.leftAndTop,T,y,w),T.x+=T.w,T.y+=T.h,Dx(c.rightAndBottom,T,y,w),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},ae(c.chartArea,A=>{const x=A.box;Object.assign(x,n.chartArea),x.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class RD{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class pB extends RD{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Fm="$chartjs",yB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Mx=n=>n===null||n==="";function _B(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Fm]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Mx(s)){const a=yx(n,"width");a!==void 0&&(n.width=a)}if(Mx(i))if(n.style.height==="")n.height=n.width/(t||2);else{const a=yx(n,"height");a!==void 0&&(n.height=a)}return n}const CD=I4?{passive:!0}:!1;function vB(n,t,e){n&&n.addEventListener(t,e,CD)}function bB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,CD)}function TB(n,t){const e=yB[n.type]||n.type,{x:i,y:s}=fo(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function _g(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function EB(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const c of a)l=l||_g(c.addedNodes,i),l=l&&!_g(c.removedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function SB(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const c of a)l=l||_g(c.removedNodes,i),l=l&&!_g(c.addedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const sf=new Map;let Px=0;function DD(){const n=window.devicePixelRatio;n!==Px&&(Px=n,sf.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function wB(n,t){sf.size||window.addEventListener("resize",DD),sf.set(n,t)}function AB(n){sf.delete(n),sf.size||window.removeEventListener("resize",DD)}function xB(n,t,e){const i=n.canvas,s=i&&L0(i);if(!s)return;const a=uD((c,h)=>{const d=s.clientWidth;e(c,h),d<s.clientWidth&&e()},window),l=new ResizeObserver(c=>{const h=c[0],d=h.contentRect.width,m=h.contentRect.height;d===0&&m===0||a(d,m)});return l.observe(s),wB(n,a),l}function ev(n,t,e){e&&e.disconnect(),t==="resize"&&AB(n)}function IB(n,t,e){const i=n.canvas,s=uD(a=>{n.ctx!==null&&e(TB(a,n))},n);return vB(i,t,s),s}class RB extends RD{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(_B(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Fm])return!1;const i=e[Fm].initial;["height","width"].forEach(a=>{const l=i[a];ge(l)?e.removeAttribute(a):e.setAttribute(a,l)});const s=i.style||{};return Object.keys(s).forEach(a=>{e.style[a]=s[a]}),e.width=e.width,delete e[Fm],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),l={attach:EB,detach:SB,resize:xB}[e]||IB;s[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:ev,detach:ev,resize:ev}[e]||bB)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return x4(t,e,i,s)}isAttached(t){const e=t&&L0(t);return!!(e&&e.isConnected)}}function CB(n){return!V0()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?pB:RB}var Bm;let Fc=(Bm=class{constructor(){Pt(this,"x");Pt(this,"y");Pt(this,"active",!1);Pt(this,"options");Pt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return dg(this.x)&&dg(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}},Pt(Bm,"defaults",{}),Pt(Bm,"defaultRoutes"),Bm);function DB(n,t){const e=n.options.ticks,i=MB(n),s=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?OB(t):[],l=a.length,c=a[0],h=a[l-1],d=[];if(l>s)return kB(t,d,a,l/s),d;const m=PB(a,t,s);if(l>0){let y,v;const T=l>1?Math.round((h-c)/(l-1)):null;for(Em(t,d,m,ge(T)?0:c-T,c),y=0,v=l-1;y<v;y++)Em(t,d,m,a[y],a[y+1]);return Em(t,d,m,h,ge(T)?t.length:h+T),d}return Em(t,d,m),d}function MB(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function PB(n,t,e){const i=NB(n),s=t.length/e;if(!i)return Math.max(s,1);const a=VL(i);for(let l=0,c=a.length-1;l<c;l++){const h=a[l];if(h>s)return h}return Math.max(s,1)}function OB(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function kB(n,t,e,i){let s=0,a=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(t.push(n[l]),s++,a=e[s*i])}function Em(n,t,e,i,s){const a=Qt(i,0),l=Math.min(Qt(s,n.length),n.length);let c=0,h,d,m;for(e=Math.ceil(e),s&&(h=s-i,e=h/Math.floor(h/e)),m=a;m<0;)c++,m=Math.round(a+c*e);for(d=Math.max(a,0);d<l;d++)d===m&&(t.push(n[d]),c++,m=Math.round(a+c*e))}function NB(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const VB=n=>n==="left"?"right":n==="right"?"left":n,Ox=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,kx=(n,t)=>Math.min(t||n,n);function Nx(n,t){const e=[],i=n.length/t,s=n.length;let a=0;for(;a<s;a+=i)e.push(n[Math.floor(a)]);return e}function LB(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),a=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(s),d;if(!(e&&(i===1?d=Math.max(h-a,l-h):t===0?d=(n.getPixelForTick(1)-h)/2:d=(h-n.getPixelForTick(s-1))/2,h+=s<t?d:-d,h<a-c||h>l+c)))return h}function BB(n,t){ae(n,e=>{const i=e.gc,s=i.length/2;let a;if(s>t){for(a=0;a<s;++a)delete e.data[i[a]];i.splice(0,s)}})}function dh(n){return n.drawTicks?n.tickLength:0}function Vx(n,t){if(!n.display)return 0;const e=qn(n.font,t),i=Ui(n.padding);return(fn(n.text)?n.text.length:1)*e.lineHeight+i.height}function UB(n,t){return jc(n,{scale:t,type:"scale"})}function jB(n,t,e){return jc(n,{tick:e,index:t,type:"tick"})}function FB(n,t,e){let i=hD(n);return(e&&t!=="right"||!e&&t==="right")&&(i=VB(i)),i}function zB(n,t,e,i){const{top:s,left:a,bottom:l,right:c,chart:h}=n,{chartArea:d,scales:m}=h;let y=0,v,T,w;const A=l-s,x=c-a;if(n.isHorizontal()){if(T=si(i,a,c),Zt(e)){const k=Object.keys(e)[0],L=e[k];w=m[k].getPixelForValue(L)+A-t}else e==="center"?w=(d.bottom+d.top)/2+A-t:w=Ox(n,e,t);v=c-a}else{if(Zt(e)){const k=Object.keys(e)[0],L=e[k];T=m[k].getPixelForValue(L)-x+t}else e==="center"?T=(d.left+d.right)/2-x+t:T=Ox(n,e,t);w=si(i,l,s),y=e==="left"?-en:en}return{titleX:T,titleY:w,maxWidth:v,rotation:y}}class zc extends Fc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=rs(t,Number.POSITIVE_INFINITY),e=rs(e,Number.NEGATIVE_INFINITY),i=rs(i,Number.POSITIVE_INFINITY),s=rs(s,Number.NEGATIVE_INFINITY),{min:rs(t,i),max:rs(e,s),minDefined:Ci(t),maxDefined:Ci(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),l;if(s&&a)return{min:e,max:i};const c=this.getMatchingVisibleMetas();for(let h=0,d=c.length;h<d;++h)l=c[h].controller.getMinMax(this,t),s||(e=Math.min(e,l.min)),a||(i=Math.max(i,l.max));return e=a&&e>i?i:e,i=s&&e>i?e:i,{min:rs(e,rs(i,e)),max:rs(i,rs(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_e(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:a,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=h4(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?Nx(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=DB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_e(this.options.afterUpdate,[this])}beforeSetDimensions(){_e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_e(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_e(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,a;for(i=0,s=t.length;i<s;i++)a=t[i],a.label=_e(e.callback,[a.value,i,t],this)}afterTickToLabelConversion(){_e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=kx(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,a=e.maxRotation;let l=s,c,h,d;if(!this._isVisible()||!e.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const m=this._getLabelSizes(),y=m.widest.width,v=m.highest.height,T=Hn(this.chart.width-y,0,this.maxWidth);c=t.offset?this.maxWidth/i:T/(i-1),y+6>c&&(c=T/(i-(t.offset?.5:1)),h=this.maxHeight-dh(t.grid)-e.padding-Vx(t.title,this.chart.options.font),d=Math.sqrt(y*y+v*v),l=jL(Math.min(Math.asin(Hn((m.highest.height+6)/c,-1,1)),Math.asin(Hn(h/d,-1,1))-Math.asin(Hn(v/d,-1,1)))),l=Math.max(s,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){_e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_e(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:a}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=Vx(s,e.options.font);if(c?(t.width=this.maxWidth,t.height=dh(a)+h):(t.height=this.maxHeight,t.width=dh(a)+h),i.display&&this.ticks.length){const{first:d,last:m,widest:y,highest:v}=this._getLabelSizes(),T=i.padding*2,w=tr(this.labelRotation),A=Math.cos(w),x=Math.sin(w);if(c){const k=i.mirror?0:x*y.width+A*v.height;t.height=Math.min(this.maxHeight,t.height+k+T)}else{const k=i.mirror?0:A*y.width+x*v.height;t.width=Math.min(this.maxWidth,t.width+k+T)}this._calculatePadding(d,m,x,A)}}this._handleMargins(),c?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:a,padding:l},position:c}=this.options,h=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,T=0;h?d?(v=s*t.width,T=i*e.height):(v=i*t.height,T=s*e.width):a==="start"?T=e.width:a==="end"?v=t.width:a!=="inner"&&(v=t.width/2,T=e.width/2),this.paddingLeft=Math.max((v-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((T-y+l)*this.width/(this.width-y),0)}else{let m=e.height/2,y=t.height/2;a==="start"?(m=0,y=t.height):a==="end"&&(m=e.height,y=0),this.paddingTop=m+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_e(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ge(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Nx(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:a}=this,l=[],c=[],h=Math.floor(e/kx(e,i));let d=0,m=0,y,v,T,w,A,x,k,L,U,K,z;for(y=0;y<e;y+=h){if(w=t[y].label,A=this._resolveTickFontOptions(y),s.font=x=A.string,k=a[x]=a[x]||{data:{},gc:[]},L=A.lineHeight,U=K=0,!ge(w)&&!fn(w))U=hx(s,k.data,k.gc,U,w),K=L;else if(fn(w))for(v=0,T=w.length;v<T;++v)z=w[v],!ge(z)&&!fn(z)&&(U=hx(s,k.data,k.gc,U,z),K+=L);l.push(U),c.push(K),d=Math.max(U,d),m=Math.max(K,m)}BB(a,e);const nt=l.indexOf(d),O=c.indexOf(m),I=C=>({width:l[C]||0,height:c[C]||0});return{first:I(0),last:I(e-1),widest:I(nt),highest:I(O),widths:l,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return zL(this._alignToPixels?lo(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=jB(this.getContext(),t,i))}return this.$context||(this.$context=UB(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=tr(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,c=a?a.widest.width+l:0,h=a?a.highest.height+l:0;return this.isHorizontal()?h*i>c*s?c/i:h/s:h*s<c*i?h/i:c/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:a,position:l,border:c}=s,h=a.offset,d=this.isHorizontal(),y=this.ticks.length+(h?1:0),v=dh(a),T=[],w=c.setContext(this.getContext()),A=w.display?w.width:0,x=A/2,k=function(G){return lo(i,G,A)};let L,U,K,z,nt,O,I,C,P,V,F,N;if(l==="top")L=k(this.bottom),O=this.bottom-v,C=L-x,V=k(t.top)+x,N=t.bottom;else if(l==="bottom")L=k(this.top),V=t.top,N=k(t.bottom)-x,O=L+x,C=this.top+v;else if(l==="left")L=k(this.right),nt=this.right-v,I=L-x,P=k(t.left)+x,F=t.right;else if(l==="right")L=k(this.left),P=t.left,F=k(t.right)-x,nt=L+x,I=this.left+v;else if(e==="x"){if(l==="center")L=k((t.top+t.bottom)/2+.5);else if(Zt(l)){const G=Object.keys(l)[0],st=l[G];L=k(this.chart.scales[G].getPixelForValue(st))}V=t.top,N=t.bottom,O=L+x,C=O+v}else if(e==="y"){if(l==="center")L=k((t.left+t.right)/2);else if(Zt(l)){const G=Object.keys(l)[0],st=l[G];L=k(this.chart.scales[G].getPixelForValue(st))}nt=L-x,I=nt-v,P=t.left,F=t.right}const At=Qt(s.ticks.maxTicksLimit,y),Et=Math.max(1,Math.ceil(y/At));for(U=0;U<y;U+=Et){const G=this.getContext(U),st=a.setContext(G),ut=c.setContext(G),Z=st.lineWidth,D=st.color,H=ut.dash||[],X=ut.dashOffset,tt=st.tickWidth,ft=st.tickColor,vt=st.tickBorderDash||[],yt=st.tickBorderDashOffset;K=LB(this,U,h),K!==void 0&&(z=lo(i,K,Z),d?nt=I=P=F=z:O=C=V=N=z,T.push({tx1:nt,ty1:O,tx2:I,ty2:C,x1:P,y1:V,x2:F,y2:N,width:Z,color:D,borderDash:H,borderDashOffset:X,tickWidth:tt,tickColor:ft,tickBorderDash:vt,tickBorderDashOffset:yt}))}return this._ticksLength=y,this._borderValue=L,T}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:a}=i,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:d,padding:m,mirror:y}=a,v=dh(i.grid),T=v+m,w=y?-m:T,A=-tr(this.labelRotation),x=[];let k,L,U,K,z,nt,O,I,C,P,V,F,N="middle";if(s==="top")nt=this.bottom-w,O=this._getXAxisLabelAlignment();else if(s==="bottom")nt=this.top+w,O=this._getXAxisLabelAlignment();else if(s==="left"){const Et=this._getYAxisLabelAlignment(v);O=Et.textAlign,z=Et.x}else if(s==="right"){const Et=this._getYAxisLabelAlignment(v);O=Et.textAlign,z=Et.x}else if(e==="x"){if(s==="center")nt=(t.top+t.bottom)/2+T;else if(Zt(s)){const Et=Object.keys(s)[0],G=s[Et];nt=this.chart.scales[Et].getPixelForValue(G)+T}O=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")z=(t.left+t.right)/2-T;else if(Zt(s)){const Et=Object.keys(s)[0],G=s[Et];z=this.chart.scales[Et].getPixelForValue(G)}O=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(h==="start"?N="top":h==="end"&&(N="bottom"));const At=this._getLabelSizes();for(k=0,L=c.length;k<L;++k){U=c[k],K=U.label;const Et=a.setContext(this.getContext(k));I=this.getPixelForTick(k)+a.labelOffset,C=this._resolveTickFontOptions(k),P=C.lineHeight,V=fn(K)?K.length:1;const G=V/2,st=Et.color,ut=Et.textStrokeColor,Z=Et.textStrokeWidth;let D=O;l?(z=I,O==="inner"&&(k===L-1?D=this.options.reverse?"left":"right":k===0?D=this.options.reverse?"right":"left":D="center"),s==="top"?d==="near"||A!==0?F=-V*P+P/2:d==="center"?F=-At.highest.height/2-G*P+P:F=-At.highest.height+P/2:d==="near"||A!==0?F=P/2:d==="center"?F=At.highest.height/2-G*P:F=At.highest.height-V*P,y&&(F*=-1),A!==0&&!Et.showLabelBackdrop&&(z+=P/2*Math.sin(A))):(nt=I,F=(1-V)*P/2);let H;if(Et.showLabelBackdrop){const X=Ui(Et.backdropPadding),tt=At.heights[k],ft=At.widths[k];let vt=F-X.top,yt=0-X.left;switch(N){case"middle":vt-=tt/2;break;case"bottom":vt-=tt;break}switch(O){case"center":yt-=ft/2;break;case"right":yt-=ft;break;case"inner":k===L-1?yt-=ft:k>0&&(yt-=ft/2);break}H={left:yt,top:vt,width:ft+X.width,height:tt+X.height,color:Et.backdropColor}}x.push({label:K,font:C,textOffset:F,options:{rotation:A,color:st,strokeColor:ut,strokeWidth:Z,textAlign:D,textBaseline:N,translation:[z,nt],backdrop:H}})}return x}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-tr(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,l=this._getLabelSizes(),c=t+a,h=l.widest.width;let d,m;return e==="left"?s?(m=this.right+a,i==="near"?d="left":i==="center"?(d="center",m+=h/2):(d="right",m+=h)):(m=this.right-c,i==="near"?d="right":i==="center"?(d="center",m-=h/2):(d="left",m=this.left)):e==="right"?s?(m=this.left+a,i==="near"?d="right":i==="center"?(d="center",m-=h/2):(d="left",m-=h)):(m=this.left+c,i==="near"?d="left":i==="center"?(d="center",m+=h/2):(d="right",m=this.right)):d="right",{textAlign:d,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:a,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,a,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(a=>a.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const c=(h,d,m)=>{!m.width||!m.color||(i.save(),i.lineWidth=m.width,i.strokeStyle=m.color,i.setLineDash(m.borderDash||[]),i.lineDashOffset=m.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(a=0,l=s.length;a<l;++a){const h=s[a];e.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const c=s.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let d,m,y,v;this.isHorizontal()?(d=lo(t,this.left,l)-l/2,m=lo(t,this.right,c)+c/2,y=v=h):(y=lo(t,this.top,l)-l/2,v=lo(t,this.bottom,c)+c/2,d=m=h),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(d,y),e.lineTo(m,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&D0(i,s);const a=this.getLabelItems(t);for(const l of a){const c=l.options,h=l.font,d=l.label,m=l.textOffset;gg(i,d,0,m,h,c)}s&&M0(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const a=qn(i.font),l=Ui(i.padding),c=i.align;let h=a.lineHeight/2;e==="bottom"||e==="center"||Zt(e)?(h+=l.bottom,fn(i.text)&&(h+=a.lineHeight*(i.text.length-1))):h+=l.top;const{titleX:d,titleY:m,maxWidth:y,rotation:v}=zB(this,h,e,c);gg(t,i.text,0,0,a,{color:i.color,maxWidth:y,rotation:v,textAlign:FB(c,e,s),textBaseline:"middle",translation:[d,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Qt(t.grid&&t.grid.z,-1),s=Qt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==zc.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,l;for(a=0,l=e.length;a<l;++a){const c=e[a];c[i]===this.id&&(!t||c.type===t)&&s.push(c)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return qn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sm{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;GB(e)&&(i=this.register(e));const s=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in s||(s[a]=t,HB(t,l,i),this.override&&Le.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Le[s]&&(delete Le[s][i],this.override&&delete No[i])}}function HB(n,t,e){const i=ef(Object.create(null),[e?Le.get(e):{},Le.get(t),n.defaults]);Le.set(t,i),n.defaultRoutes&&qB(t,n.defaultRoutes),n.descriptors&&Le.describe(t,n.descriptors)}function qB(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),a=[n].concat(i).join("."),l=t[e].split("."),c=l.pop(),h=l.join(".");Le.route(a,s,h,c)})}function GB(n){return"id"in n&&"defaults"in n}class KB{constructor(){this.controllers=new Sm(mc,"datasets",!0),this.elements=new Sm(Fc,"elements"),this.plugins=new Sm(Object,"plugins"),this.scales=new Sm(zc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(t,a,s):ae(s,l=>{const c=i||this._getRegistryForType(l);this._exec(t,c,l)})})}_exec(t,e,i){const s=I0(t);_e(i["before"+s],[],i),e[t](i),_e(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var os=new KB;class $B{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=s?this._descriptors(t).filter(s):this._descriptors(t),l=this._notify(a,t,e,i);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),l}_notify(t,e,i,s){s=s||{};for(const a of t){const l=a.plugin,c=l[i],h=[e,s,a.options];if(_e(c,h,l)===!1&&s.cancelable)return!1}return!0}invalidate(){ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=Qt(i.options&&i.options.plugins,{}),a=WB(i);return s===!1&&!e?[]:XB(t,a,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(a,l)=>a.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function WB(n){const t={},e=[],i=Object.keys(os.plugins.items);for(let a=0;a<i.length;a++)e.push(os.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const l=s[a];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function YB(n,t){return!t&&n===!1?null:n===!0?{}:n}function XB(n,{plugins:t,localIds:e},i,s){const a=[],l=n.getContext();for(const c of t){const h=c.id,d=YB(i[h],s);d!==null&&a.push({plugin:c,options:QB(n.config,{plugin:c,local:e[h]},d,l)})}return a}function QB(n,{plugin:t,local:e},i,s){const a=n.pluginScopeKeys(t),l=n.getOptionScopes(i,a);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ub(n,t){const e=Le.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function ZB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function JB(n,t){return n===t?"_index_":"_value_"}function Lx(n){if(n==="x"||n==="y"||n==="r")return n}function tU(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function hb(n,...t){if(Lx(n))return n;for(const e of t){const i=e.axis||tU(e.position)||n.length>1&&Lx(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Bx(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function eU(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Bx(n,"x",e[0])||Bx(n,"y",e[0])}return{}}function nU(n,t){const e=No[n.type]||{scales:{}},i=t.scales||{},s=ub(n.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const c=i[l];if(!Zt(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=hb(l,c,eU(l,n),Le.scales[c.type]),d=JB(h,s),m=e.scales||{};a[l]=kh(Object.create(null),[{axis:h},c,m[h],m[d]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||ub(c,t),m=(No[c]||{}).scales||{};Object.keys(m).forEach(y=>{const v=ZB(y,h),T=l[v+"AxisID"]||v;a[T]=a[T]||Object.create(null),kh(a[T],[{axis:v},i[T],m[y]])})}),Object.keys(a).forEach(l=>{const c=a[l];kh(c,[Le.scales[c.type],Le.scale])}),a}function MD(n){const t=n.options||(n.options={});t.plugins=Qt(t.plugins,{}),t.scales=nU(n,t)}function PD(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function iU(n){return n=n||{},n.data=PD(n.data),MD(n),n}const Ux=new Map,OD=new Set;function wm(n,t){let e=Ux.get(n);return e||(e=t(),Ux.set(n,e),OD.add(e)),e}const mh=(n,t,e)=>{const i=ko(t,e);i!==void 0&&n.add(i)};class sU{constructor(t){this._config=iU(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=PD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),MD(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return wm(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return wm(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return wm(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return wm(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:a}=this,l=this._cachedScopes(t,i),c=l.get(e);if(c)return c;const h=new Set;e.forEach(m=>{t&&(h.add(t),m.forEach(y=>mh(h,t,y))),m.forEach(y=>mh(h,s,y)),m.forEach(y=>mh(h,No[a]||{},y)),m.forEach(y=>mh(h,Le,y)),m.forEach(y=>mh(h,cb,y))});const d=Array.from(h);return d.length===0&&d.push(Object.create(null)),OD.has(e)&&l.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,No[e]||{},Le.datasets[e]||{},{type:e},Le,cb]}resolveNamedOptions(t,e,i,s=[""]){const a={$shared:!0},{resolver:l,subPrefixes:c}=jx(this._resolverCache,t,s);let h=l;if(aU(l,e)){a.$shared=!1,i=ha(i)?i():i;const d=this.createResolver(t,i,c);h=bc(l,i,d)}for(const d of e)a[d]=h[d];return a}createResolver(t,e,i=[""],s){const{resolver:a}=jx(this._resolverCache,t,i);return Zt(e)?bc(a,e,void 0,s):a}}function jx(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let a=i.get(s);return a||(a={resolver:O0(t,e),subPrefixes:e.filter(c=>!c.toLowerCase().includes("hover"))},i.set(s,a)),a}const rU=n=>Zt(n)&&Object.getOwnPropertyNames(n).some(t=>ha(n[t]));function aU(n,t){const{isScriptable:e,isIndexable:i}=yD(n);for(const s of t){const a=e(s),l=i(s),c=(l||a)&&n[s];if(a&&(ha(c)||rU(c))||l&&fn(c))return!0}return!1}var oU="4.5.0";const lU=["top","bottom","left","right","chartArea"];function Fx(n,t){return n==="top"||n==="bottom"||lU.indexOf(n)===-1&&t==="x"}function zx(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function Hx(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),_e(e&&e.onComplete,[n],t)}function cU(n){const t=n.chart,e=t.options.animation;_e(e&&e.onProgress,[n],t)}function kD(n){return V0()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const zm={},qx=n=>{const t=kD(n);return Object.values(zm).filter(e=>e.canvas===t).pop()};function uU(n,t,e){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=t){const l=n[s];delete n[s],(e>0||a>t)&&(n[a+e]=l)}}}function hU(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var Kr;let Hc=(Kr=class{static register(...t){os.add(...t),Gx()}static unregister(...t){os.remove(...t),Gx()}constructor(t,e){const i=this.config=new sU(e),s=kD(t),a=qx(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||CB(s)),this.platform.updateConfig(i);const c=this.platform.acquireContext(s,l.aspectRatio),h=c&&c.canvas,d=h&&h.height,m=h&&h.width;if(this.id=RL(),this.ctx=c,this.canvas=h,this.width=m,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $B,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=KL(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],zm[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Qs.listen(this,"complete",Hx),Qs.listen(this,"progress",cU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:a}=this;return ge(t)?e&&a?a:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return os}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():px(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return fx(this.canvas,this.ctx),this}stop(){return Qs.stop(this),this}resize(t,e){Qs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,t,e,a),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,px(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),_e(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ae(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((l,c)=>(l[c]=!1,l),{});let a=[];e&&(a=a.concat(Object.keys(e).map(l=>{const c=e[l],h=hb(l,c),d=h==="r",m=h==="x";return{options:c,dposition:d?"chartArea":m?"bottom":"left",dtype:d?"radialLinear":m?"category":"linear"}}))),ae(a,l=>{const c=l.options,h=c.id,d=hb(h,c),m=Qt(c.type,l.dtype);(c.position===void 0||Fx(c.position,d)!==Fx(l.dposition))&&(c.position=l.dposition),s[h]=!0;let y=null;if(h in i&&i[h].type===m)y=i[h];else{const v=os.getScale(m);y=new v({id:h,type:m,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(c,t)}),ae(s,(l,c)=>{l||delete i[c]}),ae(i,l=>{ta.configure(this,l,l.options),ta.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,a)=>s.index-a.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(zx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const a=e[i];let l=this.getDatasetMeta(i);const c=a.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=c,l.indexAxis=a.indexAxis||ub(c,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=os.getController(c),{datasetElementType:d,dataElementType:m}=Le.datasets[c];Object.assign(h,{dataElementType:os.getElement(m),datasetElementType:d&&os.getElement(d)}),l.controller=new h(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){ae(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,m=this.data.datasets.length;d<m;d++){const{controller:y}=this.getDatasetMeta(d),v=!s&&a.indexOf(y)===-1;y.buildOrUpdateElements(v),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||ae(a,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(zx("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ae(this.scales,t=>{ta.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!nx(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of e){const l=i==="_removeElements"?-a:a;uU(t,s,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,c)=>c+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<e;a++)if(!nx(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ta.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ae(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ha(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qs.has(this)?this.attached&&!Qs.running(this)&&Qs.start(this):(this.draw(),Hx({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,a;for(s=0,a=e.length;s<a;++s){const l=e[s];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=M4(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&D0(e,s),t.controller.draw(),s&&M0(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return gD(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const a=lB.modes[e];return typeof a=="function"?a(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(a=>a&&a._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=jc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,s);nf(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Qs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),fx(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete zm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(a,l)=>{e.addEventListener(this,a,l),t[a]=l},s=(a,l,c)=>{a.offsetX=l,a.offsetY=c,this._eventHandler(a)};ae(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(h,d)=>{e.addEventListener(this,h,d),t[h]=d},s=(h,d)=>{t[h]&&(e.removeEventListener(this,h,d),delete t[h])},a=(h,d)=>{this.canvas&&this.resize(h,d)};let l;const c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",c)},e.isAttached(this.canvas)?c():l()}unbindEvents(){ae(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ae(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let a,l,c,h;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),c=0,h=t.length;c<h;++c){l=t[c];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[l],index:l}});!ug(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,a=(h,d)=>h.filter(m=>!d.some(y=>m.datasetIndex===y.datasetIndex&&m.index===y.index)),l=a(e,t),c=i?t:a(t,e);l.length&&this.updateHoverStyle(l,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:a}=this,l=e,c=this._getActiveElements(t,s,i,l),h=kL(t),d=hU(t,this._lastEvent,i,h);i&&(this._lastEvent=null,_e(a.onHover,[t,c,this],this),h&&_e(a.onClick,[t,c,this],this));const m=!ug(c,s);return(m||e)&&(this._active=c,this._updateHoverStyles(c,s,e)),this._lastEvent=d,m}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}},Pt(Kr,"defaults",Le),Pt(Kr,"instances",zm),Pt(Kr,"overrides",No),Pt(Kr,"registry",os),Pt(Kr,"version",oU),Pt(Kr,"getChart",qx),Kr);function Gx(){return ae(Hc.instances,n=>n._plugins.invalidate())}function fU(n,t,e){const{startAngle:i,x:s,y:a,outerRadius:l,innerRadius:c,options:h}=t,{borderWidth:d,borderJoinStyle:m}=h,y=Math.min(d/l,ls(i-e));if(n.beginPath(),n.arc(s,a,l-d/2,i+y/2,e-y/2),c>0){const v=Math.min(d/c,ls(i-e));n.arc(s,a,c+d/2,e-v/2,i+v/2,!0)}else{const v=Math.min(d/2,l*ls(i-e));if(m==="round")n.arc(s,a,v,e-ve/2,i+ve/2,!0);else if(m==="bevel"){const T=2*v*v,w=-T*Math.cos(e+ve/2)+s,A=-T*Math.sin(e+ve/2)+a,x=T*Math.cos(i+ve/2)+s,k=T*Math.sin(i+ve/2)+a;n.lineTo(w,A),n.lineTo(x,k)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function dU(n,t,e){const{startAngle:i,pixelMargin:s,x:a,y:l,outerRadius:c,innerRadius:h}=t;let d=s/c;n.beginPath(),n.arc(a,l,c,i-d,e+d),h>s?(d=s/h,n.arc(a,l,h,e+d,i-d,!0)):n.arc(a,l,s,e+en,i-en),n.closePath(),n.clip()}function mU(n){return P0(n,["outerStart","outerEnd","innerStart","innerEnd"])}function gU(n,t,e,i){const s=mU(n.options.borderRadius),a=(e-t)/2,l=Math.min(a,i*t/2),c=h=>{const d=(e-Math.min(a,h))*i/2;return Hn(h,0,Math.min(a,d))};return{outerStart:c(s.outerStart),outerEnd:c(s.outerEnd),innerStart:Hn(s.innerStart,0,l),innerEnd:Hn(s.innerEnd,0,l)}}function Kl(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function vg(n,t,e,i,s,a){const{x:l,y:c,startAngle:h,pixelMargin:d,innerRadius:m}=t,y=Math.max(t.outerRadius+i+e-d,0),v=m>0?m+i+e+d:0;let T=0;const w=s-h;if(i){const Et=m>0?m-i:0,G=y>0?y-i:0,st=(Et+G)/2,ut=st!==0?w*st/(st+i):w;T=(w-ut)/2}const A=Math.max(.001,w*y-e/ve)/y,x=(w-A)/2,k=h+x+T,L=s-x-T,{outerStart:U,outerEnd:K,innerStart:z,innerEnd:nt}=gU(t,v,y,L-k),O=y-U,I=y-K,C=k+U/O,P=L-K/I,V=v+z,F=v+nt,N=k+z/V,At=L-nt/F;if(n.beginPath(),a){const Et=(C+P)/2;if(n.arc(l,c,y,C,Et),n.arc(l,c,y,Et,P),K>0){const Z=Kl(I,P,l,c);n.arc(Z.x,Z.y,K,P,L+en)}const G=Kl(F,L,l,c);if(n.lineTo(G.x,G.y),nt>0){const Z=Kl(F,At,l,c);n.arc(Z.x,Z.y,nt,L+en,At+Math.PI)}const st=(L-nt/v+(k+z/v))/2;if(n.arc(l,c,v,L-nt/v,st,!0),n.arc(l,c,v,st,k+z/v,!0),z>0){const Z=Kl(V,N,l,c);n.arc(Z.x,Z.y,z,N+Math.PI,k-en)}const ut=Kl(O,k,l,c);if(n.lineTo(ut.x,ut.y),U>0){const Z=Kl(O,C,l,c);n.arc(Z.x,Z.y,U,k-en,C)}}else{n.moveTo(l,c);const Et=Math.cos(C)*y+l,G=Math.sin(C)*y+c;n.lineTo(Et,G);const st=Math.cos(P)*y+l,ut=Math.sin(P)*y+c;n.lineTo(st,ut)}n.closePath()}function pU(n,t,e,i,s){const{fullCircles:a,startAngle:l,circumference:c}=t;let h=t.endAngle;if(a){vg(n,t,e,i,h,s);for(let d=0;d<a;++d)n.fill();isNaN(c)||(h=l+(c%$e||$e))}return vg(n,t,e,i,h,s),n.fill(),h}function yU(n,t,e,i,s){const{fullCircles:a,startAngle:l,circumference:c,options:h}=t,{borderWidth:d,borderJoinStyle:m,borderDash:y,borderDashOffset:v,borderRadius:T}=h,w=h.borderAlign==="inner";if(!d)return;n.setLineDash(y||[]),n.lineDashOffset=v,w?(n.lineWidth=d*2,n.lineJoin=m||"round"):(n.lineWidth=d,n.lineJoin=m||"bevel");let A=t.endAngle;if(a){vg(n,t,e,i,A,s);for(let x=0;x<a;++x)n.stroke();isNaN(c)||(A=l+(c%$e||$e))}w&&dU(n,t,A),h.selfJoin&&A-l>=ve&&T===0&&m!=="miter"&&fU(n,t,A),a||(vg(n,t,e,i,A,s),n.stroke())}class sc extends Fc{constructor(e){super();Pt(this,"circumference");Pt(this,"endAngle");Pt(this,"fullCircles");Pt(this,"innerRadius");Pt(this,"outerRadius");Pt(this,"pixelMargin");Pt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const a=this.getProps(["x","y"],s),{angle:l,distance:c}=aD(a,{x:e,y:i}),{startAngle:h,endAngle:d,innerRadius:m,outerRadius:y,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),T=(this.options.spacing+this.options.borderWidth)/2,w=Qt(v,d-h),A=mg(l,h,d)&&h!==d,x=w>=$e||A,k=Eo(c,m+T,y+T);return x&&k}getCenterPoint(e){const{x:i,y:s,startAngle:a,endAngle:l,innerRadius:c,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:m}=this.options,y=(a+l)/2,v=(c+h+m+d)/2;return{x:i+Math.cos(y)*v,y:s+Math.sin(y)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,a=(i.offset||0)/4,l=(i.spacing||0)/2,c=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>$e?Math.floor(s/$e):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const h=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(h)*a,Math.sin(h)*a);const d=1-Math.sin(Math.min(ve,s||0)),m=a*d;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,pU(e,this,m,l,c),yU(e,this,m,l,c),e.restore()}}Pt(sc,"id","arc"),Pt(sc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Pt(sc,"defaultRoutes",{backgroundColor:"backgroundColor"}),Pt(sc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function ND(n,t){const{x:e,y:i,base:s,width:a,height:l}=n.getProps(["x","y","base","width","height"],t);let c,h,d,m,y;return n.horizontal?(y=l/2,c=Math.min(e,s),h=Math.max(e,s),d=i-y,m=i+y):(y=a/2,c=e-y,h=e+y,d=Math.min(i,s),m=Math.max(i,s)),{left:c,top:d,right:h,bottom:m}}function ea(n,t,e,i){return n?0:Hn(t,e,i)}function _U(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,a=pD(i);return{t:ea(s.top,a.top,0,e),r:ea(s.right,a.right,0,t),b:ea(s.bottom,a.bottom,0,e),l:ea(s.left,a.left,0,t)}}function vU(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,a=fc(s),l=Math.min(t,e),c=n.borderSkipped,h=i||Zt(s);return{topLeft:ea(!h||c.top||c.left,a.topLeft,0,l),topRight:ea(!h||c.top||c.right,a.topRight,0,l),bottomLeft:ea(!h||c.bottom||c.left,a.bottomLeft,0,l),bottomRight:ea(!h||c.bottom||c.right,a.bottomRight,0,l)}}function bU(n){const t=ND(n),e=t.right-t.left,i=t.bottom-t.top,s=_U(n,e/2,i/2),a=vU(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:a},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function nv(n,t,e,i){const s=t===null,a=e===null,c=n&&!(s&&a)&&ND(n,i);return c&&(s||Eo(t,c.left,c.right))&&(a||Eo(e,c.top,c.bottom))}function TU(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function EU(n,t){n.rect(t.x,t.y,t.w,t.h)}function iv(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,a=(n.x+n.w!==e.x+e.w?t:0)-i,l=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+a,h:n.h+l,radius:n.radius}}class Hm extends Fc{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:a,outer:l}=bU(this),c=TU(l.radius)?pg:EU;t.save(),(l.w!==a.w||l.h!==a.h)&&(t.beginPath(),c(t,iv(l,e,a)),t.clip(),c(t,iv(a,-e,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),c(t,iv(a,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return nv(this,t,e,i)}inXRange(t,e){return nv(this,t,null,e)}inYRange(t,e){return nv(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(e+s)/2:e,y:a?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Pt(Hm,"id","bar"),Pt(Hm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Pt(Hm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Kx=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},SU=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class $x extends Fc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=_e(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=qn(i.font),a=s.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=Kx(i,a);let d,m;e.font=s.string,this.isHorizontal()?(d=this.maxWidth,m=this._fitRows(l,a,c,h)+10):(m=this.maxHeight,d=this._fitCols(l,s,c,h)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:a,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.lineWidths=[0],m=s+c;let y=t;a.textAlign="left",a.textBaseline="middle";let v=-1,T=-m;return this.legendItems.forEach((w,A)=>{const x=i+e/2+a.measureText(w.text).width;(A===0||d[d.length-1]+x+2*c>l)&&(y+=m,d[d.length-(A>0?0:1)]=0,T+=m,v++),h[A]={left:0,top:T,row:v,width:x,height:s},d[d.length-1]+=x+c}),y}_fitCols(t,e,i,s){const{ctx:a,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.columnSizes=[],m=l-t;let y=c,v=0,T=0,w=0,A=0;return this.legendItems.forEach((x,k)=>{const{itemWidth:L,itemHeight:U}=wU(i,e,a,x,s);k>0&&T+U+2*c>m&&(y+=v+c,d.push({width:v,height:T}),w+=v+c,A++,v=T=0),h[k]={left:w,top:T,col:A,width:L,height:U},v=Math.max(v,L),T+=U+c}),y+=v,d.push({width:v,height:T}),y}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:a}}=this,l=dc(a,this.left,this.width);if(this.isHorizontal()){let c=0,h=si(i,this.left+s,this.right-this.lineWidths[c]);for(const d of e)c!==d.row&&(c=d.row,h=si(i,this.left+s,this.right-this.lineWidths[c])),d.top+=this.top+t+s,d.left=l.leftForLtr(l.x(h),d.width),h+=d.width+s}else{let c=0,h=si(i,this.top+t+s,this.bottom-this.columnSizes[c].height);for(const d of e)d.col!==c&&(c=d.col,h=si(i,this.top+t+s,this.bottom-this.columnSizes[c].height)),d.top=h,d.left+=this.left+s,d.left=l.leftForLtr(l.x(d.left),d.width),h+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;D0(t,this),this._draw(),M0(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:a,labels:l}=t,c=Le.color,h=dc(t.rtl,this.left,this.width),d=qn(l.font),{padding:m}=l,y=d.size,v=y/2;let T;this.drawTitle(),s.textAlign=h.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:w,boxHeight:A,itemHeight:x}=Kx(l,y),k=function(nt,O,I){if(isNaN(w)||w<=0||isNaN(A)||A<0)return;s.save();const C=Qt(I.lineWidth,1);if(s.fillStyle=Qt(I.fillStyle,c),s.lineCap=Qt(I.lineCap,"butt"),s.lineDashOffset=Qt(I.lineDashOffset,0),s.lineJoin=Qt(I.lineJoin,"miter"),s.lineWidth=C,s.strokeStyle=Qt(I.strokeStyle,c),s.setLineDash(Qt(I.lineDash,[])),l.usePointStyle){const P={radius:A*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:C},V=h.xPlus(nt,w/2),F=O+v;mD(s,P,V,F,l.pointStyleWidth&&w)}else{const P=O+Math.max((y-A)/2,0),V=h.leftForLtr(nt,w),F=fc(I.borderRadius);s.beginPath(),Object.values(F).some(N=>N!==0)?pg(s,{x:V,y:P,w,h:A,radius:F}):s.rect(V,P,w,A),s.fill(),C!==0&&s.stroke()}s.restore()},L=function(nt,O,I){gg(s,I.text,nt,O+x/2,d,{strikethrough:I.hidden,textAlign:h.textAlign(I.textAlign)})},U=this.isHorizontal(),K=this._computeTitleHeight();U?T={x:si(a,this.left+m,this.right-i[0]),y:this.top+m+K,line:0}:T={x:this.left+m,y:si(a,this.top+K+m,this.bottom-e[0].height),line:0},TD(this.ctx,t.textDirection);const z=x+m;this.legendItems.forEach((nt,O)=>{s.strokeStyle=nt.fontColor,s.fillStyle=nt.fontColor;const I=s.measureText(nt.text).width,C=h.textAlign(nt.textAlign||(nt.textAlign=l.textAlign)),P=w+v+I;let V=T.x,F=T.y;h.setWidth(this.width),U?O>0&&V+P+m>this.right&&(F=T.y+=z,T.line++,V=T.x=si(a,this.left+m,this.right-i[T.line])):O>0&&F+z>this.bottom&&(V=T.x=V+e[T.line].width+m,T.line++,F=T.y=si(a,this.top+K+m,this.bottom-e[T.line].height));const N=h.x(V);if(k(N,F,nt),V=$L(C,V+w+v,U?V+P:this.right,t.rtl),L(h.x(V),F,nt),U)T.x+=P+m;else if(typeof nt.text!="string"){const At=d.lineHeight;T.y+=VD(nt,At)+m}else T.y+=z}),ED(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=qn(e.font),s=Ui(e.padding);if(!e.display)return;const a=dc(t.rtl,this.left,this.width),l=this.ctx,c=e.position,h=i.size/2,d=s.top+h;let m,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),m=this.top+d,y=si(t.align,y,this.right-v);else{const w=this.columnSizes.reduce((A,x)=>Math.max(A,x.height),0);m=d+si(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const T=si(c,y,y+v);l.textAlign=a.textAlign(hD(c)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,gg(l,e.text,T,m,i)}_computeTitleHeight(){const t=this.options.title,e=qn(t.font),i=Ui(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,a;if(Eo(t,this.left,this.right)&&Eo(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],Eo(t,s.left,s.left+s.width)&&Eo(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!IU(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,a=SU(s,i);s&&!a&&_e(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!a&&_e(e.onHover,[t,i,this],this)}else i&&_e(e.onClick,[t,i,this],this)}}function wU(n,t,e,i,s){const a=AU(i,n,t,e),l=xU(s,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function AU(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,l)=>a.length>l.length?a:l)),t+e.size/2+i.measureText(s).width}function xU(n,t,e){let i=n;return typeof t.text!="string"&&(i=VD(t,e)),i}function VD(n,t){const e=n.text?n.text.length:0;return t*e}function IU(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var LD={id:"legend",_element:$x,start(n,t,e){const i=n.legend=new $x({ctx:n.ctx,options:e,chart:n});ta.configure(n,i,e),ta.addBox(n,i)},stop(n){ta.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;ta.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:a,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const d=h.controller.getStyle(e?0:void 0),m=Ui(d.borderWidth);return{text:t[h.index].label,fillStyle:d.backgroundColor,fontColor:a,hidden:!h.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:l&&(c||d.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Ah={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,a=0;for(t=0,e=n.length;t<e;++t){const c=n[t].element;if(c&&c.hasValue()){const h=c.tooltipPosition();i.add(h.x),s+=h.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((c,h)=>c+h)/i.size,y:s/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,a,l,c;for(a=0,l=n.length;a<l;++a){const h=n[a].element;if(h&&h.hasValue()){const d=h.getCenterPoint(),m=FL(t,d);m<s&&(s=m,c=h)}}if(c){const h=c.tooltipPosition();e=h.x,i=h.y}return{x:e,y:i}}};function as(n,t){return t&&(fn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Zs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function RU(n,t){const{element:e,datasetIndex:i,index:s}=t,a=n.getDatasetMeta(i).controller,{label:l,value:c}=a.getLabelAndValue(s);return{chart:n,label:l,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:c,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Wx(n,t){const e=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:l,boxHeight:c}=t,h=qn(t.bodyFont),d=qn(t.titleFont),m=qn(t.footerFont),y=a.length,v=s.length,T=i.length,w=Ui(t.padding);let A=w.height,x=0,k=i.reduce((K,z)=>K+z.before.length+z.lines.length+z.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,y&&(A+=y*d.lineHeight+(y-1)*t.titleSpacing+t.titleMarginBottom),k){const K=t.displayColors?Math.max(c,h.lineHeight):h.lineHeight;A+=T*K+(k-T)*h.lineHeight+(k-1)*t.bodySpacing}v&&(A+=t.footerMarginTop+v*m.lineHeight+(v-1)*t.footerSpacing);let L=0;const U=function(K){x=Math.max(x,e.measureText(K).width+L)};return e.save(),e.font=d.string,ae(n.title,U),e.font=h.string,ae(n.beforeBody.concat(n.afterBody),U),L=t.displayColors?l+2+t.boxPadding:0,ae(i,K=>{ae(K.before,U),ae(K.lines,U),ae(K.after,U)}),L=0,e.font=m.string,ae(n.footer,U),e.restore(),x+=w.width,{width:x,height:A}}function CU(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function DU(n,t,e,i){const{x:s,width:a}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&s+a+l>t.width||n==="right"&&s-a-l<0)return!0}function MU(n,t,e,i){const{x:s,width:a}=e,{width:l,chartArea:{left:c,right:h}}=n;let d="center";return i==="center"?d=s<=(c+h)/2?"left":"right":s<=a/2?d="left":s>=l-a/2&&(d="right"),DU(d,n,t,e)&&(d="center"),d}function Yx(n,t,e){const i=e.yAlign||t.yAlign||CU(n,e);return{xAlign:e.xAlign||t.xAlign||MU(n,t,e,i),yAlign:i}}function PU(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function OU(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function Xx(n,t,e,i){const{caretSize:s,caretPadding:a,cornerRadius:l}=n,{xAlign:c,yAlign:h}=e,d=s+a,{topLeft:m,topRight:y,bottomLeft:v,bottomRight:T}=fc(l);let w=PU(t,c);const A=OU(t,h,d);return h==="center"?c==="left"?w+=d:c==="right"&&(w-=d):c==="left"?w-=Math.max(m,v)+s:c==="right"&&(w+=Math.max(y,T)+s),{x:Hn(w,0,i.width-t.width),y:Hn(A,0,i.height-t.height)}}function Am(n,t,e){const i=Ui(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Qx(n){return as([],Zs(n))}function kU(n,t,e){return jc(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Zx(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const BD={beforeTitle:Xs,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Xs,beforeBody:Xs,beforeLabel:Xs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ge(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Xs,afterBody:Xs,beforeFooter:Xs,footer:Xs,afterFooter:Xs};function Fn(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?BD[t].call(e,i):s}class fb extends Fc{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,a=new SD(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=kU(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Fn(i,"beforeTitle",this,t),a=Fn(i,"title",this,t),l=Fn(i,"afterTitle",this,t);let c=[];return c=as(c,Zs(s)),c=as(c,Zs(a)),c=as(c,Zs(l)),c}getBeforeBody(t,e){return Qx(Fn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return ae(t,a=>{const l={before:[],lines:[],after:[]},c=Zx(i,a);as(l.before,Zs(Fn(c,"beforeLabel",this,a))),as(l.lines,Fn(c,"label",this,a)),as(l.after,Zs(Fn(c,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(t,e){return Qx(Fn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Fn(i,"beforeFooter",this,t),a=Fn(i,"footer",this,t),l=Fn(i,"afterFooter",this,t);let c=[];return c=as(c,Zs(s)),c=as(c,Zs(a)),c=as(c,Zs(l)),c}_createItems(t){const e=this._active,i=this.chart.data,s=[],a=[],l=[];let c=[],h,d;for(h=0,d=e.length;h<d;++h)c.push(RU(this.chart,e[h]));return t.filter&&(c=c.filter((m,y,v)=>t.filter(m,y,v,i))),t.itemSort&&(c=c.sort((m,y)=>t.itemSort(m,y,i))),ae(c,m=>{const y=Zx(t.callbacks,m);s.push(Fn(y,"labelColor",this,m)),a.push(Fn(y,"labelPointStyle",this,m)),l.push(Fn(y,"labelTextColor",this,m))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=c,c}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const c=Ah[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=Wx(this,i),d=Object.assign({},c,h),m=Yx(this.chart,i,d),y=Xx(i,d,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,a={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const a=this.getCaretPosition(t,i,s);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:c}=i,{topLeft:h,topRight:d,bottomLeft:m,bottomRight:y}=fc(c),{x:v,y:T}=t,{width:w,height:A}=e;let x,k,L,U,K,z;return a==="center"?(K=T+A/2,s==="left"?(x=v,k=x-l,U=K+l,z=K-l):(x=v+w,k=x+l,U=K-l,z=K+l),L=x):(s==="left"?k=v+Math.max(h,m)+l:s==="right"?k=v+w-Math.max(d,y)-l:k=this.caretX,a==="top"?(U=T,K=U-l,x=k-l,L=k+l):(U=T+A,K=U+l,x=k+l,L=k-l),z=U),{x1:x,x2:k,x3:L,y1:U,y2:K,y3:z}}drawTitle(t,e,i){const s=this.title,a=s.length;let l,c,h;if(a){const d=dc(i.rtl,this.x,this.width);for(t.x=Am(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",l=qn(i.titleFont),c=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,h=0;h<a;++h)e.fillText(s[h],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+c,h+1===a&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,e,i,s,a){const l=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:h,boxWidth:d}=a,m=qn(a.bodyFont),y=Am(this,"left",a),v=s.x(y),T=h<m.lineHeight?(m.lineHeight-h)/2:0,w=e.y+T;if(a.usePointStyle){const A={radius:Math.min(d,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=s.leftForLtr(v,d)+d/2,k=w+h/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,dx(t,A,x,k),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,dx(t,A,x,k)}else{t.lineWidth=Zt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const A=s.leftForLtr(v,d),x=s.leftForLtr(s.xPlus(v,1),d-2),k=fc(l.borderRadius);Object.values(k).some(L=>L!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,pg(t,{x:A,y:w,w:d,h,radius:k}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),pg(t,{x,y:w+1,w:d-2,h:h-2,radius:k}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(A,w,d,h),t.strokeRect(A,w,d,h),t.fillStyle=l.backgroundColor,t.fillRect(x,w+1,d-2,h-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:d,boxPadding:m}=i,y=qn(i.bodyFont);let v=y.lineHeight,T=0;const w=dc(i.rtl,this.x,this.width),A=function(I){e.fillText(I,w.x(t.x+T),t.y+v/2),t.y+=v+a},x=w.textAlign(l);let k,L,U,K,z,nt,O;for(e.textAlign=l,e.textBaseline="middle",e.font=y.string,t.x=Am(this,x,i),e.fillStyle=i.bodyColor,ae(this.beforeBody,A),T=c&&x!=="right"?l==="center"?d/2+m:d+2+m:0,K=0,nt=s.length;K<nt;++K){for(k=s[K],L=this.labelTextColors[K],e.fillStyle=L,ae(k.before,A),U=k.lines,c&&U.length&&(this._drawColorBox(e,t,K,w,i),v=Math.max(y.lineHeight,h)),z=0,O=U.length;z<O;++z)A(U[z]),v=y.lineHeight;ae(k.after,A)}T=0,v=y.lineHeight,ae(this.afterBody,A),t.y-=a}drawFooter(t,e,i){const s=this.footer,a=s.length;let l,c;if(a){const h=dc(i.rtl,this.x,this.width);for(t.x=Am(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=h.textAlign(i.footerAlign),e.textBaseline="middle",l=qn(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,c=0;c<a;++c)e.fillText(s[c],h.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:a,yAlign:l}=this,{x:c,y:h}=t,{width:d,height:m}=i,{topLeft:y,topRight:v,bottomLeft:T,bottomRight:w}=fc(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(c+y,h),l==="top"&&this.drawCaret(t,e,i,s),e.lineTo(c+d-v,h),e.quadraticCurveTo(c+d,h,c+d,h+v),l==="center"&&a==="right"&&this.drawCaret(t,e,i,s),e.lineTo(c+d,h+m-w),e.quadraticCurveTo(c+d,h+m,c+d-w,h+m),l==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(c+T,h+m),e.quadraticCurveTo(c,h+m,c,h+m-T),l==="center"&&a==="left"&&this.drawCaret(t,e,i,s),e.lineTo(c,h+y),e.quadraticCurveTo(c,h,c+y,h),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=Ah[t.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=Wx(this,t),h=Object.assign({},l,this._size),d=Yx(e,t,h),m=Xx(t,h,d,e);(s._to!==m.x||a._to!==m.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Ui(e.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,s,e),TD(t,e.textDirection),a.y+=l.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),ED(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:c,index:h})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[h],index:h}}),a=!ug(i,s),l=this._positionChanged(s,e);(a||l)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(t,a,e,i),c=this._positionChanged(l,t),h=e||!ug(l,a)||c;return h&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),h}_getActiveElements(t,e,i,s){const a=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:s,options:a}=this,l=Ah[a.position].call(this,t,e);return l!==!1&&(i!==l.x||s!==l.y)}}Pt(fb,"positioners",Ah);var UD={id:"tooltip",_element:fb,positioners:Ah,afterInit(n,t,e){e&&(n.tooltip=new fb({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:BD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const NU=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function VU(n,t,e,i){const s=n.indexOf(t);if(s===-1)return NU(n,t,e,i);const a=n.lastIndexOf(t);return s!==a?e:s}const LU=(n,t)=>n===null?null:Hn(Math.round(n),0,t);function Jx(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class db extends zc{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:a}of e)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ge(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:VU(i,t,Qt(e,t),this._addedLabels),LU(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=e;l++)s.push({value:l});return s}getLabelForValue(t){return Jx.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Pt(db,"id","category"),Pt(db,"defaults",{ticks:{callback:Jx}});function BU(n,t){const e=[],{bounds:s,step:a,min:l,max:c,precision:h,count:d,maxTicks:m,maxDigits:y,includeBounds:v}=n,T=a||1,w=m-1,{min:A,max:x}=t,k=!ge(l),L=!ge(c),U=!ge(d),K=(x-A)/(y+1);let z=sx((x-A)/w/T)*T,nt,O,I,C;if(z<1e-14&&!k&&!L)return[{value:A},{value:x}];C=Math.ceil(x/z)-Math.floor(A/z),C>w&&(z=sx(C*z/w/T)*T),ge(h)||(nt=Math.pow(10,h),z=Math.ceil(z*nt)/nt),s==="ticks"?(O=Math.floor(A/z)*z,I=Math.ceil(x/z)*z):(O=A,I=x),k&&L&&a&&BL((c-l)/a,z/1e3)?(C=Math.round(Math.min((c-l)/z,m)),z=(c-l)/C,O=l,I=c):U?(O=k?l:O,I=L?c:I,C=d-1,z=(I-O)/C):(C=(I-O)/z,Um(C,Math.round(C),z/1e3)?C=Math.round(C):C=Math.ceil(C));const P=Math.max(rx(z),rx(O));nt=Math.pow(10,ge(h)?P:h),O=Math.round(O*nt)/nt,I=Math.round(I*nt)/nt;let V=0;for(k&&(v&&O!==l?(e.push({value:l}),O<l&&V++,Um(Math.round((O+V*z)*nt)/nt,l,t1(l,K,n))&&V++):O<l&&V++);V<C;++V){const F=Math.round((O+V*z)*nt)/nt;if(L&&F>c)break;e.push({value:F})}return L&&v&&I!==c?e.length&&Um(e[e.length-1].value,c,t1(c,K,n))?e[e.length-1].value=c:e.push({value:c}):(!L||I===c)&&e.push({value:I}),e}function t1(n,t,{horizontal:e,minRotation:i}){const s=tr(i),a=(e?Math.sin(s):Math.cos(s))||.001,l=.75*t*(""+n).length;return Math.min(t/a,l)}class UU extends zc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ge(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const l=h=>s=e?s:h,c=h=>a=i?a:h;if(t){const h=sa(s),d=sa(a);h<0&&d<0?c(0):h>0&&d>0&&l(0)}if(s===a){let h=a===0?1:Math.abs(a*.05);c(a+h),t||l(s-h)}this.min=s,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,l=BU(s,a);return t.bounds==="ticks"&&UL(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return C0(t,this.chart.options.locale,this.options.ticks.format)}}class mb extends UU{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ci(t)?t:0,this.max=Ci(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=tr(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Pt(mb,"id","linear"),Pt(mb,"defaults",{ticks:{callback:dD.formatters.numeric}});const np={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zn=Object.keys(np);function e1(n,t){return n-t}function n1(n,t){if(ge(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Ci(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(s&&(l=s==="week"&&(dg(a)||a===!0)?e.startOf(l,"isoWeek",a):e.startOf(l,s)),+l)}function i1(n,t,e,i){const s=zn.length;for(let a=zn.indexOf(n);a<s-1;++a){const l=np[zn[a]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(c*l.size))<=i)return zn[a]}return zn[s-1]}function jU(n,t,e,i,s){for(let a=zn.length-1;a>=zn.indexOf(e);a--){const l=zn[a];if(np[l].common&&n._adapter.diff(s,i,l)>=t-1)return l}return zn[e?zn.indexOf(e):0]}function FU(n){for(let t=zn.indexOf(n)+1,e=zn.length;t<e;++t)if(np[zn[t]].common)return zn[t]}function s1(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=R0(e,t),a=e[i]>=t?e[i]:e[s];n[a]=!0}}function zU(n,t,e,i){const s=n._adapter,a=+s.startOf(t[0].value,i),l=t[t.length-1].value;let c,h;for(c=a;c<=l;c=+s.add(c,1,i))h=e[c],h>=0&&(t[h].major=!0);return t}function r1(n,t,e){const i=[],s={},a=t.length;let l,c;for(l=0;l<a;++l)c=t[l],s[c]=l,i.push({value:c,major:!1});return a===0||!e?i:zU(n,i,s,e)}class bg extends zc{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new iB._date(t.adapters.date);s.init(e),kh(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:n1(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:c}=this.getUserBounds();function h(d){!l&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!l||!c)&&(h(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&h(this.getMinMax(!1))),s=Ci(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),a=Ci(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,l=this.max,c=qL(s,a,l);return this._unit=e.unit||(i.autoSkip?i1(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):jU(this,c.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:FU(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),r1(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,a;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=Hn(e,0,l),i=Hn(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||i1(a.minUnit,e,i,this._getLabelCapacity(e)),c=Qt(s.ticks.stepSize,1),h=l==="week"?a.isoWeekday:!1,d=dg(h)||h===!0,m={};let y=e,v,T;if(d&&(y=+t.startOf(y,"isoWeek",h)),y=+t.startOf(y,d?"day":l),t.diff(i,e,l)>1e5*c)throw new Error(e+" and "+i+" are too far apart with stepSize of "+c+" "+l);const w=s.ticks.source==="data"&&this.getDataTimestamps();for(v=y,T=0;v<i;v=+t.add(v,c,l),T++)s1(m,v,w);return(v===i||s.bounds==="ticks"||T===1)&&s1(m,v,w),Object.keys(m).sort(e1).map(A=>+A)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,a=this._unit,l=e||s[a];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,s){const a=this.options,l=a.ticks.callback;if(l)return _e(l,[t,e,i],this);const c=a.time.displayFormats,h=this._unit,d=this._majorUnit,m=h&&c[h],y=d&&c[d],v=i[e],T=d&&y&&v&&v.major;return this._adapter.format(t,s||(T?y:m))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=tr(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(s),l=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*a+c*l,h:i*l+c*a}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,a=this._tickFormatFunction(t,0,r1(this,[t],this._majorUnit),s),l=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(n1(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lD(t.sort(e1))}}Pt(bg,"id","time"),Pt(bg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xm(n,t,e){let i=0,s=n.length-1,a,l,c,h;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=lb(n,"pos",t)),{pos:a,time:c}=n[i],{pos:l,time:h}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=lb(n,"time",t)),{time:a,pos:c}=n[i],{time:l,pos:h}=n[s]);const d=l-a;return d?c+(h-c)*(t-a)/d:c}class a1 extends bg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=xm(e,this.min),this._tableRange=xm(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],a=[];let l,c,h,d,m;for(l=0,c=t.length;l<c;++l)d=t[l],d>=e&&d<=i&&s.push(d);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,c=s.length;l<c;++l)m=s[l+1],h=s[l-1],d=s[l],Math.round((m+h)/2)!==d&&a.push({time:d,pos:l/(c-1)});return a}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(xm(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return xm(this._table,i*this._tableRange+this._minPos,!0)}}Pt(a1,"id","timeseries"),Pt(a1,"defaults",bg.defaults);const jD="label";function o1(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function HU(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function FD(n,t){n.labels=t}function zD(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jD;const i=[];n.datasets=t.map(s=>{const a=n.datasets.find(l=>l[e]===s[e]);return!a||!s.data||i.includes(a)?{...s}:(i.push(a),Object.assign(a,s),a)})}function qU(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jD;const e={labels:[],datasets:[]};return FD(e,n.labels),zD(e,n.datasets,t),e}function GU(n,t){const{height:e=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:l,data:c,options:h,plugins:d=[],fallbackContent:m,updateMode:y,...v}=n,T=dt.useRef(null),w=dt.useRef(null),A=()=>{T.current&&(w.current=new Hc(T.current,{type:l,data:qU(c,a),options:h&&{...h},plugins:d}),o1(t,w.current))},x=()=>{o1(t,null),w.current&&(w.current.destroy(),w.current=null)};return dt.useEffect(()=>{!s&&w.current&&h&&HU(w.current,h)},[s,h]),dt.useEffect(()=>{!s&&w.current&&FD(w.current.config.data,c.labels)},[s,c.labels]),dt.useEffect(()=>{!s&&w.current&&c.datasets&&zD(w.current.config.data,c.datasets,a)},[s,c.datasets]),dt.useEffect(()=>{w.current&&(s?(x(),setTimeout(A)):w.current.update(y))},[s,h,c.labels,c.datasets,y]),dt.useEffect(()=>{w.current&&(x(),setTimeout(A))},[l]),dt.useEffect(()=>(A(),()=>x()),[]),S0.createElement("canvas",{ref:T,role:"img",height:e,width:i,...v},m)}const KU=dt.forwardRef(GU);function HD(n,t){return Hc.register(t),dt.forwardRef((e,i)=>S0.createElement(KU,{...e,ref:i,type:n}))}const $U=HD("bar",jm),qD=HD("doughnut",Sh);Hc.register(Hm,db,mb);function GD({meals:n,startOfWeek:t}){const e=()=>{const l=[];for(let c=0;c<7;c++){const h=new Date(t);h.setDate(t.getDate()+c),l.push(h.toISOString().split("T")[0])}return l},s={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories",data:e().map(c=>{let h=0;return n.filter(d=>d.date===c).forEach(d=>{d.foodItems.forEach(m=>{m.nutrients.forEach(y=>{const v=parseFloat(y.total)||0;(y.type==="Carbohydrate"||y.type==="Protein")&&(h+=v*4),y.type==="Fat"&&(h+=v*9)})})}),Math.round(h)}),backgroundColor:"deepskyblue"}]},a={plugins:{tooltip:{enabled:!0},legend:{display:!1}},scales:{y:{ticks:{color:"white"},grid:{color:"#444"}},x:{ticks:{color:"white"},grid:{color:"#444"}}}};return B.jsx($U,{data:s,options:a})}Hc.register(sc,UD,LD);function KD({meals:n,selectedDate:t,goal:e=2e3}){const i=t||new Date().toISOString().split("T")[0],a=n.filter(m=>m.date===i).reduce((m,y)=>(y.foodItems.forEach(v=>{v.nutrients.forEach(T=>{const w=parseFloat(T.total)||0;(T.type==="Carbohydrate"||T.type==="Protein")&&(m+=w*4),T.type==="Fat"&&(m+=w*9)})}),m),0),l=Math.round(a),c=e-l,h={labels:["Calories Consumed"],datasets:[{data:[a,c>0?c:0],backgroundColor:["deepskyblue","#a9c9f8ff"],borderWidth:0}]},d={cutout:"85%",plugins:{legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:12,weight:"bold"},padding:15,boxWidth:10,boxHeight:10}}}};return B.jsxs("div",{className:"donut-chart",style:{position:"relative"},children:[B.jsx(qD,{data:h,options:d}),B.jsx("div",{className:"DonutWordings",children:c>0?`${c} Remaining`:"Goal Reached"})]})}Hc.register(sc,UD,LD);function $D({meals:n,selectedDate:t}){const e=t||new Date().toISOString().split("T")[0],i=n.filter(T=>T.date===e),s={};i.forEach(T=>{T.foodItems.forEach(w=>{w.nutrients.forEach(A=>{const x=parseFloat(A.total)||0;s[A.type]=(s[A.type]||0)+x})})});const a=s.Protein||0,l=s.Fat||0,c=s.Carbohydrate||0,h=s["Carbs as Sugar"]||0,d=Object.entries(s).filter(([T])=>!["Protein","Fat","Carbohydrate","Carbs as Sugar"].includes(T)).reduce((T,[,w])=>T+w,0),m=[];a>0&&m.push({label:"Protein",value:a,color:"#4CAF50"}),l>0&&m.push({label:"Fat",value:l,color:"#FF9800"}),c>0&&m.push({label:"Carbohydrate",value:c,color:"#03A9F4"}),h>0&&m.push({label:"Carbs as Sugar",value:h,color:"teal"}),d>0&&m.push({label:"Others",value:d,color:"gray"});const y={labels:m.map(T=>T.label),datasets:[{data:m.map(T=>T.value),backgroundColor:m.map(T=>T.color),borderWidth:0}]},v={cutout:"85%",plugins:{tooltip:{enabled:!0},legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:8,weight:"bold"},padding:5,boxWidth:5,boxHeight:5}}}};return B.jsx("div",{className:"donut-chart",style:{position:"relative"},children:B.jsx(qD,{data:y,options:v})})}const WU="Left",YU="Right",XU="Up",QU="Down",rc={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},gb={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},l1="mousemove",c1="mouseup",ZU="touchend",JU="touchmove",tj="touchstart";function ej(n,t,e,i){return n>t?e>0?YU:WU:i>0?QU:XU}function u1(n,t){if(t===0)return n;const e=Math.PI/180*t,i=n[0]*Math.cos(e)+n[1]*Math.sin(e),s=n[1]*Math.cos(e)-n[0]*Math.sin(e);return[i,s]}function nj(n,t){const e=m=>{const y="touches"in m;y&&m.touches.length>1||n((v,T)=>{T.trackMouse&&!y&&(document.addEventListener(l1,i),document.addEventListener(c1,l));const{clientX:w,clientY:A}=y?m.touches[0]:m,x=u1([w,A],T.rotationAngle);return T.onTouchStartOrOnMouseDown&&T.onTouchStartOrOnMouseDown({event:m}),Object.assign(Object.assign(Object.assign({},v),gb),{initial:x.slice(),xy:x,start:m.timeStamp||0})})},i=m=>{n((y,v)=>{const T="touches"in m;if(T&&m.touches.length>1)return y;if(m.timeStamp-y.start>v.swipeDuration)return y.swiping?Object.assign(Object.assign({},y),{swiping:!1}):y;const{clientX:w,clientY:A}=T?m.touches[0]:m,[x,k]=u1([w,A],v.rotationAngle),L=x-y.xy[0],U=k-y.xy[1],K=Math.abs(L),z=Math.abs(U),nt=(m.timeStamp||0)-y.start,O=Math.sqrt(K*K+z*z)/(nt||1),I=[L/(nt||1),U/(nt||1)],C=ej(K,z,L,U),P=typeof v.delta=="number"?v.delta:v.delta[C.toLowerCase()]||rc.delta;if(K<P&&z<P&&!y.swiping)return y;const V={absX:K,absY:z,deltaX:L,deltaY:U,dir:C,event:m,first:y.first,initial:y.initial,velocity:O,vxvy:I};V.first&&v.onSwipeStart&&v.onSwipeStart(V),v.onSwiping&&v.onSwiping(V);let F=!1;return(v.onSwiping||v.onSwiped||v[`onSwiped${C}`])&&(F=!0),F&&v.preventScrollOnSwipe&&v.trackTouch&&m.cancelable&&m.preventDefault(),Object.assign(Object.assign({},y),{first:!1,eventData:V,swiping:!0})})},s=m=>{n((y,v)=>{let T;if(y.swiping&&y.eventData){if(m.timeStamp-y.start<v.swipeDuration){T=Object.assign(Object.assign({},y.eventData),{event:m}),v.onSwiped&&v.onSwiped(T);const w=v[`onSwiped${T.dir}`];w&&w(T)}}else v.onTap&&v.onTap({event:m});return v.onTouchEndOrOnMouseUp&&v.onTouchEndOrOnMouseUp({event:m}),Object.assign(Object.assign(Object.assign({},y),gb),{eventData:T})})},a=()=>{document.removeEventListener(l1,i),document.removeEventListener(c1,l)},l=m=>{a(),s(m)},c=(m,y)=>{let v=()=>{};if(m&&m.addEventListener){const T=Object.assign(Object.assign({},rc.touchEventOptions),y.touchEventOptions),w=[[tj,e,T],[JU,i,Object.assign(Object.assign({},T),y.preventScrollOnSwipe?{passive:!1}:{})],[ZU,s,T]];w.forEach(([A,x,k])=>m.addEventListener(A,x,k)),v=()=>w.forEach(([A,x])=>m.removeEventListener(A,x))}return v},d={ref:m=>{m!==null&&n((y,v)=>{if(y.el===m)return y;const T={};return y.el&&y.el!==m&&y.cleanUpTouch&&(y.cleanUpTouch(),T.cleanUpTouch=void 0),v.trackTouch&&m&&(T.cleanUpTouch=c(m,v)),Object.assign(Object.assign(Object.assign({},y),{el:m}),T)})}};return t.trackMouse&&(d.onMouseDown=e),[d,c]}function ij(n,t,e,i){return!t.trackTouch||!n.el?(n.cleanUpTouch&&n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:void 0})):n.cleanUpTouch?t.preventScrollOnSwipe!==e.preventScrollOnSwipe||t.touchEventOptions.passive!==e.touchEventOptions.passive?(n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:i(n.el,t)})):n:Object.assign(Object.assign({},n),{cleanUpTouch:i(n.el,t)})}function sj(n){const{trackMouse:t}=n,e=dt.useRef(Object.assign({},gb)),i=dt.useRef(Object.assign({},rc)),s=dt.useRef(Object.assign({},i.current));s.current=Object.assign({},i.current),i.current=Object.assign(Object.assign({},rc),n);let a;for(a in rc)i.current[a]===void 0&&(i.current[a]=rc[a]);const[l,c]=dt.useMemo(()=>nj(h=>e.current=h(e.current,i.current),{trackMouse:t}),[t]);return e.current=ij(e.current,i.current,s.current,c),l}const WD=dt.createContext({});function rj(n){const t=dt.useRef(null);return t.current===null&&(t.current=n()),t.current}const U0=typeof window<"u",aj=U0?dt.useLayoutEffect:dt.useEffect,j0=dt.createContext(null);function F0(n,t){n.indexOf(t)===-1&&n.push(t)}function z0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const rr=(n,t,e)=>e>t?t:e<n?n:e;let H0=()=>{};const ar={},YD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function XD(n){return typeof n=="object"&&n!==null}const QD=n=>/^0[^.\s]+$/u.test(n);function q0(n){let t;return()=>(t===void 0&&(t=n()),t)}const Ii=n=>n,oj=(n,t)=>e=>t(n(e)),Cf=(...n)=>n.reduce(oj),rf=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class G0{constructor(){this.subscriptions=[]}add(t){return F0(this.subscriptions,t),()=>z0(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ds=n=>n*1e3,ms=n=>n/1e3;function ZD(n,t){return t?n*(1e3/t):0}const JD=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,lj=1e-7,cj=12;function uj(n,t,e,i,s){let a,l,c=0;do l=t+(e-t)/2,a=JD(l,i,s)-n,a>0?e=l:t=l;while(Math.abs(a)>lj&&++c<cj);return l}function Df(n,t,e,i){if(n===t&&e===i)return Ii;const s=a=>uj(a,0,1,n,e);return a=>a===0||a===1?a:JD(s(a),t,i)}const tM=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,eM=n=>t=>1-n(1-t),nM=Df(.33,1.53,.69,.99),K0=eM(nM),iM=tM(K0),sM=n=>(n*=2)<1?.5*K0(n):.5*(2-Math.pow(2,-10*(n-1))),$0=n=>1-Math.sin(Math.acos(n)),rM=eM($0),aM=tM($0),hj=Df(.42,0,1,1),fj=Df(0,0,.58,1),oM=Df(.42,0,.58,1),dj=n=>Array.isArray(n)&&typeof n[0]!="number",lM=n=>Array.isArray(n)&&typeof n[0]=="number",mj={linear:Ii,easeIn:hj,easeInOut:oM,easeOut:fj,circIn:$0,circInOut:aM,circOut:rM,backIn:K0,backInOut:iM,backOut:nM,anticipate:sM},gj=n=>typeof n=="string",h1=n=>{if(lM(n)){H0(n.length===4);const[t,e,i,s]=n;return Df(t,e,i,s)}else if(gj(n))return mj[n];return n},Im=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function pj(n,t){let e=new Set,i=new Set,s=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(m){l.has(m)&&(d.schedule(m),n()),m(c)}const d={schedule:(m,y=!1,v=!1)=>{const w=v&&s?e:i;return y&&l.add(m),w.has(m)||w.add(m),m},cancel:m=>{i.delete(m),l.delete(m)},process:m=>{if(c=m,s){a=!0;return}s=!0,[e,i]=[i,e],e.forEach(h),e.clear(),s=!1,a&&(a=!1,d.process(m))}};return d}const yj=40;function cM(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=Im.reduce((U,K)=>(U[K]=pj(a),U),{}),{setup:c,read:h,resolveKeyframes:d,preUpdate:m,update:y,preRender:v,render:T,postRender:w}=l,A=()=>{const U=ar.useManualTiming?s.timestamp:performance.now();e=!1,ar.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(U-s.timestamp,yj),1)),s.timestamp=U,s.isProcessing=!0,c.process(s),h.process(s),d.process(s),m.process(s),y.process(s),v.process(s),T.process(s),w.process(s),s.isProcessing=!1,e&&t&&(i=!1,n(A))},x=()=>{e=!0,i=!0,s.isProcessing||n(A)};return{schedule:Im.reduce((U,K)=>{const z=l[K];return U[K]=(nt,O=!1,I=!1)=>(e||x(),z.schedule(nt,O,I)),U},{}),cancel:U=>{for(let K=0;K<Im.length;K++)l[Im[K]].cancel(U)},state:s,steps:l}}const{schedule:Se,cancel:fa,state:vn,steps:sv}=cM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ii,!0);let qm;function _j(){qm=void 0}const Gn={now:()=>(qm===void 0&&Gn.set(vn.isProcessing||ar.useManualTiming?vn.timestamp:performance.now()),qm),set:n=>{qm=n,queueMicrotask(_j)}},uM=n=>t=>typeof t=="string"&&t.startsWith(n),W0=uM("--"),vj=uM("var(--"),Y0=n=>vj(n)?bj.test(n.split("/*")[0].trim()):!1,bj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},af={...qc,transform:n=>rr(0,1,n)},Rm={...qc,default:1},Lh=n=>Math.round(n*1e5)/1e5,X0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Tj(n){return n==null}const Ej=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Q0=(n,t)=>e=>!!(typeof e=="string"&&Ej.test(e)&&e.startsWith(n)||t&&!Tj(e)&&Object.prototype.hasOwnProperty.call(e,t)),hM=(n,t,e)=>i=>{if(typeof i!="string")return i;const[s,a,l,c]=i.match(X0);return{[n]:parseFloat(s),[t]:parseFloat(a),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},Sj=n=>rr(0,255,n),rv={...qc,transform:n=>Math.round(Sj(n))},So={test:Q0("rgb","red"),parse:hM("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+rv.transform(n)+", "+rv.transform(t)+", "+rv.transform(e)+", "+Lh(af.transform(i))+")"};function wj(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const pb={test:Q0("#"),parse:wj,transform:So.transform},Mf=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),$r=Mf("deg"),gs=Mf("%"),Ot=Mf("px"),Aj=Mf("vh"),xj=Mf("vw"),f1={...gs,parse:n=>gs.parse(n)/100,transform:n=>gs.transform(n*100)},ac={test:Q0("hsl","hue"),parse:hM("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+gs.transform(Lh(t))+", "+gs.transform(Lh(e))+", "+Lh(af.transform(i))+")"},Ke={test:n=>So.test(n)||pb.test(n)||ac.test(n),parse:n=>So.test(n)?So.parse(n):ac.test(n)?ac.parse(n):pb.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?So.transform(n):ac.transform(n),getAnimatableNone:n=>{const t=Ke.parse(n);return t.alpha=0,Ke.transform(t)}},Ij=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Rj(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(X0))==null?void 0:t.length)||0)+(((e=n.match(Ij))==null?void 0:e.length)||0)>0}const fM="number",dM="color",Cj="var",Dj="var(",d1="${}",Mj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function of(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},s=[];let a=0;const c=t.replace(Mj,h=>(Ke.test(h)?(i.color.push(a),s.push(dM),e.push(Ke.parse(h))):h.startsWith(Dj)?(i.var.push(a),s.push(Cj),e.push(h)):(i.number.push(a),s.push(fM),e.push(parseFloat(h))),++a,d1)).split(d1);return{values:e,split:c,indexes:i,types:s}}function mM(n){return of(n).values}function gM(n){const{split:t,types:e}=of(n),i=t.length;return s=>{let a="";for(let l=0;l<i;l++)if(a+=t[l],s[l]!==void 0){const c=e[l];c===fM?a+=Lh(s[l]):c===dM?a+=Ke.transform(s[l]):a+=s[l]}return a}}const Pj=n=>typeof n=="number"?0:Ke.test(n)?Ke.getAnimatableNone(n):n;function Oj(n){const t=mM(n);return gM(n)(t.map(Pj))}const da={test:Rj,parse:mM,createTransformer:gM,getAnimatableNone:Oj};function av(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function kj({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,a=0,l=0;if(!t)s=a=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,h=2*e-c;s=av(h,c,n+1/3),a=av(h,c,n),l=av(h,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function Tg(n,t){return e=>e>0?t:n}const Ae=(n,t,e)=>n+(t-n)*e,ov=(n,t,e)=>{const i=n*n,s=e*(t*t-i)+i;return s<0?0:Math.sqrt(s)},Nj=[pb,So,ac],Vj=n=>Nj.find(t=>t.test(n));function m1(n){const t=Vj(n);if(!t)return!1;let e=t.parse(n);return t===ac&&(e=kj(e)),e}const g1=(n,t)=>{const e=m1(n),i=m1(t);if(!e||!i)return Tg(n,t);const s={...e};return a=>(s.red=ov(e.red,i.red,a),s.green=ov(e.green,i.green,a),s.blue=ov(e.blue,i.blue,a),s.alpha=Ae(e.alpha,i.alpha,a),So.transform(s))},yb=new Set(["none","hidden"]);function Lj(n,t){return yb.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function Bj(n,t){return e=>Ae(n,t,e)}function Z0(n){return typeof n=="number"?Bj:typeof n=="string"?Y0(n)?Tg:Ke.test(n)?g1:Fj:Array.isArray(n)?pM:typeof n=="object"?Ke.test(n)?g1:Uj:Tg}function pM(n,t){const e=[...n],i=e.length,s=n.map((a,l)=>Z0(a)(a,t[l]));return a=>{for(let l=0;l<i;l++)e[l]=s[l](a);return e}}function Uj(n,t){const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=Z0(n[s])(n[s],t[s]));return s=>{for(const a in i)e[a]=i[a](s);return e}}function jj(n,t){const e=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],l=n.indexes[a][i[a]],c=n.values[l]??0;e[s]=c,i[a]++}return e}const Fj=(n,t)=>{const e=da.createTransformer(t),i=of(n),s=of(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?yb.has(n)&&!s.values.length||yb.has(t)&&!i.values.length?Lj(n,t):Cf(pM(jj(i,s),s.values),e):Tg(n,t)};function yM(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Ae(n,t,e):Z0(n)(n,t)}const zj=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Se.update(t,e),stop:()=>fa(t),now:()=>vn.isProcessing?vn.timestamp:Gn.now()}},_M=(n,t,e=10)=>{let i="";const s=Math.max(Math.round(t/e),2);for(let a=0;a<s;a++)i+=Math.round(n(a/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Eg=2e4;function J0(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<Eg;)t+=e,i=n.next(t);return t>=Eg?1/0:t}function Hj(n,t=100,e){const i=e({...n,keyframes:[0,t]}),s=Math.min(J0(i),Eg);return{type:"keyframes",ease:a=>i.next(s*a).value/t,duration:ms(s)}}const qj=5;function vM(n,t,e){const i=Math.max(t-qj,0);return ZD(e-n(i),t-i)}const De={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lv=.001;function Gj({duration:n=De.duration,bounce:t=De.bounce,velocity:e=De.velocity,mass:i=De.mass}){let s,a,l=1-t;l=rr(De.minDamping,De.maxDamping,l),n=rr(De.minDuration,De.maxDuration,ms(n)),l<1?(s=d=>{const m=d*l,y=m*n,v=m-e,T=_b(d,l),w=Math.exp(-y);return lv-v/T*w},a=d=>{const y=d*l*n,v=y*e+e,T=Math.pow(l,2)*Math.pow(d,2)*n,w=Math.exp(-y),A=_b(Math.pow(d,2),l);return(-s(d)+lv>0?-1:1)*((v-T)*w)/A}):(s=d=>{const m=Math.exp(-d*n),y=(d-e)*n+1;return-lv+m*y},a=d=>{const m=Math.exp(-d*n),y=(e-d)*(n*n);return m*y});const c=5/n,h=$j(s,a,c);if(n=ds(n),isNaN(h))return{stiffness:De.stiffness,damping:De.damping,duration:n};{const d=Math.pow(h,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:n}}}const Kj=12;function $j(n,t,e){let i=e;for(let s=1;s<Kj;s++)i=i-n(i)/t(i);return i}function _b(n,t){return n*Math.sqrt(1-t*t)}const Wj=["duration","bounce"],Yj=["stiffness","damping","mass"];function p1(n,t){return t.some(e=>n[e]!==void 0)}function Xj(n){let t={velocity:De.velocity,stiffness:De.stiffness,damping:De.damping,mass:De.mass,isResolvedFromDuration:!1,...n};if(!p1(n,Yj)&&p1(n,Wj))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),s=i*i,a=2*rr(.05,1,1-(n.bounce||0))*Math.sqrt(s);t={...t,mass:De.mass,stiffness:s,damping:a}}else{const e=Gj(n);t={...t,...e,mass:De.mass},t.isResolvedFromDuration=!0}return t}function Sg(n=De.visualDuration,t=De.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:s}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:d,mass:m,duration:y,velocity:v,isResolvedFromDuration:T}=Xj({...e,velocity:-ms(e.velocity||0)}),w=v||0,A=d/(2*Math.sqrt(h*m)),x=l-a,k=ms(Math.sqrt(h/m)),L=Math.abs(x)<5;i||(i=L?De.restSpeed.granular:De.restSpeed.default),s||(s=L?De.restDelta.granular:De.restDelta.default);let U;if(A<1){const z=_b(k,A);U=nt=>{const O=Math.exp(-A*k*nt);return l-O*((w+A*k*x)/z*Math.sin(z*nt)+x*Math.cos(z*nt))}}else if(A===1)U=z=>l-Math.exp(-k*z)*(x+(w+k*x)*z);else{const z=k*Math.sqrt(A*A-1);U=nt=>{const O=Math.exp(-A*k*nt),I=Math.min(z*nt,300);return l-O*((w+A*k*x)*Math.sinh(I)+z*x*Math.cosh(I))/z}}const K={calculatedDuration:T&&y||null,next:z=>{const nt=U(z);if(T)c.done=z>=y;else{let O=z===0?w:0;A<1&&(O=z===0?ds(w):vM(U,z,nt));const I=Math.abs(O)<=i,C=Math.abs(l-nt)<=s;c.done=I&&C}return c.value=c.done?l:nt,c},toString:()=>{const z=Math.min(J0(K),Eg),nt=_M(O=>K.next(z*O).value,z,30);return z+"ms "+nt},toTransition:()=>{}};return K}Sg.applyToOptions=n=>{const t=Hj(n,100,Sg);return n.ease=t.ease,n.duration=ds(t.duration),n.type="keyframes",n};function vb({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:d=.5,restSpeed:m}){const y=n[0],v={done:!1,value:y},T=I=>c!==void 0&&I<c||h!==void 0&&I>h,w=I=>c===void 0?h:h===void 0||Math.abs(c-I)<Math.abs(h-I)?c:h;let A=e*t;const x=y+A,k=l===void 0?x:l(x);k!==x&&(A=k-y);const L=I=>-A*Math.exp(-I/i),U=I=>k+L(I),K=I=>{const C=L(I),P=U(I);v.done=Math.abs(C)<=d,v.value=v.done?k:P};let z,nt;const O=I=>{T(v.value)&&(z=I,nt=Sg({keyframes:[v.value,w(v.value)],velocity:vM(U,I,v.value),damping:s,stiffness:a,restDelta:d,restSpeed:m}))};return O(0),{calculatedDuration:null,next:I=>{let C=!1;return!nt&&z===void 0&&(C=!0,K(I),O(I)),z!==void 0&&I>=z?nt.next(I-z):(!C&&K(I),v)}}}function Qj(n,t,e){const i=[],s=e||ar.mix||yM,a=n.length-1;for(let l=0;l<a;l++){let c=s(n[l],n[l+1]);if(t){const h=Array.isArray(t)?t[l]||Ii:t;c=Cf(h,c)}i.push(c)}return i}function Zj(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const a=n.length;if(H0(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),t=[...t].reverse());const c=Qj(t,i,s),h=c.length,d=m=>{if(l&&m<n[0])return t[0];let y=0;if(h>1)for(;y<n.length-2&&!(m<n[y+1]);y++);const v=rf(n[y],n[y+1],m);return c[y](v)};return e?m=>d(rr(n[0],n[a-1],m)):d}function Jj(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=rf(0,t,i);n.push(Ae(e,1,s))}}function t6(n){const t=[0];return Jj(t,n.length-1),t}function e6(n,t){return n.map(e=>e*t)}function n6(n,t){return n.map(()=>t||oM).splice(0,n.length-1)}function Bh({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=dj(i)?i.map(h1):h1(i),a={done:!1,value:t[0]},l=e6(e&&e.length===t.length?e:t6(t),n),c=Zj(l,t,{ease:Array.isArray(s)?s:n6(t,s)});return{calculatedDuration:n,next:h=>(a.value=c(h),a.done=h>=n,a)}}const i6=n=>n!==null;function tT(n,{repeat:t,repeatType:e="loop"},i,s=1){const a=n.filter(i6),c=s<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!c||i===void 0?a[c]:i}const s6={decay:vb,inertia:vb,tween:Bh,keyframes:Bh,spring:Sg};function bM(n){typeof n.type=="string"&&(n.type=s6[n.type])}class eT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const r6=n=>n/100;class nT extends eT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:e}=this.options;e&&e.updatedAt!==Gn.now()&&this.tick(Gn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;bM(t);const{type:e=Bh,repeat:i=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=t;let{keyframes:c}=t;const h=e||Bh;h!==Bh&&typeof c[0]!="number"&&(this.mixKeyframes=Cf(r6,yM(c[0],c[1])),c=[0,100]);const d=h({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...c].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=J0(d));const{calculatedDuration:m}=d;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:m,repeat:y,repeatType:v,repeatDelay:T,type:w,onUpdate:A,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const k=this.currentTime-d*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?k<0:k>s;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let U=this.currentTime,K=i;if(y){const I=Math.min(this.currentTime,s)/c;let C=Math.floor(I),P=I%1;!P&&I>=1&&(P=1),P===1&&C--,C=Math.min(C,y+1),!!(C%2)&&(v==="reverse"?(P=1-P,T&&(P-=T/c)):v==="mirror"&&(K=l)),U=rr(0,1,P)*c}const z=L?{done:!1,value:m[0]}:K.next(U);a&&(z.value=a(z.value));let{done:nt}=z;!L&&h!==null&&(nt=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&nt);return O&&w!==vb&&(z.value=tT(m,this.options,x,this.speed)),A&&A(z.value),O&&this.finish(),z}then(t,e){return this.finished.then(t,e)}get duration(){return ms(this.calculatedDuration)}get time(){return ms(this.currentTime)}set time(t){var e;t=ds(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Gn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ms(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:t=zj,startTime:e}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(a=(s=this.options).onPlay)==null||a.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function a6(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const wo=n=>n*180/Math.PI,bb=n=>{const t=wo(Math.atan2(n[1],n[0]));return Tb(t)},o6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:bb,rotateZ:bb,skewX:n=>wo(Math.atan(n[1])),skewY:n=>wo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Tb=n=>(n=n%360,n<0&&(n+=360),n),y1=bb,_1=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),v1=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),l6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_1,scaleY:v1,scale:n=>(_1(n)+v1(n))/2,rotateX:n=>Tb(wo(Math.atan2(n[6],n[5]))),rotateY:n=>Tb(wo(Math.atan2(-n[2],n[0]))),rotateZ:y1,rotate:y1,skewX:n=>wo(Math.atan(n[4])),skewY:n=>wo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Eb(n){return n.includes("scale")?1:0}function Sb(n,t){if(!n||n==="none")return Eb(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(e)i=l6,s=e;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=o6,s=c}if(!s)return Eb(t);const a=i[t],l=s[1].split(",").map(u6);return typeof a=="function"?a(l):l[a]}const c6=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Sb(e,t)};function u6(n){return parseFloat(n.trim())}const Gc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kc=new Set(Gc),b1=n=>n===qc||n===Ot,h6=new Set(["x","y","z"]),f6=Gc.filter(n=>!h6.has(n));function d6(n){const t=[];return f6.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const Ro={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Sb(t,"x"),y:(n,{transform:t})=>Sb(t,"y")};Ro.translateX=Ro.x;Ro.translateY=Ro.y;const Co=new Set;let wb=!1,Ab=!1,xb=!1;function TM(){if(Ab){const n=Array.from(Co).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const s=d6(i);s.length&&(e.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=e.get(i);s&&s.forEach(([a,l])=>{var c;(c=i.getValue(a))==null||c.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Ab=!1,wb=!1,Co.forEach(n=>n.complete(xb)),Co.clear()}function EM(){Co.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Ab=!0)})}function m6(){xb=!0,EM(),TM(),xb=!1}class iT{constructor(t,e,i,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Co.add(this),wb||(wb=!0,Se.read(EM),Se.resolveKeyframes(TM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:s}=this;if(t[0]===null){const a=s==null?void 0:s.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(i&&e){const c=i.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),s&&a===void 0&&s.set(t[0])}a6(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Co.delete(this)}cancel(){this.state==="scheduled"&&(Co.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const g6=n=>n.startsWith("--");function p6(n,t,e){g6(t)?n.style.setProperty(t,e):n.style[t]=e}const y6=q0(()=>window.ScrollTimeline!==void 0),_6={};function v6(n,t){const e=q0(n);return()=>_6[t]??e()}const SM=v6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xh=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,T1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xh([0,.65,.55,1]),circOut:xh([.55,0,1,.45]),backIn:xh([.31,.01,.66,-.59]),backOut:xh([.33,1.53,.69,.99])};function wM(n,t){if(n)return typeof n=="function"?SM()?_M(n,t):"ease-out":lM(n)?xh(n):Array.isArray(n)?n.map(e=>wM(e,t)||T1.easeOut):T1[n]}function b6(n,t,e,{delay:i=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:h}={},d=void 0){const m={[t]:e};h&&(m.offset=h);const y=wM(c,s);Array.isArray(y)&&(m.easing=y);const v={delay:i,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(v.pseudoElement=d),n.animate(m,v)}function AM(n){return typeof n=="function"&&"applyToOptions"in n}function T6({type:n,...t}){return AM(n)&&SM()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class E6 extends eT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,H0(typeof t.type!="string");const d=T6(t);this.animation=b6(e,i,s,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=tT(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):p6(e,i,m),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return ms(Number(t))}get time(){return ms(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ds(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&y6()?(this.animation.timeline=t,Ii):e(this)}}const xM={anticipate:sM,backInOut:iM,circInOut:aM};function S6(n){return n in xM}function w6(n){typeof n.ease=="string"&&S6(n.ease)&&(n.ease=xM[n.ease])}const E1=10;class A6 extends E6{constructor(t){w6(t),bM(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:s,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new nT({...l,autoplay:!1}),h=ds(this.finishedTime??this.time);e.setWithVelocity(c.sample(h-E1).value,c.sample(h).value,E1),c.stop()}}const S1=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(da.test(n)||n==="0")&&!n.startsWith("url("));function x6(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function I6(n,t,e,i){const s=n[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=n[n.length-1],l=S1(s,t),c=S1(a,t);return!l||!c?!1:x6(n)||(e==="spring"||AM(e))&&i}function Ib(n){n.duration=0,n.type}const R6=new Set(["opacity","clipPath","filter","transform"]),C6=q0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function D6(n){var m;const{motionValue:t,name:e,repeatDelay:i,repeatType:s,damping:a,type:l}=n;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=t.owner.getProps();return C6()&&e&&R6.has(e)&&(e!=="transform"||!d)&&!h&&!i&&s!=="mirror"&&a!==0&&l!=="inertia"}const M6=40;class P6 extends eT{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:h,motionValue:d,element:m,...y}){var w;super(),this.stop=()=>{var A,x;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Gn.now();const v={autoplay:t,delay:e,type:i,repeat:s,repeatDelay:a,repeatType:l,name:h,motionValue:d,element:m,...y},T=(m==null?void 0:m.KeyframeResolver)||iT;this.keyframeResolver=new T(c,(A,x,k)=>this.onKeyframesResolved(A,x,v,!k),h,d,m),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,e,i,s){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:h,isHandoff:d,onUpdate:m}=i;this.resolvedAt=Gn.now(),I6(t,a,l,c)||((ar.instantAnimations||!h)&&(m==null||m(tT(t,i,e))),t[0]=t[t.length-1],Ib(i),i.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>M6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},T=!d&&D6(v)?new A6({...v,element:v.motionValue.owner.current}):new nT(v);T.finished.then(()=>this.notifyFinished()).catch(Ii),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),m6()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const O6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function k6(n){const t=O6.exec(n);if(!t)return[,];const[,e,i,s]=t;return[`--${e??i}`,s]}function IM(n,t,e=1){const[i,s]=k6(n);if(!i)return;const a=window.getComputedStyle(t).getPropertyValue(i);if(a){const l=a.trim();return YD(l)?parseFloat(l):l}return Y0(s)?IM(s,t,e+1):s}function sT(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const RM=new Set(["width","height","top","left","right","bottom",...Gc]),N6={test:n=>n==="auto",parse:n=>n},CM=n=>t=>t.test(n),DM=[qc,Ot,gs,$r,xj,Aj,N6],w1=n=>DM.find(CM(n));function V6(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||QD(n):!0}const L6=new Set(["brightness","contrast","saturate","opacity"]);function B6(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(X0)||[];if(!i)return n;const s=e.replace(i,"");let a=L6.has(t)?1:0;return i!==e&&(a*=100),t+"("+a+s+")"}const U6=/\b([a-z-]*)\(.*?\)/gu,Rb={...da,getAnimatableNone:n=>{const t=n.match(U6);return t?t.map(B6).join(" "):n}},A1={...qc,transform:Math.round},j6={rotate:$r,rotateX:$r,rotateY:$r,rotateZ:$r,scale:Rm,scaleX:Rm,scaleY:Rm,scaleZ:Rm,skew:$r,skewX:$r,skewY:$r,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:af,originX:f1,originY:f1,originZ:Ot},rT={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,backgroundPositionX:Ot,backgroundPositionY:Ot,...j6,zIndex:A1,fillOpacity:af,strokeOpacity:af,numOctaves:A1},F6={...rT,color:Ke,backgroundColor:Ke,outlineColor:Ke,fill:Ke,stroke:Ke,borderColor:Ke,borderTopColor:Ke,borderRightColor:Ke,borderBottomColor:Ke,borderLeftColor:Ke,filter:Rb,WebkitFilter:Rb},MM=n=>F6[n];function PM(n,t){let e=MM(n);return e!==Rb&&(e=da),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const z6=new Set(["auto","none","0"]);function H6(n,t,e){let i=0,s;for(;i<n.length&&!s;){const a=n[i];typeof a=="string"&&!z6.has(a)&&of(a).values.length&&(s=n[i]),i++}if(s&&e)for(const a of t)n[a]=PM(e,s)}class q6 extends iT{constructor(t,e,i,s,a){super(t,e,i,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let d=t[h];if(typeof d=="string"&&(d=d.trim(),Y0(d))){const m=IM(d,e.current);m!==void 0&&(t[h]=m),h===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!RM.has(i)||t.length!==2)return;const[s,a]=t,l=w1(s),c=w1(a);if(l!==c)if(b1(l)&&b1(c))for(let h=0;h<t.length;h++){const d=t[h];typeof d=="string"&&(t[h]=parseFloat(d))}else Ro[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||V6(t[s]))&&i.push(s);i.length&&H6(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ro[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var c;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=Ro[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([h,d])=>{t.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function G6(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=(e==null?void 0:e[n])??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const OM=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function K6(n){return XD(n)&&"offsetHeight"in n}const x1=30,$6=n=>!isNaN(parseFloat(n));class W6{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var a;const s=Gn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Gn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=$6(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new G0);const i=this.events[t].add(e);return t==="change"?()=>{i(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Gn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>x1)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,x1);return ZD(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tc(n,t){return new W6(n,t)}const{schedule:aT}=cM(queueMicrotask,!1),Vi={x:!1,y:!1};function kM(){return Vi.x||Vi.y}function Y6(n){return n==="x"||n==="y"?Vi[n]?null:(Vi[n]=!0,()=>{Vi[n]=!1}):Vi.x||Vi.y?null:(Vi.x=Vi.y=!0,()=>{Vi.x=Vi.y=!1})}function NM(n,t){const e=G6(n),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[e,s,()=>i.abort()]}function I1(n){return!(n.pointerType==="touch"||kM())}function X6(n,t,e={}){const[i,s,a]=NM(n,e),l=c=>{if(!I1(c))return;const{target:h}=c,d=t(h,c);if(typeof d!="function"||!h)return;const m=y=>{I1(y)&&(d(y),h.removeEventListener("pointerleave",m))};h.addEventListener("pointerleave",m,s)};return i.forEach(c=>{c.addEventListener("pointerenter",l,s)}),a}const VM=(n,t)=>t?n===t?!0:VM(n,t.parentElement):!1,oT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Q6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Z6(n){return Q6.has(n.tagName)||n.tabIndex!==-1}const Gm=new WeakSet;function R1(n){return t=>{t.key==="Enter"&&n(t)}}function cv(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const J6=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=R1(()=>{if(Gm.has(e))return;cv(e,"down");const s=R1(()=>{cv(e,"up")}),a=()=>cv(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function C1(n){return oT(n)&&!kM()}function t3(n,t,e={}){const[i,s,a]=NM(n,e),l=c=>{const h=c.currentTarget;if(!C1(c))return;Gm.add(h);const d=t(h,c),m=(T,w)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Gm.has(h)&&Gm.delete(h),C1(T)&&typeof d=="function"&&d(T,{success:w})},y=T=>{m(T,h===window||h===document||e.useGlobalTarget||VM(h,T.target))},v=T=>{m(T,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return i.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),K6(c)&&(c.addEventListener("focus",d=>J6(d,s)),!Z6(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function LM(n){return XD(n)&&"ownerSVGElement"in n}function e3(n){return LM(n)&&n.tagName==="svg"}const Rn=n=>!!(n&&n.getVelocity),n3=[...DM,Ke,da],i3=n=>n3.find(CM(n)),BM=dt.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function s3(n=!0){const t=dt.useContext(j0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:s}=t,a=dt.useId();dt.useEffect(()=>{if(n)return s(a)},[n]);const l=dt.useCallback(()=>n&&i&&i(a),[a,i,n]);return!e&&i?[!1,l]:[!0]}const UM=dt.createContext({strict:!1}),D1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ec={};for(const n in D1)Ec[n]={isEnabled:t=>D1[n].some(e=>!!t[e])};function r3(n){for(const t in n)Ec[t]={...Ec[t],...n[t]}}const a3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||a3.has(n)}let jM=n=>!wg(n);function o3(n){typeof n=="function"&&(jM=t=>t.startsWith("on")?!wg(t):n(t))}try{o3(require("@emotion/is-prop-valid").default)}catch{}function l3(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(jM(s)||e===!0&&wg(s)||!t&&!wg(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const ip=dt.createContext({});function sp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function lf(n){return typeof n=="string"||Array.isArray(n)}const lT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cT=["initial",...lT];function rp(n){return sp(n.animate)||cT.some(t=>lf(n[t]))}function FM(n){return!!(rp(n)||n.variants)}function c3(n,t){if(rp(n)){const{initial:e,animate:i}=n;return{initial:e===!1||lf(e)?e:void 0,animate:lf(i)?i:void 0}}return n.inherit!==!1?t:{}}function u3(n){const{initial:t,animate:e}=c3(n,dt.useContext(ip));return dt.useMemo(()=>({initial:t,animate:e}),[M1(t),M1(e)])}function M1(n){return Array.isArray(n)?n.join(" "):n}const cf={};function h3(n){for(const t in n)cf[t]=n[t],W0(t)&&(cf[t].isCSSVariable=!0)}function zM(n,{layout:t,layoutId:e}){return Kc.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!cf[n]||n==="opacity")}const f3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},d3=Gc.length;function m3(n,t,e){let i="",s=!0;for(let a=0;a<d3;a++){const l=Gc[a],c=n[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||e){const d=OM(c,rT[l]);if(!h){s=!1;const m=f3[l]||l;i+=`${m}(${d}) `}e&&(t[l]=d)}}return i=i.trim(),e?i=e(t,s?"":i):s&&(i="none"),i}function uT(n,t,e){const{style:i,vars:s,transformOrigin:a}=n;let l=!1,c=!1;for(const h in t){const d=t[h];if(Kc.has(h)){l=!0;continue}else if(W0(h)){s[h]=d;continue}else{const m=OM(d,rT[h]);h.startsWith("origin")?(c=!0,a[h]=m):i[h]=m}}if(t.transform||(l||e?i.transform=m3(t,n.transform,e):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:d="50%",originZ:m=0}=a;i.transformOrigin=`${h} ${d} ${m}`}}const hT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function HM(n,t,e){for(const i in t)!Rn(t[i])&&!zM(i,e)&&(n[i]=t[i])}function g3({transformTemplate:n},t){return dt.useMemo(()=>{const e=hT();return uT(e,t,n),Object.assign({},e.vars,e.style)},[t])}function p3(n,t){const e=n.style||{},i={};return HM(i,e,n),Object.assign(i,g3(n,t)),i}function y3(n,t){const e={},i=p3(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const _3={offset:"stroke-dashoffset",array:"stroke-dasharray"},v3={offset:"strokeDashoffset",array:"strokeDasharray"};function b3(n,t,e=1,i=0,s=!0){n.pathLength=1;const a=s?_3:v3;n[a.offset]=Ot.transform(-i);const l=Ot.transform(t),c=Ot.transform(e);n[a.array]=`${l} ${c}`}function qM(n,{attrX:t,attrY:e,attrScale:i,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...c},h,d,m){if(uT(n,c,d),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:v}=n;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),i!==void 0&&(y.scale=i),s!==void 0&&b3(y,s,a,l,!1)}const GM=()=>({...hT(),attrs:{}}),KM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function T3(n,t,e,i){const s=dt.useMemo(()=>{const a=GM();return qM(a,t,KM(i),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[t]);if(n.style){const a={};HM(a,n.style,n),s.style={...a,...s.style}}return s}const E3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fT(n){return typeof n!="string"||n.includes("-")?!1:!!(E3.indexOf(n)>-1||/[A-Z]/u.test(n))}function S3(n,t,e,{latestValues:i},s,a=!1){const c=(fT(n)?T3:y3)(t,i,s,n),h=l3(t,typeof n=="string",a),d=n!==dt.Fragment?{...h,...c,ref:e}:{},{children:m}=t,y=dt.useMemo(()=>Rn(m)?m.get():m,[m]);return dt.createElement(n,{...d,children:y})}function P1(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function dT(n,t,e,i){if(typeof t=="function"){const[s,a]=P1(i);t=t(e!==void 0?e:n.custom,s,a)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[s,a]=P1(i);t=t(e!==void 0?e:n.custom,s,a)}return t}function Km(n){return Rn(n)?n.get():n}function w3({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,s){return{latestValues:A3(e,i,s,n),renderState:t()}}function A3(n,t,e,i){const s={},a=i(n,{});for(const v in a)s[v]=Km(a[v]);let{initial:l,animate:c}=n;const h=rp(n),d=FM(n);t&&d&&!h&&n.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let m=e?e.initial===!1:!1;m=m||l===!1;const y=m?c:l;if(y&&typeof y!="boolean"&&!sp(y)){const v=Array.isArray(y)?y:[y];for(let T=0;T<v.length;T++){const w=dT(n,v[T]);if(w){const{transitionEnd:A,transition:x,...k}=w;for(const L in k){let U=k[L];if(Array.isArray(U)){const K=m?U.length-1:0;U=U[K]}U!==null&&(s[L]=U)}for(const L in A)s[L]=A[L]}}}return s}const $M=n=>(t,e)=>{const i=dt.useContext(ip),s=dt.useContext(j0),a=()=>w3(n,t,i,s);return e?a():rj(a)};function mT(n,t,e){var a;const{style:i}=n,s={};for(const l in i)(Rn(i[l])||t.style&&Rn(t.style[l])||zM(l,n)||((a=e==null?void 0:e.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(s[l]=i[l]);return s}const x3=$M({scrapeMotionValuesFromProps:mT,createRenderState:hT});function WM(n,t,e){const i=mT(n,t,e);for(const s in n)if(Rn(n[s])||Rn(t[s])){const a=Gc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[a]=n[s]}return i}const I3=$M({scrapeMotionValuesFromProps:WM,createRenderState:GM}),R3=Symbol.for("motionComponentSymbol");function oc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function C3(n,t,e){return dt.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):oc(e)&&(e.current=i))},[t])}const gT=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),D3="framerAppearId",YM="data-"+gT(D3),XM=dt.createContext({});function M3(n,t,e,i,s){var A,x;const{visualElement:a}=dt.useContext(ip),l=dt.useContext(UM),c=dt.useContext(j0),h=dt.useContext(BM).reducedMotion,d=dt.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(n,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=d.current,y=dt.useContext(XM);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&P3(d.current,e,s,y);const v=dt.useRef(!1);dt.useInsertionEffect(()=>{m&&v.current&&m.update(e,c)});const T=e[YM],w=dt.useRef(!!T&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,T))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,T)));return aj(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),dt.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)==null||k.call(window,T)}),w.current=!1))}),m}function P3(n,t,e,i){const{layoutId:s,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:d,layoutCrossfade:m}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:QM(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||c&&oc(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:h,layoutRoot:d})}function QM(n){if(n)return n.options.allowProjection!==!1?n.projection:QM(n.parent)}function uv(n,{forwardMotionProps:t=!1}={},e,i){e&&r3(e);const s=fT(n)?I3:x3;function a(c,h){let d;const m={...dt.useContext(BM),...c,layoutId:O3(c)},{isStatic:y}=m,v=u3(c),T=s(c,y);if(!y&&U0){k3();const w=N3(m);d=w.MeasureLayout,v.visualElement=M3(n,T,m,i,w.ProjectionNode)}return B.jsxs(ip.Provider,{value:v,children:[d&&v.visualElement?B.jsx(d,{visualElement:v.visualElement,...m}):null,S3(n,c,C3(T,v.visualElement,h),T,y,t)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=dt.forwardRef(a);return l[R3]=n,l}function O3({layoutId:n}){const t=dt.useContext(WD).id;return t&&n!==void 0?t+"-"+n:n}function k3(n,t){dt.useContext(UM).strict}function N3(n){const{drag:t,layout:e}=Ec;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function V3(n,t){if(typeof Proxy>"u")return uv;const e=new Map,i=(a,l)=>uv(a,l,n,t),s=(a,l)=>i(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?i:(e.has(l)||e.set(l,uv(l,void 0,n,t)),e.get(l))})}function ZM({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function L3({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function B3(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function hv(n){return n===void 0||n===1}function Cb({scale:n,scaleX:t,scaleY:e}){return!hv(n)||!hv(t)||!hv(e)}function mo(n){return Cb(n)||JM(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function JM(n){return O1(n.x)||O1(n.y)}function O1(n){return n&&n!=="0%"}function Ag(n,t,e){const i=n-e,s=t*i;return e+s}function k1(n,t,e,i,s){return s!==void 0&&(n=Ag(n,s,i)),Ag(n,e,i)+t}function Db(n,t=0,e=1,i,s){n.min=k1(n.min,t,e,i,s),n.max=k1(n.max,t,e,i,s)}function tP(n,{x:t,y:e}){Db(n.x,t.translate,t.scale,t.originPoint),Db(n.y,e.translate,e.scale,e.originPoint)}const N1=.999999999999,V1=1.0000000000001;function U3(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let a,l;for(let c=0;c<s;c++){a=e[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&cc(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,tP(n,l)),i&&mo(a.latestValues)&&cc(n,a.latestValues))}t.x<V1&&t.x>N1&&(t.x=1),t.y<V1&&t.y>N1&&(t.y=1)}function lc(n,t){n.min=n.min+t,n.max=n.max+t}function L1(n,t,e,i,s=.5){const a=Ae(n.min,n.max,s);Db(n,t,e,a,i)}function cc(n,t){L1(n.x,t.x,t.scaleX,t.scale,t.originX),L1(n.y,t.y,t.scaleY,t.scale,t.originY)}function eP(n,t){return ZM(B3(n.getBoundingClientRect(),t))}function j3(n,t,e){const i=eP(n,e),{scroll:s}=t;return s&&(lc(i.x,s.offset.x),lc(i.y,s.offset.y)),i}const B1=()=>({translate:0,scale:1,origin:0,originPoint:0}),uc=()=>({x:B1(),y:B1()}),U1=()=>({min:0,max:0}),Ne=()=>({x:U1(),y:U1()}),Mb={current:null},nP={current:!1};function F3(){if(nP.current=!0,!!U0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Mb.current=n.matches;n.addEventListener("change",t),t()}else Mb.current=!1}const z3=new WeakMap;function H3(n,t,e){for(const i in t){const s=t[i],a=e[i];if(Rn(s))n.addValue(i,s);else if(Rn(a))n.addValue(i,Tc(s,{owner:n}));else if(a!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,Tc(l!==void 0?l:s,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const j1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class q3{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=iT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Gn.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Se.render(this.render,!1,!0))};const{latestValues:h,renderState:d}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=rp(e),this.isVariantNode=FM(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(e,{},this);for(const v in y){const T=y[v];h[v]!==void 0&&Rn(T)&&T.set(h[v])}}mount(t){this.current=t,z3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),nP.current||F3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fa(this.notifyUpdate),fa(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Kc.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Se.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ec){const e=Ec[t];if(!e)continue;const{isEnabled:i,Feature:s}=e;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ne()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<j1.length;i++){const s=j1[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=t[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=H3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Tc(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(YD(i)||QD(i))?i=parseFloat(i):!i3(i)&&da.test(e)&&(i=PM(t,e)),this.setBaseTarget(t,Rn(i)?i.get():i)),Rn(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var a;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const l=dT(this.props,e,(a=this.presenceContext)==null?void 0:a.custom);l&&(i=l[t])}if(e&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Rn(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new G0),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){aT.render(this.render)}}class iP extends q3{constructor(){super(...arguments),this.KeyframeResolver=q6}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Rn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function sP(n,{style:t,vars:e},i,s){const a=n.style;let l;for(l in t)a[l]=t[l];s==null||s.applyProjectionStyles(a,i);for(l in e)a.setProperty(l,e[l])}function G3(n){return window.getComputedStyle(n)}class K3 extends iP{constructor(){super(...arguments),this.type="html",this.renderInstance=sP}readValueFromInstance(t,e){var i;if(Kc.has(e))return(i=this.projection)!=null&&i.isProjecting?Eb(e):c6(t,e);{const s=G3(t),a=(W0(e)?s.getPropertyValue(e):s[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return eP(t,e)}build(t,e,i){uT(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return mT(t,e,i)}}const rP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $3(n,t,e,i){sP(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(rP.has(s)?s:gT(s),t.attrs[s])}class W3 extends iP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ne}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Kc.has(e)){const i=MM(e);return i&&i.default||0}return e=rP.has(e)?e:gT(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return WM(t,e,i)}build(t,e,i){qM(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,s){$3(t,e,i,s)}mount(t){this.isSVGTag=KM(t.tagName),super.mount(t)}}const Y3=(n,t)=>fT(n)?new W3(t):new K3(t,{allowProjection:n!==dt.Fragment});function uf(n,t,e){const i=n.getProps();return dT(i,t,e!==void 0?e:i.custom,n)}const Pb=n=>Array.isArray(n);function X3(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Tc(e))}function Q3(n){return Pb(n)?n[n.length-1]||0:n}function Z3(n,t){const e=uf(n,t);let{transitionEnd:i={},transition:s={},...a}=e||{};a={...a,...i};for(const l in a){const c=Q3(a[l]);X3(n,l,c)}}function J3(n){return!!(Rn(n)&&n.add)}function Ob(n,t){const e=n.getValue("willChange");if(J3(e))return e.add(t);if(!e&&ar.WillChange){const i=new ar.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function aP(n){return n.props[YM]}const tF=n=>n!==null;function eF(n,{repeat:t,repeatType:e="loop"},i){const s=n.filter(tF),a=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[a]}const nF={type:"spring",stiffness:500,damping:25,restSpeed:10},iF=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),sF={type:"keyframes",duration:.8},rF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aF=(n,{keyframes:t})=>t.length>2?sF:Kc.has(n)?n.startsWith("scale")?iF(t[1]):nF:rF;function oF({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:d,...m}){return!!Object.keys(m).length}const pT=(n,t,e,i={},s,a)=>l=>{const c=sT(i,n)||{},h=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-ds(h);const m={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:v=>{t.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:t,element:a?void 0:s};oF(c)||Object.assign(m,aF(n,m)),m.duration&&(m.duration=ds(m.duration)),m.repeatDelay&&(m.repeatDelay=ds(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Ib(m),m.delay===0&&(y=!0)),(ar.instantAnimations||ar.skipAnimations)&&(y=!0,Ib(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!a&&t.get()!==void 0){const v=eF(m.keyframes,c);if(v!==void 0){Se.update(()=>{m.onUpdate(v),m.onComplete()});return}}return c.isSync?new nT(m):new P6(m)};function lF({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function oP(n,t,{delay:e=0,transitionOverride:i,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...c}=t;i&&(a=i);const h=[],d=s&&n.animationState&&n.animationState.getState()[s];for(const m in c){const y=n.getValue(m,n.latestValues[m]??null),v=c[m];if(v===void 0||d&&lF(d,m))continue;const T={delay:e,...sT(a||{},m)},w=y.get();if(w!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===w&&!T.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const k=aP(n);if(k){const L=window.MotionHandoffAnimation(k,m,Se);L!==null&&(T.startTime=L,A=!0)}}Ob(n,m),y.start(pT(m,y,v,n.shouldReduceMotion&&RM.has(m)?{type:!1}:T,n,A));const x=y.animation;x&&h.push(x)}return l&&Promise.all(h).then(()=>{Se.update(()=>{l&&Z3(n,l)})}),h}function kb(n,t,e={}){var h;const i=uf(n,t,e.type==="exit"?(h=n.presenceContext)==null?void 0:h.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(s=e.transitionOverride);const a=i?()=>Promise.all(oP(n,i,e)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:v}=s;return cF(n,t,d,m,y,v,e)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,m]=c==="beforeChildren"?[a,l]:[l,a];return d().then(()=>m())}else return Promise.all([a(),l(e.delay)])}function cF(n,t,e=0,i=0,s=0,a=1,l){const c=[],h=n.variantChildren.size,d=(h-1)*s,m=typeof i=="function",y=m?v=>i(v,h):a===1?(v=0)=>v*s:(v=0)=>d-v*s;return Array.from(n.variantChildren).sort(uF).forEach((v,T)=>{v.notify("AnimationStart",t),c.push(kb(v,t,{...l,delay:e+(m?0:i)+y(T)}).then(()=>v.notify("AnimationComplete",t)))}),Promise.all(c)}function uF(n,t){return n.sortNodePosition(t)}function hF(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(a=>kb(n,a,e));i=Promise.all(s)}else if(typeof t=="string")i=kb(n,t,e);else{const s=typeof t=="function"?uf(n,t,e.custom):t;i=Promise.all(oP(n,s,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function lP(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const fF=cT.length;function cP(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?cP(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<fF;e++){const i=cT[e],s=n.props[i];(lf(s)||s===!1)&&(t[i]=s)}return t}const dF=[...lT].reverse(),mF=lT.length;function gF(n){return t=>Promise.all(t.map(({animation:e,options:i})=>hF(n,e,i)))}function pF(n){let t=gF(n),e=F1(),i=!0;const s=h=>(d,m)=>{var v;const y=uf(n,m,h==="exit"?(v=n.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:T,transitionEnd:w,...A}=y;d={...d,...A,...w}}return d};function a(h){t=h(n)}function l(h){const{props:d}=n,m=cP(n.parent)||{},y=[],v=new Set;let T={},w=1/0;for(let x=0;x<mF;x++){const k=dF[x],L=e[k],U=d[k]!==void 0?d[k]:m[k],K=lf(U),z=k===h?L.isActive:null;z===!1&&(w=x);let nt=U===m[k]&&U!==d[k]&&K;if(nt&&i&&n.manuallyAnimateOnMount&&(nt=!1),L.protectedKeys={...T},!L.isActive&&z===null||!U&&!L.prevProp||sp(U)||typeof U=="boolean")continue;const O=yF(L.prevProp,U);let I=O||k===h&&L.isActive&&!nt&&K||x>w&&K,C=!1;const P=Array.isArray(U)?U:[U];let V=P.reduce(s(k),{});z===!1&&(V={});const{prevResolvedValues:F={}}=L,N={...F,...V},At=st=>{I=!0,v.has(st)&&(C=!0,v.delete(st)),L.needsAnimating[st]=!0;const ut=n.getValue(st);ut&&(ut.liveStyle=!1)};for(const st in N){const ut=V[st],Z=F[st];if(T.hasOwnProperty(st))continue;let D=!1;Pb(ut)&&Pb(Z)?D=!lP(ut,Z):D=ut!==Z,D?ut!=null?At(st):v.add(st):ut!==void 0&&v.has(st)?At(st):L.protectedKeys[st]=!0}L.prevProp=U,L.prevResolvedValues=V,L.isActive&&(T={...T,...V}),i&&n.blockInitialAnimation&&(I=!1),I&&(!(nt&&O)||C)&&y.push(...P.map(st=>({animation:st,options:{type:k}})))}if(v.size){const x={};if(typeof d.initial!="boolean"){const k=uf(n,Array.isArray(d.initial)?d.initial[0]:d.initial);k&&k.transition&&(x.transition=k.transition)}v.forEach(k=>{const L=n.getBaseTarget(k),U=n.getValue(k);U&&(U.liveStyle=!0),x[k]=L??null}),y.push({animation:x})}let A=!!y.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?t(y):Promise.resolve()}function c(h,d){var y;if(e[h].isActive===d)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(v=>{var T;return(T=v.animationState)==null?void 0:T.setActive(h,d)}),e[h].isActive=d;const m=l(h);for(const v in e)e[v].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>e,reset:()=>{e=F1(),i=!0}}}function yF(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!lP(t,n):!1}function uo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function F1(){return{animate:uo(!0),whileInView:uo(),whileHover:uo(),whileTap:uo(),whileDrag:uo(),whileFocus:uo(),exit:uo()}}class va{constructor(t){this.isMounted=!1,this.node=t}update(){}}class _F extends va{constructor(t){super(t),t.animationState||(t.animationState=pF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();sp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let vF=0;class bF extends va{constructor(){super(...arguments),this.id=vF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const TF={animation:{Feature:_F},exit:{Feature:bF}};function hf(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function Pf(n){return{point:{x:n.pageX,y:n.pageY}}}const EF=n=>t=>oT(t)&&n(t,Pf(t));function Uh(n,t,e,i){return hf(n,t,EF(e),i)}const uP=1e-4,SF=1-uP,wF=1+uP,hP=.01,AF=0-hP,xF=0+hP;function Nn(n){return n.max-n.min}function IF(n,t,e){return Math.abs(n-t)<=e}function z1(n,t,e,i=.5){n.origin=i,n.originPoint=Ae(t.min,t.max,n.origin),n.scale=Nn(e)/Nn(t),n.translate=Ae(e.min,e.max,n.origin)-n.originPoint,(n.scale>=SF&&n.scale<=wF||isNaN(n.scale))&&(n.scale=1),(n.translate>=AF&&n.translate<=xF||isNaN(n.translate))&&(n.translate=0)}function jh(n,t,e,i){z1(n.x,t.x,e.x,i?i.originX:void 0),z1(n.y,t.y,e.y,i?i.originY:void 0)}function H1(n,t,e){n.min=e.min+t.min,n.max=n.min+Nn(t)}function RF(n,t,e){H1(n.x,t.x,e.x),H1(n.y,t.y,e.y)}function q1(n,t,e){n.min=t.min-e.min,n.max=n.min+Nn(t)}function Fh(n,t,e){q1(n.x,t.x,e.x),q1(n.y,t.y,e.y)}function wi(n){return[n("x"),n("y")]}const fP=({current:n})=>n?n.ownerDocument.defaultView:null,G1=(n,t)=>Math.abs(n-t);function CF(n,t){const e=G1(n.x,t.x),i=G1(n.y,t.y);return Math.sqrt(e**2+i**2)}class dP{constructor(t,e,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=dv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,w=CF(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!w)return;const{point:A}=v,{timestamp:x}=vn;this.history.push({...A,timestamp:x});const{onStart:k,onMove:L}=this.handlers;T||(k&&k(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=fv(T,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:w,onSessionEnd:A,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=dv(v.type==="pointercancel"?this.lastMoveEventInfo:fv(T,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,k),A&&A(v,k)},!oT(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const c=Pf(t),h=fv(c,this.transformPagePoint),{point:d}=h,{timestamp:m}=vn;this.history=[{...d,timestamp:m}];const{onSessionStart:y}=e;y&&y(t,dv(h,this.history)),this.removeListeners=Cf(Uh(this.contextWindow,"pointermove",this.handlePointerMove),Uh(this.contextWindow,"pointerup",this.handlePointerUp),Uh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fa(this.updatePoint)}}function fv(n,t){return t?{point:t(n.point)}:n}function K1(n,t){return{x:n.x-t.x,y:n.y-t.y}}function dv({point:n},t){return{point:n,delta:K1(n,mP(t)),offset:K1(n,DF(t)),velocity:MF(t,.1)}}function DF(n){return n[0]}function mP(n){return n[n.length-1]}function MF(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=mP(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>ds(t)));)e--;if(!i)return{x:0,y:0};const a=ms(s.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-i.x)/a,y:(s.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function PF(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Ae(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Ae(e,n,i.max):Math.min(n,e)),n}function $1(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function OF(n,{top:t,left:e,bottom:i,right:s}){return{x:$1(n.x,e,s),y:$1(n.y,t,i)}}function W1(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function kF(n,t){return{x:W1(n.x,t.x),y:W1(n.y,t.y)}}function NF(n,t){let e=.5;const i=Nn(n),s=Nn(t);return s>i?e=rf(t.min,t.max-i,n.min):i>s&&(e=rf(n.min,n.max-s,t.min)),rr(0,1,e)}function VF(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const Nb=.35;function LF(n=Nb){return n===!1?n=0:n===!0&&(n=Nb),{x:Y1(n,"left","right"),y:Y1(n,"top","bottom")}}function Y1(n,t,e){return{min:X1(n,t),max:X1(n,e)}}function X1(n,t){return typeof n=="number"?n:n[t]||0}const BF=new WeakMap;class UF{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ne(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Pf(y).point)},l=(y,v)=>{const{drag:T,dragPropagation:w,onDragStart:A}=this.getProps();if(T&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Y6(T),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wi(k=>{let L=this.getAxisMotionValue(k).get()||0;if(gs.test(L)){const{projection:U}=this.visualElement;if(U&&U.layout){const K=U.layout.layoutBox[k];K&&(L=Nn(K)*(parseFloat(L)/100))}}this.originPoint[k]=L}),A&&Se.postRender(()=>A(y,v)),Ob(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},c=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:T,dragDirectionLock:w,onDirectionLock:A,onDrag:x}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:k}=v;if(w&&this.currentDirection===null){this.currentDirection=jF(k),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",v.point,k),this.updateAxis("y",v.point,k),this.visualElement.render(),x&&x(y,v)},h=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>wi(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)==null?void 0:v.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new dP(t,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:fP(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,s=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Se.postRender(()=>c(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!Cm(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(l=PF(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;t&&oc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=OF(i.layoutBox,t):this.constraints=!1,this.elastic=LF(e),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&wi(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=VF(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!oc(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=j3(i,s.root,this.visualElement.getTransformPagePoint());let l=kF(s.layout.layoutBox,a);if(e){const c=e(L3(l));this.hasMutatedConstraints=!!c,c&&(l=ZM(c))}return l}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},d=wi(m=>{if(!Cm(m,e,this.currentDirection))return;let y=h&&h[m]||{};l&&(y={min:0,max:0});const v=s?200:1e6,T=s?40:1e7,w={type:"inertia",velocity:i?t[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(m,w)});return Promise.all(d).then(c)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return Ob(this.visualElement,t),i.start(pT(t,i,0,e,this.visualElement,!1))}stopAnimation(){wi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){wi(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){wi(e=>{const{drag:i}=this.getProps();if(!Cm(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[e];a.set(t[e]-Ae(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!oc(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};wi(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();s[l]=NF({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),wi(l=>{if(!Cm(l,t,null))return;const c=this.getAxisMotionValue(l),{min:h,max:d}=this.constraints[l];c.set(Ae(h,d,s[l]))})}addListeners(){if(!this.visualElement.current)return;BF.set(this.visualElement,this);const t=this.visualElement.current,e=Uh(t,"pointerdown",h=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();oc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Se.read(i);const l=hf(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(wi(m=>{const y=this.getAxisMotionValue(m);y&&(this.originPoint[m]+=h[m].translate,y.set(y.get()+h[m].translate))}),this.visualElement.render())});return()=>{l(),e(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=Nb,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Cm(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function jF(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class FF extends va{constructor(t){super(t),this.removeGroupControls=Ii,this.removeListeners=Ii,this.controls=new UF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const Q1=n=>(t,e)=>{n&&Se.postRender(()=>n(t,e))};class zF extends va{constructor(){super(...arguments),this.removePointerDownListener=Ii}onPointerDown(t){this.session=new dP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:Q1(t),onStart:Q1(e),onMove:i,onEnd:(a,l)=>{delete this.session,s&&Se.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Uh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $m={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Z1(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const gh={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Ot.test(n))n=parseFloat(n);else return n;const e=Z1(n,t.target.x),i=Z1(n,t.target.y);return`${e}% ${i}%`}},HF={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=da.parse(n);if(s.length>5)return i;const a=da.createTransformer(n),l=typeof s[0]!="number"?1:0,c=e.x.scale*t.x,h=e.y.scale*t.y;s[0+l]/=c,s[1+l]/=h;const d=Ae(c,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=d),typeof s[3+l]=="number"&&(s[3+l]/=d),a(s)}};let J1=!1;class qF extends dt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:a}=t;h3(GF),a&&(e.group&&e.group.add(a),i&&i.register&&s&&i.register(a),J1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),$m.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:a}=this.props,{projection:l}=i;return l&&(l.isPresent=a,J1=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||Se.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),aT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function gP(n){const[t,e]=s3(),i=dt.useContext(WD);return B.jsx(qF,{...n,layoutGroup:i,switchLayoutGroup:dt.useContext(XM),isPresent:t,safeToRemove:e})}const GF={borderRadius:{...gh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gh,borderTopRightRadius:gh,borderBottomLeftRadius:gh,borderBottomRightRadius:gh,boxShadow:HF};function KF(n,t,e){const i=Rn(n)?n:Tc(n);return i.start(pT("",i,t,e)),i.animation}const $F=(n,t)=>n.depth-t.depth;class WF{constructor(){this.children=[],this.isDirty=!1}add(t){F0(this.children,t),this.isDirty=!0}remove(t){z0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($F),this.isDirty=!1,this.children.forEach(t)}}function YF(n,t){const e=Gn.now(),i=({timestamp:s})=>{const a=s-e;a>=t&&(fa(i),n(a-t))};return Se.setup(i,!0),()=>fa(i)}const pP=["TopLeft","TopRight","BottomLeft","BottomRight"],XF=pP.length,tI=n=>typeof n=="string"?parseFloat(n):n,eI=n=>typeof n=="number"||Ot.test(n);function QF(n,t,e,i,s,a){s?(n.opacity=Ae(0,e.opacity??1,ZF(i)),n.opacityExit=Ae(t.opacity??1,0,JF(i))):a&&(n.opacity=Ae(t.opacity??1,e.opacity??1,i));for(let l=0;l<XF;l++){const c=`border${pP[l]}Radius`;let h=nI(t,c),d=nI(e,c);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||eI(h)===eI(d)?(n[c]=Math.max(Ae(tI(h),tI(d),i),0),(gs.test(d)||gs.test(h))&&(n[c]+="%")):n[c]=d}(t.rotate||e.rotate)&&(n.rotate=Ae(t.rotate||0,e.rotate||0,i))}function nI(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const ZF=yP(0,.5,rM),JF=yP(.5,.95,Ii);function yP(n,t,e){return i=>i<n?0:i>t?1:e(rf(n,t,i))}function iI(n,t){n.min=t.min,n.max=t.max}function Si(n,t){iI(n.x,t.x),iI(n.y,t.y)}function sI(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function rI(n,t,e,i,s){return n-=t,n=Ag(n,1/e,i),s!==void 0&&(n=Ag(n,1/s,i)),n}function t5(n,t=0,e=1,i=.5,s,a=n,l=n){if(gs.test(t)&&(t=parseFloat(t),t=Ae(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=Ae(a.min,a.max,i);n===a&&(c-=t),n.min=rI(n.min,t,e,c,s),n.max=rI(n.max,t,e,c,s)}function aI(n,t,[e,i,s],a,l){t5(n,t[e],t[i],t[s],t.scale,a,l)}const e5=["x","scaleX","originX"],n5=["y","scaleY","originY"];function oI(n,t,e,i){aI(n.x,t,e5,e?e.x:void 0,i?i.x:void 0),aI(n.y,t,n5,e?e.y:void 0,i?i.y:void 0)}function lI(n){return n.translate===0&&n.scale===1}function _P(n){return lI(n.x)&&lI(n.y)}function cI(n,t){return n.min===t.min&&n.max===t.max}function i5(n,t){return cI(n.x,t.x)&&cI(n.y,t.y)}function uI(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function vP(n,t){return uI(n.x,t.x)&&uI(n.y,t.y)}function hI(n){return Nn(n.x)/Nn(n.y)}function fI(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class s5{constructor(){this.members=[]}add(t){F0(this.members,t),t.scheduleRender()}remove(t){if(z0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function r5(n,t,e){let i="";const s=n.x.translate/t.x,a=n.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((s||a||l)&&(i=`translate3d(${s}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:m,rotateX:y,rotateY:v,skewX:T,skewY:w}=e;d&&(i=`perspective(${d}px) ${i}`),m&&(i+=`rotate(${m}deg) `),y&&(i+=`rotateX(${y}deg) `),v&&(i+=`rotateY(${v}deg) `),T&&(i+=`skewX(${T}deg) `),w&&(i+=`skewY(${w}deg) `)}const c=n.x.scale*t.x,h=n.y.scale*t.y;return(c!==1||h!==1)&&(i+=`scale(${c}, ${h})`),i||"none"}const mv=["","X","Y","Z"],a5=1e3;let o5=0;function gv(n,t,e,i){const{latestValues:s}=t;s[n]&&(e[n]=s[n],t.setStaticValue(n,0),i&&(i[n]=0))}function bP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=aP(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Se,!(s||a))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&bP(i)}function TP({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},c=t==null?void 0:t()){this.id=o5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(u5),this.nodes.forEach(m5),this.nodes.forEach(g5),this.nodes.forEach(h5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new WF)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new G0),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=LM(l)&&!e3(l),this.instance=l;const{layoutId:c,layout:h,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),n){let m,y=0;const v=()=>this.root.updateBlockedByResize=!1;Se.read(()=>{y=window.innerWidth}),n(l,()=>{const T=window.innerWidth;T!==y&&(y=T,this.root.updateBlockedByResize=!0,m&&m(),m=YF(v,250),$m.hasAnimatedSinceResize&&($m.hasAnimatedSinceResize=!1,this.nodes.forEach(gI)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||b5,{onLayoutAnimationStart:A,onLayoutAnimationComplete:x}=d.getProps(),k=!this.targetLayout||!vP(this.targetLayout,T),L=!y&&v;if(this.options.layoutRoot||this.resumeFrom||L||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const U={...sT(w,"layout"),onPlay:A,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U),this.setAnimationOrigin(m,L)}else y||gI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(p5),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(d5),this.nodes.forEach(l5),this.nodes.forEach(c5)):this.nodes.forEach(mI),this.clearAllSnapshots();const c=Gn.now();vn.delta=rr(0,1e3/60,c-vn.timestamp),vn.timestamp=c,vn.isProcessing=!0,sv.update.process(vn),sv.preRender.process(vn),sv.render.process(vn),vn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,aT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(f5),this.sharedNodes.forEach(y5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Nn(this.snapshot.measuredBox.x)&&!Nn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ne(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!_P(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;l&&this.instance&&(c||mo(this.latestValues)||m)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),T5(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:l}=this.options;if(!l)return Ne();const c=l.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(E5))){const{scroll:m}=this.root;m&&(lc(c.x,m.offset.x),lc(c.y,m.offset.y))}return c}removeElementScroll(l){var h;const c=Ne();if(Si(c,l),(h=this.scroll)!=null&&h.wasRoot)return c;for(let d=0;d<this.path.length;d++){const m=this.path[d],{scroll:y,options:v}=m;m!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Si(c,l),lc(c.x,y.offset.x),lc(c.y,y.offset.y))}return c}applyTransform(l,c=!1){const h=Ne();Si(h,l);for(let d=0;d<this.path.length;d++){const m=this.path[d];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&cc(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),mo(m.latestValues)&&cc(h,m.latestValues)}return mo(this.latestValues)&&cc(h,this.latestValues),h}removeTransform(l){const c=Ne();Si(c,l);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!mo(d.latestValues))continue;Cb(d.latestValues)&&d.updateSnapshot();const m=Ne(),y=d.measurePageBox();Si(m,y),oI(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return mo(this.latestValues)&&oI(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var v;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!(!this.layout||!(m||y))){if(this.resolvedRelativeTargetAt=vn.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),Fh(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ne(),this.targetWithTransforms=Ne()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Si(this.target,this.layout.layoutBox),tP(this.target,this.targetDelta)):Si(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),Fh(this.relativeTargetOrigin,this.target,T.target),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Cb(this.parent.latestValues)||JM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===vn.timestamp&&(h=!1),h)return;const{layout:d,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||m))return;Si(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;U3(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ne());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sI(this.prevProjectionDelta.x,this.projectionDelta.x),sI(this.prevProjectionDelta.y,this.projectionDelta.y)),jh(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!fI(this.projectionDelta.x,this.prevProjectionDelta.x)||!fI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uc(),this.projectionDelta=uc(),this.projectionDeltaWithTransform=uc()}setAnimationOrigin(l,c=!1){const h=this.snapshot,d=h?h.latestValues:{},m={...this.latestValues},y=uc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Ne(),T=h?h.source:void 0,w=this.layout?this.layout.source:void 0,A=T!==w,x=this.getStack(),k=!x||x.members.length<=1,L=!!(A&&!k&&this.options.crossfade===!0&&!this.path.some(v5));this.animationProgress=0;let U;this.mixTargetDelta=K=>{const z=K/1e3;pI(y.x,l.x,z),pI(y.y,l.y,z),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_5(this.relativeTarget,this.relativeTargetOrigin,v,z),U&&i5(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=Ne()),Si(U,this.relativeTarget)),A&&(this.animationValues=m,QF(m,d,this.latestValues,z,L,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,h,d;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(d=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||d.stop(),this.pendingAnimation&&(fa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{$m.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Tc(0)),this.currentAnimation=KF(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),l.onUpdate&&l.onUpdate(m)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(a5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:d,latestValues:m}=l;if(!(!c||!h||!d)){if(this!==l&&this.layout&&d&&EP(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||Ne();const y=Nn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const v=Nn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+v}Si(c,h),cc(c,m),jh(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new s5),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const d={};h.z&&gv("z",l,d,this.animationValues);for(let m=0;m<mv.length;m++)gv(`rotate${mv[m]}`,l,d,this.animationValues),gv(`skew${mv[m]}`,l,d,this.animationValues);l.render();for(const m in d)l.setStaticValue(m,d[m]),this.animationValues&&(this.animationValues[m]=d[m]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Km(c==null?void 0:c.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Km(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!mo(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=d.animationValues||d.latestValues;this.applyTransformsToTarget();let y=r5(this.projectionDeltaWithTransform,this.treeScale,m);h&&(y=h(m,y)),l.transform=y;const{x:v,y:T}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${T.origin*100}% 0`,d.animationValues?l.opacity=d===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in cf){if(m[w]===void 0)continue;const{correct:A,applyTo:x,isCSSVariable:k}=cf[w],L=y==="none"?m[w]:A(m[w],d);if(x){const U=x.length;for(let K=0;K<U;K++)l[x[K]]=L}else k?this.options.visualElement.renderState.vars[w]=L:l[w]=L}this.options.layoutId&&(l.pointerEvents=d===this?Km(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(dI),this.root.sharedNodes.clear()}}}function l5(n){n.updateLayout()}function c5(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:a}=n.options,l=t.source!==n.layout.source;a==="size"?wi(y=>{const v=l?t.measuredBox[y]:t.layoutBox[y],T=Nn(v);v.min=i[y].min,v.max=v.min+T}):EP(a,t.layoutBox,i)&&wi(y=>{const v=l?t.measuredBox[y]:t.layoutBox[y],T=Nn(i[y]);v.max=v.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+T)});const c=uc();jh(c,i,t.layoutBox);const h=uc();l?jh(h,n.applyTransform(s,!0),t.measuredBox):jh(h,i,t.layoutBox);const d=!_P(c);let m=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:T}=y;if(v&&T){const w=Ne();Fh(w,t.layoutBox,v.layoutBox);const A=Ne();Fh(A,i,T.layoutBox),vP(w,A)||(m=!0),y.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=w,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:h,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:m})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function u5(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function h5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function f5(n){n.clearSnapshot()}function dI(n){n.clearMeasurements()}function mI(n){n.isLayoutDirty=!1}function d5(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function gI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function m5(n){n.resolveTargetDelta()}function g5(n){n.calcProjection()}function p5(n){n.resetSkewAndRotation()}function y5(n){n.removeLeadSnapshot()}function pI(n,t,e){n.translate=Ae(t.translate,0,e),n.scale=Ae(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function yI(n,t,e,i){n.min=Ae(t.min,e.min,i),n.max=Ae(t.max,e.max,i)}function _5(n,t,e,i){yI(n.x,t.x,e.x,i),yI(n.y,t.y,e.y,i)}function v5(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const b5={duration:.45,ease:[.4,0,.1,1]},_I=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),vI=_I("applewebkit/")&&!_I("chrome/")?Math.round:Ii;function bI(n){n.min=vI(n.min),n.max=vI(n.max)}function T5(n){bI(n.x),bI(n.y)}function EP(n,t,e){return n==="position"||n==="preserve-aspect"&&!IF(hI(t),hI(e),.2)}function E5(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const S5=TP({attachResizeListener:(n,t)=>hf(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pv={current:void 0},SP=TP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!pv.current){const n=new S5({});n.mount(window),n.setOptions({layoutScroll:!0}),pv.current=n}return pv.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),w5={pan:{Feature:zF},drag:{Feature:FF,ProjectionNode:SP,MeasureLayout:gP}};function TI(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,a=i[s];a&&Se.postRender(()=>a(t,Pf(t)))}class A5 extends va{mount(){const{current:t}=this.node;t&&(this.unmount=X6(t,(e,i)=>(TI(this.node,i,"Start"),s=>TI(this.node,s,"End"))))}unmount(){}}class x5 extends va{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cf(hf(this.node.current,"focus",()=>this.onFocus()),hf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function EI(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),a=i[s];a&&Se.postRender(()=>a(t,Pf(t)))}class I5 extends va{mount(){const{current:t}=this.node;t&&(this.unmount=t3(t,(e,i)=>(EI(this.node,i,"Start"),(s,{success:a})=>EI(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vb=new WeakMap,yv=new WeakMap,R5=n=>{const t=Vb.get(n.target);t&&t(n)},C5=n=>{n.forEach(R5)};function D5({root:n,...t}){const e=n||document;yv.has(e)||yv.set(e,{});const i=yv.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(C5,{root:n,...t})),i[s]}function M5(n,t,e){const i=D5(t);return Vb.set(n,e),i.observe(n),()=>{Vb.delete(n),i.unobserve(n)}}const P5={some:0,all:1};class O5 extends va{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:P5[s]},c=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),v=d?m:y;v&&v(h)};return M5(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(k5(t,e))&&this.startObserver()}unmount(){}}function k5({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const N5={inView:{Feature:O5},tap:{Feature:I5},focus:{Feature:x5},hover:{Feature:A5}},V5={layout:{ProjectionNode:SP,MeasureLayout:gP}},L5={...TF,...N5,...w5,...V5},B5=V3(L5,Y3);function wP({name:n,nutrients:t,onEdit:e,onDelete:i,unit:s="g",disableSwipe:a}){const[l,c]=S0.useState(null),h=()=>{let y=0;return t.forEach(v=>{const T=parseFloat(v.total)||0;(v.type==="Carbohydrate"||v.type==="Protein")&&(y+=T*4),v.type==="Fat"&&(y+=T*9)}),Math.round(y)},d=y=>y.charAt(0).toUpperCase()+y.slice(1),m=sj({onSwipedLeft:()=>{a||(c("left"),setTimeout(()=>{i&&i(),c(null)},300))},onSwipedRight:()=>{a||(c("right"),setTimeout(()=>{e&&e(),c(null)},300))},preventScrollOnSwipe:!0,trackMouse:!0});return B.jsxs("div",{...m,className:"position-relative mb-2",children:[l==="left"&&B.jsx("div",{className:"position-absolute top-50 start-100 translate-middle-y text-danger fw-bold",style:{zIndex:1},children:"🗑️"}),l==="right"&&B.jsx("div",{className:"position-absolute top-50 start-0 translate-middle-y text-warning fw-bold",style:{zIndex:1},children:"🖊️"}),B.jsxs(B5.div,{initial:{x:0},animate:{x:l==="left"?-100:l==="right"?100:0},transition:{duration:.3},className:"meal-card text-white p-3 rounded shadow-sm",style:{backgroundColor:"#00bfff17"},children:[B.jsx("p",{className:"MealCardText mb-1 fw-bold",children:n}),B.jsxs("p",{className:"MealCardText mb-1",children:["Calories: ",h()," kcal"]}),t.map((y,v)=>B.jsxs("p",{className:"MealCardText mb-1",children:[d(y.type),": ",y.total," ",s]},v))]})]})}const U5=n=>{const t=Math.floor(n/100)+1,e=n%100,i=100,s=e/i*100;return{level:t,currentXP:e,nextXP:i,percent:s}};function j5({meals:n,onEditMeal:t,onDeleteMeal:e,user:i}){const{level:s,currentXP:a,nextXP:l,percent:c}=U5(i.xp||0),h=new Date().toISOString().split("T")[0],d=A=>n.filter(x=>x.mealType===A&&x.date===h),m=A=>{const x=new Date(A),k=x.getDay(),L=x.getDate()-k+(k===0?-6:1);return new Date(x.setDate(L))},[y,v]=dt.useState(m(new Date)),T=A=>{const x=new Date(y);x.setDate(y.getDate()+A),v(x)},w=A=>new Date(A).toLocaleDateString("en-GB");return B.jsxs("div",{className:"home-container",children:[B.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[B.jsxs("p",{className:"TitleName mb-1",children:["Hello ",i.firstName]}),B.jsxs("div",{className:"text-end",children:[B.jsxs("span",{className:"small fw-bold",style:{color:"deepskyblue"},children:["Level ",s]}),B.jsx("div",{className:"progress",style:{height:"6px",width:"150px",background:"#444"},children:B.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${c}%`,backgroundColor:"deepskyblue"},"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":l})})]})]}),B.jsxs("div",{className:"CalBarCharSection bg-dark",children:[B.jsxs("div",{className:"d-flex col-md-12 mb-2 justify-content-between",children:[B.jsx("p",{className:"SubTitleName mb-0",children:"Calories Consumed"}),B.jsxs("div",{className:"d-flex align-items-center DateRangePicker",children:[B.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>T(-7),children:"◀"}),w(y)," – ",w(new Date(y.getTime()+6*864e5)),B.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>T(7),children:"▶"})]})]}),B.jsx(GD,{meals:n,startOfWeek:y})]}),B.jsxs("div",{className:"TodayChartsSection col-md-12",children:[B.jsxs("div",{className:"CalDonutSection bg-dark",children:[B.jsx("p",{className:"SubTitleName",children:"Calorie Intake"}),B.jsx(KD,{meals:n,selectedDate:h,goal:i.calorieGoal})]}),B.jsxs("div",{className:"NutriDonutSection bg-dark",children:[B.jsx("p",{className:"SubTitleName",children:"Nutrition Intake"}),B.jsx($D,{meals:n,selectedDate:h})]})]}),B.jsx("div",{className:"FoodItemList bg-dark",children:(i.mealOrder||["Breakfast","Lunch","Dinner"]).map(A=>B.jsxs("div",{className:"mb-3",children:[B.jsx("p",{className:"SubTitleName",children:A}),d(A).map(x=>x.foodItems.map((k,L)=>B.jsx(wP,{name:k.name,nutrients:k.nutrients,onEdit:()=>t(x),onDelete:()=>e(x.id),unit:i.unit||"g"},`${A}-${x.id}-${L}`)))]},A))})]})}function F5({meals:n,onEditMeal:t,onDeleteMeal:e}){const i=new Date().toISOString().split("T")[0],[s,a]=dt.useState(i),l=n.filter(h=>h.date===s),c={Breakfast:[],Lunch:[],Dinner:[]};return l.forEach(h=>{c[h.mealType]&&c[h.mealType].push(h)}),B.jsxs("div",{className:"home-container",children:[B.jsx("h4",{className:"mb-2 TitleName",children:"History"}),B.jsx("h5",{className:"SubTitleName",children:"Select a Date"}),B.jsx("input",{type:"date",className:"form-control mb-3",value:s,onChange:h=>a(h.target.value),max:i}),B.jsxs("div",{className:"TodayChartsSection d-flex",children:[B.jsx("div",{className:"CalDonutSection bg-dark",children:B.jsx(KD,{meals:l,selectedDate:s})}),B.jsx("div",{className:"NutriDonutSection bg-dark",children:B.jsx($D,{meals:l,selectedDate:s})})]}),B.jsx("div",{className:"FoodItemList bg-dark mt-2",children:["Breakfast","Lunch","Dinner"].map(h=>B.jsxs("div",{className:"mb-3",children:[B.jsx("h6",{className:"SubTitleName",children:h}),c[h].length===0&&B.jsx("p",{className:"text-muted ms-2",style:{fontSize:"13px"},children:"No meals logged"}),c[h].map((d,m)=>d.foodItems.map((y,v)=>B.jsx(wP,{name:y.name,nutrients:y.nutrients,onEdit:()=>t(d),onDelete:()=>e(d.id)},`${d.id}-${v}`)))]},h))})]})}var _v={exports:{}},SI;function z5(){return SI||(SI=1,function(n){var t=function(e){var i=Object.prototype,s=i.hasOwnProperty,a=Object.defineProperty||function(Z,D,H){Z[D]=H.value},l,c=typeof Symbol=="function"?Symbol:{},h=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function y(Z,D,H){return Object.defineProperty(Z,D,{value:H,enumerable:!0,configurable:!0,writable:!0}),Z[D]}try{y({},"")}catch{y=function(D,H,X){return D[H]=X}}function v(Z,D,H,X){var tt=D&&D.prototype instanceof U?D:U,ft=Object.create(tt.prototype),vt=new G(X||[]);return a(ft,"_invoke",{value:F(Z,H,vt)}),ft}e.wrap=v;function T(Z,D,H){try{return{type:"normal",arg:Z.call(D,H)}}catch(X){return{type:"throw",arg:X}}}var w="suspendedStart",A="suspendedYield",x="executing",k="completed",L={};function U(){}function K(){}function z(){}var nt={};y(nt,h,function(){return this});var O=Object.getPrototypeOf,I=O&&O(O(st([])));I&&I!==i&&s.call(I,h)&&(nt=I);var C=z.prototype=U.prototype=Object.create(nt);K.prototype=z,a(C,"constructor",{value:z,configurable:!0}),a(z,"constructor",{value:K,configurable:!0}),K.displayName=y(z,m,"GeneratorFunction");function P(Z){["next","throw","return"].forEach(function(D){y(Z,D,function(H){return this._invoke(D,H)})})}e.isGeneratorFunction=function(Z){var D=typeof Z=="function"&&Z.constructor;return D?D===K||(D.displayName||D.name)==="GeneratorFunction":!1},e.mark=function(Z){return Object.setPrototypeOf?Object.setPrototypeOf(Z,z):(Z.__proto__=z,y(Z,m,"GeneratorFunction")),Z.prototype=Object.create(C),Z},e.awrap=function(Z){return{__await:Z}};function V(Z,D){function H(ft,vt,yt,Yt){var Vt=T(Z[ft],Z,vt);if(Vt.type==="throw")Yt(Vt.arg);else{var Rt=Vt.arg,kt=Rt.value;return kt&&typeof kt=="object"&&s.call(kt,"__await")?D.resolve(kt.__await).then(function(Xt){H("next",Xt,yt,Yt)},function(Xt){H("throw",Xt,yt,Yt)}):D.resolve(kt).then(function(Xt){Rt.value=Xt,yt(Rt)},function(Xt){return H("throw",Xt,yt,Yt)})}}var X;function tt(ft,vt){function yt(){return new D(function(Yt,Vt){H(ft,vt,Yt,Vt)})}return X=X?X.then(yt,yt):yt()}a(this,"_invoke",{value:tt})}P(V.prototype),y(V.prototype,d,function(){return this}),e.AsyncIterator=V,e.async=function(Z,D,H,X,tt){tt===void 0&&(tt=Promise);var ft=new V(v(Z,D,H,X),tt);return e.isGeneratorFunction(D)?ft:ft.next().then(function(vt){return vt.done?vt.value:ft.next()})};function F(Z,D,H){var X=w;return function(ft,vt){if(X===x)throw new Error("Generator is already running");if(X===k){if(ft==="throw")throw vt;return ut()}for(H.method=ft,H.arg=vt;;){var yt=H.delegate;if(yt){var Yt=N(yt,H);if(Yt){if(Yt===L)continue;return Yt}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(X===w)throw X=k,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);X=x;var Vt=T(Z,D,H);if(Vt.type==="normal"){if(X=H.done?k:A,Vt.arg===L)continue;return{value:Vt.arg,done:H.done}}else Vt.type==="throw"&&(X=k,H.method="throw",H.arg=Vt.arg)}}}function N(Z,D){var H=D.method,X=Z.iterator[H];if(X===l)return D.delegate=null,H==="throw"&&Z.iterator.return&&(D.method="return",D.arg=l,N(Z,D),D.method==="throw")||H!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+H+"' method")),L;var tt=T(X,Z.iterator,D.arg);if(tt.type==="throw")return D.method="throw",D.arg=tt.arg,D.delegate=null,L;var ft=tt.arg;if(!ft)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,L;if(ft.done)D[Z.resultName]=ft.value,D.next=Z.nextLoc,D.method!=="return"&&(D.method="next",D.arg=l);else return ft;return D.delegate=null,L}P(C),y(C,m,"Generator"),y(C,h,function(){return this}),y(C,"toString",function(){return"[object Generator]"});function At(Z){var D={tryLoc:Z[0]};1 in Z&&(D.catchLoc=Z[1]),2 in Z&&(D.finallyLoc=Z[2],D.afterLoc=Z[3]),this.tryEntries.push(D)}function Et(Z){var D=Z.completion||{};D.type="normal",delete D.arg,Z.completion=D}function G(Z){this.tryEntries=[{tryLoc:"root"}],Z.forEach(At,this),this.reset(!0)}e.keys=function(Z){var D=Object(Z),H=[];for(var X in D)H.push(X);return H.reverse(),function tt(){for(;H.length;){var ft=H.pop();if(ft in D)return tt.value=ft,tt.done=!1,tt}return tt.done=!0,tt}};function st(Z){if(Z){var D=Z[h];if(D)return D.call(Z);if(typeof Z.next=="function")return Z;if(!isNaN(Z.length)){var H=-1,X=function tt(){for(;++H<Z.length;)if(s.call(Z,H))return tt.value=Z[H],tt.done=!1,tt;return tt.value=l,tt.done=!0,tt};return X.next=X}}return{next:ut}}e.values=st;function ut(){return{value:l,done:!0}}return G.prototype={constructor:G,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(Et),!Z)for(var D in this)D.charAt(0)==="t"&&s.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=l)},stop:function(){this.done=!0;var Z=this.tryEntries[0],D=Z.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var D=this;function H(Yt,Vt){return ft.type="throw",ft.arg=Z,D.next=Yt,Vt&&(D.method="next",D.arg=l),!!Vt}for(var X=this.tryEntries.length-1;X>=0;--X){var tt=this.tryEntries[X],ft=tt.completion;if(tt.tryLoc==="root")return H("end");if(tt.tryLoc<=this.prev){var vt=s.call(tt,"catchLoc"),yt=s.call(tt,"finallyLoc");if(vt&&yt){if(this.prev<tt.catchLoc)return H(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return H(tt.finallyLoc)}else if(vt){if(this.prev<tt.catchLoc)return H(tt.catchLoc,!0)}else if(yt){if(this.prev<tt.finallyLoc)return H(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Z,D){for(var H=this.tryEntries.length-1;H>=0;--H){var X=this.tryEntries[H];if(X.tryLoc<=this.prev&&s.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var tt=X;break}}tt&&(Z==="break"||Z==="continue")&&tt.tryLoc<=D&&D<=tt.finallyLoc&&(tt=null);var ft=tt?tt.completion:{};return ft.type=Z,ft.arg=D,tt?(this.method="next",this.next=tt.finallyLoc,L):this.complete(ft)},complete:function(Z,D){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&D&&(this.next=D),L},finish:function(Z){for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D];if(H.finallyLoc===Z)return this.complete(H.completion,H.afterLoc),Et(H),L}},catch:function(Z){for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D];if(H.tryLoc===Z){var X=H.completion;if(X.type==="throw"){var tt=X.arg;Et(H)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(Z,D,H){return this.delegate={iterator:st(Z),resultName:D,nextLoc:H},this.method==="next"&&(this.arg=l),L}},e}(n.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(_v)),_v.exports}var vv,wI;function yT(){return wI||(wI=1,vv=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`),vv}var bv,AI;function AP(){if(AI)return bv;AI=1;const n=yT();let t=0;return bv=({id:e,action:i,payload:s={}})=>{let a=e;return typeof a>"u"&&(a=n("Job",t),t+=1),{id:a,action:i,payload:s}},bv}var ph={},xI;function _T(){if(xI)return ph;xI=1;let n=!1;return ph.logging=n,ph.setLogging=t=>{n=t},ph.log=(...t)=>n?console.log.apply(this,t):null,ph}var Tv,II;function H5(){if(II)return Tv;II=1;const n=AP(),{log:t}=_T(),e=yT();let i=0;return Tv=()=>{const s=e("Scheduler",i),a={},l={};let c=[];i+=1;const h=()=>c.length,d=()=>Object.keys(a).length,m=()=>{if(c.length!==0){const A=Object.keys(a);for(let x=0;x<A.length;x+=1)if(typeof l[A[x]]>"u"){c[0](a[A[x]]);break}}},y=(A,x)=>new Promise((k,L)=>{const U=n({action:A,payload:x});c.push(async K=>{c.shift(),l[K.id]=U;try{k(await K[A].apply(this,[...x,U.id]))}catch(z){L(z)}finally{delete l[K.id],m()}}),t(`[${s}]: Add ${U.id} to JobQueue`),t(`[${s}]: JobQueue length=${c.length}`),m()});return{addWorker:A=>(a[A.id]=A,t(`[${s}]: Add ${A.id}`),t(`[${s}]: Number of workers=${d()}`),m(),A.id),addJob:async(A,...x)=>{if(d()===0)throw Error(`[${s}]: You need to have at least one worker before adding jobs`);return y(A,x)},terminate:async()=>{Object.keys(a).forEach(async A=>{await a[A].terminate()}),c=[]},getQueueLen:h,getNumWorkers:d}},Tv}function q5(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ev,RI;function G5(){return RI||(RI=1,Ev=n=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof q5=="function"&&(t.type="node"),typeof n>"u"?t:t[n]}),Ev}var Sv,CI;function K5(){if(CI)return Sv;CI=1;const t=G5()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return Sv=e=>{const i={...e};return["corePath","workerPath","langPath"].forEach(s=>{e[s]&&(i[s]=t(i[s]))}),i},Sv}var wv,DI;function xP(){return DI||(DI=1,wv={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),wv}const $5="6.0.1",W5={version:$5};var Av,MI;function Y5(){return MI||(MI=1,Av={workerBlobURL:!0,logger:()=>{}}),Av}var xv,PI;function X5(){if(PI)return xv;PI=1;const n=W5.version;return xv={...Y5(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},xv}var Iv,OI;function Q5(){return OI||(OI=1,Iv=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const i=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(i))}else e=new Worker(n);return e}),Iv}var Rv,kI;function Z5(){return kI||(kI=1,Rv=n=>{n.terminate()}),Rv}var Cv,NI;function J5(){return NI||(NI=1,Cv=(n,t)=>{n.onmessage=({data:e})=>{t(e)}}),Cv}var Dv,VI;function tz(){return VI||(VI=1,Dv=async(n,t)=>{n.postMessage(t)}),Dv}var Mv,LI;function ez(){if(LI)return Mv;LI=1;const n=e=>new Promise((i,s)=>{const a=new FileReader;a.onload=()=>{i(a.result)},a.onerror=({target:{error:{code:l}}})=>{s(Error(`File could not be read! Code=${l}`))},a.readAsArrayBuffer(e)}),t=async e=>{let i=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?i=atob(e.split(",")[1]).split("").map(s=>s.charCodeAt(0)):i=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(i=await t(e.src)),e.tagName==="VIDEO"&&(i=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(s=>{e.toBlob(async a=>{i=await n(a),s()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const s=await e.convertToBlob();i=await n(s)}else(e instanceof File||e instanceof Blob)&&(i=await n(e));return new Uint8Array(i)};return Mv=t,Mv}var Pv,BI;function nz(){if(BI)return Pv;BI=1;const n=X5(),t=Q5(),e=Z5(),i=J5(),s=tz(),a=ez();return Pv={defaultOptions:n,spawnWorker:t,terminateWorker:e,onMessage:i,send:s,loadImage:a},Pv}var Ov,UI;function IP(){if(UI)return Ov;UI=1;const n=K5(),t=AP(),{log:e}=_T(),i=yT(),s=xP(),{defaultOptions:a,spawnWorker:l,terminateWorker:c,onMessage:h,loadImage:d,send:m}=nz();let y=0;return Ov=async(v="eng",T=s.LSTM_ONLY,w={},A={})=>{const x=i("Worker",y),{logger:k,errorHandler:L,...U}=n({...a,...w}),K={},z=typeof v=="string"?v.split("+"):v;let nt=T,O=A;const I=[s.DEFAULT,s.LSTM_ONLY].includes(T)&&!U.legacyCore;let C,P;const V=new Promise((Rt,kt)=>{P=Rt,C=kt}),F=Rt=>{C(Rt.message)};let N=l(U);N.onerror=F,y+=1;const At=({id:Rt,action:kt,payload:Xt})=>new Promise((Ue,je)=>{e(`[${x}]: Start ${Rt}, action=${kt}`);const rn=`${kt}-${Rt}`;K[rn]={resolve:Ue,reject:je},m(N,{workerId:x,jobId:Rt,action:kt,payload:Xt})}),Et=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),G=Rt=>At(t({id:Rt,action:"load",payload:{options:{lstmOnly:I,corePath:U.corePath,logging:U.logging}}})),st=(Rt,kt,Xt)=>At(t({id:Xt,action:"FS",payload:{method:"writeFile",args:[Rt,kt]}})),ut=(Rt,kt)=>At(t({id:kt,action:"FS",payload:{method:"readFile",args:[Rt,{encoding:"utf8"}]}})),Z=(Rt,kt)=>At(t({id:kt,action:"FS",payload:{method:"unlink",args:[Rt]}})),D=(Rt,kt,Xt)=>At(t({id:Xt,action:"FS",payload:{method:Rt,args:kt}})),H=(Rt,kt)=>At(t({id:kt,action:"loadLanguage",payload:{langs:Rt,options:{langPath:U.langPath,dataPath:U.dataPath,cachePath:U.cachePath,cacheMethod:U.cacheMethod,gzip:U.gzip,lstmOnly:[s.DEFAULT,s.LSTM_ONLY].includes(nt)&&!U.legacyLang}}})),X=(Rt,kt,Xt,Ue)=>At(t({id:Ue,action:"initialize",payload:{langs:Rt,oem:kt,config:Xt}})),tt=(Rt="eng",kt,Xt,Ue)=>{if(I&&[s.TESSERACT_ONLY,s.TESSERACT_LSTM_COMBINED].includes(kt))throw Error("Legacy model requested but code missing.");const je=kt||nt;nt=je;const rn=Xt||O;O=rn;const dr=(typeof Rt=="string"?Rt.split("+"):Rt).filter(Ln=>!z.includes(Ln));return z.push(...dr),dr.length>0?H(dr,Ue).then(()=>X(Rt,je,rn,Ue)):X(Rt,je,rn,Ue)},ft=(Rt={},kt)=>At(t({id:kt,action:"setParameters",payload:{params:Rt}})),vt=async(Rt,kt={},Xt={text:!0},Ue)=>At(t({id:Ue,action:"recognize",payload:{image:await d(Rt),options:kt,output:Xt}})),yt=async(Rt,kt)=>{if(I)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return At(t({id:kt,action:"detect",payload:{image:await d(Rt)}}))},Yt=async()=>(N!==null&&(c(N),N=null),Promise.resolve());h(N,({workerId:Rt,jobId:kt,status:Xt,action:Ue,data:je})=>{const rn=`${Ue}-${kt}`;if(Xt==="resolve")e(`[${Rt}]: Complete ${kt}`),K[rn].resolve({jobId:kt,data:je}),delete K[rn];else if(Xt==="reject")if(K[rn].reject(je),delete K[rn],Ue==="load"&&C(je),L)L(je);else throw Error(je);else Xt==="progress"&&k({...je,userJobId:kt})});const Vt={id:x,worker:N,load:Et,writeText:st,readText:ut,removeFile:Z,FS:D,reinitialize:tt,setParameters:ft,recognize:vt,detect:yt,terminate:Yt};return G().then(()=>H(v)).then(()=>X(v,T,A)).then(()=>P(Vt)).catch(()=>{}),V},Ov}var kv,jI;function iz(){if(jI)return kv;jI=1;const n=IP();return kv={recognize:async(i,s,a)=>{const l=await n(s,1,a);return l.recognize(i).finally(async()=>{await l.terminate()})},detect:async(i,s)=>{const a=await n("osd",0,s);return a.detect(i).finally(async()=>{await a.terminate()})}},kv}var Nv,FI;function sz(){return FI||(FI=1,Nv={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Nv}var Vv,zI;function rz(){return zI||(zI=1,Vv={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Vv}var Lv,HI;function az(){if(HI)return Lv;HI=1,z5();const n=H5(),t=IP(),e=iz(),i=sz(),s=xP(),a=rz(),{setLogging:l}=_T();return Lv={languages:i,OEM:s,PSM:a,createScheduler:n,createWorker:t,setLogging:l,...e},Lv}var oz=az();const lz=JC(oz),cz={Fat:["fat","saturates","of which saturates"],Carbohydrate:["carbohydrate","carb"],Sugar:["sugar","sugars","of which sugars"],Fibre:["fibre","fiber"],Protein:["protein","protien"],Salt:["salt","sodium"]};function uz(n){const t=n.match(/([\d.]+)\s*(g|mg)?/i);if(t){const e=parseFloat(t[1]);if(!isNaN(e)&&e<1e3)return e}return null}function hz(n){const t=n.split(`
`).map(i=>i.trim()).filter(Boolean),e=[];for(const i of t)for(const s of Object.keys(cz))if(i.toLowerCase().includes(s.toLowerCase())){const a=uz(i);a!==null&&!e.find(l=>l.type===s)&&e.push({type:s,count:a.toFixed(2),serving:"1",total:a.toFixed(2)})}return e}function fz({isOpen:n,onClose:t,onSave:e,editMeal:i}){const[s,a]=dt.useState("Breakfast"),[l,c]=dt.useState(new Date),[h,d]=dt.useState([""]),[m,y]=dt.useState([[{type:"Protein",count:"",serving:"1",total:""}]]),[v,T]=dt.useState(!1),[w,A]=dt.useState(!1),[x,k]=dt.useState(!1),L=dt.useRef(null);dt.useEffect(()=>{i&&(F(),a(i.mealType),c(new Date(i.timestamp)),d(i.foodItems.map(G=>G.name)),y(i.foodItems.map(G=>G.nutrients)),T(!0),k(!1),A(!1))},[i]);const U=()=>{F(),y([[{type:"Protein",count:"",serving:"1",total:""}]]),d([""]),c(new Date),T(!1),k(!1),A(!1)},K=G=>{F(),T(G==="manual"),k(G==="auto"),A(G==="scan")},z=()=>{y([...m,[{type:"Protein",count:"",serving:"1",total:""}]]),d([...h,""])},nt=G=>{const st=[...m];st[G].push({type:"Protein",count:"",serving:"1",total:""}),y(st)},O=(G,st)=>{const ut=[...m];ut[G].splice(st,1),y(ut)},I=m.every(G=>G.every(st=>!st.count||parseFloat(st.count)===0)),C=(G,st,ut,Z)=>{const D=[...m],H=D[G];if(ut==="serving")H.forEach(X=>{X.serving=Z;const tt=parseFloat(X.count)||0,ft=parseFloat(Z)||1;X.total=(tt*ft).toFixed(2)});else{const X=H[st];X[ut]=Z;const tt=parseFloat(X.count)||0,ft=parseFloat(X.serving)||1;X.total=(tt*ft).toFixed(2)}y(D)},P=()=>{const G=m.map((ut,Z)=>({name:h[Z]||`Food ${Z+1}`,nutrients:ut})),st={mealType:s,date:l.toISOString().split("T")[0],timestamp:l.toISOString(),foodItems:G};e(st),U(),t()},V=async()=>{K("scan");try{const G=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});L.current&&(L.current.srcObject=G,L.current.play())}catch{alert("Camera access denied."),A(!1)}},F=()=>{const G=L.current;G&&G.srcObject&&(G.srcObject.getTracks().forEach(st=>st.stop()),G.srcObject=null),A(!1)},N=()=>{const G=L.current;if(!G||G.videoWidth===0){alert("Camera not ready yet. Wait a moment.");return}const st=document.createElement("canvas");st.width=G.videoWidth,st.height=G.videoHeight;const ut=st.getContext("2d");ut.drawImage(G,0,0);const Z=ut.getImageData(0,0,st.width,st.height),D=Z.data;for(let H=0;H<D.length;H+=4){const X=(D[H]+D[H+1]+D[H+2])/3;D[H]=X,D[H+1]=X,D[H+2]=X}ut.putImageData(Z,0,0),lz.recognize(st,"eng").then(({data:{text:H}})=>{const X=hz(H);X.length>0?(y([X]),K("manual")):alert("No nutritional values detected. Try again or enter manually."),F()})},At=async(G,st)=>{var ut;try{const H=(ut=(await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(G)}&search_simple=1&action=process&json=1`)).json()).products)==null?void 0:ut.find(vt=>vt.nutriments&&vt.nutriments["energy-kcal_100g"]&&vt.nutriments.proteins_100g);if(!H||!H.nutriments)throw new Error("No valid nutrition info found.");const X=H.nutriments,tt=[X.proteins_100g&&{type:"Protein",count:parseFloat(X.proteins_100g).toFixed(2),serving:"1",total:parseFloat(X.proteins_100g).toFixed(2)},X.fat_100g&&{type:"Fat",count:parseFloat(X.fat_100g).toFixed(2),serving:"1",total:parseFloat(X.fat_100g).toFixed(2)},X.carbohydrates_100g&&{type:"Carbohydrate",count:parseFloat(X.carbohydrates_100g).toFixed(2),serving:"1",total:parseFloat(X.carbohydrates_100g).toFixed(2)},X.sugars_100g&&{type:"Carbs as Sugar",count:parseFloat(X.sugars_100g).toFixed(2),serving:"1",total:parseFloat(X.sugars_100g).toFixed(2)},X.fiber_100g&&{type:"Fibre",count:parseFloat(X.fiber_100g).toFixed(2),serving:"1",total:parseFloat(X.fiber_100g).toFixed(2)},X.salt_100g&&{type:"Salt",count:parseFloat(X.salt_100g).toFixed(2),serving:"1",total:parseFloat(X.salt_100g).toFixed(2)}].filter(Boolean),ft=[...m];ft[st]=tt,y(ft),K("auto")}catch{alert("⚠️ Could not fetch nutrition info. Try a more specific food name.")}};if(!n)return null;return B.jsx("div",{className:"modal-backdrop",children:B.jsxs("div",{className:"modal-container bg-dark",children:[B.jsxs("div",{className:"modal-header col-md-12 mb-2",style:{display:"flex"},children:[B.jsxs("div",{style:{display:"flex",width:"100%",marginRight:"5%",alignItems:"center"},children:[B.jsx("p",{className:"ModelTitleName",children:"Select Meal"}),B.jsxs("select",{className:"DropDownMeal",value:s,onChange:G=>a(G.target.value),children:[B.jsx("option",{children:"Breakfast"}),B.jsx("option",{children:"Lunch"}),B.jsx("option",{children:"Dinner"})]})]}),B.jsx("input",{type:"date",className:"form-control",value:l.toISOString().split("T")[0],onChange:G=>c(new Date(G.target.value)),max:new Date().toISOString().split("T")[0],style:{width:"30%"}})]}),B.jsxs("div",{className:"manual-scan-buttons mb-2",children:[B.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>K("manual"),children:"Manual Entry"}),B.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>K("auto"),children:"Auto Fill"}),B.jsx("button",{className:"btn btn-primary btn-sm",onClick:V,children:"Scan It"})]}),w&&B.jsxs("div",{className:"scan-box text-center",children:[B.jsx("video",{ref:L,style:{width:"100%",maxHeight:"200px"}}),B.jsx("button",{className:"btn btn-primary mt-2",onClick:N,children:"Capture"}),B.jsx("button",{className:"btn btn-danger mt-2 ms-2",onClick:F,children:"Cancel"})]}),v&&Et(),x&&Et(!0),B.jsxs("div",{className:"modal-footer mt-3",children:[B.jsx("button",{className:"btn btn-save btn-primary",onClick:P,disabled:I,children:"Save"}),B.jsx("button",{className:"btn btn-exit btn-danger",onClick:()=>{U(),t()},children:"Exit"})]})]})});function Et(G=!1){return B.jsxs("div",{className:"TotalFoodSection",children:[m.map((st,ut)=>B.jsxs("div",{className:"food-section",children:[B.jsxs("div",{className:"FoodNameSection d-flex align-items-center gap-2",children:[B.jsx("textarea",{className:"FoodNameTextArea",value:h[ut],style:{width:"100%"},onChange:Z=>{const D=[...h];D[ut]=Z.target.value,d(D)},placeholder:"Enter food name (e.g., boiled egg)"}),G&&B.jsx("button",{className:"btn btn-sm btn-info",style:{fontSize:"12px",width:"35%"},onClick:()=>At(h[ut],ut),children:"🔍 Auto-Fill"})]}),B.jsxs("div",{className:"row fw-bold mb-2 text-white",style:{fontSize:"12px",padding:"0 10px"},children:[B.jsx("div",{className:"col",children:"Type"}),B.jsx("div",{className:"col",children:"Count"}),B.jsx("div",{className:"col",children:"Servings"}),B.jsx("div",{className:"col",children:"Total"}),B.jsx("div",{className:"col",children:"Remove"})]}),B.jsx("div",{className:"SplitTable",children:st.map((Z,D)=>B.jsxs("div",{className:"row mb-1",children:[B.jsx("div",{className:"col",children:B.jsxs("select",{className:"form-select",value:Z.type,onChange:H=>C(ut,D,"type",H.target.value),children:[B.jsx("option",{children:"Protein"}),B.jsx("option",{children:"Fat"}),B.jsx("option",{children:"Carbohydrate"}),B.jsx("option",{children:"Carbs as Sugar"}),B.jsx("option",{children:"Fibre"}),B.jsx("option",{children:"Salt"})]})}),B.jsx("div",{className:"col",children:B.jsx("input",{type:"number",className:"form-control",value:Z.count,onChange:H=>C(ut,D,"count",H.target.value)})}),B.jsx("div",{className:"col",children:B.jsx("select",{className:"form-select",value:Z.serving,onChange:H=>C(ut,D,"serving",H.target.value),children:[...Array(10)].map((H,X)=>B.jsx("option",{children:X+1},X+1))})}),B.jsx("div",{className:"col",children:B.jsx("input",{type:"number",className:"form-control",value:Z.total,disabled:!0})}),B.jsx("div",{className:"col text-center",children:B.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>O(ut,D),children:"×"})})]},D))}),B.jsx("button",{className:"AddItemButton mt-1",onClick:()=>nt(ut),children:"Add Nutrient"})]},ut)),B.jsx("button",{className:"AddItemButton mt-3",onClick:z,children:"Add Food Item"})]})}}const dz=()=>{};var qI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},mz=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[e++];t[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[e++],l=n[e++],c=n[e++],h=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(h>>10)),t[i++]=String.fromCharCode(56320+(h&1023))}else{const a=n[e++],l=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return t.join("")},CP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,d=h?n[s+2]:0,m=a>>2,y=(a&3)<<4|c>>4;let v=(c&15)<<2|d>>6,T=d&63;h||(T=64,l||(v=64)),i.push(e[m],e[y],e[v],e[T])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(RP(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):mz(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=e[n.charAt(s++)],c=s<n.length?e[n.charAt(s)]:0;++s;const d=s<n.length?e[n.charAt(s)]:64;++s;const y=s<n.length?e[n.charAt(s)]:64;if(++s,a==null||c==null||d==null||y==null)throw new gz;const v=a<<2|c>>4;if(i.push(v),d!==64){const T=c<<4&240|d>>2;if(i.push(T),y!==64){const w=d<<6&192|y;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pz=function(n){const t=RP(n);return CP.encodeByteArray(t,!0)},DP=function(n){return pz(n).replace(/\./g,"")},MP=function(n){try{return CP.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz=()=>PP().__FIREBASE_DEFAULTS__,_z=()=>{if(typeof process>"u"||typeof qI>"u")return;const n=qI.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&MP(n[1]);return t&&JSON.parse(t)},ap=()=>{try{return dz()||yz()||_z()||vz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bz=n=>{var t,e;return(e=(t=ap())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},OP=()=>{var n;return(n=ap())==null?void 0:n.config},kP=n=>{var t;return(t=ap())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NP(n){return(await fetch(n,{credentials:"include"})).ok}const zh={};function Ez(){const n={prod:[],emulator:[]};for(const t of Object.keys(zh))zh[t]?n.emulator.push(t):n.prod.push(t);return n}function Sz(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let GI=!1;function wz(n,t){if(typeof window>"u"||typeof document>"u"||!$c(window.location.host)||zh[n]===t||zh[n]||GI)return;zh[n]=t;function e(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=Ez().prod.length>0;function l(){const v=document.getElementById(i);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{GI=!0,l()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=Sz(i),T=e("text"),w=document.getElementById(T)||document.createElement("span"),A=e("learnmore"),x=document.getElementById(A)||document.createElement("a"),k=e("preprendIcon"),L=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const U=v.element;c(U),m(x,A);const K=d();h(L,k),U.append(L,w,x,K),document.body.appendChild(U)}a?(w.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Az(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function VP(){var t;const n=(t=ap())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Iz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rz(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BP(){return!VP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UP(){return!VP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function vT(){try{return typeof indexedDB=="object"}catch{return!1}}function jP(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var a;t(((a=s.error)==null?void 0:a.message)||"")}}catch(e){t(e)}})}function Cz(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz="FirebaseError";class zi extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Dz,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,a=this.errors[t],l=a?Mz(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new zi(s,c,i)}}function Mz(n,t){return n.replace(Pz,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const Pz=/\{\$([^}]+)}/g;function Oz(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function ma(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const a=n[s],l=t[s];if(KI(a)&&KI(l)){if(!ma(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function KI(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ih(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(a)}}),t}function Rh(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function kz(n,t){const e=new Nz(n,t);return e.subscribe.bind(e)}class Nz{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Vz(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=Bv),s.error===void 0&&(s.error=Bv),s.complete===void 0&&(s.complete=Bv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vz(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Bv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=1e3,Bz=2,Uz=4*60*60*1e3,jz=.5;function $I(n,t=Lz,e=Bz){const i=t*Math.pow(e,n),s=Math.round(jz*i*(Math.random()-.5)*2);return Math.min(Uz,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n){return n&&n._delegate?n._delegate:n}class ji{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Tz;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Hz(t))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(t=go){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=go){return this.instances.has(t)}getOptions(t=go){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&t(a,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zz(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=go){return this.component?this.component.multipleInstances?t:go:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zz(n){return n===go?void 0:n}function Hz(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Fz(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ht||(Ht={}));const Gz={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},Kz=Ht.INFO,$z={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},Wz=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=$z[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class op{constructor(t){this.name=t,this._logLevel=Kz,this._logHandler=Wz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Gz[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}const Yz=(n,t)=>t.some(e=>n instanceof e);let WI,YI;function Xz(){return WI||(WI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qz(){return YI||(YI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FP=new WeakMap,Lb=new WeakMap,zP=new WeakMap,Uv=new WeakMap,bT=new WeakMap;function Zz(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{e(ra(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&FP.set(e,n)}).catch(()=>{}),bT.set(t,n),t}function Jz(n){if(Lb.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{e(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Lb.set(n,t)}let Bb={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Lb.get(n);if(t==="objectStoreNames")return n.objectStoreNames||zP.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ra(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function t9(n){Bb=n(Bb)}function e9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(jv(this),t,...e);return zP.set(i,t.sort?t.sort():[t]),ra(i)}:Qz().includes(n)?function(...t){return n.apply(jv(this),t),ra(FP.get(this))}:function(...t){return ra(n.apply(jv(this),t))}}function n9(n){return typeof n=="function"?e9(n):(n instanceof IDBTransaction&&Jz(n),Yz(n,Xz())?new Proxy(n,Bb):n)}function ra(n){if(n instanceof IDBRequest)return Zz(n);if(Uv.has(n))return Uv.get(n);const t=n9(n);return t!==n&&(Uv.set(n,t),bT.set(t,n)),t}const jv=n=>bT.get(n);function i9(n,t,{blocked:e,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,t),c=ra(l);return i&&l.addEventListener("upgradeneeded",h=>{i(ra(l.result),h.oldVersion,h.newVersion,ra(l.transaction),h)}),e&&l.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const s9=["get","getKey","getAll","getAllKeys","count"],r9=["put","add","delete","clear"],Fv=new Map;function XI(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Fv.get(t))return Fv.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=r9.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||s9.includes(e)))return;const a=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[e](...c),s&&h.done]))[0]};return Fv.set(t,a),a}t9(n=>({...n,get:(t,e,i)=>XI(t,e)||n.get(t,e,i),has:(t,e)=>!!XI(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(o9(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function o9(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ub="@firebase/app",QI="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new op("@firebase/app"),l9="@firebase/app-compat",c9="@firebase/analytics-compat",u9="@firebase/analytics",h9="@firebase/app-check-compat",f9="@firebase/app-check",d9="@firebase/auth",m9="@firebase/auth-compat",g9="@firebase/database",p9="@firebase/data-connect",y9="@firebase/database-compat",_9="@firebase/functions",v9="@firebase/functions-compat",b9="@firebase/installations",T9="@firebase/installations-compat",E9="@firebase/messaging",S9="@firebase/messaging-compat",w9="@firebase/performance",A9="@firebase/performance-compat",x9="@firebase/remote-config",I9="@firebase/remote-config-compat",R9="@firebase/storage",C9="@firebase/storage-compat",D9="@firebase/firestore",M9="@firebase/ai",P9="@firebase/firestore-compat",O9="firebase",k9="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="[DEFAULT]",N9={[Ub]:"fire-core",[l9]:"fire-core-compat",[u9]:"fire-analytics",[c9]:"fire-analytics-compat",[f9]:"fire-app-check",[h9]:"fire-app-check-compat",[d9]:"fire-auth",[m9]:"fire-auth-compat",[g9]:"fire-rtdb",[p9]:"fire-data-connect",[y9]:"fire-rtdb-compat",[_9]:"fire-fn",[v9]:"fire-fn-compat",[b9]:"fire-iid",[T9]:"fire-iid-compat",[E9]:"fire-fcm",[S9]:"fire-fcm-compat",[w9]:"fire-perf",[A9]:"fire-perf-compat",[x9]:"fire-rc",[I9]:"fire-rc-compat",[R9]:"fire-gcs",[C9]:"fire-gcs-compat",[D9]:"fire-fst",[P9]:"fire-fst-compat",[M9]:"fire-vertex","fire-js":"fire-js",[O9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Map,V9=new Map,Fb=new Map;function ZI(n,t){try{n.container.addComponent(t)}catch(e){or.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ts(n){const t=n.name;if(Fb.has(t))return or.debug(`There were multiple attempts to register component ${t}.`),!1;Fb.set(t,n);for(const e of xg.values())ZI(e,n);for(const e of V9.values())ZI(e,n);return!0}function Wo(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ai(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new $o("app","Firebase",L9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=k9;function HP(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:jb,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw aa.create("bad-app-name",{appName:String(s)});if(e||(e=OP()),!e)throw aa.create("no-options");const a=xg.get(s);if(a){if(ma(e,a.options)&&ma(i,a.config))return a;throw aa.create("duplicate-app",{appName:s})}const l=new qz(s);for(const h of Fb.values())l.addComponent(h);const c=new B9(e,i,l);return xg.set(s,c),c}function qP(n=jb){const t=xg.get(n);if(!t&&n===jb&&OP())return HP();if(!t)throw aa.create("no-app",{appName:n});return t}function Ri(n,t,e){let i=N9[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${t}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Ts(new ji(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="firebase-heartbeat-database",j9=1,ff="firebase-heartbeat-store";let zv=null;function GP(){return zv||(zv=i9(U9,j9,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ff)}catch(e){console.warn(e)}}}}).catch(n=>{throw aa.create("idb-open",{originalErrorMessage:n.message})})),zv}async function F9(n){try{const e=(await GP()).transaction(ff),i=await e.objectStore(ff).get(KP(n));return await e.done,i}catch(t){if(t instanceof zi)or.warn(t.message);else{const e=aa.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});or.warn(e.message)}}}async function JI(n,t){try{const i=(await GP()).transaction(ff,"readwrite");await i.objectStore(ff).put(t,KP(n)),await i.done}catch(e){if(e instanceof zi)or.warn(e.message);else{const i=aa.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});or.warn(i.message)}}}function KP(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=1024,H9=30;class q9{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new K9(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tR();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>H9){const l=$9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){or.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tR(),{heartbeatsToSend:i,unsentEntries:s}=G9(this._heartbeatsCache.heartbeats),a=DP(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return or.warn(e),""}}}function tR(){return new Date().toISOString().substring(0,10)}function G9(n,t=z9){const e=[];let i=n.slice();for(const s of n){const a=e.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),eR(e)>t){a.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),eR(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class K9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vT()?jP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await F9(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return JI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return JI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function eR(n){return DP(JSON.stringify({version:2,heartbeats:n})).length}function $9(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(n){Ts(new ji("platform-logger",t=>new a9(t),"PRIVATE")),Ts(new ji("heartbeat",t=>new q9(t),"PRIVATE")),Ri(Ub,QI,n),Ri(Ub,QI,"esm2020"),Ri("fire-js","")}W9("");var Y9="firebase",X9="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ri(Y9,X9,"app");const Q9=(n,t)=>t.some(e=>n instanceof e);let nR,iR;function Z9(){return nR||(nR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J9(){return iR||(iR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $P=new WeakMap,zb=new WeakMap,WP=new WeakMap,Hv=new WeakMap,TT=new WeakMap;function t8(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{e(oa(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&$P.set(e,n)}).catch(()=>{}),TT.set(t,n),t}function e8(n){if(zb.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{e(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});zb.set(n,t)}let Hb={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return zb.get(n);if(t==="objectStoreNames")return n.objectStoreNames||WP.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return oa(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function n8(n){Hb=n(Hb)}function i8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(qv(this),t,...e);return WP.set(i,t.sort?t.sort():[t]),oa(i)}:J9().includes(n)?function(...t){return n.apply(qv(this),t),oa($P.get(this))}:function(...t){return oa(n.apply(qv(this),t))}}function s8(n){return typeof n=="function"?i8(n):(n instanceof IDBTransaction&&e8(n),Q9(n,Z9())?new Proxy(n,Hb):n)}function oa(n){if(n instanceof IDBRequest)return t8(n);if(Hv.has(n))return Hv.get(n);const t=s8(n);return t!==n&&(Hv.set(n,t),TT.set(t,n)),t}const qv=n=>TT.get(n);function r8(n,t,{blocked:e,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,t),c=oa(l);return i&&l.addEventListener("upgradeneeded",h=>{i(oa(l.result),h.oldVersion,h.newVersion,oa(l.transaction),h)}),e&&l.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const a8=["get","getKey","getAll","getAllKeys","count"],o8=["put","add","delete","clear"],Gv=new Map;function sR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Gv.get(t))return Gv.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=o8.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||a8.includes(e)))return;const a=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[e](...c),s&&h.done]))[0]};return Gv.set(t,a),a}n8(n=>({...n,get:(t,e,i)=>sR(t,e)||n.get(t,e,i),has:(t,e)=>!!sR(t,e)||n.has(t,e)}));const YP="@firebase/installations",ET="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1e4,QP=`w:${ET}`,ZP="FIS_v2",l8="https://firebaseinstallations.googleapis.com/v1",c8=60*60*1e3,u8="installations",h8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vo=new $o(u8,h8,f8);function JP(n){return n instanceof zi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO({projectId:n}){return`${l8}/projects/${n}/installations`}function eO(n){return{token:n.token,requestStatus:2,expiresIn:m8(n.expiresIn),creationTime:Date.now()}}async function nO(n,t){const i=(await t.json()).error;return Vo.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function iO({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function d8(n,{refreshToken:t}){const e=iO(n);return e.append("Authorization",g8(t)),e}async function sO(n){const t=await n();return t.status>=500&&t.status<600?n():t}function m8(n){return Number(n.replace("s","000"))}function g8(n){return`${ZP} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p8({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=tO(n),s=iO(n),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const l={fid:e,authVersion:ZP,appId:n.appId,sdkVersion:QP},c={method:"POST",headers:s,body:JSON.stringify(l)},h=await sO(()=>fetch(i,c));if(h.ok){const d=await h.json();return{fid:d.fid||e,registrationStatus:2,refreshToken:d.refreshToken,authToken:eO(d.authToken)}}else throw await nO("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=/^[cdef][\w-]{21}$/,qb="";function v8(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=b8(n);return _8.test(e)?e:qb}catch{return qb}}function b8(n){return y8(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new Map;function oO(n,t){const e=lp(n);lO(e,t),T8(e,t)}function lO(n,t){const e=aO.get(n);if(e)for(const i of e)i(t)}function T8(n,t){const e=E8();e&&e.postMessage({key:n,fid:t}),S8()}let Ao=null;function E8(){return!Ao&&"BroadcastChannel"in self&&(Ao=new BroadcastChannel("[Firebase] FID Change"),Ao.onmessage=n=>{lO(n.data.key,n.data.fid)}),Ao}function S8(){aO.size===0&&Ao&&(Ao.close(),Ao=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8="firebase-installations-database",A8=1,Lo="firebase-installations-store";let Kv=null;function ST(){return Kv||(Kv=r8(w8,A8,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Lo)}}})),Kv}async function Ig(n,t){const e=lp(n),s=(await ST()).transaction(Lo,"readwrite"),a=s.objectStore(Lo),l=await a.get(e);return await a.put(t,e),await s.done,(!l||l.fid!==t.fid)&&oO(n,t.fid),t}async function cO(n){const t=lp(n),i=(await ST()).transaction(Lo,"readwrite");await i.objectStore(Lo).delete(t),await i.done}async function cp(n,t){const e=lp(n),s=(await ST()).transaction(Lo,"readwrite"),a=s.objectStore(Lo),l=await a.get(e),c=t(l);return c===void 0?await a.delete(e):await a.put(c,e),await s.done,c&&(!l||l.fid!==c.fid)&&oO(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(n){let t;const e=await cp(n.appConfig,i=>{const s=x8(i),a=I8(n,s);return t=a.registrationPromise,a.installationEntry});return e.fid===qb?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function x8(n){const t=n||{fid:v8(),registrationStatus:0};return uO(t)}function I8(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vo.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=R8(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:C8(n)}:{installationEntry:t}}async function R8(n,t){try{const e=await p8(n,t);return Ig(n.appConfig,e)}catch(e){throw JP(e)&&e.customData.serverCode===409?await cO(n.appConfig):await Ig(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function C8(n){let t=await rR(n.appConfig);for(;t.registrationStatus===1;)await rO(100),t=await rR(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await wT(n);return i||e}return t}function rR(n){return cp(n,t=>{if(!t)throw Vo.create("installation-not-found");return uO(t)})}function uO(n){return D8(n)?{fid:n.fid,registrationStatus:0}:n}function D8(n){return n.registrationStatus===1&&n.registrationTime+XP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M8({appConfig:n,heartbeatServiceProvider:t},e){const i=P8(n,e),s=d8(n,e),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const l={installation:{sdkVersion:QP,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},h=await sO(()=>fetch(i,c));if(h.ok){const d=await h.json();return eO(d)}else throw await nO("Generate Auth Token",h)}function P8(n,{fid:t}){return`${tO(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(n,t=!1){let e;const i=await cp(n.appConfig,a=>{if(!hO(a))throw Vo.create("not-registered");const l=a.authToken;if(!t&&N8(l))return a;if(l.requestStatus===1)return e=O8(n,t),a;{if(!navigator.onLine)throw Vo.create("app-offline");const c=L8(a);return e=k8(n,c),c}});return e?await e:i.authToken}async function O8(n,t){let e=await aR(n.appConfig);for(;e.authToken.requestStatus===1;)await rO(100),e=await aR(n.appConfig);const i=e.authToken;return i.requestStatus===0?AT(n,t):i}function aR(n){return cp(n,t=>{if(!hO(t))throw Vo.create("not-registered");const e=t.authToken;return B8(e)?{...t,authToken:{requestStatus:0}}:t})}async function k8(n,t){try{const e=await M8(n,t),i={...t,authToken:e};return await Ig(n.appConfig,i),e}catch(e){if(JP(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await cO(n.appConfig);else{const i={...t,authToken:{requestStatus:0}};await Ig(n.appConfig,i)}throw e}}function hO(n){return n!==void 0&&n.registrationStatus===2}function N8(n){return n.requestStatus===2&&!V8(n)}function V8(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+c8}function L8(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function B8(n){return n.requestStatus===1&&n.requestTime+XP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8(n){const t=n,{installationEntry:e,registrationPromise:i}=await wT(t);return i?i.catch(console.error):AT(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(n,t=!1){const e=n;return await F8(e),(await AT(e,t)).token}async function F8(n){const{registrationPromise:t}=await wT(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(n){if(!n||!n.options)throw $v("App Configuration");if(!n.name)throw $v("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw $v(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function $v(n){return Vo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="installations",H8="installations-internal",q8=n=>{const t=n.getProvider("app").getImmediate(),e=z8(t),i=Wo(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},G8=n=>{const t=n.getProvider("app").getImmediate(),e=Wo(t,fO).getImmediate();return{getId:()=>U8(e),getToken:s=>j8(e,s)}};function K8(){Ts(new ji(fO,q8,"PUBLIC")),Ts(new ji(H8,G8,"PRIVATE"))}K8();Ri(YP,ET);Ri(YP,ET,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="analytics",$8="firebase_id",W8="origin",Y8=60*1e3,X8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xT="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new op("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},oi=new $o("analytics","Analytics",Q8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(n){if(!n.startsWith(xT)){const t=oi.create("invalid-gtag-resource",{gtagURL:n});return Wn.warn(t.message),""}return n}function dO(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function J8(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function tH(n,t){const e=J8("firebase-js-sdk-policy",{createScriptURL:Z8}),i=document.createElement("script"),s=`${xT}?l=${n}&id=${t}`;i.src=e?e==null?void 0:e.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function eH(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function nH(n,t,e,i,s,a){const l=i[s];try{if(l)await t[l];else{const h=(await dO(e)).find(d=>d.measurementId===s);h&&await t[h.appId]}}catch(c){Wn.error(c)}n("config",s,a)}async function iH(n,t,e,i,s){try{let a=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const c=await dO(e);for(const h of l){const d=c.find(y=>y.measurementId===h),m=d&&t[d.appId];if(m)a.push(m);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),n("event",i,s||{})}catch(a){Wn.error(a)}}function sH(n,t,e,i){async function s(a,...l){try{if(a==="event"){const[c,h]=l;await iH(n,t,e,c,h)}else if(a==="config"){const[c,h]=l;await nH(n,t,e,i,c,h)}else if(a==="consent"){const[c,h]=l;n("consent",c,h)}else if(a==="get"){const[c,h,d]=l;n("get",c,h,d)}else if(a==="set"){const[c]=l;n("set",c)}else n(a,...l)}catch(c){Wn.error(c)}}return s}function rH(n,t,e,i,s){let a=function(...l){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=sH(a,n,t,e),{gtagCore:a,wrappedGtag:window[s]}}function aH(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(xT)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=30,lH=1e3;class cH{constructor(t={},e=lH){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const mO=new cH;function uH(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function hH(n){var l;const{appId:t,apiKey:e}=n,i={method:"GET",headers:uH(e)},s=X8.replace("{app-id}",t),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let c="";try{const h=await a.json();(l=h.error)!=null&&l.message&&(c=h.error.message)}catch{}throw oi.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function fH(n,t=mO,e){const{appId:i,apiKey:s,measurementId:a}=n.options;if(!i)throw oi.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:i};throw oi.create("no-api-key")}const l=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new gH;return setTimeout(async()=>{c.abort()},Y8),gO({appId:i,apiKey:s,measurementId:a},l,c,t)}async function gO(n,{throttleEndTimeMillis:t,backoffCount:e},i,s=mO){var c;const{appId:a,measurementId:l}=n;try{await dH(i,t)}catch(h){if(l)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:l};throw h}try{const h=await hH(n);return s.deleteThrottleMetadata(a),h}catch(h){const d=h;if(!mH(d)){if(s.deleteThrottleMetadata(a),l)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:l};throw h}const m=Number((c=d==null?void 0:d.customData)==null?void 0:c.httpStatus)===503?$I(e,s.intervalMillis,oH):$I(e,s.intervalMillis),y={throttleEndTimeMillis:Date.now()+m,backoffCount:e+1};return s.setThrottleMetadata(a,y),Wn.debug(`Calling attemptFetch again in ${m} millis`),gO(n,y,i,s)}}function dH(n,t){return new Promise((e,i)=>{const s=Math.max(t-Date.now(),0),a=setTimeout(e,s);n.addEventListener(()=>{clearTimeout(a),i(oi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function mH(n){if(!(n instanceof zi)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class gH{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function pH(n,t,e,i,s){if(s&&s.global){n("event",e,i);return}else{const a=await t,l={...i,send_to:a};n("event",e,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yH(){if(vT())try{await jP()}catch(n){return Wn.warn(oi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Wn.warn(oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _H(n,t,e,i,s,a,l){const c=fH(n);c.then(v=>{e[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Wn.error(v)),t.push(c);const h=yH().then(v=>{if(v)return i.getId()}),[d,m]=await Promise.all([c,h]);aH(a)||tH(a,d.measurementId),s("js",new Date);const y=(l==null?void 0:l.config)??{};return y[W8]="firebase",y.update=!0,m!=null&&(y[$8]=m),s("config",d.measurementId,y),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(t){this.app=t}_delete(){return delete Hh[this.app.options.appId],Promise.resolve()}}let Hh={},oR=[];const lR={};let Wv="dataLayer",bH="gtag",cR,pO,uR=!1;function TH(){const n=[];if(LP()&&n.push("This is a browser extension environment."),Cz()||n.push("Cookies are not available."),n.length>0){const t=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),e=oi.create("invalid-analytics-context",{errorInfo:t});Wn.warn(e.message)}}function EH(n,t,e){TH();const i=n.options.appId;if(!i)throw oi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw oi.create("no-api-key");if(Hh[i]!=null)throw oi.create("already-exists",{id:i});if(!uR){eH(Wv);const{wrappedGtag:a,gtagCore:l}=rH(Hh,oR,lR,Wv,bH);pO=a,cR=l,uR=!0}return Hh[i]=_H(n,oR,lR,t,cR,Wv,e),new vH(n)}function SH(n=qP()){n=dn(n);const t=Wo(n,Rg);return t.isInitialized()?t.getImmediate():wH(n)}function wH(n,t={}){const e=Wo(n,Rg);if(e.isInitialized()){const s=e.getImmediate();if(ma(t,e.getOptions()))return s;throw oi.create("already-initialized")}return e.initialize({options:t})}function AH(n,t,e,i){n=dn(n),pH(pO,Hh[n.app.options.appId],t,e,i).catch(s=>Wn.error(s))}const hR="@firebase/analytics",fR="0.10.18";function xH(){Ts(new ji(Rg,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return EH(i,s,e)},"PUBLIC")),Ts(new ji("analytics-internal",n,"PRIVATE")),Ri(hR,fR),Ri(hR,fR,"esm2020");function n(t){try{const e=t.getProvider(Rg).getImmediate();return{logEvent:(i,s,a)=>AH(e,i,s,a)}}catch(e){throw oi.create("interop-component-reg-failed",{reason:e})}}}xH();function yO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IH=yO,_O=new $o("auth","Firebase",yO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=new op("@firebase/auth");function RH(n,...t){Cg.logLevel<=Ht.WARN&&Cg.warn(`Auth (${Wc}): ${n}`,...t)}function Wm(n,...t){Cg.logLevel<=Ht.ERROR&&Cg.error(`Auth (${Wc}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,...t){throw IT(n,...t)}function ps(n,...t){return IT(n,...t)}function vO(n,t,e){const i={...IH(),[t]:e};return new $o("auth","Firebase",i).create(t,{appName:n.name})}function sr(n){return vO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IT(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return _O.create(n,...t)}function Dt(n,t,...e){if(!n)throw IT(t,...e)}function er(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Wm(t),new Error(t)}function lr(n,t){n||er(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function CH(){return dR()==="http:"||dR()==="https:"}function dR(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CH()||LP()||"connection"in navigator)?navigator.onLine:!0}function MH(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t,e){this.shortDelay=t,this.longDelay=e,lr(e>t,"Short delay should be less than long delay!"),this.isMobile=Az()||Iz()}get(){return DH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n,t){lr(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kH=new kf(3e4,6e4);function ba(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Ta(n,t,e,i,s={}){return TO(n,s,async()=>{let a={},l={};i&&(t==="GET"?l=i:a={body:JSON.stringify(i)});const c=Of({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d={method:t,headers:h,...a};return xz()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&$c(n.emulatorConfig.host)&&(d.credentials="include"),bO.fetch()(await EO(n,n.config.apiHost,e,c),d)})}async function TO(n,t,e){n._canInitEmulator=!1;const i={...PH,...t};try{const s=new VH(n),a=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Dm(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dm(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Dm(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Dm(n,"user-disabled",l);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vO(n,m,d);Fi(n,m)}}catch(s){if(s instanceof zi)throw s;Fi(n,"network-request-failed",{message:String(s)})}}async function Nf(n,t,e,i,s={}){const a=await Ta(n,t,e,i,s);return"mfaPendingCredential"in a&&Fi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function EO(n,t,e,i){const s=`${t}${e}?${i}`,a=n,l=a.config.emulator?RT(n.config,s):`${n.config.apiScheme}://${s}`;return OH.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function NH(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(ps(this.auth,"network-request-failed")),kH.get())})}}function Dm(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=ps(n,t,i);return s.customData._tokenResponse=e,s}function mR(n){return n!==void 0&&n.enterprise!==void 0}class LH{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return NH(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BH(n,t){return Ta(n,"GET","/v2/recaptchaConfig",ba(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UH(n,t){return Ta(n,"POST","/v1/accounts:delete",t)}async function Dg(n,t){return Ta(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jH(n,t=!1){const e=dn(n),i=await e.getIdToken(t),s=CT(i);Dt(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:qh(Yv(s.auth_time)),issuedAtTime:qh(Yv(s.iat)),expirationTime:qh(Yv(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Yv(n){return Number(n)*1e3}function CT(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Wm("JWT malformed, contained fewer than 3 sections"),null;try{const s=MP(e);return s?JSON.parse(s):(Wm("Failed to decode base64 JWT payload"),null)}catch(s){return Wm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function gR(n){const t=CT(n);return Dt(t,"internal-error"),Dt(typeof t.exp<"u","internal-error"),Dt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof zi&&FH(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function FH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=qh(this.lastLoginAt),this.creationTime=qh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(n){var y;const t=n.auth,e=await n.getIdToken(),i=await df(n,Dg(t,{idToken:e}));Dt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=(y=s.providerUserInfo)!=null&&y.length?SO(s.providerUserInfo):[],l=qH(n.providerData,a),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Kb(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function HH(n){const t=dn(n);await Mg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qH(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function SO(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GH(n,t){const e=await TO(n,{},async()=>{const i=Of({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await EO(n,s,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:i};return n.emulatorConfig&&$c(n.emulatorConfig.host)&&(h.credentials="include"),bO.fetch()(l,h)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function KH(n,t){return Ta(n,"POST","/v2/accounts:revokeToken",ba(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Dt(t.idToken,"internal-error"),Dt(typeof t.idToken<"u","internal-error"),Dt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):gR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Dt(t.length!==0,"internal-error");const e=gR(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:a}=await GH(t,e);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:a}=e,l=new gc;return i&&(Dt(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),s&&(Dt(typeof s=="string","internal-error",{appName:t}),l.accessToken=s),a&&(Dt(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new gc,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(n,t){Dt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Bi{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new zH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await df(this,this.stsTokenManager.getToken(this.auth,t));return Dt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return jH(this,t)}reload(){return HH(this)}_assign(t){this!==t&&(Dt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Bi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Mg(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(sr(this.auth));const t=await this.getIdToken();return await df(this,UH(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,a=e.phoneNumber??void 0,l=e.photoURL??void 0,c=e.tenantId??void 0,h=e._redirectEventId??void 0,d=e.createdAt??void 0,m=e.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:T,providerData:w,stsTokenManager:A}=e;Dt(y&&A,t,"internal-error");const x=gc.fromJSON(this.name,A);Dt(typeof y=="string",t,"internal-error"),zr(i,t.name),zr(s,t.name),Dt(typeof v=="boolean",t,"internal-error"),Dt(typeof T=="boolean",t,"internal-error"),zr(a,t.name),zr(l,t.name),zr(c,t.name),zr(h,t.name),zr(d,t.name),zr(m,t.name);const k=new Bi({uid:y,auth:t,email:s,emailVerified:v,displayName:i,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:x,createdAt:d,lastLoginAt:m});return w&&Array.isArray(w)&&(k.providerData=w.map(L=>({...L}))),h&&(k._redirectEventId=h),k}static async _fromIdTokenResponse(t,e,i=!1){const s=new gc;s.updateFromServerResponse(e);const a=new Bi({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Mg(a),a}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];Dt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?SO(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new gc;c.updateFromIdToken(i);const h=new Bi({uid:s.localId,auth:t,stsTokenManager:c,isAnonymous:l}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new Map;function nr(n){lr(n instanceof Function,"Expected a class definition");let t=pR.get(n);return t?(lr(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,pR.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}wO.type="NONE";const yR=wO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n,t,e){return`firebase:${n}:${t}:${e}`}class pc{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Ym(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ym("persistence",s.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Dg(this.auth,{idToken:t}).catch(()=>{});return e?Bi._fromGetAccountInfoResponse(this.auth,e,t):null}return Bi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new pc(nr(yR),t,i);const s=(await Promise.all(e.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||nr(yR);const l=Ym(i,t.config.apiKey,t.name);let c=null;for(const d of e)try{const m=await d._get(l);if(m){let y;if(typeof m=="string"){const v=await Dg(t,{idToken:m}).catch(()=>{});if(!v)break;y=await Bi._fromGetAccountInfoResponse(t,v,m)}else y=Bi._fromJSON(t,m);d!==a&&(c=y),a=d;break}}catch{}const h=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new pc(a,t,i):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(e.map(async d=>{if(d!==a)try{await d._remove(l)}catch{}})),new pc(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(RO(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(AO(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(DO(t))return"Blackberry";if(MO(t))return"Webos";if(xO(t))return"Safari";if((t.includes("chrome/")||IO(t))&&!t.includes("edge/"))return"Chrome";if(CO(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function AO(n=nn()){return/firefox\//i.test(n)}function xO(n=nn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function IO(n=nn()){return/crios\//i.test(n)}function RO(n=nn()){return/iemobile/i.test(n)}function CO(n=nn()){return/android/i.test(n)}function DO(n=nn()){return/blackberry/i.test(n)}function MO(n=nn()){return/webos/i.test(n)}function DT(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $H(n=nn()){var t;return DT(n)&&!!((t=window.navigator)!=null&&t.standalone)}function WH(){return Rz()&&document.documentMode===10}function PO(n=nn()){return DT(n)||CO(n)||MO(n)||DO(n)||/windows phone/i.test(n)||RO(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(n,t=[]){let e;switch(n){case"Browser":e=_R(nn());break;case"Worker":e=`${_R(nn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Wc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=a=>new Promise((l,c)=>{try{const h=t(a);l(h)}catch(h){c(h)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XH(n,t={}){return Ta(n,"GET","/v2/passwordPolicy",ba(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH=6;class ZH{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??QH,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vR(this),this.idTokenSubscription=new vR(this),this.beforeStateQueue=new YH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_O,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=nr(e)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await pc.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Dg(this,{idToken:t}),i=await Bi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var a;if(Ai(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(t);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Mg(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=MH()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ai(this.app))return Promise.reject(sr(this));const e=t?dn(t):null;return e&&Dt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Dt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ai(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await XH(this),e=new ZH(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $o("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await KH(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&nr(t)||this._popupRedirectResolver;Dt(e,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[nr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof e=="function"){const h=t.addObserver(e,i,s);return()=>{l=!0,h()}}else{const h=t.addObserver(e);return()=>{l=!0,h()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=OO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&RH(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yo(n){return dn(n)}class vR{constructor(t){this.auth=t,this.observer=null,this.addObserver=kz(e=>this.observer=e)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tq(n){up=n}function kO(n){return up.loadJS(n)}function eq(){return up.recaptchaEnterpriseScript}function nq(){return up.gapiScript}function iq(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sq{constructor(){this.enterprise=new rq}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class rq{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const aq="recaptcha-enterprise",NO="NO_RECAPTCHA";class oq{constructor(t){this.type=aq,this.auth=Yo(t)}async verify(t="verify",e=!1){async function i(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{BH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new LH(h);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,l(d.siteKey)}}).catch(h=>{c(h)})})}function s(a,l,c){const h=window.grecaptcha;mR(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:t}).then(d=>{l(d)}).catch(()=>{l(NO)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sq().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!e&&mR(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=eq();h.length!==0&&(h+=c),kO(h).then(()=>{s(c,a,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function bR(n,t,e,i=!1,s=!1){const a=new oq(n);let l;if(s)l=NO;else try{l=await a.verify(e)}catch{l=await a.verify(e,!0)}const c={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function $b(n,t,e,i,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await bR(n,t,e,e==="getOobCode");return i(n,l)}else return i(n,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await bR(n,t,e,e==="getOobCode");return i(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(n,t){const e=Wo(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),a=e.getOptions();if(ma(a,t??{}))return s;Fi(s,"already-initialized")}return e.initialize({options:t})}function cq(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(nr);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function uq(n,t,e){const i=Yo(n);Dt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,a=VO(t),{host:l,port:c}=hq(t),h=c===null?"":`:${c}`,d={url:`${a}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Dt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Dt(ma(d,i.config.emulator)&&ma(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,$c(l)?(NP(`${a}//${l}${h}`),wz("Auth",!0)):fq()}function VO(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function hq(n){const t=VO(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:TR(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:TR(l)}}}function TR(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function fq(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return er("not implemented")}_getIdTokenResponse(t){return er("not implemented")}_linkToIdToken(t,e){return er("not implemented")}_getReauthenticationResolver(t){return er("not implemented")}}async function dq(n,t){return Ta(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mq(n,t){return Nf(n,"POST","/v1/accounts:signInWithPassword",ba(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gq(n,t){return Nf(n,"POST","/v1/accounts:signInWithEmailLink",ba(n,t))}async function pq(n,t){return Nf(n,"POST","/v1/accounts:signInWithEmailLink",ba(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends MT{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new mf(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new mf(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $b(t,e,"signInWithPassword",mq);case"emailLink":return gq(t,{email:this._email,oobCode:this._password});default:Fi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $b(t,i,"signUpPassword",dq);case"emailLink":return pq(t,{idToken:e,email:this._email,oobCode:this._password});default:Fi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n,t){return Nf(n,"POST","/v1/accounts:signInWithIdp",ba(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq="http://localhost";class Bo extends MT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Bo(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Fi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...a}=e;if(!i||!s)return null;const l=new Bo(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const e=this.buildRequest();return yc(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,yc(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,yc(t,e)}buildRequest(){const t={requestUri:yq,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Of(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vq(n){const t=Ih(Rh(n)).link,e=t?Ih(Rh(t)).deep_link_id:null,i=Ih(Rh(n)).deep_link_id;return(i?Ih(Rh(i)).link:null)||i||e||t||n}class PT{constructor(t){const e=Ih(Rh(t)),i=e.apiKey??null,s=e.oobCode??null,a=_q(e.mode??null);Dt(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=vq(t);try{return new PT(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.providerId=Yc.PROVIDER_ID}static credential(t,e){return mf._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=PT.parseLink(e);return Dt(i,"argument-error"),mf._fromEmailAndCode(t,i.code,i.tenantId)}}Yc.PROVIDER_ID="password";Yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends LO{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Vf{constructor(){super("facebook.com")}static credential(t){return Bo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wr.credentialFromTaggedObject(t)}static credentialFromError(t){return Wr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wr.credential(t.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Vf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Bo._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Yr.credentialFromTaggedObject(t)}static credentialFromError(t){return Yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Yr.credential(e,i)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Vf{constructor(){super("github.com")}static credential(t){return Bo._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xr.credentialFromTaggedObject(t)}static credentialFromError(t){return Xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xr.credential(t.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Vf{constructor(){super("twitter.com")}static credential(t,e){return Bo._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Qr.credentialFromTaggedObject(t)}static credentialFromError(t){return Qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Qr.credential(e,i)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bq(n,t){return Nf(n,"POST","/v1/accounts:signUp",ba(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const a=await Bi._fromIdTokenResponse(t,i,s),l=ER(i);return new Uo({user:a,providerId:l,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=ER(i);return new Uo({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function ER(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends zi{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Pg.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Pg(t,e,i,s)}}function BO(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Pg._fromErrorAndOperation(n,a,t,i):a})}async function Tq(n,t,e=!1){const i=await df(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Uo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eq(n,t,e=!1){const{auth:i}=n;if(Ai(i.app))return Promise.reject(sr(i));const s="reauthenticate";try{const a=await df(n,BO(i,s,t,n),e);Dt(a.idToken,i,"internal-error");const l=CT(a.idToken);Dt(l,i,"internal-error");const{sub:c}=l;return Dt(n.uid===c,i,"user-mismatch"),Uo._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(n,t,e=!1){if(Ai(n.app))return Promise.reject(sr(n));const i="signIn",s=await BO(n,i,t),a=await Uo._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(a.user),a}async function Sq(n,t){return UO(Yo(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(n){const t=Yo(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function wq(n,t,e){if(Ai(n.app))return Promise.reject(sr(n));const i=Yo(n),l=await $b(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bq).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&jO(n),h}),c=await Uo._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function Aq(n,t,e){return Ai(n.app)?Promise.reject(sr(n)):Sq(dn(n),Yc.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&jO(n),i})}function xq(n,t,e,i){return dn(n).onIdTokenChanged(t,e,i)}function Iq(n,t,e){return dn(n).beforeAuthStateChanged(t,e)}function Rq(n){return dn(n).signOut()}const Og="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Og,"1"),this.storage.removeItem(Og),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=1e3,Dq=10;class zO extends FO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!e&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);WH()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Dq):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},Cq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}zO.type="LOCAL";const Mq=zO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO extends FO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}HO.type="SESSION";const qO=HO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new hp(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:a}=e.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async d=>d(e.origin,a)),h=await Pq(c);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{const d=OT("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(v.data.response);break;default:clearTimeout(m),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(){return window}function kq(n){ys().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(){return typeof ys().WorkerGlobalScope<"u"&&typeof ys().importScripts=="function"}async function Nq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vq(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Lq(){return GO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="firebaseLocalStorageDb",Bq=1,kg="firebaseLocalStorage",$O="fbase_key";class Lf{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function fp(n,t){return n.transaction([kg],t?"readwrite":"readonly").objectStore(kg)}function Uq(){const n=indexedDB.deleteDatabase(KO);return new Lf(n).toPromise()}function Wb(){const n=indexedDB.open(KO,Bq);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(kg,{keyPath:$O})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(kg)?t(i):(i.close(),await Uq(),t(await Wb()))})})}async function SR(n,t,e){const i=fp(n,!0).put({[$O]:t,value:e});return new Lf(i).toPromise()}async function jq(n,t){const e=fp(n,!1).get(t),i=await new Lf(e).toPromise();return i===void 0?null:i.value}function wR(n,t){const e=fp(n,!0).delete(t);return new Lf(e).toPromise()}const Fq=800,zq=3;class WO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wb(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>zq)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hp._getInstance(Lq()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await Nq(),!this.activeServiceWorker)return;this.sender=new Oq(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Vq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Wb();return await SR(t,Og,"1"),await wR(t,Og),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>SR(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>jq(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>wR(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=fp(s,!1).getAll();return new Lf(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WO.type="LOCAL";const Hq=WO;new kf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(n,t){return t?nr(t):(Dt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends MT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return yc(t,this._buildIdpRequest())}_linkToIdToken(t,e){return yc(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return yc(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Gq(n){return UO(n.auth,new kT(n),n.bypassAuthState)}function Kq(n){const{auth:t,user:e}=n;return Dt(e,t,"internal-error"),Eq(e,new kT(n),n.bypassAuthState)}async function $q(n){const{auth:t,user:e}=n;return Dt(e,t,"internal-error"),Tq(e,new kT(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(t,e,i,s,a=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=t;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:e,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Gq;case"linkViaPopup":case"linkViaRedirect":return $q;case"reauthViaPopup":case"reauthViaRedirect":return Kq;default:Fi(this.auth,"internal-error")}}resolve(t){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=new kf(2e3,1e4);class hc extends YO{constructor(t,e,i,s,a){super(t,e,s,a),this.provider=i,this.authWindow=null,this.pollId=null,hc.currentPopupAction&&hc.currentPopupAction.cancel(),hc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Dt(t,this.auth,"internal-error"),t}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const t=OT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Wq.get())};t()}}hc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yq="pendingRedirect",Xm=new Map;class Xq extends YO{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Xm.get(this.auth._key());if(!t){try{const i=await Qq(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Xm.set(this.auth._key(),t)}return this.bypassAuthState||Xm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qq(n,t){const e=t7(t),i=Jq(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function Zq(n,t){Xm.set(n._key(),t)}function Jq(n){return nr(n._redirectPersistence)}function t7(n){return Ym(Yq,n.config.apiKey,n.name)}async function e7(n,t,e=!1){if(Ai(n.app))return Promise.reject(sr(n));const i=Yo(n),s=qq(i,t),l=await new Xq(i,s,e).execute();return l&&!e&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7=10*60*1e3;class i7{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!s7(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!XO(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(ps(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=n7&&this.cachedEventUids.clear(),this.cachedEventUids.has(AR(t))}saveEventToCache(t){this.cachedEventUids.add(AR(t)),this.lastProcessedEventTime=Date.now()}}function AR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function XO({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function s7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XO(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(n,t={}){return Ta(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o7=/^https?/;async function l7(n){if(n.config.emulator)return;const{authorizedDomains:t}=await r7(n);for(const e of t)try{if(c7(e))return}catch{}Fi(n,"unauthorized-domain")}function c7(n){const t=Gb(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&l.hostname===i}if(!o7.test(e))return!1;if(a7.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=new kf(3e4,6e4);function xR(){const n=ys().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function h7(n){return new Promise((t,e)=>{var s,a,l;function i(){xR(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xR(),e(ps(n,"network-request-failed"))},timeout:u7.get()})}if((a=(s=ys().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)t(gapi.iframes.getContext());else if((l=ys().gapi)!=null&&l.load)i();else{const c=iq("iframefcb");return ys()[c]=()=>{gapi.load?i():e(ps(n,"network-request-failed"))},kO(`${nq()}?onload=${c}`).catch(h=>e(h))}}).catch(t=>{throw Qm=null,t})}let Qm=null;function f7(n){return Qm=Qm||h7(n),Qm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=new kf(5e3,15e3),m7="__/auth/iframe",g7="emulator/auth/iframe",p7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _7(n){const t=n.config;Dt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?RT(t,g7):`https://${n.config.authDomain}/${m7}`,i={apiKey:t.apiKey,appName:n.name,v:Wc},s=y7.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${e}?${Of(i).slice(1)}`}async function v7(n){const t=await f7(n),e=ys().gapi;return Dt(e,n,"internal-error"),t.open({where:document.body,url:_7(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p7,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=ps(n,"network-request-failed"),c=ys().setTimeout(()=>{a(l)},d7.get());function h(){ys().clearTimeout(c),s(i)}i.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T7=500,E7=600,S7="_blank",w7="http://localhost";class IR{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A7(n,t,e,i=T7,s=E7){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h={...b7,width:i.toString(),height:s.toString(),top:a,left:l},d=nn().toLowerCase();e&&(c=IO(d)?S7:e),AO(d)&&(t=t||w7,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[T,w])=>`${v}${T}=${w},`,"");if($H(d)&&c!=="_self")return x7(t||"",c),new IR(null);const y=window.open(t||"",c,m);Dt(y,n,"popup-blocked");try{y.focus()}catch{}return new IR(y)}function x7(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="__/auth/handler",R7="emulator/auth/handler",C7=encodeURIComponent("fac");async function RR(n,t,e,i,s,a){Dt(n.config.authDomain,n,"auth-domain-config-required"),Dt(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Wc,eventId:s};if(t instanceof LO){t.setDefaultLanguage(n.languageCode),l.providerId=t.providerId||"",Oz(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(t instanceof Vf){const m=t.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),d=h?`#${C7}=${encodeURIComponent(h)}`:"";return`${D7(n)}?${Of(c).slice(1)}${d}`}function D7({config:n}){return n.emulator?RT(n,R7):`https://${n.authDomain}/${I7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="webStorageSupport";class M7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qO,this._completeRedirectFn=e7,this._overrideRedirectResult=Zq}async _openPopup(t,e,i,s){var l;lr((l=this.eventManagers[t._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await RR(t,e,i,Gb(),s);return A7(t,a,OT())}async _openRedirect(t,e,i,s){await this._originValidation(t);const a=await RR(t,e,i,Gb(),s);return kq(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:a}=this.eventManagers[e];return s?Promise.resolve(s):(lr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await v7(t),i=new i7(t);return e.register("authEvent",s=>(Dt(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Xv,{type:Xv},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[Xv];a!==void 0&&e(!!a),Fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=l7(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return PO()||xO()||DT()}}const P7=M7;var CR="@firebase/auth",DR="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N7(n){Ts(new ji("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Dt(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OO(n)},d=new JH(i,s,a,h);return cq(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Ts(new ji("auth-internal",t=>{const e=Yo(t.getProvider("auth").getImmediate());return(i=>new O7(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(CR,DR,k7(n)),Ri(CR,DR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=5*60,L7=kP("authIdTokenMaxAge")||V7;let MR=null;const B7=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>L7)return;const s=e==null?void 0:e.token;MR!==s&&(MR=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function U7(n=qP()){const t=Wo(n,"auth");if(t.isInitialized())return t.getImmediate();const e=lq(n,{popupRedirectResolver:P7,persistence:[Hq,Mq,qO]}),i=kP("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=B7(a.toString());Iq(e,l,()=>l(e.currentUser)),xq(e,c=>l(c))}}const s=bz("auth");return s&&uq(e,`http://${s}`),e}function j7(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}tq({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const a=ps("internal-error");a.customData=s,e(a)},i.type="text/javascript",i.charset="UTF-8",j7().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N7("Browser");var PR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var la,QO;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,I){function C(){}C.prototype=I.prototype,O.D=I.prototype,O.prototype=new C,O.prototype.constructor=O,O.C=function(P,V,F){for(var N=Array(arguments.length-2),At=2;At<arguments.length;At++)N[At-2]=arguments[At];return I.prototype[V].apply(P,N)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,I,C){C||(C=0);var P=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)P[V]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(V=0;16>V;++V)P[V]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=O.g[0],C=O.g[1],V=O.g[2];var F=O.g[3],N=I+(F^C&(V^F))+P[0]+3614090360&4294967295;I=C+(N<<7&4294967295|N>>>25),N=F+(V^I&(C^V))+P[1]+3905402710&4294967295,F=I+(N<<12&4294967295|N>>>20),N=V+(C^F&(I^C))+P[2]+606105819&4294967295,V=F+(N<<17&4294967295|N>>>15),N=C+(I^V&(F^I))+P[3]+3250441966&4294967295,C=V+(N<<22&4294967295|N>>>10),N=I+(F^C&(V^F))+P[4]+4118548399&4294967295,I=C+(N<<7&4294967295|N>>>25),N=F+(V^I&(C^V))+P[5]+1200080426&4294967295,F=I+(N<<12&4294967295|N>>>20),N=V+(C^F&(I^C))+P[6]+2821735955&4294967295,V=F+(N<<17&4294967295|N>>>15),N=C+(I^V&(F^I))+P[7]+4249261313&4294967295,C=V+(N<<22&4294967295|N>>>10),N=I+(F^C&(V^F))+P[8]+1770035416&4294967295,I=C+(N<<7&4294967295|N>>>25),N=F+(V^I&(C^V))+P[9]+2336552879&4294967295,F=I+(N<<12&4294967295|N>>>20),N=V+(C^F&(I^C))+P[10]+4294925233&4294967295,V=F+(N<<17&4294967295|N>>>15),N=C+(I^V&(F^I))+P[11]+2304563134&4294967295,C=V+(N<<22&4294967295|N>>>10),N=I+(F^C&(V^F))+P[12]+1804603682&4294967295,I=C+(N<<7&4294967295|N>>>25),N=F+(V^I&(C^V))+P[13]+4254626195&4294967295,F=I+(N<<12&4294967295|N>>>20),N=V+(C^F&(I^C))+P[14]+2792965006&4294967295,V=F+(N<<17&4294967295|N>>>15),N=C+(I^V&(F^I))+P[15]+1236535329&4294967295,C=V+(N<<22&4294967295|N>>>10),N=I+(V^F&(C^V))+P[1]+4129170786&4294967295,I=C+(N<<5&4294967295|N>>>27),N=F+(C^V&(I^C))+P[6]+3225465664&4294967295,F=I+(N<<9&4294967295|N>>>23),N=V+(I^C&(F^I))+P[11]+643717713&4294967295,V=F+(N<<14&4294967295|N>>>18),N=C+(F^I&(V^F))+P[0]+3921069994&4294967295,C=V+(N<<20&4294967295|N>>>12),N=I+(V^F&(C^V))+P[5]+3593408605&4294967295,I=C+(N<<5&4294967295|N>>>27),N=F+(C^V&(I^C))+P[10]+38016083&4294967295,F=I+(N<<9&4294967295|N>>>23),N=V+(I^C&(F^I))+P[15]+3634488961&4294967295,V=F+(N<<14&4294967295|N>>>18),N=C+(F^I&(V^F))+P[4]+3889429448&4294967295,C=V+(N<<20&4294967295|N>>>12),N=I+(V^F&(C^V))+P[9]+568446438&4294967295,I=C+(N<<5&4294967295|N>>>27),N=F+(C^V&(I^C))+P[14]+3275163606&4294967295,F=I+(N<<9&4294967295|N>>>23),N=V+(I^C&(F^I))+P[3]+4107603335&4294967295,V=F+(N<<14&4294967295|N>>>18),N=C+(F^I&(V^F))+P[8]+1163531501&4294967295,C=V+(N<<20&4294967295|N>>>12),N=I+(V^F&(C^V))+P[13]+2850285829&4294967295,I=C+(N<<5&4294967295|N>>>27),N=F+(C^V&(I^C))+P[2]+4243563512&4294967295,F=I+(N<<9&4294967295|N>>>23),N=V+(I^C&(F^I))+P[7]+1735328473&4294967295,V=F+(N<<14&4294967295|N>>>18),N=C+(F^I&(V^F))+P[12]+2368359562&4294967295,C=V+(N<<20&4294967295|N>>>12),N=I+(C^V^F)+P[5]+4294588738&4294967295,I=C+(N<<4&4294967295|N>>>28),N=F+(I^C^V)+P[8]+2272392833&4294967295,F=I+(N<<11&4294967295|N>>>21),N=V+(F^I^C)+P[11]+1839030562&4294967295,V=F+(N<<16&4294967295|N>>>16),N=C+(V^F^I)+P[14]+4259657740&4294967295,C=V+(N<<23&4294967295|N>>>9),N=I+(C^V^F)+P[1]+2763975236&4294967295,I=C+(N<<4&4294967295|N>>>28),N=F+(I^C^V)+P[4]+1272893353&4294967295,F=I+(N<<11&4294967295|N>>>21),N=V+(F^I^C)+P[7]+4139469664&4294967295,V=F+(N<<16&4294967295|N>>>16),N=C+(V^F^I)+P[10]+3200236656&4294967295,C=V+(N<<23&4294967295|N>>>9),N=I+(C^V^F)+P[13]+681279174&4294967295,I=C+(N<<4&4294967295|N>>>28),N=F+(I^C^V)+P[0]+3936430074&4294967295,F=I+(N<<11&4294967295|N>>>21),N=V+(F^I^C)+P[3]+3572445317&4294967295,V=F+(N<<16&4294967295|N>>>16),N=C+(V^F^I)+P[6]+76029189&4294967295,C=V+(N<<23&4294967295|N>>>9),N=I+(C^V^F)+P[9]+3654602809&4294967295,I=C+(N<<4&4294967295|N>>>28),N=F+(I^C^V)+P[12]+3873151461&4294967295,F=I+(N<<11&4294967295|N>>>21),N=V+(F^I^C)+P[15]+530742520&4294967295,V=F+(N<<16&4294967295|N>>>16),N=C+(V^F^I)+P[2]+3299628645&4294967295,C=V+(N<<23&4294967295|N>>>9),N=I+(V^(C|~F))+P[0]+4096336452&4294967295,I=C+(N<<6&4294967295|N>>>26),N=F+(C^(I|~V))+P[7]+1126891415&4294967295,F=I+(N<<10&4294967295|N>>>22),N=V+(I^(F|~C))+P[14]+2878612391&4294967295,V=F+(N<<15&4294967295|N>>>17),N=C+(F^(V|~I))+P[5]+4237533241&4294967295,C=V+(N<<21&4294967295|N>>>11),N=I+(V^(C|~F))+P[12]+1700485571&4294967295,I=C+(N<<6&4294967295|N>>>26),N=F+(C^(I|~V))+P[3]+2399980690&4294967295,F=I+(N<<10&4294967295|N>>>22),N=V+(I^(F|~C))+P[10]+4293915773&4294967295,V=F+(N<<15&4294967295|N>>>17),N=C+(F^(V|~I))+P[1]+2240044497&4294967295,C=V+(N<<21&4294967295|N>>>11),N=I+(V^(C|~F))+P[8]+1873313359&4294967295,I=C+(N<<6&4294967295|N>>>26),N=F+(C^(I|~V))+P[15]+4264355552&4294967295,F=I+(N<<10&4294967295|N>>>22),N=V+(I^(F|~C))+P[6]+2734768916&4294967295,V=F+(N<<15&4294967295|N>>>17),N=C+(F^(V|~I))+P[13]+1309151649&4294967295,C=V+(N<<21&4294967295|N>>>11),N=I+(V^(C|~F))+P[4]+4149444226&4294967295,I=C+(N<<6&4294967295|N>>>26),N=F+(C^(I|~V))+P[11]+3174756917&4294967295,F=I+(N<<10&4294967295|N>>>22),N=V+(I^(F|~C))+P[2]+718787259&4294967295,V=F+(N<<15&4294967295|N>>>17),N=C+(F^(V|~I))+P[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(V+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+V&4294967295,O.g[3]=O.g[3]+F&4294967295}i.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var C=I-this.blockSize,P=this.B,V=this.h,F=0;F<I;){if(V==0)for(;F<=C;)s(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<I;)if(P[V++]=O.charCodeAt(F++),V==this.blockSize){s(this,P),V=0;break}}else for(;F<I;)if(P[V++]=O[F++],V==this.blockSize){s(this,P),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var C=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=C&255,C/=256;for(this.u(O),O=Array(16),I=C=0;4>I;++I)for(var P=0;32>P;P+=8)O[C++]=this.g[I]>>>P&255;return O};function a(O,I){var C=c;return Object.prototype.hasOwnProperty.call(C,O)?C[O]:C[O]=I(O)}function l(O,I){this.h=I;for(var C=[],P=!0,V=O.length-1;0<=V;V--){var F=O[V]|0;P&&F==I||(C[V]=F,P=!1)}this.g=C}var c={};function h(O){return-128<=O&&128>O?a(O,function(I){return new l([I|0],0>I?-1:0)}):new l([O|0],0>O?-1:0)}function d(O){if(isNaN(O)||!isFinite(O))return y;if(0>O)return x(d(-O));for(var I=[],C=1,P=0;O>=C;P++)I[P]=O/C|0,C*=4294967296;return new l(I,0)}function m(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return x(m(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(I,8)),P=y,V=0;V<O.length;V+=8){var F=Math.min(8,O.length-V),N=parseInt(O.substring(V,V+F),I);8>F?(F=d(Math.pow(I,F)),P=P.j(F).add(d(N))):(P=P.j(C),P=P.add(d(N)))}return P}var y=h(0),v=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(A(this))return-x(this).m();for(var O=0,I=1,C=0;C<this.g.length;C++){var P=this.i(C);O+=(0<=P?P:4294967296+P)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(w(this))return"0";if(A(this))return"-"+x(this).toString(O);for(var I=d(Math.pow(O,6)),C=this,P="";;){var V=K(C,I).g;C=k(C,V.j(I));var F=((0<C.g.length?C.g[0]:C.h)>>>0).toString(O);if(C=V,w(C))return F+P;for(;6>F.length;)F="0"+F;P=F+P}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function w(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function A(O){return O.h==-1}n.l=function(O){return O=k(this,O),A(O)?-1:w(O)?0:1};function x(O){for(var I=O.g.length,C=[],P=0;P<I;P++)C[P]=~O.g[P];return new l(C,~O.h).add(v)}n.abs=function(){return A(this)?x(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),C=[],P=0,V=0;V<=I;V++){var F=P+(this.i(V)&65535)+(O.i(V)&65535),N=(F>>>16)+(this.i(V)>>>16)+(O.i(V)>>>16);P=N>>>16,F&=65535,N&=65535,C[V]=N<<16|F}return new l(C,C[C.length-1]&-2147483648?-1:0)};function k(O,I){return O.add(x(I))}n.j=function(O){if(w(this)||w(O))return y;if(A(this))return A(O)?x(this).j(x(O)):x(x(this).j(O));if(A(O))return x(this.j(x(O)));if(0>this.l(T)&&0>O.l(T))return d(this.m()*O.m());for(var I=this.g.length+O.g.length,C=[],P=0;P<2*I;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<O.g.length;V++){var F=this.i(P)>>>16,N=this.i(P)&65535,At=O.i(V)>>>16,Et=O.i(V)&65535;C[2*P+2*V]+=N*Et,L(C,2*P+2*V),C[2*P+2*V+1]+=F*Et,L(C,2*P+2*V+1),C[2*P+2*V+1]+=N*At,L(C,2*P+2*V+1),C[2*P+2*V+2]+=F*At,L(C,2*P+2*V+2)}for(P=0;P<I;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=I;P<2*I;P++)C[P]=0;return new l(C,0)};function L(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function U(O,I){this.g=O,this.h=I}function K(O,I){if(w(I))throw Error("division by zero");if(w(O))return new U(y,y);if(A(O))return I=K(x(O),I),new U(x(I.g),x(I.h));if(A(I))return I=K(O,x(I)),new U(x(I.g),I.h);if(30<O.g.length){if(A(O)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var C=v,P=I;0>=P.l(O);)C=z(C),P=z(P);var V=nt(C,1),F=nt(P,1);for(P=nt(P,2),C=nt(C,2);!w(P);){var N=F.add(P);0>=N.l(O)&&(V=V.add(C),F=N),P=nt(P,1),C=nt(C,1)}return I=k(O,V.j(I)),new U(V,I)}for(V=y;0<=O.l(I);){for(C=Math.max(1,Math.floor(O.m()/I.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),F=d(C),N=F.j(I);A(N)||0<N.l(O);)C-=P,F=d(C),N=F.j(I);w(F)&&(F=v),V=V.add(F),O=k(O,N)}return new U(V,O)}n.A=function(O){return K(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),C=[],P=0;P<I;P++)C[P]=this.i(P)&O.i(P);return new l(C,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),C=[],P=0;P<I;P++)C[P]=this.i(P)|O.i(P);return new l(C,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),C=[],P=0;P<I;P++)C[P]=this.i(P)^O.i(P);return new l(C,this.h^O.h)};function z(O){for(var I=O.g.length+1,C=[],P=0;P<I;P++)C[P]=O.i(P)<<1|O.i(P-1)>>>31;return new l(C,O.h)}function nt(O,I){var C=I>>5;I%=32;for(var P=O.g.length-C,V=[],F=0;F<P;F++)V[F]=0<I?O.i(F+C)>>>I|O.i(F+C+1)<<32-I:O.i(F+C);return new l(V,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,QO=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=m,la=l}).apply(typeof PR<"u"?PR:typeof self<"u"?self:typeof window<"u"?window:{});var Mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZO,Ch,JO,Zm,Yb,tk,ek,nk;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,b,E){return g==Array.prototype||g==Object.prototype||(g[b]=E.value),g};function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mm=="object"&&Mm];for(var b=0;b<g.length;++b){var E=g[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function s(g,b){if(b)t:{var E=i;g=g.split(".");for(var M=0;M<g.length-1;M++){var W=g[M];if(!(W in E))break t;E=E[W]}g=g[g.length-1],M=E[g],b=b(M),b!=M&&b!=null&&t(E,g,{configurable:!0,writable:!0,value:b})}}function a(g,b){g instanceof String&&(g+="");var E=0,M=!1,W={next:function(){if(!M&&E<g.length){var rt=E++;return{value:b(rt,g[rt]),done:!1}}return M=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(g){return g||function(){return a(this,function(b,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(g){var b=typeof g;return b=b!="object"?b:g?Array.isArray(g)?"array":b:"null",b=="array"||b=="object"&&typeof g.length=="number"}function d(g){var b=typeof g;return b=="object"&&g!=null||b=="function"}function m(g,b,E){return g.call.apply(g.bind,arguments)}function y(g,b,E){if(!g)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,M),g.apply(b,W)}}return function(){return g.apply(b,arguments)}}function v(g,b,E){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,v.apply(null,arguments)}function T(g,b){var E=Array.prototype.slice.call(arguments,1);return function(){var M=E.slice();return M.push.apply(M,arguments),g.apply(this,M)}}function w(g,b){function E(){}E.prototype=b.prototype,g.aa=b.prototype,g.prototype=new E,g.prototype.constructor=g,g.Qb=function(M,W,rt){for(var mt=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)mt[Gt-2]=arguments[Gt];return b.prototype[W].apply(M,mt)}}function A(g){const b=g.length;if(0<b){const E=Array(b);for(let M=0;M<b;M++)E[M]=g[M];return E}return[]}function x(g,b){for(let E=1;E<arguments.length;E++){const M=arguments[E];if(h(M)){const W=g.length||0,rt=M.length||0;g.length=W+rt;for(let mt=0;mt<rt;mt++)g[W+mt]=M[mt]}else g.push(M)}}class k{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function L(g){return/^[\s\xa0]*$/.test(g)}function U(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function K(g){return K[" "](g),g}K[" "]=function(){};var z=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function nt(g,b,E){for(const M in g)b.call(E,g[M],M,g)}function O(g,b){for(const E in g)b.call(void 0,g[E],E,g)}function I(g){const b={};for(const E in g)b[E]=g[E];return b}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(g,b){let E,M;for(let W=1;W<arguments.length;W++){M=arguments[W];for(E in M)g[E]=M[E];for(let rt=0;rt<C.length;rt++)E=C[rt],Object.prototype.hasOwnProperty.call(M,E)&&(g[E]=M[E])}}function V(g){var b=1;g=g.split(":");const E=[];for(;0<b&&g.length;)E.push(g.shift()),b--;return g.length&&E.push(g.join(":")),E}function F(g){c.setTimeout(()=>{throw g},0)}function N(){var g=Z;let b=null;return g.g&&(b=g.g,g.g=g.g.next,g.g||(g.h=null),b.next=null),b}class At{constructor(){this.h=this.g=null}add(b,E){const M=Et.get();M.set(b,E),this.h?this.h.next=M:this.g=M,this.h=M}}var Et=new k(()=>new G,g=>g.reset());class G{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let st,ut=!1,Z=new At,D=()=>{const g=c.Promise.resolve(void 0);st=()=>{g.then(H)}};var H=()=>{for(var g;g=N();){try{g.h.call(g.g)}catch(E){F(E)}var b=Et;b.j(g),100>b.h&&(b.h++,g.next=b.g,b.g=g)}ut=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(g,b){this.type=g,this.g=this.target=b,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,b=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const E=()=>{};c.addEventListener("test",E,b),c.removeEventListener("test",E,b)}catch{}return g}();function vt(g,b){if(tt.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var E=this.type=g.type,M=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=b,b=g.relatedTarget){if(z){t:{try{K(b.nodeName);var W=!0;break t}catch{}W=!1}W||(b=null)}}else E=="mouseover"?b=g.fromElement:E=="mouseout"&&(b=g.toElement);this.relatedTarget=b,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:yt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&vt.aa.h.call(this)}}w(vt,tt);var yt={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Rt(g,b,E,M,W){this.listener=g,this.proxy=null,this.src=b,this.type=E,this.capture=!!M,this.ha=W,this.key=++Vt,this.da=this.fa=!1}function kt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Xt(g){this.src=g,this.g={},this.h=0}Xt.prototype.add=function(g,b,E,M,W){var rt=g.toString();g=this.g[rt],g||(g=this.g[rt]=[],this.h++);var mt=je(g,b,M,W);return-1<mt?(b=g[mt],E||(b.fa=!1)):(b=new Rt(b,this.src,rt,!!M,W),b.fa=E,g.push(b)),b};function Ue(g,b){var E=b.type;if(E in g.g){var M=g.g[E],W=Array.prototype.indexOf.call(M,b,void 0),rt;(rt=0<=W)&&Array.prototype.splice.call(M,W,1),rt&&(kt(b),g.g[E].length==0&&(delete g.g[E],g.h--))}}function je(g,b,E,M){for(var W=0;W<g.length;++W){var rt=g[W];if(!rt.da&&rt.listener==b&&rt.capture==!!E&&rt.ha==M)return W}return-1}var rn="closure_lm_"+(1e6*Math.random()|0),Zo={};function dr(g,b,E,M,W){if(Array.isArray(b)){for(var rt=0;rt<b.length;rt++)dr(g,b[rt],E,M,W);return null}return E=Gf(E),g&&g[Yt]?g.K(b,E,d(M)?!!M.capture:!1,W):Ln(g,b,E,!1,M,W)}function Ln(g,b,E,M,W,rt){if(!b)throw Error("Invalid event type");var mt=d(W)?!!W.capture:!!W,Gt=tl(g);if(Gt||(g[rn]=Gt=new Xt(g)),E=Gt.add(b,E,M,mt,rt),E.proxy)return E;if(M=jp(),E.proxy=M,M.src=g,M.listener=E,g.addEventListener)ft||(W=mt),W===void 0&&(W=!1),g.addEventListener(b.toString(),M,W);else if(g.attachEvent)g.attachEvent(Ia(b.toString()),M);else if(g.addListener&&g.removeListener)g.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return E}function jp(){function g(E){return b.call(g.src,g.listener,E)}const b=Fp;return g}function eu(g,b,E,M,W){if(Array.isArray(b))for(var rt=0;rt<b.length;rt++)eu(g,b[rt],E,M,W);else M=d(M)?!!M.capture:!!M,E=Gf(E),g&&g[Yt]?(g=g.i,b=String(b).toString(),b in g.g&&(rt=g.g[b],E=je(rt,E,M,W),-1<E&&(kt(rt[E]),Array.prototype.splice.call(rt,E,1),rt.length==0&&(delete g.g[b],g.h--)))):g&&(g=tl(g))&&(b=g.g[b.toString()],g=-1,b&&(g=je(b,E,M,W)),(E=-1<g?b[g]:null)&&Jo(E))}function Jo(g){if(typeof g!="number"&&g&&!g.da){var b=g.src;if(b&&b[Yt])Ue(b.i,g);else{var E=g.type,M=g.proxy;b.removeEventListener?b.removeEventListener(E,M,g.capture):b.detachEvent?b.detachEvent(Ia(E),M):b.addListener&&b.removeListener&&b.removeListener(M),(E=tl(b))?(Ue(E,g),E.h==0&&(E.src=null,b[rn]=null)):kt(g)}}}function Ia(g){return g in Zo?Zo[g]:Zo[g]="on"+g}function Fp(g,b){if(g.da)g=!0;else{b=new vt(b,this);var E=g.listener,M=g.ha||g.src;g.fa&&Jo(g),g=E.call(M,b)}return g}function tl(g){return g=g[rn],g instanceof Xt?g:null}var nu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gf(g){return typeof g=="function"?g:(g[nu]||(g[nu]=function(b){return g.handleEvent(b)}),g[nu])}function Ie(){X.call(this),this.i=new Xt(this),this.M=this,this.F=null}w(Ie,X),Ie.prototype[Yt]=!0,Ie.prototype.removeEventListener=function(g,b,E,M){eu(this,g,b,E,M)};function ie(g,b){var E,M=g.F;if(M)for(E=[];M;M=M.F)E.push(M);if(g=g.M,M=b.type||b,typeof b=="string")b=new tt(b,g);else if(b instanceof tt)b.target=b.target||g;else{var W=b;b=new tt(M,g),P(b,W)}if(W=!0,E)for(var rt=E.length-1;0<=rt;rt--){var mt=b.g=E[rt];W=Yn(mt,M,!0,b)&&W}if(mt=b.g=g,W=Yn(mt,M,!0,b)&&W,W=Yn(mt,M,!1,b)&&W,E)for(rt=0;rt<E.length;rt++)mt=b.g=E[rt],W=Yn(mt,M,!1,b)&&W}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var g=this.i,b;for(b in g.g){for(var E=g.g[b],M=0;M<E.length;M++)kt(E[M]);delete g.g[b],g.h--}}this.F=null},Ie.prototype.K=function(g,b,E,M){return this.i.add(String(g),b,!1,E,M)},Ie.prototype.L=function(g,b,E,M){return this.i.add(String(g),b,!0,E,M)};function Yn(g,b,E,M){if(b=g.i.g[String(b)],!b)return!0;b=b.concat();for(var W=!0,rt=0;rt<b.length;++rt){var mt=b[rt];if(mt&&!mt.da&&mt.capture==E){var Gt=mt.listener,Qe=mt.ha||mt.src;mt.fa&&Ue(g.i,mt),W=Gt.call(Qe,M)!==!1&&W}}return W&&!M.defaultPrevented}function Tn(g,b,E){if(typeof g=="function")E&&(g=v(g,E));else if(g&&typeof g.handleEvent=="function")g=v(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:c.setTimeout(g,b||0)}function Kf(g){g.g=Tn(()=>{g.g=null,g.i&&(g.i=!1,Kf(g))},g.l);const b=g.h;g.h=null,g.m.apply(null,b)}class zp extends X{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Kf(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(g){X.call(this),this.h=g,this.g={}}w(Ra,X);var Ca=[];function Da(g){nt(g.g,function(b,E){this.g.hasOwnProperty(E)&&Jo(b)},g),g.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),Da(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=c.JSON.stringify,el=c.JSON.parse,Ma=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function iu(){}iu.prototype.h=null;function su(g){return g.h||(g.h=g.i())}function ru(){}var As={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xs(){tt.call(this,"d")}w(xs,tt);function au(){tt.call(this,"c")}w(au,tt);var Hi={},ou=null;function mr(){return ou=ou||new Ie}Hi.La="serverreachability";function nl(g){tt.call(this,Hi.La,g)}w(nl,tt);function gr(g){const b=mr();ie(b,new nl(b))}Hi.STAT_EVENT="statevent";function $f(g,b){tt.call(this,Hi.STAT_EVENT,g),this.stat=b}w($f,tt);function be(g){const b=mr();ie(b,new $f(b,g))}Hi.Ma="timingevent";function Xe(g,b){tt.call(this,Hi.Ma,g),this.size=b}w(Xe,tt);function Fe(g,b){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},b)}function ui(){this.g=!0}ui.prototype.xa=function(){this.g=!1};function lu(g,b,E,M,W,rt){g.info(function(){if(g.g)if(rt)for(var mt="",Gt=rt.split("&"),Qe=0;Qe<Gt.length;Qe++){var Kt=Gt[Qe].split("=");if(1<Kt.length){var on=Kt[0];Kt=Kt[1];var Ze=on.split("_");mt=2<=Ze.length&&Ze[1]=="type"?mt+(on+"="+Kt+"&"):mt+(on+"=redacted&")}}else mt=null;else mt=rt;return"XMLHTTP REQ ("+M+") [attempt "+W+"]: "+b+`
`+E+`
`+mt})}function Hp(g,b,E,M,W,rt,mt){g.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+W+"]: "+b+`
`+E+`
`+rt+" "+mt})}function pr(g,b,E,M){g.info(function(){return"XMLHTTP TEXT ("+b+"): "+Pa(g,E)+(M?" "+M:"")})}function Wf(g,b){g.info(function(){return"TIMEOUT: "+b})}ui.prototype.info=function(){};function Pa(g,b){if(!g.g)return b;if(!b)return null;try{var E=JSON.parse(b);if(E){for(g=0;g<E.length;g++)if(Array.isArray(E[g])){var M=E[g];if(!(2>M.length)){var W=M[1];if(Array.isArray(W)&&!(1>W.length)){var rt=W[0];if(rt!="noop"&&rt!="stop"&&rt!="close")for(var mt=1;mt<W.length;mt++)W[mt]=""}}}}return Di(E)}catch{return b}}var yr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Is={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qi;function Gi(){}w(Gi,iu),Gi.prototype.g=function(){return new XMLHttpRequest},Gi.prototype.i=function(){return{}},qi=new Gi;function Mn(g,b,E,M){this.j=g,this.i=b,this.l=E,this.R=M||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}var cu={},il={};function Mi(g,b,E){g.L=1,g.v=La(Xn(b)),g.m=E,g.P=!0,Rs(g,null)}function Rs(g,b){g.F=Date.now(),Oa(g),g.A=Xn(g.v);var E=g.A,M=g.R;Array.isArray(M)||(M=[String(M)]),gu(E.i,"t",M),g.C=0,E=g.j.J,g.h=new Pe,g.g=ud(g.j,E?b:null,!g.m),0<g.O&&(g.M=new zp(v(g.Y,g,g.g),g.O)),b=g.U,E=g.g,M=g.ca;var W="readystatechange";Array.isArray(W)||(W&&(Ca[0]=W.toString()),W=Ca);for(var rt=0;rt<W.length;rt++){var mt=dr(E,W[rt],M||b.handleEvent,!1,b.h||b);if(!mt)break;b.g[mt.key]=mt}b=g.H?I(g.H):{},g.m?(g.u||(g.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,b)):(g.u="GET",g.g.ea(g.A,g.u,null,b)),gr(),lu(g.i,g.u,g.A,g.l,g.R,g.m)}Mn.prototype.ca=function(g){g=g.target;const b=this.M;b&&mi(g)==3?b.j():this.Y(g)},Mn.prototype.Y=function(g){try{if(g==this.g)t:{const Ze=mi(this.g);var b=this.g.Ba();const Vs=this.g.Z();if(!(3>Ze)&&(Ze!=3||this.g&&(this.h.h||this.g.oa()||nd(this.g)))){this.J||Ze!=4||b==7||(b==8||0>=Vs?gr(3):gr(2)),_r(this);var E=this.g.Z();this.X=E;e:if(Yf(this)){var M=nd(this.g);g="";var W=M.length,rt=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Ki(this);var mt="";break e}this.h.i=new c.TextDecoder}for(b=0;b<W;b++)this.h.h=!0,g+=this.h.i.decode(M[b],{stream:!(rt&&b==W-1)});M.length=0,this.h.g+=g,this.C=0,mt=this.h.g}else mt=this.g.oa();if(this.o=E==200,Hp(this.i,this.u,this.A,this.l,this.R,Ze,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Gt,Qe=this.g;if((Gt=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Gt)){var Kt=Gt;break e}}Kt=null}if(E=Kt)pr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ka(this,E);else{this.o=!1,this.s=3,be(12),mn(this),Ki(this);break t}}if(this.P){E=!0;let gn;for(;!this.J&&this.C<mt.length;)if(gn=Xf(this,mt),gn==il){Ze==4&&(this.s=4,be(14),E=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==cu){this.s=4,be(15),pr(this.i,this.l,mt,"[Invalid Chunk]"),E=!1;break}else pr(this.i,this.l,gn,null),ka(this,gn);if(Yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||mt.length!=0||this.h.h||(this.s=1,be(16),E=!1),this.o=this.o&&E,!E)pr(this.i,this.l,mt,"[Invalid Chunked Response]"),mn(this),Ki(this);else if(0<mt.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+mt.length),Ga(on),on.M=!0,be(11))}}else pr(this.i,this.l,mt,null),ka(this,mt);Ze==4&&mn(this),this.o&&!this.J&&(Ze==4?od(this.j,this):(this.o=!1,Oa(this)))}else Wp(this.g),E==400&&0<mt.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),mn(this),Ki(this)}}}catch{}finally{}};function Yf(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Xf(g,b){var E=g.C,M=b.indexOf(`
`,E);return M==-1?il:(E=Number(b.substring(E,M)),isNaN(E)?cu:(M+=1,M+E>b.length?il:(b=b.slice(M,M+E),g.C=M+E,b)))}Mn.prototype.cancel=function(){this.J=!0,mn(this)};function Oa(g){g.S=Date.now()+g.I,Qf(g,g.I)}function Qf(g,b){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Fe(v(g.ba,g),b)}function _r(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Mn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Wf(this.i,this.A),this.L!=2&&(gr(),be(17)),mn(this),this.s=2,Ki(this)):Qf(this,this.S-g)};function Ki(g){g.j.G==0||g.J||od(g.j,g)}function mn(g){_r(g);var b=g.M;b&&typeof b.ma=="function"&&b.ma(),g.M=null,Da(g.U),g.g&&(b=g.g,g.g=null,b.abort(),b.ma())}function ka(g,b){try{var E=g.j;if(E.G!=0&&(E.g==g||uu(E.h,g))){if(!g.K&&uu(E.h,g)&&E.G==3){try{var M=E.Da.g.parse(b)}catch{M=null}if(Array.isArray(M)&&M.length==3){var W=M;if(W[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<g.F)gl(E),dl(E);else break t;bu(E),be(18)}}else E.za=W[1],0<E.za-E.T&&37500>W[2]&&E.F&&E.v==0&&!E.C&&(E.C=Fe(v(E.Za,E),6e3));if(1>=rl(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ns(E,11)}else if((g.K||E.g==g)&&gl(E),!L(b))for(W=E.Da.g.parse(b),b=0;b<W.length;b++){let Kt=W[b];if(E.T=Kt[0],Kt=Kt[1],E.G==2)if(Kt[0]=="c"){E.K=Kt[1],E.ia=Kt[2];const on=Kt[3];on!=null&&(E.la=on,E.j.info("VER="+E.la));const Ze=Kt[4];Ze!=null&&(E.Aa=Ze,E.j.info("SVER="+E.Aa));const Vs=Kt[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(M=1.5*Vs,E.L=M,E.j.info("backChannelRequestTimeoutMs_="+M)),M=E;const gn=g.g;if(gn){const Ji=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var rt=M.h;rt.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(rt.j=rt.l,rt.g=new Set,rt.h&&(al(rt,rt.h),rt.h=null))}if(M.D){const Eu=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eu&&(M.ya=Eu,ce(M.I,M.D,Eu))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-g.F,E.j.info("Handshake RTT: "+E.R+"ms")),M=E;var mt=g;if(M.qa=cd(M,M.J?M.ia:null,M.W),mt.K){Pn(M.h,mt);var Gt=mt,Qe=M.L;Qe&&(Gt.I=Qe),Gt.B&&(_r(Gt),Oa(Gt)),M.g=mt}else rd(M);0<E.i.length&&ml(E)}else Kt[0]!="stop"&&Kt[0]!="close"||Ns(E,7);else E.G==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Ns(E,7):_u(E):Kt[0]!="noop"&&E.l&&E.l.ta(Kt),E.v=0)}}gr(4)}catch{}}var Zf=class{constructor(g,b){this.g=g,this.map=b}};function Cs(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function rl(g){return g.h?1:g.g?g.g.size:0}function uu(g,b){return g.h?g.h==b:g.g?g.g.has(b):!1}function al(g,b){g.g?g.g.add(b):g.h=b}function Pn(g,b){g.h&&g.h==b?g.h=null:g.g&&g.g.has(b)&&g.g.delete(b)}Cs.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function hu(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let b=g.i;for(const E of g.g.values())b=b.concat(E.D);return b}return A(g.i)}function qp(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(h(g)){for(var b=[],E=g.length,M=0;M<E;M++)b.push(g[M]);return b}b=[],E=0;for(M in g)b[E++]=g[M];return b}function ol(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(h(g)||typeof g=="string"){var b=[];g=g.length;for(var E=0;E<g;E++)b.push(E);return b}b=[],E=0;for(const M in g)b[E++]=M;return b}}}function fu(g,b){if(g.forEach&&typeof g.forEach=="function")g.forEach(b,void 0);else if(h(g)||typeof g=="string")Array.prototype.forEach.call(g,b,void 0);else for(var E=ol(g),M=qp(g),W=M.length,rt=0;rt<W;rt++)b.call(void 0,M[rt],E&&E[rt],g)}var Na=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gp(g,b){if(g){g=g.split("&");for(var E=0;E<g.length;E++){var M=g[E].indexOf("="),W=null;if(0<=M){var rt=g[E].substring(0,M);W=g[E].substring(M+1)}else rt=g[E];b(rt,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function ze(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof ze){this.h=g.h,Va(this,g.j),this.o=g.o,this.g=g.g,vr(this,g.s),this.l=g.l;var b=g.i,E=new Ms;E.i=b.i,b.g&&(E.g=new Map(b.g),E.h=b.h),Ds(this,E),this.m=g.m}else g&&(b=String(g).match(Na))?(this.h=!1,Va(this,b[1]||"",!0),this.o=hi(b[2]||""),this.g=hi(b[3]||"",!0),vr(this,b[4]),this.l=hi(b[5]||"",!0),Ds(this,b[6]||"",!0),this.m=hi(b[7]||"")):(this.h=!1,this.i=new Ms(null,this.h))}ze.prototype.toString=function(){var g=[],b=this.j;b&&g.push(Ba(b,du,!0),":");var E=this.g;return(E||b=="file")&&(g.push("//"),(b=this.o)&&g.push(Ba(b,du,!0),"@"),g.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&g.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&g.push("/"),g.push(Ba(E,E.charAt(0)=="/"?Kp:mu,!0))),(E=this.i.toString())&&g.push("?",E),(E=this.m)&&g.push("#",Ba(E,ll)),g.join("")};function Xn(g){return new ze(g)}function Va(g,b,E){g.j=E?hi(b,!0):b,g.j&&(g.j=g.j.replace(/:$/,""))}function vr(g,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);g.s=b}else g.s=null}function Ds(g,b,E){b instanceof Ms?(g.i=b,td(g.i,g.h)):(E||(b=Ba(b,$p)),g.i=new Ms(b,g.h))}function ce(g,b,E){g.i.set(b,E)}function La(g){return ce(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function hi(g,b){return g?b?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ba(g,b,E){return typeof g=="string"?(g=encodeURI(g).replace(b,Jf),E&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Jf(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var du=/[#\/\?@]/g,mu=/[#\?:]/g,Kp=/[#\?]/g,$p=/[#\?@]/g,ll=/#/g;function Ms(g,b){this.h=this.g=null,this.i=g||null,this.j=!!b}function fi(g){g.g||(g.g=new Map,g.h=0,g.i&&Gp(g.i,function(b,E){g.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}n=Ms.prototype,n.add=function(g,b){fi(this),this.i=null,g=$i(this,g);var E=this.g.get(g);return E||this.g.set(g,E=[]),E.push(b),this.h+=1,this};function Ps(g,b){fi(g),b=$i(g,b),g.g.has(b)&&(g.i=null,g.h-=g.g.get(b).length,g.g.delete(b))}function Os(g,b){return fi(g),b=$i(g,b),g.g.has(b)}n.forEach=function(g,b){fi(this),this.g.forEach(function(E,M){E.forEach(function(W){g.call(b,W,M,this)},this)},this)},n.na=function(){fi(this);const g=Array.from(this.g.values()),b=Array.from(this.g.keys()),E=[];for(let M=0;M<b.length;M++){const W=g[M];for(let rt=0;rt<W.length;rt++)E.push(b[M])}return E},n.V=function(g){fi(this);let b=[];if(typeof g=="string")Os(this,g)&&(b=b.concat(this.g.get($i(this,g))));else{g=Array.from(this.g.values());for(let E=0;E<g.length;E++)b=b.concat(g[E])}return b},n.set=function(g,b){return fi(this),this.i=null,g=$i(this,g),Os(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[b]),this.h+=1,this},n.get=function(g,b){return g?(g=this.V(g),0<g.length?String(g[0]):b):b};function gu(g,b,E){Ps(g,b),0<E.length&&(g.i=null,g.g.set($i(g,b),A(E)),g.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],b=Array.from(this.g.keys());for(var E=0;E<b.length;E++){var M=b[E];const rt=encodeURIComponent(String(M)),mt=this.V(M);for(M=0;M<mt.length;M++){var W=rt;mt[M]!==""&&(W+="="+encodeURIComponent(String(mt[M]))),g.push(W)}}return this.i=g.join("&")};function $i(g,b){return b=String(b),g.j&&(b=b.toLowerCase()),b}function td(g,b){b&&!g.j&&(fi(g),g.i=null,g.g.forEach(function(E,M){var W=M.toLowerCase();M!=W&&(Ps(this,M),gu(this,W,E))},g)),g.j=b}function Ua(g,b){const E=new ui;if(c.Image){const M=new Image;M.onload=T(di,E,"TestLoadImage: loaded",!0,b,M),M.onerror=T(di,E,"TestLoadImage: error",!1,b,M),M.onabort=T(di,E,"TestLoadImage: abort",!1,b,M),M.ontimeout=T(di,E,"TestLoadImage: timeout",!1,b,M),c.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=g}else b(!1)}function Pi(g,b){const E=new ui,M=new AbortController,W=setTimeout(()=>{M.abort(),di(E,"TestPingServer: timeout",!1,b)},1e4);fetch(g,{signal:M.signal}).then(rt=>{clearTimeout(W),rt.ok?di(E,"TestPingServer: ok",!0,b):di(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(W),di(E,"TestPingServer: error",!1,b)})}function di(g,b,E,M,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),M(E)}catch{}}function ja(){this.g=new Ma}function Wi(g,b,E){const M=E||"";try{fu(g,function(W,rt){let mt=W;d(W)&&(mt=Di(W)),b.push(M+rt+"="+encodeURIComponent(mt))})}catch(W){throw b.push(M+"type="+encodeURIComponent("_badmap")),W}}function br(g){this.l=g.Ub||null,this.j=g.eb||!1}w(br,iu),br.prototype.g=function(){return new ks(this.l,this.j)},br.prototype.i=function(g){return function(){return g}}({});function ks(g,b){Ie.call(this),this.D=g,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ks,Ie),n=ks.prototype,n.open=function(g,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=b,this.readyState=1,Xi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(b.body=g),(this.D||c).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pu(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function pu(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var b=g.value?g.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!g.done}))&&(this.response=this.responseText+=b)}g.done?Yi(this):Xi(this),this.readyState==3&&pu(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Yi(this))},n.Qa=function(g){this.g&&(this.response=g,Yi(this))},n.ga=function(){this.g&&Yi(this)};function Yi(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Xi(g)}n.setRequestHeader=function(g,b){this.u.append(g,b)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,g.push(E[0]+": "+E[1]),E=b.next();return g.join(`\r
`)};function Xi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function yu(g){let b="";return nt(g,function(E,M){b+=M,b+=":",b+=E,b+=`\r
`}),b}function an(g,b,E){t:{for(M in E){var M=!1;break t}M=!0}M||(E=yu(E),typeof g=="string"?E!=null&&encodeURIComponent(String(E)):ce(g,b,E))}function ee(g){Ie.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ee,Ie);var cl=/^https?$/i,Fa=["POST","PUT"];n=ee.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,b,E,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);b=b?b.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qi.g(),this.v=this.o?su(this.o):su(qi),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(b,String(g),!0),this.B=!1}catch(rt){ed(this,rt);return}if(g=E||"",E=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var W in M)E.set(W,M[W]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const rt of M.keys())E.set(rt,M.get(rt));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(E.keys()).find(rt=>rt.toLowerCase()=="content-type"),W=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Fa,b,void 0))||M||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[rt,mt]of E)this.g.setRequestHeader(rt,mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{za(this),this.u=!0,this.g.send(g),this.u=!1}catch(rt){ed(this,rt)}};function ed(g,b){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=b,g.m=5,ul(g),Qi(g)}function ul(g){g.A||(g.A=!0,ie(g,"complete"),ie(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,ie(this,"complete"),ie(this,"abort"),Qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),ee.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?hl(this):this.bb())},n.bb=function(){hl(this)};function hl(g){if(g.h&&typeof l<"u"&&(!g.v[1]||mi(g)!=4||g.Z()!=2)){if(g.u&&mi(g)==4)Tn(g.Ea,0,g);else if(ie(g,"readystatechange"),mi(g)==4){g.h=!1;try{const mt=g.Z();t:switch(mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var E;if(!(E=b)){var M;if(M=mt===0){var W=String(g.D).match(Na)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),M=!cl.test(W?W.toLowerCase():"")}E=M}if(E)ie(g,"complete"),ie(g,"success");else{g.m=6;try{var rt=2<mi(g)?g.g.statusText:""}catch{rt=""}g.l=rt+" ["+g.Z()+"]",ul(g)}}finally{Qi(g)}}}}function Qi(g,b){if(g.g){za(g);const E=g.g,M=g.v[0]?()=>{}:null;g.g=null,g.v=null,b||ie(g,"ready");try{E.onreadystatechange=M}catch{}}}function za(g){g.I&&(c.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function mi(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var b=this.g.responseText;return g&&b.indexOf(g)==0&&(b=b.substring(g.length)),el(b)}};function nd(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Wp(g){const b={};g=(g.g&&2<=mi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<g.length;M++){if(L(g[M]))continue;var E=V(g[M]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const rt=b[W]||[];b[W]=rt,rt.push(E)}O(b,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(g,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[g]||b}function fl(g){this.Aa=0,this.i=[],this.j=new ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ha("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ha("baseRetryDelayMs",5e3,g),this.cb=Ha("retryDelaySeedMs",1e4,g),this.Wa=Ha("forwardChannelMaxRetries",2,g),this.wa=Ha("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Cs(g&&g.concurrentRequestLimit),this.Da=new ja,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fl.prototype,n.la=8,n.G=1,n.connect=function(g,b,E,M){be(0),this.W=g,this.H=b||{},E&&M!==void 0&&(this.H.OSID=E,this.H.OAID=M),this.F=this.X,this.I=cd(this,null,this.W),ml(this)};function _u(g){if(id(g),g.G==3){var b=g.U++,E=Xn(g.I);if(ce(E,"SID",g.K),ce(E,"RID",b),ce(E,"TYPE","terminate"),qa(g,E),b=new Mn(g,g.j,b),b.L=2,b.v=La(Xn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(b.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=b.v,E=!0),E||(b.g=ud(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Oa(b)}ld(g)}function dl(g){g.g&&(Ga(g),g.g.cancel(),g.g=null)}function id(g){dl(g),g.u&&(c.clearTimeout(g.u),g.u=null),gl(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function ml(g){if(!sl(g.h)&&!g.s){g.s=!0;var b=g.Ga;st||D(),ut||(st(),ut=!0),Z.add(b,g),g.B=0}}function Yp(g,b){return rl(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=b.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Fe(v(g.Ga,g,b),Tu(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const W=new Mn(this,this.j,g);let rt=this.o;if(this.S&&(rt?(rt=I(rt),P(rt,this.S)):rt=this.S),this.m!==null||this.O||(W.H=rt,rt=null),this.P)t:{for(var b=0,E=0;E<this.i.length;E++){e:{var M=this.i[E];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break e}M=void 0}if(M===void 0)break;if(b+=M,4096<b){b=E;break t}if(b===4096||E===this.i.length-1){b=E+1;break t}}b=1e3}else b=1e3;b=sd(this,W,b),E=Xn(this.I),ce(E,"RID",g),ce(E,"CVER",22),this.D&&ce(E,"X-HTTP-Session-Id",this.D),qa(this,E),rt&&(this.O?b="headers="+encodeURIComponent(String(yu(rt)))+"&"+b:this.m&&an(E,this.m,rt)),al(this.h,W),this.Ua&&ce(E,"TYPE","init"),this.P?(ce(E,"$req",b),ce(E,"SID","null"),W.T=!0,Mi(W,E,null)):Mi(W,E,b),this.G=2}}else this.G==3&&(g?vu(this,g):this.i.length==0||sl(this.h)||vu(this))};function vu(g,b){var E;b?E=b.l:E=g.U++;const M=Xn(g.I);ce(M,"SID",g.K),ce(M,"RID",E),ce(M,"AID",g.T),qa(g,M),g.m&&g.o&&an(M,g.m,g.o),E=new Mn(g,g.j,E,g.B+1),g.m===null&&(E.H=g.o),b&&(g.i=b.D.concat(g.i)),b=sd(g,E,1e3),E.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),al(g.h,E),Mi(E,M,b)}function qa(g,b){g.H&&nt(g.H,function(E,M){ce(b,M,E)}),g.l&&fu({},function(E,M){ce(b,M,E)})}function sd(g,b,E){E=Math.min(g.i.length,E);var M=g.l?v(g.l.Na,g.l,g):null;t:{var W=g.i;let rt=-1;for(;;){const mt=["count="+E];rt==-1?0<E?(rt=W[0].g,mt.push("ofs="+rt)):rt=0:mt.push("ofs="+rt);let Gt=!0;for(let Qe=0;Qe<E;Qe++){let Kt=W[Qe].g;const on=W[Qe].map;if(Kt-=rt,0>Kt)rt=Math.max(0,W[Qe].g-100),Gt=!1;else try{Wi(on,mt,"req"+Kt+"_")}catch{M&&M(on)}}if(Gt){M=mt.join("&");break t}}}return g=g.i.splice(0,E),b.D=g,M}function rd(g){if(!g.g&&!g.u){g.Y=1;var b=g.Fa;st||D(),ut||(st(),ut=!0),Z.add(b,g),g.v=0}}function bu(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Fe(v(g.Fa,g),Tu(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,ad(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Fe(v(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,be(10),dl(this),ad(this))};function Ga(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function ad(g){g.g=new Mn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var b=Xn(g.qa);ce(b,"RID","rpc"),ce(b,"SID",g.K),ce(b,"AID",g.T),ce(b,"CI",g.F?"0":"1"),!g.F&&g.ja&&ce(b,"TO",g.ja),ce(b,"TYPE","xmlhttp"),qa(g,b),g.m&&g.o&&an(b,g.m,g.o),g.L&&(g.g.I=g.L);var E=g.g;g=g.ia,E.L=1,E.v=La(Xn(b)),E.m=null,E.P=!0,Rs(E,g)}n.Za=function(){this.C!=null&&(this.C=null,dl(this),bu(this),be(19))};function gl(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function od(g,b){var E=null;if(g.g==b){gl(g),Ga(g),g.g=null;var M=2}else if(uu(g.h,b))E=b.D,Pn(g.h,b),M=1;else return;if(g.G!=0){if(b.o)if(M==1){E=b.m?b.m.length:0,b=Date.now()-b.F;var W=g.B;M=mr(),ie(M,new Xe(M,E)),ml(g)}else rd(g);else if(W=b.s,W==3||W==0&&0<b.X||!(M==1&&Yp(g,b)||M==2&&bu(g)))switch(E&&0<E.length&&(b=g.h,b.i=b.i.concat(E)),W){case 1:Ns(g,5);break;case 4:Ns(g,10);break;case 3:Ns(g,6);break;default:Ns(g,2)}}}function Tu(g,b){let E=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(E*=2),E*b}function Ns(g,b){if(g.j.info("Error code "+b),b==2){var E=v(g.fb,g),M=g.Xa;const W=!M;M=new ze(M||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Va(M,"https"),La(M),W?Ua(M.toString(),E):Pi(M.toString(),E)}else be(2);g.G=0,g.l&&g.l.sa(b),ld(g),id(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function ld(g){if(g.G=0,g.ka=[],g.l){const b=hu(g.h);(b.length!=0||g.i.length!=0)&&(x(g.ka,b),x(g.ka,g.i),g.h.i.length=0,A(g.i),g.i.length=0),g.l.ra()}}function cd(g,b,E){var M=E instanceof ze?Xn(E):new ze(E);if(M.g!="")b&&(M.g=b+"."+M.g),vr(M,M.s);else{var W=c.location;M=W.protocol,b=b?b+"."+W.hostname:W.hostname,W=+W.port;var rt=new ze(null);M&&Va(rt,M),b&&(rt.g=b),W&&vr(rt,W),E&&(rt.l=E),M=rt}return E=g.D,b=g.ya,E&&b&&ce(M,E,b),ce(M,"VER",g.la),qa(g,M),M}function ud(g,b,E){if(b&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=g.Ca&&!g.pa?new ee(new br({eb:E})):new ee(g.pa),b.Ha(g.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hd(){}n=hd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pl(){}pl.prototype.g=function(g,b){return new On(g,b)};function On(g,b){Ie.call(this),this.g=new fl(b),this.l=g,this.h=b&&b.messageUrlParams||null,g=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(g?g["X-WebChannel-Content-Type"]=b.messageContentType:g={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(g?g["X-WebChannel-Client-Profile"]=b.va:g={"X-WebChannel-Client-Profile":b.va}),this.g.S=g,(g=b&&b.Sb)&&!L(g)&&(this.g.m=g),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!L(b)&&(this.g.D=b,g=this.h,g!==null&&b in g&&(g=this.h,b in g&&delete g[b])),this.j=new Zi(this)}w(On,Ie),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){_u(this.g)},On.prototype.o=function(g){var b=this.g;if(typeof g=="string"){var E={};E.__data__=g,g=E}else this.u&&(E={},E.__data__=Di(g),g=E);b.i.push(new Zf(b.Ya++,g)),b.G==3&&ml(b)},On.prototype.N=function(){this.g.l=null,delete this.j,_u(this.g),delete this.g,On.aa.N.call(this)};function fd(g){xs.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var b=g.__sm__;if(b){t:{for(const E in b){g=E;break t}g=void 0}(this.i=g)&&(g=this.i,b=b!==null&&g in b?b[g]:void 0),this.data=b}else this.data=g}w(fd,xs);function dd(){au.call(this),this.status=1}w(dd,au);function Zi(g){this.g=g}w(Zi,hd),Zi.prototype.ua=function(){ie(this.g,"a")},Zi.prototype.ta=function(g){ie(this.g,new fd(g))},Zi.prototype.sa=function(g){ie(this.g,new dd)},Zi.prototype.ra=function(){ie(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,nk=function(){return new pl},ek=function(){return mr()},tk=Hi,Yb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,Zm=yr,Is.COMPLETE="complete",JO=Is,ru.EventType=As,As.OPEN="a",As.CLOSE="b",As.ERROR="c",As.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Ch=ru,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,ZO=ee}).apply(typeof Mm<"u"?Mm:typeof self<"u"?self:typeof window<"u"?window:{});const OR="@firebase/firestore",kR="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new op("@firebase/firestore");function Jl(){return jo.logLevel}function ht(n,...t){if(jo.logLevel<=Ht.DEBUG){const e=t.map(NT);jo.debug(`Firestore (${Xc}): ${n}`,...e)}}function Ve(n,...t){if(jo.logLevel<=Ht.ERROR){const e=t.map(NT);jo.error(`Firestore (${Xc}): ${n}`,...e)}}function gf(n,...t){if(jo.logLevel<=Ht.WARN){const e=t.map(NT);jo.warn(`Firestore (${Xc}): ${n}`,...e)}}function NT(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,ik(n,i,e)}function ik(n,t,e){let i=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ve(i),new Error(i)}function St(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||ik(t,s,i)}function Tt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends zi{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class z7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(An.UNAUTHENTICATED))}shutdown(){}}class H7{constructor(t){this.t=t,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){St(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,e(h)):Promise.resolve();let a=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new _s,t.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=a;t.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},c=h=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _s)}},0),l()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(St(typeof i.accessToken=="string",31837,{l:i}),new F7(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return St(t===null||typeof t=="string",2055,{h:t}),new An(t)}}class q7{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class G7{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new q7(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K7{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ai(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){St(this.o===void 0,3512);const i=a=>{a.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,ht("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>i(a))};const s=a=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new NR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(St(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new NR(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=$7(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<e&&(i+=t.charAt(s[a]%62))}return i}}function Nt(n,t){return n<t?-1:n>t?1:0}function Xb(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),a=t.charAt(i);if(s!==a)return Qv(s)===Qv(a)?Nt(s,a):Qv(s)?1:-1}return Nt(n.length,t.length)}const W7=55296,Y7=57343;function Qv(n){const t=n.charCodeAt(0);return t>=W7&&t<=Y7}function Sc(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}function sk(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="__name__";class cs{constructor(t,e,i){e===void 0?e=0:e>t.length&&_t(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&_t(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return cs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof cs?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const a=cs.compareSegments(t.get(s),e.get(s));if(a!==0)return a}return Nt(t.length,e.length)}static compareSegments(t,e){const i=cs.isNumericId(t),s=cs.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?cs.extractNumericId(t).compare(cs.extractNumericId(e)):Xb(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return la.fromString(t.substring(4,t.length-2))}}class ne extends cs{construct(t,e,i){return new ne(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new gt(lt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const X7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xe extends cs{construct(t,e,i){return new xe(t,e,i)}static isValidIdentifier(t){return X7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VR}static keyField(){return new xe([VR])}static fromServerFormat(t){const e=[];let i="",s=0;const a=()=>{if(i.length===0)throw new gt(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new gt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const h=t[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new gt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new gt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new xe(e)}static emptyPath(){return new xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.path=t}static fromPath(t){return new pt(ne.fromString(t))}static fromName(t){return new pt(ne.fromString(t).popFirst(5))}static empty(){return new pt(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ne.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ne.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pt(new ne(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(n,t,e){if(!e)throw new gt(lt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Q7(n,t,e,i){if(t===!0&&i===!0)throw new gt(lt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function LR(n){if(!pt.isDocumentKey(n))throw new gt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BR(n){if(pt.isDocumentKey(n))throw new gt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ak(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function LT(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":_t(12329,{type:typeof n})}function Es(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new gt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=LT(n);throw new gt(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(n,t){const e={typeString:n};return t&&(e.value=t),e}function Bf(n,t){if(!ak(n))throw new gt(lt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){e=`Expected '${i}' field to equal '${a.value}'`;break}}if(e)throw new gt(lt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=-62135596800,jR=1e6;class oe{static now(){return oe.fromMillis(Date.now())}static fromDate(t){return oe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*jR);return new oe(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new gt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new gt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<UR)throw new gt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jR}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Bf(t,oe._jsonSchema))return new oe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-UR;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}oe._jsonSchemaVersion="firestore/timestamp/1.0",oe._jsonSchema={type:We("string",oe._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static fromTimestamp(t){return new xt(t)}static min(){return new xt(new oe(0,0))}static max(){return new xt(new oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=-1;class Ng{constructor(t,e,i,s){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=s}}function Qb(n){return n.fields.find(t=>t.kind===2)}function po(n){return n.fields.filter(t=>t.kind!==2)}Ng.UNKNOWN_ID=-1;class Jm{constructor(t,e){this.fieldPath=t,this.kind=e}}class pf{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new pf(0,ci.min())}}function ok(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=xt.fromTimestamp(i===1e9?new oe(e+1,0):new oe(e,i));return new ci(s,pt.empty(),t)}function lk(n){return new ci(n.readTime,n.key,wc)}class ci{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ci(xt.min(),pt.empty(),wc)}static max(){return new ci(xt.max(),pt.empty(),wc)}}function BT(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=pt.comparator(n.documentKey,t.documentKey),e!==0?e:Nt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(n){if(n.code!==lt.FAILED_PRECONDITION||n.message!==ck)throw n;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Y((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(e,a).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Y?e:Y.resolve(e)}catch(e){return Y.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Y.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Y.reject(e)}static resolve(t){return new Y((e,i)=>{e(t)})}static reject(t){return new Y((e,i)=>{i(t)})}static waitFor(t){return new Y((e,i)=>{let s=0,a=0,l=!1;t.forEach(c=>{++s,c.next(()=>{++a,l&&a===s&&e()},h=>i(h))}),l=!0,a===s&&e()})}static or(t){let e=Y.resolve(!1);for(const i of t)e=e.next(s=>s?Y.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,a)=>{i.push(e.call(this,s,a))}),this.waitFor(i)}static mapArray(t,e){return new Y((i,s)=>{const a=t.length,l=new Array(a);let c=0;for(let h=0;h<a;h++){const d=h;e(t[d]).next(m=>{l[d]=m,++c,c===a&&i(l)},m=>s(m))}})}static doWhile(t,e){return new Y((i,s)=>{const a=()=>{t()===!0?e().next(()=>{a()},s):i()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="SimpleDb";class dp{static open(t,e,i,s){try{return new dp(e,t.transaction(s,i))}catch(a){throw new Gh(e,a)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new _s,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Gh(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=UT(i.target.error);this.S.reject(new Gh(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(ht(ri,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new J7(e)}}class ca{static delete(t){return ht(ri,"Removing database:",t),_o(PP().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!vT())return!1;if(ca.F())return!0;const t=nn(),e=ca.M(t),i=0<e&&e<10,s=hk(t),a=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||a)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,ca.M(nn())===12.2&&Ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(ht(ri,"Opening database:",this.name),this.db=await new Promise((e,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;e(l)},s.onblocked=()=>{i(new Gh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?i(new gt(lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new gt(lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new Gh(t,l))},s.onupgradeneeded=a=>{ht(ri,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,s.transaction,a.oldVersion,this.version).next(()=>{ht(ri,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,s){const a=e==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(t);const c=dp.open(this.db,t,a?"readonly":"readwrite",i),h=s(c).next(d=>(c.C(),d)).catch(d=>(c.abort(d),Y.reject(d))).toPromise();return h.catch(()=>{}),await c.D,h}catch(c){const h=c,d=h.name!=="FirebaseError"&&l<3;if(ht(ri,"Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function hk(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class Z7{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return _o(this.U.delete())}}class Gh extends gt{constructor(t,e){super(lt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Sa(n){return n.name==="IndexedDbTransactionError"}class J7{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(ht(ri,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(ht(ri,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),_o(i)}add(t){return ht(ri,"ADD",this.store.name,t,t),_o(this.store.add(t))}get(t){return _o(this.store.get(t)).next(e=>(e===void 0&&(e=null),ht(ri,"GET",this.store.name,t,e),e))}delete(t){return ht(ri,"DELETE",this.store.name,t),_o(this.store.delete(t))}count(){return ht(ri,"COUNT",this.store.name),_o(this.store.count())}J(t,e){const i=this.options(t,e),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(i.range);return new Y((l,c)=>{a.onerror=h=>{c(h.target.error)},a.onsuccess=h=>{l(h.target.result)}})}{const a=this.cursor(i),l=[];return this.H(a,(c,h)=>{l.push(h)}).next(()=>l)}}Y(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new Y((s,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{s(l.target.result)}})}Z(t,e){ht(ri,"DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const s=this.cursor(i);return this.H(s,(a,l,c)=>c.delete())}ee(t,e){let i;e?i=t:(i={},e=t);const s=this.cursor(i);return this.H(s,e)}te(t){const e=this.cursor({});return new Y((i,s)=>{e.onerror=a=>{const l=UT(a.target.error);s(l)},e.onsuccess=a=>{const l=a.target.result;l?t(l.primaryKey,l.value).next(c=>{c?l.continue():i()}):i()}})}H(t,e){const i=[];return new Y((s,a)=>{t.onerror=l=>{a(l.target.error)},t.onsuccess=l=>{const c=l.target.result;if(!c)return void s();const h=new Z7(c),d=e(c.primaryKey,c.value,h);if(d instanceof Y){const m=d.catch(y=>(h.done(),Y.reject(y)));i.push(m)}h.isDone?s():h.G===null?c.continue():c.continue(h.G)}}).next(()=>Y.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function _o(n){return new Y((t,e)=>{n.onsuccess=i=>{const s=i.target.result;t(s)},n.onerror=i=>{const s=UT(i.target.error);e(s)}})}let FR=!1;function UT(n){const t=ca.M(nn());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FR||(FR=!0,setTimeout(()=>{throw i},0)),i}}return n}const Kh="IndexBackfiller";class tG{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){ht(Kh,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ne.ie();ht(Kh,`Documents written: ${e}`)}catch(e){Sa(e)?ht(Kh,"Ignoring IndexedDB error during index backfill: ",e):await Ea(e)}await this.re(6e4)})}}class eG{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.se(e,t))}se(t,e){const i=new Set;let s=e,a=!0;return Y.doWhile(()=>a===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(l=>{if(l!==null&&!i.has(l))return ht(Kh,`Processing collection: ${l}`),this.oe(t,l,s).next(c=>{s-=c,i.add(l)});a=!1})).next(()=>e-s)}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(s=>this.localStore.localDocuments.getNextDocuments(t,e,s,i).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(t,l).next(()=>this._e(s,a)).next(c=>(ht(Kh,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(t,e,c))).next(()=>l.size)}))}_e(t,e){let i=t;return e.changes.forEach((s,a)=>{const l=lk(a);BT(l,i)>0&&(i=l)}),new ci(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Kn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=-1;function mp(n){return n==null}function yf(n){return n===0&&1/n==-1/0}function fk(n){return typeof n=="number"&&Number.isInteger(n)&&!yf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="";function Dn(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=zR(t)),t=nG(n.get(e),t);return zR(t)}function nG(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":e+="";break;case Vg:e+="";break;default:e+=a}}return e}function zR(n){return n+Vg+""}function hs(n){const t=n.length;if(St(t>=2,64408,{path:n}),t===2)return St(n.charAt(0)===Vg&&n.charAt(1)==="",56145,{path:n}),ne.emptyPath();const e=t-2,i=[];let s="";for(let a=0;a<t;){const l=n.indexOf(Vg,a);switch((l<0||l>e)&&_t(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(a,l);let h;s.length===0?h=c:(s+=c,h=s,s=""),i.push(h);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:_t(61167,{path:n})}a=l+2}return new ne(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="remoteDocuments",Uf="owner",$l="owner",_f="mutationQueues",iG="userId",Li="mutations",HR="batchId",xo="userMutationsIndex",qR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n,t){return[n,Dn(t)]}function dk(n,t,e){return[n,Dn(t),e]}const sG={},Ac="documentMutations",Lg="remoteDocumentsV14",rG=["prefixPath","collectionGroup","readTime","documentId"],eg="documentKeyIndex",aG=["prefixPath","collectionGroup","documentId"],mk="collectionGroupIndex",oG=["collectionGroup","readTime","prefixPath","documentId"],vf="remoteDocumentGlobal",Zb="remoteDocumentGlobalKey",xc="targets",gk="queryTargetsIndex",lG=["canonicalId","targetId"],Ic="targetDocuments",cG=["targetId","path"],jT="documentTargetsIndex",uG=["path","targetId"],Bg="targetGlobalKey",Mo="targetGlobal",bf="collectionParents",hG=["collectionId","parent"],Rc="clientMetadata",fG="clientId",gp="bundles",dG="bundleId",pp="namedQueries",mG="name",FT="indexConfiguration",gG="indexId",Jb="collectionGroupIndex",pG="collectionGroup",$h="indexState",yG=["indexId","uid"],pk="sequenceNumberIndex",_G=["uid","sequenceNumber"],Wh="indexEntries",vG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yk="documentKeyIndex",bG=["indexId","uid","orderedDocumentKey"],yp="documentOverlays",TG=["userId","collectionPath","documentId"],t0="collectionPathOverlayIndex",EG=["userId","collectionPath","largestBatchId"],_k="collectionGroupOverlayIndex",SG=["userId","collectionGroup","largestBatchId"],zT="globals",wG="name",vk=[_f,Li,Ac,yo,xc,Uf,Mo,Ic,Rc,vf,bf,gp,pp],AG=[...vk,yp],bk=[_f,Li,Ac,Lg,xc,Uf,Mo,Ic,Rc,vf,bf,gp,pp,yp],Tk=bk,HT=[...Tk,FT,$h,Wh],xG=HT,Ek=[...HT,zT],IG=Ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends uk{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function sn(n,t){const e=Tt(n);return ca.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function wa(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Sk(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,e){this.comparator=t,this.root=e||bn.EMPTY}insert(t,e){return new ye(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(t){return new ye(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Pm(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Pm(this.root,t,this.comparator,!1)}getReverseIterator(){return new Pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Pm(this.root,t,this.comparator,!0)}}class Pm{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?i(t.key,e):1,e&&s&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bn{constructor(t,e,i,s,a){this.key=t,this.value=e,this.color=i??bn.RED,this.left=s??bn.EMPTY,this.right=a??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,a){return new bn(t??this.key,e??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const a=i(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,e,i),null):a===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,e,i,s,a){return this}insert(t,e,i){return new bn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.comparator=t,this.data=new ye(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new KR(this.data.getIterator())}getIteratorFrom(t){return new KR(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof le)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new le(this.comparator);return e.data=t,e}}class KR{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this.fields=t,t.sort(xe.comparator)}static empty(){return new $n([])}unionWith(t){let e=new le(xe.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new $n(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Sc(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new wk("Invalid base64 string: "+a):a}}(t);return new Be(e)}static fromUint8Array(t){const e=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(t);return new Be(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const RG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(n){if(St(!!n,39018),typeof n=="string"){let t=0;const e=RG.exec(n);if(St(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ee(n.seconds),nanos:Ee(n.nanos)}}function Ee(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ur(n){return typeof n=="string"?Be.fromBase64String(n):Be.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="server_timestamp",xk="__type__",Ik="__previous_value__",Rk="__local_write_time__";function qT(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[xk])==null?void 0:i.stringValue)===Ak}function _p(n){const t=n.mapValue.fields[Ik];return qT(t)?_p(t):t}function Tf(n){const t=cr(n.mapValue.fields[Rk].timestampValue);return new oe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(t,e,i,s,a,l,c,h,d,m){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=m}}const Ug="(default)";class Fo{constructor(t,e){this.projectId=t,this.database=e||Ug}static empty(){return new Fo("","")}get isDefaultDatabase(){return this.database===Ug}isEqual(t){return t instanceof Fo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="__type__",Ck="__max__",na={mapValue:{fields:{__type__:{stringValue:Ck}}}},KT="__vector__",Cc="value",ng={nullValue:"NULL_VALUE"};function ga(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qT(n)?4:Dk(n)?9007199254740991:vp(n)?10:11:_t(28295,{value:n})}function Ss(n,t){if(n===t)return!0;const e=ga(n);if(e!==ga(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Tf(n).isEqual(Tf(t));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=cr(s.timestampValue),c=cr(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,a){return ur(s.bytesValue).isEqual(ur(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,a){return Ee(s.geoPointValue.latitude)===Ee(a.geoPointValue.latitude)&&Ee(s.geoPointValue.longitude)===Ee(a.geoPointValue.longitude)}(n,t);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ee(s.integerValue)===Ee(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ee(s.doubleValue),c=Ee(a.doubleValue);return l===c?yf(l)===yf(c):isNaN(l)&&isNaN(c)}return!1}(n,t);case 9:return Sc(n.arrayValue.values||[],t.arrayValue.values||[],Ss);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(GR(l)!==GR(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Ss(l[h],c[h])))return!1;return!0}(n,t);default:return _t(52216,{left:n})}}function Ef(n,t){return(n.values||[]).find(e=>Ss(e,t))!==void 0}function pa(n,t){if(n===t)return 0;const e=ga(n),i=ga(t);if(e!==i)return Nt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,t.booleanValue);case 2:return function(a,l){const c=Ee(a.integerValue||a.doubleValue),h=Ee(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return $R(n.timestampValue,t.timestampValue);case 4:return $R(Tf(n),Tf(t));case 5:return Xb(n.stringValue,t.stringValue);case 6:return function(a,l){const c=ur(a),h=ur(l);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(a,l){const c=a.split("/"),h=l.split("/");for(let d=0;d<c.length&&d<h.length;d++){const m=Nt(c[d],h[d]);if(m!==0)return m}return Nt(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,l){const c=Nt(Ee(a.latitude),Ee(l.latitude));return c!==0?c:Nt(Ee(a.longitude),Ee(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return WR(n.arrayValue,t.arrayValue);case 10:return function(a,l){var v,T,w,A;const c=a.fields||{},h=l.fields||{},d=(v=c[Cc])==null?void 0:v.arrayValue,m=(T=h[Cc])==null?void 0:T.arrayValue,y=Nt(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((A=m==null?void 0:m.values)==null?void 0:A.length)||0);return y!==0?y:WR(d,m)}(n.mapValue,t.mapValue);case 11:return function(a,l){if(a===na.mapValue&&l===na.mapValue)return 0;if(a===na.mapValue)return 1;if(l===na.mapValue)return-1;const c=a.fields||{},h=Object.keys(c),d=l.fields||{},m=Object.keys(d);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const v=Xb(h[y],m[y]);if(v!==0)return v;const T=pa(c[h[y]],d[m[y]]);if(T!==0)return T}return Nt(h.length,m.length)}(n.mapValue,t.mapValue);default:throw _t(23264,{he:e})}}function $R(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Nt(n,t);const e=cr(n),i=cr(t),s=Nt(e.seconds,i.seconds);return s!==0?s:Nt(e.nanos,i.nanos)}function WR(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const a=pa(e[s],i[s]);if(a)return a}return Nt(e.length,i.length)}function Dc(n){return n0(n)}function n0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=cr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return ur(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return pt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const a of e.values||[])s?s=!1:i+=",",i+=n0(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${n0(e.fields[l])}`;return s+"}"}(n.mapValue):_t(61005,{value:n})}function ig(n){switch(ga(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_p(n);return t?16+ig(t):16;case 5:return 2*n.stringValue.length;case 6:return ur(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+ig(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return wa(i.fields,(a,l)=>{s+=a.length+ig(l)}),s}(n.mapValue);default:throw _t(13486,{value:n})}}function $T(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function i0(n){return!!n&&"integerValue"in n}function Sf(n){return!!n&&"arrayValue"in n}function YR(n){return!!n&&"nullValue"in n}function XR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sg(n){return!!n&&"mapValue"in n}function vp(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[GT])==null?void 0:i.stringValue)===KT}function Yh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return wa(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Yh(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Yh(n.arrayValue.values[e]);return t}return{...n}}function Dk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ck}const Mk={mapValue:{fields:{[GT]:{stringValue:KT},[Cc]:{arrayValue:{}}}}};function DG(n){return"nullValue"in n?ng:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$T(Fo.empty(),pt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?vp(n)?Mk:{mapValue:{}}:_t(35942,{value:n})}function MG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$T(Fo.empty(),pt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Mk:"mapValue"in n?vp(n)?{mapValue:{}}:na:_t(61959,{value:n})}function QR(n,t){const e=pa(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function ZR(n,t){const e=pa(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.value=t}static empty(){return new In({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!sg(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yh(e)}setAll(t){let e=xe.emptyPath(),i={},s=[];t.forEach((l,c)=>{if(!e.isImmediateParentOf(c)){const h=this.getFieldsMap(e);this.applyChanges(h,i,s),i={},s=[],e=c.popLast()}l?i[c.lastSegment()]=Yh(l):s.push(c.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,i,s)}delete(t){const e=this.field(t.popLast());sg(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ss(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];sg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){wa(e,(s,a)=>t[s]=a);for(const s of i)delete t[s]}clone(){return new In(Yh(this.value))}}function Pk(n){const t=[];return wa(n.fields,(e,i)=>{const s=new xe([e]);if(sg(i)){const a=Pk(i.mapValue).fields;if(a.length===0)t.push(s);else for(const l of a)t.push(s.child(l))}else t.push(s)}),new $n(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t,e,i,s,a,l,c){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(t){return new Me(t,0,xt.min(),xt.min(),xt.min(),In.empty(),0)}static newFoundDocument(t,e,i,s){return new Me(t,1,e,xt.min(),i,s,0)}static newNoDocument(t,e){return new Me(t,2,e,xt.min(),xt.min(),In.empty(),0)}static newUnknownDocument(t,e){return new Me(t,3,e,xt.min(),xt.min(),In.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Me&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t,e){this.position=t,this.inclusive=e}}function JR(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const a=t[s],l=n.position[s];if(a.field.isKeyField()?i=pt.comparator(pt.fromName(l.referenceValue),e.key):i=pa(l,e.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function tC(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ss(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(t,e="asc"){this.field=t,this.dir=e}}function PG(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{}class qt extends Ok{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new OG(t,e,i):e==="array-contains"?new VG(t,i):e==="in"?new Uk(t,i):e==="not-in"?new LG(t,i):e==="array-contains-any"?new BG(t,i):new qt(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new kG(t,i):new NG(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(pa(e,this.value)):e!==null&&ga(this.value)===ga(e)&&this.matchesComparison(pa(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class de extends Ok{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new de(t,e)}matches(t){return Pc(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pc(n){return n.op==="and"}function s0(n){return n.op==="or"}function WT(n){return kk(n)&&Pc(n)}function kk(n){for(const t of n.filters)if(t instanceof de)return!1;return!0}function r0(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+Dc(n.value);if(WT(n))return n.filters.map(t=>r0(t)).join(",");{const t=n.filters.map(e=>r0(e)).join(",");return`${n.op}(${t})`}}function Nk(n,t){return n instanceof qt?function(i,s){return s instanceof qt&&i.op===s.op&&i.field.isEqual(s.field)&&Ss(i.value,s.value)}(n,t):n instanceof de?function(i,s){return s instanceof de&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,l,c)=>a&&Nk(l,s.filters[c]),!0):!1}(n,t):void _t(19439)}function Vk(n,t){const e=n.filters.concat(t);return de.create(e,n.op)}function Lk(n){return n instanceof qt?function(e){return`${e.field.canonicalString()} ${e.op} ${Dc(e.value)}`}(n):n instanceof de?function(e){return e.op.toString()+" {"+e.getFilters().map(Lk).join(" ,")+"}"}(n):"Filter"}class OG extends qt{constructor(t,e,i){super(t,e,i),this.key=pt.fromName(i.referenceValue)}matches(t){const e=pt.comparator(t.key,this.key);return this.matchesComparison(e)}}class kG extends qt{constructor(t,e){super(t,"in",e),this.keys=Bk("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class NG extends qt{constructor(t,e){super(t,"not-in",e),this.keys=Bk("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Bk(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(i=>pt.fromName(i.referenceValue))}class VG extends qt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Sf(e)&&Ef(e.arrayValue,this.value)}}class Uk extends qt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ef(this.value.arrayValue,e)}}class LG extends qt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ef(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Ef(this.value.arrayValue,e)}}class BG extends qt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Sf(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Ef(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(t,e=null,i=[],s=[],a=null,l=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function a0(n,t=null,e=[],i=[],s=null,a=null,l=null){return new UG(n,t,e,i,s,a,l)}function zo(n){const t=Tt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>r0(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),mp(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Dc(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Dc(i)).join(",")),t.Te=e}return t.Te}function jf(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!PG(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Nk(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!tC(n.startAt,t.startAt)&&tC(n.endAt,t.endAt)}function Fg(n){return pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zg(n,t){return n.filters.filter(e=>e instanceof qt&&e.field.isEqual(t))}function eC(n,t,e){let i=ng,s=!0;for(const a of zg(n,t)){let l=ng,c=!0;switch(a.op){case"<":case"<=":l=DG(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,c=!1;break;case"!=":case"not-in":l=ng}QR({value:i,inclusive:s},{value:l,inclusive:c})<0&&(i=l,s=c)}if(e!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const l=e.position[a];QR({value:i,inclusive:s},{value:l,inclusive:e.inclusive})<0&&(i=l,s=e.inclusive);break}}return{value:i,inclusive:s}}function nC(n,t,e){let i=na,s=!0;for(const a of zg(n,t)){let l=na,c=!0;switch(a.op){case">=":case">":l=MG(a.value),c=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,c=!1;break;case"!=":case"not-in":l=na}ZR({value:i,inclusive:s},{value:l,inclusive:c})>0&&(i=l,s=c)}if(e!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const l=e.position[a];ZR({value:i,inclusive:s},{value:l,inclusive:e.inclusive})>0&&(i=l,s=e.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t,e=null,i=[],s=[],a=null,l="F",c=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jk(n,t,e,i,s,a,l,c){return new bp(n,t,e,i,s,a,l,c)}function Tp(n){return new bp(n)}function iC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jG(n){return n.collectionGroup!==null}function Xh(n){const t=Tt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),e.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new le(xe.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new jg(a,i))}),e.has(xe.keyField().canonicalString())||t.Ie.push(new jg(xe.keyField(),i))}return t.Ie}function li(n){const t=Tt(n);return t.Ee||(t.Ee=FG(t,Xh(n))),t.Ee}function FG(n,t){if(n.limitType==="F")return a0(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new jg(s.field,a)});const e=n.endAt?new Mc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Mc(n.startAt.position,n.startAt.inclusive):null;return a0(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function o0(n,t,e){return new bp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Ep(n,t){return jf(li(n),li(t))&&n.limitType===t.limitType}function Fk(n){return`${zo(li(n))}|lt:${n.limitType}`}function tc(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>Lk(s)).join(", ")}]`),mp(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>Dc(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>Dc(s)).join(",")),`Target(${i})`}(li(n))}; limitType=${n.limitType})`}function Ff(n,t){return t.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):pt.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,t)&&function(i,s){for(const a of Xh(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(l,c,h){const d=JR(l,c,h);return l.inclusive?d<=0:d<0}(i.startAt,Xh(i),s)||i.endAt&&!function(l,c,h){const d=JR(l,c,h);return l.inclusive?d>=0:d>0}(i.endAt,Xh(i),s))}(n,t)}function zk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Hk(n){return(t,e)=>{let i=!1;for(const s of Xh(n)){const a=zG(s,t,e);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function zG(n,t,e){const i=n.field.isKeyField()?pt.comparator(t.key,e.key):function(a,l,c){const h=l.data.field(a),d=c.data.field(a);return h!==null&&d!==null?pa(h,d):_t(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _t(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return void(s[a]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){wa(this.inner,(e,i)=>{for(const[s,a]of i)t(s,a)})}isEmpty(){return Sk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HG=new ye(pt.comparator);function ai(){return HG}const qk=new ye(pt.comparator);function Dh(...n){let t=qk;for(const e of n)t=t.insert(e.key,e);return t}function Gk(n){let t=qk;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function fs(){return Qh()}function Kk(){return Qh()}function Qh(){return new hr(n=>n.toString(),(n,t)=>n.isEqual(t))}const qG=new ye(pt.comparator),GG=new le(pt.comparator);function Ut(...n){let t=GG;for(const e of n)t=t.add(e);return t}const KG=new le(Nt);function YT(){return KG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(t)?"-0":t}}function $k(n){return{integerValue:""+n}}function $G(n,t){return fk(t)?$k(t):XT(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this._=void 0}}function WG(n,t,e){return n instanceof wf?function(s,a){const l={fields:{[xk]:{stringValue:Ak},[Rk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&qT(a)&&(a=_p(a)),a&&(l.fields[Ik]=a),{mapValue:l}}(e,t):n instanceof Oc?Yk(n,t):n instanceof kc?Xk(n,t):function(s,a){const l=Wk(s,a),c=sC(l)+sC(s.Ae);return i0(l)&&i0(s.Ae)?$k(c):XT(s.serializer,c)}(n,t)}function YG(n,t,e){return n instanceof Oc?Yk(n,t):n instanceof kc?Xk(n,t):e}function Wk(n,t){return n instanceof Af?function(i){return i0(i)||function(a){return!!a&&"doubleValue"in a}(i)}(t)?t:{integerValue:0}:null}class wf extends Sp{}class Oc extends Sp{constructor(t){super(),this.elements=t}}function Yk(n,t){const e=Qk(t);for(const i of n.elements)e.some(s=>Ss(s,i))||e.push(i);return{arrayValue:{values:e}}}class kc extends Sp{constructor(t){super(),this.elements=t}}function Xk(n,t){let e=Qk(t);for(const i of n.elements)e=e.filter(s=>!Ss(s,i));return{arrayValue:{values:e}}}class Af extends Sp{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function sC(n){return Ee(n.integerValue||n.doubleValue)}function Qk(n){return Sf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(t,e){this.field=t,this.transform=e}}function QG(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof Oc&&s instanceof Oc||i instanceof kc&&s instanceof kc?Sc(i.elements,s.elements,Ss):i instanceof Af&&s instanceof Af?Ss(i.Ae,s.Ae):i instanceof wf&&s instanceof wf}(n.transform,t.transform)}class ZG{constructor(t,e){this.version=t,this.transformResults=e}}class Cn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Cn}static exists(t){return new Cn(void 0,t)}static updateTime(t){return new Cn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rg(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class wp{}function Zk(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Ap(n.key,Cn.none()):new Qc(n.key,n.data,Cn.none());{const e=n.data,i=In.empty();let s=new le(xe.comparator);for(let a of t.fields)if(!s.has(a)){let l=e.field(a);l===null&&a.length>1&&(a=a.popLast(),l=e.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new fr(n.key,i,new $n(s.toArray()),Cn.none())}}function JG(n,t,e){n instanceof Qc?function(s,a,l){const c=s.value.clone(),h=aC(s.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,t,e):n instanceof fr?function(s,a,l){if(!rg(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=aC(s.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(Jk(s)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,t,e):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,e)}function Zh(n,t,e,i){return n instanceof Qc?function(a,l,c,h){if(!rg(a.precondition,l))return c;const d=a.value.clone(),m=oC(a.fieldTransforms,h,l);return d.setAll(m),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(n,t,e,i):n instanceof fr?function(a,l,c,h){if(!rg(a.precondition,l))return c;const d=oC(a.fieldTransforms,h,l),m=l.data;return m.setAll(Jk(a)),m.setAll(d),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(n,t,e,i):function(a,l,c){return rg(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,t,e)}function tK(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),a=Wk(i.transform,s||null);a!=null&&(e===null&&(e=In.empty()),e.set(i.field,a))}return e||null}function rC(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Sc(i,s,(a,l)=>QG(a,l))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Qc extends wp{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fr extends wp{constructor(t,e,i,s,a=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Jk(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function aC(n,t,e){const i=new Map;St(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let s=0;s<e.length;s++){const a=n[s],l=a.transform,c=t.data.field(a.field);i.set(a.field,YG(l,c,e[s]))}return i}function oC(n,t,e){const i=new Map;for(const s of n){const a=s.transform,l=e.data.field(s.field);i.set(s.field,WG(a,l,t))}return i}class Ap extends wp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t2 extends wp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(t.key)&&JG(a,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Zh(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Zh(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=Kk();return this.mutations.forEach(s=>{const a=t.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=e.has(s.key)?null:c;const h=Zk(l,c);h!==null&&i.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(xt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Sc(this.mutations,t.mutations,(e,i)=>rC(e,i))&&Sc(this.baseMutations,t.baseMutations,(e,i)=>rC(e,i))}}class ZT{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){St(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return qG}();const a=t.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new ZT(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,Wt;function nK(n){switch(n){case lt.OK:return _t(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return _t(15467,{code:n})}}function e2(n){if(n===void 0)return Ve("GRPC error has no .code"),lt.UNKNOWN;switch(n){case Ge.OK:return lt.OK;case Ge.CANCELLED:return lt.CANCELLED;case Ge.UNKNOWN:return lt.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return lt.INTERNAL;case Ge.UNAVAILABLE:return lt.UNAVAILABLE;case Ge.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case Ge.NOT_FOUND:return lt.NOT_FOUND;case Ge.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case Ge.ABORTED:return lt.ABORTED;case Ge.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case Ge.DATA_LOSS:return lt.DATA_LOSS;default:return _t(39323,{code:n})}}(Wt=Ge||(Ge={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK=new la([4294967295,4294967295],0);function lC(n){const t=iK().encode(n),e=new QO;return e.update(t),new Uint8Array(e.digest())}function cC(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new la([e,i],0),new la([s,a],0)]}class tE{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Mh(`Invalid padding: ${e}`);if(i<0)throw new Mh(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Mh(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Mh(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=la.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(la.fromNumber(i)));return s.compare(sK)===1&&(s=new la([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=lC(t),[i,s]=cC(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new tE(a,s,e);return i.forEach(c=>l.insert(c)),l}insert(t){if(this.ge===0)return;const e=lC(t),[i,s]=cC(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.Se(l)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Mh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,e,i,s,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,Hf.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new zf(xt.min(),s,new ye(Nt),ai(),Ut())}}class Hf{constructor(t,e,i,s,a){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Hf(i,e,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,e,i,s){this.be=t,this.removedTargetIds=e,this.key=i,this.De=s}}class n2{constructor(t,e){this.targetId=t,this.Ce=e}}class i2{constructor(t,e,i=Be.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class uC{constructor(){this.ve=0,this.Fe=hC(),this.Me=Be.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ut(),e=Ut(),i=Ut();return this.Fe.forEach((s,a)=>{switch(a){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:_t(38017,{changeType:a})}}),new Hf(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=hC()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rK{constructor(t){this.Ge=t,this.ze=new Map,this.je=ai(),this.Je=Om(),this.He=Om(),this.Ye=new ye(Nt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((i,s)=>{this.rt(s)&&e(s)})}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const a=s.target;if(Fg(a))if(i===0){const l=new pt(a.path);this.et(e,l,Me.newNoDocument(l,xt.min()))}else St(i===1,20013,{expectedCount:i});else{const l=this._t(e);if(l!==i){const c=this.ut(t),h=c?this.ct(c,t,l):1;if(h!==0){this.it(e);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,d)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=e;let l,c;try{l=ur(i).toUint8Array()}catch(h){if(h instanceof wk)return gf("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new tE(l,s,a)}catch(h){return gf(h instanceof Mh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach(a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(c)||(this.et(e,a,null),s++)}),s}Tt(t){const e=new Map;this.ze.forEach((a,l)=>{const c=this.ot(l);if(c){if(a.current&&Fg(c.target)){const h=new pt(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Me.newNoDocument(h,t))}a.Be&&(e.set(l,a.ke()),a.qe())}});let i=Ut();this.He.forEach((a,l)=>{let c=!0;l.forEachWhile(h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(a))}),this.je.forEach((a,l)=>l.setReadTime(t));const s=new zf(t,e,this.Ye,this.je,i);return this.je=ai(),this.Je=Om(),this.He=Om(),this.Ye=new ye(Nt),s}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new uC,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new le(Nt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new le(Nt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ht("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new uC),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Om(){return new ye(pt.comparator)}function hC(){return new ye(pt.comparator)}const aK={asc:"ASCENDING",desc:"DESCENDING"},oK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lK={and:"AND",or:"OR"};class cK{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function l0(n,t){return n.useProto3Json||mp(t)?t:{value:t}}function Nc(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function s2(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function uK(n,t){return Nc(n,t.toTimestamp())}function Vn(n){return St(!!n,49232),xt.fromTimestamp(function(e){const i=cr(e);return new oe(i.seconds,i.nanos)}(n))}function eE(n,t){return c0(n,t).canonicalString()}function c0(n,t){const e=function(s){return new ne(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function r2(n){const t=ne.fromString(n);return St(m2(t),10190,{key:t.toString()}),t}function Hg(n,t){return eE(n.databaseId,t.path)}function Po(n,t){const e=r2(t);if(e.get(1)!==n.databaseId.projectId)throw new gt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new gt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new pt(l2(e))}function a2(n,t){return eE(n.databaseId,t)}function o2(n){const t=r2(n);return t.length===4?ne.emptyPath():l2(t)}function u0(n){return new ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l2(n){return St(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fC(n,t,e){return{name:Hg(n,t),fields:e.value.mapValue.fields}}function hK(n,t,e){const i=Po(n,t.name),s=Vn(t.updateTime),a=t.createTime?Vn(t.createTime):xt.min(),l=new In({mapValue:{fields:t.fields}}),c=Me.newFoundDocument(i,s,a,l);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function fK(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_t(39313,{state:d})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(d,m){return d.useProto3Json?(St(m===void 0||typeof m=="string",58123),Be.fromBase64String(m||"")):(St(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Be.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,c=l&&function(d){const m=d.code===void 0?lt.UNKNOWN:e2(d.code);return new gt(m,d.message||"")}(l);e=new i2(i,s,a,c||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Po(n,i.document.name),a=Vn(i.document.updateTime),l=i.document.createTime?Vn(i.document.createTime):xt.min(),c=new In({mapValue:{fields:i.document.fields}}),h=Me.newFoundDocument(s,a,l,c),d=i.targetIds||[],m=i.removedTargetIds||[];e=new ag(d,m,h.key,h)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Po(n,i.document),a=i.readTime?Vn(i.readTime):xt.min(),l=Me.newNoDocument(s,a),c=i.removedTargetIds||[];e=new ag([],c,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Po(n,i.document),a=i.removedTargetIds||[];e=new ag([],a,s,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new eK(s,a),c=i.targetId;e=new n2(c,l)}}return e}function qg(n,t){let e;if(t instanceof Qc)e={update:fC(n,t.key,t.value)};else if(t instanceof Ap)e={delete:Hg(n,t.key)};else if(t instanceof fr)e={update:fC(n,t.key,t.data),updateMask:_K(t.fieldMask)};else{if(!(t instanceof t2))return _t(16599,{Vt:t.type});e={verify:Hg(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(a,l){const c=l.transform;if(c instanceof wf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Oc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof kc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Af)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw _t(20930,{transform:l.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:uK(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:_t(27497)}(n,t.precondition)),e}function h0(n,t){const e=t.currentDocument?function(a){return a.updateTime!==void 0?Cn.updateTime(Vn(a.updateTime)):a.exists!==void 0?Cn.exists(a.exists):Cn.none()}(t.currentDocument):Cn.none(),i=t.updateTransforms?t.updateTransforms.map(s=>function(l,c){let h=null;if("setToServerValue"in c)St(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),h=new wf;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];h=new Oc(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];h=new kc(m)}else"increment"in c?h=new Af(l,c.increment):_t(16584,{proto:c});const d=xe.fromServerFormat(c.fieldPath);return new XG(d,h)}(n,s)):[];if(t.update){t.update.name;const s=Po(n,t.update.name),a=new In({mapValue:{fields:t.update.fields}});if(t.updateMask){const l=function(h){const d=h.fieldPaths||[];return new $n(d.map(m=>xe.fromServerFormat(m)))}(t.updateMask);return new fr(s,a,l,e,i)}return new Qc(s,a,e,i)}if(t.delete){const s=Po(n,t.delete);return new Ap(s,e)}if(t.verify){const s=Po(n,t.verify);return new t2(s,e)}return _t(1463,{proto:t})}function dK(n,t){return n&&n.length>0?(St(t!==void 0,14353),n.map(e=>function(s,a){let l=s.updateTime?Vn(s.updateTime):Vn(a);return l.isEqual(xt.min())&&(l=Vn(a)),new ZG(l,s.transformResults||[])}(e,t))):[]}function c2(n,t){return{documents:[a2(n,t.path)]}}function u2(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=a2(n,s);const a=function(d){if(d.length!==0)return d2(de.create(d,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const l=function(d){if(d.length!==0)return d.map(m=>function(v){return{field:ec(v.field),direction:gK(v.dir)}}(m))}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const c=l0(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{ft:e,parent:s}}function h2(n){let t=o2(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){St(i===1,65062);const m=e.from[0];m.allDescendants?s=m.collectionId:t=t.child(m.collectionId)}let a=[];e.where&&(a=function(y){const v=f2(y);return v instanceof de&&WT(v)?v.getFilters():[v]}(e.where));let l=[];e.orderBy&&(l=function(y){return y.map(v=>function(w){return new jg(nc(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(v))}(e.orderBy));let c=null;e.limit&&(c=function(y){let v;return v=typeof y=="object"?y.value:y,mp(v)?null:v}(e.limit));let h=null;e.startAt&&(h=function(y){const v=!!y.before,T=y.values||[];return new Mc(T,v)}(e.startAt));let d=null;return e.endAt&&(d=function(y){const v=!y.before,T=y.values||[];return new Mc(T,v)}(e.endAt)),jk(t,s,l,a,c,"F",h,d)}function mK(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function f2(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=nc(e.unaryFilter.field);return qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=nc(e.unaryFilter.field);return qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=nc(e.unaryFilter.field);return qt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nc(e.unaryFilter.field);return qt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(n):n.fieldFilter!==void 0?function(e){return qt.create(nc(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return de.create(e.compositeFilter.filters.map(i=>f2(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(e.compositeFilter.op))}(n):_t(30097,{filter:n})}function gK(n){return aK[n]}function pK(n){return oK[n]}function yK(n){return lK[n]}function ec(n){return{fieldPath:n.canonicalString()}}function nc(n){return xe.fromServerFormat(n.fieldPath)}function d2(n){return n instanceof qt?function(e){if(e.op==="=="){if(XR(e.value))return{unaryFilter:{field:ec(e.field),op:"IS_NAN"}};if(YR(e.value))return{unaryFilter:{field:ec(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(XR(e.value))return{unaryFilter:{field:ec(e.field),op:"IS_NOT_NAN"}};if(YR(e.value))return{unaryFilter:{field:ec(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ec(e.field),op:pK(e.op),value:e.value}}}(n):n instanceof de?function(e){const i=e.getFilters().map(s=>d2(s));return i.length===1?i[0]:{compositeFilter:{op:yK(e.op),filters:i}}}(n):_t(54877,{filter:n})}function _K(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function m2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t,e,i,s,a=xt.min(),l=xt.min(),c=Be.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(t){return new ir(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(t){this.yt=t}}function vK(n,t){let e;if(t.document)e=hK(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=pt.fromSegments(t.noDocument.path),s=qo(t.noDocument.readTime);e=Me.newNoDocument(i,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return _t(56709);{const i=pt.fromSegments(t.unknownDocument.path),s=qo(t.unknownDocument.version);e=Me.newUnknownDocument(i,s)}}return t.readTime&&e.setReadTime(function(s){const a=new oe(s[0],s[1]);return xt.fromTimestamp(a)}(t.readTime)),e}function dC(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Gg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(a,l){return{name:Hg(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Nc(a,l.version.toTimestamp()),createTime:Nc(a,l.createTime.toTimestamp())}}(n.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Ho(t.version)};else{if(!t.isUnknownDocument())return _t(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:Ho(t.version)}}return i}function Gg(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Ho(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qo(n){const t=new oe(n.seconds,n.nanoseconds);return xt.fromTimestamp(t)}function vo(n,t){const e=(t.baseMutations||[]).map(a=>h0(n.yt,a));for(let a=0;a<t.mutations.length-1;++a){const l=t.mutations[a];if(a+1<t.mutations.length&&t.mutations[a+1].transform!==void 0){const c=t.mutations[a+1];l.updateTransforms=c.transform.fieldTransforms,t.mutations.splice(a+1,1),++a}}const i=t.mutations.map(a=>h0(n.yt,a)),s=oe.fromMillis(t.localWriteTimeMs);return new QT(t.batchId,s,e,i)}function Ph(n){const t=qo(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?qo(n.lastLimboFreeSnapshotVersion):xt.min();let i;return i=function(a){return a.documents!==void 0}(n.query)?function(a){const l=a.documents.length;return St(l===1,1966,{count:l}),li(Tp(o2(a.documents[0])))}(n.query):function(a){return li(h2(a))}(n.query),new ir(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Be.fromBase64String(n.resumeToken))}function p2(n,t){const e=Ho(t.snapshotVersion),i=Ho(t.lastLimboFreeSnapshotVersion);let s;s=Fg(t.target)?c2(n.yt,t.target):u2(n.yt,t.target).ft;const a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zo(t.target),readTime:e,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function y2(n){const t=h2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?o0(t,t.limit,"L"):t}function Zv(n,t){return new JT(t.largestBatchId,h0(n.yt,t.overlayMutation))}function mC(n,t){const e=t.path.lastSegment();return[n,Dn(t.path.popLast()),e]}function gC(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:Ho(i.readTime),documentKey:Dn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{getBundleMetadata(t,e){return pC(t).get(e).next(i=>{if(i)return function(a){return{id:a.bundleId,createTime:qo(a.createTime),version:a.version}}(i)})}saveBundleMetadata(t,e){return pC(t).put(function(s){return{bundleId:s.id,createTime:Ho(Vn(s.createTime)),version:s.version}}(e))}getNamedQuery(t,e){return yC(t).get(e).next(i=>{if(i)return function(a){return{name:a.name,query:y2(a.bundledQuery),readTime:qo(a.readTime)}}(i)})}saveNamedQuery(t,e){return yC(t).put(function(s){return{name:s.name,readTime:Ho(Vn(s.readTime)),bundledQuery:s.bundledQuery}}(e))}}function pC(n){return sn(n,gp)}function yC(n){return sn(n,pp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new xp(t,i)}getOverlay(t,e){return yh(t).get(mC(this.userId,e)).next(i=>i?Zv(this.serializer,i):null)}getOverlays(t,e){const i=fs();return Y.forEach(e,s=>this.getOverlay(t,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(t,e,i){const s=[];return i.forEach((a,l)=>{const c=new JT(e,l);s.push(this.St(t,c))}),Y.waitFor(s)}removeOverlaysForBatchId(t,e,i){const s=new Set;e.forEach(l=>s.add(Dn(l.getCollectionPath())));const a=[];return s.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);a.push(yh(t).Z(t0,c))}),Y.waitFor(a)}getOverlaysForCollection(t,e,i){const s=fs(),a=Dn(e),l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return yh(t).J(t0,l).next(c=>{for(const h of c){const d=Zv(this.serializer,h);s.set(d.getKey(),d)}return s})}getOverlaysForCollectionGroup(t,e,i,s){const a=fs();let l;const c=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return yh(t).ee({index:_k,range:c},(h,d,m)=>{const y=Zv(this.serializer,d);a.size()<s||y.largestBatchId===l?(a.set(y.getKey(),y),l=y.largestBatchId):m.done()}).next(()=>a)}St(t,e){return yh(t).put(function(s,a,l){const[c,h,d]=mC(a,l.mutation.key);return{userId:a,collectionPath:h,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:qg(s.yt,l.mutation)}}(this.serializer,this.userId,e))}}function yh(n){return sn(n,yp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{bt(t){return sn(t,zT)}getSessionToken(t){return this.bt(t).get("sessionToken").next(e=>{const i=e==null?void 0:e.value;return i?Be.fromUint8Array(i):Be.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Ee(t.integerValue));else if("doubleValue"in t){const i=Ee(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),yf(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=cr(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(ur(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?Dk(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):vp(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):_t(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const i=t.fields||{};this.Ft(e,55);for(const s of Object.keys(i))this.Ot(s,e),this.Ct(i[s],e)}kt(t,e){var l,c;const i=t.fields||{};this.Ft(e,53);const s=Cc,a=((c=(l=i[s].arrayValue)==null?void 0:l.values)==null?void 0:c.length)||0;this.Ft(e,15),e.Mt(Ee(a)),this.Ot(s,e),this.Ct(i[s],e)}Qt(t,e){const i=t.values||[];this.Ft(e,50);for(const s of i)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),pt.fromName(t).path.forEach(i=>{this.Ft(e,60),this.Ut(i,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}bo.Kt=new bo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=255;function EK(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function _C(n){const t=64-function(i){let s=0;for(let a=0;a<8;++a){const l=EK(255&i[a]);if(s+=l,l!==8)break}return s}(n);return Math.ceil(t/8)}class SK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Jt(i.value),i=e.next();this.Ht()}Yt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=e.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=e.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(t){const e=this.en(t),i=_C(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=255&e[s]}nn(t){const e=this.en(t),i=_C(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}rn(){this.sn(Yl),this.sn(255)}_n(){this.an(Yl),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let s=1;s<e.length;++s)e[s]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Yl?(this.sn(Yl),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Yl?(this.an(Yl),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class wK{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class AK{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class _h{constructor(){this.cn=new SK,this.ln=new wK(this.cn),this.hn=new AK(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,e,i,s){this.Tn=t,this.In=e,this.En=i,this.dn=s}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.dn,0),e!==t?i.set([0],this.dn.length):++i[i.length-1],new To(this.Tn,this.In,this.En,i)}Rn(t,e,i){return{indexId:this.Tn,uid:t,arrayValue:og(this.En),directionalValue:og(this.dn),orderedDocumentKey:og(e),documentKey:i.path.toArray()}}Vn(t,e,i){const s=this.Rn(t,e,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Hr(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=vC(n.En,t.En),e!==0?e:(e=vC(n.dn,t.dn),e!==0?e:pt.comparator(n.In,t.In)))}function vC(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}function og(n){return UP()?function(e){let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return i}(n):n}function bC(n){return typeof n!="string"?n:function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(n)}class TC{constructor(t){this.mn=new le((e,i)=>xe.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const i=e;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(t){if(St(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Qb(t);if(e!==void 0&&!this.wn(e))return!1;const i=po(t);let s=new Set,a=0,l=0;for(;a<i.length&&this.wn(i[a]);++a)s=s.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const h=i[a];if(!this.Sn(c,h)||!this.bn(this.fn[l++],h))return!1}++a}for(;a<i.length;++a){const c=i[a];if(l>=this.fn.length||!this.bn(this.fn[l++],c))return!1}return!0}Dn(){if(this.pn)return null;let t=new le(xe.comparator);const e=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new Jm(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new Jm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new Jm(i.field,i.dir==="asc"?0:1)));return new Ng(Ng.UNKNOWN_ID,this.collectionId,e,pf.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n){var e,i;if(St(n instanceof qt||n instanceof de,20012),n instanceof qt){if(n instanceof Uk){const s=((i=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:i.map(a=>qt.create(n.field,"==",a)))||[];return de.create(s,"or")}return n}const t=n.filters.map(s=>_2(s));return de.create(t,n.op)}function xK(n){if(n.getFilters().length===0)return[];const t=m0(_2(n));return St(v2(t),7391),f0(t)||d0(t)?[t]:t.getFilters()}function f0(n){return n instanceof qt}function d0(n){return n instanceof de&&WT(n)}function v2(n){return f0(n)||d0(n)||function(e){if(e instanceof de&&s0(e)){for(const i of e.getFilters())if(!f0(i)&&!d0(i))return!1;return!0}return!1}(n)}function m0(n){if(St(n instanceof qt||n instanceof de,34018),n instanceof qt)return n;if(n.filters.length===1)return m0(n.filters[0]);const t=n.filters.map(i=>m0(i));let e=de.create(t,n.op);return e=Kg(e),v2(e)?e:(St(e instanceof de,64498),St(Pc(e),40251),St(e.filters.length>1,57927),e.filters.reduce((i,s)=>nE(i,s)))}function nE(n,t){let e;return St(n instanceof qt||n instanceof de,38388),St(t instanceof qt||t instanceof de,25473),e=n instanceof qt?t instanceof qt?function(s,a){return de.create([s,a],"and")}(n,t):EC(n,t):t instanceof qt?EC(t,n):function(s,a){if(St(s.filters.length>0&&a.filters.length>0,48005),Pc(s)&&Pc(a))return Vk(s,a.getFilters());const l=s0(s)?s:a,c=s0(s)?a:s,h=l.filters.map(d=>nE(d,c));return de.create(h,"or")}(n,t),Kg(e)}function EC(n,t){if(Pc(t))return Vk(t,n.getFilters());{const e=t.filters.map(i=>nE(n,i));return de.create(e,"or")}}function Kg(n){if(St(n instanceof qt||n instanceof de,11850),n instanceof qt)return n;const t=n.getFilters();if(t.length===1)return Kg(t[0]);if(kk(n))return n;const e=t.map(s=>Kg(s)),i=[];return e.forEach(s=>{s instanceof qt?i.push(s):s instanceof de&&(s.op===n.op?i.push(...s.filters):i.push(s))}),i.length===1?i[0]:de.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(){this.Cn=new iE}addToCollectionParentIndex(t,e){return this.Cn.add(e),Y.resolve()}getCollectionParents(t,e){return Y.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Y.resolve()}deleteFieldIndex(t,e){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,e){return Y.resolve()}getDocumentsMatchingTarget(t,e){return Y.resolve(null)}getIndexType(t,e){return Y.resolve(0)}getFieldIndexes(t,e){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,e){return Y.resolve(ci.min())}getMinOffsetFromCollectionGroup(t,e){return Y.resolve(ci.min())}updateCollectionGroup(t,e,i){return Y.resolve()}updateIndexEntries(t,e){return Y.resolve()}}class iE{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new le(ne.comparator),a=!s.has(i);return this.index[e]=s.add(i),a}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new le(ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="IndexedDbIndexManager",km=new Uint8Array(0);class RK{constructor(t,e){this.databaseId=e,this.vn=new iE,this.Fn=new hr(i=>zo(i),(i,s)=>jf(i,s)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const i=e.lastSegment(),s=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const a={collectionId:i,parent:Dn(s)};return wC(t).put(a)}return Y.resolve()}getCollectionParents(t,e){const i=[],s=IDBKeyRange.bound([e,""],[sk(e),""],!1,!0);return wC(t).J(s).next(a=>{for(const l of a){if(l.collectionId!==e)break;i.push(hs(l.parent))}return i})}addFieldIndex(t,e){const i=vh(t),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(e);delete s.indexId;const a=i.add(s);if(e.indexState){const l=Ql(t);return a.next(c=>{l.put(gC(c,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return a.next()}deleteFieldIndex(t,e){const i=vh(t),s=Ql(t),a=Xl(t);return i.delete(e.indexId).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=vh(t),i=Xl(t),s=Ql(t);return e.Z().next(()=>i.Z()).next(()=>s.Z())}createTargetIndexes(t,e){return Y.forEach(this.Mn(e),i=>this.getIndexType(t,i).next(s=>{if(s===0||s===1){const a=new TC(i).Dn();if(a!=null)return this.addFieldIndex(t,a)}}))}getDocumentsMatchingTarget(t,e){const i=Xl(t);let s=!0;const a=new Map;return Y.forEach(this.Mn(e),l=>this.xn(t,l).next(c=>{s&&(s=!!c),a.set(l,c)})).next(()=>{if(s){let l=Ut();const c=[];return Y.forEach(a,(h,d)=>{ht(SC,`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(h)} to execute ${zo(e)}`);const m=function(U,K){const z=Qb(K);if(z===void 0)return null;for(const nt of zg(U,z.fieldPath))switch(nt.op){case"array-contains-any":return nt.value.arrayValue.values||[];case"array-contains":return[nt.value]}return null}(d,h),y=function(U,K){const z=new Map;for(const nt of po(K))for(const O of zg(U,nt.fieldPath))switch(O.op){case"==":case"in":z.set(nt.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return z.set(nt.fieldPath.canonicalString(),O.value),Array.from(z.values())}return null}(d,h),v=function(U,K){const z=[];let nt=!0;for(const O of po(K)){const I=O.kind===0?eC(U,O.fieldPath,U.startAt):nC(U,O.fieldPath,U.startAt);z.push(I.value),nt&&(nt=I.inclusive)}return new Mc(z,nt)}(d,h),T=function(U,K){const z=[];let nt=!0;for(const O of po(K)){const I=O.kind===0?nC(U,O.fieldPath,U.endAt):eC(U,O.fieldPath,U.endAt);z.push(I.value),nt&&(nt=I.inclusive)}return new Mc(z,nt)}(d,h),w=this.On(h,d,v),A=this.On(h,d,T),x=this.Nn(h,d,y),k=this.Bn(h.indexId,m,w,v.inclusive,A,T.inclusive,x);return Y.forEach(k,L=>i.Y(L,e.limit).next(U=>{U.forEach(K=>{const z=pt.fromSegments(K.documentKey);l.has(z)||(l=l.add(z),c.push(z))})}))}).next(()=>c)}return Y.resolve(null)})}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=xK(de.create(t.filters,"and")).map(i=>a0(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.Fn.set(t,e),e)}Bn(t,e,i,s,a,l,c){const h=(e!=null?e.length:1)*Math.max(i.length,a.length),d=h/(e!=null?e.length:1),m=[];for(let y=0;y<h;++y){const v=e?this.Ln(e[y/d]):km,T=this.kn(t,v,i[y%d],s),w=this.qn(t,v,a[y%d],l),A=c.map(x=>this.kn(t,v,x,!0));m.push(...this.createRange(T,w,A))}return m}kn(t,e,i,s){const a=new To(t,pt.empty(),e,i);return s?a:a.An()}qn(t,e,i,s){const a=new To(t,pt.empty(),e,i);return s?a.An():a}xn(t,e){const i=new TC(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next(a=>{let l=null;for(const c of a)i.yn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(t,e){let i=2;const s=this.Mn(e);return Y.forEach(s,a=>this.xn(t,a).next(l=>{l?i!==0&&l.fields.length<function(h){let d=new le(xe.comparator),m=!1;for(const y of h.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?m=!0:d=d.add(v.field));for(const y of h.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(m?1:0)}(a)&&(i=1):i=0})).next(()=>function(l){return l.limit!==null}(e)&&s.length>1&&i===2?1:i)}Qn(t,e){const i=new _h;for(const s of po(t)){const a=e.data.field(s.fieldPath);if(a==null)return null;const l=i.Pn(s.kind);bo.Kt.Dt(a,l)}return i.un()}Ln(t){const e=new _h;return bo.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const i=new _h;return bo.Kt.Dt($T(this.databaseId,e),i.Pn(function(a){const l=po(a);return l.length===0?0:l[l.length-1].kind}(t))),i.un()}Nn(t,e,i){if(i===null)return[];let s=[];s.push(new _h);let a=0;for(const l of po(t)){const c=i[a++];for(const h of s)if(this.Un(e,l.fieldPath)&&Sf(c))s=this.Kn(s,l,c);else{const d=h.Pn(l.kind);bo.Kt.Dt(c,d)}}return this.Wn(s)}On(t,e,i){return this.Nn(t,e,i.position)}Wn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Kn(t,e,i){const s=[...t],a=[];for(const l of i.arrayValue.values||[])for(const c of s){const h=new _h;h.seed(c.un()),bo.Kt.Dt(l,h.Pn(e.kind)),a.push(h)}return a}Un(t,e){return!!t.filters.find(i=>i instanceof qt&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){const i=vh(t),s=Ql(t);return(e?i.J(Jb,IDBKeyRange.bound(e,e)):i.J()).next(a=>{const l=[];return Y.forEach(a,c=>s.get([c.indexId,this.uid]).next(h=>{l.push(function(m,y){const v=y?new pf(y.sequenceNumber,new ci(qo(y.readTime),new pt(hs(y.documentKey)),y.largestBatchId)):pf.empty(),T=m.fields.map(([w,A])=>new Jm(xe.fromServerFormat(w),A));return new Ng(m.indexId,m.collectionGroup,T,v)}(c,h))})).next(()=>l)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,s)=>{const a=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Nt(i.collectionGroup,s.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const s=vh(t),a=Ql(t);return this.Gn(t).next(l=>s.J(Jb,IDBKeyRange.bound(e,e)).next(c=>Y.forEach(c,h=>a.put(gC(h.indexId,this.uid,l,i)))))}updateIndexEntries(t,e){const i=new Map;return Y.forEach(e,(s,a)=>{const l=i.get(s.collectionGroup);return(l?Y.resolve(l):this.getFieldIndexes(t,s.collectionGroup)).next(c=>(i.set(s.collectionGroup,c),Y.forEach(c,h=>this.zn(t,s,h).next(d=>{const m=this.jn(a,h);return d.isEqual(m)?Y.resolve():this.Jn(t,a,h,d,m)}))))})}Hn(t,e,i,s){return Xl(t).put(s.Rn(this.uid,this.$n(i,e.key),e.key))}Yn(t,e,i,s){return Xl(t).delete(s.Vn(this.uid,this.$n(i,e.key),e.key))}zn(t,e,i){const s=Xl(t);let a=new le(Hr);return s.ee({index:yk,range:IDBKeyRange.only([i.indexId,this.uid,og(this.$n(i,e))])},(l,c)=>{a=a.add(new To(i.indexId,e,bC(c.arrayValue),bC(c.directionalValue)))}).next(()=>a)}jn(t,e){let i=new le(Hr);const s=this.Qn(e,t);if(s==null)return i;const a=Qb(e);if(a!=null){const l=t.data.field(a.fieldPath);if(Sf(l))for(const c of l.arrayValue.values||[])i=i.add(new To(e.indexId,t.key,this.Ln(c),s))}else i=i.add(new To(e.indexId,t.key,km,s));return i}Jn(t,e,i,s,a){ht(SC,"Updating index entries for document '%s'",e.key);const l=[];return function(h,d,m,y,v){const T=h.getIterator(),w=d.getIterator();let A=Wl(T),x=Wl(w);for(;A||x;){let k=!1,L=!1;if(A&&x){const U=m(A,x);U<0?L=!0:U>0&&(k=!0)}else A!=null?L=!0:k=!0;k?(y(x),x=Wl(w)):L?(v(A),A=Wl(T)):(A=Wl(T),x=Wl(w))}}(s,a,Hr,c=>{l.push(this.Hn(t,e,i,c))},c=>{l.push(this.Yn(t,e,i,c))}),Y.waitFor(l)}Gn(t){let e=1;return Ql(t).ee({index:pk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,a)=>{a.done(),e=s.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((l,c)=>Hr(l,c)).filter((l,c,h)=>!c||Hr(l,h[c-1])!==0);const s=[];s.push(t);for(const l of i){const c=Hr(l,t),h=Hr(l,e);if(c===0)s[0]=t.An();else if(c>0&&h<0)s.push(l),s.push(l.An());else if(h>0)break}s.push(e);const a=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const c=s[l].Vn(this.uid,km,pt.empty()),h=s[l+1].Vn(this.uid,km,pt.empty());a.push(IDBKeyRange.bound(c,h))}return a}Zn(t,e){return Hr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(AC)}getMinOffset(t,e){return Y.mapArray(this.Mn(e),i=>this.xn(t,i).next(s=>s||_t(44426))).next(AC)}}function wC(n){return sn(n,bf)}function Xl(n){return sn(n,Wh)}function vh(n){return sn(n,FT)}function Ql(n){return sn(n,$h)}function AC(n){St(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;BT(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new ci(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},b2=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(n,t,e){const i=n.store(Li),s=n.store(Ac),a=[],l=IDBKeyRange.only(e.batchId);let c=0;const h=i.ee({range:l},(m,y,v)=>(c++,v.delete()));a.push(h.next(()=>{St(c===1,47070,{batchId:e.batchId})}));const d=[];for(const m of e.mutations){const y=dk(t,m.key.path,e.batchId);a.push(s.delete(y)),d.push(m.key)}return Y.waitFor(a).next(()=>d)}function $g(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw _t(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(b2,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Ip{constructor(t,e,i,s){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(t,e,i,s){St(t.uid!=="",64387);const a=t.isAuthenticated()?t.uid:"";return new Ip(a,e,i,s)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qr(t).ee({index:xo,range:i},(s,a,l)=>{e=!1,l.done()}).next(()=>e)}addMutationBatch(t,e,i,s){const a=ic(t),l=qr(t);return l.add({}).next(c=>{St(typeof c=="number",49019);const h=new QT(c,e,i,s),d=function(T,w,A){const x=A.baseMutations.map(L=>qg(T.yt,L)),k=A.mutations.map(L=>qg(T.yt,L));return{userId:w,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:x,mutations:k}}(this.serializer,this.userId,h),m=[];let y=new le((v,T)=>Nt(v.canonicalString(),T.canonicalString()));for(const v of s){const T=dk(this.userId,v.key.path,c);y=y.add(v.key.path.popLast()),m.push(l.put(d)),m.push(a.put(T,sG))}return y.forEach(v=>{m.push(this.indexManager.addToCollectionParentIndex(t,v))}),t.addOnCommittedListener(()=>{this.Xn[c]=h.keys()}),Y.waitFor(m).next(()=>h)})}lookupMutationBatch(t,e){return qr(t).get(e).next(i=>i?(St(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),vo(this.serializer,i)):null)}er(t,e){return this.Xn[e]?Y.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const s=i.keys();return this.Xn[e]=s,s}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return qr(t).ee({index:xo,range:s},(l,c,h)=>{c.userId===this.userId&&(St(c.batchId>=i,47524,{tr:i}),a=vo(this.serializer,c)),h.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Do;return qr(t).ee({index:xo,range:e,reverse:!0},(s,a,l)=>{i=a.batchId,l.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Do],[this.userId,Number.POSITIVE_INFINITY]);return qr(t).J(xo,e).next(i=>i.map(s=>vo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=tg(this.userId,e.path),s=IDBKeyRange.lowerBound(i),a=[];return ic(t).ee({range:s},(l,c,h)=>{const[d,m,y]=l,v=hs(m);if(d===this.userId&&e.path.isEqual(v))return qr(t).get(y).next(T=>{if(!T)throw _t(61480,{nr:l,batchId:y});St(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:y}),a.push(vo(this.serializer,T))});h.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new le(Nt);const s=[];return e.forEach(a=>{const l=tg(this.userId,a.path),c=IDBKeyRange.lowerBound(l),h=ic(t).ee({range:c},(d,m,y)=>{const[v,T,w]=d,A=hs(T);v===this.userId&&a.path.isEqual(A)?i=i.add(w):y.done()});s.push(h)}),Y.waitFor(s).next(()=>this.rr(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1,a=tg(this.userId,i),l=IDBKeyRange.lowerBound(a);let c=new le(Nt);return ic(t).ee({range:l},(h,d,m)=>{const[y,v,T]=h,w=hs(v);y===this.userId&&i.isPrefixOf(w)?w.length===s&&(c=c.add(T)):m.done()}).next(()=>this.rr(t,c))}rr(t,e){const i=[],s=[];return e.forEach(a=>{s.push(qr(t).get(a).next(l=>{if(l===null)throw _t(35274,{batchId:a});St(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),i.push(vo(this.serializer,l))}))}),Y.waitFor(s).next(()=>i)}removeMutationBatch(t,e){return T2(t.le,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.ir(e.batchId)}),Y.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Y.resolve();const i=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),s=[];return ic(t).ee({range:i},(a,l,c)=>{if(a[0]===this.userId){const h=hs(a[1]);s.push(h)}else c.done()}).next(()=>{St(s.length===0,56720,{sr:s.map(a=>a.canonicalString())})})})}containsKey(t,e){return E2(t,this.userId,e)}_r(t){return S2(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Do,lastStreamToken:""})}}function E2(n,t,e){const i=tg(t,e.path),s=i[1],a=IDBKeyRange.lowerBound(i);let l=!1;return ic(n).ee({range:a,X:!0},(c,h,d)=>{const[m,y,v]=c;m===t&&y===s&&(l=!0),d.done()}).next(()=>l)}function qr(n){return sn(n,Li)}function ic(n){return sn(n,Ac)}function S2(n){return sn(n,_f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Go(0)}static cr(){return new Go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next(e=>{const i=new Go(e.highestTargetId);return e.highestTargetId=i.next(),this.hr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.lr(t).next(e=>xt.fromTimestamp(new oe(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.lr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.lr(t).next(s=>(s.highestListenSequenceNumber=e,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.hr(t,s)))}addTargetData(t,e){return this.Pr(t,e).next(()=>this.lr(t).next(i=>(i.targetCount+=1,this.Tr(e,i),this.hr(t,i))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Zl(t).delete(e.targetId)).next(()=>this.lr(t)).next(i=>(St(i.targetCount>0,8065),i.targetCount-=1,this.hr(t,i)))}removeTargets(t,e,i){let s=0;const a=[];return Zl(t).ee((l,c)=>{const h=Ph(c);h.sequenceNumber<=e&&i.get(h.targetId)===null&&(s++,a.push(this.removeTargetData(t,h)))}).next(()=>Y.waitFor(a)).next(()=>s)}forEachTarget(t,e){return Zl(t).ee((i,s)=>{const a=Ph(s);e(a)})}lr(t){return IC(t).get(Bg).next(e=>(St(e!==null,2888),e))}hr(t,e){return IC(t).put(Bg,e)}Pr(t,e){return Zl(t).put(p2(this.serializer,e))}Tr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.lr(t).next(e=>e.targetCount)}getTargetData(t,e){const i=zo(e),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return Zl(t).ee({range:s,index:gk},(l,c,h)=>{const d=Ph(c);jf(e,d.target)&&(a=d,h.done())}).next(()=>a)}addMatchingKeys(t,e,i){const s=[],a=Zr(t);return e.forEach(l=>{const c=Dn(l.path);s.push(a.put({targetId:i,path:c})),s.push(this.referenceDelegate.addReference(t,i,l))}),Y.waitFor(s)}removeMatchingKeys(t,e,i){const s=Zr(t);return Y.forEach(e,a=>{const l=Dn(a.path);return Y.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(t,i,a)])})}removeMatchingKeysForTargetId(t,e){const i=Zr(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),s=Zr(t);let a=Ut();return s.ee({range:i,X:!0},(l,c,h)=>{const d=hs(l[1]),m=new pt(d);a=a.add(m)}).next(()=>a)}containsKey(t,e){const i=Dn(e.path),s=IDBKeyRange.bound([i],[sk(i)],!1,!0);let a=0;return Zr(t).ee({index:jT,X:!0,range:s},([l,c],h,d)=>{l!==0&&(a++,d.done())}).next(()=>a>0)}At(t,e){return Zl(t).get(e).next(i=>i?Ph(i):null)}}function Zl(n){return sn(n,xc)}function IC(n){return sn(n,Mo)}function Zr(n){return sn(n,Ic)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="LruGarbageCollector",w2=1048576;function CC([n,t],[e,i]){const s=Nt(n,e);return s===0?Nt(t,i):s}class DK{constructor(t){this.Ir=t,this.buffer=new le(CC),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();CC(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class A2{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ht(RC,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Sa(e)?ht(RC,"Ignoring IndexedDB error during garbage collection: ",e):await Ea(e)}await this.Vr(3e5)})}}class MK{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return Y.resolve(Kn.ce);const i=new DK(e);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(xC)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xC):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,s,a,l,c,h,d;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(t,s))).next(y=>(i=y,c=Date.now(),this.removeTargets(t,i,e))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(t,i))).next(y=>(d=Date.now(),Jl()<=Ht.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(d-h)+`ms
Total Duration: ${d-m}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function x2(n,t){return new MK(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(t,e){this.db=t,this.garbageCollector=x2(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,(i,s)=>e(s))}addReference(t,e,i){return Nm(t,i)}removeReference(t,e,i){return Nm(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Nm(t,e)}br(t,e){return function(s,a){let l=!1;return S2(s).te(c=>E2(s,c,a).next(h=>(h&&(l=!0),Y.resolve(!h)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.Sr(t,(l,c)=>{if(c<=e){const h=this.br(t,l).next(d=>{if(!d)return a++,i.getEntry(t,l).next(()=>(i.removeEntry(l,xt.min()),Zr(t).delete(function(y){return[0,Dn(y.path)]}(l))))});s.push(h)}}).next(()=>Y.waitFor(s)).next(()=>i.apply(t)).next(()=>a)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Nm(t,e)}Sr(t,e){const i=Zr(t);let s,a=Kn.ce;return i.ee({index:jT},([l,c],{path:h,sequenceNumber:d})=>{l===0?(a!==Kn.ce&&e(new pt(hs(s)),a),a=d,s=h):a=Kn.ce}).next(()=>{a!==Kn.ce&&e(new pt(hs(s)),a)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Nm(n,t){return Zr(n).put(function(i,s){return{targetId:0,path:Dn(i.path),sequenceNumber:s}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.changes=new hr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Me.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?Y.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return ho(t).put(i)}removeEntry(t,e,i){return ho(t).delete(function(a,l){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Gg(l),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Dr(t,i)))}getEntry(t,e){let i=Me.newInvalidDocument(e);return ho(t).ee({index:eg,range:IDBKeyRange.only(bh(e))},(s,a)=>{i=this.Cr(e,a)}).next(()=>i)}vr(t,e){let i={size:0,document:Me.newInvalidDocument(e)};return ho(t).ee({index:eg,range:IDBKeyRange.only(bh(e))},(s,a)=>{i={document:this.Cr(e,a),size:$g(a)}}).next(()=>i)}getEntries(t,e){let i=ai();return this.Fr(t,e,(s,a)=>{const l=this.Cr(s,a);i=i.insert(s,l)}).next(()=>i)}Mr(t,e){let i=ai(),s=new ye(pt.comparator);return this.Fr(t,e,(a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c),s=s.insert(a,$g(l))}).next(()=>({documents:i,Or:s}))}Fr(t,e,i){if(e.isEmpty())return Y.resolve();let s=new le(PC);e.forEach(h=>s=s.add(h));const a=IDBKeyRange.bound(bh(s.first()),bh(s.last())),l=s.getIterator();let c=l.getNext();return ho(t).ee({index:eg,range:a},(h,d,m)=>{const y=pt.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&PC(c,y)<0;)i(c,null),c=l.getNext();c&&c.isEqual(y)&&(i(c,d),c=l.hasNext()?l.getNext():null),c?m.j(bh(c)):m.done()}).next(()=>{for(;c;)i(c,null),c=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(t,e,i,s,a){const l=e.path,c=[l.popLast().toArray(),l.lastSegment(),Gg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ho(t).J(IDBKeyRange.bound(c,h,!0)).next(d=>{a==null||a.incrementDocumentReadCount(d.length);let m=ai();for(const y of d){const v=this.Cr(pt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Ff(e,v)||s.has(v.key))&&(m=m.insert(v.key,v))}return m})}getAllFromCollectionGroup(t,e,i,s){let a=ai();const l=MC(e,i),c=MC(e,ci.max());return ho(t).ee({index:mk,range:IDBKeyRange.bound(l,c,!0)},(h,d,m)=>{const y=this.Cr(pt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);a=a.insert(y.key,y),a.size===s&&m.done()}).next(()=>a)}newChangeBuffer(t){return new kK(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return DC(t).get(Zb).next(e=>(St(!!e,20021),e))}Dr(t,e){return DC(t).put(Zb,e)}Cr(t,e){if(e){const i=vK(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(xt.min())))return i}return Me.newInvalidDocument(t)}}function R2(n){return new OK(n)}class kK extends I2{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new hr(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(t){const e=[];let i=0,s=new le((a,l)=>Nt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const c=this.Br.get(a);if(e.push(this.Nr.removeEntry(t,a,c.readTime)),l.isValidDocument()){const h=dC(this.Nr.serializer,l);s=s.add(a.path.popLast());const d=$g(h);i+=d-c.size,e.push(this.Nr.addEntry(t,a,h))}else if(i-=c.size,this.trackRemovals){const h=dC(this.Nr.serializer,l.convertToNoDocument(xt.min()));e.push(this.Nr.addEntry(t,a,h))}}),s.forEach(a=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,a))}),e.push(this.Nr.updateMetadata(t,i)),Y.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next(i=>(this.Br.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next(({documents:i,Or:s})=>(s.forEach((a,l)=>{this.Br.set(a,{size:l,readTime:i.get(a).readTime})}),i))}}function DC(n){return sn(n,vf)}function ho(n){return sn(n,Lg)}function bh(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function MC(n,t){const e=t.documentKey.path.toArray();return[n,Gg(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function PC(n,t){const e=n.path.toArray(),i=t.path.toArray();let s=0;for(let a=0;a<e.length-2&&a<i.length-2;++a)if(s=Nt(e[a],i[a]),s)return s;return s=Nt(e.length,i.length),s||(s=Nt(e[e.length-2],i[i.length-2]),s||Nt(e[e.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&Zh(i.mutation,s,$n.empty(),oe.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Ut()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Ut()){const s=fs();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(a=>{let l=Dh();return a.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=fs();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Ut()))}populateOverlays(t,e,i){const s=[];return i.forEach(a=>{e.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(t,s).next(a=>{a.forEach((l,c)=>{e.set(l,c)})})}computeViews(t,e,i,s){let a=ai();const l=Qh(),c=function(){return Qh()}();return e.forEach((h,d)=>{const m=i.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof fr)?a=a.insert(d.key,d):m!==void 0?(l.set(d.key,m.mutation.getFieldMask()),Zh(m.mutation,d,m.mutation.getFieldMask(),oe.now())):l.set(d.key,$n.empty())}),this.recalculateAndSaveOverlays(t,a).next(h=>(h.forEach((d,m)=>l.set(d,m)),e.forEach((d,m)=>c.set(d,new NK(m,l.get(d)??null))),c))}recalculateAndSaveOverlays(t,e){const i=Qh();let s=new ye((l,c)=>l-c),a=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const c of l)c.keys().forEach(h=>{const d=e.get(h);if(d===null)return;let m=i.get(h)||$n.empty();m=c.applyToLocalView(d,m),i.set(h,m);const y=(s.get(c.batchId)||Ut()).add(h);s=s.insert(c.batchId,y)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,m=h.value,y=Kk();m.forEach(v=>{if(!a.has(v)){const T=Zk(e.get(v),i.get(v));T!==null&&y.set(v,T),a=a.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(t,d,y))}return Y.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(l){return pt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):jG(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-a.size):Y.resolve(fs());let c=wc,h=a;return l.next(d=>Y.forEach(d,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),a.get(m)?Y.resolve():this.remoteDocumentCache.getEntry(t,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(t,d,a)).next(()=>this.computeViews(t,h,d,Ut())).next(m=>({batchId:c,changes:Gk(m)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pt(e)).next(i=>{let s=Dh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const a=e.collectionGroup;let l=Dh();return this.indexManager.getCollectionParents(t,a).next(c=>Y.forEach(c,h=>{const d=function(y,v){return new bp(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(e,h.child(a));return this.getDocumentsMatchingCollectionQuery(t,d,i,s).next(m=>{m.forEach((y,v)=>{l=l.insert(y,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,e,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,a,s))).next(l=>{a.forEach((h,d)=>{const m=d.getKey();l.get(m)===null&&(l=l.insert(m,Me.newInvalidDocument(m)))});let c=Dh();return l.forEach((h,d)=>{const m=a.get(h);m!==void 0&&Zh(m.mutation,d,$n.empty(),oe.now()),Ff(e,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Y.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:Vn(s.createTime)}}(e)),Y.resolve()}getNamedQuery(t,e){return Y.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(s){return{name:s.name,query:y2(s.bundledQuery),readTime:Vn(s.readTime)}}(e)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{constructor(){this.overlays=new ye(pt.comparator),this.qr=new Map}getOverlay(t,e){return Y.resolve(this.overlays.get(e))}getOverlays(t,e){const i=fs();return Y.forEach(e,s=>this.getOverlay(t,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,a)=>{this.St(t,e,a)}),Y.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(i)),Y.resolve()}getOverlaysForCollection(t,e,i){const s=fs(),a=e.length+1,l=new pt(e.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===a&&h.largestBatchId>i&&s.set(h.getKey(),h)}return Y.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let a=new ye((d,m)=>d-m);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let m=a.get(d.largestBatchId);m===null&&(m=fs(),a=a.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=fs(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return Y.resolve(c)}St(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new JT(e,i));let a=this.qr.get(e);a===void 0&&(a=Ut(),this.qr.set(e,a)),this.qr.set(e,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.Qr=new le(hn.$r),this.Ur=new le(hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new hn(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Gr(new hn(t,e))}zr(t,e){t.forEach(i=>this.removeReference(i,e))}jr(t){const e=new pt(new ne([])),i=new hn(e,t),s=new hn(e,t+1),a=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),a.push(l.key)}),a}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new pt(new ne([])),i=new hn(e,t),s=new hn(e,t+1);let a=Ut();return this.Ur.forEachInRange([i,s],l=>{a=a.add(l.key)}),a}containsKey(t){const e=new hn(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class hn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return pt.comparator(t.key,e.key)||Nt(t.Yr,e.Yr)}static Kr(t,e){return Nt(t.Yr,e.Yr)||pt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new le(hn.$r)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new QT(a,e,i,s);this.mutationQueue.push(l);for(const c of s)this.Zr=this.Zr.add(new hn(c.key,a)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Y.resolve(l)}lookupMutationBatch(t,e){return Y.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.ei(i),a=s<0?0:s;return Y.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Do:this.tr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new hn(e,0),s=new hn(e,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],l=>{const c=this.Xr(l.Yr);a.push(c)}),Y.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new le(Nt);return e.forEach(s=>{const a=new hn(s,0),l=new hn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],c=>{i=i.add(c.Yr)})}),Y.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let a=i;pt.isDocumentKey(a)||(a=a.child(""));const l=new hn(new pt(a),0);let c=new le(Nt);return this.Zr.forEachWhile(h=>{const d=h.key.path;return!!i.isPrefixOf(d)&&(d.length===s&&(c=c.add(h.Yr)),!0)},l),Y.resolve(this.ti(c))}ti(t){const e=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){St(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Y.forEach(e.mutations,s=>{const a=new hn(s.key,e.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,e){const i=new hn(e,0),s=this.Zr.firstAfterOrEqual(i);return Y.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(t){this.ri=t,this.docs=function(){return new ye(pt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),a=s?s.size:0,l=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Y.resolve(i?i.document.mutableCopy():Me.newInvalidDocument(e))}getEntries(t,e){let i=ai();return e.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Me.newInvalidDocument(s))}),Y.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let a=ai();const l=e.path,c=new pt(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:m}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||BT(lk(m),i)<=0||(s.has(m.key)||Ff(e,m))&&(a=a.insert(m.key,m.mutableCopy()))}return Y.resolve(a)}getAllFromCollectionGroup(t,e,i,s){_t(9500)}ii(t,e){return Y.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new FK(this)}getSize(t){return Y.resolve(this.size)}}class FK extends I2{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),Y.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(t){this.persistence=t,this.si=new hr(e=>zo(e),jf),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.oi=0,this._i=new sE,this.targetCount=0,this.ai=Go.ur()}forEachTarget(t,e){return this.si.forEach((i,s)=>e(s)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),Y.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Go(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Y.resolve()}updateTargetData(t,e){return this.Pr(e),Y.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,e,i){let s=0;const a=[];return this.si.forEach((l,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),Y.waitFor(a).next(()=>s)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return Y.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),Y.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const s=this.persistence.referenceDelegate,a=[];return s&&e.forEach(l=>{a.push(s.markPotentiallyOrphaned(t,l))}),Y.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Y.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return Y.resolve(i)}containsKey(t,e){return Y.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t,e){this.ui={},this.overlays={},this.ci=new Kn(0),this.li=!1,this.li=!0,this.hi=new BK,this.referenceDelegate=t(this),this.Pi=new zK(this),this.indexManager=new IK,this.remoteDocumentCache=function(s){return new jK(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new g2(e),this.Ii=new VK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new LK,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new UK(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){ht("MemoryPersistence","Starting transaction:",t);const s=new HK(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(t,e){return Y.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,e)))}}class HK extends uk{constructor(t){super(),this.currentSequenceNumber=t}}class Rp{constructor(t){this.persistence=t,this.Ri=new sE,this.Vi=null}static mi(t){return new Rp(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),Y.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Y.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>i.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,i=>{const s=pt.fromPath(i);return this.gi(t,s).next(a=>{a||e.removeEntry(s,xt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return Y.or([()=>Y.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Wg{constructor(t,e){this.persistence=t,this.pi=new hr(i=>Dn(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=x2(this,e)}static mi(t,e){return new Wg(t,e)}Ei(){}di(t){return Y.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}pr(t,e){return Y.forEach(this.pi,(i,s)=>this.br(t,i,s).next(a=>a?Y.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(t,l=>this.br(t,l,e).next(c=>{c||(i++,a.removeEntry(l,xt.min()))})).next(()=>a.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Y.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Y.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ig(t.data.value)),e}br(t,e,i){return Y.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return Y.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(t){this.serializer=t}k(t,e,i,s){const a=new dp("createOrUpgrade",e);i<1&&s>=1&&(function(h){h.createObjectStore(Uf)}(t),function(h){h.createObjectStore(_f,{keyPath:iG}),h.createObjectStore(Li,{keyPath:HR,autoIncrement:!0}).createIndex(xo,qR,{unique:!0}),h.createObjectStore(Ac)}(t),OC(t),function(h){h.createObjectStore(yo)}(t));let l=Y.resolve();return i<3&&s>=3&&(i!==0&&(function(h){h.deleteObjectStore(Ic),h.deleteObjectStore(xc),h.deleteObjectStore(Mo)}(t),OC(t)),l=l.next(()=>function(h){const d=h.store(Mo),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return d.put(Bg,m)}(a))),i<4&&s>=4&&(i!==0&&(l=l.next(()=>function(h,d){return d.store(Li).J().next(y=>{h.deleteObjectStore(Li),h.createObjectStore(Li,{keyPath:HR,autoIncrement:!0}).createIndex(xo,qR,{unique:!0});const v=d.store(Li),T=y.map(w=>v.put(w));return Y.waitFor(T)})}(t,a))),l=l.next(()=>{(function(h){h.createObjectStore(Rc,{keyPath:fG})})(t)})),i<5&&s>=5&&(l=l.next(()=>this.yi(a))),i<6&&s>=6&&(l=l.next(()=>(function(h){h.createObjectStore(vf)}(t),this.wi(a)))),i<7&&s>=7&&(l=l.next(()=>this.Si(a))),i<8&&s>=8&&(l=l.next(()=>this.bi(t,a))),i<9&&s>=9&&(l=l.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&s>=10&&(l=l.next(()=>this.Di(a))),i<11&&s>=11&&(l=l.next(()=>{(function(h){h.createObjectStore(gp,{keyPath:dG})})(t),function(h){h.createObjectStore(pp,{keyPath:mG})}(t)})),i<12&&s>=12&&(l=l.next(()=>{(function(h){const d=h.createObjectStore(yp,{keyPath:TG});d.createIndex(t0,EG,{unique:!1}),d.createIndex(_k,SG,{unique:!1})})(t)})),i<13&&s>=13&&(l=l.next(()=>function(h){const d=h.createObjectStore(Lg,{keyPath:rG});d.createIndex(eg,aG),d.createIndex(mk,oG)}(t)).next(()=>this.Ci(t,a)).next(()=>t.deleteObjectStore(yo))),i<14&&s>=14&&(l=l.next(()=>this.Fi(t,a))),i<15&&s>=15&&(l=l.next(()=>function(h){h.createObjectStore(FT,{keyPath:gG,autoIncrement:!0}).createIndex(Jb,pG,{unique:!1}),h.createObjectStore($h,{keyPath:yG}).createIndex(pk,_G,{unique:!1}),h.createObjectStore(Wh,{keyPath:vG}).createIndex(yk,bG,{unique:!1})}(t))),i<16&&s>=16&&(l=l.next(()=>{e.objectStore($h).clear()}).next(()=>{e.objectStore(Wh).clear()})),i<17&&s>=17&&(l=l.next(()=>{(function(h){h.createObjectStore(zT,{keyPath:wG})})(t)})),i<18&&s>=18&&UP()&&(l=l.next(()=>{e.objectStore($h).clear()}).next(()=>{e.objectStore(Wh).clear()})),l}wi(t){let e=0;return t.store(yo).ee((i,s)=>{e+=$g(s)}).next(()=>{const i={byteSize:e};return t.store(vf).put(Zb,i)})}yi(t){const e=t.store(_f),i=t.store(Li);return e.J().next(s=>Y.forEach(s,a=>{const l=IDBKeyRange.bound([a.userId,Do],[a.userId,a.lastAcknowledgedBatchId]);return i.J(xo,l).next(c=>Y.forEach(c,h=>{St(h.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const d=vo(this.serializer,h);return T2(t,a.userId,d).next(()=>{})}))}))}Si(t){const e=t.store(Ic),i=t.store(yo);return t.store(Mo).get(Bg).next(s=>{const a=[];return i.ee((l,c)=>{const h=new ne(l),d=function(y){return[0,Dn(y)]}(h);a.push(e.get(d).next(m=>m?Y.resolve():(y=>e.put({targetId:0,path:Dn(y),sequenceNumber:s.highestListenSequenceNumber}))(h)))}).next(()=>Y.waitFor(a))})}bi(t,e){t.createObjectStore(bf,{keyPath:hG});const i=e.store(bf),s=new iE,a=l=>{if(s.add(l)){const c=l.lastSegment(),h=l.popLast();return i.put({collectionId:c,parent:Dn(h)})}};return e.store(yo).ee({X:!0},(l,c)=>{const h=new ne(l);return a(h.popLast())}).next(()=>e.store(Ac).ee({X:!0},([l,c,h],d)=>{const m=hs(c);return a(m.popLast())}))}Di(t){const e=t.store(xc);return e.ee((i,s)=>{const a=Ph(s),l=p2(this.serializer,a);return e.put(l)})}Ci(t,e){const i=e.store(yo),s=[];return i.ee((a,l)=>{const c=e.store(Lg),h=function(y){return y.document?new pt(ne.fromString(y.document.name).popFirst(5)):y.noDocument?pt.fromSegments(y.noDocument.path):y.unknownDocument?pt.fromSegments(y.unknownDocument.path):_t(36783)}(l).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(c.put(d))}).next(()=>Y.waitFor(s))}Fi(t,e){const i=e.store(Li),s=R2(this.serializer),a=new rE(Rp.mi,this.serializer.yt);return i.J().next(l=>{const c=new Map;return l.forEach(h=>{let d=c.get(h.userId)??Ut();vo(this.serializer,h).keys().forEach(m=>d=d.add(m)),c.set(h.userId,d)}),Y.forEach(c,(h,d)=>{const m=new An(d),y=xp.wt(this.serializer,m),v=a.getIndexManager(m),T=Ip.wt(m,this.serializer,v,a.referenceDelegate);return new C2(s,T,y,v).recalculateAndSaveOverlaysForDocumentKeys(new e0(e,Kn.ce),h).next()})})}}function OC(n){n.createObjectStore(Ic,{keyPath:cG}).createIndex(jT,uG,{unique:!0}),n.createObjectStore(xc,{keyPath:"targetId"}).createIndex(gk,lG,{unique:!0}),n.createObjectStore(Mo)}const Gr="IndexedDbPersistence",Jv=18e5,tb=5e3,eb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GK="main";class aE{constructor(t,e,i,s,a,l,c,h,d,m,y=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Mi=a,this.window=l,this.document=c,this.xi=d,this.Oi=m,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!aE.v())throw new gt(lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PK(this,s),this.$i=e+GK,this.serializer=new g2(h),this.Ui=new ca(this.$i,this.Ni,new qK(this.serializer)),this.hi=new TK,this.Pi=new CK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=R2(this.serializer),this.Ii=new bK,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&Ve(Gr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt(lt.FAILED_PRECONDITION,eb);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Pi.getHighestSequenceNumber(t))}).then(t=>{this.ci=new Kn(t,this.xi)}).then(()=>{this.li=!0}).catch(t=>(this.Ui&&this.Ui.close(),Promise.reject(t)))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Vm(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(t).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(t)).next(e=>this.isPrimary&&!e?this.Zi(t).next(()=>!1):!!e&&this.Xi(t).next(()=>!0))).catch(t=>{if(Sa(t))return ht(Gr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return ht(Gr,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable(()=>this.Qi(t)),this.isPrimary=t})}Hi(t){return Th(t).get($l).next(e=>Y.resolve(this.es(e)))}ts(t){return Vm(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Jv)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const i=sn(e,Rc);return i.J().next(s=>{const a=this.ss(s,Jv),l=s.filter(c=>a.indexOf(c)===-1);return Y.forEach(l,c=>i.delete(c.clientId)).next(()=>l)})}).catch(()=>[]);if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?Y.resolve(!0):Th(t).get($l).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,tb)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new gt(lt.FAILED_PRECONDITION,eb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vm(t).J().next(i=>this.ss(i,tb).find(s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(a||l&&c)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&ht(Gr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Uf,Rc],t=>{const e=new e0(t,Kn.ce);return this.Zi(e).next(()=>this.ts(e))}),this.Ui.close(),this.Ps()}ss(t,e){return t.filter(i=>this.rs(i.updateTimeMs,e)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",t=>Vm(t).J().next(e=>this.ss(e,Jv).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return Ip.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new RK(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return xp.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,i){ht(Gr,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",a=function(h){return h===18?IG:h===17?Ek:h===16?xG:h===15?HT:h===14?Tk:h===13?bk:h===12?AG:h===11?vk:void _t(60245)}(this.Ni);let l;return this.Ui.runTransaction(t,s,a,c=>(l=new e0(c,this.ci?this.ci.next():Kn.ce),e==="readwrite-primary"?this.Hi(l).next(h=>!!h||this.Yi(l)).next(h=>{if(!h)throw Ve(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new gt(lt.FAILED_PRECONDITION,ck);return i(l)}).next(h=>this.Xi(l).next(()=>h)):this.Is(l).next(()=>i(l)))).then(c=>(l.raiseOnCommittedEvent(),c))}Is(t){return Th(t).get($l).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,tb)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new gt(lt.FAILED_PRECONDITION,eb)})}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Th(t).put($l,e)}static v(){return ca.v()}Zi(t){const e=Th(t);return e.get($l).next(i=>this.es(i)?(ht(Gr,"Releasing primary lease."),e.delete($l)):Y.resolve())}rs(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(Ve(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;BP()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const i=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return ht(Gr,`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ve(Gr,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Ve("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Th(n){return sn(n,Uf)}function Vm(n){return sn(n,Rc)}function D2(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=s}static As(t,e){let i=Ut(),s=Ut();for(const a of e.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new oE(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return BP()?8:hk(nn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const a={result:null};return this.ys(t,e).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ws(t,e,s,i).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new KK;return this.Ss(t,e,l).next(c=>{if(a.result=c,this.Vs)return this.bs(t,e,l,c.size)})}).next(()=>a.result)}bs(t,e,i,s){return i.documentReadCount<this.fs?(Jl()<=Ht.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",tc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Jl()<=Ht.DEBUG&&ht("QueryEngine","Query:",tc(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Jl()<=Ht.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",tc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,li(e))):Y.resolve())}ys(t,e){if(iC(e))return Y.resolve(null);let i=li(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=o0(e,null,"F"),i=li(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(a=>{const l=Ut(...a);return this.ps.getDocuments(t,l).next(c=>this.indexManager.getMinOffset(t,i).next(h=>{const d=this.Ds(e,c);return this.Cs(e,d,l,h.readTime)?this.ys(t,o0(e,null,"F")):this.vs(t,d,e,h)}))})))}ws(t,e,i,s){return iC(e)||s.isEqual(xt.min())?Y.resolve(null):this.ps.getDocuments(t,i).next(a=>{const l=this.Ds(e,a);return this.Cs(e,l,i,s)?Y.resolve(null):(Jl()<=Ht.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tc(e)),this.vs(t,l,e,ok(s,wc)).next(c=>c))})}Ds(t,e){let i=new le(Hk(t));return e.forEach((s,a)=>{Ff(t,a)&&(i=i.add(a))}),i}Cs(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(t,e,i){return Jl()<=Ht.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",tc(e)),this.ps.getDocumentsMatchingQuery(t,e,ci.min(),i)}vs(t,e,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(a=>(e.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="LocalStore",$K=3e8;class WK{constructor(t,e,i,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new ye(Nt),this.xs=new hr(a=>zo(a),jf),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new C2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function P2(n,t,e,i){return new WK(n,t,e,i)}async function O2(n,t){const e=Tt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(a=>{const l=[],c=[];let h=Ut();for(const d of s){l.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}for(const d of a){c.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}return e.localDocuments.getDocuments(i,h).next(d=>({Ls:d,removedBatchIds:l,addedBatchIds:c}))})})}function YK(n,t){const e=Tt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),a=e.Ns.newChangeBuffer({trackRemovals:!0});return function(c,h,d,m){const y=d.batch,v=y.keys();let T=Y.resolve();return v.forEach(w=>{T=T.next(()=>m.getEntry(h,w)).next(A=>{const x=d.docVersions.get(w);St(x!==null,48541),A.version.compareTo(x)<0&&(y.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),m.addEntry(A)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(h,y))}(e,i,t,a).next(()=>a.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let h=Ut();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function k2(n){const t=Tt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function XK(n,t){const e=Tt(n),i=t.snapshotVersion;let s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;const c=[];t.targetChanges.forEach((m,y)=>{const v=s.get(y);if(!v)return;c.push(e.Pi.removeMatchingKeys(a,m.removedDocuments,y).next(()=>e.Pi.addMatchingKeys(a,m.addedDocuments,y)));let T=v.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(y)!==null?T=T.withResumeToken(Be.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),s=s.insert(y,T),function(A,x,k){return A.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=$K?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(v,T,m)&&c.push(e.Pi.updateTargetData(a,T))});let h=ai(),d=Ut();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(a,m))}),c.push(QK(a,l,t.documentUpdates).next(m=>{h=m.ks,d=m.qs})),!i.isEqual(xt.min())){const m=e.Pi.getLastRemoteSnapshotVersion(a).next(y=>e.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i));c.push(m)}return Y.waitFor(c).next(()=>l.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,h,d)).next(()=>h)}).then(a=>(e.Ms=s,a))}function QK(n,t,e){let i=Ut(),s=Ut();return e.forEach(a=>i=i.add(a)),t.getEntries(n,i).next(a=>{let l=ai();return e.forEach((c,h)=>{const d=a.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(xt.min())?(t.removeEntry(c,h.readTime),l=l.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(h),l=l.insert(c,h)):ht(lE,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{ks:l,qs:s}})}function ZK(n,t){const e=Tt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Do),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Yg(n,t){const e=Tt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.Pi.getTargetData(i,t).next(a=>a?(s=a,Y.resolve(s)):e.Pi.allocateTargetId(i).next(l=>(s=new ir(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i})}async function Vc(n,t,e){const i=Tt(n),s=i.Ms.get(t),a=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",a,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Sa(l))throw l;ht(lE,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function g0(n,t,e){const i=Tt(n);let s=xt.min(),a=Ut();return i.persistence.runTransaction("Execute query","readwrite",l=>function(h,d,m){const y=Tt(h),v=y.xs.get(m);return v!==void 0?Y.resolve(y.Ms.get(v)):y.Pi.getTargetData(d,m)}(i,l,li(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,c.targetId).next(h=>{a=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,t,e?s:xt.min(),e?a:Ut())).next(c=>(L2(i,zk(t),c),{documents:c,Qs:a})))}function N2(n,t){const e=Tt(n),i=Tt(e.Pi),s=e.Ms.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",a=>i.At(a,t).next(l=>l?l.target:null))}function V2(n,t){const e=Tt(n),i=e.Os.get(t)||xt.min();return e.persistence.runTransaction("Get new document changes","readonly",s=>e.Ns.getAllFromCollectionGroup(s,t,ok(i,wc),Number.MAX_SAFE_INTEGER)).then(s=>(L2(e,t,s),s))}function L2(n,t,e){let i=n.Os.get(t)||xt.min();e.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Os.set(t,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="firestore_clients";function kC(n,t){return`${B2}_${n}_${t}`}const U2="firestore_mutations";function NC(n,t,e){let i=`${U2}_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const j2="firestore_targets";function nb(n,t){return`${j2}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="SharedClientState";class Xg{constructor(t,e,i,s){this.user=t,this.batchId=e,this.state=i,this.error=s}static Ws(t,e,i){const s=JSON.parse(i);let a,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(a=new gt(s.error.code,s.error.message))),l?new Xg(t,e,s.state,a):(Ve(us,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Jh{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ws(t,e){const i=JSON.parse(e);let s,a=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new gt(i.error.code,i.error.message))),a?new Jh(t,i.state,s):(Ve(us,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Qg{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const i=JSON.parse(e);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,a=YT();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=fk(i.activeTargetIds[l]),a=a.add(i.activeTargetIds[l]);return s?new Qg(t,a):(Ve(us,`Failed to parse client data for instance '${t}': ${e}`),null)}}class cE{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new cE(e.clientId,e.onlineState):(Ve(us,`Failed to parse online state: ${t}`),null)}}class p0{constructor(){this.activeTargetIds=YT()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ib{constructor(t,e,i,s,a){this.window=t,this.Mi=e,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ye(Nt),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=kC(this.persistenceKey,this.Js),this.no=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new p0),this.ro=new RegExp(`^${B2}_${l}_([^_]*)$`),this.io=new RegExp(`^${U2}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${j2}_${l}_(\\d+)$`),this.oo=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this._o=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const i of t){if(i===this.Js)continue;const s=this.getItem(kC(this.persistenceKey,i));if(s){const a=Qg.Ws(i,s);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const i=this.uo(e);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach((i,s)=>{s.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,i){this.ho(t,e,i),this.Po(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const s=this.storage.getItem(nb(this.persistenceKey,t));if(s){const a=Jh.Ws(t,s);a&&(i=a.state)}}return e&&this.To.zs(t),this.ao(),i}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(nb(this.persistenceKey,t))}updateQueryState(t,e,i){this.Io(t,e,i)}handleUserChange(t,e,i){e.forEach(s=>{this.Po(s)}),this.currentUser=t,i.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return ht(us,"READ",t,e),e}setItem(t,e){ht(us,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){ht(us,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(ht(us,"EVENT",e.key,e.newValue),e.key===this.eo)return void Ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const i=this.Ro(e.key);return this.Vo(i,null)}{const i=this.mo(e.key,e.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(this.so.test(e.key)){if(e.newValue!==null){const i=this.yo(e.key,e.newValue);if(i)return this.wo(i)}}else if(e.key===this.oo){if(e.newValue!==null){const i=this.uo(e.newValue);if(i)return this.co(i)}}else if(e.key===this.no){const i=function(a){let l=Kn.ce;if(a!=null)try{const c=JSON.parse(a);St(typeof c=="number",30636,{So:a}),l=c}catch(c){Ve(us,"Failed to read sequence number from WebStorage",c)}return l}(e.newValue);i!==Kn.ce&&this.sequenceNumberHandler(i)}else if(e.key===this._o){const i=this.bo(e.newValue);await Promise.all(i.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(e)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,i){const s=new Xg(this.currentUser,t,e,i),a=NC(this.persistenceKey,this.currentUser,t);this.setItem(a,s.Gs())}Po(t){const e=NC(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,i){const s=nb(this.persistenceKey,t),a=new Jh(t,e,i);this.setItem(s,a.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const i=this.Ro(t);return Qg.Ws(i,e)}fo(t,e){const i=this.io.exec(t),s=Number(i[1]),a=i[2]!==void 0?i[2]:null;return Xg.Ws(new An(a),s,e)}yo(t,e){const i=this.so.exec(t),s=Number(i[1]);return Jh.Ws(s,e)}uo(t){return cE.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);ht(us,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const i=e?this.Zs.insert(t,e):this.Zs.remove(t),s=this.lo(this.Zs),a=this.lo(i),l=[],c=[];return a.forEach(h=>{s.has(h)||l.push(h)}),s.forEach(h=>{a.has(h)||c.push(h)}),this.syncEngine.Fo(l,c).then(()=>{this.Zs=i})}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=YT();return t.forEach((i,s)=>{e=e.unionWith(s.activeTargetIds)}),e}}class F2{constructor(){this.Mo=new p0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new p0,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="ConnectivityMonitor";class LC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ht(VC,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ht(VC,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm=null;function y0(){return Lm===null?Lm=function(){return 268435456+Math.round(2147483648*Math.random())}():Lm++,"0x"+Lm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="RestConnection",t$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e${get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Ug?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,e,i,s,a){const l=y0(),c=this.zo(t,e.toUriEncodedString());ht(sb,`Sending RPC '${t}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,a);const{host:d}=new URL(c),m=$c(d);return this.Jo(t,c,h,i,m).then(y=>(ht(sb,`Received RPC '${t}' ${l}: `,y),y),y=>{throw gf(sb,`RPC '${t}' ${l} failed with error: `,y,"url: ",c,"request:",i),y})}Ho(t,e,i,s,a,l){return this.Go(t,e,i,s,a)}jo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}zo(t,e){const i=t$[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class i$ extends e${constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,s,a){const l=y0();return new Promise((c,h)=>{const d=new ZO;d.setWithCredentials(!0),d.listenOnce(JO.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Zm.NO_ERROR:const y=d.getResponseJson();ht(wn,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(y)),c(y);break;case Zm.TIMEOUT:ht(wn,`RPC '${t}' ${l} timed out`),h(new gt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case Zm.HTTP_ERROR:const v=d.getStatus();if(ht(wn,`RPC '${t}' ${l} failed with status:`,v,"response text:",d.getResponseText()),v>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const w=T==null?void 0:T.error;if(w&&w.status&&w.message){const A=function(k){const L=k.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(L)>=0?L:lt.UNKNOWN}(w.status);h(new gt(A,w.message))}else h(new gt(lt.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new gt(lt.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ht(wn,`RPC '${t}' ${l} completed.`)}});const m=JSON.stringify(s);ht(wn,`RPC '${t}' ${l} sending request:`,s),d.send(e,"POST",m,i,15)})}T_(t,e,i){const s=y0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=nk(),c=ek(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;const m=a.join("");ht(wn,`Creating RPC '${t}' stream ${s}: ${m}`,h);const y=l.createWebChannel(m,h);this.I_(y);let v=!1,T=!1;const w=new n$({Yo:x=>{T?ht(wn,`Not sending because RPC '${t}' stream ${s} is closed:`,x):(v||(ht(wn,`Opening RPC '${t}' stream ${s} transport.`),y.open(),v=!0),ht(wn,`RPC '${t}' stream ${s} sending:`,x),y.send(x))},Zo:()=>y.close()}),A=(x,k,L)=>{x.listen(k,U=>{try{L(U)}catch(K){setTimeout(()=>{throw K},0)}})};return A(y,Ch.EventType.OPEN,()=>{T||(ht(wn,`RPC '${t}' stream ${s} transport opened.`),w.o_())}),A(y,Ch.EventType.CLOSE,()=>{T||(T=!0,ht(wn,`RPC '${t}' stream ${s} transport closed`),w.a_(),this.E_(y))}),A(y,Ch.EventType.ERROR,x=>{T||(T=!0,gf(wn,`RPC '${t}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),w.a_(new gt(lt.UNAVAILABLE,"The operation could not be completed")))}),A(y,Ch.EventType.MESSAGE,x=>{var k;if(!T){const L=x.data[0];St(!!L,16349);const U=L,K=(U==null?void 0:U.error)||((k=U[0])==null?void 0:k.error);if(K){ht(wn,`RPC '${t}' stream ${s} received error:`,K);const z=K.status;let nt=function(C){const P=Ge[C];if(P!==void 0)return e2(P)}(z),O=K.message;nt===void 0&&(nt=lt.INTERNAL,O="Unknown error status: "+z+" with message "+K.message),T=!0,w.a_(new gt(nt,O)),y.close()}else ht(wn,`RPC '${t}' stream ${s} received:`,L),w.u_(L)}}),A(c,tk.STAT_EVENT,x=>{x.stat===Yb.PROXY?ht(wn,`RPC '${t}' stream ${s} detected buffering proxy`):x.stat===Yb.NOPROXY&&ht(wn,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){return typeof window<"u"?window:null}function lg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(n){return new cK(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,e,i=1e3,s=1.5,a=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&ht("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="PersistentStream";class q2{constructor(t,e,i,s,a,l,c,h){this.Mi=t,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new H2(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===lt.RESOURCE_EXHAUSTED?(Ve(e.toString()),Ve("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===e&&this.G_(i,s)},i=>{t(()=>{const s=new gt(lt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ht(BC,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(ht(BC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s$ extends q2{constructor(t,e,i,s,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,l),this.serializer=a}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=fK(this.serializer,t),i=function(a){if(!("targetChange"in a))return xt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?xt.min():l.readTime?Vn(l.readTime):xt.min()}(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=u0(this.serializer),e.addTarget=function(a,l){let c;const h=l.target;if(c=Fg(h)?{documents:c2(a,h)}:{query:u2(a,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=s2(a,l.resumeToken);const d=l0(a,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(xt.min())>0){c.readTime=Nc(a,l.snapshotVersion.toTimestamp());const d=l0(a,l.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,t);const i=mK(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=u0(this.serializer),e.removeTarget=t,this.q_(e)}}class r$ extends q2{constructor(t,e,i,s,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return St(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,St(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){St(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=dK(t.writeResults,t.commitTime),i=Vn(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=u0(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>qg(this.serializer,i))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${}class o$ extends a${constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new gt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Go(t,c0(e,i),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new gt(lt.UNKNOWN,a.toString())})}Ho(t,e,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Ho(t,c0(e,i),s,l,c,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new gt(lt.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class l${constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ve(e),this.aa=!1):ht("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class c${constructor(t,e,i,s,a){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Xo(this)&&(ht(Ko,"Restarting streams for network reachability change."),await async function(h){const d=Tt(h);d.Ea.add(4),await qf(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Dp(d)}(this))})}),this.Ra=new l$(i,s)}}async function Dp(n){if(Xo(n))for(const t of n.da)await t(!0)}async function qf(n){for(const t of n.da)await t(!1)}function Mp(n,t){const e=Tt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),fE(e)?hE(e):Jc(e).O_()&&uE(e,t))}function Lc(n,t){const e=Tt(n),i=Jc(e);e.Ia.delete(t),i.O_()&&G2(e,t),e.Ia.size===0&&(i.O_()?i.L_():Xo(e)&&e.Ra.set("Unknown"))}function uE(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Jc(n).Y_(t)}function G2(n,t){n.Va.Ue(t),Jc(n).Z_(t)}function hE(n){n.Va=new rK({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Jc(n).start(),n.Ra.ua()}function fE(n){return Xo(n)&&!Jc(n).x_()&&n.Ia.size>0}function Xo(n){return Tt(n).Ea.size===0}function K2(n){n.Va=void 0}async function u$(n){n.Ra.set("Online")}async function h$(n){n.Ia.forEach((t,e)=>{uE(n,t)})}async function f$(n,t){K2(n),fE(n)?(n.Ra.ha(t),hE(n)):n.Ra.set("Unknown")}async function d$(n,t,e){if(n.Ra.set("Online"),t instanceof i2&&t.state===2&&t.cause)try{await async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))}(n,t)}catch(i){ht(Ko,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Zg(n,i)}else if(t instanceof ag?n.Va.Ze(t):t instanceof n2?n.Va.st(t):n.Va.tt(t),!e.isEqual(xt.min()))try{const i=await k2(n.localStore);e.compareTo(i)>=0&&await function(a,l){const c=a.Va.Tt(l);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const m=a.Ia.get(d);m&&a.Ia.set(d,m.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,d)=>{const m=a.Ia.get(h);if(!m)return;a.Ia.set(h,m.withResumeToken(Be.EMPTY_BYTE_STRING,m.snapshotVersion)),G2(a,h);const y=new ir(m.target,h,d,m.sequenceNumber);uE(a,y)}),a.remoteSyncer.applyRemoteEvent(c)}(n,e)}catch(i){ht(Ko,"Failed to raise snapshot:",i),await Zg(n,i)}}async function Zg(n,t,e){if(!Sa(t))throw t;n.Ea.add(1),await qf(n),n.Ra.set("Offline"),e||(e=()=>k2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ht(Ko,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Dp(n)})}function $2(n,t){return t().catch(e=>Zg(n,e,t))}async function Zc(n){const t=Tt(n),e=ya(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Do;for(;m$(t);)try{const s=await ZK(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,g$(t,s)}catch(s){await Zg(t,s)}W2(t)&&Y2(t)}function m$(n){return Xo(n)&&n.Ta.length<10}function g$(n,t){n.Ta.push(t);const e=ya(n);e.O_()&&e.X_&&e.ea(t.mutations)}function W2(n){return Xo(n)&&!ya(n).x_()&&n.Ta.length>0}function Y2(n){ya(n).start()}async function p$(n){ya(n).ra()}async function y$(n){const t=ya(n);for(const e of n.Ta)t.ea(e.mutations)}async function _$(n,t,e){const i=n.Ta.shift(),s=ZT.from(i,t,e);await $2(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Zc(n)}async function v$(n,t){t&&ya(n).X_&&await async function(i,s){if(function(l){return nK(l)&&l!==lt.ABORTED}(s.code)){const a=i.Ta.shift();ya(i).B_(),await $2(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Zc(i)}}(n,t),W2(n)&&Y2(n)}async function UC(n,t){const e=Tt(n);e.asyncQueue.verifyOperationInProgress(),ht(Ko,"RemoteStore received new credentials");const i=Xo(e);e.Ea.add(3),await qf(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Dp(e)}async function _0(n,t){const e=Tt(n);t?(e.Ea.delete(2),await Dp(e)):t||(e.Ea.add(2),await qf(e),e.Ra.set("Unknown"))}function Jc(n){return n.ma||(n.ma=function(e,i,s){const a=Tt(e);return a.sa(),new s$(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:u$.bind(null,n),t_:h$.bind(null,n),r_:f$.bind(null,n),H_:d$.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),fE(n)?hE(n):n.Ra.set("Unknown")):(await n.ma.stop(),K2(n))})),n.ma}function ya(n){return n.fa||(n.fa=function(e,i,s){const a=Tt(e);return a.sa(),new r$(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:p$.bind(null,n),r_:v$.bind(null,n),ta:y$.bind(null,n),na:_$.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Zc(n)):(await n.fa.stop(),n.Ta.length>0&&(ht(Ko,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t,e,i,s,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,a){const l=Date.now()+i,c=new dE(t,e,l,s,a);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new gt(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mE(n,t){if(Ve("AsyncQueue",`${t}: ${n}`),Sa(n))return new gt(lt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{static emptySet(t){return new _c(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||pt.comparator(e.key,i.key):(e,i)=>pt.comparator(e.key,i.key),this.keyedMap=Dh(),this.sortedSet=new ye(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof _c)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new _c;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.ga=new ye(pt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,i)=>{t.push(i)}),t}}class Bc{constructor(t,e,i,s,a,l,c,h,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,s,a){const l=[];return e.forEach(c=>{l.push({type:0,doc:c})}),new Bc(t,e,_c.emptySet(e),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ep(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class T${constructor(){this.queries=FC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=Tt(e),a=s.queries;s.queries=FC(),a.forEach((l,c)=>{for(const h of c.Sa)h.onError(i)})})(this,new gt(lt.ABORTED,"Firestore shutting down"))}}function FC(){return new hr(n=>Fk(n),Ep)}async function X2(n,t){const e=Tt(n);let i=3;const s=t.query;let a=e.queries.get(s);a?!a.ba()&&t.Da()&&(i=2):(a=new b$,i=t.Da()?0:1);try{switch(i){case 0:a.wa=await e.onListen(s,!0);break;case 1:a.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(l){const c=mE(l,`Initialization of query '${tc(t.query)}' failed`);return void t.onError(c)}e.queries.set(s,a),a.Sa.push(t),t.va(e.onlineState),a.wa&&t.Fa(a.wa)&&gE(e)}async function Q2(n,t){const e=Tt(n),i=t.query;let s=3;const a=e.queries.get(i);if(a){const l=a.Sa.indexOf(t);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=t.Da()?0:1:!a.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function E$(n,t){const e=Tt(n);let i=!1;for(const s of t){const a=s.query,l=e.queries.get(a);if(l){for(const c of l.Sa)c.Fa(s)&&(i=!0);l.wa=s}}i&&gE(e)}function S$(n,t,e){const i=Tt(n),s=i.queries.get(t);if(s)for(const a of s.Sa)a.onError(e);i.queries.delete(t)}function gE(n){n.Ca.forEach(t=>{t.next()})}var v0,zC;(zC=v0||(v0={})).Ma="default",zC.Cache="cache";class Z2{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Bc(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Bc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==v0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t){this.key=t}}class tN{constructor(t){this.key=t}}class w${constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ut(),this.mutatedKeys=Ut(),this.eu=Hk(t),this.tu=new _c(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new jC,s=e?e.tu:this.tu;let a=e?e.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((m,y)=>{const v=s.get(m),T=Ff(this.query,y)?y:null,w=!!v&&this.mutatedKeys.has(v.key),A=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let x=!1;v&&T?v.data.isEqual(T.data)?w!==A&&(i.track({type:3,doc:T}),x=!0):this.su(v,T)||(i.track({type:2,doc:T}),x=!0,(h&&this.eu(T,h)>0||d&&this.eu(T,d)<0)&&(c=!0)):!v&&T?(i.track({type:0,doc:T}),x=!0):v&&!T&&(i.track({type:1,doc:v}),x=!0,(h||d)&&(c=!0)),x&&(T?(l=l.add(T),a=A?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),i.track({type:1,doc:m})}return{tu:l,iu:i,Cs:c,mutatedKeys:a}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort((m,y)=>function(T,w){const A=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:x})}};return A(T)-A(w)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(i),s=s??!1;const c=e&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,d=h!==this.Za;return this.Za=h,l.length!==0||d?{snapshot:new Bc(this.query,t.tu,a,l,t.mutatedKeys,h===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ut(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const e=[];return t.forEach(i=>{this.Xa.has(i)||e.push(new tN(i))}),this.Xa.forEach(i=>{t.has(i)||e.push(new J2(i))}),e}cu(t){this.Ya=t.Qs,this.Xa=Ut();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Bc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tu="SyncEngine";class A${constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class x${constructor(t){this.key=t,this.hu=!1}}class I${constructor(t,e,i,s,a,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new hr(c=>Fk(c),Ep),this.Iu=new Map,this.Eu=new Set,this.du=new ye(pt.comparator),this.Au=new Map,this.Ru=new sE,this.Vu={},this.mu=new Map,this.fu=Go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R$(n,t,e=!0){const i=Pp(n);let s;const a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await eN(i,t,e,!0),s}async function C$(n,t){const e=Pp(n);await eN(e,t,!0,!1)}async function eN(n,t,e,i){const s=await Yg(n.localStore,li(t)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,e);let c;return i&&(c=await pE(n,t,a,l==="current",s.resumeToken)),n.isPrimaryClient&&e&&Mp(n.remoteStore,s),c}async function pE(n,t,e,i,s){n.pu=(y,v,T)=>async function(A,x,k,L){let U=x.view.ru(k);U.Cs&&(U=await g0(A.localStore,x.query,!1).then(({documents:O})=>x.view.ru(O,U)));const K=L&&L.targetChanges.get(x.targetId),z=L&&L.targetMismatches.get(x.targetId)!=null,nt=x.view.applyChanges(U,A.isPrimaryClient,K,z);return b0(A,x.targetId,nt.au),nt.snapshot}(n,y,v,T);const a=await g0(n.localStore,t,!0),l=new w$(t,a.Qs),c=l.ru(a.documents),h=Hf.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),d=l.applyChanges(c,n.isPrimaryClient,h);b0(n,e,d.au);const m=new A$(t,e,l);return n.Tu.set(t,m),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),d.snapshot}async function D$(n,t,e){const i=Tt(n),s=i.Tu.get(t),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter(l=>!Ep(l,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Vc(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&Lc(i.remoteStore,s.targetId),Uc(i,s.targetId)}).catch(Ea)):(Uc(i,s.targetId),await Vc(i.localStore,s.targetId,!0))}async function M$(n,t){const e=Tt(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Lc(e.remoteStore,i.targetId))}async function P$(n,t,e){const i=bE(n);try{const s=await function(l,c){const h=Tt(l),d=oe.now(),m=c.reduce((T,w)=>T.add(w.key),Ut());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let w=ai(),A=Ut();return h.Ns.getEntries(T,m).next(x=>{w=x,w.forEach((k,L)=>{L.isValidDocument()||(A=A.add(k))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,w)).next(x=>{y=x;const k=[];for(const L of c){const U=tK(L,y.get(L.key).overlayedDocument);U!=null&&k.push(new fr(L.key,U,Pk(U.value.mapValue),Cn.exists(!0)))}return h.mutationQueue.addMutationBatch(T,d,k,c)}).next(x=>{v=x;const k=x.applyToLocalDocumentSet(y,A);return h.documentOverlayCache.saveOverlays(T,x.batchId,k)})}).then(()=>({batchId:v.batchId,changes:Gk(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(l,c,h){let d=l.Vu[l.currentUser.toKey()];d||(d=new ye(Nt)),d=d.insert(c,h),l.Vu[l.currentUser.toKey()]=d}(i,s.batchId,e),await Aa(i,s.changes),await Zc(i.remoteStore)}catch(s){const a=mE(s,"Failed to persist write");e.reject(a)}}async function nN(n,t){const e=Tt(n);try{const i=await XK(e.localStore,t);t.targetChanges.forEach((s,a)=>{const l=e.Au.get(a);l&&(St(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?St(l.hu,14607):s.removedDocuments.size>0&&(St(l.hu,42227),l.hu=!1))}),await Aa(e,i,t)}catch(i){await Ea(i)}}function HC(n,t,e){const i=Tt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach((a,l)=>{const c=l.view.va(t);c.snapshot&&s.push(c.snapshot)}),function(l,c){const h=Tt(l);h.onlineState=c;let d=!1;h.queries.forEach((m,y)=>{for(const v of y.Sa)v.va(c)&&(d=!0)}),d&&gE(h)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function O$(n,t,e){const i=Tt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),a=s&&s.key;if(a){let l=new ye(pt.comparator);l=l.insert(a,Me.newNoDocument(a,xt.min()));const c=Ut().add(a),h=new zf(xt.min(),new Map,new ye(Nt),l,c);await nN(i,h),i.du=i.du.remove(a),i.Au.delete(t),vE(i)}else await Vc(i.localStore,t,!1).then(()=>Uc(i,t,e)).catch(Ea)}async function k$(n,t){const e=Tt(n),i=t.batch.batchId;try{const s=await YK(e.localStore,t);_E(e,i,null),yE(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Aa(e,s)}catch(s){await Ea(s)}}async function N$(n,t,e){const i=Tt(n);try{const s=await function(l,c){const h=Tt(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return h.mutationQueue.lookupMutationBatch(d,c).next(y=>(St(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(d,y))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>h.localDocuments.getDocuments(d,m))})}(i.localStore,t);_E(i,t,e),yE(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Aa(i,s)}catch(s){await Ea(s)}}function yE(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function _E(n,t,e){const i=Tt(n);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(t);a&&(e?a.reject(e):a.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Uc(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(i=>{n.Ru.containsKey(i)||iN(n,i)})}function iN(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Lc(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),vE(n))}function b0(n,t,e){for(const i of e)i instanceof J2?(n.Ru.addReference(i.key,t),V$(n,i)):i instanceof tN?(ht(tu,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||iN(n,i.key)):_t(19791,{wu:i})}function V$(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(ht(tu,"New document in limbo: "+e),n.Eu.add(i),vE(n))}function vE(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new pt(ne.fromString(t)),i=n.fu.next();n.Au.set(i,new x$(e)),n.du=n.du.insert(e,i),Mp(n.remoteStore,new ir(li(Tp(e.path)),i,"TargetPurposeLimboResolution",Kn.ce))}}async function Aa(n,t,e){const i=Tt(n),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((c,h)=>{l.push(i.pu(h,t,e).then(d=>{var m;if((d||e)&&i.isPrimaryClient){const y=d?!d.fromCache:(m=e==null?void 0:e.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(d){s.push(d);const y=oE.As(h.targetId,d);a.push(y)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(h,d){const m=Tt(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(d,v=>Y.forEach(v.Es,T=>m.persistence.referenceDelegate.addReference(y,v.targetId,T)).next(()=>Y.forEach(v.ds,T=>m.persistence.referenceDelegate.removeReference(y,v.targetId,T)))))}catch(y){if(!Sa(y))throw y;ht(lE,"Failed to update sequence numbers: "+y)}for(const y of d){const v=y.targetId;if(!y.fromCache){const T=m.Ms.get(v),w=T.snapshotVersion,A=T.withLastLimboFreeSnapshotVersion(w);m.Ms=m.Ms.insert(v,A)}}}(i.localStore,a))}async function L$(n,t){const e=Tt(n);if(!e.currentUser.isEqual(t)){ht(tu,"User change. New user:",t.toKey());const i=await O2(e.localStore,t);e.currentUser=t,function(a,l){a.mu.forEach(c=>{c.forEach(h=>{h.reject(new gt(lt.CANCELLED,l))})}),a.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Aa(e,i.Ls)}}function B$(n,t){const e=Tt(n),i=e.Au.get(t);if(i&&i.hu)return Ut().add(i.key);{let s=Ut();const a=e.Iu.get(t);if(!a)return s;for(const l of a){const c=e.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}async function U$(n,t){const e=Tt(n),i=await g0(e.localStore,t.query,!0),s=t.view.cu(i);return e.isPrimaryClient&&b0(e,t.targetId,s.au),s}async function j$(n,t){const e=Tt(n);return V2(e.localStore,t).then(i=>Aa(e,i))}async function F$(n,t,e,i){const s=Tt(n),a=await function(c,h){const d=Tt(c),m=Tt(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",y=>m.er(y,h).next(v=>v?d.localDocuments.getDocuments(y,v):Y.resolve(null)))}(s.localStore,t);a!==null?(e==="pending"?await Zc(s.remoteStore):e==="acknowledged"||e==="rejected"?(_E(s,t,i||null),yE(s,t),function(c,h){Tt(Tt(c).mutationQueue).ir(h)}(s.localStore,t)):_t(6720,"Unknown batchState",{Su:e}),await Aa(s,a)):ht(tu,"Cannot apply mutation batch with id: "+t)}async function z$(n,t){const e=Tt(n);if(Pp(e),bE(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),s=await qC(e,i.toArray());e.gu=!0,await _0(e.remoteStore,!0);for(const a of s)Mp(e.remoteStore,a)}else if(t===!1&&e.gu!==!1){const i=[];let s=Promise.resolve();e.Iu.forEach((a,l)=>{e.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then(()=>(Uc(e,l),Vc(e.localStore,l,!0))),Lc(e.remoteStore,l)}),await s,await qC(e,i),function(l){const c=Tt(l);c.Au.forEach((h,d)=>{Lc(c.remoteStore,d)}),c.Ru.Jr(),c.Au=new Map,c.du=new ye(pt.comparator)}(e),e.gu=!1,await _0(e.remoteStore,!1)}}async function qC(n,t,e){const i=Tt(n),s=[],a=[];for(const l of t){let c;const h=i.Iu.get(l);if(h&&h.length!==0){c=await Yg(i.localStore,li(h[0]));for(const d of h){const m=i.Tu.get(d),y=await U$(i,m);y.snapshot&&a.push(y.snapshot)}}else{const d=await N2(i.localStore,l);c=await Yg(i.localStore,d),await pE(i,sN(d),l,!1,c.resumeToken)}s.push(c)}return i.Pu.H_(a),s}function sN(n){return jk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function H$(n){return function(e){return Tt(Tt(e).persistence).Ts()}(Tt(n).localStore)}async function q$(n,t,e,i){const s=Tt(n);if(s.gu)return void ht(tu,"Ignoring unexpected query state notification.");const a=s.Iu.get(t);if(a&&a.length>0)switch(e){case"current":case"not-current":{const l=await V2(s.localStore,zk(a[0])),c=zf.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Be.EMPTY_BYTE_STRING);await Aa(s,l,c);break}case"rejected":await Vc(s.localStore,t,!0),Uc(s,t,i);break;default:_t(64155,e)}}async function G$(n,t,e){const i=Pp(n);if(i.gu){for(const s of t){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ht(tu,"Adding an already active target "+s);continue}const a=await N2(i.localStore,s),l=await Yg(i.localStore,a);await pE(i,sN(a),l.targetId,!1,l.resumeToken),Mp(i.remoteStore,l)}for(const s of e)i.Iu.has(s)&&await Vc(i.localStore,s,!1).then(()=>{Lc(i.remoteStore,s),Uc(i,s)}).catch(Ea)}}function Pp(n){const t=Tt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=nN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=B$.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=O$.bind(null,t),t.Pu.H_=E$.bind(null,t.eventManager),t.Pu.yu=S$.bind(null,t.eventManager),t}function bE(n){const t=Tt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=k$.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=N$.bind(null,t),t}class xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Cp(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return P2(this.persistence,new M2,t.initialUser,this.serializer)}Cu(t){return new rE(Rp.mi,this.serializer)}Du(t){return new F2}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xf.provider={build:()=>new xf};class K$ extends xf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){St(this.persistence.referenceDelegate instanceof Wg,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new A2(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new rE(i=>Wg.mi(i,e),this.serializer)}}class rN extends xf{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await bE(this.xu.syncEngine),await Zc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return P2(this.persistence,new M2,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new A2(i,t.asyncQueue,e)}Mu(t,e){const i=new eG(e,this.persistence);return new tG(t.asyncQueue,i)}Cu(t){const e=D2(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new aE(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,z2(),lg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new F2}}class $$ extends rN{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof ib&&(this.sharedClientState.syncEngine={Co:F$.bind(null,e),vo:q$.bind(null,e),Fo:G$.bind(null,e),Ts:H$.bind(null,e),Do:j$.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await z$(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(t){const e=z2();if(!ib.v(e))throw new gt(lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=D2(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ib(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class If{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=L$.bind(null,this.syncEngine),await _0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new T$}()}createDatastore(t){const e=Cp(t.databaseInfo.databaseId),i=function(a){return new i$(a)}(t.databaseInfo);return function(a,l,c,h){return new o$(a,l,c,h)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,a,l,c){return new c$(i,s,a,l,c)}(this.localStore,this.datastore,t.asyncQueue,e=>HC(this.syncEngine,e,0),function(){return LC.v()?new LC:new JK}())}createSyncEngine(t,e){return function(s,a,l,c,h,d,m){const y=new I$(s,a,l,c,h,d);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const a=Tt(s);ht(Ko,"RemoteStore shutting down."),a.Ea.add(5),await qf(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}If.provider={build:()=>new If};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ve("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="FirestoreClient";class W${constructor(t,e,i,s,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=VT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async l=>{ht(_a,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ht(_a,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=mE(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function rb(n,t){n.asyncQueue.verifyOperationInProgress(),ht(_a,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await O2(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function GC(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Y$(n);ht(_a,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>UC(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>UC(t.remoteStore,s)),n._onlineComponents=t}async function Y$(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht(_a,"Using user provided OfflineComponentProvider");try{await rb(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===lt.FAILED_PRECONDITION||s.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;gf("Error using user provided cache. Falling back to memory cache: "+e),await rb(n,new xf)}}else ht(_a,"Using default OfflineComponentProvider"),await rb(n,new K$(void 0));return n._offlineComponents}async function oN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht(_a,"Using user provided OnlineComponentProvider"),await GC(n,n._uninitializedComponentsProvider._online)):(ht(_a,"Using default OnlineComponentProvider"),await GC(n,new If))),n._onlineComponents}function X$(n){return oN(n).then(t=>t.syncEngine)}async function lN(n){const t=await oN(n),e=t.eventManager;return e.onListen=R$.bind(null,t.syncEngine),e.onUnlisten=D$.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=C$.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=M$.bind(null,t.syncEngine),e}function Q$(n,t,e={}){const i=new _s;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,c,h,d){const m=new aN({next:v=>{m.Nu(),l.enqueueAndForget(()=>Q2(a,y));const T=v.docs.has(c);!T&&v.fromCache?d.reject(new gt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&h&&h.source==="server"?d.reject(new gt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),y=new Z2(Tp(c.path),m,{includeMetadataChanges:!0,qa:!0});return X2(a,y)}(await lN(n),n.asyncQueue,t,e,i)),i.promise}function Z$(n,t,e={}){const i=new _s;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,c,h,d){const m=new aN({next:v=>{m.Nu(),l.enqueueAndForget(()=>Q2(a,y)),v.fromCache&&h.source==="server"?d.reject(new gt(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),y=new Z2(c,m,{includeMetadataChanges:!0,qa:!0});return X2(a,y)}(await lN(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$="firestore.googleapis.com",$C=!0;class WC{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new gt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J$,this.ssl=$C}else this.host=t.host,this.ssl=t.ssl??$C;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=b2;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<w2)throw new gt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Q7("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cN(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new gt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new gt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new gt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class TE{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new gt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new gt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WC(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new z7;switch(i.type){case"firstParty":return new G7(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new gt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=KC.get(e);i&&(ht("ComponentProvider","Removing Datastore"),KC.delete(e),i.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Op(this.firestore,t,this._query)}}class Ye{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ye(this.firestore,t,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Bf(e,Ye._jsonSchema))return new Ye(t,i||null,new pt(ne.fromString(e.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:We("string",Ye._jsonSchemaVersion),referencePath:We("string")};class ua extends Op{constructor(t,e,i){super(t,e,Tp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ye(this.firestore,null,new pt(t))}withConverter(t){return new ua(this.firestore,t,this._path)}}function EE(n,t,...e){if(n=dn(n),rk("collection","path",t),n instanceof TE){const i=ne.fromString(t,...e);return BR(i),new ua(n,null,i)}{if(!(n instanceof Ye||n instanceof ua))throw new gt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ne.fromString(t,...e));return BR(i),new ua(n.firestore,null,i)}}function xa(n,t,...e){if(n=dn(n),arguments.length===1&&(t=VT.newId()),rk("doc","path",t),n instanceof TE){const i=ne.fromString(t,...e);return LR(i),new Ye(n,null,new pt(i))}{if(!(n instanceof Ye||n instanceof ua))throw new gt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ne.fromString(t,...e));return LR(i),new Ye(n.firestore,n instanceof ua?n.converter:null,new pt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="AsyncQueue";class XC{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new H2(this,"async_queue_retry"),this._c=()=>{const i=lg();i&&ht(YC,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=lg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=lg();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new _s;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Sa(t))throw t;ht(YC,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Ve("INTERNAL UNHANDLED ERROR: ",QC(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=dE.createAndSchedule(this,t,e,i,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&_t(47125,{Pc:QC(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function QC(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Qo extends TE{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new XC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new XC(t),this._firestoreClient=void 0,await t}}}function tW(n,t,e){e||(e=Ug);const i=Wo(n,"firestore");if(i.isInitialized(e)){const s=i.getImmediate({identifier:e}),a=i.getOptions(e);if(ma(a,t))return s;throw new gt(lt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new gt(lt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<w2)throw new gt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&$c(t.host)&&NP(t.host),i.initialize({options:t,instanceIdentifier:e})}function SE(n){if(n._terminated)throw new gt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eW(n),n._firestoreClient}function eW(n){var i,s,a;const t=n._freezeSettings(),e=function(c,h,d,m){return new CG(c,h,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,cN(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((a=t.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new W$(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xi(Be.fromBase64String(t))}catch(e){throw new gt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new xi(Be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:xi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Bf(t,xi._jsonSchema))return xi.fromBase64String(t.bytes)}}xi._jsonSchemaVersion="firestore/bytes/1.0",xi._jsonSchema={type:We("string",xi._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new gt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new gt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new gt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vs._jsonSchemaVersion}}static fromJSON(t){if(Bf(t,vs._jsonSchema))return new vs(t.latitude,t.longitude)}}vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:We("string",vs._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,t._values)}toJSON(){return{type:bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Bf(t,bs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new bs(t.vectorValues);throw new gt(lt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bs._jsonSchemaVersion="firestore/vectorValue/1.0",bs._jsonSchema={type:We("string",bs._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=/^__.*__$/;class iW{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new fr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Qc(t,this.data,e,this.fieldTransforms)}}class uN{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new fr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function hN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:n})}}class AE{constructor(t,e,i,s,a,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new AE({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const e=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){var s;const e=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Jg(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(hN(this.Ac)&&nW.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class sW{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Cp(t)}Cc(t,e,i,s=!1){return new AE({Ac:t,methodName:e,Dc:i,path:xe.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xE(n){const t=n._freezeSettings(),e=Cp(n._databaseId);return new sW(n._databaseId,!!t.ignoreUndefinedProperties,e)}function fN(n,t,e,i,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,t,e,s);IE("Data must be an object, but it was:",l,i);const c=dN(i,l);let h,d;if(a.merge)h=new $n(l.fieldMask),d=l.fieldTransforms;else if(a.mergeFields){const m=[];for(const y of a.mergeFields){const v=T0(t,y,e);if(!l.contains(v))throw new gt(lt.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);gN(m,v)||m.push(v)}h=new $n(m),d=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,d=l.fieldTransforms;return new iW(new In(c),h,d)}class Np extends wE{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Np}}function rW(n,t,e,i){const s=n.Cc(1,t,e);IE("Data must be an object, but it was:",s,i);const a=[],l=In.empty();wa(i,(h,d)=>{const m=RE(t,h,e);d=dn(d);const y=s.yc(m);if(d instanceof Np)a.push(m);else{const v=Vp(d,y);v!=null&&(a.push(m),l.set(m,v))}});const c=new $n(a);return new uN(l,c,s.fieldTransforms)}function aW(n,t,e,i,s,a){const l=n.Cc(1,t,e),c=[T0(t,i,e)],h=[s];if(a.length%2!=0)throw new gt(lt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)c.push(T0(t,a[v])),h.push(a[v+1]);const d=[],m=In.empty();for(let v=c.length-1;v>=0;--v)if(!gN(d,c[v])){const T=c[v];let w=h[v];w=dn(w);const A=l.yc(T);if(w instanceof Np)d.push(T);else{const x=Vp(w,A);x!=null&&(d.push(T),m.set(T,x))}}const y=new $n(d);return new uN(m,y,l.fieldTransforms)}function Vp(n,t){if(mN(n=dn(n)))return IE("Unsupported field value:",t,n),dN(n,t);if(n instanceof wE)return function(i,s){if(!hN(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const a=[];let l=0;for(const c of i){let h=Vp(c,s.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}}(n,t)}return function(i,s){if((i=dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $G(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=oe.fromDate(i);return{timestampValue:Nc(s.serializer,a)}}if(i instanceof oe){const a=new oe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nc(s.serializer,a)}}if(i instanceof vs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xi)return{bytesValue:s2(s.serializer,i._byteString)};if(i instanceof Ye){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:eE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof bs)return function(l,c){return{mapValue:{fields:{[GT]:{stringValue:KT},[Cc]:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return XT(c.serializer,d)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${LT(i)}`)}(n,t)}function dN(n,t){const e={};return Sk(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wa(n,(i,s)=>{const a=Vp(s,t.mc(i));a!=null&&(e[i]=a)}),{mapValue:{fields:e}}}function mN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof oe||n instanceof vs||n instanceof xi||n instanceof Ye||n instanceof wE||n instanceof bs)}function IE(n,t,e){if(!mN(e)||!ak(e)){const i=LT(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function T0(n,t,e){if((t=dn(t))instanceof kp)return t._internalPath;if(typeof t=="string")return RE(n,t);throw Jg("Field path arguments must be of type string or ",n,!1,void 0,e)}const oW=new RegExp("[~\\*/\\[\\]]");function RE(n,t,e){if(t.search(oW)>=0)throw Jg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new kp(...t.split("."))._internalPath}catch{throw Jg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Jg(n,t,e,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${i}`),l&&(h+=` in document ${s}`),h+=")"),new gt(lt.INVALID_ARGUMENT,c+n+h)}function gN(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(t,e,i,s,a){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new lW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(yN("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class lW extends pN{data(){return super.data()}}function yN(n,t){return typeof t=="string"?RE(n,t):t instanceof kp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new gt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uW{convertValue(t,e="none"){switch(ga(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ur(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return wa(t,(s,a)=>{i[s]=this.convertValue(a,e)}),i}convertVectorValue(t){var i,s,a;const e=(a=(s=(i=t.fields)==null?void 0:i[Cc].arrayValue)==null?void 0:s.values)==null?void 0:a.map(l=>Ee(l.doubleValue));return new bs(e)}convertGeoPoint(t){return new vs(Ee(t.latitude),Ee(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=_p(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Tf(t));default:return null}}convertTimestamp(t){const e=cr(t);return new oe(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ne.fromString(t);St(m2(i),9688,{name:t});const s=new Fo(i.get(1),i.get(3)),a=new pt(i.popFirst(5));return s.isEqual(e)||Ve(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class Oh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Oo extends pN{constructor(t,e,i,s,a,l){super(t,e,i,s,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new cg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(yN("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new gt(lt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Oo._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oo._jsonSchema={type:We("string",Oo._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class cg extends Oo{data(t={}){return super.data(t)}}class vc{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Oh(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new cg(this._firestore,this._userDataWriter,i.key,i,new Oh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new gt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const h=new cg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Oh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const h=new cg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Oh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:hW(c.type),doc:h,oldIndex:d,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new gt(lt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=vc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=VT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(e.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function hW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n){n=Es(n,Ye);const t=Es(n.firestore,Qo);return Q$(SE(t),n._key).then(e=>mW(t,n,e))}vc._jsonSchemaVersion="firestore/querySnapshot/1.0",vc._jsonSchema={type:We("string",vc._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class vN extends uW{constructor(t){super(),this.firestore=t}convertBytes(t){return new xi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ye(this.firestore,null,e)}}function bN(n){n=Es(n,Op);const t=Es(n.firestore,Qo),e=SE(t),i=new vN(t);return cW(n._query),Z$(e,n._query).then(s=>new vc(t,i,n,s))}function fW(n,t,e){n=Es(n,Ye);const i=Es(n.firestore,Qo),s=_N(n.converter,t);return Bp(i,[fN(xE(i),"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,Cn.none())])}function Lp(n,t,e,...i){n=Es(n,Ye);const s=Es(n.firestore,Qo),a=xE(s);let l;return l=typeof(t=dn(t))=="string"||t instanceof kp?aW(a,"updateDoc",n._key,t,e,i):rW(a,"updateDoc",n._key,t),Bp(s,[l.toMutation(n._key,Cn.exists(!0))])}function TN(n){return Bp(Es(n.firestore,Qo),[new Ap(n._key,Cn.none())])}function dW(n,t){const e=Es(n.firestore,Qo),i=xa(n),s=_N(n.converter,t);return Bp(e,[fN(xE(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Cn.exists(!1))]).then(()=>i)}function Bp(n,t){return function(i,s){const a=new _s;return i.asyncQueue.enqueueAndForget(async()=>P$(await X$(i),s,a)),a.promise}(SE(n),t)}function mW(n,t,e){const i=e.docs.get(t._key),s=new vN(n);return new Oo(n,s,t._key,i,new Oh(e.hasPendingWrites,e.fromCache),t.converter)}class gW{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=vW(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function pW(n){return new gW(n)}class yW{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=If.provider,this._offlineComponentProvider={build:e=>new rN(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class _W{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=If.provider,this._offlineComponentProvider={build:e=>new $$(e,t==null?void 0:t.cacheSizeBytes)}}}function vW(n){return new yW(n==null?void 0:n.forceOwnership)}function bW(){return new _W}(function(t,e=!0){(function(s){Xc=s})(Wc),Ts(new ji("firestore",(i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Qo(new H7(i.getProvider("auth-internal")),new K7(l,i.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new gt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fo(d.options.projectId,m)}(l,s),l);return a={useFetchStreams:e,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Ri(OR,kR,t),Ri(OR,kR,"esm2020")})();const TW={apiKey:"AIzaSyBc4CZnGGOTDvfPvEwaA0dXFOwbocdwCa8",authDomain:"knowurfood-d2b78.firebaseapp.com",projectId:"knowurfood-d2b78",storageBucket:"knowurfood-d2b78.firebasestorage.app",messagingSenderId:"643565214463",appId:"1:643565214463:web:8681aadcc4f49c6afdcaca",measurementId:"G-HB4L7NXGNE"},DE=HP(TW);SH(DE);const Up=U7(DE),ws=tW(DE,{localCache:pW({tabManager:bW()})}),EW=n=>Math.floor(n/100)+1,SW=async(n,t)=>{await dW(EE(ws,"users",t,"meals"),n);const e=xa(ws,"users",t),i=await CE(e);if(i.exists()){const l=(i.data().xp||0)+10,c=EW(l);await Lp(e,{xp:l,level:c})}},ab=async n=>(await bN(EE(ws,"users",n,"meals"))).docs.map(e=>({id:e.id,...e.data()})),wW=async(n,t)=>{const e=xa(ws,"users",t,"meals",n.id),{id:i,...s}=n;await Lp(e,s)},AW=async(n,t)=>{const e=xa(ws,"users",t,"meals",n);await TN(e)},xW=async n=>{const t=EE(ws,"users",n,"meals"),i=(await bN(t)).docs.map(s=>TN(s.ref));await Promise.all(i)},IW=async(n,t)=>{const e=xa(ws,"users",n);await Lp(e,t)},RW=async({email:n,password:t,...e})=>{const s=(await wq(Up,n,t)).user;return await fW(xa(ws,"users",s.uid),{...e,xp:0,level:1,streak:1,lastLogin:new Date().toISOString().split("T")[0],badges:[]}),{...s,...e}},CW=async({email:n,password:t})=>{const i=(await Aq(Up,n,t)).user,s=xa(ws,"users",i.uid),a=await CE(s),l=a.exists()?a.data():{};return{...i,...l}},DW=async()=>{await Rq(Up)},ZC=async()=>new Promise(n=>{const t=Up.onAuthStateChanged(async e=>{if(t(),!e)return n(null);const i=xa(ws,"users",e.uid),s=await CE(i);if(!s.exists())return n(e);const a=s.data(),l=new Date().toISOString().split("T")[0],c=a.lastLogin||l,h=MW(c,l);let d={};h===1?d.streak=(a.streak||0)+1:h>1?d.streak=1:d.streak=a.streak||1,d.lastLogin=l,(d.streak!==a.streak||d.lastLogin!==c||d.badges)&&(await Lp(i,d),Object.assign(a,d));const m=[5,15,30,60,100],y=a.badges||[];if(m.includes(d.streak)){const v=`${d.streak}-Day Streak`;y.includes(v)||(y.push(v),d.badges=y)}n({...e,...a})})}),MW=(n,t)=>{const e=new Date(n),s=new Date(t).getTime()-e.getTime();return Math.floor(s/(1e3*60*60*24))},EN="/knowurfood/assets/Logo-L9hp3FVR.png";function PW({onLoginSuccess:n}){const[t,e]=dt.useState("login"),[i,s]=dt.useState(""),[a,l]=dt.useState(""),[c,h]=dt.useState(""),[d,m]=dt.useState(""),[y,v]=dt.useState(""),[T,w]=dt.useState(2e3),[A,x]=dt.useState("Breakfast,Lunch,Dinner"),[k,L]=dt.useState("g"),[U,K]=dt.useState(""),[z,nt]=dt.useState(!1),O=()=>{s(""),l(""),h(""),m(""),v(""),w(2e3),x("Breakfast,Lunch,Dinner"),L("g"),K("")},I=()=>{e(P=>P==="login"?"register":"login"),O()},C=async P=>{if(P.preventDefault(),K(""),t==="register"&&a!==c){K("Passwords do not match");return}try{let V;t==="register"?V=await RW({email:i,password:a,firstName:d,lastName:y,calorieGoal:Number(T),mealOrder:A.split(","),unit:k}):V=await CW({email:i,password:a}),n(V)}catch(V){K(V.message)}};return B.jsxs("div",{className:"auth-container fade-slide-in",children:[B.jsx("div",{className:"text-center",children:B.jsx("img",{src:EN,alt:"KnowUrFood Logo",style:{width:"200px"}})}),B.jsxs("div",{className:"auth-box shadow rounded",children:[B.jsx("h2",{className:"auth-title",children:t==="login"?"LOGIN":"REGISTER"}),B.jsxs("form",{onSubmit:C,className:"auth-form",children:[B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"Email"}),B.jsx("input",{type:"email",className:"form-control",placeholder:"Email",value:i,onChange:P=>s(P.target.value),required:!0})]}),B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"Password"}),B.jsxs("div",{className:"input-group",children:[B.jsx("input",{type:z?"text":"password",className:"form-control",placeholder:"Password",value:a,onChange:P=>l(P.target.value),required:!0}),B.jsx("i",{className:`bi ${z?"bi-eye-slash":"bi-eye"} toggle-password-icon`,onClick:()=>nt(P=>!P),title:"Toggle password"})]})]}),t==="register"&&B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"Confirm"}),B.jsx("input",{type:z?"text":"password",className:"form-control",placeholder:"Confirm Password",value:c,onChange:P=>h(P.target.value),required:!0})]}),B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"First Name"}),B.jsx("input",{type:"text",className:"form-control",placeholder:"First Name",value:d,onChange:P=>m(P.target.value),required:!0})]}),B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"Last Name"}),B.jsx("input",{type:"text",className:"form-control",placeholder:"Last Name",value:y,onChange:P=>v(P.target.value),required:!0})]}),B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"Calorie Goal"}),B.jsx("input",{type:"number",className:"form-control",placeholder:"e.g. 2000",value:T,onChange:P=>w(P.target.value),required:!0})]}),B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"Meal Order"}),B.jsxs("select",{className:"form-control",value:A,onChange:P=>x(P.target.value),children:[B.jsx("option",{value:"Breakfast,Lunch,Dinner",children:"Breakfast → Lunch → Dinner"}),B.jsx("option",{value:"Dinner,Lunch,Breakfast",children:"Dinner → Lunch → Breakfast"})]})]}),B.jsxs("div",{className:"form-row",children:[B.jsx("label",{children:"Preferred Unit"}),B.jsxs("select",{className:"form-control",value:k,onChange:P=>L(P.target.value),children:[B.jsx("option",{value:"g",children:"Grams (g)"}),B.jsx("option",{value:"mg",children:"Milligrams (mg)"}),B.jsx("option",{value:"kcal",children:"Calories (kcal)"})]})]})]}),B.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3 mb-2",children:t==="login"?"Login":"Register"})]}),B.jsxs("p",{className:"text-white text-center",children:[t==="login"?"Don't have an account?":"Already have an account?"," ",B.jsx("span",{className:"text-link",onClick:I,children:t==="login"?"Register":"Login"})]}),U&&B.jsx("p",{className:"text-danger text-center",children:U})]})]})}function OW({user:n,meals:t,onLogout:e,clearAllMeals:i}){const[s,a]=dt.useState("Breakfast-Lunch-Dinner"),[l,c]=dt.useState(!1),[h,d]=dt.useState("g"),[m,y]=dt.useState(!1),v=n.level||1,w=(n.xp||0)%100,A=100,x=w/A*100,k=n.badges||[];dt.useEffect(()=>{var C;n&&(a(((C=n.mealOrder)==null?void 0:C.join("-"))||"Breakfast-Lunch-Dinner"),c(n.darkMode??!1),d(n.unit||"g"))},[n]);const L=async()=>{const C={mealOrder:s.split("-"),darkMode:l,unit:h};await IW(n.uid,C),alert("✅ Preferences updated in your profile!")},U=(t==null?void 0:t.length)||0,K=[...new Set(t==null?void 0:t.map(C=>C.date))],z=K.length>0?(U/K.length).toFixed(1):0,nt=()=>{const C=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),P=document.createElement("a");P.href=URL.createObjectURL(C),P.download="meals.json",P.click()},O=()=>{if(!t||t.length===0){alert("No meals to export.");return}const C=[["Date","Meal Type","Food Name","Fat (g)","Carbs (g)","Protein (g)","Quantity","Unit"]];t.forEach(N=>{N.foodItems.forEach(At=>{C.push([N.date,N.mealType,At.name,At.nutrients.fat,At.nutrients.carbs,At.nutrients.protein,At.quantity,n.unit||"g"])})});const P=C.map(N=>N.join(",")).join(`
`),V=new Blob([P],{type:"text/csv"}),F=document.createElement("a");F.href=URL.createObjectURL(V),F.download="meals.csv",F.click()},I=async()=>{window.confirm("⚠️ Are you sure you want to clear all meal data? This cannot be undone.")&&(y(!0),await i(),y(!1),alert("✅ All meals have been deleted from your account."))};return B.jsxs("div",{className:"home-container",children:[B.jsxs("div",{className:"text-center mb-4",children:[B.jsx("i",{className:"bi bi-person-circle TitleName",style:{fontSize:"3rem"}}),B.jsx("h4",{className:"mt-2 fw-bold TitleName",children:n.firstName}),B.jsx("small",{className:"text-white",children:"Profile"})]}),B.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[B.jsx("h6",{className:"fw-bold",children:"Usage Summary"}),B.jsxs("p",{style:{fontSize:"14px"},children:["📅 Days Tracked: ",K.length]}),B.jsxs("p",{style:{fontSize:"14px"},children:["🍽️ Meals Logged: ",U]}),B.jsxs("p",{style:{fontSize:"14px"},children:["📊 Avg Meals/Day: ",z]})]}),B.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[B.jsx("h6",{className:"fw-bold mb-2",children:"Your Rewards"}),B.jsxs("p",{className:"mb-1",children:["🎮 Level ",v]}),B.jsx("div",{className:"progress mb-2",style:{height:"6px",background:"#444"},title:`${w}/${A} XP`,children:B.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${x}%`,backgroundColor:"#28a745"},"aria-valuenow":w,"aria-valuemin":0,"aria-valuemax":A})}),B.jsx("p",{className:"mb-1",children:"🏅 Badges Unlocked:"}),k.length===0?B.jsx("p",{className:"text-muted small",children:"No badges yet — keep logging meals!"}):B.jsx("div",{className:"d-flex flex-wrap gap-2",children:k.map((C,P)=>B.jsx("span",{className:"badge rounded-pill bg-success text-white",children:C},P))})]}),B.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[B.jsx("h6",{className:"fw-bold",children:"Preferences"}),B.jsxs("div",{className:"mb-2",children:[B.jsx("label",{className:"form-label small",children:"Meal Order"}),B.jsxs("select",{className:"form-select form-select-sm",value:s,onChange:C=>a(C.target.value),children:[B.jsx("option",{children:"Breakfast-Lunch-Dinner"}),B.jsx("option",{children:"Lunch-Dinner-Breakfast"}),B.jsx("option",{children:"Dinner-Breakfast-Lunch"})]})]}),B.jsxs("div",{className:"mb-2",children:[B.jsx("label",{className:"form-label small",children:"Units"}),B.jsxs("select",{className:"form-select form-select-sm",value:h,onChange:C=>d(C.target.value),children:[B.jsx("option",{children:"g"}),B.jsx("option",{children:"mg"}),B.jsx("option",{children:"kcal"})]})]}),B.jsxs("button",{className:"btn btn-sm btn-primary mt-2",onClick:L,children:[B.jsx("i",{className:"bi bi-save me-1"})," Save Preferences"]})]}),B.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[B.jsx("h6",{className:"fw-bold mb-3",children:"Data Management"}),B.jsxs("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:nt,children:[B.jsx("i",{className:"bi bi-download me-1"})," Export Data (.json)"]}),B.jsxs("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:O,children:[B.jsx("i",{className:"bi bi-file-earmark-spreadsheet me-1"})," Export Data (.csv)"]}),B.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:I,disabled:m,children:m?"Clearing...":B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"bi bi-trash me-1"})," Clear All Meals"]})})]}),B.jsxs("div",{className:"card bg-dark border-0 p-3 shadow-sm text-white",children:[B.jsx("h6",{className:"fw-bold",children:"Account"}),B.jsxs("button",{className:"btn btn-danger w-100 mt-2",onClick:e,children:[B.jsx("i",{className:"bi bi-box-arrow-right me-2"})," Logout"]})]})]})}function kW({meals:n}){const[t,e]=dt.useState({}),[i,s]=dt.useState({}),a=new Date;a.setDate(a.getDate()-6);const l={Protein:50*7,Carbohydrate:260*7,Fat:70*7,"Carbs as Sugar":30*7,Fibre:30*7,Salt:6*7},c=(m=0)=>{const y=new Date,v=new Date(y.setDate(y.getDate()-m)),T=new Date(v);T.setDate(v.getDate()-6);const w=[];for(let A=0;A<7;A++){const x=new Date(T);x.setDate(T.getDate()+A),w.push(x.toISOString().split("T")[0])}return w},h=m=>{const y={};let v=0;m.forEach(w=>{const A=n.filter(x=>x.date===w);A.length>0&&(v++,A.forEach(x=>{x.foodItems.forEach(k=>{k.nutrients.forEach(L=>{const U=parseFloat(L.total)||0;y[L.type]=(y[L.type]||0)+U})})}))});const T={};return Object.keys(y).forEach(w=>{T[w]=y[w]/v}),T};dt.useEffect(()=>{const m=c(0),y=c(7);e(h(m)),s(h(y))},[n]);const d=[];return Object.keys(l).forEach(m=>{const y=t[m]||0,v=(t[m]||0)-(i[m]||0);y<.6*l[m]?d.push(`⬇️ Your ${m} intake is quite low this week. Consider improving it.`):y>1.2*l[m]?d.push(`⚠️ You're exceeding recommended ${m} levels.`):v>5?d.push(`🔺 ${m} increased significantly this week.`):v<-5&&d.push(`🔻 ${m} dropped since last week.`)}),B.jsxs("div",{className:"home-container",children:[B.jsx("p",{className:"TitleName",children:"Suggestions"}),B.jsxs("div",{className:"CalBarCharSection bg-dark mb-2",children:[B.jsx("p",{className:"SubTitleName mb-2",children:"Weekly Calorie Trend"}),B.jsx(GD,{meals:n,startOfWeek:a})]}),B.jsxs("div",{className:"NutritionProgressSection mb-2 bg-dark list-group",style:{padding:"5%"},children:[B.jsx("p",{className:"SubTitleName",children:"This Week's Nutrient Averages"}),Object.keys(l).map(m=>{const y=t[m]||0,v=l[m],T=(t[m]||0)-(i[m]||0),w=Math.min(y/v*100,150),A=y>v,x=T>1?"▲":T<-1?"▼":"•",k=T?`${x} ${Math.abs(T).toFixed(1)}g from last week`:"";return B.jsxs("div",{className:"mb-3",children:[B.jsxs("div",{className:"d-flex justify-content-between small",children:[B.jsx("span",{className:"text-white",children:m}),B.jsxs("span",{className:"text-white",children:[y.toFixed(1)," / ",v,"g"]})]}),B.jsx("div",{className:"progress",style:{height:"8px"},children:B.jsx("div",{className:`progress-bar ${A?"bg-danger":"bg-success"} progress-bar-striped progress-bar-animated`,style:{width:`${w}%`}})}),B.jsx("div",{className:"small text-white",children:k})]},m)})]}),B.jsx("div",{className:"SuggestionsBox",children:d.length>0?B.jsxs("ul",{className:"list-group bg-dark",style:{padding:"5%"},children:[B.jsx("p",{className:"SubTitleName",children:"Suggestions"}),d.map((m,y)=>B.jsx("li",{className:"list-group-item small bg-dark text-white border-0 ps-0",children:m},y))]}):B.jsx("p",{className:"text-success",children:"✅ You're on track this week!"})})]})}function NW(){const[n,t]=dt.useState(null),[e,i]=dt.useState([]),[s,a]=dt.useState("dashboard"),[l,c]=dt.useState(!1),[h,d]=dt.useState(null),[m,y]=dt.useState(!1),[v,T]=dt.useState(null),[w,A]=dt.useState(""),[x,k]=dt.useState(!1),[L,U]=dt.useState(!0),K=dt.useRef(!1);dt.useEffect(()=>{const C=async()=>{const P=await ZC();if(P){t(P);const V=await ab(P.uid);i(V)}};K.current?U(!1):setTimeout(()=>{U(!1),K.current=!0},1500),C()},[]);const z=async C=>{t(C);const P=await ab(C.uid);i(P)},nt=async C=>{if(!n)return;const P={...C,userId:n.uid};if(h){await wW({...P,id:h.id},n.uid);const V=e.map(F=>F.id===h.id?{...P,id:h.id}:F);i(V),d(null)}else{await SW(P,n.uid),A("+10 XP! 🎉"),k(!0),setTimeout(()=>k(!1),3e3);const V=await ab(n.uid),F=await ZC();i(V),t(F)}c(!1)},O=async C=>{await AW(C,n.uid);const P=e.filter(V=>V.id!==C);i(P)},I=async()=>{await DW(),t(null),i([])};return n?L?B.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:B.jsx("img",{src:EN,alt:"Logo",style:{width:"150px",height:"150px"}})}):B.jsxs(B.Fragment,{children:[s==="dashboard"&&B.jsx(j5,{user:n,meals:e,onEditMeal:C=>{d(C),c(!0)},onDeleteMeal:C=>{T(C),y(!0)}}),s==="history"&&B.jsx(F5,{meals:e,onEditMeal:C=>{d(C),c(!0)},onDeleteMeal:C=>{T(C),y(!0)}}),s==="suggestions"&&B.jsx(kW,{meals:e,user:n}),s==="profile"&&B.jsx(OW,{user:n,meals:e,onLogout:I,clearAllMeals:async()=>{await xW(n.uid),i([])}}),B.jsx(rL,{onAddClick:()=>c(!0),onLogout:I,onTabChange:C=>a(C),currentTab:s}),B.jsx(fz,{isOpen:l,onClose:()=>{c(!1),d(null)},onSave:nt,editMeal:h}),m&&B.jsx("div",{className:"modal-backdrop",children:B.jsxs("div",{className:"modal-container p-4 text-center",children:[B.jsx("p",{className:"text-white fw-bold",children:"Are you sure you want to delete this meal?"}),B.jsxs("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[B.jsx("button",{className:"btn btn-secondary",onClick:()=>y(!1),children:"Cancel"}),B.jsx("button",{className:"btn btn-danger",onClick:async()=>{v!==null&&(await O(v),y(!1),T(null))},children:"Delete"})]})]})}),x&&B.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",style:{zIndex:9999},children:B.jsx("div",{className:"toast show bg-success text-white",children:B.jsx("div",{className:"toast-body fw-bold",children:w})})})]}):B.jsx(PW,{onLoginSuccess:z})}sL.createRoot(document.getElementById("root")).render(B.jsx(dt.StrictMode,{children:B.jsx(NW,{})}));serviceWorkerRegistration.register();

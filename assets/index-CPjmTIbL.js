var Lk=Object.defineProperty;var Vk=(n,t,e)=>t in n?Lk(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var rt=(n,t,e)=>Vk(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();function Bk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var s_={exports:{}},Hf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function Fk(){if(RS)return Hf;RS=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Hf.Fragment=t,Hf.jsx=e,Hf.jsxs=e,Hf}var OS;function Uk(){return OS||(OS=1,s_.exports=Fk()),s_.exports}var V=Uk(),a_={exports:{}},Yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function jk(){if(MS)return Yt;MS=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function m(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function E(W,ct,gt){this.props=W,this.context=ct,this.refs=b,this.updater=gt||y}E.prototype.isReactComponent={},E.prototype.setState=function(W,ct){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ct,"setState")},E.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function T(){}T.prototype=E.prototype;function S(W,ct,gt){this.props=W,this.context=ct,this.refs=b,this.updater=gt||y}var R=S.prototype=new T;R.constructor=S,x(R,E.prototype),R.isPureReactComponent=!0;var k=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function M(W,ct,gt,dt,bt,Bt){return gt=Bt.ref,{$$typeof:n,type:W,key:ct,ref:gt!==void 0?gt:null,props:Bt}}function C(W,ct){return M(W.type,ct,void 0,void 0,void 0,W.props)}function O(W){return typeof W=="object"&&W!==null&&W.$$typeof===n}function L(W){var ct={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(gt){return ct[gt]})}var j=/\/+/g;function z(W,ct){return typeof W=="object"&&W!==null&&W.key!=null?L(""+W.key):ct.toString(36)}function U(){}function Et(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(U,U):(W.status="pending",W.then(function(ct){W.status==="pending"&&(W.status="fulfilled",W.value=ct)},function(ct){W.status==="pending"&&(W.status="rejected",W.reason=ct)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function wt(W,ct,gt,dt,bt){var Bt=typeof W;(Bt==="undefined"||Bt==="boolean")&&(W=null);var Ot=!1;if(W===null)Ot=!0;else switch(Bt){case"bigint":case"string":case"number":Ot=!0;break;case"object":switch(W.$$typeof){case n:case t:Ot=!0;break;case d:return Ot=W._init,wt(Ot(W._payload),ct,gt,dt,bt)}}if(Ot)return bt=bt(W),Ot=dt===""?"."+z(W,0):dt,k(bt)?(gt="",Ot!=null&&(gt=Ot.replace(j,"$&/")+"/"),wt(bt,ct,gt,"",function(Dt){return Dt})):bt!=null&&(O(bt)&&(bt=C(bt,gt+(bt.key==null||W&&W.key===bt.key?"":(""+bt.key).replace(j,"$&/")+"/")+Ot)),ct.push(bt)),1;Ot=0;var nn=dt===""?".":dt+":";if(k(W))for(var pe=0;pe<W.length;pe++)dt=W[pe],Bt=nn+z(dt,pe),Ot+=wt(dt,ct,gt,Bt,bt);else if(pe=m(W),typeof pe=="function")for(W=pe.call(W),pe=0;!(dt=W.next()).done;)dt=dt.value,Bt=nn+z(dt,pe++),Ot+=wt(dt,ct,gt,Bt,bt);else if(Bt==="object"){if(typeof W.then=="function")return wt(Et(W),ct,gt,dt,bt);throw ct=String(W),Error("Objects are not valid as a React child (found: "+(ct==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ct)+"). If you meant to render a collection of children, use an array instead.")}return Ot}function Q(W,ct,gt){if(W==null)return W;var dt=[],bt=0;return wt(W,dt,"","",function(Bt){return ct.call(gt,Bt,bt++)}),dt}function at(W){if(W._status===-1){var ct=W._result;ct=ct(),ct.then(function(gt){(W._status===0||W._status===-1)&&(W._status=1,W._result=gt)},function(gt){(W._status===0||W._status===-1)&&(W._status=2,W._result=gt)}),W._status===-1&&(W._status=0,W._result=ct)}if(W._status===1)return W._result.default;throw W._result}var mt=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ct=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ct))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function St(){}return Yt.Children={map:Q,forEach:function(W,ct,gt){Q(W,function(){ct.apply(this,arguments)},gt)},count:function(W){var ct=0;return Q(W,function(){ct++}),ct},toArray:function(W){return Q(W,function(ct){return ct})||[]},only:function(W){if(!O(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Yt.Component=E,Yt.Fragment=e,Yt.Profiler=i,Yt.PureComponent=S,Yt.StrictMode=r,Yt.Suspense=l,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(W){return P.H.useMemoCache(W)}},Yt.cache=function(W){return function(){return W.apply(null,arguments)}},Yt.cloneElement=function(W,ct,gt){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var dt=x({},W.props),bt=W.key,Bt=void 0;if(ct!=null)for(Ot in ct.ref!==void 0&&(Bt=void 0),ct.key!==void 0&&(bt=""+ct.key),ct)!H.call(ct,Ot)||Ot==="key"||Ot==="__self"||Ot==="__source"||Ot==="ref"&&ct.ref===void 0||(dt[Ot]=ct[Ot]);var Ot=arguments.length-2;if(Ot===1)dt.children=gt;else if(1<Ot){for(var nn=Array(Ot),pe=0;pe<Ot;pe++)nn[pe]=arguments[pe+2];dt.children=nn}return M(W.type,bt,void 0,void 0,Bt,dt)},Yt.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:s,_context:W},W},Yt.createElement=function(W,ct,gt){var dt,bt={},Bt=null;if(ct!=null)for(dt in ct.key!==void 0&&(Bt=""+ct.key),ct)H.call(ct,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(bt[dt]=ct[dt]);var Ot=arguments.length-2;if(Ot===1)bt.children=gt;else if(1<Ot){for(var nn=Array(Ot),pe=0;pe<Ot;pe++)nn[pe]=arguments[pe+2];bt.children=nn}if(W&&W.defaultProps)for(dt in Ot=W.defaultProps,Ot)bt[dt]===void 0&&(bt[dt]=Ot[dt]);return M(W,Bt,void 0,void 0,null,bt)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(W){return{$$typeof:o,render:W}},Yt.isValidElement=O,Yt.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:at}},Yt.memo=function(W,ct){return{$$typeof:h,type:W,compare:ct===void 0?null:ct}},Yt.startTransition=function(W){var ct=P.T,gt={};P.T=gt;try{var dt=W(),bt=P.S;bt!==null&&bt(gt,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(St,mt)}catch(Bt){mt(Bt)}finally{P.T=ct}},Yt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Yt.use=function(W){return P.H.use(W)},Yt.useActionState=function(W,ct,gt){return P.H.useActionState(W,ct,gt)},Yt.useCallback=function(W,ct){return P.H.useCallback(W,ct)},Yt.useContext=function(W){return P.H.useContext(W)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(W,ct){return P.H.useDeferredValue(W,ct)},Yt.useEffect=function(W,ct,gt){var dt=P.H;if(typeof gt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return dt.useEffect(W,ct)},Yt.useId=function(){return P.H.useId()},Yt.useImperativeHandle=function(W,ct,gt){return P.H.useImperativeHandle(W,ct,gt)},Yt.useInsertionEffect=function(W,ct){return P.H.useInsertionEffect(W,ct)},Yt.useLayoutEffect=function(W,ct){return P.H.useLayoutEffect(W,ct)},Yt.useMemo=function(W,ct){return P.H.useMemo(W,ct)},Yt.useOptimistic=function(W,ct){return P.H.useOptimistic(W,ct)},Yt.useReducer=function(W,ct,gt){return P.H.useReducer(W,ct,gt)},Yt.useRef=function(W){return P.H.useRef(W)},Yt.useState=function(W){return P.H.useState(W)},Yt.useSyncExternalStore=function(W,ct,gt){return P.H.useSyncExternalStore(W,ct,gt)},Yt.useTransition=function(){return P.H.useTransition()},Yt.version="19.1.0",Yt}var PS;function $2(){return PS||(PS=1,a_.exports=jk()),a_.exports}var it=$2();const Q2=Bk(it);var o_={exports:{}},Gf={},c_={exports:{}},l_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function zk(){return NS||(NS=1,function(n){function t(Q,at){var mt=Q.length;Q.push(at);t:for(;0<mt;){var St=mt-1>>>1,W=Q[St];if(0<i(W,at))Q[St]=at,Q[mt]=W,mt=St;else break t}}function e(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var at=Q[0],mt=Q.pop();if(mt!==at){Q[0]=mt;t:for(var St=0,W=Q.length,ct=W>>>1;St<ct;){var gt=2*(St+1)-1,dt=Q[gt],bt=gt+1,Bt=Q[bt];if(0>i(dt,mt))bt<W&&0>i(Bt,dt)?(Q[St]=Bt,Q[bt]=mt,St=bt):(Q[St]=dt,Q[gt]=mt,St=gt);else if(bt<W&&0>i(Bt,mt))Q[St]=Bt,Q[bt]=mt,St=bt;else break t}}return at}function i(Q,at){var mt=Q.sortIndex-at.sortIndex;return mt!==0?mt:Q.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],h=[],d=1,g=null,m=3,y=!1,x=!1,b=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(Q){for(var at=e(h);at!==null;){if(at.callback===null)r(h);else if(at.startTime<=Q)r(h),at.sortIndex=at.expirationTime,t(l,at);else break;at=e(h)}}function P(Q){if(b=!1,k(Q),!x)if(e(l)!==null)x=!0,H||(H=!0,z());else{var at=e(h);at!==null&&wt(P,at.startTime-Q)}}var H=!1,M=-1,C=5,O=-1;function L(){return E?!0:!(n.unstable_now()-O<C)}function j(){if(E=!1,H){var Q=n.unstable_now();O=Q;var at=!0;try{t:{x=!1,b&&(b=!1,S(M),M=-1),y=!0;var mt=m;try{e:{for(k(Q),g=e(l);g!==null&&!(g.expirationTime>Q&&L());){var St=g.callback;if(typeof St=="function"){g.callback=null,m=g.priorityLevel;var W=St(g.expirationTime<=Q);if(Q=n.unstable_now(),typeof W=="function"){g.callback=W,k(Q),at=!0;break e}g===e(l)&&r(l),k(Q)}else r(l);g=e(l)}if(g!==null)at=!0;else{var ct=e(h);ct!==null&&wt(P,ct.startTime-Q),at=!1}}break t}finally{g=null,m=mt,y=!1}at=void 0}}finally{at?z():H=!1}}}var z;if(typeof R=="function")z=function(){R(j)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Et=U.port2;U.port1.onmessage=j,z=function(){Et.postMessage(null)}}else z=function(){T(j,0)};function wt(Q,at){M=T(function(){Q(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(Q){switch(m){case 1:case 2:case 3:var at=3;break;default:at=m}var mt=m;m=at;try{return Q()}finally{m=mt}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(Q,at){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var mt=m;m=Q;try{return at()}finally{m=mt}},n.unstable_scheduleCallback=function(Q,at,mt){var St=n.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?St+mt:St):mt=St,Q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=mt+W,Q={id:d++,callback:at,priorityLevel:Q,startTime:mt,expirationTime:W,sortIndex:-1},mt>St?(Q.sortIndex=mt,t(h,Q),e(l)===null&&Q===e(h)&&(b?(S(M),M=-1):b=!0,wt(P,mt-St))):(Q.sortIndex=W,t(l,Q),x||y||(x=!0,H||(H=!0,z()))),Q},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Q){var at=m;return function(){var mt=m;m=at;try{return Q.apply(this,arguments)}finally{m=mt}}}}(l_)),l_}var kS;function Hk(){return kS||(kS=1,c_.exports=zk()),c_.exports}var u_={exports:{}},gr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS;function Gk(){if(LS)return gr;LS=1;var n=$2();function t(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:l,containerInfo:h,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,h){if(l==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return gr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gr.createPortal=function(l,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(l,h,null,d)},gr.flushSync=function(l){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=h,r.p=d,r.d.f()}},gr.preconnect=function(l,h){typeof l=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(l,h))},gr.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},gr.preinit=function(l,h){if(typeof l=="string"&&h&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(l,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:y}):d==="script"&&r.d.X(l,{crossOrigin:g,integrity:m,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},gr.preinitModule=function(l,h){if(typeof l=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=o(h.as,h.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(l)},gr.preload=function(l,h){if(typeof l=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=o(d,h.crossOrigin);r.d.L(l,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},gr.preloadModule=function(l,h){if(typeof l=="string")if(h){var d=o(h.as,h.crossOrigin);r.d.m(l,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(l)},gr.requestFormReset=function(l){r.d.r(l)},gr.unstable_batchedUpdates=function(l,h){return l(h)},gr.useFormState=function(l,h,d){return a.H.useFormState(l,h,d)},gr.useFormStatus=function(){return a.H.useHostTransitionStatus()},gr.version="19.1.0",gr}var VS;function Wk(){if(VS)return u_.exports;VS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),u_.exports=Gk(),u_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS;function qk(){if(BS)return Gf;BS=1;var n=Hk(),t=$2(),e=Wk();function r(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var u=c,f=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(f=u.return),c=u.return;while(c)}return u.tag===3?f:null}function a(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function o(c){if(s(c)!==c)throw Error(r(188))}function l(c){var u=c.alternate;if(!u){if(u=s(c),u===null)throw Error(r(188));return u!==c?null:c}for(var f=c,p=u;;){var _=f.return;if(_===null)break;var w=_.alternate;if(w===null){if(p=_.return,p!==null){f=p;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===f)return o(_),c;if(w===p)return o(_),u;w=w.sibling}throw Error(r(188))}if(f.return!==p.return)f=_,p=w;else{for(var D=!1,N=_.child;N;){if(N===f){D=!0,f=_,p=w;break}if(N===p){D=!0,p=_,f=w;break}N=N.sibling}if(!D){for(N=w.child;N;){if(N===f){D=!0,f=w,p=_;break}if(N===p){D=!0,p=w,f=_;break}N=N.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?c:u}function h(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(u=h(c),u!==null)return u;c=c.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),R=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function z(c){return c===null||typeof c!="object"?null:(c=j&&c[j]||c["@@iterator"],typeof c=="function"?c:null)}var U=Symbol.for("react.client.reference");function Et(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===U?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case x:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case P:return"Suspense";case H:return"SuspenseList";case O:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case y:return"Portal";case R:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case k:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case M:return u=c.displayName||null,u!==null?u:Et(c.type)||"Memo";case C:u=c._payload,c=c._init;try{return Et(c(u))}catch{}}return null}var wt=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},St=[],W=-1;function ct(c){return{current:c}}function gt(c){0>W||(c.current=St[W],St[W]=null,W--)}function dt(c,u){W++,St[W]=c.current,c.current=u}var bt=ct(null),Bt=ct(null),Ot=ct(null),nn=ct(null);function pe(c,u){switch(dt(Ot,u),dt(Bt,c),dt(bt,null),u.nodeType){case 9:case 11:c=(c=u.documentElement)&&(c=c.namespaceURI)?iS(c):0;break;default:if(c=u.tagName,u=u.namespaceURI)u=iS(u),c=sS(u,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}gt(bt),dt(bt,c)}function Dt(){gt(bt),gt(Bt),gt(Ot)}function Lt(c){c.memoizedState!==null&&dt(nn,c);var u=bt.current,f=sS(u,c.type);u!==f&&(dt(Bt,c),dt(bt,f))}function Ut(c){Bt.current===c&&(gt(bt),gt(Bt)),nn.current===c&&(gt(nn),Bf._currentValue=mt)}var pt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,Xt=n.unstable_cancelCallback,Jt=n.unstable_shouldYield,Tr=n.unstable_requestPaint,rn=n.unstable_now,Ni=n.unstable_getCurrentPriorityLevel,Xr=n.unstable_ImmediatePriority,ki=n.unstable_UserBlockingPriority,Ko=n.unstable_NormalPriority,ay=n.unstable_LowPriority,Ol=n.unstable_IdlePriority,Lh=n.log,Y0=n.unstable_setDisableYieldValue,sn=null,Ae=null;function Kr(c){if(typeof Lh=="function"&&Y0(c),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(sn,c)}catch{}}var fr=Math.clz32?Math.clz32:$o,X0=Math.log,oy=Math.LN2;function $o(c){return c>>>=0,c===0?32:31-(X0(c)/oy|0)|0}var Qo=256,Zo=4194304;function Li(c){var u=c&42;if(u!==0)return u;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Ml(c,u,f){var p=c.pendingLanes;if(p===0)return 0;var _=0,w=c.suspendedLanes,D=c.pingedLanes;c=c.warmLanes;var N=p&134217727;return N!==0?(p=N&~w,p!==0?_=Li(p):(D&=N,D!==0?_=Li(D):f||(f=N&~c,f!==0&&(_=Li(f))))):(N=p&~w,N!==0?_=Li(N):D!==0?_=Li(D):f||(f=p&~c,f!==0&&(_=Li(f)))),_===0?0:u!==0&&u!==_&&(u&w)===0&&(w=_&-_,f=u&-u,w>=f||w===32&&(f&4194048)!==0)?u:_}function Jo(c,u){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&u)===0}function Vh(c,u){switch(c){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bh(){var c=Qo;return Qo<<=1,(Qo&4194048)===0&&(Qo=256),c}function Fh(){var c=Zo;return Zo<<=1,(Zo&62914560)===0&&(Zo=4194304),c}function Us(c){for(var u=[],f=0;31>f;f++)u.push(c);return u}function js(c,u){c.pendingLanes|=u,u!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Uh(c,u,f,p,_,w){var D=c.pendingLanes;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=f,c.entangledLanes&=f,c.errorRecoveryDisabledLanes&=f,c.shellSuspendCounter=0;var N=c.entanglements,G=c.expirationTimes,Z=c.hiddenUpdates;for(f=D&~f;0<f;){var ot=31-fr(f),ht=1<<ot;N[ot]=0,G[ot]=-1;var tt=Z[ot];if(tt!==null)for(Z[ot]=null,ot=0;ot<tt.length;ot++){var et=tt[ot];et!==null&&(et.lane&=-536870913)}f&=~ht}p!==0&&ts(c,p,0),w!==0&&_===0&&c.tag!==0&&(c.suspendedLanes|=w&~(D&~u))}function ts(c,u,f){c.pendingLanes|=u,c.suspendedLanes&=~u;var p=31-fr(u);c.entangledLanes|=u,c.entanglements[p]=c.entanglements[p]|1073741824|f&4194090}function jh(c,u){var f=c.entangledLanes|=u;for(c=c.entanglements;f;){var p=31-fr(f),_=1<<p;_&u|c[p]&u&&(c[p]|=u),f&=~_}}function Da(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Pl(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Ra(){var c=at.p;return c!==0?c:(c=window.event,c===void 0?32:AS(c.type))}function K0(c,u){var f=at.p;try{return at.p=c,u()}finally{at.p=f}}var Ye=Math.random().toString(36).slice(2),Rn="__reactFiber$"+Ye,bn="__reactProps$"+Ye,hi="__reactContainer$"+Ye,zh="__reactEvents$"+Ye,cy="__reactListeners$"+Ye,Oa="__reactHandles$"+Ye,$0="__reactResources$"+Ye,tc="__reactMarker$"+Ye;function Ma(c){delete c[Rn],delete c[bn],delete c[zh],delete c[cy],delete c[Oa]}function zs(c){var u=c[Rn];if(u)return u;for(var f=c.parentNode;f;){if(u=f[hi]||f[Rn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(c=lS(c);c!==null;){if(f=c[Rn])return f;c=lS(c)}return u}c=f,f=c.parentNode}return null}function es(c){if(c=c[Rn]||c[hi]){var u=c.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return c}return null}function ns(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c.stateNode;throw Error(r(33))}function Sr(c){var u=c[$0];return u||(u=c[$0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function dn(c){c[tc]=!0}var Hh=new Set,Nl={};function Vi(c,u){Hs(c,u),Hs(c+"Capture",u)}function Hs(c,u){for(Nl[c]=u,c=0;c<u.length;c++)Hh.add(u[c])}var Q0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Z0={},ec={};function J0(c){return pt.call(ec,c)?!0:pt.call(Z0,c)?!1:Q0.test(c)?ec[c]=!0:(Z0[c]=!0,!1)}function Pa(c,u,f){if(J0(u))if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":c.removeAttribute(u);return;case"boolean":var p=u.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){c.removeAttribute(u);return}}c.setAttribute(u,""+f)}}function rs(c,u,f){if(f===null)c.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(u);return}c.setAttribute(u,""+f)}}function nr(c,u,f,p){if(p===null)c.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttributeNS(u,f,""+p)}}var nc,tg;function Gs(c){if(nc===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);nc=u&&u[1]||"",tg=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nc+c+tg}var kl=!1;function Ll(c,u){if(!c||kl)return"";kl=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(u){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(et){var tt=et}Reflect.construct(c,[],ht)}else{try{ht.call()}catch(et){tt=et}c.call(ht.prototype)}}else{try{throw Error()}catch(et){tt=et}(ht=c())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(et){if(et&&tt&&typeof et.stack=="string")return[et.stack,tt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),D=w[0],N=w[1];if(D&&N){var G=D.split(`
`),Z=N.split(`
`);for(_=p=0;p<G.length&&!G[p].includes("DetermineComponentFrameRoot");)p++;for(;_<Z.length&&!Z[_].includes("DetermineComponentFrameRoot");)_++;if(p===G.length||_===Z.length)for(p=G.length-1,_=Z.length-1;1<=p&&0<=_&&G[p]!==Z[_];)_--;for(;1<=p&&0<=_;p--,_--)if(G[p]!==Z[_]){if(p!==1||_!==1)do if(p--,_--,0>_||G[p]!==Z[_]){var ot=`
`+G[p].replace(" at new "," at ");return c.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",c.displayName)),ot}while(1<=p&&0<=_);break}}}finally{kl=!1,Error.prepareStackTrace=f}return(f=c?c.displayName||c.name:"")?Gs(f):""}function Gh(c){switch(c.tag){case 26:case 27:case 5:return Gs(c.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 15:return Ll(c.type,!1);case 11:return Ll(c.type.render,!1);case 1:return Ll(c.type,!0);case 31:return Gs("Activity");default:return""}}function Vl(c){try{var u="";do u+=Gh(c),c=c.return;while(c);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Ir(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Wh(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ly(c){var u=Wh(c)?"checked":"value",f=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),p=""+c[u];if(!c.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,w=f.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return _.call(this)},set:function(D){p=""+D,w.call(this,D)}}),Object.defineProperty(c,u,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Bl(c){c._valueTracker||(c._valueTracker=ly(c))}function qh(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var f=u.getValue(),p="";return c&&(p=Wh(c)?c.checked?"true":"false":c.value),c=p,c!==f?(u.setValue(c),!0):!1}function rc(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var uy=/[\n"\\]/g;function En(c){return c.replace(uy,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function $r(c,u,f,p,_,w,D,N){c.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?c.type=D:c.removeAttribute("type"),u!=null?D==="number"?(u===0&&c.value===""||c.value!=u)&&(c.value=""+Ir(u)):c.value!==""+Ir(u)&&(c.value=""+Ir(u)):D!=="submit"&&D!=="reset"||c.removeAttribute("value"),u!=null?Na(c,D,Ir(u)):f!=null?Na(c,D,Ir(f)):p!=null&&c.removeAttribute("value"),_==null&&w!=null&&(c.defaultChecked=!!w),_!=null&&(c.checked=_&&typeof _!="function"&&typeof _!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?c.name=""+Ir(N):c.removeAttribute("name")}function ic(c,u,f,p,_,w,D,N){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(c.type=w),u!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||u!=null))return;f=f!=null?""+Ir(f):"",u=u!=null?""+Ir(u):f,N||u===c.value||(c.value=u),c.defaultValue=u}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,c.checked=N?c.checked:!!p,c.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(c.name=D)}function Na(c,u,f){u==="number"&&rc(c.ownerDocument)===c||c.defaultValue===""+f||(c.defaultValue=""+f)}function Ws(c,u,f,p){if(c=c.options,u){u={};for(var _=0;_<f.length;_++)u["$"+f[_]]=!0;for(f=0;f<c.length;f++)_=u.hasOwnProperty("$"+c[f].value),c[f].selected!==_&&(c[f].selected=_),_&&p&&(c[f].defaultSelected=!0)}else{for(f=""+Ir(f),u=null,_=0;_<c.length;_++){if(c[_].value===f){c[_].selected=!0,p&&(c[_].defaultSelected=!0);return}u!==null||c[_].disabled||(u=c[_])}u!==null&&(u.selected=!0)}}function Pe(c,u,f){if(u!=null&&(u=""+Ir(u),u!==c.value&&(c.value=u),f==null)){c.defaultValue!==u&&(c.defaultValue=u);return}c.defaultValue=f!=null?""+Ir(f):""}function sc(c,u,f,p){if(u==null){if(p!=null){if(f!=null)throw Error(r(92));if(wt(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),u=f}f=Ir(u),c.defaultValue=f,p=c.textContent,p===f&&p!==""&&p!==null&&(c.value=p)}function fi(c,u){if(u){var f=c.firstChild;if(f&&f===c.lastChild&&f.nodeType===3){f.nodeValue=u;return}}c.textContent=u}var ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eg(c,u,f){var p=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?c.setProperty(u,""):u==="float"?c.cssFloat="":c[u]="":p?c.setProperty(u,f):typeof f!="number"||f===0||ac.has(u)?u==="float"?c.cssFloat=f:c[u]=(""+f).trim():c[u]=f+"px"}function Yh(c,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(c=c.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||u!=null&&u.hasOwnProperty(p)||(p.indexOf("--")===0?c.setProperty(p,""):p==="float"?c.cssFloat="":c[p]="");for(var _ in u)p=u[_],u.hasOwnProperty(_)&&f[_]!==p&&eg(c,_,p)}else for(var w in u)u.hasOwnProperty(w)&&eg(c,w,u[w])}function Xh(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fl(c){return fy.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var qs=null;function di(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ys=null,Xs=null;function Kh(c){var u=es(c);if(u&&(c=u.stateNode)){var f=c[bn]||null;t:switch(c=u.stateNode,u.type){case"input":if($r(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=c;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+En(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var p=f[u];if(p!==c&&p.form===c.form){var _=p[bn]||null;if(!_)throw Error(r(90));$r(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<f.length;u++)p=f[u],p.form===c.form&&qh(p)}break t;case"textarea":Pe(c,f.value,f.defaultValue);break t;case"select":u=f.value,u!=null&&Ws(c,!!f.multiple,u,!1)}}}var is=!1;function ng(c,u,f){if(is)return c(u,f);is=!0;try{var p=c(u);return p}finally{if(is=!1,(Ys!==null||Xs!==null)&&(Kg(),Ys&&(u=Ys,c=Xs,Xs=Ys=null,Kh(u),c)))for(u=0;u<c.length;u++)Kh(c[u])}}function oc(c,u){var f=c.stateNode;if(f===null)return null;var p=f[bn]||null;if(p===null)return null;f=p[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(c=c.type,p=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!p;break t;default:c=!1}if(c)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gi=!1;if(Bi)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){gi=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{gi=!1}var ss=null,ka=null,Ks=null;function $h(){if(Ks)return Ks;var c,u=ka,f=u.length,p,_="value"in ss?ss.value:ss.textContent,w=_.length;for(c=0;c<f&&u[c]===_[c];c++);var D=f-c;for(p=1;p<=D&&u[f-p]===_[w-p];p++);return Ks=_.slice(c,1<p?1-p:void 0)}function as(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function os(){return!0}function Qh(){return!1}function Gn(c){function u(f,p,_,w,D){this._reactName=f,this._targetInst=_,this.type=p,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var N in c)c.hasOwnProperty(N)&&(f=c[N],this[N]=f?f(w):w[N]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?os:Qh,this.isPropagationStopped=Qh,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),u}var xe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=Gn(xe),lc=d({},xe,{view:0,detail:0}),rg=Gn(lc),jl,zl,cs,uc=d({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==cs&&(cs&&c.type==="mousemove"?(jl=c.screenX-cs.screenX,zl=c.screenY-cs.screenY):zl=jl=0,cs=c),jl)},movementY:function(c){return"movementY"in c?c.movementY:zl}}),pi=Gn(uc),ig=d({},uc,{dataTransfer:0}),dy=Gn(ig),hc=d({},lc,{relatedTarget:0}),Hl=Gn(hc),Zh=d({},xe,{animationName:0,elapsedTime:0,pseudoElement:0}),Gl=Gn(Zh),sg=d({},xe,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Wl=Gn(sg),gy=d({},xe,{data:0}),Jh=Gn(gy),fc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},og={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=og[c])?!!u[c]:!1}function dc(){return tf}var cg=d({},lc,{key:function(c){if(c.key){var u=fc[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=as(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ag[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(c){return c.type==="keypress"?as(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?as(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ql=Gn(cg),lg=d({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ef=Gn(lg),$s=d({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),ug=Gn($s),hg=d({},xe,{propertyName:0,elapsedTime:0,pseudoElement:0}),fg=Gn(hg),dg=d({},uc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Yl=Gn(dg),Cr=d({},xe,{newState:0,oldState:0}),gg=Gn(Cr),pg=[9,13,27,32],ls=Bi&&"CompositionEvent"in window,v=null;Bi&&"documentMode"in document&&(v=document.documentMode);var A=Bi&&"TextEvent"in window&&!v,I=Bi&&(!ls||v&&8<v&&11>=v),B=" ",X=!1;function nt(c,u){switch(c){case"keyup":return pg.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ae=!1;function On(c,u){switch(c){case"compositionend":return yt(u);case"keypress":return u.which!==32?null:(X=!0,B);case"textInput":return c=u.data,c===B&&X?null:c;default:return null}}function oe(c,u){if(ae)return c==="compositionend"||!ls&&nt(c,u)?(c=$h(),Ks=ka=ss=null,ae=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return I&&u.locale!=="ko"?null:u.data;default:return null}}var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!Wn[c.type]:u==="textarea"}function Qs(c,u,f,p){Ys?Xs?Xs.push(p):Xs=[p]:Ys=p,u=ep(u,"onChange"),0<u.length&&(f=new Ul("onChange","change",null,f,p),c.push({event:f,listeners:u}))}var rr=null,us=null;function nf(c){JT(c,0)}function mg(c){var u=ns(c);if(qh(u))return c}function xE(c,u){if(c==="change")return u}var wE=!1;if(Bi){var py;if(Bi){var my="oninput"in document;if(!my){var bE=document.createElement("div");bE.setAttribute("oninput","return;"),my=typeof bE.oninput=="function"}py=my}else py=!1;wE=py&&(!document.documentMode||9<document.documentMode)}function EE(){rr&&(rr.detachEvent("onpropertychange",AE),us=rr=null)}function AE(c){if(c.propertyName==="value"&&mg(us)){var u=[];Qs(u,us,c,di(c)),ng(nf,u)}}function f5(c,u,f){c==="focusin"?(EE(),rr=u,us=f,rr.attachEvent("onpropertychange",AE)):c==="focusout"&&EE()}function d5(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return mg(us)}function g5(c,u){if(c==="click")return mg(u)}function p5(c,u){if(c==="input"||c==="change")return mg(u)}function m5(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var Qr=typeof Object.is=="function"?Object.is:m5;function rf(c,u){if(Qr(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var f=Object.keys(c),p=Object.keys(u);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var _=f[p];if(!pt.call(u,_)||!Qr(c[_],u[_]))return!1}return!0}function TE(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function SE(c,u){var f=TE(c);c=0;for(var p;f;){if(f.nodeType===3){if(p=c+f.textContent.length,c<=u&&p>=u)return{node:f,offset:u-c};c=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=TE(f)}}function IE(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?IE(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function CE(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var u=rc(c.document);u instanceof c.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)c=u.contentWindow;else break;u=rc(c.document)}return u}function yy(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}var y5=Bi&&"documentMode"in document&&11>=document.documentMode,Xl=null,vy=null,sf=null,_y=!1;function DE(c,u,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;_y||Xl==null||Xl!==rc(p)||(p=Xl,"selectionStart"in p&&yy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),sf&&rf(sf,p)||(sf=p,p=ep(vy,"onSelect"),0<p.length&&(u=new Ul("onSelect","select",null,u,f),c.push({event:u,listeners:p}),u.target=Xl)))}function gc(c,u){var f={};return f[c.toLowerCase()]=u.toLowerCase(),f["Webkit"+c]="webkit"+u,f["Moz"+c]="moz"+u,f}var Kl={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionrun:gc("Transition","TransitionRun"),transitionstart:gc("Transition","TransitionStart"),transitioncancel:gc("Transition","TransitionCancel"),transitionend:gc("Transition","TransitionEnd")},xy={},RE={};Bi&&(RE=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function pc(c){if(xy[c])return xy[c];if(!Kl[c])return c;var u=Kl[c],f;for(f in u)if(u.hasOwnProperty(f)&&f in RE)return xy[c]=u[f];return c}var OE=pc("animationend"),ME=pc("animationiteration"),PE=pc("animationstart"),v5=pc("transitionrun"),_5=pc("transitionstart"),x5=pc("transitioncancel"),NE=pc("transitionend"),kE=new Map,wy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wy.push("scrollEnd");function Fi(c,u){kE.set(c,u),Vi(u,[c])}var LE=new WeakMap;function mi(c,u){if(typeof c=="object"&&c!==null){var f=LE.get(c);return f!==void 0?f:(u={value:c,source:u,stack:Vl(u)},LE.set(c,u),u)}return{value:c,source:u,stack:Vl(u)}}var yi=[],$l=0,by=0;function yg(){for(var c=$l,u=by=$l=0;u<c;){var f=yi[u];yi[u++]=null;var p=yi[u];yi[u++]=null;var _=yi[u];yi[u++]=null;var w=yi[u];if(yi[u++]=null,p!==null&&_!==null){var D=p.pending;D===null?_.next=_:(_.next=D.next,D.next=_),p.pending=_}w!==0&&VE(f,_,w)}}function vg(c,u,f,p){yi[$l++]=c,yi[$l++]=u,yi[$l++]=f,yi[$l++]=p,by|=p,c.lanes|=p,c=c.alternate,c!==null&&(c.lanes|=p)}function Ey(c,u,f,p){return vg(c,u,f,p),_g(c)}function Ql(c,u){return vg(c,null,null,u),_g(c)}function VE(c,u,f){c.lanes|=f;var p=c.alternate;p!==null&&(p.lanes|=f);for(var _=!1,w=c.return;w!==null;)w.childLanes|=f,p=w.alternate,p!==null&&(p.childLanes|=f),w.tag===22&&(c=w.stateNode,c===null||c._visibility&1||(_=!0)),c=w,w=w.return;return c.tag===3?(w=c.stateNode,_&&u!==null&&(_=31-fr(f),c=w.hiddenUpdates,p=c[_],p===null?c[_]=[u]:p.push(u),u.lane=f|536870912),w):null}function _g(c){if(50<Rf)throw Rf=0,Dv=null,Error(r(185));for(var u=c.return;u!==null;)c=u,u=c.return;return c.tag===3?c.stateNode:null}var Zl={};function w5(c,u,f,p){this.tag=c,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(c,u,f,p){return new w5(c,u,f,p)}function Ay(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Zs(c,u){var f=c.alternate;return f===null?(f=Zr(c.tag,u,c.key,c.mode),f.elementType=c.elementType,f.type=c.type,f.stateNode=c.stateNode,f.alternate=c,c.alternate=f):(f.pendingProps=u,f.type=c.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=c.flags&65011712,f.childLanes=c.childLanes,f.lanes=c.lanes,f.child=c.child,f.memoizedProps=c.memoizedProps,f.memoizedState=c.memoizedState,f.updateQueue=c.updateQueue,u=c.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=c.sibling,f.index=c.index,f.ref=c.ref,f.refCleanup=c.refCleanup,f}function BE(c,u){c.flags&=65011714;var f=c.alternate;return f===null?(c.childLanes=0,c.lanes=u,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,u=f.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),c}function xg(c,u,f,p,_,w){var D=0;if(p=c,typeof c=="function")Ay(c)&&(D=1);else if(typeof c=="string")D=Ek(c,f,bt.current)?26:c==="html"||c==="head"||c==="body"?27:5;else t:switch(c){case O:return c=Zr(31,f,u,_),c.elementType=O,c.lanes=w,c;case x:return mc(f.children,_,w,u);case b:D=8,_|=24;break;case E:return c=Zr(12,f,u,_|2),c.elementType=E,c.lanes=w,c;case P:return c=Zr(13,f,u,_),c.elementType=P,c.lanes=w,c;case H:return c=Zr(19,f,u,_),c.elementType=H,c.lanes=w,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case T:case R:D=10;break t;case S:D=9;break t;case k:D=11;break t;case M:D=14;break t;case C:D=16,p=null;break t}D=29,f=Error(r(130,c===null?"null":typeof c,"")),p=null}return u=Zr(D,f,u,_),u.elementType=c,u.type=p,u.lanes=w,u}function mc(c,u,f,p){return c=Zr(7,c,p,u),c.lanes=f,c}function Ty(c,u,f){return c=Zr(6,c,null,u),c.lanes=f,c}function Sy(c,u,f){return u=Zr(4,c.children!==null?c.children:[],c.key,u),u.lanes=f,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}var Jl=[],tu=0,wg=null,bg=0,vi=[],_i=0,yc=null,Js=1,ta="";function vc(c,u){Jl[tu++]=bg,Jl[tu++]=wg,wg=c,bg=u}function FE(c,u,f){vi[_i++]=Js,vi[_i++]=ta,vi[_i++]=yc,yc=c;var p=Js;c=ta;var _=32-fr(p)-1;p&=~(1<<_),f+=1;var w=32-fr(u)+_;if(30<w){var D=_-_%5;w=(p&(1<<D)-1).toString(32),p>>=D,_-=D,Js=1<<32-fr(u)+_|f<<_|p,ta=w+c}else Js=1<<w|f<<_|p,ta=c}function Iy(c){c.return!==null&&(vc(c,1),FE(c,1,0))}function Cy(c){for(;c===wg;)wg=Jl[--tu],Jl[tu]=null,bg=Jl[--tu],Jl[tu]=null;for(;c===yc;)yc=vi[--_i],vi[_i]=null,ta=vi[--_i],vi[_i]=null,Js=vi[--_i],vi[_i]=null}var Dr=null,an=null,me=!1,_c=null,hs=!1,Dy=Error(r(519));function xc(c){var u=Error(r(418,""));throw cf(mi(u,c)),Dy}function UE(c){var u=c.stateNode,f=c.type,p=c.memoizedProps;switch(u[Rn]=c,u[bn]=p,f){case"dialog":re("cancel",u),re("close",u);break;case"iframe":case"object":case"embed":re("load",u);break;case"video":case"audio":for(f=0;f<Mf.length;f++)re(Mf[f],u);break;case"source":re("error",u);break;case"img":case"image":case"link":re("error",u),re("load",u);break;case"details":re("toggle",u);break;case"input":re("invalid",u),ic(u,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Bl(u);break;case"select":re("invalid",u);break;case"textarea":re("invalid",u),sc(u,p.value,p.defaultValue,p.children),Bl(u)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||p.suppressHydrationWarning===!0||rS(u.textContent,f)?(p.popover!=null&&(re("beforetoggle",u),re("toggle",u)),p.onScroll!=null&&re("scroll",u),p.onScrollEnd!=null&&re("scrollend",u),p.onClick!=null&&(u.onclick=np),u=!0):u=!1,u||xc(c)}function jE(c){for(Dr=c.return;Dr;)switch(Dr.tag){case 5:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Dr=Dr.return}}function af(c){if(c!==Dr)return!1;if(!me)return jE(c),me=!0,!1;var u=c.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=c.type,f=!(f!=="form"&&f!=="button")||Wv(c.type,c.memoizedProps)),f=!f),f&&an&&xc(c),jE(c),u===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));t:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8)if(f=c.data,f==="/$"){if(u===0){an=ji(c.nextSibling);break t}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;c=c.nextSibling}an=null}}else u===27?(u=an,Qa(c.type)?(c=Kv,Kv=null,an=c):an=u):an=Dr?ji(c.stateNode.nextSibling):null;return!0}function of(){an=Dr=null,me=!1}function zE(){var c=_c;return c!==null&&(Vr===null?Vr=c:Vr.push.apply(Vr,c),_c=null),c}function cf(c){_c===null?_c=[c]:_c.push(c)}var Ry=ct(null),wc=null,ea=null;function La(c,u,f){dt(Ry,u._currentValue),u._currentValue=f}function na(c){c._currentValue=Ry.current,gt(Ry)}function Oy(c,u,f){for(;c!==null;){var p=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),c===f)break;c=c.return}}function My(c,u,f,p){var _=c.child;for(_!==null&&(_.return=c);_!==null;){var w=_.dependencies;if(w!==null){var D=_.child;w=w.firstContext;t:for(;w!==null;){var N=w;w=_;for(var G=0;G<u.length;G++)if(N.context===u[G]){w.lanes|=f,N=w.alternate,N!==null&&(N.lanes|=f),Oy(w.return,f,c),p||(D=null);break t}w=N.next}}else if(_.tag===18){if(D=_.return,D===null)throw Error(r(341));D.lanes|=f,w=D.alternate,w!==null&&(w.lanes|=f),Oy(D,f,c),D=null}else D=_.child;if(D!==null)D.return=_;else for(D=_;D!==null;){if(D===c){D=null;break}if(_=D.sibling,_!==null){_.return=D.return,D=_;break}D=D.return}_=D}}function lf(c,u,f,p){c=null;for(var _=u,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var D=_.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var N=_.type;Qr(_.pendingProps.value,D.value)||(c!==null?c.push(N):c=[N])}}else if(_===nn.current){if(D=_.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(c!==null?c.push(Bf):c=[Bf])}_=_.return}c!==null&&My(u,c,f,p),u.flags|=262144}function Eg(c){for(c=c.firstContext;c!==null;){if(!Qr(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function bc(c){wc=c,ea=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function dr(c){return HE(wc,c)}function Ag(c,u){return wc===null&&bc(c),HE(c,u)}function HE(c,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},ea===null){if(c===null)throw Error(r(308));ea=u,c.dependencies={lanes:0,firstContext:u},c.flags|=524288}else ea=ea.next=u;return f}var b5=typeof AbortController<"u"?AbortController:function(){var c=[],u=this.signal={aborted:!1,addEventListener:function(f,p){c.push(p)}};this.abort=function(){u.aborted=!0,c.forEach(function(f){return f()})}},E5=n.unstable_scheduleCallback,A5=n.unstable_NormalPriority,Pn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Py(){return{controller:new b5,data:new Map,refCount:0}}function uf(c){c.refCount--,c.refCount===0&&E5(A5,function(){c.controller.abort()})}var hf=null,Ny=0,eu=0,nu=null;function T5(c,u){if(hf===null){var f=hf=[];Ny=0,eu=Lv(),nu={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Ny++,u.then(GE,GE),u}function GE(){if(--Ny===0&&hf!==null){nu!==null&&(nu.status="fulfilled");var c=hf;hf=null,eu=0,nu=null;for(var u=0;u<c.length;u++)(0,c[u])()}}function S5(c,u){var f=[],p={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return c.then(function(){p.status="fulfilled",p.value=u;for(var _=0;_<f.length;_++)(0,f[_])(u)},function(_){for(p.status="rejected",p.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),p}var WE=Q.S;Q.S=function(c,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&T5(c,u),WE!==null&&WE(c,u)};var Ec=ct(null);function ky(){var c=Ec.current;return c!==null?c:je.pooledCache}function Tg(c,u){u===null?dt(Ec,Ec.current):dt(Ec,u.pool)}function qE(){var c=ky();return c===null?null:{parent:Pn._currentValue,pool:c}}var ff=Error(r(460)),YE=Error(r(474)),Sg=Error(r(542)),Ly={then:function(){}};function XE(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Ig(){}function KE(c,u,f){switch(f=c[f],f===void 0?c.push(u):f!==u&&(u.then(Ig,Ig),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,QE(c),c;default:if(typeof u.status=="string")u.then(Ig,Ig);else{if(c=je,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=u,c.status="pending",c.then(function(p){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=p}},function(p){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=p}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,QE(c),c}throw df=u,ff}}var df=null;function $E(){if(df===null)throw Error(r(459));var c=df;return df=null,c}function QE(c){if(c===ff||c===Sg)throw Error(r(483))}var Va=!1;function Vy(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function By(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ba(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Fa(c,u,f){var p=c.updateQueue;if(p===null)return null;if(p=p.shared,(Te&2)!==0){var _=p.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),p.pending=u,u=_g(c),VE(c,null,f),u}return vg(c,p,u,f),_g(c)}function gf(c,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,jh(c,f)}}function Fy(c,u){var f=c.updateQueue,p=c.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var _=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?_=w=D:w=w.next=D,f=f.next}while(f!==null);w===null?_=w=u:w=w.next=u}else _=w=u;f={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},c.updateQueue=f;return}c=f.lastBaseUpdate,c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=u}var Uy=!1;function pf(){if(Uy){var c=nu;if(c!==null)throw c}}function mf(c,u,f,p){Uy=!1;var _=c.updateQueue;Va=!1;var w=_.firstBaseUpdate,D=_.lastBaseUpdate,N=_.shared.pending;if(N!==null){_.shared.pending=null;var G=N,Z=G.next;G.next=null,D===null?w=Z:D.next=Z,D=G;var ot=c.alternate;ot!==null&&(ot=ot.updateQueue,N=ot.lastBaseUpdate,N!==D&&(N===null?ot.firstBaseUpdate=Z:N.next=Z,ot.lastBaseUpdate=G))}if(w!==null){var ht=_.baseState;D=0,ot=Z=G=null,N=w;do{var tt=N.lane&-536870913,et=tt!==N.lane;if(et?(ce&tt)===tt:(p&tt)===tt){tt!==0&&tt===eu&&(Uy=!0),ot!==null&&(ot=ot.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});t:{var zt=c,Vt=N;tt=u;var Le=f;switch(Vt.tag){case 1:if(zt=Vt.payload,typeof zt=="function"){ht=zt.call(Le,ht,tt);break t}ht=zt;break t;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Vt.payload,tt=typeof zt=="function"?zt.call(Le,ht,tt):zt,tt==null)break t;ht=d({},ht,tt);break t;case 2:Va=!0}}tt=N.callback,tt!==null&&(c.flags|=64,et&&(c.flags|=8192),et=_.callbacks,et===null?_.callbacks=[tt]:et.push(tt))}else et={lane:tt,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ot===null?(Z=ot=et,G=ht):ot=ot.next=et,D|=tt;if(N=N.next,N===null){if(N=_.shared.pending,N===null)break;et=N,N=et.next,et.next=null,_.lastBaseUpdate=et,_.shared.pending=null}}while(!0);ot===null&&(G=ht),_.baseState=G,_.firstBaseUpdate=Z,_.lastBaseUpdate=ot,w===null&&(_.shared.lanes=0),Ya|=D,c.lanes=D,c.memoizedState=ht}}function ZE(c,u){if(typeof c!="function")throw Error(r(191,c));c.call(u)}function JE(c,u){var f=c.callbacks;if(f!==null)for(c.callbacks=null,c=0;c<f.length;c++)ZE(f[c],u)}var ru=ct(null),Cg=ct(0);function tA(c,u){c=la,dt(Cg,c),dt(ru,u),la=c|u.baseLanes}function jy(){dt(Cg,la),dt(ru,ru.current)}function zy(){la=Cg.current,gt(ru),gt(Cg)}var Ua=0,Kt=null,Ne=null,An=null,Dg=!1,iu=!1,Ac=!1,Rg=0,yf=0,su=null,I5=0;function gn(){throw Error(r(321))}function Hy(c,u){if(u===null)return!1;for(var f=0;f<u.length&&f<c.length;f++)if(!Qr(c[f],u[f]))return!1;return!0}function Gy(c,u,f,p,_,w){return Ua=w,Kt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Q.H=c===null||c.memoizedState===null?VA:BA,Ac=!1,w=f(p,_),Ac=!1,iu&&(w=nA(u,f,p,_)),eA(c),w}function eA(c){Q.H=Lg;var u=Ne!==null&&Ne.next!==null;if(Ua=0,An=Ne=Kt=null,Dg=!1,yf=0,su=null,u)throw Error(r(300));c===null||qn||(c=c.dependencies,c!==null&&Eg(c)&&(qn=!0))}function nA(c,u,f,p){Kt=c;var _=0;do{if(iu&&(su=null),yf=0,iu=!1,25<=_)throw Error(r(301));if(_+=1,An=Ne=null,c.updateQueue!=null){var w=c.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Q.H=N5,w=u(f,p)}while(iu);return w}function C5(){var c=Q.H,u=c.useState()[0];return u=typeof u.then=="function"?vf(u):u,c=c.useState()[0],(Ne!==null?Ne.memoizedState:null)!==c&&(Kt.flags|=1024),u}function Wy(){var c=Rg!==0;return Rg=0,c}function qy(c,u,f){u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~f}function Yy(c){if(Dg){for(c=c.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}Dg=!1}Ua=0,An=Ne=Kt=null,iu=!1,yf=Rg=0,su=null}function kr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Kt.memoizedState=An=c:An=An.next=c,An}function Tn(){if(Ne===null){var c=Kt.alternate;c=c!==null?c.memoizedState:null}else c=Ne.next;var u=An===null?Kt.memoizedState:An.next;if(u!==null)An=u,Ne=c;else{if(c===null)throw Kt.alternate===null?Error(r(467)):Error(r(310));Ne=c,c={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},An===null?Kt.memoizedState=An=c:An=An.next=c}return An}function Xy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vf(c){var u=yf;return yf+=1,su===null&&(su=[]),c=KE(su,c,u),u=Kt,(An===null?u.memoizedState:An.next)===null&&(u=u.alternate,Q.H=u===null||u.memoizedState===null?VA:BA),c}function Og(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return vf(c);if(c.$$typeof===R)return dr(c)}throw Error(r(438,String(c)))}function Ky(c){var u=null,f=Kt.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var p=Kt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(u={data:p.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=Xy(),Kt.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(c),p=0;p<c;p++)f[p]=L;return u.index++,f}function ra(c,u){return typeof u=="function"?u(c):u}function Mg(c){var u=Tn();return $y(u,Ne,c)}function $y(c,u,f){var p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var _=c.baseQueue,w=p.pending;if(w!==null){if(_!==null){var D=_.next;_.next=w.next,w.next=D}u.baseQueue=_=w,p.pending=null}if(w=c.baseState,_===null)c.memoizedState=w;else{u=_.next;var N=D=null,G=null,Z=u,ot=!1;do{var ht=Z.lane&-536870913;if(ht!==Z.lane?(ce&ht)===ht:(Ua&ht)===ht){var tt=Z.revertLane;if(tt===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ht===eu&&(ot=!0);else if((Ua&tt)===tt){Z=Z.next,tt===eu&&(ot=!0);continue}else ht={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},G===null?(N=G=ht,D=w):G=G.next=ht,Kt.lanes|=tt,Ya|=tt;ht=Z.action,Ac&&f(w,ht),w=Z.hasEagerState?Z.eagerState:f(w,ht)}else tt={lane:ht,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},G===null?(N=G=tt,D=w):G=G.next=tt,Kt.lanes|=ht,Ya|=ht;Z=Z.next}while(Z!==null&&Z!==u);if(G===null?D=w:G.next=N,!Qr(w,c.memoizedState)&&(qn=!0,ot&&(f=nu,f!==null)))throw f;c.memoizedState=w,c.baseState=D,c.baseQueue=G,p.lastRenderedState=w}return _===null&&(p.lanes=0),[c.memoizedState,p.dispatch]}function Qy(c){var u=Tn(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var p=f.dispatch,_=f.pending,w=u.memoizedState;if(_!==null){f.pending=null;var D=_=_.next;do w=c(w,D.action),D=D.next;while(D!==_);Qr(w,u.memoizedState)||(qn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),f.lastRenderedState=w}return[w,p]}function rA(c,u,f){var p=Kt,_=Tn(),w=me;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=u();var D=!Qr((Ne||_).memoizedState,f);D&&(_.memoizedState=f,qn=!0),_=_.queue;var N=aA.bind(null,p,_,c);if(_f(2048,8,N,[c]),_.getSnapshot!==u||D||An!==null&&An.memoizedState.tag&1){if(p.flags|=2048,au(9,Pg(),sA.bind(null,p,_,f,u),null),je===null)throw Error(r(349));w||(Ua&124)!==0||iA(p,u,f)}return f}function iA(c,u,f){c.flags|=16384,c={getSnapshot:u,value:f},u=Kt.updateQueue,u===null?(u=Xy(),Kt.updateQueue=u,u.stores=[c]):(f=u.stores,f===null?u.stores=[c]:f.push(c))}function sA(c,u,f,p){u.value=f,u.getSnapshot=p,oA(u)&&cA(c)}function aA(c,u,f){return f(function(){oA(u)&&cA(c)})}function oA(c){var u=c.getSnapshot;c=c.value;try{var f=u();return!Qr(c,f)}catch{return!0}}function cA(c){var u=Ql(c,2);u!==null&&ri(u,c,2)}function Zy(c){var u=kr();if(typeof c=="function"){var f=c;if(c=f(),Ac){Kr(!0);try{f()}finally{Kr(!1)}}}return u.memoizedState=u.baseState=c,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:c},u}function lA(c,u,f,p){return c.baseState=f,$y(c,Ne,typeof p=="function"?p:ra)}function D5(c,u,f,p,_){if(kg(c))throw Error(r(485));if(c=u.action,c!==null){var w={payload:_,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};Q.T!==null?f(!0):w.isTransition=!1,p(w),f=u.pending,f===null?(w.next=u.pending=w,uA(u,w)):(w.next=f.next,u.pending=f.next=w)}}function uA(c,u){var f=u.action,p=u.payload,_=c.state;if(u.isTransition){var w=Q.T,D={};Q.T=D;try{var N=f(_,p),G=Q.S;G!==null&&G(D,N),hA(c,u,N)}catch(Z){Jy(c,u,Z)}finally{Q.T=w}}else try{w=f(_,p),hA(c,u,w)}catch(Z){Jy(c,u,Z)}}function hA(c,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){fA(c,u,p)},function(p){return Jy(c,u,p)}):fA(c,u,f)}function fA(c,u,f){u.status="fulfilled",u.value=f,dA(u),c.state=f,u=c.pending,u!==null&&(f=u.next,f===u?c.pending=null:(f=f.next,u.next=f,uA(c,f)))}function Jy(c,u,f){var p=c.pending;if(c.pending=null,p!==null){p=p.next;do u.status="rejected",u.reason=f,dA(u),u=u.next;while(u!==p)}c.action=null}function dA(c){c=c.listeners;for(var u=0;u<c.length;u++)(0,c[u])()}function gA(c,u){return u}function pA(c,u){if(me){var f=je.formState;if(f!==null){t:{var p=Kt;if(me){if(an){e:{for(var _=an,w=hs;_.nodeType!==8;){if(!w){_=null;break e}if(_=ji(_.nextSibling),_===null){_=null;break e}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){an=ji(_.nextSibling),p=_.data==="F!";break t}}xc(p)}p=!1}p&&(u=f[0])}}return f=kr(),f.memoizedState=f.baseState=u,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gA,lastRenderedState:u},f.queue=p,f=NA.bind(null,Kt,p),p.dispatch=f,p=Zy(!1),w=iv.bind(null,Kt,!1,p.queue),p=kr(),_={state:u,dispatch:null,action:c,pending:null},p.queue=_,f=D5.bind(null,Kt,_,w,f),_.dispatch=f,p.memoizedState=c,[u,f,!1]}function mA(c){var u=Tn();return yA(u,Ne,c)}function yA(c,u,f){if(u=$y(c,u,gA)[0],c=Mg(ra)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var p=vf(u)}catch(D){throw D===ff?Sg:D}else p=u;u=Tn();var _=u.queue,w=_.dispatch;return f!==u.memoizedState&&(Kt.flags|=2048,au(9,Pg(),R5.bind(null,_,f),null)),[p,w,c]}function R5(c,u){c.action=u}function vA(c){var u=Tn(),f=Ne;if(f!==null)return yA(u,f,c);Tn(),u=u.memoizedState,f=Tn();var p=f.queue.dispatch;return f.memoizedState=c,[u,p,!1]}function au(c,u,f,p){return c={tag:c,create:f,deps:p,inst:u,next:null},u=Kt.updateQueue,u===null&&(u=Xy(),Kt.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=c.next=c:(p=f.next,f.next=c,c.next=p,u.lastEffect=c),c}function Pg(){return{destroy:void 0,resource:void 0}}function _A(){return Tn().memoizedState}function Ng(c,u,f,p){var _=kr();p=p===void 0?null:p,Kt.flags|=c,_.memoizedState=au(1|u,Pg(),f,p)}function _f(c,u,f,p){var _=Tn();p=p===void 0?null:p;var w=_.memoizedState.inst;Ne!==null&&p!==null&&Hy(p,Ne.memoizedState.deps)?_.memoizedState=au(u,w,f,p):(Kt.flags|=c,_.memoizedState=au(1|u,w,f,p))}function xA(c,u){Ng(8390656,8,c,u)}function wA(c,u){_f(2048,8,c,u)}function bA(c,u){return _f(4,2,c,u)}function EA(c,u){return _f(4,4,c,u)}function AA(c,u){if(typeof u=="function"){c=c();var f=u(c);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function TA(c,u,f){f=f!=null?f.concat([c]):null,_f(4,4,AA.bind(null,u,c),f)}function tv(){}function SA(c,u){var f=Tn();u=u===void 0?null:u;var p=f.memoizedState;return u!==null&&Hy(u,p[1])?p[0]:(f.memoizedState=[c,u],c)}function IA(c,u){var f=Tn();u=u===void 0?null:u;var p=f.memoizedState;if(u!==null&&Hy(u,p[1]))return p[0];if(p=c(),Ac){Kr(!0);try{c()}finally{Kr(!1)}}return f.memoizedState=[p,u],p}function ev(c,u,f){return f===void 0||(Ua&1073741824)!==0?c.memoizedState=u:(c.memoizedState=f,c=RT(),Kt.lanes|=c,Ya|=c,f)}function CA(c,u,f,p){return Qr(f,u)?f:ru.current!==null?(c=ev(c,f,p),Qr(c,u)||(qn=!0),c):(Ua&42)===0?(qn=!0,c.memoizedState=f):(c=RT(),Kt.lanes|=c,Ya|=c,u)}function DA(c,u,f,p,_){var w=at.p;at.p=w!==0&&8>w?w:8;var D=Q.T,N={};Q.T=N,iv(c,!1,u,f);try{var G=_(),Z=Q.S;if(Z!==null&&Z(N,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ot=S5(G,p);xf(c,u,ot,ni(c))}else xf(c,u,p,ni(c))}catch(ht){xf(c,u,{then:function(){},status:"rejected",reason:ht},ni())}finally{at.p=w,Q.T=D}}function O5(){}function nv(c,u,f,p){if(c.tag!==5)throw Error(r(476));var _=RA(c).queue;DA(c,_,u,mt,f===null?O5:function(){return OA(c),f(p)})}function RA(c){var u=c.memoizedState;if(u!==null)return u;u={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:mt},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:f},next:null},c.memoizedState=u,c=c.alternate,c!==null&&(c.memoizedState=u),u}function OA(c){var u=RA(c).next.queue;xf(c,u,{},ni())}function rv(){return dr(Bf)}function MA(){return Tn().memoizedState}function PA(){return Tn().memoizedState}function M5(c){for(var u=c.return;u!==null;){switch(u.tag){case 24:case 3:var f=ni();c=Ba(f);var p=Fa(u,c,f);p!==null&&(ri(p,u,f),gf(p,u,f)),u={cache:Py()},c.payload=u;return}u=u.return}}function P5(c,u,f){var p=ni();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},kg(c)?kA(u,f):(f=Ey(c,u,f,p),f!==null&&(ri(f,c,p),LA(f,u,p)))}function NA(c,u,f){var p=ni();xf(c,u,f,p)}function xf(c,u,f,p){var _={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(kg(c))kA(u,_);else{var w=c.alternate;if(c.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var D=u.lastRenderedState,N=w(D,f);if(_.hasEagerState=!0,_.eagerState=N,Qr(N,D))return vg(c,u,_,0),je===null&&yg(),!1}catch{}finally{}if(f=Ey(c,u,_,p),f!==null)return ri(f,c,p),LA(f,u,p),!0}return!1}function iv(c,u,f,p){if(p={lane:2,revertLane:Lv(),action:p,hasEagerState:!1,eagerState:null,next:null},kg(c)){if(u)throw Error(r(479))}else u=Ey(c,f,p,2),u!==null&&ri(u,c,2)}function kg(c){var u=c.alternate;return c===Kt||u!==null&&u===Kt}function kA(c,u){iu=Dg=!0;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}function LA(c,u,f){if((f&4194048)!==0){var p=u.lanes;p&=c.pendingLanes,f|=p,u.lanes=f,jh(c,f)}}var Lg={readContext:dr,use:Og,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn},VA={readContext:dr,use:Og,useCallback:function(c,u){return kr().memoizedState=[c,u===void 0?null:u],c},useContext:dr,useEffect:xA,useImperativeHandle:function(c,u,f){f=f!=null?f.concat([c]):null,Ng(4194308,4,AA.bind(null,u,c),f)},useLayoutEffect:function(c,u){return Ng(4194308,4,c,u)},useInsertionEffect:function(c,u){Ng(4,2,c,u)},useMemo:function(c,u){var f=kr();u=u===void 0?null:u;var p=c();if(Ac){Kr(!0);try{c()}finally{Kr(!1)}}return f.memoizedState=[p,u],p},useReducer:function(c,u,f){var p=kr();if(f!==void 0){var _=f(u);if(Ac){Kr(!0);try{f(u)}finally{Kr(!1)}}}else _=u;return p.memoizedState=p.baseState=_,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:_},p.queue=c,c=c.dispatch=P5.bind(null,Kt,c),[p.memoizedState,c]},useRef:function(c){var u=kr();return c={current:c},u.memoizedState=c},useState:function(c){c=Zy(c);var u=c.queue,f=NA.bind(null,Kt,u);return u.dispatch=f,[c.memoizedState,f]},useDebugValue:tv,useDeferredValue:function(c,u){var f=kr();return ev(f,c,u)},useTransition:function(){var c=Zy(!1);return c=DA.bind(null,Kt,c.queue,!0,!1),kr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,u,f){var p=Kt,_=kr();if(me){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),je===null)throw Error(r(349));(ce&124)!==0||iA(p,u,f)}_.memoizedState=f;var w={value:f,getSnapshot:u};return _.queue=w,xA(aA.bind(null,p,w,c),[c]),p.flags|=2048,au(9,Pg(),sA.bind(null,p,w,f,u),null),f},useId:function(){var c=kr(),u=je.identifierPrefix;if(me){var f=ta,p=Js;f=(p&~(1<<32-fr(p)-1)).toString(32)+f,u="«"+u+"R"+f,f=Rg++,0<f&&(u+="H"+f.toString(32)),u+="»"}else f=I5++,u="«"+u+"r"+f.toString(32)+"»";return c.memoizedState=u},useHostTransitionStatus:rv,useFormState:pA,useActionState:pA,useOptimistic:function(c){var u=kr();u.memoizedState=u.baseState=c;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=iv.bind(null,Kt,!0,f),f.dispatch=u,[c,u]},useMemoCache:Ky,useCacheRefresh:function(){return kr().memoizedState=M5.bind(null,Kt)}},BA={readContext:dr,use:Og,useCallback:SA,useContext:dr,useEffect:wA,useImperativeHandle:TA,useInsertionEffect:bA,useLayoutEffect:EA,useMemo:IA,useReducer:Mg,useRef:_A,useState:function(){return Mg(ra)},useDebugValue:tv,useDeferredValue:function(c,u){var f=Tn();return CA(f,Ne.memoizedState,c,u)},useTransition:function(){var c=Mg(ra)[0],u=Tn().memoizedState;return[typeof c=="boolean"?c:vf(c),u]},useSyncExternalStore:rA,useId:MA,useHostTransitionStatus:rv,useFormState:mA,useActionState:mA,useOptimistic:function(c,u){var f=Tn();return lA(f,Ne,c,u)},useMemoCache:Ky,useCacheRefresh:PA},N5={readContext:dr,use:Og,useCallback:SA,useContext:dr,useEffect:wA,useImperativeHandle:TA,useInsertionEffect:bA,useLayoutEffect:EA,useMemo:IA,useReducer:Qy,useRef:_A,useState:function(){return Qy(ra)},useDebugValue:tv,useDeferredValue:function(c,u){var f=Tn();return Ne===null?ev(f,c,u):CA(f,Ne.memoizedState,c,u)},useTransition:function(){var c=Qy(ra)[0],u=Tn().memoizedState;return[typeof c=="boolean"?c:vf(c),u]},useSyncExternalStore:rA,useId:MA,useHostTransitionStatus:rv,useFormState:vA,useActionState:vA,useOptimistic:function(c,u){var f=Tn();return Ne!==null?lA(f,Ne,c,u):(f.baseState=c,[c,f.queue.dispatch])},useMemoCache:Ky,useCacheRefresh:PA},ou=null,wf=0;function Vg(c){var u=wf;return wf+=1,ou===null&&(ou=[]),KE(ou,c,u)}function bf(c,u){u=u.props.ref,c.ref=u!==void 0?u:null}function Bg(c,u){throw u.$$typeof===g?Error(r(525)):(c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c)))}function FA(c){var u=c._init;return u(c._payload)}function UA(c){function u(Y,q){if(c){var $=Y.deletions;$===null?(Y.deletions=[q],Y.flags|=16):$.push(q)}}function f(Y,q){if(!c)return null;for(;q!==null;)u(Y,q),q=q.sibling;return null}function p(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function _(Y,q){return Y=Zs(Y,q),Y.index=0,Y.sibling=null,Y}function w(Y,q,$){return Y.index=$,c?($=Y.alternate,$!==null?($=$.index,$<q?(Y.flags|=67108866,q):$):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function D(Y){return c&&Y.alternate===null&&(Y.flags|=67108866),Y}function N(Y,q,$,lt){return q===null||q.tag!==6?(q=Ty($,Y.mode,lt),q.return=Y,q):(q=_(q,$),q.return=Y,q)}function G(Y,q,$,lt){var Tt=$.type;return Tt===x?ot(Y,q,$.props.children,lt,$.key):q!==null&&(q.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===C&&FA(Tt)===q.type)?(q=_(q,$.props),bf(q,$),q.return=Y,q):(q=xg($.type,$.key,$.props,null,Y.mode,lt),bf(q,$),q.return=Y,q)}function Z(Y,q,$,lt){return q===null||q.tag!==4||q.stateNode.containerInfo!==$.containerInfo||q.stateNode.implementation!==$.implementation?(q=Sy($,Y.mode,lt),q.return=Y,q):(q=_(q,$.children||[]),q.return=Y,q)}function ot(Y,q,$,lt,Tt){return q===null||q.tag!==7?(q=mc($,Y.mode,lt,Tt),q.return=Y,q):(q=_(q,$),q.return=Y,q)}function ht(Y,q,$){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ty(""+q,Y.mode,$),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case m:return $=xg(q.type,q.key,q.props,null,Y.mode,$),bf($,q),$.return=Y,$;case y:return q=Sy(q,Y.mode,$),q.return=Y,q;case C:var lt=q._init;return q=lt(q._payload),ht(Y,q,$)}if(wt(q)||z(q))return q=mc(q,Y.mode,$,null),q.return=Y,q;if(typeof q.then=="function")return ht(Y,Vg(q),$);if(q.$$typeof===R)return ht(Y,Ag(Y,q),$);Bg(Y,q)}return null}function tt(Y,q,$,lt){var Tt=q!==null?q.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Tt!==null?null:N(Y,q,""+$,lt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case m:return $.key===Tt?G(Y,q,$,lt):null;case y:return $.key===Tt?Z(Y,q,$,lt):null;case C:return Tt=$._init,$=Tt($._payload),tt(Y,q,$,lt)}if(wt($)||z($))return Tt!==null?null:ot(Y,q,$,lt,null);if(typeof $.then=="function")return tt(Y,q,Vg($),lt);if($.$$typeof===R)return tt(Y,q,Ag(Y,$),lt);Bg(Y,$)}return null}function et(Y,q,$,lt,Tt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Y=Y.get($)||null,N(q,Y,""+lt,Tt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:return Y=Y.get(lt.key===null?$:lt.key)||null,G(q,Y,lt,Tt);case y:return Y=Y.get(lt.key===null?$:lt.key)||null,Z(q,Y,lt,Tt);case C:var te=lt._init;return lt=te(lt._payload),et(Y,q,$,lt,Tt)}if(wt(lt)||z(lt))return Y=Y.get($)||null,ot(q,Y,lt,Tt,null);if(typeof lt.then=="function")return et(Y,q,$,Vg(lt),Tt);if(lt.$$typeof===R)return et(Y,q,$,Ag(q,lt),Tt);Bg(q,lt)}return null}function zt(Y,q,$,lt){for(var Tt=null,te=null,Mt=q,Ft=q=0,Xn=null;Mt!==null&&Ft<$.length;Ft++){Mt.index>Ft?(Xn=Mt,Mt=null):Xn=Mt.sibling;var de=tt(Y,Mt,$[Ft],lt);if(de===null){Mt===null&&(Mt=Xn);break}c&&Mt&&de.alternate===null&&u(Y,Mt),q=w(de,q,Ft),te===null?Tt=de:te.sibling=de,te=de,Mt=Xn}if(Ft===$.length)return f(Y,Mt),me&&vc(Y,Ft),Tt;if(Mt===null){for(;Ft<$.length;Ft++)Mt=ht(Y,$[Ft],lt),Mt!==null&&(q=w(Mt,q,Ft),te===null?Tt=Mt:te.sibling=Mt,te=Mt);return me&&vc(Y,Ft),Tt}for(Mt=p(Mt);Ft<$.length;Ft++)Xn=et(Mt,Y,Ft,$[Ft],lt),Xn!==null&&(c&&Xn.alternate!==null&&Mt.delete(Xn.key===null?Ft:Xn.key),q=w(Xn,q,Ft),te===null?Tt=Xn:te.sibling=Xn,te=Xn);return c&&Mt.forEach(function(no){return u(Y,no)}),me&&vc(Y,Ft),Tt}function Vt(Y,q,$,lt){if($==null)throw Error(r(151));for(var Tt=null,te=null,Mt=q,Ft=q=0,Xn=null,de=$.next();Mt!==null&&!de.done;Ft++,de=$.next()){Mt.index>Ft?(Xn=Mt,Mt=null):Xn=Mt.sibling;var no=tt(Y,Mt,de.value,lt);if(no===null){Mt===null&&(Mt=Xn);break}c&&Mt&&no.alternate===null&&u(Y,Mt),q=w(no,q,Ft),te===null?Tt=no:te.sibling=no,te=no,Mt=Xn}if(de.done)return f(Y,Mt),me&&vc(Y,Ft),Tt;if(Mt===null){for(;!de.done;Ft++,de=$.next())de=ht(Y,de.value,lt),de!==null&&(q=w(de,q,Ft),te===null?Tt=de:te.sibling=de,te=de);return me&&vc(Y,Ft),Tt}for(Mt=p(Mt);!de.done;Ft++,de=$.next())de=et(Mt,Y,Ft,de.value,lt),de!==null&&(c&&de.alternate!==null&&Mt.delete(de.key===null?Ft:de.key),q=w(de,q,Ft),te===null?Tt=de:te.sibling=de,te=de);return c&&Mt.forEach(function(kk){return u(Y,kk)}),me&&vc(Y,Ft),Tt}function Le(Y,q,$,lt){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case m:t:{for(var Tt=$.key;q!==null;){if(q.key===Tt){if(Tt=$.type,Tt===x){if(q.tag===7){f(Y,q.sibling),lt=_(q,$.props.children),lt.return=Y,Y=lt;break t}}else if(q.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===C&&FA(Tt)===q.type){f(Y,q.sibling),lt=_(q,$.props),bf(lt,$),lt.return=Y,Y=lt;break t}f(Y,q);break}else u(Y,q);q=q.sibling}$.type===x?(lt=mc($.props.children,Y.mode,lt,$.key),lt.return=Y,Y=lt):(lt=xg($.type,$.key,$.props,null,Y.mode,lt),bf(lt,$),lt.return=Y,Y=lt)}return D(Y);case y:t:{for(Tt=$.key;q!==null;){if(q.key===Tt)if(q.tag===4&&q.stateNode.containerInfo===$.containerInfo&&q.stateNode.implementation===$.implementation){f(Y,q.sibling),lt=_(q,$.children||[]),lt.return=Y,Y=lt;break t}else{f(Y,q);break}else u(Y,q);q=q.sibling}lt=Sy($,Y.mode,lt),lt.return=Y,Y=lt}return D(Y);case C:return Tt=$._init,$=Tt($._payload),Le(Y,q,$,lt)}if(wt($))return zt(Y,q,$,lt);if(z($)){if(Tt=z($),typeof Tt!="function")throw Error(r(150));return $=Tt.call($),Vt(Y,q,$,lt)}if(typeof $.then=="function")return Le(Y,q,Vg($),lt);if($.$$typeof===R)return Le(Y,q,Ag(Y,$),lt);Bg(Y,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,q!==null&&q.tag===6?(f(Y,q.sibling),lt=_(q,$),lt.return=Y,Y=lt):(f(Y,q),lt=Ty($,Y.mode,lt),lt.return=Y,Y=lt),D(Y)):f(Y,q)}return function(Y,q,$,lt){try{wf=0;var Tt=Le(Y,q,$,lt);return ou=null,Tt}catch(Mt){if(Mt===ff||Mt===Sg)throw Mt;var te=Zr(29,Mt,null,Y.mode);return te.lanes=lt,te.return=Y,te}finally{}}}var cu=UA(!0),jA=UA(!1),xi=ct(null),fs=null;function ja(c){var u=c.alternate;dt(Nn,Nn.current&1),dt(xi,c),fs===null&&(u===null||ru.current!==null||u.memoizedState!==null)&&(fs=c)}function zA(c){if(c.tag===22){if(dt(Nn,Nn.current),dt(xi,c),fs===null){var u=c.alternate;u!==null&&u.memoizedState!==null&&(fs=c)}}else za()}function za(){dt(Nn,Nn.current),dt(xi,xi.current)}function ia(c){gt(xi),fs===c&&(fs=null),gt(Nn)}var Nn=ct(0);function Fg(c){for(var u=c;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Xv(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function sv(c,u,f,p){u=c.memoizedState,f=f(p,u),f=f==null?u:d({},u,f),c.memoizedState=f,c.lanes===0&&(c.updateQueue.baseState=f)}var av={enqueueSetState:function(c,u,f){c=c._reactInternals;var p=ni(),_=Ba(p);_.payload=u,f!=null&&(_.callback=f),u=Fa(c,_,p),u!==null&&(ri(u,c,p),gf(u,c,p))},enqueueReplaceState:function(c,u,f){c=c._reactInternals;var p=ni(),_=Ba(p);_.tag=1,_.payload=u,f!=null&&(_.callback=f),u=Fa(c,_,p),u!==null&&(ri(u,c,p),gf(u,c,p))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var f=ni(),p=Ba(f);p.tag=2,u!=null&&(p.callback=u),u=Fa(c,p,f),u!==null&&(ri(u,c,f),gf(u,c,f))}};function HA(c,u,f,p,_,w,D){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(p,w,D):u.prototype&&u.prototype.isPureReactComponent?!rf(f,p)||!rf(_,w):!0}function GA(c,u,f,p){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,p),u.state!==c&&av.enqueueReplaceState(u,u.state,null)}function Tc(c,u){var f=u;if("ref"in u){f={};for(var p in u)p!=="ref"&&(f[p]=u[p])}if(c=c.defaultProps){f===u&&(f=d({},f));for(var _ in c)f[_]===void 0&&(f[_]=c[_])}return f}var Ug=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function WA(c){Ug(c)}function qA(c){console.error(c)}function YA(c){Ug(c)}function jg(c,u){try{var f=c.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(p){setTimeout(function(){throw p})}}function XA(c,u,f){try{var p=c.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function ov(c,u,f){return f=Ba(f),f.tag=3,f.payload={element:null},f.callback=function(){jg(c,u)},f}function KA(c){return c=Ba(c),c.tag=3,c}function $A(c,u,f,p){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var w=p.value;c.payload=function(){return _(w)},c.callback=function(){XA(u,f,p)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(c.callback=function(){XA(u,f,p),typeof _!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var N=p.stack;this.componentDidCatch(p.value,{componentStack:N!==null?N:""})})}function k5(c,u,f,p,_){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(u=f.alternate,u!==null&&lf(u,f,_,!0),f=xi.current,f!==null){switch(f.tag){case 13:return fs===null?Ov():f.alternate===null&&on===0&&(on=3),f.flags&=-257,f.flags|=65536,f.lanes=_,p===Ly?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([p]):u.add(p),Pv(c,p,_)),!1;case 22:return f.flags|=65536,p===Ly?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([p]):f.add(p)),Pv(c,p,_)),!1}throw Error(r(435,f.tag))}return Pv(c,p,_),Ov(),!1}if(me)return u=xi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,p!==Dy&&(c=Error(r(422),{cause:p}),cf(mi(c,f)))):(p!==Dy&&(u=Error(r(423),{cause:p}),cf(mi(u,f))),c=c.current.alternate,c.flags|=65536,_&=-_,c.lanes|=_,p=mi(p,f),_=ov(c.stateNode,p,_),Fy(c,_),on!==4&&(on=2)),!1;var w=Error(r(520),{cause:p});if(w=mi(w,f),Df===null?Df=[w]:Df.push(w),on!==4&&(on=2),u===null)return!0;p=mi(p,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,c=_&-_,f.lanes|=c,c=ov(f.stateNode,p,c),Fy(f,c),!1;case 1:if(u=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xa===null||!Xa.has(w))))return f.flags|=65536,_&=-_,f.lanes|=_,_=KA(_),$A(_,c,f,p),Fy(f,_),!1}f=f.return}while(f!==null);return!1}var QA=Error(r(461)),qn=!1;function ir(c,u,f,p){u.child=c===null?jA(u,null,f,p):cu(u,c.child,f,p)}function ZA(c,u,f,p,_){f=f.render;var w=u.ref;if("ref"in p){var D={};for(var N in p)N!=="ref"&&(D[N]=p[N])}else D=p;return bc(u),p=Gy(c,u,f,D,w,_),N=Wy(),c!==null&&!qn?(qy(c,u,_),sa(c,u,_)):(me&&N&&Iy(u),u.flags|=1,ir(c,u,p,_),u.child)}function JA(c,u,f,p,_){if(c===null){var w=f.type;return typeof w=="function"&&!Ay(w)&&w.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=w,tT(c,u,w,p,_)):(c=xg(f.type,null,p,u,u.mode,_),c.ref=u.ref,c.return=u,u.child=c)}if(w=c.child,!pv(c,_)){var D=w.memoizedProps;if(f=f.compare,f=f!==null?f:rf,f(D,p)&&c.ref===u.ref)return sa(c,u,_)}return u.flags|=1,c=Zs(w,p),c.ref=u.ref,c.return=u,u.child=c}function tT(c,u,f,p,_){if(c!==null){var w=c.memoizedProps;if(rf(w,p)&&c.ref===u.ref)if(qn=!1,u.pendingProps=p=w,pv(c,_))(c.flags&131072)!==0&&(qn=!0);else return u.lanes=c.lanes,sa(c,u,_)}return cv(c,u,f,p,_)}function eT(c,u,f){var p=u.pendingProps,_=p.children,w=c!==null?c.memoizedState:null;if(p.mode==="hidden"){if((u.flags&128)!==0){if(p=w!==null?w.baseLanes|f:f,c!==null){for(_=u.child=c.child,w=0;_!==null;)w=w|_.lanes|_.childLanes,_=_.sibling;u.childLanes=w&~p}else u.childLanes=0,u.child=null;return nT(c,u,p,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},c!==null&&Tg(u,w!==null?w.cachePool:null),w!==null?tA(u,w):jy(),zA(u);else return u.lanes=u.childLanes=536870912,nT(c,u,w!==null?w.baseLanes|f:f,f)}else w!==null?(Tg(u,w.cachePool),tA(u,w),za(),u.memoizedState=null):(c!==null&&Tg(u,null),jy(),za());return ir(c,u,_,f),u.child}function nT(c,u,f,p){var _=ky();return _=_===null?null:{parent:Pn._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},c!==null&&Tg(u,null),jy(),zA(u),c!==null&&lf(c,u,p,!0),null}function zg(c,u){var f=u.ref;if(f===null)c!==null&&c.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(c===null||c.ref!==f)&&(u.flags|=4194816)}}function cv(c,u,f,p,_){return bc(u),f=Gy(c,u,f,p,void 0,_),p=Wy(),c!==null&&!qn?(qy(c,u,_),sa(c,u,_)):(me&&p&&Iy(u),u.flags|=1,ir(c,u,f,_),u.child)}function rT(c,u,f,p,_,w){return bc(u),u.updateQueue=null,f=nA(u,p,f,_),eA(c),p=Wy(),c!==null&&!qn?(qy(c,u,w),sa(c,u,w)):(me&&p&&Iy(u),u.flags|=1,ir(c,u,f,w),u.child)}function iT(c,u,f,p,_){if(bc(u),u.stateNode===null){var w=Zl,D=f.contextType;typeof D=="object"&&D!==null&&(w=dr(D)),w=new f(p,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=av,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=p,w.state=u.memoizedState,w.refs={},Vy(u),D=f.contextType,w.context=typeof D=="object"&&D!==null?dr(D):Zl,w.state=u.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(sv(u,f,D,p),w.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&av.enqueueReplaceState(w,w.state,null),mf(u,p,w,_),pf(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),p=!0}else if(c===null){w=u.stateNode;var N=u.memoizedProps,G=Tc(f,N);w.props=G;var Z=w.context,ot=f.contextType;D=Zl,typeof ot=="object"&&ot!==null&&(D=dr(ot));var ht=f.getDerivedStateFromProps;ot=typeof ht=="function"||typeof w.getSnapshotBeforeUpdate=="function",N=u.pendingProps!==N,ot||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N||Z!==D)&&GA(u,w,p,D),Va=!1;var tt=u.memoizedState;w.state=tt,mf(u,p,w,_),pf(),Z=u.memoizedState,N||tt!==Z||Va?(typeof ht=="function"&&(sv(u,f,ht,p),Z=u.memoizedState),(G=Va||HA(u,f,G,p,tt,Z,D))?(ot||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=Z),w.props=p,w.state=Z,w.context=D,p=G):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{w=u.stateNode,By(c,u),D=u.memoizedProps,ot=Tc(f,D),w.props=ot,ht=u.pendingProps,tt=w.context,Z=f.contextType,G=Zl,typeof Z=="object"&&Z!==null&&(G=dr(Z)),N=f.getDerivedStateFromProps,(Z=typeof N=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==ht||tt!==G)&&GA(u,w,p,G),Va=!1,tt=u.memoizedState,w.state=tt,mf(u,p,w,_),pf();var et=u.memoizedState;D!==ht||tt!==et||Va||c!==null&&c.dependencies!==null&&Eg(c.dependencies)?(typeof N=="function"&&(sv(u,f,N,p),et=u.memoizedState),(ot=Va||HA(u,f,ot,p,tt,et,G)||c!==null&&c.dependencies!==null&&Eg(c.dependencies))?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,et,G),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,et,G)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===c.memoizedProps&&tt===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&tt===c.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=et),w.props=p,w.state=et,w.context=G,p=ot):(typeof w.componentDidUpdate!="function"||D===c.memoizedProps&&tt===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&tt===c.memoizedState||(u.flags|=1024),p=!1)}return w=p,zg(c,u),p=(u.flags&128)!==0,w||p?(w=u.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,c!==null&&p?(u.child=cu(u,c.child,null,_),u.child=cu(u,null,f,_)):ir(c,u,f,_),u.memoizedState=w.state,c=u.child):c=sa(c,u,_),c}function sT(c,u,f,p){return of(),u.flags|=256,ir(c,u,f,p),u.child}var lv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uv(c){return{baseLanes:c,cachePool:qE()}}function hv(c,u,f){return c=c!==null?c.childLanes&~f:0,u&&(c|=wi),c}function aT(c,u,f){var p=u.pendingProps,_=!1,w=(u.flags&128)!==0,D;if((D=w)||(D=c!==null&&c.memoizedState===null?!1:(Nn.current&2)!==0),D&&(_=!0,u.flags&=-129),D=(u.flags&32)!==0,u.flags&=-33,c===null){if(me){if(_?ja(u):za(),me){var N=an,G;if(G=N){t:{for(G=N,N=hs;G.nodeType!==8;){if(!N){N=null;break t}if(G=ji(G.nextSibling),G===null){N=null;break t}}N=G}N!==null?(u.memoizedState={dehydrated:N,treeContext:yc!==null?{id:Js,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},G=Zr(18,null,null,0),G.stateNode=N,G.return=u,u.child=G,Dr=u,an=null,G=!0):G=!1}G||xc(u)}if(N=u.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Xv(N)?u.lanes=32:u.lanes=536870912,null;ia(u)}return N=p.children,p=p.fallback,_?(za(),_=u.mode,N=Hg({mode:"hidden",children:N},_),p=mc(p,_,f,null),N.return=u,p.return=u,N.sibling=p,u.child=N,_=u.child,_.memoizedState=uv(f),_.childLanes=hv(c,D,f),u.memoizedState=lv,p):(ja(u),fv(u,N))}if(G=c.memoizedState,G!==null&&(N=G.dehydrated,N!==null)){if(w)u.flags&256?(ja(u),u.flags&=-257,u=dv(c,u,f)):u.memoizedState!==null?(za(),u.child=c.child,u.flags|=128,u=null):(za(),_=p.fallback,N=u.mode,p=Hg({mode:"visible",children:p.children},N),_=mc(_,N,f,null),_.flags|=2,p.return=u,_.return=u,p.sibling=_,u.child=p,cu(u,c.child,null,f),p=u.child,p.memoizedState=uv(f),p.childLanes=hv(c,D,f),u.memoizedState=lv,u=_);else if(ja(u),Xv(N)){if(D=N.nextSibling&&N.nextSibling.dataset,D)var Z=D.dgst;D=Z,p=Error(r(419)),p.stack="",p.digest=D,cf({value:p,source:null,stack:null}),u=dv(c,u,f)}else if(qn||lf(c,u,f,!1),D=(f&c.childLanes)!==0,qn||D){if(D=je,D!==null&&(p=f&-f,p=(p&42)!==0?1:Da(p),p=(p&(D.suspendedLanes|f))!==0?0:p,p!==0&&p!==G.retryLane))throw G.retryLane=p,Ql(c,p),ri(D,c,p),QA;N.data==="$?"||Ov(),u=dv(c,u,f)}else N.data==="$?"?(u.flags|=192,u.child=c.child,u=null):(c=G.treeContext,an=ji(N.nextSibling),Dr=u,me=!0,_c=null,hs=!1,c!==null&&(vi[_i++]=Js,vi[_i++]=ta,vi[_i++]=yc,Js=c.id,ta=c.overflow,yc=u),u=fv(u,p.children),u.flags|=4096);return u}return _?(za(),_=p.fallback,N=u.mode,G=c.child,Z=G.sibling,p=Zs(G,{mode:"hidden",children:p.children}),p.subtreeFlags=G.subtreeFlags&65011712,Z!==null?_=Zs(Z,_):(_=mc(_,N,f,null),_.flags|=2),_.return=u,p.return=u,p.sibling=_,u.child=p,p=_,_=u.child,N=c.child.memoizedState,N===null?N=uv(f):(G=N.cachePool,G!==null?(Z=Pn._currentValue,G=G.parent!==Z?{parent:Z,pool:Z}:G):G=qE(),N={baseLanes:N.baseLanes|f,cachePool:G}),_.memoizedState=N,_.childLanes=hv(c,D,f),u.memoizedState=lv,p):(ja(u),f=c.child,c=f.sibling,f=Zs(f,{mode:"visible",children:p.children}),f.return=u,f.sibling=null,c!==null&&(D=u.deletions,D===null?(u.deletions=[c],u.flags|=16):D.push(c)),u.child=f,u.memoizedState=null,f)}function fv(c,u){return u=Hg({mode:"visible",children:u},c.mode),u.return=c,c.child=u}function Hg(c,u){return c=Zr(22,c,null,u),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function dv(c,u,f){return cu(u,c.child,null,f),c=fv(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function oT(c,u,f){c.lanes|=u;var p=c.alternate;p!==null&&(p.lanes|=u),Oy(c.return,u,f)}function gv(c,u,f,p,_){var w=c.memoizedState;w===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:_}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=f,w.tailMode=_)}function cT(c,u,f){var p=u.pendingProps,_=p.revealOrder,w=p.tail;if(ir(c,u,p.children,f),p=Nn.current,(p&2)!==0)p=p&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&oT(c,f,u);else if(c.tag===19)oT(c,f,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break t;for(;c.sibling===null;){if(c.return===null||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}p&=1}switch(dt(Nn,p),_){case"forwards":for(f=u.child,_=null;f!==null;)c=f.alternate,c!==null&&Fg(c)===null&&(_=f),f=f.sibling;f=_,f===null?(_=u.child,u.child=null):(_=f.sibling,f.sibling=null),gv(u,!1,_,f,w);break;case"backwards":for(f=null,_=u.child,u.child=null;_!==null;){if(c=_.alternate,c!==null&&Fg(c)===null){u.child=_;break}c=_.sibling,_.sibling=f,f=_,_=c}gv(u,!0,f,null,w);break;case"together":gv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function sa(c,u,f){if(c!==null&&(u.dependencies=c.dependencies),Ya|=u.lanes,(f&u.childLanes)===0)if(c!==null){if(lf(c,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,f=Zs(c,c.pendingProps),u.child=f,f.return=u;c.sibling!==null;)c=c.sibling,f=f.sibling=Zs(c,c.pendingProps),f.return=u;f.sibling=null}return u.child}function pv(c,u){return(c.lanes&u)!==0?!0:(c=c.dependencies,!!(c!==null&&Eg(c)))}function L5(c,u,f){switch(u.tag){case 3:pe(u,u.stateNode.containerInfo),La(u,Pn,c.memoizedState.cache),of();break;case 27:case 5:Lt(u);break;case 4:pe(u,u.stateNode.containerInfo);break;case 10:La(u,u.type,u.memoizedProps.value);break;case 13:var p=u.memoizedState;if(p!==null)return p.dehydrated!==null?(ja(u),u.flags|=128,null):(f&u.child.childLanes)!==0?aT(c,u,f):(ja(u),c=sa(c,u,f),c!==null?c.sibling:null);ja(u);break;case 19:var _=(c.flags&128)!==0;if(p=(f&u.childLanes)!==0,p||(lf(c,u,f,!1),p=(f&u.childLanes)!==0),_){if(p)return cT(c,u,f);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),dt(Nn,Nn.current),p)break;return null;case 22:case 23:return u.lanes=0,eT(c,u,f);case 24:La(u,Pn,c.memoizedState.cache)}return sa(c,u,f)}function lT(c,u,f){if(c!==null)if(c.memoizedProps!==u.pendingProps)qn=!0;else{if(!pv(c,f)&&(u.flags&128)===0)return qn=!1,L5(c,u,f);qn=(c.flags&131072)!==0}else qn=!1,me&&(u.flags&1048576)!==0&&FE(u,bg,u.index);switch(u.lanes=0,u.tag){case 16:t:{c=u.pendingProps;var p=u.elementType,_=p._init;if(p=_(p._payload),u.type=p,typeof p=="function")Ay(p)?(c=Tc(p,c),u.tag=1,u=iT(null,u,p,c,f)):(u.tag=0,u=cv(null,u,p,c,f));else{if(p!=null){if(_=p.$$typeof,_===k){u.tag=11,u=ZA(null,u,p,c,f);break t}else if(_===M){u.tag=14,u=JA(null,u,p,c,f);break t}}throw u=Et(p)||p,Error(r(306,u,""))}}return u;case 0:return cv(c,u,u.type,u.pendingProps,f);case 1:return p=u.type,_=Tc(p,u.pendingProps),iT(c,u,p,_,f);case 3:t:{if(pe(u,u.stateNode.containerInfo),c===null)throw Error(r(387));p=u.pendingProps;var w=u.memoizedState;_=w.element,By(c,u),mf(u,p,null,f);var D=u.memoizedState;if(p=D.cache,La(u,Pn,p),p!==w.cache&&My(u,[Pn],f,!0),pf(),p=D.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:D.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=sT(c,u,p,f);break t}else if(p!==_){_=mi(Error(r(424)),u),cf(_),u=sT(c,u,p,f);break t}else{switch(c=u.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(an=ji(c.firstChild),Dr=u,me=!0,_c=null,hs=!0,f=jA(u,null,p,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(of(),p===_){u=sa(c,u,f);break t}ir(c,u,p,f)}u=u.child}return u;case 26:return zg(c,u),c===null?(f=dS(u.type,null,u.pendingProps,null))?u.memoizedState=f:me||(f=u.type,c=u.pendingProps,p=rp(Ot.current).createElement(f),p[Rn]=u,p[bn]=c,ar(p,f,c),dn(p),u.stateNode=p):u.memoizedState=dS(u.type,c.memoizedProps,u.pendingProps,c.memoizedState),null;case 27:return Lt(u),c===null&&me&&(p=u.stateNode=uS(u.type,u.pendingProps,Ot.current),Dr=u,hs=!0,_=an,Qa(u.type)?(Kv=_,an=ji(p.firstChild)):an=_),ir(c,u,u.pendingProps.children,f),zg(c,u),c===null&&(u.flags|=4194304),u.child;case 5:return c===null&&me&&((_=p=an)&&(p=uk(p,u.type,u.pendingProps,hs),p!==null?(u.stateNode=p,Dr=u,an=ji(p.firstChild),hs=!1,_=!0):_=!1),_||xc(u)),Lt(u),_=u.type,w=u.pendingProps,D=c!==null?c.memoizedProps:null,p=w.children,Wv(_,w)?p=null:D!==null&&Wv(_,D)&&(u.flags|=32),u.memoizedState!==null&&(_=Gy(c,u,C5,null,null,f),Bf._currentValue=_),zg(c,u),ir(c,u,p,f),u.child;case 6:return c===null&&me&&((c=f=an)&&(f=hk(f,u.pendingProps,hs),f!==null?(u.stateNode=f,Dr=u,an=null,c=!0):c=!1),c||xc(u)),null;case 13:return aT(c,u,f);case 4:return pe(u,u.stateNode.containerInfo),p=u.pendingProps,c===null?u.child=cu(u,null,p,f):ir(c,u,p,f),u.child;case 11:return ZA(c,u,u.type,u.pendingProps,f);case 7:return ir(c,u,u.pendingProps,f),u.child;case 8:return ir(c,u,u.pendingProps.children,f),u.child;case 12:return ir(c,u,u.pendingProps.children,f),u.child;case 10:return p=u.pendingProps,La(u,u.type,p.value),ir(c,u,p.children,f),u.child;case 9:return _=u.type._context,p=u.pendingProps.children,bc(u),_=dr(_),p=p(_),u.flags|=1,ir(c,u,p,f),u.child;case 14:return JA(c,u,u.type,u.pendingProps,f);case 15:return tT(c,u,u.type,u.pendingProps,f);case 19:return cT(c,u,f);case 31:return p=u.pendingProps,f=u.mode,p={mode:p.mode,children:p.children},c===null?(f=Hg(p,f),f.ref=u.ref,u.child=f,f.return=u,u=f):(f=Zs(c.child,p),f.ref=u.ref,u.child=f,f.return=u,u=f),u;case 22:return eT(c,u,f);case 24:return bc(u),p=dr(Pn),c===null?(_=ky(),_===null&&(_=je,w=Py(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=f),_=w),u.memoizedState={parent:p,cache:_},Vy(u),La(u,Pn,_)):((c.lanes&f)!==0&&(By(c,u),mf(u,null,null,f),pf()),_=c.memoizedState,w=u.memoizedState,_.parent!==p?(_={parent:p,cache:p},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),La(u,Pn,p)):(p=w.cache,La(u,Pn,p),p!==_.cache&&My(u,[Pn],f,!0))),ir(c,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function aa(c){c.flags|=4}function uT(c,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!vS(u)){if(u=xi.current,u!==null&&((ce&4194048)===ce?fs!==null:(ce&62914560)!==ce&&(ce&536870912)===0||u!==fs))throw df=Ly,YE;c.flags|=8192}}function Gg(c,u){u!==null&&(c.flags|=4),c.flags&16384&&(u=c.tag!==22?Fh():536870912,c.lanes|=u,fu|=u)}function Ef(c,u){if(!me)switch(c.tailMode){case"hidden":u=c.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?c.tail=null:f.sibling=null;break;case"collapsed":f=c.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:p.sibling=null}}function Ze(c){var u=c.alternate!==null&&c.alternate.child===c.child,f=0,p=0;if(u)for(var _=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=c,_=_.sibling;else for(_=c.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=c,_=_.sibling;return c.subtreeFlags|=p,c.childLanes=f,u}function V5(c,u,f){var p=u.pendingProps;switch(Cy(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(u),null;case 1:return Ze(u),null;case 3:return f=u.stateNode,p=null,c!==null&&(p=c.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),na(Pn),Dt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(c===null||c.child===null)&&(af(u)?aa(u):c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,zE())),Ze(u),null;case 26:return f=u.memoizedState,c===null?(aa(u),f!==null?(Ze(u),uT(u,f)):(Ze(u),u.flags&=-16777217)):f?f!==c.memoizedState?(aa(u),Ze(u),uT(u,f)):(Ze(u),u.flags&=-16777217):(c.memoizedProps!==p&&aa(u),Ze(u),u.flags&=-16777217),null;case 27:Ut(u),f=Ot.current;var _=u.type;if(c!==null&&u.stateNode!=null)c.memoizedProps!==p&&aa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return Ze(u),null}c=bt.current,af(u)?UE(u):(c=uS(_,p,f),u.stateNode=c,aa(u))}return Ze(u),null;case 5:if(Ut(u),f=u.type,c!==null&&u.stateNode!=null)c.memoizedProps!==p&&aa(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return Ze(u),null}if(c=bt.current,af(u))UE(u);else{switch(_=rp(Ot.current),c){case 1:c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":c=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":c=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":c=_.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?c.multiple=!0:p.size&&(c.size=p.size);break;default:c=typeof p.is=="string"?_.createElement(f,{is:p.is}):_.createElement(f)}}c[Rn]=u,c[bn]=p;t:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)c.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break t;for(;_.sibling===null;){if(_.return===null||_.return===u)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=c;t:switch(ar(c,f,p),f){case"button":case"input":case"select":case"textarea":c=!!p.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&aa(u)}}return Ze(u),u.flags&=-16777217,null;case 6:if(c&&u.stateNode!=null)c.memoizedProps!==p&&aa(u);else{if(typeof p!="string"&&u.stateNode===null)throw Error(r(166));if(c=Ot.current,af(u)){if(c=u.stateNode,f=u.memoizedProps,p=null,_=Dr,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}c[Rn]=u,c=!!(c.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||rS(c.nodeValue,f)),c||xc(u)}else c=rp(c).createTextNode(p),c[Rn]=u,u.stateNode=c}return Ze(u),null;case 13:if(p=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(_=af(u),p!==null&&p.dehydrated!==null){if(c===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Rn]=u}else of(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ze(u),_=!1}else _=zE(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(ia(u),u):(ia(u),null)}if(ia(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=p!==null,c=c!==null&&c.memoizedState!==null,f){p=u.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var w=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==_&&(p.flags|=2048)}return f!==c&&f&&(u.child.flags|=8192),Gg(u,u.updateQueue),Ze(u),null;case 4:return Dt(),c===null&&Uv(u.stateNode.containerInfo),Ze(u),null;case 10:return na(u.type),Ze(u),null;case 19:if(gt(Nn),_=u.memoizedState,_===null)return Ze(u),null;if(p=(u.flags&128)!==0,w=_.rendering,w===null)if(p)Ef(_,!1);else{if(on!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(w=Fg(c),w!==null){for(u.flags|=128,Ef(_,!1),c=w.updateQueue,u.updateQueue=c,Gg(u,c),u.subtreeFlags=0,c=f,f=u.child;f!==null;)BE(f,c),f=f.sibling;return dt(Nn,Nn.current&1|2),u.child}c=c.sibling}_.tail!==null&&rn()>Yg&&(u.flags|=128,p=!0,Ef(_,!1),u.lanes=4194304)}else{if(!p)if(c=Fg(w),c!==null){if(u.flags|=128,p=!0,c=c.updateQueue,u.updateQueue=c,Gg(u,c),Ef(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!me)return Ze(u),null}else 2*rn()-_.renderingStartTime>Yg&&f!==536870912&&(u.flags|=128,p=!0,Ef(_,!1),u.lanes=4194304);_.isBackwards?(w.sibling=u.child,u.child=w):(c=_.last,c!==null?c.sibling=w:u.child=w,_.last=w)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=rn(),u.sibling=null,c=Nn.current,dt(Nn,p?c&1|2:c&1),u):(Ze(u),null);case 22:case 23:return ia(u),zy(),p=u.memoizedState!==null,c!==null?c.memoizedState!==null!==p&&(u.flags|=8192):p&&(u.flags|=8192),p?(f&536870912)!==0&&(u.flags&128)===0&&(Ze(u),u.subtreeFlags&6&&(u.flags|=8192)):Ze(u),f=u.updateQueue,f!==null&&Gg(u,f.retryQueue),f=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048),c!==null&&gt(Ec),null;case 24:return f=null,c!==null&&(f=c.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),na(Pn),Ze(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function B5(c,u){switch(Cy(u),u.tag){case 1:return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return na(Pn),Dt(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 26:case 27:case 5:return Ut(u),null;case 13:if(ia(u),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));of()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return gt(Nn),null;case 4:return Dt(),null;case 10:return na(u.type),null;case 22:case 23:return ia(u),zy(),c!==null&&gt(Ec),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 24:return na(Pn),null;case 25:return null;default:return null}}function hT(c,u){switch(Cy(u),u.tag){case 3:na(Pn),Dt();break;case 26:case 27:case 5:Ut(u);break;case 4:Dt();break;case 13:ia(u);break;case 19:gt(Nn);break;case 10:na(u.type);break;case 22:case 23:ia(u),zy(),c!==null&&gt(Ec);break;case 24:na(Pn)}}function Af(c,u){try{var f=u.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&c)===c){p=void 0;var w=f.create,D=f.inst;p=w(),D.destroy=p}f=f.next}while(f!==_)}}catch(N){Fe(u,u.return,N)}}function Ha(c,u,f){try{var p=u.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var w=_.next;p=w;do{if((p.tag&c)===c){var D=p.inst,N=D.destroy;if(N!==void 0){D.destroy=void 0,_=u;var G=f,Z=N;try{Z()}catch(ot){Fe(_,G,ot)}}}p=p.next}while(p!==w)}}catch(ot){Fe(u,u.return,ot)}}function fT(c){var u=c.updateQueue;if(u!==null){var f=c.stateNode;try{JE(u,f)}catch(p){Fe(c,c.return,p)}}}function dT(c,u,f){f.props=Tc(c.type,c.memoizedProps),f.state=c.memoizedState;try{f.componentWillUnmount()}catch(p){Fe(c,u,p)}}function Tf(c,u){try{var f=c.ref;if(f!==null){switch(c.tag){case 26:case 27:case 5:var p=c.stateNode;break;case 30:p=c.stateNode;break;default:p=c.stateNode}typeof f=="function"?c.refCleanup=f(p):f.current=p}}catch(_){Fe(c,u,_)}}function ds(c,u){var f=c.ref,p=c.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(_){Fe(c,u,_)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Fe(c,u,_)}else f.current=null}function gT(c){var u=c.type,f=c.memoizedProps,p=c.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(_){Fe(c,c.return,_)}}function mv(c,u,f){try{var p=c.stateNode;sk(p,c.type,f,u),p[bn]=u}catch(_){Fe(c,c.return,_)}}function pT(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Qa(c.type)||c.tag===4}function yv(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||pT(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Qa(c.type)||c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function vv(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(c,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(c),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=np));else if(p!==4&&(p===27&&Qa(c.type)&&(f=c.stateNode,u=null),c=c.child,c!==null))for(vv(c,u,f),c=c.sibling;c!==null;)vv(c,u,f),c=c.sibling}function Wg(c,u,f){var p=c.tag;if(p===5||p===6)c=c.stateNode,u?f.insertBefore(c,u):f.appendChild(c);else if(p!==4&&(p===27&&Qa(c.type)&&(f=c.stateNode),c=c.child,c!==null))for(Wg(c,u,f),c=c.sibling;c!==null;)Wg(c,u,f),c=c.sibling}function mT(c){var u=c.stateNode,f=c.memoizedProps;try{for(var p=c.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);ar(u,p,f),u[Rn]=c,u[bn]=f}catch(w){Fe(c,c.return,w)}}var oa=!1,pn=!1,_v=!1,yT=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function F5(c,u){if(c=c.containerInfo,Hv=lp,c=CE(c),yy(c)){if("selectionStart"in c)var f={start:c.selectionStart,end:c.selectionEnd};else t:{f=(f=c.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var _=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break t}var D=0,N=-1,G=-1,Z=0,ot=0,ht=c,tt=null;e:for(;;){for(var et;ht!==f||_!==0&&ht.nodeType!==3||(N=D+_),ht!==w||p!==0&&ht.nodeType!==3||(G=D+p),ht.nodeType===3&&(D+=ht.nodeValue.length),(et=ht.firstChild)!==null;)tt=ht,ht=et;for(;;){if(ht===c)break e;if(tt===f&&++Z===_&&(N=D),tt===w&&++ot===p&&(G=D),(et=ht.nextSibling)!==null)break;ht=tt,tt=ht.parentNode}ht=et}f=N===-1||G===-1?null:{start:N,end:G}}else f=null}f=f||{start:0,end:0}}else f=null;for(Gv={focusedElem:c,selectionRange:f},lp=!1,Yn=u;Yn!==null;)if(u=Yn,c=u.child,(u.subtreeFlags&1024)!==0&&c!==null)c.return=u,Yn=c;else for(;Yn!==null;){switch(u=Yn,w=u.alternate,c=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&w!==null){c=void 0,f=u,_=w.memoizedProps,w=w.memoizedState,p=f.stateNode;try{var zt=Tc(f.type,_,f.elementType===f.type);c=p.getSnapshotBeforeUpdate(zt,w),p.__reactInternalSnapshotBeforeUpdate=c}catch(Vt){Fe(f,f.return,Vt)}}break;case 3:if((c&1024)!==0){if(c=u.stateNode.containerInfo,f=c.nodeType,f===9)Yv(c);else if(f===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Yv(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=u.sibling,c!==null){c.return=u.return,Yn=c;break}Yn=u.return}}function vT(c,u,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:Ga(c,f),p&4&&Af(5,f);break;case 1:if(Ga(c,f),p&4)if(c=f.stateNode,u===null)try{c.componentDidMount()}catch(D){Fe(f,f.return,D)}else{var _=Tc(f.type,u.memoizedProps);u=u.memoizedState;try{c.componentDidUpdate(_,u,c.__reactInternalSnapshotBeforeUpdate)}catch(D){Fe(f,f.return,D)}}p&64&&fT(f),p&512&&Tf(f,f.return);break;case 3:if(Ga(c,f),p&64&&(c=f.updateQueue,c!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{JE(c,u)}catch(D){Fe(f,f.return,D)}}break;case 27:u===null&&p&4&&mT(f);case 26:case 5:Ga(c,f),u===null&&p&4&&gT(f),p&512&&Tf(f,f.return);break;case 12:Ga(c,f);break;case 13:Ga(c,f),p&4&&wT(c,f),p&64&&(c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(f=X5.bind(null,f),fk(c,f))));break;case 22:if(p=f.memoizedState!==null||oa,!p){u=u!==null&&u.memoizedState!==null||pn,_=oa;var w=pn;oa=p,(pn=u)&&!w?Wa(c,f,(f.subtreeFlags&8772)!==0):Ga(c,f),oa=_,pn=w}break;case 30:break;default:Ga(c,f)}}function _T(c){var u=c.alternate;u!==null&&(c.alternate=null,_T(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&Ma(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Xe=null,Lr=!1;function ca(c,u,f){for(f=f.child;f!==null;)xT(c,u,f),f=f.sibling}function xT(c,u,f){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(sn,f)}catch{}switch(f.tag){case 26:pn||ds(f,u),ca(c,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:pn||ds(f,u);var p=Xe,_=Lr;Qa(f.type)&&(Xe=f.stateNode,Lr=!1),ca(c,u,f),Nf(f.stateNode),Xe=p,Lr=_;break;case 5:pn||ds(f,u);case 6:if(p=Xe,_=Lr,Xe=null,ca(c,u,f),Xe=p,Lr=_,Xe!==null)if(Lr)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(f.stateNode)}catch(w){Fe(f,u,w)}else try{Xe.removeChild(f.stateNode)}catch(w){Fe(f,u,w)}break;case 18:Xe!==null&&(Lr?(c=Xe,cS(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,f.stateNode),zf(c)):cS(Xe,f.stateNode));break;case 4:p=Xe,_=Lr,Xe=f.stateNode.containerInfo,Lr=!0,ca(c,u,f),Xe=p,Lr=_;break;case 0:case 11:case 14:case 15:pn||Ha(2,f,u),pn||Ha(4,f,u),ca(c,u,f);break;case 1:pn||(ds(f,u),p=f.stateNode,typeof p.componentWillUnmount=="function"&&dT(f,u,p)),ca(c,u,f);break;case 21:ca(c,u,f);break;case 22:pn=(p=pn)||f.memoizedState!==null,ca(c,u,f),pn=p;break;default:ca(c,u,f)}}function wT(c,u){if(u.memoizedState===null&&(c=u.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{zf(c)}catch(f){Fe(u,u.return,f)}}function U5(c){switch(c.tag){case 13:case 19:var u=c.stateNode;return u===null&&(u=c.stateNode=new yT),u;case 22:return c=c.stateNode,u=c._retryCache,u===null&&(u=c._retryCache=new yT),u;default:throw Error(r(435,c.tag))}}function xv(c,u){var f=U5(c);u.forEach(function(p){var _=K5.bind(null,c,p);f.has(p)||(f.add(p),p.then(_,_))})}function Jr(c,u){var f=u.deletions;if(f!==null)for(var p=0;p<f.length;p++){var _=f[p],w=c,D=u,N=D;t:for(;N!==null;){switch(N.tag){case 27:if(Qa(N.type)){Xe=N.stateNode,Lr=!1;break t}break;case 5:Xe=N.stateNode,Lr=!1;break t;case 3:case 4:Xe=N.stateNode.containerInfo,Lr=!0;break t}N=N.return}if(Xe===null)throw Error(r(160));xT(w,D,_),Xe=null,Lr=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)bT(u,c),u=u.sibling}var Ui=null;function bT(c,u){var f=c.alternate,p=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Jr(u,c),ti(c),p&4&&(Ha(3,c,c.return),Af(3,c),Ha(5,c,c.return));break;case 1:Jr(u,c),ti(c),p&512&&(pn||f===null||ds(f,f.return)),p&64&&oa&&(c=c.updateQueue,c!==null&&(p=c.callbacks,p!==null&&(f=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var _=Ui;if(Jr(u,c),ti(c),p&512&&(pn||f===null||ds(f,f.return)),p&4){var w=f!==null?f.memoizedState:null;if(p=c.memoizedState,f===null)if(p===null)if(c.stateNode===null){t:{p=c.type,f=c.memoizedProps,_=_.ownerDocument||_;e:switch(p){case"title":w=_.getElementsByTagName("title")[0],(!w||w[tc]||w[Rn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(p),_.head.insertBefore(w,_.querySelector("head > title"))),ar(w,p,f),w[Rn]=c,dn(w),p=w;break t;case"link":var D=mS("link","href",_).get(p+(f.href||""));if(D){for(var N=0;N<D.length;N++)if(w=D[N],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(N,1);break e}}w=_.createElement(p),ar(w,p,f),_.head.appendChild(w);break;case"meta":if(D=mS("meta","content",_).get(p+(f.content||""))){for(N=0;N<D.length;N++)if(w=D[N],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(N,1);break e}}w=_.createElement(p),ar(w,p,f),_.head.appendChild(w);break;default:throw Error(r(468,p))}w[Rn]=c,dn(w),p=w}c.stateNode=p}else yS(_,c.type,c.stateNode);else c.stateNode=pS(_,p,c.memoizedProps);else w!==p?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,p===null?yS(_,c.type,c.stateNode):pS(_,p,c.memoizedProps)):p===null&&c.stateNode!==null&&mv(c,c.memoizedProps,f.memoizedProps)}break;case 27:Jr(u,c),ti(c),p&512&&(pn||f===null||ds(f,f.return)),f!==null&&p&4&&mv(c,c.memoizedProps,f.memoizedProps);break;case 5:if(Jr(u,c),ti(c),p&512&&(pn||f===null||ds(f,f.return)),c.flags&32){_=c.stateNode;try{fi(_,"")}catch(et){Fe(c,c.return,et)}}p&4&&c.stateNode!=null&&(_=c.memoizedProps,mv(c,_,f!==null?f.memoizedProps:_)),p&1024&&(_v=!0);break;case 6:if(Jr(u,c),ti(c),p&4){if(c.stateNode===null)throw Error(r(162));p=c.memoizedProps,f=c.stateNode;try{f.nodeValue=p}catch(et){Fe(c,c.return,et)}}break;case 3:if(ap=null,_=Ui,Ui=ip(u.containerInfo),Jr(u,c),Ui=_,ti(c),p&4&&f!==null&&f.memoizedState.isDehydrated)try{zf(u.containerInfo)}catch(et){Fe(c,c.return,et)}_v&&(_v=!1,ET(c));break;case 4:p=Ui,Ui=ip(c.stateNode.containerInfo),Jr(u,c),ti(c),Ui=p;break;case 12:Jr(u,c),ti(c);break;case 13:Jr(u,c),ti(c),c.child.flags&8192&&c.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Sv=rn()),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,xv(c,p)));break;case 22:_=c.memoizedState!==null;var G=f!==null&&f.memoizedState!==null,Z=oa,ot=pn;if(oa=Z||_,pn=ot||G,Jr(u,c),pn=ot,oa=Z,ti(c),p&8192)t:for(u=c.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(f===null||G||oa||pn||Sc(c)),f=null,u=c;;){if(u.tag===5||u.tag===26){if(f===null){G=f=u;try{if(w=G.stateNode,_)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{N=G.stateNode;var ht=G.memoizedProps.style,tt=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;N.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(et){Fe(G,G.return,et)}}}else if(u.tag===6){if(f===null){G=u;try{G.stateNode.nodeValue=_?"":G.memoizedProps}catch(et){Fe(G,G.return,et)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break t;for(;u.sibling===null;){if(u.return===null||u.return===c)break t;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}p&4&&(p=c.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,xv(c,f))));break;case 19:Jr(u,c),ti(c),p&4&&(p=c.updateQueue,p!==null&&(c.updateQueue=null,xv(c,p)));break;case 30:break;case 21:break;default:Jr(u,c),ti(c)}}function ti(c){var u=c.flags;if(u&2){try{for(var f,p=c.return;p!==null;){if(pT(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,w=yv(c);Wg(c,w,_);break;case 5:var D=f.stateNode;f.flags&32&&(fi(D,""),f.flags&=-33);var N=yv(c);Wg(c,N,D);break;case 3:case 4:var G=f.stateNode.containerInfo,Z=yv(c);vv(c,Z,G);break;default:throw Error(r(161))}}catch(ot){Fe(c,c.return,ot)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function ET(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var u=c;ET(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),c=c.sibling}}function Ga(c,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)vT(c,u.alternate,u),u=u.sibling}function Sc(c){for(c=c.child;c!==null;){var u=c;switch(u.tag){case 0:case 11:case 14:case 15:Ha(4,u,u.return),Sc(u);break;case 1:ds(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&dT(u,u.return,f),Sc(u);break;case 27:Nf(u.stateNode);case 26:case 5:ds(u,u.return),Sc(u);break;case 22:u.memoizedState===null&&Sc(u);break;case 30:Sc(u);break;default:Sc(u)}c=c.sibling}}function Wa(c,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var p=u.alternate,_=c,w=u,D=w.flags;switch(w.tag){case 0:case 11:case 15:Wa(_,w,f),Af(4,w);break;case 1:if(Wa(_,w,f),p=w,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Z){Fe(p,p.return,Z)}if(p=w,_=p.updateQueue,_!==null){var N=p.stateNode;try{var G=_.shared.hiddenCallbacks;if(G!==null)for(_.shared.hiddenCallbacks=null,_=0;_<G.length;_++)ZE(G[_],N)}catch(Z){Fe(p,p.return,Z)}}f&&D&64&&fT(w),Tf(w,w.return);break;case 27:mT(w);case 26:case 5:Wa(_,w,f),f&&p===null&&D&4&&gT(w),Tf(w,w.return);break;case 12:Wa(_,w,f);break;case 13:Wa(_,w,f),f&&D&4&&wT(_,w);break;case 22:w.memoizedState===null&&Wa(_,w,f),Tf(w,w.return);break;case 30:break;default:Wa(_,w,f)}u=u.sibling}}function wv(c,u){var f=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),c=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),c!==f&&(c!=null&&c.refCount++,f!=null&&uf(f))}function bv(c,u){c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&uf(c))}function gs(c,u,f,p){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)AT(c,u,f,p),u=u.sibling}function AT(c,u,f,p){var _=u.flags;switch(u.tag){case 0:case 11:case 15:gs(c,u,f,p),_&2048&&Af(9,u);break;case 1:gs(c,u,f,p);break;case 3:gs(c,u,f,p),_&2048&&(c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&uf(c)));break;case 12:if(_&2048){gs(c,u,f,p),c=u.stateNode;try{var w=u.memoizedProps,D=w.id,N=w.onPostCommit;typeof N=="function"&&N(D,u.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(G){Fe(u,u.return,G)}}else gs(c,u,f,p);break;case 13:gs(c,u,f,p);break;case 23:break;case 22:w=u.stateNode,D=u.alternate,u.memoizedState!==null?w._visibility&2?gs(c,u,f,p):Sf(c,u):w._visibility&2?gs(c,u,f,p):(w._visibility|=2,lu(c,u,f,p,(u.subtreeFlags&10256)!==0)),_&2048&&wv(D,u);break;case 24:gs(c,u,f,p),_&2048&&bv(u.alternate,u);break;default:gs(c,u,f,p)}}function lu(c,u,f,p,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=c,D=u,N=f,G=p,Z=D.flags;switch(D.tag){case 0:case 11:case 15:lu(w,D,N,G,_),Af(8,D);break;case 23:break;case 22:var ot=D.stateNode;D.memoizedState!==null?ot._visibility&2?lu(w,D,N,G,_):Sf(w,D):(ot._visibility|=2,lu(w,D,N,G,_)),_&&Z&2048&&wv(D.alternate,D);break;case 24:lu(w,D,N,G,_),_&&Z&2048&&bv(D.alternate,D);break;default:lu(w,D,N,G,_)}u=u.sibling}}function Sf(c,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=c,p=u,_=p.flags;switch(p.tag){case 22:Sf(f,p),_&2048&&wv(p.alternate,p);break;case 24:Sf(f,p),_&2048&&bv(p.alternate,p);break;default:Sf(f,p)}u=u.sibling}}var If=8192;function uu(c){if(c.subtreeFlags&If)for(c=c.child;c!==null;)TT(c),c=c.sibling}function TT(c){switch(c.tag){case 26:uu(c),c.flags&If&&c.memoizedState!==null&&Tk(Ui,c.memoizedState,c.memoizedProps);break;case 5:uu(c);break;case 3:case 4:var u=Ui;Ui=ip(c.stateNode.containerInfo),uu(c),Ui=u;break;case 22:c.memoizedState===null&&(u=c.alternate,u!==null&&u.memoizedState!==null?(u=If,If=16777216,uu(c),If=u):uu(c));break;default:uu(c)}}function ST(c){var u=c.alternate;if(u!==null&&(c=u.child,c!==null)){u.child=null;do u=c.sibling,c.sibling=null,c=u;while(c!==null)}}function Cf(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];Yn=p,CT(p,c)}ST(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)IT(c),c=c.sibling}function IT(c){switch(c.tag){case 0:case 11:case 15:Cf(c),c.flags&2048&&Ha(9,c,c.return);break;case 3:Cf(c);break;case 12:Cf(c);break;case 22:var u=c.stateNode;c.memoizedState!==null&&u._visibility&2&&(c.return===null||c.return.tag!==13)?(u._visibility&=-3,qg(c)):Cf(c);break;default:Cf(c)}}function qg(c){var u=c.deletions;if((c.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];Yn=p,CT(p,c)}ST(c)}for(c=c.child;c!==null;){switch(u=c,u.tag){case 0:case 11:case 15:Ha(8,u,u.return),qg(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,qg(u));break;default:qg(u)}c=c.sibling}}function CT(c,u){for(;Yn!==null;){var f=Yn;switch(f.tag){case 0:case 11:case 15:Ha(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:uf(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Yn=p;else t:for(f=c;Yn!==null;){p=Yn;var _=p.sibling,w=p.return;if(_T(p),p===f){Yn=null;break t}if(_!==null){_.return=w,Yn=_;break t}Yn=w}}}var j5={getCacheForType:function(c){var u=dr(Pn),f=u.data.get(c);return f===void 0&&(f=c(),u.data.set(c,f)),f}},z5=typeof WeakMap=="function"?WeakMap:Map,Te=0,je=null,ne=null,ce=0,Se=0,ei=null,qa=!1,hu=!1,Ev=!1,la=0,on=0,Ya=0,Ic=0,Av=0,wi=0,fu=0,Df=null,Vr=null,Tv=!1,Sv=0,Yg=1/0,Xg=null,Xa=null,sr=0,Ka=null,du=null,gu=0,Iv=0,Cv=null,DT=null,Rf=0,Dv=null;function ni(){if((Te&2)!==0&&ce!==0)return ce&-ce;if(Q.T!==null){var c=eu;return c!==0?c:Lv()}return Ra()}function RT(){wi===0&&(wi=(ce&536870912)===0||me?Bh():536870912);var c=xi.current;return c!==null&&(c.flags|=32),wi}function ri(c,u,f){(c===je&&(Se===2||Se===9)||c.cancelPendingCommit!==null)&&(pu(c,0),$a(c,ce,wi,!1)),js(c,f),((Te&2)===0||c!==je)&&(c===je&&((Te&2)===0&&(Ic|=f),on===4&&$a(c,ce,wi,!1)),ps(c))}function OT(c,u,f){if((Te&6)!==0)throw Error(r(327));var p=!f&&(u&124)===0&&(u&c.expiredLanes)===0||Jo(c,u),_=p?W5(c,u):Mv(c,u,!0),w=p;do{if(_===0){hu&&!p&&$a(c,u,0,!1);break}else{if(f=c.current.alternate,w&&!H5(f)){_=Mv(c,u,!1),w=!1;continue}if(_===2){if(w=u,c.errorRecoveryDisabledLanes&w)var D=0;else D=c.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){u=D;t:{var N=c;_=Df;var G=N.current.memoizedState.isDehydrated;if(G&&(pu(N,D).flags|=256),D=Mv(N,D,!1),D!==2){if(Ev&&!G){N.errorRecoveryDisabledLanes|=w,Ic|=w,_=4;break t}w=Vr,Vr=_,w!==null&&(Vr===null?Vr=w:Vr.push.apply(Vr,w))}_=D}if(w=!1,_!==2)continue}}if(_===1){pu(c,0),$a(c,u,0,!0);break}t:{switch(p=c,w=_,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:$a(p,u,wi,!qa);break t;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=Sv+300-rn(),10<_)){if($a(p,u,wi,!qa),Ml(p,0,!0)!==0)break t;p.timeoutHandle=aS(MT.bind(null,p,f,Vr,Xg,Tv,u,wi,Ic,fu,qa,w,2,-0,0),_);break t}MT(p,f,Vr,Xg,Tv,u,wi,Ic,fu,qa,w,0,-0,0)}}break}while(!0);ps(c)}function MT(c,u,f,p,_,w,D,N,G,Z,ot,ht,tt,et){if(c.timeoutHandle=-1,ht=u.subtreeFlags,(ht&8192||(ht&16785408)===16785408)&&(Vf={stylesheets:null,count:0,unsuspend:Ak},TT(u),ht=Sk(),ht!==null)){c.cancelPendingCommit=ht(FT.bind(null,c,u,w,f,p,_,D,N,G,ot,1,tt,et)),$a(c,w,D,!Z);return}FT(c,u,w,f,p,_,D,N,G)}function H5(c){for(var u=c;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var _=f[p],w=_.getSnapshot;_=_.value;try{if(!Qr(w(),_))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function $a(c,u,f,p){u&=~Av,u&=~Ic,c.suspendedLanes|=u,c.pingedLanes&=~u,p&&(c.warmLanes|=u),p=c.expirationTimes;for(var _=u;0<_;){var w=31-fr(_),D=1<<w;p[w]=-1,_&=~D}f!==0&&ts(c,f,u)}function Kg(){return(Te&6)===0?(Of(0),!1):!0}function Rv(){if(ne!==null){if(Se===0)var c=ne.return;else c=ne,ea=wc=null,Yy(c),ou=null,wf=0,c=ne;for(;c!==null;)hT(c.alternate,c),c=c.return;ne=null}}function pu(c,u){var f=c.timeoutHandle;f!==-1&&(c.timeoutHandle=-1,ok(f)),f=c.cancelPendingCommit,f!==null&&(c.cancelPendingCommit=null,f()),Rv(),je=c,ne=f=Zs(c.current,null),ce=u,Se=0,ei=null,qa=!1,hu=Jo(c,u),Ev=!1,fu=wi=Av=Ic=Ya=on=0,Vr=Df=null,Tv=!1,(u&8)!==0&&(u|=u&32);var p=c.entangledLanes;if(p!==0)for(c=c.entanglements,p&=u;0<p;){var _=31-fr(p),w=1<<_;u|=c[_],p&=~w}return la=u,yg(),f}function PT(c,u){Kt=null,Q.H=Lg,u===ff||u===Sg?(u=$E(),Se=3):u===YE?(u=$E(),Se=4):Se=u===QA?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ei=u,ne===null&&(on=1,jg(c,mi(u,c.current)))}function NT(){var c=Q.H;return Q.H=Lg,c===null?Lg:c}function kT(){var c=Q.A;return Q.A=j5,c}function Ov(){on=4,qa||(ce&4194048)!==ce&&xi.current!==null||(hu=!0),(Ya&134217727)===0&&(Ic&134217727)===0||je===null||$a(je,ce,wi,!1)}function Mv(c,u,f){var p=Te;Te|=2;var _=NT(),w=kT();(je!==c||ce!==u)&&(Xg=null,pu(c,u)),u=!1;var D=on;t:do try{if(Se!==0&&ne!==null){var N=ne,G=ei;switch(Se){case 8:Rv(),D=6;break t;case 3:case 2:case 9:case 6:xi.current===null&&(u=!0);var Z=Se;if(Se=0,ei=null,mu(c,N,G,Z),f&&hu){D=0;break t}break;default:Z=Se,Se=0,ei=null,mu(c,N,G,Z)}}G5(),D=on;break}catch(ot){PT(c,ot)}while(!0);return u&&c.shellSuspendCounter++,ea=wc=null,Te=p,Q.H=_,Q.A=w,ne===null&&(je=null,ce=0,yg()),D}function G5(){for(;ne!==null;)LT(ne)}function W5(c,u){var f=Te;Te|=2;var p=NT(),_=kT();je!==c||ce!==u?(Xg=null,Yg=rn()+500,pu(c,u)):hu=Jo(c,u);t:do try{if(Se!==0&&ne!==null){u=ne;var w=ei;e:switch(Se){case 1:Se=0,ei=null,mu(c,u,w,1);break;case 2:case 9:if(XE(w)){Se=0,ei=null,VT(u);break}u=function(){Se!==2&&Se!==9||je!==c||(Se=7),ps(c)},w.then(u,u);break t;case 3:Se=7;break t;case 4:Se=5;break t;case 7:XE(w)?(Se=0,ei=null,VT(u)):(Se=0,ei=null,mu(c,u,w,7));break;case 5:var D=null;switch(ne.tag){case 26:D=ne.memoizedState;case 5:case 27:var N=ne;if(!D||vS(D)){Se=0,ei=null;var G=N.sibling;if(G!==null)ne=G;else{var Z=N.return;Z!==null?(ne=Z,$g(Z)):ne=null}break e}}Se=0,ei=null,mu(c,u,w,5);break;case 6:Se=0,ei=null,mu(c,u,w,6);break;case 8:Rv(),on=6;break t;default:throw Error(r(462))}}q5();break}catch(ot){PT(c,ot)}while(!0);return ea=wc=null,Q.H=p,Q.A=_,Te=f,ne!==null?0:(je=null,ce=0,yg(),on)}function q5(){for(;ne!==null&&!Jt();)LT(ne)}function LT(c){var u=lT(c.alternate,c,la);c.memoizedProps=c.pendingProps,u===null?$g(c):ne=u}function VT(c){var u=c,f=u.alternate;switch(u.tag){case 15:case 0:u=rT(f,u,u.pendingProps,u.type,void 0,ce);break;case 11:u=rT(f,u,u.pendingProps,u.type.render,u.ref,ce);break;case 5:Yy(u);default:hT(f,u),u=ne=BE(u,la),u=lT(f,u,la)}c.memoizedProps=c.pendingProps,u===null?$g(c):ne=u}function mu(c,u,f,p){ea=wc=null,Yy(u),ou=null,wf=0;var _=u.return;try{if(k5(c,_,u,f,ce)){on=1,jg(c,mi(f,c.current)),ne=null;return}}catch(w){if(_!==null)throw ne=_,w;on=1,jg(c,mi(f,c.current)),ne=null;return}u.flags&32768?(me||p===1?c=!0:hu||(ce&536870912)!==0?c=!1:(qa=c=!0,(p===2||p===9||p===3||p===6)&&(p=xi.current,p!==null&&p.tag===13&&(p.flags|=16384))),BT(u,c)):$g(u)}function $g(c){var u=c;do{if((u.flags&32768)!==0){BT(u,qa);return}c=u.return;var f=V5(u.alternate,u,la);if(f!==null){ne=f;return}if(u=u.sibling,u!==null){ne=u;return}ne=u=c}while(u!==null);on===0&&(on=5)}function BT(c,u){do{var f=B5(c.alternate,c);if(f!==null){f.flags&=32767,ne=f;return}if(f=c.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(c=c.sibling,c!==null)){ne=c;return}ne=c=f}while(c!==null);on=6,ne=null}function FT(c,u,f,p,_,w,D,N,G){c.cancelPendingCommit=null;do Qg();while(sr!==0);if((Te&6)!==0)throw Error(r(327));if(u!==null){if(u===c.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=by,Uh(c,f,w,D,N,G),c===je&&(ne=je=null,ce=0),du=u,Ka=c,gu=f,Iv=w,Cv=_,DT=p,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,$5(Ko,function(){return GT(),null})):(c.callbackNode=null,c.callbackPriority=0),p=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||p){p=Q.T,Q.T=null,_=at.p,at.p=2,D=Te,Te|=4;try{F5(c,u,f)}finally{Te=D,at.p=_,Q.T=p}}sr=1,UT(),jT(),zT()}}function UT(){if(sr===1){sr=0;var c=Ka,u=du,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=Q.T,Q.T=null;var p=at.p;at.p=2;var _=Te;Te|=4;try{bT(u,c);var w=Gv,D=CE(c.containerInfo),N=w.focusedElem,G=w.selectionRange;if(D!==N&&N&&N.ownerDocument&&IE(N.ownerDocument.documentElement,N)){if(G!==null&&yy(N)){var Z=G.start,ot=G.end;if(ot===void 0&&(ot=Z),"selectionStart"in N)N.selectionStart=Z,N.selectionEnd=Math.min(ot,N.value.length);else{var ht=N.ownerDocument||document,tt=ht&&ht.defaultView||window;if(tt.getSelection){var et=tt.getSelection(),zt=N.textContent.length,Vt=Math.min(G.start,zt),Le=G.end===void 0?Vt:Math.min(G.end,zt);!et.extend&&Vt>Le&&(D=Le,Le=Vt,Vt=D);var Y=SE(N,Vt),q=SE(N,Le);if(Y&&q&&(et.rangeCount!==1||et.anchorNode!==Y.node||et.anchorOffset!==Y.offset||et.focusNode!==q.node||et.focusOffset!==q.offset)){var $=ht.createRange();$.setStart(Y.node,Y.offset),et.removeAllRanges(),Vt>Le?(et.addRange($),et.extend(q.node,q.offset)):($.setEnd(q.node,q.offset),et.addRange($))}}}}for(ht=[],et=N;et=et.parentNode;)et.nodeType===1&&ht.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ht.length;N++){var lt=ht[N];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}lp=!!Hv,Gv=Hv=null}finally{Te=_,at.p=p,Q.T=f}}c.current=u,sr=2}}function jT(){if(sr===2){sr=0;var c=Ka,u=du,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=Q.T,Q.T=null;var p=at.p;at.p=2;var _=Te;Te|=4;try{vT(c,u.alternate,u)}finally{Te=_,at.p=p,Q.T=f}}sr=3}}function zT(){if(sr===4||sr===3){sr=0,Tr();var c=Ka,u=du,f=gu,p=DT;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?sr=5:(sr=0,du=Ka=null,HT(c,c.pendingLanes));var _=c.pendingLanes;if(_===0&&(Xa=null),Pl(f),u=u.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(sn,u,void 0,(u.current.flags&128)===128)}catch{}if(p!==null){u=Q.T,_=at.p,at.p=2,Q.T=null;try{for(var w=c.onRecoverableError,D=0;D<p.length;D++){var N=p[D];w(N.value,{componentStack:N.stack})}}finally{Q.T=u,at.p=_}}(gu&3)!==0&&Qg(),ps(c),_=c.pendingLanes,(f&4194090)!==0&&(_&42)!==0?c===Dv?Rf++:(Rf=0,Dv=c):Rf=0,Of(0)}}function HT(c,u){(c.pooledCacheLanes&=u)===0&&(u=c.pooledCache,u!=null&&(c.pooledCache=null,uf(u)))}function Qg(c){return UT(),jT(),zT(),GT()}function GT(){if(sr!==5)return!1;var c=Ka,u=Iv;Iv=0;var f=Pl(gu),p=Q.T,_=at.p;try{at.p=32>f?32:f,Q.T=null,f=Cv,Cv=null;var w=Ka,D=gu;if(sr=0,du=Ka=null,gu=0,(Te&6)!==0)throw Error(r(331));var N=Te;if(Te|=4,IT(w.current),AT(w,w.current,D,f),Te=N,Of(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(sn,w)}catch{}return!0}finally{at.p=_,Q.T=p,HT(c,u)}}function WT(c,u,f){u=mi(f,u),u=ov(c.stateNode,u,2),c=Fa(c,u,2),c!==null&&(js(c,2),ps(c))}function Fe(c,u,f){if(c.tag===3)WT(c,c,f);else for(;u!==null;){if(u.tag===3){WT(u,c,f);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Xa===null||!Xa.has(p))){c=mi(f,c),f=KA(2),p=Fa(u,f,2),p!==null&&($A(f,p,u,c),js(p,2),ps(p));break}}u=u.return}}function Pv(c,u,f){var p=c.pingCache;if(p===null){p=c.pingCache=new z5;var _=new Set;p.set(u,_)}else _=p.get(u),_===void 0&&(_=new Set,p.set(u,_));_.has(f)||(Ev=!0,_.add(f),c=Y5.bind(null,c,u,f),u.then(c,c))}function Y5(c,u,f){var p=c.pingCache;p!==null&&p.delete(u),c.pingedLanes|=c.suspendedLanes&f,c.warmLanes&=~f,je===c&&(ce&f)===f&&(on===4||on===3&&(ce&62914560)===ce&&300>rn()-Sv?(Te&2)===0&&pu(c,0):Av|=f,fu===ce&&(fu=0)),ps(c)}function qT(c,u){u===0&&(u=Fh()),c=Ql(c,u),c!==null&&(js(c,u),ps(c))}function X5(c){var u=c.memoizedState,f=0;u!==null&&(f=u.retryLane),qT(c,f)}function K5(c,u){var f=0;switch(c.tag){case 13:var p=c.stateNode,_=c.memoizedState;_!==null&&(f=_.retryLane);break;case 19:p=c.stateNode;break;case 22:p=c.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(u),qT(c,f)}function $5(c,u){return qt(c,u)}var Zg=null,yu=null,Nv=!1,Jg=!1,kv=!1,Cc=0;function ps(c){c!==yu&&c.next===null&&(yu===null?Zg=yu=c:yu=yu.next=c),Jg=!0,Nv||(Nv=!0,Z5())}function Of(c,u){if(!kv&&Jg){kv=!0;do for(var f=!1,p=Zg;p!==null;){if(c!==0){var _=p.pendingLanes;if(_===0)var w=0;else{var D=p.suspendedLanes,N=p.pingedLanes;w=(1<<31-fr(42|c)+1)-1,w&=_&~(D&~N),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,$T(p,w))}else w=ce,w=Ml(p,p===je?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||Jo(p,w)||(f=!0,$T(p,w));p=p.next}while(f);kv=!1}}function Q5(){YT()}function YT(){Jg=Nv=!1;var c=0;Cc!==0&&(ak()&&(c=Cc),Cc=0);for(var u=rn(),f=null,p=Zg;p!==null;){var _=p.next,w=XT(p,u);w===0?(p.next=null,f===null?Zg=_:f.next=_,_===null&&(yu=f)):(f=p,(c!==0||(w&3)!==0)&&(Jg=!0)),p=_}Of(c)}function XT(c,u){for(var f=c.suspendedLanes,p=c.pingedLanes,_=c.expirationTimes,w=c.pendingLanes&-62914561;0<w;){var D=31-fr(w),N=1<<D,G=_[D];G===-1?((N&f)===0||(N&p)!==0)&&(_[D]=Vh(N,u)):G<=u&&(c.expiredLanes|=N),w&=~N}if(u=je,f=ce,f=Ml(c,c===u?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p=c.callbackNode,f===0||c===u&&(Se===2||Se===9)||c.cancelPendingCommit!==null)return p!==null&&p!==null&&Xt(p),c.callbackNode=null,c.callbackPriority=0;if((f&3)===0||Jo(c,f)){if(u=f&-f,u===c.callbackPriority)return u;switch(p!==null&&Xt(p),Pl(f)){case 2:case 8:f=ki;break;case 32:f=Ko;break;case 268435456:f=Ol;break;default:f=Ko}return p=KT.bind(null,c),f=qt(f,p),c.callbackPriority=u,c.callbackNode=f,u}return p!==null&&p!==null&&Xt(p),c.callbackPriority=2,c.callbackNode=null,2}function KT(c,u){if(sr!==0&&sr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var f=c.callbackNode;if(Qg()&&c.callbackNode!==f)return null;var p=ce;return p=Ml(c,c===je?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),p===0?null:(OT(c,p,u),XT(c,rn()),c.callbackNode!=null&&c.callbackNode===f?KT.bind(null,c):null)}function $T(c,u){if(Qg())return null;OT(c,u,!0)}function Z5(){ck(function(){(Te&6)!==0?qt(Xr,Q5):YT()})}function Lv(){return Cc===0&&(Cc=Bh()),Cc}function QT(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Fl(""+c)}function ZT(c,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,c.id&&f.setAttribute("form",c.id),u.parentNode.insertBefore(f,u),c=new FormData(c),f.parentNode.removeChild(f),c}function J5(c,u,f,p,_){if(u==="submit"&&f&&f.stateNode===_){var w=QT((_[bn]||null).action),D=p.submitter;D&&(u=(u=D[bn]||null)?QT(u.formAction):D.getAttribute("formAction"),u!==null&&(w=u,D=null));var N=new Ul("action","action",null,p,_);c.push({event:N,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Cc!==0){var G=D?ZT(_,D):new FormData(_);nv(f,{pending:!0,data:G,method:_.method,action:w},null,G)}}else typeof w=="function"&&(N.preventDefault(),G=D?ZT(_,D):new FormData(_),nv(f,{pending:!0,data:G,method:_.method,action:w},w,G))},currentTarget:_}]})}}for(var Vv=0;Vv<wy.length;Vv++){var Bv=wy[Vv],tk=Bv.toLowerCase(),ek=Bv[0].toUpperCase()+Bv.slice(1);Fi(tk,"on"+ek)}Fi(OE,"onAnimationEnd"),Fi(ME,"onAnimationIteration"),Fi(PE,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(v5,"onTransitionRun"),Fi(_5,"onTransitionStart"),Fi(x5,"onTransitionCancel"),Fi(NE,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mf));function JT(c,u){u=(u&4)!==0;for(var f=0;f<c.length;f++){var p=c[f],_=p.event;p=p.listeners;t:{var w=void 0;if(u)for(var D=p.length-1;0<=D;D--){var N=p[D],G=N.instance,Z=N.currentTarget;if(N=N.listener,G!==w&&_.isPropagationStopped())break t;w=N,_.currentTarget=Z;try{w(_)}catch(ot){Ug(ot)}_.currentTarget=null,w=G}else for(D=0;D<p.length;D++){if(N=p[D],G=N.instance,Z=N.currentTarget,N=N.listener,G!==w&&_.isPropagationStopped())break t;w=N,_.currentTarget=Z;try{w(_)}catch(ot){Ug(ot)}_.currentTarget=null,w=G}}}}function re(c,u){var f=u[zh];f===void 0&&(f=u[zh]=new Set);var p=c+"__bubble";f.has(p)||(tS(u,c,2,!1),f.add(p))}function Fv(c,u,f){var p=0;u&&(p|=4),tS(f,c,p,u)}var tp="_reactListening"+Math.random().toString(36).slice(2);function Uv(c){if(!c[tp]){c[tp]=!0,Hh.forEach(function(f){f!=="selectionchange"&&(nk.has(f)||Fv(f,!1,c),Fv(f,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[tp]||(u[tp]=!0,Fv("selectionchange",!1,u))}}function tS(c,u,f,p){switch(AS(u)){case 2:var _=Dk;break;case 8:_=Rk;break;default:_=t_}f=_.bind(null,u,f,c),_=void 0,!gi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),p?_!==void 0?c.addEventListener(u,f,{capture:!0,passive:_}):c.addEventListener(u,f,!0):_!==void 0?c.addEventListener(u,f,{passive:_}):c.addEventListener(u,f,!1)}function jv(c,u,f,p,_){var w=p;if((u&1)===0&&(u&2)===0&&p!==null)t:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var N=p.stateNode.containerInfo;if(N===_)break;if(D===4)for(D=p.return;D!==null;){var G=D.tag;if((G===3||G===4)&&D.stateNode.containerInfo===_)return;D=D.return}for(;N!==null;){if(D=zs(N),D===null)return;if(G=D.tag,G===5||G===6||G===26||G===27){p=w=D;continue t}N=N.parentNode}}p=p.return}ng(function(){var Z=w,ot=di(f),ht=[];t:{var tt=kE.get(c);if(tt!==void 0){var et=Ul,zt=c;switch(c){case"keypress":if(as(f)===0)break t;case"keydown":case"keyup":et=ql;break;case"focusin":zt="focus",et=Hl;break;case"focusout":zt="blur",et=Hl;break;case"beforeblur":case"afterblur":et=Hl;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=ug;break;case OE:case ME:case PE:et=Gl;break;case NE:et=fg;break;case"scroll":case"scrollend":et=rg;break;case"wheel":et=Yl;break;case"copy":case"cut":case"paste":et=Wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=ef;break;case"toggle":case"beforetoggle":et=gg}var Vt=(u&4)!==0,Le=!Vt&&(c==="scroll"||c==="scrollend"),Y=Vt?tt!==null?tt+"Capture":null:tt;Vt=[];for(var q=Z,$;q!==null;){var lt=q;if($=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||$===null||Y===null||(lt=oc(q,Y),lt!=null&&Vt.push(Pf(q,lt,$))),Le)break;q=q.return}0<Vt.length&&(tt=new et(tt,zt,null,f,ot),ht.push({event:tt,listeners:Vt}))}}if((u&7)===0){t:{if(tt=c==="mouseover"||c==="pointerover",et=c==="mouseout"||c==="pointerout",tt&&f!==qs&&(zt=f.relatedTarget||f.fromElement)&&(zs(zt)||zt[hi]))break t;if((et||tt)&&(tt=ot.window===ot?ot:(tt=ot.ownerDocument)?tt.defaultView||tt.parentWindow:window,et?(zt=f.relatedTarget||f.toElement,et=Z,zt=zt?zs(zt):null,zt!==null&&(Le=s(zt),Vt=zt.tag,zt!==Le||Vt!==5&&Vt!==27&&Vt!==6)&&(zt=null)):(et=null,zt=Z),et!==zt)){if(Vt=pi,lt="onMouseLeave",Y="onMouseEnter",q="mouse",(c==="pointerout"||c==="pointerover")&&(Vt=ef,lt="onPointerLeave",Y="onPointerEnter",q="pointer"),Le=et==null?tt:ns(et),$=zt==null?tt:ns(zt),tt=new Vt(lt,q+"leave",et,f,ot),tt.target=Le,tt.relatedTarget=$,lt=null,zs(ot)===Z&&(Vt=new Vt(Y,q+"enter",zt,f,ot),Vt.target=$,Vt.relatedTarget=Le,lt=Vt),Le=lt,et&&zt)e:{for(Vt=et,Y=zt,q=0,$=Vt;$;$=vu($))q++;for($=0,lt=Y;lt;lt=vu(lt))$++;for(;0<q-$;)Vt=vu(Vt),q--;for(;0<$-q;)Y=vu(Y),$--;for(;q--;){if(Vt===Y||Y!==null&&Vt===Y.alternate)break e;Vt=vu(Vt),Y=vu(Y)}Vt=null}else Vt=null;et!==null&&eS(ht,tt,et,Vt,!1),zt!==null&&Le!==null&&eS(ht,Le,zt,Vt,!0)}}t:{if(tt=Z?ns(Z):window,et=tt.nodeName&&tt.nodeName.toLowerCase(),et==="select"||et==="input"&&tt.type==="file")var Tt=xE;else if(Mn(tt))if(wE)Tt=p5;else{Tt=d5;var te=f5}else et=tt.nodeName,!et||et.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Z&&Xh(Z.elementType)&&(Tt=xE):Tt=g5;if(Tt&&(Tt=Tt(c,Z))){Qs(ht,Tt,f,ot);break t}te&&te(c,tt,Z),c==="focusout"&&Z&&tt.type==="number"&&Z.memoizedProps.value!=null&&Na(tt,"number",tt.value)}switch(te=Z?ns(Z):window,c){case"focusin":(Mn(te)||te.contentEditable==="true")&&(Xl=te,vy=Z,sf=null);break;case"focusout":sf=vy=Xl=null;break;case"mousedown":_y=!0;break;case"contextmenu":case"mouseup":case"dragend":_y=!1,DE(ht,f,ot);break;case"selectionchange":if(y5)break;case"keydown":case"keyup":DE(ht,f,ot)}var Mt;if(ls)t:{switch(c){case"compositionstart":var Ft="onCompositionStart";break t;case"compositionend":Ft="onCompositionEnd";break t;case"compositionupdate":Ft="onCompositionUpdate";break t}Ft=void 0}else ae?nt(c,f)&&(Ft="onCompositionEnd"):c==="keydown"&&f.keyCode===229&&(Ft="onCompositionStart");Ft&&(I&&f.locale!=="ko"&&(ae||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&ae&&(Mt=$h()):(ss=ot,ka="value"in ss?ss.value:ss.textContent,ae=!0)),te=ep(Z,Ft),0<te.length&&(Ft=new Jh(Ft,c,null,f,ot),ht.push({event:Ft,listeners:te}),Mt?Ft.data=Mt:(Mt=yt(f),Mt!==null&&(Ft.data=Mt)))),(Mt=A?On(c,f):oe(c,f))&&(Ft=ep(Z,"onBeforeInput"),0<Ft.length&&(te=new Jh("onBeforeInput","beforeinput",null,f,ot),ht.push({event:te,listeners:Ft}),te.data=Mt)),J5(ht,c,Z,f,ot)}JT(ht,u)})}function Pf(c,u,f){return{instance:c,listener:u,currentTarget:f}}function ep(c,u){for(var f=u+"Capture",p=[];c!==null;){var _=c,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=oc(c,f),_!=null&&p.unshift(Pf(c,_,w)),_=oc(c,u),_!=null&&p.push(Pf(c,_,w))),c.tag===3)return p;c=c.return}return[]}function vu(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function eS(c,u,f,p,_){for(var w=u._reactName,D=[];f!==null&&f!==p;){var N=f,G=N.alternate,Z=N.stateNode;if(N=N.tag,G!==null&&G===p)break;N!==5&&N!==26&&N!==27||Z===null||(G=Z,_?(Z=oc(f,w),Z!=null&&D.unshift(Pf(f,Z,G))):_||(Z=oc(f,w),Z!=null&&D.push(Pf(f,Z,G)))),f=f.return}D.length!==0&&c.push({event:u,listeners:D})}var rk=/\r\n?/g,ik=/\u0000|\uFFFD/g;function nS(c){return(typeof c=="string"?c:""+c).replace(rk,`
`).replace(ik,"")}function rS(c,u){return u=nS(u),nS(c)===u}function np(){}function ke(c,u,f,p,_,w){switch(f){case"children":typeof p=="string"?u==="body"||u==="textarea"&&p===""||fi(c,p):(typeof p=="number"||typeof p=="bigint")&&u!=="body"&&fi(c,""+p);break;case"className":rs(c,"class",p);break;case"tabIndex":rs(c,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(c,f,p);break;case"style":Yh(c,p,w);break;case"data":if(u!=="object"){rs(c,"data",p);break}case"src":case"href":if(p===""&&(u!=="a"||f!=="href")){c.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=Fl(""+p),c.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){c.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(u!=="input"&&ke(c,u,"name",_.name,_,null),ke(c,u,"formEncType",_.formEncType,_,null),ke(c,u,"formMethod",_.formMethod,_,null),ke(c,u,"formTarget",_.formTarget,_,null)):(ke(c,u,"encType",_.encType,_,null),ke(c,u,"method",_.method,_,null),ke(c,u,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){c.removeAttribute(f);break}p=Fl(""+p),c.setAttribute(f,p);break;case"onClick":p!=null&&(c.onclick=np);break;case"onScroll":p!=null&&re("scroll",c);break;case"onScrollEnd":p!=null&&re("scrollend",c);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"multiple":c.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":c.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){c.removeAttribute("xlink:href");break}f=Fl(""+p),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""+p):c.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,""):c.removeAttribute(f);break;case"capture":case"download":p===!0?c.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?c.setAttribute(f,p):c.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?c.setAttribute(f,p):c.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?c.removeAttribute(f):c.setAttribute(f,p);break;case"popover":re("beforetoggle",c),re("toggle",c),Pa(c,"popover",p);break;case"xlinkActuate":nr(c,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":nr(c,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":nr(c,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":nr(c,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":nr(c,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":nr(c,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":nr(c,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":nr(c,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":nr(c,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Pa(c,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=hy.get(f)||f,Pa(c,f,p))}}function zv(c,u,f,p,_,w){switch(f){case"style":Yh(c,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));c.innerHTML=f}}break;case"children":typeof p=="string"?fi(c,p):(typeof p=="number"||typeof p=="bigint")&&fi(c,""+p);break;case"onScroll":p!=null&&re("scroll",c);break;case"onScrollEnd":p!=null&&re("scrollend",c);break;case"onClick":p!=null&&(c.onclick=np);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nl.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),u=f.slice(2,_?f.length-7:void 0),w=c[bn]||null,w=w!=null?w[f]:null,typeof w=="function"&&c.removeEventListener(u,w,_),typeof p=="function")){typeof w!="function"&&w!==null&&(f in c?c[f]=null:c.hasAttribute(f)&&c.removeAttribute(f)),c.addEventListener(u,p,_);break t}f in c?c[f]=p:p===!0?c.setAttribute(f,""):Pa(c,f,p)}}}function ar(c,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":re("error",c),re("load",c);var p=!1,_=!1,w;for(w in f)if(f.hasOwnProperty(w)){var D=f[w];if(D!=null)switch(w){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ke(c,u,w,D,f,null)}}_&&ke(c,u,"srcSet",f.srcSet,f,null),p&&ke(c,u,"src",f.src,f,null);return;case"input":re("invalid",c);var N=w=D=_=null,G=null,Z=null;for(p in f)if(f.hasOwnProperty(p)){var ot=f[p];if(ot!=null)switch(p){case"name":_=ot;break;case"type":D=ot;break;case"checked":G=ot;break;case"defaultChecked":Z=ot;break;case"value":w=ot;break;case"defaultValue":N=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(r(137,u));break;default:ke(c,u,p,ot,f,null)}}ic(c,w,N,G,Z,D,_,!1),Bl(c);return;case"select":re("invalid",c),p=D=w=null;for(_ in f)if(f.hasOwnProperty(_)&&(N=f[_],N!=null))switch(_){case"value":w=N;break;case"defaultValue":D=N;break;case"multiple":p=N;default:ke(c,u,_,N,f,null)}u=w,f=D,c.multiple=!!p,u!=null?Ws(c,!!p,u,!1):f!=null&&Ws(c,!!p,f,!0);return;case"textarea":re("invalid",c),w=_=p=null;for(D in f)if(f.hasOwnProperty(D)&&(N=f[D],N!=null))switch(D){case"value":p=N;break;case"defaultValue":_=N;break;case"children":w=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:ke(c,u,D,N,f,null)}sc(c,p,_,w),Bl(c);return;case"option":for(G in f)if(f.hasOwnProperty(G)&&(p=f[G],p!=null))switch(G){case"selected":c.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:ke(c,u,G,p,f,null)}return;case"dialog":re("beforetoggle",c),re("toggle",c),re("cancel",c),re("close",c);break;case"iframe":case"object":re("load",c);break;case"video":case"audio":for(p=0;p<Mf.length;p++)re(Mf[p],c);break;case"image":re("error",c),re("load",c);break;case"details":re("toggle",c);break;case"embed":case"source":case"link":re("error",c),re("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in f)if(f.hasOwnProperty(Z)&&(p=f[Z],p!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ke(c,u,Z,p,f,null)}return;default:if(Xh(u)){for(ot in f)f.hasOwnProperty(ot)&&(p=f[ot],p!==void 0&&zv(c,u,ot,p,f,void 0));return}}for(N in f)f.hasOwnProperty(N)&&(p=f[N],p!=null&&ke(c,u,N,p,f,null))}function sk(c,u,f,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,D=null,N=null,G=null,Z=null,ot=null;for(et in f){var ht=f[et];if(f.hasOwnProperty(et)&&ht!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":G=ht;default:p.hasOwnProperty(et)||ke(c,u,et,null,p,ht)}}for(var tt in p){var et=p[tt];if(ht=f[tt],p.hasOwnProperty(tt)&&(et!=null||ht!=null))switch(tt){case"type":w=et;break;case"name":_=et;break;case"checked":Z=et;break;case"defaultChecked":ot=et;break;case"value":D=et;break;case"defaultValue":N=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,u));break;default:et!==ht&&ke(c,u,tt,et,p,ht)}}$r(c,D,N,G,Z,ot,w,_);return;case"select":et=D=N=tt=null;for(w in f)if(G=f[w],f.hasOwnProperty(w)&&G!=null)switch(w){case"value":break;case"multiple":et=G;default:p.hasOwnProperty(w)||ke(c,u,w,null,p,G)}for(_ in p)if(w=p[_],G=f[_],p.hasOwnProperty(_)&&(w!=null||G!=null))switch(_){case"value":tt=w;break;case"defaultValue":N=w;break;case"multiple":D=w;default:w!==G&&ke(c,u,_,w,p,G)}u=N,f=D,p=et,tt!=null?Ws(c,!!f,tt,!1):!!p!=!!f&&(u!=null?Ws(c,!!f,u,!0):Ws(c,!!f,f?[]:"",!1));return;case"textarea":et=tt=null;for(N in f)if(_=f[N],f.hasOwnProperty(N)&&_!=null&&!p.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ke(c,u,N,null,p,_)}for(D in p)if(_=p[D],w=f[D],p.hasOwnProperty(D)&&(_!=null||w!=null))switch(D){case"value":tt=_;break;case"defaultValue":et=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==w&&ke(c,u,D,_,p,w)}Pe(c,tt,et);return;case"option":for(var zt in f)if(tt=f[zt],f.hasOwnProperty(zt)&&tt!=null&&!p.hasOwnProperty(zt))switch(zt){case"selected":c.selected=!1;break;default:ke(c,u,zt,null,p,tt)}for(G in p)if(tt=p[G],et=f[G],p.hasOwnProperty(G)&&tt!==et&&(tt!=null||et!=null))switch(G){case"selected":c.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:ke(c,u,G,tt,p,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in f)tt=f[Vt],f.hasOwnProperty(Vt)&&tt!=null&&!p.hasOwnProperty(Vt)&&ke(c,u,Vt,null,p,tt);for(Z in p)if(tt=p[Z],et=f[Z],p.hasOwnProperty(Z)&&tt!==et&&(tt!=null||et!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(r(137,u));break;default:ke(c,u,Z,tt,p,et)}return;default:if(Xh(u)){for(var Le in f)tt=f[Le],f.hasOwnProperty(Le)&&tt!==void 0&&!p.hasOwnProperty(Le)&&zv(c,u,Le,void 0,p,tt);for(ot in p)tt=p[ot],et=f[ot],!p.hasOwnProperty(ot)||tt===et||tt===void 0&&et===void 0||zv(c,u,ot,tt,p,et);return}}for(var Y in f)tt=f[Y],f.hasOwnProperty(Y)&&tt!=null&&!p.hasOwnProperty(Y)&&ke(c,u,Y,null,p,tt);for(ht in p)tt=p[ht],et=f[ht],!p.hasOwnProperty(ht)||tt===et||tt==null&&et==null||ke(c,u,ht,tt,p,et)}var Hv=null,Gv=null;function rp(c){return c.nodeType===9?c:c.ownerDocument}function iS(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sS(c,u){if(c===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&u==="foreignObject"?0:c}function Wv(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var qv=null;function ak(){var c=window.event;return c&&c.type==="popstate"?c===qv?!1:(qv=c,!0):(qv=null,!1)}var aS=typeof setTimeout=="function"?setTimeout:void 0,ok=typeof clearTimeout=="function"?clearTimeout:void 0,oS=typeof Promise=="function"?Promise:void 0,ck=typeof queueMicrotask=="function"?queueMicrotask:typeof oS<"u"?function(c){return oS.resolve(null).then(c).catch(lk)}:aS;function lk(c){setTimeout(function(){throw c})}function Qa(c){return c==="head"}function cS(c,u){var f=u,p=0,_=0;do{var w=f.nextSibling;if(c.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"){if(0<p&&8>p){f=p;var D=c.ownerDocument;if(f&1&&Nf(D.documentElement),f&2&&Nf(D.body),f&4)for(f=D.head,Nf(f),D=f.firstChild;D;){var N=D.nextSibling,G=D.nodeName;D[tc]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=N}}if(_===0){c.removeChild(w),zf(u);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:p=f.charCodeAt(0)-48;else p=0;f=w}while(f);zf(u)}function Yv(c){var u=c.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Yv(f),Ma(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}c.removeChild(f)}}function uk(c,u,f,p){for(;c.nodeType===1;){var _=f;if(c.nodeName.toLowerCase()!==u.toLowerCase()){if(!p&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(p){if(!c[tc])switch(u){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(w=c.getAttribute("rel"),w==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(w!==_.rel||c.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||c.getAttribute("title")!==(_.title==null?null:_.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(w=c.getAttribute("src"),(w!==(_.src==null?null:_.src)||c.getAttribute("type")!==(_.type==null?null:_.type)||c.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(u==="input"&&c.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&c.getAttribute("name")===w)return c}else return c;if(c=ji(c.nextSibling),c===null)break}return null}function hk(c,u,f){if(u==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=ji(c.nextSibling),c===null))return null;return c}function Xv(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function fk(c,u){var f=c.ownerDocument;if(c.data!=="$?"||f.readyState==="complete")u();else{var p=function(){u(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),c._reactRetry=p}}function ji(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return c}var Kv=null;function lS(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var f=c.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return c;u--}else f==="/$"&&u++}c=c.previousSibling}return null}function uS(c,u,f){switch(u=rp(f),c){case"html":if(c=u.documentElement,!c)throw Error(r(452));return c;case"head":if(c=u.head,!c)throw Error(r(453));return c;case"body":if(c=u.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Nf(c){for(var u=c.attributes;u.length;)c.removeAttributeNode(u[0]);Ma(c)}var bi=new Map,hS=new Set;function ip(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var ua=at.d;at.d={f:dk,r:gk,D:pk,C:mk,L:yk,m:vk,X:xk,S:_k,M:wk};function dk(){var c=ua.f(),u=Kg();return c||u}function gk(c){var u=es(c);u!==null&&u.tag===5&&u.type==="form"?OA(u):ua.r(c)}var _u=typeof document>"u"?null:document;function fS(c,u,f){var p=_u;if(p&&typeof u=="string"&&u){var _=En(u);_='link[rel="'+c+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),hS.has(_)||(hS.add(_),c={rel:c,crossOrigin:f,href:u},p.querySelector(_)===null&&(u=p.createElement("link"),ar(u,"link",c),dn(u),p.head.appendChild(u)))}}function pk(c){ua.D(c),fS("dns-prefetch",c,null)}function mk(c,u){ua.C(c,u),fS("preconnect",c,u)}function yk(c,u,f){ua.L(c,u,f);var p=_u;if(p&&c&&u){var _='link[rel="preload"][as="'+En(u)+'"]';u==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+En(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+En(f.imageSizes)+'"]')):_+='[href="'+En(c)+'"]';var w=_;switch(u){case"style":w=xu(c);break;case"script":w=wu(c)}bi.has(w)||(c=d({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:c,as:u},f),bi.set(w,c),p.querySelector(_)!==null||u==="style"&&p.querySelector(kf(w))||u==="script"&&p.querySelector(Lf(w))||(u=p.createElement("link"),ar(u,"link",c),dn(u),p.head.appendChild(u)))}}function vk(c,u){ua.m(c,u);var f=_u;if(f&&c){var p=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+En(p)+'"][href="'+En(c)+'"]',w=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=wu(c)}if(!bi.has(w)&&(c=d({rel:"modulepreload",href:c},u),bi.set(w,c),f.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Lf(w)))return}p=f.createElement("link"),ar(p,"link",c),dn(p),f.head.appendChild(p)}}}function _k(c,u,f){ua.S(c,u,f);var p=_u;if(p&&c){var _=Sr(p).hoistableStyles,w=xu(c);u=u||"default";var D=_.get(w);if(!D){var N={loading:0,preload:null};if(D=p.querySelector(kf(w)))N.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":u},f),(f=bi.get(w))&&$v(c,f);var G=D=p.createElement("link");dn(G),ar(G,"link",c),G._p=new Promise(function(Z,ot){G.onload=Z,G.onerror=ot}),G.addEventListener("load",function(){N.loading|=1}),G.addEventListener("error",function(){N.loading|=2}),N.loading|=4,sp(D,u,p)}D={type:"stylesheet",instance:D,count:1,state:N},_.set(w,D)}}}function xk(c,u){ua.X(c,u);var f=_u;if(f&&c){var p=Sr(f).hoistableScripts,_=wu(c),w=p.get(_);w||(w=f.querySelector(Lf(_)),w||(c=d({src:c,async:!0},u),(u=bi.get(_))&&Qv(c,u),w=f.createElement("script"),dn(w),ar(w,"link",c),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function wk(c,u){ua.M(c,u);var f=_u;if(f&&c){var p=Sr(f).hoistableScripts,_=wu(c),w=p.get(_);w||(w=f.querySelector(Lf(_)),w||(c=d({src:c,async:!0,type:"module"},u),(u=bi.get(_))&&Qv(c,u),w=f.createElement("script"),dn(w),ar(w,"link",c),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function dS(c,u,f,p){var _=(_=Ot.current)?ip(_):null;if(!_)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=xu(f.href),f=Sr(_).hoistableStyles,p=f.get(u),p||(p={type:"style",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){c=xu(f.href);var w=Sr(_).hoistableStyles,D=w.get(c);if(D||(_=_.ownerDocument||_,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(c,D),(w=_.querySelector(kf(c)))&&!w._p&&(D.instance=w,D.state.loading=5),bi.has(c)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},bi.set(c,f),w||bk(_,c,f,D.state))),u&&p===null)throw Error(r(528,""));return D}if(u&&p!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=wu(f),f=Sr(_).hoistableScripts,p=f.get(u),p||(p={type:"script",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function xu(c){return'href="'+En(c)+'"'}function kf(c){return'link[rel="stylesheet"]['+c+"]"}function gS(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function bk(c,u,f,p){c.querySelector('link[rel="preload"][as="style"]['+u+"]")?p.loading=1:(u=c.createElement("link"),p.preload=u,u.addEventListener("load",function(){return p.loading|=1}),u.addEventListener("error",function(){return p.loading|=2}),ar(u,"link",f),dn(u),c.head.appendChild(u))}function wu(c){return'[src="'+En(c)+'"]'}function Lf(c){return"script[async]"+c}function pS(c,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var p=c.querySelector('style[data-href~="'+En(f.href)+'"]');if(p)return u.instance=p,dn(p),p;var _=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(c.ownerDocument||c).createElement("style"),dn(p),ar(p,"style",_),sp(p,f.precedence,c),u.instance=p;case"stylesheet":_=xu(f.href);var w=c.querySelector(kf(_));if(w)return u.state.loading|=4,u.instance=w,dn(w),w;p=gS(f),(_=bi.get(_))&&$v(p,_),w=(c.ownerDocument||c).createElement("link"),dn(w);var D=w;return D._p=new Promise(function(N,G){D.onload=N,D.onerror=G}),ar(w,"link",p),u.state.loading|=4,sp(w,f.precedence,c),u.instance=w;case"script":return w=wu(f.src),(_=c.querySelector(Lf(w)))?(u.instance=_,dn(_),_):(p=f,(_=bi.get(w))&&(p=d({},f),Qv(p,_)),c=c.ownerDocument||c,_=c.createElement("script"),dn(_),ar(_,"link",p),c.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(p=u.instance,u.state.loading|=4,sp(p,f.precedence,c));return u.instance}function sp(c,u,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,w=_,D=0;D<p.length;D++){var N=p[D];if(N.dataset.precedence===u)w=N;else if(w!==_)break}w?w.parentNode.insertBefore(c,w.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(c,u.firstChild))}function $v(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.title==null&&(c.title=u.title)}function Qv(c,u){c.crossOrigin==null&&(c.crossOrigin=u.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=u.referrerPolicy),c.integrity==null&&(c.integrity=u.integrity)}var ap=null;function mS(c,u,f){if(ap===null){var p=new Map,_=ap=new Map;_.set(f,p)}else _=ap,p=_.get(f),p||(p=new Map,_.set(f,p));if(p.has(c))return p;for(p.set(c,null),f=f.getElementsByTagName(c),_=0;_<f.length;_++){var w=f[_];if(!(w[tc]||w[Rn]||c==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(u)||"";D=c+D;var N=p.get(D);N?N.push(w):p.set(D,[w])}}return p}function yS(c,u,f){c=c.ownerDocument||c,c.head.insertBefore(f,u==="title"?c.querySelector("head > title"):null)}function Ek(c,u,f){if(f===1||u.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return c=u.disabled,typeof u.precedence=="string"&&c==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function vS(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Vf=null;function Ak(){}function Tk(c,u,f){if(Vf===null)throw Error(r(475));var p=Vf;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=xu(f.href),w=c.querySelector(kf(_));if(w){c=w._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(p.count++,p=op.bind(p),c.then(p,p)),u.state.loading|=4,u.instance=w,dn(w);return}w=c.ownerDocument||c,f=gS(f),(_=bi.get(_))&&$v(f,_),w=w.createElement("link"),dn(w);var D=w;D._p=new Promise(function(N,G){D.onload=N,D.onerror=G}),ar(w,"link",f),u.instance=w}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(u,c),(c=u.state.preload)&&(u.state.loading&3)===0&&(p.count++,u=op.bind(p),c.addEventListener("load",u),c.addEventListener("error",u))}}function Sk(){if(Vf===null)throw Error(r(475));var c=Vf;return c.stylesheets&&c.count===0&&Zv(c,c.stylesheets),0<c.count?function(u){var f=setTimeout(function(){if(c.stylesheets&&Zv(c,c.stylesheets),c.unsuspend){var p=c.unsuspend;c.unsuspend=null,p()}},6e4);return c.unsuspend=u,function(){c.unsuspend=null,clearTimeout(f)}}:null}function op(){if(this.count--,this.count===0){if(this.stylesheets)Zv(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var cp=null;function Zv(c,u){c.stylesheets=null,c.unsuspend!==null&&(c.count++,cp=new Map,u.forEach(Ik,c),cp=null,op.call(c))}function Ik(c,u){if(!(u.state.loading&4)){var f=cp.get(c);if(f)var p=f.get(null);else{f=new Map,cp.set(c,f);for(var _=c.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var D=_[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),p=D)}p&&f.set(null,p)}_=u.instance,D=_.getAttribute("data-precedence"),w=f.get(D)||p,w===p&&f.set(null,_),f.set(D,_),this.count++,p=op.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),w?w.parentNode.insertBefore(_,w.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(_,c.firstChild)),u.state.loading|=4}}var Bf={$$typeof:R,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function Ck(c,u,f,p,_,w,D,N){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function _S(c,u,f,p,_,w,D,N,G,Z,ot,ht){return c=new Ck(c,u,f,D,N,G,Z,ht),u=1,w===!0&&(u|=24),w=Zr(3,null,null,u),c.current=w,w.stateNode=c,u=Py(),u.refCount++,c.pooledCache=u,u.refCount++,w.memoizedState={element:p,isDehydrated:f,cache:u},Vy(w),c}function xS(c){return c?(c=Zl,c):Zl}function wS(c,u,f,p,_,w){_=xS(_),p.context===null?p.context=_:p.pendingContext=_,p=Ba(u),p.payload={element:f},w=w===void 0?null:w,w!==null&&(p.callback=w),f=Fa(c,p,u),f!==null&&(ri(f,c,u),gf(f,c,u))}function bS(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var f=c.retryLane;c.retryLane=f!==0&&f<u?f:u}}function Jv(c,u){bS(c,u),(c=c.alternate)&&bS(c,u)}function ES(c){if(c.tag===13){var u=Ql(c,67108864);u!==null&&ri(u,c,67108864),Jv(c,67108864)}}var lp=!0;function Dk(c,u,f,p){var _=Q.T;Q.T=null;var w=at.p;try{at.p=2,t_(c,u,f,p)}finally{at.p=w,Q.T=_}}function Rk(c,u,f,p){var _=Q.T;Q.T=null;var w=at.p;try{at.p=8,t_(c,u,f,p)}finally{at.p=w,Q.T=_}}function t_(c,u,f,p){if(lp){var _=e_(p);if(_===null)jv(c,u,p,up,f),TS(c,p);else if(Mk(_,c,u,f,p))p.stopPropagation();else if(TS(c,p),u&4&&-1<Ok.indexOf(c)){for(;_!==null;){var w=es(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=Li(w.pendingLanes);if(D!==0){var N=w;for(N.pendingLanes|=2,N.entangledLanes|=2;D;){var G=1<<31-fr(D);N.entanglements[1]|=G,D&=~G}ps(w),(Te&6)===0&&(Yg=rn()+500,Of(0))}}break;case 13:N=Ql(w,2),N!==null&&ri(N,w,2),Kg(),Jv(w,2)}if(w=e_(p),w===null&&jv(c,u,p,up,f),w===_)break;_=w}_!==null&&p.stopPropagation()}else jv(c,u,p,null,f)}}function e_(c){return c=di(c),n_(c)}var up=null;function n_(c){if(up=null,c=zs(c),c!==null){var u=s(c);if(u===null)c=null;else{var f=u.tag;if(f===13){if(c=a(u),c!==null)return c;c=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null)}}return up=c,null}function AS(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ni()){case Xr:return 2;case ki:return 8;case Ko:case ay:return 32;case Ol:return 268435456;default:return 32}default:return 32}}var r_=!1,Za=null,Ja=null,to=null,Ff=new Map,Uf=new Map,eo=[],Ok="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TS(c,u){switch(c){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Ff.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uf.delete(u.pointerId)}}function jf(c,u,f,p,_,w){return c===null||c.nativeEvent!==w?(c={blockedOn:u,domEventName:f,eventSystemFlags:p,nativeEvent:w,targetContainers:[_]},u!==null&&(u=es(u),u!==null&&ES(u)),c):(c.eventSystemFlags|=p,u=c.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),c)}function Mk(c,u,f,p,_){switch(u){case"focusin":return Za=jf(Za,c,u,f,p,_),!0;case"dragenter":return Ja=jf(Ja,c,u,f,p,_),!0;case"mouseover":return to=jf(to,c,u,f,p,_),!0;case"pointerover":var w=_.pointerId;return Ff.set(w,jf(Ff.get(w)||null,c,u,f,p,_)),!0;case"gotpointercapture":return w=_.pointerId,Uf.set(w,jf(Uf.get(w)||null,c,u,f,p,_)),!0}return!1}function SS(c){var u=zs(c.target);if(u!==null){var f=s(u);if(f!==null){if(u=f.tag,u===13){if(u=a(f),u!==null){c.blockedOn=u,K0(c.priority,function(){if(f.tag===13){var p=ni();p=Da(p);var _=Ql(f,p);_!==null&&ri(_,f,p),Jv(f,p)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){c.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}c.blockedOn=null}function hp(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var f=e_(c.nativeEvent);if(f===null){f=c.nativeEvent;var p=new f.constructor(f.type,f);qs=p,f.target.dispatchEvent(p),qs=null}else return u=es(f),u!==null&&ES(u),c.blockedOn=f,!1;u.shift()}return!0}function IS(c,u,f){hp(c)&&f.delete(u)}function Pk(){r_=!1,Za!==null&&hp(Za)&&(Za=null),Ja!==null&&hp(Ja)&&(Ja=null),to!==null&&hp(to)&&(to=null),Ff.forEach(IS),Uf.forEach(IS)}function fp(c,u){c.blockedOn===u&&(c.blockedOn=null,r_||(r_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Pk)))}var dp=null;function CS(c){dp!==c&&(dp=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){dp===c&&(dp=null);for(var u=0;u<c.length;u+=3){var f=c[u],p=c[u+1],_=c[u+2];if(typeof p!="function"){if(n_(p||f)===null)continue;break}var w=es(f);w!==null&&(c.splice(u,3),u-=3,nv(w,{pending:!0,data:_,method:f.method,action:p},p,_))}}))}function zf(c){function u(G){return fp(G,c)}Za!==null&&fp(Za,c),Ja!==null&&fp(Ja,c),to!==null&&fp(to,c),Ff.forEach(u),Uf.forEach(u);for(var f=0;f<eo.length;f++){var p=eo[f];p.blockedOn===c&&(p.blockedOn=null)}for(;0<eo.length&&(f=eo[0],f.blockedOn===null);)SS(f),f.blockedOn===null&&eo.shift();if(f=(c.ownerDocument||c).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var _=f[p],w=f[p+1],D=_[bn]||null;if(typeof w=="function")D||CS(f);else if(D){var N=null;if(w&&w.hasAttribute("formAction")){if(_=w,D=w[bn]||null)N=D.formAction;else if(n_(_)!==null)continue}else N=D.action;typeof N=="function"?f[p+1]=N:(f.splice(p,3),p-=3),CS(f)}}}function i_(c){this._internalRoot=c}gp.prototype.render=i_.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,p=ni();wS(f,p,c,u,null,null)},gp.prototype.unmount=i_.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;wS(c.current,2,null,c,null,null),Kg(),u[hi]=null}};function gp(c){this._internalRoot=c}gp.prototype.unstable_scheduleHydration=function(c){if(c){var u=Ra();c={blockedOn:null,target:c,priority:u};for(var f=0;f<eo.length&&u!==0&&u<eo[f].priority;f++);eo.splice(f,0,c),f===0&&SS(c)}};var DS=t.version;if(DS!=="19.1.0")throw Error(r(527,DS,"19.1.0"));at.findDOMNode=function(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(u),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var Nk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pp.isDisabled&&pp.supportsFiber)try{sn=pp.inject(Nk),Ae=pp}catch{}}return Gf.createRoot=function(c,u){if(!i(c))throw Error(r(299));var f=!1,p="",_=WA,w=qA,D=YA,N=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(N=u.unstable_transitionCallbacks)),u=_S(c,1,!1,null,null,f,p,_,w,D,N,null),c[hi]=u.current,Uv(c),new i_(u)},Gf.hydrateRoot=function(c,u,f){if(!i(c))throw Error(r(299));var p=!1,_="",w=WA,D=qA,N=YA,G=null,Z=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(N=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(G=f.unstable_transitionCallbacks),f.formState!==void 0&&(Z=f.formState)),u=_S(c,1,!0,u,f??null,p,_,w,D,N,G,Z),u.context=xS(null),f=u.current,p=ni(),p=Da(p),_=Ba(p),_.callback=null,Fa(f,_,p),f=p,u.current.lanes=f,js(u,f),ps(u),c[hi]=u.current,Uv(c),new gp(u)},Gf.version="19.1.0",Gf}var FS;function Yk(){if(FS)return o_.exports;FS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),o_.exports=qk(),o_.exports}var Xk=Yk();function Kk({onAddClick:n,onLogout:t,onTabChange:e,currentTab:r}){return V.jsxs("nav",{className:"navbar",children:[V.jsx("button",{onClick:()=>e("dashboard"),title:"Dashboard",className:r==="dashboard"?"text-warning":"text-info",children:V.jsx("i",{className:"bi bi-house-fill"})}),V.jsx("button",{onClick:()=>e("history"),title:"History",children:V.jsx("i",{className:`bi bi-clock-history ${r==="history"?"text-warning":"text-info"}`})}),V.jsx("button",{onClick:n,title:"Add Meal",children:V.jsx("i",{className:`bi bi-plus-circle-fill ${r==="addmead"?"text-warning":"text-info"}`})}),V.jsx("button",{title:"Suggestions",onClick:()=>e("suggestions"),children:V.jsx("i",{className:`bi bi-lightbulb-fill	 ${r==="suggestions"?"text-warning":"text-info"}`})}),V.jsx("button",{onClick:()=>e("profile"),title:"Profile",children:V.jsx("i",{className:`bi bi-person-circle ${r==="profile"?"text-warning":"text-info"}`})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function T0(n){return n+.5|0}const _o=(n,t,e)=>Math.max(Math.min(n,e),t);function cd(n){return _o(T0(n*2.55),0,255)}function Ao(n){return _o(T0(n*255),0,255)}function ga(n){return _o(T0(n/2.55)/100,0,1)}function US(n){return _o(T0(n*100),0,100)}const Ei={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yx=[..."0123456789ABCDEF"],$k=n=>yx[n&15],Qk=n=>yx[(n&240)>>4]+yx[n&15],mp=n=>(n&240)>>4===(n&15),Zk=n=>mp(n.r)&&mp(n.g)&&mp(n.b)&&mp(n.a);function Jk(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Ei[n[1]]*17,g:255&Ei[n[2]]*17,b:255&Ei[n[3]]*17,a:t===5?Ei[n[4]]*17:255}:(t===7||t===9)&&(e={r:Ei[n[1]]<<4|Ei[n[2]],g:Ei[n[3]]<<4|Ei[n[4]],b:Ei[n[5]]<<4|Ei[n[6]],a:t===9?Ei[n[7]]<<4|Ei[n[8]]:255})),e}const t9=(n,t)=>n<255?t(n):"";function e9(n){var t=Zk(n)?$k:Qk;return n?"#"+t(n.r)+t(n.g)+t(n.b)+t9(n.a,t):void 0}const n9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function h4(n,t,e){const r=t*Math.min(e,1-e),i=(s,a=(s+n/30)%12)=>e-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function r9(n,t,e){const r=(i,s=(i+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function i9(n,t,e){const r=h4(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function s9(n,t,e,r,i){return n===i?(t-e)/r+(t<e?6:0):t===i?(e-n)/r+2:(n-t)/r+4}function Z2(n){const e=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(e,r,i),a=Math.min(e,r,i),o=(s+a)/2;let l,h,d;return s!==a&&(d=s-a,h=o>.5?d/(2-s-a):d/(s+a),l=s9(e,r,i,d,s),l=l*60+.5),[l|0,h||0,o]}function J2(n,t,e,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,r)).map(Ao)}function tw(n,t,e){return J2(h4,n,t,e)}function a9(n,t,e){return J2(i9,n,t,e)}function o9(n,t,e){return J2(r9,n,t,e)}function f4(n){return(n%360+360)%360}function c9(n){const t=n9.exec(n);let e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?cd(+t[5]):Ao(+t[5]));const i=f4(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=a9(i,s,a):t[1]==="hsv"?r=o9(i,s,a):r=tw(i,s,a),{r:r[0],g:r[1],b:r[2],a:e}}function l9(n,t){var e=Z2(n);e[0]=f4(e[0]+t),e=tw(e),n.r=e[0],n.g=e[1],n.b=e[2]}function u9(n){if(!n)return;const t=Z2(n),e=t[0],r=US(t[1]),i=US(t[2]);return n.a<255?`hsla(${e}, ${r}%, ${i}%, ${ga(n.a)})`:`hsl(${e}, ${r}%, ${i}%)`}const jS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function h9(){const n={},t=Object.keys(zS),e=Object.keys(jS);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<e.length;i++)s=e[i],o=o.replace(s,jS[s]);s=parseInt(zS[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let yp;function f9(n){yp||(yp=h9(),yp.transparent=[0,0,0,0]);const t=yp[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const d9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function g9(n){const t=d9.exec(n);let e=255,r,i,s;if(t){if(t[7]!==r){const a=+t[7];e=t[8]?cd(a):_o(a*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?cd(r):_o(r,0,255)),i=255&(t[4]?cd(i):_o(i,0,255)),s=255&(t[6]?cd(s):_o(s,0,255)),{r,g:i,b:s,a:e}}}function p9(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ga(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const h_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,bu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function m9(n,t,e){const r=bu(ga(n.r)),i=bu(ga(n.g)),s=bu(ga(n.b));return{r:Ao(h_(r+e*(bu(ga(t.r))-r))),g:Ao(h_(i+e*(bu(ga(t.g))-i))),b:Ao(h_(s+e*(bu(ga(t.b))-s))),a:n.a+e*(t.a-n.a)}}function vp(n,t,e){if(n){let r=Z2(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=tw(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function d4(n,t){return n&&Object.assign(t||{},n)}function HS(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ao(n[3]))):(t=d4(n,{r:0,g:0,b:0,a:1}),t.a=Ao(t.a)),t}function y9(n){return n.charAt(0)==="r"?g9(n):c9(n)}class Yd{constructor(t){if(t instanceof Yd)return t;const e=typeof t;let r;e==="object"?r=HS(t):e==="string"&&(r=Jk(t)||f9(t)||y9(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=d4(this._rgb);return t&&(t.a=ga(t.a)),t}set rgb(t){this._rgb=HS(t)}rgbString(){return this._valid?p9(this._rgb):void 0}hexString(){return this._valid?e9(this._rgb):void 0}hslString(){return this._valid?u9(this._rgb):void 0}mix(t,e){if(t){const r=this.rgb,i=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,l=r.a-i.a,h=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=m9(this._rgb,t._rgb,e)),this}clone(){return new Yd(this.rgb)}alpha(t){return this._rgb.a=Ao(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=T0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return vp(this._rgb,2,t),this}darken(t){return vp(this._rgb,2,-t),this}saturate(t){return vp(this._rgb,1,t),this}desaturate(t){return vp(this._rgb,1,-t),this}rotate(t){return l9(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ha(){}const v9=(()=>{let n=0;return()=>n++})();function Ee(n){return n==null}function Zn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function fe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Pi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ms(n,t){return Pi(n)?n:t}function Qt(n,t){return typeof n>"u"?t:n}const _9=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,g4=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function qe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Re(n,t,e,r){let i,s,a;if(Zn(n))for(s=n.length,i=0;i<s;i++)t.call(e,n[i],i);else if(fe(n))for(a=Object.keys(n),s=a.length,i=0;i<s;i++)t.call(e,n[a[i]],a[i])}function E1(n,t){let e,r,i,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,r=n.length;e<r;++e)if(i=n[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function A1(n){if(Zn(n))return n.map(A1);if(fe(n)){const t=Object.create(null),e=Object.keys(n),r=e.length;let i=0;for(;i<r;++i)t[e[i]]=A1(n[e[i]]);return t}return n}function p4(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function x9(n,t,e,r){if(!p4(n))return;const i=t[n],s=e[n];fe(i)&&fe(s)?Xd(i,s,r):t[n]=A1(s)}function Xd(n,t,e){const r=Zn(t)?t:[t],i=r.length;if(!fe(n))return n;e=e||{};const s=e.merger||x9;let a;for(let o=0;o<i;++o){if(a=r[o],!fe(a))continue;const l=Object.keys(a);for(let h=0,d=l.length;h<d;++h)s(l[h],n,a,e)}return n}function Td(n,t){return Xd(n,t,{merger:w9})}function w9(n,t,e){if(!p4(n))return;const r=t[n],i=e[n];fe(r)&&fe(i)?Td(r,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=A1(i))}const GS={"":n=>n,x:n=>n.x,y:n=>n.y};function b9(n){const t=n.split("."),e=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function E9(n){const t=b9(n);return e=>{for(const r of t){if(r==="")break;e=e&&e[r]}return e}}function ll(n,t){return(GS[t]||(GS[t]=E9(t)))(n)}function ew(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Kd=n=>typeof n<"u",Po=n=>typeof n=="function",WS=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function A9(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Ue=Math.PI,un=2*Ue,T9=un+Ue,T1=Number.POSITIVE_INFINITY,S9=Ue/180,Un=Ue/2,Dc=Ue/4,qS=Ue*2/3,m4=Math.log10,Ss=Math.sign;function Sd(n,t,e){return Math.abs(n-t)<e}function YS(n){const t=Math.round(n);n=Sd(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(m4(n))),r=n/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function I9(n){const t=[],e=Math.sqrt(n);let r;for(r=1;r<e;r++)n%r===0&&(t.push(r),t.push(n/r));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function C9(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function $d(n){return!C9(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function D9(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function R9(n,t,e){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function pa(n){return n*(Ue/180)}function O9(n){return n*(180/Ue)}function XS(n){if(!Pi(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function y4(n,t){const e=t.x-n.x,r=t.y-n.y,i=Math.sqrt(e*e+r*r);let s=Math.atan2(r,e);return s<-.5*Ue&&(s+=un),{angle:s,distance:i}}function vx(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function M9(n,t){return(n-t+T9)%un-Ue}function Wi(n){return(n%un+un)%un}function Qd(n,t,e,r){const i=Wi(n),s=Wi(t),a=Wi(e),o=Wi(s-i),l=Wi(a-i),h=Wi(i-s),d=Wi(i-a);return i===s||i===a||r&&s===a||o>l&&h<d}function xr(n,t,e){return Math.max(t,Math.min(e,n))}function P9(n){return xr(n,-32768,32767)}function xo(n,t,e,r=1e-6){return n>=Math.min(t,e)-r&&n<=Math.max(t,e)+r}function nw(n,t,e){e=e||(a=>n[a]<t);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,e(s)?i=s:r=s;return{lo:i,hi:r}}const Xc=(n,t,e,r)=>nw(n,e,r?i=>{const s=n[i][t];return s<e||s===e&&n[i+1][t]===e}:i=>n[i][t]<e),N9=(n,t,e)=>nw(n,e,r=>n[r][t]>=e);function k9(n,t,e){let r=0,i=n.length;for(;r<i&&n[r]<t;)r++;for(;i>r&&n[i-1]>e;)i--;return r>0||i<n.length?n.slice(r,i):n}const v4=["push","pop","shift","splice","unshift"];function L9(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),v4.forEach(e=>{const r="_onData"+ew(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...s)}),a}})})}function KS(n,t){const e=n._chartjs;if(!e)return;const r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(v4.forEach(s=>{delete n[s]}),delete n._chartjs)}function _4(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const x4=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function w4(n,t){let e=[],r=!1;return function(...i){e=i,r||(r=!0,x4.call(window,()=>{r=!1,n.apply(t,e)}))}}function V9(n,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(n,t,r)):n.apply(this,r),t}}const b4=n=>n==="start"?"left":n==="end"?"right":"center",ii=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,B9=(n,t,e,r)=>n===(r?"left":"right")?e:n==="center"?(t+e)/2:t;function F9(n,t,e){const r=t.length;let i=0,s=r;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=a.axis,{min:g,max:m,minDefined:y,maxDefined:x}=a.getUserBounds();if(y){if(i=Math.min(Xc(l,d,g).lo,e?r:Xc(t,d,a.getPixelForValue(g)).lo),h){const b=l.slice(0,i+1).reverse().findIndex(E=>!Ee(E[o.axis]));i-=Math.max(0,b)}i=xr(i,0,r-1)}if(x){let b=Math.max(Xc(l,a.axis,m,!0).hi+1,e?0:Xc(t,d,a.getPixelForValue(m),!0).hi+1);if(h){const E=l.slice(b-1).findIndex(T=>!Ee(T[o.axis]));b+=Math.max(0,E)}s=xr(b,i,r)-i}else s=r-i}return{start:i,count:s}}function U9(n){const{xScale:t,yScale:e,_scaleRanges:r}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),s}const _p=n=>n===0||n===1,$S=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*un/e)),QS=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*un/e)+1,Id={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Un)+1,easeOutSine:n=>Math.sin(n*Un),easeInOutSine:n=>-.5*(Math.cos(Ue*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>_p(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>_p(n)?n:$S(n,.075,.3),easeOutElastic:n=>_p(n)?n:QS(n,.075,.3),easeInOutElastic(n){return _p(n)?n:n<.5?.5*$S(n*2,.1125,.45):.5+.5*QS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Id.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Id.easeInBounce(n*2)*.5:Id.easeOutBounce(n*2-1)*.5+.5};function rw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ZS(n){return rw(n)?n:new Yd(n)}function f_(n){return rw(n)?n:new Yd(n).saturate(.5).darken(.1).hexString()}const j9=["x","y","borderWidth","radius","tension"],z9=["color","borderColor","backgroundColor"];function H9(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:z9},numbers:{type:"number",properties:j9}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function G9(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const JS=new Map;function W9(n,t){t=t||{};const e=n+JSON.stringify(t);let r=JS.get(e);return r||(r=new Intl.NumberFormat(n,t),JS.set(e,r)),r}function iw(n,t,e){return W9(t,e).format(n)}const q9={values(n){return Zn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),s=Y9(n,e)}const a=m4(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),iw(n,r,l)}};function Y9(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var E4={formatters:q9};function X9(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:E4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ul=Object.create(null),_x=Object.create(null);function Cd(n,t){if(!t)return n;const e=t.split(".");for(let r=0,i=e.length;r<i;++r){const s=e[r];n=n[s]||(n[s]=Object.create(null))}return n}function d_(n,t,e){return typeof t=="string"?Xd(Cd(n,t),e):Xd(Cd(n,""),t)}class K9{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>f_(i.backgroundColor),this.hoverBorderColor=(r,i)=>f_(i.borderColor),this.hoverColor=(r,i)=>f_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return d_(this,t,e)}get(t){return Cd(this,t)}describe(t,e){return d_(_x,t,e)}override(t,e){return d_(ul,t,e)}route(t,e,r,i){const s=Cd(this,t),a=Cd(this,r),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[o],h=a[i];return fe(l)?Object.assign({},h,l):Qt(l,h)},set(l){this[o]=l}}})}apply(t){t.forEach(e=>e(this))}}var vn=new K9({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[H9,G9,X9]);function $9(n){return!n||Ee(n.size)||Ee(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function tI(n,t,e,r,i){let s=t[i];return s||(s=t[i]=n.measureText(i).width,e.push(i)),s>r&&(r=s),r}function Rc(n,t,e){const r=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function eI(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function xx(n,t,e,r){A4(n,t,e,r,null)}function A4(n,t,e,r,i){let s,a,o,l,h,d,g,m;const y=t.pointStyle,x=t.rotation,b=t.radius;let E=(x||0)*S9;if(y&&typeof y=="object"&&(s=y.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,r),n.rotate(E),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),y){default:i?n.ellipse(e,r,i/2,b,0,0,un):n.arc(e,r,b,0,un),n.closePath();break;case"triangle":d=i?i/2:b,n.moveTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=qS,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),E+=qS,n.lineTo(e+Math.sin(E)*d,r-Math.cos(E)*b),n.closePath();break;case"rectRounded":h=b*.516,l=b-h,a=Math.cos(E+Dc)*l,g=Math.cos(E+Dc)*(i?i/2-h:l),o=Math.sin(E+Dc)*l,m=Math.sin(E+Dc)*(i?i/2-h:l),n.arc(e-g,r-o,h,E-Ue,E-Un),n.arc(e+m,r-a,h,E-Un,E),n.arc(e+g,r+o,h,E,E+Un),n.arc(e-m,r+a,h,E+Un,E+Ue),n.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*b,d=i?i/2:l,n.rect(e-d,r-l,2*d,2*l);break}E+=Dc;case"rectRot":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+m,r-a),n.lineTo(e+g,r+o),n.lineTo(e-m,r+a),n.closePath();break;case"crossRot":E+=Dc;case"cross":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"star":g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a),E+=Dc,g=Math.cos(E)*(i?i/2:b),a=Math.cos(E)*b,o=Math.sin(E)*b,m=Math.sin(E)*(i?i/2:b),n.moveTo(e-g,r-o),n.lineTo(e+g,r+o),n.moveTo(e+m,r-a),n.lineTo(e-m,r+a);break;case"line":a=i?i/2:Math.cos(E)*b,o=Math.sin(E)*b,n.moveTo(e-a,r-o),n.lineTo(e+a,r+o);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(E)*(i?i/2:b),r+Math.sin(E)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Zd(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function sw(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function aw(n){n.restore()}function Q9(n,t,e,r,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else i==="after"!=!!r?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Z9(n,t,e,r){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function J9(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ee(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function t7(n,t,e,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,h=e+s.actualBoundingBoxDescent,d=i.strikethrough?(l+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,d),n.lineTo(o,d),n.stroke()}}function e7(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function S1(n,t,e,r,i,s={}){const a=Zn(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let l,h;for(n.save(),n.font=i.string,J9(n,s),l=0;l<a.length;++l)h=a[l],s.backdrop&&e7(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ee(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(h,e,r,s.maxWidth)),n.fillText(h,e,r,s.maxWidth),t7(n,e,r,h,s),r+=Number(i.lineHeight);n.restore()}function I1(n,t){const{x:e,y:r,w:i,h:s,radius:a}=t;n.arc(e+a.topLeft,r+a.topLeft,a.topLeft,1.5*Ue,Ue,!0),n.lineTo(e,r+s-a.bottomLeft),n.arc(e+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Ue,Un,!0),n.lineTo(e+i-a.bottomRight,r+s),n.arc(e+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Un,0,!0),n.lineTo(e+i,r+a.topRight),n.arc(e+i-a.topRight,r+a.topRight,a.topRight,0,-Un,!0),n.lineTo(e+a.topLeft,r)}const n7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,r7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function i7(n,t){const e=(""+n).match(n7);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const s7=n=>+n||0;function ow(n,t){const e={},r=fe(t),i=r?Object.keys(t):t,s=fe(n)?r?a=>Qt(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of i)e[a]=s7(s(a));return e}function T4(n){return ow(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Yu(n){return ow(n,["topLeft","topRight","bottomLeft","bottomRight"])}function $i(n){const t=T4(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function zr(n,t){n=n||{},t=t||vn.font;let e=Qt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=Qt(n.style,t.style);r&&!(""+r).match(r7)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Qt(n.family,t.family),lineHeight:i7(Qt(n.lineHeight,t.lineHeight),e),size:e,style:r,weight:Qt(n.weight,t.weight),string:""};return i.string=$9(i),i}function xp(n,t,e,r){let i,s,a;for(i=0,s=n.length;i<s;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function a7(n,t,e){const{min:r,max:i}=n,s=g4(t,(i-r)/2),a=(o,l)=>e&&o===0?0:o+l;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function bl(n,t){return Object.assign(Object.create(n),t)}function cw(n,t=[""],e,r,i=()=>n[0]){const s=e||n;typeof r>"u"&&(r=D4("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:o=>cw([o,...n],t,s,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return I4(o,l,()=>g7(l,t,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return rI(o).includes(l)},ownKeys(o){return rI(o)},set(o,l,h){const d=o._storage||(o._storage=i());return o[l]=d[l]=h,delete o._keys,!0}})}function th(n,t,e,r){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:S4(n,r),setContext:s=>th(n,s,e,r),override:s=>th(n.override(s),t,e,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return I4(s,a,()=>c7(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function S4(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:r,isScriptable:Po(e)?e:()=>e,isIndexable:Po(r)?r:()=>r}}const o7=(n,t)=>n?n+ew(t):t,lw=(n,t)=>fe(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function I4(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const r=e();return n[t]=r,r}function c7(n,t,e){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=n;let o=r[t];return Po(o)&&a.isScriptable(t)&&(o=l7(t,o,n,e)),Zn(o)&&o.length&&(o=u7(t,o,n,a.isIndexable)),lw(t,o)&&(o=th(o,i,s&&s[t],a)),o}function l7(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=e;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=t(s,a||r);return o.delete(n),lw(n,l)&&(l=uw(i._scopes,i,n,l)),l}function u7(n,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=e;if(typeof s.index<"u"&&r(n))return t[s.index%t.length];if(fe(t[0])){const l=t,h=i._scopes.filter(d=>d!==l);t=[];for(const d of l){const g=uw(h,i,n,d);t.push(th(g,s,a&&a[n],o))}}return t}function C4(n,t,e){return Po(n)?n(t,e):n}const h7=(n,t)=>n===!0?t:typeof n=="string"?ll(t,n):void 0;function f7(n,t,e,r,i){for(const s of t){const a=h7(e,s);if(a){n.add(a);const o=C4(a._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==r)return o}else if(a===!1&&typeof r<"u"&&e!==r)return null}return!1}function uw(n,t,e,r){const i=t._rootScopes,s=C4(t._fallback,e,r),a=[...n,...i],o=new Set;o.add(r);let l=nI(o,a,e,s||e,r);return l===null||typeof s<"u"&&s!==e&&(l=nI(o,a,s,l,r),l===null)?!1:cw(Array.from(o),[""],i,s,()=>d7(t,e,r))}function nI(n,t,e,r,i){for(;e;)e=f7(n,t,e,r,i);return e}function d7(n,t,e){const r=n._getTarget();t in r||(r[t]={});const i=r[t];return Zn(i)&&fe(e)?e:i||{}}function g7(n,t,e,r){let i;for(const s of t)if(i=D4(o7(s,n),e),typeof i<"u")return lw(n,i)?uw(e,r,n,i):i}function D4(n,t){for(const e of t){if(!e)continue;const r=e[n];if(typeof r<"u")return r}}function rI(n){let t=n._keys;return t||(t=n._keys=p7(n._scopes)),t}function p7(n){const t=new Set;for(const e of n)for(const r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const m7=Number.EPSILON||1e-14,eh=(n,t)=>t<n.length&&!n[t].skip&&n[t],R4=n=>n==="x"?"y":"x";function y7(n,t,e,r){const i=n.skip?t:n,s=t,a=e.skip?t:e,o=vx(s,i),l=vx(a,s);let h=o/(o+l),d=l/(o+l);h=isNaN(h)?0:h,d=isNaN(d)?0:d;const g=r*h,m=r*d;return{previous:{x:s.x-g*(a.x-i.x),y:s.y-g*(a.y-i.y)},next:{x:s.x+m*(a.x-i.x),y:s.y+m*(a.y-i.y)}}}function v7(n,t,e){const r=n.length;let i,s,a,o,l,h=eh(n,0);for(let d=0;d<r-1;++d)if(l=h,h=eh(n,d+1),!(!l||!h)){if(Sd(t[d],0,m7)){e[d]=e[d+1]=0;continue}i=e[d]/t[d],s=e[d+1]/t[d],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),e[d]=i*a*t[d],e[d+1]=s*a*t[d])}}function _7(n,t,e="x"){const r=R4(e),i=n.length;let s,a,o,l=eh(n,0);for(let h=0;h<i;++h){if(a=o,o=l,l=eh(n,h+1),!o)continue;const d=o[e],g=o[r];a&&(s=(d-a[e])/3,o[`cp1${e}`]=d-s,o[`cp1${r}`]=g-s*t[h]),l&&(s=(l[e]-d)/3,o[`cp2${e}`]=d+s,o[`cp2${r}`]=g+s*t[h])}}function x7(n,t="x"){const e=R4(t),r=n.length,i=Array(r).fill(0),s=Array(r);let a,o,l,h=eh(n,0);for(a=0;a<r;++a)if(o=l,l=h,h=eh(n,a+1),!!l){if(h){const d=h[t]-l[t];i[a]=d!==0?(h[e]-l[e])/d:0}s[a]=o?h?Ss(i[a-1])!==Ss(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}v7(n,i,s),_7(n,s,t)}function wp(n,t,e){return Math.max(Math.min(n,e),t)}function w7(n,t){let e,r,i,s,a,o=Zd(n[0],t);for(e=0,r=n.length;e<r;++e)a=s,s=o,o=e<r-1&&Zd(n[e+1],t),s&&(i=n[e],a&&(i.cp1x=wp(i.cp1x,t.left,t.right),i.cp1y=wp(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=wp(i.cp2x,t.left,t.right),i.cp2y=wp(i.cp2y,t.top,t.bottom)))}function b7(n,t,e,r,i){let s,a,o,l;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")x7(n,i);else{let h=r?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],l=y7(h,o,n[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,h=o}t.capBezierPoints&&w7(n,e)}function hw(){return typeof window<"u"&&typeof document<"u"}function fw(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function C1(n,t,e){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=n,r}const pm=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function E7(n,t){return pm(n).getPropertyValue(t)}const A7=["top","right","bottom","left"];function tl(n,t,e){const r={};e=e?"-"+e:"";for(let i=0;i<4;i++){const s=A7[i];r[s]=parseFloat(n[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const T7=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function S7(n,t){const e=n.touches,r=e&&e.length?e[0]:n,{offsetX:i,offsetY:s}=r;let a=!1,o,l;if(T7(i,s,n.target))o=i,l=s;else{const h=t.getBoundingClientRect();o=r.clientX-h.left,l=r.clientY-h.top,a=!0}return{x:o,y:l,box:a}}function Lc(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:r}=t,i=pm(e),s=i.boxSizing==="border-box",a=tl(i,"padding"),o=tl(i,"border","width"),{x:l,y:h,box:d}=S7(n,e),g=a.left+(d&&o.left),m=a.top+(d&&o.top);let{width:y,height:x}=t;return s&&(y-=a.width+o.width,x-=a.height+o.height),{x:Math.round((l-g)/y*e.width/r),y:Math.round((h-m)/x*e.height/r)}}function I7(n,t,e){let r,i;if(t===void 0||e===void 0){const s=n&&fw(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const a=s.getBoundingClientRect(),o=pm(s),l=tl(o,"border","width"),h=tl(o,"padding");t=a.width-h.width-l.width,e=a.height-h.height-l.height,r=C1(o.maxWidth,s,"clientWidth"),i=C1(o.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||T1,maxHeight:i||T1}}const bp=n=>Math.round(n*10)/10;function C7(n,t,e,r){const i=pm(n),s=tl(i,"margin"),a=C1(i.maxWidth,n,"clientWidth")||T1,o=C1(i.maxHeight,n,"clientHeight")||T1,l=I7(n,t,e);let{width:h,height:d}=l;if(i.boxSizing==="content-box"){const m=tl(i,"border","width"),y=tl(i,"padding");h-=y.width+m.width,d-=y.height+m.height}return h=Math.max(0,h-s.width),d=Math.max(0,r?h/r:d-s.height),h=bp(Math.min(h,a,l.maxWidth)),d=bp(Math.min(d,o,l.maxHeight)),h&&!d&&(d=bp(h/2)),(t!==void 0||e!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,h=bp(Math.floor(d*r))),{width:h,height:d}}function iI(n,t,e){const r=t||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(n.currentDevicePixelRatio=r,a.height=i,a.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const D7=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};hw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function sI(n,t){const e=E7(n,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Vc(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function R7(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:r==="middle"?e<.5?n.y:t.y:r==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function O7(n,t,e,r){const i={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},a=Vc(n,i,e),o=Vc(i,s,e),l=Vc(s,t,e),h=Vc(a,o,e),d=Vc(o,l,e);return Vc(h,d,e)}const M7=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},P7=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Xu(n,t,e){return n?M7(t,e):P7()}function O4(n,t){let e,r;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=r)}function M4(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function P4(n){return n==="angle"?{between:Qd,compare:M9,normalize:Wi}:{between:xo,compare:(t,e)=>t-e,normalize:t=>t}}function aI({start:n,end:t,count:e,loop:r,style:i}){return{start:n%e,end:t%e,loop:r&&(t-n+1)%e===0,style:i}}function N7(n,t,e){const{property:r,start:i,end:s}=e,{between:a,normalize:o}=P4(r),l=t.length;let{start:h,end:d,loop:g}=n,m,y;if(g){for(h+=l,d+=l,m=0,y=l;m<y&&a(o(t[h%l][r]),i,s);++m)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:g,style:n.style}}function k7(n,t,e){if(!e)return[n];const{property:r,start:i,end:s}=e,a=t.length,{compare:o,between:l,normalize:h}=P4(r),{start:d,end:g,loop:m,style:y}=N7(n,t,e),x=[];let b=!1,E=null,T,S,R;const k=()=>l(i,R,T)&&o(i,R)!==0,P=()=>o(s,T)===0||l(s,R,T),H=()=>b||k(),M=()=>!b||P();for(let C=d,O=d;C<=g;++C)S=t[C%a],!S.skip&&(T=h(S[r]),T!==R&&(b=l(T,i,s),E===null&&H()&&(E=o(T,i)===0?C:O),E!==null&&M()&&(x.push(aI({start:E,end:C,loop:m,count:a,style:y})),E=null),O=C,R=T));return E!==null&&x.push(aI({start:E,end:g,loop:m,count:a,style:y})),x}function L7(n,t){const e=[],r=n.segments;for(let i=0;i<r.length;i++){const s=k7(r[i],n.points,t);s.length&&e.push(...s)}return e}function V7(n,t,e,r){let i=0,s=t-1;if(e&&!r)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&n[s%t].skip;)s--;return s%=t,{start:i,end:s}}function B7(n,t,e,r){const i=n.length,s=[];let a=t,o=n[t],l;for(l=t+1;l<=e;++l){const h=n[l%i];h.skip||h.stop?o.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=a=h.stop?l:null):(a=l,o.skip&&(t=l)),o=h}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function F7(n,t){const e=n.points,r=n.options.spanGaps,i=e.length;if(!i)return[];const s=!!n._loop,{start:a,end:o}=V7(e,i,s,r);if(r===!0)return oI(n,[{start:a,end:o,loop:s}],e,t);const l=o<a?o+i:o,h=!!n._fullLoop&&a===0&&o===i-1;return oI(n,B7(e,a,l,h),e,t)}function oI(n,t,e,r){return!r||!r.setContext||!e?t:U7(n,t,e,r)}function U7(n,t,e,r){const i=n._chart.getContext(),s=cI(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=e.length,h=[];let d=s,g=t[0].start,m=g;function y(x,b,E,T){const S=o?-1:1;if(x!==b){for(x+=l;e[x%l].skip;)x-=S;for(;e[b%l].skip;)b+=S;x%l!==b%l&&(h.push({start:x%l,end:b%l,loop:E,style:T}),d=T,g=b%l)}}for(const x of t){g=o?g:x.start;let b=e[g%l],E;for(m=g+1;m<=x.end;m++){const T=e[m%l];E=cI(r.setContext(bl(i,{type:"segment",p0:b,p1:T,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:a}))),j7(E,d)&&y(g,m-1,x.loop,d),b=T,d=E}g<m-1&&y(g,m-1,x.loop,d)}return h}function cI(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function j7(n,t){if(!t)return!1;const e=[],r=function(i,s){return rw(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(t,r)}function Ep(n,t,e){return n.options.clip?n[e]:t[e]}function z7(n,t){const{xScale:e,yScale:r}=n;return e&&r?{left:Ep(e,t,"left"),right:Ep(e,t,"right"),top:Ep(r,t,"top"),bottom:Ep(r,t,"bottom")}:t}function H7(n,t){const e=t._clip;if(e.disabled)return!1;const r=z7(t,n.chartArea);return{left:e.left===!1?0:r.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:r.right+(e.right===!0?0:e.right),top:e.top===!1?0:r.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:r.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class G7{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){const s=e.listeners[i],a=e.duration;s.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(r-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=x4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fa=new G7;const lI="transparent",W7={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const r=ZS(n||lI),i=r.valid&&ZS(t||lI);return i&&i.valid?i.mix(r,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class q7{constructor(t,e,r,i){const s=e[r];i=xp([t.to,i,s,t.from]);const a=xp([t.from,s,i]);this._active=!0,this._fn=t.fn||W7[t.type||typeof a],this._easing=Id[t.easing]||Id.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=xp([t.to,e,i,t.from]),this._from=xp([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||e<r),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=s;return}l=e/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}}class N4{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!fe(t))return;const e=Object.keys(vn.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!fe(s))return;const a={};for(const o of e)a[o]=s[o];(Zn(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,a)})})}_animateOptions(t,e){const r=e.options,i=X7(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&Y7(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const h=a[l];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(t,e));continue}const d=e[h];let g=s[h];const m=r.get(h);if(g)if(m&&g.active()){g.update(m,d,o);continue}else g.cancel();if(!m||!m.duration){t[h]=d;continue}s[h]=g=new q7(m,t,h,d),i.push(g)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const r=this._createAnimations(t,e);if(r.length)return fa.add(this._chart,r),!0}}function Y7(n,t){const e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function X7(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function uI(n,t){const e=n&&n.options||{},r=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function K7(n,t,e){if(e===!1)return!1;const r=uI(n,e),i=uI(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function $7(n){let t,e,r,i;return fe(n)?(t=n.top,e=n.right,r=n.bottom,i=n.left):t=e=r=i=n,{top:t,right:e,bottom:r,left:i,disabled:n===!1}}function k4(n,t){const e=[],r=n._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)e.push(r[i].index);return e}function hI(n,t,e,r={}){const i=n.keys,s=r.mode==="single";let a,o,l,h;if(t===null)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===e){if(d=!0,r.all)continue;break}h=n.values[l],Pi(h)&&(s||t===0||Ss(t)===Ss(h))&&(t+=h)}return!d&&!r.all?0:t}function Q7(n,t){const{iScale:e,vScale:r}=t,i=e.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,h,d;for(l=0,h=a.length;l<h;++l)d=a[l],o[l]={[i]:d,[s]:n[d]};return o}function g_(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Z7(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function J7(n){const{min:t,max:e,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function tL(n,t,e){const r=n[t]||(n[t]={});return r[e]||(r[e]={})}function fI(n,t,e,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function dI(n,t){const{chart:e,_cachedMeta:r}=n,i=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,h=a.axis,d=Z7(s,a,r),g=t.length;let m;for(let y=0;y<g;++y){const x=t[y],{[l]:b,[h]:E}=x,T=x._stacks||(x._stacks={});m=T[h]=tL(i,d,b),m[o]=E,m._top=fI(m,a,!0,r.type),m._bottom=fI(m,a,!1,r.type);const S=m._visualValues||(m._visualValues={});S[o]=E}}function p_(n,t){const e=n.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function eL(n,t){return bl(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nL(n,t,e){return bl(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Wf(n,t){const e=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){t=t||n._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e],s[r]._visualValues!==void 0&&s[r]._visualValues[e]!==void 0&&delete s[r]._visualValues[e]}}}const m_=n=>n==="reset"||n==="none",gI=(n,t)=>t?n:Object.assign({},n),rL=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:k4(e,!0),values:null};class el{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=g_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Wf(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),i=(g,m,y,x)=>g==="x"?m:g==="r"?x:y,s=e.xAxisID=Qt(r.xAxisID,p_(t,"x")),a=e.yAxisID=Qt(r.yAxisID,p_(t,"y")),o=e.rAxisID=Qt(r.rAxisID,p_(t,"r")),l=e.indexAxis,h=e.iAxisID=i(l,s,a,o),d=e.vAxisID=i(l,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&KS(this._data,this),t._stacked&&Wf(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(fe(e)){const i=this._cachedMeta;this._data=Q7(e,i)}else if(r!==e){if(r){KS(r,this);const i=this._cachedMeta;Wf(i),i._parsed=[]}e&&Object.isExtensible(e)&&L9(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=g_(e.vScale,e),e.stack!==r.stack&&(i=!0,Wf(e),e.stack=r.stack),this._resyncElements(t),(i||s!==e._stacked)&&(dI(this,e._parsed),e._stacked=g_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,o=s.axis;let l=t===0&&e===i.length?!0:r._sorted,h=t>0&&r._parsed[t-1],d,g,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{Zn(i[t])?m=this.parseArrayData(r,i,t,e):fe(i[t])?m=this.parseObjectData(r,i,t,e):m=this.parsePrimitiveData(r,i,t,e);const y=()=>g[o]===null||h&&g[o]<h[o];for(d=0;d<e;++d)r._parsed[d+t]=g=m[d],l&&(y()&&(l=!1),h=g);r._sorted=l}a&&dI(this,m)}parsePrimitiveData(t,e,r,i){const{iScale:s,vScale:a}=t,o=s.axis,l=a.axis,h=s.getLabels(),d=s===a,g=new Array(i);let m,y,x;for(m=0,y=i;m<y;++m)x=m+r,g[m]={[o]:d||s.parse(h[x],x),[l]:a.parse(e[x],x)};return g}parseArrayData(t,e,r,i){const{xScale:s,yScale:a}=t,o=new Array(i);let l,h,d,g;for(l=0,h=i;l<h;++l)d=l+r,g=e[d],o[l]={x:s.parse(g[0],d),y:a.parse(g[1],d)};return o}parseObjectData(t,e,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=new Array(i);let d,g,m,y;for(d=0,g=i;d<g;++d)m=d+r,y=e[m],h[d]={x:s.parse(ll(y,o),m),y:a.parse(ll(y,l),m)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const i=this.chart,s=this._cachedMeta,a=e[t.axis],o={keys:k4(i,!0),values:e._stacks[t.axis]._visualValues};return hI(o,a,s.index,{mode:r})}updateRangeFromParsed(t,e,r,i){const s=r[e.axis];let a=s===null?NaN:s;const o=i&&r._stacks[e.axis];i&&o&&(i.values=o,a=hI(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,o=this._getOtherScale(t),l=rL(e,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:g}=J7(o);let m,y;function x(){y=i[m];const b=y[o.axis];return!Pi(y[t.axis])||d>b||g<b}for(m=0;m<a&&!(!x()&&(this.updateRangeFromParsed(h,t,y,l),s));++m);if(s){for(m=a-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(h,t,y,l);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=e.length;i<s;++i)a=e[i][t.axis],Pi(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=$7(Qt(this.options.clip,K7(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,i=r.data||[],s=e.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,h=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,s,o,l),d=o;d<o+l;++d){const g=i[d];g.hidden||(g.active&&h?a.push(g):g.draw(t,s))}for(d=0;d<a.length;++d)a[d].draw(t,s)}getStyle(t,e){const r=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=nL(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=eL(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const i=e==="active",s=this._cachedDataOpts,a=t+"-"+e,o=s[a],l=this.enableOptionSharing&&Kd(r);if(o)return gI(o,l);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),g=i?[`${t}Hover`,"hover",t,""]:[t,""],m=h.getOptionScopes(this.getDataset(),d),y=Object.keys(vn.elements[t]),x=()=>this.getContext(r,i,e),b=h.resolveNamedOptions(m,y,x,g);return b.$shared&&(b.$shared=l,s[a]=Object.freeze(gI(b,l))),b}_resolveAnimations(t,e,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){const d=this.chart.config,g=d.datasetAnimationScopeKeys(this._type,e),m=d.getOptionScopes(this.getDataset(),g);l=d.createResolver(m,this.getContext(t,r,e))}const h=new N4(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||m_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const r=this.resolveDataElementOptions(t,e),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(e,s)||s!==i;return this.updateSharedOptions(s,e,r),{sharedOptions:s,includeOptions:a}}updateElement(t,e,r,i){m_(i)?Object.assign(t,r):this._resolveAnimations(e,i).update(t,r)}updateSharedOptions(t,e,r){t&&!m_(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[o,l,h]of this._syncList)this[o](l,h);this._syncList=[];const i=r.length,s=e.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,r=!0){const i=this._cachedMeta,s=i.data,a=t+e;let o;const l=h=>{for(h.length+=e,o=h.length-1;o>=a;o--)h[o]=h[o-e]};for(l(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),r&&this.updateElements(s,t,e,"reset")}updateElements(t,e,r,i){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,e);r._stacked&&Wf(r,i)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,i]=t;this[e](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}rt(el,"defaults",{}),rt(el,"datasetElementType",null),rt(el,"dataElementType",null);function iL(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=e.length;i<s;i++)r=r.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=_4(r.sort((i,s)=>i-s))}return n._cache.$bar}function sL(n){const t=n.iScale,e=iL(t,n.type);let r=t._length,i,s,a,o;const l=()=>{a===32767||a===-32768||(Kd(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(i=0,s=e.length;i<s;++i)a=t.getPixelForValue(e[i]),l();for(o=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),l();return r}function aL(n,t,e,r){const i=e.barThickness;let s,a;return Ee(i)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[n]-s/2}}function oL(n,t,e,r){const i=t.pixels,s=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;a===null&&(a=s-(o===null?t.end-t.start:o-s)),o===null&&(o=s+s-a);const h=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:e.barPercentage,start:h}}function cL(n,t,e,r){const i=e.parse(n[0],r),s=e.parse(n[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,h=o;Math.abs(a)>Math.abs(o)&&(l=o,h=a),t[e.axis]=h,t._custom={barStart:l,barEnd:h,start:i,end:s,min:a,max:o}}function L4(n,t,e,r){return Zn(n)?cL(n,t,e,r):t[e.axis]=e.parse(n,r),t}function pI(n,t,e,r){const i=n.iScale,s=n.vScale,a=i.getLabels(),o=i===s,l=[];let h,d,g,m;for(h=e,d=e+r;h<d;++h)m=t[h],g={},g[i.axis]=o||i.parse(a[h],h),l.push(L4(m,g,s,h));return l}function y_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function lL(n,t,e){return n!==0?Ss(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function uL(n){let t,e,r,i,s;return n.horizontal?(t=n.base>n.x,e="left",r="right"):(t=n.base<n.y,e="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:r,reverse:t,top:i,bottom:s}}function hL(n,t,e,r){let i=t.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:h,bottom:d}=uL(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===r?i=h:(e._bottom||0)===r?i=d:(s[mI(d,a,o,l)]=!0,i=h)),s[mI(i,a,o,l)]=!0,n.borderSkipped=s}function mI(n,t,e,r){return r?(n=fL(n,t,e),n=yI(n,e,t)):n=yI(n,t,e),n}function fL(n,t,e){return n===t?e:n===e?t:n}function yI(n,t,e){return n==="start"?t:n==="end"?e:n}function dL(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class Xp extends el{parsePrimitiveData(t,e,r,i){return pI(t,e,r,i)}parseArrayData(t,e,r,i){return pI(t,e,r,i)}parseObjectData(t,e,r,i){const{iScale:s,vScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,h=s.axis==="x"?o:l,d=a.axis==="x"?o:l,g=[];let m,y,x,b;for(m=r,y=r+i;m<y;++m)b=e[m],x={},x[s.axis]=s.parse(ll(b,h),m),g.push(L4(ll(b,d),x,a,m));return g}updateRangeFromParsed(t,e,r,i){super.updateRangeFromParsed(t,e,r,i);const s=r._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:i}=e,s=this.getParsed(t),a=s._custom,o=y_(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),h=o.isHorizontal(),d=this._getRuler(),{sharedOptions:g,includeOptions:m}=this._getSharedOptions(e,i);for(let y=e;y<e+r;y++){const x=this.getParsed(y),b=s||Ee(x[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),E=this._calculateBarIndexPixels(y,d),T=(x._stacks||{})[o.axis],S={horizontal:h,base:b.base,enableBorderRadius:!T||y_(x._custom)||a===T._top||a===T._bottom,x:h?b.head:E.center,y:h?E.center:b.head,height:h?E.size:Math.abs(b.size),width:h?Math.abs(b.size):E.size};m&&(S.options=g||this.resolveDataElementOptions(y,t[y].active?"active":i));const R=S.options||t[y].options;hL(S,R,T,a),dL(S,R,d.ratio),this.updateElement(t[y],y,S,i)}}_getStacks(t,e){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),l=o&&o[r.axis],h=d=>{const g=d._parsed.find(y=>y[r.axis]===l),m=g&&g[d.vScale.axis];if(Ee(m)||isNaN(m))return!0};for(const d of i)if(!(e!==void 0&&h(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[Qt(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,r){const i=this._getStacks(t,r),s=e!==void 0?i.indexOf(e):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,i=[];let s,a;for(s=0,a=e.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const o=t.barThickness;return{min:o||sL(e),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(t),h=l._custom,d=y_(h);let g=l[e.axis],m=0,y=r?this.applyStack(e,l,r):g,x,b;y!==g&&(m=y-g,y=g),d&&(g=h.barStart,y=h.barEnd-h.barStart,g!==0&&Ss(g)!==Ss(h.barEnd)&&(m=0),m+=g);const E=!Ee(s)&&!d?s:m;let T=e.getPixelForValue(E);if(this.chart.getDataVisibility(t)?x=e.getPixelForValue(m+y):x=T,b=x-T,Math.abs(b)<a){b=lL(b,e,o)*a,g===o&&(T-=b/2);const S=e.getPixelForDecimal(0),R=e.getPixelForDecimal(1),k=Math.min(S,R),P=Math.max(S,R);T=Math.max(Math.min(T,P),k),x=T+b,r&&!d&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(x)-e.getValueForPixel(T))}if(T===e.getPixelForValue(o)){const S=Ss(b)*e.getLineWidthForValue(o)/2;T+=S,b-=S}return{size:b,base:T,head:x,center:x+b/2}}_calculateBarIndexPixels(t,e){const r=e.scale,i=this.options,s=i.skipNull,a=Qt(i.maxBarThickness,1/0);let o,l;const h=this._getAxisCount();if(e.grouped){const d=s?this._getStackCount(t):e.stackCount,g=i.barThickness==="flex"?oL(t,e,i,d*h):aL(t,e,i,d*h),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,y=this._getAxis().indexOf(Qt(m,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+y;o=g.start+g.chunk*x+g.chunk/2,l=Math.min(a,g.chunk*g.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,e.min*e.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[e.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}rt(Xp,"id","bar"),rt(Xp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),rt(Xp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function gL(n,t,e){let r=1,i=1,s=0,a=0;if(t<un){const o=n,l=o+t,h=Math.cos(o),d=Math.sin(o),g=Math.cos(l),m=Math.sin(l),y=(R,k,P)=>Qd(R,o,l,!0)?1:Math.max(k,k*e,P,P*e),x=(R,k,P)=>Qd(R,o,l,!0)?-1:Math.min(k,k*e,P,P*e),b=y(0,h,g),E=y(Un,d,m),T=x(Ue,h,g),S=x(Ue+Un,d,m);r=(b-T)/2,i=(E-S)/2,s=-(b+T)/2,a=-(E+S)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class ld extends el{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(fe(r[t])){const{key:l="value"}=this._parsing;s=h=>+ll(r[h],l)}let a,o;for(a=t,o=t+e;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return pa(this.options.rotation-90)}_getCircumference(){return pa(this.options.circumference)}_getRotationExtents(){let t=un,e=-un;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(_9(this.options.cutout,o),1),h=this._getRingWeight(this.index),{circumference:d,rotation:g}=this._getRotationExtents(),{ratioX:m,ratioY:y,offsetX:x,offsetY:b}=gL(g,d,l),E=(r.width-a)/m,T=(r.height-a)/y,S=Math.max(Math.min(E,T)/2,0),R=g4(this.options.radius,S),k=Math.max(R*l,0),P=(R-k)/this._getVisibleDatasetWeightTotal();this.offsetX=x*R,this.offsetY=b*R,i.total=this.calculateTotal(),this.outerRadius=R-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*h,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/un)}updateElements(t,e,r,i){const s=i==="reset",a=this.chart,o=a.chartArea,h=a.options.animation,d=(o.left+o.right)/2,g=(o.top+o.bottom)/2,m=s&&h.animateScale,y=m?0:this.innerRadius,x=m?0:this.outerRadius,{sharedOptions:b,includeOptions:E}=this._getSharedOptions(e,i);let T=this._getRotation(),S;for(S=0;S<e;++S)T+=this._circumference(S,s);for(S=e;S<e+r;++S){const R=this._circumference(S,s),k=t[S],P={x:d+this.offsetX,y:g+this.offsetY,startAngle:T,endAngle:T+R,circumference:R,outerRadius:x,innerRadius:y};E&&(P.options=b||this.resolveDataElementOptions(S,k.active?"active":i)),T+=R,this.updateElement(k,S,P,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let r=0,i;for(i=0;i<e.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?un*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=iw(e._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const r=this.chart;let i,s,a,o,l;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),t=a.data,o=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)l=o.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(Qt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}rt(ld,"id","doughnut"),rt(ld,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),rt(ld,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),rt(ld,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return e.labels.map((s,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}});class Kp extends el{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=e,a=this.chart._animationsDisabled;let{start:o,count:l}=F9(e,i,a);this._drawStart=o,this._drawCount=l,U9(e)&&(o=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:h},t),this.updateElements(i,o,l,t)}updateElements(t,e,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(e,i),m=a.axis,y=o.axis,{spanGaps:x,segment:b}=this.options,E=$d(x)?x:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||i==="none",S=e+r,R=t.length;let k=e>0&&this.getParsed(e-1);for(let P=0;P<R;++P){const H=t[P],M=T?H:{};if(P<e||P>=S){M.skip=!0;continue}const C=this.getParsed(P),O=Ee(C[y]),L=M[m]=a.getPixelForValue(C[m],P),j=M[y]=s||O?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,C,l):C[y],P);M.skip=isNaN(L)||isNaN(j)||O,M.stop=P>0&&Math.abs(C[m]-k[m])>E,b&&(M.parsed=C,M.raw=h.data[P]),g&&(M.options=d||this.resolveDataElementOptions(P,H.active?"active":i)),T||this.updateElement(H,P,M,i),k=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}rt(Kp,"id","line"),rt(Kp,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),rt(Kp,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Oc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dw{constructor(t){rt(this,"options");this.options=t||{}}static override(t){Object.assign(dw.prototype,t)}init(){}formats(){return Oc()}parse(){return Oc()}format(){return Oc()}add(){return Oc()}diff(){return Oc()}startOf(){return Oc()}endOf(){return Oc()}}var V4={_date:dw};function pL(n,t,e,r){const{controller:i,data:s,_sorted:a}=n,o=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const h=o._reversePixels?N9:Xc;if(r){if(i._sharedOptions){const d=s[0],g=typeof d.getRange=="function"&&d.getRange(t);if(g){const m=h(s,t,e-g),y=h(s,t,e+g);return{lo:m.lo,hi:y.hi}}}}else{const d=h(s,t,e);if(l){const{vScale:g}=i._cachedMeta,{_parsed:m}=n,y=m.slice(0,d.lo+1).reverse().findIndex(b=>!Ee(b[g.axis]));d.lo-=Math.max(0,y);const x=m.slice(d.hi).findIndex(b=>!Ee(b[g.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:s.length-1}}function mm(n,t,e,r,i){const s=n.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,l=s.length;o<l;++o){const{index:h,data:d}=s[o],{lo:g,hi:m}=pL(s[o],t,a,i);for(let y=g;y<=m;++y){const x=d[y];x.skip||r(x,h,y)}}}function mL(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function v_(n,t,e,r,i){const s=[];return!i&&!n.isPointInArea(t)||mm(n,e,t,function(o,l,h){!i&&!Zd(o,n.chartArea,0)||o.inRange(t.x,t.y,r)&&s.push({element:o,datasetIndex:l,index:h})},!0),s}function yL(n,t,e,r){let i=[];function s(a,o,l){const{startAngle:h,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:g}=y4(a,{x:t.x,y:t.y});Qd(g,h,d)&&i.push({element:a,datasetIndex:o,index:l})}return mm(n,e,t,s),i}function vL(n,t,e,r,i,s){let a=[];const o=mL(e);let l=Number.POSITIVE_INFINITY;function h(d,g,m){const y=d.inRange(t.x,t.y,i);if(r&&!y)return;const x=d.getCenterPoint(i);if(!(!!s||n.isPointInArea(x))&&!y)return;const E=o(t,x);E<l?(a=[{element:d,datasetIndex:g,index:m}],l=E):E===l&&a.push({element:d,datasetIndex:g,index:m})}return mm(n,e,t,h),a}function __(n,t,e,r,i,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!r?yL(n,t,e,i):vL(n,t,e,r,i,s)}function vI(n,t,e,r,i){const s=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return mm(n,e,t,(l,h,d)=>{l[a]&&l[a](t[e],i)&&(s.push({element:l,datasetIndex:h,index:d}),o=o||l.inRange(t.x,t.y,i))}),r&&!o?[]:s}var _L={modes:{index(n,t,e,r){const i=Lc(t,n),s=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?v_(n,i,s,r,a):__(n,i,s,!1,r,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const d=o[0].index,g=h.data[d];g&&!g.skip&&l.push({element:g,datasetIndex:h.index,index:d})}),l):[]},dataset(n,t,e,r){const i=Lc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?v_(n,i,s,r,a):__(n,i,s,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,h=n.getDatasetMeta(l).data;o=[];for(let d=0;d<h.length;++d)o.push({element:h[d],datasetIndex:l,index:d})}return o},point(n,t,e,r){const i=Lc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return v_(n,i,s,r,a)},nearest(n,t,e,r){const i=Lc(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return __(n,i,s,e.intersect,r,a)},x(n,t,e,r){const i=Lc(t,n);return vI(n,i,"x",e.intersect,r)},y(n,t,e,r){const i=Lc(t,n);return vI(n,i,"y",e.intersect,r)}}};const B4=["left","top","right","bottom"];function qf(n,t){return n.filter(e=>e.pos===t)}function _I(n,t){return n.filter(e=>B4.indexOf(e.pos)===-1&&e.box.axis===t)}function Yf(n,t){return n.sort((e,r)=>{const i=t?r:e,s=t?e:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function xL(n){const t=[];let e,r,i,s,a,o;for(e=0,r=(n||[]).length;e<r;++e)i=n[e],{position:s,options:{stack:a,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}function wL(n){const t={};for(const e of n){const{stack:r,pos:i,stackWeight:s}=e;if(!r||!B4.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function bL(n,t){const e=wL(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,h=e[o.stack],d=h&&o.stackWeight/h.weight;o.horizontal?(o.width=d?d*r:l&&t.availableWidth,o.height=i):(o.width=r,o.height=d?d*i:l&&t.availableHeight)}return e}function EL(n){const t=xL(n),e=Yf(t.filter(h=>h.box.fullSize),!0),r=Yf(qf(t,"left"),!0),i=Yf(qf(t,"right")),s=Yf(qf(t,"top"),!0),a=Yf(qf(t,"bottom")),o=_I(t,"x"),l=_I(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:qf(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function xI(n,t,e,r){return Math.max(n[e],t[e])+Math.max(n[r],t[r])}function F4(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function AL(n,t,e,r){const{pos:i,box:s}=e,a=n.maxPadding;if(!fe(i)){e.size&&(n[i]-=e.size);const g=r[e.stack]||{size:0,count:1};g.size=Math.max(g.size,e.horizontal?s.height:s.width),e.size=g.size/g.count,n[i]+=e.size}s.getPadding&&F4(a,s.getPadding());const o=Math.max(0,t.outerWidth-xI(a,n,"left","right")),l=Math.max(0,t.outerHeight-xI(a,n,"top","bottom")),h=o!==n.w,d=l!==n.h;return n.w=o,n.h=l,e.horizontal?{same:h,other:d}:{same:d,other:h}}function TL(n){const t=n.maxPadding;function e(r){const i=Math.max(t[r]-n[r],0);return n[r]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function SL(n,t){const e=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return r(n?["left","right"]:["top","bottom"])}function ud(n,t,e,r){const i=[];let s,a,o,l,h,d;for(s=0,a=n.length,h=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||t.w,o.height||t.h,SL(o.horizontal,t));const{same:g,other:m}=AL(t,e,o,r);h|=g&&i.length,d=d||m,l.fullSize||i.push(o)}return h&&ud(i,t,e,r)||d}function Ap(n,t,e,r,i){n.top=e,n.left=t,n.right=t+r,n.bottom=e+i,n.width=r,n.height=i}function wI(n,t,e,r){const i=e.padding;let{x:s,y:a}=t;for(const o of n){const l=o.box,h=r[o.stack]||{placed:0,weight:1},d=o.stackWeight/h.weight||1;if(o.horizontal){const g=t.w*d,m=h.size||l.height;Kd(h.start)&&(a=h.start),l.fullSize?Ap(l,i.left,a,e.outerWidth-i.right-i.left,m):Ap(l,t.left+h.placed,a,g,m),h.start=a,h.placed+=g,a=l.bottom}else{const g=t.h*d,m=h.size||l.width;Kd(h.start)&&(s=h.start),l.fullSize?Ap(l,s,i.top,m,e.outerHeight-i.bottom-i.top):Ap(l,s,t.top+h.placed,m,g),h.start=s,h.placed+=g,s=l.right}}t.x=s,t.y=a}var wo={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,r){if(!n)return;const i=$i(n.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(e-i.height,0),o=EL(n.boxes),l=o.vertical,h=o.horizontal;Re(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=l.reduce((b,E)=>E.box.options&&E.box.options.display===!1?b:b+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),m=Object.assign({},i);F4(m,$i(r));const y=Object.assign({maxPadding:m,w:s,h:a,x:i.left,y:i.top},i),x=bL(l.concat(h),g);ud(o.fullSize,y,g,x),ud(l,y,g,x),ud(h,y,g,x)&&ud(l,y,g,x),TL(y),wI(o.leftAndTop,y,g,x),y.x+=y.w,y.y+=y.h,wI(o.rightAndBottom,y,g,x),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Re(o.chartArea,b=>{const E=b.box;Object.assign(E,n.chartArea),E.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class U4{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}}class IL extends U4{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const $p="$chartjs",CL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bI=n=>n===null||n==="";function DL(n,t){const e=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[$p]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",bI(i)){const s=sI(n,"width");s!==void 0&&(n.width=s)}if(bI(r))if(n.style.height==="")n.height=n.width/(t||2);else{const s=sI(n,"height");s!==void 0&&(n.height=s)}return n}const j4=D7?{passive:!0}:!1;function RL(n,t,e){n&&n.addEventListener(t,e,j4)}function OL(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,j4)}function ML(n,t){const e=CL[n.type]||n.type,{x:r,y:i}=Lc(n,t);return{type:e,chart:t,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function D1(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function PL(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||D1(o.addedNodes,r),a=a&&!D1(o.removedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function NL(n,t,e){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||D1(o.removedNodes,r),a=a&&!D1(o.addedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const Jd=new Map;let EI=0;function z4(){const n=window.devicePixelRatio;n!==EI&&(EI=n,Jd.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function kL(n,t){Jd.size||window.addEventListener("resize",z4),Jd.set(n,t)}function LL(n){Jd.delete(n),Jd.size||window.removeEventListener("resize",z4)}function VL(n,t,e){const r=n.canvas,i=r&&fw(r);if(!i)return;const s=w4((o,l)=>{const h=i.clientWidth;e(o,l),h<i.clientWidth&&e()},window),a=new ResizeObserver(o=>{const l=o[0],h=l.contentRect.width,d=l.contentRect.height;h===0&&d===0||s(h,d)});return a.observe(i),kL(n,s),a}function x_(n,t,e){e&&e.disconnect(),t==="resize"&&LL(n)}function BL(n,t,e){const r=n.canvas,i=w4(s=>{n.ctx!==null&&e(ML(s,n))},n);return RL(r,t,i),i}class FL extends U4{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(DL(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[$p])return!1;const r=e[$p].initial;["height","width"].forEach(s=>{const a=r[s];Ee(a)?e.removeAttribute(s):e.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[$p],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),a={attach:PL,detach:NL,resize:VL}[e]||BL;i[e]=a(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:x_,detach:x_,resize:x_}[e]||OL)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return C7(t,e,r,i)}isAttached(t){const e=t&&fw(t);return!!(e&&e.isConnected)}}function UL(n){return!hw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?IL:FL}var Yp;let jo=(Yp=class{constructor(){rt(this,"x");rt(this,"y");rt(this,"active",!1);rt(this,"options");rt(this,"$animations")}tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return $d(this.x)&&$d(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},rt(Yp,"defaults",{}),rt(Yp,"defaultRoutes"),Yp);function jL(n,t){const e=n.options.ticks,r=zL(n),i=Math.min(e.maxTicksLimit||r,r),s=e.major.enabled?GL(t):[],a=s.length,o=s[0],l=s[a-1],h=[];if(a>i)return WL(t,h,s,a/i),h;const d=HL(s,t,i);if(a>0){let g,m;const y=a>1?Math.round((l-o)/(a-1)):null;for(Tp(t,h,d,Ee(y)?0:o-y,o),g=0,m=a-1;g<m;g++)Tp(t,h,d,s[g],s[g+1]);return Tp(t,h,d,l,Ee(y)?t.length:l+y),h}return Tp(t,h,d),h}function zL(n){const t=n.options.offset,e=n._tickSize(),r=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(r,i))}function HL(n,t,e){const r=qL(n),i=t.length/e;if(!r)return Math.max(i,1);const s=I9(r);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>i)return l}return Math.max(i,1)}function GL(n){const t=[];let e,r;for(e=0,r=n.length;e<r;e++)n[e].major&&t.push(e);return t}function WL(n,t,e,r){let i=0,s=e[0],a;for(r=Math.ceil(r),a=0;a<n.length;a++)a===s&&(t.push(n[a]),i++,s=e[i*r])}function Tp(n,t,e,r,i){const s=Qt(r,0),a=Math.min(Qt(i,n.length),n.length);let o=0,l,h,d;for(e=Math.ceil(e),i&&(l=i-r,e=l/Math.floor(l/e)),d=s;d<0;)o++,d=Math.round(s+o*e);for(h=Math.max(s,0);h<a;h++)h===d&&(t.push(n[h]),o++,d=Math.round(s+o*e))}function qL(n){const t=n.length;let e,r;if(t<2)return!1;for(r=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==r)return!1;return r}const YL=n=>n==="left"?"right":n==="right"?"left":n,AI=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,TI=(n,t)=>Math.min(t||n,n);function SI(n,t){const e=[],r=n.length/t,i=n.length;let s=0;for(;s<i;s+=r)e.push(n[Math.floor(s)]);return e}function XL(n,t,e){const r=n.ticks.length,i=Math.min(t,r-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(i),h;if(!(e&&(r===1?h=Math.max(l-s,a-l):t===0?h=(n.getPixelForTick(1)-l)/2:h=(l-n.getPixelForTick(i-1))/2,l+=i<t?h:-h,l<s-o||l>a+o)))return l}function KL(n,t){Re(n,e=>{const r=e.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[r[s]];r.splice(0,i)}})}function Xf(n){return n.drawTicks?n.tickLength:0}function II(n,t){if(!n.display)return 0;const e=zr(n.font,t),r=$i(n.padding);return(Zn(n.text)?n.text.length:1)*e.lineHeight+r.height}function $L(n,t){return bl(n,{scale:t,type:"scale"})}function QL(n,t,e){return bl(n,{tick:e,index:t,type:"tick"})}function ZL(n,t,e){let r=b4(n);return(e&&t!=="right"||!e&&t==="right")&&(r=YL(r)),r}function JL(n,t,e,r){const{top:i,left:s,bottom:a,right:o,chart:l}=n,{chartArea:h,scales:d}=l;let g=0,m,y,x;const b=a-i,E=o-s;if(n.isHorizontal()){if(y=ii(r,s,o),fe(e)){const T=Object.keys(e)[0],S=e[T];x=d[T].getPixelForValue(S)+b-t}else e==="center"?x=(h.bottom+h.top)/2+b-t:x=AI(n,e,t);m=o-s}else{if(fe(e)){const T=Object.keys(e)[0],S=e[T];y=d[T].getPixelForValue(S)-E+t}else e==="center"?y=(h.left+h.right)/2-E+t:y=AI(n,e,t);x=ii(r,a,i),g=e==="left"?-Un:Un}return{titleX:y,titleY:x,maxWidth:m,rotation:g}}class Eh extends jo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=ms(t,Number.POSITIVE_INFINITY),e=ms(e,Number.NEGATIVE_INFINITY),r=ms(r,Number.POSITIVE_INFINITY),i=ms(i,Number.NEGATIVE_INFINITY),{min:ms(t,r),max:ms(e,i),minDefined:Pi(t),maxDefined:Pi(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:e,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,h=o.length;l<h;++l)a=o[l].controller.getMinMax(this,t),i||(e=Math.min(e,a.min)),s||(r=Math.max(r,a.max));return e=s&&e>r?r:e,r=i&&e>r?e:r,{min:ms(e,ms(r,e)),max:ms(r,ms(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qe(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=a7(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?SI(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=jL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qe(this.options.afterUpdate,[this])}beforeSetDimensions(){qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),qe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=qe(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=TI(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation;let a=i,o,l,h;if(!this._isVisible()||!e.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),g=d.widest.width,m=d.highest.height,y=xr(this.chart.width-g,0,this.maxWidth);o=t.offset?this.maxWidth/r:y/(r-1),g+6>o&&(o=y/(r-(t.offset?.5:1)),l=this.maxHeight-Xf(t.grid)-e.padding-II(t.title,this.chart.options.font),h=Math.sqrt(g*g+m*m),a=O9(Math.min(Math.asin(xr((d.highest.height+6)/o,-1,1)),Math.asin(xr(l/h,-1,1))-Math.asin(xr(m/h,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=II(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=Xf(s)+l):(t.height=this.maxHeight,t.width=Xf(s)+l),r.display&&this.ticks.length){const{first:h,last:d,widest:g,highest:m}=this._getLabelSizes(),y=r.padding*2,x=pa(this.labelRotation),b=Math.cos(x),E=Math.sin(x);if(o){const T=r.mirror?0:E*g.width+b*m.height;t.height=Math.min(this.maxHeight,t.height+T+y)}else{const T=r.mirror?0:b*g.width+E*m.height;t.width=Math.min(this.maxWidth,t.width+T+y)}this._calculatePadding(h,d,E,b)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,h=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?h?(m=i*t.width,y=r*e.height):(m=r*t.height,y=i*e.width):s==="start"?y=e.width:s==="end"?m=t.width:s!=="inner"&&(m=t.width/2,y=e.width/2),this.paddingLeft=Math.max((m-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((y-g+a)*this.width/(this.width-g),0)}else{let d=e.height/2,g=t.height/2;s==="start"?(d=0,g=t.height):s==="end"&&(d=e.height,g=0),this.paddingTop=d+a,this.paddingBottom=g+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)Ee(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=SI(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(e/TI(e,r));let h=0,d=0,g,m,y,x,b,E,T,S,R,k,P;for(g=0;g<e;g+=l){if(x=t[g].label,b=this._resolveTickFontOptions(g),i.font=E=b.string,T=s[E]=s[E]||{data:{},gc:[]},S=b.lineHeight,R=k=0,!Ee(x)&&!Zn(x))R=tI(i,T.data,T.gc,R,x),k=S;else if(Zn(x))for(m=0,y=x.length;m<y;++m)P=x[m],!Ee(P)&&!Zn(P)&&(R=tI(i,T.data,T.gc,R,P),k+=S);a.push(R),o.push(k),h=Math.max(R,h),d=Math.max(k,d)}KL(s,e);const H=a.indexOf(h),M=o.indexOf(d),C=O=>({width:a[O]||0,height:o[O]||0});return{first:C(0),last:C(e-1),widest:C(H),highest:C(M),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return P9(this._alignToPixels?Rc(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=QL(this.getContext(),t,r))}return this.$context||(this.$context=$L(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=pa(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,h=this.isHorizontal(),g=this.ticks.length+(l?1:0),m=Xf(s),y=[],x=o.setContext(this.getContext()),b=x.display?x.width:0,E=b/2,T=function(Q){return Rc(r,Q,b)};let S,R,k,P,H,M,C,O,L,j,z,U;if(a==="top")S=T(this.bottom),M=this.bottom-m,O=S-E,j=T(t.top)+E,U=t.bottom;else if(a==="bottom")S=T(this.top),j=t.top,U=T(t.bottom)-E,M=S+E,O=this.top+m;else if(a==="left")S=T(this.right),H=this.right-m,C=S-E,L=T(t.left)+E,z=t.right;else if(a==="right")S=T(this.left),L=t.left,z=T(t.right)-E,H=S+E,C=this.left+m;else if(e==="x"){if(a==="center")S=T((t.top+t.bottom)/2+.5);else if(fe(a)){const Q=Object.keys(a)[0],at=a[Q];S=T(this.chart.scales[Q].getPixelForValue(at))}j=t.top,U=t.bottom,M=S+E,O=M+m}else if(e==="y"){if(a==="center")S=T((t.left+t.right)/2);else if(fe(a)){const Q=Object.keys(a)[0],at=a[Q];S=T(this.chart.scales[Q].getPixelForValue(at))}H=S-E,C=H-m,L=t.left,z=t.right}const Et=Qt(i.ticks.maxTicksLimit,g),wt=Math.max(1,Math.ceil(g/Et));for(R=0;R<g;R+=wt){const Q=this.getContext(R),at=s.setContext(Q),mt=o.setContext(Q),St=at.lineWidth,W=at.color,ct=mt.dash||[],gt=mt.dashOffset,dt=at.tickWidth,bt=at.tickColor,Bt=at.tickBorderDash||[],Ot=at.tickBorderDashOffset;k=XL(this,R,l),k!==void 0&&(P=Rc(r,k,St),h?H=C=L=z=P:M=O=j=U=P,y.push({tx1:H,ty1:M,tx2:C,ty2:O,x1:L,y1:j,x2:z,y2:U,width:St,color:W,borderDash:ct,borderDashOffset:gt,tickWidth:dt,tickColor:bt,tickBorderDash:Bt,tickBorderDashOffset:Ot}))}return this._ticksLength=g,this._borderValue=S,y}_computeLabelItems(t){const e=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:h,padding:d,mirror:g}=s,m=Xf(r.grid),y=m+d,x=g?-d:y,b=-pa(this.labelRotation),E=[];let T,S,R,k,P,H,M,C,O,L,j,z,U="middle";if(i==="top")H=this.bottom-x,M=this._getXAxisLabelAlignment();else if(i==="bottom")H=this.top+x,M=this._getXAxisLabelAlignment();else if(i==="left"){const wt=this._getYAxisLabelAlignment(m);M=wt.textAlign,P=wt.x}else if(i==="right"){const wt=this._getYAxisLabelAlignment(m);M=wt.textAlign,P=wt.x}else if(e==="x"){if(i==="center")H=(t.top+t.bottom)/2+y;else if(fe(i)){const wt=Object.keys(i)[0],Q=i[wt];H=this.chart.scales[wt].getPixelForValue(Q)+y}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")P=(t.left+t.right)/2-y;else if(fe(i)){const wt=Object.keys(i)[0],Q=i[wt];P=this.chart.scales[wt].getPixelForValue(Q)}M=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(l==="start"?U="top":l==="end"&&(U="bottom"));const Et=this._getLabelSizes();for(T=0,S=o.length;T<S;++T){R=o[T],k=R.label;const wt=s.setContext(this.getContext(T));C=this.getPixelForTick(T)+s.labelOffset,O=this._resolveTickFontOptions(T),L=O.lineHeight,j=Zn(k)?k.length:1;const Q=j/2,at=wt.color,mt=wt.textStrokeColor,St=wt.textStrokeWidth;let W=M;a?(P=C,M==="inner"&&(T===S-1?W=this.options.reverse?"left":"right":T===0?W=this.options.reverse?"right":"left":W="center"),i==="top"?h==="near"||b!==0?z=-j*L+L/2:h==="center"?z=-Et.highest.height/2-Q*L+L:z=-Et.highest.height+L/2:h==="near"||b!==0?z=L/2:h==="center"?z=Et.highest.height/2-Q*L:z=Et.highest.height-j*L,g&&(z*=-1),b!==0&&!wt.showLabelBackdrop&&(P+=L/2*Math.sin(b))):(H=C,z=(1-j)*L/2);let ct;if(wt.showLabelBackdrop){const gt=$i(wt.backdropPadding),dt=Et.heights[T],bt=Et.widths[T];let Bt=z-gt.top,Ot=0-gt.left;switch(U){case"middle":Bt-=dt/2;break;case"bottom":Bt-=dt;break}switch(M){case"center":Ot-=bt/2;break;case"right":Ot-=bt;break;case"inner":T===S-1?Ot-=bt:T>0&&(Ot-=bt/2);break}ct={left:Ot,top:Bt,width:bt+gt.width,height:dt+gt.height,color:wt.backdropColor}}E.push({label:k,font:O,textOffset:z,options:{rotation:b,color:at,strokeColor:mt,strokeWidth:St,textAlign:W,textBaseline:U,translation:[P,H],backdrop:ct}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-pa(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,l=a.widest.width;let h,d;return e==="left"?i?(d=this.right+s,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d+=l)):(d=this.right-o,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d=this.left)):e==="right"?i?(d=this.left+s,r==="near"?h="right":r==="center"?(h="center",d-=l/2):(h="left",d-=l)):(d=this.left+o,r==="near"?h="left":r==="center"?(h="center",d+=l/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:i,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(l,h,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(e.display)for(s=0,a=i.length;s<a;++s){const l=i[s];e.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let h,d,g,m;this.isHorizontal()?(h=Rc(t,this.left,a)-a/2,d=Rc(t,this.right,o)+o/2,g=m=l):(g=Rc(t,this.top,a)-a/2,m=Rc(t,this.bottom,o)+o/2,h=d=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(h,g),e.lineTo(d,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&sw(r,i);const s=this.getLabelItems(t);for(const a of s){const o=a.options,l=a.font,h=a.label,d=a.textOffset;S1(r,h,0,d,l,o)}i&&aw(r)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;const s=zr(r.font),a=$i(r.padding),o=r.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||fe(e)?(l+=a.bottom,Zn(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:h,titleY:d,maxWidth:g,rotation:m}=JL(this,l,e,o);S1(t,r.text,0,0,s,{color:r.color,maxWidth:g,rotation:m,textAlign:ZL(o,e,i),textBaseline:"middle",translation:[h,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=Qt(t.grid&&t.grid.z,-1),i=Qt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Eh.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];o[r]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return zr(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sp{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;nV(e)&&(r=this.register(e));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,tV(t,a,r),this.override&&vn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in vn[i]&&(delete vn[i][r],this.override&&delete ul[r])}}function tV(n,t,e){const r=Xd(Object.create(null),[e?vn.get(e):{},vn.get(t),n.defaults]);vn.set(t,r),n.defaultRoutes&&eV(t,n.defaultRoutes),n.descriptors&&vn.describe(t,n.descriptors)}function eV(n,t){Object.keys(t).forEach(e=>{const r=e.split("."),i=r.pop(),s=[n].concat(r).join("."),a=t[e].split("."),o=a.pop(),l=a.join(".");vn.route(s,i,l,o)})}function nV(n){return"id"in n&&"defaults"in n}class rV{constructor(){this.controllers=new Sp(el,"datasets",!0),this.elements=new Sp(jo,"elements"),this.plugins=new Sp(Object,"plugins"),this.scales=new Sp(Eh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):Re(i,a=>{const o=r||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,r){const i=ew(t);qe(r["before"+i],[],r),e[t](r),qe(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var vs=new rV;class iV{constructor(){this._init=[]}notify(t,e,r,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,r,i){i=i||{};for(const s of t){const a=s.plugin,o=a[r],l=[e,i,s.options];if(qe(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,i=Qt(r.options&&r.options.plugins,{}),s=sV(r);return i===!1&&!e?[]:oV(t,s,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}}function sV(n){const t={},e=[],r=Object.keys(vs.plugins.items);for(let s=0;s<r.length;s++)e.push(vs.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function aV(n,t){return!t&&n===!1?null:n===!0?{}:n}function oV(n,{plugins:t,localIds:e},r,i){const s=[],a=n.getContext();for(const o of t){const l=o.id,h=aV(r[l],i);h!==null&&s.push({plugin:o,options:cV(n.config,{plugin:o,local:e[l]},h,a)})}return s}function cV(n,{plugin:t,local:e},r,i){const s=n.pluginScopeKeys(t),a=n.getOptionScopes(r,s);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function wx(n,t){const e=vn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function lV(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function uV(n,t){return n===t?"_index_":"_value_"}function CI(n){if(n==="x"||n==="y"||n==="r")return n}function hV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function bx(n,...t){if(CI(n))return n;for(const e of t){const r=e.axis||hV(e.position)||n.length>1&&CI(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function DI(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function fV(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(e.length)return DI(n,"x",e[0])||DI(n,"y",e[0])}return{}}function dV(n,t){const e=ul[n.type]||{scales:{}},r=t.scales||{},i=wx(n.type,t),s=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!fe(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=bx(a,o,fV(a,n),vn.scales[o.type]),h=uV(l,i),d=e.scales||{};s[a]=Td(Object.create(null),[{axis:l},o,d[l],d[h]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||wx(o,t),d=(ul[o]||{}).scales||{};Object.keys(d).forEach(g=>{const m=lV(g,l),y=a[m+"AxisID"]||m;s[y]=s[y]||Object.create(null),Td(s[y],[{axis:m},r[y],d[g]])})}),Object.keys(s).forEach(a=>{const o=s[a];Td(o,[vn.scales[o.type],vn.scale])}),s}function H4(n){const t=n.options||(n.options={});t.plugins=Qt(t.plugins,{}),t.scales=dV(n,t)}function G4(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function gV(n){return n=n||{},n.data=G4(n.data),H4(n),n}const RI=new Map,W4=new Set;function Ip(n,t){let e=RI.get(n);return e||(e=t(),RI.set(n,e),W4.add(e)),e}const Kf=(n,t,e)=>{const r=ll(t,e);r!==void 0&&n.add(r)};class pV{constructor(t){this._config=gV(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=G4(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),H4(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ip(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ip(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ip(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,r=this.type;return Ip(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),o=a.get(e);if(o)return o;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(g=>Kf(l,t,g))),d.forEach(g=>Kf(l,i,g)),d.forEach(g=>Kf(l,ul[s]||{},g)),d.forEach(g=>Kf(l,vn,g)),d.forEach(g=>Kf(l,_x,g))});const h=Array.from(l);return h.length===0&&h.push(Object.create(null)),W4.has(e)&&a.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,ul[e]||{},vn.datasets[e]||{},{type:e},vn,_x]}resolveNamedOptions(t,e,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=OI(this._resolverCache,t,i);let l=a;if(yV(a,e)){s.$shared=!1,r=Po(r)?r():r;const h=this.createResolver(t,r,o);l=th(a,r,h)}for(const h of e)s[h]=l[h];return s}createResolver(t,e,r=[""],i){const{resolver:s}=OI(this._resolverCache,t,r);return fe(e)?th(s,e,void 0,i):s}}function OI(n,t,e){let r=n.get(t);r||(r=new Map,n.set(t,r));const i=e.join();let s=r.get(i);return s||(s={resolver:cw(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,s)),s}const mV=n=>fe(n)&&Object.getOwnPropertyNames(n).some(t=>Po(n[t]));function yV(n,t){const{isScriptable:e,isIndexable:r}=S4(n);for(const i of t){const s=e(i),a=r(i),o=(a||s)&&n[i];if(s&&(Po(o)||mV(o))||a&&Zn(o))return!0}return!1}var vV="4.5.0";const _V=["top","bottom","left","right","chartArea"];function MI(n,t){return n==="top"||n==="bottom"||_V.indexOf(n)===-1&&t==="x"}function PI(n,t){return function(e,r){return e[n]===r[n]?e[t]-r[t]:e[n]-r[n]}}function NI(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),qe(e&&e.onComplete,[n],t)}function xV(n){const t=n.chart,e=t.options.animation;qe(e&&e.onProgress,[n],t)}function q4(n){return hw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Qp={},kI=n=>{const t=q4(n);return Object.values(Qp).filter(e=>e.canvas===t).pop()};function wV(n,t,e){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=t){const a=n[i];delete n[i],(e>0||s>t)&&(n[s+e]=a)}}}function bV(n,t,e,r){return!e||n.type==="mouseout"?null:r?t:n}var uo;let El=(uo=class{static register(...t){vs.add(...t),LI()}static unregister(...t){vs.remove(...t),LI()}constructor(t,e){const r=this.config=new pV(e),i=q4(t),s=kI(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||UL(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,h=l&&l.height,d=l&&l.width;if(this.id=v9(),this.ctx=o,this.canvas=l,this.width=d,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=V9(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],Qp[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}fa.listen(this,"complete",NI),fa.listen(this,"progress",xV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:i,_aspectRatio:s}=this;return Ee(t)?e&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return vs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():iI(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return eI(this.canvas,this.ctx),this}stop(){return fa.stop(this),this}resize(t,e){fa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,e,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,iI(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),qe(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Re(e,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,i=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const o=e[a],l=bx(a,o),h=l==="r",d=l==="x";return{options:o,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),Re(s,a=>{const o=a.options,l=o.id,h=bx(l,o),d=Qt(o.type,a.dtype);(o.position===void 0||MI(o.position,h)!==MI(a.dposition))&&(o.position=a.dposition),i[l]=!0;let g=null;if(l in r&&r[l].type===d)g=r[l];else{const m=vs.getScale(d);g=new m({id:l,type:d,ctx:this.ctx,chart:this}),r[g.id]=g}g.init(o,t)}),Re(i,(a,o)=>{a||delete r[o]}),Re(r,a=>{wo.configure(this,a,a.options),wo.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>e){for(let i=e;i<r;++i)this._destroyDatasetMeta(i);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(PI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,i)=>{e.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=e.length;r<i;r++){const s=e[r];let a=this.getDatasetMeta(r);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=s.indexAxis||wx(o,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=vs.getController(o),{datasetElementType:h,dataElementType:d}=vn.datasets[o];Object.assign(l,{dataElementType:vs.getElement(d),datasetElementType:h&&vs.getElement(h)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Re(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:g}=this.getDatasetMeta(h),m=!i&&s.indexOf(g)===-1;g.buildOrUpdateElements(m),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||Re(s,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(PI("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Re(this.scales,t=>{wo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!WS(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of e){const a=r==="_removeElements"?-s:s;wV(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<e;s++)if(!WS(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;wo.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],Re(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,Po(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fa.has(this)?this.attached&&!fa.running(this)&&fa.start(this):(this.draw(),NI({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let i,s;for(i=0,s=e.length;i<s;++i){const a=e[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=H7(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&sw(e,i),t.controller.draw(),i&&aw(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Zd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,i){const s=_L.modes[e];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=bl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);Kd(e)?(s.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),fa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),eI(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Qp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};Re(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(l,h)=>{e.addEventListener(this,l,h),t[l]=h},i=(l,h)=>{t[l]&&(e.removeEventListener(this,l,h),delete t[l])},s=(l,h)=>{this.canvas&&this.resize(l,h)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){Re(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Re(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const i=r?"set":"remove";let s,a,o,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){a=t[o];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!E1(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,r){const i=this.options.hover,s=(l,h)=>l.filter(d=>!h.some(g=>d.datasetIndex===g.datasetIndex&&d.index===g.index)),a=s(e,t),o=r?t:s(t,e);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:i=[],options:s}=this,a=e,o=this._getActiveElements(t,i,r,a),l=A9(t),h=bV(t,this._lastEvent,r,l);r&&(this._lastEvent=null,qe(s.onHover,[t,o,this],this),l&&qe(s.onClick,[t,o,this],this));const d=!E1(o,i);return(d||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=h,d}_getActiveElements(t,e,r,i){if(t.type==="mouseout")return[];if(!r)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},rt(uo,"defaults",vn),rt(uo,"instances",Qp),rt(uo,"overrides",ul),rt(uo,"registry",vs),rt(uo,"version",vV),rt(uo,"getChart",kI),uo);function LI(){return Re(El.instances,n=>n._plugins.invalidate())}function EV(n,t,e){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:h,borderJoinStyle:d}=l,g=Math.min(h/a,Wi(r-e));if(n.beginPath(),n.arc(i,s,a-h/2,r+g/2,e-g/2),o>0){const m=Math.min(h/o,Wi(r-e));n.arc(i,s,o+h/2,e-m/2,r+m/2,!0)}else{const m=Math.min(h/2,a*Wi(r-e));if(d==="round")n.arc(i,s,m,e-Ue/2,r+Ue/2,!0);else if(d==="bevel"){const y=2*m*m,x=-y*Math.cos(e+Ue/2)+i,b=-y*Math.sin(e+Ue/2)+s,E=y*Math.cos(r+Ue/2)+i,T=y*Math.sin(r+Ue/2)+s;n.lineTo(x,b),n.lineTo(E,T)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function AV(n,t,e){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let h=i/o;n.beginPath(),n.arc(s,a,o,r-h,e+h),l>i?(h=i/l,n.arc(s,a,l,e+h,r-h,!0)):n.arc(s,a,i,e+Un,r-Un),n.closePath(),n.clip()}function TV(n){return ow(n,["outerStart","outerEnd","innerStart","innerEnd"])}function SV(n,t,e,r){const i=TV(n.options.borderRadius),s=(e-t)/2,a=Math.min(s,r*t/2),o=l=>{const h=(e-Math.min(s,l))*r/2;return xr(l,0,Math.min(s,h))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:xr(i.innerStart,0,a),innerEnd:xr(i.innerEnd,0,a)}}function Eu(n,t,e,r){return{x:e+n*Math.cos(t),y:r+n*Math.sin(t)}}function R1(n,t,e,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:h,innerRadius:d}=t,g=Math.max(t.outerRadius+r+e-h,0),m=d>0?d+r+e+h:0;let y=0;const x=i-l;if(r){const wt=d>0?d-r:0,Q=g>0?g-r:0,at=(wt+Q)/2,mt=at!==0?x*at/(at+r):x;y=(x-mt)/2}const b=Math.max(.001,x*g-e/Ue)/g,E=(x-b)/2,T=l+E+y,S=i-E-y,{outerStart:R,outerEnd:k,innerStart:P,innerEnd:H}=SV(t,m,g,S-T),M=g-R,C=g-k,O=T+R/M,L=S-k/C,j=m+P,z=m+H,U=T+P/j,Et=S-H/z;if(n.beginPath(),s){const wt=(O+L)/2;if(n.arc(a,o,g,O,wt),n.arc(a,o,g,wt,L),k>0){const St=Eu(C,L,a,o);n.arc(St.x,St.y,k,L,S+Un)}const Q=Eu(z,S,a,o);if(n.lineTo(Q.x,Q.y),H>0){const St=Eu(z,Et,a,o);n.arc(St.x,St.y,H,S+Un,Et+Math.PI)}const at=(S-H/m+(T+P/m))/2;if(n.arc(a,o,m,S-H/m,at,!0),n.arc(a,o,m,at,T+P/m,!0),P>0){const St=Eu(j,U,a,o);n.arc(St.x,St.y,P,U+Math.PI,T-Un)}const mt=Eu(M,T,a,o);if(n.lineTo(mt.x,mt.y),R>0){const St=Eu(M,O,a,o);n.arc(St.x,St.y,R,T-Un,O)}}else{n.moveTo(a,o);const wt=Math.cos(O)*g+a,Q=Math.sin(O)*g+o;n.lineTo(wt,Q);const at=Math.cos(L)*g+a,mt=Math.sin(L)*g+o;n.lineTo(at,mt)}n.closePath()}function IV(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){R1(n,t,e,r,l,i);for(let h=0;h<s;++h)n.fill();isNaN(o)||(l=a+(o%un||un))}return R1(n,t,e,r,l,i),n.fill(),l}function CV(n,t,e,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:h,borderJoinStyle:d,borderDash:g,borderDashOffset:m,borderRadius:y}=l,x=l.borderAlign==="inner";if(!h)return;n.setLineDash(g||[]),n.lineDashOffset=m,x?(n.lineWidth=h*2,n.lineJoin=d||"round"):(n.lineWidth=h,n.lineJoin=d||"bevel");let b=t.endAngle;if(s){R1(n,t,e,r,b,i);for(let E=0;E<s;++E)n.stroke();isNaN(o)||(b=a+(o%un||un))}x&&AV(n,t,b),l.selfJoin&&b-a>=Ue&&y===0&&d!=="miter"&&EV(n,t,b),s||(R1(n,t,e,r,b,i),n.stroke())}class Vu extends jo{constructor(e){super();rt(this,"circumference");rt(this,"endAngle");rt(this,"fullCircles");rt(this,"innerRadius");rt(this,"outerRadius");rt(this,"pixelMargin");rt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=y4(s,{x:e,y:r}),{startAngle:l,endAngle:h,innerRadius:d,outerRadius:g,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),y=(this.options.spacing+this.options.borderWidth)/2,x=Qt(m,h-l),b=Qd(a,l,h)&&l!==h,E=x>=un||b,T=xo(o,d+y,g+y);return E&&T}getCenterPoint(e){const{x:r,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:d}=this.options,g=(s+a)/2,m=(o+l+d+h)/2;return{x:r+Math.cos(g)*m,y:i+Math.sin(g)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:i}=this,s=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>un?Math.floor(i/un):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const h=1-Math.sin(Math.min(Ue,i||0)),d=s*h;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,IV(e,this,d,a,o),CV(e,this,d,a,o),e.restore()}}rt(Vu,"id","arc"),rt(Vu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),rt(Vu,"defaultRoutes",{backgroundColor:"backgroundColor"}),rt(Vu,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Y4(n,t,e=t){n.lineCap=Qt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Qt(e.borderDash,t.borderDash)),n.lineDashOffset=Qt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Qt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Qt(e.borderWidth,t.borderWidth),n.strokeStyle=Qt(e.borderColor,t.borderColor)}function DV(n,t,e){n.lineTo(e.x,e.y)}function RV(n){return n.stepped?Q9:n.tension||n.cubicInterpolationMode==="monotone"?Z9:DV}function X4(n,t,e={}){const r=n.length,{start:i=0,end:s=r-1}=e,{start:a,end:o}=t,l=Math.max(i,a),h=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:h<l&&!d?r+h-l:h-l}}function OV(n,t,e,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:h}=X4(i,e,r),d=RV(s);let{move:g=!0,reverse:m}=r||{},y,x,b;for(y=0;y<=h;++y)x=i[(o+(m?h-y:y))%a],!x.skip&&(g?(n.moveTo(x.x,x.y),g=!1):d(n,b,x,m,s.stepped),b=x);return l&&(x=i[(o+(m?h:0))%a],d(n,b,x,m,s.stepped)),!!l}function MV(n,t,e,r){const i=t.points,{count:s,start:a,ilen:o}=X4(i,e,r),{move:l=!0,reverse:h}=r||{};let d=0,g=0,m,y,x,b,E,T;const S=k=>(a+(h?o-k:k))%s,R=()=>{b!==E&&(n.lineTo(d,E),n.lineTo(d,b),n.lineTo(d,T))};for(l&&(y=i[S(0)],n.moveTo(y.x,y.y)),m=0;m<=o;++m){if(y=i[S(m)],y.skip)continue;const k=y.x,P=y.y,H=k|0;H===x?(P<b?b=P:P>E&&(E=P),d=(g*d+k)/++g):(R(),n.lineTo(k,P),x=H,g=0,b=E=P),T=P}R()}function Ex(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?MV:OV}function PV(n){return n.stepped?R7:n.tension||n.cubicInterpolationMode==="monotone"?O7:Vc}function NV(n,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),Y4(n,t.options),n.stroke(i)}function kV(n,t,e,r){const{segments:i,options:s}=t,a=Ex(t);for(const o of i)Y4(n,s,o.style),n.beginPath(),a(n,t,o,{start:e,end:e+r-1})&&n.closePath(),n.stroke()}const LV=typeof Path2D=="function";function VV(n,t,e,r){LV&&!t.options.segment?NV(n,t,e,r):kV(n,t,e,r)}class hd extends jo{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;b7(this._points,r,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=F7(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,i=t[e],s=this.points,a=L7(this,{property:e,start:i,end:i});if(!a.length)return;const o=[],l=PV(r);let h,d;for(h=0,d=a.length;h<d;++h){const{start:g,end:m}=a[h],y=s[g],x=s[m];if(y===x){o.push(y);continue}const b=Math.abs((i-y[e])/(x[e]-y[e])),E=l(y,x,b,r.stepped);E[e]=t[e],o.push(E)}return o.length===1?o[0]:o}pathSegment(t,e,r){return Ex(this)(t,this,e,r)}path(t,e,r){const i=this.segments,s=Ex(this);let a=this._loop;e=e||0,r=r||this.points.length-e;for(const o of i)a&=s(t,this,o,{start:e,end:e+r-1});return!!a}draw(t,e,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),VV(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}rt(hd,"id","line"),rt(hd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),rt(hd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),rt(hd,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function VI(n,t,e,r){const i=n.options,{[e]:s}=n.getProps([e],r);return Math.abs(t-s)<i.radius+i.hitRadius}class Zp extends jo{constructor(e){super();rt(this,"parsed");rt(this,"skip");rt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(r-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return VI(this,e,"x",r)}inYRange(e,r){return VI(this,e,"y",r)}getCenterPoint(e){const{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const i=r&&e.borderWidth||0;return(r+i)*2}draw(e,r){const i=this.options;this.skip||i.radius<.1||!Zd(this,r,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,xx(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}rt(Zp,"id","point"),rt(Zp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),rt(Zp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function K4(n,t){const{x:e,y:r,base:i,width:s,height:a}=n.getProps(["x","y","base","width","height"],t);let o,l,h,d,g;return n.horizontal?(g=a/2,o=Math.min(e,i),l=Math.max(e,i),h=r-g,d=r+g):(g=s/2,o=e-g,l=e+g,h=Math.min(r,i),d=Math.max(r,i)),{left:o,top:h,right:l,bottom:d}}function bo(n,t,e,r){return n?0:xr(t,e,r)}function BV(n,t,e){const r=n.options.borderWidth,i=n.borderSkipped,s=T4(r);return{t:bo(i.top,s.top,0,e),r:bo(i.right,s.right,0,t),b:bo(i.bottom,s.bottom,0,e),l:bo(i.left,s.left,0,t)}}function FV(n,t,e){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Yu(i),a=Math.min(t,e),o=n.borderSkipped,l=r||fe(i);return{topLeft:bo(!l||o.top||o.left,s.topLeft,0,a),topRight:bo(!l||o.top||o.right,s.topRight,0,a),bottomLeft:bo(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:bo(!l||o.bottom||o.right,s.bottomRight,0,a)}}function UV(n){const t=K4(n),e=t.right-t.left,r=t.bottom-t.top,i=BV(n,e/2,r/2),s=FV(n,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function w_(n,t,e,r){const i=t===null,s=e===null,o=n&&!(i&&s)&&K4(n,r);return o&&(i||xo(t,o.left,o.right))&&(s||xo(e,o.top,o.bottom))}function jV(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function zV(n,t){n.rect(t.x,t.y,t.w,t.h)}function b_(n,t,e={}){const r=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-r,a=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+a,radius:n.radius}}class Jp extends jo{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=UV(this),o=jV(a.radius)?I1:zV;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),o(t,b_(a,e,s)),t.clip(),o(t,b_(s,-e,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,b_(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return w_(this,t,e,r)}inXRange(t,e){return w_(this,t,null,e)}inYRange(t,e){return w_(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}rt(Jp,"id","bar"),rt(Jp,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),rt(Jp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const BI=(n,t)=>{let{boxHeight:e=t,boxWidth:r=t}=n;return n.usePointStyle&&(e=Math.min(e,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},HV=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class FI extends jo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=qe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=zr(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=BI(r,s);let h,d;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(a,s,o,l)+10):(d=this.maxHeight,h=this._fitCols(a,i,o,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.lineWidths=[0],d=i+o;let g=t;s.textAlign="left",s.textBaseline="middle";let m=-1,y=-d;return this.legendItems.forEach((x,b)=>{const E=r+e/2+s.measureText(x.text).width;(b===0||h[h.length-1]+E+2*o>a)&&(g+=d,h[h.length-(b>0?0:1)]=0,y+=d,m++),l[b]={left:0,top:y,row:m,width:E,height:i},h[h.length-1]+=E+o}),g}_fitCols(t,e,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],h=this.columnSizes=[],d=a-t;let g=o,m=0,y=0,x=0,b=0;return this.legendItems.forEach((E,T)=>{const{itemWidth:S,itemHeight:R}=GV(r,e,s,E,i);T>0&&y+R+2*o>d&&(g+=m+o,h.push({width:m,height:y}),x+=m+o,b++,m=y=0),l[T]={left:x,top:y,col:b,width:S,height:R},m=Math.max(m,S),y+=R+o}),g+=m,h.push({width:m,height:y}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:s}}=this,a=Xu(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=ii(r,this.left+i,this.right-this.lineWidths[o]);for(const h of e)o!==h.row&&(o=h.row,l=ii(r,this.left+i,this.right-this.lineWidths[o])),h.top+=this.top+t+i,h.left=a.leftForLtr(a.x(l),h.width),l+=h.width+i}else{let o=0,l=ii(r,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const h of e)h.col!==o&&(o=h.col,l=ii(r,this.top+t+i,this.bottom-this.columnSizes[o].height)),h.top=l,h.left+=this.left+i,h.left=a.leftForLtr(a.x(h.left),h.width),l+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;sw(t,this),this._draw(),aw(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,o=vn.color,l=Xu(t.rtl,this.left,this.width),h=zr(a.font),{padding:d}=a,g=h.size,m=g/2;let y;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:x,boxHeight:b,itemHeight:E}=BI(a,g),T=function(H,M,C){if(isNaN(x)||x<=0||isNaN(b)||b<0)return;i.save();const O=Qt(C.lineWidth,1);if(i.fillStyle=Qt(C.fillStyle,o),i.lineCap=Qt(C.lineCap,"butt"),i.lineDashOffset=Qt(C.lineDashOffset,0),i.lineJoin=Qt(C.lineJoin,"miter"),i.lineWidth=O,i.strokeStyle=Qt(C.strokeStyle,o),i.setLineDash(Qt(C.lineDash,[])),a.usePointStyle){const L={radius:b*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:O},j=l.xPlus(H,x/2),z=M+m;A4(i,L,j,z,a.pointStyleWidth&&x)}else{const L=M+Math.max((g-b)/2,0),j=l.leftForLtr(H,x),z=Yu(C.borderRadius);i.beginPath(),Object.values(z).some(U=>U!==0)?I1(i,{x:j,y:L,w:x,h:b,radius:z}):i.rect(j,L,x,b),i.fill(),O!==0&&i.stroke()}i.restore()},S=function(H,M,C){S1(i,C.text,H,M+E/2,h,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},R=this.isHorizontal(),k=this._computeTitleHeight();R?y={x:ii(s,this.left+d,this.right-r[0]),y:this.top+d+k,line:0}:y={x:this.left+d,y:ii(s,this.top+k+d,this.bottom-e[0].height),line:0},O4(this.ctx,t.textDirection);const P=E+d;this.legendItems.forEach((H,M)=>{i.strokeStyle=H.fontColor,i.fillStyle=H.fontColor;const C=i.measureText(H.text).width,O=l.textAlign(H.textAlign||(H.textAlign=a.textAlign)),L=x+m+C;let j=y.x,z=y.y;l.setWidth(this.width),R?M>0&&j+L+d>this.right&&(z=y.y+=P,y.line++,j=y.x=ii(s,this.left+d,this.right-r[y.line])):M>0&&z+P>this.bottom&&(j=y.x=j+e[y.line].width+d,y.line++,z=y.y=ii(s,this.top+k+d,this.bottom-e[y.line].height));const U=l.x(j);if(T(U,z,H),j=B9(O,j+x+m,R?j+L:this.right,t.rtl),S(l.x(j),z,H),R)y.x+=L+d;else if(typeof H.text!="string"){const Et=h.lineHeight;y.y+=$4(H,Et)+d}else y.y+=P}),M4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=zr(e.font),i=$i(e.padding);if(!e.display)return;const s=Xu(t.rtl,this.left,this.width),a=this.ctx,o=e.position,l=r.size/2,h=i.top+l;let d,g=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+h,g=ii(t.align,g,this.right-m);else{const x=this.columnSizes.reduce((b,E)=>Math.max(b,E.height),0);d=h+ii(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const y=ii(o,g,g+m);a.textAlign=s.textAlign(b4(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=r.string,S1(a,e.text,y,d,r)}_computeTitleHeight(){const t=this.options.title,e=zr(t.font),r=$i(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,s;if(xo(t,this.left,this.right)&&xo(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],xo(t,i.left,i.left+i.width)&&xo(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const e=this.options;if(!YV(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=HV(i,r);i&&!s&&qe(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&qe(e.onHover,[t,r,this],this)}else r&&qe(e.onClick,[t,r,this],this)}}function GV(n,t,e,r,i){const s=WV(r,n,t,e),a=qV(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}function WV(n,t,e,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+r.measureText(i).width}function qV(n,t,e){let r=n;return typeof t.text!="string"&&(r=$4(t,e)),r}function $4(n,t){const e=n.text?n.text.length:0;return t*e}function YV(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var gw={id:"legend",_element:FI,start(n,t,e){const r=n.legend=new FI({ctx:n.ctx,options:e,chart:n});wo.configure(n,r,e),wo.addBox(n,r)},stop(n){wo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const r=n.legend;wo.configure(n,r,e),r.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const h=l.controller.getStyle(e?0:void 0),d=$i(h.borderWidth);return{text:t[l.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:a&&(o||h.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const fd={average(n){if(!n.length)return!1;let t,e,r=new Set,i=0,s=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const h=l.getCenterPoint(),d=vx(t,h);d<i&&(i=d,o=l)}}if(o){const l=o.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function ys(n,t){return t&&(Zn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function da(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function XV(n,t){const{element:e,datasetIndex:r,index:i}=t,s=n.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:n,label:a,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function UI(n,t){const e=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:a,boxHeight:o}=t,l=zr(t.bodyFont),h=zr(t.titleFont),d=zr(t.footerFont),g=s.length,m=i.length,y=r.length,x=$i(t.padding);let b=x.height,E=0,T=r.reduce((k,P)=>k+P.before.length+P.lines.length+P.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,g&&(b+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),T){const k=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;b+=y*k+(T-y)*l.lineHeight+(T-1)*t.bodySpacing}m&&(b+=t.footerMarginTop+m*d.lineHeight+(m-1)*t.footerSpacing);let S=0;const R=function(k){E=Math.max(E,e.measureText(k).width+S)};return e.save(),e.font=h.string,Re(n.title,R),e.font=l.string,Re(n.beforeBody.concat(n.afterBody),R),S=t.displayColors?a+2+t.boxPadding:0,Re(r,k=>{Re(k.before,R),Re(k.lines,R),Re(k.after,R)}),S=0,e.font=d.string,Re(n.footer,R),e.restore(),E+=x.width,{width:E,height:b}}function KV(n,t){const{y:e,height:r}=t;return e<r/2?"top":e>n.height-r/2?"bottom":"center"}function $V(n,t,e,r){const{x:i,width:s}=r,a=e.caretSize+e.caretPadding;if(n==="left"&&i+s+a>t.width||n==="right"&&i-s-a<0)return!0}function QV(n,t,e,r){const{x:i,width:s}=e,{width:a,chartArea:{left:o,right:l}}=n;let h="center";return r==="center"?h=i<=(o+l)/2?"left":"right":i<=s/2?h="left":i>=a-s/2&&(h="right"),$V(h,n,t,e)&&(h="center"),h}function jI(n,t,e){const r=e.yAlign||t.yAlign||KV(n,e);return{xAlign:e.xAlign||t.xAlign||QV(n,t,e,r),yAlign:r}}function ZV(n,t){let{x:e,width:r}=n;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function JV(n,t,e){let{y:r,height:i}=n;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function zI(n,t,e,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=e,h=i+s,{topLeft:d,topRight:g,bottomLeft:m,bottomRight:y}=Yu(a);let x=ZV(t,o);const b=JV(t,l,h);return l==="center"?o==="left"?x+=h:o==="right"&&(x-=h):o==="left"?x-=Math.max(d,m)+i:o==="right"&&(x+=Math.max(g,y)+i),{x:xr(x,0,r.width-t.width),y:xr(b,0,r.height-t.height)}}function Cp(n,t,e){const r=$i(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-r.right:n.x+r.left}function HI(n){return ys([],da(n))}function tB(n,t,e){return bl(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function GI(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Q4={beforeTitle:ha,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:ha,beforeBody:ha,beforeLabel:ha,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Ee(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ha,afterBody:ha,beforeFooter:ha,footer:ha,afterFooter:ha};function Br(n,t,e,r){const i=n[t].call(e,r);return typeof i>"u"?Q4[t].call(e,r):i}class Ax extends jo{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&e.options.animation&&r.animations,s=new N4(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=tB(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:r}=e,i=Br(r,"beforeTitle",this,t),s=Br(r,"title",this,t),a=Br(r,"afterTitle",this,t);let o=[];return o=ys(o,da(i)),o=ys(o,da(s)),o=ys(o,da(a)),o}getBeforeBody(t,e){return HI(Br(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:r}=e,i=[];return Re(t,s=>{const a={before:[],lines:[],after:[]},o=GI(r,s);ys(a.before,da(Br(o,"beforeLabel",this,s))),ys(a.lines,Br(o,"label",this,s)),ys(a.after,da(Br(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,e){return HI(Br(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:r}=e,i=Br(r,"beforeFooter",this,t),s=Br(r,"footer",this,t),a=Br(r,"afterFooter",this,t);let o=[];return o=ys(o,da(i)),o=ys(o,da(s)),o=ys(o,da(a)),o}_createItems(t){const e=this._active,r=this.chart.data,i=[],s=[],a=[];let o=[],l,h;for(l=0,h=e.length;l<h;++l)o.push(XV(this.chart,e[l]));return t.filter&&(o=o.filter((d,g,m)=>t.filter(d,g,m,r))),t.itemSort&&(o=o.sort((d,g)=>t.itemSort(d,g,r))),Re(o,d=>{const g=GI(t.callbacks,d);i.push(Br(g,"labelColor",this,d)),s.push(Br(g,"labelPointStyle",this,d)),a.push(Br(g,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=fd[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=UI(this,r),h=Object.assign({},o,l),d=jI(this.chart,r,h),g=zI(r,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:g.x,y:g.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,i){const s=this.getCaretPosition(t,r,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:h,bottomLeft:d,bottomRight:g}=Yu(o),{x:m,y}=t,{width:x,height:b}=e;let E,T,S,R,k,P;return s==="center"?(k=y+b/2,i==="left"?(E=m,T=E-a,R=k+a,P=k-a):(E=m+x,T=E+a,R=k-a,P=k+a),S=E):(i==="left"?T=m+Math.max(l,d)+a:i==="right"?T=m+x-Math.max(h,g)-a:T=this.caretX,s==="top"?(R=y,k=R-a,E=T-a,S=T+a):(R=y+b,k=R+a,E=T+a,S=T-a),P=R),{x1:E,x2:T,x3:S,y1:R,y2:k,y3:P}}drawTitle(t,e,r){const i=this.title,s=i.length;let a,o,l;if(s){const h=Xu(r.rtl,this.x,this.width);for(t.x=Cp(this,r.titleAlign,r),e.textAlign=h.textAlign(r.titleAlign),e.textBaseline="middle",a=zr(r.titleFont),o=r.titleSpacing,e.fillStyle=r.titleColor,e.font=a.string,l=0;l<s;++l)e.fillText(i[l],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,l+1===s&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,e,r,i,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:h}=s,d=zr(s.bodyFont),g=Cp(this,"left",s),m=i.x(g),y=l<d.lineHeight?(d.lineHeight-l)/2:0,x=e.y+y;if(s.usePointStyle){const b={radius:Math.min(h,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},E=i.leftForLtr(m,h)+h/2,T=x+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,xx(t,b,E,T),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,xx(t,b,E,T)}else{t.lineWidth=fe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const b=i.leftForLtr(m,h),E=i.leftForLtr(i.xPlus(m,1),h-2),T=Yu(a.borderRadius);Object.values(T).some(S=>S!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,I1(t,{x:b,y:x,w:h,h:l,radius:T}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),I1(t,{x:E,y:x+1,w:h-2,h:l-2,radius:T}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(b,x,h,l),t.strokeRect(b,x,h,l),t.fillStyle=a.backgroundColor,t.fillRect(E,x+1,h-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:h,boxPadding:d}=r,g=zr(r.bodyFont);let m=g.lineHeight,y=0;const x=Xu(r.rtl,this.x,this.width),b=function(C){e.fillText(C,x.x(t.x+y),t.y+m/2),t.y+=m+s},E=x.textAlign(a);let T,S,R,k,P,H,M;for(e.textAlign=a,e.textBaseline="middle",e.font=g.string,t.x=Cp(this,E,r),e.fillStyle=r.bodyColor,Re(this.beforeBody,b),y=o&&E!=="right"?a==="center"?h/2+d:h+2+d:0,k=0,H=i.length;k<H;++k){for(T=i[k],S=this.labelTextColors[k],e.fillStyle=S,Re(T.before,b),R=T.lines,o&&R.length&&(this._drawColorBox(e,t,k,x,r),m=Math.max(g.lineHeight,l)),P=0,M=R.length;P<M;++P)b(R[P]),m=g.lineHeight;Re(T.after,b)}y=0,m=g.lineHeight,Re(this.afterBody,b),t.y-=s}drawFooter(t,e,r){const i=this.footer,s=i.length;let a,o;if(s){const l=Xu(r.rtl,this.x,this.width);for(t.x=Cp(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=l.textAlign(r.footerAlign),e.textBaseline="middle",a=zr(r.footerFont),e.fillStyle=r.footerColor,e.font=a.string,o=0;o<s;++o)e.fillText(i[o],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,e,r,i){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=t,{width:h,height:d}=r,{topLeft:g,topRight:m,bottomLeft:y,bottomRight:x}=Yu(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+g,l),a==="top"&&this.drawCaret(t,e,r,i),e.lineTo(o+h-m,l),e.quadraticCurveTo(o+h,l,o+h,l+m),a==="center"&&s==="right"&&this.drawCaret(t,e,r,i),e.lineTo(o+h,l+d-x),e.quadraticCurveTo(o+h,l+d,o+h-x,l+d),a==="bottom"&&this.drawCaret(t,e,r,i),e.lineTo(o+y,l+d),e.quadraticCurveTo(o,l+d,o,l+d-y),a==="center"&&s==="left"&&this.drawCaret(t,e,r,i),e.lineTo(o,l+g),e.quadraticCurveTo(o,l,o+g,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=fd[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=UI(this,t),l=Object.assign({},a,this._size),h=jI(e,t,l),d=zI(t,l,h,e);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=$i(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,e),O4(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),M4(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,i=t.map(({datasetIndex:o,index:l})=>{const h=this.chart.getDatasetMeta(o);if(!h)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:h.data[l],index:l}}),s=!E1(r,i),a=this._positionChanged(i,e);(s||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,r),o=this._positionChanged(a,t),l=e||!E1(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:r,caretY:i,options:s}=this,a=fd[s.position].call(this,t,e);return a!==!1&&(r!==a.x||i!==a.y)}}rt(Ax,"positioners",fd);var pw={id:"tooltip",_element:Ax,positioners:fd,afterInit(n,t,e){e&&(n.tooltip=new Ax({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Q4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const eB=(n,t,e,r)=>(typeof t=="string"?(e=n.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function nB(n,t,e,r){const i=n.indexOf(t);if(i===-1)return eB(n,t,e,r);const s=n.lastIndexOf(t);return i!==s?e:i}const rB=(n,t)=>n===null?null:xr(Math.round(n),0,t);function WI(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Tx extends Eh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const r=this.getLabels();for(const{index:i,label:s}of e)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ee(t))return null;const r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:nB(r,t,Qt(e,t),this._addedLabels),rB(e,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=e;a++)i.push({value:a});return i}getLabelForValue(t){return WI.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}rt(Tx,"id","category"),rt(Tx,"defaults",{ticks:{callback:WI}});function iB(n,t){const e=[],{bounds:i,step:s,min:a,max:o,precision:l,count:h,maxTicks:d,maxDigits:g,includeBounds:m}=n,y=s||1,x=d-1,{min:b,max:E}=t,T=!Ee(a),S=!Ee(o),R=!Ee(h),k=(E-b)/(g+1);let P=YS((E-b)/x/y)*y,H,M,C,O;if(P<1e-14&&!T&&!S)return[{value:b},{value:E}];O=Math.ceil(E/P)-Math.floor(b/P),O>x&&(P=YS(O*P/x/y)*y),Ee(l)||(H=Math.pow(10,l),P=Math.ceil(P*H)/H),i==="ticks"?(M=Math.floor(b/P)*P,C=Math.ceil(E/P)*P):(M=b,C=E),T&&S&&s&&D9((o-a)/s,P/1e3)?(O=Math.round(Math.min((o-a)/P,d)),P=(o-a)/O,M=a,C=o):R?(M=T?a:M,C=S?o:C,O=h-1,P=(C-M)/O):(O=(C-M)/P,Sd(O,Math.round(O),P/1e3)?O=Math.round(O):O=Math.ceil(O));const L=Math.max(XS(P),XS(M));H=Math.pow(10,Ee(l)?L:l),M=Math.round(M*H)/H,C=Math.round(C*H)/H;let j=0;for(T&&(m&&M!==a?(e.push({value:a}),M<a&&j++,Sd(Math.round((M+j*P)*H)/H,a,qI(a,k,n))&&j++):M<a&&j++);j<O;++j){const z=Math.round((M+j*P)*H)/H;if(S&&z>o)break;e.push({value:z})}return S&&m&&C!==o?e.length&&Sd(e[e.length-1].value,o,qI(o,k,n))?e[e.length-1].value=o:e.push({value:o}):(!S||C===o)&&e.push({value:C}),e}function qI(n,t,{horizontal:e,minRotation:r}){const i=pa(r),s=(e?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+n).length;return Math.min(t/s,a)}class sB extends Eh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ee(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=l=>i=e?i:l,o=l=>s=r?s:l;if(t){const l=Ss(i),h=Ss(s);l<0&&h<0?o(0):l>0&&h>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),t||a(i-l)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=iB(i,s);return t.bounds==="ticks"&&R9(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return iw(t,this.chart.options.locale,this.options.ticks.format)}}class O1 extends sB{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Pi(t)?t:0,this.max=Pi(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=pa(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}rt(O1,"id","linear"),rt(O1,"defaults",{ticks:{callback:E4.formatters.numeric}});const ym={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ur=Object.keys(ym);function YI(n,t){return n-t}function XI(n,t){if(Ee(t))return null;const e=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),Pi(a)||(a=typeof r=="string"?e.parse(a,r):e.parse(a)),a===null?null:(i&&(a=i==="week"&&($d(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,i)),+a)}function KI(n,t,e,r){const i=Ur.length;for(let s=Ur.indexOf(n);s<i-1;++s){const a=ym[Ur[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=r)return Ur[s]}return Ur[i-1]}function aB(n,t,e,r,i){for(let s=Ur.length-1;s>=Ur.indexOf(e);s--){const a=Ur[s];if(ym[a].common&&n._adapter.diff(i,r,a)>=t-1)return a}return Ur[e?Ur.indexOf(e):0]}function oB(n){for(let t=Ur.indexOf(n)+1,e=Ur.length;t<e;++t)if(ym[Ur[t]].common)return Ur[t]}function $I(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:r,hi:i}=nw(e,t),s=e[r]>=t?e[r]:e[i];n[s]=!0}}function cB(n,t,e,r){const i=n._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=e[o],l>=0&&(t[l].major=!0);return t}function QI(n,t,e){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return s===0||!e?r:cB(n,r,i,e)}class t0 extends Eh{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const r=t.time||(t.time={}),i=this._adapter=new V4._date(t.adapters.date);i.init(e),Td(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:XI(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(h){!a&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!o&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!a||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Pi(i)&&!isNaN(i)?i:+e.startOf(Date.now(),r),s=Pi(s)&&!isNaN(s)?s:+e.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=k9(i,s,a);return this._unit=e.unit||(r.autoSkip?KI(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):aB(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:oB(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),QI(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=xr(e,0,a),r=xr(r,0,a),this._offsets={start:e,end:r,factor:1/(e+1+r)}}_generate(){const t=this._adapter,e=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||KI(s.minUnit,e,r,this._getLabelCapacity(e)),o=Qt(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,h=$d(l)||l===!0,d={};let g=e,m,y;if(h&&(g=+t.startOf(g,"isoWeek",l)),g=+t.startOf(g,h?"day":a),t.diff(r,e,a)>1e5*o)throw new Error(e+" and "+r+" are too far apart with stepSize of "+o+" "+a);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(m=g,y=0;m<r;m=+t.add(m,o,a),y++)$I(d,m,x);return(m===r||i.bounds==="ticks"||y===1)&&$I(d,m,x),Object.keys(d).sort(YI).map(b=>+b)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,a=e||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,e,r,i){const s=this.options,a=s.ticks.callback;if(a)return qe(a,[t,e,r],this);const o=s.time.displayFormats,l=this._unit,h=this._majorUnit,d=l&&o[l],g=h&&o[h],m=r[e],y=h&&g&&m&&m.major;return this._adapter.format(t,i||(y?g:d))}generateTickLabels(t){let e,r,i;for(e=0,r=t.length;e<r;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,i=pa(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,i=r[e.unit]||r.millisecond,s=this._tickFormatFunction(t,0,QI(this,[t],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,r=i.length;e<r;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const i=this.getLabels();for(e=0,r=i.length;e<r;++e)t.push(XI(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return _4(t.sort(YI))}}rt(t0,"id","time"),rt(t0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Dp(n,t,e){let r=0,i=n.length-1,s,a,o,l;e?(t>=n[r].pos&&t<=n[i].pos&&({lo:r,hi:i}=Xc(n,"pos",t)),{pos:s,time:o}=n[r],{pos:a,time:l}=n[i]):(t>=n[r].time&&t<=n[i].time&&({lo:r,hi:i}=Xc(n,"time",t)),{time:s,pos:o}=n[r],{time:a,pos:l}=n[i]);const h=a-s;return h?o+(l-o)*(t-s)/h:o}class ZI extends t0{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Dp(e,this.min),this._tableRange=Dp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,i=[],s=[];let a,o,l,h,d;for(a=0,o=t.length;a<o;++a)h=t[a],h>=e&&h<=r&&i.push(h);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(a=0,o=i.length;a<o;++a)d=i[a+1],l=i[a-1],h=i[a],Math.round((d+l)/2)!==h&&s.push({time:h,pos:a/(o-1)});return s}_generate(){const t=this.min,e=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(e)||r.length===1)&&r.push(e),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Dp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return Dp(this._table,r*this._tableRange+this._minPos,!0)}}rt(ZI,"id","timeseries"),rt(ZI,"defaults",t0.defaults);const Z4="label";function JI(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function lB(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function J4(n,t){n.labels=t}function tO(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Z4;const r=[];n.datasets=t.map(i=>{const s=n.datasets.find(a=>a[e]===i[e]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function uB(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z4;const e={labels:[],datasets:[]};return J4(e,n.labels),tO(e,n.datasets,t),e}function hB(n,t){const{height:e=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:h=[],fallbackContent:d,updateMode:g,...m}=n,y=it.useRef(null),x=it.useRef(null),b=()=>{y.current&&(x.current=new El(y.current,{type:a,data:uB(o,s),options:l&&{...l},plugins:h}),JI(t,x.current))},E=()=>{JI(t,null),x.current&&(x.current.destroy(),x.current=null)};return it.useEffect(()=>{!i&&x.current&&l&&lB(x.current,l)},[i,l]),it.useEffect(()=>{!i&&x.current&&J4(x.current.config.data,o.labels)},[i,o.labels]),it.useEffect(()=>{!i&&x.current&&o.datasets&&tO(x.current.config.data,o.datasets,s)},[i,o.datasets]),it.useEffect(()=>{x.current&&(i?(E(),setTimeout(b)):x.current.update(g))},[i,l,o.labels,o.datasets,g]),it.useEffect(()=>{x.current&&(E(),setTimeout(b))},[a]),it.useEffect(()=>(b(),()=>E()),[]),Q2.createElement("canvas",{ref:y,role:"img",height:e,width:r,...m},d)}const fB=it.forwardRef(hB);function mw(n,t){return El.register(t),it.forwardRef((e,r)=>Q2.createElement(fB,{...e,ref:r,type:n}))}const dB=mw("line",Kp),gB=mw("bar",Xp),eO=mw("doughnut",ld);El.register(Jp,Tx,O1);function nO({meals:n,startOfWeek:t}){const e=()=>{const a=[];for(let o=0;o<7;o++){const l=new Date(t);l.setDate(t.getDate()+o),a.push(l.toISOString().split("T")[0])}return a},i={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories",data:e().map(o=>{let l=0;return n.filter(h=>h.date===o).forEach(h=>{h.kcal?l+=h.kcal:h.foodItems.forEach(d=>{d.nutrients.forEach(g=>{const m=parseFloat(g.total)||0;(g.type==="Carbohydrate"||g.type==="Protein")&&(l+=m*4),g.type==="Fat"&&(l+=m*9)})})}),Math.round(l)}),backgroundColor:"deepskyblue"}]},s={plugins:{tooltip:{enabled:!0},legend:{display:!1}},scales:{y:{ticks:{color:"white"},grid:{color:"#444"}},x:{ticks:{color:"white"},grid:{color:"#444"}}}};return V.jsx(gB,{data:i,options:s})}El.register(Vu,pw,gw);function rO({meals:n,selectedDate:t,goal:e=2e3}){const r=t||new Date().toISOString().split("T")[0],s=n.filter(d=>d.date===r).reduce((d,g)=>{if(g.kcal)return d+g.kcal;let m=0;return g.foodItems.forEach(y=>{y.nutrients.forEach(x=>{const b=parseFloat(x.total)||0;(x.type==="Carbohydrate"||x.type==="Protein")&&(m+=b*4),x.type==="Fat"&&(m+=b*9)})}),d+m},0),a=Math.round(s),o=e-a,l={labels:["Calories Consumed"],datasets:[{data:[s,o>0?o:0],backgroundColor:["deepskyblue","#a9c9f8ff"],borderWidth:0}]},h={cutout:"85%",plugins:{legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:12,weight:"bold"},padding:15,boxWidth:10,boxHeight:10}}}};return V.jsxs("div",{className:"donut-chart",style:{position:"relative"},children:[V.jsx(eO,{data:l,options:h}),V.jsx("div",{className:"DonutWordings",children:o>0?`${o} Remaining`:"Goal Reached"})]})}El.register(Vu,pw,gw);function iO({meals:n,selectedDate:t}){const e=t||new Date().toISOString().split("T")[0],r=n.filter(m=>m.date===e),i=["Protein","Fat","Carbohydrate","Sugar","Fibre","Salt","Caffeine"],s={};r.forEach(m=>{m.foodItems.forEach(y=>{y.nutrients.forEach(x=>{var T;const b=(T=x.type)==null?void 0:T.toLowerCase();if(!b||b.includes("kcal")||b.includes("calorie"))return;const E=b.charAt(0).toUpperCase()+b.slice(1);if(i.includes(E)){const S=parseFloat(x.total)||0;s[E]=(s[E]||0)+S}})})});const a=Object.entries(s).sort((m,y)=>y[1]-m[1]),o=a.slice(0,4),l=a.slice(4),h=o.map(([m,y],x)=>({label:m,value:y,color:["#4CAF50","#FF9800","#03A9F4","teal"][x%4]}));if(l.length>0){const m=l.reduce((y,[,x])=>y+x,0);h.push({label:"Others",value:m,color:"gray"})}const d={labels:h.map(m=>m.label),datasets:[{data:h.map(m=>m.value),backgroundColor:h.map(m=>m.color),borderWidth:0}]},g={cutout:"85%",plugins:{tooltip:{enabled:!0},legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:8,weight:"bold"},padding:5,boxWidth:5,boxHeight:5}}}};return V.jsx("div",{className:"donut-chart",style:{position:"relative"},children:V.jsx(eO,{data:d,options:g})})}const pB="Left",mB="Right",yB="Up",vB="Down",Bu={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Sx={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},tC="mousemove",eC="mouseup",_B="touchend",xB="touchmove",wB="touchstart";function bB(n,t,e,r){return n>t?e>0?mB:pB:r>0?vB:yB}function nC(n,t){if(t===0)return n;const e=Math.PI/180*t,r=n[0]*Math.cos(e)+n[1]*Math.sin(e),i=n[1]*Math.cos(e)-n[0]*Math.sin(e);return[r,i]}function EB(n,t){const e=d=>{const g="touches"in d;g&&d.touches.length>1||n((m,y)=>{y.trackMouse&&!g&&(document.addEventListener(tC,r),document.addEventListener(eC,a));const{clientX:x,clientY:b}=g?d.touches[0]:d,E=nC([x,b],y.rotationAngle);return y.onTouchStartOrOnMouseDown&&y.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},m),Sx),{initial:E.slice(),xy:E,start:d.timeStamp||0})})},r=d=>{n((g,m)=>{const y="touches"in d;if(y&&d.touches.length>1)return g;if(d.timeStamp-g.start>m.swipeDuration)return g.swiping?Object.assign(Object.assign({},g),{swiping:!1}):g;const{clientX:x,clientY:b}=y?d.touches[0]:d,[E,T]=nC([x,b],m.rotationAngle),S=E-g.xy[0],R=T-g.xy[1],k=Math.abs(S),P=Math.abs(R),H=(d.timeStamp||0)-g.start,M=Math.sqrt(k*k+P*P)/(H||1),C=[S/(H||1),R/(H||1)],O=bB(k,P,S,R),L=typeof m.delta=="number"?m.delta:m.delta[O.toLowerCase()]||Bu.delta;if(k<L&&P<L&&!g.swiping)return g;const j={absX:k,absY:P,deltaX:S,deltaY:R,dir:O,event:d,first:g.first,initial:g.initial,velocity:M,vxvy:C};j.first&&m.onSwipeStart&&m.onSwipeStart(j),m.onSwiping&&m.onSwiping(j);let z=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${O}`])&&(z=!0),z&&m.preventScrollOnSwipe&&m.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},g),{first:!1,eventData:j,swiping:!0})})},i=d=>{n((g,m)=>{let y;if(g.swiping&&g.eventData){if(d.timeStamp-g.start<m.swipeDuration){y=Object.assign(Object.assign({},g.eventData),{event:d}),m.onSwiped&&m.onSwiped(y);const x=m[`onSwiped${y.dir}`];x&&x(y)}}else m.onTap&&m.onTap({event:d});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},g),Sx),{eventData:y})})},s=()=>{document.removeEventListener(tC,r),document.removeEventListener(eC,a)},a=d=>{s(),i(d)},o=(d,g)=>{let m=()=>{};if(d&&d.addEventListener){const y=Object.assign(Object.assign({},Bu.touchEventOptions),g.touchEventOptions),x=[[wB,e,y],[xB,r,Object.assign(Object.assign({},y),g.preventScrollOnSwipe?{passive:!1}:{})],[_B,i,y]];x.forEach(([b,E,T])=>d.addEventListener(b,E,T)),m=()=>x.forEach(([b,E])=>d.removeEventListener(b,E))}return m},h={ref:d=>{d!==null&&n((g,m)=>{if(g.el===d)return g;const y={};return g.el&&g.el!==d&&g.cleanUpTouch&&(g.cleanUpTouch(),y.cleanUpTouch=void 0),m.trackTouch&&d&&(y.cleanUpTouch=o(d,m)),Object.assign(Object.assign(Object.assign({},g),{el:d}),y)})}};return t.trackMouse&&(h.onMouseDown=e),[h,o]}function AB(n,t,e,r){return!t.trackTouch||!n.el?(n.cleanUpTouch&&n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:void 0})):n.cleanUpTouch?t.preventScrollOnSwipe!==e.preventScrollOnSwipe||t.touchEventOptions.passive!==e.touchEventOptions.passive?(n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})):n:Object.assign(Object.assign({},n),{cleanUpTouch:r(n.el,t)})}function TB(n){const{trackMouse:t}=n,e=it.useRef(Object.assign({},Sx)),r=it.useRef(Object.assign({},Bu)),i=it.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Bu),n);let s;for(s in Bu)r.current[s]===void 0&&(r.current[s]=Bu[s]);const[a,o]=it.useMemo(()=>EB(l=>e.current=l(e.current,r.current),{trackMouse:t}),[t]);return e.current=AB(e.current,r.current,i.current,o),a}const sO=it.createContext({});function SB(n){const t=it.useRef(null);return t.current===null&&(t.current=n()),t.current}const yw=typeof window<"u",IB=yw?it.useLayoutEffect:it.useEffect,vw=it.createContext(null);function _w(n,t){n.indexOf(t)===-1&&n.push(t)}function xw(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const xa=(n,t,e)=>e>t?t:e<n?n:e;let ww=()=>{};const wa={},aO=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function oO(n){return typeof n=="object"&&n!==null}const cO=n=>/^0[^.\s]+$/u.test(n);function bw(n){let t;return()=>(t===void 0&&(t=n()),t)}const Ri=n=>n,CB=(n,t)=>e=>t(n(e)),S0=(...n)=>n.reduce(CB),e0=(n,t,e)=>{const r=t-n;return r===0?1:(e-n)/r};class Ew{constructor(){this.subscriptions=[]}add(t){return _w(this.subscriptions,t),()=>xw(this.subscriptions,t)}notify(t,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Is=n=>n*1e3,Cs=n=>n/1e3;function lO(n,t){return t?n*(1e3/t):0}const uO=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,DB=1e-7,RB=12;function OB(n,t,e,r,i){let s,a,o=0;do a=t+(e-t)/2,s=uO(a,r,i)-n,s>0?e=a:t=a;while(Math.abs(s)>DB&&++o<RB);return a}function I0(n,t,e,r){if(n===t&&e===r)return Ri;const i=s=>OB(s,0,1,n,e);return s=>s===0||s===1?s:uO(i(s),t,r)}const hO=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,fO=n=>t=>1-n(1-t),dO=I0(.33,1.53,.69,.99),Aw=fO(dO),gO=hO(Aw),pO=n=>(n*=2)<1?.5*Aw(n):.5*(2-Math.pow(2,-10*(n-1))),Tw=n=>1-Math.sin(Math.acos(n)),mO=fO(Tw),yO=hO(Tw),MB=I0(.42,0,1,1),PB=I0(0,0,.58,1),vO=I0(.42,0,.58,1),NB=n=>Array.isArray(n)&&typeof n[0]!="number",_O=n=>Array.isArray(n)&&typeof n[0]=="number",kB={linear:Ri,easeIn:MB,easeInOut:vO,easeOut:PB,circIn:Tw,circInOut:yO,circOut:mO,backIn:Aw,backInOut:gO,backOut:dO,anticipate:pO},LB=n=>typeof n=="string",rC=n=>{if(_O(n)){ww(n.length===4);const[t,e,r,i]=n;return I0(t,e,r,i)}else if(LB(n))return kB[n];return n},Rp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function VB(n,t){let e=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(h.schedule(d),n()),d(o)}const h={schedule:(d,g=!1,m=!1)=>{const x=m&&i?e:r;return g&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[e,r]=[r,e],e.forEach(l),e.clear(),i=!1,s&&(s=!1,h.process(d))}};return h}const BB=40;function xO(n,t){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,a=Rp.reduce((R,k)=>(R[k]=VB(s),R),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:d,update:g,preRender:m,render:y,postRender:x}=a,b=()=>{const R=wa.useManualTiming?i.timestamp:performance.now();e=!1,wa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,BB),1)),i.timestamp=R,i.isProcessing=!0,o.process(i),l.process(i),h.process(i),d.process(i),g.process(i),m.process(i),y.process(i),x.process(i),i.isProcessing=!1,e&&t&&(r=!1,n(b))},E=()=>{e=!0,r=!0,i.isProcessing||n(b)};return{schedule:Rp.reduce((R,k)=>{const P=a[k];return R[k]=(H,M=!1,C=!1)=>(e||E(),P.schedule(H,M,C)),R},{}),cancel:R=>{for(let k=0;k<Rp.length;k++)a[Rp[k]].cancel(R)},state:i,steps:a}}const{schedule:$e,cancel:No,state:lr,steps:E_}=xO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ri,!0);let t1;function FB(){t1=void 0}const Hr={now:()=>(t1===void 0&&Hr.set(lr.isProcessing||wa.useManualTiming?lr.timestamp:performance.now()),t1),set:n=>{t1=n,queueMicrotask(FB)}},wO=n=>t=>typeof t=="string"&&t.startsWith(n),Sw=wO("--"),UB=wO("var(--"),Iw=n=>UB(n)?jB.test(n.split("/*")[0].trim()):!1,jB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ah={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},n0={...Ah,transform:n=>xa(0,1,n)},Op={...Ah,default:1},Dd=n=>Math.round(n*1e5)/1e5,Cw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zB(n){return n==null}const HB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Dw=(n,t)=>e=>!!(typeof e=="string"&&HB.test(e)&&e.startsWith(n)||t&&!zB(e)&&Object.prototype.hasOwnProperty.call(e,t)),bO=(n,t,e)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(Cw);return{[n]:parseFloat(i),[t]:parseFloat(s),[e]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},GB=n=>xa(0,255,n),A_={...Ah,transform:n=>Math.round(GB(n))},Kc={test:Dw("rgb","red"),parse:bO("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:r=1})=>"rgba("+A_.transform(n)+", "+A_.transform(t)+", "+A_.transform(e)+", "+Dd(n0.transform(r))+")"};function WB(n){let t="",e="",r="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ix={test:Dw("#"),parse:WB,transform:Kc.transform},C0=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),ho=C0("deg"),Ds=C0("%"),Ht=C0("px"),qB=C0("vh"),YB=C0("vw"),iC={...Ds,parse:n=>Ds.parse(n)/100,transform:n=>Ds.transform(n*100)},Fu={test:Dw("hsl","hue"),parse:bO("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ds.transform(Dd(t))+", "+Ds.transform(Dd(e))+", "+Dd(n0.transform(r))+")"},In={test:n=>Kc.test(n)||Ix.test(n)||Fu.test(n),parse:n=>Kc.test(n)?Kc.parse(n):Fu.test(n)?Fu.parse(n):Ix.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Kc.transform(n):Fu.transform(n),getAnimatableNone:n=>{const t=In.parse(n);return t.alpha=0,In.transform(t)}},XB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function KB(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(Cw))==null?void 0:t.length)||0)+(((e=n.match(XB))==null?void 0:e.length)||0)>0}const EO="number",AO="color",$B="var",QB="var(",sC="${}",ZB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function r0(n){const t=n.toString(),e=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(ZB,l=>(In.test(l)?(r.color.push(s),i.push(AO),e.push(In.parse(l))):l.startsWith(QB)?(r.var.push(s),i.push($B),e.push(l)):(r.number.push(s),i.push(EO),e.push(parseFloat(l))),++s,sC)).split(sC);return{values:e,split:o,indexes:r,types:i}}function TO(n){return r0(n).values}function SO(n){const{split:t,types:e}=r0(n),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=e[a];o===EO?s+=Dd(i[a]):o===AO?s+=In.transform(i[a]):s+=i[a]}return s}}const JB=n=>typeof n=="number"?0:In.test(n)?In.getAnimatableNone(n):n;function tF(n){const t=TO(n);return SO(n)(t.map(JB))}const ko={test:KB,parse:TO,createTransformer:SO,getAnimatableNone:tF};function T_(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function eF({hue:n,saturation:t,lightness:e,alpha:r}){n/=360,t/=100,e/=100;let i=0,s=0,a=0;if(!t)i=s=a=e;else{const o=e<.5?e*(1+t):e+t-e*t,l=2*e-o;i=T_(l,o,n+1/3),s=T_(l,o,n),a=T_(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function M1(n,t){return e=>e>0?t:n}const Je=(n,t,e)=>n+(t-n)*e,S_=(n,t,e)=>{const r=n*n,i=e*(t*t-r)+r;return i<0?0:Math.sqrt(i)},nF=[Ix,Kc,Fu],rF=n=>nF.find(t=>t.test(n));function aC(n){const t=rF(n);if(!t)return!1;let e=t.parse(n);return t===Fu&&(e=eF(e)),e}const oC=(n,t)=>{const e=aC(n),r=aC(t);if(!e||!r)return M1(n,t);const i={...e};return s=>(i.red=S_(e.red,r.red,s),i.green=S_(e.green,r.green,s),i.blue=S_(e.blue,r.blue,s),i.alpha=Je(e.alpha,r.alpha,s),Kc.transform(i))},Cx=new Set(["none","hidden"]);function iF(n,t){return Cx.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function sF(n,t){return e=>Je(n,t,e)}function Rw(n){return typeof n=="number"?sF:typeof n=="string"?Iw(n)?M1:In.test(n)?oC:cF:Array.isArray(n)?IO:typeof n=="object"?In.test(n)?oC:aF:M1}function IO(n,t){const e=[...n],r=e.length,i=n.map((s,a)=>Rw(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)e[a]=i[a](s);return e}}function aF(n,t){const e={...n,...t},r={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(r[i]=Rw(n[i])(n[i],t[i]));return i=>{for(const s in r)e[s]=r[s](i);return e}}function oF(n,t){const e=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=n.indexes[s][r[s]],o=n.values[a]??0;e[i]=o,r[s]++}return e}const cF=(n,t)=>{const e=ko.createTransformer(t),r=r0(n),i=r0(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Cx.has(n)&&!i.values.length||Cx.has(t)&&!r.values.length?iF(n,t):S0(IO(oF(r,i),i.values),e):M1(n,t)};function CO(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Je(n,t,e):Rw(n)(n,t)}const lF=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>$e.update(t,e),stop:()=>No(t),now:()=>lr.isProcessing?lr.timestamp:Hr.now()}},DO=(n,t,e=10)=>{let r="";const i=Math.max(Math.round(t/e),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},P1=2e4;function Ow(n){let t=0;const e=50;let r=n.next(t);for(;!r.done&&t<P1;)t+=e,r=n.next(t);return t>=P1?1/0:t}function uF(n,t=100,e){const r=e({...n,keyframes:[0,t]}),i=Math.min(Ow(r),P1);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Cs(i)}}const hF=5;function RO(n,t,e){const r=Math.max(t-hF,0);return lO(e-n(r),t-r)}const cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},I_=.001;function fF({duration:n=cn.duration,bounce:t=cn.bounce,velocity:e=cn.velocity,mass:r=cn.mass}){let i,s,a=1-t;a=xa(cn.minDamping,cn.maxDamping,a),n=xa(cn.minDuration,cn.maxDuration,Cs(n)),a<1?(i=h=>{const d=h*a,g=d*n,m=d-e,y=Dx(h,a),x=Math.exp(-g);return I_-m/y*x},s=h=>{const g=h*a*n,m=g*e+e,y=Math.pow(a,2)*Math.pow(h,2)*n,x=Math.exp(-g),b=Dx(Math.pow(h,2),a);return(-i(h)+I_>0?-1:1)*((m-y)*x)/b}):(i=h=>{const d=Math.exp(-h*n),g=(h-e)*n+1;return-I_+d*g},s=h=>{const d=Math.exp(-h*n),g=(e-h)*(n*n);return d*g});const o=5/n,l=gF(i,s,o);if(n=Is(n),isNaN(l))return{stiffness:cn.stiffness,damping:cn.damping,duration:n};{const h=Math.pow(l,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const dF=12;function gF(n,t,e){let r=e;for(let i=1;i<dF;i++)r=r-n(r)/t(r);return r}function Dx(n,t){return n*Math.sqrt(1-t*t)}const pF=["duration","bounce"],mF=["stiffness","damping","mass"];function cC(n,t){return t.some(e=>n[e]!==void 0)}function yF(n){let t={velocity:cn.velocity,stiffness:cn.stiffness,damping:cn.damping,mass:cn.mass,isResolvedFromDuration:!1,...n};if(!cC(n,mF)&&cC(n,pF))if(n.visualDuration){const e=n.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,s=2*xa(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:cn.mass,stiffness:i,damping:s}}else{const e=fF(n);t={...t,...e,mass:cn.mass},t.isResolvedFromDuration=!0}return t}function N1(n=cn.visualDuration,t=cn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:i}=e;const s=e.keyframes[0],a=e.keyframes[e.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:h,mass:d,duration:g,velocity:m,isResolvedFromDuration:y}=yF({...e,velocity:-Cs(e.velocity||0)}),x=m||0,b=h/(2*Math.sqrt(l*d)),E=a-s,T=Cs(Math.sqrt(l/d)),S=Math.abs(E)<5;r||(r=S?cn.restSpeed.granular:cn.restSpeed.default),i||(i=S?cn.restDelta.granular:cn.restDelta.default);let R;if(b<1){const P=Dx(T,b);R=H=>{const M=Math.exp(-b*T*H);return a-M*((x+b*T*E)/P*Math.sin(P*H)+E*Math.cos(P*H))}}else if(b===1)R=P=>a-Math.exp(-T*P)*(E+(x+T*E)*P);else{const P=T*Math.sqrt(b*b-1);R=H=>{const M=Math.exp(-b*T*H),C=Math.min(P*H,300);return a-M*((x+b*T*E)*Math.sinh(C)+P*E*Math.cosh(C))/P}}const k={calculatedDuration:y&&g||null,next:P=>{const H=R(P);if(y)o.done=P>=g;else{let M=P===0?x:0;b<1&&(M=P===0?Is(x):RO(R,P,H));const C=Math.abs(M)<=r,O=Math.abs(a-H)<=i;o.done=C&&O}return o.value=o.done?a:H,o},toString:()=>{const P=Math.min(Ow(k),P1),H=DO(M=>k.next(P*M).value,P,30);return P+"ms "+H},toTransition:()=>{}};return k}N1.applyToOptions=n=>{const t=uF(n,100,N1);return n.ease=t.ease,n.duration=Is(t.duration),n.type="keyframes",n};function Rx({keyframes:n,velocity:t=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:d}){const g=n[0],m={done:!1,value:g},y=C=>o!==void 0&&C<o||l!==void 0&&C>l,x=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let b=e*t;const E=g+b,T=a===void 0?E:a(E);T!==E&&(b=T-g);const S=C=>-b*Math.exp(-C/r),R=C=>T+S(C),k=C=>{const O=S(C),L=R(C);m.done=Math.abs(O)<=h,m.value=m.done?T:L};let P,H;const M=C=>{y(m.value)&&(P=C,H=N1({keyframes:[m.value,x(m.value)],velocity:RO(R,C,m.value),damping:i,stiffness:s,restDelta:h,restSpeed:d}))};return M(0),{calculatedDuration:null,next:C=>{let O=!1;return!H&&P===void 0&&(O=!0,k(C),M(C)),P!==void 0&&C>=P?H.next(C-P):(!O&&k(C),m)}}}function vF(n,t,e){const r=[],i=e||wa.mix||CO,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(t){const l=Array.isArray(t)?t[a]||Ri:t;o=S0(l,o)}r.push(o)}return r}function _F(n,t,{clamp:e=!0,ease:r,mixer:i}={}){const s=n.length;if(ww(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=vF(t,r,i),l=o.length,h=d=>{if(a&&d<n[0])return t[0];let g=0;if(l>1)for(;g<n.length-2&&!(d<n[g+1]);g++);const m=e0(n[g],n[g+1],d);return o[g](m)};return e?d=>h(xa(n[0],n[s-1],d)):h}function xF(n,t){const e=n[n.length-1];for(let r=1;r<=t;r++){const i=e0(0,t,r);n.push(Je(e,1,i))}}function wF(n){const t=[0];return xF(t,n.length-1),t}function bF(n,t){return n.map(e=>e*t)}function EF(n,t){return n.map(()=>t||vO).splice(0,n.length-1)}function Rd({duration:n=300,keyframes:t,times:e,ease:r="easeInOut"}){const i=NB(r)?r.map(rC):rC(r),s={done:!1,value:t[0]},a=bF(e&&e.length===t.length?e:wF(t),n),o=_F(a,t,{ease:Array.isArray(i)?i:EF(t,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const AF=n=>n!==null;function Mw(n,{repeat:t,repeatType:e="loop"},r,i=1){const s=n.filter(AF),o=i<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const TF={decay:Rx,inertia:Rx,tween:Rd,keyframes:Rd,spring:N1};function OO(n){typeof n.type=="string"&&(n.type=TF[n.type])}class Pw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const SF=n=>n/100;class Nw extends Pw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:e}=this.options;e&&e.updatedAt!==Hr.now()&&this.tick(Hr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;OO(t);const{type:e=Rd,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=e||Rd;l!==Rd&&typeof o[0]!="number"&&(this.mixKeyframes=S0(SF,CO(o[0],o[1])),o=[0,100]);const h=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=Ow(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:d,repeat:g,repeatType:m,repeatDelay:y,type:x,onUpdate:b,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,k=r;if(g){const C=Math.min(this.currentTime,i)/o;let O=Math.floor(C),L=C%1;!L&&C>=1&&(L=1),L===1&&O--,O=Math.min(O,g+1),!!(O%2)&&(m==="reverse"?(L=1-L,y&&(L-=y/o)):m==="mirror"&&(k=a)),R=xa(0,1,L)*o}const P=S?{done:!1,value:d[0]}:k.next(R);s&&(P.value=s(P.value));let{done:H}=P;!S&&l!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return M&&x!==Rx&&(P.value=Mw(d,this.options,E,this.speed)),b&&b(P.value),M&&this.finish(),P}then(t,e){return this.finished.then(t,e)}get duration(){return Cs(this.calculatedDuration)}get time(){return Cs(this.currentTime)}set time(t){var e;t=Is(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Hr.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Cs(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=lF,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function IF(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const $c=n=>n*180/Math.PI,Ox=n=>{const t=$c(Math.atan2(n[1],n[0]));return Mx(t)},CF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Ox,rotateZ:Ox,skewX:n=>$c(Math.atan(n[1])),skewY:n=>$c(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Mx=n=>(n=n%360,n<0&&(n+=360),n),lC=Ox,uC=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),hC=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),DF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:uC,scaleY:hC,scale:n=>(uC(n)+hC(n))/2,rotateX:n=>Mx($c(Math.atan2(n[6],n[5]))),rotateY:n=>Mx($c(Math.atan2(-n[2],n[0]))),rotateZ:lC,rotate:lC,skewX:n=>$c(Math.atan(n[4])),skewY:n=>$c(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Px(n){return n.includes("scale")?1:0}function Nx(n,t){if(!n||n==="none")return Px(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=DF,i=e;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=CF,i=o}if(!i)return Px(t);const s=r[t],a=i[1].split(",").map(OF);return typeof s=="function"?s(a):a[s]}const RF=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Nx(e,t)};function OF(n){return parseFloat(n.trim())}const Th=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sh=new Set(Th),fC=n=>n===Ah||n===Ht,MF=new Set(["x","y","z"]),PF=Th.filter(n=>!MF.has(n));function NF(n){const t=[];return PF.forEach(e=>{const r=n.getValue(e);r!==void 0&&(t.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),t}const nl={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Nx(t,"x"),y:(n,{transform:t})=>Nx(t,"y")};nl.translateX=nl.x;nl.translateY=nl.y;const rl=new Set;let kx=!1,Lx=!1,Vx=!1;function MO(){if(Lx){const n=Array.from(rl).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),e=new Map;t.forEach(r=>{const i=NF(r);i.length&&(e.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Lx=!1,kx=!1,rl.forEach(n=>n.complete(Vx)),rl.clear()}function PO(){rl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Lx=!0)})}function kF(){Vx=!0,PO(),MO(),Vx=!1}class kw{constructor(t,e,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(rl.add(this),kx||(kx=!0,$e.read(PO),$e.resolveKeyframes(MO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&e){const o=r.readValue(e,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}IF(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),rl.delete(this)}cancel(){this.state==="scheduled"&&(rl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const LF=n=>n.startsWith("--");function VF(n,t,e){LF(t)?n.style.setProperty(t,e):n.style[t]=e}const BF=bw(()=>window.ScrollTimeline!==void 0),FF={};function UF(n,t){const e=bw(n);return()=>FF[t]??e()}const NO=UF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),dd=([n,t,e,r])=>`cubic-bezier(${n}, ${t}, ${e}, ${r})`,dC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dd([0,.65,.55,1]),circOut:dd([.55,0,1,.45]),backIn:dd([.31,.01,.66,-.59]),backOut:dd([.33,1.53,.69,.99])};function kO(n,t){if(n)return typeof n=="function"?NO()?DO(n,t):"ease-out":_O(n)?dd(n):Array.isArray(n)?n.map(e=>kO(e,t)||dC.easeOut):dC[n]}function jF(n,t,e,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h=void 0){const d={[t]:e};l&&(d.offset=l);const g=kO(o,i);Array.isArray(g)&&(d.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),n.animate(d,m)}function LO(n){return typeof n=="function"&&"applyToOptions"in n}function zF({type:n,...t}){return LO(n)&&NO()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class HF extends Pw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,ww(typeof t.type!="string");const h=zF(t);this.animation=jF(e,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=Mw(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):VF(e,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,r;const t=((r=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:r.call(e).duration)||0;return Cs(Number(t))}get time(){return Cs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Is(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&BF()?(this.animation.timeline=t,Ri):e(this)}}const VO={anticipate:pO,backInOut:gO,circInOut:yO};function GF(n){return n in VO}function WF(n){typeof n.ease=="string"&&GF(n.ease)&&(n.ease=VO[n.ease])}const gC=10;class qF extends HF{constructor(t){WF(t),OO(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const o=new Nw({...a,autoplay:!1}),l=Is(this.finishedTime??this.time);e.setWithVelocity(o.sample(l-gC).value,o.sample(l).value,gC),o.stop()}}const pC=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ko.test(n)||n==="0")&&!n.startsWith("url("));function YF(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function XF(n,t,e,r){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],a=pC(i,t),o=pC(s,t);return!a||!o?!1:YF(n)||(e==="spring"||LO(e))&&r}function Bx(n){n.duration=0,n.type}const KF=new Set(["opacity","clipPath","filter","transform"]),$F=bw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function QF(n){var d;const{motionValue:t,name:e,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=t.owner.getProps();return $F()&&e&&KF.has(e)&&(e!=="transform"||!h)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const ZF=40;class JF extends Pw{constructor({autoplay:t=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:h,element:d,...g}){var x;super(),this.stop=()=>{var b,E;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Hr.now();const m={autoplay:t,delay:e,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:h,element:d,...g},y=(d==null?void 0:d.KeyframeResolver)||kw;this.keyframeResolver=new y(o,(b,E,T)=>this.onKeyframesResolved(b,E,m,!T),l,h,d),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,e,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:h,onUpdate:d}=r;this.resolvedAt=Hr.now(),XF(t,s,a,o)||((wa.instantAnimations||!l)&&(d==null||d(Mw(t,r,e))),t[0]=t[t.length-1],Bx(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ZF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:t},y=!h&&QF(m)?new qF({...m,element:m.motionValue.owner.current}):new Nw(m);y.finished.then(()=>this.notifyFinished()).catch(Ri),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),kF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const tU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eU(n){const t=tU.exec(n);if(!t)return[,];const[,e,r,i]=t;return[`--${e??r}`,i]}function BO(n,t,e=1){const[r,i]=eU(n);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return aO(a)?parseFloat(a):a}return Iw(i)?BO(i,t,e+1):i}function Lw(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const FO=new Set(["width","height","top","left","right","bottom",...Th]),nU={test:n=>n==="auto",parse:n=>n},UO=n=>t=>t.test(n),jO=[Ah,Ht,Ds,ho,YB,qB,nU],mC=n=>jO.find(UO(n));function rU(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||cO(n):!0}const iU=new Set(["brightness","contrast","saturate","opacity"]);function sU(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=e.match(Cw)||[];if(!r)return n;const i=e.replace(r,"");let s=iU.has(t)?1:0;return r!==e&&(s*=100),t+"("+s+i+")"}const aU=/\b([a-z-]*)\(.*?\)/gu,Fx={...ko,getAnimatableNone:n=>{const t=n.match(aU);return t?t.map(sU).join(" "):n}},yC={...Ah,transform:Math.round},oU={rotate:ho,rotateX:ho,rotateY:ho,rotateZ:ho,scale:Op,scaleX:Op,scaleY:Op,scaleZ:Op,skew:ho,skewX:ho,skewY:ho,distance:Ht,translateX:Ht,translateY:Ht,translateZ:Ht,x:Ht,y:Ht,z:Ht,perspective:Ht,transformPerspective:Ht,opacity:n0,originX:iC,originY:iC,originZ:Ht},Vw={borderWidth:Ht,borderTopWidth:Ht,borderRightWidth:Ht,borderBottomWidth:Ht,borderLeftWidth:Ht,borderRadius:Ht,radius:Ht,borderTopLeftRadius:Ht,borderTopRightRadius:Ht,borderBottomRightRadius:Ht,borderBottomLeftRadius:Ht,width:Ht,maxWidth:Ht,height:Ht,maxHeight:Ht,top:Ht,right:Ht,bottom:Ht,left:Ht,padding:Ht,paddingTop:Ht,paddingRight:Ht,paddingBottom:Ht,paddingLeft:Ht,margin:Ht,marginTop:Ht,marginRight:Ht,marginBottom:Ht,marginLeft:Ht,backgroundPositionX:Ht,backgroundPositionY:Ht,...oU,zIndex:yC,fillOpacity:n0,strokeOpacity:n0,numOctaves:yC},cU={...Vw,color:In,backgroundColor:In,outlineColor:In,fill:In,stroke:In,borderColor:In,borderTopColor:In,borderRightColor:In,borderBottomColor:In,borderLeftColor:In,filter:Fx,WebkitFilter:Fx},zO=n=>cU[n];function HO(n,t){let e=zO(n);return e!==Fx&&(e=ko),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const lU=new Set(["auto","none","0"]);function uU(n,t,e){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!lU.has(s)&&r0(s).values.length&&(i=n[r]),r++}if(i&&e)for(const s of t)n[s]=HO(e,i)}class hU extends kw{constructor(t,e,r,i,s){super(t,e,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),Iw(h))){const d=BO(h,e.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!FO.has(r)||t.length!==2)return;const[i,s]=t,a=mC(i),o=mC(s);if(a!==o)if(fC(a)&&fC(o))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else nl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||rU(t[i]))&&r.push(i);r.length&&uU(t,r,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:e,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=nl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,h])=>{t.getValue(l).set(h)}),this.resolveNoneKeyframes()}}function fU(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(e==null?void 0:e[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const GO=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function dU(n){return oO(n)&&"offsetHeight"in n}const vC=30,gU=n=>!isNaN(parseFloat(n));class pU{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Hr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Hr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=gU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Ew);const r=this.events[t].add(e);return t==="change"?()=>{r(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>vC)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,vC);return lO(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nh(n,t){return new pU(n,t)}const{schedule:Bw}=xO(queueMicrotask,!1),Gi={x:!1,y:!1};function WO(){return Gi.x||Gi.y}function mU(n){return n==="x"||n==="y"?Gi[n]?null:(Gi[n]=!0,()=>{Gi[n]=!1}):Gi.x||Gi.y?null:(Gi.x=Gi.y=!0,()=>{Gi.x=Gi.y=!1})}function qO(n,t){const e=fU(n),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[e,i,()=>r.abort()]}function _C(n){return!(n.pointerType==="touch"||WO())}function yU(n,t,e={}){const[r,i,s]=qO(n,e),a=o=>{if(!_C(o))return;const{target:l}=o,h=t(l,o);if(typeof h!="function"||!l)return;const d=g=>{_C(g)&&(h(g),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const YO=(n,t)=>t?n===t?!0:YO(n,t.parentElement):!1,Fw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,vU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _U(n){return vU.has(n.tagName)||n.tabIndex!==-1}const e1=new WeakSet;function xC(n){return t=>{t.key==="Enter"&&n(t)}}function C_(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const xU=(n,t)=>{const e=n.currentTarget;if(!e)return;const r=xC(()=>{if(e1.has(e))return;C_(e,"down");const i=xC(()=>{C_(e,"up")}),s=()=>C_(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",r,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),t)};function wC(n){return Fw(n)&&!WO()}function wU(n,t,e={}){const[r,i,s]=qO(n,e),a=o=>{const l=o.currentTarget;if(!wC(o))return;e1.add(l);const h=t(l,o),d=(y,x)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),e1.has(l)&&e1.delete(l),wC(y)&&typeof h=="function"&&h(y,{success:x})},g=y=>{d(y,l===window||l===document||e.useGlobalTarget||YO(l,y.target))},m=y=>{d(y,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(e.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),dU(o)&&(o.addEventListener("focus",h=>xU(h,i)),!_U(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function XO(n){return oO(n)&&"ownerSVGElement"in n}function bU(n){return XO(n)&&n.tagName==="svg"}const wr=n=>!!(n&&n.getVelocity),EU=[...jO,In,ko],AU=n=>EU.find(UO(n)),KO=it.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function TU(n=!0){const t=it.useContext(vw);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,s=it.useId();it.useEffect(()=>{if(n)return i(s)},[n]);const a=it.useCallback(()=>n&&r&&r(s),[s,r,n]);return!e&&r?[!1,a]:[!0]}const $O=it.createContext({strict:!1}),bC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rh={};for(const n in bC)rh[n]={isEnabled:t=>bC[n].some(e=>!!t[e])};function SU(n){for(const t in n)rh[t]={...rh[t],...n[t]}}const IU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function k1(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||IU.has(n)}let QO=n=>!k1(n);function CU(n){typeof n=="function"&&(QO=t=>t.startsWith("on")?!k1(t):n(t))}try{CU(require("@emotion/is-prop-valid").default)}catch{}function DU(n,t,e){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(QO(i)||e===!0&&k1(i)||!t&&!k1(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const vm=it.createContext({});function _m(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function i0(n){return typeof n=="string"||Array.isArray(n)}const Uw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jw=["initial",...Uw];function xm(n){return _m(n.animate)||jw.some(t=>i0(n[t]))}function ZO(n){return!!(xm(n)||n.variants)}function RU(n,t){if(xm(n)){const{initial:e,animate:r}=n;return{initial:e===!1||i0(e)?e:void 0,animate:i0(r)?r:void 0}}return n.inherit!==!1?t:{}}function OU(n){const{initial:t,animate:e}=RU(n,it.useContext(vm));return it.useMemo(()=>({initial:t,animate:e}),[EC(t),EC(e)])}function EC(n){return Array.isArray(n)?n.join(" "):n}const s0={};function MU(n){for(const t in n)s0[t]=n[t],Sw(t)&&(s0[t].isCSSVariable=!0)}function JO(n,{layout:t,layoutId:e}){return Sh.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!s0[n]||n==="opacity")}const PU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NU=Th.length;function kU(n,t,e){let r="",i=!0;for(let s=0;s<NU;s++){const a=Th[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||e){const h=GO(o,Vw[a]);if(!l){i=!1;const d=PU[a]||a;r+=`${d}(${h}) `}e&&(t[a]=h)}}return r=r.trim(),e?r=e(t,i?"":r):i&&(r="none"),r}function zw(n,t,e){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in t){const h=t[l];if(Sh.has(l)){a=!0;continue}else if(Sw(l)){i[l]=h;continue}else{const d=GO(h,Vw[l]);l.startsWith("origin")?(o=!0,s[l]=d):r[l]=d}}if(t.transform||(a||e?r.transform=kU(t,n.transform,e):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${h} ${d}`}}const Hw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tM(n,t,e){for(const r in t)!wr(t[r])&&!JO(r,e)&&(n[r]=t[r])}function LU({transformTemplate:n},t){return it.useMemo(()=>{const e=Hw();return zw(e,t,n),Object.assign({},e.vars,e.style)},[t])}function VU(n,t){const e=n.style||{},r={};return tM(r,e,n),Object.assign(r,LU(n,t)),r}function BU(n,t){const e={},r=VU(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=r,e}const FU={offset:"stroke-dashoffset",array:"stroke-dasharray"},UU={offset:"strokeDashoffset",array:"strokeDasharray"};function jU(n,t,e=1,r=0,i=!0){n.pathLength=1;const s=i?FU:UU;n[s.offset]=Ht.transform(-r);const a=Ht.transform(t),o=Ht.transform(e);n[s.array]=`${a} ${o}`}function eM(n,{attrX:t,attrY:e,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,h,d){if(zw(n,o,h),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:m}=n;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),r!==void 0&&(g.scale=r),i!==void 0&&jU(g,i,s,a,!1)}const nM=()=>({...Hw(),attrs:{}}),rM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function zU(n,t,e,r){const i=it.useMemo(()=>{const s=nM();return eM(s,t,rM(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};tM(s,n.style,n),i.style={...s,...i.style}}return i}const HU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gw(n){return typeof n!="string"||n.includes("-")?!1:!!(HU.indexOf(n)>-1||/[A-Z]/u.test(n))}function GU(n,t,e,{latestValues:r},i,s=!1){const o=(Gw(n)?zU:BU)(t,r,i,n),l=DU(t,typeof n=="string",s),h=n!==it.Fragment?{...l,...o,ref:e}:{},{children:d}=t,g=it.useMemo(()=>wr(d)?d.get():d,[d]);return it.createElement(n,{...h,children:g})}function AC(n){const t=[{},{}];return n==null||n.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function Ww(n,t,e,r){if(typeof t=="function"){const[i,s]=AC(r);t=t(e!==void 0?e:n.custom,i,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,s]=AC(r);t=t(e!==void 0?e:n.custom,i,s)}return t}function n1(n){return wr(n)?n.get():n}function WU({scrapeMotionValuesFromProps:n,createRenderState:t},e,r,i){return{latestValues:qU(e,r,i,n),renderState:t()}}function qU(n,t,e,r){const i={},s=r(n,{});for(const m in s)i[m]=n1(s[m]);let{initial:a,animate:o}=n;const l=xm(n),h=ZO(n);t&&h&&!l&&n.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=e?e.initial===!1:!1;d=d||a===!1;const g=d?o:a;if(g&&typeof g!="boolean"&&!_m(g)){const m=Array.isArray(g)?g:[g];for(let y=0;y<m.length;y++){const x=Ww(n,m[y]);if(x){const{transitionEnd:b,transition:E,...T}=x;for(const S in T){let R=T[S];if(Array.isArray(R)){const k=d?R.length-1:0;R=R[k]}R!==null&&(i[S]=R)}for(const S in b)i[S]=b[S]}}}return i}const iM=n=>(t,e)=>{const r=it.useContext(vm),i=it.useContext(vw),s=()=>WU(n,t,r,i);return e?s():SB(s)};function qw(n,t,e){var s;const{style:r}=n,i={};for(const a in r)(wr(r[a])||t.style&&wr(t.style[a])||JO(a,n)||((s=e==null?void 0:e.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const YU=iM({scrapeMotionValuesFromProps:qw,createRenderState:Hw});function sM(n,t,e){const r=qw(n,t,e);for(const i in n)if(wr(n[i])||wr(t[i])){const s=Th.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const XU=iM({scrapeMotionValuesFromProps:sM,createRenderState:nM}),KU=Symbol.for("motionComponentSymbol");function Uu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function $U(n,t,e){return it.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),e&&(typeof e=="function"?e(r):Uu(e)&&(e.current=r))},[t])}const Yw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),QU="framerAppearId",aM="data-"+Yw(QU),oM=it.createContext({});function ZU(n,t,e,r,i){var b,E;const{visualElement:s}=it.useContext(vm),a=it.useContext($O),o=it.useContext(vw),l=it.useContext(KO).reducedMotion,h=it.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(n,{visualState:t,parent:s,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=h.current,g=it.useContext(oM);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&JU(h.current,e,i,g);const m=it.useRef(!1);it.useInsertionEffect(()=>{d&&m.current&&d.update(e,o)});const y=e[aM],x=it.useRef(!!y&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,y))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,y)));return IB(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),it.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,y)}),x.current=!1))}),d}function JU(n,t,e,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:d}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:cM(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Uu(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:h})}function cM(n){if(n)return n.options.allowProjection!==!1?n.projection:cM(n.parent)}function D_(n,{forwardMotionProps:t=!1}={},e,r){e&&SU(e);const i=Gw(n)?XU:YU;function s(o,l){let h;const d={...it.useContext(KO),...o,layoutId:tj(o)},{isStatic:g}=d,m=OU(o),y=i(o,g);if(!g&&yw){ej();const x=nj(d);h=x.MeasureLayout,m.visualElement=ZU(n,y,d,r,x.ProjectionNode)}return V.jsxs(vm.Provider,{value:m,children:[h&&m.visualElement?V.jsx(h,{visualElement:m.visualElement,...d}):null,GU(n,o,$U(y,m.visualElement,l),y,g,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=it.forwardRef(s);return a[KU]=n,a}function tj({layoutId:n}){const t=it.useContext(sO).id;return t&&n!==void 0?t+"-"+n:n}function ej(n,t){it.useContext($O).strict}function nj(n){const{drag:t,layout:e}=rh;if(!t&&!e)return{};const r={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function rj(n,t){if(typeof Proxy>"u")return D_;const e=new Map,r=(s,a)=>D_(s,a,n,t),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(e.has(a)||e.set(a,D_(a,void 0,n,t)),e.get(a))})}function lM({top:n,left:t,right:e,bottom:r}){return{x:{min:t,max:e},y:{min:n,max:r}}}function ij({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function sj(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function R_(n){return n===void 0||n===1}function Ux({scale:n,scaleX:t,scaleY:e}){return!R_(n)||!R_(t)||!R_(e)}function Bc(n){return Ux(n)||uM(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function uM(n){return TC(n.x)||TC(n.y)}function TC(n){return n&&n!=="0%"}function L1(n,t,e){const r=n-e,i=t*r;return e+i}function SC(n,t,e,r,i){return i!==void 0&&(n=L1(n,i,r)),L1(n,e,r)+t}function jx(n,t=0,e=1,r,i){n.min=SC(n.min,t,e,r,i),n.max=SC(n.max,t,e,r,i)}function hM(n,{x:t,y:e}){jx(n.x,t.translate,t.scale,t.originPoint),jx(n.y,e.translate,e.scale,e.originPoint)}const IC=.999999999999,CC=1.0000000000001;function aj(n,t,e,r=!1){const i=e.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=e[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,hM(n,a)),r&&Bc(s.latestValues)&&zu(n,s.latestValues))}t.x<CC&&t.x>IC&&(t.x=1),t.y<CC&&t.y>IC&&(t.y=1)}function ju(n,t){n.min=n.min+t,n.max=n.max+t}function DC(n,t,e,r,i=.5){const s=Je(n.min,n.max,i);jx(n,t,e,s,r)}function zu(n,t){DC(n.x,t.x,t.scaleX,t.scale,t.originX),DC(n.y,t.y,t.scaleY,t.scale,t.originY)}function fM(n,t){return lM(sj(n.getBoundingClientRect(),t))}function oj(n,t,e){const r=fM(n,e),{scroll:i}=t;return i&&(ju(r.x,i.offset.x),ju(r.y,i.offset.y)),r}const RC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hu=()=>({x:RC(),y:RC()}),OC=()=>({min:0,max:0}),mn=()=>({x:OC(),y:OC()}),zx={current:null},dM={current:!1};function cj(){if(dM.current=!0,!!yw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>zx.current=n.matches;n.addEventListener("change",t),t()}else zx.current=!1}const lj=new WeakMap;function uj(n,t,e){for(const r in t){const i=t[r],s=e[r];if(wr(i))n.addValue(r,i);else if(wr(s))n.addValue(r,nh(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,nh(a!==void 0?a:i,{owner:n}))}}for(const r in e)t[r]===void 0&&n.removeValue(r);return t}const MC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hj{scrapeMotionValuesFromProps(t,e,r){return{}}constructor({parent:t,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Hr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,$e.render(this.render,!1,!0))};const{latestValues:l,renderState:h}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=xm(e),this.isVariantNode=ZO(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in g){const y=g[m];l[m]!==void 0&&wr(y)&&y.set(l[m])}}mount(t){this.current=t,lj.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),dM.current||cj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),No(this.notifyUpdate),No(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Sh.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&$e.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in rh){const e=rh[t];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<MC.length;r++){const i=MC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=uj(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const r=this.values.get(t);e!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&e!==void 0&&(r=nh(e===null?void 0:e,{owner:this}),this.addValue(t,r)),r}readValue(t,e){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(aO(r)||cO(r))?r=parseFloat(r):!AU(r)&&ko.test(e)&&(r=HO(t,e)),this.setBaseTarget(t,wr(r)?r.get():r)),wr(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var s;const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=Ww(this.props,e,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!wr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Ew),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Bw.render(this.render)}}class gM extends hj{constructor(){super(...arguments),this.KeyframeResolver=hU}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:r}){delete e[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;wr(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function pM(n,{style:t,vars:e},r,i){const s=n.style;let a;for(a in t)s[a]=t[a];i==null||i.applyProjectionStyles(s,r);for(a in e)s.setProperty(a,e[a])}function fj(n){return window.getComputedStyle(n)}class dj extends gM{constructor(){super(...arguments),this.type="html",this.renderInstance=pM}readValueFromInstance(t,e){var r;if(Sh.has(e))return(r=this.projection)!=null&&r.isProjecting?Px(e):RF(t,e);{const i=fj(t),s=(Sw(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return fM(t,e)}build(t,e,r){zw(t,e,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,r){return qw(t,e,r)}}const mM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gj(n,t,e,r){pM(n,t,void 0,r);for(const i in t.attrs)n.setAttribute(mM.has(i)?i:Yw(i),t.attrs[i])}class pj extends gM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Sh.has(e)){const r=zO(e);return r&&r.default||0}return e=mM.has(e)?e:Yw(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,r){return sM(t,e,r)}build(t,e,r){eM(t,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,e,r,i){gj(t,e,r,i)}mount(t){this.isSVGTag=rM(t.tagName),super.mount(t)}}const mj=(n,t)=>Gw(n)?new pj(t):new dj(t,{allowProjection:n!==it.Fragment});function a0(n,t,e){const r=n.getProps();return Ww(r,t,e!==void 0?e:r.custom,n)}const Hx=n=>Array.isArray(n);function yj(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,nh(e))}function vj(n){return Hx(n)?n[n.length-1]||0:n}function _j(n,t){const e=a0(n,t);let{transitionEnd:r={},transition:i={},...s}=e||{};s={...s,...r};for(const a in s){const o=vj(s[a]);yj(n,a,o)}}function xj(n){return!!(wr(n)&&n.add)}function Gx(n,t){const e=n.getValue("willChange");if(xj(e))return e.add(t);if(!e&&wa.WillChange){const r=new wa.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function yM(n){return n.props[aM]}const wj=n=>n!==null;function bj(n,{repeat:t,repeatType:e="loop"},r){const i=n.filter(wj),s=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[s]}const Ej={type:"spring",stiffness:500,damping:25,restSpeed:10},Aj=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Tj={type:"keyframes",duration:.8},Sj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ij=(n,{keyframes:t})=>t.length>2?Tj:Sh.has(n)?n.startsWith("scale")?Aj(t[1]):Ej:Sj;function Cj({when:n,delay:t,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...d}){return!!Object.keys(d).length}const Xw=(n,t,e,r={},i,s)=>a=>{const o=Lw(r,n)||{},l=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Is(l);const d={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:t,element:s?void 0:i};Cj(o)||Object.assign(d,Ij(n,d)),d.duration&&(d.duration=Is(d.duration)),d.repeatDelay&&(d.repeatDelay=Is(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let g=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Bx(d),d.delay===0&&(g=!0)),(wa.instantAnimations||wa.skipAnimations)&&(g=!0,Bx(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,g&&!s&&t.get()!==void 0){const m=bj(d.keyframes,o);if(m!==void 0){$e.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new Nw(d):new JF(d)};function Dj({protectedKeys:n,needsAnimating:t},e){const r=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,r}function vM(n,t,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in o){const g=n.getValue(d,n.latestValues[d]??null),m=o[d];if(m===void 0||h&&Dj(h,d))continue;const y={delay:e,...Lw(s||{},d)},x=g.get();if(x!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===x&&!y.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const T=yM(n);if(T){const S=window.MotionHandoffAnimation(T,d,$e);S!==null&&(y.startTime=S,b=!0)}}Gx(n,d),g.start(Xw(d,g,m,n.shouldReduceMotion&&FO.has(d)?{type:!1}:y,n,b));const E=g.animation;E&&l.push(E)}return a&&Promise.all(l).then(()=>{$e.update(()=>{a&&_j(n,a)})}),l}function Wx(n,t,e={}){var l;const r=a0(n,t,e.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const s=r?()=>Promise.all(vM(n,r,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:m}=i;return Rj(n,t,h,d,g,m,e)}:()=>Promise.resolve(),{when:o}=i;if(o){const[h,d]=o==="beforeChildren"?[s,a]:[a,s];return h().then(()=>d())}else return Promise.all([s(),a(e.delay)])}function Rj(n,t,e=0,r=0,i=0,s=1,a){const o=[],l=n.variantChildren.size,h=(l-1)*i,d=typeof r=="function",g=d?m=>r(m,l):s===1?(m=0)=>m*i:(m=0)=>h-m*i;return Array.from(n.variantChildren).sort(Oj).forEach((m,y)=>{m.notify("AnimationStart",t),o.push(Wx(m,t,{...a,delay:e+(d?0:r)+g(y)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(o)}function Oj(n,t){return n.sortNodePosition(t)}function Mj(n,t,e={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Wx(n,s,e));r=Promise.all(i)}else if(typeof t=="string")r=Wx(n,t,e);else{const i=typeof t=="function"?a0(n,t,e.custom):t;r=Promise.all(vM(n,i,e))}return r.then(()=>{n.notify("AnimationComplete",t)})}function _M(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}const Pj=jw.length;function xM(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?xM(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<Pj;e++){const r=jw[e],i=n.props[r];(i0(i)||i===!1)&&(t[r]=i)}return t}const Nj=[...Uw].reverse(),kj=Uw.length;function Lj(n){return t=>Promise.all(t.map(({animation:e,options:r})=>Mj(n,e,r)))}function Vj(n){let t=Lj(n),e=PC(),r=!0;const i=l=>(h,d)=>{var m;const g=a0(n,d,l==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);if(g){const{transition:y,transitionEnd:x,...b}=g;h={...h,...b,...x}}return h};function s(l){t=l(n)}function a(l){const{props:h}=n,d=xM(n.parent)||{},g=[],m=new Set;let y={},x=1/0;for(let E=0;E<kj;E++){const T=Nj[E],S=e[T],R=h[T]!==void 0?h[T]:d[T],k=i0(R),P=T===l?S.isActive:null;P===!1&&(x=E);let H=R===d[T]&&R!==h[T]&&k;if(H&&r&&n.manuallyAnimateOnMount&&(H=!1),S.protectedKeys={...y},!S.isActive&&P===null||!R&&!S.prevProp||_m(R)||typeof R=="boolean")continue;const M=Bj(S.prevProp,R);let C=M||T===l&&S.isActive&&!H&&k||E>x&&k,O=!1;const L=Array.isArray(R)?R:[R];let j=L.reduce(i(T),{});P===!1&&(j={});const{prevResolvedValues:z={}}=S,U={...z,...j},Et=at=>{C=!0,m.has(at)&&(O=!0,m.delete(at)),S.needsAnimating[at]=!0;const mt=n.getValue(at);mt&&(mt.liveStyle=!1)};for(const at in U){const mt=j[at],St=z[at];if(y.hasOwnProperty(at))continue;let W=!1;Hx(mt)&&Hx(St)?W=!_M(mt,St):W=mt!==St,W?mt!=null?Et(at):m.add(at):mt!==void 0&&m.has(at)?Et(at):S.protectedKeys[at]=!0}S.prevProp=R,S.prevResolvedValues=j,S.isActive&&(y={...y,...j}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(H&&M)||O)&&g.push(...L.map(at=>({animation:at,options:{type:T}})))}if(m.size){const E={};if(typeof h.initial!="boolean"){const T=a0(n,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(E.transition=T.transition)}m.forEach(T=>{const S=n.getBaseTarget(T),R=n.getValue(T);R&&(R.liveStyle=!0),E[T]=S??null}),g.push({animation:E})}let b=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(g):Promise.resolve()}function o(l,h){var g;if(e[l].isActive===h)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(l,h)}),e[l].isActive=h;const d=a(l);for(const m in e)e[m].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>e,reset:()=>{e=PC(),r=!0}}}function Bj(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!_M(t,n):!1}function Mc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PC(){return{animate:Mc(!0),whileInView:Mc(),whileHover:Mc(),whileTap:Mc(),whileDrag:Mc(),whileFocus:Mc(),exit:Mc()}}class zo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Fj extends zo{constructor(t){super(t),t.animationState||(t.animationState=Vj(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();_m(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Uj=0;class jj extends zo{constructor(){super(...arguments),this.id=Uj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const zj={animation:{Feature:Fj},exit:{Feature:jj}};function o0(n,t,e,r={passive:!0}){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e)}function D0(n){return{point:{x:n.pageX,y:n.pageY}}}const Hj=n=>t=>Fw(t)&&n(t,D0(t));function Od(n,t,e,r){return o0(n,t,Hj(e),r)}const wM=1e-4,Gj=1-wM,Wj=1+wM,bM=.01,qj=0-bM,Yj=0+bM;function Pr(n){return n.max-n.min}function Xj(n,t,e){return Math.abs(n-t)<=e}function NC(n,t,e,r=.5){n.origin=r,n.originPoint=Je(t.min,t.max,n.origin),n.scale=Pr(e)/Pr(t),n.translate=Je(e.min,e.max,n.origin)-n.originPoint,(n.scale>=Gj&&n.scale<=Wj||isNaN(n.scale))&&(n.scale=1),(n.translate>=qj&&n.translate<=Yj||isNaN(n.translate))&&(n.translate=0)}function Md(n,t,e,r){NC(n.x,t.x,e.x,r?r.originX:void 0),NC(n.y,t.y,e.y,r?r.originY:void 0)}function kC(n,t,e){n.min=e.min+t.min,n.max=n.min+Pr(t)}function Kj(n,t,e){kC(n.x,t.x,e.x),kC(n.y,t.y,e.y)}function LC(n,t,e){n.min=t.min-e.min,n.max=n.min+Pr(t)}function Pd(n,t,e){LC(n.x,t.x,e.x),LC(n.y,t.y,e.y)}function Ti(n){return[n("x"),n("y")]}const EM=({current:n})=>n?n.ownerDocument.defaultView:null,VC=(n,t)=>Math.abs(n-t);function $j(n,t){const e=VC(n.x,t.x),r=VC(n.y,t.y);return Math.sqrt(e**2+r**2)}class AM{constructor(t,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=M_(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=$j(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:b}=m,{timestamp:E}=lr;this.history.push({...b,timestamp:E});const{onStart:T,onMove:S}=this.handlers;y||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=O_(y,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=M_(m.type==="pointercancel"?this.lastMoveEventInfo:O_(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,T),b&&b(m,T)},!Fw(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=D0(t),l=O_(o,this.transformPagePoint),{point:h}=l,{timestamp:d}=lr;this.history=[{...h,timestamp:d}];const{onSessionStart:g}=e;g&&g(t,M_(l,this.history)),this.removeListeners=S0(Od(this.contextWindow,"pointermove",this.handlePointerMove),Od(this.contextWindow,"pointerup",this.handlePointerUp),Od(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),No(this.updatePoint)}}function O_(n,t){return t?{point:t(n.point)}:n}function BC(n,t){return{x:n.x-t.x,y:n.y-t.y}}function M_({point:n},t){return{point:n,delta:BC(n,TM(t)),offset:BC(n,Qj(t)),velocity:Zj(t,.1)}}function Qj(n){return n[0]}function TM(n){return n[n.length-1]}function Zj(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,r=null;const i=TM(n);for(;e>=0&&(r=n[e],!(i.timestamp-r.timestamp>Is(t)));)e--;if(!r)return{x:0,y:0};const s=Cs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Jj(n,{min:t,max:e},r){return t!==void 0&&n<t?n=r?Je(t,n,r.min):Math.max(n,t):e!==void 0&&n>e&&(n=r?Je(e,n,r.max):Math.min(n,e)),n}function FC(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function tz(n,{top:t,left:e,bottom:r,right:i}){return{x:FC(n.x,e,i),y:FC(n.y,t,r)}}function UC(n,t){let e=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,r]=[r,e]),{min:e,max:r}}function ez(n,t){return{x:UC(n.x,t.x),y:UC(n.y,t.y)}}function nz(n,t){let e=.5;const r=Pr(n),i=Pr(t);return i>r?e=e0(t.min,t.max-r,n.min):r>i&&(e=e0(n.min,n.max-i,t.min)),xa(0,1,e)}function rz(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const qx=.35;function iz(n=qx){return n===!1?n=0:n===!0&&(n=qx),{x:jC(n,"left","right"),y:jC(n,"top","bottom")}}function jC(n,t,e){return{min:zC(n,t),max:zC(n,e)}}function zC(n,t){return typeof n=="number"?n:n[t]||0}const sz=new WeakMap;class az{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(D0(g).point)},a=(g,m)=>{const{drag:y,dragPropagation:x,onDragStart:b}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mU(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(T=>{let S=this.getAxisMotionValue(T).get()||0;if(Ds.test(S)){const{projection:R}=this.visualElement;if(R&&R.layout){const k=R.layout.layoutBox[T];k&&(S=Pr(k)*(parseFloat(S)/100))}}this.originPoint[T]=S}),b&&$e.postRender(()=>b(g,m)),Gx(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:b,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:T}=m;if(x&&this.currentDirection===null){this.currentDirection=oz(T),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),E&&E(g,m)},l=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ti(g=>{var m;return this.getAnimationState(g)==="paused"&&((m=this.getAxisMotionValue(g).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new AM(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:EM(this.visualElement)})}stop(t,e){const r=t||this.latestPointerEvent,i=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&$e.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,r){const{drag:i}=this.getProps();if(!r||!Mp(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=Jj(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Uu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=tz(r.layoutBox,t):this.constraints=!1,this.elastic=iz(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ti(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=rz(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Uu(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=oj(r,i.root,this.visualElement.getTransformPagePoint());let a=ez(i.layout.layoutBox,s);if(e){const o=e(ij(a));this.hasMutatedConstraints=!!o,o&&(a=lM(o))}return a}startAnimation(t){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},h=Ti(d=>{if(!Mp(d,e,this.currentDirection))return;let g=l&&l[d]||{};a&&(g={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,x={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(d,x)});return Promise.all(h).then(o)}startAxisValueAnimation(t,e){const r=this.getAxisMotionValue(t);return Gx(this.visualElement,t),r.start(Xw(t,r,0,e,this.visualElement,!1))}stopAnimation(){Ti(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ti(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ti(e=>{const{drag:r}=this.getProps();if(!Mp(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(e);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[e];s.set(t[e]-Je(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!Uu(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ti(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=nz({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ti(a=>{if(!Mp(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:h}=this.constraints[a];o.set(Je(l,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;sz.set(this.visualElement,this);const t=this.visualElement.current,e=Od(t,"pointerdown",l=>{const{drag:h,dragListener:d=!0}=this.getProps();h&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Uu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),$e.read(r);const a=o0(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ti(d=>{const g=this.getAxisMotionValue(d);g&&(this.originPoint[d]+=l[d].translate,g.set(g.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),e(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=qx,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Mp(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function oz(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class cz extends zo{constructor(t){super(t),this.removeGroupControls=Ri,this.removeListeners=Ri,this.controls=new az(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const HC=n=>(t,e)=>{n&&$e.postRender(()=>n(t,e))};class lz extends zo{constructor(){super(...arguments),this.removePointerDownListener=Ri}onPointerDown(t){this.session=new AM(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EM(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:HC(t),onStart:HC(e),onMove:r,onEnd:(s,a)=>{delete this.session,i&&$e.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Od(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const r1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GC(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const $f={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Ht.test(n))n=parseFloat(n);else return n;const e=GC(n,t.target.x),r=GC(n,t.target.y);return`${e}% ${r}%`}},uz={correct:(n,{treeScale:t,projectionDelta:e})=>{const r=n,i=ko.parse(n);if(i.length>5)return r;const s=ko.createTransformer(n),a=typeof i[0]!="number"?1:0,o=e.x.scale*t.x,l=e.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const h=Je(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};let WC=!1;class hz extends it.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;MU(fz),s&&(e.group&&e.group.add(s),r&&r.register&&i&&r.register(s),WC&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),r1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,WC=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||$e.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Bw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function SM(n){const[t,e]=TU(),r=it.useContext(sO);return V.jsx(hz,{...n,layoutGroup:r,switchLayoutGroup:it.useContext(oM),isPresent:t,safeToRemove:e})}const fz={borderRadius:{...$f,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$f,borderTopRightRadius:$f,borderBottomLeftRadius:$f,borderBottomRightRadius:$f,boxShadow:uz};function dz(n,t,e){const r=wr(n)?n:nh(n);return r.start(Xw("",r,t,e)),r.animation}const gz=(n,t)=>n.depth-t.depth;class pz{constructor(){this.children=[],this.isDirty=!1}add(t){_w(this.children,t),this.isDirty=!0}remove(t){xw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(gz),this.isDirty=!1,this.children.forEach(t)}}function mz(n,t){const e=Hr.now(),r=({timestamp:i})=>{const s=i-e;s>=t&&(No(r),n(s-t))};return $e.setup(r,!0),()=>No(r)}const IM=["TopLeft","TopRight","BottomLeft","BottomRight"],yz=IM.length,qC=n=>typeof n=="string"?parseFloat(n):n,YC=n=>typeof n=="number"||Ht.test(n);function vz(n,t,e,r,i,s){i?(n.opacity=Je(0,e.opacity??1,_z(r)),n.opacityExit=Je(t.opacity??1,0,xz(r))):s&&(n.opacity=Je(t.opacity??1,e.opacity??1,r));for(let a=0;a<yz;a++){const o=`border${IM[a]}Radius`;let l=XC(t,o),h=XC(e,o);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||YC(l)===YC(h)?(n[o]=Math.max(Je(qC(l),qC(h),r),0),(Ds.test(h)||Ds.test(l))&&(n[o]+="%")):n[o]=h}(t.rotate||e.rotate)&&(n.rotate=Je(t.rotate||0,e.rotate||0,r))}function XC(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const _z=CM(0,.5,mO),xz=CM(.5,.95,Ri);function CM(n,t,e){return r=>r<n?0:r>t?1:e(e0(n,t,r))}function KC(n,t){n.min=t.min,n.max=t.max}function Ai(n,t){KC(n.x,t.x),KC(n.y,t.y)}function $C(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function QC(n,t,e,r,i){return n-=t,n=L1(n,1/e,r),i!==void 0&&(n=L1(n,1/i,r)),n}function wz(n,t=0,e=1,r=.5,i,s=n,a=n){if(Ds.test(t)&&(t=parseFloat(t),t=Je(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Je(s.min,s.max,r);n===s&&(o-=t),n.min=QC(n.min,t,e,o,i),n.max=QC(n.max,t,e,o,i)}function ZC(n,t,[e,r,i],s,a){wz(n,t[e],t[r],t[i],t.scale,s,a)}const bz=["x","scaleX","originX"],Ez=["y","scaleY","originY"];function JC(n,t,e,r){ZC(n.x,t,bz,e?e.x:void 0,r?r.x:void 0),ZC(n.y,t,Ez,e?e.y:void 0,r?r.y:void 0)}function t3(n){return n.translate===0&&n.scale===1}function DM(n){return t3(n.x)&&t3(n.y)}function e3(n,t){return n.min===t.min&&n.max===t.max}function Az(n,t){return e3(n.x,t.x)&&e3(n.y,t.y)}function n3(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function RM(n,t){return n3(n.x,t.x)&&n3(n.y,t.y)}function r3(n){return Pr(n.x)/Pr(n.y)}function i3(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class Tz{constructor(){this.members=[]}add(t){_w(this.members,t),t.scheduleRender()}remove(t){if(xw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,e){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:r}=t;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sz(n,t,e){let r="";const i=n.x.translate/t.x,s=n.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:d,rotateX:g,rotateY:m,skewX:y,skewY:x}=e;h&&(r=`perspective(${h}px) ${r}`),d&&(r+=`rotate(${d}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=n.x.scale*t.x,l=n.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const P_=["","X","Y","Z"],Iz=1e3;let Cz=0;function N_(n,t,e,r){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),r&&(r[n]=0))}function OM(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=yM(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",$e,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&OM(r)}function MM({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=Cz++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Oz),this.nodes.forEach(kz),this.nodes.forEach(Lz),this.nodes.forEach(Mz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new pz)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Ew),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=XO(a)&&!bU(a),this.instance=a;const{layoutId:o,layout:l,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let d,g=0;const m=()=>this.root.updateBlockedByResize=!1;$e.read(()=>{g=window.innerWidth}),n(a,()=>{const y=window.innerWidth;y!==g&&(g=y,this.root.updateBlockedByResize=!0,d&&d(),d=mz(m,250),r1.hasAnimatedSinceResize&&(r1.hasAnimatedSinceResize=!1,this.nodes.forEach(o3)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||jz,{onLayoutAnimationStart:b,onLayoutAnimationComplete:E}=h.getProps(),T=!this.targetLayout||!RM(this.targetLayout,y),S=!g&&m;if(this.options.layoutRoot||this.resumeFrom||S||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Lw(x,"layout"),onPlay:b,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(d,S)}else g||o3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),No(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vz),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const g=this.path[d];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(s3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(a3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Nz),this.nodes.forEach(Dz),this.nodes.forEach(Rz)):this.nodes.forEach(a3),this.clearAllSnapshots();const o=Hr.now();lr.delta=xa(0,1e3/60,o-lr.timestamp),lr.timestamp=o,lr.isProcessing=!0,E_.update.process(lr),E_.preRender.process(lr),E_.render.process(lr),lr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pz),this.sharedNodes.forEach(Bz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pr(this.snapshot.measuredBox.x)&&!Pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!DM(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,d=h!==this.prevTransformTemplateValue;a&&this.instance&&(o||Bc(this.latestValues)||d)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),zz(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return mn();const o=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(Hz))){const{scroll:d}=this.root;d&&(ju(o.x,d.offset.x),ju(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=mn();if(Ai(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:g,options:m}=d;d!==this.root&&g&&m.layoutScroll&&(g.wasRoot&&Ai(o,a),ju(o.x,g.offset.x),ju(o.y,g.offset.y))}return o}applyTransform(a,o=!1){const l=mn();Ai(l,a);for(let h=0;h<this.path.length;h++){const d=this.path[h];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&zu(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Bc(d.latestValues)&&zu(l,d.latestValues)}return Bc(this.latestValues)&&zu(l,this.latestValues),l}removeTransform(a){const o=mn();Ai(o,a);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!Bc(h.latestValues))continue;Ux(h.latestValues)&&h.updateSnapshot();const d=mn(),g=h.measurePageBox();Ai(d,g),JC(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,d)}return Bc(this.latestValues)&&JC(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==lr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=lr.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),Pd(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mn(),this.targetWithTransforms=mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Kj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ai(this.target,this.layout.layoutBox),hM(this.target,this.targetDelta)):Ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),Pd(this.relativeTargetOrigin,this.target,y.target),Ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ux(this.parent.latestValues)||uM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===lr.timestamp&&(l=!1),l)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Ai(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;aj(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=mn());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($C(this.prevProjectionDelta.x,this.projectionDelta.x),$C(this.prevProjectionDelta.y,this.projectionDelta.y)),Md(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!i3(this.projectionDelta.x,this.prevProjectionDelta.x)||!i3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hu(),this.projectionDelta=Hu(),this.projectionDeltaWithTransform=Hu()}setAnimationOrigin(a,o=!1){const l=this.snapshot,h=l?l.latestValues:{},d={...this.latestValues},g=Hu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=mn(),y=l?l.source:void 0,x=this.layout?this.layout.source:void 0,b=y!==x,E=this.getStack(),T=!E||E.members.length<=1,S=!!(b&&!T&&this.options.crossfade===!0&&!this.path.some(Uz));this.animationProgress=0;let R;this.mixTargetDelta=k=>{const P=k/1e3;c3(g.x,a.x,P),c3(g.y,a.y,P),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Fz(this.relativeTarget,this.relativeTargetOrigin,m,P),R&&Az(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=mn()),Ai(R,this.relativeTarget)),b&&(this.animationValues=d,vz(d,h,this.latestValues,P,S,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,h;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(h=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||h.stop(),this.pendingAnimation&&(No(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{r1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=nh(0)),this.currentAnimation=dz(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Iz),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:h,latestValues:d}=a;if(!(!o||!l||!h)){if(this!==a&&this.layout&&h&&PM(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||mn();const g=Pr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+g;const m=Pr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Ai(o,l),zu(o,d),Md(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Tz),this.sharedNodes.get(a).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const h={};l.z&&N_("z",a,h,this.animationValues);for(let d=0;d<P_.length;d++)N_(`rotate${P_[d]}`,a,h,this.animationValues),N_(`skew${P_[d]}`,a,h,this.animationValues);a.render();for(const d in h)a.setStaticValue(d,h[d]),this.animationValues&&(this.animationValues[d]=h[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=n1(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=n1(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Bc(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=Sz(this.projectionDeltaWithTransform,this.treeScale,d);l&&(g=l(d,g)),a.transform=g;const{x:m,y}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?a.opacity=h===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in s0){if(d[x]===void 0)continue;const{correct:b,applyTo:E,isCSSVariable:T}=s0[x],S=g==="none"?d[x]:b(d[x],h);if(E){const R=E.length;for(let k=0;k<R;k++)a[E[k]]=S}else T?this.options.visualElement.renderState.vars[x]=S:a[x]=S}this.options.layoutId&&(a.pointerEvents=h===this?n1(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(s3),this.root.sharedNodes.clear()}}}function Dz(n){n.updateLayout()}function Rz(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Ti(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],y=Pr(m);m.min=r[g].min,m.max=m.min+y}):PM(s,t.layoutBox,r)&&Ti(g=>{const m=a?t.measuredBox[g]:t.layoutBox[g],y=Pr(r[g]);m.max=m.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+y)});const o=Hu();Md(o,r,t.layoutBox);const l=Hu();a?Md(l,n.applyTransform(i,!0),t.measuredBox):Md(l,r,t.layoutBox);const h=!DM(o);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:m,layout:y}=g;if(m&&y){const x=mn();Pd(x,t.layoutBox,m.layoutBox);const b=mn();Pd(b,r,y.layoutBox),RM(x,b)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=x,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Oz(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Mz(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Pz(n){n.clearSnapshot()}function s3(n){n.clearMeasurements()}function a3(n){n.isLayoutDirty=!1}function Nz(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function o3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function kz(n){n.resolveTargetDelta()}function Lz(n){n.calcProjection()}function Vz(n){n.resetSkewAndRotation()}function Bz(n){n.removeLeadSnapshot()}function c3(n,t,e){n.translate=Je(t.translate,0,e),n.scale=Je(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function l3(n,t,e,r){n.min=Je(t.min,e.min,r),n.max=Je(t.max,e.max,r)}function Fz(n,t,e,r){l3(n.x,t.x,e.x,r),l3(n.y,t.y,e.y,r)}function Uz(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const jz={duration:.45,ease:[.4,0,.1,1]},u3=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),h3=u3("applewebkit/")&&!u3("chrome/")?Math.round:Ri;function f3(n){n.min=h3(n.min),n.max=h3(n.max)}function zz(n){f3(n.x),f3(n.y)}function PM(n,t,e){return n==="position"||n==="preserve-aspect"&&!Xj(r3(t),r3(e),.2)}function Hz(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const Gz=MM({attachResizeListener:(n,t)=>o0(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),k_={current:void 0},NM=MM({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!k_.current){const n=new Gz({});n.mount(window),n.setOptions({layoutScroll:!0}),k_.current=n}return k_.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Wz={pan:{Feature:lz},drag:{Feature:cz,ProjectionNode:NM,MeasureLayout:SM}};function d3(n,t,e){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,s=r[i];s&&$e.postRender(()=>s(t,D0(t)))}class qz extends zo{mount(){const{current:t}=this.node;t&&(this.unmount=yU(t,(e,r)=>(d3(this.node,r,"Start"),i=>d3(this.node,i,"End"))))}unmount(){}}class Yz extends zo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=S0(o0(this.node.current,"focus",()=>this.onFocus()),o0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function g3(n,t,e){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),s=r[i];s&&$e.postRender(()=>s(t,D0(t)))}class Xz extends zo{mount(){const{current:t}=this.node;t&&(this.unmount=wU(t,(e,r)=>(g3(this.node,r,"Start"),(i,{success:s})=>g3(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yx=new WeakMap,L_=new WeakMap,Kz=n=>{const t=Yx.get(n.target);t&&t(n)},$z=n=>{n.forEach(Kz)};function Qz({root:n,...t}){const e=n||document;L_.has(e)||L_.set(e,{});const r=L_.get(e),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver($z,{root:n,...t})),r[i]}function Zz(n,t,e){const r=Qz(t);return Yx.set(n,e),r.observe(n),()=>{Yx.delete(n),r.unobserve(n)}}const Jz={some:0,all:1};class tH extends zo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:s}=t,a={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Jz[i]},o=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:g}=this.node.getProps(),m=h?d:g;m&&m(l)};return Zz(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(eH(t,e))&&this.startObserver()}unmount(){}}function eH({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const nH={inView:{Feature:tH},tap:{Feature:Xz},focus:{Feature:Yz},hover:{Feature:qz}},rH={layout:{ProjectionNode:NM,MeasureLayout:SM}},iH={...zj,...nH,...Wz,...rH},sH=rj(iH,mj);function kM({name:n,nutrients:t,kcal:e=null,onEdit:r,onDelete:i,unit:s="g",disableSwipe:a}){const[o,l]=Q2.useState(null),d=e??((y=[])=>{let x=0;return y.forEach(b=>{var T,S,R;const E=parseFloat(b.count||0);((T=b.type)==null?void 0:T.toLowerCase())==="fat"&&(x+=E*9),((S=b.type)==null?void 0:S.toLowerCase())==="protein"&&(x+=E*4),(R=b.type)!=null&&R.toLowerCase().includes("carbohydrate")&&(x+=E*4)}),Math.round(x)})(t),g=y=>y.charAt(0).toUpperCase()+y.slice(1),m=TB({onSwipedLeft:()=>{a||(l("left"),setTimeout(()=>{i&&i(),l(null)},300))},onSwipedRight:()=>{a||(l("right"),setTimeout(()=>{r&&r(),l(null)},300))},preventScrollOnSwipe:!0,trackMouse:!0});return V.jsxs("div",{...m,className:"position-relative mb-2",children:[o==="left"&&V.jsx("div",{className:"position-absolute top-50 start-100 translate-middle-y text-danger fw-bold",style:{zIndex:1},children:"🗑️"}),o==="right"&&V.jsx("div",{className:"position-absolute top-50 start-0 translate-middle-y text-warning fw-bold",style:{zIndex:1},children:"🖊️"}),V.jsxs(sH.div,{initial:{x:0},animate:{x:o==="left"?-100:o==="right"?100:0},transition:{duration:.3},className:"meal-card text-white p-3 rounded shadow-sm",style:{backgroundColor:"#00bfff17"},children:[V.jsx("p",{className:"MealCardText mb-1 fw-bold",children:n}),V.jsxs("p",{className:"MealCardText mb-1",children:["Calories: ",d," kcal"]}),t.filter(y=>{var x;return["protein","fat","carbohydrate","sugar","sugars","fibre","fiber","salt","caffeine"].includes((x=y.type)==null?void 0:x.toLowerCase())}).map((y,x)=>V.jsxs("p",{className:"MealCardText mb-1",children:[g(y.type),": ",y.total," ",s]},x))]})]})}const aH=()=>{};var p3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},oH=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[e++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[e++],a=n[e++],o=n[e++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[e++],a=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},VM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,d=s>>2,g=(s&3)<<4|o>>4;let m=(o&15)<<2|h>>6,y=h&63;l||(y=64,a||(m=64)),r.push(e[d],e[g],e[m],e[y])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(LM(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):oH(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=e[n.charAt(i++)],o=i<n.length?e[n.charAt(i)]:0;++i;const h=i<n.length?e[n.charAt(i)]:64;++i;const g=i<n.length?e[n.charAt(i)]:64;if(++i,s==null||o==null||h==null||g==null)throw new cH;const m=s<<2|o>>4;if(r.push(m),h!==64){const y=o<<4&240|h>>2;if(r.push(y),g!==64){const x=h<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class cH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lH=function(n){const t=LM(n);return VM.encodeByteArray(t,!0)},BM=function(n){return lH(n).replace(/\./g,"")},FM=function(n){try{return VM.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=()=>UM().__FIREBASE_DEFAULTS__,hH=()=>{if(typeof process>"u"||typeof p3>"u")return;const n=p3.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&FM(n[1]);return t&&JSON.parse(t)},wm=()=>{try{return aH()||uH()||hH()||fH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dH=n=>{var t,e;return(e=(t=wm())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},jM=()=>{var n;return(n=wm())==null?void 0:n.config},zM=n=>{var t;return(t=wm())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HM(n){return(await fetch(n,{credentials:"include"})).ok}const Nd={};function pH(){const n={prod:[],emulator:[]};for(const t of Object.keys(Nd))Nd[t]?n.emulator.push(t):n.prod.push(t);return n}function mH(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let m3=!1;function yH(n,t){if(typeof window>"u"||typeof document>"u"||!Ih(window.location.host)||Nd[n]===t||Nd[n]||m3)return;Nd[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=pH().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{m3=!0,a()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=mH(r),y=e("text"),x=document.getElementById(y)||document.createElement("span"),b=e("learnmore"),E=document.getElementById(b)||document.createElement("a"),T=e("preprendIcon"),S=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;o(R),d(E,b);const k=h();l(S,T),R.append(S,x,E,k),document.body.appendChild(R)}s?(x.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function GM(){var t;const n=(t=wm())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _H(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wH(){const n=zn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qM(){return!GM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YM(){return!GM()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Kw(){try{return typeof indexedDB=="object"}catch{return!1}}function XM(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var s;t(((s=i.error)==null?void 0:s.message)||"")}}catch(e){t(e)}})}function bH(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH="FirebaseError";class Ji extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=EH,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?AH(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ji(i,o,r)}}function AH(n,t){return n.replace(TH,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const TH=/\{\$([^}]+)}/g;function SH(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Lo(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const s=n[i],a=t[i];if(y3(s)&&y3(a)){if(!Lo(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function y3(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function gd(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function pd(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function IH(n,t){const e=new CH(n,t);return e.subscribe.bind(e)}class CH{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");DH(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=V_),i.error===void 0&&(i.error=V_),i.complete===void 0&&(i.complete=V_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DH(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function V_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=1e3,OH=2,MH=4*60*60*1e3,PH=.5;function v3(n,t=RH,e=OH){const r=t*Math.pow(e,n),i=Math.round(PH*r*(Math.random()-.5)*2);return Math.min(MH,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(n){return n&&n._delegate?n._delegate:n}class Qi{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new gH;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LH(t))try{this.getOrInitializeService({instanceIdentifier:Fc})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Fc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fc){return this.instances.has(t)}getOptions(t=Fc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kH(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Fc){return this.component?this.component.multipleInstances?t:Fc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kH(n){return n===Fc?void 0:n}function LH(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new NH(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ie||(ie={}));const BH={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},FH=ie.INFO,UH={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},jH=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=UH[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bm{constructor(t){this.name=t,this._logLevel=FH,this._logHandler=jH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ie))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?BH[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...t),this._logHandler(this,ie.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...t),this._logHandler(this,ie.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...t),this._logHandler(this,ie.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...t),this._logHandler(this,ie.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...t),this._logHandler(this,ie.ERROR,...t)}}const zH=(n,t)=>t.some(e=>n instanceof e);let _3,x3;function HH(){return _3||(_3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GH(){return x3||(x3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KM=new WeakMap,Xx=new WeakMap,$M=new WeakMap,B_=new WeakMap,$w=new WeakMap;function WH(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(To(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&KM.set(e,n)}).catch(()=>{}),$w.set(t,n),t}function qH(n){if(Xx.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Xx.set(n,t)}let Kx={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Xx.get(n);if(t==="objectStoreNames")return n.objectStoreNames||$M.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return To(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function YH(n){Kx=n(Kx)}function XH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(F_(this),t,...e);return $M.set(r,t.sort?t.sort():[t]),To(r)}:GH().includes(n)?function(...t){return n.apply(F_(this),t),To(KM.get(this))}:function(...t){return To(n.apply(F_(this),t))}}function KH(n){return typeof n=="function"?XH(n):(n instanceof IDBTransaction&&qH(n),zH(n,HH())?new Proxy(n,Kx):n)}function To(n){if(n instanceof IDBRequest)return WH(n);if(B_.has(n))return B_.get(n);const t=KH(n);return t!==n&&(B_.set(n,t),$w.set(t,n)),t}const F_=n=>$w.get(n);function $H(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=To(a);return r&&a.addEventListener("upgradeneeded",l=>{r(To(a.result),l.oldVersion,l.newVersion,To(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const QH=["get","getKey","getAll","getAllKeys","count"],ZH=["put","add","delete","clear"],U_=new Map;function w3(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(U_.get(t))return U_.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=ZH.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||QH.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return U_.set(t,s),s}YH(n=>({...n,get:(t,e,r)=>w3(t,e)||n.get(t,e,r),has:(t,e)=>!!w3(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(tG(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function tG(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const $x="@firebase/app",b3="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new bm("@firebase/app"),eG="@firebase/app-compat",nG="@firebase/analytics-compat",rG="@firebase/analytics",iG="@firebase/app-check-compat",sG="@firebase/app-check",aG="@firebase/auth",oG="@firebase/auth-compat",cG="@firebase/database",lG="@firebase/data-connect",uG="@firebase/database-compat",hG="@firebase/functions",fG="@firebase/functions-compat",dG="@firebase/installations",gG="@firebase/installations-compat",pG="@firebase/messaging",mG="@firebase/messaging-compat",yG="@firebase/performance",vG="@firebase/performance-compat",_G="@firebase/remote-config",xG="@firebase/remote-config-compat",wG="@firebase/storage",bG="@firebase/storage-compat",EG="@firebase/firestore",AG="@firebase/ai",TG="@firebase/firestore-compat",SG="firebase",IG="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="[DEFAULT]",CG={[$x]:"fire-core",[eG]:"fire-core-compat",[rG]:"fire-analytics",[nG]:"fire-analytics-compat",[sG]:"fire-app-check",[iG]:"fire-app-check-compat",[aG]:"fire-auth",[oG]:"fire-auth-compat",[cG]:"fire-rtdb",[lG]:"fire-data-connect",[uG]:"fire-rtdb-compat",[hG]:"fire-fn",[fG]:"fire-fn-compat",[dG]:"fire-iid",[gG]:"fire-iid-compat",[pG]:"fire-fcm",[mG]:"fire-fcm-compat",[yG]:"fire-perf",[vG]:"fire-perf-compat",[_G]:"fire-rc",[xG]:"fire-rc-compat",[wG]:"fire-gcs",[bG]:"fire-gcs-compat",[EG]:"fire-fst",[TG]:"fire-fst-compat",[AG]:"fire-vertex","fire-js":"fire-js",[SG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Map,DG=new Map,Zx=new Map;function E3(n,t){try{n.container.addComponent(t)}catch(e){ba.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function ks(n){const t=n.name;if(Zx.has(t))return ba.debug(`There were multiple attempts to register component ${t}.`),!1;Zx.set(t,n);for(const e of V1.values())E3(e,n);for(const e of DG.values())E3(e,n);return!0}function Tl(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},So=new Al("app","Firebase",RG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw So.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=IG;function QM(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:Qx,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw So.create("bad-app-name",{appName:String(i)});if(e||(e=jM()),!e)throw So.create("no-options");const s=V1.get(i);if(s){if(Lo(e,s.options)&&Lo(r,s.config))return s;throw So.create("duplicate-app",{appName:i})}const a=new VH(i);for(const l of Zx.values())a.addComponent(l);const o=new OG(e,r,a);return V1.set(i,o),o}function ZM(n=Qx){const t=V1.get(n);if(!t&&n===Qx&&jM())return QM();if(!t)throw So.create("no-app",{appName:n});return t}function Oi(n,t,e){let r=CG[n]??n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${t}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ba.warn(a.join(" "));return}ks(new Qi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG="firebase-heartbeat-database",PG=1,c0="firebase-heartbeat-store";let j_=null;function JM(){return j_||(j_=$H(MG,PG,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(c0)}catch(e){console.warn(e)}}}}).catch(n=>{throw So.create("idb-open",{originalErrorMessage:n.message})})),j_}async function NG(n){try{const e=(await JM()).transaction(c0),r=await e.objectStore(c0).get(tP(n));return await e.done,r}catch(t){if(t instanceof Ji)ba.warn(t.message);else{const e=So.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ba.warn(e.message)}}}async function A3(n,t){try{const r=(await JM()).transaction(c0,"readwrite");await r.objectStore(c0).put(t,tP(n)),await r.done}catch(e){if(e instanceof Ji)ba.warn(e.message);else{const r=So.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ba.warn(r.message)}}}function tP(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG=1024,LG=30;class VG{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new FG(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=T3();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>LG){const a=UG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ba.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=T3(),{heartbeatsToSend:r,unsentEntries:i}=BG(this._heartbeatsCache.heartbeats),s=BM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ba.warn(e),""}}}function T3(){return new Date().toISOString().substring(0,10)}function BG(n,t=kG){const e=[];let r=n.slice();for(const i of n){const s=e.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),S3(e)>t){s.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),S3(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class FG{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kw()?XM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await NG(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return A3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return A3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function S3(n){return BM(JSON.stringify({version:2,heartbeats:n})).length}function UG(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(n){ks(new Qi("platform-logger",t=>new JH(t),"PRIVATE")),ks(new Qi("heartbeat",t=>new VG(t),"PRIVATE")),Oi($x,b3,n),Oi($x,b3,"esm2020"),Oi("fire-js","")}jG("");var zG="firebase",HG="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(zG,HG,"app");const GG=(n,t)=>t.some(e=>n instanceof e);let I3,C3;function WG(){return I3||(I3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qG(){return C3||(C3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eP=new WeakMap,Jx=new WeakMap,nP=new WeakMap,z_=new WeakMap,Qw=new WeakMap;function YG(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Io(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&eP.set(e,n)}).catch(()=>{}),Qw.set(t,n),t}function XG(n){if(Jx.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Jx.set(n,t)}let t2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Jx.get(n);if(t==="objectStoreNames")return n.objectStoreNames||nP.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Io(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function KG(n){t2=n(t2)}function $G(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(H_(this),t,...e);return nP.set(r,t.sort?t.sort():[t]),Io(r)}:qG().includes(n)?function(...t){return n.apply(H_(this),t),Io(eP.get(this))}:function(...t){return Io(n.apply(H_(this),t))}}function QG(n){return typeof n=="function"?$G(n):(n instanceof IDBTransaction&&XG(n),GG(n,WG())?new Proxy(n,t2):n)}function Io(n){if(n instanceof IDBRequest)return YG(n);if(z_.has(n))return z_.get(n);const t=QG(n);return t!==n&&(z_.set(n,t),Qw.set(t,n)),t}const H_=n=>Qw.get(n);function ZG(n,t,{blocked:e,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,t),o=Io(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Io(a.result),l.oldVersion,l.newVersion,Io(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const JG=["get","getKey","getAll","getAllKeys","count"],tW=["put","add","delete","clear"],G_=new Map;function D3(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(G_.get(t))return G_.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=tW.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JG.includes(e)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[e](...o),i&&l.done]))[0]};return G_.set(t,s),s}KG(n=>({...n,get:(t,e,r)=>D3(t,e)||n.get(t,e,r),has:(t,e)=>!!D3(t,e)||n.has(t,e)}));const rP="@firebase/installations",Zw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=1e4,sP=`w:${Zw}`,aP="FIS_v2",eW="https://firebaseinstallations.googleapis.com/v1",nW=60*60*1e3,rW="installations",iW="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hl=new Al(rW,iW,sW);function oP(n){return n instanceof Ji&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP({projectId:n}){return`${eW}/projects/${n}/installations`}function lP(n){return{token:n.token,requestStatus:2,expiresIn:oW(n.expiresIn),creationTime:Date.now()}}async function uP(n,t){const r=(await t.json()).error;return hl.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function aW(n,{refreshToken:t}){const e=hP(n);return e.append("Authorization",cW(t)),e}async function fP(n){const t=await n();return t.status>=500&&t.status<600?n():t}function oW(n){return Number(n.replace("s","000"))}function cW(n){return`${aP} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lW({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const r=cP(n),i=hP(n),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={fid:e,authVersion:aP,appId:n.appId,sdkVersion:sP},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await fP(()=>fetch(r,o));if(l.ok){const h=await l.json();return{fid:h.fid||e,registrationStatus:2,refreshToken:h.refreshToken,authToken:lP(h.authToken)}}else throw await uP("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=/^[cdef][\w-]{21}$/,e2="";function fW(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=dW(n);return hW.test(e)?e:e2}catch{return e2}}function dW(n){return uW(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=new Map;function pP(n,t){const e=Em(n);mP(e,t),gW(e,t)}function mP(n,t){const e=gP.get(n);if(e)for(const r of e)r(t)}function gW(n,t){const e=pW();e&&e.postMessage({key:n,fid:t}),mW()}let Qc=null;function pW(){return!Qc&&"BroadcastChannel"in self&&(Qc=new BroadcastChannel("[Firebase] FID Change"),Qc.onmessage=n=>{mP(n.data.key,n.data.fid)}),Qc}function mW(){gP.size===0&&Qc&&(Qc.close(),Qc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="firebase-installations-database",vW=1,fl="firebase-installations-store";let W_=null;function Jw(){return W_||(W_=ZG(yW,vW,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(fl)}}})),W_}async function B1(n,t){const e=Em(n),i=(await Jw()).transaction(fl,"readwrite"),s=i.objectStore(fl),a=await s.get(e);return await s.put(t,e),await i.done,(!a||a.fid!==t.fid)&&pP(n,t.fid),t}async function yP(n){const t=Em(n),r=(await Jw()).transaction(fl,"readwrite");await r.objectStore(fl).delete(t),await r.done}async function Am(n,t){const e=Em(n),i=(await Jw()).transaction(fl,"readwrite"),s=i.objectStore(fl),a=await s.get(e),o=t(a);return o===void 0?await s.delete(e):await s.put(o,e),await i.done,o&&(!a||a.fid!==o.fid)&&pP(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(n){let t;const e=await Am(n.appConfig,r=>{const i=_W(r),s=xW(n,i);return t=s.registrationPromise,s.installationEntry});return e.fid===e2?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function _W(n){const t=n||{fid:fW(),registrationStatus:0};return vP(t)}function xW(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(hl.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=wW(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:bW(n)}:{installationEntry:t}}async function wW(n,t){try{const e=await lW(n,t);return B1(n.appConfig,e)}catch(e){throw oP(e)&&e.customData.serverCode===409?await yP(n.appConfig):await B1(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function bW(n){let t=await R3(n.appConfig);for(;t.registrationStatus===1;)await dP(100),t=await R3(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await tb(n);return r||e}return t}function R3(n){return Am(n,t=>{if(!t)throw hl.create("installation-not-found");return vP(t)})}function vP(n){return EW(n)?{fid:n.fid,registrationStatus:0}:n}function EW(n){return n.registrationStatus===1&&n.registrationTime+iP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AW({appConfig:n,heartbeatServiceProvider:t},e){const r=TW(n,e),i=aW(n,e),s=t.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const a={installation:{sdkVersion:sP,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await fP(()=>fetch(r,o));if(l.ok){const h=await l.json();return lP(h)}else throw await uP("Generate Auth Token",l)}function TW(n,{fid:t}){return`${cP(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(n,t=!1){let e;const r=await Am(n.appConfig,s=>{if(!_P(s))throw hl.create("not-registered");const a=s.authToken;if(!t&&CW(a))return s;if(a.requestStatus===1)return e=SW(n,t),s;{if(!navigator.onLine)throw hl.create("app-offline");const o=RW(s);return e=IW(n,o),o}});return e?await e:r.authToken}async function SW(n,t){let e=await O3(n.appConfig);for(;e.authToken.requestStatus===1;)await dP(100),e=await O3(n.appConfig);const r=e.authToken;return r.requestStatus===0?eb(n,t):r}function O3(n){return Am(n,t=>{if(!_P(t))throw hl.create("not-registered");const e=t.authToken;return OW(e)?{...t,authToken:{requestStatus:0}}:t})}async function IW(n,t){try{const e=await AW(n,t),r={...t,authToken:e};return await B1(n.appConfig,r),e}catch(e){if(oP(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await yP(n.appConfig);else{const r={...t,authToken:{requestStatus:0}};await B1(n.appConfig,r)}throw e}}function _P(n){return n!==void 0&&n.registrationStatus===2}function CW(n){return n.requestStatus===2&&!DW(n)}function DW(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+nW}function RW(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function OW(n){return n.requestStatus===1&&n.requestTime+iP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MW(n){const t=n,{installationEntry:e,registrationPromise:r}=await tb(t);return r?r.catch(console.error):eb(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PW(n,t=!1){const e=n;return await NW(e),(await eb(e,t)).token}async function NW(n){const{registrationPromise:t}=await tb(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kW(n){if(!n||!n.options)throw q_("App Configuration");if(!n.name)throw q_("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw q_(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function q_(n){return hl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="installations",LW="installations-internal",VW=n=>{const t=n.getProvider("app").getImmediate(),e=kW(t),r=Tl(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},BW=n=>{const t=n.getProvider("app").getImmediate(),e=Tl(t,xP).getImmediate();return{getId:()=>MW(e),getToken:i=>PW(e,i)}};function FW(){ks(new Qi(xP,VW,"PUBLIC")),ks(new Qi(LW,BW,"PRIVATE"))}FW();Oi(rP,Zw);Oi(rP,Zw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="analytics",UW="firebase_id",jW="origin",zW=60*1e3,HW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new bm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},oi=new Al("analytics","Analytics",GW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(n){if(!n.startsWith(nb)){const t=oi.create("invalid-gtag-resource",{gtagURL:n});return qr.warn(t.message),""}return n}function wP(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function qW(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function YW(n,t){const e=qW("firebase-js-sdk-policy",{createScriptURL:WW}),r=document.createElement("script"),i=`${nb}?l=${n}&id=${t}`;r.src=e?e==null?void 0:e.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function XW(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function KW(n,t,e,r,i,s){const a=r[i];try{if(a)await t[a];else{const l=(await wP(e)).find(h=>h.measurementId===i);l&&await t[l.appId]}}catch(o){qr.error(o)}n("config",i,s)}async function $W(n,t,e,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const o=await wP(e);for(const l of a){const h=o.find(g=>g.measurementId===l),d=h&&t[h.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(t)),await Promise.all(s),n("event",r,i||{})}catch(s){qr.error(s)}}function QW(n,t,e,r){async function i(s,...a){try{if(s==="event"){const[o,l]=a;await $W(n,t,e,o,l)}else if(s==="config"){const[o,l]=a;await KW(n,t,e,r,o,l)}else if(s==="consent"){const[o,l]=a;n("consent",o,l)}else if(s==="get"){const[o,l,h]=a;n("get",o,l,h)}else if(s==="set"){const[o]=a;n("set",o)}else n(s,...a)}catch(o){qr.error(o)}}return i}function ZW(n,t,e,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=QW(s,n,t,e),{gtagCore:s,wrappedGtag:window[i]}}function JW(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(nb)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=30,eq=1e3;class nq{constructor(t={},e=eq){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const bP=new nq;function rq(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function iq(n){var a;const{appId:t,apiKey:e}=n,r={method:"GET",headers:rq(e)},i=HW.replace("{app-id}",t),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let o="";try{const l=await s.json();(a=l.error)!=null&&a.message&&(o=l.error.message)}catch{}throw oi.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function sq(n,t=bP,e){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw oi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw oi.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new cq;return setTimeout(async()=>{o.abort()},zW),EP({appId:r,apiKey:i,measurementId:s},a,o,t)}async function EP(n,{throttleEndTimeMillis:t,backoffCount:e},r,i=bP){var o;const{appId:s,measurementId:a}=n;try{await aq(r,t)}catch(l){if(a)return qr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:a};throw l}try{const l=await iq(n);return i.deleteThrottleMetadata(s),l}catch(l){const h=l;if(!oq(h)){if(i.deleteThrottleMetadata(s),a)return qr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:s,measurementId:a};throw l}const d=Number((o=h==null?void 0:h.customData)==null?void 0:o.httpStatus)===503?v3(e,i.intervalMillis,tq):v3(e,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+d,backoffCount:e+1};return i.setThrottleMetadata(s,g),qr.debug(`Calling attemptFetch again in ${d} millis`),EP(n,g,r,i)}}function aq(n,t){return new Promise((e,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(e,i);n.addEventListener(()=>{clearTimeout(s),r(oi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function oq(n){if(!(n instanceof Ji)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class cq{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function lq(n,t,e,r,i){if(i&&i.global){n("event",e,r);return}else{const s=await t,a={...r,send_to:s};n("event",e,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uq(){if(Kw())try{await XM()}catch(n){return qr.warn(oi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return qr.warn(oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function hq(n,t,e,r,i,s,a){const o=sq(n);o.then(m=>{e[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&qr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>qr.error(m)),t.push(o);const l=uq().then(m=>{if(m)return r.getId()}),[h,d]=await Promise.all([o,l]);JW(s)||YW(s,h.measurementId),i("js",new Date);const g=(a==null?void 0:a.config)??{};return g[jW]="firebase",g.update=!0,d!=null&&(g[UW]=d),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(t){this.app=t}_delete(){return delete kd[this.app.options.appId],Promise.resolve()}}let kd={},M3=[];const P3={};let Y_="dataLayer",dq="gtag",N3,AP,k3=!1;function gq(){const n=[];if(WM()&&n.push("This is a browser extension environment."),bH()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),e=oi.create("invalid-analytics-context",{errorInfo:t});qr.warn(e.message)}}function pq(n,t,e){gq();const r=n.options.appId;if(!r)throw oi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)qr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw oi.create("no-api-key");if(kd[r]!=null)throw oi.create("already-exists",{id:r});if(!k3){XW(Y_);const{wrappedGtag:s,gtagCore:a}=ZW(kd,M3,P3,Y_,dq);AP=s,N3=a,k3=!0}return kd[r]=hq(n,M3,P3,t,N3,Y_,e),new fq(n)}function mq(n=ZM()){n=er(n);const t=Tl(n,F1);return t.isInitialized()?t.getImmediate():yq(n)}function yq(n,t={}){const e=Tl(n,F1);if(e.isInitialized()){const i=e.getImmediate();if(Lo(t,e.getOptions()))return i;throw oi.create("already-initialized")}return e.initialize({options:t})}function vq(n,t,e,r){n=er(n),lq(AP,kd[n.app.options.appId],t,e,r).catch(i=>qr.error(i))}const L3="@firebase/analytics",V3="0.10.18";function _q(){ks(new Qi(F1,(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return pq(r,i,e)},"PUBLIC")),ks(new Qi("analytics-internal",n,"PRIVATE")),Oi(L3,V3),Oi(L3,V3,"esm2020");function n(t){try{const e=t.getProvider(F1).getImmediate();return{logEvent:(r,i,s)=>vq(e,r,i,s)}}catch(e){throw oi.create("interop-component-reg-failed",{reason:e})}}}_q();function TP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xq=TP,SP=new Al("auth","Firebase",TP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=new bm("@firebase/auth");function wq(n,...t){U1.logLevel<=ie.WARN&&U1.warn(`Auth (${Ch}): ${n}`,...t)}function i1(n,...t){U1.logLevel<=ie.ERROR&&U1.error(`Auth (${Ch}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n,...t){throw rb(n,...t)}function Rs(n,...t){return rb(n,...t)}function IP(n,t,e){const r={...xq(),[t]:e};return new Al("auth","Firebase",r).create(t,{appName:n.name})}function _a(n){return IP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rb(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return SP.create(n,...t)}function jt(n,t,...e){if(!n)throw rb(t,...e)}function ma(n){const t="INTERNAL ASSERTION FAILED: "+n;throw i1(t),new Error(t)}function Ea(n,t){n||ma(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function bq(){return B3()==="http:"||B3()==="https:"}function B3(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bq()||WM()||"connection"in navigator)?navigator.onLine:!0}function Aq(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ea(e>t,"Short delay should be less than long delay!"),this.isMobile=vH()||xH()}get(){return Eq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(n,t){Ea(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Iq=new O0(3e4,6e4);function Ho(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Go(n,t,e,r,i={}){return DP(n,i,async()=>{let s={},a={};r&&(t==="GET"?a=r:s={body:JSON.stringify(r)});const o=R0({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:t,headers:l,...s};return _H()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Ih(n.emulatorConfig.host)&&(h.credentials="include"),CP.fetch()(await RP(n,n.config.apiHost,e,o),h)})}async function DP(n,t,e){n._canInitEmulator=!1;const r={...Tq,...t};try{const i=new Dq(n),s=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Pp(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pp(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Pp(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Pp(n,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw IP(n,d,h);Zi(n,d)}}catch(i){if(i instanceof Ji)throw i;Zi(n,"network-request-failed",{message:String(i)})}}async function M0(n,t,e,r,i={}){const s=await Go(n,t,e,r,i);return"mfaPendingCredential"in s&&Zi(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function RP(n,t,e,r){const i=`${t}${e}?${r}`,s=n,a=s.config.emulator?ib(n.config,i):`${n.config.apiScheme}://${i}`;return Sq.includes(e)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function Cq(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dq{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Rs(this.auth,"network-request-failed")),Iq.get())})}}function Pp(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=Rs(n,t,r);return i.customData._tokenResponse=e,i}function F3(n){return n!==void 0&&n.enterprise!==void 0}class Rq{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return Cq(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Oq(n,t){return Go(n,"GET","/v2/recaptchaConfig",Ho(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mq(n,t){return Go(n,"POST","/v1/accounts:delete",t)}async function j1(n,t){return Go(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Pq(n,t=!1){const e=er(n),r=await e.getIdToken(t),i=sb(r);jt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ld(X_(i.auth_time)),issuedAtTime:Ld(X_(i.iat)),expirationTime:Ld(X_(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function X_(n){return Number(n)*1e3}function sb(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return i1("JWT malformed, contained fewer than 3 sections"),null;try{const i=FM(e);return i?JSON.parse(i):(i1("Failed to decode base64 JWT payload"),null)}catch(i){return i1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function U3(n){const t=sb(n);return jt(t,"internal-error"),jt(typeof t.exp<"u","internal-error"),jt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof Ji&&Nq(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Nq({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ld(this.lastLoginAt),this.creationTime=Ld(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(n){var g;const t=n.auth,e=await n.getIdToken(),r=await l0(n,j1(t,{idToken:e}));jt(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(g=i.providerUserInfo)!=null&&g.length?OP(i.providerUserInfo):[],a=Vq(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),h=o?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new r2(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function Lq(n){const t=er(n);await z1(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Vq(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function OP(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bq(n,t){const e=await DP(n,{},async()=>{const r=R0({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await RP(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&Ih(n.emulatorConfig.host)&&(l.credentials="include"),CP.fetch()(a,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function Fq(n,t){return Go(n,"POST","/v2/accounts:revokeToken",Ho(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){jt(t.idToken,"internal-error"),jt(typeof t.idToken<"u","internal-error"),jt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):U3(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){jt(t.length!==0,"internal-error");const e=U3(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(jt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:s}=await Bq(t,e);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:s}=e,a=new Ku;return r&&(jt(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(jt(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),s&&(jt(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ku,this.toJSON())}_performRefresh(){return ma("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(n,t){jt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Ki{constructor({uid:t,auth:e,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new kq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new r2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await l0(this,this.stsTokenManager.getToken(this.auth,t));return jt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return Pq(this,t)}reload(){return Lq(this)}_assign(t){this!==t&&(jt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ki({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await z1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ii(this.auth.app))return Promise.reject(_a(this.auth));const t=await this.getIdToken();return await l0(this,Mq(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,i=e.email??void 0,s=e.phoneNumber??void 0,a=e.photoURL??void 0,o=e.tenantId??void 0,l=e._redirectEventId??void 0,h=e.createdAt??void 0,d=e.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:y,providerData:x,stsTokenManager:b}=e;jt(g&&b,t,"internal-error");const E=Ku.fromJSON(this.name,b);jt(typeof g=="string",t,"internal-error"),ro(r,t.name),ro(i,t.name),jt(typeof m=="boolean",t,"internal-error"),jt(typeof y=="boolean",t,"internal-error"),ro(s,t.name),ro(a,t.name),ro(o,t.name),ro(l,t.name),ro(h,t.name),ro(d,t.name);const T=new Ki({uid:g,auth:t,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:h,lastLoginAt:d});return x&&Array.isArray(x)&&(T.providerData=x.map(S=>({...S}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(t,e,r=!1){const i=new Ku;i.updateFromServerResponse(e);const s=new Ki({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await z1(s),s}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];jt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?OP(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Ku;o.updateFromIdToken(r);const l=new Ki({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new r2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=new Map;function ya(n){Ea(n instanceof Function,"Expected a class definition");let t=j3.get(n);return t?(Ea(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,j3.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}MP.type="NONE";const z3=MP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n,t,e){return`firebase:${n}:${t}:${e}`}class $u{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=s1(this.userKey,i.apiKey,s),this.fullPersistenceKey=s1("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await j1(this.auth,{idToken:t}).catch(()=>{});return e?Ki._fromGetAccountInfoResponse(this.auth,e,t):null}return Ki._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new $u(ya(z3),t,r);const i=(await Promise.all(e.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||ya(z3);const a=s1(r,t.config.apiKey,t.name);let o=null;for(const h of e)try{const d=await h._get(a);if(d){let g;if(typeof d=="string"){const m=await j1(t,{idToken:d}).catch(()=>{});if(!m)break;g=await Ki._fromGetAccountInfoResponse(t,m,d)}else g=Ki._fromJSON(t,d);h!==s&&(o=g),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $u(s,t,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(e.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new $u(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(LP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PP(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(BP(t))return"Blackberry";if(FP(t))return"Webos";if(NP(t))return"Safari";if((t.includes("chrome/")||kP(t))&&!t.includes("edge/"))return"Chrome";if(VP(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PP(n=zn()){return/firefox\//i.test(n)}function NP(n=zn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kP(n=zn()){return/crios\//i.test(n)}function LP(n=zn()){return/iemobile/i.test(n)}function VP(n=zn()){return/android/i.test(n)}function BP(n=zn()){return/blackberry/i.test(n)}function FP(n=zn()){return/webos/i.test(n)}function ab(n=zn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Uq(n=zn()){var t;return ab(n)&&!!((t=window.navigator)!=null&&t.standalone)}function jq(){return wH()&&document.documentMode===10}function UP(n=zn()){return ab(n)||VP(n)||FP(n)||BP(n)||/windows phone/i.test(n)||LP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n,t=[]){let e;switch(n){case"Browser":e=H3(zn());break;case"Worker":e=`${H3(zn())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Ch}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=s=>new Promise((a,o)=>{try{const l=t(s);a(l)}catch(l){o(l)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hq(n,t={}){return Go(n,"GET","/v2/passwordPolicy",Ho(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=6;class Wq{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??Gq,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G3(this),this.idTokenSubscription=new G3(this),this.beforeStateQueue=new zq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ya(e)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await $u.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await j1(this,{idToken:t}),r=await Ki._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Ii(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await z1(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Aq()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ii(this.app))return Promise.reject(_a(this));const e=t?er(t):null;return e&&jt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&jt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ii(this.app)?Promise.reject(_a(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ii(this.app)?Promise.reject(_a(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Hq(this),e=new Wq(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Al("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await Fq(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ya(t)||this._popupRedirectResolver;jt(e,this,"argument-error"),this.redirectPersistenceManager=await $u.create(this,[ya(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(jt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,r,i);return()=>{a=!0,l()}}else{const l=t.addObserver(e);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=jP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&wq(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Sl(n){return er(n)}class G3{constructor(t){this.auth=t,this.observer=null,this.addObserver=IH(e=>this.observer=e)}get next(){return jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yq(n){Tm=n}function zP(n){return Tm.loadJS(n)}function Xq(){return Tm.recaptchaEnterpriseScript}function Kq(){return Tm.gapiScript}function $q(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Qq{constructor(){this.enterprise=new Zq}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Zq{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const Jq="recaptcha-enterprise",HP="NO_RECAPTCHA";class tY{constructor(t){this.type=Jq,this.auth=Sl(t)}async verify(t="verify",e=!1){async function r(s){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{Oq(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const h=new Rq(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;F3(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(h=>{a(h)}).catch(()=>{a(HP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Qq().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!e&&F3(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Xq();l.length!==0&&(l+=o),zP(l).then(()=>{i(o,s,a)}).catch(h=>{a(h)})}}).catch(o=>{a(o)})})}}async function W3(n,t,e,r=!1,i=!1){const s=new tY(n);let a;if(i)a=HP;else try{a=await s.verify(e)}catch{a=await s.verify(e,!0)}const o={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function i2(n,t,e,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await W3(n,t,e,e==="getOobCode");return r(n,a)}else return r(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await W3(n,t,e,e==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(n,t){const e=Tl(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),s=e.getOptions();if(Lo(s,t??{}))return i;Zi(i,"already-initialized")}return e.initialize({options:t})}function nY(n,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(ya);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function rY(n,t,e){const r=Sl(n);jt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=GP(t),{host:a,port:o}=iY(t),l=o===null?"":`:${o}`,h={url:`${s}//${a}${l}/`},d=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){jt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),jt(Lo(h,r.config.emulator)&&Lo(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ih(a)?(HM(`${s}//${a}${l}`),yH("Auth",!0)):sY()}function GP(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function iY(n){const t=GP(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:q3(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:q3(a)}}}function q3(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function sY(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ma("not implemented")}_getIdTokenResponse(t){return ma("not implemented")}_linkToIdToken(t,e){return ma("not implemented")}_getReauthenticationResolver(t){return ma("not implemented")}}async function aY(n,t){return Go(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oY(n,t){return M0(n,"POST","/v1/accounts:signInWithPassword",Ho(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cY(n,t){return M0(n,"POST","/v1/accounts:signInWithEmailLink",Ho(n,t))}async function lY(n,t){return M0(n,"POST","/v1/accounts:signInWithEmailLink",Ho(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends ob{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new u0(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new u0(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i2(t,e,"signInWithPassword",oY);case"emailLink":return cY(t,{email:this._email,oobCode:this._password});default:Zi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i2(t,r,"signUpPassword",aY);case"emailLink":return lY(t,{idToken:e,email:this._email,oobCode:this._password});default:Zi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(n,t){return M0(n,"POST","/v1/accounts:signInWithIdp",Ho(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uY="http://localhost";class dl extends ob{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new dl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Zi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...s}=e;if(!r||!i)return null;const a=new dl(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(t){const e=this.buildRequest();return Qu(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Qu(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Qu(t,e)}buildRequest(){const t={requestUri:uY,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=R0(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hY(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fY(n){const t=gd(pd(n)).link,e=t?gd(pd(t)).deep_link_id:null,r=gd(pd(n)).deep_link_id;return(r?gd(pd(r)).link:null)||r||e||t||n}class cb{constructor(t){const e=gd(pd(t)),r=e.apiKey??null,i=e.oobCode??null,s=hY(e.mode??null);jt(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=fY(t);try{return new cb(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.providerId=Dh.PROVIDER_ID}static credential(t,e){return u0._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=cb.parseLink(e);return jt(r,"argument-error"),u0._fromEmailAndCode(t,r.code,r.tenantId)}}Dh.PROVIDER_ID="password";Dh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends WP{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends P0{constructor(){super("facebook.com")}static credential(t){return dl._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return go.credentialFromTaggedObject(t)}static credentialFromError(t){return go.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return go.credential(t.oauthAccessToken)}catch{return null}}}go.FACEBOOK_SIGN_IN_METHOD="facebook.com";go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends P0{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return dl._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return po.credentialFromTaggedObject(t)}static credentialFromError(t){return po.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return po.credential(e,r)}catch{return null}}}po.GOOGLE_SIGN_IN_METHOD="google.com";po.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends P0{constructor(){super("github.com")}static credential(t){return dl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return mo.credentialFromTaggedObject(t)}static credentialFromError(t){return mo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return mo.credential(t.oauthAccessToken)}catch{return null}}}mo.GITHUB_SIGN_IN_METHOD="github.com";mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends P0{constructor(){super("twitter.com")}static credential(t,e){return dl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return yo.credentialFromTaggedObject(t)}static credentialFromError(t){return yo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return yo.credential(e,r)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dY(n,t){return M0(n,"POST","/v1/accounts:signUp",Ho(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const s=await Ki._fromIdTokenResponse(t,r,i),a=Y3(r);return new gl({user:s,providerId:a,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=Y3(r);return new gl({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function Y3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1 extends Ji{constructor(t,e,r,i){super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,H1.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new H1(t,e,r,i)}}function qP(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?H1._fromErrorAndOperation(n,s,t,r):s})}async function gY(n,t,e=!1){const r=await l0(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return gl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pY(n,t,e=!1){const{auth:r}=n;if(Ii(r.app))return Promise.reject(_a(r));const i="reauthenticate";try{const s=await l0(n,qP(r,i,t,n),e);jt(s.idToken,r,"internal-error");const a=sb(s.idToken);jt(a,r,"internal-error");const{sub:o}=a;return jt(n.uid===o,r,"user-mismatch"),gl._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(n,t,e=!1){if(Ii(n.app))return Promise.reject(_a(n));const r="signIn",i=await qP(n,r,t),s=await gl._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(s.user),s}async function mY(n,t){return YP(Sl(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(n){const t=Sl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function yY(n,t,e){if(Ii(n.app))return Promise.reject(_a(n));const r=Sl(n),a=await i2(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dY).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&XP(n),l}),o=await gl._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function vY(n,t,e){return Ii(n.app)?Promise.reject(_a(n)):mY(er(n),Dh.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XP(n),r})}function _Y(n,t,e,r){return er(n).onIdTokenChanged(t,e,r)}function xY(n,t,e){return er(n).beforeAuthStateChanged(t,e)}function wY(n){return er(n).signOut()}const G1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(G1,"1"),this.storage.removeItem(G1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY=1e3,EY=10;class $P extends KP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!e&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);jq()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,EY):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},bY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}$P.type="LOCAL";const AY=$P;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP extends KP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}QP.type="SESSION";const ZP=QP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TY(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new Sm(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:s}=e.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async h=>h(e.origin,s)),l=await TY(o);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const h=lb("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:e},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function IY(n){Os().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function CY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DY(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function RY(){return JP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="firebaseLocalStorageDb",OY=1,W1="firebaseLocalStorage",e8="fbase_key";class N0{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Im(n,t){return n.transaction([W1],t?"readwrite":"readonly").objectStore(W1)}function MY(){const n=indexedDB.deleteDatabase(t8);return new N0(n).toPromise()}function s2(){const n=indexedDB.open(t8,OY);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(W1,{keyPath:e8})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(W1)?t(r):(r.close(),await MY(),t(await s2()))})})}async function X3(n,t,e){const r=Im(n,!0).put({[e8]:t,value:e});return new N0(r).toPromise()}async function PY(n,t){const e=Im(n,!1).get(t),r=await new N0(e).toPromise();return r===void 0?null:r.value}function K3(n,t){const e=Im(n,!0).delete(t);return new N0(e).toPromise()}const NY=800,kY=3;class n8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s2(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>kY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sm._getInstance(RY()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await CY(),!this.activeServiceWorker)return;this.sender=new SY(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||DY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await s2();return await X3(t,G1,"1"),await K3(t,G1),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>X3(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>PY(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>K3(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=Im(i,!1).getAll();return new N0(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n8.type="LOCAL";const LY=n8;new O0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VY(n,t){return t?ya(t):(jt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends ob{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qu(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Qu(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Qu(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function BY(n){return YP(n.auth,new ub(n),n.bypassAuthState)}function FY(n){const{auth:t,user:e}=n;return jt(e,t,"internal-error"),pY(e,new ub(n),n.bypassAuthState)}async function UY(n){const{auth:t,user:e}=n;return jt(e,t,"internal-error"),gY(e,new ub(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(t,e,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return BY;case"linkViaPopup":case"linkViaRedirect":return UY;case"reauthViaPopup":case"reauthViaRedirect":return FY;default:Zi(this.auth,"internal-error")}}resolve(t){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jY=new O0(2e3,1e4);class Gu extends r8{constructor(t,e,r,i,s){super(t,e,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Gu.currentPopupAction&&Gu.currentPopupAction.cancel(),Gu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return jt(t,this.auth,"internal-error"),t}async onExecution(){Ea(this.filter.length===1,"Popup operations only handle one event");const t=lb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,jY.get())};t()}}Gu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY="pendingRedirect",a1=new Map;class HY extends r8{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=a1.get(this.auth._key());if(!t){try{const r=await GY(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}a1.set(this.auth._key(),t)}return this.bypassAuthState||a1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GY(n,t){const e=YY(t),r=qY(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function WY(n,t){a1.set(n._key(),t)}function qY(n){return ya(n._redirectPersistence)}function YY(n){return s1(zY,n.config.apiKey,n.name)}async function XY(n,t,e=!1){if(Ii(n.app))return Promise.reject(_a(n));const r=Sl(n),i=VY(r,t),a=await new HY(r,i,e).execute();return a&&!e&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY=10*60*1e3;class $Y{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!QY(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!i8(t)){const i=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(Rs(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=KY&&this.cachedEventUids.clear(),this.cachedEventUids.has($3(t))}saveEventToCache(t){this.cachedEventUids.add($3(t)),this.lastProcessedEventTime=Date.now()}}function $3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function i8({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function QY(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i8(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZY(n,t={}){return Go(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tX=/^https?/;async function eX(n){if(n.config.emulator)return;const{authorizedDomains:t}=await ZY(n);for(const e of t)try{if(nX(e))return}catch{}Zi(n,"unauthorized-domain")}function nX(n){const t=n2(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===r}if(!tX.test(e))return!1;if(JY.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rX=new O0(3e4,6e4);function Q3(){const n=Os().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function iX(n){return new Promise((t,e)=>{var i,s,a;function r(){Q3(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Q3(),e(Rs(n,"network-request-failed"))},timeout:rX.get()})}if((s=(i=Os().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((a=Os().gapi)!=null&&a.load)r();else{const o=$q("iframefcb");return Os()[o]=()=>{gapi.load?r():e(Rs(n,"network-request-failed"))},zP(`${Kq()}?onload=${o}`).catch(l=>e(l))}}).catch(t=>{throw o1=null,t})}let o1=null;function sX(n){return o1=o1||iX(n),o1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX=new O0(5e3,15e3),oX="__/auth/iframe",cX="emulator/auth/iframe",lX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hX(n){const t=n.config;jt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?ib(t,cX):`https://${n.config.authDomain}/${oX}`,r={apiKey:t.apiKey,appName:n.name,v:Ch},i=uX.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${R0(r).slice(1)}`}async function fX(n){const t=await sX(n),e=Os().gapi;return jt(e,n,"internal-error"),t.open({where:document.body,url:hX(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lX,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Rs(n,"network-request-failed"),o=Os().setTimeout(()=>{s(a)},aX.get());function l(){Os().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gX=500,pX=600,mX="_blank",yX="http://localhost";class Z3{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vX(n,t,e,r=gX,i=pX){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...dX,width:r.toString(),height:i.toString(),top:s,left:a},h=zn().toLowerCase();e&&(o=kP(h)?mX:e),PP(h)&&(t=t||yX,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(Uq(h)&&o!=="_self")return _X(t||"",o),new Z3(null);const g=window.open(t||"",o,d);jt(g,n,"popup-blocked");try{g.focus()}catch{}return new Z3(g)}function _X(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xX="__/auth/handler",wX="emulator/auth/handler",bX=encodeURIComponent("fac");async function J3(n,t,e,r,i,s){jt(n.config.authDomain,n,"auth-domain-config-required"),jt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:Ch,eventId:i};if(t instanceof WP){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",SH(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof P0){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await n._getAppCheckToken(),h=l?`#${bX}=${encodeURIComponent(l)}`:"";return`${EX(n)}?${R0(o).slice(1)}${h}`}function EX({config:n}){return n.emulator?ib(n,wX):`https://${n.authDomain}/${xX}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="webStorageSupport";class AX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZP,this._completeRedirectFn=XY,this._overrideRedirectResult=WY}async _openPopup(t,e,r,i){var a;Ea((a=this.eventManagers[t._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await J3(t,e,r,n2(),i);return vX(t,s,lb())}async _openRedirect(t,e,r,i){await this._originValidation(t);const s=await J3(t,e,r,n2(),i);return IY(s),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:s}=this.eventManagers[e];return i?Promise.resolve(i):(Ea(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await fX(t),r=new $Y(t);return e.register("authEvent",i=>(jt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(K_,{type:K_},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[K_];s!==void 0&&e(!!s),Zi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=eX(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return UP()||NP()||ab()}}const TX=AX;var tD="@firebase/auth",eD="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CX(n){ks(new Qi("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;jt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jP(n)},h=new qq(r,i,s,l);return nY(h,e),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),ks(new Qi("auth-internal",t=>{const e=Sl(t.getProvider("auth").getImmediate());return(r=>new SX(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi(tD,eD,IX(n)),Oi(tD,eD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DX=5*60,RX=zM("authIdTokenMaxAge")||DX;let nD=null;const OX=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>RX)return;const i=e==null?void 0:e.token;nD!==i&&(nD=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MX(n=ZM()){const t=Tl(n,"auth");if(t.isInitialized())return t.getImmediate();const e=eY(n,{popupRedirectResolver:TX,persistence:[LY,AY,ZP]}),r=zM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=OX(s.toString());xY(e,a,()=>a(e.currentUser)),_Y(e,o=>a(o))}}const i=dH("auth");return i&&rY(e,`http://${i}`),e}function PX(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Yq({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const s=Rs("internal-error");s.customData=i,e(s)},r.type="text/javascript",r.charset="UTF-8",PX().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CX("Browser");var rD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Co,s8;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,C){function O(){}O.prototype=C.prototype,M.D=C.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(L,j,z){for(var U=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)U[Et-2]=arguments[Et];return C.prototype[j].apply(L,U)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,C,O){O||(O=0);var L=Array(16);if(typeof C=="string")for(var j=0;16>j;++j)L[j]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(j=0;16>j;++j)L[j]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=M.g[0],O=M.g[1],j=M.g[2];var z=M.g[3],U=C+(z^O&(j^z))+L[0]+3614090360&4294967295;C=O+(U<<7&4294967295|U>>>25),U=z+(j^C&(O^j))+L[1]+3905402710&4294967295,z=C+(U<<12&4294967295|U>>>20),U=j+(O^z&(C^O))+L[2]+606105819&4294967295,j=z+(U<<17&4294967295|U>>>15),U=O+(C^j&(z^C))+L[3]+3250441966&4294967295,O=j+(U<<22&4294967295|U>>>10),U=C+(z^O&(j^z))+L[4]+4118548399&4294967295,C=O+(U<<7&4294967295|U>>>25),U=z+(j^C&(O^j))+L[5]+1200080426&4294967295,z=C+(U<<12&4294967295|U>>>20),U=j+(O^z&(C^O))+L[6]+2821735955&4294967295,j=z+(U<<17&4294967295|U>>>15),U=O+(C^j&(z^C))+L[7]+4249261313&4294967295,O=j+(U<<22&4294967295|U>>>10),U=C+(z^O&(j^z))+L[8]+1770035416&4294967295,C=O+(U<<7&4294967295|U>>>25),U=z+(j^C&(O^j))+L[9]+2336552879&4294967295,z=C+(U<<12&4294967295|U>>>20),U=j+(O^z&(C^O))+L[10]+4294925233&4294967295,j=z+(U<<17&4294967295|U>>>15),U=O+(C^j&(z^C))+L[11]+2304563134&4294967295,O=j+(U<<22&4294967295|U>>>10),U=C+(z^O&(j^z))+L[12]+1804603682&4294967295,C=O+(U<<7&4294967295|U>>>25),U=z+(j^C&(O^j))+L[13]+4254626195&4294967295,z=C+(U<<12&4294967295|U>>>20),U=j+(O^z&(C^O))+L[14]+2792965006&4294967295,j=z+(U<<17&4294967295|U>>>15),U=O+(C^j&(z^C))+L[15]+1236535329&4294967295,O=j+(U<<22&4294967295|U>>>10),U=C+(j^z&(O^j))+L[1]+4129170786&4294967295,C=O+(U<<5&4294967295|U>>>27),U=z+(O^j&(C^O))+L[6]+3225465664&4294967295,z=C+(U<<9&4294967295|U>>>23),U=j+(C^O&(z^C))+L[11]+643717713&4294967295,j=z+(U<<14&4294967295|U>>>18),U=O+(z^C&(j^z))+L[0]+3921069994&4294967295,O=j+(U<<20&4294967295|U>>>12),U=C+(j^z&(O^j))+L[5]+3593408605&4294967295,C=O+(U<<5&4294967295|U>>>27),U=z+(O^j&(C^O))+L[10]+38016083&4294967295,z=C+(U<<9&4294967295|U>>>23),U=j+(C^O&(z^C))+L[15]+3634488961&4294967295,j=z+(U<<14&4294967295|U>>>18),U=O+(z^C&(j^z))+L[4]+3889429448&4294967295,O=j+(U<<20&4294967295|U>>>12),U=C+(j^z&(O^j))+L[9]+568446438&4294967295,C=O+(U<<5&4294967295|U>>>27),U=z+(O^j&(C^O))+L[14]+3275163606&4294967295,z=C+(U<<9&4294967295|U>>>23),U=j+(C^O&(z^C))+L[3]+4107603335&4294967295,j=z+(U<<14&4294967295|U>>>18),U=O+(z^C&(j^z))+L[8]+1163531501&4294967295,O=j+(U<<20&4294967295|U>>>12),U=C+(j^z&(O^j))+L[13]+2850285829&4294967295,C=O+(U<<5&4294967295|U>>>27),U=z+(O^j&(C^O))+L[2]+4243563512&4294967295,z=C+(U<<9&4294967295|U>>>23),U=j+(C^O&(z^C))+L[7]+1735328473&4294967295,j=z+(U<<14&4294967295|U>>>18),U=O+(z^C&(j^z))+L[12]+2368359562&4294967295,O=j+(U<<20&4294967295|U>>>12),U=C+(O^j^z)+L[5]+4294588738&4294967295,C=O+(U<<4&4294967295|U>>>28),U=z+(C^O^j)+L[8]+2272392833&4294967295,z=C+(U<<11&4294967295|U>>>21),U=j+(z^C^O)+L[11]+1839030562&4294967295,j=z+(U<<16&4294967295|U>>>16),U=O+(j^z^C)+L[14]+4259657740&4294967295,O=j+(U<<23&4294967295|U>>>9),U=C+(O^j^z)+L[1]+2763975236&4294967295,C=O+(U<<4&4294967295|U>>>28),U=z+(C^O^j)+L[4]+1272893353&4294967295,z=C+(U<<11&4294967295|U>>>21),U=j+(z^C^O)+L[7]+4139469664&4294967295,j=z+(U<<16&4294967295|U>>>16),U=O+(j^z^C)+L[10]+3200236656&4294967295,O=j+(U<<23&4294967295|U>>>9),U=C+(O^j^z)+L[13]+681279174&4294967295,C=O+(U<<4&4294967295|U>>>28),U=z+(C^O^j)+L[0]+3936430074&4294967295,z=C+(U<<11&4294967295|U>>>21),U=j+(z^C^O)+L[3]+3572445317&4294967295,j=z+(U<<16&4294967295|U>>>16),U=O+(j^z^C)+L[6]+76029189&4294967295,O=j+(U<<23&4294967295|U>>>9),U=C+(O^j^z)+L[9]+3654602809&4294967295,C=O+(U<<4&4294967295|U>>>28),U=z+(C^O^j)+L[12]+3873151461&4294967295,z=C+(U<<11&4294967295|U>>>21),U=j+(z^C^O)+L[15]+530742520&4294967295,j=z+(U<<16&4294967295|U>>>16),U=O+(j^z^C)+L[2]+3299628645&4294967295,O=j+(U<<23&4294967295|U>>>9),U=C+(j^(O|~z))+L[0]+4096336452&4294967295,C=O+(U<<6&4294967295|U>>>26),U=z+(O^(C|~j))+L[7]+1126891415&4294967295,z=C+(U<<10&4294967295|U>>>22),U=j+(C^(z|~O))+L[14]+2878612391&4294967295,j=z+(U<<15&4294967295|U>>>17),U=O+(z^(j|~C))+L[5]+4237533241&4294967295,O=j+(U<<21&4294967295|U>>>11),U=C+(j^(O|~z))+L[12]+1700485571&4294967295,C=O+(U<<6&4294967295|U>>>26),U=z+(O^(C|~j))+L[3]+2399980690&4294967295,z=C+(U<<10&4294967295|U>>>22),U=j+(C^(z|~O))+L[10]+4293915773&4294967295,j=z+(U<<15&4294967295|U>>>17),U=O+(z^(j|~C))+L[1]+2240044497&4294967295,O=j+(U<<21&4294967295|U>>>11),U=C+(j^(O|~z))+L[8]+1873313359&4294967295,C=O+(U<<6&4294967295|U>>>26),U=z+(O^(C|~j))+L[15]+4264355552&4294967295,z=C+(U<<10&4294967295|U>>>22),U=j+(C^(z|~O))+L[6]+2734768916&4294967295,j=z+(U<<15&4294967295|U>>>17),U=O+(z^(j|~C))+L[13]+1309151649&4294967295,O=j+(U<<21&4294967295|U>>>11),U=C+(j^(O|~z))+L[4]+4149444226&4294967295,C=O+(U<<6&4294967295|U>>>26),U=z+(O^(C|~j))+L[11]+3174756917&4294967295,z=C+(U<<10&4294967295|U>>>22),U=j+(C^(z|~O))+L[2]+718787259&4294967295,j=z+(U<<15&4294967295|U>>>17),U=O+(z^(j|~C))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(j+(U<<21&4294967295|U>>>11))&4294967295,M.g[2]=M.g[2]+j&4294967295,M.g[3]=M.g[3]+z&4294967295}r.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var O=C-this.blockSize,L=this.B,j=this.h,z=0;z<C;){if(j==0)for(;z<=O;)i(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<C;)if(L[j++]=M.charCodeAt(z++),j==this.blockSize){i(this,L),j=0;break}}else for(;z<C;)if(L[j++]=M[z++],j==this.blockSize){i(this,L),j=0;break}}this.h=j,this.o+=C},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var O=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=O&255,O/=256;for(this.u(M),M=Array(16),C=O=0;4>C;++C)for(var L=0;32>L;L+=8)M[O++]=this.g[C]>>>L&255;return M};function s(M,C){var O=o;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=C(M)}function a(M,C){this.h=C;for(var O=[],L=!0,j=M.length-1;0<=j;j--){var z=M[j]|0;L&&z==C||(O[j]=z,L=!1)}this.g=O}var o={};function l(M){return-128<=M&&128>M?s(M,function(C){return new a([C|0],0>C?-1:0)}):new a([M|0],0>M?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return g;if(0>M)return E(h(-M));for(var C=[],O=1,L=0;M>=O;L++)C[L]=M/O|0,O*=4294967296;return new a(C,0)}function d(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return E(d(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=h(Math.pow(C,8)),L=g,j=0;j<M.length;j+=8){var z=Math.min(8,M.length-j),U=parseInt(M.substring(j,j+z),C);8>z?(z=h(Math.pow(C,z)),L=L.j(z).add(h(U))):(L=L.j(O),L=L.add(h(U)))}return L}var g=l(0),m=l(1),y=l(16777216);n=a.prototype,n.m=function(){if(b(this))return-E(this).m();for(var M=0,C=1,O=0;O<this.g.length;O++){var L=this.i(O);M+=(0<=L?L:4294967296+L)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(x(this))return"0";if(b(this))return"-"+E(this).toString(M);for(var C=h(Math.pow(M,6)),O=this,L="";;){var j=k(O,C).g;O=T(O,j.j(C));var z=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=j,x(O))return z+L;for(;6>z.length;)z="0"+z;L=z+L}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function x(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function b(M){return M.h==-1}n.l=function(M){return M=T(this,M),b(M)?-1:x(M)?0:1};function E(M){for(var C=M.g.length,O=[],L=0;L<C;L++)O[L]=~M.g[L];return new a(O,~M.h).add(m)}n.abs=function(){return b(this)?E(this):this},n.add=function(M){for(var C=Math.max(this.g.length,M.g.length),O=[],L=0,j=0;j<=C;j++){var z=L+(this.i(j)&65535)+(M.i(j)&65535),U=(z>>>16)+(this.i(j)>>>16)+(M.i(j)>>>16);L=U>>>16,z&=65535,U&=65535,O[j]=U<<16|z}return new a(O,O[O.length-1]&-2147483648?-1:0)};function T(M,C){return M.add(E(C))}n.j=function(M){if(x(this)||x(M))return g;if(b(this))return b(M)?E(this).j(E(M)):E(E(this).j(M));if(b(M))return E(this.j(E(M)));if(0>this.l(y)&&0>M.l(y))return h(this.m()*M.m());for(var C=this.g.length+M.g.length,O=[],L=0;L<2*C;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<M.g.length;j++){var z=this.i(L)>>>16,U=this.i(L)&65535,Et=M.i(j)>>>16,wt=M.i(j)&65535;O[2*L+2*j]+=U*wt,S(O,2*L+2*j),O[2*L+2*j+1]+=z*wt,S(O,2*L+2*j+1),O[2*L+2*j+1]+=U*Et,S(O,2*L+2*j+1),O[2*L+2*j+2]+=z*Et,S(O,2*L+2*j+2)}for(L=0;L<C;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=C;L<2*C;L++)O[L]=0;return new a(O,0)};function S(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function R(M,C){this.g=M,this.h=C}function k(M,C){if(x(C))throw Error("division by zero");if(x(M))return new R(g,g);if(b(M))return C=k(E(M),C),new R(E(C.g),E(C.h));if(b(C))return C=k(M,E(C)),new R(E(C.g),C.h);if(30<M.g.length){if(b(M)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var O=m,L=C;0>=L.l(M);)O=P(O),L=P(L);var j=H(O,1),z=H(L,1);for(L=H(L,2),O=H(O,2);!x(L);){var U=z.add(L);0>=U.l(M)&&(j=j.add(O),z=U),L=H(L,1),O=H(O,1)}return C=T(M,j.j(C)),new R(j,C)}for(j=g;0<=M.l(C);){for(O=Math.max(1,Math.floor(M.m()/C.m())),L=Math.ceil(Math.log(O)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),z=h(O),U=z.j(C);b(U)||0<U.l(M);)O-=L,z=h(O),U=z.j(C);x(z)&&(z=m),j=j.add(z),M=T(M,U)}return new R(j,M)}n.A=function(M){return k(this,M).h},n.and=function(M){for(var C=Math.max(this.g.length,M.g.length),O=[],L=0;L<C;L++)O[L]=this.i(L)&M.i(L);return new a(O,this.h&M.h)},n.or=function(M){for(var C=Math.max(this.g.length,M.g.length),O=[],L=0;L<C;L++)O[L]=this.i(L)|M.i(L);return new a(O,this.h|M.h)},n.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),O=[],L=0;L<C;L++)O[L]=this.i(L)^M.i(L);return new a(O,this.h^M.h)};function P(M){for(var C=M.g.length+1,O=[],L=0;L<C;L++)O[L]=M.i(L)<<1|M.i(L-1)>>>31;return new a(O,M.h)}function H(M,C){var O=C>>5;C%=32;for(var L=M.g.length-O,j=[],z=0;z<L;z++)j[z]=0<C?M.i(z+O)>>>C|M.i(z+O+1)<<32-C:M.i(z+O);return new a(j,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s8=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Co=a}).apply(typeof rD<"u"?rD:typeof self<"u"?self:typeof window<"u"?window:{});var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a8,md,o8,c1,a2,c8,l8,u8;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,A,I){return v==Array.prototype||v==Object.prototype||(v[A]=I.value),v};function e(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Np=="object"&&Np];for(var A=0;A<v.length;++A){var I=v[A];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=e(this);function i(v,A){if(A)t:{var I=r;v=v.split(".");for(var B=0;B<v.length-1;B++){var X=v[B];if(!(X in I))break t;I=I[X]}v=v[v.length-1],B=I[v],A=A(B),A!=B&&A!=null&&t(I,v,{configurable:!0,writable:!0,value:A})}}function s(v,A){v instanceof String&&(v+="");var I=0,B=!1,X={next:function(){if(!B&&I<v.length){var nt=I++;return{value:A(nt,v[nt]),done:!1}}return B=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(v){return v||function(){return s(this,function(A,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(v){var A=typeof v;return A=A!="object"?A:v?Array.isArray(v)?"array":A:"null",A=="array"||A=="object"&&typeof v.length=="number"}function h(v){var A=typeof v;return A=="object"&&v!=null||A=="function"}function d(v,A,I){return v.call.apply(v.bind,arguments)}function g(v,A,I){if(!v)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,B),v.apply(A,X)}}return function(){return v.apply(A,arguments)}}function m(v,A,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function y(v,A){var I=Array.prototype.slice.call(arguments,1);return function(){var B=I.slice();return B.push.apply(B,arguments),v.apply(this,B)}}function x(v,A){function I(){}I.prototype=A.prototype,v.aa=A.prototype,v.prototype=new I,v.prototype.constructor=v,v.Qb=function(B,X,nt){for(var yt=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)yt[ae-2]=arguments[ae];return A.prototype[X].apply(B,yt)}}function b(v){const A=v.length;if(0<A){const I=Array(A);for(let B=0;B<A;B++)I[B]=v[B];return I}return[]}function E(v,A){for(let I=1;I<arguments.length;I++){const B=arguments[I];if(l(B)){const X=v.length||0,nt=B.length||0;v.length=X+nt;for(let yt=0;yt<nt;yt++)v[X+yt]=B[yt]}else v.push(B)}}class T{constructor(A,I){this.i=A,this.j=I,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function S(v){return/^[\s\xa0]*$/.test(v)}function R(){var v=o.navigator;return v&&(v=v.userAgent)?v:""}function k(v){return k[" "](v),v}k[" "]=function(){};var P=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(v,A,I){for(const B in v)A.call(I,v[B],B,v)}function M(v,A){for(const I in v)A.call(void 0,v[I],I,v)}function C(v){const A={};for(const I in v)A[I]=v[I];return A}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(v,A){let I,B;for(let X=1;X<arguments.length;X++){B=arguments[X];for(I in B)v[I]=B[I];for(let nt=0;nt<O.length;nt++)I=O[nt],Object.prototype.hasOwnProperty.call(B,I)&&(v[I]=B[I])}}function j(v){var A=1;v=v.split(":");const I=[];for(;0<A&&v.length;)I.push(v.shift()),A--;return v.length&&I.push(v.join(":")),I}function z(v){o.setTimeout(()=>{throw v},0)}function U(){var v=St;let A=null;return v.g&&(A=v.g,v.g=v.g.next,v.g||(v.h=null),A.next=null),A}class Et{constructor(){this.h=this.g=null}add(A,I){const B=wt.get();B.set(A,I),this.h?this.h.next=B:this.g=B,this.h=B}}var wt=new T(()=>new Q,v=>v.reset());class Q{constructor(){this.next=this.g=this.h=null}set(A,I){this.h=A,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let at,mt=!1,St=new Et,W=()=>{const v=o.Promise.resolve(void 0);at=()=>{v.then(ct)}};var ct=()=>{for(var v;v=U();){try{v.h.call(v.g)}catch(I){z(I)}var A=wt;A.j(v),100>A.h&&(A.h++,v.next=A.g,A.g=v)}mt=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function dt(v,A){this.type=v,this.g=this.target=A,this.defaultPrevented=!1}dt.prototype.h=function(){this.defaultPrevented=!0};var bt=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,A=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const I=()=>{};o.addEventListener("test",I,A),o.removeEventListener("test",I,A)}catch{}return v}();function Bt(v,A){if(dt.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var I=this.type=v.type,B=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=A,A=v.relatedTarget){if(P){t:{try{k(A.nodeName);var X=!0;break t}catch{}X=!1}X||(A=null)}}else I=="mouseover"?A=v.fromElement:I=="mouseout"&&(A=v.toElement);this.relatedTarget=A,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Ot[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Bt.aa.h.call(this)}}x(Bt,dt);var Ot={2:"touch",3:"pen",4:"mouse"};Bt.prototype.h=function(){Bt.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Dt(v,A,I,B,X){this.listener=v,this.proxy=null,this.src=A,this.type=I,this.capture=!!B,this.ha=X,this.key=++pe,this.da=this.fa=!1}function Lt(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Ut(v){this.src=v,this.g={},this.h=0}Ut.prototype.add=function(v,A,I,B,X){var nt=v.toString();v=this.g[nt],v||(v=this.g[nt]=[],this.h++);var yt=qt(v,A,B,X);return-1<yt?(A=v[yt],I||(A.fa=!1)):(A=new Dt(A,this.src,nt,!!B,X),A.fa=I,v.push(A)),A};function pt(v,A){var I=A.type;if(I in v.g){var B=v.g[I],X=Array.prototype.indexOf.call(B,A,void 0),nt;(nt=0<=X)&&Array.prototype.splice.call(B,X,1),nt&&(Lt(A),v.g[I].length==0&&(delete v.g[I],v.h--))}}function qt(v,A,I,B){for(var X=0;X<v.length;++X){var nt=v[X];if(!nt.da&&nt.listener==A&&nt.capture==!!I&&nt.ha==B)return X}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),Jt={};function Tr(v,A,I,B,X){if(Array.isArray(A)){for(var nt=0;nt<A.length;nt++)Tr(v,A[nt],I,B,X);return null}return I=Y0(I),v&&v[nn]?v.K(A,I,h(B)?!!B.capture:!1,X):rn(v,A,I,!1,B,X)}function rn(v,A,I,B,X,nt){if(!A)throw Error("Invalid event type");var yt=h(X)?!!X.capture:!!X,ae=Ol(v);if(ae||(v[Xt]=ae=new Ut(v)),I=ae.add(A,I,B,yt,nt),I.proxy)return I;if(B=Ni(),I.proxy=B,B.src=v,B.listener=I,v.addEventListener)bt||(X=yt),X===void 0&&(X=!1),v.addEventListener(A.toString(),B,X);else if(v.attachEvent)v.attachEvent(Ko(A.toString()),B);else if(v.addListener&&v.removeListener)v.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Ni(){function v(I){return A.call(v.src,v.listener,I)}const A=ay;return v}function Xr(v,A,I,B,X){if(Array.isArray(A))for(var nt=0;nt<A.length;nt++)Xr(v,A[nt],I,B,X);else B=h(B)?!!B.capture:!!B,I=Y0(I),v&&v[nn]?(v=v.i,A=String(A).toString(),A in v.g&&(nt=v.g[A],I=qt(nt,I,B,X),-1<I&&(Lt(nt[I]),Array.prototype.splice.call(nt,I,1),nt.length==0&&(delete v.g[A],v.h--)))):v&&(v=Ol(v))&&(A=v.g[A.toString()],v=-1,A&&(v=qt(A,I,B,X)),(I=-1<v?A[v]:null)&&ki(I))}function ki(v){if(typeof v!="number"&&v&&!v.da){var A=v.src;if(A&&A[nn])pt(A.i,v);else{var I=v.type,B=v.proxy;A.removeEventListener?A.removeEventListener(I,B,v.capture):A.detachEvent?A.detachEvent(Ko(I),B):A.addListener&&A.removeListener&&A.removeListener(B),(I=Ol(A))?(pt(I,v),I.h==0&&(I.src=null,A[Xt]=null)):Lt(v)}}}function Ko(v){return v in Jt?Jt[v]:Jt[v]="on"+v}function ay(v,A){if(v.da)v=!0;else{A=new Bt(A,this);var I=v.listener,B=v.ha||v.src;v.fa&&ki(v),v=I.call(B,A)}return v}function Ol(v){return v=v[Xt],v instanceof Ut?v:null}var Lh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y0(v){return typeof v=="function"?v:(v[Lh]||(v[Lh]=function(A){return v.handleEvent(A)}),v[Lh])}function sn(){gt.call(this),this.i=new Ut(this),this.M=this,this.F=null}x(sn,gt),sn.prototype[nn]=!0,sn.prototype.removeEventListener=function(v,A,I,B){Xr(this,v,A,I,B)};function Ae(v,A){var I,B=v.F;if(B)for(I=[];B;B=B.F)I.push(B);if(v=v.M,B=A.type||A,typeof A=="string")A=new dt(A,v);else if(A instanceof dt)A.target=A.target||v;else{var X=A;A=new dt(B,v),L(A,X)}if(X=!0,I)for(var nt=I.length-1;0<=nt;nt--){var yt=A.g=I[nt];X=Kr(yt,B,!0,A)&&X}if(yt=A.g=v,X=Kr(yt,B,!0,A)&&X,X=Kr(yt,B,!1,A)&&X,I)for(nt=0;nt<I.length;nt++)yt=A.g=I[nt],X=Kr(yt,B,!1,A)&&X}sn.prototype.N=function(){if(sn.aa.N.call(this),this.i){var v=this.i,A;for(A in v.g){for(var I=v.g[A],B=0;B<I.length;B++)Lt(I[B]);delete v.g[A],v.h--}}this.F=null},sn.prototype.K=function(v,A,I,B){return this.i.add(String(v),A,!1,I,B)},sn.prototype.L=function(v,A,I,B){return this.i.add(String(v),A,!0,I,B)};function Kr(v,A,I,B){if(A=v.i.g[String(A)],!A)return!0;A=A.concat();for(var X=!0,nt=0;nt<A.length;++nt){var yt=A[nt];if(yt&&!yt.da&&yt.capture==I){var ae=yt.listener,On=yt.ha||yt.src;yt.fa&&pt(v.i,yt),X=ae.call(On,B)!==!1&&X}}return X&&!B.defaultPrevented}function fr(v,A,I){if(typeof v=="function")I&&(v=m(v,I));else if(v&&typeof v.handleEvent=="function")v=m(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:o.setTimeout(v,A||0)}function X0(v){v.g=fr(()=>{v.g=null,v.i&&(v.i=!1,X0(v))},v.l);const A=v.h;v.h=null,v.m.apply(null,A)}class oy extends gt{constructor(A,I){super(),this.m=A,this.l=I,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:X0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $o(v){gt.call(this),this.h=v,this.g={}}x($o,gt);var Qo=[];function Zo(v){H(v.g,function(A,I){this.g.hasOwnProperty(I)&&ki(A)},v),v.g={}}$o.prototype.N=function(){$o.aa.N.call(this),Zo(this)},$o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Li=o.JSON.stringify,Ml=o.JSON.parse,Jo=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Vh(){}Vh.prototype.h=null;function Bh(v){return v.h||(v.h=v.i())}function Fh(){}var Us={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function js(){dt.call(this,"d")}x(js,dt);function Uh(){dt.call(this,"c")}x(Uh,dt);var ts={},jh=null;function Da(){return jh=jh||new sn}ts.La="serverreachability";function Pl(v){dt.call(this,ts.La,v)}x(Pl,dt);function Ra(v){const A=Da();Ae(A,new Pl(A))}ts.STAT_EVENT="statevent";function K0(v,A){dt.call(this,ts.STAT_EVENT,v),this.stat=A}x(K0,dt);function Ye(v){const A=Da();Ae(A,new K0(A,v))}ts.Ma="timingevent";function Rn(v,A){dt.call(this,ts.Ma,v),this.size=A}x(Rn,dt);function bn(v,A){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},A)}function hi(){this.g=!0}hi.prototype.xa=function(){this.g=!1};function zh(v,A,I,B,X,nt){v.info(function(){if(v.g)if(nt)for(var yt="",ae=nt.split("&"),On=0;On<ae.length;On++){var oe=ae[On].split("=");if(1<oe.length){var Wn=oe[0];oe=oe[1];var Mn=Wn.split("_");yt=2<=Mn.length&&Mn[1]=="type"?yt+(Wn+"="+oe+"&"):yt+(Wn+"=redacted&")}}else yt=null;else yt=nt;return"XMLHTTP REQ ("+B+") [attempt "+X+"]: "+A+`
`+I+`
`+yt})}function cy(v,A,I,B,X,nt,yt){v.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+X+"]: "+A+`
`+I+`
`+nt+" "+yt})}function Oa(v,A,I,B){v.info(function(){return"XMLHTTP TEXT ("+A+"): "+tc(v,I)+(B?" "+B:"")})}function $0(v,A){v.info(function(){return"TIMEOUT: "+A})}hi.prototype.info=function(){};function tc(v,A){if(!v.g)return A;if(!A)return null;try{var I=JSON.parse(A);if(I){for(v=0;v<I.length;v++)if(Array.isArray(I[v])){var B=I[v];if(!(2>B.length)){var X=B[1];if(Array.isArray(X)&&!(1>X.length)){var nt=X[0];if(nt!="noop"&&nt!="stop"&&nt!="close")for(var yt=1;yt<X.length;yt++)X[yt]=""}}}}return Li(I)}catch{return A}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},es;function ns(){}x(ns,Vh),ns.prototype.g=function(){return new XMLHttpRequest},ns.prototype.i=function(){return{}},es=new ns;function Sr(v,A,I,B){this.j=v,this.i=A,this.l=I,this.R=B||1,this.U=new $o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dn}function dn(){this.i=null,this.g="",this.h=!1}var Hh={},Nl={};function Vi(v,A,I){v.L=1,v.v=sc($r(A)),v.m=I,v.P=!0,Hs(v,null)}function Hs(v,A){v.F=Date.now(),ec(v),v.A=$r(v.v);var I=v.A,B=v.R;Array.isArray(B)||(B=[String(B)]),Kh(I.i,"t",B),v.C=0,I=v.j.J,v.h=new dn,v.g=fg(v.j,I?A:null,!v.m),0<v.O&&(v.M=new oy(m(v.Y,v,v.g),v.O)),A=v.U,I=v.g,B=v.ca;var X="readystatechange";Array.isArray(X)||(X&&(Qo[0]=X.toString()),X=Qo);for(var nt=0;nt<X.length;nt++){var yt=Tr(I,X[nt],B||A.handleEvent,!1,A.h||A);if(!yt)break;A.g[yt.key]=yt}A=v.H?C(v.H):{},v.m?(v.u||(v.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,A)):(v.u="GET",v.g.ea(v.A,v.u,null,A)),Ra(),zh(v.i,v.u,v.A,v.l,v.R,v.m)}Sr.prototype.ca=function(v){v=v.target;const A=this.M;A&&pi(v)==3?A.j():this.Y(v)},Sr.prototype.Y=function(v){try{if(v==this.g)t:{const Mn=pi(this.g);var A=this.g.Ba();const Qs=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||ig(this.g)))){this.J||Mn!=4||A==7||(A==8||0>=Qs?Ra(3):Ra(2)),Pa(this);var I=this.g.Z();this.X=I;e:if(Q0(this)){var B=ig(this.g);v="";var X=B.length,nt=pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),rs(this);var yt="";break e}this.h.i=new o.TextDecoder}for(A=0;A<X;A++)this.h.h=!0,v+=this.h.i.decode(B[A],{stream:!(nt&&A==X-1)});B.length=0,this.h.g+=v,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=I==200,cy(this.i,this.u,this.A,this.l,this.R,Mn,I),this.o){if(this.T&&!this.K){e:{if(this.g){var ae,On=this.g;if((ae=On.g?On.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(ae)){var oe=ae;break e}}oe=null}if(I=oe)Oa(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nc(this,I);else{this.o=!1,this.s=3,Ye(12),nr(this),rs(this);break t}}if(this.P){I=!0;let rr;for(;!this.J&&this.C<yt.length;)if(rr=Z0(this,yt),rr==Nl){Mn==4&&(this.s=4,Ye(14),I=!1),Oa(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==Hh){this.s=4,Ye(15),Oa(this.i,this.l,yt,"[Invalid Chunk]"),I=!1;break}else Oa(this.i,this.l,rr,null),nc(this,rr);if(Q0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||yt.length!=0||this.h.h||(this.s=1,Ye(16),I=!1),this.o=this.o&&I,!I)Oa(this.i,this.l,yt,"[Invalid Chunked Response]"),nr(this),rs(this);else if(0<yt.length&&!this.W){this.W=!0;var Wn=this.j;Wn.g==this&&Wn.ba&&!Wn.M&&(Wn.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),dc(Wn),Wn.M=!0,Ye(11))}}else Oa(this.i,this.l,yt,null),nc(this,yt);Mn==4&&nr(this),this.o&&!this.J&&(Mn==4?lg(this.j,this):(this.o=!1,ec(this)))}else dy(this.g),I==400&&0<yt.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),nr(this),rs(this)}}}catch{}finally{}};function Q0(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function Z0(v,A){var I=v.C,B=A.indexOf(`
`,I);return B==-1?Nl:(I=Number(A.substring(I,B)),isNaN(I)?Hh:(B+=1,B+I>A.length?Nl:(A=A.slice(B,B+I),v.C=B+I,A)))}Sr.prototype.cancel=function(){this.J=!0,nr(this)};function ec(v){v.S=Date.now()+v.I,J0(v,v.I)}function J0(v,A){if(v.B!=null)throw Error("WatchDog timer not null");v.B=bn(m(v.ba,v),A)}function Pa(v){v.B&&(o.clearTimeout(v.B),v.B=null)}Sr.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?($0(this.i,this.A),this.L!=2&&(Ra(),Ye(17)),nr(this),this.s=2,rs(this)):J0(this,this.S-v)};function rs(v){v.j.G==0||v.J||lg(v.j,v)}function nr(v){Pa(v);var A=v.M;A&&typeof A.ma=="function"&&A.ma(),v.M=null,Zo(v.U),v.g&&(A=v.g,v.g=null,A.abort(),A.ma())}function nc(v,A){try{var I=v.j;if(I.G!=0&&(I.g==v||Gh(I.h,v))){if(!v.K&&Gh(I.h,v)&&I.G==3){try{var B=I.Da.g.parse(A)}catch{B=null}if(Array.isArray(B)&&B.length==3){var X=B;if(X[0]==0){t:if(!I.u){if(I.g)if(I.g.F+3e3<v.F)ql(I),Gl(I);else break t;tf(I),Ye(18)}}else I.za=X[1],0<I.za-I.T&&37500>X[2]&&I.F&&I.v==0&&!I.C&&(I.C=bn(m(I.Za,I),6e3));if(1>=Ll(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else $s(I,11)}else if((v.K||I.g==v)&&ql(I),!S(A))for(X=I.Da.g.parse(A),A=0;A<X.length;A++){let oe=X[A];if(I.T=oe[0],oe=oe[1],I.G==2)if(oe[0]=="c"){I.K=oe[1],I.ia=oe[2];const Wn=oe[3];Wn!=null&&(I.la=Wn,I.j.info("VER="+I.la));const Mn=oe[4];Mn!=null&&(I.Aa=Mn,I.j.info("SVER="+I.Aa));const Qs=oe[5];Qs!=null&&typeof Qs=="number"&&0<Qs&&(B=1.5*Qs,I.L=B,I.j.info("backChannelRequestTimeoutMs_="+B)),B=I;const rr=v.g;if(rr){const us=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var nt=B.h;nt.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||(nt.j=nt.l,nt.g=new Set,nt.h&&(Vl(nt,nt.h),nt.h=null))}if(B.D){const nf=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;nf&&(B.ya=nf,Pe(B.I,B.D,nf))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-v.F,I.j.info("Handshake RTT: "+I.R+"ms")),B=I;var yt=v;if(B.qa=hg(B,B.J?B.ia:null,B.W),yt.K){Ir(B.h,yt);var ae=yt,On=B.L;On&&(ae.I=On),ae.B&&(Pa(ae),ec(ae)),B.g=yt}else og(B);0<I.i.length&&Wl(I)}else oe[0]!="stop"&&oe[0]!="close"||$s(I,7);else I.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?$s(I,7):Zh(I):oe[0]!="noop"&&I.l&&I.l.ta(oe),I.v=0)}}Ra(4)}catch{}}var tg=class{constructor(v,A){this.g=v,this.map=A}};function Gs(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kl(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Ll(v){return v.h?1:v.g?v.g.size:0}function Gh(v,A){return v.h?v.h==A:v.g?v.g.has(A):!1}function Vl(v,A){v.g?v.g.add(A):v.h=A}function Ir(v,A){v.h&&v.h==A?v.h=null:v.g&&v.g.has(A)&&v.g.delete(A)}Gs.prototype.cancel=function(){if(this.i=Wh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Wh(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let A=v.i;for(const I of v.g.values())A=A.concat(I.D);return A}return b(v.i)}function ly(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(l(v)){for(var A=[],I=v.length,B=0;B<I;B++)A.push(v[B]);return A}A=[],I=0;for(B in v)A[I++]=v[B];return A}function Bl(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(l(v)||typeof v=="string"){var A=[];v=v.length;for(var I=0;I<v;I++)A.push(I);return A}A=[],I=0;for(const B in v)A[I++]=B;return A}}}function qh(v,A){if(v.forEach&&typeof v.forEach=="function")v.forEach(A,void 0);else if(l(v)||typeof v=="string")Array.prototype.forEach.call(v,A,void 0);else for(var I=Bl(v),B=ly(v),X=B.length,nt=0;nt<X;nt++)A.call(void 0,B[nt],I&&I[nt],v)}var rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uy(v,A){if(v){v=v.split("&");for(var I=0;I<v.length;I++){var B=v[I].indexOf("="),X=null;if(0<=B){var nt=v[I].substring(0,B);X=v[I].substring(B+1)}else nt=v[I];A(nt,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function En(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof En){this.h=v.h,ic(this,v.j),this.o=v.o,this.g=v.g,Na(this,v.s),this.l=v.l;var A=v.i,I=new qs;I.i=A.i,A.g&&(I.g=new Map(A.g),I.h=A.h),Ws(this,I),this.m=v.m}else v&&(A=String(v).match(rc))?(this.h=!1,ic(this,A[1]||"",!0),this.o=fi(A[2]||""),this.g=fi(A[3]||"",!0),Na(this,A[4]),this.l=fi(A[5]||"",!0),Ws(this,A[6]||"",!0),this.m=fi(A[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}En.prototype.toString=function(){var v=[],A=this.j;A&&v.push(ac(A,Yh,!0),":");var I=this.g;return(I||A=="file")&&(v.push("//"),(A=this.o)&&v.push(ac(A,Yh,!0),"@"),v.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&v.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&v.push("/"),v.push(ac(I,I.charAt(0)=="/"?hy:Xh,!0))),(I=this.i.toString())&&v.push("?",I),(I=this.m)&&v.push("#",ac(I,Fl)),v.join("")};function $r(v){return new En(v)}function ic(v,A,I){v.j=I?fi(A,!0):A,v.j&&(v.j=v.j.replace(/:$/,""))}function Na(v,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);v.s=A}else v.s=null}function Ws(v,A,I){A instanceof qs?(v.i=A,ng(v.i,v.h)):(I||(A=ac(A,fy)),v.i=new qs(A,v.h))}function Pe(v,A,I){v.i.set(A,I)}function sc(v){return Pe(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function fi(v,A){return v?A?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function ac(v,A,I){return typeof v=="string"?(v=encodeURI(v).replace(A,eg),I&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function eg(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Yh=/[#\/\?@]/g,Xh=/[#\?:]/g,hy=/[#\?]/g,fy=/[#\?@]/g,Fl=/#/g;function qs(v,A){this.h=this.g=null,this.i=v||null,this.j=!!A}function di(v){v.g||(v.g=new Map,v.h=0,v.i&&uy(v.i,function(A,I){v.add(decodeURIComponent(A.replace(/\+/g," ")),I)}))}n=qs.prototype,n.add=function(v,A){di(this),this.i=null,v=is(this,v);var I=this.g.get(v);return I||this.g.set(v,I=[]),I.push(A),this.h+=1,this};function Ys(v,A){di(v),A=is(v,A),v.g.has(A)&&(v.i=null,v.h-=v.g.get(A).length,v.g.delete(A))}function Xs(v,A){return di(v),A=is(v,A),v.g.has(A)}n.forEach=function(v,A){di(this),this.g.forEach(function(I,B){I.forEach(function(X){v.call(A,X,B,this)},this)},this)},n.na=function(){di(this);const v=Array.from(this.g.values()),A=Array.from(this.g.keys()),I=[];for(let B=0;B<A.length;B++){const X=v[B];for(let nt=0;nt<X.length;nt++)I.push(A[B])}return I},n.V=function(v){di(this);let A=[];if(typeof v=="string")Xs(this,v)&&(A=A.concat(this.g.get(is(this,v))));else{v=Array.from(this.g.values());for(let I=0;I<v.length;I++)A=A.concat(v[I])}return A},n.set=function(v,A){return di(this),this.i=null,v=is(this,v),Xs(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[A]),this.h+=1,this},n.get=function(v,A){return v?(v=this.V(v),0<v.length?String(v[0]):A):A};function Kh(v,A,I){Ys(v,A),0<I.length&&(v.i=null,v.g.set(is(v,A),b(I)),v.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],A=Array.from(this.g.keys());for(var I=0;I<A.length;I++){var B=A[I];const nt=encodeURIComponent(String(B)),yt=this.V(B);for(B=0;B<yt.length;B++){var X=nt;yt[B]!==""&&(X+="="+encodeURIComponent(String(yt[B]))),v.push(X)}}return this.i=v.join("&")};function is(v,A){return A=String(A),v.j&&(A=A.toLowerCase()),A}function ng(v,A){A&&!v.j&&(di(v),v.i=null,v.g.forEach(function(I,B){var X=B.toLowerCase();B!=X&&(Ys(this,B),Kh(this,X,I))},v)),v.j=A}function oc(v,A){const I=new hi;if(o.Image){const B=new Image;B.onload=y(gi,I,"TestLoadImage: loaded",!0,A,B),B.onerror=y(gi,I,"TestLoadImage: error",!1,A,B),B.onabort=y(gi,I,"TestLoadImage: abort",!1,A,B),B.ontimeout=y(gi,I,"TestLoadImage: timeout",!1,A,B),o.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=v}else A(!1)}function Bi(v,A){const I=new hi,B=new AbortController,X=setTimeout(()=>{B.abort(),gi(I,"TestPingServer: timeout",!1,A)},1e4);fetch(v,{signal:B.signal}).then(nt=>{clearTimeout(X),nt.ok?gi(I,"TestPingServer: ok",!0,A):gi(I,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(X),gi(I,"TestPingServer: error",!1,A)})}function gi(v,A,I,B,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),B(I)}catch{}}function cc(){this.g=new Jo}function ss(v,A,I){const B=I||"";try{qh(v,function(X,nt){let yt=X;h(X)&&(yt=Li(X)),A.push(B+nt+"="+encodeURIComponent(yt))})}catch(X){throw A.push(B+"type="+encodeURIComponent("_badmap")),X}}function ka(v){this.l=v.Ub||null,this.j=v.eb||!1}x(ka,Vh),ka.prototype.g=function(){return new Ks(this.l,this.j)},ka.prototype.i=function(v){return function(){return v}}({});function Ks(v,A){sn.call(this),this.D=v,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ks,sn),n=Ks.prototype,n.open=function(v,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=A,this.readyState=1,os(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(A.body=v),(this.D||o).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$h(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function $h(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var A=v.value?v.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!v.done}))&&(this.response=this.responseText+=A)}v.done?as(this):os(this),this.readyState==3&&$h(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,as(this))},n.Qa=function(v){this.g&&(this.response=v,as(this))},n.ga=function(){this.g&&as(this)};function as(v){v.readyState=4,v.l=null,v.j=null,v.v=null,os(v)}n.setRequestHeader=function(v,A){this.u.append(v,A)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],A=this.h.entries();for(var I=A.next();!I.done;)I=I.value,v.push(I[0]+": "+I[1]),I=A.next();return v.join(`\r
`)};function os(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Qh(v){let A="";return H(v,function(I,B){A+=B,A+=":",A+=I,A+=`\r
`}),A}function Gn(v,A,I){t:{for(B in I){var B=!1;break t}B=!0}B||(I=Qh(I),typeof v=="string"?I!=null&&encodeURIComponent(String(I)):Pe(v,A,I))}function xe(v){sn.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(xe,sn);var Ul=/^https?$/i,lc=["POST","PUT"];n=xe.prototype,n.Ha=function(v){this.J=v},n.ea=function(v,A,I,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);A=A?A.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():es.g(),this.v=this.o?Bh(this.o):Bh(es),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(A,String(v),!0),this.B=!1}catch(nt){rg(this,nt);return}if(v=I||"",I=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var X in B)I.set(X,B[X]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const nt of B.keys())I.set(nt,B.get(nt));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(I.keys()).find(nt=>nt.toLowerCase()=="content-type"),X=o.FormData&&v instanceof o.FormData,!(0<=Array.prototype.indexOf.call(lc,A,void 0))||B||X||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[nt,yt]of I)this.g.setRequestHeader(nt,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uc(this),this.u=!0,this.g.send(v),this.u=!1}catch(nt){rg(this,nt)}};function rg(v,A){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=A,v.m=5,jl(v),cs(v)}function jl(v){v.A||(v.A=!0,Ae(v,"complete"),Ae(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Ae(this,"complete"),Ae(this,"abort"),cs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cs(this,!0)),xe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zl(this):this.bb())},n.bb=function(){zl(this)};function zl(v){if(v.h&&typeof a<"u"&&(!v.v[1]||pi(v)!=4||v.Z()!=2)){if(v.u&&pi(v)==4)fr(v.Ea,0,v);else if(Ae(v,"readystatechange"),pi(v)==4){v.h=!1;try{const yt=v.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var I;if(!(I=A)){var B;if(B=yt===0){var X=String(v.D).match(rc)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),B=!Ul.test(X?X.toLowerCase():"")}I=B}if(I)Ae(v,"complete"),Ae(v,"success");else{v.m=6;try{var nt=2<pi(v)?v.g.statusText:""}catch{nt=""}v.l=nt+" ["+v.Z()+"]",jl(v)}}finally{cs(v)}}}}function cs(v,A){if(v.g){uc(v);const I=v.g,B=v.v[0]?()=>{}:null;v.g=null,v.v=null,A||Ae(v,"ready");try{I.onreadystatechange=B}catch{}}}function uc(v){v.I&&(o.clearTimeout(v.I),v.I=null)}n.isActive=function(){return!!this.g};function pi(v){return v.g?v.g.readyState:0}n.Z=function(){try{return 2<pi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var A=this.g.responseText;return v&&A.indexOf(v)==0&&(A=A.substring(v.length)),Ml(A)}};function ig(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function dy(v){const A={};v=(v.g&&2<=pi(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<v.length;B++){if(S(v[B]))continue;var I=j(v[B]);const X=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const nt=A[X]||[];A[X]=nt,nt.push(I)}M(A,function(B){return B.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hc(v,A,I){return I&&I.internalChannelParams&&I.internalChannelParams[v]||A}function Hl(v){this.Aa=0,this.i=[],this.j=new hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hc("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hc("baseRetryDelayMs",5e3,v),this.cb=hc("retryDelaySeedMs",1e4,v),this.Wa=hc("forwardChannelMaxRetries",2,v),this.wa=hc("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new Gs(v&&v.concurrentRequestLimit),this.Da=new cc,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Hl.prototype,n.la=8,n.G=1,n.connect=function(v,A,I,B){Ye(0),this.W=v,this.H=A||{},I&&B!==void 0&&(this.H.OSID=I,this.H.OAID=B),this.F=this.X,this.I=hg(this,null,this.W),Wl(this)};function Zh(v){if(sg(v),v.G==3){var A=v.U++,I=$r(v.I);if(Pe(I,"SID",v.K),Pe(I,"RID",A),Pe(I,"TYPE","terminate"),fc(v,I),A=new Sr(v,v.j,A),A.L=2,A.v=sc($r(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(A.v.toString(),"")}catch{}!I&&o.Image&&(new Image().src=A.v,I=!0),I||(A.g=fg(A.j,null),A.g.ea(A.v)),A.F=Date.now(),ec(A)}ug(v)}function Gl(v){v.g&&(dc(v),v.g.cancel(),v.g=null)}function sg(v){Gl(v),v.u&&(o.clearTimeout(v.u),v.u=null),ql(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&o.clearTimeout(v.s),v.s=null)}function Wl(v){if(!kl(v.h)&&!v.s){v.s=!0;var A=v.Ga;at||W(),mt||(at(),mt=!0),St.add(A,v),v.B=0}}function gy(v,A){return Ll(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=A.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=bn(m(v.Ga,v,A),ef(v,v.B)),v.B++,!0)}n.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const X=new Sr(this,this.j,v);let nt=this.o;if(this.S&&(nt?(nt=C(nt),L(nt,this.S)):nt=this.S),this.m!==null||this.O||(X.H=nt,nt=null),this.P)t:{for(var A=0,I=0;I<this.i.length;I++){e:{var B=this.i[I];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break e}B=void 0}if(B===void 0)break;if(A+=B,4096<A){A=I;break t}if(A===4096||I===this.i.length-1){A=I+1;break t}}A=1e3}else A=1e3;A=ag(this,X,A),I=$r(this.I),Pe(I,"RID",v),Pe(I,"CVER",22),this.D&&Pe(I,"X-HTTP-Session-Id",this.D),fc(this,I),nt&&(this.O?A="headers="+encodeURIComponent(String(Qh(nt)))+"&"+A:this.m&&Gn(I,this.m,nt)),Vl(this.h,X),this.Ua&&Pe(I,"TYPE","init"),this.P?(Pe(I,"$req",A),Pe(I,"SID","null"),X.T=!0,Vi(X,I,null)):Vi(X,I,A),this.G=2}}else this.G==3&&(v?Jh(this,v):this.i.length==0||kl(this.h)||Jh(this))};function Jh(v,A){var I;A?I=A.l:I=v.U++;const B=$r(v.I);Pe(B,"SID",v.K),Pe(B,"RID",I),Pe(B,"AID",v.T),fc(v,B),v.m&&v.o&&Gn(B,v.m,v.o),I=new Sr(v,v.j,I,v.B+1),v.m===null&&(I.H=v.o),A&&(v.i=A.D.concat(v.i)),A=ag(v,I,1e3),I.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Vl(v.h,I),Vi(I,B,A)}function fc(v,A){v.H&&H(v.H,function(I,B){Pe(A,B,I)}),v.l&&qh({},function(I,B){Pe(A,B,I)})}function ag(v,A,I){I=Math.min(v.i.length,I);var B=v.l?m(v.l.Na,v.l,v):null;t:{var X=v.i;let nt=-1;for(;;){const yt=["count="+I];nt==-1?0<I?(nt=X[0].g,yt.push("ofs="+nt)):nt=0:yt.push("ofs="+nt);let ae=!0;for(let On=0;On<I;On++){let oe=X[On].g;const Wn=X[On].map;if(oe-=nt,0>oe)nt=Math.max(0,X[On].g-100),ae=!1;else try{ss(Wn,yt,"req"+oe+"_")}catch{B&&B(Wn)}}if(ae){B=yt.join("&");break t}}}return v=v.i.splice(0,I),A.D=v,B}function og(v){if(!v.g&&!v.u){v.Y=1;var A=v.Fa;at||W(),mt||(at(),mt=!0),St.add(A,v),v.v=0}}function tf(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=bn(m(v.Fa,v),ef(v,v.v)),v.v++,!0)}n.Fa=function(){if(this.u=null,cg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=bn(m(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),Gl(this),cg(this))};function dc(v){v.A!=null&&(o.clearTimeout(v.A),v.A=null)}function cg(v){v.g=new Sr(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var A=$r(v.qa);Pe(A,"RID","rpc"),Pe(A,"SID",v.K),Pe(A,"AID",v.T),Pe(A,"CI",v.F?"0":"1"),!v.F&&v.ja&&Pe(A,"TO",v.ja),Pe(A,"TYPE","xmlhttp"),fc(v,A),v.m&&v.o&&Gn(A,v.m,v.o),v.L&&(v.g.I=v.L);var I=v.g;v=v.ia,I.L=1,I.v=sc($r(A)),I.m=null,I.P=!0,Hs(I,v)}n.Za=function(){this.C!=null&&(this.C=null,Gl(this),tf(this),Ye(19))};function ql(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function lg(v,A){var I=null;if(v.g==A){ql(v),dc(v),v.g=null;var B=2}else if(Gh(v.h,A))I=A.D,Ir(v.h,A),B=1;else return;if(v.G!=0){if(A.o)if(B==1){I=A.m?A.m.length:0,A=Date.now()-A.F;var X=v.B;B=Da(),Ae(B,new Rn(B,I)),Wl(v)}else og(v);else if(X=A.s,X==3||X==0&&0<A.X||!(B==1&&gy(v,A)||B==2&&tf(v)))switch(I&&0<I.length&&(A=v.h,A.i=A.i.concat(I)),X){case 1:$s(v,5);break;case 4:$s(v,10);break;case 3:$s(v,6);break;default:$s(v,2)}}}function ef(v,A){let I=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(I*=2),I*A}function $s(v,A){if(v.j.info("Error code "+A),A==2){var I=m(v.fb,v),B=v.Xa;const X=!B;B=new En(B||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ic(B,"https"),sc(B),X?oc(B.toString(),I):Bi(B.toString(),I)}else Ye(2);v.G=0,v.l&&v.l.sa(A),ug(v),sg(v)}n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function ug(v){if(v.G=0,v.ka=[],v.l){const A=Wh(v.h);(A.length!=0||v.i.length!=0)&&(E(v.ka,A),E(v.ka,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.ra()}}function hg(v,A,I){var B=I instanceof En?$r(I):new En(I);if(B.g!="")A&&(B.g=A+"."+B.g),Na(B,B.s);else{var X=o.location;B=X.protocol,A=A?A+"."+X.hostname:X.hostname,X=+X.port;var nt=new En(null);B&&ic(nt,B),A&&(nt.g=A),X&&Na(nt,X),I&&(nt.l=I),B=nt}return I=v.D,A=v.ya,I&&A&&Pe(B,I,A),Pe(B,"VER",v.la),fc(v,B),B}function fg(v,A,I){if(A&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=v.Ca&&!v.pa?new xe(new ka({eb:I})):new xe(v.pa),A.Ha(v.J),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function dg(){}n=dg.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yl(){}Yl.prototype.g=function(v,A){return new Cr(v,A)};function Cr(v,A){sn.call(this),this.g=new Hl(A),this.l=v,this.h=A&&A.messageUrlParams||null,v=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(v?v["X-WebChannel-Content-Type"]=A.messageContentType:v={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(v?v["X-WebChannel-Client-Profile"]=A.va:v={"X-WebChannel-Client-Profile":A.va}),this.g.S=v,(v=A&&A.Sb)&&!S(v)&&(this.g.m=v),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!S(A)&&(this.g.D=A,v=this.h,v!==null&&A in v&&(v=this.h,A in v&&delete v[A])),this.j=new ls(this)}x(Cr,sn),Cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cr.prototype.close=function(){Zh(this.g)},Cr.prototype.o=function(v){var A=this.g;if(typeof v=="string"){var I={};I.__data__=v,v=I}else this.u&&(I={},I.__data__=Li(v),v=I);A.i.push(new tg(A.Ya++,v)),A.G==3&&Wl(A)},Cr.prototype.N=function(){this.g.l=null,delete this.j,Zh(this.g),delete this.g,Cr.aa.N.call(this)};function gg(v){js.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var A=v.__sm__;if(A){t:{for(const I in A){v=I;break t}v=void 0}(this.i=v)&&(v=this.i,A=A!==null&&v in A?A[v]:void 0),this.data=A}else this.data=v}x(gg,js);function pg(){Uh.call(this),this.status=1}x(pg,Uh);function ls(v){this.g=v}x(ls,dg),ls.prototype.ua=function(){Ae(this.g,"a")},ls.prototype.ta=function(v){Ae(this.g,new gg(v))},ls.prototype.sa=function(v){Ae(this.g,new pg)},ls.prototype.ra=function(){Ae(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,Cr.prototype.send=Cr.prototype.o,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,u8=function(){return new Yl},l8=function(){return Da()},c8=ts,a2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,c1=Ma,zs.COMPLETE="complete",o8=zs,Fh.EventType=Us,Us.OPEN="a",Us.CLOSE="b",Us.ERROR="c",Us.MESSAGE="d",sn.prototype.listen=sn.prototype.K,md=Fh,xe.prototype.listenOnce=xe.prototype.L,xe.prototype.getLastError=xe.prototype.Ka,xe.prototype.getLastErrorCode=xe.prototype.Ba,xe.prototype.getStatus=xe.prototype.Z,xe.prototype.getResponseJson=xe.prototype.Oa,xe.prototype.getResponseText=xe.prototype.oa,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Ha,a8=xe}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});const iD="@firebase/firestore",sD="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=new bm("@firebase/firestore");function Mu(){return pl.logLevel}function ft(n,...t){if(pl.logLevel<=ie.DEBUG){const e=t.map(hb);pl.debug(`Firestore (${Rh}): ${n}`,...e)}}function yn(n,...t){if(pl.logLevel<=ie.ERROR){const e=t.map(hb);pl.error(`Firestore (${Rh}): ${n}`,...e)}}function h0(n,...t){if(pl.logLevel<=ie.WARN){const e=t.map(hb);pl.warn(`Firestore (${Rh}): ${n}`,...e)}}function hb(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,h8(n,r,e)}function h8(n,t,e){let r=`FIRESTORE (${Rh}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw yn(r),new Error(r)}function Rt(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||h8(t,i,r)}function Ct(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends Ji{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NX{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class kX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(yr.UNAUTHENTICATED))}shutdown(){}}class LX{constructor(t){this.t=t,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Rt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,e(l)):Promise.resolve();let s=new Ms;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ms,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ms)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new NX(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Rt(t===null||typeof t=="string",2055,{h:t}),new yr(t)}}class VX{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=yr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BX{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new VX(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aD{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FX{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ii(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Rt(this.o===void 0,3512);const r=s=>{s.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ft("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new aD(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Rt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new aD(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UX(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=UX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<e&&(r+=t.charAt(i[s]%62))}return r}}function Gt(n,t){return n<t?-1:n>t?1:0}function o2(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const i=n.charAt(r),s=t.charAt(r);if(i!==s)return $_(i)===$_(s)?Gt(i,s):$_(i)?1:-1}return Gt(n.length,t.length)}const jX=55296,zX=57343;function $_(n){const t=n.charCodeAt(0);return t>=jX&&t<=zX}function ih(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function f8(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="__name__";class _s{constructor(t,e,r){e===void 0?e=0:e>t.length&&At(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&At(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return _s.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof _s?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const s=_s.compareSegments(t.get(i),e.get(i));if(s!==0)return s}return Gt(t.length,e.length)}static compareSegments(t,e){const r=_s.isNumericId(t),i=_s.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?_s.extractNumericId(t).compare(_s.extractNumericId(e)):o2(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Co.fromString(t.substring(4,t.length-2))}}class be extends _s{construct(t,e,r){return new be(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(ut.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new be(e)}static emptyPath(){return new be([])}}const HX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends _s{construct(t,e,r){return new tn(t,e,r)}static isValidIdentifier(t){return HX.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oD}static keyField(){return new tn([oD])}static fromServerFormat(t){const e=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(ut.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let a=!1;for(;i<t.length;){const o=t[i];if(o==="\\"){if(i+1===t.length)throw new _t(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new _t(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new _t(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tn(e)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.path=t}static fromPath(t){return new xt(be.fromString(t))}static fromName(t){return new xt(be.fromString(t).popFirst(5))}static empty(){return new xt(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&be.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return be.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xt(new be(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(n,t,e){if(!e)throw new _t(ut.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function GX(n,t,e,r){if(t===!0&&r===!0)throw new _t(ut.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function cD(n){if(!xt.isDocumentKey(n))throw new _t(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lD(n){if(xt.isDocumentKey(n))throw new _t(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function g8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function db(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":At(12329,{type:typeof n})}function Ls(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new _t(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=db(n);throw new _t(ut.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n,t){const e={typeString:n};return t&&(e.value=t),e}function k0(n,t){if(!g8(n))throw new _t(ut.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){e=`Expected '${r}' field to equal '${s.value}'`;break}}if(e)throw new _t(ut.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=-62135596800,hD=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(t){return Oe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*hD);return new Oe(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _t(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _t(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<uD)throw new _t(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hD}_compareTo(t){return this.seconds===t.seconds?Gt(this.nanoseconds,t.nanoseconds):Gt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(k0(t,Oe._jsonSchema))return new Oe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-uD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:Cn("string",Oe._jsonSchemaVersion),seconds:Cn("number"),nanoseconds:Cn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{static fromTimestamp(t){return new Pt(t)}static min(){return new Pt(new Oe(0,0))}static max(){return new Pt(new Oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=-1;class q1{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function c2(n){return n.fields.find(t=>t.kind===2)}function Uc(n){return n.fields.filter(t=>t.kind!==2)}q1.UNKNOWN_ID=-1;class l1{constructor(t,e){this.fieldPath=t,this.kind=e}}class f0{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new f0(0,li.min())}}function p8(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(r===1e9?new Oe(e+1,0):new Oe(e,r));return new li(i,xt.empty(),t)}function m8(n){return new li(n.readTime,n.key,sh)}class li{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new li(Pt.min(),xt.empty(),sh)}static max(){return new li(Pt.max(),xt.empty(),sh)}}function gb(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=xt.comparator(n.documentKey,t.documentKey),e!==0?e:Gt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(n){if(n.code!==ut.FAILED_PRECONDITION||n.message!==y8)throw n;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&At(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof K?e:K.resolve(e)}catch(e){return K.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):K.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):K.reject(e)}static resolve(t){return new K((e,r)=>{e(t)})}static reject(t){return new K((e,r)=>{r(t)})}static waitFor(t){return new K((e,r)=>{let i=0,s=0,a=!1;t.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&e()},l=>r(l))}),a=!0,s===i&&e()})}static or(t){let e=K.resolve(!1);for(const r of t)e=e.next(i=>i?K.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,s)=>{r.push(e.call(this,i,s))}),this.waitFor(r)}static mapArray(t,e){return new K((r,i)=>{const s=t.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(d=>{a[h]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(t,e){return new K((r,i)=>{const s=()=>{t()===!0?e().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="SimpleDb";class Cm{static open(t,e,r,i){try{return new Cm(e,t.transaction(i,r))}catch(s){throw new Vd(e,s)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Ms,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Vd(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=pb(r.target.error);this.S.reject(new Vd(t,i))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(ft(si,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new qX(e)}}class Do{static delete(t){return ft(si,"Removing database:",t),Gc(UM().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!Kw())return!1;if(Do.F())return!0;const t=zn(),e=Do.M(t),r=0<e&&e<10,i=_8(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,Do.M(zn())===12.2&&yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(ft(si,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;e(a)},i.onblocked=()=>{r(new Vd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new _t(ut.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new _t(ut.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Vd(t,a))},i.onupgradeneeded=s=>{ft(si,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next(()=>{ft(si,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,i){const s=e==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(t);const o=Cm.open(this.db,t,s?"readonly":"readwrite",r),l=i(o).next(h=>(o.C(),h)).catch(h=>(o.abort(h),K.reject(h))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,h=l.name!=="FirebaseError"&&a<3;if(ft(si,"Transaction failed with error:",l.message,"Retrying:",h),this.close(),!h)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _8(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class WX{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return Gc(this.U.delete())}}class Vd extends _t{constructor(t,e){super(ut.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function qo(n){return n.name==="IndexedDbTransactionError"}class qX{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(ft(si,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(ft(si,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Gc(r)}add(t){return ft(si,"ADD",this.store.name,t,t),Gc(this.store.add(t))}get(t){return Gc(this.store.get(t)).next(e=>(e===void 0&&(e=null),ft(si,"GET",this.store.name,t,e),e))}delete(t){return ft(si,"DELETE",this.store.name,t),Gc(this.store.delete(t))}count(){return ft(si,"COUNT",this.store.name),Gc(this.store.count())}J(t,e){const r=this.options(t,e),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new K((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(r),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new K((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}Z(t,e){ft(si,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const i=this.cursor(r);return this.H(i,(s,a,o)=>o.delete())}ee(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.H(i,e)}te(t){const e=this.cursor({});return new K((r,i)=>{e.onerror=s=>{const a=pb(s.target.error);i(a)},e.onsuccess=s=>{const a=s.target.result;a?t(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(t,e){const r=[];return new K((i,s)=>{t.onerror=a=>{s(a.target.error)},t.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new WX(o),h=e(o.primaryKey,o.value,l);if(h instanceof K){const d=h.catch(g=>(l.done(),K.reject(g)));r.push(d)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}}).next(()=>K.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Gc(n){return new K((t,e)=>{n.onsuccess=r=>{const i=r.target.result;t(i)},n.onerror=r=>{const i=pb(r.target.error);e(i)}})}let fD=!1;function pb(n){const t=Do.M(zn());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new _t("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fD||(fD=!0,setTimeout(()=>{throw r},0)),r}}return n}const Bd="IndexBackfiller";class YX{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){ft(Bd,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ne.ie();ft(Bd,`Documents written: ${e}`)}catch(e){qo(e)?ft(Bd,"Ignoring IndexedDB error during index backfill: ",e):await Wo(e)}await this.re(6e4)})}}class XX{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.se(e,t))}se(t,e){const r=new Set;let i=e,s=!0;return K.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(a!==null&&!r.has(a))return ft(Bd,`Processing collection: ${a}`),this.oe(t,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>e-i)}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this._e(i,s)).next(o=>(ft(Bd,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(t,e,o))).next(()=>a.size)}))}_e(t,e){let r=t;return e.changes.forEach((i,s)=>{const a=m8(s);gb(a,r)>0&&(r=a)}),new li(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Gr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=-1;function Dm(n){return n==null}function d0(n){return n===0&&1/n==-1/0}function x8(n){return typeof n=="number"&&Number.isInteger(n)&&!d0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="";function Er(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=dD(t)),t=KX(n.get(e),t);return dD(t)}function KX(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":e+="";break;case Y1:e+="";break;default:e+=s}}return e}function dD(n){return n+Y1+""}function Es(n){const t=n.length;if(Rt(t>=2,64408,{path:n}),t===2)return Rt(n.charAt(0)===Y1&&n.charAt(1)==="",56145,{path:n}),be.emptyPath();const e=t-2,r=[];let i="";for(let s=0;s<t;){const a=n.indexOf(Y1,s);switch((a<0||a>e)&&At(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:At(61167,{path:n})}s=a+2}return new be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="remoteDocuments",L0="owner",Au="owner",g0="mutationQueues",$X="userId",qi="mutations",gD="batchId",Zc="userMutationsIndex",pD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n,t){return[n,Er(t)]}function w8(n,t,e){return[n,Er(t),e]}const QX={},ah="documentMutations",X1="remoteDocumentsV14",ZX=["prefixPath","collectionGroup","readTime","documentId"],h1="documentKeyIndex",JX=["prefixPath","collectionGroup","documentId"],b8="collectionGroupIndex",tK=["collectionGroup","readTime","prefixPath","documentId"],p0="remoteDocumentGlobal",l2="remoteDocumentGlobalKey",oh="targets",E8="queryTargetsIndex",eK=["canonicalId","targetId"],ch="targetDocuments",nK=["targetId","path"],mb="documentTargetsIndex",rK=["path","targetId"],K1="targetGlobalKey",sl="targetGlobal",m0="collectionParents",iK=["collectionId","parent"],lh="clientMetadata",sK="clientId",Rm="bundles",aK="bundleId",Om="namedQueries",oK="name",yb="indexConfiguration",cK="indexId",u2="collectionGroupIndex",lK="collectionGroup",Fd="indexState",uK=["indexId","uid"],A8="sequenceNumberIndex",hK=["uid","sequenceNumber"],Ud="indexEntries",fK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T8="documentKeyIndex",dK=["indexId","uid","orderedDocumentKey"],Mm="documentOverlays",gK=["userId","collectionPath","documentId"],h2="collectionPathOverlayIndex",pK=["userId","collectionPath","largestBatchId"],S8="collectionGroupOverlayIndex",mK=["userId","collectionGroup","largestBatchId"],vb="globals",yK="name",I8=[g0,qi,ah,jc,oh,L0,sl,ch,lh,p0,m0,Rm,Om],vK=[...I8,Mm],C8=[g0,qi,ah,X1,oh,L0,sl,ch,lh,p0,m0,Rm,Om,Mm],D8=C8,_b=[...D8,yb,Fd,Ud],_K=_b,R8=[..._b,vb],xK=R8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2 extends v8{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Hn(n,t){const e=Ct(n);return Do.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Yo(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function O8(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t,e){this.comparator=t,this.root=e||ur.EMPTY}insert(t,e){return new He(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(t){return new He(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ur.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new kp(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new kp(this.root,t,this.comparator,!1)}getReverseIterator(){return new kp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new kp(this.root,t,this.comparator,!0)}}class kp{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?r(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ur{constructor(t,e,r,i,s){this.key=t,this.value=e,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,s){return new ur(t??this.key,e??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,r),null):s===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw At(43730,{key:this.key,value:this.value});if(this.right.isRed())throw At(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw At(27949);return t+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw At(57766)}get value(){throw At(16141)}get color(){throw At(16727)}get left(){throw At(29726)}get right(){throw At(36894)}copy(t,e,r,i,s){return this}insert(t,e,r){return new ur(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.comparator=t,this.data=new He(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new yD(this.data.getIterator())}getIteratorFrom(t){return new yD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Me)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Me(this.comparator);return e.data=t,e}}class yD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.fields=t,t.sort(tn.comparator)}static empty(){return new Wr([])}unionWith(t){let e=new Me(tn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Wr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ih(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new M8("Invalid base64 string: "+s):s}}(t);return new wn(e)}static fromUint8Array(t){const e=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new wn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Gt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const wK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(n){if(Rt(!!n,39018),typeof n=="string"){let t=0;const e=wK.exec(n);if(Rt(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ke(n.seconds),nanos:Ke(n.nanos)}}function Ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ta(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8="server_timestamp",N8="__type__",k8="__previous_value__",L8="__local_write_time__";function xb(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[N8])==null?void 0:r.stringValue)===P8}function Pm(n){const t=n.mapValue.fields[k8];return xb(t)?Pm(t):t}function y0(n){const t=Aa(n.mapValue.fields[L8].timestampValue);return new Oe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(t,e,r,i,s,a,o,l,h,d){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=d}}const $1="(default)";class ml{constructor(t,e){this.projectId=t,this.database=e||$1}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database===$1}isEqual(t){return t instanceof ml&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="__type__",V8="__max__",Eo={mapValue:{fields:{__type__:{stringValue:V8}}}},bb="__vector__",uh="value",f1={nullValue:"NULL_VALUE"};function Vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xb(n)?4:B8(n)?9007199254740991:Nm(n)?10:11:At(28295,{value:n})}function Vs(n,t){if(n===t)return!0;const e=Vo(n);if(e!==Vo(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return y0(n).isEqual(y0(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Aa(i.timestampValue),o=Aa(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,s){return Ta(i.bytesValue).isEqual(Ta(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(n,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ke(i.doubleValue),o=Ke(s.doubleValue);return a===o?d0(a)===d0(o):isNaN(a)&&isNaN(o)}return!1}(n,t);case 9:return ih(n.arrayValue.values||[],t.arrayValue.values||[],Vs);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(mD(a)!==mD(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Vs(a[l],o[l])))return!1;return!0}(n,t);default:return At(52216,{left:n})}}function v0(n,t){return(n.values||[]).find(e=>Vs(e,t))!==void 0}function Bo(n,t){if(n===t)return 0;const e=Vo(n),r=Vo(t);if(e!==r)return Gt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,t.booleanValue);case 2:return function(s,a){const o=Ke(s.integerValue||s.doubleValue),l=Ke(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,t);case 3:return vD(n.timestampValue,t.timestampValue);case 4:return vD(y0(n),y0(t));case 5:return o2(n.stringValue,t.stringValue);case 6:return function(s,a){const o=Ta(s),l=Ta(a);return o.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let h=0;h<o.length&&h<l.length;h++){const d=Gt(o[h],l[h]);if(d!==0)return d}return Gt(o.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){const o=Gt(Ke(s.latitude),Ke(a.latitude));return o!==0?o:Gt(Ke(s.longitude),Ke(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return _D(n.arrayValue,t.arrayValue);case 10:return function(s,a){var m,y,x,b;const o=s.fields||{},l=a.fields||{},h=(m=o[uh])==null?void 0:m.arrayValue,d=(y=l[uh])==null?void 0:y.arrayValue,g=Gt(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return g!==0?g:_D(h,d)}(n.mapValue,t.mapValue);case 11:return function(s,a){if(s===Eo.mapValue&&a===Eo.mapValue)return 0;if(s===Eo.mapValue)return 1;if(a===Eo.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),h=a.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let g=0;g<l.length&&g<d.length;++g){const m=o2(l[g],d[g]);if(m!==0)return m;const y=Bo(o[l[g]],h[d[g]]);if(y!==0)return y}return Gt(l.length,d.length)}(n.mapValue,t.mapValue);default:throw At(23264,{he:e})}}function vD(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Gt(n,t);const e=Aa(n),r=Aa(t),i=Gt(e.seconds,r.seconds);return i!==0?i:Gt(e.nanos,r.nanos)}function _D(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const s=Bo(e[i],r[i]);if(s)return s}return Gt(e.length,r.length)}function hh(n){return d2(n)}function d2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=Aa(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Ta(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return xt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const s of e.values||[])i?i=!1:r+=",",r+=d2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${d2(e.fields[a])}`;return i+"}"}(n.mapValue):At(61005,{value:n})}function d1(n){switch(Vo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Pm(n);return t?16+d1(t):16;case 5:return 2*n.stringValue.length;case 6:return Ta(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+d1(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Yo(r.fields,(s,a)=>{i+=s.length+d1(a)}),i}(n.mapValue);default:throw At(13486,{value:n})}}function Eb(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function g2(n){return!!n&&"integerValue"in n}function _0(n){return!!n&&"arrayValue"in n}function xD(n){return!!n&&"nullValue"in n}function wD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function g1(n){return!!n&&"mapValue"in n}function Nm(n){var e,r;return((r=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[wb])==null?void 0:r.stringValue)===bb}function jd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Yo(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=jd(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=jd(n.arrayValue.values[e]);return t}return{...n}}function B8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===V8}const F8={mapValue:{fields:{[wb]:{stringValue:bb},[uh]:{arrayValue:{}}}}};function EK(n){return"nullValue"in n?f1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Eb(ml.empty(),xt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Nm(n)?F8:{mapValue:{}}:At(35942,{value:n})}function AK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Eb(ml.empty(),xt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?F8:"mapValue"in n?Nm(n)?{mapValue:{}}:Eo:At(61959,{value:n})}function bD(n,t){const e=Bo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function ED(n,t){const e=Bo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(t){this.value=t}static empty(){return new _r({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!g1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=jd(e)}setAll(t){let e=tn.emptyPath(),r={},i=[];t.forEach((a,o)=>{if(!e.isImmediateParentOf(o)){const l=this.getFieldsMap(e);this.applyChanges(l,r,i),r={},i=[],e=o.popLast()}a?r[o.lastSegment()]=jd(a):i.push(o.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,i)}delete(t){const e=this.field(t.popLast());g1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];g1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Yo(e,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new _r(jd(this.value))}}function U8(n){const t=[];return Yo(n.fields,(e,r)=>{const i=new tn([e]);if(g1(r)){const s=U8(r.mapValue).fields;if(s.length===0)t.push(i);else for(const a of s)t.push(i.child(a))}else t.push(i)}),new Wr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t,e,r,i,s,a,o){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(t){return new ln(t,0,Pt.min(),Pt.min(),Pt.min(),_r.empty(),0)}static newFoundDocument(t,e,r,i){return new ln(t,1,e,Pt.min(),r,i,0)}static newNoDocument(t,e){return new ln(t,2,e,Pt.min(),Pt.min(),_r.empty(),0)}static newUnknownDocument(t,e){return new ln(t,3,e,Pt.min(),Pt.min(),_r.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t,e){this.position=t,this.inclusive=e}}function AD(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const s=t[i],a=n.position[i];if(s.field.isKeyField()?r=xt.comparator(xt.fromName(a.referenceValue),e.key):r=Bo(a,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function TD(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Vs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,e="asc"){this.field=t,this.dir=e}}function TK(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{}class se extends j8{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new SK(t,e,r):e==="array-contains"?new DK(t,r):e==="in"?new Y8(t,r):e==="not-in"?new RK(t,r):e==="array-contains-any"?new OK(t,r):new se(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new IK(t,r):new CK(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Bo(e,this.value)):e!==null&&Vo(this.value)===Vo(e)&&this.matchesComparison(Bo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends j8{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Be(t,e)}matches(t){return dh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dh(n){return n.op==="and"}function p2(n){return n.op==="or"}function Ab(n){return z8(n)&&dh(n)}function z8(n){for(const t of n.filters)if(t instanceof Be)return!1;return!0}function m2(n){if(n instanceof se)return n.field.canonicalString()+n.op.toString()+hh(n.value);if(Ab(n))return n.filters.map(t=>m2(t)).join(",");{const t=n.filters.map(e=>m2(e)).join(",");return`${n.op}(${t})`}}function H8(n,t){return n instanceof se?function(r,i){return i instanceof se&&r.op===i.op&&r.field.isEqual(i.field)&&Vs(r.value,i.value)}(n,t):n instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&H8(a,i.filters[o]),!0):!1}(n,t):void At(19439)}function G8(n,t){const e=n.filters.concat(t);return Be.create(e,n.op)}function W8(n){return n instanceof se?function(e){return`${e.field.canonicalString()} ${e.op} ${hh(e.value)}`}(n):n instanceof Be?function(e){return e.op.toString()+" {"+e.getFilters().map(W8).join(" ,")+"}"}(n):"Filter"}class SK extends se{constructor(t,e,r){super(t,e,r),this.key=xt.fromName(r.referenceValue)}matches(t){const e=xt.comparator(t.key,this.key);return this.matchesComparison(e)}}class IK extends se{constructor(t,e){super(t,"in",e),this.keys=q8("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class CK extends se{constructor(t,e){super(t,"not-in",e),this.keys=q8("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function q8(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(r=>xt.fromName(r.referenceValue))}class DK extends se{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return _0(e)&&v0(e.arrayValue,this.value)}}class Y8 extends se{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&v0(this.value.arrayValue,e)}}class RK extends se{constructor(t,e){super(t,"not-in",e)}matches(t){if(v0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!v0(this.value.arrayValue,e)}}class OK extends se{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!_0(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>v0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(t,e=null,r=[],i=[],s=null,a=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function y2(n,t=null,e=[],r=[],i=null,s=null,a=null){return new MK(n,t,e,r,i,s,a)}function yl(n){const t=Ct(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>m2(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Dm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>hh(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>hh(r)).join(",")),t.Te=e}return t.Te}function V0(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!TK(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!H8(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!TD(n.startAt,t.startAt)&&TD(n.endAt,t.endAt)}function Z1(n){return xt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function J1(n,t){return n.filters.filter(e=>e instanceof se&&e.field.isEqual(t))}function SD(n,t,e){let r=f1,i=!0;for(const s of J1(n,t)){let a=f1,o=!0;switch(s.op){case"<":case"<=":a=EK(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=f1}bD({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];bD({value:r,inclusive:i},{value:a,inclusive:e.inclusive})<0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}function ID(n,t,e){let r=Eo,i=!0;for(const s of J1(n,t)){let a=Eo,o=!0;switch(s.op){case">=":case">":a=AK(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Eo}ED({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(e!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];ED({value:r,inclusive:i},{value:a,inclusive:e.inclusive})>0&&(r=a,i=e.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,e=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X8(n,t,e,r,i,s,a,o){return new km(n,t,e,r,i,s,a,o)}function Lm(n){return new km(n)}function CD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function PK(n){return n.collectionGroup!==null}function zd(n){const t=Ct(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Me(tn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Q1(s,r))}),e.has(tn.keyField().canonicalString())||t.Ie.push(new Q1(tn.keyField(),r))}return t.Ie}function ci(n){const t=Ct(n);return t.Ee||(t.Ee=NK(t,zd(n))),t.Ee}function NK(n,t){if(n.limitType==="F")return y2(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Q1(i.field,s)});const e=n.endAt?new fh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fh(n.startAt.position,n.startAt.inclusive):null;return y2(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function v2(n,t,e){return new km(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Vm(n,t){return V0(ci(n),ci(t))&&n.limitType===t.limitType}function K8(n){return`${yl(ci(n))}|lt:${n.limitType}`}function Pu(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>W8(i)).join(", ")}]`),Dm(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>hh(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>hh(i)).join(",")),`Target(${r})`}(ci(n))}; limitType=${n.limitType})`}function B0(n,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,t)&&function(r,i){for(const s of zd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(a,o,l){const h=AD(a,o,l);return a.inclusive?h<=0:h<0}(r.startAt,zd(r),i)||r.endAt&&!function(a,o,l){const h=AD(a,o,l);return a.inclusive?h>=0:h>0}(r.endAt,zd(r),i))}(n,t)}function $8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Q8(n){return(t,e)=>{let r=!1;for(const i of zd(n)){const s=kK(i,t,e);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function kK(n,t,e){const r=n.field.isKeyField()?xt.comparator(t.key,e.key):function(s,a,o){const l=a.data.field(s),h=o.data.field(s);return l!==null&&h!==null?Bo(l,h):At(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return At(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Yo(this.inner,(e,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return O8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK=new He(xt.comparator);function ai(){return LK}const Z8=new He(xt.comparator);function yd(...n){let t=Z8;for(const e of n)t=t.insert(e.key,e);return t}function J8(n){let t=Z8;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function As(){return Hd()}function t6(){return Hd()}function Hd(){return new Sa(n=>n.toString(),(n,t)=>n.isEqual(t))}const VK=new He(xt.comparator),BK=new Me(xt.comparator);function Zt(...n){let t=BK;for(const e of n)t=t.add(e);return t}const FK=new Me(Gt);function Tb(){return FK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:d0(t)?"-0":t}}function e6(n){return{integerValue:""+n}}function UK(n,t){return x8(t)?e6(t):Sb(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this._=void 0}}function jK(n,t,e){return n instanceof x0?function(i,s){const a={fields:{[N8]:{stringValue:P8},[L8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xb(s)&&(s=Pm(s)),s&&(a.fields[k8]=s),{mapValue:a}}(e,t):n instanceof gh?r6(n,t):n instanceof ph?i6(n,t):function(i,s){const a=n6(i,s),o=DD(a)+DD(i.Ae);return g2(a)&&g2(i.Ae)?e6(o):Sb(i.serializer,o)}(n,t)}function zK(n,t,e){return n instanceof gh?r6(n,t):n instanceof ph?i6(n,t):e}function n6(n,t){return n instanceof w0?function(r){return g2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class x0 extends Bm{}class gh extends Bm{constructor(t){super(),this.elements=t}}function r6(n,t){const e=s6(t);for(const r of n.elements)e.some(i=>Vs(i,r))||e.push(r);return{arrayValue:{values:e}}}class ph extends Bm{constructor(t){super(),this.elements=t}}function i6(n,t){let e=s6(t);for(const r of n.elements)e=e.filter(i=>!Vs(i,r));return{arrayValue:{values:e}}}class w0 extends Bm{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function DD(n){return Ke(n.integerValue||n.doubleValue)}function s6(n){return _0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(t,e){this.field=t,this.transform=e}}function GK(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof gh&&i instanceof gh||r instanceof ph&&i instanceof ph?ih(r.elements,i.elements,Vs):r instanceof w0&&i instanceof w0?Vs(r.Ae,i.Ae):r instanceof x0&&i instanceof x0}(n.transform,t.transform)}class WK{constructor(t,e){this.version=t,this.transformResults=e}}class br{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new br}static exists(t){return new br(void 0,t)}static updateTime(t){return new br(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function p1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Fm{}function a6(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Um(n.key,br.none()):new Oh(n.key,n.data,br.none());{const e=n.data,r=_r.empty();let i=new Me(tn.comparator);for(let s of t.fields)if(!i.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ia(n.key,r,new Wr(i.toArray()),br.none())}}function qK(n,t,e){n instanceof Oh?function(i,s,a){const o=i.value.clone(),l=OD(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,t,e):n instanceof Ia?function(i,s,a){if(!p1(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=OD(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(o6(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function Gd(n,t,e,r){return n instanceof Oh?function(s,a,o,l){if(!p1(s.precondition,a))return o;const h=s.value.clone(),d=MD(s.fieldTransforms,l,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,r):n instanceof Ia?function(s,a,o,l){if(!p1(s.precondition,a))return o;const h=MD(s.fieldTransforms,l,a),d=a.data;return d.setAll(o6(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,t,e,r):function(s,a,o){return p1(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,t,e)}function YK(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),s=n6(r.transform,i||null);s!=null&&(e===null&&(e=_r.empty()),e.set(r.field,s))}return e||null}function RD(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ih(r,i,(s,a)=>GK(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Oh extends Fm{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ia extends Fm{constructor(t,e,r,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function o6(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function OD(n,t,e){const r=new Map;Rt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const s=n[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,zK(a,o,e[i]))}return r}function MD(n,t,e){const r=new Map;for(const i of n){const s=i.transform,a=e.data.field(i.field);r.set(i.field,jK(s,a,t))}return r}class Um extends Fm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c6 extends Fm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&qK(s,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Gd(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Gd(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=t6();return this.mutations.forEach(i=>{const s=t.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=e.has(i.key)?null:o;const l=a6(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Pt.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Zt())}isEqual(t){return this.batchId===t.batchId&&ih(this.mutations,t.mutations,(e,r)=>RD(e,r))&&ih(this.baseMutations,t.baseMutations,(e,r)=>RD(e,r))}}class Cb{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Rt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return VK}();const s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Cb(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,le;function KK(n){switch(n){case ut.OK:return At(64938);case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0;default:return At(15467,{code:n})}}function l6(n){if(n===void 0)return yn("GRPC error has no .code"),ut.UNKNOWN;switch(n){case Sn.OK:return ut.OK;case Sn.CANCELLED:return ut.CANCELLED;case Sn.UNKNOWN:return ut.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return ut.INTERNAL;case Sn.UNAVAILABLE:return ut.UNAVAILABLE;case Sn.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case Sn.NOT_FOUND:return ut.NOT_FOUND;case Sn.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case Sn.ABORTED:return ut.ABORTED;case Sn.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case Sn.DATA_LOSS:return ut.DATA_LOSS;default:return At(39323,{code:n})}}(le=Sn||(Sn={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $K(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QK=new Co([4294967295,4294967295],0);function PD(n){const t=$K().encode(n),e=new s8;return e.update(t),new Uint8Array(e.digest())}function ND(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Co([e,r],0),new Co([i,s],0)]}class Rb{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new vd(`Invalid padding: ${e}`);if(r<0)throw new vd(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new vd(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new vd(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Co.fromNumber(this.ge)}ye(t,e,r){let i=t.add(e.multiply(Co.fromNumber(r)));return i.compare(QK)===1&&(i=new Co([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=PD(t),[r,i]=ND(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new Rb(s,i,e);return r.forEach(o=>a.insert(o)),a}insert(t){if(this.ge===0)return;const e=PD(t),[r,i]=ND(e);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class vd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t,e,r,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,U0.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new F0(Pt.min(),i,new He(Gt),ai(),Zt())}}class U0{constructor(t,e,r,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new U0(r,e,Zt(),Zt(),Zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(t,e,r,i){this.be=t,this.removedTargetIds=e,this.key=r,this.De=i}}class u6{constructor(t,e){this.targetId=t,this.Ce=e}}class h6{constructor(t,e,r=wn.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class kD{constructor(){this.ve=0,this.Fe=LD(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Zt(),e=Zt(),r=Zt();return this.Fe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:At(38017,{changeType:s})}}),new U0(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=LD()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZK{constructor(t){this.Ge=t,this.ze=new Map,this.je=ai(),this.Je=Lp(),this.He=Lp(),this.Ye=new He(Gt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:At(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((r,i)=>{this.rt(i)&&e(i)})}st(t){const e=t.targetId,r=t.Ce.count,i=this.ot(e);if(i){const s=i.target;if(Z1(s))if(r===0){const a=new xt(s.path);this.et(e,a,ln.newNoDocument(a,Pt.min()))}else Rt(r===1,20013,{expectedCount:r});else{const a=this._t(e);if(a!==r){const o=this.ut(t),l=o?this.ct(o,t,a):1;if(l!==0){this.it(e);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,h)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=e;let a,o;try{a=Ta(r).toUint8Array()}catch(l){if(l instanceof M8)return h0("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Rb(a,i,s)}catch(l){return h0(l instanceof vd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(e,s,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Z1(o.target)){const l=new xt(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,ln.newNoDocument(l,t))}s.Be&&(e.set(a,s.ke()),s.qe())}});let r=Zt();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(t));const i=new F0(t,e,this.Ye,this.je,r);return this.je=ai(),this.Je=Lp(),this.He=Lp(),this.Ye=new He(Gt),i}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new kD,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Me(Gt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Me(Gt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ft("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new kD),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Lp(){return new He(xt.comparator)}function LD(){return new He(xt.comparator)}const JK={asc:"ASCENDING",desc:"DESCENDING"},t$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e$={and:"AND",or:"OR"};class n${constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function _2(n,t){return n.useProto3Json||Dm(t)?t:{value:t}}function mh(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function f6(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function r$(n,t){return mh(n,t.toTimestamp())}function Nr(n){return Rt(!!n,49232),Pt.fromTimestamp(function(e){const r=Aa(e);return new Oe(r.seconds,r.nanos)}(n))}function Ob(n,t){return x2(n,t).canonicalString()}function x2(n,t){const e=function(i){return new be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function d6(n){const t=be.fromString(n);return Rt(b6(t),10190,{key:t.toString()}),t}function tm(n,t){return Ob(n.databaseId,t.path)}function al(n,t){const e=d6(t);if(e.get(1)!==n.databaseId.projectId)throw new _t(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new _t(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new xt(m6(e))}function g6(n,t){return Ob(n.databaseId,t)}function p6(n){const t=d6(n);return t.length===4?be.emptyPath():m6(t)}function w2(n){return new be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function m6(n){return Rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function VD(n,t,e){return{name:tm(n,t),fields:e.value.mapValue.fields}}function i$(n,t,e){const r=al(n,t.name),i=Nr(t.updateTime),s=t.createTime?Nr(t.createTime):Pt.min(),a=new _r({mapValue:{fields:t.fields}}),o=ln.newFoundDocument(r,i,s,a);return e&&o.setHasCommittedMutations(),e?o.setHasCommittedMutations():o}function s$(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:At(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(Rt(d===void 0||typeof d=="string",58123),wn.fromBase64String(d||"")):(Rt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),wn.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(h){const d=h.code===void 0?ut.UNKNOWN:l6(h.code);return new _t(d,h.message||"")}(a);e=new h6(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=al(n,r.document.name),s=Nr(r.document.updateTime),a=r.document.createTime?Nr(r.document.createTime):Pt.min(),o=new _r({mapValue:{fields:r.document.fields}}),l=ln.newFoundDocument(i,s,a,o),h=r.targetIds||[],d=r.removedTargetIds||[];e=new m1(h,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=al(n,r.document),s=r.readTime?Nr(r.readTime):Pt.min(),a=ln.newNoDocument(i,s),o=r.removedTargetIds||[];e=new m1([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=al(n,r.document),s=r.removedTargetIds||[];e=new m1([],s,i,null)}else{if(!("filter"in t))return At(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new XK(i,s),o=r.targetId;e=new u6(o,a)}}return e}function em(n,t){let e;if(t instanceof Oh)e={update:VD(n,t.key,t.value)};else if(t instanceof Um)e={delete:tm(n,t.key)};else if(t instanceof Ia)e={update:VD(n,t.key,t.data),updateMask:h$(t.fieldMask)};else{if(!(t instanceof c6))return At(16599,{Vt:t.type});e={verify:tm(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof x0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof gh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ph)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof w0)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw At(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:r$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:At(27497)}(n,t.precondition)),e}function b2(n,t){const e=t.currentDocument?function(s){return s.updateTime!==void 0?br.updateTime(Nr(s.updateTime)):s.exists!==void 0?br.exists(s.exists):br.none()}(t.currentDocument):br.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,o){let l=null;if("setToServerValue"in o)Rt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new x0;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new gh(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new ph(d)}else"increment"in o?l=new w0(a,o.increment):At(16584,{proto:o});const h=tn.fromServerFormat(o.fieldPath);return new HK(h,l)}(n,i)):[];if(t.update){t.update.name;const i=al(n,t.update.name),s=new _r({mapValue:{fields:t.update.fields}});if(t.updateMask){const a=function(l){const h=l.fieldPaths||[];return new Wr(h.map(d=>tn.fromServerFormat(d)))}(t.updateMask);return new Ia(i,s,a,e,r)}return new Oh(i,s,e,r)}if(t.delete){const i=al(n,t.delete);return new Um(i,e)}if(t.verify){const i=al(n,t.verify);return new c6(i,e)}return At(1463,{proto:t})}function a$(n,t){return n&&n.length>0?(Rt(t!==void 0,14353),n.map(e=>function(i,s){let a=i.updateTime?Nr(i.updateTime):Nr(s);return a.isEqual(Pt.min())&&(a=Nr(s)),new WK(a,i.transformResults||[])}(e,t))):[]}function y6(n,t){return{documents:[g6(n,t.path)]}}function v6(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=g6(n,i);const s=function(h){if(h.length!==0)return w6(Be.create(h,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Nu(m.field),direction:c$(m.dir)}}(d))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const o=_2(n,t.limit);return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ft:e,parent:i}}function _6(n){let t=p6(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Rt(r===1,65062);const d=e.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let s=[];e.where&&(s=function(g){const m=x6(g);return m instanceof Be&&Ab(m)?m.getFilters():[m]}(e.where));let a=[];e.orderBy&&(a=function(g){return g.map(m=>function(x){return new Q1(ku(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(e.orderBy));let o=null;e.limit&&(o=function(g){let m;return m=typeof g=="object"?g.value:g,Dm(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(g){const m=!!g.before,y=g.values||[];return new fh(y,m)}(e.startAt));let h=null;return e.endAt&&(h=function(g){const m=!g.before,y=g.values||[];return new fh(y,m)}(e.endAt)),X8(t,i,a,s,o,"F",l,h)}function o$(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function x6(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=ku(e.unaryFilter.field);return se.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ku(e.unaryFilter.field);return se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ku(e.unaryFilter.field);return se.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ku(e.unaryFilter.field);return se.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return At(61313);default:return At(60726)}}(n):n.fieldFilter!==void 0?function(e){return se.create(ku(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return At(58110);default:return At(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Be.create(e.compositeFilter.filters.map(r=>x6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return At(1026)}}(e.compositeFilter.op))}(n):At(30097,{filter:n})}function c$(n){return JK[n]}function l$(n){return t$[n]}function u$(n){return e$[n]}function Nu(n){return{fieldPath:n.canonicalString()}}function ku(n){return tn.fromServerFormat(n.fieldPath)}function w6(n){return n instanceof se?function(e){if(e.op==="=="){if(wD(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NAN"}};if(xD(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(wD(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NOT_NAN"}};if(xD(e.value))return{unaryFilter:{field:Nu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nu(e.field),op:l$(e.op),value:e.value}}}(n):n instanceof Be?function(e){const r=e.getFilters().map(i=>w6(i));return r.length===1?r[0]:{compositeFilter:{op:u$(e.op),filters:r}}}(n):At(54877,{filter:n})}function h$(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function b6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t,e,r,i,s=Pt.min(),a=Pt.min(),o=wn.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new va(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(t){this.yt=t}}function f$(n,t){let e;if(t.document)e=i$(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=xt.fromSegments(t.noDocument.path),i=_l(t.noDocument.readTime);e=ln.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return At(56709);{const r=xt.fromSegments(t.unknownDocument.path),i=_l(t.unknownDocument.version);e=ln.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(i){const s=new Oe(i[0],i[1]);return Pt.fromTimestamp(s)}(t.readTime)),e}function BD(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:nm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(s,a){return{name:tm(s,a.key),fields:a.data.value.mapValue.fields,updateTime:mh(s,a.version.toTimestamp()),createTime:mh(s,a.createTime.toTimestamp())}}(n.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:vl(t.version)};else{if(!t.isUnknownDocument())return At(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:vl(t.version)}}return r}function nm(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function vl(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _l(n){const t=new Oe(n.seconds,n.nanoseconds);return Pt.fromTimestamp(t)}function Wc(n,t){const e=(t.baseMutations||[]).map(s=>b2(n.yt,s));for(let s=0;s<t.mutations.length-1;++s){const a=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){const o=t.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(s=>b2(n.yt,s)),i=Oe.fromMillis(t.localWriteTimeMs);return new Ib(t.batchId,i,e,r)}function _d(n){const t=_l(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?_l(n.lastLimboFreeSnapshotVersion):Pt.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){const a=s.documents.length;return Rt(a===1,1966,{count:a}),ci(Lm(p6(s.documents[0])))}(n.query):function(s){return ci(_6(s))}(n.query),new va(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,wn.fromBase64String(n.resumeToken))}function A6(n,t){const e=vl(t.snapshotVersion),r=vl(t.lastLimboFreeSnapshotVersion);let i;i=Z1(t.target)?y6(n.yt,t.target):v6(n.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:yl(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function T6(n){const t=_6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?v2(t,t.limit,"L"):t}function Q_(n,t){return new Db(t.largestBatchId,b2(n.yt,t.overlayMutation))}function FD(n,t){const e=t.path.lastSegment();return[n,Er(t.path.popLast()),e]}function UD(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:vl(r.readTime),documentKey:Er(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${getBundleMetadata(t,e){return jD(t).get(e).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:_l(s.createTime),version:s.version}}(r)})}saveBundleMetadata(t,e){return jD(t).put(function(i){return{bundleId:i.id,createTime:vl(Nr(i.createTime)),version:i.version}}(e))}getNamedQuery(t,e){return zD(t).get(e).next(r=>{if(r)return function(s){return{name:s.name,query:T6(s.bundledQuery),readTime:_l(s.readTime)}}(r)})}saveNamedQuery(t,e){return zD(t).put(function(i){return{name:i.name,readTime:vl(Nr(i.readTime)),bundledQuery:i.bundledQuery}}(e))}}function jD(n){return Hn(n,Rm)}function zD(n){return Hn(n,Om)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new jm(t,r)}getOverlay(t,e){return Qf(t).get(FD(this.userId,e)).next(r=>r?Q_(this.serializer,r):null)}getOverlays(t,e){const r=As();return K.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){const i=[];return r.forEach((s,a)=>{const o=new Db(e,a);i.push(this.St(t,o))}),K.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(a=>i.add(Er(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Qf(t).Z(h2,o))}),K.waitFor(s)}getOverlaysForCollection(t,e,r){const i=As(),s=Er(e),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Qf(t).J(h2,a).next(o=>{for(const l of o){const h=Q_(this.serializer,l);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const s=As();let a;const o=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Qf(t).ee({index:S8,range:o},(l,h,d)=>{const g=Q_(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):d.done()}).next(()=>s)}St(t,e){return Qf(t).put(function(i,s,a){const[o,l,h]=FD(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:em(i.yt,a.mutation)}}(this.serializer,this.userId,e))}}function Qf(n){return Hn(n,Mm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${bt(t){return Hn(t,vb)}getSessionToken(t){return this.bt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?wn.fromUint8Array(r):wn.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Ke(t.integerValue));else if("doubleValue"in t){const r=Ke(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),d0(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=Aa(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Ta(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?B8(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Nm(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):At(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const i of Object.keys(r))this.Ot(i,e),this.Ct(r[i],e)}kt(t,e){var a,o;const r=t.fields||{};this.Ft(e,53);const i=uh,s=((o=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(e,15),e.Mt(Ke(s)),this.Ot(i,e),this.Ct(r[i],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const i of r)this.Ct(i,e)}Lt(t,e){this.Ft(e,37),xt.fromName(t).path.forEach(r=>{this.Ft(e,60),this.Ut(r,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}qc.Kt=new qc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=255;function p$(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function HD(n){const t=64-function(r){let i=0;for(let s=0;s<8;++s){const a=p$(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(t/8)}class m${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=e.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=e.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(t){const e=this.en(t),r=HD(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}nn(t){const e=this.en(t),r=HD(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}rn(){this.sn(Su),this.sn(255)}_n(){this.an(Su),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Su?(this.sn(Su),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Su?(this.an(Su),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class y${constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class v${constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Zf{constructor(){this.cn=new m$,this.ln=new y$(this.cn),this.hn=new v$(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,e,r,i){this.Tn=t,this.In=e,this.En=r,this.dn=i}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new Yc(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:y1(this.En),directionalValue:y1(this.dn),orderedDocumentKey:y1(e),documentKey:r.path.toArray()}}Vn(t,e,r){const i=this.Rn(t,e,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function io(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=GD(n.En,t.En),e!==0?e:(e=GD(n.dn,t.dn),e!==0?e:xt.comparator(n.In,t.In)))}function GD(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function y1(n){return YM()?function(e){let r="";for(let i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);return r}(n):n}function WD(n){return typeof n!="string"?n:function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(n)}class qD{constructor(t){this.mn=new Me((e,r)=>tn.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(Rt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=c2(t);if(e!==void 0&&!this.wn(e))return!1;const r=Uc(t);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let t=new Me(tn.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new l1(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new l1(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new l1(r.field,r.dir==="asc"?0:1)));return new q1(q1.UNKNOWN_ID,this.collectionId,e,f0.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n){var e,r;if(Rt(n instanceof se||n instanceof Be,20012),n instanceof se){if(n instanceof Y8){const i=((r=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map(s=>se.create(n.field,"==",s)))||[];return Be.create(i,"or")}return n}const t=n.filters.map(i=>S6(i));return Be.create(t,n.op)}function _$(n){if(n.getFilters().length===0)return[];const t=T2(S6(n));return Rt(I6(t),7391),E2(t)||A2(t)?[t]:t.getFilters()}function E2(n){return n instanceof se}function A2(n){return n instanceof Be&&Ab(n)}function I6(n){return E2(n)||A2(n)||function(e){if(e instanceof Be&&p2(e)){for(const r of e.getFilters())if(!E2(r)&&!A2(r))return!1;return!0}return!1}(n)}function T2(n){if(Rt(n instanceof se||n instanceof Be,34018),n instanceof se)return n;if(n.filters.length===1)return T2(n.filters[0]);const t=n.filters.map(r=>T2(r));let e=Be.create(t,n.op);return e=rm(e),I6(e)?e:(Rt(e instanceof Be,64498),Rt(dh(e),40251),Rt(e.filters.length>1,57927),e.filters.reduce((r,i)=>Mb(r,i)))}function Mb(n,t){let e;return Rt(n instanceof se||n instanceof Be,38388),Rt(t instanceof se||t instanceof Be,25473),e=n instanceof se?t instanceof se?function(i,s){return Be.create([i,s],"and")}(n,t):YD(n,t):t instanceof se?YD(t,n):function(i,s){if(Rt(i.filters.length>0&&s.filters.length>0,48005),dh(i)&&dh(s))return G8(i,s.getFilters());const a=p2(i)?i:s,o=p2(i)?s:i,l=a.filters.map(h=>Mb(h,o));return Be.create(l,"or")}(n,t),rm(e)}function YD(n,t){if(dh(t))return G8(t,n.getFilters());{const e=t.filters.map(r=>Mb(n,r));return Be.create(e,"or")}}function rm(n){if(Rt(n instanceof se||n instanceof Be,11850),n instanceof se)return n;const t=n.getFilters();if(t.length===1)return rm(t[0]);if(z8(n))return n;const e=t.map(i=>rm(i)),r=[];return e.forEach(i=>{i instanceof se?r.push(i):i instanceof Be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Be.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(){this.Cn=new Pb}addToCollectionParentIndex(t,e){return this.Cn.add(e),K.resolve()}getCollectionParents(t,e){return K.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return K.resolve()}deleteFieldIndex(t,e){return K.resolve()}deleteAllFieldIndexes(t){return K.resolve()}createTargetIndexes(t,e){return K.resolve()}getDocumentsMatchingTarget(t,e){return K.resolve(null)}getIndexType(t,e){return K.resolve(0)}getFieldIndexes(t,e){return K.resolve([])}getNextCollectionGroupToUpdate(t){return K.resolve(null)}getMinOffset(t,e){return K.resolve(li.min())}getMinOffsetFromCollectionGroup(t,e){return K.resolve(li.min())}updateCollectionGroup(t,e,r){return K.resolve()}updateIndexEntries(t,e){return K.resolve()}}class Pb{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Me(be.comparator),s=!i.has(r);return this.index[e]=i.add(r),s}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Me(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="IndexedDbIndexManager",Vp=new Uint8Array(0);class w${constructor(t,e){this.databaseId=e,this.vn=new Pb,this.Fn=new Sa(r=>yl(r),(r,i)=>V0(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const s={collectionId:r,parent:Er(i)};return KD(t).put(s)}return K.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[f8(e),""],!1,!0);return KD(t).J(i).next(s=>{for(const a of s){if(a.collectionId!==e)break;r.push(Es(a.parent))}return r})}addFieldIndex(t,e){const r=Jf(t),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(e);delete i.indexId;const s=r.add(i);if(e.indexState){const a=Cu(t);return s.next(o=>{a.put(UD(o,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const r=Jf(t),i=Cu(t),s=Iu(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Jf(t),r=Iu(t),i=Cu(t);return e.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(t,e){return K.forEach(this.Mn(e),r=>this.getIndexType(t,r).next(i=>{if(i===0||i===1){const s=new qD(r).Dn();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const r=Iu(t);let i=!0;const s=new Map;return K.forEach(this.Mn(e),a=>this.xn(t,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=Zt();const o=[];return K.forEach(s,(l,h)=>{ft(XD,`Using index ${function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${yl(e)}`);const d=function(R,k){const P=c2(k);if(P===void 0)return null;for(const H of J1(R,P.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(h,l),g=function(R,k){const P=new Map;for(const H of Uc(k))for(const M of J1(R,H.fieldPath))switch(M.op){case"==":case"in":P.set(H.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return P.set(H.fieldPath.canonicalString(),M.value),Array.from(P.values())}return null}(h,l),m=function(R,k){const P=[];let H=!0;for(const M of Uc(k)){const C=M.kind===0?SD(R,M.fieldPath,R.startAt):ID(R,M.fieldPath,R.startAt);P.push(C.value),H&&(H=C.inclusive)}return new fh(P,H)}(h,l),y=function(R,k){const P=[];let H=!0;for(const M of Uc(k)){const C=M.kind===0?ID(R,M.fieldPath,R.endAt):SD(R,M.fieldPath,R.endAt);P.push(C.value),H&&(H=C.inclusive)}return new fh(P,H)}(h,l),x=this.On(l,h,m),b=this.On(l,h,y),E=this.Nn(l,h,g),T=this.Bn(l.indexId,d,x,m.inclusive,b,y.inclusive,E);return K.forEach(T,S=>r.Y(S,e.limit).next(R=>{R.forEach(k=>{const P=xt.fromSegments(k.documentKey);a.has(P)||(a=a.add(P),o.push(P))})}))}).next(()=>o)}return K.resolve(null)})}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=_$(Be.create(t.filters,"and")).map(r=>y2(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.Fn.set(t,e),e)}Bn(t,e,r,i,s,a,o){const l=(e!=null?e.length:1)*Math.max(r.length,s.length),h=l/(e!=null?e.length:1),d=[];for(let g=0;g<l;++g){const m=e?this.Ln(e[g/h]):Vp,y=this.kn(t,m,r[g%h],i),x=this.qn(t,m,s[g%h],a),b=o.map(E=>this.kn(t,m,E,!0));d.push(...this.createRange(y,x,b))}return d}kn(t,e,r,i){const s=new Yc(t,xt.empty(),e,r);return i?s:s.An()}qn(t,e,r,i){const s=new Yc(t,xt.empty(),e,r);return i?s.An():s}xn(t,e){const r=new qD(e),i=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(t,e){let r=2;const i=this.Mn(e);return K.forEach(i,s=>this.xn(t,s).next(a=>{a?r!==0&&a.fields.length<function(l){let h=new Me(tn.comparator),d=!1;for(const g of l.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:h=h.add(m.field));for(const g of l.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(e)&&i.length>1&&r===2?1:r)}Qn(t,e){const r=new Zf;for(const i of Uc(t)){const s=e.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);qc.Kt.Dt(s,a)}return r.un()}Ln(t){const e=new Zf;return qc.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new Zf;return qc.Kt.Dt(Eb(this.databaseId,e),r.Pn(function(s){const a=Uc(s);return a.length===0?0:a[a.length-1].kind}(t))),r.un()}Nn(t,e,r){if(r===null)return[];let i=[];i.push(new Zf);let s=0;for(const a of Uc(t)){const o=r[s++];for(const l of i)if(this.Un(e,a.fieldPath)&&_0(o))i=this.Kn(i,a,o);else{const h=l.Pn(a.kind);qc.Kt.Dt(o,h)}}return this.Wn(i)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const i=[...t],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Zf;l.seed(o.un()),qc.Kt.Dt(a,l.Pn(e.kind)),s.push(l)}return s}Un(t,e){return!!t.filters.find(r=>r instanceof se&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=Jf(t),i=Cu(t);return(e?r.J(u2,IDBKeyRange.bound(e,e)):r.J()).next(s=>{const a=[];return K.forEach(s,o=>i.get([o.indexId,this.uid]).next(l=>{a.push(function(d,g){const m=g?new f0(g.sequenceNumber,new li(_l(g.readTime),new xt(Es(g.documentKey)),g.largestBatchId)):f0.empty(),y=d.fields.map(([x,b])=>new l1(tn.fromServerFormat(x),b));return new q1(d.indexId,d.collectionGroup,y,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Gt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=Jf(t),s=Cu(t);return this.Gn(t).next(a=>i.J(u2,IDBKeyRange.bound(e,e)).next(o=>K.forEach(o,l=>s.put(UD(l.indexId,this.uid,a,r)))))}updateIndexEntries(t,e){const r=new Map;return K.forEach(e,(i,s)=>{const a=r.get(i.collectionGroup);return(a?K.resolve(a):this.getFieldIndexes(t,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),K.forEach(o,l=>this.zn(t,i,l).next(h=>{const d=this.jn(s,l);return h.isEqual(d)?K.resolve():this.Jn(t,s,l,h,d)}))))})}Hn(t,e,r,i){return Iu(t).put(i.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,i){return Iu(t).delete(i.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const i=Iu(t);let s=new Me(io);return i.ee({index:T8,range:IDBKeyRange.only([r.indexId,this.uid,y1(this.$n(r,e))])},(a,o)=>{s=s.add(new Yc(r.indexId,e,WD(o.arrayValue),WD(o.directionalValue)))}).next(()=>s)}jn(t,e){let r=new Me(io);const i=this.Qn(e,t);if(i==null)return r;const s=c2(e);if(s!=null){const a=t.data.field(s.fieldPath);if(_0(a))for(const o of a.arrayValue.values||[])r=r.add(new Yc(e.indexId,t.key,this.Ln(o),i))}else r=r.add(new Yc(e.indexId,t.key,Vp,i));return r}Jn(t,e,r,i,s){ft(XD,"Updating index entries for document '%s'",e.key);const a=[];return function(l,h,d,g,m){const y=l.getIterator(),x=h.getIterator();let b=Tu(y),E=Tu(x);for(;b||E;){let T=!1,S=!1;if(b&&E){const R=d(b,E);R<0?S=!0:R>0&&(T=!0)}else b!=null?S=!0:T=!0;T?(g(E),E=Tu(x)):S?(m(b),b=Tu(y)):(b=Tu(y),E=Tu(x))}}(i,s,io,o=>{a.push(this.Hn(t,e,r,o))},o=>{a.push(this.Yn(t,e,r,o))}),K.waitFor(a)}Gn(t){let e=1;return Cu(t).ee({index:A8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((a,o)=>io(a,o)).filter((a,o,l)=>!o||io(a,l[o-1])!==0);const i=[];i.push(t);for(const a of r){const o=io(a,t),l=io(a,e);if(o===0)i[0]=t.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(e);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,Vp,xt.empty()),l=i[a+1].Vn(this.uid,Vp,xt.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(t,e){return io(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next($D)}getMinOffset(t,e){return K.mapArray(this.Mn(e),r=>this.xn(t,r).next(i=>i||At(44426))).next($D)}}function KD(n){return Hn(n,m0)}function Iu(n){return Hn(n,Ud)}function Jf(n){return Hn(n,yb)}function Cu(n){return Hn(n,Fd)}function $D(n){Rt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;gb(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new li(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C6=41943040;class vr{static withCacheSize(t){return new vr(t,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(n,t,e){const r=n.store(qi),i=n.store(ah),s=[],a=IDBKeyRange.only(e.batchId);let o=0;const l=r.ee({range:a},(d,g,m)=>(o++,m.delete()));s.push(l.next(()=>{Rt(o===1,47070,{batchId:e.batchId})}));const h=[];for(const d of e.mutations){const g=w8(t,d.key.path,e.batchId);s.push(i.delete(g)),h.push(d.key)}return K.waitFor(s).next(()=>h)}function im(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw At(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr.DEFAULT_COLLECTION_PERCENTILE=10,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vr.DEFAULT=new vr(C6,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vr.DISABLED=new vr(-1,0,0);class zm{constructor(t,e,r,i){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(t,e,r,i){Rt(t.uid!=="",64387);const s=t.isAuthenticated()?t.uid:"";return new zm(s,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return so(t).ee({index:Zc,range:r},(i,s,a)=>{e=!1,a.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const s=Lu(t),a=so(t);return a.add({}).next(o=>{Rt(typeof o=="number",49019);const l=new Ib(o,e,r,i),h=function(y,x,b){const E=b.baseMutations.map(S=>em(y.yt,S)),T=b.mutations.map(S=>em(y.yt,S));return{userId:x,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:E,mutations:T}}(this.serializer,this.userId,l),d=[];let g=new Me((m,y)=>Gt(m.canonicalString(),y.canonicalString()));for(const m of i){const y=w8(this.userId,m.key.path,o);g=g.add(m.key.path.popLast()),d.push(a.put(h)),d.push(s.put(y,QX))}return g.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),K.waitFor(d).next(()=>l)})}lookupMutationBatch(t,e){return so(t).get(e).next(r=>r?(Rt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),Wc(this.serializer,r)):null)}er(t,e){return this.Xn[e]?K.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.Xn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return so(t).ee({index:Zc,range:i},(a,o,l)=>{o.userId===this.userId&&(Rt(o.batchId>=r,47524,{tr:r}),s=Wc(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=il;return so(t).ee({index:Zc,range:e,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,il],[this.userId,Number.POSITIVE_INFINITY]);return so(t).J(Zc,e).next(r=>r.map(i=>Wc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=u1(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Lu(t).ee({range:i},(a,o,l)=>{const[h,d,g]=a,m=Es(d);if(h===this.userId&&e.path.isEqual(m))return so(t).get(g).next(y=>{if(!y)throw At(61480,{nr:a,batchId:g});Rt(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:g}),s.push(Wc(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Me(Gt);const i=[];return e.forEach(s=>{const a=u1(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Lu(t).ee({range:o},(h,d,g)=>{const[m,y,x]=h,b=Es(y);m===this.userId&&s.path.isEqual(b)?r=r.add(x):g.done()});i.push(l)}),K.waitFor(i).next(()=>this.rr(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,s=u1(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Me(Gt);return Lu(t).ee({range:a},(l,h,d)=>{const[g,m,y]=l,x=Es(m);g===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(y)):d.done()}).next(()=>this.rr(t,o))}rr(t,e){const r=[],i=[];return e.forEach(s=>{i.push(so(t).get(s).next(a=>{if(a===null)throw At(35274,{batchId:s});Rt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(Wc(this.serializer,a))}))}),K.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return D6(t.le,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.ir(e.batchId)}),K.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return K.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Lu(t).ee({range:r},(s,a,o)=>{if(s[0]===this.userId){const l=Es(s[1]);i.push(l)}else o.done()}).next(()=>{Rt(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(t,e){return R6(t,this.userId,e)}_r(t){return O6(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:il,lastStreamToken:""})}}function R6(n,t,e){const r=u1(t,e.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Lu(n).ee({range:s,X:!0},(o,l,h)=>{const[d,g,m]=o;d===t&&g===i&&(a=!0),h.done()}).next(()=>a)}function so(n){return Hn(n,qi)}function Lu(n){return Hn(n,ah)}function O6(n){return Hn(n,g0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new xl(0)}static cr(){return new xl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next(e=>{const r=new xl(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.lr(t).next(e=>Pt.fromTimestamp(new Oe(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.lr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.lr(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.hr(t,i)))}addTargetData(t,e){return this.Pr(t,e).next(()=>this.lr(t).next(r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Du(t).delete(e.targetId)).next(()=>this.lr(t)).next(r=>(Rt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r)))}removeTargets(t,e,r){let i=0;const s=[];return Du(t).ee((a,o)=>{const l=_d(o);l.sequenceNumber<=e&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(t,l)))}).next(()=>K.waitFor(s)).next(()=>i)}forEachTarget(t,e){return Du(t).ee((r,i)=>{const s=_d(i);e(s)})}lr(t){return ZD(t).get(K1).next(e=>(Rt(e!==null,2888),e))}hr(t,e){return ZD(t).put(K1,e)}Pr(t,e){return Du(t).put(A6(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next(e=>e.targetCount)}getTargetData(t,e){const r=yl(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Du(t).ee({range:i,index:E8},(a,o,l)=>{const h=_d(o);V0(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,r){const i=[],s=vo(t);return e.forEach(a=>{const o=Er(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(t,r,a))}),K.waitFor(i)}removeMatchingKeys(t,e,r){const i=vo(t);return K.forEach(e,s=>{const a=Er(s.path);return K.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(t,r,s)])})}removeMatchingKeysForTargetId(t,e){const r=vo(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=vo(t);let s=Zt();return i.ee({range:r,X:!0},(a,o,l)=>{const h=Es(a[1]),d=new xt(h);s=s.add(d)}).next(()=>s)}containsKey(t,e){const r=Er(e.path),i=IDBKeyRange.bound([r],[f8(r)],!1,!0);let s=0;return vo(t).ee({index:mb,X:!0,range:i},([a,o],l,h)=>{a!==0&&(s++,h.done())}).next(()=>s>0)}At(t,e){return Du(t).get(e).next(r=>r?_d(r):null)}}function Du(n){return Hn(n,oh)}function ZD(n){return Hn(n,sl)}function vo(n){return Hn(n,ch)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="LruGarbageCollector",M6=1048576;function tR([n,t],[e,r]){const i=Gt(n,e);return i===0?Gt(t,r):i}class E${constructor(t){this.Ir=t,this.buffer=new Me(tR),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();tR(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class P6{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ft(JD,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){qo(e)?ft(JD,"Ignoring IndexedDB error during garbage collection: ",e):await Wo(e)}await this.Vr(3e5)})}}class A${constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return K.resolve(Gr.ce);const r=new E$(e);return this.mr.forEachTarget(t,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(t,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(QD)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QD):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,i,s,a,o,l,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(r=g,o=Date.now(),this.removeTargets(t,r,e))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(g=>(h=Date.now(),Mu()<=ie.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${g} documents in `+(h-l)+`ms
Total Duration: ${h-d}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function N6(n,t){return new A$(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(t,e){this.db=t,this.garbageCollector=N6(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,(r,i)=>e(i))}addReference(t,e,r){return Bp(t,r)}removeReference(t,e,r){return Bp(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Bp(t,e)}br(t,e){return function(i,s){let a=!1;return O6(i).te(o=>R6(i,o,s).next(l=>(l&&(a=!0),K.resolve(!l)))).next(()=>a)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(t,(a,o)=>{if(o<=e){const l=this.br(t,a).next(h=>{if(!h)return s++,r.getEntry(t,a).next(()=>(r.removeEntry(a,Pt.min()),vo(t).delete(function(g){return[0,Er(g.path)]}(a))))});i.push(l)}}).next(()=>K.waitFor(i)).next(()=>r.apply(t)).next(()=>s)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Bp(t,e)}Sr(t,e){const r=vo(t);let i,s=Gr.ce;return r.ee({index:mb},([a,o],{path:l,sequenceNumber:h})=>{a===0?(s!==Gr.ce&&e(new xt(Es(i)),s),s=h,i=l):s=Gr.ce}).next(()=>{s!==Gr.ce&&e(new xt(Es(i)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Bp(n,t){return vo(n).put(function(r,i){return{targetId:0,path:Er(r.path),sequenceNumber:i}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.changes=new Sa(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ln.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?K.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Pc(t).put(r)}removeEntry(t,e,r){return Pc(t).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],nm(a),o[o.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Dr(t,r)))}getEntry(t,e){let r=ln.newInvalidDocument(e);return Pc(t).ee({index:h1,range:IDBKeyRange.only(td(e))},(i,s)=>{r=this.Cr(e,s)}).next(()=>r)}vr(t,e){let r={size:0,document:ln.newInvalidDocument(e)};return Pc(t).ee({index:h1,range:IDBKeyRange.only(td(e))},(i,s)=>{r={document:this.Cr(e,s),size:im(s)}}).next(()=>r)}getEntries(t,e){let r=ai();return this.Fr(t,e,(i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)}).next(()=>r)}Mr(t,e){let r=ai(),i=new He(xt.comparator);return this.Fr(t,e,(s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,im(a))}).next(()=>({documents:r,Or:i}))}Fr(t,e,r){if(e.isEmpty())return K.resolve();let i=new Me(rR);e.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(td(i.first()),td(i.last())),a=i.getIterator();let o=a.getNext();return Pc(t).ee({index:h1,range:s},(l,h,d)=>{const g=xt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;o&&rR(o,g)<0;)r(o,null),o=a.getNext();o&&o.isEqual(g)&&(r(o,h),o=a.hasNext()?a.getNext():null),o?d.j(td(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,e,r,i,s){const a=e.path,o=[a.popLast().toArray(),a.lastSegment(),nm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pc(t).J(IDBKeyRange.bound(o,l,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let d=ai();for(const g of h){const m=this.Cr(xt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(B0(e,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(t,e,r,i){let s=ai();const a=nR(e,r),o=nR(e,li.max());return Pc(t).ee({index:b8,range:IDBKeyRange.bound(a,o,!0)},(l,h,d)=>{const g=this.Cr(xt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(t){return new I$(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return eR(t).get(l2).next(e=>(Rt(!!e,20021),e))}Dr(t,e){return eR(t).put(l2,e)}Cr(t,e){if(e){const r=f$(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(Pt.min())))return r}return ln.newInvalidDocument(t)}}function L6(n){return new S$(n)}class I$ extends k6{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new Sa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new Me((s,a)=>Gt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(e.push(this.Nr.removeEntry(t,s,o.readTime)),a.isValidDocument()){const l=BD(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=im(l);r+=h-o.size,e.push(this.Nr.addEntry(t,s,l))}else if(r-=o.size,this.trackRemovals){const l=BD(this.Nr.serializer,a.convertToNoDocument(Pt.min()));e.push(this.Nr.addEntry(t,s,l))}}),i.forEach(s=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Nr.updateMetadata(t,r)),K.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next(r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next(({documents:r,Or:i})=>(i.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function eR(n){return Hn(n,p0)}function Pc(n){return Hn(n,X1)}function td(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function nR(n,t){const e=t.documentKey.path.toArray();return[n,nm(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function rR(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<e.length-2&&s<r.length-2;++s)if(i=Gt(e[s],r[s]),i)return i;return i=Gt(e.length,r.length),i||(i=Gt(e[e.length-2],r[r.length-2]),i||Gt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&Gd(r.mutation,i,Wr.empty(),Oe.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Zt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Zt()){const i=As();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(s=>{let a=yd();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const r=As();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Zt()))}populateOverlays(t,e,r){const i=[];return r.forEach(s=>{e.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,o)=>{e.set(a,o)})})}computeViews(t,e,r,i){let s=ai();const a=Hd(),o=function(){return Hd()}();return e.forEach((l,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Ia)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Gd(d.mutation,h,d.mutation.getFieldMask(),Oe.now())):a.set(h.key,Wr.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,d)=>a.set(h,d)),e.forEach((h,d)=>o.set(h,new C$(d,a.get(h)??null))),o))}recalculateAndSaveOverlays(t,e){const r=Hd();let i=new He((a,o)=>a-o),s=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const o of a)o.keys().forEach(l=>{const h=e.get(l);if(h===null)return;let d=r.get(l)||Wr.empty();d=o.applyToLocalView(h,d),r.set(l,d);const g=(i.get(o.batchId)||Zt()).add(l);i=i.insert(o.batchId,g)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,d=l.value,g=t6();d.forEach(m=>{if(!s.has(m)){const y=a6(e.get(m),r.get(m));y!==null&&g.set(m,y),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,g))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(a){return xt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):PK(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-s.size):K.resolve(As());let o=sh,l=s;return a.next(h=>K.forEach(h,(d,g)=>(o<g.largestBatchId&&(o=g.largestBatchId),s.get(d)?K.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,Zt())).next(d=>({batchId:o,changes:J8(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new xt(e)).next(r=>{let i=yd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const s=e.collectionGroup;let a=yd();return this.indexManager.getCollectionParents(t,s).next(o=>K.forEach(o,l=>{const h=function(g,m){return new km(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,r,i).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,s,i))).next(a=>{s.forEach((l,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ln.newInvalidDocument(d)))});let o=yd();return a.forEach((l,h)=>{const d=s.get(l);d!==void 0&&Gd(d.mutation,h,Wr.empty(),Oe.now()),B0(e,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return K.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:Nr(i.createTime)}}(e)),K.resolve()}getNamedQuery(t,e){return K.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(i){return{name:i.name,query:T6(i.bundledQuery),readTime:Nr(i.readTime)}}(e)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.overlays=new He(xt.comparator),this.qr=new Map}getOverlay(t,e){return K.resolve(this.overlays.get(e))}getOverlays(t,e){const r=As();return K.forEach(e,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,s)=>{this.St(t,e,s)}),K.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(t,e,r){const i=As(),s=e.length+1,a=new xt(e.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return K.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let s=new He((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=As(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const o=As(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>o.set(h,d)),!(o.size()>=i)););return K.resolve(o)}St(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Db(e,r));let s=this.qr.get(e);s===void 0&&(s=Zt(),this.qr.set(e,s)),this.qr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(t){return K.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.Qr=new Me(Qn.$r),this.Ur=new Me(Qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new Qn(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Gr(new Qn(t,e))}zr(t,e){t.forEach(r=>this.removeReference(r,e))}jr(t){const e=new xt(new be([])),r=new Qn(e,t),i=new Qn(e,t+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new xt(new be([])),r=new Qn(e,t),i=new Qn(e,t+1);let s=Zt();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){const e=new Qn(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Qn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return xt.comparator(t.key,e.key)||Gt(t.Yr,e.Yr)}static Kr(t,e){return Gt(t.Yr,e.Yr)||xt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Me(Qn.$r)}checkEmpty(t){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ib(s,e,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Qn(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return K.resolve(a)}lookupMutationBatch(t,e){return K.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.ei(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?il:this.tr-1)}getAllMutationBatches(t){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Qn(e,0),i=new Qn(e,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Me(Gt);return e.forEach(i=>{const s=new Qn(i,0),a=new Qn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let s=r;xt.isDocumentKey(s)||(s=s.child(""));const a=new Qn(new xt(s),0);let o=new Me(Gt);return this.Zr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Yr)),!0)},a),K.resolve(this.ti(o))}ti(t){const e=[];return t.forEach(r=>{const i=this.Xr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){Rt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(e.mutations,i=>{const s=new Qn(i.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,e){const r=new Qn(e,0),i=this.Zr.firstAfterOrEqual(r);return K.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,K.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(t){this.ri=t,this.docs=function(){return new He(xt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return K.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(e))}getEntries(t,e){let r=ai();return e.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ln.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let s=ai();const a=e.path,o=new xt(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||gb(m8(d),r)<=0||(i.has(d.key)||B0(e,d))&&(s=s.insert(d.key,d.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(t,e,r,i){At(9500)}ii(t,e){return K.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new N$(this)}getSize(t){return K.resolve(this.size)}}class N$ extends k6{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)}),K.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(t){this.persistence=t,this.si=new Sa(e=>yl(e),V0),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.oi=0,this._i=new Nb,this.targetCount=0,this.ai=xl.ur()}forEachTarget(t,e){return this.si.forEach((r,i)=>e(i)),K.resolve()}getLastRemoteSnapshotVersion(t){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return K.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),K.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new xl(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,K.resolve()}updateTargetData(t,e){return this.Pr(e),K.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,K.resolve()}removeTargets(t,e,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=e&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(t){return K.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return K.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),K.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),K.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),K.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return K.resolve(r)}containsKey(t,e){return K.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t,e){this.ui={},this.overlays={},this.ci=new Gr(0),this.li=!1,this.li=!0,this.hi=new O$,this.referenceDelegate=t(this),this.Pi=new k$(this),this.indexManager=new x$,this.remoteDocumentCache=function(i){return new P$(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new E6(e),this.Ii=new D$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new R$,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new M$(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){ft("MemoryPersistence","Starting transaction:",t);const i=new L$(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(t,e){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,e)))}}class L$ extends v8{constructor(t){super(),this.currentSequenceNumber=t}}class Hm{constructor(t){this.persistence=t,this.Ri=new Nb,this.Vi=null}static mi(t){return new Hm(t)}get fi(){if(this.Vi)return this.Vi;throw At(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),K.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),K.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const i=xt.fromPath(r);return this.gi(t,i).next(s=>{s||e.removeEntry(i,Pt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return K.or([()=>K.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class sm{constructor(t,e){this.persistence=t,this.pi=new Sa(r=>Er(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=N6(this,e)}static mi(t,e){return new sm(t,e)}Ei(){}di(t){return K.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}wr(t){let e=0;return this.pr(t,r=>{e++}).next(()=>e)}pr(t,e){return K.forEach(this.pi,(r,i)=>this.br(t,r,i).next(s=>s?K.resolve():e(i)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(t,a=>this.br(t,a,e).next(o=>{o||(r++,s.removeEntry(a,Pt.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),K.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),K.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),K.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),K.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=d1(t.data.value)),e}br(t,e,r){return K.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(t){this.serializer=t}k(t,e,r,i){const s=new Cm("createOrUpgrade",e);r<1&&i>=1&&(function(l){l.createObjectStore(L0)}(t),function(l){l.createObjectStore(g0,{keyPath:$X}),l.createObjectStore(qi,{keyPath:gD,autoIncrement:!0}).createIndex(Zc,pD,{unique:!0}),l.createObjectStore(ah)}(t),iR(t),function(l){l.createObjectStore(jc)}(t));let a=K.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(ch),l.deleteObjectStore(oh),l.deleteObjectStore(sl)}(t),iR(t)),a=a.next(()=>function(l){const h=l.store(sl),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return h.put(K1,d)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,h){return h.store(qi).J().next(g=>{l.deleteObjectStore(qi),l.createObjectStore(qi,{keyPath:gD,autoIncrement:!0}).createIndex(Zc,pD,{unique:!0});const m=h.store(qi),y=g.map(x=>m.put(x));return K.waitFor(y)})}(t,s))),a=a.next(()=>{(function(l){l.createObjectStore(lh,{keyPath:sK})})(t)})),r<5&&i>=5&&(a=a.next(()=>this.yi(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore(p0)}(t),this.wi(s)))),r<7&&i>=7&&(a=a.next(()=>this.Si(s))),r<8&&i>=8&&(a=a.next(()=>this.bi(t,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&i>=10&&(a=a.next(()=>this.Di(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(Rm,{keyPath:aK})})(t),function(l){l.createObjectStore(Om,{keyPath:oK})}(t)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){const h=l.createObjectStore(Mm,{keyPath:gK});h.createIndex(h2,pK,{unique:!1}),h.createIndex(S8,mK,{unique:!1})})(t)})),r<13&&i>=13&&(a=a.next(()=>function(l){const h=l.createObjectStore(X1,{keyPath:ZX});h.createIndex(h1,JX),h.createIndex(b8,tK)}(t)).next(()=>this.Ci(t,s)).next(()=>t.deleteObjectStore(jc))),r<14&&i>=14&&(a=a.next(()=>this.Fi(t,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore(yb,{keyPath:cK,autoIncrement:!0}).createIndex(u2,lK,{unique:!1}),l.createObjectStore(Fd,{keyPath:uK}).createIndex(A8,hK,{unique:!1}),l.createObjectStore(Ud,{keyPath:fK}).createIndex(T8,dK,{unique:!1})}(t))),r<16&&i>=16&&(a=a.next(()=>{e.objectStore(Fd).clear()}).next(()=>{e.objectStore(Ud).clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(vb,{keyPath:yK})})(t)})),r<18&&i>=18&&YM()&&(a=a.next(()=>{e.objectStore(Fd).clear()}).next(()=>{e.objectStore(Ud).clear()})),a}wi(t){let e=0;return t.store(jc).ee((r,i)=>{e+=im(i)}).next(()=>{const r={byteSize:e};return t.store(p0).put(l2,r)})}yi(t){const e=t.store(g0),r=t.store(qi);return e.J().next(i=>K.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,il],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Zc,a).next(o=>K.forEach(o,l=>{Rt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const h=Wc(this.serializer,l);return D6(t,s.userId,h).next(()=>{})}))}))}Si(t){const e=t.store(ch),r=t.store(jc);return t.store(sl).get(K1).next(i=>{const s=[];return r.ee((a,o)=>{const l=new be(a),h=function(g){return[0,Er(g)]}(l);s.push(e.get(h).next(d=>d?K.resolve():(g=>e.put({targetId:0,path:Er(g),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>K.waitFor(s))})}bi(t,e){t.createObjectStore(m0,{keyPath:iK});const r=e.store(m0),i=new Pb,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Er(l)})}};return e.store(jc).ee({X:!0},(a,o)=>{const l=new be(a);return s(l.popLast())}).next(()=>e.store(ah).ee({X:!0},([a,o,l],h)=>{const d=Es(o);return s(d.popLast())}))}Di(t){const e=t.store(oh);return e.ee((r,i)=>{const s=_d(i),a=A6(this.serializer,s);return e.put(a)})}Ci(t,e){const r=e.store(jc),i=[];return r.ee((s,a)=>{const o=e.store(X1),l=function(g){return g.document?new xt(be.fromString(g.document.name).popFirst(5)):g.noDocument?xt.fromSegments(g.noDocument.path):g.unknownDocument?xt.fromSegments(g.unknownDocument.path):At(36783)}(a).path.toArray(),h={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(h))}).next(()=>K.waitFor(i))}Fi(t,e){const r=e.store(qi),i=L6(this.serializer),s=new kb(Hm.mi,this.serializer.yt);return r.J().next(a=>{const o=new Map;return a.forEach(l=>{let h=o.get(l.userId)??Zt();Wc(this.serializer,l).keys().forEach(d=>h=h.add(d)),o.set(l.userId,h)}),K.forEach(o,(l,h)=>{const d=new yr(h),g=jm.wt(this.serializer,d),m=s.getIndexManager(d),y=zm.wt(d,this.serializer,m,s.referenceDelegate);return new V6(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new f2(e,Gr.ce),l).next()})})}}function iR(n){n.createObjectStore(ch,{keyPath:nK}).createIndex(mb,rK,{unique:!0}),n.createObjectStore(oh,{keyPath:"targetId"}).createIndex(E8,eK,{unique:!0}),n.createObjectStore(sl)}const ao="IndexedDbPersistence",Z_=18e5,J_=5e3,tx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",B$="main";class Lb{constructor(t,e,r,i,s,a,o,l,h,d,g=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=h,this.Oi=d,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!Lb.v())throw new _t(ut.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T$(this,i),this.$i=e+B$,this.serializer=new E6(l),this.Ui=new Do(this.$i,this.Ni,new V$(this.serializer)),this.hi=new g$,this.Pi=new b$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=L6(this.serializer),this.Ii=new d$,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&yn(ao,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _t(ut.FAILED_PRECONDITION,tx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Pi.getHighestSequenceNumber(t))}).then(t=>{this.ci=new Gr(t,this.xi)}).then(()=>{this.li=!0}).catch(t=>(this.Ui&&this.Ui.close(),Promise.reject(t)))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Fp(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(t).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(t)).next(e=>this.isPrimary&&!e?this.Zi(t).next(()=>!1):!!e&&this.Xi(t).next(()=>!0))).catch(t=>{if(qo(t))return ft(ao,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return ft(ao,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable(()=>this.Qi(t)),this.isPrimary=t})}Hi(t){return ed(t).get(Au).next(e=>K.resolve(this.es(e)))}ts(t){return Fp(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Z_)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=Hn(e,lh);return r.J().next(i=>{const s=this.ss(i,Z_),a=i.filter(o=>s.indexOf(o)===-1);return K.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?K.resolve(!0):ed(t).get(Au).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,J_)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new _t(ut.FAILED_PRECONDITION,tx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fp(t).J().next(r=>this.ss(r,J_).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&ft(ao,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[L0,lh],t=>{const e=new f2(t,Gr.ce);return this.Zi(e).next(()=>this.ts(e))}),this.Ui.close(),this.Ps()}ss(t,e){return t.filter(r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",t=>Fp(t).J().next(e=>this.ss(e,Z_).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return zm.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new w$(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return jm.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){ft(ao,"Starting transaction:",t);const i=e==="readonly"?"readonly":"readwrite",s=function(l){return l===18?xK:l===17?R8:l===16?_K:l===15?_b:l===14?D8:l===13?C8:l===12?vK:l===11?I8:void At(60245)}(this.Ni);let a;return this.Ui.runTransaction(t,i,s,o=>(a=new f2(o,this.ci?this.ci.next():Gr.ce),e==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw yn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new _t(ut.FAILED_PRECONDITION,y8);return r(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(t){return ed(t).get(Au).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,J_)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new _t(ut.FAILED_PRECONDITION,tx)})}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ed(t).put(Au,e)}static v(){return Do.v()}Zi(t){const e=ed(t);return e.get(Au).next(r=>this.es(r)?(ft(ao,"Releasing primary lease."),e.delete(Au)):K.resolve())}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(yn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;qM()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return ft(ao,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yn(ao,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){yn("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ed(n){return Hn(n,L0)}function Fp(n){return Hn(n,lh)}function B6(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=i}static As(t,e){let r=Zt(),i=Zt();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Vb(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qM()?8:_8(zn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,i){const s={result:null};return this.ys(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(t,e,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new F$;return this.Ss(t,e,a).next(o=>{if(s.result=o,this.Vs)return this.bs(t,e,a,o.size)})}).next(()=>s.result)}bs(t,e,r,i){return r.documentReadCount<this.fs?(Mu()<=ie.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Pu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Mu()<=ie.DEBUG&&ft("QueryEngine","Query:",Pu(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Mu()<=ie.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Pu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ci(e))):K.resolve())}ys(t,e){if(CD(e))return K.resolve(null);let r=ci(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=v2(e,null,"F"),r=ci(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const a=Zt(...s);return this.ps.getDocuments(t,a).next(o=>this.indexManager.getMinOffset(t,r).next(l=>{const h=this.Ds(e,o);return this.Cs(e,h,a,l.readTime)?this.ys(t,v2(e,null,"F")):this.vs(t,h,e,l)}))})))}ws(t,e,r,i){return CD(e)||i.isEqual(Pt.min())?K.resolve(null):this.ps.getDocuments(t,r).next(s=>{const a=this.Ds(e,s);return this.Cs(e,a,r,i)?K.resolve(null):(Mu()<=ie.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pu(e)),this.vs(t,a,e,p8(i,sh)).next(o=>o))})}Ds(t,e){let r=new Me(Q8(t));return e.forEach((i,s)=>{B0(t,s)&&(r=r.add(s))}),r}Cs(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(t,e,r){return Mu()<=ie.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Pu(e)),this.ps.getDocumentsMatchingQuery(t,e,li.min(),r)}vs(t,e,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="LocalStore",U$=3e8;class j${constructor(t,e,r,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new He(Gt),this.xs=new Sa(s=>yl(s),V0),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new V6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function U6(n,t,e,r){return new j$(n,t,e,r)}async function j6(n,t){const e=Ct(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,e.Bs(t),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=Zt();for(const h of i){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of s){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return e.localDocuments.getDocuments(r,l).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:o}))})})}function z$(n,t){const e=Ct(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=e.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,h,d){const g=h.batch,m=g.keys();let y=K.resolve();return m.forEach(x=>{y=y.next(()=>d.getEntry(l,x)).next(b=>{const E=h.docVersions.get(x);Rt(E!==null,48541),b.version.compareTo(E)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),d.addEntry(b)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(l,g))}(e,r,t,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Zt();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function z6(n){const t=Ct(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function H$(n,t){const e=Ct(n),r=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const o=[];t.targetChanges.forEach((d,g)=>{const m=i.get(g);if(!m)return;o.push(e.Pi.removeMatchingKeys(s,d.removedDocuments,g).next(()=>e.Pi.addMatchingKeys(s,d.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?y=y.withResumeToken(wn.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(g,y),function(b,E,T){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=U$?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,y,d)&&o.push(e.Pi.updateTargetData(s,y))});let l=ai(),h=Zt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(G$(s,a,t.documentUpdates).next(d=>{l=d.ks,h=d.qs})),!r.isEqual(Pt.min())){const d=e.Pi.getLastRemoteSnapshotVersion(s).next(g=>e.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return K.waitFor(o).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.Ms=i,s))}function G$(n,t,e){let r=Zt(),i=Zt();return e.forEach(s=>r=r.add(s)),t.getEntries(n,r).next(s=>{let a=ai();return e.forEach((o,l)=>{const h=s.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Pt.min())?(t.removeEntry(o,l.readTime),a=a.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(l),a=a.insert(o,l)):ft(Bb,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{ks:a,qs:i}})}function W$(n,t){const e=Ct(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=il),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function am(n,t){const e=Ct(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Pi.getTargetData(r,t).next(s=>s?(i=s,K.resolve(i)):e.Pi.allocateTargetId(r).next(a=>(i=new va(t,a,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r})}async function yh(n,t,e){const r=Ct(n),i=r.Ms.get(t),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!qo(a))throw a;ft(Bb,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function S2(n,t,e){const r=Ct(n);let i=Pt.min(),s=Zt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,h,d){const g=Ct(l),m=g.xs.get(d);return m!==void 0?K.resolve(g.Ms.get(m)):g.Pi.getTargetData(h,d)}(r,a,ci(t)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,t,e?i:Pt.min(),e?s:Zt())).next(o=>(W6(r,$8(t),o),{documents:o,Qs:s})))}function H6(n,t){const e=Ct(n),r=Ct(e.Pi),i=e.Ms.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",s=>r.At(s,t).next(a=>a?a.target:null))}function G6(n,t){const e=Ct(n),r=e.Os.get(t)||Pt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ns.getAllFromCollectionGroup(i,t,p8(r,sh),Number.MAX_SAFE_INTEGER)).then(i=>(W6(e,t,i),i))}function W6(n,t,e){let r=n.Os.get(t)||Pt.min();e.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6="firestore_clients";function sR(n,t){return`${q6}_${n}_${t}`}const Y6="firestore_mutations";function aR(n,t,e){let r=`${Y6}_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const X6="firestore_targets";function ex(n,t){return`${X6}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="SharedClientState";class om{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ws(t,e,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new _t(i.error.code,i.error.message))),a?new om(t,e,i.state,s):(yn(xs,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wd{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new _t(r.error.code,r.error.message))),s?new Wd(t,r.state,i):(yn(xs,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class cm{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Tb();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=x8(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new cm(t,s):(yn(xs,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Fb{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Fb(e.clientId,e.onlineState):(yn(xs,`Failed to parse online state: ${t}`),null)}}class I2{constructor(){this.activeTargetIds=Tb()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nx{constructor(t,e,r,i,s){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new He(Gt),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=sR(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new I2),this.ro=new RegExp(`^${q6}_${a}_([^_]*)$`),this.io=new RegExp(`^${Y6}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${X6}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const i=this.getItem(sR(this.persistenceKey,r));if(i){const s=cm.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(ex(this.persistenceKey,t));if(i){const s=Wd.Ws(t,i);s&&(r=s.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(ex(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Po(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return ft(xs,"READ",t,e),e}setItem(t,e){ft(xs,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){ft(xs,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(ft(xs,"EVENT",e.key,e.newValue),e.key===this.eo)return void yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=function(s){let a=Gr.ce;if(s!=null)try{const o=JSON.parse(s);Rt(typeof o=="number",30636,{So:s}),a=o}catch(o){yn(xs,"Failed to read sequence number from WebStorage",o)}return a}(e.newValue);r!==Gr.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(e)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const i=new om(this.currentUser,t,e,r),s=aR(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Gs())}Po(t){const e=aR(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const i=ex(this.persistenceKey,t),s=new Wd(t,e,r);this.setItem(i,s.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return cm.Ws(r,e)}fo(t,e){const r=this.io.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return om.Ws(new yr(s),i,e)}yo(t,e){const r=this.so.exec(t),i=Number(r[1]);return Wd.Ws(i,e)}uo(t){return Fb.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);ft(xs,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),i=this.lo(this.Zs),s=this.lo(r),a=[],o=[];return s.forEach(l=>{i.has(l)||a.push(l)}),i.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=r})}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Tb();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class K6{constructor(){this.Mo=new I2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new I2,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="ConnectivityMonitor";class cR{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(oR,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ft(oR,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up=null;function C2(){return Up===null?Up=function(){return 268435456+Math.round(2147483648*Math.random())}():Up++,"0x"+Up.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="RestConnection",Y$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X${get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,e,r,i,s){const a=C2(),o=this.zo(t,e.toUriEncodedString());ft(rx,`Sending RPC '${t}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:h}=new URL(o),d=Ih(h);return this.Jo(t,o,l,r,d).then(g=>(ft(rx,`Received RPC '${t}' ${a}: `,g),g),g=>{throw h0(rx,`RPC '${t}' ${a} failed with error: `,g,"url: ",o,"request:",r),g})}Ho(t,e,r,i,s,a){return this.Go(t,e,r,i,s)}jo(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,s)=>t[s]=i),r&&r.headers.forEach((i,s)=>t[s]=i)}zo(t,e){const r=Y$[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="WebChannelConnection";class $$ extends X${constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,i,s){const a=C2();return new Promise((o,l)=>{const h=new a8;h.setWithCredentials(!0),h.listenOnce(o8.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case c1.NO_ERROR:const g=h.getResponseJson();ft(pr,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),o(g);break;case c1.TIMEOUT:ft(pr,`RPC '${t}' ${a} timed out`),l(new _t(ut.DEADLINE_EXCEEDED,"Request time out"));break;case c1.HTTP_ERROR:const m=h.getStatus();if(ft(pr,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const b=function(T){const S=T.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(S)>=0?S:ut.UNKNOWN}(x.status);l(new _t(b,x.message))}else l(new _t(ut.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new _t(ut.UNAVAILABLE,"Connection failed."));break;default:At(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ft(pr,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(i);ft(pr,`RPC '${t}' ${a} sending request:`,i),h.send(e,"POST",d,r,15)})}T_(t,e,r){const i=C2(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=u8(),o=l8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,e,r),l.encodeInitMessageHeaders=!0;const d=s.join("");ft(pr,`Creating RPC '${t}' stream ${i}: ${d}`,l);const g=a.createWebChannel(d,l);this.I_(g);let m=!1,y=!1;const x=new K$({Yo:E=>{y?ft(pr,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(m||(ft(pr,`Opening RPC '${t}' stream ${i} transport.`),g.open(),m=!0),ft(pr,`RPC '${t}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),b=(E,T,S)=>{E.listen(T,R=>{try{S(R)}catch(k){setTimeout(()=>{throw k},0)}})};return b(g,md.EventType.OPEN,()=>{y||(ft(pr,`RPC '${t}' stream ${i} transport opened.`),x.o_())}),b(g,md.EventType.CLOSE,()=>{y||(y=!0,ft(pr,`RPC '${t}' stream ${i} transport closed`),x.a_(),this.E_(g))}),b(g,md.EventType.ERROR,E=>{y||(y=!0,h0(pr,`RPC '${t}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),x.a_(new _t(ut.UNAVAILABLE,"The operation could not be completed")))}),b(g,md.EventType.MESSAGE,E=>{var T;if(!y){const S=E.data[0];Rt(!!S,16349);const R=S,k=(R==null?void 0:R.error)||((T=R[0])==null?void 0:T.error);if(k){ft(pr,`RPC '${t}' stream ${i} received error:`,k);const P=k.status;let H=function(O){const L=Sn[O];if(L!==void 0)return l6(L)}(P),M=k.message;H===void 0&&(H=ut.INTERNAL,M="Unknown error status: "+P+" with message "+k.message),y=!0,x.a_(new _t(H,M)),g.close()}else ft(pr,`RPC '${t}' stream ${i} received:`,S),x.u_(S)}}),b(o,c8.STAT_EVENT,E=>{E.stat===a2.PROXY?ft(pr,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===a2.NOPROXY&&ft(pr,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(){return typeof window<"u"?window:null}function v1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n){return new n$(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(t,e,r=1e3,i=1.5,s=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="PersistentStream";class Z6{constructor(t,e,r,i,s,a,o,l){this.Mi=t,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Q6(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ut.RESOURCE_EXHAUSTED?(yn(e.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===e&&this.G_(r,i)},r=>{t(()=>{const i=new _t(ut.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ft(lR,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(ft(lR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q$ extends Z6{constructor(t,e,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=s$(this.serializer,t),r=function(s){if(!("targetChange"in s))return Pt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?Nr(a.readTime):Pt.min()}(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=w2(this.serializer),e.addTarget=function(s,a){let o;const l=a.target;if(o=Z1(l)?{documents:y6(s,l)}:{query:v6(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=f6(s,a.resumeToken);const h=_2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=mh(s,a.snapshotVersion.toTimestamp());const h=_2(s,a.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,t);const r=o$(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=w2(this.serializer),e.removeTarget=t,this.q_(e)}}class Z$ extends Z6{constructor(t,e,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Rt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Rt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Rt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=a$(t.writeResults,t.commitTime),r=Nr(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=w2(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>em(this.serializer,r))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${}class tQ extends J${constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new _t(ut.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(t,x2(e,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(ut.UNKNOWN,s.toString())})}Ho(t,e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(t,x2(e,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _t(ut.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class eQ{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yn(e),this.aa=!1):ft("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="RemoteStore";class nQ{constructor(t,e,r,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Il(this)&&(ft(wl,"Restarting streams for network reachability change."),await async function(l){const h=Ct(l);h.Ea.add(4),await j0(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Wm(h)}(this))})}),this.Ra=new eQ(r,i)}}async function Wm(n){if(Il(n))for(const t of n.da)await t(!0)}async function j0(n){for(const t of n.da)await t(!1)}function qm(n,t){const e=Ct(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),zb(e)?jb(e):Ph(e).O_()&&Ub(e,t))}function vh(n,t){const e=Ct(n),r=Ph(e);e.Ia.delete(t),r.O_()&&J6(e,t),e.Ia.size===0&&(r.O_()?r.L_():Il(e)&&e.Ra.set("Unknown"))}function Ub(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Pt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Ph(n).Y_(t)}function J6(n,t){n.Va.Ue(t),Ph(n).Z_(t)}function jb(n){n.Va=new ZK({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Ph(n).start(),n.Ra.ua()}function zb(n){return Il(n)&&!Ph(n).x_()&&n.Ia.size>0}function Il(n){return Ct(n).Ea.size===0}function tN(n){n.Va=void 0}async function rQ(n){n.Ra.set("Online")}async function iQ(n){n.Ia.forEach((t,e)=>{Ub(n,t)})}async function sQ(n,t){tN(n),zb(n)?(n.Ra.ha(t),jb(n)):n.Ra.set("Unknown")}async function aQ(n,t,e){if(n.Ra.set("Online"),t instanceof h6&&t.state===2&&t.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(n,t)}catch(r){ft(wl,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await lm(n,r)}else if(t instanceof m1?n.Va.Ze(t):t instanceof u6?n.Va.st(t):n.Va.tt(t),!e.isEqual(Pt.min()))try{const r=await z6(n.localStore);e.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,h)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(wn.EMPTY_BYTE_STRING,d.snapshotVersion)),J6(s,l);const g=new va(d.target,l,h,d.sequenceNumber);Ub(s,g)}),s.remoteSyncer.applyRemoteEvent(o)}(n,e)}catch(r){ft(wl,"Failed to raise snapshot:",r),await lm(n,r)}}async function lm(n,t,e){if(!qo(t))throw t;n.Ea.add(1),await j0(n),n.Ra.set("Offline"),e||(e=()=>z6(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ft(wl,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Wm(n)})}function eN(n,t){return t().catch(e=>lm(n,e,t))}async function Mh(n){const t=Ct(n),e=Fo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:il;for(;oQ(t);)try{const i=await W$(t.localStore,r);if(i===null){t.Ta.length===0&&e.L_();break}r=i.batchId,cQ(t,i)}catch(i){await lm(t,i)}nN(t)&&rN(t)}function oQ(n){return Il(n)&&n.Ta.length<10}function cQ(n,t){n.Ta.push(t);const e=Fo(n);e.O_()&&e.X_&&e.ea(t.mutations)}function nN(n){return Il(n)&&!Fo(n).x_()&&n.Ta.length>0}function rN(n){Fo(n).start()}async function lQ(n){Fo(n).ra()}async function uQ(n){const t=Fo(n);for(const e of n.Ta)t.ea(e.mutations)}async function hQ(n,t,e){const r=n.Ta.shift(),i=Cb.from(r,t,e);await eN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Mh(n)}async function fQ(n,t){t&&Fo(n).X_&&await async function(r,i){if(function(a){return KK(a)&&a!==ut.ABORTED}(i.code)){const s=r.Ta.shift();Fo(r).B_(),await eN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Mh(r)}}(n,t),nN(n)&&rN(n)}async function uR(n,t){const e=Ct(n);e.asyncQueue.verifyOperationInProgress(),ft(wl,"RemoteStore received new credentials");const r=Il(e);e.Ea.add(3),await j0(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Wm(e)}async function D2(n,t){const e=Ct(n);t?(e.Ea.delete(2),await Wm(e)):t||(e.Ea.add(2),await j0(e),e.Ra.set("Unknown"))}function Ph(n){return n.ma||(n.ma=function(e,r,i){const s=Ct(e);return s.sa(),new Q$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:rQ.bind(null,n),t_:iQ.bind(null,n),r_:sQ.bind(null,n),H_:aQ.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),zb(n)?jb(n):n.Ra.set("Unknown")):(await n.ma.stop(),tN(n))})),n.ma}function Fo(n){return n.fa||(n.fa=function(e,r,i){const s=Ct(e);return s.sa(),new Z$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:lQ.bind(null,n),r_:fQ.bind(null,n),ta:uQ.bind(null,n),na:hQ.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Mh(n)):(await n.fa.stop(),n.Ta.length>0&&(ft(wl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t,e,r,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,s){const a=Date.now()+r,o=new Hb(t,e,a,i,s);return o.start(r),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(ut.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gb(n,t){if(yn("AsyncQueue",`${t}: ${n}`),qo(n))return new _t(ut.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{static emptySet(t){return new Zu(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||xt.comparator(e.key,r.key):(e,r)=>xt.comparator(e.key,r.key),this.keyedMap=yd(),this.sortedSet=new He(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Zu)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Zu;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.ga=new He(xt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):At(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,r)=>{t.push(r)}),t}}class _h{constructor(t,e,r,i,s,a,o,l,h){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,r,i,s){const a=[];return e.forEach(o=>{a.push({type:0,doc:o})}),new _h(t,e,Zu.emptySet(e),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class gQ{constructor(){this.queries=fR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const i=Ct(e),s=i.queries;i.queries=fR(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new _t(ut.ABORTED,"Firestore shutting down"))}}function fR(){return new Sa(n=>K8(n),Vm)}async function iN(n,t){const e=Ct(n);let r=3;const i=t.query;let s=e.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new dQ,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await e.onListen(i,!0);break;case 1:s.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(a){const o=Gb(a,`Initialization of query '${Pu(t.query)}' failed`);return void t.onError(o)}e.queries.set(i,s),s.Sa.push(t),t.va(e.onlineState),s.wa&&t.Fa(s.wa)&&Wb(e)}async function sN(n,t){const e=Ct(n),r=t.query;let i=3;const s=e.queries.get(r);if(s){const a=s.Sa.indexOf(t);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function pQ(n,t){const e=Ct(n);let r=!1;for(const i of t){const s=i.query,a=e.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&Wb(e)}function mQ(n,t,e){const r=Ct(n),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(e);r.queries.delete(t)}function Wb(n){n.Ca.forEach(t=>{t.next()})}var R2,dR;(dR=R2||(R2={})).Ma="default",dR.Cache="cache";class aN{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new _h(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=_h.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==R2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t){this.key=t}}class cN{constructor(t){this.key=t}}class yQ{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Zt(),this.mutatedKeys=Zt(),this.eu=Q8(t),this.tu=new Zu(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new hR,i=e?e.tu:this.tu;let s=e?e.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,g)=>{const m=i.get(d),y=B0(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?x!==b&&(r.track({type:3,doc:y}),E=!0):this.su(m,y)||(r.track({type:2,doc:y}),E=!0,(l&&this.eu(y,l)>0||h&&this.eu(y,h)<0)&&(o=!0)):!m&&y?(r.track({type:0,doc:y}),E=!0):m&&!y&&(r.track({type:1,doc:m}),E=!0,(l||h)&&(o=!0)),E&&(y?(a=a.add(y),s=b?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((d,g)=>function(y,x){const b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At(20277,{Rt:E})}};return b(y)-b(x)}(d.type,g.type)||this.eu(d.doc,g.doc)),this.ou(r),i=i??!1;const o=e&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,h=l!==this.Za;return this.Za=l,a.length!==0||h?{snapshot:new _h(this.query,t.tu,s,a,t.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hR,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Zt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const e=[];return t.forEach(r=>{this.Xa.has(r)||e.push(new cN(r))}),this.Xa.forEach(r=>{t.has(r)||e.push(new oN(r))}),e}cu(t){this.Ya=t.Qs,this.Xa=Zt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return _h.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Nh="SyncEngine";class vQ{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class _Q{constructor(t){this.key=t,this.hu=!1}}class xQ{constructor(t,e,r,i,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Sa(o=>K8(o),Vm),this.Iu=new Map,this.Eu=new Set,this.du=new He(xt.comparator),this.Au=new Map,this.Ru=new Nb,this.Vu={},this.mu=new Map,this.fu=xl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wQ(n,t,e=!0){const r=Ym(n);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await lN(r,t,e,!0),i}async function bQ(n,t){const e=Ym(n);await lN(e,t,!0,!1)}async function lN(n,t,e,r){const i=await am(n.localStore,ci(t)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,e);let o;return r&&(o=await qb(n,t,s,a==="current",i.resumeToken)),n.isPrimaryClient&&e&&qm(n.remoteStore,i),o}async function qb(n,t,e,r,i){n.pu=(g,m,y)=>async function(b,E,T,S){let R=E.view.ru(T);R.Cs&&(R=await S2(b.localStore,E.query,!1).then(({documents:M})=>E.view.ru(M,R)));const k=S&&S.targetChanges.get(E.targetId),P=S&&S.targetMismatches.get(E.targetId)!=null,H=E.view.applyChanges(R,b.isPrimaryClient,k,P);return O2(b,E.targetId,H.au),H.snapshot}(n,g,m,y);const s=await S2(n.localStore,t,!0),a=new yQ(t,s.Qs),o=a.ru(s.documents),l=U0.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),h=a.applyChanges(o,n.isPrimaryClient,l);O2(n,e,h.au);const d=new vQ(t,e,a);return n.Tu.set(t,d),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),h.snapshot}async function EQ(n,t,e){const r=Ct(n),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!Vm(a,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await yh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&vh(r.remoteStore,i.targetId),xh(r,i.targetId)}).catch(Wo)):(xh(r,i.targetId),await yh(r.localStore,i.targetId,!0))}async function AQ(n,t){const e=Ct(n),r=e.Tu.get(t),i=e.Iu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),vh(e.remoteStore,r.targetId))}async function TQ(n,t,e){const r=$b(n);try{const i=await function(a,o){const l=Ct(a),h=Oe.now(),d=o.reduce((y,x)=>y.add(x.key),Zt());let g,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=ai(),b=Zt();return l.Ns.getEntries(y,d).next(E=>{x=E,x.forEach((T,S)=>{S.isValidDocument()||(b=b.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(E=>{g=E;const T=[];for(const S of o){const R=YK(S,g.get(S.key).overlayedDocument);R!=null&&T.push(new Ia(S.key,R,U8(R.value.mapValue),br.exists(!0)))}return l.mutationQueue.addMutationBatch(y,h,T,o)}).next(E=>{m=E;const T=E.applyToLocalDocumentSet(g,b);return l.documentOverlayCache.saveOverlays(y,E.batchId,T)})}).then(()=>({batchId:m.batchId,changes:J8(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let h=a.Vu[a.currentUser.toKey()];h||(h=new He(Gt)),h=h.insert(o,l),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,e),await Xo(r,i.changes),await Mh(r.remoteStore)}catch(i){const s=Gb(i,"Failed to persist write");e.reject(s)}}async function uN(n,t){const e=Ct(n);try{const r=await H$(e.localStore,t);t.targetChanges.forEach((i,s)=>{const a=e.Au.get(s);a&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Rt(a.hu,14607):i.removedDocuments.size>0&&(Rt(a.hu,42227),a.hu=!1))}),await Xo(e,r,t)}catch(r){await Wo(r)}}function gR(n,t,e){const r=Ct(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(t);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Ct(a);l.onlineState=o;let h=!1;l.queries.forEach((d,g)=>{for(const m of g.Sa)m.va(o)&&(h=!0)}),h&&Wb(l)}(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function SQ(n,t,e){const r=Ct(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Au.get(t),s=i&&i.key;if(s){let a=new He(xt.comparator);a=a.insert(s,ln.newNoDocument(s,Pt.min()));const o=Zt().add(s),l=new F0(Pt.min(),new Map,new He(Gt),a,o);await uN(r,l),r.du=r.du.remove(s),r.Au.delete(t),Kb(r)}else await yh(r.localStore,t,!1).then(()=>xh(r,t,e)).catch(Wo)}async function IQ(n,t){const e=Ct(n),r=t.batch.batchId;try{const i=await z$(e.localStore,t);Xb(e,r,null),Yb(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Xo(e,i)}catch(i){await Wo(i)}}async function CQ(n,t,e){const r=Ct(n);try{const i=await function(a,o){const l=Ct(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return l.mutationQueue.lookupMutationBatch(h,o).next(g=>(Rt(g!==null,37113),d=g.keys(),l.mutationQueue.removeMutationBatch(h,g))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>l.localDocuments.getDocuments(h,d))})}(r.localStore,t);Xb(r,t,e),Yb(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Xo(r,i)}catch(i){await Wo(i)}}function Yb(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function Xb(n,t,e){const r=Ct(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(e?s.reject(e):s.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function xh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(r=>{n.Ru.containsKey(r)||hN(n,r)})}function hN(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(vh(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),Kb(n))}function O2(n,t,e){for(const r of e)r instanceof oN?(n.Ru.addReference(r.key,t),DQ(n,r)):r instanceof cN?(ft(Nh,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||hN(n,r.key)):At(19791,{wu:r})}function DQ(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(ft(Nh,"New document in limbo: "+e),n.Eu.add(r),Kb(n))}function Kb(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new xt(be.fromString(t)),r=n.fu.next();n.Au.set(r,new _Q(e)),n.du=n.du.insert(e,r),qm(n.remoteStore,new va(ci(Lm(e.path)),r,"TargetPurposeLimboResolution",Gr.ce))}}async function Xo(n,t,e){const r=Ct(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,t,e).then(h=>{var d;if((h||e)&&r.isPrimaryClient){const g=h?!h.fromCache:(d=e==null?void 0:e.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(h){i.push(h);const g=Vb.As(l.targetId,h);s.push(g)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(l,h){const d=Ct(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(h,m=>K.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>K.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!qo(g))throw g;ft(Bb,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const y=d.Ms.get(m),x=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,b)}}}(r.localStore,s))}async function RQ(n,t){const e=Ct(n);if(!e.currentUser.isEqual(t)){ft(Nh,"User change. New user:",t.toKey());const r=await j6(e.localStore,t);e.currentUser=t,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new _t(ut.CANCELLED,a))})}),s.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Xo(e,r.Ls)}}function OQ(n,t){const e=Ct(n),r=e.Au.get(t);if(r&&r.hu)return Zt().add(r.key);{let i=Zt();const s=e.Iu.get(t);if(!s)return i;for(const a of s){const o=e.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function MQ(n,t){const e=Ct(n),r=await S2(e.localStore,t.query,!0),i=t.view.cu(r);return e.isPrimaryClient&&O2(e,t.targetId,i.au),i}async function PQ(n,t){const e=Ct(n);return G6(e.localStore,t).then(r=>Xo(e,r))}async function NQ(n,t,e,r){const i=Ct(n),s=await function(o,l){const h=Ct(o),d=Ct(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>d.er(g,l).next(m=>m?h.localDocuments.getDocuments(g,m):K.resolve(null)))}(i.localStore,t);s!==null?(e==="pending"?await Mh(i.remoteStore):e==="acknowledged"||e==="rejected"?(Xb(i,t,r||null),Yb(i,t),function(o,l){Ct(Ct(o).mutationQueue).ir(l)}(i.localStore,t)):At(6720,"Unknown batchState",{Su:e}),await Xo(i,s)):ft(Nh,"Cannot apply mutation batch with id: "+t)}async function kQ(n,t){const e=Ct(n);if(Ym(e),$b(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),i=await pR(e,r.toArray());e.gu=!0,await D2(e.remoteStore,!0);for(const s of i)qm(e.remoteStore,s)}else if(t===!1&&e.gu!==!1){const r=[];let i=Promise.resolve();e.Iu.forEach((s,a)=>{e.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(xh(e,a),yh(e.localStore,a,!0))),vh(e.remoteStore,a)}),await i,await pR(e,r),function(a){const o=Ct(a);o.Au.forEach((l,h)=>{vh(o.remoteStore,h)}),o.Ru.Jr(),o.Au=new Map,o.du=new He(xt.comparator)}(e),e.gu=!1,await D2(e.remoteStore,!1)}}async function pR(n,t,e){const r=Ct(n),i=[],s=[];for(const a of t){let o;const l=r.Iu.get(a);if(l&&l.length!==0){o=await am(r.localStore,ci(l[0]));for(const h of l){const d=r.Tu.get(h),g=await MQ(r,d);g.snapshot&&s.push(g.snapshot)}}else{const h=await H6(r.localStore,a);o=await am(r.localStore,h),await qb(r,fN(h),a,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(s),i}function fN(n){return X8(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LQ(n){return function(e){return Ct(Ct(e).persistence).Ts()}(Ct(n).localStore)}async function VQ(n,t,e,r){const i=Ct(n);if(i.gu)return void ft(Nh,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const a=await G6(i.localStore,$8(s[0])),o=F0.createSynthesizedRemoteEventForCurrentChange(t,e==="current",wn.EMPTY_BYTE_STRING);await Xo(i,a,o);break}case"rejected":await yh(i.localStore,t,!0),xh(i,t,r);break;default:At(64155,e)}}async function BQ(n,t,e){const r=Ym(n);if(r.gu){for(const i of t){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ft(Nh,"Adding an already active target "+i);continue}const s=await H6(r.localStore,i),a=await am(r.localStore,s);await qb(r,fN(s),a.targetId,!1,a.resumeToken),qm(r.remoteStore,a)}for(const i of e)r.Iu.has(i)&&await yh(r.localStore,i,!1).then(()=>{vh(r.remoteStore,i),xh(r,i)}).catch(Wo)}}function Ym(n){const t=Ct(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=uN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=OQ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=SQ.bind(null,t),t.Pu.H_=pQ.bind(null,t.eventManager),t.Pu.yu=mQ.bind(null,t.eventManager),t}function $b(n){const t=Ct(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=IQ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CQ.bind(null,t),t}class b0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Gm(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return U6(this.persistence,new F6,t.initialUser,this.serializer)}Cu(t){return new kb(Hm.mi,this.serializer)}Du(t){return new K6}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}b0.provider={build:()=>new b0};class FQ extends b0{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Rt(this.persistence.referenceDelegate instanceof sm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new P6(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new kb(r=>sm.mi(r,e),this.serializer)}}class dN extends b0{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await $b(this.xu.syncEngine),await Mh(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return U6(this.persistence,new F6,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new P6(r,t.asyncQueue,e)}Mu(t,e){const r=new XX(e,this.persistence);return new YX(t.asyncQueue,r)}Cu(t){const e=B6(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new Lb(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,$6(),v1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new K6}}class UQ extends dN{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof nx&&(this.sharedClientState.syncEngine={Co:NQ.bind(null,e),vo:VQ.bind(null,e),Fo:BQ.bind(null,e),Ts:LQ.bind(null,e),Do:PQ.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await kQ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(t){const e=$6();if(!nx.v(e))throw new _t(ut.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=B6(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new nx(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class E0{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RQ.bind(null,this.syncEngine),await D2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new gQ}()}createDatastore(t){const e=Gm(t.databaseInfo.databaseId),r=function(s){return new $$(s)}(t.databaseInfo);return function(s,a,o,l){return new tQ(s,a,o,l)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,s,a,o){return new nQ(r,i,s,a,o)}(this.localStore,this.datastore,t.asyncQueue,e=>gR(this.syncEngine,e,0),function(){return cR.v()?new cR:new q$}())}createSyncEngine(t,e){return function(i,s,a,o,l,h,d){const g=new xQ(i,s,a,o,l,h);return d&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const s=Ct(i);ft(wl,"RemoteStore shutting down."),s.Ea.add(5),await j0(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}E0.provider={build:()=>new E0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):yn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="FirestoreClient";class jQ{constructor(t,e,r,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=yr.UNAUTHENTICATED,this.clientId=fb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ft(Uo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ft(Uo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Gb(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function ix(n,t){n.asyncQueue.verifyOperationInProgress(),ft(Uo,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await j6(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function mR(n,t){n.asyncQueue.verifyOperationInProgress();const e=await zQ(n);ft(Uo,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>uR(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>uR(t.remoteStore,i)),n._onlineComponents=t}async function zQ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft(Uo,"Using user provided OfflineComponentProvider");try{await ix(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===ut.FAILED_PRECONDITION||i.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;h0("Error using user provided cache. Falling back to memory cache: "+e),await ix(n,new b0)}}else ft(Uo,"Using default OfflineComponentProvider"),await ix(n,new FQ(void 0));return n._offlineComponents}async function pN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft(Uo,"Using user provided OnlineComponentProvider"),await mR(n,n._uninitializedComponentsProvider._online)):(ft(Uo,"Using default OnlineComponentProvider"),await mR(n,new E0))),n._onlineComponents}function HQ(n){return pN(n).then(t=>t.syncEngine)}async function mN(n){const t=await pN(n),e=t.eventManager;return e.onListen=wQ.bind(null,t.syncEngine),e.onUnlisten=EQ.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=bQ.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=AQ.bind(null,t.syncEngine),e}function GQ(n,t,e={}){const r=new Ms;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new gN({next:m=>{d.Nu(),a.enqueueAndForget(()=>sN(s,g));const y=m.docs.has(o);!y&&m.fromCache?h.reject(new _t(ut.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?h.reject(new _t(ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new aN(Lm(o.path),d,{includeMetadataChanges:!0,qa:!0});return iN(s,g)}(await mN(n),n.asyncQueue,t,e,r)),r.promise}function WQ(n,t,e={}){const r=new Ms;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,h){const d=new gN({next:m=>{d.Nu(),a.enqueueAndForget(()=>sN(s,g)),m.fromCache&&l.source==="server"?h.reject(new _t(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new aN(o,d,{includeMetadataChanges:!0,qa:!0});return iN(s,g)}(await mN(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qQ="firestore.googleapis.com",vR=!0;class _R{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new _t(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qQ,this.ssl=vR}else this.host=t.host,this.ssl=t.ssl??vR;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=C6;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<M6)throw new _t(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}GX("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yN(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _t(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _t(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _t(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qb{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _R({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _t(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new _t(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _R(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kX;switch(r.type){case"firstParty":return new BX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=yR.get(e);r&&(ft("ComponentProvider","Removing Datastore"),yR.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Xm(this.firestore,t,this._query)}}class Dn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Dn(this.firestore,t,this._key)}toJSON(){return{type:Dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(k0(e,Dn._jsonSchema))return new Dn(t,r||null,new xt(be.fromString(e.referencePath)))}}Dn._jsonSchemaVersion="firestore/documentReference/1.0",Dn._jsonSchema={type:Cn("string",Dn._jsonSchemaVersion),referencePath:Cn("string")};class Ro extends Xm{constructor(t,e,r){super(t,e,Lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Dn(this.firestore,null,new xt(t))}withConverter(t){return new Ro(this.firestore,t,this._path)}}function z0(n,t,...e){if(n=er(n),d8("collection","path",t),n instanceof Qb){const r=be.fromString(t,...e);return lD(r),new Ro(n,null,r)}{if(!(n instanceof Dn||n instanceof Ro))throw new _t(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(be.fromString(t,...e));return lD(r),new Ro(n.firestore,null,r)}}function Ca(n,t,...e){if(n=er(n),arguments.length===1&&(t=fb.newId()),d8("doc","path",t),n instanceof Qb){const r=be.fromString(t,...e);return cD(r),new Dn(n,null,new xt(r))}{if(!(n instanceof Dn||n instanceof Ro))throw new _t(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(be.fromString(t,...e));return cD(r),new Dn(n.firestore,n instanceof Ro?n.converter:null,new xt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="AsyncQueue";class wR{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Q6(this,"async_queue_retry"),this._c=()=>{const r=v1();r&&ft(xR,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=v1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=v1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new Ms;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!qo(t))throw t;ft(xR,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,yn("INTERNAL UNHANDLED ERROR: ",bR(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=Hb.createAndSchedule(this,t,e,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&At(47125,{Pc:bR(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function bR(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Cl extends Qb{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new wR,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new wR(t),this._firestoreClient=void 0,await t}}}function YQ(n,t,e){e||(e=$1);const r=Tl(n,"firestore");if(r.isInitialized(e)){const i=r.getImmediate({identifier:e}),s=r.getOptions(e);if(Lo(s,t))return i;throw new _t(ut.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(ut.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<M6)throw new _t(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Ih(t.host)&&HM(t.host),r.initialize({options:t,instanceIdentifier:e})}function Zb(n){if(n._terminated)throw new _t(ut.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XQ(n),n._firestoreClient}function XQ(n){var r,i,s;const t=n._freezeSettings(),e=function(o,l,h,d){return new bK(o,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,yN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(i=t.localCache)!=null&&i._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new jQ(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ci(wn.fromBase64String(t))}catch(e){throw new _t(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ci(wn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(k0(t,Ci._jsonSchema))return Ci.fromBase64String(t.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:Cn("string",Ci._jsonSchemaVersion),bytes:Cn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new _t(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new _t(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _t(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Gt(this._lat,t._lat)||Gt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ps._jsonSchemaVersion}}static fromJSON(t){if(k0(t,Ps._jsonSchema))return new Ps(t.latitude,t.longitude)}}Ps._jsonSchemaVersion="firestore/geoPoint/1.0",Ps._jsonSchema={type:Cn("string",Ps._jsonSchemaVersion),latitude:Cn("number"),longitude:Cn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(k0(t,Ns._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Ns(t.vectorValues);throw new _t(ut.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ns._jsonSchemaVersion="firestore/vectorValue/1.0",Ns._jsonSchema={type:Cn("string",Ns._jsonSchemaVersion),vectorValues:Cn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KQ=/^__.*__$/;class $Q{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Ia(t,this.data,this.fieldMask,e,this.fieldTransforms):new Oh(t,this.data,e,this.fieldTransforms)}}class vN{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Ia(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function _N(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At(40011,{Ac:n})}}class tE{constructor(t,e,r,i,s,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new tE({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var i;const e=(i=this.path)==null?void 0:i.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return um(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(_N(this.Ac)&&KQ.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class QQ{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Gm(t)}Cc(t,e,r,i=!1){return new tE({Ac:t,methodName:e,Dc:r,path:tn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eE(n){const t=n._freezeSettings(),e=Gm(n._databaseId);return new QQ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function xN(n,t,e,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,t,e,i);nE("Data must be an object, but it was:",a,r);const o=wN(r,a);let l,h;if(s.merge)l=new Wr(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=M2(t,g,e);if(!a.contains(m))throw new _t(ut.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);EN(d,m)||d.push(m)}l=new Wr(d),h=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,h=a.fieldTransforms;return new $Q(new _r(o),l,h)}class $m extends Jb{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof $m}}function ZQ(n,t,e,r){const i=n.Cc(1,t,e);nE("Data must be an object, but it was:",i,r);const s=[],a=_r.empty();Yo(r,(l,h)=>{const d=rE(t,l,e);h=er(h);const g=i.yc(d);if(h instanceof $m)s.push(d);else{const m=Qm(h,g);m!=null&&(s.push(d),a.set(d,m))}});const o=new Wr(s);return new vN(a,o,i.fieldTransforms)}function JQ(n,t,e,r,i,s){const a=n.Cc(1,t,e),o=[M2(t,r,e)],l=[i];if(s.length%2!=0)throw new _t(ut.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(M2(t,s[m])),l.push(s[m+1]);const h=[],d=_r.empty();for(let m=o.length-1;m>=0;--m)if(!EN(h,o[m])){const y=o[m];let x=l[m];x=er(x);const b=a.yc(y);if(x instanceof $m)h.push(y);else{const E=Qm(x,b);E!=null&&(h.push(y),d.set(y,E))}}const g=new Wr(h);return new vN(d,g,a.fieldTransforms)}function Qm(n,t){if(bN(n=er(n)))return nE("Unsupported field value:",t,n),wN(n,t);if(n instanceof Jb)return function(r,i){if(!_N(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=Qm(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,t)}return function(r,i){if((r=er(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Oe.fromDate(r);return{timestampValue:mh(i.serializer,s)}}if(r instanceof Oe){const s=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mh(i.serializer,s)}}if(r instanceof Ps)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:f6(i.serializer,r._byteString)};if(r instanceof Dn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ob(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ns)return function(a,o){return{mapValue:{fields:{[wb]:{stringValue:bb},[uh]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw o.Sc("VectorValues must only contain numeric values.");return Sb(o.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${db(r)}`)}(n,t)}function wN(n,t){const e={};return O8(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yo(n,(r,i)=>{const s=Qm(i,t.mc(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function bN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Oe||n instanceof Ps||n instanceof Ci||n instanceof Dn||n instanceof Jb||n instanceof Ns)}function nE(n,t,e){if(!bN(e)||!g8(e)){const r=db(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function M2(n,t,e){if((t=er(t))instanceof Km)return t._internalPath;if(typeof t=="string")return rE(n,t);throw um("Field path arguments must be of type string or ",n,!1,void 0,e)}const tZ=new RegExp("[~\\*/\\[\\]]");function rE(n,t,e){if(t.search(tZ)>=0)throw um(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Km(...t.split("."))._internalPath}catch{throw um(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function um(n,t,e,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${t}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new _t(ut.INVALID_ARGUMENT,o+n+l)}function EN(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t,e,r,i,s){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new eZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(TN("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class eZ extends AN{data(){return super.data()}}function TN(n,t){return typeof t=="string"?rE(n,t):t instanceof Km?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _t(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rZ{convertValue(t,e="none"){switch(Vo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ke(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ta(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw At(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Yo(t,(i,s)=>{r[i]=this.convertValue(s,e)}),r}convertVectorValue(t){var r,i,s;const e=(s=(i=(r=t.fields)==null?void 0:r[uh].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>Ke(a.doubleValue));return new Ns(e)}convertGeoPoint(t){return new Ps(Ke(t.latitude),Ke(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Pm(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(y0(t));default:return null}}convertTimestamp(t){const e=Aa(t);return new Oe(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=be.fromString(t);Rt(b6(r),9688,{name:t});const i=new ml(r.get(1),r.get(3)),s=new xt(r.popFirst(5));return i.isEqual(e)||yn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class xd{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ol extends AN{constructor(t,e,r,i,s,a){super(t,e,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new _1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(TN("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(ut.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ol._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ol._jsonSchemaVersion="firestore/documentSnapshot/1.0",ol._jsonSchema={type:Cn("string",ol._jsonSchemaVersion),bundleSource:Cn("string","DocumentSnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class _1 extends ol{data(t={}){return super.data(t)}}class Ju{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new xd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new _1(this._firestore,this._userDataWriter,r.key,r,new xd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _t(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new _1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new xd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new _1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new xd(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return o.type!==0&&(h=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:iZ(o.type),doc:l,oldIndex:h,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(ut.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ju._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=fb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(e.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function iZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(n){n=Ls(n,Dn);const t=Ls(n.firestore,Cl);return GQ(Zb(t),n._key).then(e=>aZ(t,n,e))}Ju._jsonSchemaVersion="firestore/querySnapshot/1.0",Ju._jsonSchema={type:Cn("string",Ju._jsonSchemaVersion),bundleSource:Cn("string","QuerySnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class IN extends rZ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Dn(this.firestore,null,e)}}function Zm(n){n=Ls(n,Xm);const t=Ls(n.firestore,Cl),e=Zb(t),r=new IN(t);return nZ(n._query),WQ(e,n._query).then(i=>new Ju(t,r,n,i))}function CN(n,t,e){n=Ls(n,Dn);const r=Ls(n.firestore,Cl),i=SN(n.converter,t);return ty(r,[xN(eE(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,br.none())])}function Jm(n,t,e,...r){n=Ls(n,Dn);const i=Ls(n.firestore,Cl),s=eE(i);let a;return a=typeof(t=er(t))=="string"||t instanceof Km?JQ(s,"updateDoc",n._key,t,e,r):ZQ(s,"updateDoc",n._key,t),ty(i,[a.toMutation(n._key,br.exists(!0))])}function DN(n){return ty(Ls(n.firestore,Cl),[new Um(n._key,br.none())])}function sZ(n,t){const e=Ls(n.firestore,Cl),r=Ca(n),i=SN(n.converter,t);return ty(e,[xN(eE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,br.exists(!1))]).then(()=>r)}function ty(n,t){return function(r,i){const s=new Ms;return r.asyncQueue.enqueueAndForget(async()=>TQ(await HQ(r),i,s)),s.promise}(Zb(n),t)}function aZ(n,t,e){const r=e.docs.get(t._key),i=new IN(n);return new ol(n,i,t._key,r,new xd(e.hasPendingWrites,e.fromCache),t.converter)}class oZ{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=hZ(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function cZ(n){return new oZ(n)}class lZ{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=E0.provider,this._offlineComponentProvider={build:e=>new dN(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class uZ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=E0.provider,this._offlineComponentProvider={build:e=>new UQ(e,t==null?void 0:t.cacheSizeBytes)}}}function hZ(n){return new lZ(n==null?void 0:n.forceOwnership)}function fZ(){return new uZ}(function(t,e=!0){(function(i){Rh=i})(Ch),ks(new Qi("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Cl(new LX(r.getProvider("auth-internal")),new FX(a,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new _t(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(h.options.projectId,d)}(a,i),a);return s={useFetchStreams:e,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Oi(iD,sD,t),Oi(iD,sD,"esm2020")})();const dZ={apiKey:"AIzaSyBc4CZnGGOTDvfPvEwaA0dXFOwbocdwCa8",authDomain:"knowurfood-d2b78.firebaseapp.com",projectId:"knowurfood-d2b78",storageBucket:"knowurfood-d2b78.firebasestorage.app",messagingSenderId:"643565214463",appId:"1:643565214463:web:8681aadcc4f49c6afdcaca",measurementId:"G-HB4L7NXGNE"},sE=QM(dZ);mq(sE);const ey=MX(sE),ui=YQ(sE,{localCache:cZ({tabManager:fZ()})}),RN=n=>Math.floor(n/100)+1,gZ=async(n,t)=>{await sZ(z0(ui,"users",t,"meals"),n);const e=Ca(ui,"users",t),r=await iE(e);if(r.exists()){const s=(r.data().xp||0)+10,a=RN(s);await Jm(e,{xp:s,level:a})}},sx=async n=>(await Zm(z0(ui,"users",n,"meals"))).docs.map(e=>({id:e.id,...e.data()})),pZ=async(n,t)=>{const e=Ca(ui,"users",t,"meals",n.id),{id:r,...i}=n;await Jm(e,i)},mZ=async(n,t)=>{const e=Ca(ui,"users",t,"meals",n);await DN(e)},yZ=async n=>{const t=z0(ui,"users",n,"meals"),r=(await Zm(t)).docs.map(i=>DN(i.ref));await Promise.all(r)},vZ=async(n,t)=>{const e=Ca(ui,"users",n);await Jm(e,t)},_Z=async(n,t,e)=>{const r=Ca(ui,"users",n,"weightLogs",t);await CN(r,{date:t,weight:e})},A0=async n=>(await Zm(z0(ui,"users",n,"weightLogs"))).docs.map(e=>e.data()),xZ=async({email:n,password:t,...e})=>{const i=(await yY(ey,n,t)).user,{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,height:g,goalDate:m,breakfastTime:y,lunchTime:x,dinnerTime:b,calorieGoal:E,age:T=25,gender:S="male"}=e,R=Math.max(1,Math.ceil((new Date(m)-new Date)/(1e3*60*60*24))),k=S==="male"?10*h+6.25*g-5*T+5:10*h+6.25*g-5*T-161,P=(d-h)*7700/R,H=Math.round(k+P),M=isNaN(E)?H:Number(E);return await CN(Ca(ui,"users",i.uid),{firstName:s,lastName:a,mealOrder:o,unit:l,currentWeight:h,goalWeight:d,goalDate:m,height:g,breakfastTime:y,lunchTime:x,dinnerTime:b,xp:0,level:1,streak:1,lastLogin:new Date().toISOString().split("T")[0],badges:[],calorieGoal:M,age:T,gender:S}),{...i,...e,calorieGoal:M}},wZ=async({email:n,password:t})=>{const r=(await vY(ey,n,t)).user,i=Ca(ui,"users",r.uid),s=await iE(i),a=s.exists()?s.data():{};return{...r,...a}},bZ=async()=>{await wY(ey)},ER=async()=>new Promise(n=>{const t=ey.onAuthStateChanged(async e=>{if(t(),!e)return n(null);const r=Ca(ui,"users",e.uid),i=await iE(r);if(!i.exists())return n(e);const s=i.data(),a=new Date().toISOString().split("T")[0],o=s.lastLogin||a,l=EZ(o,a);let h={};h.streak=l===1?(s.streak||0)+1:l>1?1:s.streak||1,h.lastLogin=a;const d=[5,15,30,60,100],g=s.badges||[];if(d.includes(h.streak)){const m=`${h.streak}-Day Streak`;g.includes(m)||(g.push(m),h.badges=g)}try{const y=(await Zm(z0(ui,"users",e.uid,"weightLogs"))).docs.map(x=>x.data());if(y.length>0&&s.goalWeight&&s.goalDate&&!g.includes("🎯 Goal Achieved")){const x=y.reduce((T,S)=>T.date>S.date?T:S),b=s.goalWeight>=s.currentWeight&&x.weight>=s.goalWeight||s.goalWeight<s.currentWeight&&x.weight<=s.goalWeight,E=new Date(x.date)<=new Date(s.goalDate);if(b&&E){g.push("🎯 Goal Achieved");const T=(s.xp||0)+50,S=RN(T);h.badges=g,h.xp=T,h.level=S}}}catch(m){console.error("Error checking goal badge:",m)}(h.streak!==s.streak||h.lastLogin!==o||h.badges||h.xp)&&(await Jm(r,h),Object.assign(s,h)),n({...e,...s})})}),EZ=(n,t)=>{const e=new Date(n),r=new Date(t);return Math.floor((r-e)/(1e3*60*60*24))};function AZ({user:n}){const[t,e]=it.useState(""),[r,i]=it.useState([]),[s,a]=it.useState(new Date().toISOString().split("T")[0]);it.useEffect(()=>{n!=null&&n.uid&&A0(n.uid).then(i)},[n]);const o=async()=>{if(!t||isNaN(t))return;await _Z(n.uid,s,parseFloat(t));const l=await A0(n.uid);i(l),e("")};return V.jsxs("div",{className:"card bg-dark p-3 mb-3 text-white shadow-sm",children:[V.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Tracker"}),V.jsxs("div",{className:"d-flex gap-2 mb-2",children:[V.jsx("input",{type:"date",className:"form-control",value:s,max:new Date().toISOString().split("T")[0],onChange:l=>a(l.target.value)}),V.jsx("input",{type:"number",placeholder:"Weight (kg)",className:"form-control",value:t,onChange:l=>e(l.target.value)}),V.jsx("button",{className:"btn btn-primary",onClick:o,children:"Save"})]})]})}const ON=6048e5,TZ=864e5,H0=6e4,G0=36e5,SZ=1e3,AR=Symbol.for("constructDateFrom");function hn(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&AR in n?n[AR](t):n instanceof Date?new n.constructor(t):new Date(t)}function Wt(n,t){return hn(t||n,n)}function ny(n,t,e){const r=Wt(n,e==null?void 0:e.in);return isNaN(t)?hn((e==null?void 0:e.in)||n,NaN):(t&&r.setDate(r.getDate()+t),r)}function aE(n,t,e){const r=Wt(n,e==null?void 0:e.in);if(isNaN(t))return hn(n,NaN);if(!t)return r;const i=r.getDate(),s=hn(n,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function oE(n,t,e){return hn(n,+Wt(n)+t)}function IZ(n,t,e){return oE(n,t*G0)}let CZ={};function Dl(){return CZ}function Bs(n,t){var o,l,h,d;const e=Dl(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??0,i=Wt(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function wh(n,t){return Bs(n,{...t,weekStartsOn:1})}function MN(n,t){const e=Wt(n,t==null?void 0:t.in),r=e.getFullYear(),i=hn(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=wh(i),a=hn(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=wh(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function hm(n){const t=Wt(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Rl(n,...t){const e=hn.bind(null,t.find(r=>typeof r=="object"));return t.map(e)}function P2(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function PN(n,t,e){const[r,i]=Rl(e==null?void 0:e.in,n,t),s=P2(r),a=P2(i),o=+s-hm(s),l=+a-hm(a);return Math.round((o-l)/TZ)}function DZ(n,t){const e=MN(n,t),r=hn(n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),wh(r)}function RZ(n,t,e){const r=Wt(n,e==null?void 0:e.in);return r.setTime(r.getTime()+t*H0),r}function OZ(n,t,e){return aE(n,t*3,e)}function MZ(n,t,e){return oE(n,t*1e3)}function PZ(n,t,e){return ny(n,t*7,e)}function NZ(n,t,e){return aE(n,t*12,e)}function qd(n,t){const e=+Wt(n)-+Wt(t);return e<0?-1:e>0?1:e}function kZ(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function NN(n){return!(!kZ(n)&&typeof n!="number"||isNaN(+Wt(n)))}function LZ(n,t,e){const[r,i]=Rl(e==null?void 0:e.in,n,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function VZ(n,t,e){const[r,i]=Rl(e==null?void 0:e.in,n,t);return r.getFullYear()-i.getFullYear()}function kN(n,t,e){const[r,i]=Rl(e==null?void 0:e.in,n,t),s=TR(r,i),a=Math.abs(PN(r,i));r.setDate(r.getDate()-s*a);const o=+(TR(r,i)===-s),l=s*(a-o);return l===0?0:l}function TR(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function W0(n){return t=>{const r=(n?Math[n]:Math.trunc)(t);return r===0?0:r}}function BZ(n,t,e){const[r,i]=Rl(e==null?void 0:e.in,n,t),s=(+r-+i)/G0;return W0(e==null?void 0:e.roundingMethod)(s)}function cE(n,t){return+Wt(n)-+Wt(t)}function FZ(n,t,e){const r=cE(n,t)/H0;return W0(e==null?void 0:e.roundingMethod)(r)}function LN(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function VN(n,t){const e=Wt(n,t==null?void 0:t.in),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function UZ(n,t){const e=Wt(n,t==null?void 0:t.in);return+LN(e,t)==+VN(e,t)}function BN(n,t,e){const[r,i,s]=Rl(e==null?void 0:e.in,n,n,t),a=qd(i,s),o=Math.abs(LZ(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=qd(i,s)===-a;UZ(r)&&o===1&&qd(r,s)===1&&(l=!1);const h=a*(o-+l);return h===0?0:h}function jZ(n,t,e){const r=BN(n,t,e)/3;return W0(e==null?void 0:e.roundingMethod)(r)}function zZ(n,t,e){const r=cE(n,t)/1e3;return W0(e==null?void 0:e.roundingMethod)(r)}function HZ(n,t,e){const r=kN(n,t,e)/7;return W0(e==null?void 0:e.roundingMethod)(r)}function GZ(n,t,e){const[r,i]=Rl(e==null?void 0:e.in,n,t),s=qd(r,i),a=Math.abs(VZ(r,i));r.setFullYear(1584),i.setFullYear(1584);const o=qd(r,i)===-s,l=s*(a-+o);return l===0?0:l}function WZ(n,t){const e=Wt(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}function qZ(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function YZ(n,t){const e=Wt(n,t==null?void 0:t.in),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function FN(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function XZ(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function KZ(n,t){var o,l;const e=Dl(),r=e.weekStartsOn??((l=(o=e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??0,i=Wt(n,t==null?void 0:t.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function $Z(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setSeconds(59,999),e}function QZ(n,t){const e=Wt(n,t==null?void 0:t.in),r=e.getMonth(),i=r-r%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}function ZZ(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setMilliseconds(999),e}const JZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tJ=(n,t,e)=>{let r;const i=JZ[n];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function ax(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const eJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iJ={date:ax({formats:eJ,defaultWidth:"full"}),time:ax({formats:nJ,defaultWidth:"full"}),dateTime:ax({formats:rJ,defaultWidth:"full"})},sJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aJ=(n,t,e,r)=>sJ[n];function nd(n){return(t,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=e!=null&&e.width?String(e.width):a;i=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=e!=null&&e.width?String(e.width):n.defaultWidth;i=n.values[o]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(t):t;return i[s]}}const oJ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dJ=(n,t)=>{const e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},gJ={ordinalNumber:dJ,era:nd({values:oJ,defaultWidth:"wide"}),quarter:nd({values:cJ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:nd({values:lJ,defaultWidth:"wide"}),day:nd({values:uJ,defaultWidth:"wide"}),dayPeriod:nd({values:hJ,defaultWidth:"wide",formattingValues:fJ,defaultFormattingWidth:"wide"})};function rd(n){return(t,e={})=>{const r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?mJ(o,g=>g.test(a)):pJ(o,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(l):l,h=e.valueCallback?e.valueCallback(h):h;const d=t.slice(a.length);return{value:h,rest:d}}}function pJ(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function mJ(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function yJ(n){return(t,e={})=>{const r=t.match(n.matchPattern);if(!r)return null;const i=r[0],s=t.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=e.valueCallback?e.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const vJ=/^(\d+)(th|st|nd|rd)?/i,_J=/\d+/i,xJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wJ={any:[/^b/i,/^(a|c)/i]},bJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EJ={any:[/1/i,/2/i,/3/i,/4/i]},AJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RJ={ordinalNumber:yJ({matchPattern:vJ,parsePattern:_J,valueCallback:n=>parseInt(n,10)}),era:rd({matchPatterns:xJ,defaultMatchWidth:"wide",parsePatterns:wJ,defaultParseWidth:"any"}),quarter:rd({matchPatterns:bJ,defaultMatchWidth:"wide",parsePatterns:EJ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:rd({matchPatterns:AJ,defaultMatchWidth:"wide",parsePatterns:TJ,defaultParseWidth:"any"}),day:rd({matchPatterns:SJ,defaultMatchWidth:"wide",parsePatterns:IJ,defaultParseWidth:"any"}),dayPeriod:rd({matchPatterns:CJ,defaultMatchWidth:"any",parsePatterns:DJ,defaultParseWidth:"any"})},UN={code:"en-US",formatDistance:tJ,formatLong:iJ,formatRelative:aJ,localize:gJ,match:RJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function OJ(n,t){const e=Wt(n,t==null?void 0:t.in);return PN(e,FN(e))+1}function jN(n,t){const e=Wt(n,t==null?void 0:t.in),r=+wh(e)-+DZ(e);return Math.round(r/ON)+1}function lE(n,t){var d,g,m,y;const e=Wt(n,t==null?void 0:t.in),r=e.getFullYear(),i=Dl(),s=(t==null?void 0:t.firstWeekContainsDate)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(m=i.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,a=hn((t==null?void 0:t.in)||n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Bs(a,t),l=hn((t==null?void 0:t.in)||n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const h=Bs(l,t);return+e>=+o?r+1:+e>=+h?r:r-1}function MJ(n,t){var o,l,h,d;const e=Dl(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((d=(h=e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,i=lE(n,t),s=hn((t==null?void 0:t.in)||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Bs(s,t)}function zN(n,t){const e=Wt(n,t==null?void 0:t.in),r=+Bs(e,t)-+MJ(e,t);return Math.round(r/ON)+1}function De(n,t){const e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}const oo={y(n,t){const e=n.getFullYear(),r=e>0?e:1-e;return De(t==="yy"?r%100:r,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):De(e+1,2)},d(n,t){return De(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return De(n.getHours()%12||12,t.length)},H(n,t){return De(n.getHours(),t.length)},m(n,t){return De(n.getMinutes(),t.length)},s(n,t){return De(n.getSeconds(),t.length)},S(n,t){const e=t.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,e-3));return De(i,t.length)}},Ru={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SR={G:function(n,t,e){const r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return oo.y(n,t)},Y:function(n,t,e,r){const i=lE(n,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return De(a,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):De(s,t.length)},R:function(n,t){const e=MN(n);return De(e,t.length)},u:function(n,t){const e=n.getFullYear();return De(e,t.length)},Q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return De(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return De(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){const r=n.getMonth();switch(t){case"M":case"MM":return oo.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){const r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return De(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){const i=zN(n,r);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):De(i,t.length)},I:function(n,t,e){const r=jN(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):De(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):oo.d(n,t)},D:function(n,t,e){const r=OJ(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):De(r,t.length)},E:function(n,t,e){const r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return De(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return De(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(n,t,e){const r=n.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return De(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){const i=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,t,e){const r=n.getHours();let i;switch(r===12?i=Ru.noon:r===0?i=Ru.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,t,e){const r=n.getHours();let i;switch(r>=17?i=Ru.evening:r>=12?i=Ru.afternoon:r>=4?i=Ru.morning:i=Ru.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return oo.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):oo.H(n,t)},K:function(n,t,e){const r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):De(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):De(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):oo.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):oo.s(n,t)},S:function(n,t){return oo.S(n,t)},X:function(n,t,e){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return CR(r);case"XXXX":case"XX":return zc(r);case"XXXXX":case"XXX":default:return zc(r,":")}},x:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"x":return CR(r);case"xxxx":case"xx":return zc(r);case"xxxxx":case"xxx":default:return zc(r,":")}},O:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+IR(r,":");case"OOOO":default:return"GMT"+zc(r,":")}},z:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+IR(r,":");case"zzzz":default:return"GMT"+zc(r,":")}},t:function(n,t,e){const r=Math.trunc(+n/1e3);return De(r,t.length)},T:function(n,t,e){return De(+n,t.length)}};function IR(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?e+String(i):e+String(i)+t+De(s,2)}function CR(n,t){return n%60===0?(n>0?"-":"+")+De(Math.abs(n)/60,2):zc(n,t)}function zc(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),i=De(Math.trunc(r/60),2),s=De(r%60,2);return e+i+t+s}const DR=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},HN=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},PJ=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return DR(n,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",DR(r,t)).replace("{{time}}",HN(i,t))},N2={p:HN,P:PJ},NJ=/^D+$/,kJ=/^Y+$/,LJ=["D","DD","YY","YYYY"];function GN(n){return NJ.test(n)}function WN(n){return kJ.test(n)}function k2(n,t,e){const r=VJ(n,t,e);if(console.warn(r),LJ.includes(n))throw new RangeError(r)}function VJ(n,t,e){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const BJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UJ=/^'([^]*?)'?$/,jJ=/''/g,zJ=/[a-zA-Z]/;function HJ(n,t,e){var d,g,m,y,x,b,E,T;const r=Dl(),i=(e==null?void 0:e.locale)??r.locale??UN,s=(e==null?void 0:e.firstWeekContainsDate)??((g=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,a=(e==null?void 0:e.weekStartsOn)??((b=(x=e==null?void 0:e.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((T=(E=r.locale)==null?void 0:E.options)==null?void 0:T.weekStartsOn)??0,o=Wt(n,e==null?void 0:e.in);if(!NN(o))throw new RangeError("Invalid time value");let l=t.match(FJ).map(S=>{const R=S[0];if(R==="p"||R==="P"){const k=N2[R];return k(S,i.formatLong)}return S}).join("").match(BJ).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const R=S[0];if(R==="'")return{isToken:!1,value:GJ(S)};if(SR[R])return{isToken:!0,value:S};if(R.match(zJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(S=>{if(!S.isToken)return S.value;const R=S.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&WN(R)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&GN(R))&&k2(R,t,String(n));const k=SR[R[0]];return k(o,R,i.localize,h)}).join("")}function GJ(n){const t=n.match(UJ);return t?t[1].replace(jJ,"'"):n}function WJ(){return Object.assign({},Dl())}function qJ(n,t){const e=Wt(n,t==null?void 0:t.in).getDay();return e===0?7:e}function YJ(n,t){const e=XJ(t)?new t(0):hn(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function XJ(n){var t;return typeof n=="function"&&((t=n.prototype)==null?void 0:t.constructor)===n}const KJ=10;class qN{constructor(){rt(this,"subPriority",0)}validate(t,e){return!0}}class $J extends qN{constructor(t,e,r,i,s){super(),this.value=t,this.validateValue=e,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,r){return this.setValue(t,e,this.value,r)}}class QJ extends qN{constructor(e,r){super();rt(this,"priority",KJ);rt(this,"subPriority",-1);this.context=e||(i=>hn(r,i))}set(e,r){return r.timestampIsSet?e:hn(e,YJ(e,this.context))}}class _e{run(t,e,r,i){const s=this.parse(t,e,r,i);return s?{setter:new $J(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,r){return!0}}class ZJ extends _e{constructor(){super(...arguments);rt(this,"priority",140);rt(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,r,i){return r.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}const _n={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ws={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function xn(n,t){return n&&{value:t(n.value),rest:n.rest}}function en(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function bs(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const r=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,a=e[5]?parseInt(e[5],10):0;return{value:r*(i*G0+s*H0+a*SZ),rest:t.slice(e[0].length)}}function YN(n){return en(_n.anyDigitsSigned,n)}function fn(n,t){switch(n){case 1:return en(_n.singleDigit,t);case 2:return en(_n.twoDigits,t);case 3:return en(_n.threeDigits,t);case 4:return en(_n.fourDigits,t);default:return en(new RegExp("^\\d{1,"+n+"}"),t)}}function fm(n,t){switch(n){case 1:return en(_n.singleDigitSigned,t);case 2:return en(_n.twoDigitsSigned,t);case 3:return en(_n.threeDigitsSigned,t);case 4:return en(_n.fourDigitsSigned,t);default:return en(new RegExp("^-?\\d{1,"+n+"}"),t)}}function uE(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function XN(n,t){const e=t>0,r=e?t:1-t;let i;if(r<=50)i=n||100;else{const s=r+50,a=Math.trunc(s/100)*100,o=n>=s%100;i=n+a-(o?100:0)}return e?i:1-i}function KN(n){return n%400===0||n%4===0&&n%100!==0}class JJ extends _e{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return xn(fn(4,e),s);case"yo":return xn(i.ordinalNumber(e,{unit:"year"}),s);default:return xn(fn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i){const s=e.getFullYear();if(i.isTwoDigitYear){const o=XN(i.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const a=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class ttt extends _e{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,i){const s=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return xn(fn(4,e),s);case"Yo":return xn(i.ordinalNumber(e,{unit:"year"}),s);default:return xn(fn(r.length,e),s)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,i,s){const a=lE(e,s);if(i.isTwoDigitYear){const l=XN(i.year,a);return e.setFullYear(l,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Bs(e,s)}const o=!("era"in r)||r.era===1?i.year:1-i.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Bs(e,s)}}class ett extends _e{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return fm(r==="R"?4:r.length,e)}set(e,r,i){const s=hn(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),wh(s)}}class ntt extends _e{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return fm(r==="u"?4:r.length,e)}set(e,r,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class rtt extends _e{constructor(){super(...arguments);rt(this,"priority",120);rt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"Q":case"QQ":return fn(r.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class itt extends _e{constructor(){super(...arguments);rt(this,"priority",120);rt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"q":case"qq":return fn(r.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}}class stt extends _e{constructor(){super(...arguments);rt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);rt(this,"priority",110)}parse(e,r,i){const s=a=>a-1;switch(r){case"M":return xn(en(_n.month,e),s);case"MM":return xn(fn(2,e),s);case"Mo":return xn(i.ordinalNumber(e,{unit:"month"}),s);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}class att extends _e{constructor(){super(...arguments);rt(this,"priority",110);rt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,i){const s=a=>a-1;switch(r){case"L":return xn(en(_n.month,e),s);case"LL":return xn(fn(2,e),s);case"Lo":return xn(i.ordinalNumber(e,{unit:"month"}),s);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}function ott(n,t,e){const r=Wt(n,e==null?void 0:e.in),i=zN(r,e)-t;return r.setDate(r.getDate()-i*7),Wt(r,e==null?void 0:e.in)}class ctt extends _e{constructor(){super(...arguments);rt(this,"priority",100);rt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,i){switch(r){case"w":return en(_n.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return fn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i,s){return Bs(ott(e,i,s),s)}}function ltt(n,t,e){const r=Wt(n,e==null?void 0:e.in),i=jN(r,e)-t;return r.setDate(r.getDate()-i*7),r}class utt extends _e{constructor(){super(...arguments);rt(this,"priority",100);rt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,i){switch(r){case"I":return en(_n.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return fn(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,i){return wh(ltt(e,i))}}const htt=[31,28,31,30,31,30,31,31,30,31,30,31],ftt=[31,29,31,30,31,30,31,31,30,31,30,31];class dtt extends _e{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"subPriority",1);rt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"d":return en(_n.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return fn(r.length,e)}}validate(e,r){const i=e.getFullYear(),s=KN(i),a=e.getMonth();return s?r>=1&&r<=ftt[a]:r>=1&&r<=htt[a]}set(e,r,i){return e.setDate(i),e.setHours(0,0,0,0),e}}class gtt extends _e{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"subpriority",1);rt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,i){switch(r){case"D":case"DD":return en(_n.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return fn(r.length,e)}}validate(e,r){const i=e.getFullYear();return KN(i)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}}function hE(n,t,e){var g,m,y,x;const r=Dl(),i=(e==null?void 0:e.weekStartsOn)??((m=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,s=Wt(n,e==null?void 0:e.in),a=s.getDay(),l=(t%7+7)%7,h=7-i,d=t<0||t>6?t-(a+h)%7:(l+h)%7-(a+h)%7;return ny(s,d,e)}class ptt extends _e{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=hE(e,i,s),e.setHours(0,0,0,0),e}}class mtt extends _e{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return xn(fn(r.length,e),a);case"eo":return xn(i.ordinalNumber(e,{unit:"day"}),a);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=hE(e,i,s),e.setHours(0,0,0,0),e}}class ytt extends _e{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,i,s){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return xn(fn(r.length,e),a);case"co":return xn(i.ordinalNumber(e,{unit:"day"}),a);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,i,s){return e=hE(e,i,s),e.setHours(0,0,0,0),e}}function vtt(n,t,e){const r=Wt(n,e==null?void 0:e.in),i=qJ(r,e),s=t-i;return ny(r,s,e)}class _tt extends _e{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,i){const s=a=>a===0?7:a;switch(r){case"i":case"ii":return fn(r.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return xn(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return xn(i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return xn(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return xn(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,r){return r>=1&&r<=7}set(e,r,i){return e=vtt(e,i),e.setHours(0,0,0,0),e}}class xtt extends _e{constructor(){super(...arguments);rt(this,"priority",80);rt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(uE(i),0,0,0),e}}class wtt extends _e{constructor(){super(...arguments);rt(this,"priority",80);rt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(uE(i),0,0,0),e}}class btt extends _e{constructor(){super(...arguments);rt(this,"priority",80);rt(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,i){return e.setHours(uE(i),0,0,0),e}}class Ett extends _e{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,i){switch(r){case"h":return en(_n.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return fn(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,i){const s=e.getHours()>=12;return s&&i<12?e.setHours(i+12,0,0,0):!s&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}}class Att extends _e{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,i){switch(r){case"H":return en(_n.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return fn(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,i){return e.setHours(i,0,0,0),e}}class Ttt extends _e{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,i){switch(r){case"K":return en(_n.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return fn(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}}class Stt extends _e{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,i){switch(r){case"k":return en(_n.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return fn(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,i){const s=i<=24?i%24:i;return e.setHours(s,0,0,0),e}}class Itt extends _e{constructor(){super(...arguments);rt(this,"priority",60);rt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"m":return en(_n.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return fn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setMinutes(i,0,0),e}}class Ctt extends _e{constructor(){super(...arguments);rt(this,"priority",50);rt(this,"incompatibleTokens",["t","T"])}parse(e,r,i){switch(r){case"s":return en(_n.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return fn(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,i){return e.setSeconds(i,0),e}}class Dtt extends _e{constructor(){super(...arguments);rt(this,"priority",30);rt(this,"incompatibleTokens",["t","T"])}parse(e,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return xn(fn(r.length,e),i)}set(e,r,i){return e.setMilliseconds(i),e}}class Rtt extends _e{constructor(){super(...arguments);rt(this,"priority",10);rt(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return bs(ws.basicOptionalMinutes,e);case"XX":return bs(ws.basic,e);case"XXXX":return bs(ws.basicOptionalSeconds,e);case"XXXXX":return bs(ws.extendedOptionalSeconds,e);case"XXX":default:return bs(ws.extended,e)}}set(e,r,i){return r.timestampIsSet?e:hn(e,e.getTime()-hm(e)-i)}}class Ott extends _e{constructor(){super(...arguments);rt(this,"priority",10);rt(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return bs(ws.basicOptionalMinutes,e);case"xx":return bs(ws.basic,e);case"xxxx":return bs(ws.basicOptionalSeconds,e);case"xxxxx":return bs(ws.extendedOptionalSeconds,e);case"xxx":default:return bs(ws.extended,e)}}set(e,r,i){return r.timestampIsSet?e:hn(e,e.getTime()-hm(e)-i)}}class Mtt extends _e{constructor(){super(...arguments);rt(this,"priority",40);rt(this,"incompatibleTokens","*")}parse(e){return YN(e)}set(e,r,i){return[hn(e,i*1e3),{timestampIsSet:!0}]}}class Ptt extends _e{constructor(){super(...arguments);rt(this,"priority",20);rt(this,"incompatibleTokens","*")}parse(e){return YN(e)}set(e,r,i){return[hn(e,i),{timestampIsSet:!0}]}}const Ntt={G:new ZJ,y:new JJ,Y:new ttt,R:new ett,u:new ntt,Q:new rtt,q:new itt,M:new stt,L:new att,w:new ctt,I:new utt,d:new dtt,D:new gtt,E:new ptt,e:new mtt,c:new ytt,i:new _tt,a:new xtt,b:new wtt,B:new btt,h:new Ett,H:new Att,K:new Ttt,k:new Stt,m:new Itt,s:new Ctt,S:new Dtt,X:new Rtt,x:new Ott,t:new Mtt,T:new Ptt},ktt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ltt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vtt=/^'([^]*?)'?$/,Btt=/''/g,Ftt=/\S/,Utt=/[a-zA-Z]/;function jtt(n,t,e,r){var E,T,S,R,k,P,H,M;const i=()=>hn((r==null?void 0:r.in)||e,NaN),s=WJ(),a=(r==null?void 0:r.locale)??s.locale??UN,o=(r==null?void 0:r.firstWeekContainsDate)??((T=(E=r==null?void 0:r.locale)==null?void 0:E.options)==null?void 0:T.firstWeekContainsDate)??s.firstWeekContainsDate??((R=(S=s.locale)==null?void 0:S.options)==null?void 0:R.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((P=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:P.weekStartsOn)??s.weekStartsOn??((M=(H=s.locale)==null?void 0:H.options)==null?void 0:M.weekStartsOn)??0;if(!t)return n?i():Wt(e,r==null?void 0:r.in);const h={firstWeekContainsDate:o,weekStartsOn:l,locale:a},d=[new QJ(r==null?void 0:r.in,e)],g=t.match(Ltt).map(C=>{const O=C[0];if(O in N2){const L=N2[O];return L(C,a.formatLong)}return C}).join("").match(ktt),m=[];for(let C of g){!(r!=null&&r.useAdditionalWeekYearTokens)&&WN(C)&&k2(C,t,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&GN(C)&&k2(C,t,n);const O=C[0],L=Ntt[O];if(L){const{incompatibleTokens:j}=L;if(Array.isArray(j)){const U=m.find(Et=>j.includes(Et.token)||Et.token===O);if(U)throw new RangeError(`The format string mustn't contain \`${U.fullToken}\` and \`${C}\` at the same time`)}else if(L.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);m.push({token:O,fullToken:C});const z=L.run(n,C,a.match,h);if(!z)return i();d.push(z.setter),n=z.rest}else{if(O.match(Utt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");if(C==="''"?C="'":O==="'"&&(C=ztt(C)),n.indexOf(C)===0)n=n.slice(C.length);else return i()}}if(n.length>0&&Ftt.test(n))return i();const y=d.map(C=>C.priority).sort((C,O)=>O-C).filter((C,O,L)=>L.indexOf(C)===O).map(C=>d.filter(O=>O.priority===C).sort((O,L)=>L.subPriority-O.subPriority)).map(C=>C[0]);let x=Wt(e,r==null?void 0:r.in);if(isNaN(+x))return i();const b={};for(const C of y){if(!C.validate(x,h))return i();const O=C.set(x,b,h);Array.isArray(O)?(x=O[0],Object.assign(b,O[1])):x=O}return x}function ztt(n){return n.match(Vtt)[1].replace(Btt,"'")}function Htt(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function Gtt(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setSeconds(0,0),e}function Wtt(n,t){const e=Wt(n,t==null?void 0:t.in);return e.setMilliseconds(0),e}function qtt(n,t){const e=()=>hn(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,i=$tt(n);let s;if(i.date){const h=Qtt(i.date,r);s=Ztt(h.restDateString,h.year)}if(!s||isNaN(+s))return e();const a=+s;let o=0,l;if(i.time&&(o=Jtt(i.time),isNaN(o)))return e();if(i.timezone){if(l=tet(i.timezone),isNaN(l))return e()}else{const h=new Date(a+o),d=Wt(0,t==null?void 0:t.in);return d.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),d.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),d}return Wt(a+o+l,t==null?void 0:t.in)}const jp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ytt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Xtt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ktt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $tt(n){const t={},e=n.split(jp.dateTimeDelimiter);let r;if(e.length>2)return t;if(/:/.test(e[0])?r=e[0]:(t.date=e[0],r=e[1],jp.timeZoneDelimiter.test(t.date)&&(t.date=n.split(jp.timeZoneDelimiter)[0],r=n.substr(t.date.length,n.length))),r){const i=jp.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function Qtt(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=n.match(e);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function Ztt(n,t){if(t===null)return new Date(NaN);const e=n.match(Ytt);if(!e)return new Date(NaN);const r=!!e[4],i=id(e[1]),s=id(e[2])-1,a=id(e[3]),o=id(e[4]),l=id(e[5])-1;if(r)return set(t,o,l)?eet(t,o,l):new Date(NaN);{const h=new Date(0);return!ret(t,s,a)||!iet(t,i)?new Date(NaN):(h.setUTCFullYear(t,s,Math.max(i,a)),h)}}function id(n){return n?parseInt(n):1}function Jtt(n){const t=n.match(Xtt);if(!t)return NaN;const e=ox(t[1]),r=ox(t[2]),i=ox(t[3]);return aet(e,r,i)?e*G0+r*H0+i*1e3:NaN}function ox(n){return n&&parseFloat(n.replace(",","."))||0}function tet(n){if(n==="Z")return 0;const t=n.match(Ktt);if(!t)return 0;const e=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return oet(r,i)?e*(r*G0+i*H0):NaN}function eet(n,t,e){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+e+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const net=[31,null,31,30,31,30,31,31,30,31,30,31];function $N(n){return n%400===0||n%4===0&&n%100!==0}function ret(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(net[t]||($N(n)?29:28))}function iet(n,t){return t>=1&&t<=($N(n)?366:365)}function set(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function aet(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function oet(n,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const cet={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};V4._date.override({_id:"date-fns",formats:function(){return cet},parse:function(n,t){if(n===null||typeof n>"u")return null;const e=typeof n;return e==="number"||n instanceof Date?n=Wt(n):e==="string"&&(typeof t=="string"?n=jtt(n,t,new Date,this.options):n=qtt(n,this.options)),NN(n)?n.getTime():null},format:function(n,t){return HJ(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return oE(n,t);case"second":return MZ(n,t);case"minute":return RZ(n,t);case"hour":return IZ(n,t);case"day":return ny(n,t);case"week":return PZ(n,t);case"month":return aE(n,t);case"quarter":return OZ(n,t);case"year":return NZ(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return cE(n,t);case"second":return zZ(n,t);case"minute":return FZ(n,t);case"hour":return BZ(n,t);case"day":return kN(n,t);case"week":return HZ(n,t);case"month":return BN(n,t);case"quarter":return jZ(n,t);case"year":return GZ(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return Wtt(n);case"minute":return Gtt(n);case"hour":return Htt(n);case"day":return P2(n);case"week":return Bs(n);case"isoWeek":return Bs(n,{weekStartsOn:+e});case"month":return qZ(n);case"quarter":return WZ(n);case"year":return FN(n);default:return n}},endOf:function(n,t){switch(t){case"second":return ZZ(n);case"minute":return $Z(n);case"hour":return XZ(n);case"day":return LN(n);case"week":return KZ(n);case"month":return VN(n);case"quarter":return QZ(n);case"year":return YZ(n);default:return n}}});El.register(hd,Zp,O1,t0,pw,gw);function uet({user:n}){const[t,e]=it.useState([]);if(it.useEffect(()=>{n!=null&&n.uid&&A0(n.uid).then(e)},[n]),!n.goalDate||!n.goalWeight)return null;const r=[...t].sort((a,o)=>new Date(a.date)-new Date(o.date)),i={labels:r.map(a=>a.date),datasets:[{label:"Weight (kg)",data:r.map(a=>a.weight),borderColor:"deepskyblue",backgroundColor:"rgba(0, 191, 255, 0.2)",tension:.2},{label:`Goal (${n.goalWeight}kg by ${n.goalDate})`,data:r.map(()=>n.goalWeight),borderDash:[5,5],borderColor:"lime",pointRadius:0,borderWidth:1}]},s={responsive:!0,scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"PP"},ticks:{color:"white"},grid:{color:"#444"}},y:{ticks:{color:"white"},grid:{color:"#444"},beginAtZero:!1}},plugins:{legend:{labels:{color:"white"}}}};return V.jsxs("div",{className:"card bg-dark text-white p-3 mb-2 shadow-sm",children:[V.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Progress"}),V.jsx(dB,{data:i,options:s})]})}const het=n=>{const t=Math.floor(n/100)+1,e=n%100,r=100,i=e/r*100;return{level:t,currentXP:e,nextXP:r,percent:i}};function fet({meals:n,onEditMeal:t,onDeleteMeal:e,user:r}){const{level:i,currentXP:s,nextXP:a,percent:o}=het(r.xp||0),l=new Date().toISOString().split("T")[0],h=b=>n.filter(E=>E.mealType===b&&E.date===l),d=b=>{const E=new Date(b),T=E.getDay(),S=E.getDate()-T+(T===0?-6:1);return new Date(E.setDate(S))},[g,m]=it.useState(d(new Date)),y=b=>{const E=new Date(g);E.setDate(g.getDate()+b),m(E)},x=b=>new Date(b).toLocaleDateString("en-GB");return V.jsxs("div",{className:"home-container",children:[V.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[V.jsxs("p",{className:"TitleName mb-1",children:["Hello ",r.firstName]}),V.jsxs("div",{className:"text-end",children:[V.jsxs("span",{className:"small fw-bold",style:{color:"deepskyblue"},children:["Level ",i]}),V.jsx("div",{className:"progress",style:{height:"6px",width:"150px",background:"#444"},children:V.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${o}%`,backgroundColor:"deepskyblue"},"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":a})})]})]}),V.jsxs("div",{className:"CalBarCharSection bg-dark",children:[V.jsxs("div",{className:"d-flex col-md-12 mb-2 justify-content-between",children:[V.jsx("p",{className:"SubTitleName mb-0",children:"Calories Consumed"}),V.jsxs("div",{className:"d-flex align-items-center DateRangePicker",children:[V.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>y(-7),children:"◀"}),x(g)," – ",x(new Date(g.getTime()+6*864e5)),V.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>y(7),children:"▶"})]})]}),V.jsx(nO,{meals:n,startOfWeek:g})]}),V.jsx(uet,{user:r}),V.jsxs("div",{className:"TodayChartsSection col-md-12",children:[V.jsxs("div",{className:"CalDonutSection bg-dark",children:[V.jsx("p",{className:"SubTitleName",children:"Calorie Intake"}),V.jsx(rO,{meals:n,selectedDate:l,goal:r.calorieGoal})]}),V.jsxs("div",{className:"NutriDonutSection bg-dark",children:[V.jsx("p",{className:"SubTitleName",children:"Nutrition Intake"}),V.jsx(iO,{meals:n,selectedDate:l})]})]}),V.jsx("div",{className:"FoodItemList bg-dark",children:(r.mealOrder||["Breakfast","Lunch","Dinner"]).map(b=>V.jsxs("div",{className:"mb-3",children:[V.jsx("p",{className:"SubTitleName",children:b}),h(b).map(E=>E.foodItems.map((T,S)=>V.jsx(kM,{name:T.name,nutrients:T.nutrients,kcal:E.kcal||null,onEdit:()=>t(E),onDelete:()=>e(E.id),unit:r.unit||"g"},`${b}-${E.id}-${S}`)))]},b))})]})}function det({meals:n,onEditMeal:t,onDeleteMea:e,user:r}){const i=new Date().toISOString().split("T")[0],[s,a]=it.useState(i),[o,l]=it.useState([]),[h,d]=it.useState(null);it.useEffect(()=>{r!=null&&r.uid&&A0(r.uid).then(y=>{l(y)})},[r]),it.useEffect(()=>{const y=o.find(x=>x.date===s);d((y==null?void 0:y.weight)||null)},[s,o]);const g=n.filter(y=>y.date===s),m={Breakfast:[],Lunch:[],Dinner:[]};return g.forEach(y=>{m[y.mealType]&&m[y.mealType].push(y)}),V.jsxs("div",{className:"home-container",children:[V.jsx("h4",{className:"mb-2 TitleName",children:"History"}),V.jsx("h5",{className:"SubTitleName",children:"Select a Date"}),V.jsx("input",{type:"date",className:"form-control mb-3",value:s,onChange:y=>a(y.target.value),max:i}),V.jsxs("div",{className:"FoodItemList mb-2 bg-dark",children:[V.jsx("h6",{className:"SubTitleName mb-2",children:"Weight Logged: "}),h?V.jsxs("span",{className:"fw-bold text-info",children:[h," kg"]}):V.jsxs("p",{className:"text-muted",children:["No weight logged on ",s]})]}),V.jsxs("div",{className:"TodayChartsSection d-flex",children:[V.jsx("div",{className:"CalDonutSection bg-dark",children:V.jsx(rO,{meals:g,selectedDate:s,goal:r.calorieGoal})}),V.jsx("div",{className:"NutriDonutSection bg-dark",children:V.jsx(iO,{meals:g,selectedDate:s})})]}),V.jsx("div",{className:"FoodItemList bg-dark mt-2",children:["Breakfast","Lunch","Dinner"].map(y=>V.jsxs("div",{className:"mb-3",children:[V.jsx("h6",{className:"SubTitleName",children:y}),m[y].length===0&&V.jsx("p",{className:"text-muted ms-2",style:{fontSize:"13px"},children:"No meals logged"}),m[y].map((x,b)=>x.foodItems.map((E,T)=>V.jsx(kM,{name:E.name,nutrients:E.nutrients,onEdit:()=>t(x),onDelete:()=>onDeleteMeal(x.id)},`${x.id}-${T}`)))]},y))})]})}function get(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function pet(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var met=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yet=function(n){met(t,n);function t(e,r){var i=this.constructor,s=n.call(this,e,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),get(s,i.prototype),pet(s),s}return t}(Error),vet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yr=function(n){vet(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t}(yet),_et=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hi=function(n){_et(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t}(Yr),xet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kt=function(n){xet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(Yr),wet=function(){function n(t){if(this.binarizer=t,t===null)throw new kt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var s=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(s))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),bet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jn=function(n){bet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Yr),Eet=function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),ze=function(){function n(){}return n.arraycopy=function(t,e,r,i,s){for(;s--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n}(),Aet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fE=function(n){Aet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(Yr),Tet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),RR=function(n){Tet(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t}(fE),Iet=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fn=function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var s=e;s<r;s++)t[s]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new kt("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new RR(e);if(r>t)throw new RR(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(s){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var s=Iet(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=31*i+o}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,s=new Int32Array(i);return ze.arraycopy(t,e,s,0,i),s},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,s=t.length-1;i<=s;){var a=s+i>>1,o=r(e,t[a]);if(o>0)i=a+1;else if(o<0)s=a-1;else return a}return-i-1},n.numberComparator=function(t,e){return t-e},n}(),ee=function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),tr=function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);ze.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=r[i]}var o=i*32+ee.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),s=~r[i];s&=~((1<<(t&31))-1);for(var a=r.length;s===0;){if(++i===a)return e;s=~r[i]}var o=i*32+ee.numberOfTrailingZeros(s);return o>e?e:o},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new kt;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),s=this.bits,a=r;a<=i;a++){var o=a>r?0:t&31,l=a<i?31:e&31,h=(2<<l)-(1<<o);s[a]|=h}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new kt;if(e===t)return!0;e--;for(var i=Math.floor(t/32),s=Math.floor(e/32),a=this.bits,o=i;o<=s;o++){var l=o>i?0:t&31,h=o<s?31:e&31,d=(2<<h)-(1<<l)&4294967295;if((a[o]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new kt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new kt("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var s=0;s<i;s++){for(var a=0,o=0;o<8;o++)this.get(t)&&(a|=1<<7-o),t++;e[r+s]=a}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,s=0;s<r;s++){var a=i[s];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,t[e-s]=a}if(this.size!==r*32){for(var o=r*32-this.size,l=t[0]>>>o,s=1;s<r;s++){var h=t[s];l|=h<<32-o,t[s-1]=l,l=h>>>o}t[r-1]=l}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&Fn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+Fn.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n}(),L2;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(L2||(L2={}));const Qe=L2;var Cet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vt=function(n){Cet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Yr),Det=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ie;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Ie||(Ie={}));var Bn=function(){function n(t,e,r){for(var i,s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=a,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var l=this.values,h=0,d=l.length;h!==d;h++){var g=l[h];n.VALUES_TO_ECI.set(g,this)}try{for(var m=Det(a),y=m.next();!y.done;y=m.next()){var x=y.value;n.NAME_TO_ECI.set(x,this)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new vt("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new vt("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new vt("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ie.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ie.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ie.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ie.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ie.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ie.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ie.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ie.Big5,28,"Big5"),n.GB18030=new n(Ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ie.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Ret=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),x1=function(n){Ret(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(Yr),Mi=function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof Bn?t:Bn.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",s=0,a=t.length;s<a;s++){var o=t[s].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Bn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new x1("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(Bn.UTF8)||t.equals(Bn.ISO8859_1)||t.equals(Bn.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],s=0;s<r.length;s++)i.push(r[s].charCodeAt(0));return new Uint8Array(i)},n}(),ue=function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return Mi.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(Qe.CHARACTER_SET)!==void 0)return e.get(Qe.CHARACTER_SET).toString();for(var r=t.length,i=!0,s=!0,a=!0,o=0,l=0,h=0,d=0,g=0,m=0,y=0,x=0,b=0,E=0,T=0,S=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,R=0;R<r&&(i||s||a);R++){var k=t[R]&255;a&&(o>0?(k&128)===0?a=!1:o--:(k&128)!==0&&((k&64)===0?a=!1:(o++,(k&32)===0?l++:(o++,(k&16)===0?h++:(o++,(k&8)===0?d++:a=!1))))),i&&(k>127&&k<160?i=!1:k>159&&(k<192||k===215||k===247)&&T++),s&&(g>0?k<64||k===127||k>252?s=!1:g--:k===128||k===160||k>239?s=!1:k>160&&k<224?(m++,x=0,y++,y>b&&(b=y)):k>127?(g++,y=0,x++,x>E&&(E=x)):(y=0,x=0))}return a&&o>0&&(a=!1),s&&g>0&&(s=!1),a&&(S||l+h+d>0)?n.UTF8:s&&(n.ASSUME_SHIFT_JIS||b>=3||E>=3)?n.SHIFT_JIS:i&&s?b===2&&m===2||T*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:s?n.SHIFT_JIS:a?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function s(o,l,h,d,g,m){if(o==="%%")return"%";if(e[++i]!==void 0){o=d?parseInt(d.substr(1)):void 0;var y=g?parseInt(g.substr(1)):void 0,x;switch(m){case"s":x=e[i];break;case"c":x=e[i][0];break;case"f":x=parseFloat(e[i]).toFixed(o);break;case"p":x=parseFloat(e[i]).toPrecision(o);break;case"e":x=parseFloat(e[i]).toExponential(o);break;case"x":x=parseInt(e[i]).toString(y||16);break;case"d":x=parseFloat(parseInt(e[i],y||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var b=parseInt(h),E=h&&h[0]+""=="0"?"0":" ";x.length<b;)x=l!==void 0?x+E:E+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,s)},n.getBytes=function(t,e){return Mi.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=Bn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Bn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Bn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),$t=function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n}(),Fs=function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new kt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),s=0;s<e;s++)for(var a=t[s],o=0;o<r;o++)a[o]&&i.set(o,s);return i},n.parseFromString=function(t,e,r){if(t===null)throw new kt("stringRepresentation cannot be null");for(var i=new Array(t.length),s=0,a=0,o=-1,l=0,h=0;h<t.length;)if(t.charAt(h)===`
`||t.charAt(h)==="\r"){if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new kt("row lengths do not match");a=s,l++}h++}else if(t.substring(h,h+e.length)===e)h+=e.length,i[s]=!0,s++;else if(t.substring(h,h+r.length)===r)h+=r.length,i[s]=!1,s++;else throw new kt("illegal character encountered: "+t.substring(h));if(s>a){if(o===-1)o=s-a;else if(s-a!==o)throw new kt("row lengths do not match");l++}for(var d=new n(o,l),g=0;g<s;g++)i[g]&&d.set(Math.floor(g%o),Math.floor(g/o));return d},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new kt("input matrix dimensions do not match");for(var e=new tr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,s=0,a=this.height;s<a;s++)for(var o=s*r,l=t.getRow(s,e).getBitArray(),h=0;h<r;h++)i[o+h]^=l[h]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new kt("Left and top must be nonnegative");if(i<1||r<1)throw new kt("Height and width must be at least 1");var s=t+r,a=e+i;if(a>this.height||s>this.width)throw new kt("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,h=e;h<a;h++)for(var d=h*o,g=t;g<s;g++)l[d+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new tr(this.width):e.clear();for(var r=this.rowSize,i=this.bits,s=t*r,a=0;a<r;a++)e.setBulk(a*32,i[s+a]);return e},n.prototype.setRow=function(t,e){ze.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new tr(t),i=new tr(t),s=0,a=Math.floor((e+1)/2);s<a;s++)r=this.getRow(s,r),i=this.getRow(e-1-s,i),r.reverse(),i.reverse(),this.setRow(s,i),this.setRow(e-1-s,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,s=t,a=e,o=-1,l=-1,h=0;h<e;h++)for(var d=0;d<r;d++){var g=i[h*r+d];if(g!==0){if(h<a&&(a=h),h>l&&(l=h),d*32<s){for(var m=0;(g<<31-m&4294967295)===0;)m++;d*32+m<s&&(s=d*32+m)}if(d*32+31>o){for(var m=31;!(g>>>m);)m--;d*32+m>o&&(o=d*32+m)}}}return o<s||l<a?null:Int32Array.from([s,a,o-s+1,l-a+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,s=r%t*32,a=e[r],o=0;(a<<31-o&4294967295)===0;)o++;return s+=o,Int32Array.from([s,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),s=Math.floor(r%t)*32,a=e[r],o=31;!(a>>>o);)o--;return s+=o,Int32Array.from([s,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Fn.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+Fn.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new $t,s=0,a=this.height;s<a;s++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,s)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Oet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),st=function(n){Oet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Yr),Met=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pet=function(n){Met(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new tr(s):r.clear(),this.initArrays(s);for(var a=i.getRow(e,this.luminances),o=this.buckets,l=0;l<s;l++)o[(a[l]&255)>>t.LUMINANCE_SHIFT]++;var h=t.estimateBlackPoint(o);if(s<3)for(var l=0;l<s;l++)(a[l]&255)<h&&r.set(l);else for(var d=a[0]&255,g=a[1]&255,l=1;l<s-1;l++){var m=a[l+1]&255;(g*4-d-m)/2<h&&r.set(l),d=g,g=m}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),s=new Fs(r,i);this.initArrays(r);for(var a=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),h=e.getRow(l,this.luminances),d=Math.floor(r*4/5),g=Math.floor(r/5);g<d;g++){var m=h[g]&255;a[m>>t.LUMINANCE_SHIFT]++}for(var y=t.estimateBlackPoint(a),x=e.getMatrix(),o=0;o<i;o++)for(var b=o*r,g=0;g<r;g++){var m=x[b+g]&255;m<y&&s.set(g,o)}return s},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,s=0,a=0,o=0;o<r;o++)e[o]>a&&(s=o,a=e[o]),e[o]>i&&(i=e[o]);for(var l=0,h=0,o=0;o<r;o++){var d=o-s,g=e[o]*d*d;g>h&&(l=o,h=g)}if(s>l){var m=s;s=l,l=m}if(l-s<=r/16)throw new st;for(var y=l-1,x=-1,o=l-1;o>s;o--){var b=o-s,g=b*b*(l-o)*(i-e[o]);g>x&&(y=o,x=g)}return y<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(Eet),Net=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ket=function(n){Net(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var s=e.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&a++;var o=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&o++;var l=t.calculateBlackPoints(s,a,o,r,i),h=new Fs(r,i);t.calculateThresholdForBlock(s,a,o,r,i,l,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,s,a,o,l){for(var h=a-t.BLOCK_SIZE,d=s-t.BLOCK_SIZE,g=0;g<i;g++){var m=g<<t.BLOCK_SIZE_POWER;m>h&&(m=h);for(var y=t.cap(g,2,i-3),x=0;x<r;x++){var b=x<<t.BLOCK_SIZE_POWER;b>d&&(b=d);for(var E=t.cap(x,2,r-3),T=0,S=-2;S<=2;S++){var R=o[y+S];T+=R[E-2]+R[E-1]+R[E]+R[E+1]+R[E+2]}var k=T/25;t.thresholdBlock(e,b,m,k,s,l)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,s,a,o){for(var l=0,h=i*a+r;l<t.BLOCK_SIZE;l++,h+=a)for(var d=0;d<t.BLOCK_SIZE;d++)(e[h+d]&255)<=s&&o.set(r+d,i+l)},t.calculateBlackPoints=function(e,r,i,s,a){for(var o=a-t.BLOCK_SIZE,l=s-t.BLOCK_SIZE,h=new Array(i),d=0;d<i;d++){h[d]=new Int32Array(r);var g=d<<t.BLOCK_SIZE_POWER;g>o&&(g=o);for(var m=0;m<r;m++){var y=m<<t.BLOCK_SIZE_POWER;y>l&&(y=l);for(var x=0,b=255,E=0,T=0,S=g*s+y;T<t.BLOCK_SIZE;T++,S+=s){for(var R=0;R<t.BLOCK_SIZE;R++){var k=e[S+R]&255;x+=k,k<b&&(b=k),k>E&&(E=k)}if(E-b>t.MIN_DYNAMIC_RANGE)for(T++,S+=s;T<t.BLOCK_SIZE;T++,S+=s)for(var R=0;R<t.BLOCK_SIZE;R++)x+=e[S+R]&255}var P=x>>t.BLOCK_SIZE_POWER*2;if(E-b<=t.MIN_DYNAMIC_RANGE&&(P=b/2,d>0&&m>0)){var H=(h[d-1][m]+2*h[d][m-1]+h[d-1][m-1])/4;b<H&&(P=H)}h[d][m]=P}}return h},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(Pet),ry=function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new x1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new x1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new x1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new $t,r=0;r<this.height;r++){for(var i=this.getRow(r,t),s=0;s<this.width;s++){var a=i[s]&255,o=void 0;a<64?o="#":a<128?o="+":a<192?o=".":o=" ",e.append(o)}e.append(`
`)}return e.toString()},n}(),Let=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dE=function(n){Let(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),s=this.getWidth(),a=0;a<s;a++)i[a]=255-(i[a]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),s=0;s<r;s++)i[s]=255-(e[s]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,s){return new t(this.delegate.crop(e,r,i,s))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(ry),Vet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bet=function(n){Vet(t,n);function t(e,r){r===void 0&&(r=!1);var i=n.call(this,e.width,e.height)||this;return i.canvas=e,i.tempCanvasElement=null,i.buffer=t.makeBufferFromCanvasImageData(e,r),i}return t.makeBufferFromCanvasImageData=function(e,r){r===void 0&&(r=!1);var i=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(i.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,i,s){s===void 0&&(s=!1);var a=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!s)for(var o=0,l=0,h=e.length;o<h;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],y=e[o+1],x=e[o+2];d=306*m+601*y+117*x+512>>10}a[l]=d}else for(var o=0,l=0,b=e.length;o<b;o+=4,l++){var d=void 0,g=e[o+3];if(g===0)d=255;else{var m=e[o],y=e[o+1],x=e[o+2];d=306*m+601*y+117*x+512>>10}a[l]=255-d}return a},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth(),s=e*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return n.prototype.crop.call(this,e,r,i,s),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),s=e*t.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(s))*a+Math.abs(Math.sin(s))*o),h=Math.ceil(Math.abs(Math.sin(s))*a+Math.abs(Math.cos(s))*o);return r.width=l,r.height=h,i.translate(l/2,h/2),i.rotate(s),i.drawImage(this.canvas,a/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new dE(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(ry),Fet=function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Rr=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(d){try{h(r.next(d))}catch(g){a(g)}}function l(d){try{h(r.throw(d))}catch(g){a(g)}}function h(d){d.done?s(d.value):i(d.value).then(o,l)}h((r=r.apply(n,t||[])).next())})},Or=function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(d){return l([h,d])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){e.label=h[1];break}if(h[0]===6&&e.label<s[1]){e.label=s[1],s=h;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(h);break}s[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Uet=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kh=function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Rr(this,void 0,void 0,function(){var t,e,r,i,s,a,o,l,h,d,g,m;return Or(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=y.sent(),e=[];try{for(r=Uet(t),i=r.next();!i.done;i=r.next())s=i.value,a=s.kind==="video"?"videoinput":s.kind,a==="videoinput"&&(o=s.deviceId||s.id,l=s.label||"Video device "+(e.length+1),h=s.groupId,d={deviceId:o,label:l,kind:a,groupId:h},e.push(d))}catch(x){g={error:x}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(g)throw g.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return Rr(this,void 0,void 0,function(){var t;return Or(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new Fet(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return Rr(this,void 0,void 0,function(){var e;return Or(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return Rr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return Rr(this,void 0,void 0,function(){var r,i;return Or(this,function(s){switch(s.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,s.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return Rr(this,void 0,void 0,function(){var r;return Or(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return Rr(this,void 0,void 0,function(){var r,i;return Or(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=s.sent(),[4,this.decodeOnce(r)];case 2:return i=s.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return Rr(this,void 0,void 0,function(){return Or(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return Rr(this,void 0,void 0,function(){var i,s;return Or(this,function(a){switch(a.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,e,r)];case 1:return[2,a.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return Rr(this,void 0,void 0,function(){var i;return Or(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,s.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return Rr(this,void 0,void 0,function(){var i;return Or(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,s.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return Rr(this,void 0,void 0,function(){var r;return Or(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return Rr(this,void 0,void 0,function(){return Or(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new Hi("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new Hi("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new Hi("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new Hi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new Hi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new Hi("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new Hi("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new Hi("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new Hi("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new Hi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return Rr(this,void 0,void 0,function(){return Or(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return Rr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var s=function(a,o){if(i._stopAsyncDecode){o(new st("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(t);a(l)}catch(m){var h=e&&m instanceof st,d=m instanceof Jn||m instanceof vt,g=d&&r;if(h||g)return setTimeout(s,i._timeBetweenDecodingAttempts,a,o);o(m)}};return new Promise(function(a,o){return s(a,o)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var s=r.decode(t);e(s,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){e(null,l);var a=l instanceof Jn||l instanceof vt,o=l instanceof st;(a||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var e=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),e=!0):this.drawImageOnCanvas(t);var r=this.getCaptureCanvas(t),i=new Bet(r,e),s=new ket(i);return new wet(s)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n}(),Ar=function(){function n(t,e,r,i,s,a){r===void 0&&(r=e==null?0:8*e.length),a===void 0&&(a=ze.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=s,this.timestamp=a,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=s,this.resultMetadata=null,a==null?this.timestamp=ze.currentTimeMillis():this.timestamp=a}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);ze.arraycopy(e,0,r,0,e.length),ze.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),V2;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(V2||(V2={}));const Nt=V2;var B2;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(B2||(B2={}));const hr=B2;var iy=function(){function n(t,e,r,i,s,a){s===void 0&&(s=-1),a===void 0&&(a=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=a,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),wd=function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new kt;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n}(),Oo=function(){function n(t,e){if(e.length===0)throw new kt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),ze.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,s=e.length;i!==s;i++){var a=e[i];r=wd.addOrSubtract(r,a)}return r}r=e[0];for(var o=e.length,l=this.field,i=1;i<o;i++)r=wd.addOrSubtract(l.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;ze.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=wd.addOrSubtract(e[o-a],r[o]);return new n(this.field,s)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=this.field,l=0;l<r;l++)for(var h=e[l],d=0;d<s;d++)a[l+d]=wd.addOrSubtract(a[l+d],o.multiply(h,i[d]));return new n(o,a)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),s=this.coefficients,a=0;a<e;a++)i[a]=r.multiply(s[a],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new kt;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,s=new Int32Array(i+t),a=this.field,o=0;o<i;o++)s[o]=a.multiply(r[o],e);return new n(a,s)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new kt("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new kt("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,s=t.getCoefficient(t.getDegree()),a=e.inverse(s);i.getDegree()>=t.getDegree()&&!i.isZero();){var o=i.getDegree()-t.getDegree(),l=e.multiply(i.getCoefficient(i.getDegree()),a),h=t.multiplyByMonomial(o,l),d=e.buildMonomial(o,l);r=r.addOrSubtract(d),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n}(),jet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),QN=function(n){jet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(Yr),zet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jr=function(n){zet(t,n);function t(e,r,i){var s=n.call(this)||this;s.primitive=e,s.size=r,s.generatorBase=i;for(var a=new Int32Array(r),o=1,l=0;l<r;l++)a[l]=o,o*=2,o>=r&&(o^=e,o&=r-1);s.expTable=a;for(var h=new Int32Array(r),l=0;l<r-1;l++)h[a[l]]=l;return s.logTable=h,s.zero=new Oo(s,Int32Array.from([0])),s.one=new Oo(s,Int32Array.from([1])),s}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new kt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new Oo(this,i)},t.prototype.inverse=function(e){if(e===0)throw new QN;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+ee.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(wd),Het=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zp=function(n){Het(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(Yr),Get=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),q0=function(n){Get(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(Yr),sy=function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new Oo(r,t),s=new Int32Array(e),a=!0,o=0;o<e;o++){var l=i.evaluateAt(r.exp(o+r.getGeneratorBase()));s[s.length-1-o]=l,l!==0&&(a=!1)}if(!a)for(var h=new Oo(r,s),d=this.runEuclideanAlgorithm(r.buildMonomial(e,1),h,e),g=d[0],m=d[1],y=this.findErrorLocations(g),x=this.findErrorMagnitudes(m,y),o=0;o<y.length;o++){var b=t.length-1-r.log(y[o]);if(b<0)throw new zp("Bad error location");t[b]=jr.addOrSubtract(t[b],x[o])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=this.field,a=t,o=e,l=s.getZero(),h=s.getOne();o.getDegree()>=(r/2|0);){var d=a,g=l;if(a=o,l=h,a.isZero())throw new zp("r_{i-1} was zero");o=d;for(var m=s.getZero(),y=a.getCoefficient(a.getDegree()),x=s.inverse(y);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),E=s.multiply(o.getCoefficient(o.getDegree()),x);m=m.addOrSubtract(s.buildMonomial(b,E)),o=o.addOrSubtract(a.multiplyByMonomial(b,E))}if(h=m.multiply(l).addOrSubtract(g),o.getDegree()>=a.getDegree())throw new q0("Division algorithm failed to reduce polynomial?")}var T=h.getCoefficient(0);if(T===0)throw new zp("sigmaTilde(0) was zero");var S=s.inverse(T),R=h.multiplyScalar(S),k=o.multiplyScalar(S);return[R,k]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,s=this.field,a=1;a<s.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=s.inverse(a),i++);if(i!==e)throw new zp("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),s=this.field,a=0;a<r;a++){for(var o=s.inverse(e[a]),l=1,h=0;h<r;h++)if(a!==h){var d=s.multiply(e[h],o),g=(d&1)===0?d|1:d&-2;l=s.multiply(l,g)}i[a]=s.multiply(t.evaluateAt(o),s.inverse(l)),s.getGeneratorBase()!==0&&(i[a]=s.multiply(i[a],o))}return i},n}(),or;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(or||(or={}));var OR=function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),s=n.convertBoolArrayToByteArray(i),a=n.getEncodedData(i),o=new iy(s,a,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=or.UPPER,i=or.UPPER,s="",a=0;a<e;)if(i===or.BINARY){if(e-a<5)break;var o=n.readCode(t,a,5);if(a+=5,o===0){if(e-a<11)break;o=n.readCode(t,a,11)+31,a+=11}for(var l=0;l<o;l++){if(e-a<8){a=e;break}var h=n.readCode(t,a,8);s+=ue.castAsNonUtf8Char(h),a+=8}i=r}else{var d=i===or.DIGIT?4:5;if(e-a<d)break;var h=n.readCode(t,a,d);a+=d;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(s+=g,i=r)}return s},n.getTable=function(t){switch(t){case"L":return or.LOWER;case"P":return or.PUNCT;case"M":return or.MIXED;case"D":return or.DIGIT;case"B":return or.BINARY;case"U":default:return or.UPPER}},n.getCharacter=function(t,e){switch(t){case or.UPPER:return n.UPPER_TABLE[e];case or.LOWER:return n.LOWER_TABLE[e];case or.MIXED:return n.MIXED_TABLE[e];case or.PUNCT:return n.PUNCT_TABLE[e];case or.DIGIT:return n.DIGIT_TABLE[e];default:throw new q0("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=jr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=jr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=jr.AZTEC_DATA_10):(r=12,e=jr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=t.length/r;if(s<i)throw new vt;for(var a=t.length%r,o=new Int32Array(s),l=0;l<s;l++,a+=r)o[l]=n.readCode(t,a,r);try{var h=new sy(e);h.decode(o,s-i)}catch(E){throw new vt(E)}for(var d=(1<<r)-1,g=0,l=0;l<i;l++){var m=o[l];if(m===0||m===d)throw new vt;(m===1||m===d-1)&&g++}for(var y=new Array(i*r-g),x=0,l=0;l<i;l++){var m=o[l];if(m===1||m===d-1)y.fill(m>1,x,x+r-1),x+=r-1;else for(var b=r-1;b>=0;--b)y[x++]=(m&1<<b)!==0}return y},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,s=new Int32Array(i),a=new Array(this.totalBitsInLayer(r,e));if(e)for(var o=0;o<s.length;o++)s[o]=o;else for(var l=i+1+2*ee.truncDivision(ee.truncDivision(i,2)-1,15),h=i/2,d=ee.truncDivision(l,2),o=0;o<h;o++){var g=o+ee.truncDivision(o,15);s[h-o-1]=d-g-1,s[h+o]=d+g+1}for(var o=0,m=0;o<r;o++){for(var y=(r-o)*4+(e?9:12),x=o*2,b=i-1-x,E=0;E<y;E++)for(var T=E*2,S=0;S<2;S++)a[m+T+S]=t.get(s[x+S],s[x+E]),a[m+2*y+T+S]=t.get(s[x+E],s[b-S]),a[m+4*y+T+S]=t.get(s[b-S],s[b-E]),a[m+6*y+T+S]=t.get(s[b-E],s[x+S]);m+=y*8}return a},n.readCode=function(t,e,r){for(var i=0,s=e;s<e+r;s++)i<<=1,t[s]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),ge=function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var s=t-r,a=e-i;return Math.sqrt(s*s+a*a)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var s=t[r];e+=s}return e},n}(),F2=function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),It=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*F2.floatToIntBits(this.x)+F2.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),s,a,o;if(r>=e&&r>=i?(a=t[0],s=t[1],o=t[2]):i>=r&&i>=e?(a=t[1],s=t[0],o=t[2]):(a=t[2],s=t[0],o=t[1]),this.crossProductZ(s,a,o)<0){var l=s;s=o,o=l}t[0]=s,t[1]=a,t[2]=o},n.distance=function(t,e){return ge.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,s=e.y;return(r.x-i)*(t.y-s)-(r.y-s)*(t.x-i)},n}(),gE=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Wet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qet=function(n){Wet(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r)||this;return o.compact=i,o.nbDatablocks=s,o.nbLayers=a,o}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(gE),U2=function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var s=e/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new st}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,s=!1,a=!0,o=!1,l=!1,h=!1,d=!1,g=!1,m=this.width,y=this.height;a;){a=!1;for(var x=!0;(x||!l)&&e<m;)x=this.containsBlackPoint(r,i,e,!1),x?(e++,a=!0,l=!0):l||e++;if(e>=m){s=!0;break}for(var b=!0;(b||!h)&&i<y;)b=this.containsBlackPoint(t,e,i,!0),b?(i++,a=!0,h=!0):h||i++;if(i>=y){s=!0;break}for(var E=!0;(E||!d)&&t>=0;)E=this.containsBlackPoint(r,i,t,!1),E?(t--,a=!0,d=!0):d||t--;if(t<0){s=!0;break}for(var T=!0;(T||!g)&&r>=0;)T=this.containsBlackPoint(t,e,r,!0),T?(r--,a=!0,g=!0):g||r--;if(r<0){s=!0;break}a&&(o=!0)}if(!s&&o){for(var S=e-t,R=null,k=1;R===null&&k<S;k++)R=this.getBlackPointOnSegment(t,i-k,t+k,i);if(R==null)throw new st;for(var P=null,k=1;P===null&&k<S;k++)P=this.getBlackPointOnSegment(t,r+k,t+k,r);if(P==null)throw new st;for(var H=null,k=1;H===null&&k<S;k++)H=this.getBlackPointOnSegment(e,r+k,e-k,r);if(H==null)throw new st;for(var M=null,k=1;M===null&&k<S;k++)M=this.getBlackPointOnSegment(e,i-k,e-k,i);if(M==null)throw new st;return this.centerEdges(M,R,H,P)}else throw new st},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var s=ge.round(ge.distance(t,e,r,i)),a=(r-t)/s,o=(i-e)/s,l=this.image,h=0;h<s;h++){var d=ge.round(t+h*a),g=ge.round(e+h*o);if(l.get(d,g))return new It(d,g)}return null},n.prototype.centerEdges=function(t,e,r,i){var s=t.getX(),a=t.getY(),o=e.getX(),l=e.getY(),h=r.getX(),d=r.getY(),g=i.getX(),m=i.getY(),y=n.CORR;return s<this.width/2?[new It(g-y,m+y),new It(o+y,l+y),new It(h-y,d-y),new It(s+y,a-y)]:[new It(g+y,m+y),new It(o+y,l-y),new It(h-y,d+y),new It(s-y,a-y)]},n.prototype.containsBlackPoint=function(t,e,r,i){var s=this.image;if(i){for(var a=t;a<=e;a++)if(s.get(a,r))return!0}else for(var o=t;o<=e;o++)if(s.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),MR=function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),s=!0,a=0;a<e.length&&s;a+=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new st;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}s=!0;for(var a=e.length-2;a>=0&&s;a-=2){var o=Math.floor(e[a]),l=Math.floor(e[a+1]);if(o<-1||o>r||l<-1||l>i)throw new st;s=!1,o===-1?(e[a]=0,s=!0):o===r&&(e[a]=r-1,s=!0),l===-1?(e[a+1]=0,s=!0):l===i&&(e[a+1]=i-1,s=!0)}},n}(),ZN=function(){function n(t,e,r,i,s,a,o,l,h){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=s,this.a32=a,this.a13=o,this.a23=l,this.a33=h}return n.quadrilateralToQuadrilateral=function(t,e,r,i,s,a,o,l,h,d,g,m,y,x,b,E){var T=n.quadrilateralToSquare(t,e,r,i,s,a,o,l),S=n.squareToQuadrilateral(h,d,g,m,y,x,b,E);return S.times(T)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=0;m<e;m+=2){var y=t[m],x=t[m+1],b=s*y+l*x+g;t[m]=(r*y+a*x+h)/b,t[m+1]=(i*y+o*x+d)/b}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,s=this.a13,a=this.a21,o=this.a22,l=this.a23,h=this.a31,d=this.a32,g=this.a33,m=t.length,y=0;y<m;y++){var x=t[y],b=e[y],E=s*x+l*b+g;t[y]=(r*x+a*b+h)/E,e[y]=(i*x+o*b+d)/E}},n.squareToQuadrilateral=function(t,e,r,i,s,a,o,l){var h=t-r+s-o,d=e-i+a-l;if(h===0&&d===0)return new n(r-t,s-r,t,i-e,a-i,e,0,0,1);var g=r-s,m=o-s,y=i-a,x=l-a,b=g*x-m*y,E=(h*x-m*d)/b,T=(g*d-h*y)/b;return new n(r-t+E*r,o-t+T*o,t,i-e+E*i,l-e+T*l,e,E,T,1)},n.quadrilateralToSquare=function(t,e,r,i,s,a,o,l){return n.squareToQuadrilateral(t,e,r,i,s,a,o,l).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n}(),Yet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xet=function(n){Yet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,s,a,o,l,h,d,g,m,y,x,b,E,T,S,R,k){var P=ZN.quadrilateralToQuadrilateral(s,a,o,l,h,d,g,m,y,x,b,E,T,S,R,k);return this.sampleGridWithTransform(e,r,i,P)},t.prototype.sampleGridWithTransform=function(e,r,i,s){if(r<=0||i<=0)throw new st;for(var a=new Fs(r,i),o=new Float32Array(2*r),l=0;l<i;l++){for(var h=o.length,d=l+.5,g=0;g<h;g+=2)o[g]=g/2+.5,o[g+1]=d;s.transformPoints(o),MR.checkAndNudgePoints(e,o);try{for(var g=0;g<h;g+=2)e.get(Math.floor(o[g]),Math.floor(o[g+1]))&&a.set(g/2,l)}catch{throw new st}}return a},t}(MR),pE=function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new Xet,n}(),Fr=function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new It(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),Ket=function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new qet(s,a,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new st;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,s=0;s<4;s++){var a=r[(this.shift+s)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(s,a,o){var l=(s>>e-2<<1)+(s&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(ee.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new st},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var s=r-i,a=new Int32Array(r),o=r-1;o>=0;--o)a[o]=t&15,t>>=4;try{var l=new sy(jr.AZTEC_PARAM);l.decode(a,s)}catch{throw new st}for(var h=0,o=0;o<i;o++)h=(h<<4)+a[o];return h},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,s=t,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(e,a,1,-1),l=this.getFirstDifferent(r,a,1,1),h=this.getFirstDifferent(i,a,-1,1),d=this.getFirstDifferent(s,a,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(d,o)*this.nbCenterLayers/(this.distancePoint(s,e)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(o,l,h,d))break}e=o,r=l,i=h,s=d,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new st;this.compact=this.nbCenterLayers===5;var m=new It(e.getX()+.5,e.getY()-.5),y=new It(r.getX()+.5,r.getY()+.5),x=new It(i.getX()-.5,i.getY()+.5),b=new It(s.getX()-.5,s.getY()-.5);return this.expandSquare([m,y,x,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var s=new U2(this.image).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{var a=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new Fr(a+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Fr(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Fr(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Fr(a-7,o-7),!1,-1,-1).toResultPoint()}var l=ge.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=ge.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var s=new U2(this.image,15,l,h).detect();t=s[0],e=s[1],r=s[2],i=s[3]}catch{t=this.getFirstDifferent(new Fr(l+7,h-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Fr(l+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Fr(l-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Fr(l-7,h-7),!1,-1,-1).toResultPoint()}return l=ge.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=ge.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new Fr(l,h)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,s){var a=pE.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,h=o/2+this.nbCenterLayers;return a.sampleGrid(t,o,o,l,l,h,l,h,h,l,h,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,s=this.distanceResultPoint(t,e),a=s/r,o=t.getX(),l=t.getY(),h=a*(e.getX()-t.getX())/s,d=a*(e.getY()-t.getY())/s,g=0;g<r;g++)this.image.get(ge.round(o+g*h),ge.round(l+g*d))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var s=3;t=new Fr(t.getX()-s,t.getY()+s),e=new Fr(e.getX()-s,e.getY()-s),r=new Fr(r.getX()+s,r.getY()-s),i=new Fr(i.getX()+s,i.getY()+s);var a=this.getColor(i,t);if(a===0)return!1;var o=this.getColor(t,e);return o!==a||(o=this.getColor(e,r),o!==a)?!1:(o=this.getColor(r,i),o===a)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,s=(e.getY()-t.getY())/r,a=0,o=t.getX(),l=t.getY(),h=this.image.get(t.getX(),t.getY()),d=Math.ceil(r),g=0;g<d;g++)o+=i,l+=s,this.image.get(ge.round(o),ge.round(l))!==h&&a++;var m=a/r;return m>.1&&m<.9?0:m<=.1===h?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var s=t.getX()+r,a=t.getY()+i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r,a+=i;for(s-=r,a-=i;this.isValid(s,a)&&this.image.get(s,a)===e;)s+=r;for(s-=r;this.isValid(s,a)&&this.image.get(s,a)===e;)a+=i;return a-=i,new Fr(s,a)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),s=t[0].getX()-t[2].getX(),a=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,h=new It(o+i*s,l+i*a),d=new It(o-i*s,l-i*a);s=t[1].getX()-t[3].getX(),a=t[1].getY()-t[3].getY(),o=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2;var g=new It(o+i*s,l+i*a),m=new It(o-i*s,l-i*a),y=[h,g,d,m];return y},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=ge.round(t.getX()),r=ge.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return ge.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return ge.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ee.truncDivision(this.nbLayers-4,8)+1)+15},n}(),j2=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new Ket(t.getBlackMatrix()),s=null,a=null;try{var o=i.detectMirror(!1);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new OR().decode(o)}catch(g){r=g}if(a==null)try{var o=i.detectMirror(!0);s=o.getPoints(),this.reportFoundResultPoints(e,s),a=new OR().decode(o)}catch(g){throw r??g}var l=new Ar(a.getText(),a.getRawBytes(),a.getNumBits(),s,Nt.AZTEC,ze.currentTimeMillis()),h=a.getByteSegments();h!=null&&l.putMetadata(hr.BYTE_SEGMENTS,h);var d=a.getECLevel();return d!=null&&l.putMetadata(hr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(Qe.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,s,a){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),$et=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){$et(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new j2,e)||this}return t})(kh);var jn=function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(Qe.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),s=this.doDecode(i,e),a=s.getResultMetadata(),o=270;a!==null&&a.get(hr.ORIENTATION)===!0&&(o=o+a.get(hr.ORIENTATION)%360),s.putMetadata(hr.ORIENTATION,o);var l=s.getResultPoints();if(l!==null)for(var h=i.getHeight(),d=0;d<l.length;d++)l[d]=new It(h-l[d].getY()-1,l[d].getX());return s}else throw new st}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),s=new tr(r),a=e&&e.get(Qe.TRY_HARDER)===!0,o=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var h=Math.trunc(i/2),d=0;d<l;d++){var g=Math.trunc((d+1)/2),m=(d&1)===0,y=h+o*(m?g:-g);if(y<0||y>=i)break;try{s=t.getBlackRow(y,s)}catch{continue}for(var x=function(S){if(S===1&&(s.reverse(),e&&e.get(Qe.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;e.forEach(function(H,M){return R.set(M,H)}),R.delete(Qe.NEED_RESULT_POINT_CALLBACK),e=R}try{var k=b.decodeRow(y,s,e);if(S===1){k.putMetadata(hr.ORIENTATION,180);var P=k.getResultPoints();P!==null&&(P[0]=new It(r-P[0].getX()-1,P[0].getY()),P[1]=new It(r-P[1].getX()-1,P[1].getY()))}return{value:k}}catch{}},b=this,E=0;E<2;E++){var T=x(E);if(typeof T=="object")return T.value}}throw new st},n.recordPattern=function(t,e,r){for(var i=r.length,s=0;s<i;s++)r[s]=0;var a=t.getSize();if(e>=a)throw new st;for(var o=!t.get(e),l=0,h=e;h<a;){if(t.get(h)!==o)r[l]++;else{if(++l===i)break;r[l]=1,o=!o}h++}if(!(l===i||l===i-1&&h===a))throw new st},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,s=t.get(e);e>0&&i>=0;)t.get(--e)!==s&&(i--,s=!s);if(i>=0)throw new st;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return Number.POSITIVE_INFINITY;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,y=g>m?g-m:m-g;if(y>r)return Number.POSITIVE_INFINITY;h+=y}return h/s},n}(),Qet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PR=function(n){Qet(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),s=0,a=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,h=6,d=i;d<r;d++)if(e.get(d)!==l)a[s]++;else{if(s===h-1){for(var g=t.MAX_AVG_VARIANCE,m=-1,y=t.CODE_START_A;y<=t.CODE_START_C;y++){var x=jn.patternMatchVariance(a,t.CODE_PATTERNS[y],t.MAX_INDIVIDUAL_VARIANCE);x<g&&(g=x,m=y)}if(m>=0&&e.isRange(Math.max(0,o-(d-o)/2),o,!1))return Int32Array.from([o,d,m]);o+=a[0]+a[1],a=a.slice(2,a.length),a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,l=!l}throw new st},t.decodeCode=function(e,r,i){jn.recordPattern(e,i,r);for(var s=t.MAX_AVG_VARIANCE,a=-1,o=0;o<t.CODE_PATTERNS.length;o++){var l=t.CODE_PATTERNS[o],h=this.patternMatchVariance(r,l,t.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=o)}if(a>=0)return a;throw new st},t.prototype.decodeRow=function(e,r,i){var s=i&&i.get(Qe.ASSUME_GS1)===!0,a=t.findStartPattern(r),o=a[2],l=0,h=new Uint8Array(20);h[l++]=o;var d;switch(o){case t.CODE_START_A:d=t.CODE_CODE_A;break;case t.CODE_START_B:d=t.CODE_CODE_B;break;case t.CODE_START_C:d=t.CODE_CODE_C;break;default:throw new vt}for(var g=!1,m=!1,y="",x=a[0],b=a[1],E=Int32Array.from([0,0,0,0,0,0]),T=0,S=0,R=o,k=0,P=!0,H=!1,M=!1;!g;){var C=m;switch(m=!1,T=S,S=t.decodeCode(r,E,b),h[l++]=S,S!==t.CODE_STOP&&(P=!0),S!==t.CODE_STOP&&(k++,R+=k*S),x=b,b+=E.reduce(function(at,mt){return at+mt},0),S){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new vt}switch(d){case t.CODE_CODE_A:if(S<64)M===H?y+=String.fromCharCode(32+S):y+=String.fromCharCode(32+S+128),M=!1;else if(S<96)M===H?y+=String.fromCharCode(S-64):y+=String.fromCharCode(S+64),M=!1;else switch(S!==t.CODE_STOP&&(P=!1),S){case t.CODE_FNC_1:s&&(y.length===0?y+="]C1":y+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!H&&M?(H=!0,M=!1):H&&M?(H=!1,M=!1):M=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_B;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_B:if(S<96)M===H?y+=String.fromCharCode(32+S):y+=String.fromCharCode(32+S+128),M=!1;else switch(S!==t.CODE_STOP&&(P=!1),S){case t.CODE_FNC_1:s&&(y.length===0?y+="]C1":y+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!H&&M?(H=!0,M=!1):H&&M?(H=!1,M=!1):M=!0;break;case t.CODE_SHIFT:m=!0,d=t.CODE_CODE_A;break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_C:d=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_C:if(S<100)S<10&&(y+="0"),y+=S;else switch(S!==t.CODE_STOP&&(P=!1),S){case t.CODE_FNC_1:s&&(y.length===0?y+="]C1":y+="");break;case t.CODE_CODE_A:d=t.CODE_CODE_A;break;case t.CODE_CODE_B:d=t.CODE_CODE_B;break;case t.CODE_STOP:g=!0;break}break}C&&(d=d===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var O=b-x;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-x)/2),!1))throw new st;if(R-=k*T,R%103!==T)throw new Jn;var L=y.length;if(L===0)throw new st;L>0&&P&&(d===t.CODE_CODE_C?y=y.substring(0,L-2):y=y.substring(0,L-1));for(var j=(a[1]+a[0])/2,z=x+O/2,U=h.length,Et=new Uint8Array(U),wt=0;wt<U;wt++)Et[wt]=h[wt];var Q=[new It(j,e),new It(z,e)];return new Ar(y,Et,0,Q,Nt.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(jn),Zet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},NR=function(n){Zet(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.counters;h.fill(0),this.decodeRowResult="";var d=t.findAsteriskPattern(r,h),g=r.getNextSet(d[1]),m=r.getSize(),y,x;do{t.recordPattern(r,g,h);var b=t.toNarrowWidePattern(h);if(b<0)throw new st;y=t.patternToChar(b),this.decodeRowResult+=y,x=g;try{for(var E=(s=void 0,cx(h)),T=E.next();!T.done;T=E.next()){var S=T.value;g+=S}}catch(U){s={error:U}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}g=r.getNextSet(g)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var k=cx(h),P=k.next();!P.done;P=k.next()){var S=P.value;R+=S}}catch(U){o={error:U}}finally{try{P&&!P.done&&(l=k.return)&&l.call(k)}finally{if(o)throw o.error}}var H=g-x-R;if(g!==m&&H*2<R)throw new st;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,C=0,O=0;O<M;O++)C+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(O));if(this.decodeRowResult.charAt(M)!==t.ALPHABET_STRING.charAt(C%43))throw new Jn;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new st;var L;this.extendedMode?L=t.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;var j=(d[1]+d[0])/2,z=x+R/2;return new Ar(L,null,0,[new It(j,e),new It(z,e)],Nt.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),s=e.getNextSet(0),a=0,o=s,l=!1,h=r.length,d=s;d<i;d++)if(e.get(d)!==l)r[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((d-o)/2)),o,!1))return[o,d];o+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,l=!l}throw new st},t.toNarrowWidePattern=function(e){var r,i,s=e.length,a=0,o;do{var l=2147483647;try{for(var h=(r=void 0,cx(e)),d=h.next();!d.done;d=h.next()){var g=d.value;g<l&&g>a&&(l=g)}}catch(b){r={error:b}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}a=l,o=0;for(var m=0,y=0,x=0;x<s;x++){var g=e[x];g>a&&(y|=1<<s-1-x,o++,m+=g)}if(o===3){for(var x=0;x<s&&o>0;x++){var g=e[x];if(g>a&&(o--,g*2>=m))return-1}return y}}while(o>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new st},t.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a==="+"||a==="$"||a==="%"||a==="/"){var o=e.charAt(s+1),l="\0";switch(a){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new vt;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new vt;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new vt;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new vt;break}i+=l,s++}else i+=a}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(jn),Jet=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kR=function(n){Jet(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.findAsteriskPattern(r),d=r.getNextSet(h[1]),g=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var y,x;do{t.recordPattern(r,d,m);var b=this.toPattern(m);if(b<0)throw new st;y=this.patternToChar(b),this.decodeRowResult+=y,x=d;try{for(var E=(s=void 0,lx(m)),T=E.next();!T.done;T=E.next()){var S=T.value;d+=S}}catch(O){s={error:O}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var k=lx(m),P=k.next();!P.done;P=k.next()){var S=P.value;R+=S}}catch(O){o={error:O}}finally{try{P&&!P.done&&(l=k.return)&&l.call(k)}finally{if(o)throw o.error}}if(d===g||!r.get(d))throw new st;if(this.decodeRowResult.length<2)throw new st;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var H=this.decodeExtended(this.decodeRowResult),M=(h[1]+h[0])/2,C=x+R/2;return new Ar(H,null,0,[new It(M,e),new It(C,e)],Nt.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var s=this.counters,a=i,o=!1,l=s.length,h=0,d=i;d<r;d++)if(e.get(d)!==o)s[h]++;else{if(h===l-1){if(this.toPattern(s)===t.ASTERISK_ENCODING)return new Int32Array([a,d]);a+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,o=!o}throw new st},t.prototype.toPattern=function(e){var r,i,s=0;try{for(var a=lx(e),o=a.next();!o.done;o=a.next()){var l=o.value;s+=l}}catch(x){r={error:x}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}for(var h=0,d=e.length,g=0;g<d;g++){var m=Math.round(e[g]*9/s);if(m<1||m>4)return-1;if((g&1)===0)for(var y=0;y<m;y++)h=h<<1|1;else h<<=m}return h},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new st},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",s=0;s<r;s++){var a=e.charAt(s);if(a>="a"&&a<="d"){if(s>=r-1)throw new vt;var o=e.charAt(s+1),l="\0";switch(a){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new vt;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new vt;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new vt;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new vt;break}i+=l,s++}else i+=a}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var s=1,a=0,o=r-1;o>=0;o--)a+=s*t.ALPHABET_STRING.indexOf(e.charAt(o)),++s>i&&(s=1);if(e.charAt(r)!==t.ALPHABET_STRING[a%47])throw new Jn},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(jn),tnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ent=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LR=function(n){tnt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var s,a,o=this.decodeStart(r),l=this.decodeEnd(r),h=new $t;t.decodeMiddle(r,o[1],l[0],h);var d=h.toString(),g=null;i!=null&&(g=i.get(Qe.ALLOWED_LENGTHS)),g==null&&(g=t.DEFAULT_ALLOWED_LENGTHS);var m=d.length,y=!1,x=0;try{for(var b=ent(g),E=b.next();!E.done;E=b.next()){var T=E.value;if(m===T){y=!0;break}T>x&&(x=T)}}catch(k){s={error:k}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}if(!y&&m>x&&(y=!0),!y)throw new vt;var S=[new It(o[1],e),new It(l[0],e)],R=new Ar(d,null,0,S,Nt.ITF,new Date().getTime());return R},t.decodeMiddle=function(e,r,i,s){var a=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),o.fill(0),l.fill(0);r<i;){jn.recordPattern(e,r,a);for(var h=0;h<5;h++){var d=2*h;o[h]=a[d],l[h]=a[d+1]}var g=t.decodeDigit(o);s.append(g.toString()),g=this.decodeDigit(l),s.append(g.toString()),a.forEach(function(m){r+=m})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var s=r-1;i>0&&s>=0&&!e.get(s);s--)i--;if(i!==0)throw new st},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new st;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(a){a instanceof st&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var s=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-s,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var s=i.length,a=new Int32Array(s),o=e.getSize(),l=!1,h=0,d=r;a.fill(0);for(var g=r;g<o;g++)if(e.get(g)!==l)a[h]++;else{if(h===s-1){if(jn.patternMatchVariance(a,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[d,g];d+=a[0]+a[1],ze.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new st},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,s=t.PATTERNS.length,a=0;a<s;a++){var o=t.PATTERNS[a],l=jn.patternMatchVariance(e,o,t.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=a):l===r&&(i=-1)}if(i>=0)return i%10;throw new st},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(jn),nnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bh=function(n){nnt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,s=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,s,!1,this.START_END_PATTERN,a);var o=i[0];s=i[1];var l=o-(s-o);l>=0&&(r=e.isRange(l,o,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new vt;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new vt;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,s){return this.findGuardPattern(e,r,i,s,new Int32Array(s.length))},t.findGuardPattern=function(e,r,i,s,a){var o=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var l=0,h=r,d=s.length,g=i,m=r;m<o;m++)if(e.get(m)!==g)a[l]++;else{if(l===d-1){if(jn.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([h,m]);h+=a[0]+a[1];for(var y=a.slice(2,a.length),x=0;x<l-1;x++)a[x]=y[x];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,g=!g}throw new st},t.decodeDigit=function(e,r,i,s){this.recordPattern(e,i,r);for(var a=this.MAX_AVG_VARIANCE,o=-1,l=s.length,h=0;h<l;h++){var d=s[h],g=jn.patternMatchVariance(r,d,t.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,o=h)}if(o>=0)return o;throw new st},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(jn),rnt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},int=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new It((r[0]+r[1])/2,t),new It(s,t)],h=new Ar(a,null,0,l,Nt.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<5&&l<o;d++){var g=bh.decodeDigit(t,a,l,bh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,rnt(a)),y=m.next();!y.done;y=m.next()){var x=y.value;l+=x}}catch(E){i={error:E}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-d),d!==4&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==5)throw new st;var b=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==b)throw new st;return l},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new st},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[hr.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),s=r%100,a=s<10?"0"+s:s.toString();return e+i+"."+a},n}(),snt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ant=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(e,r,i),a=i.toString(),o=n.parseExtensionString(a),l=[new It((r[0]+r[1])/2,t),new It(s,t)],h=new Ar(a,null,0,l,Nt.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&h.putAllMetadata(o),h},n.prototype.decodeMiddle=function(t,e,r){var i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=e[1],h=0,d=0;d<2&&l<o;d++){var g=bh.decodeDigit(t,a,l,bh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var m=(i=void 0,snt(a)),y=m.next();!y.done;y=m.next()){var x=y.value;l+=x}}catch(b){i={error:b}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-d),d!==1&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==2)throw new st;if(parseInt(r.toString())%4!==h)throw new st;return l},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[hr.ISSUE_NUMBER,parseInt(t)]])},n}(),ont=function(){function n(){}return n.decodeRow=function(t,e,r){var i=bh.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new int;return s.decodeRow(t,e,i)}catch{var a=new ant;return a.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),cnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vn=function(n){cnt(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],s=new Int32Array(i.length),a=0;a<i.length;a++)s[a]=i[i.length-a-1];t.L_AND_G_PATTERNS[r]=s}return e}return t.prototype.decodeRow=function(e,r,i){var s=t.findStartGuardPattern(r),a=i==null?null:i.get(Qe.NEED_RESULT_POINT_CALLBACK);if(a!=null){var o=new It((s[0]+s[1])/2,e);a.foundPossibleResultPoint(o)}var l=this.decodeMiddle(r,s,this.decodeRowStringBuffer),h=l.rowOffset,d=l.resultString;if(a!=null){var g=new It(h,e);a.foundPossibleResultPoint(g)}var m=t.decodeEnd(r,h);if(a!=null){var y=new It((m[0]+m[1])/2,e);a.foundPossibleResultPoint(y)}var x=m[1],b=x+(x-m[0]);if(b>=r.getSize()||!r.isRange(x,b,!1))throw new st;var E=d.toString();if(E.length<8)throw new vt;if(!t.checkChecksum(E))throw new Jn;var T=(s[1]+s[0])/2,S=(m[1]+m[0])/2,R=this.getBarcodeFormat(),k=[new It(T,e),new It(S,e)],P=new Ar(E,null,0,k,R,new Date().getTime()),H=0;try{var M=ont.decodeRow(e,r,m[1]);P.putMetadata(hr.UPC_EAN_EXTENSION,M.getText()),P.putAllMetadata(M.getResultMetadata()),P.addResultPoints(M.getResultPoints()),H=M.getText().length}catch{}var C=i==null?null:i.get(Qe.ALLOWED_EAN_EXTENSIONS);if(C!=null){var O=!1;for(var L in C)if(H.toString()===L){O=!0;break}if(!O)throw new st}return R===Nt.EAN_13||Nt.UPC_A,P},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,s=r-1;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new vt;i+=a}i*=3;for(var s=r-2;s>=0;s-=2){var a=e.charAt(s).charCodeAt(0)-48;if(a<0||a>9)throw new vt;i+=a}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(bh),lnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),VR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},z2=function(n){lnt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0,y=0;y<6&&g<d;y++){var x=Vn.decodeDigit(e,h,g,Vn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var b=(s=void 0,VR(h)),E=b.next();!E.done;E=b.next()){var T=E.value;g+=T}}catch(P){s={error:P}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}x>=10&&(m|=1<<5-y)}i=t.determineFirstDigit(i,m);var S=Vn.findGuardPattern(e,g,!0,Vn.MIDDLE_PATTERN,new Int32Array(Vn.MIDDLE_PATTERN.length).fill(0));g=S[1];for(var y=0;y<6&&g<d;y++){var x=Vn.decodeDigit(e,h,g,Vn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var R=(o=void 0,VR(h)),k=R.next();!k.done;k=R.next()){var T=k.value;g+=T}}catch(M){o={error:M}}finally{try{k&&!k.done&&(l=R.return)&&l.call(R)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Nt.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new st},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Vn),unt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),BR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},FR=function(n){unt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o,l,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var d=e.getSize(),g=r[1],m=0;m<4&&g<d;m++){var y=Vn.decodeDigit(e,h,g,Vn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var x=(s=void 0,BR(h)),b=x.next();!b.done;b=x.next()){var E=b.value;g+=E}}catch(k){s={error:k}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}}var T=Vn.findGuardPattern(e,g,!0,Vn.MIDDLE_PATTERN,new Int32Array(Vn.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var m=0;m<4&&g<d;m++){var y=Vn.decodeDigit(e,h,g,Vn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var S=(o=void 0,BR(h)),R=S.next();!R.done;R=S.next()){var E=R.value;g+=E}}catch(H){o={error:H}}finally{try{R&&!R.done&&(l=S.return)&&l.call(S)}finally{if(o)throw o.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Nt.EAN_8},t}(Vn),hnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),UR=function(n){hnt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new z2,e}return t.prototype.getBarcodeFormat=function(){return Nt.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new Ar(r.substring(1),null,null,e.getResultPoints(),Nt.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new st},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Vn),fnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dnt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jR=function(n){fnt(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var s,a,o=this.decodeMiddleCounters.map(function(E){return E});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),h=r[1],d=0,g=0;g<6&&h<l;g++){var m=t.decodeDigit(e,o,h,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var y=(s=void 0,dnt(o)),x=y.next();!x.done;x=y.next()){var b=x.value;h+=b}}catch(E){s={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}m>=10&&(d|=1<<5-g)}return t.determineNumSysAndCheckDigit(new $t(i),d),h},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Vn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){e.insert(0,"0"+i),e.append("0"+s);return}throw st.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Nt.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new $t;i.append(e.charAt(0));var s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Vn),gnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ux=function(n){gnt(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(Qe.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(Nt.EAN_13)>-1&&s.push(new z2),i.indexOf(Nt.UPC_A)>-1&&s.push(new UR),i.indexOf(Nt.EAN_8)>-1&&s.push(new FR),i.indexOf(Nt.UPC_E)>-1&&s.push(new jR)),s.length===0&&(s.push(new z2),s.push(new UR),s.push(new FR),s.push(new jR)),r.readers=s,r}return t.prototype.decodeRow=function(e,r,i){var s,a;try{for(var o=zR(this.readers),l=o.next();!l.done;l=o.next()){var h=l.value;try{var d=h.decodeRow(e,r,i),g=d.getBarcodeFormat()===Nt.EAN_13&&d.getText().charAt(0)==="0",m=i==null?null:i.get(Qe.POSSIBLE_FORMATS),y=m==null||m.includes(Nt.UPC_A);if(g&&y){var x=d.getRawBytes(),b=new Ar(d.getText().substring(1),x,x?x.length:null,d.getResultPoints(),Nt.UPC_A);return b.putAllMetadata(d.getResultMetadata()),b}return d}catch{}}}catch(E){s={error:E}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}throw new st},t.prototype.reset=function(){var e,r;try{for(var i=zR(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;a.reset()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t}(jn),pnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mnt=function(n){pnt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var s=this.getValidRowData(r);if(!s)throw new st;var a=this.codaBarDecodeRow(s.row);if(!a)throw new st;return new Ar(a,null,0,[new It(s.left,e),new It(s.right,e)],Nt.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var s=r.lastIndexOf(!0);if(s<=i)return null;r=r.slice(i,s+1);for(var a=[],o=r[0],l=1,h=1;h<r.length;h++)r[h]===o?l++:(o=r[h],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:s}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(l,h){return(l+h)/2},0));e.length>0;){var s=e.splice(0,8).splice(0,7),a=s.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[a])}var o=r.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t}(jn),ynt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vnt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hc=function(n){ynt(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(jn.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new st},t.count=function(e){return ge.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]>s&&(s=r[a],i=a);e[i]++},t.decrement=function(e,r){for(var i=0,s=r[0],a=1;a<e.length;a++)r[a]<s&&(s=r[a],i=a);e[i]--},t.isFinderPattern=function(e){var r,i,s=e[0]+e[1],a=s+e[2]+e[3],o=s/a;if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var d=vnt(e),g=d.next();!g.done;g=d.next()){var m=g.value;m>h&&(h=m),m<l&&(l=m)}}catch(y){r={error:y}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return h<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(jn),dm=function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),JN=function(){function n(t,e,r,i,s){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new It(r,s)),this.resultPoints.push(new It(i,s))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),_nt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wu=function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,s,a=0;try{for(var o=_nt(t),l=o.next();!l.done;l=o.next()){var h=l.value;a+=h}}catch(S){i={error:S}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}for(var d=0,g=0,m=t.length,y=0;y<m-1;y++){var x=void 0;for(x=1,g|=1<<y;x<t[y];x++,g&=~(1<<y)){var b=n.combins(a-x-1,m-y-2);if(r&&g===0&&a-x-(m-y-1)>=m-y-1&&(b-=n.combins(a-x-(m-y),m-y-2)),m-y-1>1){for(var E=0,T=a-x-(m-y-2);T>e;T--)E+=n.combins(a-x-T-1,m-y-3);b-=E*(m-1-y)}else a-x>e&&b--;d+=b}a-=x}return d},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var s=1,a=1,o=t;o>r;o--)s*=o,a<=i&&(s/=a,a++);for(;a<=i;)s/=a,a++;return s},n}(),xnt=function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new tr(r),s=0,a=t[0],o=a.getRightChar().getValue(),l=11;l>=0;--l)(o&1<<l)!==0&&i.set(s),s++;for(var l=1;l<t.length;++l){for(var h=t[l],d=h.getLeftChar().getValue(),g=11;g>=0;--g)(d&1<<g)!==0&&i.set(s),s++;if(h.getRightChar()!==null)for(var m=h.getRightChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(s),s++}return i},n}(),Nc=function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),mE=function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),wnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zi=function(n){wnt(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(mE),bnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kc=function(n){bnt(t,n);function t(e,r,i){var s=n.call(this,e)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=r,s}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(mE),Ent=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ou=function(n){Ent(t,n);function t(e,r,i){var s=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new vt;return s.firstDigit=r,s.secondDigit=i,s}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(mE),Hp=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ant=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,s,a,o,l,h;if(!t)return null;if(t.length<2)throw new st;var d=t.substring(0,2);try{for(var g=Hp(n.TWO_DIGIT_DATA_LENGTH),m=g.next();!m.done;m=g.next()){var y=m.value;if(y[0]===d)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],t):n.processFixedAI(2,y[1],t)}}catch(H){e={error:H}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(t.length<3)throw new st;var x=t.substring(0,3);try{for(var b=Hp(n.THREE_DIGIT_DATA_LENGTH),E=b.next();!E.done;E=b.next()){var y=E.value;if(y[0]===x)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],t):n.processFixedAI(3,y[1],t)}}catch(H){i={error:H}}finally{try{E&&!E.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}try{for(var T=Hp(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),S=T.next();!S.done;S=T.next()){var y=S.value;if(y[0]===x)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],t):n.processFixedAI(4,y[1],t)}}catch(H){a={error:H}}finally{try{S&&!S.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}if(t.length<4)throw new st;var R=t.substring(0,4);try{for(var k=Hp(n.FOUR_DIGIT_DATA_LENGTH),P=k.next();!P.done;P=k.next()){var y=P.value;if(y[0]===R)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],t):n.processFixedAI(4,y[1],t)}}catch(H){l={error:H}}finally{try{P&&!P.done&&(h=k.return)&&h.call(k)}finally{if(l)throw l.error}}throw new st},n.processFixedAI=function(t,e,r){if(r.length<t)throw new st;var i=r.substring(0,t);if(r.length<t+e)throw new st;var s=r.substring(t,t+e),a=r.substring(t+e),o="("+i+")"+s,l=n.parseFieldsInGeneralPurpose(a);return l==null?o:o+l},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),s;r.length<t+e?s=r.length:s=t+e;var a=r.substring(t,s),o=r.substring(s),l="("+i+")"+a,h=n.parseFieldsInGeneralPurpose(o);return h==null?l:l+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),w1=function(){function n(t){this.buffer=new $t,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var s=this.decodeGeneralPurposeField(r,i),a=Ant.parseFieldsInGeneralPurpose(s.getNewString());if(a!=null&&t.append(a),s.isRemaining()?i=""+s.getRemainingValue():i=null,r===s.getNewPosition())break;r=s.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new Ou(this.information.getSize(),Ou.FNC1,Ou.FNC1):new Ou(this.information.getSize(),e-1,Ou.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,s=(r-8)%11;return new Ou(t+7,i,s)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,s=0;s<r;++s)t.get(e+s)&&(i|=1<<r-s-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new kc(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new kc(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new kc(this.current.getPosition(),this.buffer.toString()):e=new kc(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Nc(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new kc(this.current.getPosition(),this.buffer.toString());return new Nc(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Nc(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new kc(this.current.getPosition(),this.buffer.toString());return new Nc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Nc(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new kc(this.current.getPosition(),this.buffer.toString());return new Nc(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Nc(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new zi(t+5,zi.FNC1);if(e>=5&&e<15)return new zi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new zi(t+7,""+(r+1));if(r>=90&&r<116)return new zi(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new vt}return new zi(t+8,s)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new zi(t+5,zi.FNC1);if(e>=5&&e<15)return new zi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new zi(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new q0("Decoding invalid alphanumeric value: "+r)}return new zi(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n}(),t5=function(){function n(t){this.information=t,this.generalDecoder=new w1(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),Tnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yi=function(n){Tnt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var s=0;s<4;++s){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,s=0;s<13;s++){var a=e.charAt(s+r).charCodeAt(0)-48;i+=(s&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t}(t5),Snt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Int=function(n){Snt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new $t;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(Yi),Cnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dnt=function(n){Cnt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new $t;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(t5),Rnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),b1=function(n){Rnt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,s);for(var a=this.checkWeight(s),o=1e5,l=0;l<5;++l)a/o===0&&e.append("0"),o/=10;e.append(a)},t}(Yi),Ont=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),e5=function(n){Ont(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+b1.GTIN_SIZE+t.WEIGHT_SIZE)throw new st;var e=new $t;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+b1.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(b1),Mnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pnt=function(n){Mnt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(e5),Nnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),knt=function(n){Nnt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(e5),Lnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vnt=function(n){Lnt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Yi.GTIN_SIZE)throw new st;var e=new $t;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Yi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Yi.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(Yi),Bnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fnt=function(n){Bnt(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Yi.GTIN_SIZE)throw new st;var e=new $t;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Yi.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Yi.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Yi.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(s.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Yi),Unt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),co=function(n){Unt(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.dateCode=i,s.firstAIdigits=r,s}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new st;var e=new $t;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var s=i%32;i/=32;var a=i%12+1;i/=12;var o=i;o/10===0&&e.append("0"),e.append(o),a/10===0&&e.append("0"),e.append(a),s/10===0&&e.append("0"),e.append(s)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(b1);function jnt(n){try{if(n.get(1))return new Int(n);if(!n.get(2))return new Dnt(n);var t=w1.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new Pnt(n);case 5:return new knt(n)}var e=w1.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new Vnt(n);case 13:return new Fnt(n)}var r=w1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new co(n,"310","11");case 57:return new co(n,"320","11");case 58:return new co(n,"310","13");case 59:return new co(n,"320","13");case 60:return new co(n,"310","15");case 61:return new co(n,"320","15");case 62:return new co(n,"310","17");case 63:return new co(n,"320","17")}}catch(i){throw console.log(i),new q0("unknown decoder: "+n)}}var HR=function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n}(),znt=function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,s){e.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),Hnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lo=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gnt=function(n){Hnt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(o){if(o instanceof st){if(!this.pairs.length)throw new st;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(e,!1),s){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new st},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,s,a=r;a<this.rows.length;a++){var o=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,lo(e)),h=l.next();!h.done;h=l.next()){var d=h.value;this.pairs.push(d.getPairs())}}catch(m){i={error:m}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(e);g.push(o);try{return this.checkRows(g,a+1)}catch(m){console.log(m)}}}throw new st},t.isValidSequence=function(e){var r,i;try{for(var s=lo(t.FINDER_PATTERN_SEQUENCES),a=s.next();!a.done;a=s.next()){var o=a.value;if(!(e.length>o.length)){for(var l=!0,h=0;h<e.length;h++)if(e[h].getFinderPattern().getValue()!==o[h]){l=!1;break}if(l)return!0}}}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,s=!1,a=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}s=o.isEquivalent(this.pairs),i++}a||s||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new znt(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,s,a,o,l,h;try{for(var d=lo(r),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.getPairs().length!==e.length){var y=!0;try{for(var x=(a=void 0,lo(m.getPairs())),b=x.next();!b.done;b=x.next()){var E=b.value,T=!1;try{for(var S=(l=void 0,lo(e)),R=S.next();!R.done;R=S.next()){var k=R.value;if(HR.equals(E,k)){T=!0;break}}}catch(P){l={error:P}}finally{try{R&&!R.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}T||(y=!1)}}catch(P){a={error:P}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}}}catch(P){i={error:P}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,s,a,o,l,h;try{for(var d=lo(r),g=d.next();!g.done;g=d.next()){var m=g.value,y=!0;try{for(var x=(a=void 0,lo(e)),b=x.next();!b.done;b=x.next()){var E=b.value,T=!1;try{for(var S=(l=void 0,lo(m.getPairs())),R=S.next();!R.done;R=S.next()){var k=R.value;if(E.equals(k)){T=!0;break}}}catch(P){l={error:P}}finally{try{R&&!R.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}if(!T){y=!1;break}}}catch(P){a={error:P}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}if(y)return!0}}catch(P){i={error:P}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=xnt.buildBitArray(e),i=jnt(r),s=i.parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],o[0],o[1]];return new Ar(s,null,null,l,Nt.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var s=i.getChecksumPortion(),a=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);s+=l.getLeftChar().getChecksumPortion(),a++;var h=l.getRightChar();h!=null&&(s+=h.getChecksumPortion(),a++)}s%=211;var d=211*(a-4)+s;return d===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var s=r.length%2===0;this.startFromEven&&(s=!s);var a,o=!0,l=-1;do this.findNextPair(e,r,l),a=this.parseFoundFinderPattern(e,i,s),a===null?l=t.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);var h=this.decodeDataCharacter(e,a,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new st;var d;try{d=this.decodeDataCharacter(e,a,s,!1)}catch(g){d=null,console.log(g)}return new HR(h,d,a,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var a=e.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var l=r[r.length-1];o=l.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var d=!1;o<a&&(d=!e.get(o),!!d);)o++;for(var g=0,m=o,y=o;y<a;y++)if(e.get(y)!==d)s[g]++;else{if(g===3){if(h&&t.reverseCounters(s),t.isFinderPattern(s)){this.startEnd[0]=m,this.startEnd[1]=y;return}h&&t.reverseCounters(s),m+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,g--}else g++;s[g]=1,d=!d}throw new st},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var s=e[i];e[i]=e[r-i-1],e[r-i-1]=s}},t.prototype.parseFoundFinderPattern=function(e,r,i){var s,a,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!e.get(l);)l--;l++,s=this.startEnd[0]-l,a=l,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),s=o-this.startEnd[1];var h=this.getDecodeFinderCounters();ze.arraycopy(h,0,h,1,h.length-1),h[0]=s;var d;try{d=this.parseFinderValue(h,t.FINDER_PATTERNS)}catch{return null}return new JN(d,[a,o],a,o,r)},t.prototype.decodeDataCharacter=function(e,r,i,s){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(s)t.recordPatternInReverse(e,r.getStartEnd()[0],a);else{t.recordPattern(e,r.getStartEnd()[1],a);for(var l=0,h=a.length-1;l<h;l++,h--){var d=a[l];a[l]=a[h],a[h]=d}}var g=17,m=ge.sum(new Int32Array(a))/g,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new st;for(var x=this.getOddCounts(),b=this.getEvenCounts(),E=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var S=1*a[l]/m,R=S+.5;if(R<1){if(S<.3)throw new st;R=1}else if(R>8){if(S>8.7)throw new st;R=8}var k=l/2;(l&1)===0?(x[k]=R,E[k]=S-R):(b[k]=R,T[k]=S-R)}this.adjustOddEvenCounts(g);for(var P=4*r.getValue()+(i?0:2)+(s?0:1)-1,H=0,M=0,l=x.length-1;l>=0;l--){if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[P][2*l];M+=x[l]*C}H+=x[l]}for(var O=0,l=b.length-1;l>=0;l--)if(t.isNotA1left(r,i,s)){var C=t.WEIGHTS[P][2*l+1];O+=b[l]*C}var L=M+O;if((H&1)!==0||H>13||H<4)throw new st;var j=(13-H)/2,z=t.SYMBOL_WIDEST[j],U=9-z,Et=Wu.getRSSvalue(x,z,!0),wt=Wu.getRSSvalue(b,U,!1),Q=t.EVEN_TOTAL_SUBSET[j],at=t.GSUM[j],mt=Et*Q+wt+at;return new dm(mt,L)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=ge.sum(new Int32Array(this.getOddCounts())),i=ge.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1;r>13?a=!0:r<4&&(s=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var h=r+i-e,d=(r&1)===1,g=(i&1)===0;if(h===1)if(d){if(g)throw new st;a=!0}else{if(!g)throw new st;l=!0}else if(h===-1)if(d){if(g)throw new st;s=!0}else{if(!g)throw new st;o=!0}else if(h===0){if(d){if(!g)throw new st;r<i?(s=!0,l=!0):(a=!0,o=!0)}else if(g)throw new st}else throw new st;if(s){if(a)throw new st;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new st;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Hc),Wnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qnt=function(n){Wnt(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.count=0,s.finderPattern=i,s}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(dm),Ynt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},GR=function(n){Ynt(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var s,a,o,l,h=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,h),r.reverse();var d=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var g=hx(this.possibleLeftPairs),m=g.next();!m.done;m=g.next()){var y=m.value;if(y.getCount()>1)try{for(var x=(o=void 0,hx(this.possibleRightPairs)),b=x.next();!b.done;b=x.next()){var E=b.value;if(E.getCount()>1&&t.checkChecksum(y,E))return t.constructResult(y,E)}}catch(T){o={error:T}}finally{try{b&&!b.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}}}catch(T){s={error:T}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}throw new st},t.addOrTally=function(e,r){var i,s;if(r!=null){var a=!1;try{for(var o=hx(e),l=o.next();!l.done;l=o.next()){var h=l.value;if(h.getValue()===r.getValue()){h.incrementCount(),a=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}a||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),s=new String(i).toString(),a=new $t,o=13-s.length;o>0;o--)a.append("0");a.append(s);for(var l=0,o=0;o<13;o++){var h=a.charAt(o).charCodeAt(0)-48;l+=(o&1)===0?3*h:h}l=10-l%10,l===10&&(l=0),a.append(l.toString());var d=e.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new Ar(a.toString(),null,0,[d[0],d[1],g[0],g[1]],Nt.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},t.prototype.decodePair=function(e,r,i,s){try{var a=this.findFinderPattern(e,r),o=this.parseFoundFinderPattern(e,i,r,a),l=s==null?null:s.get(Qe.NEED_RESULT_POINT_CALLBACK);if(l!=null){var h=(a[0]+a[1])/2;r&&(h=e.getSize()-1-h),l.foundPossibleResultPoint(new It(h,i))}var d=this.decodeDataCharacter(e,o,!0),g=this.decodeDataCharacter(e,o,!1);return new qnt(1597*d.getValue()+g.getValue(),d.getChecksumPortion()+4*g.getChecksumPortion(),o)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(i)jn.recordPatternInReverse(e,r.getStartEnd()[0],s);else{jn.recordPattern(e,r.getStartEnd()[1]+1,s);for(var o=0,l=s.length-1;o<l;o++,l--){var h=s[o];s[o]=s[l],s[l]=h}}for(var d=i?16:15,g=ge.sum(new Int32Array(s))/d,m=this.getOddCounts(),y=this.getEvenCounts(),x=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),o=0;o<s.length;o++){var E=s[o]/g,T=Math.floor(E+.5);T<1?T=1:T>8&&(T=8);var S=Math.floor(o/2);(o&1)===0?(m[S]=T,x[S]=E-T):(y[S]=T,b[S]=E-T)}this.adjustOddEvenCounts(i,d);for(var R=0,k=0,o=m.length-1;o>=0;o--)k*=9,k+=m[o],R+=m[o];for(var P=0,H=0,o=y.length-1;o>=0;o--)P*=9,P+=y[o],H+=y[o];var M=k+3*P;if(i){if((R&1)!==0||R>12||R<4)throw new st;var C=(12-R)/2,O=t.OUTSIDE_ODD_WIDEST[C],L=9-O,j=Wu.getRSSvalue(m,O,!1),z=Wu.getRSSvalue(y,L,!0),U=t.OUTSIDE_EVEN_TOTAL_SUBSET[C],Et=t.OUTSIDE_GSUM[C];return new dm(j*U+z+Et,M)}else{if((H&1)!==0||H>10||H<4)throw new st;var C=(10-H)/2,O=t.INSIDE_ODD_WIDEST[C],L=9-O,j=Wu.getRSSvalue(m,O,!0),z=Wu.getRSSvalue(y,L,!1),wt=t.INSIDE_ODD_TOTAL_SUBSET[C],Et=t.INSIDE_GSUM[C];return new dm(z*wt+j+Et,M)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),a=!1,o=0;o<s&&(a=!e.get(o),r!==a);)o++;for(var l=0,h=o,d=o;d<s;d++)if(e.get(d)!==a)i[l]++;else{if(l===3){if(Hc.isFinderPattern(i))return[h,d];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new st},t.prototype.parseFoundFinderPattern=function(e,r,i,s){for(var a=e.get(s[0]),o=s[0]-1;o>=0&&a!==e.get(o);)o--;o++;var l=s[0]-o,h=this.getDecodeFinderCounters(),d=new Int32Array(h.length);ze.arraycopy(h,0,d,1,h.length-1),d[0]=l;var g=this.parseFinderValue(d,t.FINDER_PATTERNS),m=o,y=s[1];return i&&(m=e.getSize()-1-m,y=e.getSize()-1-y),new JN(g,[o,s[1]],m,y,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=ge.sum(new Int32Array(this.getOddCounts())),s=ge.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,l=!1,h=!1;e?(i>12?o=!0:i<4&&(a=!0),s>12?h=!0:s<4&&(l=!0)):(i>11?o=!0:i<5&&(a=!0),s>10?h=!0:s<4&&(l=!0));var d=i+s-r,g=(i&1)===(e?1:0),m=(s&1)===1;if(d===1)if(g){if(m)throw new st;o=!0}else{if(!m)throw new st;h=!0}else if(d===-1)if(g){if(m)throw new st;a=!0}else{if(!m)throw new st;l=!0}else if(d===0){if(g){if(!m)throw new st;i<s?(a=!0,h=!0):(o=!0,l=!0)}else if(m)throw new st}else throw new st;if(a){if(o)throw new st;Hc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Hc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(h)throw new st;Hc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Hc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Hc),Xnt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bd=function(n){Xnt(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(Qe.POSSIBLE_FORMATS):null,s=e&&e.get(Qe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=e&&e.get(Qe.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Nt.EAN_13)||i.includes(Nt.UPC_A)||i.includes(Nt.EAN_8)||i.includes(Nt.UPC_E))&&r.readers.push(new ux(e)),i.includes(Nt.CODE_39)&&r.readers.push(new NR(s,a)),i.includes(Nt.CODE_93)&&r.readers.push(new kR),i.includes(Nt.CODE_128)&&r.readers.push(new PR),i.includes(Nt.ITF)&&r.readers.push(new LR),i.includes(Nt.CODABAR)&&r.readers.push(new mnt),i.includes(Nt.RSS_14)&&r.readers.push(new GR),i.includes(Nt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Gnt))),r.readers.length===0&&(r.readers.push(new ux(e)),r.readers.push(new NR),r.readers.push(new kR),r.readers.push(new ux(e)),r.readers.push(new PR),r.readers.push(new LR),r.readers.push(new GR)),r}return t.prototype.decodeRow=function(e,r,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(e,r,i)}catch{}throw new st},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(jn),Knt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Knt(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new bd(r),e,r)||this}return t})(kh);var WR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},we=function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ye=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),$nt=function(){function n(t,e,r,i,s,a){var o,l;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=a;var h=0,d=a.getECCodewords(),g=a.getECBlocks();try{for(var m=WR(g),y=m.next();!y.done;y=m.next()){var x=y.value;h+=x.getCount()*(x.getDataCodewords()+d)}}catch(b){o={error:b}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new vt;try{for(var s=WR(n.VERSIONS),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.symbolSizeRows===t&&o.symbolSizeColumns===e)return o}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}throw new vt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new we(5,new ye(1,3))),new n(2,12,12,10,10,new we(7,new ye(1,5))),new n(3,14,14,12,12,new we(10,new ye(1,8))),new n(4,16,16,14,14,new we(12,new ye(1,12))),new n(5,18,18,16,16,new we(14,new ye(1,18))),new n(6,20,20,18,18,new we(18,new ye(1,22))),new n(7,22,22,20,20,new we(20,new ye(1,30))),new n(8,24,24,22,22,new we(24,new ye(1,36))),new n(9,26,26,24,24,new we(28,new ye(1,44))),new n(10,32,32,14,14,new we(36,new ye(1,62))),new n(11,36,36,16,16,new we(42,new ye(1,86))),new n(12,40,40,18,18,new we(48,new ye(1,114))),new n(13,44,44,20,20,new we(56,new ye(1,144))),new n(14,48,48,22,22,new we(68,new ye(1,174))),new n(15,52,52,24,24,new we(42,new ye(2,102))),new n(16,64,64,14,14,new we(56,new ye(2,140))),new n(17,72,72,16,16,new we(36,new ye(4,92))),new n(18,80,80,18,18,new we(48,new ye(4,114))),new n(19,88,88,20,20,new we(56,new ye(4,144))),new n(20,96,96,22,22,new we(68,new ye(4,174))),new n(21,104,104,24,24,new we(56,new ye(6,136))),new n(22,120,120,18,18,new we(68,new ye(6,175))),new n(23,132,132,20,20,new we(62,new ye(8,163))),new n(24,144,144,22,22,new we(62,new ye(8,156),new ye(2,155))),new n(25,8,18,6,16,new we(7,new ye(1,5))),new n(26,8,32,6,14,new we(11,new ye(1,10))),new n(27,12,26,10,24,new we(14,new ye(1,16))),new n(28,12,36,10,16,new we(18,new ye(1,22))),new n(29,16,36,14,16,new we(24,new ye(1,32))),new n(30,16,48,14,22,new we(28,new ye(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),Qnt=function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new vt;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Fs(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return $nt.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,s=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),o=!1,l=!1,h=!1,d=!1;do if(r===s&&i===0&&!o)t[e++]=this.readCorner1(s,a)&255,r-=2,i+=2,o=!0;else if(r===s-2&&i===0&&(a&3)!==0&&!l)t[e++]=this.readCorner2(s,a)&255,r-=2,i+=2,l=!0;else if(r===s+4&&i===2&&(a&7)===0&&!h)t[e++]=this.readCorner3(s,a)&255,r-=2,i+=2,h=!0;else if(r===s-2&&i===0&&(a&7)===4&&!d)t[e++]=this.readCorner4(s,a)&255,r-=2,i+=2,d=!0;else{do r<s&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r-=2,i+=2;while(r>=0&&i<a);r+=1,i+=3;do r>=0&&i<a&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,s,a)&255),r+=2,i-=2;while(r<s&&i>=0);r+=3,i+=1}while(r<s||i<a);if(e!==this.version.getTotalCodewords())throw new vt;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var s=0;return this.readModule(t-2,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-2,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t-1,e,r,i)&&(s|=1),s<<=1,this.readModule(t,e-2,r,i)&&(s|=1),s<<=1,this.readModule(t,e-1,r,i)&&(s|=1),s<<=1,this.readModule(t,e,r,i)&&(s|=1),s},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new kt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),a=e/i|0,o=r/s|0,l=a*i,h=o*s,d=new Fs(h,l),g=0;g<a;++g)for(var m=g*i,y=0;y<o;++y)for(var x=y*s,b=0;b<i;++b)for(var E=g*(i+2)+1+b,T=m+b,S=0;S<s;++S){var R=y*(s+2)+1+S;if(t.get(R,E)){var k=x+S;d.set(k,T)}}return d},n}(),qR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Znt=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,s,a,o=e.getECBlocks(),l=0,h=o.getECBlocks();try{for(var d=qR(h),g=d.next();!g.done;g=d.next()){var m=g.value;l+=m.getCount()}}catch(Et){r={error:Et}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var y=new Array(l),x=0;try{for(var b=qR(h),E=b.next();!E.done;E=b.next())for(var m=E.value,T=0;T<m.getCount();T++){var S=m.getDataCodewords(),R=o.getECCodewords()+S;y[x++]=new n(S,new Uint8Array(R))}}catch(Et){s={error:Et}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}for(var k=y[0].codewords.length,P=k-o.getECCodewords(),H=P-1,M=0,T=0;T<H;T++)for(var C=0;C<x;C++)y[C].codewords[T]=t[M++];for(var O=e.getVersionNumber()===24,L=O?8:x,C=0;C<L;C++)y[C].codewords[P-1]=t[M++];for(var j=y[0].codewords.length,T=P;T<j;T++)for(var C=0;C<x;C++){var z=O?(C+8)%x:C,U=O&&z>7?T-1:T;y[z].codewords[U]=t[M++]}if(M!==t.length)throw new kt;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),n5=function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new kt(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,s=this.bytes;if(r>0){var a=8-r,o=t<a?t:a,l=a-o,h=255>>8-o<<l;e=(s[i]&h)>>l,t-=o,r+=o,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|s[i]&255,i++,t-=8;if(t>0){var l=8-t,h=255>>l<<l;e=e<<t|(s[i]&h)>>l,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),kn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(kn||(kn={}));var Jnt=function(){function n(){}return n.decode=function(t){var e=new n5(t),r=new $t,i=new $t,s=new Array,a=kn.ASCII_ENCODE;do if(a===kn.ASCII_ENCODE)a=this.decodeAsciiSegment(e,r,i);else{switch(a){case kn.C40_ENCODE:this.decodeC40Segment(e,r);break;case kn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case kn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case kn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case kn.BASE256_ENCODE:this.decodeBase256Segment(e,r,s);break;default:throw new vt}a=kn.ASCII_ENCODE}while(a!==kn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new iy(t,r.toString(),s.length===0?null:s,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var s=t.readBits(8);if(s===0)throw new vt;if(s<=128)return i&&(s+=128),e.append(String.fromCharCode(s-1)),kn.ASCII_ENCODE;if(s===129)return kn.PAD_ENCODE;if(s<=229){var a=s-130;a<10&&e.append("0"),e.append(""+a)}else switch(s){case 230:return kn.C40_ENCODE;case 231:return kn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return kn.ANSIX12_ENCODE;case 239:return kn.TEXT_ENCODE;case 240:return kn.EDIFACT_ENCODE;case 241:break;default:if(s!==254||t.available()!==0)throw new vt;break}}while(t.available()>0);return kn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new vt;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new vt}s=0;break;case 3:r?(e.append(String.fromCharCode(l+224)),r=!1):e.append(String.fromCharCode(l+96)),s=0;break;default:throw new vt}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],s=0;do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(s){case 0:if(l<3)s=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new vt;break;case 1:r?(e.append(String.fromCharCode(l+128)),r=!1):e.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(l){case 27:e.append("");break;case 30:r=!0;break;default:throw new vt}s=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[l];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h),s=0}else throw new vt;break;default:throw new vt}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var s=0;s<3;s++){var a=r[s];switch(a){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(a<14)e.append(String.fromCharCode(a+44));else if(a<40)e.append(String.fromCharCode(a+51));else throw new vt;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,s=Math.floor(i/1600);r[0]=s,i-=s*1600,s=Math.floor(i/40),r[1]=s,r[2]=i-s*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var s=8-t.getBitOffset();s!==8&&t.readBits(s);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),s=this.unrandomize255State(t.readBits(8),i++),a;if(s===0?a=t.available()/8|0:s<250?a=s:a=250*(s-249)+this.unrandomize255State(t.readBits(8),i++),a<0)throw new vt;for(var o=new Uint8Array(a),l=0;l<a;l++){if(t.available()<8)throw new vt;o[l]=this.unrandomize255State(t.readBits(8),i++)}r.push(o);try{e.append(Mi.decode(o,ue.ISO88591))}catch(h){throw new q0("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),trt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ert=function(){function n(){this.rsDecoder=new sy(jr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new Qnt(t),s=i.getVersion(),a=i.readCodewords(),o=Znt.getDataBlocks(a,s),l=0;try{for(var h=trt(o),d=h.next();!d.done;d=h.next()){var g=d.value;l+=g.getNumDataCodewords()}}catch(R){e={error:R}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var m=new Uint8Array(l),y=o.length,x=0;x<y;x++){var b=o[x],E=b.getCodewords(),T=b.getNumDataCodewords();this.correctErrors(E,T);for(var S=0;S<T;S++)m[S*y+x]=E[S]}return Jnt.decode(m)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Jn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),nrt=function(){function n(t){this.image=t,this.rectangleDetector=new U2(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new st;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],s=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(s,a)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var h=n.sampleGrid(this.image,r,i,s,a,o,l);return new gE(h,[r,i,s,a])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),s=(e.getY()-t.getY())/(r+1);return new It(t.getX()+i,t.getY()+s)},n.moveAway=function(t,e,r){var i=t.getX(),s=t.getY();return i<e?i-=1:i+=1,s<r?s-=1:s+=1,new It(i,s)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],s=t[2],a=this.transitionsBetween(e,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,s),h=this.transitionsBetween(s,e),d=a,g=[s,e,r,i];return d>o&&(d=o,g[0]=e,g[1]=r,g[2]=i,g[3]=s),d>l&&(d=l,g[0]=r,g[1]=i,g[2]=s,g[3]=e),d>h&&(g[0]=i,g[1]=s,g[2]=e,g[3]=r),g},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=n.shiftPoint(r,i,(a+1)*4),l=n.shiftPoint(i,r,(a+1)*4),h=this.transitionsBetween(o,e),d=this.transitionsBetween(l,s);return h<d?(t[0]=e,t[1]=r,t[2]=i,t[3]=s):(t[0]=r,t[1]=i,t[2]=s,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s),o=this.transitionsBetween(r,s),l=n.shiftPoint(e,r,(o+1)*4),h=n.shiftPoint(i,r,(a+1)*4);a=this.transitionsBetween(l,s),o=this.transitionsBetween(h,s);var d=new It(s.getX()+(i.getX()-r.getX())/(a+1),s.getY()+(i.getY()-r.getY())/(a+1)),g=new It(s.getX()+(e.getX()-r.getX())/(o+1),s.getY()+(e.getY()-r.getY())/(o+1));if(!this.isValid(d))return this.isValid(g)?g:null;if(!this.isValid(g))return d;var m=this.transitionsBetween(l,d)+this.transitionsBetween(h,d),y=this.transitionsBetween(l,g)+this.transitionsBetween(h,g);return m>y?d:g},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(e,s)+1,o=this.transitionsBetween(i,s)+1,l=n.shiftPoint(e,r,o*4),h=n.shiftPoint(i,r,a*4);a=this.transitionsBetween(l,s)+1,o=this.transitionsBetween(h,s)+1,(a&1)===1&&(a+=1),(o&1)===1&&(o+=1);var d=(e.getX()+r.getX()+i.getX()+s.getX())/4,g=(e.getY()+r.getY()+i.getY()+s.getY())/4;e=n.moveAway(e,d,g),r=n.moveAway(r,d,g),i=n.moveAway(i,d,g),s=n.moveAway(s,d,g);var m,y;return l=n.shiftPoint(e,r,o*4),l=n.shiftPoint(l,s,a*4),m=n.shiftPoint(r,e,o*4),m=n.shiftPoint(m,i,a*4),h=n.shiftPoint(i,s,o*4),h=n.shiftPoint(h,r,a*4),y=n.shiftPoint(s,i,o*4),y=n.shiftPoint(y,e,a*4),[l,m,h,y]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,s,a,o){var l=pE.getInstance();return l.sampleGrid(t,a,o,.5,.5,a-.5,.5,a-.5,o-.5,.5,o-.5,e.getX(),e.getY(),s.getX(),s.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),s=Math.trunc(e.getX()),a=Math.trunc(e.getY()),o=Math.abs(a-i)>Math.abs(s-r);if(o){var l=r;r=i,i=l,l=s,s=a,a=l}for(var h=Math.abs(s-r),d=Math.abs(a-i),g=-h/2,m=i<a?1:-1,y=r<s?1:-1,x=0,b=this.image.get(o?i:r,o?r:i),E=r,T=i;E!==s;E+=y){var S=this.image.get(o?T:E,o?E:T);if(S!==b&&(x++,b=S),g+=d,g>0){if(T===a)break;T+=m,g-=h}}return x},n}(),H2=function(){function n(){this.decoder=new ert}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(Qe.PURE_BARCODE)){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(s),i=n.NO_POINTS}else{var a=new nrt(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var o=r.getRawBytes(),l=new Ar(r.getText(),o,8*o.length,i,Nt.DATA_MATRIX,ze.currentTimeMillis()),h=r.getByteSegments();h!=null&&l.putMetadata(hr.BYTE_SEGMENTS,h);var d=r.getECLevel();return d!=null&&l.putMetadata(hr.ERROR_CORRECTION_LEVEL,d),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new st;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0],h=(l-o+1)/i,d=(a-s+1)/i;if(h<=0||d<=0)throw new st;var g=i/2;s+=g,o+=g;for(var m=new Fs(h,d),y=0;y<d;y++)for(var x=s+y*i,b=0;b<h;b++)t.get(o+b*i,x)&&m.set(b,y);return m},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],s=t[1];i<r&&e.get(i,s);)i++;if(i===r)throw new st;var a=i-t[0];if(a===0)throw new st;return a},n.NO_POINTS=[],n}(),rrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){rrt(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new H2,e)||this}return t})(kh);var qu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(qu||(qu={}));var irt=function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Hi(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new kt;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(qu.L,"L",1),n.M=new n(qu.M,"M",0),n.Q=new n(qu.Q,"Q",3),n.H=new n(qu.H,"H",2),n}(),srt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r5=function(){function n(t){this.errorCorrectionLevel=irt.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return ee.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,s=Number.MAX_SAFE_INTEGER,a=0;try{for(var o=srt(n.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var h=l.value,d=h[0];if(d===t||d===e)return new n(h[1]);var g=n.numBitsDiffering(t,d);g<s&&(a=h[1],s=g),t!==e&&(g=n.numBitsDiffering(e,d),g<s&&(a=h[1],s=g))}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s<=3?new n(a):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),art=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},J=function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var s=art(i),a=s.next();!a.done;a=s.next()){var o=a.value;r+=o.getCount()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),F=function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),ort=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cl=function(){function n(t,e){for(var r,i,s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=s;var o=0,l=s[0].getECCodewordsPerBlock(),h=s[0].getECBlocks();try{for(var d=ort(h),g=d.next();!g.done;g=d.next()){var m=g.value;o+=m.getCount()*(m.getDataCodewords()+l)}}catch(y){r={error:y}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new vt;try{return this.getVersionForNumber((t-17)/4)}catch{throw new vt}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new kt;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var s=n.VERSION_DECODE_INFO[i];if(s===t)return n.getVersionForNumber(i+7);var a=r5.numBitsDiffering(t,s);a<e&&(r=i+7,e=a)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new Fs(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var s=this.alignmentPatternCenters[i]-2,a=0;a<r;a++)i===0&&(a===0||a===r-1)||i===r-1&&a===0||e.setRegion(this.alignmentPatternCenters[a]-2,s,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new J(7,new F(1,19)),new J(10,new F(1,16)),new J(13,new F(1,13)),new J(17,new F(1,9))),new n(2,Int32Array.from([6,18]),new J(10,new F(1,34)),new J(16,new F(1,28)),new J(22,new F(1,22)),new J(28,new F(1,16))),new n(3,Int32Array.from([6,22]),new J(15,new F(1,55)),new J(26,new F(1,44)),new J(18,new F(2,17)),new J(22,new F(2,13))),new n(4,Int32Array.from([6,26]),new J(20,new F(1,80)),new J(18,new F(2,32)),new J(26,new F(2,24)),new J(16,new F(4,9))),new n(5,Int32Array.from([6,30]),new J(26,new F(1,108)),new J(24,new F(2,43)),new J(18,new F(2,15),new F(2,16)),new J(22,new F(2,11),new F(2,12))),new n(6,Int32Array.from([6,34]),new J(18,new F(2,68)),new J(16,new F(4,27)),new J(24,new F(4,19)),new J(28,new F(4,15))),new n(7,Int32Array.from([6,22,38]),new J(20,new F(2,78)),new J(18,new F(4,31)),new J(18,new F(2,14),new F(4,15)),new J(26,new F(4,13),new F(1,14))),new n(8,Int32Array.from([6,24,42]),new J(24,new F(2,97)),new J(22,new F(2,38),new F(2,39)),new J(22,new F(4,18),new F(2,19)),new J(26,new F(4,14),new F(2,15))),new n(9,Int32Array.from([6,26,46]),new J(30,new F(2,116)),new J(22,new F(3,36),new F(2,37)),new J(20,new F(4,16),new F(4,17)),new J(24,new F(4,12),new F(4,13))),new n(10,Int32Array.from([6,28,50]),new J(18,new F(2,68),new F(2,69)),new J(26,new F(4,43),new F(1,44)),new J(24,new F(6,19),new F(2,20)),new J(28,new F(6,15),new F(2,16))),new n(11,Int32Array.from([6,30,54]),new J(20,new F(4,81)),new J(30,new F(1,50),new F(4,51)),new J(28,new F(4,22),new F(4,23)),new J(24,new F(3,12),new F(8,13))),new n(12,Int32Array.from([6,32,58]),new J(24,new F(2,92),new F(2,93)),new J(22,new F(6,36),new F(2,37)),new J(26,new F(4,20),new F(6,21)),new J(28,new F(7,14),new F(4,15))),new n(13,Int32Array.from([6,34,62]),new J(26,new F(4,107)),new J(22,new F(8,37),new F(1,38)),new J(24,new F(8,20),new F(4,21)),new J(22,new F(12,11),new F(4,12))),new n(14,Int32Array.from([6,26,46,66]),new J(30,new F(3,115),new F(1,116)),new J(24,new F(4,40),new F(5,41)),new J(20,new F(11,16),new F(5,17)),new J(24,new F(11,12),new F(5,13))),new n(15,Int32Array.from([6,26,48,70]),new J(22,new F(5,87),new F(1,88)),new J(24,new F(5,41),new F(5,42)),new J(30,new F(5,24),new F(7,25)),new J(24,new F(11,12),new F(7,13))),new n(16,Int32Array.from([6,26,50,74]),new J(24,new F(5,98),new F(1,99)),new J(28,new F(7,45),new F(3,46)),new J(24,new F(15,19),new F(2,20)),new J(30,new F(3,15),new F(13,16))),new n(17,Int32Array.from([6,30,54,78]),new J(28,new F(1,107),new F(5,108)),new J(28,new F(10,46),new F(1,47)),new J(28,new F(1,22),new F(15,23)),new J(28,new F(2,14),new F(17,15))),new n(18,Int32Array.from([6,30,56,82]),new J(30,new F(5,120),new F(1,121)),new J(26,new F(9,43),new F(4,44)),new J(28,new F(17,22),new F(1,23)),new J(28,new F(2,14),new F(19,15))),new n(19,Int32Array.from([6,30,58,86]),new J(28,new F(3,113),new F(4,114)),new J(26,new F(3,44),new F(11,45)),new J(26,new F(17,21),new F(4,22)),new J(26,new F(9,13),new F(16,14))),new n(20,Int32Array.from([6,34,62,90]),new J(28,new F(3,107),new F(5,108)),new J(26,new F(3,41),new F(13,42)),new J(30,new F(15,24),new F(5,25)),new J(28,new F(15,15),new F(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new J(28,new F(4,116),new F(4,117)),new J(26,new F(17,42)),new J(28,new F(17,22),new F(6,23)),new J(30,new F(19,16),new F(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new J(28,new F(2,111),new F(7,112)),new J(28,new F(17,46)),new J(30,new F(7,24),new F(16,25)),new J(24,new F(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new J(30,new F(4,121),new F(5,122)),new J(28,new F(4,47),new F(14,48)),new J(30,new F(11,24),new F(14,25)),new J(30,new F(16,15),new F(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new J(30,new F(6,117),new F(4,118)),new J(28,new F(6,45),new F(14,46)),new J(30,new F(11,24),new F(16,25)),new J(30,new F(30,16),new F(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new J(26,new F(8,106),new F(4,107)),new J(28,new F(8,47),new F(13,48)),new J(30,new F(7,24),new F(22,25)),new J(30,new F(22,15),new F(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new J(28,new F(10,114),new F(2,115)),new J(28,new F(19,46),new F(4,47)),new J(28,new F(28,22),new F(6,23)),new J(30,new F(33,16),new F(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new J(30,new F(8,122),new F(4,123)),new J(28,new F(22,45),new F(3,46)),new J(30,new F(8,23),new F(26,24)),new J(30,new F(12,15),new F(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new F(3,117),new F(10,118)),new J(28,new F(3,45),new F(23,46)),new J(30,new F(4,24),new F(31,25)),new J(30,new F(11,15),new F(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new F(7,116),new F(7,117)),new J(28,new F(21,45),new F(7,46)),new J(30,new F(1,23),new F(37,24)),new J(30,new F(19,15),new F(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new F(5,115),new F(10,116)),new J(28,new F(19,47),new F(10,48)),new J(30,new F(15,24),new F(25,25)),new J(30,new F(23,15),new F(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new F(13,115),new F(3,116)),new J(28,new F(2,46),new F(29,47)),new J(30,new F(42,24),new F(1,25)),new J(30,new F(23,15),new F(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new F(17,115)),new J(28,new F(10,46),new F(23,47)),new J(30,new F(10,24),new F(35,25)),new J(30,new F(19,15),new F(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new F(17,115),new F(1,116)),new J(28,new F(14,46),new F(21,47)),new J(30,new F(29,24),new F(19,25)),new J(30,new F(11,15),new F(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new F(13,115),new F(6,116)),new J(28,new F(14,46),new F(23,47)),new J(30,new F(44,24),new F(7,25)),new J(30,new F(59,16),new F(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new F(12,121),new F(7,122)),new J(28,new F(12,47),new F(26,48)),new J(30,new F(39,24),new F(14,25)),new J(30,new F(22,15),new F(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new F(6,121),new F(14,122)),new J(28,new F(6,47),new F(34,48)),new J(30,new F(46,24),new F(10,25)),new J(30,new F(2,15),new F(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new F(17,122),new F(4,123)),new J(28,new F(29,46),new F(14,47)),new J(30,new F(49,24),new F(10,25)),new J(30,new F(24,15),new F(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new F(4,122),new F(18,123)),new J(28,new F(13,46),new F(32,47)),new J(30,new F(48,24),new F(14,25)),new J(30,new F(42,15),new F(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new F(20,117),new F(4,118)),new J(28,new F(40,47),new F(7,48)),new J(30,new F(43,24),new F(22,25)),new J(30,new F(10,15),new F(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new F(19,118),new F(6,119)),new J(28,new F(18,47),new F(31,48)),new J(30,new F(34,24),new F(34,25)),new J(30,new F(20,15),new F(61,16)))],n}(),Kn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Kn||(Kn={}));var YR=function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[Kn.DATA_MASK_000,new n(Kn.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[Kn.DATA_MASK_001,new n(Kn.DATA_MASK_001,function(t,e){return(t&1)===0})],[Kn.DATA_MASK_010,new n(Kn.DATA_MASK_010,function(t,e){return e%3===0})],[Kn.DATA_MASK_011,new n(Kn.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[Kn.DATA_MASK_100,new n(Kn.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[Kn.DATA_MASK_101,new n(Kn.DATA_MASK_101,function(t,e){return t*e%6===0})],[Kn.DATA_MASK_110,new n(Kn.DATA_MASK_110,function(t,e){return t*e%6<3})],[Kn.DATA_MASK_111,new n(Kn.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n}(),crt=function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new vt;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),s=0,a=i-7,r=i-1;r>=a;r--)s=this.copyBit(8,r,s);for(var e=i-8;e<i;e++)s=this.copyBit(e,8,s);if(this.parsedFormatInfo=r5.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new vt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return cl.getVersionForNumber(e);for(var r=0,i=t-11,s=5;s>=0;s--)for(var a=t-9;a>=i;a--)r=this.copyBit(a,s,r);var o=cl.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(var a=5;a>=0;a--)for(var s=t-9;s>=i;s--)r=this.copyBit(a,s,r);if(o=cl.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new vt},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=YR.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var s=e.buildFunctionPattern(),a=!0,o=new Uint8Array(e.getTotalCodewords()),l=0,h=0,d=0,g=i-1;g>0;g-=2){g===6&&g--;for(var m=0;m<i;m++)for(var y=a?i-1-m:m,x=0;x<2;x++)s.get(g-x,y)||(d++,h<<=1,this.bitMatrix.get(g-x,y)&&(h|=1),d===8&&(o[l++]=h,d=0,h=0));a=!a}if(l!==e.getTotalCodewords())throw new vt;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=YR.values.get(this.parsedFormatInfo.getDataMask()),e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,s=t.getHeight();i<s;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n}(),XR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lrt=function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,s,a,o;if(t.length!==e.getTotalCodewords())throw new kt;var l=e.getECBlocksForLevel(r),h=0,d=l.getECBlocks();try{for(var g=XR(d),m=g.next();!m.done;m=g.next()){var y=m.value;h+=y.getCount()}}catch(U){i={error:U}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}var x=new Array(h),b=0;try{for(var E=XR(d),T=E.next();!T.done;T=E.next())for(var y=T.value,S=0;S<y.getCount();S++){var R=y.getDataCodewords(),k=l.getECCodewordsPerBlock()+R;x[b++]=new n(R,new Uint8Array(k))}}catch(U){a={error:U}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}for(var P=x[0].codewords.length,H=x.length-1;H>=0;){var M=x[H].codewords.length;if(M===P)break;H--}H++;for(var C=P-l.getECCodewordsPerBlock(),O=0,S=0;S<C;S++)for(var L=0;L<b;L++)x[L].codewords[S]=t[O++];for(var L=H;L<b;L++)x[L].codewords[C]=t[O++];for(var j=x[0].codewords.length,S=C;S<j;S++)for(var L=0;L<b;L++){var z=L<H?S:S+1;x[L].codewords[z]=t[O++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Si;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Si||(Si={}));var We=function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new kt;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Si.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Si.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Si.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Si.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Si.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Si.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Si.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Si.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Si.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Si.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),urt=function(){function n(){}return n.decode=function(t,e,r,i){var s=new n5(t),a=new $t,o=new Array,l=-1,h=-1;try{var d=null,g=!1,m=void 0;do{if(s.available()<4)m=We.TERMINATOR;else{var y=s.readBits(4);m=We.forBits(y)}switch(m){case We.TERMINATOR:break;case We.FNC1_FIRST_POSITION:case We.FNC1_SECOND_POSITION:g=!0;break;case We.STRUCTURED_APPEND:if(s.available()<16)throw new vt;l=s.readBits(8),h=s.readBits(8);break;case We.ECI:var x=n.parseECIValue(s);if(d=Bn.getCharacterSetECIByValue(x),d===null)throw new vt;break;case We.HANZI:var b=s.readBits(4),E=s.readBits(m.getCharacterCountBits(e));b===n.GB2312_SUBSET&&n.decodeHanziSegment(s,a,E);break;default:var T=s.readBits(m.getCharacterCountBits(e));switch(m){case We.NUMERIC:n.decodeNumericSegment(s,a,T);break;case We.ALPHANUMERIC:n.decodeAlphanumericSegment(s,a,T,g);break;case We.BYTE:n.decodeByteSegment(s,a,T,d,o,i);break;case We.KANJI:n.decodeKanjiSegment(s,a,T);break;default:throw new vt}break}}while(m!==We.TERMINATOR)}catch{throw new vt}return new iy(t,a.toString(),o.length===0?null:o,r===null?null:r.toString(),l,h)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new vt;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/96<<8&4294967295|a%96;o<959?o+=41377:o+=42657,i[s]=o>>8&255,i[s+1]=o&255,s+=2,r--}try{e.append(Mi.decode(i,ue.GB2312))}catch(l){throw new vt(l)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new vt;for(var i=new Uint8Array(2*r),s=0;r>0;){var a=t.readBits(13),o=a/192<<8&4294967295|a%192;o<7936?o+=33088:o+=49472,i[s]=o>>8,i[s+1]=o,s+=2,r--}try{e.append(Mi.decode(i,ue.SHIFT_JIS))}catch(l){throw new vt(l)}},n.decodeByteSegment=function(t,e,r,i,s,a){if(8*r>t.available())throw new vt;for(var o=new Uint8Array(r),l=0;l<r;l++)o[l]=t.readBits(8);var h;i===null?h=ue.guessEncoding(o,a):h=i.getName();try{e.append(Mi.decode(o,h))}catch(d){throw new vt(d)}s.push(o)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new vt;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var s=e.length();r>1;){if(t.available()<11)throw new vt;var a=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(a/45))),e.append(n.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(t.available()<6)throw new vt;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var o=s;o<e.length();o++)e.charAt(o)==="%"&&(o<e.length()-1&&e.charAt(o+1)==="%"?e.deleteCharAt(o+1):e.setCharAt(o,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new vt;var i=t.readBits(10);if(i>=1e3)throw new vt;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new vt;var s=t.readBits(7);if(s>=100)throw new vt;e.append(n.toAlphaNumericChar(Math.floor(s/10))),e.append(n.toAlphaNumericChar(s%10))}else if(r===1){if(t.available()<4)throw new vt;var a=t.readBits(4);if(a>=10)throw new vt;e.append(n.toAlphaNumericChar(a))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new vt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),i5=function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n}(),KR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hrt=function(){function n(){this.rsDecoder=new sy(jr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(Fs.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new crt(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var s=this.decodeBitMatrixParser(r,e);return s.setOther(new i5(!0)),s}catch(a){throw i!==null?i:a}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,s,a,o=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),d=lrt.getDataBlocks(h,o,l),g=0;try{for(var m=KR(d),y=m.next();!y.done;y=m.next()){var x=y.value;g+=x.getNumDataCodewords()}}catch(H){r={error:H}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var b=new Uint8Array(g),E=0;try{for(var T=KR(d),S=T.next();!S.done;S=T.next()){var x=S.value,R=x.getCodewords(),k=x.getNumDataCodewords();this.correctErrors(R,k);for(var P=0;P<k;P++)b[E++]=R[P]}}catch(H){s={error:H}}finally{try{S&&!S.done&&(a=T.return)&&a.call(T)}finally{if(s)throw s.error}}return urt.decode(b,o,l,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Jn}for(var i=0;i<e;i++)t[i]=r[i]},n}(),frt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),drt=function(n){frt(t,n);function t(e,r,i){var s=n.call(this,e,r)||this;return s.estimatedModuleSize=i,s}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=(this.getX()+r)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+i)/2;return new t(s,a,o)},t}(It),grt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},prt=function(){function n(t,e,r,i,s,a,o){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=s,this.moduleSize=a,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,s=this.startY+e/2,a=new Int32Array(3),o=this.image,l=0;l<e;l++){var h=s+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var d=t;d<i&&!o.get(d,h);)d++;for(var g=0;d<i;){if(o.get(d,h))if(g===1)a[1]++;else if(g===2){if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,d);if(m!==null)return m}a[0]=a[2],a[1]=1,a[2]=0,g=1}else a[++g]++;else g===1&&g++,a[g]++;d++}if(this.foundPatternCross(a)){var m=this.handlePossibleCenter(a,h,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new st},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var s=this.image,a=s.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=t;l>=0&&s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&!s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l)&&o[1]<=r;)o[1]++,l++;if(l===a||o[1]>r)return NaN;for(;l<a&&!s.get(e,l)&&o[2]<=r;)o[2]++,l++;if(o[2]>r)return NaN;var h=o[0]+o[1]+o[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,s,a=t[0]+t[1]+t[2],o=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,o,2*t[1],a);if(!isNaN(l)){var h=(t[0]+t[1]+t[2])/3;try{for(var d=grt(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value;if(m.aboutEquals(h,l,o))return m.combineEstimate(l,o,h)}}catch(x){i={error:x}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var y=new drt(o,l,h);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n}(),mrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yrt=function(n){mrt(t,n);function t(e,r,i,s){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a.count=s,s===void 0&&(a.count=1),a}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var s=Math.abs(e-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var s=this.count+1,a=(this.count*this.getX()+r)/s,o=(this.count*this.getY()+e)/s,l=(this.count*this.estimatedModuleSize+i)/s;return new t(a,o,l,s)},t}(It),vrt=function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),sd=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_rt=function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(Qe.TRY_HARDER)!==void 0,r=t!=null&&t.get(Qe.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),a=i.getWidth(),o=Math.floor(3*s/(4*n.MAX_MODULES));(o<n.MIN_SKIP||e)&&(o=n.MIN_SKIP);for(var l=!1,h=new Int32Array(5),d=o-1;d<s&&!l;d+=o){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,m=0;m<a;m++)if(i.get(m,d))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var y=this.handlePossibleCenter(h,d,m,r);if(y===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>h[2]&&(d+=x-h[2]-o,m=a-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var y=this.handlePossibleCenter(h,d,a,r);y===!0&&(o=h[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return It.orderBestPatterns(b),new vrt(b)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var s=e/7,a=s/2;return Math.abs(s-t[0])<a&&Math.abs(s-t[1])<a&&Math.abs(3*s-t[2])<3*a&&Math.abs(s-t[3])<a&&Math.abs(s-t[4])<a},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var s=this.getCrossCheckStateCount(),a=0,o=this.image;t>=a&&e>=a&&o.get(e-a,t-a);)s[2]++,a++;if(t<a||e<a)return!1;for(;t>=a&&e>=a&&!o.get(e-a,t-a)&&s[1]<=r;)s[1]++,a++;if(t<a||e<a||s[1]>r)return!1;for(;t>=a&&e>=a&&o.get(e-a,t-a)&&s[0]<=r;)s[0]++,a++;if(s[0]>r)return!1;var l=o.getHeight(),h=o.getWidth();for(a=1;t+a<l&&e+a<h&&o.get(e+a,t+a);)s[2]++,a++;if(t+a>=l||e+a>=h)return!1;for(;t+a<l&&e+a<h&&!o.get(e+a,t+a)&&s[3]<r;)s[3]++,a++;if(t+a>=l||e+a>=h||s[3]>=r)return!1;for(;t+a<l&&e+a<h&&o.get(e+a,t+a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(s)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var s=this.image,a=s.getHeight(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(e,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(e,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(e,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(e,l);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(e,l)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(e,l)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var s=this.image,a=s.getWidth(),o=this.getCrossCheckStateCount(),l=t;l>=0&&s.get(l,e);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(l,e)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&s.get(l,e)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=t+1;l<a&&s.get(l,e);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!s.get(l,e)&&o[3]<r;)o[3]++,l++;if(l===a||o[3]>=r)return NaN;for(;l<a&&s.get(l,e)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var s=t[0]+t[1]+t[2]+t[3]+t[4],a=n.centerFromEnd(t,r),o=this.crossCheckVertical(e,Math.floor(a),t[2],s);if(!isNaN(o)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(o),t[2],s),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(a),t[2],s)))){for(var l=s/7,h=!1,d=this.possibleCenters,g=0,m=d.length;g<m;g++){var y=d[g];if(y.aboutEquals(l,o,a)){d[g]=y.combineEstimate(o,a,l),h=!0;break}}if(!h){var x=new yrt(a,o,l);d.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var s=sd(this.possibleCenters),a=s.next();!a.done;a=s.next()){var o=a.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,s=0,a=0,o=this.possibleCenters.length;try{for(var l=sd(this.possibleCenters),h=l.next();!h.done;h=l.next()){var d=h.value;d.getCount()>=n.CENTER_QUORUM&&(s++,a+=d.getEstimatedModuleSize())}}catch(b){t={error:b}}finally{try{h&&!h.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}if(s<3)return!1;var g=a/o,m=0;try{for(var y=sd(this.possibleCenters),x=y.next();!x.done;x=y.next()){var d=x.value;m+=Math.abs(d.getEstimatedModuleSize()-g)}}catch(b){r={error:b}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return m<=.05*a},n.prototype.selectBestPatterns=function(){var t,e,r,i,s=this.possibleCenters.length;if(s<3)throw new st;var a=this.possibleCenters,o;if(s>3){var l=0,h=0;try{for(var d=sd(this.possibleCenters),g=d.next();!g.done;g=d.next()){var m=g.value,y=m.getEstimatedModuleSize();l+=y,h+=y*y}}catch(P){t={error:P}}finally{try{g&&!g.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}o=l/s;var x=Math.sqrt(h/s-o*o);a.sort(function(P,H){var M=Math.abs(H.getEstimatedModuleSize()-o),C=Math.abs(P.getEstimatedModuleSize()-o);return M<C?-1:M>C?1:0});for(var b=Math.max(.2*o,x),E=0;E<a.length&&a.length>3;E++){var T=a[E];Math.abs(T.getEstimatedModuleSize()-o)>b&&(a.splice(E,1),E--)}}if(a.length>3){var l=0;try{for(var S=sd(a),R=S.next();!R.done;R=S.next()){var k=R.value;l+=k.getEstimatedModuleSize()}}catch(H){r={error:H}}finally{try{R&&!R.done&&(i=S.return)&&i.call(S)}finally{if(r)throw r.error}}o=l/a.length,a.sort(function(H,M){if(M.getCount()===H.getCount()){var C=Math.abs(M.getEstimatedModuleSize()-o),O=Math.abs(H.getEstimatedModuleSize()-o);return C<O?1:C>O?-1:0}else return M.getCount()-H.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),xrt=function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(Qe.NEED_RESULT_POINT_CALLBACK);var e=new _rt(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),s=this.calculateModuleSize(e,r,i);if(s<1)throw new st("No pattern found in proccess finder.");var a=n.computeDimension(e,r,i,s),o=cl.getProvisionalVersionForDimension(a),l=o.getDimensionForVersion()-7,h=null;if(o.getAlignmentPatternCenters().length>0)for(var d=r.getX()-e.getX()+i.getX(),g=r.getY()-e.getY()+i.getY(),m=1-3/l,y=Math.floor(e.getX()+m*(d-e.getX())),x=Math.floor(e.getY()+m*(g-e.getY())),b=4;b<=16;b<<=1)try{h=this.findAlignmentInRegion(s,y,x,b);break}catch(R){if(!(R instanceof st))throw R}var E=n.createTransform(e,r,i,h,a),T=n.sampleGrid(this.image,E,a),S;return h===null?S=[i,e,r]:S=[i,e,r,h],new gE(T,S)},n.createTransform=function(t,e,r,i,s){var a=s-3.5,o,l,h,d;return i!==null?(o=i.getX(),l=i.getY(),h=a-3,d=h):(o=e.getX()-t.getX()+r.getX(),l=e.getY()-t.getY()+r.getY(),h=a,d=a),ZN.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,h,d,3.5,a,t.getX(),t.getY(),e.getX(),e.getY(),o,l,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=pE.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var s=ge.round(It.distance(t,e)/i),a=ge.round(It.distance(t,r)/i),o=Math.floor((s+a)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new st("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var s=this.sizeOfBlackWhiteBlackRun(t,e,r,i),a=1,o=t-(r-t);o<0?(a=t/(t-o),o=0):o>=this.image.getWidth()&&(a=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);var l=Math.floor(e-(i-e)*a);return a=1,l<0?(a=e/(e-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-e)/(l-e),l=this.image.getHeight()-1),o=Math.floor(t+(o-t)*a),s+=this.sizeOfBlackWhiteBlackRun(t,e,o,l),s-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var s=Math.abs(i-e)>Math.abs(r-t);if(s){var a=t;t=e,e=a,a=r,r=i,i=a}for(var o=Math.abs(r-t),l=Math.abs(i-e),h=-o/2,d=t<r?1:-1,g=e<i?1:-1,m=0,y=r+d,x=t,b=e;x!==y;x+=d){var E=s?b:x,T=s?x:b;if(m===1===this.image.get(E,T)){if(m===2)return ge.distance(x,b,t,e);m++}if(h+=l,h>0){if(b===i)break;b+=g,h-=o}}return m===2?ge.distance(r+d,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var s=Math.floor(i*t),a=Math.max(0,e-s),o=Math.min(this.image.getWidth()-1,e+s);if(o-a<t*3)throw new st("Alignment top exceeds estimated module size.");var l=Math.max(0,r-s),h=Math.min(this.image.getHeight()-1,r+s);if(h-l<t*3)throw new st("Alignment bottom exceeds estimated module size.");var d=new prt(this.image,a,l,o-a,h-l,t,this.resultPointCallback);return d.find()},n}(),G2=function(){function n(){this.decoder=new hrt}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(Qe.PURE_BARCODE)!==void 0){var s=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,e),i=n.NO_POINTS}else{var a=new xrt(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(a.getBits(),e),i=a.getPoints()}r.getOther()instanceof i5&&r.getOther().applyMirroredCorrection(i);var o=new Ar(r.getText(),r.getRawBytes(),void 0,i,Nt.QR_CODE,void 0),l=r.getByteSegments();l!==null&&o.putMetadata(hr.BYTE_SEGMENTS,l);var h=r.getECLevel();return h!==null&&o.putMetadata(hr.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(o.putMetadata(hr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(hr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new st;var i=this.moduleSize(e,t),s=e[1],a=r[1],o=e[0],l=r[0];if(o>=l||s>=a)throw new st;if(a-s!==l-o&&(l=o+(a-s),l>=t.getWidth()))throw new st;var h=Math.round((l-o+1)/i),d=Math.round((a-s+1)/i);if(h<=0||d<=0)throw new st;if(d!==h)throw new st;var g=Math.floor(i/2);s+=g,o+=g;var m=o+Math.floor((h-1)*i)-l;if(m>0){if(m>g)throw new st;o-=m}var y=s+Math.floor((d-1)*i)-a;if(y>0){if(y>g)throw new st;s-=y}for(var x=new Fs(h,d),b=0;b<d;b++)for(var E=s+Math.floor(b*i),T=0;T<h;T++)t.get(o+Math.floor(T*i),E)&&x.set(T,b);return x},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),s=t[0],a=t[1],o=!0,l=0;s<i&&a<r;){if(o!==e.get(s,a)){if(++l===5)break;o=!o}s++,a++}if(s===i||a===r)throw new st;return(s-t[0])/7},n.NO_POINTS=new Array,n}(),wrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},he=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return ge.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),s=0;try{for(var a=wrt(t),o=a.next();!o.done;o=a.next()){var l=o.value;i[s++]=l}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=Fn.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),brt=function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Ert=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Art=function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),s=n.detect(r,i);return s.length||(i=i.clone(),i.rotate180(),s=n.detect(r,i)),new brt(i,s)},n.detect=function(t,e){for(var r,i,s=new Array,a=0,o=0,l=!1;a<e.getHeight();){var h=n.findVertices(e,a,o);if(h[0]==null&&h[3]==null){if(!l)break;l=!1,o=0;try{for(var d=(r=void 0,Ert(s)),g=d.next();!g.done;g=d.next()){var m=g.value;m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())))}}catch(y){r={error:y}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}a+=n.ROW_STEP;continue}if(l=!0,s.push(h),!t)break;h[2]!=null?(o=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(o=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return s},n.findVertices=function(t,e,r){var i=t.getHeight(),s=t.getWidth(),a=new Array(8);return n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),e=Math.trunc(a[4].getY())),n.copyToResult(a,n.findRowsWithPattern(t,i,s,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),a},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,s,a){for(var o=new Array(4),l=!1,h=new Int32Array(a.length);i<e;i+=n.ROW_STEP){var d=n.findGuardPattern(t,s,i,r,!1,a,h);if(d!=null){for(;i>0;){var g=n.findGuardPattern(t,s,--i,r,!1,a,h);if(g!=null)d=g;else{i++;break}}o[0]=new It(d[0],i),o[1]=new It(d[1],i),l=!0;break}}var m=i+1;if(l){for(var y=0,g=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);m<e;m++){var d=n.findGuardPattern(t,g[0],m,r,!1,a,h);if(d!=null&&Math.abs(g[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-d[1])<n.MAX_PATTERN_DRIFT)g=d,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}m-=y+1,o[2]=new It(g[0],m),o[3]=new It(g[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&Fn.fill(o,null),o},n.findGuardPattern=function(t,e,r,i,s,a,o){Fn.fillWithin(o,0,o.length,0);for(var l=e,h=0;t.get(l,r)&&l>0&&h++<n.MAX_PIXEL_DRIFT;)l--;for(var d=l,g=0,m=a.length,y=s;d<i;d++){var x=t.get(d,r);if(x!==y)o[g]++;else{if(g===m-1){if(n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=o[0]+o[1],ze.arraycopy(o,2,o,0,g-1),o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,y=!y}}return g===m-1&&n.patternMatchVariance(o,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,s=0,a=0,o=0;o<i;o++)s+=t[o],a+=e[o];if(s<a)return 1/0;var l=s/a;r*=l;for(var h=0,d=0;d<i;d++){var g=t[d],m=e[d]*l,y=g>m?g-m:m-g;if(y>r)return 1/0;h+=y}return h/s},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),Trt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jc=function(){function n(t,e){if(e.length===0)throw new kt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),ze.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var s=Trt(this.coefficients),a=s.next();!a.done;a=s.next()){var o=a.value;i=this.field.add(i,o)}}catch(g){e={error:g}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}for(var l=this.coefficients[0],h=this.coefficients.length,d=1;d<h;d++)l=this.field.add(this.field.multiply(t,l),this.coefficients[d]);return l},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var s=new Int32Array(r.length),a=r.length-e.length;ze.arraycopy(r,0,s,0,a);for(var o=a;o<r.length;o++)s[o]=this.field.add(e[o-a],r[o]);return new n(this.field,s)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new kt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,s=i.length,a=new Int32Array(r+s-1),o=0;o<r;o++)for(var l=e[o],h=0;h<s;h++)a[o+h]=this.field.add(a[o+h],this.field.multiply(l,i[h]));return new n(this.field,a)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new kt;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new $t,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n}(),Srt=function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new kt;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new QN;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n}(),Irt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Crt=function(n){Irt(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var s=1,a=0;a<e;a++)i.expTable[a]=s,s=s*r%e;for(var a=0;a<e-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new Jc(i,new Int32Array([0])),i.one=new Jc(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new kt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new Jc(this,i)},t.PDF417_GF=new t(he.NUMBER_OF_CODEWORDS,3),t}(Srt),Drt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rrt=function(){function n(){this.field=Crt.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,s,a=new Jc(this.field,t),o=new Int32Array(e),l=!1,h=e;h>0;h--){var d=a.evaluateAt(this.field.exp(h));o[e-h]=d,d!==0&&(l=!0)}if(!l)return 0;var g=this.field.getOne();if(r!=null)try{for(var m=Drt(r),y=m.next();!y.done;y=m.next()){var x=y.value,b=this.field.exp(t.length-1-x),E=new Jc(this.field,new Int32Array([this.field.subtract(0,b),1]));g=g.multiply(E)}}catch(C){i={error:C}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}for(var T=new Jc(this.field,o),S=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),T,e),R=S[0],k=S[1],P=this.findErrorLocations(R),H=this.findErrorMagnitudes(k,R,P),h=0;h<P.length;h++){var M=t.length-1-this.field.log(P[h]);if(M<0)throw Jn.getChecksumInstance();t[M]=this.field.subtract(t[M],H[h])}return P.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var s=t,a=e,o=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(r/2);){var h=s,d=o;if(s=a,o=l,s.isZero())throw Jn.getChecksumInstance();a=h;for(var g=this.field.getZero(),m=s.getCoefficient(s.getDegree()),y=this.field.inverse(m);a.getDegree()>=s.getDegree()&&!a.isZero();){var x=a.getDegree()-s.getDegree(),b=this.field.multiply(a.getCoefficient(a.getDegree()),y);g=g.add(this.field.buildMonomial(x,b)),a=a.subtract(s.multiplyByMonomial(x,b))}l=g.multiply(o).subtract(d).negative()}var E=l.getCoefficient(0);if(E===0)throw Jn.getChecksumInstance();var T=this.field.inverse(E),S=l.multiply(T),R=a.multiply(T);return[S,R]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,s=1;s<this.field.getSize()&&i<e;s++)t.evaluateAt(s)===0&&(r[i]=this.field.inverse(s),i++);if(i!==e)throw Jn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),s=new Int32Array(i),a=1;a<=i;a++)s[i-a]=this.field.multiply(a,e.getCoefficient(a));for(var o=new Jc(this.field,s),l=r.length,h=new Int32Array(l),a=0;a<l;a++){var d=this.field.inverse(r[a]),g=this.field.subtract(0,t.evaluateAt(d)),m=this.field.inverse(o.evaluateAt(d));h[a]=this.field.multiply(g,m)}return h},n}(),W2=function(){function n(t,e,r,i,s){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,s)}return n.prototype.constructor_1=function(t,e,r,i,s){var a=e==null||r==null,o=i==null||s==null;if(a&&o)throw new st;a?(e=new It(0,i.getY()),r=new It(0,s.getY())):o&&(i=new It(t.getWidth()-1,e.getY()),s=new It(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,s=this.bottomLeft,a=this.topRight,o=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,h=Math.trunc(l.getY()-t);h<0&&(h=0);var d=new It(l.getX(),h);r?i=d:a=d}if(e>0){var g=r?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+e);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var y=new It(g.getX(),m);r?s=y:o=y}return new n(this.image,i,s,a,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),Ort=function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),yE=function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(a,o,l,h,d,g){if(a==="%%")return"%";if(e[++r]!==void 0){a=h?parseInt(h.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,y;switch(g){case"s":y=e[r];break;case"c":y=e[r][0];break;case"f":y=parseFloat(e[r]).toFixed(a);break;case"p":y=parseFloat(e[r]).toPrecision(a);break;case"e":y=parseFloat(e[r]).toExponential(a);break;case"x":y=parseInt(e[r]).toString(m||16);break;case"d":y=parseFloat(parseInt(e[r],m||10).toPrecision(a)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(m);for(var x=parseInt(l),b=l&&l[0]+""=="0"?"0":" ";y.length<x;)y=o!==void 0?y+b:b+y;return y}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(s,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n}(),Mrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s5=function(){function n(t){this.boundingBox=new W2(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new yE,i=0;try{for(var s=Mrt(this.codewords),a=s.next();!a.done;a=s.next()){var o=a.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),Prt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nrt=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return s},Ed=function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,s=function(g,m){var y={getKey:function(){return g},getValue:function(){return m}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var a=Prt(this.values.entries()),o=a.next();!o.done;o=a.next()){var l=Nrt(o.value,2),h=l[0],d=l[1];s(h,d)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return he.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n}(),krt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$R=function(n){krt(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=fx(this.getCodewords()),s=i.next();!s.done;s=i.next()){var a=s.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,d=1,g=0,m=o;m<l;m++)if(r[m]!=null){var y=r[m],x=y.getRowNumber()-h;if(x===0)g++;else if(x===1)d=Math.max(d,g),g=1,h=y.getRowNumber();else if(x<0||y.getRowNumber()>=e.getRowCount()||x>m)r[m]=null;else{var b=void 0;d>2?b=(d-2)*x:b=x;for(var E=b>=m,T=1;T<=b&&!E;T++)E=r[m-T]!=null;E?r[m]=null:(h=y.getRowNumber(),g=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var a=fx(this.getCodewords()),o=a.next();!o.done;o=a.next()){var l=o.value;if(l!=null){var h=l.getRowNumber();if(h>=s.length)continue;s[h]++}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return s},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.getCodewords(),h=-1,d=a;d<o;d++)if(l[d]!=null){var g=l[d];g.setRowNumberAsRowIndicatorColumn();var m=g.getRowNumber()-h;m===0||(m===1?h=g.getRowNumber():g.getRowNumber()>=e.getRowCount()?l[d]=null:h=g.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),s=new Ed,a=new Ed,o=new Ed,l=new Ed;try{for(var h=fx(i),d=h.next();!d.done;d=h.next()){var g=d.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var m=g.getValue()%30,y=g.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:a.setValue(m*3+1);break;case 1:l.setValue(m/3),o.setValue(m%3);break;case 2:s.setValue(m+1);break}}}}catch(b){e={error:b}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}if(s.getValue().length===0||a.getValue().length===0||o.getValue().length===0||l.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<he.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>he.MAX_ROWS_IN_BARCODE)return null;var x=new Ort(s.getValue()[0],a.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var s=e[i];if(e[i]!=null){var a=s.getValue()%30,o=s.getRowNumber();if(o>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:a+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t}(s5),Lrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Vrt=function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=he.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[r];s!=null&&(s.setRowNumber(t[r].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=this.barcodeColumnCount+1;a>0&&s<this.ADJUST_ROW_NUMBER_SKIP;a--){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),s=0,a=1;a<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;a++){var o=this.detectionResultColumns[a].getCodewords()[r];o!=null&&(s=n.adjustRowNumberIfValid(i,s,o),o.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,s;if(this.detectionResultColumns[t-1]!=null){var a=r[e],o=this.detectionResultColumns[t-1].getCodewords(),l=o;this.detectionResultColumns[t+1]!=null&&(l=this.detectionResultColumns[t+1].getCodewords());var h=new Array(14);h[2]=o[e],h[3]=l[e],e>0&&(h[0]=r[e-1],h[4]=o[e-1],h[5]=l[e-1]),e>1&&(h[8]=r[e-2],h[10]=o[e-2],h[11]=l[e-2]),e<r.length-1&&(h[1]=r[e+1],h[6]=o[e+1],h[7]=l[e+1]),e<r.length-2&&(h[9]=r[e+2],h[12]=o[e+2],h[13]=l[e+2]);try{for(var d=Lrt(h),g=d.next();!g.done;g=d.next()){var m=g.value;if(n.adjustRowNumber(a,m))return}}catch(y){i={error:y}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new yE,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[r];if(s==null){e.format("    |   ");continue}e.format(" %3d|%3d",s.getRowNumber(),s.getValue())}e.format("%n")}return e.toString()},n}(),Brt=function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),Frt=function(){function n(){}return n.initialize=function(){for(var t=0;t<he.SYMBOL_TABLE.length;t++)for(var e=he.SYMBOL_TABLE[t],r=e&1,i=0;i<he.BARS_IN_MODULE;i++){for(var s=0;(e&1)===r;)s+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(he.BARS_IN_MODULE)),n.RATIOS_TABLE[t][he.BARS_IN_MODULE-i-1]=Math.fround(s/he.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=ge.sum(t),r=new Int32Array(he.BARS_IN_MODULE),i=0,s=0,a=0;a<he.MODULES_IN_CODEWORD;a++){var o=e/(2*he.MODULES_IN_CODEWORD)+a*e/he.MODULES_IN_CODEWORD;s+t[i]<=o&&(s+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return he.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=ge.sum(t),r=new Array(he.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var s=F2.MAX_VALUE,a=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var l=0,h=n.RATIOS_TABLE[o],d=0;d<he.BARS_IN_MODULE;d++){var g=Math.fround(h[d]-r[d]);if(l+=Math.fround(g*g),l>=s)break}l<s&&(s=l,a=he.SYMBOL_TABLE[o])}return a},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(he.SYMBOL_TABLE.length).map(function(t){return new Array(he.BARS_IN_MODULE)}),n}(),Urt=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n}(),QR=function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n}(),jrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zrt=function(n){jrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t}(Yr),Hrt=function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new zrt;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new fE;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),Grt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wrt=function(n){Grt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Yr),qrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yrt=function(n){qrt(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new kt("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new Wrt;i=ee.MAX_VALUE}this.buf=Fn.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new fE;this.ensureCapacity(this.count+i),ze.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return Fn.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(Hrt),Ve;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ve||(Ve={}));function a5(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Gp;function fo(n){if(typeof Gp>"u"&&(Gp=a5()),Gp===null)throw new Error("BigInt is not supported!");return Gp(n)}function Xrt(){var n=[];n[0]=fo(1);var t=fo(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var Krt=function(){function n(){}return n.decode=function(t,e){var r=new $t(""),i=Bn.ISO8859_1;r.enableDecoding(i);for(var s=1,a=t[s++],o=new Urt;s<t[0];){switch(a){case n.TEXT_COMPACTION_MODE_LATCH:s=n.textCompaction(t,s,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:s=n.byteCompaction(a,t,i,s,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:s=n.numericCompaction(t,s,r);break;case n.ECI_CHARSET:Bn.getCharacterSetECIByValue(t[s++]);break;case n.ECI_GENERAL_PURPOSE:s+=2;break;case n.ECI_USER_DEFINED:s++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=n.decodeMacroBlock(t,s,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new vt;default:s--,s=n.textCompaction(t,s,r);break}if(s<t.length)a=t[s++];else throw vt.getFormatInstance()}if(r.length()===0)throw vt.getFormatInstance();var l=new iy(null,r.toString(),null,e);return l.setOther(o),l},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw vt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<n.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)i[s]=t[e];r.setSegmentIndex(ee.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new $t;e=n.textCompaction(t,e,a),r.setFileId(a.toString());var o=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new $t;e=n.textCompaction(t,e+1,l),r.setFileName(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new $t;e=n.textCompaction(t,e+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new $t;e=n.textCompaction(t,e+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new $t;e=n.numericCompaction(t,e+1,g),r.setSegmentCount(ee.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new $t;e=n.numericCompaction(t,e+1,m),r.setTimestamp(QR.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new $t;e=n.numericCompaction(t,e+1,y),r.setChecksum(ee.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new $t;e=n.numericCompaction(t,e+1,x),r.setFileSize(QR.parseLong(x.toString()));break;default:throw vt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw vt.getFormatInstance()}if(o!==-1){var b=e-o;r.isLastSegment()&&b--,r.setOptionalData(Fn.copyOfRange(t,o,o+b))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),s=new Int32Array((t[0]-e)*2),a=0,o=!1;e<t[0]&&!o;){var l=t[e++];if(l<n.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:i[a++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[e++],s[a]=l,a++;break}}return n.decodeTextCompaction(i,s,a,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var s=Ve.ALPHA,a=Ve.ALPHA,o=0;o<r;){var l=t[o],h="";switch(s){case Ve.ALPHA:if(l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.LL:s=Ve.LOWER;break;case n.ML:s=Ve.MIXED;break;case n.PS:a=s,s=Ve.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ve.ALPHA;break}break;case Ve.LOWER:if(l<26)h=String.fromCharCode(97+l);else switch(l){case 26:h=" ";break;case n.AS:a=s,s=Ve.ALPHA_SHIFT;break;case n.ML:s=Ve.MIXED;break;case n.PS:a=s,s=Ve.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ve.ALPHA;break}break;case Ve.MIXED:if(l<n.PL)h=n.MIXED_CHARS[l];else switch(l){case n.PL:s=Ve.PUNCT;break;case 26:h=" ";break;case n.LL:s=Ve.LOWER;break;case n.AL:s=Ve.ALPHA;break;case n.PS:a=s,s=Ve.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ve.ALPHA;break}break;case Ve.PUNCT:if(l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ve.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ve.ALPHA;break}break;case Ve.ALPHA_SHIFT:if(s=a,l<26)h=String.fromCharCode(65+l);else switch(l){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ve.ALPHA;break}break;case Ve.PUNCT_SHIFT:if(s=a,l<n.PAL)h=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ve.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ve.ALPHA;break}break}h!==""&&i.append(h),o++}},n.byteCompaction=function(t,e,r,i,s){var a=new Yrt,o=0,l=0,h=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),g=e[i++];i<e[0]&&!h;)switch(d[o++]=g,l=900*l+g,g=e[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(fo(l)>>fo(8*(5-m))));l=0,o=0}break}i===e[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(d[o++]=g);for(var y=0;y<o;y++)a.write(d[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!h;){var x=e[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(o%5===0&&o>0){for(var m=0;m<6;++m)a.write(Number(fo(l)>>fo(8*(5-m))));l=0,o=0}}break}return s.append(Mi.decode(a.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,s=!1,a=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!s;){var o=t[e++];if(e===t[0]&&(s=!0),o<n.TEXT_COMPACTION_MODE_LATCH)a[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,s=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(r.append(n.decodeBase900toBase10(a,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=fo(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*fo(t[i]);var s=r.toString();if(s.charAt(0)!=="1")throw new vt;return s.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=a5()?Xrt():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),ad=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$rt=function(){function n(){}return n.decode=function(t,e,r,i,s,a,o){for(var l=new W2(t,e,r,i,s),h=null,d=null,g,m=!0;;m=!1){if(e!=null&&(h=n.getRowIndicatorColumn(t,l,e,!0,a,o)),i!=null&&(d=n.getRowIndicatorColumn(t,l,i,!1,a,o)),g=n.merge(h,d),g==null)throw st.getNotFoundInstance();var y=g.getBoundingBox();if(m&&y!=null&&(y.getMinY()<l.getMinY()||y.getMaxY()>l.getMaxY()))l=y;else break}g.setBoundingBox(l);var x=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(x,d);for(var b=h!=null,E=1;E<=x;E++){var T=b?E:x-E;if(g.getDetectionResultColumn(T)===void 0){var S=void 0;T===0||T===x?S=new $R(l,T===0):S=new s5(l),g.setDetectionResultColumn(T,S);for(var R=-1,k=R,P=l.getMinY();P<=l.getMaxY();P++){if(R=n.getStartColumn(g,T,P,b),R<0||R>l.getMaxX()){if(k===-1)continue;R=k}var H=n.detectCodeword(t,l.getMinX(),l.getMaxX(),b,R,P,a,o);H!=null&&(S.setCodeword(P,H),k=R,a=Math.min(a,H.getWidth()),o=Math.max(o,H.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=W2.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new Vrt(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var s=n.getMax(i),a=0;try{for(var o=ad(i),l=o.next();!l.done;l=o.next()){var h=l.value;if(a+=s-h,h>0)break}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}for(var d=t.getCodewords(),g=0;a>0&&d[g]==null;g++)a--;for(var m=0,g=i.length-1;g>=0&&(m+=s-i[g],!(i[g]>0));g--);for(var g=d.length-1;m>0&&d[g]==null;g--)m--;return t.getBoundingBox().addMissingRows(a,m,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var s=ad(t),a=s.next();!a.done;a=s.next()){var o=a.value;i=Math.max(i,o)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,s,a){for(var o=new $R(e,i),l=0;l<2;l++)for(var h=l===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=e.getMaxY()&&g>=e.getMinY();g+=h){var m=n.detectCodeword(t,0,t.getWidth(),i,d,g,s,a);m!=null&&(o.setCodeword(g,m),i?d=m.getStartX():d=m.getEndX())}return o},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),s=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(s<1||s>he.MAX_CODEWORDS_IN_BARCODE)throw st.getNotFoundInstance();r.setValue(s)}else i[0]!==s&&r.setValue(s)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),s=[],a=new Array,o=0;o<t.getBarcodeRowCount();o++)for(var l=0;l<t.getBarcodeColumnCount();l++){var h=e[o][l+1].getValue(),d=o*t.getBarcodeColumnCount()+l;h.length===0?r.push(d):h.length===1?i[d]=h[0]:(a.push(d),s.push(h))}for(var g=new Array(s.length),m=0;m<g.length;m++)g[m]=s[m];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,he.toIntArray(r),he.toIntArray(a),g)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,s){for(var a=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<a.length;l++)e[i[l]]=s[l][a[l]];try{return n.decodeCodewords(e,t,r)}catch(d){var h=d instanceof Jn;if(!h)throw d}if(a.length===0)throw Jn.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<s[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw Jn.getChecksumInstance()}throw Jn.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,s,a=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),o=0;o<a.length;o++)for(var l=0;l<a[o].length;l++)a[o][l]=new Ed;var h=0;try{for(var d=ad(t.getDetectionResultColumns()),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)try{for(var y=(i=void 0,ad(m.getCodewords())),x=y.next();!x.done;x=y.next()){var b=x.value;if(b!=null){var E=b.getRowNumber();if(E>=0){if(E>=a.length)continue;a[E][h].setValue(b.getValue())}}}}catch(T){i={error:T}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}h++}}catch(T){e={error:T}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return a},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var s,a,o=i?1:-1,l=null;if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=t.getDetectionResultColumn(e).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(n.isValidBarcodeColumn(t,e-o)&&(l=t.getDetectionResultColumn(e-o).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var h=0;n.isValidBarcodeColumn(t,e-o);){e-=o;try{for(var d=(s=void 0,ad(t.getDetectionResultColumn(e).getCodewords())),g=d.next();!g.done;g=d.next()){var m=g.value;if(m!=null)return(i?m.getEndX():m.getStartX())+o*h*(m.getEndX()-m.getStartX())}}catch(y){s={error:y}}finally{try{g&&!g.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}h++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,s,a,o,l){s=n.adjustCodewordStartColumn(t,e,r,i,s,a);var h=n.getModuleBitCount(t,e,r,i,s,a);if(h==null)return null;var d,g=ge.sum(h);if(i)d=s+g;else{for(var m=0;m<h.length/2;m++){var y=h[m];h[m]=h[h.length-1-m],h[h.length-1-m]=y}d=s,s=d-g}if(!n.checkCodewordSkew(g,o,l))return null;var x=Frt.getDecodedValue(h),b=he.getCodeword(x);return b===-1?null:new Brt(s,d,n.getCodewordBucketNumber(x),b)},n.getModuleBitCount=function(t,e,r,i,s,a){for(var o=s,l=new Int32Array(8),h=0,d=i?1:-1,g=i;(i?o<r:o>=e)&&h<l.length;)t.get(o,a)===g?(l[h]++,o+=d):(h++,g=!g);return h===l.length||o===(i?r:e)&&h===l.length-1?l:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,s,a){for(var o=s,l=i?-1:1,h=0;h<2;h++){for(;(i?o>=e:o<r)&&i===t.get(o,a);){if(Math.abs(s-o)>n.CODEWORD_SKEW_SIZE)return s;o+=l}l=-l,i=!i}return o},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw vt.getFormatInstance();var i=1<<e+1,s=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var a=Krt.decode(t,""+e);return a.setErrorsCorrected(s),a.setErasures(r.length),a},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Jn.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw vt.getFormatInstance();var r=t[0];if(r>t.length)throw vt.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw vt.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new yE,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var s=t[r][i];s.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new Rrt,n}(),Qrt=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},q2=function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw st.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof vt||r instanceof Jn?st.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,s,a=new Array,o=Art.detectMultiple(t,e,r);try{for(var l=Qrt(o.getPoints()),h=l.next();!h.done;h=l.next()){var d=h.value,g=$rt.decode(o.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),m=new Ar(g.getText(),g.getRawBytes(),void 0,d,Nt.PDF_417);m.putMetadata(hr.ERROR_CORRECTION_LEVEL,g.getECLevel());var y=g.getOther();y!=null&&m.putMetadata(hr.PDF417_EXTRA_METADATA,y),a.push(m)}}catch(x){i={error:x}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a.map(function(x){return x})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?ee.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*he.MODULES_IN_CODEWORD/he.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*he.MODULES_IN_CODEWORD/he.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*he.MODULES_IN_CODEWORD/he.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*he.MODULES_IN_CODEWORD/he.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),Zrt=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZR=function(n){Zrt(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t}(Yr),JR=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jrt=function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(Qe.TRY_HARDER)!==void 0,r=t==null?null:t.get(Qe.POSSIBLE_FORMATS),i=new Array;if(r!=null){var s=r.some(function(a){return a===Nt.UPC_A||a===Nt.UPC_E||a===Nt.EAN_13||a===Nt.EAN_8||a===Nt.CODABAR||a===Nt.CODE_39||a===Nt.CODE_93||a===Nt.CODE_128||a===Nt.ITF||a===Nt.RSS_14||a===Nt.RSS_EXPANDED});s&&!e&&i.push(new bd(t)),r.includes(Nt.QR_CODE)&&i.push(new G2),r.includes(Nt.DATA_MATRIX)&&i.push(new H2),r.includes(Nt.AZTEC)&&i.push(new j2),r.includes(Nt.PDF_417)&&i.push(new q2),s&&e&&i.push(new bd(t))}i.length===0&&(e||i.push(new bd(t)),i.push(new G2),i.push(new H2),i.push(new j2),i.push(new q2),e&&i.push(new bd(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=JR(this.readers),i=r.next();!i.done;i=r.next()){var s=i.value;s.reset()}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new ZR("No readers where selected, nothing can be read.");try{for(var i=JR(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;try{return a.decode(t,this.hints)}catch(o){if(o instanceof ZR)continue}}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new st("No MultiFormat Readers were able to detect the code.")},n}(),tit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),eit=function(n){tit(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,s=new Jrt;return s.setHints(e),i=n.call(this,s,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(kh),nit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){nit(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new q2,e)||this}return t})(kh);var rit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){rit(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new G2,e)||this}return t})(kh);var Y2;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Y2||(Y2={}));const Wp=Y2;var o5=function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Oo(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,s=e.length;s<=t;s++){var a=r.multiply(new Oo(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));e.push(a),r=a}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new kt("No error correction bytes");var r=t.length-e;if(r<=0)throw new kt("No data bytes provided");var i=this.buildGenerator(e),s=new Int32Array(r);ze.arraycopy(t,0,s,0,r);var a=new Oo(this.field,s);a=a.multiplyByMonomial(e,1);for(var o=a.divide(i)[1],l=o.getCoefficients(),h=e-l.length,d=0;d<h;d++)t[r+d]=0;ze.arraycopy(l,0,t,r+h,l.length)},n}(),Ad=function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s-1;a++)for(var o=r[a],l=0;l<i-1;l++){var h=o[l];h===o[l+1]&&h===r[a+1][l]&&h===r[a+1][l+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=0;o<i;o++){var l=r[a];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(n.isWhiteHorizontal(l,o-4,o)||n.isWhiteHorizontal(l,o+7,o+11))&&e++,a+6<s&&r[a][o]===1&&r[a+1][o]===0&&r[a+2][o]===1&&r[a+3][o]===1&&r[a+4][o]===1&&r[a+5][o]===0&&r[a+6][o]===1&&(n.isWhiteVertical(r,o,a-4,a)||n.isWhiteVertical(r,o,a+7,a+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var s=r;s<i;s++)if(t[s][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),s=t.getHeight(),a=0;a<s;a++)for(var o=r[a],l=0;l<i;l++)o[l]===1&&e++;var h=t.getHeight()*t.getWidth(),d=Math.floor(Math.abs(e*2-h)*10/h);return d*n.N4},n.getDataMaskBit=function(t,e,r){var i,s;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:s=r*e,i=(s&1)+s%3;break;case 6:s=r*e,i=(s&1)+s%3&1;break;case 7:s=r*e,i=s%3+(r+e&1)&1;break;default:throw new kt("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),s=e?t.getWidth():t.getHeight(),a=t.getArray(),o=0;o<i;o++){for(var l=0,h=-1,d=0;d<s;d++){var g=e?a[o][d]:a[d][o];g===h?l++:(l>=5&&(r+=n.N1+(l-5)),l=1,h=g)}l>=5&&(r+=n.N1+(l-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),iit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sit=function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=iit(this.bytes),s=i.next();!s.done;s=i.next()){var a=s.value;Fn.fill(a,t)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var s=this.bytes[r],a=e.bytes[r],o=0,l=this.width;o<l;++o)if(s[o]!==a[o])return!1;return!0},n.prototype.toString=function(){for(var t=new $t,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],s=0,a=this.width;s<a;++s)switch(i[s]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n}(),X2=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new $t;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),ait=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ge=function(n){ait(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t}(Yr),t4=function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,s){n.clearMatrix(s),n.embedBasicPatterns(r,s),n.embedTypeInfo(e,i,s),n.maybeEmbedVersionInfo(r,s),n.embedDataBits(t,i,s)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new tr;n.makeTypeInfoBits(t,e,i);for(var s=0,a=i.getSize();s<a;++s){var o=i.get(i.getSize()-1-s),l=n.TYPE_INFO_COORDINATES[s],h=l[0],d=l[1];if(r.setBoolean(h,d,o),s<8){var g=r.getWidth()-s-1,m=8;r.setBoolean(g,m,o)}else{var g=8,m=r.getHeight()-7+(s-8);r.setBoolean(g,m,o)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new tr;n.makeVersionInfoBits(t,r);for(var i=6*3-1,s=0;s<6;++s)for(var a=0;a<3;++a){var o=r.get(i);i--,e.setBoolean(s,e.getHeight()-11+a,o),e.setBoolean(e.getHeight()-11+a,s,o)}}},n.embedDataBits=function(t,e,r){for(var i=0,s=-1,a=r.getWidth()-1,o=r.getHeight()-1;a>0;){for(a===6&&(a-=1);o>=0&&o<r.getHeight();){for(var l=0;l<2;++l){var h=a-l;if(n.isEmpty(r.get(h,o))){var d=void 0;i<t.getSize()?(d=t.get(i),++i):d=!1,e!==255&&Ad.getDataMaskBit(e,h,o)&&(d=!d),r.setBoolean(h,o,d)}}o+=s}s=-s,o+=s,a-=2}if(i!==t.getSize())throw new Ge("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-ee.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new kt("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!X2.isValidMaskPattern(e))throw new Ge("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var s=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(s,10);var a=new tr;if(a.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new Ge("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new Ge("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new Ge;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new Ge;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new Ge;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var s=n.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var s=n.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(t+a,e+i,s[a])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],s=0,a=i.length;s!==a;s++){var o=i[s];if(o>=0)for(var l=0;l!==a;l++){var h=i[l];h>=0&&n.isEmpty(e.get(h,o))&&n.embedPositionAdjustmentPattern(h-2,o-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),oit=function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),e4=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return Ad.applyMaskPenaltyRule1(t)+Ad.applyMaskPenaltyRule2(t)+Ad.applyMaskPenaltyRule3(t)+Ad.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,s=r!==null&&r.get(Wp.CHARACTER_SET)!==void 0;s&&(i=r.get(Wp.CHARACTER_SET).toString());var a=this.chooseMode(t,i),o=new tr;if(a===We.BYTE&&(s||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Bn.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(a,o);var h=new tr;this.appendBytes(t,a,h,i);var d;if(r!==null&&r.get(Wp.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(Wp.QR_VERSION).toString(),10);d=cl.getVersionForNumber(g);var m=this.calculateBitsNeeded(a,o,h,d);if(!this.willFit(m,d,e))throw new Ge("Data too big for requested version")}else d=this.recommendVersion(e,a,o,h);var y=new tr;y.appendBitArray(o);var x=a===We.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(x,d,a,y),y.appendBitArray(h);var b=d.getECBlocksForLevel(e),E=d.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(E,y);var T=this.interleaveWithECBytes(y,d.getTotalCodewords(),E,b.getNumBlocks()),S=new X2;S.setECLevel(e),S.setMode(a),S.setVersion(d);var R=d.getDimensionForVersion(),k=new sit(R,R),P=this.chooseMaskPattern(T,e,d,k);return S.setMaskPattern(P),t4.buildMatrix(T,e,d,P,k),S.setMatrix(k),S},n.recommendVersion=function(t,e,r,i){var s=this.calculateBitsNeeded(e,r,i,cl.getVersionForNumber(1)),a=this.chooseVersion(s,t),o=this.calculateBitsNeeded(e,r,i,a);return this.chooseVersion(o,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),Bn.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return We.KANJI;for(var r=!1,i=!1,s=0,a=t.length;s<a;++s){var o=t.charAt(s);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return We.BYTE}return i?We.ALPHANUMERIC:r?We.NUMERIC:We.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=Mi.encode(t,Bn.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var s=e[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var s=Number.MAX_SAFE_INTEGER,a=-1,o=0;o<X2.NUM_MASK_PATTERNS;o++){t4.buildMatrix(t,e,r,o,i);var l=this.calculateMaskPenalty(i);l<s&&(s=l,a=o)}return a},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=cl.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new Ge("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),s=e.getECBlocksForLevel(r),a=s.getTotalECCodewords(),o=i-a,l=(t+7)/8;return o>=l},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new Ge("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var s=e.getSize()&7;if(s>0)for(var i=s;i<8;i++)e.appendBit(!1);for(var a=t-e.getSizeInBytes(),i=0;i<a;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new Ge("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,s,a){if(i>=r)throw new Ge("Block ID too large");var o=t%r,l=r-o,h=Math.floor(t/r),d=h+1,g=Math.floor(e/r),m=g+1,y=h-g,x=d-m;if(y!==x)throw new Ge("EC bytes mismatch");if(r!==l+o)throw new Ge("RS blocks mismatch");if(t!==(g+y)*l+(m+x)*o)throw new Ge("Total bytes mismatch");i<l?(s[0]=g,a[0]=y):(s[0]=m,a[0]=x)},n.interleaveWithECBytes=function(t,e,r,i){var s,a,o,l;if(t.getSizeInBytes()!==r)throw new Ge("Number of bits and data bytes does not match");for(var h=0,d=0,g=0,m=new Array,y=0;y<i;++y){var x=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,y,x,b);var E=x[0],T=new Uint8Array(E);t.toBytes(8*h,T,0,E);var S=n.generateECBytes(T,b[0]);m.push(new oit(T,S)),d=Math.max(d,E),g=Math.max(g,S.length),h+=x[0]}if(r!==h)throw new Ge("Data bytes does not match offset");for(var R=new tr,y=0;y<d;++y)try{for(var k=(s=void 0,e4(m)),P=k.next();!P.done;P=k.next()){var H=P.value,T=H.getDataBytes();y<T.length&&R.appendBits(T[y],8)}}catch(L){s={error:L}}finally{try{P&&!P.done&&(a=k.return)&&a.call(k)}finally{if(s)throw s.error}}for(var y=0;y<g;++y)try{for(var M=(o=void 0,e4(m)),C=M.next();!C.done;C=M.next()){var H=C.value,S=H.getErrorCorrectionBytes();y<S.length&&R.appendBits(S[y],8)}}catch(L){o={error:L}}finally{try{C&&!C.done&&(l=M.return)&&l.call(M)}finally{if(o)throw o.error}}if(e!==R.getSizeInBytes())throw new Ge("Interleaving error: "+e+" and "+R.getSizeInBytes()+" differ.");return R},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),s=0;s<r;s++)i[s]=t[s]&255;new o5(jr.QR_CODE_FIELD_256).encode(i,e);for(var a=new Uint8Array(e),s=0;s<e;s++)a[s]=i[r+s];return a},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var s=r.getCharacterCountBits(e);if(t>=1<<s)throw new Ge(t+" is bigger than "+((1<<s)-1));i.appendBits(t,s)},n.appendBytes=function(t,e,r,i){switch(e){case We.NUMERIC:n.appendNumericBytes(t,r);break;case We.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case We.BYTE:n.append8BitBytes(t,r,i);break;case We.KANJI:n.appendKanjiBytes(t,r);break;default:throw new Ge("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getDigit(t.charAt(i));if(i+2<r){var a=n.getDigit(t.charAt(i+1)),o=n.getDigit(t.charAt(i+2));e.appendBits(s*100+a*10+o,10),i+=3}else if(i+1<r){var a=n.getDigit(t.charAt(i+1));e.appendBits(s*10+a,7),i+=2}else e.appendBits(s,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var s=n.getAlphanumericCode(t.charCodeAt(i));if(s===-1)throw new Ge;if(i+1<r){var a=n.getAlphanumericCode(t.charCodeAt(i+1));if(a===-1)throw new Ge;e.appendBits(s*45+a,11),i+=2}else e.appendBits(s,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=Mi.encode(t,r)}catch(l){throw new Ge(l)}for(var s=0,a=i.length;s!==a;s++){var o=i[s];e.appendBits(o,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=Mi.encode(t,Bn.SJIS)}catch(g){throw new Ge(g)}for(var i=r.length,s=0;s<i;s+=2){var a=r[s]&255,o=r[s+1]&255,l=a<<8&4294967295|o,h=-1;if(l>=33088&&l<=40956?h=l-33088:l>=57408&&l<=60351&&(h=l-49472),h===-1)throw new Ge("Invalid byte sequence");var d=(h>>8)*192+(h&255);e.appendBits(d,13)}},n.appendECI=function(t,e){e.appendBits(We.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Bn.UTF8.getName(),n})();var cit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){cit(t,n);function t(e,r,i,s,a,o,l,h){var d=n.call(this,o,l)||this;if(d.yuvData=e,d.dataWidth=r,d.dataHeight=i,d.left=s,d.top=a,s+o>r||a+l>i)throw new kt("Crop rectangle does not fit within image data.");return h&&d.reverseHorizontal(o,l),d}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return ze.arraycopy(this.yuvData,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ze.arraycopy(this.yuvData,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;ze.arraycopy(this.yuvData,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,s,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),s=this.yuvData,a=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var l=o*e,h=0;h<e;h++){var d=s[a+h*t.THUMBNAIL_SCALE_FACTOR]&255;i[l+h]=4278190080|d*65793}a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,s=0,a=this.top*this.dataWidth+this.left;s<r;s++,a+=this.dataWidth)for(var o=a+e/2,l=a,h=a+e-1;l<o;l++,h--){var d=i[l];i[l]=i[h],i[h]=d}},t.prototype.invert=function(){return new dE(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(ry);var lit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){lit(t,n);function t(e,r,i,s,a,o,l){var h=n.call(this,r,i)||this;if(h.dataWidth=s,h.dataHeight=a,h.left=o,h.top=l,e.BYTES_PER_ELEMENT===4){for(var d=r*i,g=new Uint8ClampedArray(d),m=0;m<d;m++){var y=e[m],x=y>>16&255,b=y>>7&510,E=y&255;g[m]=(x+b+E)/4&255}h.luminances=g}else h.luminances=e;if(s===void 0&&(h.dataWidth=r),a===void 0&&(h.dataHeight=i),o===void 0&&(h.left=0),l===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new kt("Crop rectangle does not fit within image data.");return h}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new kt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(e+this.top)*this.dataWidth+this.left;return ze.arraycopy(this.luminances,s,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,s=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ze.arraycopy(this.luminances,a,s,0,i),s;for(var o=0;o<r;o++){var l=o*e;ze.arraycopy(this.luminances,a,s,l,e),a+=this.dataWidth}return s},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,s){return new t(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new dE(this)},t})(ry);var uit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hit=function(n){uit(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Bn),fit=function(){function n(){}return n.ISO_8859_1=Bn.ISO8859_1,n}(),K2,dit=301,git=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=dit);return{LOG:n,ALOG:t}};K2=git([],[]),K2.LOG;K2.ALOG;var n4;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(n4||(n4={}));var r4=129,c5=230,pit=231,mit=235,yit=236,vit=237,_it=238,xit=239,wit=240,dx=254,bit=254,i4="[)>05",s4="[)>06",a4="",Ce=0,cr=1,Mr=2,Ln=3,$n=4,mr=5,Eit=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ce},n.prototype.encode=function(t){var e=Xi.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=Xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case mr:t.writeCodeword(pit),t.signalEncoderChange(mr);return;case cr:t.writeCodeword(c5),t.signalEncoderChange(cr);return;case Ln:t.writeCodeword(_it),t.signalEncoderChange(Ln);break;case Mr:t.writeCodeword(xit),t.signalEncoderChange(Mr);break;case $n:t.writeCodeword(wit),t.signalEncoderChange($n);break;default:throw new Error("Illegal mode: "+i)}else Xi.isExtendedASCII(r)?(t.writeCodeword(mit),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(Xi.isDigit(t)&&Xi.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n}(),Ait=function(){function n(){}return n.prototype.getEncodingMode=function(){return mr},n.prototype.encode=function(t){var e=new $t;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=Xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Ce);break}}var s=e.length()-1,a=1,o=t.getCodewordCount()+s+a;t.updateSymbolInfo(o);var l=t.getSymbolInfo().getDataCapacity()-o>0;if(t.hasMoreCharacters()||l)if(s<=249)e.setCharAt(0,ue.getCharAt(s));else if(s<=1555)e.setCharAt(0,ue.getCharAt(Math.floor(s/250)+249)),e.insert(1,ue.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var h=0,r=e.length();h<r;h++)t.writeCodeword(this.randomize255State(e.charAt(h).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n}(),vE=function(){function n(){}return n.prototype.getEncodingMode=function(){return cr},n.prototype.encodeMaximal=function(t){for(var e=new $t,r=0,i=t.pos,s=0;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,r=this.encodeChar(a,e),e.length()%3===0&&(i=t.pos,s=e.length())}if(s!==e.length()){var o=Math.floor(e.length()/3*2),l=Math.floor(t.getCodewordCount()+o+1);t.updateSymbolInfo(l);var h=t.getSymbolInfo().getDataCapacity()-l,d=Math.floor(e.length()%3);(d===2&&h!==2||d===1&&(r>3||h!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(c5),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new $t;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),s=Math.floor(e.length()/3)*2,a=t.getCodewordCount()+s;t.updateSymbolInfo(a);var o=t.getSymbolInfo().getDataCapacity()-a;if(!t.hasMoreCharacters()){var l=new $t;for(e.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(t,e,l,i));e.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(t,e,l,i);break}var h=e.length();if(h%3===0){var d=Xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){t.signalEncoderChange(Ce);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var s=e.length(),a=e.toString().substring(0,s-i);e.setLengthToZero(),e.append(a),t.pos--;var o=t.getCurrentChar();return i=this.encodeChar(o,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,s=t.getCodewordCount()+r;t.updateSymbolInfo(s);var a=t.getSymbolInfo().getDataCapacity()-s;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(dx)}else if(a===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(dx),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(a>0||t.hasMoreCharacters())&&t.writeCodeword(dx)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(Ce)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,s=new $t;return s.append(r),s.append(i),s.toString()},n}(),Tit=function(){function n(){}return n.prototype.getEncodingMode=function(){return $n},n.prototype.encode=function(t){for(var e=new $t;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var s=e.toString().substring(4);e.setLengthToZero(),e.append(s);var a=Xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(Ce);break}}}e.append(ue.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),s=t.getRemainingCharacters();if(s>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),s<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var a=r-1,o=this.encodeToCodewords(e.toString()),l=!t.hasMoreCharacters(),h=l&&a<=2;if(a<=2){t.updateSymbolInfo(t.getCodewordCount()+a);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(h=!1,t.updateSymbolInfo(t.getCodewordCount()+o.length))}h?(t.resetSymbolInfo(),t.pos-=a):t.writeCodewords(o)}finally{t.signalEncoderChange(Ce)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(ue.getCharAt(t-64)):Xi.illegalCharacter(ue.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,s=e>=3?t.charAt(2).charCodeAt(0):0,a=e>=4?t.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(s<<6)+a,l=o>>16&255,h=o>>8&255,d=o&255,g=new $t;return g.append(l),e>=2&&g.append(h),e>=3&&g.append(d),g.toString()},n}(),Sit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Iit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ve=function(){function n(t,e,r,i,s,a,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=s,this.dataRegions=a,this.rsBlockData=o,this.rsBlockError=l}return n.lookup=function(t,e,r,i,s){var a,o;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!0);try{for(var l=Iit(Dit),h=l.next();!h.done;h=l.next()){var d=h.value;if(!(e===1&&d.rectangular)&&!(e===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&t<=d.dataCapacity)return d}}catch(g){a={error:g}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n}(),Cit=function(n){Sit(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(ve),Dit=[new ve(!1,3,5,8,8,1),new ve(!1,5,7,10,10,1),new ve(!0,5,7,16,6,1),new ve(!1,8,10,12,12,1),new ve(!0,10,11,14,6,2),new ve(!1,12,12,14,14,1),new ve(!0,16,14,24,10,1),new ve(!1,18,14,16,16,1),new ve(!1,22,18,18,18,1),new ve(!0,22,18,16,10,2),new ve(!1,30,20,20,20,1),new ve(!0,32,24,16,14,2),new ve(!1,36,24,22,22,1),new ve(!1,44,28,24,24,1),new ve(!0,49,28,22,14,2),new ve(!1,62,36,14,14,4),new ve(!1,86,42,16,16,4),new ve(!1,114,48,18,18,4),new ve(!1,144,56,20,20,4),new ve(!1,174,68,22,22,4),new ve(!1,204,84,24,24,4,102,42),new ve(!1,280,112,14,14,16,140,56),new ve(!1,368,144,16,16,16,92,36),new ve(!1,456,192,18,18,16,114,48),new ve(!1,576,224,20,20,16,144,56),new ve(!1,696,272,22,22,16,174,68),new ve(!1,816,336,24,24,16,136,56),new ve(!1,1050,408,18,18,36,175,68),new ve(!1,1304,496,20,20,36,163,62),new Cit],Rit=function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(o){return o.charCodeAt(0)}),r=new $t,i=0,s=e.length;i<s;i++){var a=String.fromCharCode(e[i]&255);if(a==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(a)}this.msg=r.toString(),this.shape=0,this.codewords=new $t,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ve.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),Oit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mit=function(n){Oit(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Ln},t.prototype.encode=function(e){for(var r=new $t;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var s=r.length();if(s%3===0){this.writeNextTriplet(e,r);var a=Xi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ce);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):Xi.illegalCharacter(ue.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=r.length();e.pos-=s,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(bit),e.getNewEncoding()<0&&e.signalEncoderChange(Ce)},t}(vE),Pit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nit=function(n){Pit(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Mr},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t}(vE),Xi=function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=r4+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!1);var a=new vE,o=[new Eit,a,new Nit,new Mit,new Tit,new Ait],l=new Rit(t);l.setSymbolShape(e),l.setSizeConstraints(r,i),t.startsWith(i4)&&t.endsWith(a4)?(l.writeCodeword(yit),l.setSkipAtEnd(2),l.pos+=i4.length):t.startsWith(s4)&&t.endsWith(a4)&&(l.writeCodeword(vit),l.setSkipAtEnd(2),l.pos+=s4.length);var h=Ce;for(s&&(a.encodeMaximal(l),h=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[h].encode(l),l.getNewEncoding()>=0&&(h=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var g=l.getSymbolInfo().getDataCapacity();d<g&&h!==Ce&&h!==mr&&h!==$n&&l.writeCodeword("þ");var m=l.getCodewords();for(m.length()<g&&m.append(r4);m.length()<g;)m.append(this.randomize253State(m.length()+1));return l.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===Ln&&i===Ln){for(var s=Math.min(e+3,t.length),a=e;a<s;a++)if(!this.isNativeX12(t.charCodeAt(a)))return Ce}else if(r===$n&&i===$n){for(var s=Math.min(e+4,t.length),a=e;a<s;a++)if(!this.isNativeEDIFACT(t.charCodeAt(a)))return Ce}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===Ce?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var s=0,a=new Uint8Array(6),o=[];;){if(e+s===t.length){Fn.fill(a,0),Fn.fill(o,0);var l=this.findMinimums(i,o,ee.MAX_VALUE,a),h=this.getMinimumCount(a);if(o[Ce]===l)return Ce;if(h===1){if(a[mr]>0)return mr;if(a[$n]>0)return $n;if(a[Mr]>0)return Mr;if(a[Ln]>0)return Ln}return cr}var d=t.charCodeAt(e+s);if(s++,this.isDigit(d)?i[Ce]+=.5:this.isExtendedASCII(d)?(i[Ce]=Math.ceil(i[Ce]),i[Ce]+=2):(i[Ce]=Math.ceil(i[Ce]),i[Ce]++),this.isNativeC40(d)?i[cr]+=2/3:this.isExtendedASCII(d)?i[cr]+=8/3:i[cr]+=4/3,this.isNativeText(d)?i[Mr]+=2/3:this.isExtendedASCII(d)?i[Mr]+=8/3:i[Mr]+=4/3,this.isNativeX12(d)?i[Ln]+=2/3:this.isExtendedASCII(d)?i[Ln]+=13/3:i[Ln]+=10/3,this.isNativeEDIFACT(d)?i[$n]+=3/4:this.isExtendedASCII(d)?i[$n]+=17/4:i[$n]+=13/4,this.isSpecialB256(d)?i[mr]+=4:i[mr]++,s>=4){if(Fn.fill(a,0),Fn.fill(o,0),this.findMinimums(i,o,ee.MAX_VALUE,a),o[Ce]<this.min(o[mr],o[cr],o[Mr],o[Ln],o[$n]))return Ce;if(o[mr]<o[Ce]||o[mr]+1<this.min(o[cr],o[Mr],o[Ln],o[$n]))return mr;if(o[$n]+1<this.min(o[mr],o[cr],o[Mr],o[Ln],o[Ce]))return $n;if(o[Mr]+1<this.min(o[mr],o[cr],o[$n],o[Ln],o[Ce]))return Mr;if(o[Ln]+1<this.min(o[mr],o[cr],o[$n],o[Mr],o[Ce]))return Ln;if(o[cr]+1<this.min(o[Ce],o[mr],o[$n],o[Mr])){if(o[cr]<o[Ln])return cr;if(o[cr]===o[Ln]){for(var g=e+s+1;g<t.length;){var m=t.charCodeAt(g);if(this.isX12TermSep(m))return Ln;if(!this.isNativeX12(m))break;g++}return cr}}}}},n.min=function(t,e,r,i,s){var a=Math.min(t,Math.min(e,Math.min(r,i)));return s===void 0?a:Math.min(a,s)},n.findMinimums=function(t,e,r,i){for(var s=0;s<6;s++){var a=e[s]=Math.ceil(t[s]);r>a&&(r=a,Fn.fill(i,0)),r===a&&(i[s]=i[s]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=ee.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n}(),gx=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o4=function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return Mi.encode(t,this.charset)!=null}catch{return!1}},n}(),kit=function(){function n(t,e,r){var i,s,a,o,l,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(O){return new o4(hit.forName(O))}),this.encoders=[];var d=[];d.push(new o4(fit.ISO_8859_1));for(var g=e!=null&&e.name.startsWith("UTF"),m=0;m<t.length;m++){var y=!1;try{for(var x=(i=void 0,gx(d)),b=x.next();!b.done;b=x.next()){var E=b.value,T=t.charAt(m),S=T.charCodeAt(0);if(S===r||E.canEncode(T)){y=!0;break}}}catch(O){i={error:O}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}if(!y)try{for(var R=(a=void 0,gx(this.ENCODERS)),k=R.next();!k.done;k=R.next()){var E=k.value;if(E.canEncode(t.charAt(m))){d.push(E),y=!0;break}}}catch(O){a={error:O}}finally{try{k&&!k.done&&(o=R.return)&&o.call(R)}finally{if(a)throw a.error}}y||(g=!0)}if(d.length===1&&!g)this.encoders=[d[0]];else{this.encoders=[];var P=0;try{for(var H=gx(d),M=H.next();!M.done;M=H.next()){var E=M.value;this.encoders[P++]=E}}catch(O){l={error:O}}finally{try{M&&!M.done&&(h=H.return)&&h.call(H)}finally{if(l)throw l.error}}}var C=-1;if(e!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&e.name===this.encoders[m].name){C=m;break}}this.priorityEncoderIndex=C}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return Mi.encode(ue.getCharAt(t),this.encoders[e].name)},n}(),Lit=3,Vit=function(){function n(t,e,r){this.fnc1=r;var i=new kit(t,e,r);if(i.length()===1)for(var s=0;s<this.bytes.length;s++){var a=t.charAt(s).charCodeAt(0);this.bytes[s]=a===r?1e3:a}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new $t,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,s,a){var o=t.charAt(i).charCodeAt(0),l=0,h=e.length();e.getPriorityEncoderIndex()>=0&&(o===a||e.canEncode(o,e.getPriorityEncoderIndex()))&&(l=e.getPriorityEncoderIndex(),h=l+1);for(var d=l;d<h;d++)(o===a||e.canEncode(o,d))&&this.addEdge(r,i+1,new c4(o,e,d,s,a))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,s=new c4[i+1][e.length()];this.addEdges(t,e,s,0,null,r);for(var a=1;a<=i;a++){for(var o=0;o<e.length();o++)s[a][o]!=null&&a<i&&this.addEdges(t,e,s,a,s[a][o],r);for(var o=0;o<e.length();o++)s[a-1][o]=null}for(var l=-1,h=ee.MAX_VALUE,o=0;o<e.length();o++)if(s[i][o]!=null){var d=s[i][o];d.cachedTotalSize<h&&(h=d.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+t+'"');for(var g=[],m=s[i][l];m!=null;){if(m.isFNC1())g.unshift(1e3);else for(var y=e.encode(m.c,m.encoderIndex),a=y.length-1;a>=0;a--)g.unshift(y[a]&255);var x=m.previous===null?0:m.previous.encoderIndex;x!==m.encoderIndex&&g.unshift(256+e.getECIValue(m.encoderIndex)),m=m.previous}for(var b=[],a=0;a<b.length;a++)b[a]=g[a];return b},n}(),c4=function(){function n(t,e,r,i,s){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=s,this.c=t===s?1e3:t;var a=this.isFNC1()?1:e.encode(t,r).length,o=i===null?0:i.encoderIndex;o!==r&&(a+=Lit),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),Bit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();var l4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(l4||(l4={}));(function(n){Bit(t,n);function t(e,r,i,s,a){var o=n.call(this,e,r,i)||this;return o.shape=s,o.macroId=a,o}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(Vit);var Fit=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n}(),u4=function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n}(),Uit=function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n}(),jit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_E=function(n){jit(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.value=r,s.bitCount=i,s}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ee.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(Uit),zit=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hit=function(n){zit(t,n);function t(e,r,i){var s=n.call(this,e,0,0)||this;return s.binaryShiftStart=r,s.binaryShiftByteCount=i,s}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(_E);function Git(n,t,e){return new Hit(n,t,e)}function od(n,t,e){return new _E(n,t,e)}var Wit=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Mo=0,gm=1,Di=2,l5=3,Ts=4,qit=new _E(null,0,0),px=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Yit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Xit(n){var t,e;try{for(var r=Yit(n),i=r.next();!i.done;i=r.next()){var s=i.value;Fn.fill(s,-1)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[Mo][Ts]=0,n[gm][Ts]=0,n[gm][Mo]=28,n[l5][Ts]=0,n[Di][Ts]=0,n[Di][Mo]=15,n}var u5=Xit(Fn.createInt32Array(6,6)),Kit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$it=function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var s=px[this.mode][t];i=od(i,s&65535,s>>16),r+=s>>16}var a=t===Di?4:5;return i=od(i,e,a),new n(i,t,0,r+a)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===Di?4:5;return r=od(r,u5[this.mode][t],i),r=od(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ts||this.mode===Di){var s=px[r][Mo];e=od(e,s&65535,s>>16),i+=s>>16,r=Mo}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(e,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(t+1)),o},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=Git(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(px[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],s=this.endBinaryShift(t.length).token;s!==null;s=s.getPrevious())i.unshift(s);var a=new tr;try{for(var o=Kit(i),l=o.next();!l.done;l=o.next()){var h=l.value;h.appendTo(a,t)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n.prototype.toString=function(){return ue.format("%s bits=%d bytes=%d",Wit[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(qit,Mo,0,0),n}();function Qit(n){var t=ue.getCharCode(" "),e=ue.getCharCode("."),r=ue.getCharCode(",");n[Mo][t]=1;for(var i=ue.getCharCode("Z"),s=ue.getCharCode("A"),a=s;a<=i;a++)n[Mo][a]=a-s+2;n[gm][t]=1;for(var o=ue.getCharCode("z"),l=ue.getCharCode("a"),a=l;a<=o;a++)n[gm][a]=a-l+2;n[Di][t]=1;for(var h=ue.getCharCode("9"),d=ue.getCharCode("0"),a=d;a<=h;a++)n[Di][a]=a-d+2;n[Di][r]=12,n[Di][e]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<g.length;m++)n[l5][ue.getCharCode(g[m])]=m;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<y.length;m++)ue.getCharCode(y[m])>0&&(n[Ts][ue.getCharCode(y[m])]=m);return n}var mx=Qit(Fn.createInt32Array(5,256)),qp=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zit=function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=ue.getCharCode(" "),e=ue.getCharCode(`
`),r=u4.singletonList($it.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ue.getCharCode("\r"):s=a===e?2:0;break;case ue.getCharCode("."):s=a===t?3:0;break;case ue.getCharCode(","):s=a===t?4:0;break;case ue.getCharCode(":"):s=a===t?5:0;break;default:s=0}s>0?(r=n.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}var o=u4.min(r,function(l,h){return l.getBitCount()-h.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,s=[];try{for(var a=qp(t),o=a.next();!o.done;o=a.next()){var l=o.value;this.updateStateForChar(l,e,s)}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return n.simplifyStates(s)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,s=mx[t.getMode()][i]>0,a=null,o=0;o<=Ts;o++){var l=mx[o][i];if(l>0){if(a==null&&(a=t.endBinaryShift(e)),!s||o===t.getMode()||o===Di){var h=a.latchAndAppend(o,l);r.push(h)}if(!s&&u5[t.getMode()][o]>=0){var d=a.shiftAndAppend(o,l);r.push(d)}}}if(t.getBinaryShiftByteCount()>0||mx[t.getMode()][i]===0){var g=t.addBinaryShiftChar(e);r.push(g)}},n.updateStateListForPair=function(t,e,r){var i,s,a=[];try{for(var o=qp(t),l=o.next();!l.done;l=o.next()){var h=l.value;this.updateStateForPair(h,e,r,a)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(a)},n.updateStateForPair=function(t,e,r,i){var s=t.endBinaryShift(e);if(i.push(s.latchAndAppend(Ts,r)),t.getMode()!==Ts&&i.push(s.shiftAndAppend(Ts,r)),r===3||r===4){var a=s.latchAndAppend(Di,16-r).latchAndAppend(Di,1);i.push(a)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(o)}},n.simplifyStates=function(t){var e,r,i,s,a=[];try{for(var o=qp(t),l=o.next();!l.done;l=o.next()){var h=l.value,d=!0,g=function(E){if(E.isBetterThanOrEqualTo(h))return d=!1,"break";h.isBetterThanOrEqualTo(E)&&(a=a.filter(function(T){return T!==E}))};try{for(var m=(i=void 0,qp(a)),y=m.next();!y.done;y=m.next()){var x=y.value,b=g(x);if(b==="break")break}}catch(E){i={error:E}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}d&&a.push(h)}}catch(E){e={error:E}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},n}(),Jit=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new Zit(t).encode(),s=ee.truncDivision(i.getSize()*e,100)+11,a=i.getSize()+s,o,l,h,d,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,l=Math.abs(r),l>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new kt(ue.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(l,o),d=n.WORD_SIZE[l];var m=h-h%d;if(g=n.stuffBits(i,d),g.getSize()+s>m)throw new kt("Data to large for user specified layer");if(o&&g.getSize()>d*64)throw new kt("Data to large for user specified layer")}else{d=0,g=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new kt("Data too large for an Aztec code");if(o=y<=3,l=o?y+1:y,h=n.totalBitsInLayer(l,o),!(a>h)){(g==null||d!==n.WORD_SIZE[l])&&(d=n.WORD_SIZE[l],g=n.stuffBits(i,d));var m=h-h%d;if(!(o&&g.getSize()>d*64)&&g.getSize()+s<=m)break}}}var x=n.generateCheckWords(g,h,d),b=g.getSize()/d,E=n.generateModeMessage(o,l,b),T=(o?11:14)+l*4,S=new Int32Array(T),R;if(o){R=T;for(var y=0;y<S.length;y++)S[y]=y}else{R=T+1+2*ee.truncDivision(ee.truncDivision(T,2)-1,15);for(var k=ee.truncDivision(T,2),P=ee.truncDivision(R,2),y=0;y<k;y++){var H=y+ee.truncDivision(y,15);S[k-y-1]=P-H-1,S[k+y]=P+H+1}}for(var M=new Fs(R),y=0,C=0;y<l;y++){for(var O=(l-y)*4+(o?9:12),L=0;L<O;L++)for(var j=L*2,z=0;z<2;z++)x.get(C+j+z)&&M.set(S[y*2+z],S[y*2+L]),x.get(C+O*2+j+z)&&M.set(S[y*2+L],S[T-1-y*2-z]),x.get(C+O*4+j+z)&&M.set(S[T-1-y*2-z],S[T-1-y*2-L]),x.get(C+O*6+j+z)&&M.set(S[T-1-y*2-L],S[y*2+z]);C+=O*8}if(n.drawModeMessage(M,o,R,E),o)n.drawBullsEye(M,ee.truncDivision(R,2),5);else{n.drawBullsEye(M,ee.truncDivision(R,2),7);for(var y=0,L=0;y<ee.truncDivision(T,2)-1;y+=15,L+=16)for(var z=ee.truncDivision(R,2)&1;z<R;z+=2)M.set(ee.truncDivision(R,2)-L,z),M.set(ee.truncDivision(R,2)+L,z),M.set(z,ee.truncDivision(R,2)-L),M.set(z,ee.truncDivision(R,2)+L)}var U=new Fit;return U.setCompact(o),U.setSize(R),U.setLayers(l),U.setCodeWords(b),U.setMatrix(M),U},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var s=e-i;s<=e+i;s++)t.set(s,e-i),t.set(s,e+i),t.set(e-i,s),t.set(e+i,s);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new tr;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var s=ee.truncDivision(r,2);if(e)for(var a=0;a<7;a++){var o=s-3+a;i.get(a)&&t.set(o,s-5),i.get(a+7)&&t.set(s+5,o),i.get(20-a)&&t.set(o,s+5),i.get(27-a)&&t.set(s-5,o)}else for(var a=0;a<10;a++){var o=s-5+a+ee.truncDivision(a,5);i.get(a)&&t.set(o,s-7),i.get(a+10)&&t.set(s+7,o),i.get(29-a)&&t.set(o,s+7),i.get(39-a)&&t.set(s-7,o)}},n.generateCheckWords=function(t,e,r){var i,s,a=t.getSize()/r,o=new o5(n.getGF(r)),l=ee.truncDivision(e,r),h=n.bitsToWords(t,r,l);o.encode(h,l-a);var d=e%r,g=new tr;g.appendBits(0,d);try{for(var m=Jit(Array.from(h)),y=m.next();!y.done;y=m.next()){var x=y.value;g.appendBits(x,r)}}catch(b){i={error:b}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),s,a;for(s=0,a=t.getSize()/e;s<a;s++){for(var o=0,l=0;l<e;l++)o|=t.get(s*e+l)?1<<e-l-1:0;i[s]=o}return i},n.getGF=function(t){switch(t){case 4:return jr.AZTEC_PARAM;case 6:return jr.AZTEC_DATA_6;case 8:return jr.AZTEC_DATA_8;case 10:return jr.AZTEC_DATA_10;case 12:return jr.AZTEC_DATA_12;default:throw new kt("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new tr,i=t.getSize(),s=(1<<e)-2,a=0;a<i;a+=e){for(var o=0,l=0;l<e;l++)(a+l>=i||t.get(a+l))&&(o|=1<<e-1-l);(o&s)===s?(r.appendBits(o&s,e),a--):(o&s)===0?(r.appendBits(o|1,e),a--):r.appendBits(o,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();function tst({isOpen:n,onClose:t,onSave:e,editMeal:r,user:i}){const[s,a]=it.useState("Breakfast"),[o,l]=it.useState(new Date),[h,d]=it.useState([""]),[g,m]=it.useState([[{type:"Protein",count:"",serving:"1",total:""}]]),[y,x]=it.useState(!1),[b,E]=it.useState(!1),[T,S]=it.useState(!1),R=it.useRef(null),[k,P]=it.useState(null),[H,M]=it.useState(""),[C,O]=it.useState(new Date().toISOString().split("T")[0]),[L,j]=it.useState(null);it.useEffect(()=>{r&&(gt(),P(null),a(r.mealType),l(new Date(r.timestamp)),d(r.foodItems.map(Dt=>Dt.name)),m(r.foodItems.map(Dt=>Dt.nutrients)),x(!0),S(!1),E(!1))},[r]);const z=["Protein","Fat","Carbohydrate","Sugar","Sugars","Fibre","Fiber","Salt","Caffeine"],U=(Dt="")=>{const Lt=Dt.toLowerCase();return Lt==="sugars"?"Sugar":Lt==="fiber"?"Fibre":Lt==="proteins"?"Protein":Lt==="carbohydrates"?"Carbohydrate":Lt==="saturated fat"?"Fat":Dt},Et=()=>{gt(),P(null),m([[{type:"Protein",count:"",serving:"1",total:""}]]),d([""]),l(new Date),x(!1),S(!1),E(!1),j(null)},wt=Dt=>{gt(),x(Dt==="manual"),S(Dt==="auto"),E(Dt==="scan")},Q=()=>{m([...g,[{type:"Protein",count:"",serving:"1",total:""}]]),d([...h,""])},at=Dt=>{const Lt=[...g];Lt[Dt].push({type:"Protein",count:"",serving:"1",total:""}),m(Lt)},mt=(Dt,Lt)=>{const Ut=[...g];Ut[Dt].splice(Lt,1),m(Ut)},St=g.every(Dt=>Dt.every(Lt=>!Lt.count||parseFloat(Lt.count)===0)),W=(Dt,Lt,Ut,pt)=>{const qt=[...g],Xt=qt[Dt];if(Ut==="serving")Xt.forEach(Jt=>{Jt.serving=pt;const Tr=parseFloat(Jt.count)||0,rn=parseFloat(pt)||1;Jt.total=(Tr*rn).toFixed(2)});else{const Jt=Xt[Lt];Jt[Ut]=pt;const Tr=parseFloat(Jt.count)||0,rn=parseFloat(Jt.serving)||1;Jt.total=(Tr*rn).toFixed(2)}m(qt)},ct=()=>{const Dt=g.map((Ut,pt)=>({name:h[pt]||`Food ${pt+1}`,nutrients:Ut})),Lt={mealType:s,date:o.toISOString().split("T")[0],timestamp:o.toISOString(),foodItems:Dt,kcal:L||nn(Dt)};e(Lt),Et(),t()},gt=()=>{const Dt=R.current;Dt&&Dt.srcObject&&(Dt.srcObject.getTracks().forEach(Lt=>Lt.stop()),Dt.srcObject=null),E(!1)},dt=()=>{const Dt=R.current;if(!Dt||Dt.videoWidth===0){alert("Camera not ready yet. Wait a moment.");return}const Lt=document.createElement("canvas");Lt.width=Dt.videoWidth,Lt.height=Dt.videoHeight;const Ut=Lt.getContext("2d");Ut.drawImage(Dt,0,0);const pt=Ut.getImageData(0,0,Lt.width,Lt.height),qt=pt.data;for(let Xt=0;Xt<qt.length;Xt+=4){const Jt=(qt[Xt]+qt[Xt+1]+qt[Xt+2])/3;qt[Xt]=Jt,qt[Xt+1]=Jt,qt[Xt+2]=Jt}Ut.putImageData(pt,0,0),Tesseract.recognize(Lt,"eng").then(({data:{text:Xt}})=>{const Jt=parseNutritionFromText(Xt);Jt.length>0?(m([Jt]),wt("manual")):alert("No nutritional values detected. Try again or enter manually."),gt()})},bt=async(Dt,Lt)=>{var Ut;try{const Xt=(Ut=(await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Dt)}&search_simple=1&action=process&json=1`)).json()).products)==null?void 0:Ut.find(Xr=>Xr.nutriments&&Xr.nutriments["energy-kcal_100g"]&&Xr.nutriments.proteins_100g);if(!Xt||!Xt.nutriments)throw new Error("No valid nutrition info found.");const Jt=Xt.nutriments,Tr={Protein:Jt.proteins_100g,Fat:Jt.fat_100g,Carbohydrate:Jt.carbohydrates_100g,Sugar:Jt.sugars_100g,Fibre:Jt.fiber_100g,Salt:Jt.salt_100g,Caffeine:Jt.caffeine_100g},rn=Object.entries(Tr).filter(([Xr,ki])=>z.includes(Xr)&&ki!==void 0).map(([Xr,ki])=>({type:Xr,count:parseFloat(ki).toFixed(2),serving:"1",total:parseFloat(ki).toFixed(2)})),Ni=[...g];Ni[Lt]=rn,m(Ni),wt("auto")}catch{alert("⚠️ Could not fetch nutrition info. Try a more specific food name.")}},Bt=async Dt=>{const Lt=Dt.target.files[0];if(!Lt)return;const Ut=new Image;Ut.src=URL.createObjectURL(Lt),Ut.onload=async()=>{const pt=new eit;try{const qt=await pt.decodeFromImageElement(Ut);await Ot(qt.getText())}catch(qt){alert("❌ Could not decode barcode."),console.error(qt)}}},Ot=async Dt=>{try{const Ut=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${Dt}.json`)).json();if(Ut.status===0){alert("❌ Product not found.");return}const pt=Ut.product.nutriments,qt=Ut.product.product_name||"Scanned Product",Xt={Fat:pt.fat_100g,Carbohydrate:pt.carbohydrates_100g,Protein:pt.proteins_100g,Sugar:pt.sugars_100g,Fibre:pt.fiber_100g,Salt:pt.salt_100g,Caffeine:pt.caffeine_100g},Jt=parseFloat(pt["energy-kcal_100g"])||0;j(Jt);const Tr=Object.entries(Xt).filter(([rn,Ni])=>z.includes(rn)&&Ni!==void 0).map(([rn,Ni])=>({type:rn,count:parseFloat(Ni).toFixed(2),serving:"1",total:parseFloat(Ni).toFixed(2)}));d([qt]),m([Tr]),wt("manual")}catch(Lt){alert("⚠️ Nutrition fetch failed."),console.error(Lt)}},nn=Dt=>{let Lt=0;return Dt.forEach(Ut=>{Ut.nutrients.forEach(pt=>{(pt.type.toLowerCase().includes("calorie")||pt.type.toLowerCase().includes("kcal"))&&(Lt+=parseFloat(pt.total||0))})}),Lt};if(!n)return null;if(k===null)return V.jsx("div",{className:"modal-backdrop",children:V.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[V.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),V.jsxs("div",{className:"d-flex flex-column gap-2",children:[V.jsx("button",{className:"btn btn-primary",onClick:()=>P("meal"),children:"Log Meal"}),V.jsx("button",{className:"btn btn-outline-light",onClick:()=>P("weight"),children:"Log Weight"}),V.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{Et(),t()},children:"Cancel"})]})]})});return V.jsxs(V.Fragment,{children:[k===null&&V.jsx("div",{className:"modal-backdrop",children:V.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[V.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),V.jsxs("div",{className:"d-flex flex-column gap-2",children:[V.jsx("button",{className:"btn btn-primary",onClick:()=>P("meal"),children:"➕ Log Meal"}),V.jsx("button",{className:"btn btn-outline-light",onClick:()=>P("weight"),children:"⚖️ Log Weight"}),V.jsx("button",{className:"btn btn-secondary mt-2",onClick:()=>{Et(),t()},children:"Cancel"})]})]})}),k==="meal"&&V.jsx("div",{className:"modal-backdrop",children:V.jsxs("div",{className:"modal-container bg-dark",children:[V.jsxs("div",{className:"modal-header col-md-12 mb-2",style:{display:"flex"},children:[V.jsxs("div",{style:{display:"flex",width:"100%",marginRight:"5%",alignItems:"center"},children:[V.jsx("p",{className:"ModelTitleName",children:"Select Meal"}),V.jsxs("select",{className:"DropDownMeal",value:s,onChange:Dt=>a(Dt.target.value),children:[V.jsx("option",{children:"Breakfast"}),V.jsx("option",{children:"Lunch"}),V.jsx("option",{children:"Dinner"})]})]}),V.jsx("input",{type:"date",className:"form-control",value:o.toISOString().split("T")[0],onChange:Dt=>l(new Date(Dt.target.value)),max:new Date().toISOString().split("T")[0],style:{width:"30%"}})]}),V.jsxs("div",{className:"manual-scan-buttons mb-2",children:[V.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>wt("manual"),children:"Manual Entry"}),V.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>wt("auto"),children:"Auto Fill"}),V.jsxs("label",{className:"btn btn-primary btn-sm",children:["Scan Barcode",V.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:Bt,style:{display:"none"}})]})]}),b&&V.jsxs("div",{className:"scan-box text-center",children:[V.jsx("video",{ref:R,style:{width:"100%",maxHeight:"200px"}}),V.jsx("button",{className:"btn btn-primary mt-2",onClick:dt,children:"Capture"}),V.jsx("button",{className:"btn btn-danger mt-2 ms-2",onClick:gt,children:"Cancel"})]}),y&&pe(),T&&pe(!0),V.jsxs("div",{className:"modal-footer mt-3",children:[V.jsx("button",{className:"btn btn-save btn-primary",onClick:ct,disabled:St,children:"Save"}),V.jsx("button",{className:"btn btn-exit btn-danger",onClick:()=>{Et(),t()},children:"Exit"})]})]})}),k==="weight"&&V.jsx("div",{className:"modal-backdrop",children:V.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[V.jsx(AZ,{user:i}),V.jsx("div",{className:"d-flex justify-content-end",children:V.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{Et(),t()},children:"Close"})})]})})]});function pe(Dt=!1){return V.jsxs("div",{className:"TotalFoodSection",children:[g.map((Lt,Ut)=>V.jsxs("div",{className:"food-section",children:[V.jsxs("div",{className:"FoodNameSection d-flex align-items-center gap-2",children:[V.jsx("textarea",{className:"FoodNameTextArea",value:h[Ut],style:{width:"100%"},onChange:pt=>{const qt=[...h];qt[Ut]=pt.target.value,d(qt)},placeholder:"Enter food name (e.g., boiled egg)"}),Dt&&V.jsx("button",{className:"btn btn-sm btn-info",style:{fontSize:"12px",width:"35%"},onClick:()=>bt(h[Ut],Ut),children:"🔍 Auto-Fill"})]}),V.jsxs("div",{className:"row fw-bold mb-2 text-white",style:{fontSize:"12px",padding:"0 10px"},children:[V.jsx("div",{className:"col",children:"Type"}),V.jsx("div",{className:"col",children:"Count"}),V.jsx("div",{className:"col",children:"Servings"}),V.jsx("div",{className:"col",children:"Total"}),V.jsx("div",{className:"col",children:"Remove"})]}),V.jsx("div",{className:"SplitTable",children:Lt.map((pt,qt)=>V.jsxs("div",{className:"row mb-1",children:[V.jsxs("div",{className:"col",children:[V.jsx("input",{list:`nutrient-options-${Ut}-${qt}`,className:"form-control",value:pt.type,onChange:Xt=>{const Jt=U(Xt.target.value);W(Ut,qt,"type",Jt)}}),V.jsx("datalist",{id:`nutrient-options-${Ut}-${qt}`,children:z.map(Xt=>V.jsx("option",{value:Xt},Xt))})]}),V.jsx("div",{className:"col",children:V.jsx("input",{type:"number",className:"form-control",value:pt.count,onChange:Xt=>W(Ut,qt,"count",Xt.target.value)})}),V.jsx("div",{className:"col",children:V.jsx("select",{className:"form-select",value:pt.serving,onChange:Xt=>W(Ut,qt,"serving",Xt.target.value),children:[...Array(10)].map((Xt,Jt)=>V.jsx("option",{children:Jt+1},Jt+1))})}),V.jsx("div",{className:"col",children:V.jsx("input",{type:"number",className:"form-control",value:pt.total,disabled:!0})}),V.jsx("div",{className:"col text-center",children:V.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>mt(Ut,qt),children:"×"})})]},qt))}),V.jsx("button",{className:"AddItemButton mt-1",onClick:()=>at(Ut),children:"Add Nutrient"})]},Ut)),V.jsx("button",{className:"AddItemButton mt-3",onClick:Q,children:"Add Food Item"})]})}}const h5="/knowurfood/assets/Logo-L9hp3FVR.png";function est({onLoginSuccess:n}){const[t,e]=it.useState("login"),[r,i]=it.useState(1),[s,a]=it.useState(""),[o,l]=it.useState(""),[h,d]=it.useState(""),[g,m]=it.useState(""),[y,x]=it.useState(""),[b,E]=it.useState(2e3),[T,S]=it.useState("Breakfast,Lunch,Dinner"),[R,k]=it.useState("g"),[P,H]=it.useState(""),[M,C]=it.useState(""),[O,L]=it.useState(""),[j,z]=it.useState(""),[U,Et]=it.useState("08:00"),[wt,Q]=it.useState("13:00"),[at,mt]=it.useState("19:00"),[St,W]=it.useState(""),[ct,gt]=it.useState("male"),[dt,bt]=it.useState(""),[Bt,Ot]=it.useState(!1);it.useEffect(()=>{if(P&&M&&O&&j&&St&&ct){const pt=Math.max(1,Math.ceil((new Date(j)-new Date)/864e5)),Xt=(O-P)*7700/pt,Jt=ct==="male"?10*P+6.25*M-5*St+5:10*P+6.25*M-5*St-161,Tr=Math.round(Jt+Xt);isNaN(Tr)||E(Tr)}},[P,M,O,j,St,ct]);const nn=()=>{a(""),l(""),d(""),m(""),x(""),E(2e3),S("Breakfast,Lunch,Dinner"),k("g"),H(""),C(""),L(""),z(""),Et("08:00"),Q("13:00"),mt("19:00"),W(""),gt("male"),bt(""),i(1)},pe=()=>{e(pt=>pt==="login"?"register":"login"),nn()},Dt=()=>{if(r===1&&(!s||!o||!h)){bt("Please complete all fields in Step 1");return}if(r===1&&o!==h){bt("Passwords do not match");return}if(r===2&&(!g||!y||!P||!M||!O||!j||!St||!ct)){bt("Please complete all fields in Step 2");return}bt(""),i(r+1)},Lt=async pt=>{pt.preventDefault(),bt("");try{let qt;t==="register"?qt=await xZ({email:s,password:o,firstName:g,lastName:y,calorieGoal:Number(b),mealOrder:T.split(","),unit:R,currentWeight:parseFloat(P),height:parseFloat(M),goalWeight:parseFloat(O),goalDate:j,breakfastTime:U,lunchTime:wt,dinnerTime:at,age:parseInt(St),gender:ct}):qt=await wZ({email:s,password:o}),n(qt)}catch(qt){bt(qt.message)}},Ut=()=>{switch(r){case 1:return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Email"}),V.jsx("input",{type:"email",className:"form-control",value:s,onChange:pt=>a(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Password"}),V.jsx("input",{type:Bt?"text":"password",className:"form-control",value:o,onChange:pt=>l(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Confirm Password"}),V.jsx("input",{type:Bt?"text":"password",className:"form-control",value:h,onChange:pt=>d(pt.target.value),required:!0})]})]});case 2:return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"First Name"}),V.jsx("input",{type:"text",className:"form-control",value:g,onChange:pt=>m(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Last Name"}),V.jsx("input",{type:"text",className:"form-control",value:y,onChange:pt=>x(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Age"}),V.jsx("input",{type:"number",className:"form-control",value:St,onChange:pt=>W(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Gender"}),V.jsxs("select",{className:"form-control",value:ct,onChange:pt=>gt(pt.target.value),children:[V.jsx("option",{value:"male",children:"Male"}),V.jsx("option",{value:"female",children:"Female"})]})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Current Weight (kg)"}),V.jsx("input",{type:"number",className:"form-control",value:P,onChange:pt=>H(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Height (cm)"}),V.jsx("input",{type:"number",className:"form-control",value:M,onChange:pt=>C(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Goal Weight (kg)"}),V.jsx("input",{type:"number",className:"form-control",value:O,onChange:pt=>L(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Goal Date"}),V.jsx("input",{type:"date",className:"form-control",value:j,onChange:pt=>z(pt.target.value),required:!0})]})]});case 3:return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Calorie Goal"}),V.jsx("input",{type:"number",className:"form-control",value:b,onChange:pt=>E(pt.target.value)})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Meal Order"}),V.jsxs("select",{className:"form-control",value:T,onChange:pt=>S(pt.target.value),children:[V.jsx("option",{value:"Breakfast,Lunch,Dinner",children:"Breakfast → Lunch → Dinner"}),V.jsx("option",{value:"Dinner,Lunch,Breakfast",children:"Dinner → Lunch → Breakfast"})]})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Preferred Unit"}),V.jsxs("select",{className:"form-control",value:R,onChange:pt=>k(pt.target.value),children:[V.jsx("option",{value:"g",children:"Grams"}),V.jsx("option",{value:"mg",children:"Milligrams"}),V.jsx("option",{value:"kcal",children:"Calories"})]})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Breakfast Time"}),V.jsx("input",{type:"time",className:"form-control",value:U,onChange:pt=>Et(pt.target.value)})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Lunch Time"}),V.jsx("input",{type:"time",className:"form-control",value:wt,onChange:pt=>Q(pt.target.value)})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Dinner Time"}),V.jsx("input",{type:"time",className:"form-control",value:at,onChange:pt=>mt(pt.target.value)})]})]});default:return null}};return V.jsxs("div",{className:"auth-container fade-slide-in",children:[V.jsx("div",{className:"text-center",children:V.jsx("img",{src:h5,alt:"KnowUrFood Logo",style:{width:"200px"}})}),V.jsxs("div",{className:"auth-box shadow rounded",children:[V.jsx("h2",{className:"auth-title",children:t==="login"?"LOGIN":"REGISTER"}),V.jsx("form",{onSubmit:pt=>pt.preventDefault(),className:"auth-form",children:t==="login"?V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Email"}),V.jsx("input",{type:"email",className:"form-control",value:s,onChange:pt=>a(pt.target.value),required:!0})]}),V.jsxs("div",{className:"form-row",children:[V.jsx("label",{children:"Password"}),V.jsx("input",{type:Bt?"text":"password",className:"form-control",value:o,onChange:pt=>l(pt.target.value),required:!0})]}),V.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3 mb-2",onClick:Lt,children:"Login"})]}):V.jsxs("div",{className:`fade-step step-${r}`,children:[Ut(),V.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[r>1&&V.jsx("button",{type:"button",className:"btn btn-outline-light",onClick:()=>i(r-1),children:"← Back"}),r<3?V.jsx("button",{type:"button",className:"btn btn-primary ms-auto",onClick:Dt,children:"Next →"}):V.jsx("button",{type:"submit",onClick:Lt,className:"btn btn-success ms-auto",children:"Register"})]})]})}),V.jsxs("p",{className:"text-white text-center mt-3",children:[t==="login"?"Don't have an account?":"Already have an account?"," ",V.jsx("span",{className:"text-link",onClick:pe,children:t==="login"?"Register":"Login"})]}),dt&&V.jsx("p",{className:"text-danger text-center mt-2",children:dt})]})]})}function nst({user:n,meals:t,onLogout:e,clearAllMeals:r}){const[i,s]=it.useState("Breakfast-Lunch-Dinner"),[a,o]=it.useState(!1),[l,h]=it.useState("g"),[d,g]=it.useState(!1),m=n.level||1,x=(n.xp||0)%100,b=100,E=x/b*100,T=n.badges||[];it.useEffect(()=>{var O;n&&(s(((O=n.mealOrder)==null?void 0:O.join("-"))||"Breakfast-Lunch-Dinner"),o(n.darkMode??!1),h(n.unit||"g"))},[n]);const S=async()=>{const O={mealOrder:i.split("-"),darkMode:a,unit:l};await vZ(n.uid,O),alert("✅ Preferences updated in your profile!")},R=(t==null?void 0:t.length)||0,k=[...new Set(t==null?void 0:t.map(O=>O.date))],P=k.length>0?(R/k.length).toFixed(1):0,H=()=>{const O=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),L=document.createElement("a");L.href=URL.createObjectURL(O),L.download="meals.json",L.click()},M=()=>{if(!t||t.length===0){alert("No meals to export.");return}const O=[["Date","Meal Type","Food Name","Fat (g)","Carbs (g)","Protein (g)","Quantity","Unit"]];t.forEach(U=>{U.foodItems.forEach(Et=>{O.push([U.date,U.mealType,Et.name,Et.nutrients.fat,Et.nutrients.carbs,Et.nutrients.protein,Et.quantity,n.unit||"g"])})});const L=O.map(U=>U.join(",")).join(`
`),j=new Blob([L],{type:"text/csv"}),z=document.createElement("a");z.href=URL.createObjectURL(j),z.download="meals.csv",z.click()},C=async()=>{window.confirm("⚠️ Are you sure you want to clear all meal data? This cannot be undone.")&&(g(!0),await r(),g(!1),alert("✅ All meals have been deleted from your account."))};return V.jsxs("div",{className:"home-container",children:[V.jsxs("div",{className:"text-center mb-4",children:[V.jsx("i",{className:"bi bi-person-circle TitleName",style:{fontSize:"3rem"}}),V.jsx("h4",{className:"mt-2 fw-bold TitleName",children:n.firstName}),V.jsx("small",{className:"text-white",children:"Profile"})]}),V.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[V.jsx("h6",{className:"fw-bold",children:"Usage Summary"}),V.jsxs("p",{style:{fontSize:"14px"},children:["📅 Days Tracked: ",k.length]}),V.jsxs("p",{style:{fontSize:"14px"},children:["🍽️ Meals Logged: ",R]}),V.jsxs("p",{style:{fontSize:"14px"},children:["📊 Avg Meals/Day: ",P]})]}),V.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[V.jsx("h6",{className:"fw-bold mb-2",children:"Your Rewards"}),V.jsxs("p",{className:"mb-1",children:["🎮 Level ",m]}),V.jsx("div",{className:"progress mb-2",style:{height:"6px",background:"#444"},title:`${x}/${b} XP`,children:V.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${E}%`,backgroundColor:"#28a745"},"aria-valuenow":x,"aria-valuemin":0,"aria-valuemax":b})}),V.jsx("p",{className:"mb-1",children:"🏅 Badges Unlocked:"}),T.length===0?V.jsx("p",{className:"text-muted small",children:"No badges yet — keep logging meals!"}):V.jsx("div",{className:"d-flex flex-wrap gap-2",children:T.map((O,L)=>V.jsx("span",{className:`badge rounded-pill ${O.includes("Goal")?"bg-success":"bg-info"} text-dark p-2`,title:O,children:O},L))})]}),V.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[V.jsx("h6",{className:"fw-bold",children:"Preferences"}),V.jsxs("div",{className:"mb-2",children:[V.jsx("label",{className:"form-label small",children:"Meal Order"}),V.jsxs("select",{className:"form-select form-select-sm",value:i,onChange:O=>s(O.target.value),children:[V.jsx("option",{children:"Breakfast-Lunch-Dinner"}),V.jsx("option",{children:"Lunch-Dinner-Breakfast"}),V.jsx("option",{children:"Dinner-Breakfast-Lunch"})]})]}),V.jsxs("div",{className:"mb-2",children:[V.jsx("label",{className:"form-label small",children:"Units"}),V.jsxs("select",{className:"form-select form-select-sm",value:l,onChange:O=>h(O.target.value),children:[V.jsx("option",{children:"g"}),V.jsx("option",{children:"mg"}),V.jsx("option",{children:"kcal"})]})]}),V.jsxs("button",{className:"btn btn-sm btn-primary mt-2",onClick:S,children:[V.jsx("i",{className:"bi bi-save me-1"})," Save Preferences"]})]}),V.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[V.jsx("h6",{className:"fw-bold mb-3",children:"Data Management"}),V.jsxs("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:H,children:[V.jsx("i",{className:"bi bi-download me-1"})," Export Data (.json)"]}),V.jsxs("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:M,children:[V.jsx("i",{className:"bi bi-file-earmark-spreadsheet me-1"})," Export Data (.csv)"]}),V.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:C,disabled:d,children:d?"Clearing...":V.jsxs(V.Fragment,{children:[V.jsx("i",{className:"bi bi-trash me-1"})," Clear All Meals"]})})]}),V.jsxs("div",{className:"card bg-dark border-0 p-3 shadow-sm text-white",children:[V.jsx("h6",{className:"fw-bold",children:"Account"}),V.jsxs("button",{className:"btn btn-danger w-100 mt-2",onClick:e,children:[V.jsx("i",{className:"bi bi-box-arrow-right me-2"})," Logout"]})]})]})}function rst({meals:n,user:t}){const[e,r]=it.useState({}),[i,s]=it.useState({}),[a,o]=it.useState(!1),l=new Date;l.setDate(l.getDate()-6);const h={Protein:50*7,Carbohydrate:260*7,Fat:70*7,"Carbs as Sugar":30*7,Fibre:30*7,Salt:6*7},d=(y=0)=>{const x=new Date,b=new Date(x.setDate(x.getDate()-y)),E=new Date(b);E.setDate(b.getDate()-6);const T=[];for(let S=0;S<7;S++){const R=new Date(E);R.setDate(E.getDate()+S),T.push(R.toISOString().split("T")[0])}return T},g=y=>{const x={};let b=0;y.forEach(T=>{const S=n.filter(R=>R.date===T);S.length>0&&(b++,S.forEach(R=>{R.foodItems.forEach(k=>{k.nutrients.forEach(P=>{const H=parseFloat(P.total)||0;x[P.type]=(x[P.type]||0)+H})})}))});const E={};return Object.keys(x).forEach(T=>{E[T]=x[T]/b}),E};it.useEffect(()=>{const y=d(0),x=d(7);r(g(y)),s(g(x))},[n]),it.useEffect(()=>{(async()=>{if(!(t!=null&&t.goalDate)||!(t!=null&&t.goalWeight)||!(t!=null&&t.currentWeight))return;const x=await A0(t.uid);if(x.length===0)return;const b=new Date(t.createdAt||x[0].date),E=new Date,T=new Date(t.goalDate),S=Math.max(1,(T-b)/864e5),R=Math.max(1,(E-b)/864e5),k=t.goalWeight-t.currentWeight,P=k/S*R,H=t.currentWeight+P,M=x.reduce((C,O)=>C.date>O.date?C:O).weight;(k>0&&M<H-.5||k<0&&M>H+.5)&&o(!0)})()},[t]);const m=[];return Object.keys(h).forEach(y=>{const x=e[y]||0,b=(e[y]||0)-(i[y]||0);x<.6*h[y]?m.push(`⬇️ Your ${y} intake is quite low this week. Consider improving it.`):x>1.2*h[y]?m.push(`⚠️ You're exceeding recommended ${y} levels.`):b>5?m.push(`🔺 ${y} increased significantly this week.`):b<-5&&m.push(`🔻 ${y} dropped since last week.`)}),V.jsxs("div",{className:"home-container",children:[V.jsx("p",{className:"TitleName",children:"Suggestions"}),a&&V.jsx("div",{className:"CalBarCharSection text-white fw-bold small mb-2 bg-dark",children:"⚠️ You're behind your weight goal progress. Try adjusting your intake!"}),V.jsxs("div",{className:"CalBarCharSection bg-dark mb-2",children:[V.jsx("p",{className:"SubTitleName mb-2",children:"Weekly Calorie Trend"}),V.jsx(nO,{meals:n,startOfWeek:l})]}),V.jsxs("div",{className:"NutritionProgressSection mb-2 bg-dark list-group",style:{padding:"5%"},children:[V.jsx("p",{className:"SubTitleName",children:"This Week's Nutrient Averages"}),Object.keys(h).map(y=>{const x=e[y]||0,b=h[y],E=(e[y]||0)-(i[y]||0),T=Math.min(x/b*100,150),S=x>b,R=E>1?"▲":E<-1?"▼":"•",k=E?`${R} ${Math.abs(E).toFixed(1)}g from last week`:"";return V.jsxs("div",{className:"mb-3",children:[V.jsxs("div",{className:"d-flex justify-content-between small",children:[V.jsx("span",{className:"text-white",children:y}),V.jsxs("span",{className:"text-white",children:[x.toFixed(1)," / ",b,"g"]})]}),V.jsx("div",{className:"progress",style:{height:"8px"},children:V.jsx("div",{className:`progress-bar ${S?"bg-danger":"bg-success"} progress-bar-striped progress-bar-animated`,style:{width:`${T}%`}})}),V.jsx("div",{className:"small text-white",children:k})]},y)})]}),V.jsx("div",{className:"SuggestionsBox",children:m.length>0?V.jsxs("ul",{className:"list-group bg-dark",style:{padding:"5%"},children:[V.jsx("p",{className:"SubTitleName",children:"Suggestions"}),m.map((y,x)=>V.jsx("li",{className:"list-group-item small bg-dark text-white border-0 ps-0",children:y},x))]}):V.jsx("p",{className:"text-success",children:"✅ You're on track this week!"})})]})}function ist(){const[n,t]=it.useState(null),[e,r]=it.useState([]),[i,s]=it.useState("dashboard"),[a,o]=it.useState(!1),[l,h]=it.useState(null),[d,g]=it.useState(!1),[m,y]=it.useState(null),[x,b]=it.useState(""),[E,T]=it.useState(!1),[S,R]=it.useState(!0),k=it.useRef(!1);it.useEffect(()=>{const O=async()=>{const L=await ER();if(L){t(L);const j=await sx(L.uid);r(j)}};k.current?R(!1):setTimeout(()=>{R(!1),k.current=!0},1500),O()},[]),it.useEffect(()=>{!("Notification"in window)||!n||Notification.requestPermission().then(O=>{if(O!=="granted")return;const L=setInterval(()=>{const z=new Date().toTimeString().substring(0,5),{breakfastTime:U,lunchTime:Et,dinnerTime:wt}=n,Q={[U]:"🍳 Time for breakfast! Log your meal!",[Et]:"🥗 Time for lunch! Don’t forget to log it!",[wt]:"🍝 Time for dinner! Keep tracking!"};Q[z]&&new Notification("KnowUrFood Reminder",{body:Q[z],icon:"/vite.svg"})},6e4);return()=>clearInterval(L)})},[n]);const P=async O=>{t(O);const L=await sx(O.uid);r(L)},H=async O=>{if(!n)return;const L={...O,userId:n.uid};if(l){await pZ({...L,id:l.id},n.uid);const j=e.map(z=>z.id===l.id?{...L,id:l.id}:z);r(j),h(null)}else{await gZ(L,n.uid),b("+10 XP! 🎉"),T(!0),setTimeout(()=>T(!1),3e3);const j=await sx(n.uid),z=await ER();r(j),t(z)}o(!1)},M=async O=>{await mZ(O,n.uid);const L=e.filter(j=>j.id!==O);r(L)},C=async()=>{await bZ(),t(null),r([])};return n?S?V.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:V.jsx("img",{src:h5,alt:"Logo",style:{width:"150px",height:"150px"}})}):V.jsxs(V.Fragment,{children:[i==="dashboard"&&V.jsx(fet,{user:n,meals:e,onEditMeal:O=>{h(O),o(!0)},onDeleteMeal:O=>{y(O),g(!0)}}),i==="history"&&V.jsx(det,{user:n,meals:e,onEditMeal:O=>{h(O),o(!0)},onDeleteMeal:O=>{y(O),g(!0)}}),i==="suggestions"&&V.jsx(rst,{meals:e,user:n}),i==="profile"&&V.jsx(nst,{user:n,meals:e,onLogout:C,clearAllMeals:async()=>{await yZ(n.uid),r([])}}),V.jsx(Kk,{onAddClick:()=>o(!0),onLogout:C,onTabChange:O=>s(O),currentTab:i}),V.jsx(tst,{isOpen:a,onClose:()=>{o(!1),h(null)},onSave:H,user:n,editMeal:l}),d&&V.jsx("div",{className:"modal-backdrop",children:V.jsxs("div",{className:"modal-container p-4 text-center",children:[V.jsx("p",{className:"text-white fw-bold",children:"Are you sure you want to delete this meal?"}),V.jsxs("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[V.jsx("button",{className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),V.jsx("button",{className:"btn btn-danger",onClick:async()=>{m!==null&&(await M(m),g(!1),y(null))},children:"Delete"})]})]})}),E&&V.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",style:{zIndex:9999},children:V.jsx("div",{className:"toast show bg-success text-white",children:V.jsx("div",{className:"toast-body fw-bold",children:x})})})]}):V.jsx(est,{onLoginSuccess:P})}Xk.createRoot(document.getElementById("root")).render(V.jsx(it.StrictMode,{children:V.jsx(ist,{})}));serviceWorkerRegistration.register();

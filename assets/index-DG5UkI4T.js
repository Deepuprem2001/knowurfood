var S4=Object.defineProperty;var x4=(n,t,e)=>t in n?S4(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var rt=(n,t,e)=>x4(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function cM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Av={exports:{}},Rh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA;function A4(){if(zA)return Rh;zA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:n,type:i,key:o,ref:s!==void 0?s:null,props:r}}return Rh.Fragment=t,Rh.jsx=e,Rh.jsxs=e,Rh}var HA;function I4(){return HA||(HA=1,Av.exports=A4()),Av.exports}var C=I4(),Iv={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qA;function R4(){if(qA)return Ut;qA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function _(P){return P===null||typeof P!="object"?null:(P=y&&P[y]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function A(P,G,st){this.props=P,this.context=G,this.refs=x,this.updater=st||b}A.prototype.isReactComponent={},A.prototype.setState=function(P,G){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,G,"setState")},A.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function M(){}M.prototype=A.prototype;function N(P,G,st){this.props=P,this.context=G,this.refs=x,this.updater=st||b}var L=N.prototype=new M;L.constructor=N,w(L,A.prototype),L.isPureReactComponent=!0;var H=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function O(P,G,st,W,lt,mt){return st=mt.ref,{$$typeof:n,type:P,key:G,ref:st!==void 0?st:null,props:mt}}function I(P,G){return O(P.type,G,void 0,void 0,void 0,P.props)}function R(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function V(P){var G={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(st){return G[st]})}var j=/\/+/g;function U(P,G){return typeof P=="object"&&P!==null&&P.key!=null?V(""+P.key):G.toString(36)}function B(){}function At(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(B,B):(P.status="pending",P.then(function(G){P.status==="pending"&&(P.status="fulfilled",P.value=G)},function(G){P.status==="pending"&&(P.status="rejected",P.reason=G)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function St(P,G,st,W,lt){var mt=typeof P;(mt==="undefined"||mt==="boolean")&&(P=null);var gt=!1;if(P===null)gt=!0;else switch(mt){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(P.$$typeof){case n:case t:gt=!0;break;case m:return gt=P._init,St(gt(P._payload),G,st,W,lt)}}if(gt)return lt=lt(P),gt=W===""?"."+U(P,0):W,H(lt)?(st="",gt!=null&&(st=gt.replace(j,"$&/")+"/"),St(lt,G,st,"",function(pt){return pt})):lt!=null&&(R(lt)&&(lt=I(lt,st+(lt.key==null||P&&P.key===lt.key?"":(""+lt.key).replace(j,"$&/")+"/")+gt)),G.push(lt)),1;gt=0;var Ct=W===""?".":W+":";if(H(P))for(var Tt=0;Tt<P.length;Tt++)W=P[Tt],mt=Ct+U(W,Tt),gt+=St(W,G,st,mt,lt);else if(Tt=_(P),typeof Tt=="function")for(P=Tt.call(P),Tt=0;!(W=P.next()).done;)W=W.value,mt=Ct+U(W,Tt++),gt+=St(W,G,st,mt,lt);else if(mt==="object"){if(typeof P.then=="function")return St(At(P),G,st,W,lt);throw G=String(P),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return gt}function Q(P,G,st){if(P==null)return P;var W=[],lt=0;return St(P,W,"","",function(mt){return G.call(st,mt,lt++)}),W}function at(P){if(P._status===-1){var G=P._result;G=G(),G.then(function(st){(P._status===0||P._status===-1)&&(P._status=1,P._result=st)},function(st){(P._status===0||P._status===-1)&&(P._status=2,P._result=st)}),P._status===-1&&(P._status=0,P._result=G)}if(P._status===1)return P._result.default;throw P._result}var yt=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function tt(){}return Ut.Children={map:Q,forEach:function(P,G,st){Q(P,function(){G.apply(this,arguments)},st)},count:function(P){var G=0;return Q(P,function(){G++}),G},toArray:function(P){return Q(P,function(G){return G})||[]},only:function(P){if(!R(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ut.Component=A,Ut.Fragment=e,Ut.Profiler=s,Ut.PureComponent=N,Ut.StrictMode=i,Ut.Suspense=h,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(P){return F.H.useMemoCache(P)}},Ut.cache=function(P){return function(){return P.apply(null,arguments)}},Ut.cloneElement=function(P,G,st){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var W=w({},P.props),lt=P.key,mt=void 0;if(G!=null)for(gt in G.ref!==void 0&&(mt=void 0),G.key!==void 0&&(lt=""+G.key),G)!K.call(G,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&G.ref===void 0||(W[gt]=G[gt]);var gt=arguments.length-2;if(gt===1)W.children=st;else if(1<gt){for(var Ct=Array(gt),Tt=0;Tt<gt;Tt++)Ct[Tt]=arguments[Tt+2];W.children=Ct}return O(P.type,lt,void 0,void 0,mt,W)},Ut.createContext=function(P){return P={$$typeof:o,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:r,_context:P},P},Ut.createElement=function(P,G,st){var W,lt={},mt=null;if(G!=null)for(W in G.key!==void 0&&(mt=""+G.key),G)K.call(G,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(lt[W]=G[W]);var gt=arguments.length-2;if(gt===1)lt.children=st;else if(1<gt){for(var Ct=Array(gt),Tt=0;Tt<gt;Tt++)Ct[Tt]=arguments[Tt+2];lt.children=Ct}if(P&&P.defaultProps)for(W in gt=P.defaultProps,gt)lt[W]===void 0&&(lt[W]=gt[W]);return O(P,mt,void 0,void 0,null,lt)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(P){return{$$typeof:c,render:P}},Ut.isValidElement=R,Ut.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:at}},Ut.memo=function(P,G){return{$$typeof:f,type:P,compare:G===void 0?null:G}},Ut.startTransition=function(P){var G=F.T,st={};F.T=st;try{var W=P(),lt=F.S;lt!==null&&lt(st,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(tt,yt)}catch(mt){yt(mt)}finally{F.T=G}},Ut.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Ut.use=function(P){return F.H.use(P)},Ut.useActionState=function(P,G,st){return F.H.useActionState(P,G,st)},Ut.useCallback=function(P,G){return F.H.useCallback(P,G)},Ut.useContext=function(P){return F.H.useContext(P)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(P,G){return F.H.useDeferredValue(P,G)},Ut.useEffect=function(P,G,st){var W=F.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(P,G)},Ut.useId=function(){return F.H.useId()},Ut.useImperativeHandle=function(P,G,st){return F.H.useImperativeHandle(P,G,st)},Ut.useInsertionEffect=function(P,G){return F.H.useInsertionEffect(P,G)},Ut.useLayoutEffect=function(P,G){return F.H.useLayoutEffect(P,G)},Ut.useMemo=function(P,G){return F.H.useMemo(P,G)},Ut.useOptimistic=function(P,G){return F.H.useOptimistic(P,G)},Ut.useReducer=function(P,G,st){return F.H.useReducer(P,G,st)},Ut.useRef=function(P){return F.H.useRef(P)},Ut.useState=function(P){return F.H.useState(P)},Ut.useSyncExternalStore=function(P,G,st){return F.H.useSyncExternalStore(P,G,st)},Ut.useTransition=function(){return F.H.useTransition()},Ut.version="19.1.0",Ut}var GA;function mT(){return GA||(GA=1,Iv.exports=R4()),Iv.exports}var ot=mT();const gT=cM(ot);var Rv={exports:{}},Dh={},Dv={exports:{}},Cv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA;function D4(){return WA||(WA=1,function(n){function t(Q,at){var yt=Q.length;Q.push(at);t:for(;0<yt;){var tt=yt-1>>>1,P=Q[tt];if(0<s(P,at))Q[tt]=at,Q[yt]=P,yt=tt;else break t}}function e(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var at=Q[0],yt=Q.pop();if(yt!==at){Q[0]=yt;t:for(var tt=0,P=Q.length,G=P>>>1;tt<G;){var st=2*(tt+1)-1,W=Q[st],lt=st+1,mt=Q[lt];if(0>s(W,yt))lt<P&&0>s(mt,W)?(Q[tt]=mt,Q[lt]=yt,tt=lt):(Q[tt]=W,Q[st]=yt,tt=st);else if(lt<P&&0>s(mt,yt))Q[tt]=mt,Q[lt]=yt,tt=lt;else break t}}return at}function s(Q,at){var yt=Q.sortIndex-at.sortIndex;return yt!==0?yt:Q.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var h=[],f=[],m=1,y=null,_=3,b=!1,w=!1,x=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function H(Q){for(var at=e(f);at!==null;){if(at.callback===null)i(f);else if(at.startTime<=Q)i(f),at.sortIndex=at.expirationTime,t(h,at);else break;at=e(f)}}function F(Q){if(x=!1,H(Q),!w)if(e(h)!==null)w=!0,K||(K=!0,U());else{var at=e(f);at!==null&&St(F,at.startTime-Q)}}var K=!1,O=-1,I=5,R=-1;function V(){return A?!0:!(n.unstable_now()-R<I)}function j(){if(A=!1,K){var Q=n.unstable_now();R=Q;var at=!0;try{t:{w=!1,x&&(x=!1,N(O),O=-1),b=!0;var yt=_;try{e:{for(H(Q),y=e(h);y!==null&&!(y.expirationTime>Q&&V());){var tt=y.callback;if(typeof tt=="function"){y.callback=null,_=y.priorityLevel;var P=tt(y.expirationTime<=Q);if(Q=n.unstable_now(),typeof P=="function"){y.callback=P,H(Q),at=!0;break e}y===e(h)&&i(h),H(Q)}else i(h);y=e(h)}if(y!==null)at=!0;else{var G=e(f);G!==null&&St(F,G.startTime-Q),at=!1}}break t}finally{y=null,_=yt,b=!1}at=void 0}}finally{at?U():K=!1}}}var U;if(typeof L=="function")U=function(){L(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,At=B.port2;B.port1.onmessage=j,U=function(){At.postMessage(null)}}else U=function(){M(j,0)};function St(Q,at){O=M(function(){Q(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Q){switch(_){case 1:case 2:case 3:var at=3;break;default:at=_}var yt=_;_=at;try{return Q()}finally{_=yt}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(Q,at){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var yt=_;_=Q;try{return at()}finally{_=yt}},n.unstable_scheduleCallback=function(Q,at,yt){var tt=n.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?tt+yt:tt):yt=tt,Q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=yt+P,Q={id:m++,callback:at,priorityLevel:Q,startTime:yt,expirationTime:P,sortIndex:-1},yt>tt?(Q.sortIndex=yt,t(f,Q),e(h)===null&&Q===e(f)&&(x?(N(O),O=-1):x=!0,St(F,yt-tt))):(Q.sortIndex=P,t(h,Q),w||b||(w=!0,K||(K=!0,U()))),Q},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Q){var at=_;return function(){var yt=_;_=at;try{return Q.apply(this,arguments)}finally{_=yt}}}}(Cv)),Cv}var YA;function C4(){return YA||(YA=1,Dv.exports=D4()),Dv.exports}var Mv={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KA;function M4(){if(KA)return Mn;KA=1;var n=mT();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(h,f,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:h,containerInfo:f,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Mn.createPortal=function(h,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return r(h,f,null,m)},Mn.flushSync=function(h){var f=o.T,m=i.p;try{if(o.T=null,i.p=2,h)return h()}finally{o.T=f,i.p=m,i.d.f()}},Mn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Mn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Mn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):m==="script"&&i.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Mn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Mn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin);i.d.L(h,m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Mn.preloadModule=function(h,f){if(typeof h=="string")if(f){var m=c(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Mn.requestFormReset=function(h){i.d.r(h)},Mn.unstable_batchedUpdates=function(h,f){return h(f)},Mn.useFormState=function(h,f,m){return o.H.useFormState(h,f,m)},Mn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Mn.version="19.1.0",Mn}var $A;function P4(){if($A)return Mv.exports;$A=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Mv.exports=M4(),Mv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA;function k4(){if(XA)return Dh;XA=1;var n=C4(),t=mT(),e=P4();function i(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var l=a,u=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(u=l.return),a=l.return;while(a)}return l.tag===3?u:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(r(a)!==a)throw Error(i(188))}function h(a){var l=a.alternate;if(!l){if(l=r(a),l===null)throw Error(i(188));return l!==a?null:a}for(var u=a,d=l;;){var p=u.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){u=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===u)return c(p),a;if(v===d)return c(p),l;v=v.sibling}throw Error(i(188))}if(u.return!==d.return)u=p,d=v;else{for(var S=!1,D=p.child;D;){if(D===u){S=!0,u=p,d=v;break}if(D===d){S=!0,d=p,u=v;break}D=D.sibling}if(!S){for(D=v.child;D;){if(D===u){S=!0,u=v,d=p;break}if(D===d){S=!0,d=v,u=p;break}D=D.sibling}if(!S)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?a:l}function f(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=f(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),L=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var B=Symbol.for("react.client.reference");function At(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===B?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case A:return"Profiler";case x:return"StrictMode";case F:return"Suspense";case K:return"SuspenseList";case R:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case L:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case H:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return l=a.displayName||null,l!==null?l:At(a.type)||"Memo";case I:l=a._payload,a=a._init;try{return At(a(l))}catch{}}return null}var St=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},tt=[],P=-1;function G(a){return{current:a}}function st(a){0>P||(a.current=tt[P],tt[P]=null,P--)}function W(a,l){P++,tt[P]=a.current,a.current=l}var lt=G(null),mt=G(null),gt=G(null),Ct=G(null);function Tt(a,l){switch(W(gt,l),W(mt,a),W(lt,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?pA(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=pA(l),a=yA(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}st(lt),W(lt,a)}function pt(){st(lt),st(mt),st(gt)}function Pt(a){a.memoizedState!==null&&W(Ct,a);var l=lt.current,u=yA(l,a.type);l!==u&&(W(mt,a),W(lt,u))}function Ft(a){mt.current===a&&(st(lt),st(mt)),Ct.current===a&&(st(Ct),Eh._currentValue=yt)}var wt=Object.prototype.hasOwnProperty,ve=n.unstable_scheduleCallback,Xe=n.unstable_cancelCallback,Ir=n.unstable_shouldYield,Bi=n.unstable_requestPaint,Wn=n.unstable_now,Ay=n.unstable_getCurrentPriorityLevel,Tu=n.unstable_ImmediatePriority,bl=n.unstable_UserBlockingPriority,za=n.unstable_NormalPriority,Iy=n.unstable_LowPriority,Tl=n.unstable_IdlePriority,wu=n.log,Ad=n.unstable_setDisableYieldValue,ke=null,oe=null;function ii(a){if(typeof wu=="function"&&Ad(a),oe&&typeof oe.setStrictMode=="function")try{oe.setStrictMode(ke,a)}catch{}}var Dn=Math.clz32?Math.clz32:Ha,Id=Math.log,Ry=Math.LN2;function Ha(a){return a>>>=0,a===0?32:31-(Id(a)/Ry|0)|0}var qa=256,Ga=4194304;function Fi(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function wl(a,l,u){var d=a.pendingLanes;if(d===0)return 0;var p=0,v=a.suspendedLanes,S=a.pingedLanes;a=a.warmLanes;var D=d&134217727;return D!==0?(d=D&~v,d!==0?p=Fi(d):(S&=D,S!==0?p=Fi(S):u||(u=D&~a,u!==0&&(p=Fi(u))))):(D=d&~v,D!==0?p=Fi(D):S!==0?p=Fi(S):u||(u=d&~a,u!==0&&(p=Fi(u)))),p===0?0:l!==0&&l!==p&&(l&v)===0&&(v=p&-p,u=l&-l,v>=u||v===32&&(u&4194048)!==0)?l:p}function Wa(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function Eu(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Su(){var a=qa;return qa<<=1,(qa&4194048)===0&&(qa=256),a}function xu(){var a=Ga;return Ga<<=1,(Ga&62914560)===0&&(Ga=4194304),a}function js(a){for(var l=[],u=0;31>u;u++)l.push(a);return l}function Bs(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Au(a,l,u,d,p,v){var S=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var D=a.entanglements,z=a.expirationTimes,J=a.hiddenUpdates;for(u=S&~u;0<u;){var ct=31-Dn(u),ft=1<<ct;D[ct]=0,z[ct]=-1;var et=J[ct];if(et!==null)for(J[ct]=null,ct=0;ct<et.length;ct++){var nt=et[ct];nt!==null&&(nt.lane&=-536870913)}u&=~ft}d!==0&&ts(a,d,0),v!==0&&p===0&&a.tag!==0&&(a.suspendedLanes|=v&~(S&~l))}function ts(a,l,u){a.pendingLanes|=l,a.suspendedLanes&=~l;var d=31-Dn(l);a.entangledLanes|=l,a.entanglements[d]=a.entanglements[d]|1073741824|u&4194090}function Iu(a,l){var u=a.entangledLanes|=l;for(a=a.entanglements;u;){var d=31-Dn(u),p=1<<d;p&l|a[d]&l&&(a[d]|=l),u&=~p}}function Rr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function El(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Dr(){var a=at.p;return a!==0?a:(a=window.event,a===void 0?32:VA(a.type))}function Rd(a,l){var u=at.p;try{return at.p=a,l()}finally{at.p=u}}var xe=Math.random().toString(36).slice(2),an="__reactFiber$"+xe,Qe="__reactProps$"+xe,vi="__reactContainer$"+xe,Ru="__reactEvents$"+xe,Dy="__reactListeners$"+xe,Cr="__reactHandles$"+xe,Dd="__reactResources$"+xe,Ya="__reactMarker$"+xe;function Mr(a){delete a[an],delete a[Qe],delete a[Ru],delete a[Dy],delete a[Cr]}function Fs(a){var l=a[an];if(l)return l;for(var u=a.parentNode;u;){if(l=u[vi]||u[an]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(a=TA(a);a!==null;){if(u=a[an])return u;a=TA(a)}return l}a=u,u=a.parentNode}return null}function es(a){if(a=a[an]||a[vi]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function ns(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(i(33))}function Fn(a){var l=a[Dd];return l||(l=a[Dd]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ue(a){a[Ya]=!0}var Du=new Set,Sl={};function Ui(a,l){Us(a,l),Us(a+"Capture",l)}function Us(a,l){for(Sl[a]=l,a=0;a<l.length;a++)Du.add(l[a])}var Cd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Md={},Ka={};function Pd(a){return wt.call(Ka,a)?!0:wt.call(Md,a)?!1:Cd.test(a)?Ka[a]=!0:(Md[a]=!0,!1)}function Pr(a,l,u){if(Pd(l))if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+u)}}function is(a,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+u)}}function wn(a,l,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(l,u,""+d)}}var $a,kd;function zs(a){if($a===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);$a=l&&l[1]||"",kd=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$a+a+kd}var xl=!1;function Al(a,l){if(!a||xl)return"";xl=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(nt){var et=nt}Reflect.construct(a,[],ft)}else{try{ft.call()}catch(nt){et=nt}a.call(ft.prototype)}}else{try{throw Error()}catch(nt){et=nt}(ft=a())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(nt){if(nt&&et&&typeof nt.stack=="string")return[nt.stack,et.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),S=v[0],D=v[1];if(S&&D){var z=S.split(`
`),J=D.split(`
`);for(p=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;if(d===z.length||p===J.length)for(d=z.length-1,p=J.length-1;1<=d&&0<=p&&z[d]!==J[p];)p--;for(;1<=d&&0<=p;d--,p--)if(z[d]!==J[p]){if(d!==1||p!==1)do if(d--,p--,0>p||z[d]!==J[p]){var ct=`
`+z[d].replace(" at new "," at ");return a.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",a.displayName)),ct}while(1<=d&&0<=p);break}}}finally{xl=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?zs(u):""}function Cu(a){switch(a.tag){case 26:case 27:case 5:return zs(a.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 15:return Al(a.type,!1);case 11:return Al(a.type.render,!1);case 1:return Al(a.type,!0);case 31:return zs("Activity");default:return""}}function Il(a){try{var l="";do l+=Cu(a),a=a.return;while(a);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Un(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Mu(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Cy(a){var l=Mu(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),d=""+a[l];if(!a.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,v=u.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return p.call(this)},set:function(S){d=""+S,v.call(this,S)}}),Object.defineProperty(a,l,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Rl(a){a._valueTracker||(a._valueTracker=Cy(a))}function Pu(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var u=l.getValue(),d="";return a&&(d=Mu(a)?a.checked?"true":"false":a.value),a=d,a!==u?(l.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var My=/[\n"\\]/g;function Ze(a){return a.replace(My,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function si(a,l,u,d,p,v,S,D){a.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?a.type=S:a.removeAttribute("type"),l!=null?S==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Un(l)):a.value!==""+Un(l)&&(a.value=""+Un(l)):S!=="submit"&&S!=="reset"||a.removeAttribute("value"),l!=null?kr(a,S,Un(l)):u!=null?kr(a,S,Un(u)):d!=null&&a.removeAttribute("value"),p==null&&v!=null&&(a.defaultChecked=!!v),p!=null&&(a.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+Un(D):a.removeAttribute("name")}function Qa(a,l,u,d,p,v,S,D){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(a.type=v),l!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||l!=null))return;u=u!=null?""+Un(u):"",l=l!=null?""+Un(l):u,D||l===a.value||(a.value=l),a.defaultValue=l}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=D?a.checked:!!d,a.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.name=S)}function kr(a,l,u){l==="number"&&Xa(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Hs(a,l,u,d){if(a=a.options,l){l={};for(var p=0;p<u.length;p++)l["$"+u[p]]=!0;for(u=0;u<a.length;u++)p=l.hasOwnProperty("$"+a[u].value),a[u].selected!==p&&(a[u].selected=p),p&&d&&(a[u].defaultSelected=!0)}else{for(u=""+Un(u),l=null,p=0;p<a.length;p++){if(a[p].value===u){a[p].selected=!0,d&&(a[p].defaultSelected=!0);return}l!==null||a[p].disabled||(l=a[p])}l!==null&&(l.selected=!0)}}function me(a,l,u){if(l!=null&&(l=""+Un(l),l!==a.value&&(a.value=l),u==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=u!=null?""+Un(u):""}function Za(a,l,u,d){if(l==null){if(d!=null){if(u!=null)throw Error(i(92));if(St(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),l=u}u=Un(l),a.defaultValue=u,d=a.textContent,d===u&&d!==""&&d!==null&&(a.value=d)}function bi(a,l){if(l){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=l;return}}a.textContent=l}var Ja=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Od(a,l,u){var d=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":d?a.setProperty(l,u):typeof u!="number"||u===0||Ja.has(l)?l==="float"?a.cssFloat=u:a[l]=(""+u).trim():a[l]=u+"px"}function ku(a,l,u){if(l!=null&&typeof l!="object")throw Error(i(62));if(a=a.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var p in l)d=l[p],l.hasOwnProperty(p)&&u[p]!==d&&Od(a,p,d)}else for(var v in l)l.hasOwnProperty(v)&&Od(a,v,l[v])}function Ou(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Py=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ky=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dl(a){return ky.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var qs=null;function Ti(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Gs=null,Ws=null;function Nu(a){var l=es(a);if(l&&(a=l.stateNode)){var u=a[Qe]||null;t:switch(a=l.stateNode,l.type){case"input":if(si(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ze(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var d=u[l];if(d!==a&&d.form===a.form){var p=d[Qe]||null;if(!p)throw Error(i(90));si(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(l=0;l<u.length;l++)d=u[l],d.form===a.form&&Pu(d)}break t;case"textarea":me(a,u.value,u.defaultValue);break t;case"select":l=u.value,l!=null&&Hs(a,!!u.multiple,l,!1)}}}var ss=!1;function Nd(a,l,u){if(ss)return a(l,u);ss=!0;try{var d=a(l);return d}finally{if(ss=!1,(Gs!==null||Ws!==null)&&(Rm(),Gs&&(l=Gs,a=Ws,Ws=Gs=null,Nu(l),a)))for(l=0;l<a.length;l++)Nu(a[l])}}function to(a,l){var u=a.stateNode;if(u===null)return null;var d=u[Qe]||null;if(d===null)return null;u=d[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(i(231,l,typeof u));return u}var zi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(zi)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){wi=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{wi=!1}var rs=null,Or=null,Ys=null;function Vu(){if(Ys)return Ys;var a,l=Or,u=l.length,d,p="value"in rs?rs.value:rs.textContent,v=p.length;for(a=0;a<u&&l[a]===p[a];a++);var S=u-a;for(d=1;d<=S&&l[u-d]===p[v-d];d++);return Ys=p.slice(a,1<d?1-d:void 0)}function as(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function os(){return!0}function Lu(){return!1}function mn(a){function l(u,d,p,v,S){this._reactName=u,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(u=a[D],this[D]=u?u(v):v[D]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?os:Lu,this.isPropagationStopped=Lu,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),l}var se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cl=mn(se),no=m({},se,{view:0,detail:0}),Vd=mn(no),Ml,Pl,ls,io=m({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ls&&(ls&&a.type==="mousemove"?(Ml=a.screenX-ls.screenX,Pl=a.screenY-ls.screenY):Pl=Ml=0,ls=a),Ml)},movementY:function(a){return"movementY"in a?a.movementY:Pl}}),Ei=mn(io),Ld=m({},io,{dataTransfer:0}),Oy=mn(Ld),so=m({},no,{relatedTarget:0}),kl=mn(so),ju=m({},se,{animationName:0,elapsedTime:0,pseudoElement:0}),Ol=mn(ju),jd=m({},se,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Nl=mn(jd),Ny=m({},se,{data:0}),Bu=mn(Ny),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Fd[a])?!!l[a]:!1}function ao(){return Fu}var Ud=m({},no,{key:function(a){if(a.key){var l=ro[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=as(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Bd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(a){return a.type==="keypress"?as(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?as(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Vl=mn(Ud),zd=m({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=mn(zd),Ks=m({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),Hd=mn(Ks),qd=m({},se,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gd=mn(qd),Wd=m({},io,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ll=mn(Wd),zn=m({},se,{newState:0,oldState:0}),Yd=mn(zn),Kd=[9,13,27,32],cs=zi&&"CompositionEvent"in window,g=null;zi&&"documentMode"in document&&(g=document.documentMode);var T=zi&&"TextEvent"in window&&!g,E=zi&&(!cs||g&&8<g&&11>=g),k=" ",$=!1;function it(a,l){switch(a){case"keyup":return Kd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _t(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Xt=!1;function on(a,l){switch(a){case"compositionend":return _t(l);case"keypress":return l.which!==32?null:($=!0,k);case"textInput":return a=l.data,a===k&&$?null:a;default:return null}}function Qt(a,l){if(Xt)return a==="compositionend"||!cs&&it(a,l)?(a=Vu(),Ys=Or=rs=null,Xt=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return E&&l.locale!=="ko"?null:l.data;default:return null}}var gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ln(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!gn[a.type]:l==="textarea"}function $s(a,l,u,d){Gs?Ws?Ws.push(d):Ws=[d]:Gs=d,l=Om(l,"onChange"),0<l.length&&(u=new Cl("onChange","change",null,u,d),a.push({event:u,listeners:l}))}var En=null,us=null;function zu(a){hA(a,0)}function $d(a){var l=ns(a);if(Pu(l))return a}function PE(a,l){if(a==="change")return l}var kE=!1;if(zi){var Vy;if(zi){var Ly="oninput"in document;if(!Ly){var OE=document.createElement("div");OE.setAttribute("oninput","return;"),Ly=typeof OE.oninput=="function"}Vy=Ly}else Vy=!1;kE=Vy&&(!document.documentMode||9<document.documentMode)}function NE(){En&&(En.detachEvent("onpropertychange",VE),us=En=null)}function VE(a){if(a.propertyName==="value"&&$d(us)){var l=[];$s(l,us,a,Ti(a)),Nd(zu,l)}}function tL(a,l,u){a==="focusin"?(NE(),En=l,us=u,En.attachEvent("onpropertychange",VE)):a==="focusout"&&NE()}function eL(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return $d(us)}function nL(a,l){if(a==="click")return $d(l)}function iL(a,l){if(a==="input"||a==="change")return $d(l)}function sL(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ri=typeof Object.is=="function"?Object.is:sL;function Hu(a,l){if(ri(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var u=Object.keys(a),d=Object.keys(l);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var p=u[d];if(!wt.call(l,p)||!ri(a[p],l[p]))return!1}return!0}function LE(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function jE(a,l){var u=LE(a);a=0;for(var d;u;){if(u.nodeType===3){if(d=a+u.textContent.length,a<=l&&d>=l)return{node:u,offset:l-a};a=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=LE(u)}}function BE(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?BE(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function FE(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=Xa(a.document);l instanceof a.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)a=l.contentWindow;else break;l=Xa(a.document)}return l}function jy(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var rL=zi&&"documentMode"in document&&11>=document.documentMode,jl=null,By=null,qu=null,Fy=!1;function UE(a,l,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Fy||jl==null||jl!==Xa(d)||(d=jl,"selectionStart"in d&&jy(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),qu&&Hu(qu,d)||(qu=d,d=Om(By,"onSelect"),0<d.length&&(l=new Cl("onSelect","select",null,l,u),a.push({event:l,listeners:d}),l.target=jl)))}function oo(a,l){var u={};return u[a.toLowerCase()]=l.toLowerCase(),u["Webkit"+a]="webkit"+l,u["Moz"+a]="moz"+l,u}var Bl={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},Uy={},zE={};zi&&(zE=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function lo(a){if(Uy[a])return Uy[a];if(!Bl[a])return a;var l=Bl[a],u;for(u in l)if(l.hasOwnProperty(u)&&u in zE)return Uy[a]=l[u];return a}var HE=lo("animationend"),qE=lo("animationiteration"),GE=lo("animationstart"),aL=lo("transitionrun"),oL=lo("transitionstart"),lL=lo("transitioncancel"),WE=lo("transitionend"),YE=new Map,zy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zy.push("scrollEnd");function Hi(a,l){YE.set(a,l),Ui(l,[a])}var KE=new WeakMap;function Si(a,l){if(typeof a=="object"&&a!==null){var u=KE.get(a);return u!==void 0?u:(l={value:a,source:l,stack:Il(l)},KE.set(a,l),l)}return{value:a,source:l,stack:Il(l)}}var xi=[],Fl=0,Hy=0;function Xd(){for(var a=Fl,l=Hy=Fl=0;l<a;){var u=xi[l];xi[l++]=null;var d=xi[l];xi[l++]=null;var p=xi[l];xi[l++]=null;var v=xi[l];if(xi[l++]=null,d!==null&&p!==null){var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}v!==0&&$E(u,p,v)}}function Qd(a,l,u,d){xi[Fl++]=a,xi[Fl++]=l,xi[Fl++]=u,xi[Fl++]=d,Hy|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function qy(a,l,u,d){return Qd(a,l,u,d),Zd(a)}function Ul(a,l){return Qd(a,null,null,l),Zd(a)}function $E(a,l,u){a.lanes|=u;var d=a.alternate;d!==null&&(d.lanes|=u);for(var p=!1,v=a.return;v!==null;)v.childLanes|=u,d=v.alternate,d!==null&&(d.childLanes|=u),v.tag===22&&(a=v.stateNode,a===null||a._visibility&1||(p=!0)),a=v,v=v.return;return a.tag===3?(v=a.stateNode,p&&l!==null&&(p=31-Dn(u),a=v.hiddenUpdates,d=a[p],d===null?a[p]=[l]:d.push(l),l.lane=u|536870912),v):null}function Zd(a){if(50<gh)throw gh=0,X_=null,Error(i(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var zl={};function cL(a,l,u,d){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(a,l,u,d){return new cL(a,l,u,d)}function Gy(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xs(a,l){var u=a.alternate;return u===null?(u=ai(a.tag,l,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=l,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,l=a.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function XE(a,l){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,l=u.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Jd(a,l,u,d,p,v){var S=0;if(d=a,typeof a=="function")Gy(a)&&(S=1);else if(typeof a=="string")S=h4(a,u,lt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case R:return a=ai(31,u,l,p),a.elementType=R,a.lanes=v,a;case w:return co(u.children,p,v,l);case x:S=8,p|=24;break;case A:return a=ai(12,u,l,p|2),a.elementType=A,a.lanes=v,a;case F:return a=ai(13,u,l,p),a.elementType=F,a.lanes=v,a;case K:return a=ai(19,u,l,p),a.elementType=K,a.lanes=v,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:case L:S=10;break t;case N:S=9;break t;case H:S=11;break t;case O:S=14;break t;case I:S=16,d=null;break t}S=29,u=Error(i(130,a===null?"null":typeof a,"")),d=null}return l=ai(S,u,l,p),l.elementType=a,l.type=d,l.lanes=v,l}function co(a,l,u,d){return a=ai(7,a,d,l),a.lanes=u,a}function Wy(a,l,u){return a=ai(6,a,null,l),a.lanes=u,a}function Yy(a,l,u){return l=ai(4,a.children!==null?a.children:[],a.key,l),l.lanes=u,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Hl=[],ql=0,tm=null,em=0,Ai=[],Ii=0,uo=null,Qs=1,Zs="";function ho(a,l){Hl[ql++]=em,Hl[ql++]=tm,tm=a,em=l}function QE(a,l,u){Ai[Ii++]=Qs,Ai[Ii++]=Zs,Ai[Ii++]=uo,uo=a;var d=Qs;a=Zs;var p=32-Dn(d)-1;d&=~(1<<p),u+=1;var v=32-Dn(l)+p;if(30<v){var S=p-p%5;v=(d&(1<<S)-1).toString(32),d>>=S,p-=S,Qs=1<<32-Dn(l)+p|u<<p|d,Zs=v+a}else Qs=1<<v|u<<p|d,Zs=a}function Ky(a){a.return!==null&&(ho(a,1),QE(a,1,0))}function $y(a){for(;a===tm;)tm=Hl[--ql],Hl[ql]=null,em=Hl[--ql],Hl[ql]=null;for(;a===uo;)uo=Ai[--Ii],Ai[Ii]=null,Zs=Ai[--Ii],Ai[Ii]=null,Qs=Ai[--Ii],Ai[Ii]=null}var Hn=null,Oe=null,ne=!1,fo=null,hs=!1,Xy=Error(i(519));function mo(a){var l=Error(i(418,""));throw Yu(Si(l,a)),Xy}function ZE(a){var l=a.stateNode,u=a.type,d=a.memoizedProps;switch(l[an]=a,l[Qe]=d,u){case"dialog":Yt("cancel",l),Yt("close",l);break;case"iframe":case"object":case"embed":Yt("load",l);break;case"video":case"audio":for(u=0;u<yh.length;u++)Yt(yh[u],l);break;case"source":Yt("error",l);break;case"img":case"image":case"link":Yt("error",l),Yt("load",l);break;case"details":Yt("toggle",l);break;case"input":Yt("invalid",l),Qa(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Rl(l);break;case"select":Yt("invalid",l);break;case"textarea":Yt("invalid",l),Za(l,d.value,d.defaultValue,d.children),Rl(l)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||d.suppressHydrationWarning===!0||gA(l.textContent,u)?(d.popover!=null&&(Yt("beforetoggle",l),Yt("toggle",l)),d.onScroll!=null&&Yt("scroll",l),d.onScrollEnd!=null&&Yt("scrollend",l),d.onClick!=null&&(l.onclick=Nm),l=!0):l=!1,l||mo(a)}function JE(a){for(Hn=a.return;Hn;)switch(Hn.tag){case 5:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Hn=Hn.return}}function Gu(a){if(a!==Hn)return!1;if(!ne)return JE(a),ne=!0,!1;var l=a.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||fv(a.type,a.memoizedProps)),u=!u),u&&Oe&&mo(a),JE(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));t:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(l===0){Oe=Gi(a.nextSibling);break t}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;a=a.nextSibling}Oe=null}}else l===27?(l=Oe,Xr(a.type)?(a=pv,pv=null,Oe=a):Oe=l):Oe=Hn?Gi(a.stateNode.nextSibling):null;return!0}function Wu(){Oe=Hn=null,ne=!1}function tS(){var a=fo;return a!==null&&($n===null?$n=a:$n.push.apply($n,a),fo=null),a}function Yu(a){fo===null?fo=[a]:fo.push(a)}var Qy=G(null),go=null,Js=null;function Nr(a,l,u){W(Qy,l._currentValue),l._currentValue=u}function tr(a){a._currentValue=Qy.current,st(Qy)}function Zy(a,l,u){for(;a!==null;){var d=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),a===u)break;a=a.return}}function Jy(a,l,u,d){var p=a.child;for(p!==null&&(p.return=a);p!==null;){var v=p.dependencies;if(v!==null){var S=p.child;v=v.firstContext;t:for(;v!==null;){var D=v;v=p;for(var z=0;z<l.length;z++)if(D.context===l[z]){v.lanes|=u,D=v.alternate,D!==null&&(D.lanes|=u),Zy(v.return,u,a),d||(S=null);break t}v=D.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(i(341));S.lanes|=u,v=S.alternate,v!==null&&(v.lanes|=u),Zy(S,u,a),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===a){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ku(a,l,u,d){a=null;for(var p=l,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var D=p.type;ri(p.pendingProps.value,S.value)||(a!==null?a.push(D):a=[D])}}else if(p===Ct.current){if(S=p.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(a!==null?a.push(Eh):a=[Eh])}p=p.return}a!==null&&Jy(l,a,u,d),l.flags|=262144}function nm(a){for(a=a.firstContext;a!==null;){if(!ri(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function po(a){go=a,Js=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Cn(a){return eS(go,a)}function im(a,l){return go===null&&po(a),eS(a,l)}function eS(a,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Js===null){if(a===null)throw Error(i(308));Js=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Js=Js.next=l;return u}var uL=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(u,d){a.push(d)}};this.abort=function(){l.aborted=!0,a.forEach(function(u){return u()})}},hL=n.unstable_scheduleCallback,fL=n.unstable_NormalPriority,cn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function t_(){return{controller:new uL,data:new Map,refCount:0}}function $u(a){a.refCount--,a.refCount===0&&hL(fL,function(){a.controller.abort()})}var Xu=null,e_=0,Gl=0,Wl=null;function dL(a,l){if(Xu===null){var u=Xu=[];e_=0,Gl=iv(),Wl={status:"pending",value:void 0,then:function(d){u.push(d)}}}return e_++,l.then(nS,nS),l}function nS(){if(--e_===0&&Xu!==null){Wl!==null&&(Wl.status="fulfilled");var a=Xu;Xu=null,Gl=0,Wl=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function mL(a,l){var u=[],d={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return a.then(function(){d.status="fulfilled",d.value=l;for(var p=0;p<u.length;p++)(0,u[p])(l)},function(p){for(d.status="rejected",d.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),d}var iS=Q.S;Q.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&dL(a,l),iS!==null&&iS(a,l)};var yo=G(null);function n_(){var a=yo.current;return a!==null?a:we.pooledCache}function sm(a,l){l===null?W(yo,yo.current):W(yo,l.pool)}function sS(){var a=n_();return a===null?null:{parent:cn._currentValue,pool:a}}var Qu=Error(i(460)),rS=Error(i(474)),rm=Error(i(542)),i_={then:function(){}};function aS(a){return a=a.status,a==="fulfilled"||a==="rejected"}function am(){}function oS(a,l,u){switch(u=a[u],u===void 0?a.push(l):u!==l&&(l.then(am,am),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,cS(a),a;default:if(typeof l.status=="string")l.then(am,am);else{if(a=we,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=l,a.status="pending",a.then(function(d){if(l.status==="pending"){var p=l;p.status="fulfilled",p.value=d}},function(d){if(l.status==="pending"){var p=l;p.status="rejected",p.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,cS(a),a}throw Zu=l,Qu}}var Zu=null;function lS(){if(Zu===null)throw Error(i(459));var a=Zu;return Zu=null,a}function cS(a){if(a===Qu||a===rm)throw Error(i(483))}var Vr=!1;function s_(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function r_(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Lr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function jr(a,l,u){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(le&2)!==0){var p=d.pending;return p===null?l.next=l:(l.next=p.next,p.next=l),d.pending=l,l=Zd(a),$E(a,null,u),l}return Qd(a,d,l,u),Zd(a)}function Ju(a,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var d=l.lanes;d&=a.pendingLanes,u|=d,l.lanes=u,Iu(a,u)}}function a_(a,l){var u=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var p=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?p=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?p=v=l:v=v.next=l}else p=v=l;u={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=l}var o_=!1;function th(){if(o_){var a=Wl;if(a!==null)throw a}}function eh(a,l,u,d){o_=!1;var p=a.updateQueue;Vr=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var z=D,J=z.next;z.next=null,S===null?v=J:S.next=J,S=z;var ct=a.alternate;ct!==null&&(ct=ct.updateQueue,D=ct.lastBaseUpdate,D!==S&&(D===null?ct.firstBaseUpdate=J:D.next=J,ct.lastBaseUpdate=z))}if(v!==null){var ft=p.baseState;S=0,ct=J=z=null,D=v;do{var et=D.lane&-536870913,nt=et!==D.lane;if(nt?(Zt&et)===et:(d&et)===et){et!==0&&et===Gl&&(o_=!0),ct!==null&&(ct=ct.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var Vt=a,kt=D;et=l;var ye=u;switch(kt.tag){case 1:if(Vt=kt.payload,typeof Vt=="function"){ft=Vt.call(ye,ft,et);break t}ft=Vt;break t;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=kt.payload,et=typeof Vt=="function"?Vt.call(ye,ft,et):Vt,et==null)break t;ft=m({},ft,et);break t;case 2:Vr=!0}}et=D.callback,et!==null&&(a.flags|=64,nt&&(a.flags|=8192),nt=p.callbacks,nt===null?p.callbacks=[et]:nt.push(et))}else nt={lane:et,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ct===null?(J=ct=nt,z=ft):ct=ct.next=nt,S|=et;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;nt=D,D=nt.next,nt.next=null,p.lastBaseUpdate=nt,p.shared.pending=null}}while(!0);ct===null&&(z=ft),p.baseState=z,p.firstBaseUpdate=J,p.lastBaseUpdate=ct,v===null&&(p.shared.lanes=0),Wr|=S,a.lanes=S,a.memoizedState=ft}}function uS(a,l){if(typeof a!="function")throw Error(i(191,a));a.call(l)}function hS(a,l){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)uS(u[a],l)}var Yl=G(null),om=G(0);function fS(a,l){a=or,W(om,a),W(Yl,l),or=a|l.baseLanes}function l_(){W(om,or),W(Yl,Yl.current)}function c_(){or=om.current,st(Yl),st(om)}var Br=0,zt=null,ge=null,Je=null,lm=!1,Kl=!1,_o=!1,cm=0,nh=0,$l=null,gL=0;function ze(){throw Error(i(321))}function u_(a,l){if(l===null)return!1;for(var u=0;u<l.length&&u<a.length;u++)if(!ri(a[u],l[u]))return!1;return!0}function h_(a,l,u,d,p,v){return Br=v,zt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Q.H=a===null||a.memoizedState===null?$S:XS,_o=!1,v=u(d,p),_o=!1,Kl&&(v=mS(l,u,d,p)),dS(a),v}function dS(a){Q.H=gm;var l=ge!==null&&ge.next!==null;if(Br=0,Je=ge=zt=null,lm=!1,nh=0,$l=null,l)throw Error(i(300));a===null||pn||(a=a.dependencies,a!==null&&nm(a)&&(pn=!0))}function mS(a,l,u,d){zt=a;var p=0;do{if(Kl&&($l=null),nh=0,Kl=!1,25<=p)throw Error(i(301));if(p+=1,Je=ge=null,a.updateQueue!=null){var v=a.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Q.H=wL,v=l(u,d)}while(Kl);return v}function pL(){var a=Q.H,l=a.useState()[0];return l=typeof l.then=="function"?ih(l):l,a=a.useState()[0],(ge!==null?ge.memoizedState:null)!==a&&(zt.flags|=1024),l}function f_(){var a=cm!==0;return cm=0,a}function d_(a,l,u){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~u}function m_(a){if(lm){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}lm=!1}Br=0,Je=ge=zt=null,Kl=!1,nh=cm=0,$l=null}function Yn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?zt.memoizedState=Je=a:Je=Je.next=a,Je}function tn(){if(ge===null){var a=zt.alternate;a=a!==null?a.memoizedState:null}else a=ge.next;var l=Je===null?zt.memoizedState:Je.next;if(l!==null)Je=l,ge=a;else{if(a===null)throw zt.alternate===null?Error(i(467)):Error(i(310));ge=a,a={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},Je===null?zt.memoizedState=Je=a:Je=Je.next=a}return Je}function g_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ih(a){var l=nh;return nh+=1,$l===null&&($l=[]),a=oS($l,a,l),l=zt,(Je===null?l.memoizedState:Je.next)===null&&(l=l.alternate,Q.H=l===null||l.memoizedState===null?$S:XS),a}function um(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ih(a);if(a.$$typeof===L)return Cn(a)}throw Error(i(438,String(a)))}function p_(a){var l=null,u=zt.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var d=zt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(p){return p.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=g_(),zt.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(a),d=0;d<a;d++)u[d]=V;return l.index++,u}function er(a,l){return typeof l=="function"?l(a):l}function hm(a){var l=tn();return y_(l,ge,a)}function y_(a,l,u){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var p=a.baseQueue,v=d.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}l.baseQueue=p=v,d.pending=null}if(v=a.baseState,p===null)a.memoizedState=v;else{l=p.next;var D=S=null,z=null,J=l,ct=!1;do{var ft=J.lane&-536870913;if(ft!==J.lane?(Zt&ft)===ft:(Br&ft)===ft){var et=J.revertLane;if(et===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ft===Gl&&(ct=!0);else if((Br&et)===et){J=J.next,et===Gl&&(ct=!0);continue}else ft={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(D=z=ft,S=v):z=z.next=ft,zt.lanes|=et,Wr|=et;ft=J.action,_o&&u(v,ft),v=J.hasEagerState?J.eagerState:u(v,ft)}else et={lane:ft,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(D=z=et,S=v):z=z.next=et,zt.lanes|=ft,Wr|=ft;J=J.next}while(J!==null&&J!==l);if(z===null?S=v:z.next=D,!ri(v,a.memoizedState)&&(pn=!0,ct&&(u=Wl,u!==null)))throw u;a.memoizedState=v,a.baseState=S,a.baseQueue=z,d.lastRenderedState=v}return p===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function __(a){var l=tn(),u=l.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=a;var d=u.dispatch,p=u.pending,v=l.memoizedState;if(p!==null){u.pending=null;var S=p=p.next;do v=a(v,S.action),S=S.next;while(S!==p);ri(v,l.memoizedState)||(pn=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),u.lastRenderedState=v}return[v,d]}function gS(a,l,u){var d=zt,p=tn(),v=ne;if(v){if(u===void 0)throw Error(i(407));u=u()}else u=l();var S=!ri((ge||p).memoizedState,u);S&&(p.memoizedState=u,pn=!0),p=p.queue;var D=_S.bind(null,d,p,a);if(sh(2048,8,D,[a]),p.getSnapshot!==l||S||Je!==null&&Je.memoizedState.tag&1){if(d.flags|=2048,Xl(9,fm(),yS.bind(null,d,p,u,l),null),we===null)throw Error(i(349));v||(Br&124)!==0||pS(d,l,u)}return u}function pS(a,l,u){a.flags|=16384,a={getSnapshot:l,value:u},l=zt.updateQueue,l===null?(l=g_(),zt.updateQueue=l,l.stores=[a]):(u=l.stores,u===null?l.stores=[a]:u.push(a))}function yS(a,l,u,d){l.value=u,l.getSnapshot=d,vS(l)&&bS(a)}function _S(a,l,u){return u(function(){vS(l)&&bS(a)})}function vS(a){var l=a.getSnapshot;a=a.value;try{var u=l();return!ri(a,u)}catch{return!0}}function bS(a){var l=Ul(a,2);l!==null&&hi(l,a,2)}function v_(a){var l=Yn();if(typeof a=="function"){var u=a;if(a=u(),_o){ii(!0);try{u()}finally{ii(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},l}function TS(a,l,u,d){return a.baseState=u,y_(a,ge,typeof d=="function"?d:er)}function yL(a,l,u,d,p){if(mm(a))throw Error(i(485));if(a=l.action,a!==null){var v={payload:p,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};Q.T!==null?u(!0):v.isTransition=!1,d(v),u=l.pending,u===null?(v.next=l.pending=v,wS(l,v)):(v.next=u.next,l.pending=u.next=v)}}function wS(a,l){var u=l.action,d=l.payload,p=a.state;if(l.isTransition){var v=Q.T,S={};Q.T=S;try{var D=u(p,d),z=Q.S;z!==null&&z(S,D),ES(a,l,D)}catch(J){b_(a,l,J)}finally{Q.T=v}}else try{v=u(p,d),ES(a,l,v)}catch(J){b_(a,l,J)}}function ES(a,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){SS(a,l,d)},function(d){return b_(a,l,d)}):SS(a,l,u)}function SS(a,l,u){l.status="fulfilled",l.value=u,xS(l),a.state=u,l=a.pending,l!==null&&(u=l.next,u===l?a.pending=null:(u=u.next,l.next=u,wS(a,u)))}function b_(a,l,u){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=u,xS(l),l=l.next;while(l!==d)}a.action=null}function xS(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function AS(a,l){return l}function IS(a,l){if(ne){var u=we.formState;if(u!==null){t:{var d=zt;if(ne){if(Oe){e:{for(var p=Oe,v=hs;p.nodeType!==8;){if(!v){p=null;break e}if(p=Gi(p.nextSibling),p===null){p=null;break e}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){Oe=Gi(p.nextSibling),d=p.data==="F!";break t}}mo(d)}d=!1}d&&(l=u[0])}}return u=Yn(),u.memoizedState=u.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:AS,lastRenderedState:l},u.queue=d,u=WS.bind(null,zt,d),d.dispatch=u,d=v_(!1),v=x_.bind(null,zt,!1,d.queue),d=Yn(),p={state:l,dispatch:null,action:a,pending:null},d.queue=p,u=yL.bind(null,zt,p,v,u),p.dispatch=u,d.memoizedState=a,[l,u,!1]}function RS(a){var l=tn();return DS(l,ge,a)}function DS(a,l,u){if(l=y_(a,l,AS)[0],a=hm(er)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=ih(l)}catch(S){throw S===Qu?rm:S}else d=l;l=tn();var p=l.queue,v=p.dispatch;return u!==l.memoizedState&&(zt.flags|=2048,Xl(9,fm(),_L.bind(null,p,u),null)),[d,v,a]}function _L(a,l){a.action=l}function CS(a){var l=tn(),u=ge;if(u!==null)return DS(l,u,a);tn(),l=l.memoizedState,u=tn();var d=u.queue.dispatch;return u.memoizedState=a,[l,d,!1]}function Xl(a,l,u,d){return a={tag:a,create:u,deps:d,inst:l,next:null},l=zt.updateQueue,l===null&&(l=g_(),zt.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=a.next=a:(d=u.next,u.next=a,a.next=d,l.lastEffect=a),a}function fm(){return{destroy:void 0,resource:void 0}}function MS(){return tn().memoizedState}function dm(a,l,u,d){var p=Yn();d=d===void 0?null:d,zt.flags|=a,p.memoizedState=Xl(1|l,fm(),u,d)}function sh(a,l,u,d){var p=tn();d=d===void 0?null:d;var v=p.memoizedState.inst;ge!==null&&d!==null&&u_(d,ge.memoizedState.deps)?p.memoizedState=Xl(l,v,u,d):(zt.flags|=a,p.memoizedState=Xl(1|l,v,u,d))}function PS(a,l){dm(8390656,8,a,l)}function kS(a,l){sh(2048,8,a,l)}function OS(a,l){return sh(4,2,a,l)}function NS(a,l){return sh(4,4,a,l)}function VS(a,l){if(typeof l=="function"){a=a();var u=l(a);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function LS(a,l,u){u=u!=null?u.concat([a]):null,sh(4,4,VS.bind(null,l,a),u)}function T_(){}function jS(a,l){var u=tn();l=l===void 0?null:l;var d=u.memoizedState;return l!==null&&u_(l,d[1])?d[0]:(u.memoizedState=[a,l],a)}function BS(a,l){var u=tn();l=l===void 0?null:l;var d=u.memoizedState;if(l!==null&&u_(l,d[1]))return d[0];if(d=a(),_o){ii(!0);try{a()}finally{ii(!1)}}return u.memoizedState=[d,l],d}function w_(a,l,u){return u===void 0||(Br&1073741824)!==0?a.memoizedState=l:(a.memoizedState=u,a=zx(),zt.lanes|=a,Wr|=a,u)}function FS(a,l,u,d){return ri(u,l)?u:Yl.current!==null?(a=w_(a,u,d),ri(a,l)||(pn=!0),a):(Br&42)===0?(pn=!0,a.memoizedState=u):(a=zx(),zt.lanes|=a,Wr|=a,l)}function US(a,l,u,d,p){var v=at.p;at.p=v!==0&&8>v?v:8;var S=Q.T,D={};Q.T=D,x_(a,!1,l,u);try{var z=p(),J=Q.S;if(J!==null&&J(D,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ct=mL(z,d);rh(a,l,ct,ui(a))}else rh(a,l,d,ui(a))}catch(ft){rh(a,l,{then:function(){},status:"rejected",reason:ft},ui())}finally{at.p=v,Q.T=S}}function vL(){}function E_(a,l,u,d){if(a.tag!==5)throw Error(i(476));var p=zS(a).queue;US(a,p,l,yt,u===null?vL:function(){return HS(a),u(d)})}function zS(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:yt},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:u},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function HS(a){var l=zS(a).next.queue;rh(a,l,{},ui())}function S_(){return Cn(Eh)}function qS(){return tn().memoizedState}function GS(){return tn().memoizedState}function bL(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var u=ui();a=Lr(u);var d=jr(l,a,u);d!==null&&(hi(d,l,u),Ju(d,l,u)),l={cache:t_()},a.payload=l;return}l=l.return}}function TL(a,l,u){var d=ui();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},mm(a)?YS(l,u):(u=qy(a,l,u,d),u!==null&&(hi(u,a,d),KS(u,l,d)))}function WS(a,l,u){var d=ui();rh(a,l,u,d)}function rh(a,l,u,d){var p={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(mm(a))YS(l,p);else{var v=a.alternate;if(a.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var S=l.lastRenderedState,D=v(S,u);if(p.hasEagerState=!0,p.eagerState=D,ri(D,S))return Qd(a,l,p,0),we===null&&Xd(),!1}catch{}finally{}if(u=qy(a,l,p,d),u!==null)return hi(u,a,d),KS(u,l,d),!0}return!1}function x_(a,l,u,d){if(d={lane:2,revertLane:iv(),action:d,hasEagerState:!1,eagerState:null,next:null},mm(a)){if(l)throw Error(i(479))}else l=qy(a,u,d,2),l!==null&&hi(l,a,2)}function mm(a){var l=a.alternate;return a===zt||l!==null&&l===zt}function YS(a,l){Kl=lm=!0;var u=a.pending;u===null?l.next=l:(l.next=u.next,u.next=l),a.pending=l}function KS(a,l,u){if((u&4194048)!==0){var d=l.lanes;d&=a.pendingLanes,u|=d,l.lanes=u,Iu(a,u)}}var gm={readContext:Cn,use:um,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze},$S={readContext:Cn,use:um,useCallback:function(a,l){return Yn().memoizedState=[a,l===void 0?null:l],a},useContext:Cn,useEffect:PS,useImperativeHandle:function(a,l,u){u=u!=null?u.concat([a]):null,dm(4194308,4,VS.bind(null,l,a),u)},useLayoutEffect:function(a,l){return dm(4194308,4,a,l)},useInsertionEffect:function(a,l){dm(4,2,a,l)},useMemo:function(a,l){var u=Yn();l=l===void 0?null:l;var d=a();if(_o){ii(!0);try{a()}finally{ii(!1)}}return u.memoizedState=[d,l],d},useReducer:function(a,l,u){var d=Yn();if(u!==void 0){var p=u(l);if(_o){ii(!0);try{u(l)}finally{ii(!1)}}}else p=l;return d.memoizedState=d.baseState=p,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:p},d.queue=a,a=a.dispatch=TL.bind(null,zt,a),[d.memoizedState,a]},useRef:function(a){var l=Yn();return a={current:a},l.memoizedState=a},useState:function(a){a=v_(a);var l=a.queue,u=WS.bind(null,zt,l);return l.dispatch=u,[a.memoizedState,u]},useDebugValue:T_,useDeferredValue:function(a,l){var u=Yn();return w_(u,a,l)},useTransition:function(){var a=v_(!1);return a=US.bind(null,zt,a.queue,!0,!1),Yn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,u){var d=zt,p=Yn();if(ne){if(u===void 0)throw Error(i(407));u=u()}else{if(u=l(),we===null)throw Error(i(349));(Zt&124)!==0||pS(d,l,u)}p.memoizedState=u;var v={value:u,getSnapshot:l};return p.queue=v,PS(_S.bind(null,d,v,a),[a]),d.flags|=2048,Xl(9,fm(),yS.bind(null,d,v,u,l),null),u},useId:function(){var a=Yn(),l=we.identifierPrefix;if(ne){var u=Zs,d=Qs;u=(d&~(1<<32-Dn(d)-1)).toString(32)+u,l=""+l+"R"+u,u=cm++,0<u&&(l+="H"+u.toString(32)),l+=""}else u=gL++,l=""+l+"r"+u.toString(32)+"";return a.memoizedState=l},useHostTransitionStatus:S_,useFormState:IS,useActionState:IS,useOptimistic:function(a){var l=Yn();l.memoizedState=l.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=x_.bind(null,zt,!0,u),u.dispatch=l,[a,l]},useMemoCache:p_,useCacheRefresh:function(){return Yn().memoizedState=bL.bind(null,zt)}},XS={readContext:Cn,use:um,useCallback:jS,useContext:Cn,useEffect:kS,useImperativeHandle:LS,useInsertionEffect:OS,useLayoutEffect:NS,useMemo:BS,useReducer:hm,useRef:MS,useState:function(){return hm(er)},useDebugValue:T_,useDeferredValue:function(a,l){var u=tn();return FS(u,ge.memoizedState,a,l)},useTransition:function(){var a=hm(er)[0],l=tn().memoizedState;return[typeof a=="boolean"?a:ih(a),l]},useSyncExternalStore:gS,useId:qS,useHostTransitionStatus:S_,useFormState:RS,useActionState:RS,useOptimistic:function(a,l){var u=tn();return TS(u,ge,a,l)},useMemoCache:p_,useCacheRefresh:GS},wL={readContext:Cn,use:um,useCallback:jS,useContext:Cn,useEffect:kS,useImperativeHandle:LS,useInsertionEffect:OS,useLayoutEffect:NS,useMemo:BS,useReducer:__,useRef:MS,useState:function(){return __(er)},useDebugValue:T_,useDeferredValue:function(a,l){var u=tn();return ge===null?w_(u,a,l):FS(u,ge.memoizedState,a,l)},useTransition:function(){var a=__(er)[0],l=tn().memoizedState;return[typeof a=="boolean"?a:ih(a),l]},useSyncExternalStore:gS,useId:qS,useHostTransitionStatus:S_,useFormState:CS,useActionState:CS,useOptimistic:function(a,l){var u=tn();return ge!==null?TS(u,ge,a,l):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:p_,useCacheRefresh:GS},Ql=null,ah=0;function pm(a){var l=ah;return ah+=1,Ql===null&&(Ql=[]),oS(Ql,a,l)}function oh(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function ym(a,l){throw l.$$typeof===y?Error(i(525)):(a=Object.prototype.toString.call(l),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function QS(a){var l=a._init;return l(a._payload)}function ZS(a){function l(Y,q){if(a){var Z=Y.deletions;Z===null?(Y.deletions=[q],Y.flags|=16):Z.push(q)}}function u(Y,q){if(!a)return null;for(;q!==null;)l(Y,q),q=q.sibling;return null}function d(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function p(Y,q){return Y=Xs(Y,q),Y.index=0,Y.sibling=null,Y}function v(Y,q,Z){return Y.index=Z,a?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<q?(Y.flags|=67108866,q):Z):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function S(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function D(Y,q,Z,ut){return q===null||q.tag!==6?(q=Wy(Z,Y.mode,ut),q.return=Y,q):(q=p(q,Z),q.return=Y,q)}function z(Y,q,Z,ut){var xt=Z.type;return xt===w?ct(Y,q,Z.props.children,ut,Z.key):q!==null&&(q.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===I&&QS(xt)===q.type)?(q=p(q,Z.props),oh(q,Z),q.return=Y,q):(q=Jd(Z.type,Z.key,Z.props,null,Y.mode,ut),oh(q,Z),q.return=Y,q)}function J(Y,q,Z,ut){return q===null||q.tag!==4||q.stateNode.containerInfo!==Z.containerInfo||q.stateNode.implementation!==Z.implementation?(q=Yy(Z,Y.mode,ut),q.return=Y,q):(q=p(q,Z.children||[]),q.return=Y,q)}function ct(Y,q,Z,ut,xt){return q===null||q.tag!==7?(q=co(Z,Y.mode,ut,xt),q.return=Y,q):(q=p(q,Z),q.return=Y,q)}function ft(Y,q,Z){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Wy(""+q,Y.mode,Z),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return Z=Jd(q.type,q.key,q.props,null,Y.mode,Z),oh(Z,q),Z.return=Y,Z;case b:return q=Yy(q,Y.mode,Z),q.return=Y,q;case I:var ut=q._init;return q=ut(q._payload),ft(Y,q,Z)}if(St(q)||U(q))return q=co(q,Y.mode,Z,null),q.return=Y,q;if(typeof q.then=="function")return ft(Y,pm(q),Z);if(q.$$typeof===L)return ft(Y,im(Y,q),Z);ym(Y,q)}return null}function et(Y,q,Z,ut){var xt=q!==null?q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return xt!==null?null:D(Y,q,""+Z,ut);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:return Z.key===xt?z(Y,q,Z,ut):null;case b:return Z.key===xt?J(Y,q,Z,ut):null;case I:return xt=Z._init,Z=xt(Z._payload),et(Y,q,Z,ut)}if(St(Z)||U(Z))return xt!==null?null:ct(Y,q,Z,ut,null);if(typeof Z.then=="function")return et(Y,q,pm(Z),ut);if(Z.$$typeof===L)return et(Y,q,im(Y,Z),ut);ym(Y,Z)}return null}function nt(Y,q,Z,ut,xt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Y=Y.get(Z)||null,D(q,Y,""+ut,xt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case _:return Y=Y.get(ut.key===null?Z:ut.key)||null,z(q,Y,ut,xt);case b:return Y=Y.get(ut.key===null?Z:ut.key)||null,J(q,Y,ut,xt);case I:var Gt=ut._init;return ut=Gt(ut._payload),nt(Y,q,Z,ut,xt)}if(St(ut)||U(ut))return Y=Y.get(Z)||null,ct(q,Y,ut,xt,null);if(typeof ut.then=="function")return nt(Y,q,Z,pm(ut),xt);if(ut.$$typeof===L)return nt(Y,q,Z,im(q,ut),xt);ym(q,ut)}return null}function Vt(Y,q,Z,ut){for(var xt=null,Gt=null,Dt=q,Ot=q=0,_n=null;Dt!==null&&Ot<Z.length;Ot++){Dt.index>Ot?(_n=Dt,Dt=null):_n=Dt.sibling;var ee=et(Y,Dt,Z[Ot],ut);if(ee===null){Dt===null&&(Dt=_n);break}a&&Dt&&ee.alternate===null&&l(Y,Dt),q=v(ee,q,Ot),Gt===null?xt=ee:Gt.sibling=ee,Gt=ee,Dt=_n}if(Ot===Z.length)return u(Y,Dt),ne&&ho(Y,Ot),xt;if(Dt===null){for(;Ot<Z.length;Ot++)Dt=ft(Y,Z[Ot],ut),Dt!==null&&(q=v(Dt,q,Ot),Gt===null?xt=Dt:Gt.sibling=Dt,Gt=Dt);return ne&&ho(Y,Ot),xt}for(Dt=d(Dt);Ot<Z.length;Ot++)_n=nt(Dt,Y,Ot,Z[Ot],ut),_n!==null&&(a&&_n.alternate!==null&&Dt.delete(_n.key===null?Ot:_n.key),q=v(_n,q,Ot),Gt===null?xt=_n:Gt.sibling=_n,Gt=_n);return a&&Dt.forEach(function(ea){return l(Y,ea)}),ne&&ho(Y,Ot),xt}function kt(Y,q,Z,ut){if(Z==null)throw Error(i(151));for(var xt=null,Gt=null,Dt=q,Ot=q=0,_n=null,ee=Z.next();Dt!==null&&!ee.done;Ot++,ee=Z.next()){Dt.index>Ot?(_n=Dt,Dt=null):_n=Dt.sibling;var ea=et(Y,Dt,ee.value,ut);if(ea===null){Dt===null&&(Dt=_n);break}a&&Dt&&ea.alternate===null&&l(Y,Dt),q=v(ea,q,Ot),Gt===null?xt=ea:Gt.sibling=ea,Gt=ea,Dt=_n}if(ee.done)return u(Y,Dt),ne&&ho(Y,Ot),xt;if(Dt===null){for(;!ee.done;Ot++,ee=Z.next())ee=ft(Y,ee.value,ut),ee!==null&&(q=v(ee,q,Ot),Gt===null?xt=ee:Gt.sibling=ee,Gt=ee);return ne&&ho(Y,Ot),xt}for(Dt=d(Dt);!ee.done;Ot++,ee=Z.next())ee=nt(Dt,Y,Ot,ee.value,ut),ee!==null&&(a&&ee.alternate!==null&&Dt.delete(ee.key===null?Ot:ee.key),q=v(ee,q,Ot),Gt===null?xt=ee:Gt.sibling=ee,Gt=ee);return a&&Dt.forEach(function(E4){return l(Y,E4)}),ne&&ho(Y,Ot),xt}function ye(Y,q,Z,ut){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:t:{for(var xt=Z.key;q!==null;){if(q.key===xt){if(xt=Z.type,xt===w){if(q.tag===7){u(Y,q.sibling),ut=p(q,Z.props.children),ut.return=Y,Y=ut;break t}}else if(q.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===I&&QS(xt)===q.type){u(Y,q.sibling),ut=p(q,Z.props),oh(ut,Z),ut.return=Y,Y=ut;break t}u(Y,q);break}else l(Y,q);q=q.sibling}Z.type===w?(ut=co(Z.props.children,Y.mode,ut,Z.key),ut.return=Y,Y=ut):(ut=Jd(Z.type,Z.key,Z.props,null,Y.mode,ut),oh(ut,Z),ut.return=Y,Y=ut)}return S(Y);case b:t:{for(xt=Z.key;q!==null;){if(q.key===xt)if(q.tag===4&&q.stateNode.containerInfo===Z.containerInfo&&q.stateNode.implementation===Z.implementation){u(Y,q.sibling),ut=p(q,Z.children||[]),ut.return=Y,Y=ut;break t}else{u(Y,q);break}else l(Y,q);q=q.sibling}ut=Yy(Z,Y.mode,ut),ut.return=Y,Y=ut}return S(Y);case I:return xt=Z._init,Z=xt(Z._payload),ye(Y,q,Z,ut)}if(St(Z))return Vt(Y,q,Z,ut);if(U(Z)){if(xt=U(Z),typeof xt!="function")throw Error(i(150));return Z=xt.call(Z),kt(Y,q,Z,ut)}if(typeof Z.then=="function")return ye(Y,q,pm(Z),ut);if(Z.$$typeof===L)return ye(Y,q,im(Y,Z),ut);ym(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,q!==null&&q.tag===6?(u(Y,q.sibling),ut=p(q,Z),ut.return=Y,Y=ut):(u(Y,q),ut=Wy(Z,Y.mode,ut),ut.return=Y,Y=ut),S(Y)):u(Y,q)}return function(Y,q,Z,ut){try{ah=0;var xt=ye(Y,q,Z,ut);return Ql=null,xt}catch(Dt){if(Dt===Qu||Dt===rm)throw Dt;var Gt=ai(29,Dt,null,Y.mode);return Gt.lanes=ut,Gt.return=Y,Gt}finally{}}}var Zl=ZS(!0),JS=ZS(!1),Ri=G(null),fs=null;function Fr(a){var l=a.alternate;W(un,un.current&1),W(Ri,a),fs===null&&(l===null||Yl.current!==null||l.memoizedState!==null)&&(fs=a)}function tx(a){if(a.tag===22){if(W(un,un.current),W(Ri,a),fs===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(fs=a)}}else Ur()}function Ur(){W(un,un.current),W(Ri,Ri.current)}function nr(a){st(Ri),fs===a&&(fs=null),st(un)}var un=G(0);function _m(a){for(var l=a;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||gv(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function A_(a,l,u,d){l=a.memoizedState,u=u(d,l),u=u==null?l:m({},l,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var I_={enqueueSetState:function(a,l,u){a=a._reactInternals;var d=ui(),p=Lr(d);p.payload=l,u!=null&&(p.callback=u),l=jr(a,p,d),l!==null&&(hi(l,a,d),Ju(l,a,d))},enqueueReplaceState:function(a,l,u){a=a._reactInternals;var d=ui(),p=Lr(d);p.tag=1,p.payload=l,u!=null&&(p.callback=u),l=jr(a,p,d),l!==null&&(hi(l,a,d),Ju(l,a,d))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var u=ui(),d=Lr(u);d.tag=2,l!=null&&(d.callback=l),l=jr(a,d,u),l!==null&&(hi(l,a,u),Ju(l,a,u))}};function ex(a,l,u,d,p,v,S){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,v,S):l.prototype&&l.prototype.isPureReactComponent?!Hu(u,d)||!Hu(p,v):!0}function nx(a,l,u,d){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,d),l.state!==a&&I_.enqueueReplaceState(l,l.state,null)}function vo(a,l){var u=l;if("ref"in l){u={};for(var d in l)d!=="ref"&&(u[d]=l[d])}if(a=a.defaultProps){u===l&&(u=m({},u));for(var p in a)u[p]===void 0&&(u[p]=a[p])}return u}var vm=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function ix(a){vm(a)}function sx(a){console.error(a)}function rx(a){vm(a)}function bm(a,l){try{var u=a.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function ax(a,l,u){try{var d=a.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function R_(a,l,u){return u=Lr(u),u.tag=3,u.payload={element:null},u.callback=function(){bm(a,l)},u}function ox(a){return a=Lr(a),a.tag=3,a}function lx(a,l,u,d){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var v=d.value;a.payload=function(){return p(v)},a.callback=function(){ax(l,u,d)}}var S=u.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(a.callback=function(){ax(l,u,d),typeof p!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function EL(a,l,u,d,p){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=u.alternate,l!==null&&Ku(l,u,p,!0),u=Ri.current,u!==null){switch(u.tag){case 13:return fs===null?Z_():u.alternate===null&&Ne===0&&(Ne=3),u.flags&=-257,u.flags|=65536,u.lanes=p,d===i_?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([d]):l.add(d),tv(a,d,p)),!1;case 22:return u.flags|=65536,d===i_?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([d]):u.add(d)),tv(a,d,p)),!1}throw Error(i(435,u.tag))}return tv(a,d,p),Z_(),!1}if(ne)return l=Ri.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=p,d!==Xy&&(a=Error(i(422),{cause:d}),Yu(Si(a,u)))):(d!==Xy&&(l=Error(i(423),{cause:d}),Yu(Si(l,u))),a=a.current.alternate,a.flags|=65536,p&=-p,a.lanes|=p,d=Si(d,u),p=R_(a.stateNode,d,p),a_(a,p),Ne!==4&&(Ne=2)),!1;var v=Error(i(520),{cause:d});if(v=Si(v,u),mh===null?mh=[v]:mh.push(v),Ne!==4&&(Ne=2),l===null)return!0;d=Si(d,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,a=p&-p,u.lanes|=a,a=R_(u.stateNode,d,a),a_(u,a),!1;case 1:if(l=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Yr===null||!Yr.has(v))))return u.flags|=65536,p&=-p,u.lanes|=p,p=ox(p),lx(p,a,u,d),a_(u,p),!1}u=u.return}while(u!==null);return!1}var cx=Error(i(461)),pn=!1;function Sn(a,l,u,d){l.child=a===null?JS(l,null,u,d):Zl(l,a.child,u,d)}function ux(a,l,u,d,p){u=u.render;var v=l.ref;if("ref"in d){var S={};for(var D in d)D!=="ref"&&(S[D]=d[D])}else S=d;return po(l),d=h_(a,l,u,S,v,p),D=f_(),a!==null&&!pn?(d_(a,l,p),ir(a,l,p)):(ne&&D&&Ky(l),l.flags|=1,Sn(a,l,d,p),l.child)}function hx(a,l,u,d,p){if(a===null){var v=u.type;return typeof v=="function"&&!Gy(v)&&v.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=v,fx(a,l,v,d,p)):(a=Jd(u.type,null,d,l,l.mode,p),a.ref=l.ref,a.return=l,l.child=a)}if(v=a.child,!V_(a,p)){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:Hu,u(S,d)&&a.ref===l.ref)return ir(a,l,p)}return l.flags|=1,a=Xs(v,d),a.ref=l.ref,a.return=l,l.child=a}function fx(a,l,u,d,p){if(a!==null){var v=a.memoizedProps;if(Hu(v,d)&&a.ref===l.ref)if(pn=!1,l.pendingProps=d=v,V_(a,p))(a.flags&131072)!==0&&(pn=!0);else return l.lanes=a.lanes,ir(a,l,p)}return D_(a,l,u,d,p)}function dx(a,l,u){var d=l.pendingProps,p=d.children,v=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=v!==null?v.baseLanes|u:u,a!==null){for(p=l.child=a.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;l.childLanes=v&~d}else l.childLanes=0,l.child=null;return mx(a,l,d,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&sm(l,v!==null?v.cachePool:null),v!==null?fS(l,v):l_(),tx(l);else return l.lanes=l.childLanes=536870912,mx(a,l,v!==null?v.baseLanes|u:u,u)}else v!==null?(sm(l,v.cachePool),fS(l,v),Ur(),l.memoizedState=null):(a!==null&&sm(l,null),l_(),Ur());return Sn(a,l,p,u),l.child}function mx(a,l,u,d){var p=n_();return p=p===null?null:{parent:cn._currentValue,pool:p},l.memoizedState={baseLanes:u,cachePool:p},a!==null&&sm(l,null),l_(),tx(l),a!==null&&Ku(a,l,d,!0),null}function Tm(a,l){var u=l.ref;if(u===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(a===null||a.ref!==u)&&(l.flags|=4194816)}}function D_(a,l,u,d,p){return po(l),u=h_(a,l,u,d,void 0,p),d=f_(),a!==null&&!pn?(d_(a,l,p),ir(a,l,p)):(ne&&d&&Ky(l),l.flags|=1,Sn(a,l,u,p),l.child)}function gx(a,l,u,d,p,v){return po(l),l.updateQueue=null,u=mS(l,d,u,p),dS(a),d=f_(),a!==null&&!pn?(d_(a,l,v),ir(a,l,v)):(ne&&d&&Ky(l),l.flags|=1,Sn(a,l,u,v),l.child)}function px(a,l,u,d,p){if(po(l),l.stateNode===null){var v=zl,S=u.contextType;typeof S=="object"&&S!==null&&(v=Cn(S)),v=new u(d,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=I_,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=d,v.state=l.memoizedState,v.refs={},s_(l),S=u.contextType,v.context=typeof S=="object"&&S!==null?Cn(S):zl,v.state=l.memoizedState,S=u.getDerivedStateFromProps,typeof S=="function"&&(A_(l,u,S,d),v.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&I_.enqueueReplaceState(v,v.state,null),eh(l,d,v,p),th(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(a===null){v=l.stateNode;var D=l.memoizedProps,z=vo(u,D);v.props=z;var J=v.context,ct=u.contextType;S=zl,typeof ct=="object"&&ct!==null&&(S=Cn(ct));var ft=u.getDerivedStateFromProps;ct=typeof ft=="function"||typeof v.getSnapshotBeforeUpdate=="function",D=l.pendingProps!==D,ct||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D||J!==S)&&nx(l,v,d,S),Vr=!1;var et=l.memoizedState;v.state=et,eh(l,d,v,p),th(),J=l.memoizedState,D||et!==J||Vr?(typeof ft=="function"&&(A_(l,u,ft,d),J=l.memoizedState),(z=Vr||ex(l,u,z,d,et,J,S))?(ct||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=J),v.props=d,v.state=J,v.context=S,d=z):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{v=l.stateNode,r_(a,l),S=l.memoizedProps,ct=vo(u,S),v.props=ct,ft=l.pendingProps,et=v.context,J=u.contextType,z=zl,typeof J=="object"&&J!==null&&(z=Cn(J)),D=u.getDerivedStateFromProps,(J=typeof D=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==ft||et!==z)&&nx(l,v,d,z),Vr=!1,et=l.memoizedState,v.state=et,eh(l,d,v,p),th();var nt=l.memoizedState;S!==ft||et!==nt||Vr||a!==null&&a.dependencies!==null&&nm(a.dependencies)?(typeof D=="function"&&(A_(l,u,D,d),nt=l.memoizedState),(ct=Vr||ex(l,u,ct,d,et,nt,z)||a!==null&&a.dependencies!==null&&nm(a.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,nt,z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,nt,z)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===a.memoizedProps&&et===a.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&et===a.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=nt),v.props=d,v.state=nt,v.context=z,d=ct):(typeof v.componentDidUpdate!="function"||S===a.memoizedProps&&et===a.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&et===a.memoizedState||(l.flags|=1024),d=!1)}return v=d,Tm(a,l),d=(l.flags&128)!==0,v||d?(v=l.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,a!==null&&d?(l.child=Zl(l,a.child,null,p),l.child=Zl(l,null,u,p)):Sn(a,l,u,p),l.memoizedState=v.state,a=l.child):a=ir(a,l,p),a}function yx(a,l,u,d){return Wu(),l.flags|=256,Sn(a,l,u,d),l.child}var C_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function M_(a){return{baseLanes:a,cachePool:sS()}}function P_(a,l,u){return a=a!==null?a.childLanes&~u:0,l&&(a|=Di),a}function _x(a,l,u){var d=l.pendingProps,p=!1,v=(l.flags&128)!==0,S;if((S=v)||(S=a!==null&&a.memoizedState===null?!1:(un.current&2)!==0),S&&(p=!0,l.flags&=-129),S=(l.flags&32)!==0,l.flags&=-33,a===null){if(ne){if(p?Fr(l):Ur(),ne){var D=Oe,z;if(z=D){t:{for(z=D,D=hs;z.nodeType!==8;){if(!D){D=null;break t}if(z=Gi(z.nextSibling),z===null){D=null;break t}}D=z}D!==null?(l.memoizedState={dehydrated:D,treeContext:uo!==null?{id:Qs,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},z=ai(18,null,null,0),z.stateNode=D,z.return=l,l.child=z,Hn=l,Oe=null,z=!0):z=!1}z||mo(l)}if(D=l.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return gv(D)?l.lanes=32:l.lanes=536870912,null;nr(l)}return D=d.children,d=d.fallback,p?(Ur(),p=l.mode,D=wm({mode:"hidden",children:D},p),d=co(d,p,u,null),D.return=l,d.return=l,D.sibling=d,l.child=D,p=l.child,p.memoizedState=M_(u),p.childLanes=P_(a,S,u),l.memoizedState=C_,d):(Fr(l),k_(l,D))}if(z=a.memoizedState,z!==null&&(D=z.dehydrated,D!==null)){if(v)l.flags&256?(Fr(l),l.flags&=-257,l=O_(a,l,u)):l.memoizedState!==null?(Ur(),l.child=a.child,l.flags|=128,l=null):(Ur(),p=d.fallback,D=l.mode,d=wm({mode:"visible",children:d.children},D),p=co(p,D,u,null),p.flags|=2,d.return=l,p.return=l,d.sibling=p,l.child=d,Zl(l,a.child,null,u),d=l.child,d.memoizedState=M_(u),d.childLanes=P_(a,S,u),l.memoizedState=C_,l=p);else if(Fr(l),gv(D)){if(S=D.nextSibling&&D.nextSibling.dataset,S)var J=S.dgst;S=J,d=Error(i(419)),d.stack="",d.digest=S,Yu({value:d,source:null,stack:null}),l=O_(a,l,u)}else if(pn||Ku(a,l,u,!1),S=(u&a.childLanes)!==0,pn||S){if(S=we,S!==null&&(d=u&-u,d=(d&42)!==0?1:Rr(d),d=(d&(S.suspendedLanes|u))!==0?0:d,d!==0&&d!==z.retryLane))throw z.retryLane=d,Ul(a,d),hi(S,a,d),cx;D.data==="$?"||Z_(),l=O_(a,l,u)}else D.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=z.treeContext,Oe=Gi(D.nextSibling),Hn=l,ne=!0,fo=null,hs=!1,a!==null&&(Ai[Ii++]=Qs,Ai[Ii++]=Zs,Ai[Ii++]=uo,Qs=a.id,Zs=a.overflow,uo=l),l=k_(l,d.children),l.flags|=4096);return l}return p?(Ur(),p=d.fallback,D=l.mode,z=a.child,J=z.sibling,d=Xs(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,J!==null?p=Xs(J,p):(p=co(p,D,u,null),p.flags|=2),p.return=l,d.return=l,d.sibling=p,l.child=d,d=p,p=l.child,D=a.child.memoizedState,D===null?D=M_(u):(z=D.cachePool,z!==null?(J=cn._currentValue,z=z.parent!==J?{parent:J,pool:J}:z):z=sS(),D={baseLanes:D.baseLanes|u,cachePool:z}),p.memoizedState=D,p.childLanes=P_(a,S,u),l.memoizedState=C_,d):(Fr(l),u=a.child,a=u.sibling,u=Xs(u,{mode:"visible",children:d.children}),u.return=l,u.sibling=null,a!==null&&(S=l.deletions,S===null?(l.deletions=[a],l.flags|=16):S.push(a)),l.child=u,l.memoizedState=null,u)}function k_(a,l){return l=wm({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function wm(a,l){return a=ai(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function O_(a,l,u){return Zl(l,a.child,null,u),a=k_(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function vx(a,l,u){a.lanes|=l;var d=a.alternate;d!==null&&(d.lanes|=l),Zy(a.return,l,u)}function N_(a,l,u,d,p){var v=a.memoizedState;v===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:p}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=u,v.tailMode=p)}function bx(a,l,u){var d=l.pendingProps,p=d.revealOrder,v=d.tail;if(Sn(a,l,d.children,u),d=un.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vx(a,u,l);else if(a.tag===19)vx(a,u,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break t;for(;a.sibling===null;){if(a.return===null||a.return===l)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(W(un,d),p){case"forwards":for(u=l.child,p=null;u!==null;)a=u.alternate,a!==null&&_m(a)===null&&(p=u),u=u.sibling;u=p,u===null?(p=l.child,l.child=null):(p=u.sibling,u.sibling=null),N_(l,!1,p,u,v);break;case"backwards":for(u=null,p=l.child,l.child=null;p!==null;){if(a=p.alternate,a!==null&&_m(a)===null){l.child=p;break}a=p.sibling,p.sibling=u,u=p,p=a}N_(l,!0,u,null,v);break;case"together":N_(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ir(a,l,u){if(a!==null&&(l.dependencies=a.dependencies),Wr|=l.lanes,(u&l.childLanes)===0)if(a!==null){if(Ku(a,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(i(153));if(l.child!==null){for(a=l.child,u=Xs(a,a.pendingProps),l.child=u,u.return=l;a.sibling!==null;)a=a.sibling,u=u.sibling=Xs(a,a.pendingProps),u.return=l;u.sibling=null}return l.child}function V_(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&nm(a)))}function SL(a,l,u){switch(l.tag){case 3:Tt(l,l.stateNode.containerInfo),Nr(l,cn,a.memoizedState.cache),Wu();break;case 27:case 5:Pt(l);break;case 4:Tt(l,l.stateNode.containerInfo);break;case 10:Nr(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(Fr(l),l.flags|=128,null):(u&l.child.childLanes)!==0?_x(a,l,u):(Fr(l),a=ir(a,l,u),a!==null?a.sibling:null);Fr(l);break;case 19:var p=(a.flags&128)!==0;if(d=(u&l.childLanes)!==0,d||(Ku(a,l,u,!1),d=(u&l.childLanes)!==0),p){if(d)return bx(a,l,u);l.flags|=128}if(p=l.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(un,un.current),d)break;return null;case 22:case 23:return l.lanes=0,dx(a,l,u);case 24:Nr(l,cn,a.memoizedState.cache)}return ir(a,l,u)}function Tx(a,l,u){if(a!==null)if(a.memoizedProps!==l.pendingProps)pn=!0;else{if(!V_(a,u)&&(l.flags&128)===0)return pn=!1,SL(a,l,u);pn=(a.flags&131072)!==0}else pn=!1,ne&&(l.flags&1048576)!==0&&QE(l,em,l.index);switch(l.lanes=0,l.tag){case 16:t:{a=l.pendingProps;var d=l.elementType,p=d._init;if(d=p(d._payload),l.type=d,typeof d=="function")Gy(d)?(a=vo(d,a),l.tag=1,l=px(null,l,d,a,u)):(l.tag=0,l=D_(null,l,d,a,u));else{if(d!=null){if(p=d.$$typeof,p===H){l.tag=11,l=ux(null,l,d,a,u);break t}else if(p===O){l.tag=14,l=hx(null,l,d,a,u);break t}}throw l=At(d)||d,Error(i(306,l,""))}}return l;case 0:return D_(a,l,l.type,l.pendingProps,u);case 1:return d=l.type,p=vo(d,l.pendingProps),px(a,l,d,p,u);case 3:t:{if(Tt(l,l.stateNode.containerInfo),a===null)throw Error(i(387));d=l.pendingProps;var v=l.memoizedState;p=v.element,r_(a,l),eh(l,d,null,u);var S=l.memoizedState;if(d=S.cache,Nr(l,cn,d),d!==v.cache&&Jy(l,[cn],u,!0),th(),d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=yx(a,l,d,u);break t}else if(d!==p){p=Si(Error(i(424)),l),Yu(p),l=yx(a,l,d,u);break t}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Oe=Gi(a.firstChild),Hn=l,ne=!0,fo=null,hs=!0,u=JS(l,null,d,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Wu(),d===p){l=ir(a,l,u);break t}Sn(a,l,d,u)}l=l.child}return l;case 26:return Tm(a,l),a===null?(u=xA(l.type,null,l.pendingProps,null))?l.memoizedState=u:ne||(u=l.type,a=l.pendingProps,d=Vm(gt.current).createElement(u),d[an]=l,d[Qe]=a,An(d,u,a),Ue(d),l.stateNode=d):l.memoizedState=xA(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Pt(l),a===null&&ne&&(d=l.stateNode=wA(l.type,l.pendingProps,gt.current),Hn=l,hs=!0,p=Oe,Xr(l.type)?(pv=p,Oe=Gi(d.firstChild)):Oe=p),Sn(a,l,l.pendingProps.children,u),Tm(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&ne&&((p=d=Oe)&&(d=ZL(d,l.type,l.pendingProps,hs),d!==null?(l.stateNode=d,Hn=l,Oe=Gi(d.firstChild),hs=!1,p=!0):p=!1),p||mo(l)),Pt(l),p=l.type,v=l.pendingProps,S=a!==null?a.memoizedProps:null,d=v.children,fv(p,v)?d=null:S!==null&&fv(p,S)&&(l.flags|=32),l.memoizedState!==null&&(p=h_(a,l,pL,null,null,u),Eh._currentValue=p),Tm(a,l),Sn(a,l,d,u),l.child;case 6:return a===null&&ne&&((a=u=Oe)&&(u=JL(u,l.pendingProps,hs),u!==null?(l.stateNode=u,Hn=l,Oe=null,a=!0):a=!1),a||mo(l)),null;case 13:return _x(a,l,u);case 4:return Tt(l,l.stateNode.containerInfo),d=l.pendingProps,a===null?l.child=Zl(l,null,d,u):Sn(a,l,d,u),l.child;case 11:return ux(a,l,l.type,l.pendingProps,u);case 7:return Sn(a,l,l.pendingProps,u),l.child;case 8:return Sn(a,l,l.pendingProps.children,u),l.child;case 12:return Sn(a,l,l.pendingProps.children,u),l.child;case 10:return d=l.pendingProps,Nr(l,l.type,d.value),Sn(a,l,d.children,u),l.child;case 9:return p=l.type._context,d=l.pendingProps.children,po(l),p=Cn(p),d=d(p),l.flags|=1,Sn(a,l,d,u),l.child;case 14:return hx(a,l,l.type,l.pendingProps,u);case 15:return fx(a,l,l.type,l.pendingProps,u);case 19:return bx(a,l,u);case 31:return d=l.pendingProps,u=l.mode,d={mode:d.mode,children:d.children},a===null?(u=wm(d,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=Xs(a.child,d),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return dx(a,l,u);case 24:return po(l),d=Cn(cn),a===null?(p=n_(),p===null&&(p=we,v=t_(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=u),p=v),l.memoizedState={parent:d,cache:p},s_(l),Nr(l,cn,p)):((a.lanes&u)!==0&&(r_(a,l),eh(l,null,null,u),th()),p=a.memoizedState,v=l.memoizedState,p.parent!==d?(p={parent:d,cache:d},l.memoizedState=p,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=p),Nr(l,cn,d)):(d=v.cache,Nr(l,cn,d),d!==p.cache&&Jy(l,[cn],u,!0))),Sn(a,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function sr(a){a.flags|=4}function wx(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!CA(l)){if(l=Ri.current,l!==null&&((Zt&4194048)===Zt?fs!==null:(Zt&62914560)!==Zt&&(Zt&536870912)===0||l!==fs))throw Zu=i_,rS;a.flags|=8192}}function Em(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?xu():536870912,a.lanes|=l,nc|=l)}function lh(a,l){if(!ne)switch(a.tailMode){case"hidden":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function De(a){var l=a.alternate!==null&&a.alternate.child===a.child,u=0,d=0;if(l)for(var p=a.child;p!==null;)u|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)u|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=d,a.childLanes=u,l}function xL(a,l,u){var d=l.pendingProps;switch($y(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(l),null;case 1:return De(l),null;case 3:return u=l.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),tr(cn),pt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Gu(l)?sr(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,tS())),De(l),null;case 26:return u=l.memoizedState,a===null?(sr(l),u!==null?(De(l),wx(l,u)):(De(l),l.flags&=-16777217)):u?u!==a.memoizedState?(sr(l),De(l),wx(l,u)):(De(l),l.flags&=-16777217):(a.memoizedProps!==d&&sr(l),De(l),l.flags&=-16777217),null;case 27:Ft(l),u=gt.current;var p=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==d&&sr(l);else{if(!d){if(l.stateNode===null)throw Error(i(166));return De(l),null}a=lt.current,Gu(l)?ZE(l):(a=wA(p,d,u),l.stateNode=a,sr(l))}return De(l),null;case 5:if(Ft(l),u=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==d&&sr(l);else{if(!d){if(l.stateNode===null)throw Error(i(166));return De(l),null}if(a=lt.current,Gu(l))ZE(l);else{switch(p=Vm(gt.current),a){case 1:a=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=p.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?p.createElement("select",{is:d.is}):p.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?p.createElement(u,{is:d.is}):p.createElement(u)}}a[an]=l,a[Qe]=d;t:for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break t;for(;p.sibling===null;){if(p.return===null||p.return===l)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}l.stateNode=a;t:switch(An(a,u,d),u){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break t;case"img":a=!0;break t;default:a=!1}a&&sr(l)}}return De(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==d&&sr(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(i(166));if(a=gt.current,Gu(l)){if(a=l.stateNode,u=l.memoizedProps,d=null,p=Hn,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}a[an]=l,a=!!(a.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||gA(a.nodeValue,u)),a||mo(l)}else a=Vm(a).createTextNode(d),a[an]=l,l.stateNode=a}return De(l),null;case 13:if(d=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(p=Gu(l),d!==null&&d.dehydrated!==null){if(a===null){if(!p)throw Error(i(318));if(p=l.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[an]=l}else Wu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;De(l),p=!1}else p=tS(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),p=!0;if(!p)return l.flags&256?(nr(l),l):(nr(l),null)}if(nr(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=d!==null,a=a!==null&&a.memoizedState!==null,u){d=l.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048)}return u!==a&&u&&(l.child.flags|=8192),Em(l,l.updateQueue),De(l),null;case 4:return pt(),a===null&&ov(l.stateNode.containerInfo),De(l),null;case 10:return tr(l.type),De(l),null;case 19:if(st(un),p=l.memoizedState,p===null)return De(l),null;if(d=(l.flags&128)!==0,v=p.rendering,v===null)if(d)lh(p,!1);else{if(Ne!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(v=_m(a),v!==null){for(l.flags|=128,lh(p,!1),a=v.updateQueue,l.updateQueue=a,Em(l,a),l.subtreeFlags=0,a=u,u=l.child;u!==null;)XE(u,a),u=u.sibling;return W(un,un.current&1|2),l.child}a=a.sibling}p.tail!==null&&Wn()>Am&&(l.flags|=128,d=!0,lh(p,!1),l.lanes=4194304)}else{if(!d)if(a=_m(v),a!==null){if(l.flags|=128,d=!0,a=a.updateQueue,l.updateQueue=a,Em(l,a),lh(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!ne)return De(l),null}else 2*Wn()-p.renderingStartTime>Am&&u!==536870912&&(l.flags|=128,d=!0,lh(p,!1),l.lanes=4194304);p.isBackwards?(v.sibling=l.child,l.child=v):(a=p.last,a!==null?a.sibling=v:l.child=v,p.last=v)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=Wn(),l.sibling=null,a=un.current,W(un,d?a&1|2:a&1),l):(De(l),null);case 22:case 23:return nr(l),c_(),d=l.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(u&536870912)!==0&&(l.flags&128)===0&&(De(l),l.subtreeFlags&6&&(l.flags|=8192)):De(l),u=l.updateQueue,u!==null&&Em(l,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==u&&(l.flags|=2048),a!==null&&st(yo),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),tr(cn),De(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function AL(a,l){switch($y(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return tr(cn),pt(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Ft(l),null;case 13:if(nr(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Wu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return st(un),null;case 4:return pt(),null;case 10:return tr(l.type),null;case 22:case 23:return nr(l),c_(),a!==null&&st(yo),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return tr(cn),null;case 25:return null;default:return null}}function Ex(a,l){switch($y(l),l.tag){case 3:tr(cn),pt();break;case 26:case 27:case 5:Ft(l);break;case 4:pt();break;case 13:nr(l);break;case 19:st(un);break;case 10:tr(l.type);break;case 22:case 23:nr(l),c_(),a!==null&&st(yo);break;case 24:tr(cn)}}function ch(a,l){try{var u=l.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&a)===a){d=void 0;var v=u.create,S=u.inst;d=v(),S.destroy=d}u=u.next}while(u!==p)}}catch(D){be(l,l.return,D)}}function zr(a,l,u){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var v=p.next;d=v;do{if((d.tag&a)===a){var S=d.inst,D=S.destroy;if(D!==void 0){S.destroy=void 0,p=l;var z=u,J=D;try{J()}catch(ct){be(p,z,ct)}}}d=d.next}while(d!==v)}}catch(ct){be(l,l.return,ct)}}function Sx(a){var l=a.updateQueue;if(l!==null){var u=a.stateNode;try{hS(l,u)}catch(d){be(a,a.return,d)}}}function xx(a,l,u){u.props=vo(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(d){be(a,l,d)}}function uh(a,l){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof u=="function"?a.refCleanup=u(d):u.current=d}}catch(p){be(a,l,p)}}function ds(a,l){var u=a.ref,d=a.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(p){be(a,l,p)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){be(a,l,p)}else u.current=null}function Ax(a){var l=a.type,u=a.memoizedProps,d=a.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(p){be(a,a.return,p)}}function L_(a,l,u){try{var d=a.stateNode;YL(d,a.type,u,l),d[Qe]=l}catch(p){be(a,a.return,p)}}function Ix(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Xr(a.type)||a.tag===4}function j_(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Ix(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Xr(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function B_(a,l,u){var d=a.tag;if(d===5||d===6)a=a.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(a),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Nm));else if(d!==4&&(d===27&&Xr(a.type)&&(u=a.stateNode,l=null),a=a.child,a!==null))for(B_(a,l,u),a=a.sibling;a!==null;)B_(a,l,u),a=a.sibling}function Sm(a,l,u){var d=a.tag;if(d===5||d===6)a=a.stateNode,l?u.insertBefore(a,l):u.appendChild(a);else if(d!==4&&(d===27&&Xr(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Sm(a,l,u),a=a.sibling;a!==null;)Sm(a,l,u),a=a.sibling}function Rx(a){var l=a.stateNode,u=a.memoizedProps;try{for(var d=a.type,p=l.attributes;p.length;)l.removeAttributeNode(p[0]);An(l,d,u),l[an]=a,l[Qe]=u}catch(v){be(a,a.return,v)}}var rr=!1,He=!1,F_=!1,Dx=typeof WeakSet=="function"?WeakSet:Set,yn=null;function IL(a,l){if(a=a.containerInfo,uv=zm,a=FE(a),jy(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else t:{u=(u=a.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break t}var S=0,D=-1,z=-1,J=0,ct=0,ft=a,et=null;e:for(;;){for(var nt;ft!==u||p!==0&&ft.nodeType!==3||(D=S+p),ft!==v||d!==0&&ft.nodeType!==3||(z=S+d),ft.nodeType===3&&(S+=ft.nodeValue.length),(nt=ft.firstChild)!==null;)et=ft,ft=nt;for(;;){if(ft===a)break e;if(et===u&&++J===p&&(D=S),et===v&&++ct===d&&(z=S),(nt=ft.nextSibling)!==null)break;ft=et,et=ft.parentNode}ft=nt}u=D===-1||z===-1?null:{start:D,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(hv={focusedElem:a,selectionRange:u},zm=!1,yn=l;yn!==null;)if(l=yn,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,yn=a;else for(;yn!==null;){switch(l=yn,v=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&v!==null){a=void 0,u=l,p=v.memoizedProps,v=v.memoizedState,d=u.stateNode;try{var Vt=vo(u.type,p,u.elementType===u.type);a=d.getSnapshotBeforeUpdate(Vt,v),d.__reactInternalSnapshotBeforeUpdate=a}catch(kt){be(u,u.return,kt)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,u=a.nodeType,u===9)mv(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":mv(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=l.sibling,a!==null){a.return=l.return,yn=a;break}yn=l.return}}function Cx(a,l,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Hr(a,u),d&4&&ch(5,u);break;case 1:if(Hr(a,u),d&4)if(a=u.stateNode,l===null)try{a.componentDidMount()}catch(S){be(u,u.return,S)}else{var p=vo(u.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(p,l,a.__reactInternalSnapshotBeforeUpdate)}catch(S){be(u,u.return,S)}}d&64&&Sx(u),d&512&&uh(u,u.return);break;case 3:if(Hr(a,u),d&64&&(a=u.updateQueue,a!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{hS(a,l)}catch(S){be(u,u.return,S)}}break;case 27:l===null&&d&4&&Rx(u);case 26:case 5:Hr(a,u),l===null&&d&4&&Ax(u),d&512&&uh(u,u.return);break;case 12:Hr(a,u);break;case 13:Hr(a,u),d&4&&kx(a,u),d&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=VL.bind(null,u),t4(a,u))));break;case 22:if(d=u.memoizedState!==null||rr,!d){l=l!==null&&l.memoizedState!==null||He,p=rr;var v=He;rr=d,(He=l)&&!v?qr(a,u,(u.subtreeFlags&8772)!==0):Hr(a,u),rr=p,He=v}break;case 30:break;default:Hr(a,u)}}function Mx(a){var l=a.alternate;l!==null&&(a.alternate=null,Mx(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Mr(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ae=null,Kn=!1;function ar(a,l,u){for(u=u.child;u!==null;)Px(a,l,u),u=u.sibling}function Px(a,l,u){if(oe&&typeof oe.onCommitFiberUnmount=="function")try{oe.onCommitFiberUnmount(ke,u)}catch{}switch(u.tag){case 26:He||ds(u,l),ar(a,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:He||ds(u,l);var d=Ae,p=Kn;Xr(u.type)&&(Ae=u.stateNode,Kn=!1),ar(a,l,u),vh(u.stateNode),Ae=d,Kn=p;break;case 5:He||ds(u,l);case 6:if(d=Ae,p=Kn,Ae=null,ar(a,l,u),Ae=d,Kn=p,Ae!==null)if(Kn)try{(Ae.nodeType===9?Ae.body:Ae.nodeName==="HTML"?Ae.ownerDocument.body:Ae).removeChild(u.stateNode)}catch(v){be(u,l,v)}else try{Ae.removeChild(u.stateNode)}catch(v){be(u,l,v)}break;case 18:Ae!==null&&(Kn?(a=Ae,bA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Ih(a)):bA(Ae,u.stateNode));break;case 4:d=Ae,p=Kn,Ae=u.stateNode.containerInfo,Kn=!0,ar(a,l,u),Ae=d,Kn=p;break;case 0:case 11:case 14:case 15:He||zr(2,u,l),He||zr(4,u,l),ar(a,l,u);break;case 1:He||(ds(u,l),d=u.stateNode,typeof d.componentWillUnmount=="function"&&xx(u,l,d)),ar(a,l,u);break;case 21:ar(a,l,u);break;case 22:He=(d=He)||u.memoizedState!==null,ar(a,l,u),He=d;break;default:ar(a,l,u)}}function kx(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ih(a)}catch(u){be(l,l.return,u)}}function RL(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new Dx),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new Dx),l;default:throw Error(i(435,a.tag))}}function U_(a,l){var u=RL(a);l.forEach(function(d){var p=LL.bind(null,a,d);u.has(d)||(u.add(d),d.then(p,p))})}function oi(a,l){var u=l.deletions;if(u!==null)for(var d=0;d<u.length;d++){var p=u[d],v=a,S=l,D=S;t:for(;D!==null;){switch(D.tag){case 27:if(Xr(D.type)){Ae=D.stateNode,Kn=!1;break t}break;case 5:Ae=D.stateNode,Kn=!1;break t;case 3:case 4:Ae=D.stateNode.containerInfo,Kn=!0;break t}D=D.return}if(Ae===null)throw Error(i(160));Px(v,S,p),Ae=null,Kn=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Ox(l,a),l=l.sibling}var qi=null;function Ox(a,l){var u=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:oi(l,a),li(a),d&4&&(zr(3,a,a.return),ch(3,a),zr(5,a,a.return));break;case 1:oi(l,a),li(a),d&512&&(He||u===null||ds(u,u.return)),d&64&&rr&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var p=qi;if(oi(l,a),li(a),d&512&&(He||u===null||ds(u,u.return)),d&4){var v=u!==null?u.memoizedState:null;if(d=a.memoizedState,u===null)if(d===null)if(a.stateNode===null){t:{d=a.type,u=a.memoizedProps,p=p.ownerDocument||p;e:switch(d){case"title":v=p.getElementsByTagName("title")[0],(!v||v[Ya]||v[an]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(d),p.head.insertBefore(v,p.querySelector("head > title"))),An(v,d,u),v[an]=a,Ue(v),d=v;break t;case"link":var S=RA("link","href",p).get(d+(u.href||""));if(S){for(var D=0;D<S.length;D++)if(v=S[D],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){S.splice(D,1);break e}}v=p.createElement(d),An(v,d,u),p.head.appendChild(v);break;case"meta":if(S=RA("meta","content",p).get(d+(u.content||""))){for(D=0;D<S.length;D++)if(v=S[D],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){S.splice(D,1);break e}}v=p.createElement(d),An(v,d,u),p.head.appendChild(v);break;default:throw Error(i(468,d))}v[an]=a,Ue(v),d=v}a.stateNode=d}else DA(p,a.type,a.stateNode);else a.stateNode=IA(p,d,a.memoizedProps);else v!==d?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,d===null?DA(p,a.type,a.stateNode):IA(p,d,a.memoizedProps)):d===null&&a.stateNode!==null&&L_(a,a.memoizedProps,u.memoizedProps)}break;case 27:oi(l,a),li(a),d&512&&(He||u===null||ds(u,u.return)),u!==null&&d&4&&L_(a,a.memoizedProps,u.memoizedProps);break;case 5:if(oi(l,a),li(a),d&512&&(He||u===null||ds(u,u.return)),a.flags&32){p=a.stateNode;try{bi(p,"")}catch(nt){be(a,a.return,nt)}}d&4&&a.stateNode!=null&&(p=a.memoizedProps,L_(a,p,u!==null?u.memoizedProps:p)),d&1024&&(F_=!0);break;case 6:if(oi(l,a),li(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,u=a.stateNode;try{u.nodeValue=d}catch(nt){be(a,a.return,nt)}}break;case 3:if(Bm=null,p=qi,qi=Lm(l.containerInfo),oi(l,a),qi=p,li(a),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Ih(l.containerInfo)}catch(nt){be(a,a.return,nt)}F_&&(F_=!1,Nx(a));break;case 4:d=qi,qi=Lm(a.stateNode.containerInfo),oi(l,a),li(a),qi=d;break;case 12:oi(l,a),li(a);break;case 13:oi(l,a),li(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Y_=Wn()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,U_(a,d)));break;case 22:p=a.memoizedState!==null;var z=u!==null&&u.memoizedState!==null,J=rr,ct=He;if(rr=J||p,He=ct||z,oi(l,a),He=ct,rr=J,li(a),d&8192)t:for(l=a.stateNode,l._visibility=p?l._visibility&-2:l._visibility|1,p&&(u===null||z||rr||He||bo(a)),u=null,l=a;;){if(l.tag===5||l.tag===26){if(u===null){z=u=l;try{if(v=z.stateNode,p)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{D=z.stateNode;var ft=z.memoizedProps.style,et=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;D.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(nt){be(z,z.return,nt)}}}else if(l.tag===6){if(u===null){z=l;try{z.stateNode.nodeValue=p?"":z.memoizedProps}catch(nt){be(z,z.return,nt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break t;for(;l.sibling===null;){if(l.return===null||l.return===a)break t;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=a.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,U_(a,u))));break;case 19:oi(l,a),li(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,U_(a,d)));break;case 30:break;case 21:break;default:oi(l,a),li(a)}}function li(a){var l=a.flags;if(l&2){try{for(var u,d=a.return;d!==null;){if(Ix(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var p=u.stateNode,v=j_(a);Sm(a,v,p);break;case 5:var S=u.stateNode;u.flags&32&&(bi(S,""),u.flags&=-33);var D=j_(a);Sm(a,D,S);break;case 3:case 4:var z=u.stateNode.containerInfo,J=j_(a);B_(a,J,z);break;default:throw Error(i(161))}}catch(ct){be(a,a.return,ct)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Nx(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;Nx(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Hr(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Cx(a,l.alternate,l),l=l.sibling}function bo(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:zr(4,l,l.return),bo(l);break;case 1:ds(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&xx(l,l.return,u),bo(l);break;case 27:vh(l.stateNode);case 26:case 5:ds(l,l.return),bo(l);break;case 22:l.memoizedState===null&&bo(l);break;case 30:bo(l);break;default:bo(l)}a=a.sibling}}function qr(a,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,p=a,v=l,S=v.flags;switch(v.tag){case 0:case 11:case 15:qr(p,v,u),ch(4,v);break;case 1:if(qr(p,v,u),d=v,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(J){be(d,d.return,J)}if(d=v,p=d.updateQueue,p!==null){var D=d.stateNode;try{var z=p.shared.hiddenCallbacks;if(z!==null)for(p.shared.hiddenCallbacks=null,p=0;p<z.length;p++)uS(z[p],D)}catch(J){be(d,d.return,J)}}u&&S&64&&Sx(v),uh(v,v.return);break;case 27:Rx(v);case 26:case 5:qr(p,v,u),u&&d===null&&S&4&&Ax(v),uh(v,v.return);break;case 12:qr(p,v,u);break;case 13:qr(p,v,u),u&&S&4&&kx(p,v);break;case 22:v.memoizedState===null&&qr(p,v,u),uh(v,v.return);break;case 30:break;default:qr(p,v,u)}l=l.sibling}}function z_(a,l){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&$u(u))}function H_(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&$u(a))}function ms(a,l,u,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Vx(a,l,u,d),l=l.sibling}function Vx(a,l,u,d){var p=l.flags;switch(l.tag){case 0:case 11:case 15:ms(a,l,u,d),p&2048&&ch(9,l);break;case 1:ms(a,l,u,d);break;case 3:ms(a,l,u,d),p&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&$u(a)));break;case 12:if(p&2048){ms(a,l,u,d),a=l.stateNode;try{var v=l.memoizedProps,S=v.id,D=v.onPostCommit;typeof D=="function"&&D(S,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){be(l,l.return,z)}}else ms(a,l,u,d);break;case 13:ms(a,l,u,d);break;case 23:break;case 22:v=l.stateNode,S=l.alternate,l.memoizedState!==null?v._visibility&2?ms(a,l,u,d):hh(a,l):v._visibility&2?ms(a,l,u,d):(v._visibility|=2,Jl(a,l,u,d,(l.subtreeFlags&10256)!==0)),p&2048&&z_(S,l);break;case 24:ms(a,l,u,d),p&2048&&H_(l.alternate,l);break;default:ms(a,l,u,d)}}function Jl(a,l,u,d,p){for(p=p&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var v=a,S=l,D=u,z=d,J=S.flags;switch(S.tag){case 0:case 11:case 15:Jl(v,S,D,z,p),ch(8,S);break;case 23:break;case 22:var ct=S.stateNode;S.memoizedState!==null?ct._visibility&2?Jl(v,S,D,z,p):hh(v,S):(ct._visibility|=2,Jl(v,S,D,z,p)),p&&J&2048&&z_(S.alternate,S);break;case 24:Jl(v,S,D,z,p),p&&J&2048&&H_(S.alternate,S);break;default:Jl(v,S,D,z,p)}l=l.sibling}}function hh(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=a,d=l,p=d.flags;switch(d.tag){case 22:hh(u,d),p&2048&&z_(d.alternate,d);break;case 24:hh(u,d),p&2048&&H_(d.alternate,d);break;default:hh(u,d)}l=l.sibling}}var fh=8192;function tc(a){if(a.subtreeFlags&fh)for(a=a.child;a!==null;)Lx(a),a=a.sibling}function Lx(a){switch(a.tag){case 26:tc(a),a.flags&fh&&a.memoizedState!==null&&d4(qi,a.memoizedState,a.memoizedProps);break;case 5:tc(a);break;case 3:case 4:var l=qi;qi=Lm(a.stateNode.containerInfo),tc(a),qi=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=fh,fh=16777216,tc(a),fh=l):tc(a));break;default:tc(a)}}function jx(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function dh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];yn=d,Fx(d,a)}jx(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bx(a),a=a.sibling}function Bx(a){switch(a.tag){case 0:case 11:case 15:dh(a),a.flags&2048&&zr(9,a,a.return);break;case 3:dh(a);break;case 12:dh(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,xm(a)):dh(a);break;default:dh(a)}}function xm(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];yn=d,Fx(d,a)}jx(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:zr(8,l,l.return),xm(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,xm(l));break;default:xm(l)}a=a.sibling}}function Fx(a,l){for(;yn!==null;){var u=yn;switch(u.tag){case 0:case 11:case 15:zr(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:$u(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,yn=d;else t:for(u=a;yn!==null;){d=yn;var p=d.sibling,v=d.return;if(Mx(d),d===u){yn=null;break t}if(p!==null){p.return=v,yn=p;break t}yn=v}}}var DL={getCacheForType:function(a){var l=Cn(cn),u=l.data.get(a);return u===void 0&&(u=a(),l.data.set(a,u)),u}},CL=typeof WeakMap=="function"?WeakMap:Map,le=0,we=null,Wt=null,Zt=0,ce=0,ci=null,Gr=!1,ec=!1,q_=!1,or=0,Ne=0,Wr=0,To=0,G_=0,Di=0,nc=0,mh=null,$n=null,W_=!1,Y_=0,Am=1/0,Im=null,Yr=null,xn=0,Kr=null,ic=null,sc=0,K_=0,$_=null,Ux=null,gh=0,X_=null;function ui(){if((le&2)!==0&&Zt!==0)return Zt&-Zt;if(Q.T!==null){var a=Gl;return a!==0?a:iv()}return Dr()}function zx(){Di===0&&(Di=(Zt&536870912)===0||ne?Su():536870912);var a=Ri.current;return a!==null&&(a.flags|=32),Di}function hi(a,l,u){(a===we&&(ce===2||ce===9)||a.cancelPendingCommit!==null)&&(rc(a,0),$r(a,Zt,Di,!1)),Bs(a,u),((le&2)===0||a!==we)&&(a===we&&((le&2)===0&&(To|=u),Ne===4&&$r(a,Zt,Di,!1)),gs(a))}function Hx(a,l,u){if((le&6)!==0)throw Error(i(327));var d=!u&&(l&124)===0&&(l&a.expiredLanes)===0||Wa(a,l),p=d?kL(a,l):J_(a,l,!0),v=d;do{if(p===0){ec&&!d&&$r(a,l,0,!1);break}else{if(u=a.current.alternate,v&&!ML(u)){p=J_(a,l,!1),v=!1;continue}if(p===2){if(v=l,a.errorRecoveryDisabledLanes&v)var S=0;else S=a.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){l=S;t:{var D=a;p=mh;var z=D.current.memoizedState.isDehydrated;if(z&&(rc(D,S).flags|=256),S=J_(D,S,!1),S!==2){if(q_&&!z){D.errorRecoveryDisabledLanes|=v,To|=v,p=4;break t}v=$n,$n=p,v!==null&&($n===null?$n=v:$n.push.apply($n,v))}p=S}if(v=!1,p!==2)continue}}if(p===1){rc(a,0),$r(a,l,0,!0);break}t:{switch(d=a,v=p,v){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:$r(d,l,Di,!Gr);break t;case 2:$n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(p=Y_+300-Wn(),10<p)){if($r(d,l,Di,!Gr),wl(d,0,!0)!==0)break t;d.timeoutHandle=_A(qx.bind(null,d,u,$n,Im,W_,l,Di,To,nc,Gr,v,2,-0,0),p);break t}qx(d,u,$n,Im,W_,l,Di,To,nc,Gr,v,0,-0,0)}}break}while(!0);gs(a)}function qx(a,l,u,d,p,v,S,D,z,J,ct,ft,et,nt){if(a.timeoutHandle=-1,ft=l.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(wh={stylesheets:null,count:0,unsuspend:f4},Lx(l),ft=m4(),ft!==null)){a.cancelPendingCommit=ft(Qx.bind(null,a,l,v,u,d,p,S,D,z,ct,1,et,nt)),$r(a,v,S,!J);return}Qx(a,l,v,u,d,p,S,D,z)}function ML(a){for(var l=a;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var p=u[d],v=p.getSnapshot;p=p.value;try{if(!ri(v(),p))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function $r(a,l,u,d){l&=~G_,l&=~To,a.suspendedLanes|=l,a.pingedLanes&=~l,d&&(a.warmLanes|=l),d=a.expirationTimes;for(var p=l;0<p;){var v=31-Dn(p),S=1<<v;d[v]=-1,p&=~S}u!==0&&ts(a,u,l)}function Rm(){return(le&6)===0?(ph(0),!1):!0}function Q_(){if(Wt!==null){if(ce===0)var a=Wt.return;else a=Wt,Js=go=null,m_(a),Ql=null,ah=0,a=Wt;for(;a!==null;)Ex(a.alternate,a),a=a.return;Wt=null}}function rc(a,l){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,$L(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Q_(),we=a,Wt=u=Xs(a.current,null),Zt=l,ce=0,ci=null,Gr=!1,ec=Wa(a,l),q_=!1,nc=Di=G_=To=Wr=Ne=0,$n=mh=null,W_=!1,(l&8)!==0&&(l|=l&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=l;0<d;){var p=31-Dn(d),v=1<<p;l|=a[p],d&=~v}return or=l,Xd(),u}function Gx(a,l){zt=null,Q.H=gm,l===Qu||l===rm?(l=lS(),ce=3):l===rS?(l=lS(),ce=4):ce=l===cx?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ci=l,Wt===null&&(Ne=1,bm(a,Si(l,a.current)))}function Wx(){var a=Q.H;return Q.H=gm,a===null?gm:a}function Yx(){var a=Q.A;return Q.A=DL,a}function Z_(){Ne=4,Gr||(Zt&4194048)!==Zt&&Ri.current!==null||(ec=!0),(Wr&134217727)===0&&(To&134217727)===0||we===null||$r(we,Zt,Di,!1)}function J_(a,l,u){var d=le;le|=2;var p=Wx(),v=Yx();(we!==a||Zt!==l)&&(Im=null,rc(a,l)),l=!1;var S=Ne;t:do try{if(ce!==0&&Wt!==null){var D=Wt,z=ci;switch(ce){case 8:Q_(),S=6;break t;case 3:case 2:case 9:case 6:Ri.current===null&&(l=!0);var J=ce;if(ce=0,ci=null,ac(a,D,z,J),u&&ec){S=0;break t}break;default:J=ce,ce=0,ci=null,ac(a,D,z,J)}}PL(),S=Ne;break}catch(ct){Gx(a,ct)}while(!0);return l&&a.shellSuspendCounter++,Js=go=null,le=d,Q.H=p,Q.A=v,Wt===null&&(we=null,Zt=0,Xd()),S}function PL(){for(;Wt!==null;)Kx(Wt)}function kL(a,l){var u=le;le|=2;var d=Wx(),p=Yx();we!==a||Zt!==l?(Im=null,Am=Wn()+500,rc(a,l)):ec=Wa(a,l);t:do try{if(ce!==0&&Wt!==null){l=Wt;var v=ci;e:switch(ce){case 1:ce=0,ci=null,ac(a,l,v,1);break;case 2:case 9:if(aS(v)){ce=0,ci=null,$x(l);break}l=function(){ce!==2&&ce!==9||we!==a||(ce=7),gs(a)},v.then(l,l);break t;case 3:ce=7;break t;case 4:ce=5;break t;case 7:aS(v)?(ce=0,ci=null,$x(l)):(ce=0,ci=null,ac(a,l,v,7));break;case 5:var S=null;switch(Wt.tag){case 26:S=Wt.memoizedState;case 5:case 27:var D=Wt;if(!S||CA(S)){ce=0,ci=null;var z=D.sibling;if(z!==null)Wt=z;else{var J=D.return;J!==null?(Wt=J,Dm(J)):Wt=null}break e}}ce=0,ci=null,ac(a,l,v,5);break;case 6:ce=0,ci=null,ac(a,l,v,6);break;case 8:Q_(),Ne=6;break t;default:throw Error(i(462))}}OL();break}catch(ct){Gx(a,ct)}while(!0);return Js=go=null,Q.H=d,Q.A=p,le=u,Wt!==null?0:(we=null,Zt=0,Xd(),Ne)}function OL(){for(;Wt!==null&&!Ir();)Kx(Wt)}function Kx(a){var l=Tx(a.alternate,a,or);a.memoizedProps=a.pendingProps,l===null?Dm(a):Wt=l}function $x(a){var l=a,u=l.alternate;switch(l.tag){case 15:case 0:l=gx(u,l,l.pendingProps,l.type,void 0,Zt);break;case 11:l=gx(u,l,l.pendingProps,l.type.render,l.ref,Zt);break;case 5:m_(l);default:Ex(u,l),l=Wt=XE(l,or),l=Tx(u,l,or)}a.memoizedProps=a.pendingProps,l===null?Dm(a):Wt=l}function ac(a,l,u,d){Js=go=null,m_(l),Ql=null,ah=0;var p=l.return;try{if(EL(a,p,l,u,Zt)){Ne=1,bm(a,Si(u,a.current)),Wt=null;return}}catch(v){if(p!==null)throw Wt=p,v;Ne=1,bm(a,Si(u,a.current)),Wt=null;return}l.flags&32768?(ne||d===1?a=!0:ec||(Zt&536870912)!==0?a=!1:(Gr=a=!0,(d===2||d===9||d===3||d===6)&&(d=Ri.current,d!==null&&d.tag===13&&(d.flags|=16384))),Xx(l,a)):Dm(l)}function Dm(a){var l=a;do{if((l.flags&32768)!==0){Xx(l,Gr);return}a=l.return;var u=xL(l.alternate,l,or);if(u!==null){Wt=u;return}if(l=l.sibling,l!==null){Wt=l;return}Wt=l=a}while(l!==null);Ne===0&&(Ne=5)}function Xx(a,l){do{var u=AL(a.alternate,a);if(u!==null){u.flags&=32767,Wt=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(a=a.sibling,a!==null)){Wt=a;return}Wt=a=u}while(a!==null);Ne=6,Wt=null}function Qx(a,l,u,d,p,v,S,D,z){a.cancelPendingCommit=null;do Cm();while(xn!==0);if((le&6)!==0)throw Error(i(327));if(l!==null){if(l===a.current)throw Error(i(177));if(v=l.lanes|l.childLanes,v|=Hy,Au(a,u,v,S,D,z),a===we&&(Wt=we=null,Zt=0),ic=l,Kr=a,sc=u,K_=v,$_=p,Ux=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,jL(za,function(){return nA(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=Q.T,Q.T=null,p=at.p,at.p=2,S=le,le|=4;try{IL(a,l,u)}finally{le=S,at.p=p,Q.T=d}}xn=1,Zx(),Jx(),tA()}}function Zx(){if(xn===1){xn=0;var a=Kr,l=ic,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null;var d=at.p;at.p=2;var p=le;le|=4;try{Ox(l,a);var v=hv,S=FE(a.containerInfo),D=v.focusedElem,z=v.selectionRange;if(S!==D&&D&&D.ownerDocument&&BE(D.ownerDocument.documentElement,D)){if(z!==null&&jy(D)){var J=z.start,ct=z.end;if(ct===void 0&&(ct=J),"selectionStart"in D)D.selectionStart=J,D.selectionEnd=Math.min(ct,D.value.length);else{var ft=D.ownerDocument||document,et=ft&&ft.defaultView||window;if(et.getSelection){var nt=et.getSelection(),Vt=D.textContent.length,kt=Math.min(z.start,Vt),ye=z.end===void 0?kt:Math.min(z.end,Vt);!nt.extend&&kt>ye&&(S=ye,ye=kt,kt=S);var Y=jE(D,kt),q=jE(D,ye);if(Y&&q&&(nt.rangeCount!==1||nt.anchorNode!==Y.node||nt.anchorOffset!==Y.offset||nt.focusNode!==q.node||nt.focusOffset!==q.offset)){var Z=ft.createRange();Z.setStart(Y.node,Y.offset),nt.removeAllRanges(),kt>ye?(nt.addRange(Z),nt.extend(q.node,q.offset)):(Z.setEnd(q.node,q.offset),nt.addRange(Z))}}}}for(ft=[],nt=D;nt=nt.parentNode;)nt.nodeType===1&&ft.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ft.length;D++){var ut=ft[D];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}zm=!!uv,hv=uv=null}finally{le=p,at.p=d,Q.T=u}}a.current=l,xn=2}}function Jx(){if(xn===2){xn=0;var a=Kr,l=ic,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=Q.T,Q.T=null;var d=at.p;at.p=2;var p=le;le|=4;try{Cx(a,l.alternate,l)}finally{le=p,at.p=d,Q.T=u}}xn=3}}function tA(){if(xn===4||xn===3){xn=0,Bi();var a=Kr,l=ic,u=sc,d=Ux;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?xn=5:(xn=0,ic=Kr=null,eA(a,a.pendingLanes));var p=a.pendingLanes;if(p===0&&(Yr=null),El(u),l=l.stateNode,oe&&typeof oe.onCommitFiberRoot=="function")try{oe.onCommitFiberRoot(ke,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=Q.T,p=at.p,at.p=2,Q.T=null;try{for(var v=a.onRecoverableError,S=0;S<d.length;S++){var D=d[S];v(D.value,{componentStack:D.stack})}}finally{Q.T=l,at.p=p}}(sc&3)!==0&&Cm(),gs(a),p=a.pendingLanes,(u&4194090)!==0&&(p&42)!==0?a===X_?gh++:(gh=0,X_=a):gh=0,ph(0)}}function eA(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,$u(l)))}function Cm(a){return Zx(),Jx(),tA(),nA()}function nA(){if(xn!==5)return!1;var a=Kr,l=K_;K_=0;var u=El(sc),d=Q.T,p=at.p;try{at.p=32>u?32:u,Q.T=null,u=$_,$_=null;var v=Kr,S=sc;if(xn=0,ic=Kr=null,sc=0,(le&6)!==0)throw Error(i(331));var D=le;if(le|=4,Bx(v.current),Vx(v,v.current,S,u),le=D,ph(0,!1),oe&&typeof oe.onPostCommitFiberRoot=="function")try{oe.onPostCommitFiberRoot(ke,v)}catch{}return!0}finally{at.p=p,Q.T=d,eA(a,l)}}function iA(a,l,u){l=Si(u,l),l=R_(a.stateNode,l,2),a=jr(a,l,2),a!==null&&(Bs(a,2),gs(a))}function be(a,l,u){if(a.tag===3)iA(a,a,u);else for(;l!==null;){if(l.tag===3){iA(l,a,u);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Yr===null||!Yr.has(d))){a=Si(u,a),u=ox(2),d=jr(l,u,2),d!==null&&(lx(u,d,l,a),Bs(d,2),gs(d));break}}l=l.return}}function tv(a,l,u){var d=a.pingCache;if(d===null){d=a.pingCache=new CL;var p=new Set;d.set(l,p)}else p=d.get(l),p===void 0&&(p=new Set,d.set(l,p));p.has(u)||(q_=!0,p.add(u),a=NL.bind(null,a,l,u),l.then(a,a))}function NL(a,l,u){var d=a.pingCache;d!==null&&d.delete(l),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,we===a&&(Zt&u)===u&&(Ne===4||Ne===3&&(Zt&62914560)===Zt&&300>Wn()-Y_?(le&2)===0&&rc(a,0):G_|=u,nc===Zt&&(nc=0)),gs(a)}function sA(a,l){l===0&&(l=xu()),a=Ul(a,l),a!==null&&(Bs(a,l),gs(a))}function VL(a){var l=a.memoizedState,u=0;l!==null&&(u=l.retryLane),sA(a,u)}function LL(a,l){var u=0;switch(a.tag){case 13:var d=a.stateNode,p=a.memoizedState;p!==null&&(u=p.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(l),sA(a,u)}function jL(a,l){return ve(a,l)}var Mm=null,oc=null,ev=!1,Pm=!1,nv=!1,wo=0;function gs(a){a!==oc&&a.next===null&&(oc===null?Mm=oc=a:oc=oc.next=a),Pm=!0,ev||(ev=!0,FL())}function ph(a,l){if(!nv&&Pm){nv=!0;do for(var u=!1,d=Mm;d!==null;){if(a!==0){var p=d.pendingLanes;if(p===0)var v=0;else{var S=d.suspendedLanes,D=d.pingedLanes;v=(1<<31-Dn(42|a)+1)-1,v&=p&~(S&~D),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,lA(d,v))}else v=Zt,v=wl(d,d===we?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Wa(d,v)||(u=!0,lA(d,v));d=d.next}while(u);nv=!1}}function BL(){rA()}function rA(){Pm=ev=!1;var a=0;wo!==0&&(KL()&&(a=wo),wo=0);for(var l=Wn(),u=null,d=Mm;d!==null;){var p=d.next,v=aA(d,l);v===0?(d.next=null,u===null?Mm=p:u.next=p,p===null&&(oc=u)):(u=d,(a!==0||(v&3)!==0)&&(Pm=!0)),d=p}ph(a)}function aA(a,l){for(var u=a.suspendedLanes,d=a.pingedLanes,p=a.expirationTimes,v=a.pendingLanes&-62914561;0<v;){var S=31-Dn(v),D=1<<S,z=p[S];z===-1?((D&u)===0||(D&d)!==0)&&(p[S]=Eu(D,l)):z<=l&&(a.expiredLanes|=D),v&=~D}if(l=we,u=Zt,u=wl(a,a===l?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,u===0||a===l&&(ce===2||ce===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Xe(d),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Wa(a,u)){if(l=u&-u,l===a.callbackPriority)return l;switch(d!==null&&Xe(d),El(u)){case 2:case 8:u=bl;break;case 32:u=za;break;case 268435456:u=Tl;break;default:u=za}return d=oA.bind(null,a),u=ve(u,d),a.callbackPriority=l,a.callbackNode=u,l}return d!==null&&d!==null&&Xe(d),a.callbackPriority=2,a.callbackNode=null,2}function oA(a,l){if(xn!==0&&xn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Cm()&&a.callbackNode!==u)return null;var d=Zt;return d=wl(a,a===we?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(Hx(a,d,l),aA(a,Wn()),a.callbackNode!=null&&a.callbackNode===u?oA.bind(null,a):null)}function lA(a,l){if(Cm())return null;Hx(a,l,!0)}function FL(){XL(function(){(le&6)!==0?ve(Tu,BL):rA()})}function iv(){return wo===0&&(wo=Su()),wo}function cA(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Dl(""+a)}function uA(a,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,a.id&&u.setAttribute("form",a.id),l.parentNode.insertBefore(u,l),a=new FormData(a),u.parentNode.removeChild(u),a}function UL(a,l,u,d,p){if(l==="submit"&&u&&u.stateNode===p){var v=cA((p[Qe]||null).action),S=d.submitter;S&&(l=(l=S[Qe]||null)?cA(l.formAction):S.getAttribute("formAction"),l!==null&&(v=l,S=null));var D=new Cl("action","action",null,d,p);a.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(wo!==0){var z=S?uA(p,S):new FormData(p);E_(u,{pending:!0,data:z,method:p.method,action:v},null,z)}}else typeof v=="function"&&(D.preventDefault(),z=S?uA(p,S):new FormData(p),E_(u,{pending:!0,data:z,method:p.method,action:v},v,z))},currentTarget:p}]})}}for(var sv=0;sv<zy.length;sv++){var rv=zy[sv],zL=rv.toLowerCase(),HL=rv[0].toUpperCase()+rv.slice(1);Hi(zL,"on"+HL)}Hi(HE,"onAnimationEnd"),Hi(qE,"onAnimationIteration"),Hi(GE,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(aL,"onTransitionRun"),Hi(oL,"onTransitionStart"),Hi(lL,"onTransitionCancel"),Hi(WE,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yh));function hA(a,l){l=(l&4)!==0;for(var u=0;u<a.length;u++){var d=a[u],p=d.event;d=d.listeners;t:{var v=void 0;if(l)for(var S=d.length-1;0<=S;S--){var D=d[S],z=D.instance,J=D.currentTarget;if(D=D.listener,z!==v&&p.isPropagationStopped())break t;v=D,p.currentTarget=J;try{v(p)}catch(ct){vm(ct)}p.currentTarget=null,v=z}else for(S=0;S<d.length;S++){if(D=d[S],z=D.instance,J=D.currentTarget,D=D.listener,z!==v&&p.isPropagationStopped())break t;v=D,p.currentTarget=J;try{v(p)}catch(ct){vm(ct)}p.currentTarget=null,v=z}}}}function Yt(a,l){var u=l[Ru];u===void 0&&(u=l[Ru]=new Set);var d=a+"__bubble";u.has(d)||(fA(l,a,2,!1),u.add(d))}function av(a,l,u){var d=0;l&&(d|=4),fA(u,a,d,l)}var km="_reactListening"+Math.random().toString(36).slice(2);function ov(a){if(!a[km]){a[km]=!0,Du.forEach(function(u){u!=="selectionchange"&&(qL.has(u)||av(u,!1,a),av(u,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[km]||(l[km]=!0,av("selectionchange",!1,l))}}function fA(a,l,u,d){switch(VA(l)){case 2:var p=y4;break;case 8:p=_4;break;default:p=Tv}u=p.bind(null,l,u,a),p=void 0,!wi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(p=!0),d?p!==void 0?a.addEventListener(l,u,{capture:!0,passive:p}):a.addEventListener(l,u,!0):p!==void 0?a.addEventListener(l,u,{passive:p}):a.addEventListener(l,u,!1)}function lv(a,l,u,d,p){var v=d;if((l&1)===0&&(l&2)===0&&d!==null)t:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var D=d.stateNode.containerInfo;if(D===p)break;if(S===4)for(S=d.return;S!==null;){var z=S.tag;if((z===3||z===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;D!==null;){if(S=Fs(D),S===null)return;if(z=S.tag,z===5||z===6||z===26||z===27){d=v=S;continue t}D=D.parentNode}}d=d.return}Nd(function(){var J=v,ct=Ti(u),ft=[];t:{var et=YE.get(a);if(et!==void 0){var nt=Cl,Vt=a;switch(a){case"keypress":if(as(u)===0)break t;case"keydown":case"keyup":nt=Vl;break;case"focusin":Vt="focus",nt=kl;break;case"focusout":Vt="blur",nt=kl;break;case"beforeblur":case"afterblur":nt=kl;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=Ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Hd;break;case HE:case qE:case GE:nt=Ol;break;case WE:nt=Gd;break;case"scroll":case"scrollend":nt=Vd;break;case"wheel":nt=Ll;break;case"copy":case"cut":case"paste":nt=Nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=Uu;break;case"toggle":case"beforetoggle":nt=Yd}var kt=(l&4)!==0,ye=!kt&&(a==="scroll"||a==="scrollend"),Y=kt?et!==null?et+"Capture":null:et;kt=[];for(var q=J,Z;q!==null;){var ut=q;if(Z=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||Z===null||Y===null||(ut=to(q,Y),ut!=null&&kt.push(_h(q,ut,Z))),ye)break;q=q.return}0<kt.length&&(et=new nt(et,Vt,null,u,ct),ft.push({event:et,listeners:kt}))}}if((l&7)===0){t:{if(et=a==="mouseover"||a==="pointerover",nt=a==="mouseout"||a==="pointerout",et&&u!==qs&&(Vt=u.relatedTarget||u.fromElement)&&(Fs(Vt)||Vt[vi]))break t;if((nt||et)&&(et=ct.window===ct?ct:(et=ct.ownerDocument)?et.defaultView||et.parentWindow:window,nt?(Vt=u.relatedTarget||u.toElement,nt=J,Vt=Vt?Fs(Vt):null,Vt!==null&&(ye=r(Vt),kt=Vt.tag,Vt!==ye||kt!==5&&kt!==27&&kt!==6)&&(Vt=null)):(nt=null,Vt=J),nt!==Vt)){if(kt=Ei,ut="onMouseLeave",Y="onMouseEnter",q="mouse",(a==="pointerout"||a==="pointerover")&&(kt=Uu,ut="onPointerLeave",Y="onPointerEnter",q="pointer"),ye=nt==null?et:ns(nt),Z=Vt==null?et:ns(Vt),et=new kt(ut,q+"leave",nt,u,ct),et.target=ye,et.relatedTarget=Z,ut=null,Fs(ct)===J&&(kt=new kt(Y,q+"enter",Vt,u,ct),kt.target=Z,kt.relatedTarget=ye,ut=kt),ye=ut,nt&&Vt)e:{for(kt=nt,Y=Vt,q=0,Z=kt;Z;Z=lc(Z))q++;for(Z=0,ut=Y;ut;ut=lc(ut))Z++;for(;0<q-Z;)kt=lc(kt),q--;for(;0<Z-q;)Y=lc(Y),Z--;for(;q--;){if(kt===Y||Y!==null&&kt===Y.alternate)break e;kt=lc(kt),Y=lc(Y)}kt=null}else kt=null;nt!==null&&dA(ft,et,nt,kt,!1),Vt!==null&&ye!==null&&dA(ft,ye,Vt,kt,!0)}}t:{if(et=J?ns(J):window,nt=et.nodeName&&et.nodeName.toLowerCase(),nt==="select"||nt==="input"&&et.type==="file")var xt=PE;else if(ln(et))if(kE)xt=iL;else{xt=eL;var Gt=tL}else nt=et.nodeName,!nt||nt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?J&&Ou(J.elementType)&&(xt=PE):xt=nL;if(xt&&(xt=xt(a,J))){$s(ft,xt,u,ct);break t}Gt&&Gt(a,et,J),a==="focusout"&&J&&et.type==="number"&&J.memoizedProps.value!=null&&kr(et,"number",et.value)}switch(Gt=J?ns(J):window,a){case"focusin":(ln(Gt)||Gt.contentEditable==="true")&&(jl=Gt,By=J,qu=null);break;case"focusout":qu=By=jl=null;break;case"mousedown":Fy=!0;break;case"contextmenu":case"mouseup":case"dragend":Fy=!1,UE(ft,u,ct);break;case"selectionchange":if(rL)break;case"keydown":case"keyup":UE(ft,u,ct)}var Dt;if(cs)t:{switch(a){case"compositionstart":var Ot="onCompositionStart";break t;case"compositionend":Ot="onCompositionEnd";break t;case"compositionupdate":Ot="onCompositionUpdate";break t}Ot=void 0}else Xt?it(a,u)&&(Ot="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Ot="onCompositionStart");Ot&&(E&&u.locale!=="ko"&&(Xt||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Xt&&(Dt=Vu()):(rs=ct,Or="value"in rs?rs.value:rs.textContent,Xt=!0)),Gt=Om(J,Ot),0<Gt.length&&(Ot=new Bu(Ot,a,null,u,ct),ft.push({event:Ot,listeners:Gt}),Dt?Ot.data=Dt:(Dt=_t(u),Dt!==null&&(Ot.data=Dt)))),(Dt=T?on(a,u):Qt(a,u))&&(Ot=Om(J,"onBeforeInput"),0<Ot.length&&(Gt=new Bu("onBeforeInput","beforeinput",null,u,ct),ft.push({event:Gt,listeners:Ot}),Gt.data=Dt)),UL(ft,a,J,u,ct)}hA(ft,l)})}function _h(a,l,u){return{instance:a,listener:l,currentTarget:u}}function Om(a,l){for(var u=l+"Capture",d=[];a!==null;){var p=a,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=to(a,u),p!=null&&d.unshift(_h(a,p,v)),p=to(a,l),p!=null&&d.push(_h(a,p,v))),a.tag===3)return d;a=a.return}return[]}function lc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function dA(a,l,u,d,p){for(var v=l._reactName,S=[];u!==null&&u!==d;){var D=u,z=D.alternate,J=D.stateNode;if(D=D.tag,z!==null&&z===d)break;D!==5&&D!==26&&D!==27||J===null||(z=J,p?(J=to(u,v),J!=null&&S.unshift(_h(u,J,z))):p||(J=to(u,v),J!=null&&S.push(_h(u,J,z)))),u=u.return}S.length!==0&&a.push({event:l,listeners:S})}var GL=/\r\n?/g,WL=/\u0000|\uFFFD/g;function mA(a){return(typeof a=="string"?a:""+a).replace(GL,`
`).replace(WL,"")}function gA(a,l){return l=mA(l),mA(a)===l}function Nm(){}function pe(a,l,u,d,p,v){switch(u){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||bi(a,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&bi(a,""+d);break;case"className":is(a,"class",d);break;case"tabIndex":is(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":is(a,u,d);break;case"style":ku(a,d,v);break;case"data":if(l!=="object"){is(a,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||u!=="href")){a.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(u);break}d=Dl(""+d),a.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(l!=="input"&&pe(a,l,"name",p.name,p,null),pe(a,l,"formEncType",p.formEncType,p,null),pe(a,l,"formMethod",p.formMethod,p,null),pe(a,l,"formTarget",p.formTarget,p,null)):(pe(a,l,"encType",p.encType,p,null),pe(a,l,"method",p.method,p,null),pe(a,l,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(u);break}d=Dl(""+d),a.setAttribute(u,d);break;case"onClick":d!=null&&(a.onclick=Nm);break;case"onScroll":d!=null&&Yt("scroll",a);break;case"onScrollEnd":d!=null&&Yt("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(p.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}u=Dl(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,""+d):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":d===!0?a.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,d):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(u,d):a.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(u):a.setAttribute(u,d);break;case"popover":Yt("beforetoggle",a),Yt("toggle",a),Pr(a,"popover",d);break;case"xlinkActuate":wn(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":wn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":wn(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":wn(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":wn(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":wn(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":wn(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":wn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":wn(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Pr(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Py.get(u)||u,Pr(a,u,d))}}function cv(a,l,u,d,p,v){switch(u){case"style":ku(a,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(p.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"children":typeof d=="string"?bi(a,d):(typeof d=="number"||typeof d=="bigint")&&bi(a,""+d);break;case"onScroll":d!=null&&Yt("scroll",a);break;case"onScrollEnd":d!=null&&Yt("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Nm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sl.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),l=u.slice(2,p?u.length-7:void 0),v=a[Qe]||null,v=v!=null?v[u]:null,typeof v=="function"&&a.removeEventListener(l,v,p),typeof d=="function")){typeof v!="function"&&v!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(l,d,p);break t}u in a?a[u]=d:d===!0?a.setAttribute(u,""):Pr(a,u,d)}}}function An(a,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",a),Yt("load",a);var d=!1,p=!1,v;for(v in u)if(u.hasOwnProperty(v)){var S=u[v];if(S!=null)switch(v){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:pe(a,l,v,S,u,null)}}p&&pe(a,l,"srcSet",u.srcSet,u,null),d&&pe(a,l,"src",u.src,u,null);return;case"input":Yt("invalid",a);var D=v=S=p=null,z=null,J=null;for(d in u)if(u.hasOwnProperty(d)){var ct=u[d];if(ct!=null)switch(d){case"name":p=ct;break;case"type":S=ct;break;case"checked":z=ct;break;case"defaultChecked":J=ct;break;case"value":v=ct;break;case"defaultValue":D=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,l));break;default:pe(a,l,d,ct,u,null)}}Qa(a,v,D,z,J,S,p,!1),Rl(a);return;case"select":Yt("invalid",a),d=S=v=null;for(p in u)if(u.hasOwnProperty(p)&&(D=u[p],D!=null))switch(p){case"value":v=D;break;case"defaultValue":S=D;break;case"multiple":d=D;default:pe(a,l,p,D,u,null)}l=v,u=S,a.multiple=!!d,l!=null?Hs(a,!!d,l,!1):u!=null&&Hs(a,!!d,u,!0);return;case"textarea":Yt("invalid",a),v=p=d=null;for(S in u)if(u.hasOwnProperty(S)&&(D=u[S],D!=null))switch(S){case"value":d=D;break;case"defaultValue":p=D;break;case"children":v=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:pe(a,l,S,D,u,null)}Za(a,d,p,v),Rl(a);return;case"option":for(z in u)if(u.hasOwnProperty(z)&&(d=u[z],d!=null))switch(z){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:pe(a,l,z,d,u,null)}return;case"dialog":Yt("beforetoggle",a),Yt("toggle",a),Yt("cancel",a),Yt("close",a);break;case"iframe":case"object":Yt("load",a);break;case"video":case"audio":for(d=0;d<yh.length;d++)Yt(yh[d],a);break;case"image":Yt("error",a),Yt("load",a);break;case"details":Yt("toggle",a);break;case"embed":case"source":case"link":Yt("error",a),Yt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in u)if(u.hasOwnProperty(J)&&(d=u[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:pe(a,l,J,d,u,null)}return;default:if(Ou(l)){for(ct in u)u.hasOwnProperty(ct)&&(d=u[ct],d!==void 0&&cv(a,l,ct,d,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(d=u[D],d!=null&&pe(a,l,D,d,u,null))}function YL(a,l,u,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,S=null,D=null,z=null,J=null,ct=null;for(nt in u){var ft=u[nt];if(u.hasOwnProperty(nt)&&ft!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":z=ft;default:d.hasOwnProperty(nt)||pe(a,l,nt,null,d,ft)}}for(var et in d){var nt=d[et];if(ft=u[et],d.hasOwnProperty(et)&&(nt!=null||ft!=null))switch(et){case"type":v=nt;break;case"name":p=nt;break;case"checked":J=nt;break;case"defaultChecked":ct=nt;break;case"value":S=nt;break;case"defaultValue":D=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(i(137,l));break;default:nt!==ft&&pe(a,l,et,nt,d,ft)}}si(a,S,D,z,J,ct,v,p);return;case"select":nt=S=D=et=null;for(v in u)if(z=u[v],u.hasOwnProperty(v)&&z!=null)switch(v){case"value":break;case"multiple":nt=z;default:d.hasOwnProperty(v)||pe(a,l,v,null,d,z)}for(p in d)if(v=d[p],z=u[p],d.hasOwnProperty(p)&&(v!=null||z!=null))switch(p){case"value":et=v;break;case"defaultValue":D=v;break;case"multiple":S=v;default:v!==z&&pe(a,l,p,v,d,z)}l=D,u=S,d=nt,et!=null?Hs(a,!!u,et,!1):!!d!=!!u&&(l!=null?Hs(a,!!u,l,!0):Hs(a,!!u,u?[]:"",!1));return;case"textarea":nt=et=null;for(D in u)if(p=u[D],u.hasOwnProperty(D)&&p!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:pe(a,l,D,null,d,p)}for(S in d)if(p=d[S],v=u[S],d.hasOwnProperty(S)&&(p!=null||v!=null))switch(S){case"value":et=p;break;case"defaultValue":nt=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==v&&pe(a,l,S,p,d,v)}me(a,et,nt);return;case"option":for(var Vt in u)if(et=u[Vt],u.hasOwnProperty(Vt)&&et!=null&&!d.hasOwnProperty(Vt))switch(Vt){case"selected":a.selected=!1;break;default:pe(a,l,Vt,null,d,et)}for(z in d)if(et=d[z],nt=u[z],d.hasOwnProperty(z)&&et!==nt&&(et!=null||nt!=null))switch(z){case"selected":a.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:pe(a,l,z,et,d,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in u)et=u[kt],u.hasOwnProperty(kt)&&et!=null&&!d.hasOwnProperty(kt)&&pe(a,l,kt,null,d,et);for(J in d)if(et=d[J],nt=u[J],d.hasOwnProperty(J)&&et!==nt&&(et!=null||nt!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(i(137,l));break;default:pe(a,l,J,et,d,nt)}return;default:if(Ou(l)){for(var ye in u)et=u[ye],u.hasOwnProperty(ye)&&et!==void 0&&!d.hasOwnProperty(ye)&&cv(a,l,ye,void 0,d,et);for(ct in d)et=d[ct],nt=u[ct],!d.hasOwnProperty(ct)||et===nt||et===void 0&&nt===void 0||cv(a,l,ct,et,d,nt);return}}for(var Y in u)et=u[Y],u.hasOwnProperty(Y)&&et!=null&&!d.hasOwnProperty(Y)&&pe(a,l,Y,null,d,et);for(ft in d)et=d[ft],nt=u[ft],!d.hasOwnProperty(ft)||et===nt||et==null&&nt==null||pe(a,l,ft,et,d,nt)}var uv=null,hv=null;function Vm(a){return a.nodeType===9?a:a.ownerDocument}function pA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yA(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function fv(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var dv=null;function KL(){var a=window.event;return a&&a.type==="popstate"?a===dv?!1:(dv=a,!0):(dv=null,!1)}var _A=typeof setTimeout=="function"?setTimeout:void 0,$L=typeof clearTimeout=="function"?clearTimeout:void 0,vA=typeof Promise=="function"?Promise:void 0,XL=typeof queueMicrotask=="function"?queueMicrotask:typeof vA<"u"?function(a){return vA.resolve(null).then(a).catch(QL)}:_A;function QL(a){setTimeout(function(){throw a})}function Xr(a){return a==="head"}function bA(a,l){var u=l,d=0,p=0;do{var v=u.nextSibling;if(a.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(0<d&&8>d){u=d;var S=a.ownerDocument;if(u&1&&vh(S.documentElement),u&2&&vh(S.body),u&4)for(u=S.head,vh(u),S=u.firstChild;S;){var D=S.nextSibling,z=S.nodeName;S[Ya]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&S.rel.toLowerCase()==="stylesheet"||u.removeChild(S),S=D}}if(p===0){a.removeChild(v),Ih(l);return}p--}else u==="$"||u==="$?"||u==="$!"?p++:d=u.charCodeAt(0)-48;else d=0;u=v}while(u);Ih(l)}function mv(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":mv(u),Mr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function ZL(a,l,u,d){for(;a.nodeType===1;){var p=u;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Ya])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(v=a.getAttribute("rel"),v==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(v!==p.rel||a.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||a.getAttribute("title")!==(p.title==null?null:p.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(v=a.getAttribute("src"),(v!==(p.src==null?null:p.src)||a.getAttribute("type")!==(p.type==null?null:p.type)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&a.getAttribute("name")===v)return a}else return a;if(a=Gi(a.nextSibling),a===null)break}return null}function JL(a,l,u){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Gi(a.nextSibling),a===null))return null;return a}function gv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function t4(a,l){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")l();else{var d=function(){l(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Gi(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var pv=null;function TA(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return a;l--}else u==="/$"&&l++}a=a.previousSibling}return null}function wA(a,l,u){switch(l=Vm(u),a){case"html":if(a=l.documentElement,!a)throw Error(i(452));return a;case"head":if(a=l.head,!a)throw Error(i(453));return a;case"body":if(a=l.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function vh(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Mr(a)}var Ci=new Map,EA=new Set;function Lm(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var lr=at.d;at.d={f:e4,r:n4,D:i4,C:s4,L:r4,m:a4,X:l4,S:o4,M:c4};function e4(){var a=lr.f(),l=Rm();return a||l}function n4(a){var l=es(a);l!==null&&l.tag===5&&l.type==="form"?HS(l):lr.r(a)}var cc=typeof document>"u"?null:document;function SA(a,l,u){var d=cc;if(d&&typeof l=="string"&&l){var p=Ze(l);p='link[rel="'+a+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),EA.has(p)||(EA.add(p),a={rel:a,crossOrigin:u,href:l},d.querySelector(p)===null&&(l=d.createElement("link"),An(l,"link",a),Ue(l),d.head.appendChild(l)))}}function i4(a){lr.D(a),SA("dns-prefetch",a,null)}function s4(a,l){lr.C(a,l),SA("preconnect",a,l)}function r4(a,l,u){lr.L(a,l,u);var d=cc;if(d&&a&&l){var p='link[rel="preload"][as="'+Ze(l)+'"]';l==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+Ze(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+Ze(u.imageSizes)+'"]')):p+='[href="'+Ze(a)+'"]';var v=p;switch(l){case"style":v=uc(a);break;case"script":v=hc(a)}Ci.has(v)||(a=m({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:a,as:l},u),Ci.set(v,a),d.querySelector(p)!==null||l==="style"&&d.querySelector(bh(v))||l==="script"&&d.querySelector(Th(v))||(l=d.createElement("link"),An(l,"link",a),Ue(l),d.head.appendChild(l)))}}function a4(a,l){lr.m(a,l);var u=cc;if(u&&a){var d=l&&typeof l.as=="string"?l.as:"script",p='link[rel="modulepreload"][as="'+Ze(d)+'"][href="'+Ze(a)+'"]',v=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=hc(a)}if(!Ci.has(v)&&(a=m({rel:"modulepreload",href:a},l),Ci.set(v,a),u.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Th(v)))return}d=u.createElement("link"),An(d,"link",a),Ue(d),u.head.appendChild(d)}}}function o4(a,l,u){lr.S(a,l,u);var d=cc;if(d&&a){var p=Fn(d).hoistableStyles,v=uc(a);l=l||"default";var S=p.get(v);if(!S){var D={loading:0,preload:null};if(S=d.querySelector(bh(v)))D.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},u),(u=Ci.get(v))&&yv(a,u);var z=S=d.createElement("link");Ue(z),An(z,"link",a),z._p=new Promise(function(J,ct){z.onload=J,z.onerror=ct}),z.addEventListener("load",function(){D.loading|=1}),z.addEventListener("error",function(){D.loading|=2}),D.loading|=4,jm(S,l,d)}S={type:"stylesheet",instance:S,count:1,state:D},p.set(v,S)}}}function l4(a,l){lr.X(a,l);var u=cc;if(u&&a){var d=Fn(u).hoistableScripts,p=hc(a),v=d.get(p);v||(v=u.querySelector(Th(p)),v||(a=m({src:a,async:!0},l),(l=Ci.get(p))&&_v(a,l),v=u.createElement("script"),Ue(v),An(v,"link",a),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function c4(a,l){lr.M(a,l);var u=cc;if(u&&a){var d=Fn(u).hoistableScripts,p=hc(a),v=d.get(p);v||(v=u.querySelector(Th(p)),v||(a=m({src:a,async:!0,type:"module"},l),(l=Ci.get(p))&&_v(a,l),v=u.createElement("script"),Ue(v),An(v,"link",a),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function xA(a,l,u,d){var p=(p=gt.current)?Lm(p):null;if(!p)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=uc(u.href),u=Fn(p).hoistableStyles,d=u.get(l),d||(d={type:"style",instance:null,count:0,state:null},u.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=uc(u.href);var v=Fn(p).hoistableStyles,S=v.get(a);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(a,S),(v=p.querySelector(bh(a)))&&!v._p&&(S.instance=v,S.state.loading=5),Ci.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ci.set(a,u),v||u4(p,a,u,S.state))),l&&d===null)throw Error(i(528,""));return S}if(l&&d!==null)throw Error(i(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=hc(u),u=Fn(p).hoistableScripts,d=u.get(l),d||(d={type:"script",instance:null,count:0,state:null},u.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function uc(a){return'href="'+Ze(a)+'"'}function bh(a){return'link[rel="stylesheet"]['+a+"]"}function AA(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function u4(a,l,u,d){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=a.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),An(l,"link",u),Ue(l),a.head.appendChild(l))}function hc(a){return'[src="'+Ze(a)+'"]'}function Th(a){return"script[async]"+a}function IA(a,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var d=a.querySelector('style[data-href~="'+Ze(u.href)+'"]');if(d)return l.instance=d,Ue(d),d;var p=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Ue(d),An(d,"style",p),jm(d,u.precedence,a),l.instance=d;case"stylesheet":p=uc(u.href);var v=a.querySelector(bh(p));if(v)return l.state.loading|=4,l.instance=v,Ue(v),v;d=AA(u),(p=Ci.get(p))&&yv(d,p),v=(a.ownerDocument||a).createElement("link"),Ue(v);var S=v;return S._p=new Promise(function(D,z){S.onload=D,S.onerror=z}),An(v,"link",d),l.state.loading|=4,jm(v,u.precedence,a),l.instance=v;case"script":return v=hc(u.src),(p=a.querySelector(Th(v)))?(l.instance=p,Ue(p),p):(d=u,(p=Ci.get(v))&&(d=m({},u),_v(d,p)),a=a.ownerDocument||a,p=a.createElement("script"),Ue(p),An(p,"link",d),a.head.appendChild(p),l.instance=p);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,jm(d,u.precedence,a));return l.instance}function jm(a,l,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,v=p,S=0;S<d.length;S++){var D=d[S];if(D.dataset.precedence===l)v=D;else if(v!==p)break}v?v.parentNode.insertBefore(a,v.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(a,l.firstChild))}function yv(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function _v(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var Bm=null;function RA(a,l,u){if(Bm===null){var d=new Map,p=Bm=new Map;p.set(u,d)}else p=Bm,d=p.get(u),d||(d=new Map,p.set(u,d));if(d.has(a))return d;for(d.set(a,null),u=u.getElementsByTagName(a),p=0;p<u.length;p++){var v=u[p];if(!(v[Ya]||v[an]||a==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(l)||"";S=a+S;var D=d.get(S);D?D.push(v):d.set(S,[v])}}return d}function DA(a,l,u){a=a.ownerDocument||a,a.head.insertBefore(u,l==="title"?a.querySelector("head > title"):null)}function h4(a,l,u){if(u===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function CA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var wh=null;function f4(){}function d4(a,l,u){if(wh===null)throw Error(i(475));var d=wh;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=uc(u.href),v=a.querySelector(bh(p));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=Fm.bind(d),a.then(d,d)),l.state.loading|=4,l.instance=v,Ue(v);return}v=a.ownerDocument||a,u=AA(u),(p=Ci.get(p))&&yv(u,p),v=v.createElement("link"),Ue(v);var S=v;S._p=new Promise(function(D,z){S.onload=D,S.onerror=z}),An(v,"link",u),l.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=Fm.bind(d),a.addEventListener("load",l),a.addEventListener("error",l))}}function m4(){if(wh===null)throw Error(i(475));var a=wh;return a.stylesheets&&a.count===0&&vv(a,a.stylesheets),0<a.count?function(l){var u=setTimeout(function(){if(a.stylesheets&&vv(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(u)}}:null}function Fm(){if(this.count--,this.count===0){if(this.stylesheets)vv(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Um=null;function vv(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Um=new Map,l.forEach(g4,a),Um=null,Fm.call(a))}function g4(a,l){if(!(l.state.loading&4)){var u=Um.get(a);if(u)var d=u.get(null);else{u=new Map,Um.set(a,u);for(var p=a.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var S=p[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(u.set(S.dataset.precedence,S),d=S)}d&&u.set(null,d)}p=l.instance,S=p.getAttribute("data-precedence"),v=u.get(S)||d,v===d&&u.set(null,p),u.set(S,p),this.count++,d=Fm.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),v?v.parentNode.insertBefore(p,v.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(p,a.firstChild)),l.state.loading|=4}}var Eh={$$typeof:L,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function p4(a,l,u,d,p,v,S,D){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.hiddenUpdates=js(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function MA(a,l,u,d,p,v,S,D,z,J,ct,ft){return a=new p4(a,l,u,S,D,z,J,ft),l=1,v===!0&&(l|=24),v=ai(3,null,null,l),a.current=v,v.stateNode=a,l=t_(),l.refCount++,a.pooledCache=l,l.refCount++,v.memoizedState={element:d,isDehydrated:u,cache:l},s_(v),a}function PA(a){return a?(a=zl,a):zl}function kA(a,l,u,d,p,v){p=PA(p),d.context===null?d.context=p:d.pendingContext=p,d=Lr(l),d.payload={element:u},v=v===void 0?null:v,v!==null&&(d.callback=v),u=jr(a,d,l),u!==null&&(hi(u,a,l),Ju(u,a,l))}function OA(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<l?u:l}}function bv(a,l){OA(a,l),(a=a.alternate)&&OA(a,l)}function NA(a){if(a.tag===13){var l=Ul(a,67108864);l!==null&&hi(l,a,67108864),bv(a,67108864)}}var zm=!0;function y4(a,l,u,d){var p=Q.T;Q.T=null;var v=at.p;try{at.p=2,Tv(a,l,u,d)}finally{at.p=v,Q.T=p}}function _4(a,l,u,d){var p=Q.T;Q.T=null;var v=at.p;try{at.p=8,Tv(a,l,u,d)}finally{at.p=v,Q.T=p}}function Tv(a,l,u,d){if(zm){var p=wv(d);if(p===null)lv(a,l,d,Hm,u),LA(a,d);else if(b4(p,a,l,u,d))d.stopPropagation();else if(LA(a,d),l&4&&-1<v4.indexOf(a)){for(;p!==null;){var v=es(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Fi(v.pendingLanes);if(S!==0){var D=v;for(D.pendingLanes|=2,D.entangledLanes|=2;S;){var z=1<<31-Dn(S);D.entanglements[1]|=z,S&=~z}gs(v),(le&6)===0&&(Am=Wn()+500,ph(0))}}break;case 13:D=Ul(v,2),D!==null&&hi(D,v,2),Rm(),bv(v,2)}if(v=wv(d),v===null&&lv(a,l,d,Hm,u),v===p)break;p=v}p!==null&&d.stopPropagation()}else lv(a,l,d,null,u)}}function wv(a){return a=Ti(a),Ev(a)}var Hm=null;function Ev(a){if(Hm=null,a=Fs(a),a!==null){var l=r(a);if(l===null)a=null;else{var u=l.tag;if(u===13){if(a=o(l),a!==null)return a;a=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Hm=a,null}function VA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ay()){case Tu:return 2;case bl:return 8;case za:case Iy:return 32;case Tl:return 268435456;default:return 32}default:return 32}}var Sv=!1,Qr=null,Zr=null,Jr=null,Sh=new Map,xh=new Map,ta=[],v4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LA(a,l){switch(a){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Sh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xh.delete(l.pointerId)}}function Ah(a,l,u,d,p,v){return a===null||a.nativeEvent!==v?(a={blockedOn:l,domEventName:u,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},l!==null&&(l=es(l),l!==null&&NA(l)),a):(a.eventSystemFlags|=d,l=a.targetContainers,p!==null&&l.indexOf(p)===-1&&l.push(p),a)}function b4(a,l,u,d,p){switch(l){case"focusin":return Qr=Ah(Qr,a,l,u,d,p),!0;case"dragenter":return Zr=Ah(Zr,a,l,u,d,p),!0;case"mouseover":return Jr=Ah(Jr,a,l,u,d,p),!0;case"pointerover":var v=p.pointerId;return Sh.set(v,Ah(Sh.get(v)||null,a,l,u,d,p)),!0;case"gotpointercapture":return v=p.pointerId,xh.set(v,Ah(xh.get(v)||null,a,l,u,d,p)),!0}return!1}function jA(a){var l=Fs(a.target);if(l!==null){var u=r(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){a.blockedOn=l,Rd(a.priority,function(){if(u.tag===13){var d=ui();d=Rr(d);var p=Ul(u,d);p!==null&&hi(p,u,d),bv(u,d)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function qm(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var u=wv(a.nativeEvent);if(u===null){u=a.nativeEvent;var d=new u.constructor(u.type,u);qs=d,u.target.dispatchEvent(d),qs=null}else return l=es(u),l!==null&&NA(l),a.blockedOn=u,!1;l.shift()}return!0}function BA(a,l,u){qm(a)&&u.delete(l)}function T4(){Sv=!1,Qr!==null&&qm(Qr)&&(Qr=null),Zr!==null&&qm(Zr)&&(Zr=null),Jr!==null&&qm(Jr)&&(Jr=null),Sh.forEach(BA),xh.forEach(BA)}function Gm(a,l){a.blockedOn===l&&(a.blockedOn=null,Sv||(Sv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,T4)))}var Wm=null;function FA(a){Wm!==a&&(Wm=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wm===a&&(Wm=null);for(var l=0;l<a.length;l+=3){var u=a[l],d=a[l+1],p=a[l+2];if(typeof d!="function"){if(Ev(d||u)===null)continue;break}var v=es(u);v!==null&&(a.splice(l,3),l-=3,E_(v,{pending:!0,data:p,method:u.method,action:d},d,p))}}))}function Ih(a){function l(z){return Gm(z,a)}Qr!==null&&Gm(Qr,a),Zr!==null&&Gm(Zr,a),Jr!==null&&Gm(Jr,a),Sh.forEach(l),xh.forEach(l);for(var u=0;u<ta.length;u++){var d=ta[u];d.blockedOn===a&&(d.blockedOn=null)}for(;0<ta.length&&(u=ta[0],u.blockedOn===null);)jA(u),u.blockedOn===null&&ta.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var p=u[d],v=u[d+1],S=p[Qe]||null;if(typeof v=="function")S||FA(u);else if(S){var D=null;if(v&&v.hasAttribute("formAction")){if(p=v,S=v[Qe]||null)D=S.formAction;else if(Ev(p)!==null)continue}else D=S.action;typeof D=="function"?u[d+1]=D:(u.splice(d,3),d-=3),FA(u)}}}function xv(a){this._internalRoot=a}Ym.prototype.render=xv.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(i(409));var u=l.current,d=ui();kA(u,d,a,l,null,null)},Ym.prototype.unmount=xv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;kA(a.current,2,null,a,null,null),Rm(),l[vi]=null}};function Ym(a){this._internalRoot=a}Ym.prototype.unstable_scheduleHydration=function(a){if(a){var l=Dr();a={blockedOn:null,target:a,priority:l};for(var u=0;u<ta.length&&l!==0&&l<ta[u].priority;u++);ta.splice(u,0,a),u===0&&jA(a)}};var UA=t.version;if(UA!=="19.1.0")throw Error(i(527,UA,"19.1.0"));at.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=h(l),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var w4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Km=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Km.isDisabled&&Km.supportsFiber)try{ke=Km.inject(w4),oe=Km}catch{}}return Dh.createRoot=function(a,l){if(!s(a))throw Error(i(299));var u=!1,d="",p=ix,v=sx,S=rx,D=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks)),l=MA(a,1,!1,null,null,u,d,p,v,S,D,null),a[vi]=l.current,ov(a),new xv(l)},Dh.hydrateRoot=function(a,l,u){if(!s(a))throw Error(i(299));var d=!1,p="",v=ix,S=sx,D=rx,z=null,J=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks),u.formState!==void 0&&(J=u.formState)),l=MA(a,1,!0,l,u??null,d,p,v,S,D,z,J),l.context=PA(null),u=l.current,d=ui(),d=Rr(d),p=Lr(d),p.callback=null,jr(u,p,d),u=d,l.current.lanes=u,Bs(l,u),gs(l),a[vi]=l.current,ov(a),new Ym(l)},Dh.version="19.1.0",Dh}var QA;function O4(){if(QA)return Rv.exports;QA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Rv.exports=k4(),Rv.exports}var N4=O4();function V4({onAddClick:n,onLogout:t,onTabChange:e,currentTab:i}){return C.jsxs("nav",{className:"navbar",children:[C.jsx("button",{onClick:()=>e("dashboard"),title:"Dashboard",className:i==="dashboard"?"text-warning":"text-info",children:C.jsx("i",{className:"bi bi-house-fill"})}),C.jsx("button",{onClick:()=>e("history"),title:"History",children:C.jsx("i",{className:`bi bi-clock-history ${i==="history"?"text-warning":"text-info"}`})}),C.jsx("button",{onClick:n,title:"Add Meal",children:C.jsx("i",{className:`bi bi-plus-circle-fill ${i==="addmead"?"text-warning":"text-info"}`})}),C.jsx("button",{title:"Suggestions",onClick:()=>e("suggestions"),children:C.jsx("i",{className:`bi bi-lightbulb-fill	 ${i==="suggestions"?"text-warning":"text-info"}`})}),C.jsx("button",{onClick:()=>e("profile"),title:"Profile",children:C.jsx("i",{className:`bi bi-person-circle ${i==="profile"?"text-warning":"text-info"}`})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function rd(n){return n+.5|0}const ma=(n,t,e)=>Math.max(Math.min(n,e),t);function Gh(n){return ma(rd(n*2.55),0,255)}function va(n){return ma(rd(n*255),0,255)}function fr(n){return ma(rd(n/2.55)/100,0,1)}function ZA(n){return ma(rd(n*100),0,100)}const Mi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$b=[..."0123456789ABCDEF"],L4=n=>$b[n&15],j4=n=>$b[(n&240)>>4]+$b[n&15],$m=n=>(n&240)>>4===(n&15),B4=n=>$m(n.r)&&$m(n.g)&&$m(n.b)&&$m(n.a);function F4(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Mi[n[1]]*17,g:255&Mi[n[2]]*17,b:255&Mi[n[3]]*17,a:t===5?Mi[n[4]]*17:255}:(t===7||t===9)&&(e={r:Mi[n[1]]<<4|Mi[n[2]],g:Mi[n[3]]<<4|Mi[n[4]],b:Mi[n[5]]<<4|Mi[n[6]],a:t===9?Mi[n[7]]<<4|Mi[n[8]]:255})),e}const U4=(n,t)=>n<255?t(n):"";function z4(n){var t=B4(n)?L4:j4;return n?"#"+t(n.r)+t(n.g)+t(n.b)+U4(n.a,t):void 0}const H4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uM(n,t,e){const i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function q4(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function G4(n,t,e){const i=uM(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function W4(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function pT(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),c=(r+o)/2;let h,f,m;return r!==o&&(m=r-o,f=c>.5?m/(2-r-o):m/(r+o),h=W4(e,i,s,m,r),h=h*60+.5),[h|0,f||0,c]}function yT(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(va)}function _T(n,t,e){return yT(uM,n,t,e)}function Y4(n,t,e){return yT(G4,n,t,e)}function K4(n,t,e){return yT(q4,n,t,e)}function hM(n){return(n%360+360)%360}function $4(n){const t=H4.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Gh(+t[5]):va(+t[5]));const s=hM(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=Y4(s,r,o):t[1]==="hsv"?i=K4(s,r,o):i=_T(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function X4(n,t){var e=pT(n);e[0]=hM(e[0]+t),e=_T(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Q4(n){if(!n)return;const t=pT(n),e=t[0],i=ZA(t[1]),s=ZA(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${fr(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const JA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},t1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Z4(){const n={},t=Object.keys(t1),e=Object.keys(JA);let i,s,r,o,c;for(i=0;i<t.length;i++){for(o=c=t[i],s=0;s<e.length;s++)r=e[s],c=c.replace(r,JA[r]);r=parseInt(t1[o],16),n[c]=[r>>16&255,r>>8&255,r&255]}return n}let Xm;function J4(n){Xm||(Xm=Z4(),Xm.transparent=[0,0,0,0]);const t=Xm[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const tj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ej(n){const t=tj.exec(n);let e=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?Gh(o):ma(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Gh(i):ma(i,0,255)),s=255&(t[4]?Gh(s):ma(s,0,255)),r=255&(t[6]?Gh(r):ma(r,0,255)),{r:i,g:s,b:r,a:e}}}function nj(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${fr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Pv=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,fc=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function ij(n,t,e){const i=fc(fr(n.r)),s=fc(fr(n.g)),r=fc(fr(n.b));return{r:va(Pv(i+e*(fc(fr(t.r))-i))),g:va(Pv(s+e*(fc(fr(t.g))-s))),b:va(Pv(r+e*(fc(fr(t.b))-r))),a:n.a+e*(t.a-n.a)}}function Qm(n,t,e){if(n){let i=pT(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=_T(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function fM(n,t){return n&&Object.assign(t||{},n)}function e1(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=va(n[3]))):(t=fM(n,{r:0,g:0,b:0,a:1}),t.a=va(t.a)),t}function sj(n){return n.charAt(0)==="r"?ej(n):$4(n)}class If{constructor(t){if(t instanceof If)return t;const e=typeof t;let i;e==="object"?i=e1(t):e==="string"&&(i=F4(t)||J4(t)||sj(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=fM(this._rgb);return t&&(t.a=fr(t.a)),t}set rgb(t){this._rgb=e1(t)}rgbString(){return this._valid?nj(this._rgb):void 0}hexString(){return this._valid?z4(this._rgb):void 0}hslString(){return this._valid?Q4(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let r;const o=e===r?.5:e,c=2*o-1,h=i.a-s.a,f=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;r=1-f,i.r=255&f*i.r+r*s.r+.5,i.g=255&f*i.g+r*s.g+.5,i.b=255&f*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=ij(this._rgb,t._rgb,e)),this}clone(){return new If(this.rgb)}alpha(t){return this._rgb.a=va(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=rd(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Qm(this._rgb,2,t),this}darken(t){return Qm(this._rgb,2,-t),this}saturate(t){return Qm(this._rgb,1,t),this}desaturate(t){return Qm(this._rgb,1,-t),this}rotate(t){return X4(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function cr(){}const rj=(()=>{let n=0;return()=>n++})();function ae(n){return n==null}function bn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function te(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ji(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ps(n,t){return ji(n)?n:t}function Ht(n,t){return typeof n>"u"?t:n}const aj=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,dM=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Se(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function he(n,t,e,i){let s,r,o;if(bn(n))for(r=n.length,s=0;s<r;s++)t.call(e,n[s],s);else if(te(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function Kg(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function $g(n){if(bn(n))return n.map($g);if(te(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=$g(n[e[s]]);return t}return n}function mM(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function oj(n,t,e,i){if(!mM(n))return;const s=t[n],r=e[n];te(s)&&te(r)?Rf(s,r,i):t[n]=$g(r)}function Rf(n,t,e){const i=bn(t)?t:[t],s=i.length;if(!te(n))return n;e=e||{};const r=e.merger||oj;let o;for(let c=0;c<s;++c){if(o=i[c],!te(o))continue;const h=Object.keys(o);for(let f=0,m=h.length;f<m;++f)r(h[f],n,o,e)}return n}function rf(n,t){return Rf(n,t,{merger:lj})}function lj(n,t,e){if(!mM(n))return;const i=t[n],s=e[n];te(i)&&te(s)?rf(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=$g(s))}const n1={"":n=>n,x:n=>n.x,y:n=>n.y};function cj(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function uj(n){const t=cj(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Zo(n,t){return(n1[t]||(n1[t]=uj(t)))(n)}function vT(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Df=n=>typeof n<"u",Aa=n=>typeof n=="function",i1=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function hj(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Te=Math.PI,je=2*Te,fj=je+Te,Xg=Number.POSITIVE_INFINITY,dj=Te/180,hn=Te/2,Eo=Te/4,s1=Te*2/3,gM=Math.log10,xs=Math.sign;function af(n,t,e){return Math.abs(n-t)<e}function r1(n){const t=Math.round(n);n=af(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(gM(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function mj(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function gj(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Cf(n){return!gj(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function pj(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function yj(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function dr(n){return n*(Te/180)}function _j(n){return n*(180/Te)}function a1(n){if(!ji(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function pM(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*Te&&(r+=je),{angle:r,distance:s}}function Xb(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function vj(n,t){return(n-t+fj)%je-Te}function Yi(n){return(n%je+je)%je}function Mf(n,t,e,i){const s=Yi(n),r=Yi(t),o=Yi(e),c=Yi(r-s),h=Yi(o-s),f=Yi(s-r),m=Yi(s-o);return s===r||s===o||i&&r===o||c>h&&f<m}function Vn(n,t,e){return Math.max(t,Math.min(e,n))}function bj(n){return Vn(n,-32768,32767)}function ga(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function bT(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const Bo=(n,t,e,i)=>bT(n,e,i?s=>{const r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),Tj=(n,t,e)=>bT(n,e,i=>n[i][t]>=e);function wj(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const yM=["push","pop","shift","splice","unshift"];function Ej(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),yM.forEach(e=>{const i="_onData"+vT(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...r)}),o}})})}function o1(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(yM.forEach(r=>{delete n[r]}),delete n._chartjs)}function _M(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const vM=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function bM(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,vM.call(window,()=>{i=!1,n.apply(t,e)}))}}function Sj(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const TM=n=>n==="start"?"left":n==="end"?"right":"center",fi=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,xj=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Aj(n,t,e){const i=t.length;let s=0,r=i;if(n._sorted){const{iScale:o,vScale:c,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=o.axis,{min:y,max:_,minDefined:b,maxDefined:w}=o.getUserBounds();if(b){if(s=Math.min(Bo(h,m,y).lo,e?i:Bo(t,m,o.getPixelForValue(y)).lo),f){const x=h.slice(0,s+1).reverse().findIndex(A=>!ae(A[c.axis]));s-=Math.max(0,x)}s=Vn(s,0,i-1)}if(w){let x=Math.max(Bo(h,o.axis,_,!0).hi+1,e?0:Bo(t,m,o.getPixelForValue(_),!0).hi+1);if(f){const A=h.slice(x-1).findIndex(M=>!ae(M[c.axis]));x+=Math.max(0,A)}r=Vn(x,s,i)-s}else r=i-s}return{start:s,count:r}}function Ij(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}const Zm=n=>n===0||n===1,l1=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*je/e)),c1=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*je/e)+1,of={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*hn)+1,easeOutSine:n=>Math.sin(n*hn),easeInOutSine:n=>-.5*(Math.cos(Te*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Zm(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Zm(n)?n:l1(n,.075,.3),easeOutElastic:n=>Zm(n)?n:c1(n,.075,.3),easeInOutElastic(n){return Zm(n)?n:n<.5?.5*l1(n*2,.1125,.45):.5+.5*c1(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-of.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?of.easeInBounce(n*2)*.5:of.easeOutBounce(n*2-1)*.5+.5};function TT(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function u1(n){return TT(n)?n:new If(n)}function kv(n){return TT(n)?n:new If(n).saturate(.5).darken(.1).hexString()}const Rj=["x","y","borderWidth","radius","tension"],Dj=["color","borderColor","backgroundColor"];function Cj(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Dj},numbers:{type:"number",properties:Rj}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Mj(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const h1=new Map;function Pj(n,t){t=t||{};const e=n+JSON.stringify(t);let i=h1.get(e);return i||(i=new Intl.NumberFormat(n,t),h1.set(e,i)),i}function wT(n,t,e){return Pj(t,e).format(n)}const kj={values(n){return bn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const f=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),r=Oj(n,e)}const o=gM(Math.abs(r)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),h={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),wT(n,i,h)}};function Oj(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var wM={formatters:kj};function Nj(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Jo=Object.create(null),Qb=Object.create(null);function lf(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function Ov(n,t,e){return typeof t=="string"?Rf(lf(n,t),e):Rf(lf(n,""),t)}class Vj{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>kv(s.backgroundColor),this.hoverBorderColor=(i,s)=>kv(s.borderColor),this.hoverColor=(i,s)=>kv(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Ov(this,t,e)}get(t){return lf(this,t)}describe(t,e){return Ov(Qb,t,e)}override(t,e){return Ov(Jo,t,e)}route(t,e,i,s){const r=lf(this,t),o=lf(this,i),c="_"+e;Object.defineProperties(r,{[c]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[c],f=o[s];return te(h)?Object.assign({},f,h):Ht(h,f)},set(h){this[c]=h}}})}apply(t){t.forEach(e=>e(this))}}var We=new Vj({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Cj,Mj,Nj]);function Lj(n){return!n||ae(n.size)||ae(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function f1(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function So(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function d1(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Zb(n,t,e,i){EM(n,t,e,i,null)}function EM(n,t,e,i,s){let r,o,c,h,f,m,y,_;const b=t.pointStyle,w=t.rotation,x=t.radius;let A=(w||0)*dj;if(b&&typeof b=="object"&&(r=b.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(A),n.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),n.restore();return}if(!(isNaN(x)||x<=0)){switch(n.beginPath(),b){default:s?n.ellipse(e,i,s/2,x,0,0,je):n.arc(e,i,x,0,je),n.closePath();break;case"triangle":m=s?s/2:x,n.moveTo(e+Math.sin(A)*m,i-Math.cos(A)*x),A+=s1,n.lineTo(e+Math.sin(A)*m,i-Math.cos(A)*x),A+=s1,n.lineTo(e+Math.sin(A)*m,i-Math.cos(A)*x),n.closePath();break;case"rectRounded":f=x*.516,h=x-f,o=Math.cos(A+Eo)*h,y=Math.cos(A+Eo)*(s?s/2-f:h),c=Math.sin(A+Eo)*h,_=Math.sin(A+Eo)*(s?s/2-f:h),n.arc(e-y,i-c,f,A-Te,A-hn),n.arc(e+_,i-o,f,A-hn,A),n.arc(e+y,i+c,f,A,A+hn),n.arc(e-_,i+o,f,A+hn,A+Te),n.closePath();break;case"rect":if(!w){h=Math.SQRT1_2*x,m=s?s/2:h,n.rect(e-m,i-h,2*m,2*h);break}A+=Eo;case"rectRot":y=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,c=Math.sin(A)*x,_=Math.sin(A)*(s?s/2:x),n.moveTo(e-y,i-c),n.lineTo(e+_,i-o),n.lineTo(e+y,i+c),n.lineTo(e-_,i+o),n.closePath();break;case"crossRot":A+=Eo;case"cross":y=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,c=Math.sin(A)*x,_=Math.sin(A)*(s?s/2:x),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+_,i-o),n.lineTo(e-_,i+o);break;case"star":y=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,c=Math.sin(A)*x,_=Math.sin(A)*(s?s/2:x),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+_,i-o),n.lineTo(e-_,i+o),A+=Eo,y=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,c=Math.sin(A)*x,_=Math.sin(A)*(s?s/2:x),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+_,i-o),n.lineTo(e-_,i+o);break;case"line":o=s?s/2:Math.cos(A)*x,c=Math.sin(A)*x,n.moveTo(e-o,i-c),n.lineTo(e+o,i+c);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(A)*(s?s/2:x),i+Math.sin(A)*x);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Pf(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function ET(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function ST(n){n.restore()}function jj(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Bj(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Fj(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ae(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Uj(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=t-r.actualBoundingBoxLeft,c=t+r.actualBoundingBoxRight,h=e-r.actualBoundingBoxAscent,f=e+r.actualBoundingBoxDescent,m=s.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,m),n.lineTo(c,m),n.stroke()}}function zj(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Qg(n,t,e,i,s,r={}){const o=bn(t)?t:[t],c=r.strokeWidth>0&&r.strokeColor!=="";let h,f;for(n.save(),n.font=s.string,Fj(n,r),h=0;h<o.length;++h)f=o[h],r.backdrop&&zj(n,r.backdrop),c&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),ae(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(f,e,i,r.maxWidth)),n.fillText(f,e,i,r.maxWidth),Uj(n,e,i,f,r),i+=Number(s.lineHeight);n.restore()}function Zg(n,t){const{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*Te,Te,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Te,hn,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,hn,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-hn,!0),n.lineTo(e+o.topLeft,i)}const Hj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Gj(n,t){const e=(""+n).match(Hj);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Wj=n=>+n||0;function xT(n,t){const e={},i=te(t),s=i?Object.keys(t):t,r=te(n)?i?o=>Ht(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=Wj(r(o));return e}function SM(n){return xT(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Oc(n){return xT(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Xi(n){const t=SM(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Zn(n,t){n=n||{},t=t||We.font;let e=Ht(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Ht(n.style,t.style);i&&!(""+i).match(qj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ht(n.family,t.family),lineHeight:Gj(Ht(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Ht(n.weight,t.weight),string:""};return s.string=Lj(s),s}function Jm(n,t,e,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function Yj(n,t,e){const{min:i,max:s}=n,r=dM(t,(s-i)/2),o=(c,h)=>e&&c===0?0:c+h;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function hl(n,t){return Object.assign(Object.create(n),t)}function AT(n,t=[""],e,i,s=()=>n[0]){const r=e||n;typeof i>"u"&&(i=RM("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:c=>AT([c,...n],t,r,i)};return new Proxy(o,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return AM(c,h,()=>eB(h,t,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return g1(c).includes(h)},ownKeys(c){return g1(c)},set(c,h,f){const m=c._storage||(c._storage=s());return c[h]=m[h]=f,delete c._keys,!0}})}function Uc(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:xM(n,i),setContext:r=>Uc(n,r,e,i),override:r=>Uc(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,c){return AM(r,o,()=>$j(r,o,c))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,c){return n[o]=c,delete r[o],!0}})}function xM(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Aa(e)?e:()=>e,isIndexable:Aa(i)?i:()=>i}}const Kj=(n,t)=>n?n+vT(t):t,IT=(n,t)=>te(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function AM(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function $j(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let c=i[t];return Aa(c)&&o.isScriptable(t)&&(c=Xj(t,c,n,e)),bn(c)&&c.length&&(c=Qj(t,c,n,o.isIndexable)),IT(t,c)&&(c=Uc(c,s,r&&r[t],o)),c}function Xj(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_stack:c}=e;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=t(r,o||i);return c.delete(n),IT(n,h)&&(h=RT(s._scopes,s,n,h)),h}function Qj(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:c}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(te(t[0])){const h=t,f=s._scopes.filter(m=>m!==h);t=[];for(const m of h){const y=RT(f,s,n,m);t.push(Uc(y,r,o&&o[n],c))}}return t}function IM(n,t,e){return Aa(n)?n(t,e):n}const Zj=(n,t)=>n===!0?t:typeof n=="string"?Zo(t,n):void 0;function Jj(n,t,e,i,s){for(const r of t){const o=Zj(e,r);if(o){n.add(o);const c=IM(o._fallback,e,s);if(typeof c<"u"&&c!==e&&c!==i)return c}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function RT(n,t,e,i){const s=t._rootScopes,r=IM(t._fallback,e,i),o=[...n,...s],c=new Set;c.add(i);let h=m1(c,o,e,r||e,i);return h===null||typeof r<"u"&&r!==e&&(h=m1(c,o,r,h,i),h===null)?!1:AT(Array.from(c),[""],s,r,()=>tB(t,e,i))}function m1(n,t,e,i,s){for(;e;)e=Jj(n,t,e,i,s);return e}function tB(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return bn(s)&&te(e)?e:s||{}}function eB(n,t,e,i){let s;for(const r of t)if(s=RM(Kj(r,n),e),typeof s<"u")return IT(n,s)?RT(e,i,n,s):s}function RM(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function g1(n){let t=n._keys;return t||(t=n._keys=nB(n._scopes)),t}function nB(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const iB=Number.EPSILON||1e-14,zc=(n,t)=>t<n.length&&!n[t].skip&&n[t],DM=n=>n==="x"?"y":"x";function sB(n,t,e,i){const s=n.skip?t:n,r=t,o=e.skip?t:e,c=Xb(r,s),h=Xb(o,r);let f=c/(c+h),m=h/(c+h);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const y=i*f,_=i*m;return{previous:{x:r.x-y*(o.x-s.x),y:r.y-y*(o.y-s.y)},next:{x:r.x+_*(o.x-s.x),y:r.y+_*(o.y-s.y)}}}function rB(n,t,e){const i=n.length;let s,r,o,c,h,f=zc(n,0);for(let m=0;m<i-1;++m)if(h=f,f=zc(n,m+1),!(!h||!f)){if(af(t[m],0,iB)){e[m]=e[m+1]=0;continue}s=e[m]/t[m],r=e[m+1]/t[m],c=Math.pow(s,2)+Math.pow(r,2),!(c<=9)&&(o=3/Math.sqrt(c),e[m]=s*o*t[m],e[m+1]=r*o*t[m])}}function aB(n,t,e="x"){const i=DM(e),s=n.length;let r,o,c,h=zc(n,0);for(let f=0;f<s;++f){if(o=c,c=h,h=zc(n,f+1),!c)continue;const m=c[e],y=c[i];o&&(r=(m-o[e])/3,c[`cp1${e}`]=m-r,c[`cp1${i}`]=y-r*t[f]),h&&(r=(h[e]-m)/3,c[`cp2${e}`]=m+r,c[`cp2${i}`]=y+r*t[f])}}function oB(n,t="x"){const e=DM(t),i=n.length,s=Array(i).fill(0),r=Array(i);let o,c,h,f=zc(n,0);for(o=0;o<i;++o)if(c=h,h=f,f=zc(n,o+1),!!h){if(f){const m=f[t]-h[t];s[o]=m!==0?(f[e]-h[e])/m:0}r[o]=c?f?xs(s[o-1])!==xs(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}rB(n,s,r),aB(n,r,t)}function tg(n,t,e){return Math.max(Math.min(n,e),t)}function lB(n,t){let e,i,s,r,o,c=Pf(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=c,c=e<i-1&&Pf(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=tg(s.cp1x,t.left,t.right),s.cp1y=tg(s.cp1y,t.top,t.bottom)),c&&(s.cp2x=tg(s.cp2x,t.left,t.right),s.cp2y=tg(s.cp2y,t.top,t.bottom)))}function cB(n,t,e,i,s){let r,o,c,h;if(t.spanGaps&&(n=n.filter(f=>!f.skip)),t.cubicInterpolationMode==="monotone")oB(n,s);else{let f=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)c=n[r],h=sB(f,c,n[Math.min(r+1,o-(i?0:1))%o],t.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,f=c}t.capBezierPoints&&lB(n,e)}function DT(){return typeof window<"u"&&typeof document<"u"}function CT(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Jg(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const jp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function uB(n,t){return jp(n).getPropertyValue(t)}const hB=["top","right","bottom","left"];function qo(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=hB[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const fB=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function dB(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,c,h;if(fB(s,r,n.target))c=s,h=r;else{const f=t.getBoundingClientRect();c=i.clientX-f.left,h=i.clientY-f.top,o=!0}return{x:c,y:h,box:o}}function Ro(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=jp(e),r=s.boxSizing==="border-box",o=qo(s,"padding"),c=qo(s,"border","width"),{x:h,y:f,box:m}=dB(n,e),y=o.left+(m&&c.left),_=o.top+(m&&c.top);let{width:b,height:w}=t;return r&&(b-=o.width+c.width,w-=o.height+c.height),{x:Math.round((h-y)/b*e.width/i),y:Math.round((f-_)/w*e.height/i)}}function mB(n,t,e){let i,s;if(t===void 0||e===void 0){const r=n&&CT(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),c=jp(r),h=qo(c,"border","width"),f=qo(c,"padding");t=o.width-f.width-h.width,e=o.height-f.height-h.height,i=Jg(c.maxWidth,r,"clientWidth"),s=Jg(c.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||Xg,maxHeight:s||Xg}}const eg=n=>Math.round(n*10)/10;function gB(n,t,e,i){const s=jp(n),r=qo(s,"margin"),o=Jg(s.maxWidth,n,"clientWidth")||Xg,c=Jg(s.maxHeight,n,"clientHeight")||Xg,h=mB(n,t,e);let{width:f,height:m}=h;if(s.boxSizing==="content-box"){const _=qo(s,"border","width"),b=qo(s,"padding");f-=b.width+_.width,m-=b.height+_.height}return f=Math.max(0,f-r.width),m=Math.max(0,i?f/i:m-r.height),f=eg(Math.min(f,o,h.maxWidth)),m=eg(Math.min(m,c,h.maxHeight)),f&&!m&&(m=eg(f/2)),(t!==void 0||e!==void 0)&&i&&h.height&&m>h.height&&(m=h.height,f=eg(Math.floor(m*i))),{width:f,height:m}}function p1(n,t,e){const i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const pB=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};DT()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function y1(n,t){const e=uB(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Do(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function yB(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function _B(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=Do(n,s,e),c=Do(s,r,e),h=Do(r,t,e),f=Do(o,c,e),m=Do(c,h,e);return Do(f,m,e)}const vB=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},bB=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Nc(n,t,e){return n?vB(t,e):bB()}function CM(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function MM(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function PM(n){return n==="angle"?{between:Mf,compare:vj,normalize:Yi}:{between:ga,compare:(t,e)=>t-e,normalize:t=>t}}function _1({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function TB(n,t,e){const{property:i,start:s,end:r}=e,{between:o,normalize:c}=PM(i),h=t.length;let{start:f,end:m,loop:y}=n,_,b;if(y){for(f+=h,m+=h,_=0,b=h;_<b&&o(c(t[f%h][i]),s,r);++_)f--,m--;f%=h,m%=h}return m<f&&(m+=h),{start:f,end:m,loop:y,style:n.style}}function wB(n,t,e){if(!e)return[n];const{property:i,start:s,end:r}=e,o=t.length,{compare:c,between:h,normalize:f}=PM(i),{start:m,end:y,loop:_,style:b}=TB(n,t,e),w=[];let x=!1,A=null,M,N,L;const H=()=>h(s,L,M)&&c(s,L)!==0,F=()=>c(r,M)===0||h(r,L,M),K=()=>x||H(),O=()=>!x||F();for(let I=m,R=m;I<=y;++I)N=t[I%o],!N.skip&&(M=f(N[i]),M!==L&&(x=h(M,s,r),A===null&&K()&&(A=c(M,s)===0?I:R),A!==null&&O()&&(w.push(_1({start:A,end:I,loop:_,count:o,style:b})),A=null),R=I,L=M));return A!==null&&w.push(_1({start:A,end:y,loop:_,count:o,style:b})),w}function EB(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const r=wB(i[s],n.points,t);r.length&&e.push(...r)}return e}function SB(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function xB(n,t,e,i){const s=n.length,r=[];let o=t,c=n[t],h;for(h=t+1;h<=e;++h){const f=n[h%s];f.skip||f.stop?c.skip||(i=!1,r.push({start:t%s,end:(h-1)%s,loop:i}),t=o=f.stop?h:null):(o=h,c.skip&&(t=h)),c=f}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function AB(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const r=!!n._loop,{start:o,end:c}=SB(e,s,r,i);if(i===!0)return v1(n,[{start:o,end:c,loop:r}],e,t);const h=c<o?c+s:c,f=!!n._fullLoop&&o===0&&c===s-1;return v1(n,xB(e,o,h,f),e,t)}function v1(n,t,e,i){return!i||!i.setContext||!e?t:IB(n,t,e,i)}function IB(n,t,e,i){const s=n._chart.getContext(),r=b1(n.options),{_datasetIndex:o,options:{spanGaps:c}}=n,h=e.length,f=[];let m=r,y=t[0].start,_=y;function b(w,x,A,M){const N=c?-1:1;if(w!==x){for(w+=h;e[w%h].skip;)w-=N;for(;e[x%h].skip;)x+=N;w%h!==x%h&&(f.push({start:w%h,end:x%h,loop:A,style:M}),m=M,y=x%h)}}for(const w of t){y=c?y:w.start;let x=e[y%h],A;for(_=y+1;_<=w.end;_++){const M=e[_%h];A=b1(i.setContext(hl(s,{type:"segment",p0:x,p1:M,p0DataIndex:(_-1)%h,p1DataIndex:_%h,datasetIndex:o}))),RB(A,m)&&b(y,_-1,w.loop,m),x=M,m=A}y<_-1&&b(y,_-1,w.loop,m)}return f}function b1(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function RB(n,t){if(!t)return!1;const e=[],i=function(s,r){return TT(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function ng(n,t,e){return n.options.clip?n[e]:t[e]}function DB(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:ng(e,t,"left"),right:ng(e,t,"right"),top:ng(i,t,"top"),bottom:ng(i,t,"bottom")}:t}function CB(n,t){const e=t._clip;if(e.disabled)return!1;const i=DB(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class MB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const r=e.listeners[s],o=e.duration;r.forEach(c=>c({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=vM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,c=!1,h;for(;o>=0;--o)h=r[o],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(t),c=!0):(r[o]=r[r.length-1],r.pop());c&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ur=new MB;const T1="transparent",PB={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=u1(n||T1),s=i.valid&&u1(t||T1);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class kB{constructor(t,e,i,s){const r=e[i];s=Jm([t.to,s,r,t.from]);const o=Jm([t.from,r,s]);this._active=!0,this._fn=t.fn||PB[t.type||typeof o],this._easing=of[t.easing]||of.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Jm([t.to,e,s,t.from]),this._from=Jm([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,c=this._to;let h;if(this._active=r!==c&&(o||e<i),!this._active){this._target[s]=c,this._notify(!0);return}if(e<0){this._target[s]=r;return}h=e/i%2,h=o&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[s]=this._fn(r,c,h)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class kM{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!te(t))return;const e=Object.keys(We.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!te(r))return;const o={};for(const c of e)o[c]=r[c];(bn(r.properties)&&r.properties||[s]).forEach(c=>{(c===s||!i.has(c))&&i.set(c,o)})})}_animateOptions(t,e){const i=e.options,s=NB(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&OB(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),c=Date.now();let h;for(h=o.length-1;h>=0;--h){const f=o[h];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(t,e));continue}const m=e[f];let y=r[f];const _=i.get(f);if(y)if(_&&y.active()){y.update(_,m,c);continue}else y.cancel();if(!_||!_.duration){t[f]=m;continue}r[f]=y=new kB(_,t,f,m),s.push(y)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return ur.add(this._chart,i),!0}}function OB(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function NB(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function w1(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function VB(n,t,e){if(e===!1)return!1;const i=w1(n,e),s=w1(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function LB(n){let t,e,i,s;return te(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function OM(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function E1(n,t,e,i={}){const s=n.keys,r=i.mode==="single";let o,c,h,f;if(t===null)return;let m=!1;for(o=0,c=s.length;o<c;++o){if(h=+s[o],h===e){if(m=!0,i.all)continue;break}f=n.values[h],ji(f)&&(r||t===0||xs(t)===xs(f))&&(t+=f)}return!m&&!i.all?0:t}function jB(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),c=new Array(o.length);let h,f,m;for(h=0,f=o.length;h<f;++h)m=o[h],c[h]={[s]:m,[r]:n[m]};return c}function Nv(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function BB(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function FB(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function UB(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function S1(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function x1(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:c}=i,h=r.axis,f=o.axis,m=BB(r,o,i),y=t.length;let _;for(let b=0;b<y;++b){const w=t[b],{[h]:x,[f]:A}=w,M=w._stacks||(w._stacks={});_=M[f]=UB(s,m,x),_[c]=A,_._top=S1(_,o,!0,i.type),_._bottom=S1(_,o,!1,i.type);const N=_._visualValues||(_._visualValues={});N[c]=A}}function Vv(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function zB(n,t){return hl(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function HB(n,t,e){return hl(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Ch(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const Lv=n=>n==="reset"||n==="none",A1=(n,t)=>t?n:Object.assign({},n),qB=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:OM(e,!0),values:null};class Go{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Nv(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ch(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(y,_,b,w)=>y==="x"?_:y==="r"?w:b,r=e.xAxisID=Ht(i.xAxisID,Vv(t,"x")),o=e.yAxisID=Ht(i.yAxisID,Vv(t,"y")),c=e.rAxisID=Ht(i.rAxisID,Vv(t,"r")),h=e.indexAxis,f=e.iAxisID=s(h,r,o,c),m=e.vAxisID=s(h,o,r,c);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(c),e.iScale=this.getScaleForId(f),e.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&o1(this._data,this),t._stacked&&Ch(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(te(e)){const s=this._cachedMeta;this._data=jB(e,s)}else if(i!==e){if(i){o1(i,this);const s=this._cachedMeta;Ch(s),s._parsed=[]}e&&Object.isExtensible(e)&&Ej(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=Nv(e.vScale,e),e.stack!==i.stack&&(s=!0,Ch(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&(x1(this,e._parsed),e._stacked=Nv(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,c=r.axis;let h=t===0&&e===s.length?!0:i._sorted,f=t>0&&i._parsed[t-1],m,y,_;if(this._parsing===!1)i._parsed=s,i._sorted=!0,_=s;else{bn(s[t])?_=this.parseArrayData(i,s,t,e):te(s[t])?_=this.parseObjectData(i,s,t,e):_=this.parsePrimitiveData(i,s,t,e);const b=()=>y[c]===null||f&&y[c]<f[c];for(m=0;m<e;++m)i._parsed[m+t]=y=_[m],h&&(b()&&(h=!1),f=y);i._sorted=h}o&&x1(this,_)}parsePrimitiveData(t,e,i,s){const{iScale:r,vScale:o}=t,c=r.axis,h=o.axis,f=r.getLabels(),m=r===o,y=new Array(s);let _,b,w;for(_=0,b=s;_<b;++_)w=_+i,y[_]={[c]:m||r.parse(f[w],w),[h]:o.parse(e[w],w)};return y}parseArrayData(t,e,i,s){const{xScale:r,yScale:o}=t,c=new Array(s);let h,f,m,y;for(h=0,f=s;h<f;++h)m=h+i,y=e[m],c[h]={x:r.parse(y[0],m),y:o.parse(y[1],m)};return c}parseObjectData(t,e,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=new Array(s);let m,y,_,b;for(m=0,y=s;m<y;++m)_=m+i,b=e[_],f[m]={x:r.parse(Zo(b,c),_),y:o.parse(Zo(b,h),_)};return f}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,r=this._cachedMeta,o=e[t.axis],c={keys:OM(s,!0),values:e._stacks[t.axis]._visualValues};return E1(c,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const r=i[e.axis];let o=r===null?NaN:r;const c=s&&i._stacks[e.axis];s&&c&&(s.values=c,o=E1(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,c=this._getOtherScale(t),h=qB(e,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:y}=FB(c);let _,b;function w(){b=s[_];const x=b[c.axis];return!ji(b[t.axis])||m>x||y<x}for(_=0;_<o&&!(!w()&&(this.updateRangeFromParsed(f,t,b,h),r));++_);if(r){for(_=o-1;_>=0;--_)if(!w()){this.updateRangeFromParsed(f,t,b,h);break}}return f}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],ji(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=LB(Ht(this.options.clip,VB(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,o=[],c=this._drawStart||0,h=this._drawCount||s.length-c,f=this.options.drawActiveElementsOnTop;let m;for(i.dataset&&i.dataset.draw(t,r,c,h),m=c;m<c+h;++m){const y=s[m];y.hidden||(y.active&&f?o.push(y):y.draw(t,r))}for(m=0;m<o.length;++m)o[m].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=HB(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=zB(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,c=r[o],h=this.enableOptionSharing&&Df(i);if(c)return A1(c,h);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,t),y=s?[`${t}Hover`,"hover",t,""]:[t,""],_=f.getOptionScopes(this.getDataset(),m),b=Object.keys(We.elements[t]),w=()=>this.getContext(i,s,e),x=f.resolveNamedOptions(_,b,w,y);return x.$shared&&(x.$shared=h,r[o]=Object.freeze(A1(x,h))),x}_resolveAnimations(t,e,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,c=r[o];if(c)return c;let h;if(s.options.animation!==!1){const m=this.chart.config,y=m.datasetAnimationScopeKeys(this._type,e),_=m.getOptionScopes(this.getDataset(),y);h=m.createResolver(_,this.getContext(t,i,e))}const f=new kM(s,h&&h.animations);return h&&h._cacheable&&(r[o]=Object.freeze(f)),f}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Lv(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,s){Lv(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Lv(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[c,h,f]of this._syncList)this[c](h,f);this._syncList=[];const s=i.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){const s=this._cachedMeta,r=s.data,o=t+e;let c;const h=f=>{for(f.length+=e,c=f.length-1;c>=o;c--)f[c]=f[c-e]};for(h(r),c=t;c<o;++c)r[c]=new this.dataElementType;this._parsing&&h(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Ch(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}rt(Go,"defaults",{}),rt(Go,"datasetElementType",null),rt(Go,"dataElementType",null);function GB(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=_M(i.sort((s,r)=>s-r))}return n._cache.$bar}function WB(n){const t=n.iScale,e=GB(t,n.type);let i=t._length,s,r,o,c;const h=()=>{o===32767||o===-32768||(Df(c)&&(i=Math.min(i,Math.abs(o-c)||i)),c=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),h();for(c=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),h();return i}function YB(n,t,e,i){const s=e.barThickness;let r,o;return ae(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function KB(n,t,e,i){const s=t.pixels,r=s[n];let o=n>0?s[n-1]:null,c=n<s.length-1?s[n+1]:null;const h=e.categoryPercentage;o===null&&(o=r-(c===null?t.end-t.start:c-r)),c===null&&(c=r+r-o);const f=r-(r-Math.min(o,c))/2*h;return{chunk:Math.abs(c-o)/2*h/i,ratio:e.barPercentage,start:f}}function $B(n,t,e,i){const s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),c=Math.max(s,r);let h=o,f=c;Math.abs(o)>Math.abs(c)&&(h=c,f=o),t[e.axis]=f,t._custom={barStart:h,barEnd:f,start:s,end:r,min:o,max:c}}function NM(n,t,e,i){return bn(n)?$B(n,t,e,i):t[e.axis]=e.parse(n,i),t}function I1(n,t,e,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),c=s===r,h=[];let f,m,y,_;for(f=e,m=e+i;f<m;++f)_=t[f],y={},y[s.axis]=c||s.parse(o[f],f),h.push(NM(_,y,r,f));return h}function jv(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function XB(n,t,e){return n!==0?xs(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function QB(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}function ZB(n,t,e,i){let s=t.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:h,top:f,bottom:m}=QB(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=f:(e._bottom||0)===i?s=m:(r[R1(m,o,c,h)]=!0,s=f)),r[R1(s,o,c,h)]=!0,n.borderSkipped=r}function R1(n,t,e,i){return i?(n=JB(n,t,e),n=D1(n,e,t)):n=D1(n,t,e),n}function JB(n,t,e){return n===t?e:n===e?t:n}function D1(n,t,e){return n==="start"?t:n==="end"?e:n}function t3(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class wg extends Go{parsePrimitiveData(t,e,i,s){return I1(t,e,i,s)}parseArrayData(t,e,i,s){return I1(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=r.axis==="x"?c:h,m=o.axis==="x"?c:h,y=[];let _,b,w,x;for(_=i,b=i+s;_<b;++_)x=e[_],w={},w[r.axis]=r.parse(Zo(x,f),_),y.push(NM(Zo(x,m),w,o,_));return y}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,r=this.getParsed(t),o=r._custom,c=jv(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),f=c.isHorizontal(),m=this._getRuler(),{sharedOptions:y,includeOptions:_}=this._getSharedOptions(e,s);for(let b=e;b<e+i;b++){const w=this.getParsed(b),x=r||ae(w[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(b),A=this._calculateBarIndexPixels(b,m),M=(w._stacks||{})[c.axis],N={horizontal:f,base:x.base,enableBorderRadius:!M||jv(w._custom)||o===M._top||o===M._bottom,x:f?x.head:A.center,y:f?A.center:x.head,height:f?A.size:Math.abs(x.size),width:f?Math.abs(x.size):A.size};_&&(N.options=y||this.resolveDataElementOptions(b,t[b].active?"active":s));const L=N.options||t[b].options;ZB(N,L,M,o),t3(N,L,m.ratio),this.updateElement(t[b],b,N,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),r=i.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(e),h=c&&c[i.axis],f=m=>{const y=m._parsed.find(b=>b[i.axis]===h),_=y&&y[m.vScale.axis];if(ae(_)||isNaN(_))return!0};for(const m of s)if(!(e!==void 0&&f(m))&&((r===!1||o.indexOf(m.stack)===-1||r===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Ht(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const s=this._getStacks(t,i),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let r,o;for(r=0,o=e.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const c=t.barThickness;return{min:c||WB(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,c=r||0,h=this.getParsed(t),f=h._custom,m=jv(f);let y=h[e.axis],_=0,b=i?this.applyStack(e,h,i):y,w,x;b!==y&&(_=b-y,b=y),m&&(y=f.barStart,b=f.barEnd-f.barStart,y!==0&&xs(y)!==xs(f.barEnd)&&(_=0),_+=y);const A=!ae(r)&&!m?r:_;let M=e.getPixelForValue(A);if(this.chart.getDataVisibility(t)?w=e.getPixelForValue(_+b):w=M,x=w-M,Math.abs(x)<o){x=XB(x,e,c)*o,y===c&&(M-=x/2);const N=e.getPixelForDecimal(0),L=e.getPixelForDecimal(1),H=Math.min(N,L),F=Math.max(N,L);M=Math.max(Math.min(M,F),H),w=M+x,i&&!m&&(h._stacks[e.axis]._visualValues[s]=e.getValueForPixel(w)-e.getValueForPixel(M))}if(M===e.getPixelForValue(c)){const N=xs(x)*e.getLineWidthForValue(c)/2;M+=N,x-=N}return{size:x,base:M,head:w,center:w+x/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,r=s.skipNull,o=Ht(s.maxBarThickness,1/0);let c,h;const f=this._getAxisCount();if(e.grouped){const m=r?this._getStackCount(t):e.stackCount,y=s.barThickness==="flex"?KB(t,e,s,m*f):YB(t,e,s,m*f),_=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,b=this._getAxis().indexOf(Ht(_,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+b;c=y.start+y.chunk*w+y.chunk/2,h=Math.min(o,y.chunk*y.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),h=Math.min(o,e.min*e.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}rt(wg,"id","bar"),rt(wg,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),rt(wg,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function e3(n,t,e){let i=1,s=1,r=0,o=0;if(t<je){const c=n,h=c+t,f=Math.cos(c),m=Math.sin(c),y=Math.cos(h),_=Math.sin(h),b=(L,H,F)=>Mf(L,c,h,!0)?1:Math.max(H,H*e,F,F*e),w=(L,H,F)=>Mf(L,c,h,!0)?-1:Math.min(H,H*e,F,F*e),x=b(0,f,y),A=b(hn,m,_),M=w(Te,f,y),N=w(Te+hn,m,_);i=(x-M)/2,s=(A-N)/2,r=-(x+M)/2,o=-(A+N)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Wh extends Go{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=h=>+i[h];if(te(i[t])){const{key:h="value"}=this._parsing;r=f=>+Zo(i[f],h)}let o,c;for(o=t,c=t+e;o<c;++o)s._parsed[o]=r(o)}}_getRotation(){return dr(this.options.rotation-90)}_getCircumference(){return dr(this.options.circumference)}_getRotationExtents(){let t=je,e=-je;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-o)/2,0),h=Math.min(aj(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:m,rotation:y}=this._getRotationExtents(),{ratioX:_,ratioY:b,offsetX:w,offsetY:x}=e3(y,m,h),A=(i.width-o)/_,M=(i.height-o)/b,N=Math.max(Math.min(A,M)/2,0),L=dM(this.options.radius,N),H=Math.max(L*h,0),F=(L-H)/this._getVisibleDatasetWeightTotal();this.offsetX=w*L,this.offsetY=x*L,s.total=this.calculateTotal(),this.outerRadius=L-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*f,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/je)}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,c=o.chartArea,f=o.options.animation,m=(c.left+c.right)/2,y=(c.top+c.bottom)/2,_=r&&f.animateScale,b=_?0:this.innerRadius,w=_?0:this.outerRadius,{sharedOptions:x,includeOptions:A}=this._getSharedOptions(e,s);let M=this._getRotation(),N;for(N=0;N<e;++N)M+=this._circumference(N,r);for(N=e;N<e+i;++N){const L=this._circumference(N,r),H=t[N],F={x:m+this.offsetX,y:y+this.offsetY,startAngle:M,endAngle:M+L,circumference:L,outerRadius:w,innerRadius:b};A&&(F.options=x||this.resolveDataElementOptions(N,H.active?"active":s)),M+=L,this.updateElement(H,N,F,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?je*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=wT(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,r,o,c,h;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,c=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)h=c.resolveDataElementOptions(s),h.borderAlign!=="inner"&&(e=Math.max(e,h.borderWidth||0,h.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}rt(Wh,"id","doughnut"),rt(Wh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),rt(Wh,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),rt(Wh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const h=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:s,lineWidth:h.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class Eg extends Go{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:c,count:h}=Aj(e,s,o);this._drawStart=c,this._drawCount=h,Ij(e)&&(c=0,h=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const f=this.resolveDatasetElementOptions(t);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:f},t),this.updateElements(s,c,h,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:c,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(e,s),_=o.axis,b=c.axis,{spanGaps:w,segment:x}=this.options,A=Cf(w)?w:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||r||s==="none",N=e+i,L=t.length;let H=e>0&&this.getParsed(e-1);for(let F=0;F<L;++F){const K=t[F],O=M?K:{};if(F<e||F>=N){O.skip=!0;continue}const I=this.getParsed(F),R=ae(I[b]),V=O[_]=o.getPixelForValue(I[_],F),j=O[b]=r||R?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,I,h):I[b],F);O.skip=isNaN(V)||isNaN(j)||R,O.stop=F>0&&Math.abs(I[_]-H[_])>A,x&&(O.parsed=I,O.raw=f.data[F]),y&&(O.options=m||this.resolveDataElementOptions(F,K.active?"active":s)),M||this.updateElement(K,F,O,s),H=I}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}rt(Eg,"id","line"),rt(Eg,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),rt(Eg,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function xo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class MT{constructor(t){rt(this,"options");this.options=t||{}}static override(t){Object.assign(MT.prototype,t)}init(){}formats(){return xo()}parse(){return xo()}format(){return xo()}add(){return xo()}diff(){return xo()}startOf(){return xo()}endOf(){return xo()}}var VM={_date:MT};function n3(n,t,e,i){const{controller:s,data:r,_sorted:o}=n,c=s._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&o&&r.length){const f=c._reversePixels?Tj:Bo;if(i){if(s._sharedOptions){const m=r[0],y=typeof m.getRange=="function"&&m.getRange(t);if(y){const _=f(r,t,e-y),b=f(r,t,e+y);return{lo:_.lo,hi:b.hi}}}}else{const m=f(r,t,e);if(h){const{vScale:y}=s._cachedMeta,{_parsed:_}=n,b=_.slice(0,m.lo+1).reverse().findIndex(x=>!ae(x[y.axis]));m.lo-=Math.max(0,b);const w=_.slice(m.hi).findIndex(x=>!ae(x[y.axis]));m.hi+=Math.max(0,w)}return m}}return{lo:0,hi:r.length-1}}function Bp(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let c=0,h=r.length;c<h;++c){const{index:f,data:m}=r[c],{lo:y,hi:_}=n3(r[c],t,o,s);for(let b=y;b<=_;++b){const w=m[b];w.skip||i(w,f,b)}}}function i3(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Bv(n,t,e,i,s){const r=[];return!s&&!n.isPointInArea(t)||Bp(n,e,t,function(c,h,f){!s&&!Pf(c,n.chartArea,0)||c.inRange(t.x,t.y,i)&&r.push({element:c,datasetIndex:h,index:f})},!0),r}function s3(n,t,e,i){let s=[];function r(o,c,h){const{startAngle:f,endAngle:m}=o.getProps(["startAngle","endAngle"],i),{angle:y}=pM(o,{x:t.x,y:t.y});Mf(y,f,m)&&s.push({element:o,datasetIndex:c,index:h})}return Bp(n,e,t,r),s}function r3(n,t,e,i,s,r){let o=[];const c=i3(e);let h=Number.POSITIVE_INFINITY;function f(m,y,_){const b=m.inRange(t.x,t.y,s);if(i&&!b)return;const w=m.getCenterPoint(s);if(!(!!r||n.isPointInArea(w))&&!b)return;const A=c(t,w);A<h?(o=[{element:m,datasetIndex:y,index:_}],h=A):A===h&&o.push({element:m,datasetIndex:y,index:_})}return Bp(n,e,t,f),o}function Fv(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?s3(n,t,e,s):r3(n,t,e,i,s,r)}function C1(n,t,e,i,s){const r=[],o=e==="x"?"inXRange":"inYRange";let c=!1;return Bp(n,e,t,(h,f,m)=>{h[o]&&h[o](t[e],s)&&(r.push({element:h,datasetIndex:f,index:m}),c=c||h.inRange(t.x,t.y,s))}),i&&!c?[]:r}var a3={modes:{index(n,t,e,i){const s=Ro(t,n),r=e.axis||"x",o=e.includeInvisible||!1,c=e.intersect?Bv(n,s,r,i,o):Fv(n,s,r,!1,i,o),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const m=c[0].index,y=f.data[m];y&&!y.skip&&h.push({element:y,datasetIndex:f.index,index:m})}),h):[]},dataset(n,t,e,i){const s=Ro(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let c=e.intersect?Bv(n,s,r,i,o):Fv(n,s,r,!1,i,o);if(c.length>0){const h=c[0].datasetIndex,f=n.getDatasetMeta(h).data;c=[];for(let m=0;m<f.length;++m)c.push({element:f[m],datasetIndex:h,index:m})}return c},point(n,t,e,i){const s=Ro(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Bv(n,s,r,i,o)},nearest(n,t,e,i){const s=Ro(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Fv(n,s,r,e.intersect,i,o)},x(n,t,e,i){const s=Ro(t,n);return C1(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=Ro(t,n);return C1(n,s,"y",e.intersect,i)}}};const LM=["left","top","right","bottom"];function Mh(n,t){return n.filter(e=>e.pos===t)}function M1(n,t){return n.filter(e=>LM.indexOf(e.pos)===-1&&e.box.axis===t)}function Ph(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function o3(n){const t=[];let e,i,s,r,o,c;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:c=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:c});return t}function l3(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!LM.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function c3(n,t){const e=l3(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,c;for(r=0,o=n.length;r<o;++r){c=n[r];const{fullSize:h}=c.box,f=e[c.stack],m=f&&c.stackWeight/f.weight;c.horizontal?(c.width=m?m*i:h&&t.availableWidth,c.height=s):(c.width=i,c.height=m?m*s:h&&t.availableHeight)}return e}function u3(n){const t=o3(n),e=Ph(t.filter(f=>f.box.fullSize),!0),i=Ph(Mh(t,"left"),!0),s=Ph(Mh(t,"right")),r=Ph(Mh(t,"top"),!0),o=Ph(Mh(t,"bottom")),c=M1(t,"x"),h=M1(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(h).concat(o).concat(c),chartArea:Mh(t,"chartArea"),vertical:i.concat(s).concat(h),horizontal:r.concat(o).concat(c)}}function P1(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function jM(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function h3(n,t,e,i){const{pos:s,box:r}=e,o=n.maxPadding;if(!te(s)){e.size&&(n[s]-=e.size);const y=i[e.stack]||{size:0,count:1};y.size=Math.max(y.size,e.horizontal?r.height:r.width),e.size=y.size/y.count,n[s]+=e.size}r.getPadding&&jM(o,r.getPadding());const c=Math.max(0,t.outerWidth-P1(o,n,"left","right")),h=Math.max(0,t.outerHeight-P1(o,n,"top","bottom")),f=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,e.horizontal?{same:f,other:m}:{same:m,other:f}}function f3(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function d3(n,t){const e=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function Yh(n,t,e,i){const s=[];let r,o,c,h,f,m;for(r=0,o=n.length,f=0;r<o;++r){c=n[r],h=c.box,h.update(c.width||t.w,c.height||t.h,d3(c.horizontal,t));const{same:y,other:_}=h3(t,e,c,i);f|=y&&s.length,m=m||_,h.fullSize||s.push(c)}return f&&Yh(s,t,e,i)||m}function ig(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function k1(n,t,e,i){const s=e.padding;let{x:r,y:o}=t;for(const c of n){const h=c.box,f=i[c.stack]||{placed:0,weight:1},m=c.stackWeight/f.weight||1;if(c.horizontal){const y=t.w*m,_=f.size||h.height;Df(f.start)&&(o=f.start),h.fullSize?ig(h,s.left,o,e.outerWidth-s.right-s.left,_):ig(h,t.left+f.placed,o,y,_),f.start=o,f.placed+=y,o=h.bottom}else{const y=t.h*m,_=f.size||h.width;Df(f.start)&&(r=f.start),h.fullSize?ig(h,r,s.top,_,e.outerHeight-s.bottom-s.top):ig(h,r,t.top+f.placed,_,y),f.start=r,f.placed+=y,r=h.right}}t.x=r,t.y=o}var pa={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Xi(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),c=u3(n.boxes),h=c.vertical,f=c.horizontal;he(n.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const m=h.reduce((x,A)=>A.box.options&&A.box.options.display===!1?x:x+1,0)||1,y=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/m,hBoxMaxHeight:o/2}),_=Object.assign({},s);jM(_,Xi(i));const b=Object.assign({maxPadding:_,w:r,h:o,x:s.left,y:s.top},s),w=c3(h.concat(f),y);Yh(c.fullSize,b,y,w),Yh(h,b,y,w),Yh(f,b,y,w)&&Yh(h,b,y,w),f3(b),k1(c.leftAndTop,b,y,w),b.x+=b.w,b.y+=b.h,k1(c.rightAndBottom,b,y,w),n.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},he(c.chartArea,x=>{const A=x.box;Object.assign(A,n.chartArea),A.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class BM{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class m3 extends BM{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Sg="$chartjs",g3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},O1=n=>n===null||n==="";function p3(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Sg]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",O1(s)){const r=y1(n,"width");r!==void 0&&(n.width=r)}if(O1(i))if(n.style.height==="")n.height=n.width/(t||2);else{const r=y1(n,"height");r!==void 0&&(n.height=r)}return n}const FM=pB?{passive:!0}:!1;function y3(n,t,e){n&&n.addEventListener(t,e,FM)}function _3(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,FM)}function v3(n,t){const e=g3[n.type]||n.type,{x:i,y:s}=Ro(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function tp(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function b3(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||tp(c.addedNodes,i),o=o&&!tp(c.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function T3(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||tp(c.removedNodes,i),o=o&&!tp(c.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const kf=new Map;let N1=0;function UM(){const n=window.devicePixelRatio;n!==N1&&(N1=n,kf.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function w3(n,t){kf.size||window.addEventListener("resize",UM),kf.set(n,t)}function E3(n){kf.delete(n),kf.size||window.removeEventListener("resize",UM)}function S3(n,t,e){const i=n.canvas,s=i&&CT(i);if(!s)return;const r=bM((c,h)=>{const f=s.clientWidth;e(c,h),f<s.clientWidth&&e()},window),o=new ResizeObserver(c=>{const h=c[0],f=h.contentRect.width,m=h.contentRect.height;f===0&&m===0||r(f,m)});return o.observe(s),w3(n,r),o}function Uv(n,t,e){e&&e.disconnect(),t==="resize"&&E3(n)}function x3(n,t,e){const i=n.canvas,s=bM(r=>{n.ctx!==null&&e(v3(r,n))},n);return y3(i,t,s),s}class A3 extends BM{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(p3(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Sg])return!1;const i=e[Sg].initial;["height","width"].forEach(r=>{const o=i[r];ae(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[Sg],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:b3,detach:T3,resize:S3}[e]||x3;s[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Uv,detach:Uv,resize:Uv}[e]||_3)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return gB(t,e,i,s)}isAttached(t){const e=t&&CT(t);return!!(e&&e.isConnected)}}function I3(n){return!DT()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?m3:A3}var Tg;let Oa=(Tg=class{constructor(){rt(this,"x");rt(this,"y");rt(this,"active",!1);rt(this,"options");rt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Cf(this.x)&&Cf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},rt(Tg,"defaults",{}),rt(Tg,"defaultRoutes"),Tg);function R3(n,t){const e=n.options.ticks,i=D3(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?M3(t):[],o=r.length,c=r[0],h=r[o-1],f=[];if(o>s)return P3(t,f,r,o/s),f;const m=C3(r,t,s);if(o>0){let y,_;const b=o>1?Math.round((h-c)/(o-1)):null;for(sg(t,f,m,ae(b)?0:c-b,c),y=0,_=o-1;y<_;y++)sg(t,f,m,r[y],r[y+1]);return sg(t,f,m,h,ae(b)?t.length:h+b),f}return sg(t,f,m),f}function D3(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function C3(n,t,e){const i=k3(n),s=t.length/e;if(!i)return Math.max(s,1);const r=mj(i);for(let o=0,c=r.length-1;o<c;o++){const h=r[o];if(h>s)return h}return Math.max(s,1)}function M3(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function P3(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function sg(n,t,e,i,s){const r=Ht(i,0),o=Math.min(Ht(s,n.length),n.length);let c=0,h,f,m;for(e=Math.ceil(e),s&&(h=s-i,e=h/Math.floor(h/e)),m=r;m<0;)c++,m=Math.round(r+c*e);for(f=Math.max(r,0);f<o;f++)f===m&&(t.push(n[f]),c++,m=Math.round(r+c*e))}function k3(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const O3=n=>n==="left"?"right":n==="right"?"left":n,V1=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,L1=(n,t)=>Math.min(t||n,n);function j1(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function N3(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,c=1e-6;let h=n.getPixelForTick(s),f;if(!(e&&(i===1?f=Math.max(h-r,o-h):t===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(s-1))/2,h+=s<t?f:-f,h<r-c||h>o+c)))return h}function V3(n,t){he(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function kh(n){return n.drawTicks?n.tickLength:0}function B1(n,t){if(!n.display)return 0;const e=Zn(n.font,t),i=Xi(n.padding);return(bn(n.text)?n.text.length:1)*e.lineHeight+i.height}function L3(n,t){return hl(n,{scale:t,type:"scale"})}function j3(n,t,e){return hl(n,{tick:e,index:t,type:"tick"})}function B3(n,t,e){let i=TM(n);return(e&&t!=="right"||!e&&t==="right")&&(i=O3(i)),i}function F3(n,t,e,i){const{top:s,left:r,bottom:o,right:c,chart:h}=n,{chartArea:f,scales:m}=h;let y=0,_,b,w;const x=o-s,A=c-r;if(n.isHorizontal()){if(b=fi(i,r,c),te(e)){const M=Object.keys(e)[0],N=e[M];w=m[M].getPixelForValue(N)+x-t}else e==="center"?w=(f.bottom+f.top)/2+x-t:w=V1(n,e,t);_=c-r}else{if(te(e)){const M=Object.keys(e)[0],N=e[M];b=m[M].getPixelForValue(N)-A+t}else e==="center"?b=(f.left+f.right)/2-A+t:b=V1(n,e,t);w=fi(i,o,s),y=e==="left"?-hn:hn}return{titleX:b,titleY:w,maxWidth:_,rotation:y}}class cu extends Oa{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=ps(t,Number.POSITIVE_INFINITY),e=ps(e,Number.NEGATIVE_INFINITY),i=ps(i,Number.POSITIVE_INFINITY),s=ps(s,Number.NEGATIVE_INFINITY),{min:ps(t,i),max:ps(e,s),minDefined:ji(t),maxDefined:ji(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};const c=this.getMatchingVisibleMetas();for(let h=0,f=c.length;h<f;++h)o=c[h].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:ps(e,ps(i,e)),max:ps(i,ps(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Se(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yj(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?j1(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=R3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Se(this.options.afterUpdate,[this])}beforeSetDimensions(){Se(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Se(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Se(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Se(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=Se(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){Se(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Se(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=L1(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let o=s,c,h,f;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const m=this._getLabelSizes(),y=m.widest.width,_=m.highest.height,b=Vn(this.chart.width-y,0,this.maxWidth);c=t.offset?this.maxWidth/i:b/(i-1),y+6>c&&(c=b/(i-(t.offset?.5:1)),h=this.maxHeight-kh(t.grid)-e.padding-B1(t.title,this.chart.options.font),f=Math.sqrt(y*y+_*_),o=_j(Math.min(Math.asin(Vn((m.highest.height+6)/c,-1,1)),Math.asin(Vn(h/f,-1,1))-Math.asin(Vn(_/f,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Se(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Se(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const h=B1(s,e.options.font);if(c?(t.width=this.maxWidth,t.height=kh(r)+h):(t.height=this.maxHeight,t.width=kh(r)+h),i.display&&this.ticks.length){const{first:f,last:m,widest:y,highest:_}=this._getLabelSizes(),b=i.padding*2,w=dr(this.labelRotation),x=Math.cos(w),A=Math.sin(w);if(c){const M=i.mirror?0:A*y.width+x*_.height;t.height=Math.min(this.maxHeight,t.height+M+b)}else{const M=i.mirror?0:x*y.width+A*_.height;t.width=Math.min(this.maxWidth,t.width+M+b)}this._calculatePadding(f,m,A,x)}}this._handleMargins(),c?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:o},position:c}=this.options,h=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,b=0;h?f?(_=s*t.width,b=i*e.height):(_=i*t.height,b=s*e.width):r==="start"?b=e.width:r==="end"?_=t.width:r!=="inner"&&(_=t.width/2,b=e.width/2),this.paddingLeft=Math.max((_-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((b-y+o)*this.width/(this.width-y),0)}else{let m=e.height/2,y=t.height/2;r==="start"?(m=0,y=t.height):r==="end"&&(m=e.height,y=0),this.paddingTop=m+o,this.paddingBottom=y+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Se(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ae(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=j1(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:r}=this,o=[],c=[],h=Math.floor(e/L1(e,i));let f=0,m=0,y,_,b,w,x,A,M,N,L,H,F;for(y=0;y<e;y+=h){if(w=t[y].label,x=this._resolveTickFontOptions(y),s.font=A=x.string,M=r[A]=r[A]||{data:{},gc:[]},N=x.lineHeight,L=H=0,!ae(w)&&!bn(w))L=f1(s,M.data,M.gc,L,w),H=N;else if(bn(w))for(_=0,b=w.length;_<b;++_)F=w[_],!ae(F)&&!bn(F)&&(L=f1(s,M.data,M.gc,L,F),H+=N);o.push(L),c.push(H),f=Math.max(L,f),m=Math.max(H,m)}V3(r,e);const K=o.indexOf(f),O=c.indexOf(m),I=R=>({width:o[R]||0,height:c[R]||0});return{first:I(0),last:I(e-1),widest:I(K),highest:I(O),widths:o,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return bj(this._alignToPixels?So(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=j3(this.getContext(),t,i))}return this.$context||(this.$context=L3(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=dr(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,c=r?r.widest.width+o:0,h=r?r.highest.height+o:0;return this.isHorizontal()?h*i>c*s?c/i:h/s:h*s<c*i?h/i:c/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:c}=s,h=r.offset,f=this.isHorizontal(),y=this.ticks.length+(h?1:0),_=kh(r),b=[],w=c.setContext(this.getContext()),x=w.display?w.width:0,A=x/2,M=function(Q){return So(i,Q,x)};let N,L,H,F,K,O,I,R,V,j,U,B;if(o==="top")N=M(this.bottom),O=this.bottom-_,R=N-A,j=M(t.top)+A,B=t.bottom;else if(o==="bottom")N=M(this.top),j=t.top,B=M(t.bottom)-A,O=N+A,R=this.top+_;else if(o==="left")N=M(this.right),K=this.right-_,I=N-A,V=M(t.left)+A,U=t.right;else if(o==="right")N=M(this.left),V=t.left,U=M(t.right)-A,K=N+A,I=this.left+_;else if(e==="x"){if(o==="center")N=M((t.top+t.bottom)/2+.5);else if(te(o)){const Q=Object.keys(o)[0],at=o[Q];N=M(this.chart.scales[Q].getPixelForValue(at))}j=t.top,B=t.bottom,O=N+A,R=O+_}else if(e==="y"){if(o==="center")N=M((t.left+t.right)/2);else if(te(o)){const Q=Object.keys(o)[0],at=o[Q];N=M(this.chart.scales[Q].getPixelForValue(at))}K=N-A,I=K-_,V=t.left,U=t.right}const At=Ht(s.ticks.maxTicksLimit,y),St=Math.max(1,Math.ceil(y/At));for(L=0;L<y;L+=St){const Q=this.getContext(L),at=r.setContext(Q),yt=c.setContext(Q),tt=at.lineWidth,P=at.color,G=yt.dash||[],st=yt.dashOffset,W=at.tickWidth,lt=at.tickColor,mt=at.tickBorderDash||[],gt=at.tickBorderDashOffset;H=N3(this,L,h),H!==void 0&&(F=So(i,H,tt),f?K=I=V=U=F:O=R=j=B=F,b.push({tx1:K,ty1:O,tx2:I,ty2:R,x1:V,y1:j,x2:U,y2:B,width:tt,color:P,borderDash:G,borderDashOffset:st,tickWidth:W,tickColor:lt,tickBorderDash:mt,tickBorderDashOffset:gt}))}return this._ticksLength=y,this._borderValue=N,b}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:f,padding:m,mirror:y}=r,_=kh(i.grid),b=_+m,w=y?-m:b,x=-dr(this.labelRotation),A=[];let M,N,L,H,F,K,O,I,R,V,j,U,B="middle";if(s==="top")K=this.bottom-w,O=this._getXAxisLabelAlignment();else if(s==="bottom")K=this.top+w,O=this._getXAxisLabelAlignment();else if(s==="left"){const St=this._getYAxisLabelAlignment(_);O=St.textAlign,F=St.x}else if(s==="right"){const St=this._getYAxisLabelAlignment(_);O=St.textAlign,F=St.x}else if(e==="x"){if(s==="center")K=(t.top+t.bottom)/2+b;else if(te(s)){const St=Object.keys(s)[0],Q=s[St];K=this.chart.scales[St].getPixelForValue(Q)+b}O=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")F=(t.left+t.right)/2-b;else if(te(s)){const St=Object.keys(s)[0],Q=s[St];F=this.chart.scales[St].getPixelForValue(Q)}O=this._getYAxisLabelAlignment(_).textAlign}e==="y"&&(h==="start"?B="top":h==="end"&&(B="bottom"));const At=this._getLabelSizes();for(M=0,N=c.length;M<N;++M){L=c[M],H=L.label;const St=r.setContext(this.getContext(M));I=this.getPixelForTick(M)+r.labelOffset,R=this._resolveTickFontOptions(M),V=R.lineHeight,j=bn(H)?H.length:1;const Q=j/2,at=St.color,yt=St.textStrokeColor,tt=St.textStrokeWidth;let P=O;o?(F=I,O==="inner"&&(M===N-1?P=this.options.reverse?"left":"right":M===0?P=this.options.reverse?"right":"left":P="center"),s==="top"?f==="near"||x!==0?U=-j*V+V/2:f==="center"?U=-At.highest.height/2-Q*V+V:U=-At.highest.height+V/2:f==="near"||x!==0?U=V/2:f==="center"?U=At.highest.height/2-Q*V:U=At.highest.height-j*V,y&&(U*=-1),x!==0&&!St.showLabelBackdrop&&(F+=V/2*Math.sin(x))):(K=I,U=(1-j)*V/2);let G;if(St.showLabelBackdrop){const st=Xi(St.backdropPadding),W=At.heights[M],lt=At.widths[M];let mt=U-st.top,gt=0-st.left;switch(B){case"middle":mt-=W/2;break;case"bottom":mt-=W;break}switch(O){case"center":gt-=lt/2;break;case"right":gt-=lt;break;case"inner":M===N-1?gt-=lt:M>0&&(gt-=lt/2);break}G={left:gt,top:mt,width:lt+st.width,height:W+st.height,color:St.backdropColor}}A.push({label:H,font:R,textOffset:U,options:{rotation:x,color:at,strokeColor:yt,strokeWidth:tt,textAlign:P,textBaseline:B,translation:[F,K],backdrop:G}})}return A}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-dr(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),c=t+r,h=o.widest.width;let f,m;return e==="left"?s?(m=this.right+r,i==="near"?f="left":i==="center"?(f="center",m+=h/2):(f="right",m+=h)):(m=this.right-c,i==="near"?f="right":i==="center"?(f="center",m-=h/2):(f="left",m=this.left)):e==="right"?s?(m=this.left+r,i==="near"?f="right":i==="center"?(f="center",m-=h/2):(f="left",m-=h)):(m=this.left+c,i==="near"?f="left":i==="center"?(f="center",m+=h/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const c=(h,f,m)=>{!m.width||!m.color||(i.save(),i.lineWidth=m.width,i.strokeStyle=m.color,i.setLineDash(m.borderDash||[]),i.lineDashOffset=m.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const h=s[r];e.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const c=s.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,m,y,_;this.isHorizontal()?(f=So(t,this.left,o)-o/2,m=So(t,this.right,c)+c/2,y=_=h):(y=So(t,this.top,o)-o/2,_=So(t,this.bottom,c)+c/2,f=m=h),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(f,y),e.lineTo(m,_),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&ET(i,s);const r=this.getLabelItems(t);for(const o of r){const c=o.options,h=o.font,f=o.label,m=o.textOffset;Qg(i,f,0,m,h,c)}s&&ST(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=Zn(i.font),o=Xi(i.padding),c=i.align;let h=r.lineHeight/2;e==="bottom"||e==="center"||te(e)?(h+=o.bottom,bn(i.text)&&(h+=r.lineHeight*(i.text.length-1))):h+=o.top;const{titleX:f,titleY:m,maxWidth:y,rotation:_}=F3(this,h,e,c);Qg(t,i.text,0,0,r,{color:i.color,maxWidth:y,rotation:_,textAlign:B3(c,e,s),textBaseline:"middle",translation:[f,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Ht(t.grid&&t.grid.z,-1),s=Ht(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==cu.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];c[i]===this.id&&(!t||c.type===t)&&s.push(c)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Zn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class rg{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;H3(e)&&(i=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,U3(t,o,i),this.override&&We.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in We[s]&&(delete We[s][i],this.override&&delete Jo[i])}}function U3(n,t,e){const i=Rf(Object.create(null),[e?We.get(e):{},We.get(t),n.defaults]);We.set(t,i),n.defaultRoutes&&z3(t,n.defaultRoutes),n.descriptors&&We.describe(t,n.descriptors)}function z3(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),c=o.pop(),h=o.join(".");We.route(r,s,h,c)})}function H3(n){return"id"in n&&"defaults"in n}class q3{constructor(){this.controllers=new rg(Go,"datasets",!0),this.elements=new rg(Oa,"elements"),this.plugins=new rg(Object,"plugins"),this.scales=new rg(cu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):he(s,o=>{const c=i||this._getRegistryForType(o);this._exec(t,c,o)})})}_exec(t,e,i){const s=vT(t);Se(i["before"+s],[],i),e[t](i),Se(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var _s=new q3;class G3{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const r of t){const o=r.plugin,c=o[i],h=[e,s,r.options];if(Se(c,h,o)===!1&&s.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=Ht(i.options&&i.options.plugins,{}),r=W3(i);return s===!1&&!e?[]:K3(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(c=>!o.some(h=>c.plugin.id===h.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function W3(n){const t={},e=[],i=Object.keys(_s.plugins.items);for(let r=0;r<i.length;r++)e.push(_s.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Y3(n,t){return!t&&n===!1?null:n===!0?{}:n}function K3(n,{plugins:t,localIds:e},i,s){const r=[],o=n.getContext();for(const c of t){const h=c.id,f=Y3(i[h],s);f!==null&&r.push({plugin:c,options:$3(n.config,{plugin:c,local:e[h]},f,o)})}return r}function $3(n,{plugin:t,local:e},i,s){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Jb(n,t){const e=We.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function X3(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function Q3(n,t){return n===t?"_index_":"_value_"}function F1(n){if(n==="x"||n==="y"||n==="r")return n}function Z3(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function t0(n,...t){if(F1(n))return n;for(const e of t){const i=e.axis||Z3(e.position)||n.length>1&&F1(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function U1(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function J3(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return U1(n,"x",e[0])||U1(n,"y",e[0])}return{}}function tF(n,t){const e=Jo[n.type]||{scales:{}},i=t.scales||{},s=Jb(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const c=i[o];if(!te(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const h=t0(o,c,J3(o,n),We.scales[c.type]),f=Q3(h,s),m=e.scales||{};r[o]=rf(Object.create(null),[{axis:h},c,m[h],m[f]])}),n.data.datasets.forEach(o=>{const c=o.type||n.type,h=o.indexAxis||Jb(c,t),m=(Jo[c]||{}).scales||{};Object.keys(m).forEach(y=>{const _=X3(y,h),b=o[_+"AxisID"]||_;r[b]=r[b]||Object.create(null),rf(r[b],[{axis:_},i[b],m[y]])})}),Object.keys(r).forEach(o=>{const c=r[o];rf(c,[We.scales[c.type],We.scale])}),r}function zM(n){const t=n.options||(n.options={});t.plugins=Ht(t.plugins,{}),t.scales=tF(n,t)}function HM(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function eF(n){return n=n||{},n.data=HM(n.data),zM(n),n}const z1=new Map,qM=new Set;function ag(n,t){let e=z1.get(n);return e||(e=t(),z1.set(n,e),qM.add(e)),e}const Oh=(n,t,e)=>{const i=Zo(t,e);i!==void 0&&n.add(i)};class nF{constructor(t){this._config=eF(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=HM(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),zM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ag(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return ag(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return ag(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return ag(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),c=o.get(e);if(c)return c;const h=new Set;e.forEach(m=>{t&&(h.add(t),m.forEach(y=>Oh(h,t,y))),m.forEach(y=>Oh(h,s,y)),m.forEach(y=>Oh(h,Jo[r]||{},y)),m.forEach(y=>Oh(h,We,y)),m.forEach(y=>Oh(h,Qb,y))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),qM.has(e)&&o.set(e,f),f}chartOptionScopes(){const{options:t,type:e}=this;return[t,Jo[e]||{},We.datasets[e]||{},{type:e},We,Qb]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:c}=H1(this._resolverCache,t,s);let h=o;if(sF(o,e)){r.$shared=!1,i=Aa(i)?i():i;const f=this.createResolver(t,i,c);h=Uc(o,i,f)}for(const f of e)r[f]=h[f];return r}createResolver(t,e,i=[""],s){const{resolver:r}=H1(this._resolverCache,t,i);return te(e)?Uc(r,e,void 0,s):r}}function H1(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:AT(t,e),subPrefixes:e.filter(c=>!c.toLowerCase().includes("hover"))},i.set(s,r)),r}const iF=n=>te(n)&&Object.getOwnPropertyNames(n).some(t=>Aa(n[t]));function sF(n,t){const{isScriptable:e,isIndexable:i}=xM(n);for(const s of t){const r=e(s),o=i(s),c=(o||r)&&n[s];if(r&&(Aa(c)||iF(c))||o&&bn(c))return!0}return!1}var rF="4.5.0";const aF=["top","bottom","left","right","chartArea"];function q1(n,t){return n==="top"||n==="bottom"||aF.indexOf(n)===-1&&t==="x"}function G1(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function W1(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Se(e&&e.onComplete,[n],t)}function oF(n){const t=n.chart,e=t.options.animation;Se(e&&e.onProgress,[n],t)}function GM(n){return DT()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const xg={},Y1=n=>{const t=GM(n);return Object.values(xg).filter(e=>e.canvas===t).pop()};function lF(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function cF(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var oa;let fl=(oa=class{static register(...t){_s.add(...t),K1()}static unregister(...t){_s.remove(...t),K1()}constructor(t,e){const i=this.config=new nF(e),s=GM(t),r=Y1(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||I3(s)),this.platform.updateConfig(i);const c=this.platform.acquireContext(s,o.aspectRatio),h=c&&c.canvas,f=h&&h.height,m=h&&h.width;if(this.id=rj(),this.ctx=c,this.canvas=h,this.width=m,this.height=f,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new G3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sj(y=>this.update(y),o.resizeDelay||0),this._dataChanges=[],xg[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}ur.listen(this,"complete",W1),ur.listen(this,"progress",oF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return ae(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return _s}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():p1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return d1(this.canvas,this.ctx),this}stop(){return ur.stop(this),this}resize(t,e){ur.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,p1(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),Se(i.onResize,[this,o],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};he(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,c)=>(o[c]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const c=e[o],h=t0(o,c),f=h==="r",m=h==="x";return{options:c,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),he(r,o=>{const c=o.options,h=c.id,f=t0(h,c),m=Ht(c.type,o.dtype);(c.position===void 0||q1(c.position,f)!==q1(o.dposition))&&(c.position=o.dposition),s[h]=!0;let y=null;if(h in i&&i[h].type===m)y=i[h];else{const _=_s.getScale(m);y=new _({id:h,type:m,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(c,t)}),he(s,(o,c)=>{o||delete i[c]}),he(i,o=>{pa.configure(this,o,o.options),pa.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(G1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let o=this.getDatasetMeta(i);const c=r.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=c,o.indexAxis=r.indexAxis||Jb(c,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const h=_s.getController(c),{datasetElementType:f,dataElementType:m}=We.datasets[c];Object.assign(h,{dataElementType:_s.getElement(m),datasetElementType:f&&_s.getElement(f)}),o.controller=new h(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){he(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:y}=this.getDatasetMeta(f),_=!s&&r.indexOf(y)===-1;y.buildOrUpdateElements(_),o=Math.max(+y.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||he(r,f=>{f.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(G1("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){he(this.scales,t=>{pa.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!i1(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e){const o=i==="_removeElements"?-r:r;lF(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,c)=>c+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!i1(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pa.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],he(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Aa(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ur.has(this)?this.attached&&!ur.running(this)&&ur.start(this):(this.draw(),W1({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=CB(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&ET(e,s),t.controller.draw(),s&&ST(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Pf(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const r=a3.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=hl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Df(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ur.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),d1(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete xg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,c)=>{r.offsetX=o,r.offsetY=c,this._eventHandler(r)};he(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(h,f)=>{e.addEventListener(this,h,f),t[h]=f},s=(h,f)=>{t[h]&&(e.removeEventListener(this,h,f),delete t[h])},r=(h,f)=>{this.canvas&&this.resize(h,f)};let o;const c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",c)},e.isAttached(this.canvas)?c():o()}unbindEvents(){he(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},he(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,o,c,h;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),c=0,h=t.length;c<h;++c){o=t[c];const f=o&&this.getDatasetMeta(o.datasetIndex).controller;f&&f[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[o],index:o}});!Kg(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(h,f)=>h.filter(m=>!f.some(y=>m.datasetIndex===y.datasetIndex&&m.index===y.index)),o=r(e,t),c=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,o=e,c=this._getActiveElements(t,s,i,o),h=hj(t),f=cF(t,this._lastEvent,i,h);i&&(this._lastEvent=null,Se(r.onHover,[t,c,this],this),h&&Se(r.onClick,[t,c,this],this));const m=!Kg(c,s);return(m||e)&&(this._active=c,this._updateHoverStyles(c,s,e)),this._lastEvent=f,m}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},rt(oa,"defaults",We),rt(oa,"instances",xg),rt(oa,"overrides",Jo),rt(oa,"registry",_s),rt(oa,"version",rF),rt(oa,"getChart",Y1),oa);function K1(){return he(fl.instances,n=>n._plugins.invalidate())}function uF(n,t,e){const{startAngle:i,x:s,y:r,outerRadius:o,innerRadius:c,options:h}=t,{borderWidth:f,borderJoinStyle:m}=h,y=Math.min(f/o,Yi(i-e));if(n.beginPath(),n.arc(s,r,o-f/2,i+y/2,e-y/2),c>0){const _=Math.min(f/c,Yi(i-e));n.arc(s,r,c+f/2,e-_/2,i+_/2,!0)}else{const _=Math.min(f/2,o*Yi(i-e));if(m==="round")n.arc(s,r,_,e-Te/2,i+Te/2,!0);else if(m==="bevel"){const b=2*_*_,w=-b*Math.cos(e+Te/2)+s,x=-b*Math.sin(e+Te/2)+r,A=b*Math.cos(i+Te/2)+s,M=b*Math.sin(i+Te/2)+r;n.lineTo(w,x),n.lineTo(A,M)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function hF(n,t,e){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:c,innerRadius:h}=t;let f=s/c;n.beginPath(),n.arc(r,o,c,i-f,e+f),h>s?(f=s/h,n.arc(r,o,h,e+f,i-f,!0)):n.arc(r,o,s,e+hn,i-hn),n.closePath(),n.clip()}function fF(n){return xT(n,["outerStart","outerEnd","innerStart","innerEnd"])}function dF(n,t,e,i){const s=fF(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),c=h=>{const f=(e-Math.min(r,h))*i/2;return Vn(h,0,Math.min(r,f))};return{outerStart:c(s.outerStart),outerEnd:c(s.outerEnd),innerStart:Vn(s.innerStart,0,o),innerEnd:Vn(s.innerEnd,0,o)}}function dc(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function ep(n,t,e,i,s,r){const{x:o,y:c,startAngle:h,pixelMargin:f,innerRadius:m}=t,y=Math.max(t.outerRadius+i+e-f,0),_=m>0?m+i+e+f:0;let b=0;const w=s-h;if(i){const St=m>0?m-i:0,Q=y>0?y-i:0,at=(St+Q)/2,yt=at!==0?w*at/(at+i):w;b=(w-yt)/2}const x=Math.max(.001,w*y-e/Te)/y,A=(w-x)/2,M=h+A+b,N=s-A-b,{outerStart:L,outerEnd:H,innerStart:F,innerEnd:K}=dF(t,_,y,N-M),O=y-L,I=y-H,R=M+L/O,V=N-H/I,j=_+F,U=_+K,B=M+F/j,At=N-K/U;if(n.beginPath(),r){const St=(R+V)/2;if(n.arc(o,c,y,R,St),n.arc(o,c,y,St,V),H>0){const tt=dc(I,V,o,c);n.arc(tt.x,tt.y,H,V,N+hn)}const Q=dc(U,N,o,c);if(n.lineTo(Q.x,Q.y),K>0){const tt=dc(U,At,o,c);n.arc(tt.x,tt.y,K,N+hn,At+Math.PI)}const at=(N-K/_+(M+F/_))/2;if(n.arc(o,c,_,N-K/_,at,!0),n.arc(o,c,_,at,M+F/_,!0),F>0){const tt=dc(j,B,o,c);n.arc(tt.x,tt.y,F,B+Math.PI,M-hn)}const yt=dc(O,M,o,c);if(n.lineTo(yt.x,yt.y),L>0){const tt=dc(O,R,o,c);n.arc(tt.x,tt.y,L,M-hn,R)}}else{n.moveTo(o,c);const St=Math.cos(R)*y+o,Q=Math.sin(R)*y+c;n.lineTo(St,Q);const at=Math.cos(V)*y+o,yt=Math.sin(V)*y+c;n.lineTo(at,yt)}n.closePath()}function mF(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:c}=t;let h=t.endAngle;if(r){ep(n,t,e,i,h,s);for(let f=0;f<r;++f)n.fill();isNaN(c)||(h=o+(c%je||je))}return ep(n,t,e,i,h,s),n.fill(),h}function gF(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:c,options:h}=t,{borderWidth:f,borderJoinStyle:m,borderDash:y,borderDashOffset:_,borderRadius:b}=h,w=h.borderAlign==="inner";if(!f)return;n.setLineDash(y||[]),n.lineDashOffset=_,w?(n.lineWidth=f*2,n.lineJoin=m||"round"):(n.lineWidth=f,n.lineJoin=m||"bevel");let x=t.endAngle;if(r){ep(n,t,e,i,x,s);for(let A=0;A<r;++A)n.stroke();isNaN(c)||(x=o+(c%je||je))}w&&hF(n,t,x),h.selfJoin&&x-o>=Te&&b===0&&m!=="miter"&&uF(n,t,x),r||(ep(n,t,e,i,x,s),n.stroke())}class Ac extends Oa{constructor(e){super();rt(this,"circumference");rt(this,"endAngle");rt(this,"fullCircles");rt(this,"innerRadius");rt(this,"outerRadius");rt(this,"pixelMargin");rt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:c}=pM(r,{x:e,y:i}),{startAngle:h,endAngle:f,innerRadius:m,outerRadius:y,circumference:_}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),b=(this.options.spacing+this.options.borderWidth)/2,w=Ht(_,f-h),x=Mf(o,h,f)&&h!==f,A=w>=je||x,M=ga(c,m+b,y+b);return A&&M}getCenterPoint(e){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:c,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:f,spacing:m}=this.options,y=(r+o)/2,_=(c+h+m+f)/2;return{x:i+Math.cos(y)*_,y:s+Math.sin(y)*_}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,c=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>je?Math.floor(s/je):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const h=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(h)*r,Math.sin(h)*r);const f=1-Math.sin(Math.min(Te,s||0)),m=r*f;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,mF(e,this,m,o,c),gF(e,this,m,o,c),e.restore()}}rt(Ac,"id","arc"),rt(Ac,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),rt(Ac,"defaultRoutes",{backgroundColor:"backgroundColor"}),rt(Ac,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function WM(n,t,e=t){n.lineCap=Ht(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Ht(e.borderDash,t.borderDash)),n.lineDashOffset=Ht(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Ht(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Ht(e.borderWidth,t.borderWidth),n.strokeStyle=Ht(e.borderColor,t.borderColor)}function pF(n,t,e){n.lineTo(e.x,e.y)}function yF(n){return n.stepped?jj:n.tension||n.cubicInterpolationMode==="monotone"?Bj:pF}function YM(n,t,e={}){const i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:c}=t,h=Math.max(s,o),f=Math.min(r,c),m=s<o&&r<o||s>c&&r>c;return{count:i,start:h,loop:t.loop,ilen:f<h&&!m?i+f-h:f-h}}function _F(n,t,e,i){const{points:s,options:r}=t,{count:o,start:c,loop:h,ilen:f}=YM(s,e,i),m=yF(r);let{move:y=!0,reverse:_}=i||{},b,w,x;for(b=0;b<=f;++b)w=s[(c+(_?f-b:b))%o],!w.skip&&(y?(n.moveTo(w.x,w.y),y=!1):m(n,x,w,_,r.stepped),x=w);return h&&(w=s[(c+(_?f:0))%o],m(n,x,w,_,r.stepped)),!!h}function vF(n,t,e,i){const s=t.points,{count:r,start:o,ilen:c}=YM(s,e,i),{move:h=!0,reverse:f}=i||{};let m=0,y=0,_,b,w,x,A,M;const N=H=>(o+(f?c-H:H))%r,L=()=>{x!==A&&(n.lineTo(m,A),n.lineTo(m,x),n.lineTo(m,M))};for(h&&(b=s[N(0)],n.moveTo(b.x,b.y)),_=0;_<=c;++_){if(b=s[N(_)],b.skip)continue;const H=b.x,F=b.y,K=H|0;K===w?(F<x?x=F:F>A&&(A=F),m=(y*m+H)/++y):(L(),n.lineTo(H,F),w=K,y=0,x=A=F),M=F}L()}function e0(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?vF:_F}function bF(n){return n.stepped?yB:n.tension||n.cubicInterpolationMode==="monotone"?_B:Do}function TF(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),WM(n,t.options),n.stroke(s)}function wF(n,t,e,i){const{segments:s,options:r}=t,o=e0(t);for(const c of s)WM(n,r,c.style),n.beginPath(),o(n,t,c,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const EF=typeof Path2D=="function";function SF(n,t,e,i){EF&&!t.options.segment?TF(n,t,e,i):wF(n,t,e,i)}class Kh extends Oa{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;cB(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=AB(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],r=this.points,o=EB(this,{property:e,start:s,end:s});if(!o.length)return;const c=[],h=bF(i);let f,m;for(f=0,m=o.length;f<m;++f){const{start:y,end:_}=o[f],b=r[y],w=r[_];if(b===w){c.push(b);continue}const x=Math.abs((s-b[e])/(w[e]-b[e])),A=h(b,w,x,i.stepped);A[e]=t[e],c.push(A)}return c.length===1?c[0]:c}pathSegment(t,e,i){return e0(this)(t,this,e,i)}path(t,e,i){const s=this.segments,r=e0(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const c of s)o&=r(t,this,c,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),SF(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}rt(Kh,"id","line"),rt(Kh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),rt(Kh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),rt(Kh,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function $1(n,t,e,i){const s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}class Ag extends Oa{constructor(e){super();rt(this,"parsed");rt(this,"skip");rt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.options,{x:o,y:c}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(i-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return $1(this,e,"x",i)}inYRange(e,i){return $1(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!Pf(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Zb(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}rt(Ag,"id","point"),rt(Ag,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),rt(Ag,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function KM(n,t){const{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let c,h,f,m,y;return n.horizontal?(y=o/2,c=Math.min(e,s),h=Math.max(e,s),f=i-y,m=i+y):(y=r/2,c=e-y,h=e+y,f=Math.min(i,s),m=Math.max(i,s)),{left:c,top:f,right:h,bottom:m}}function ya(n,t,e,i){return n?0:Vn(t,e,i)}function xF(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,r=SM(i);return{t:ya(s.top,r.top,0,e),r:ya(s.right,r.right,0,t),b:ya(s.bottom,r.bottom,0,e),l:ya(s.left,r.left,0,t)}}function AF(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Oc(s),o=Math.min(t,e),c=n.borderSkipped,h=i||te(s);return{topLeft:ya(!h||c.top||c.left,r.topLeft,0,o),topRight:ya(!h||c.top||c.right,r.topRight,0,o),bottomLeft:ya(!h||c.bottom||c.left,r.bottomLeft,0,o),bottomRight:ya(!h||c.bottom||c.right,r.bottomRight,0,o)}}function IF(n){const t=KM(n),e=t.right-t.left,i=t.bottom-t.top,s=xF(n,e/2,i/2),r=AF(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function zv(n,t,e,i){const s=t===null,r=e===null,c=n&&!(s&&r)&&KM(n,i);return c&&(s||ga(t,c.left,c.right))&&(r||ga(e,c.top,c.bottom))}function RF(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function DF(n,t){n.rect(t.x,t.y,t.w,t.h)}function Hv(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class Ig extends Oa{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=IF(this),c=RF(o.radius)?Zg:DF;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),c(t,Hv(o,e,r)),t.clip(),c(t,Hv(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),c(t,Hv(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return zv(this,t,e,i)}inXRange(t,e){return zv(this,t,null,e)}inYRange(t,e){return zv(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}rt(Ig,"id","bar"),rt(Ig,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),rt(Ig,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const X1=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},CF=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Q1 extends Oa{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Se(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Zn(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=X1(i,r);let f,m;e.font=s.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(o,r,c,h)+10):(m=this.maxHeight,f=this._fitCols(o,s,c,h)+10),this.width=Math.min(f,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],m=s+c;let y=t;r.textAlign="left",r.textBaseline="middle";let _=-1,b=-m;return this.legendItems.forEach((w,x)=>{const A=i+e/2+r.measureText(w.text).width;(x===0||f[f.length-1]+A+2*c>o)&&(y+=m,f[f.length-(x>0?0:1)]=0,b+=m,_++),h[x]={left:0,top:b,row:_,width:A,height:s},f[f.length-1]+=A+c}),y}_fitCols(t,e,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],m=o-t;let y=c,_=0,b=0,w=0,x=0;return this.legendItems.forEach((A,M)=>{const{itemWidth:N,itemHeight:L}=MF(i,e,r,A,s);M>0&&b+L+2*c>m&&(y+=_+c,f.push({width:_,height:b}),w+=_+c,x++,_=b=0),h[M]={left:w,top:b,col:x,width:N,height:L},_=Math.max(_,N),b+=L+c}),y+=_,f.push({width:_,height:b}),y}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Nc(r,this.left,this.width);if(this.isHorizontal()){let c=0,h=fi(i,this.left+s,this.right-this.lineWidths[c]);for(const f of e)c!==f.row&&(c=f.row,h=fi(i,this.left+s,this.right-this.lineWidths[c])),f.top+=this.top+t+s,f.left=o.leftForLtr(o.x(h),f.width),h+=f.width+s}else{let c=0,h=fi(i,this.top+t+s,this.bottom-this.columnSizes[c].height);for(const f of e)f.col!==c&&(c=f.col,h=fi(i,this.top+t+s,this.bottom-this.columnSizes[c].height)),f.top=h,f.left+=this.left+s,f.left=o.leftForLtr(o.x(f.left),f.width),h+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ET(t,this),this._draw(),ST(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,c=We.color,h=Nc(t.rtl,this.left,this.width),f=Zn(o.font),{padding:m}=o,y=f.size,_=y/2;let b;this.drawTitle(),s.textAlign=h.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:w,boxHeight:x,itemHeight:A}=X1(o,y),M=function(K,O,I){if(isNaN(w)||w<=0||isNaN(x)||x<0)return;s.save();const R=Ht(I.lineWidth,1);if(s.fillStyle=Ht(I.fillStyle,c),s.lineCap=Ht(I.lineCap,"butt"),s.lineDashOffset=Ht(I.lineDashOffset,0),s.lineJoin=Ht(I.lineJoin,"miter"),s.lineWidth=R,s.strokeStyle=Ht(I.strokeStyle,c),s.setLineDash(Ht(I.lineDash,[])),o.usePointStyle){const V={radius:x*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:R},j=h.xPlus(K,w/2),U=O+_;EM(s,V,j,U,o.pointStyleWidth&&w)}else{const V=O+Math.max((y-x)/2,0),j=h.leftForLtr(K,w),U=Oc(I.borderRadius);s.beginPath(),Object.values(U).some(B=>B!==0)?Zg(s,{x:j,y:V,w,h:x,radius:U}):s.rect(j,V,w,x),s.fill(),R!==0&&s.stroke()}s.restore()},N=function(K,O,I){Qg(s,I.text,K,O+A/2,f,{strikethrough:I.hidden,textAlign:h.textAlign(I.textAlign)})},L=this.isHorizontal(),H=this._computeTitleHeight();L?b={x:fi(r,this.left+m,this.right-i[0]),y:this.top+m+H,line:0}:b={x:this.left+m,y:fi(r,this.top+H+m,this.bottom-e[0].height),line:0},CM(this.ctx,t.textDirection);const F=A+m;this.legendItems.forEach((K,O)=>{s.strokeStyle=K.fontColor,s.fillStyle=K.fontColor;const I=s.measureText(K.text).width,R=h.textAlign(K.textAlign||(K.textAlign=o.textAlign)),V=w+_+I;let j=b.x,U=b.y;h.setWidth(this.width),L?O>0&&j+V+m>this.right&&(U=b.y+=F,b.line++,j=b.x=fi(r,this.left+m,this.right-i[b.line])):O>0&&U+F>this.bottom&&(j=b.x=j+e[b.line].width+m,b.line++,U=b.y=fi(r,this.top+H+m,this.bottom-e[b.line].height));const B=h.x(j);if(M(B,U,K),j=xj(R,j+w+_,L?j+V:this.right,t.rtl),N(h.x(j),U,K),L)b.x+=V+m;else if(typeof K.text!="string"){const At=f.lineHeight;b.y+=$M(K,At)+m}else b.y+=F}),MM(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Zn(e.font),s=Xi(e.padding);if(!e.display)return;const r=Nc(t.rtl,this.left,this.width),o=this.ctx,c=e.position,h=i.size/2,f=s.top+h;let m,y=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),m=this.top+f,y=fi(t.align,y,this.right-_);else{const w=this.columnSizes.reduce((x,A)=>Math.max(x,A.height),0);m=f+fi(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const b=fi(c,y,y+_);o.textAlign=r.textAlign(TM(c)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Qg(o,e.text,b,m,i)}_computeTitleHeight(){const t=this.options.title,e=Zn(t.font),i=Xi(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(ga(t,this.left,this.right)&&ga(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],ga(t,s.left,s.left+s.width)&&ga(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!OF(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=CF(s,i);s&&!r&&Se(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&Se(e.onHover,[t,i,this],this)}else i&&Se(e.onClick,[t,i,this],this)}}function MF(n,t,e,i,s){const r=PF(i,n,t,e),o=kF(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function PF(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(s).width}function kF(n,t,e){let i=n;return typeof t.text!="string"&&(i=$M(t,e)),i}function $M(n,t){const e=n.text?n.text.length:0;return t*e}function OF(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var PT={id:"legend",_element:Q1,start(n,t,e){const i=n.legend=new Q1({ctx:n.ctx,options:e,chart:n});pa.configure(n,i,e),pa.addBox(n,i)},stop(n){pa.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;pa.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(e?0:void 0),m=Xi(f.borderWidth);return{text:t[h.index].label,fillStyle:f.backgroundColor,fontColor:r,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:o&&(c||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const $h={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){const c=n[t].element;if(c&&c.hasValue()){const h=c.tooltipPosition();i.add(h.x),s+=h.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((c,h)=>c+h)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,c;for(r=0,o=n.length;r<o;++r){const h=n[r].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),m=Xb(t,f);m<s&&(s=m,c=h)}}if(c){const h=c.tooltipPosition();e=h.x,i=h.y}return{x:e,y:i}}};function ys(n,t){return t&&(bn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function hr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function NF(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:c}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:c,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Z1(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:c}=t,h=Zn(t.bodyFont),f=Zn(t.titleFont),m=Zn(t.footerFont),y=r.length,_=s.length,b=i.length,w=Xi(t.padding);let x=w.height,A=0,M=i.reduce((H,F)=>H+F.before.length+F.lines.length+F.after.length,0);if(M+=n.beforeBody.length+n.afterBody.length,y&&(x+=y*f.lineHeight+(y-1)*t.titleSpacing+t.titleMarginBottom),M){const H=t.displayColors?Math.max(c,h.lineHeight):h.lineHeight;x+=b*H+(M-b)*h.lineHeight+(M-1)*t.bodySpacing}_&&(x+=t.footerMarginTop+_*m.lineHeight+(_-1)*t.footerSpacing);let N=0;const L=function(H){A=Math.max(A,e.measureText(H).width+N)};return e.save(),e.font=f.string,he(n.title,L),e.font=h.string,he(n.beforeBody.concat(n.afterBody),L),N=t.displayColors?o+2+t.boxPadding:0,he(i,H=>{he(H.before,L),he(H.lines,L),he(H.after,L)}),N=0,e.font=m.string,he(n.footer,L),e.restore(),A+=w.width,{width:A,height:x}}function VF(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function LF(n,t,e,i){const{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function jF(n,t,e,i){const{x:s,width:r}=e,{width:o,chartArea:{left:c,right:h}}=n;let f="center";return i==="center"?f=s<=(c+h)/2?"left":"right":s<=r/2?f="left":s>=o-r/2&&(f="right"),LF(f,n,t,e)&&(f="center"),f}function J1(n,t,e){const i=e.yAlign||t.yAlign||VF(n,e);return{xAlign:e.xAlign||t.xAlign||jF(n,t,e,i),yAlign:i}}function BF(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function FF(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function tI(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:c,yAlign:h}=e,f=s+r,{topLeft:m,topRight:y,bottomLeft:_,bottomRight:b}=Oc(o);let w=BF(t,c);const x=FF(t,h,f);return h==="center"?c==="left"?w+=f:c==="right"&&(w-=f):c==="left"?w-=Math.max(m,_)+s:c==="right"&&(w+=Math.max(y,b)+s),{x:Vn(w,0,i.width-t.width),y:Vn(x,0,i.height-t.height)}}function og(n,t,e){const i=Xi(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function eI(n){return ys([],hr(n))}function UF(n,t,e){return hl(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function nI(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const XM={beforeTitle:cr,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:cr,beforeBody:cr,beforeLabel:cr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ae(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:cr,afterBody:cr,beforeFooter:cr,footer:cr,afterFooter:cr};function Xn(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?XM[t].call(e,i):s}class n0 extends Oa{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new kM(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=UF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Xn(i,"beforeTitle",this,t),r=Xn(i,"title",this,t),o=Xn(i,"afterTitle",this,t);let c=[];return c=ys(c,hr(s)),c=ys(c,hr(r)),c=ys(c,hr(o)),c}getBeforeBody(t,e){return eI(Xn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return he(t,r=>{const o={before:[],lines:[],after:[]},c=nI(i,r);ys(o.before,hr(Xn(c,"beforeLabel",this,r))),ys(o.lines,Xn(c,"label",this,r)),ys(o.after,hr(Xn(c,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return eI(Xn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Xn(i,"beforeFooter",this,t),r=Xn(i,"footer",this,t),o=Xn(i,"afterFooter",this,t);let c=[];return c=ys(c,hr(s)),c=ys(c,hr(r)),c=ys(c,hr(o)),c}_createItems(t){const e=this._active,i=this.chart.data,s=[],r=[],o=[];let c=[],h,f;for(h=0,f=e.length;h<f;++h)c.push(NF(this.chart,e[h]));return t.filter&&(c=c.filter((m,y,_)=>t.filter(m,y,_,i))),t.itemSort&&(c=c.sort((m,y)=>t.itemSort(m,y,i))),he(c,m=>{const y=nI(t.callbacks,m);s.push(Xn(y,"labelColor",this,m)),r.push(Xn(y,"labelPointStyle",this,m)),o.push(Xn(y,"labelTextColor",this,m))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=c,c}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const c=$h[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const h=this._size=Z1(this,i),f=Object.assign({},c,h),m=J1(this.chart,i,f),y=tI(i,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,r={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:c}=i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:y}=Oc(c),{x:_,y:b}=t,{width:w,height:x}=e;let A,M,N,L,H,F;return r==="center"?(H=b+x/2,s==="left"?(A=_,M=A-o,L=H+o,F=H-o):(A=_+w,M=A+o,L=H-o,F=H+o),N=A):(s==="left"?M=_+Math.max(h,m)+o:s==="right"?M=_+w-Math.max(f,y)-o:M=this.caretX,r==="top"?(L=b,H=L-o,A=M-o,N=M+o):(L=b+x,H=L+o,A=M+o,N=M-o),F=L),{x1:A,x2:M,x3:N,y1:L,y2:H,y3:F}}drawTitle(t,e,i){const s=this.title,r=s.length;let o,c,h;if(r){const f=Nc(i.rtl,this.x,this.width);for(t.x=og(this,i.titleAlign,i),e.textAlign=f.textAlign(i.titleAlign),e.textBaseline="middle",o=Zn(i.titleFont),c=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,h=0;h<r;++h)e.fillText(s[h],f.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+c,h+1===r&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,e,i,s,r){const o=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:h,boxWidth:f}=r,m=Zn(r.bodyFont),y=og(this,"left",r),_=s.x(y),b=h<m.lineHeight?(m.lineHeight-h)/2:0,w=e.y+b;if(r.usePointStyle){const x={radius:Math.min(f,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},A=s.leftForLtr(_,f)+f/2,M=w+h/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Zb(t,x,A,M),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Zb(t,x,A,M)}else{t.lineWidth=te(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const x=s.leftForLtr(_,f),A=s.leftForLtr(s.xPlus(_,1),f-2),M=Oc(o.borderRadius);Object.values(M).some(N=>N!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Zg(t,{x,y:w,w:f,h,radius:M}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Zg(t,{x:A,y:w+1,w:f-2,h:h-2,radius:M}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(x,w,f,h),t.strokeRect(x,w,f,h),t.fillStyle=o.backgroundColor,t.fillRect(A,w+1,f-2,h-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:c,boxHeight:h,boxWidth:f,boxPadding:m}=i,y=Zn(i.bodyFont);let _=y.lineHeight,b=0;const w=Nc(i.rtl,this.x,this.width),x=function(I){e.fillText(I,w.x(t.x+b),t.y+_/2),t.y+=_+r},A=w.textAlign(o);let M,N,L,H,F,K,O;for(e.textAlign=o,e.textBaseline="middle",e.font=y.string,t.x=og(this,A,i),e.fillStyle=i.bodyColor,he(this.beforeBody,x),b=c&&A!=="right"?o==="center"?f/2+m:f+2+m:0,H=0,K=s.length;H<K;++H){for(M=s[H],N=this.labelTextColors[H],e.fillStyle=N,he(M.before,x),L=M.lines,c&&L.length&&(this._drawColorBox(e,t,H,w,i),_=Math.max(y.lineHeight,h)),F=0,O=L.length;F<O;++F)x(L[F]),_=y.lineHeight;he(M.after,x)}b=0,_=y.lineHeight,he(this.afterBody,x),t.y-=r}drawFooter(t,e,i){const s=this.footer,r=s.length;let o,c;if(r){const h=Nc(i.rtl,this.x,this.width);for(t.x=og(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=h.textAlign(i.footerAlign),e.textBaseline="middle",o=Zn(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,c=0;c<r;++c)e.fillText(s[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:r,yAlign:o}=this,{x:c,y:h}=t,{width:f,height:m}=i,{topLeft:y,topRight:_,bottomLeft:b,bottomRight:w}=Oc(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(c+y,h),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(c+f-_,h),e.quadraticCurveTo(c+f,h,c+f,h+_),o==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(c+f,h+m-w),e.quadraticCurveTo(c+f,h+m,c+f-w,h+m),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(c+b,h+m),e.quadraticCurveTo(c,h+m,c,h+m-b),o==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(c,h+y),e.quadraticCurveTo(c,h,c+y,h),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=$h[t.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=Z1(this,t),h=Object.assign({},o,this._size),f=J1(e,t,h),m=tI(t,h,f,e);(s._to!==m.x||r._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Xi(e.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),CM(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),MM(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:c,index:h})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[h],index:h}}),r=!Kg(i,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),c=this._positionChanged(o,t),h=e||!Kg(o,r)||c;return h&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),h}_getActiveElements(t,e,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:r}=this,o=$h[r.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}}rt(n0,"positioners",$h);var kT={id:"tooltip",_element:n0,positioners:$h,afterInit(n,t,e){e&&(n.tooltip=new n0({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:XM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const zF=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function HF(n,t,e,i){const s=n.indexOf(t);if(s===-1)return zF(n,t,e,i);const r=n.lastIndexOf(t);return s!==r?e:s}const qF=(n,t)=>n===null?null:Vn(Math.round(n),0,t);function iI(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class i0 extends cu{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ae(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:HF(i,t,Ht(e,t),this._addedLabels),qF(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return iI.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}rt(i0,"id","category"),rt(i0,"defaults",{ticks:{callback:iI}});function GF(n,t){const e=[],{bounds:s,step:r,min:o,max:c,precision:h,count:f,maxTicks:m,maxDigits:y,includeBounds:_}=n,b=r||1,w=m-1,{min:x,max:A}=t,M=!ae(o),N=!ae(c),L=!ae(f),H=(A-x)/(y+1);let F=r1((A-x)/w/b)*b,K,O,I,R;if(F<1e-14&&!M&&!N)return[{value:x},{value:A}];R=Math.ceil(A/F)-Math.floor(x/F),R>w&&(F=r1(R*F/w/b)*b),ae(h)||(K=Math.pow(10,h),F=Math.ceil(F*K)/K),s==="ticks"?(O=Math.floor(x/F)*F,I=Math.ceil(A/F)*F):(O=x,I=A),M&&N&&r&&pj((c-o)/r,F/1e3)?(R=Math.round(Math.min((c-o)/F,m)),F=(c-o)/R,O=o,I=c):L?(O=M?o:O,I=N?c:I,R=f-1,F=(I-O)/R):(R=(I-O)/F,af(R,Math.round(R),F/1e3)?R=Math.round(R):R=Math.ceil(R));const V=Math.max(a1(F),a1(O));K=Math.pow(10,ae(h)?V:h),O=Math.round(O*K)/K,I=Math.round(I*K)/K;let j=0;for(M&&(_&&O!==o?(e.push({value:o}),O<o&&j++,af(Math.round((O+j*F)*K)/K,o,sI(o,H,n))&&j++):O<o&&j++);j<R;++j){const U=Math.round((O+j*F)*K)/K;if(N&&U>c)break;e.push({value:U})}return N&&_&&I!==c?e.length&&af(e[e.length-1].value,c,sI(c,H,n))?e[e.length-1].value=c:e.push({value:c}):(!N||I===c)&&e.push({value:I}),e}function sI(n,t,{horizontal:e,minRotation:i}){const s=dr(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class WF extends cu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=h=>s=e?s:h,c=h=>r=i?r:h;if(t){const h=xs(s),f=xs(r);h<0&&f<0?c(0):h>0&&f>0&&o(0)}if(s===r){let h=r===0?1:Math.abs(r*.05);c(r+h),t||o(s-h)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=GF(s,r);return t.bounds==="ticks"&&yj(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return wT(t,this.chart.options.locale,this.options.ticks.format)}}class np extends WF{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ji(t)?t:0,this.max=ji(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=dr(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}rt(np,"id","linear"),rt(np,"defaults",{ticks:{callback:wM.formatters.numeric}});const Fp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qn=Object.keys(Fp);function rI(n,t){return n-t}function aI(n,t){if(ae(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),ji(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(Cf(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function oI(n,t,e,i){const s=Qn.length;for(let r=Qn.indexOf(n);r<s-1;++r){const o=Fp[Qn[r]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(c*o.size))<=i)return Qn[r]}return Qn[s-1]}function YF(n,t,e,i,s){for(let r=Qn.length-1;r>=Qn.indexOf(e);r--){const o=Qn[r];if(Fp[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return Qn[e?Qn.indexOf(e):0]}function KF(n){for(let t=Qn.indexOf(n)+1,e=Qn.length;t<e;++t)if(Fp[Qn[t]].common)return Qn[t]}function lI(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=bT(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function $F(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let c,h;for(c=r;c<=o;c=+s.add(c,1,i))h=e[c],h>=0&&(t[h].major=!0);return t}function cI(n,t,e){const i=[],s={},r=t.length;let o,c;for(o=0;o<r;++o)c=t[o],s[c]=o,i.push({value:c,major:!1});return r===0||!e?i:$F(n,i,s,e)}class Of extends cu{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new VM._date(t.adapters.date);s.init(e),rf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:aI(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:c}=this.getUserBounds();function h(f){!o&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!c&&!isNaN(f.max)&&(r=Math.max(r,f.max))}(!o||!c)&&(h(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&h(this.getMinMax(!1))),s=ji(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=ji(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,c=wj(s,r,o);return this._unit=e.unit||(i.autoSkip?oI(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):YF(this,c.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:KF(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),cI(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Vn(e,0,o),i=Vn(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||oI(r.minUnit,e,i,this._getLabelCapacity(e)),c=Ht(s.ticks.stepSize,1),h=o==="week"?r.isoWeekday:!1,f=Cf(h)||h===!0,m={};let y=e,_,b;if(f&&(y=+t.startOf(y,"isoWeek",h)),y=+t.startOf(y,f?"day":o),t.diff(i,e,o)>1e5*c)throw new Error(e+" and "+i+" are too far apart with stepSize of "+c+" "+o);const w=s.ticks.source==="data"&&this.getDataTimestamps();for(_=y,b=0;_<i;_=+t.add(_,c,o),b++)lI(m,_,w);return(_===i||s.bounds==="ticks"||b===1)&&lI(m,_,w),Object.keys(m).sort(rI).map(x=>+x)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){const r=this.options,o=r.ticks.callback;if(o)return Se(o,[t,e,i],this);const c=r.time.displayFormats,h=this._unit,f=this._majorUnit,m=h&&c[h],y=f&&c[f],_=i[e],b=f&&y&&_&&_.major;return this._adapter.format(t,s||(b?y:m))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=dr(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*r+c*o,h:i*o+c*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,cI(this,[t],this._majorUnit),s),o=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(aI(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return _M(t.sort(rI))}}rt(Of,"id","time"),rt(Of,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function lg(n,t,e){let i=0,s=n.length-1,r,o,c,h;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Bo(n,"pos",t)),{pos:r,time:c}=n[i],{pos:o,time:h}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Bo(n,"time",t)),{time:r,pos:c}=n[i],{time:o,pos:h}=n[s]);const f=o-r;return f?c+(h-c)*(t-r)/f:c}class uI extends Of{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=lg(e,this.min),this._tableRange=lg(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let o,c,h,f,m;for(o=0,c=t.length;o<c;++o)f=t[o],f>=e&&f<=i&&s.push(f);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,c=s.length;o<c;++o)m=s[o+1],h=s[o-1],f=s[o],Math.round((m+h)/2)!==f&&r.push({time:f,pos:o/(c-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(lg(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return lg(this._table,i*this._tableRange+this._minPos,!0)}}rt(uI,"id","timeseries"),rt(uI,"defaults",Of.defaults);const QM="label";function hI(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function XF(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function ZM(n,t){n.labels=t}function JM(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:QM;const i=[];n.datasets=t.map(s=>{const r=n.datasets.find(o=>o[e]===s[e]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function QF(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:QM;const e={labels:[],datasets:[]};return ZM(e,n.labels),JM(e,n.datasets,t),e}function ZF(n,t){const{height:e=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:c,options:h,plugins:f=[],fallbackContent:m,updateMode:y,..._}=n,b=ot.useRef(null),w=ot.useRef(null),x=()=>{b.current&&(w.current=new fl(b.current,{type:o,data:QF(c,r),options:h&&{...h},plugins:f}),hI(t,w.current))},A=()=>{hI(t,null),w.current&&(w.current.destroy(),w.current=null)};return ot.useEffect(()=>{!s&&w.current&&h&&XF(w.current,h)},[s,h]),ot.useEffect(()=>{!s&&w.current&&ZM(w.current.config.data,c.labels)},[s,c.labels]),ot.useEffect(()=>{!s&&w.current&&c.datasets&&JM(w.current.config.data,c.datasets,r)},[s,c.datasets]),ot.useEffect(()=>{w.current&&(s?(A(),setTimeout(x)):w.current.update(y))},[s,h,c.labels,c.datasets,y]),ot.useEffect(()=>{w.current&&(A(),setTimeout(x))},[o]),ot.useEffect(()=>(x(),()=>A()),[]),gT.createElement("canvas",{ref:b,role:"img",height:e,width:i,..._},m)}const JF=ot.forwardRef(ZF);function OT(n,t){return fl.register(t),ot.forwardRef((e,i)=>gT.createElement(JF,{...e,ref:i,type:n}))}const tU=OT("line",Eg),eU=OT("bar",wg),tP=OT("doughnut",Wh);fl.register(Ig,i0,np);function eP({meals:n,startOfWeek:t}){const e=()=>{const o=[];for(let c=0;c<7;c++){const h=new Date(t);h.setDate(t.getDate()+c),o.push(h.toISOString().split("T")[0])}return o},s={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories",data:e().map(c=>{let h=0;return n.filter(f=>f.date===c).forEach(f=>{f.foodItems.forEach(m=>{m.nutrients.forEach(y=>{const _=parseFloat(y.total)||0;(y.type==="Carbohydrate"||y.type==="Protein")&&(h+=_*4),y.type==="Fat"&&(h+=_*9)})})}),Math.round(h)}),backgroundColor:"deepskyblue"}]},r={plugins:{tooltip:{enabled:!0},legend:{display:!1}},scales:{y:{ticks:{color:"white"},grid:{color:"#444"}},x:{ticks:{color:"white"},grid:{color:"#444"}}}};return C.jsx(eU,{data:s,options:r})}fl.register(Ac,kT,PT);function nP({meals:n,selectedDate:t,goal:e=2e3}){const i=t||new Date().toISOString().split("T")[0],r=n.filter(m=>m.date===i).reduce((m,y)=>(y.foodItems.forEach(_=>{_.nutrients.forEach(b=>{const w=parseFloat(b.total)||0;(b.type==="Carbohydrate"||b.type==="Protein")&&(m+=w*4),b.type==="Fat"&&(m+=w*9)})}),m),0),o=Math.round(r),c=e-o,h={labels:["Calories Consumed"],datasets:[{data:[r,c>0?c:0],backgroundColor:["deepskyblue","#a9c9f8ff"],borderWidth:0}]},f={cutout:"85%",plugins:{legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:12,weight:"bold"},padding:15,boxWidth:10,boxHeight:10}}}};return C.jsxs("div",{className:"donut-chart",style:{position:"relative"},children:[C.jsx(tP,{data:h,options:f}),C.jsx("div",{className:"DonutWordings",children:c>0?`${c} Remaining`:"Goal Reached"})]})}fl.register(Ac,kT,PT);function iP({meals:n,selectedDate:t}){const e=t||new Date().toISOString().split("T")[0],i=n.filter(b=>b.date===e),s={};i.forEach(b=>{b.foodItems.forEach(w=>{w.nutrients.forEach(x=>{const A=parseFloat(x.total)||0;s[x.type]=(s[x.type]||0)+A})})});const r=s.Protein||0,o=s.Fat||0,c=s.Carbohydrate||0,h=s["Carbs as Sugar"]||0,f=Object.entries(s).filter(([b])=>!["Protein","Fat","Carbohydrate","Carbs as Sugar"].includes(b)).reduce((b,[,w])=>b+w,0),m=[];r>0&&m.push({label:"Protein",value:r,color:"#4CAF50"}),o>0&&m.push({label:"Fat",value:o,color:"#FF9800"}),c>0&&m.push({label:"Carbohydrate",value:c,color:"#03A9F4"}),h>0&&m.push({label:"Carbs as Sugar",value:h,color:"teal"}),f>0&&m.push({label:"Others",value:f,color:"gray"});const y={labels:m.map(b=>b.label),datasets:[{data:m.map(b=>b.value),backgroundColor:m.map(b=>b.color),borderWidth:0}]},_={cutout:"85%",plugins:{tooltip:{enabled:!0},legend:{display:!0,position:"bottom",labels:{color:"white",font:{size:8,weight:"bold"},padding:5,boxWidth:5,boxHeight:5}}}};return C.jsx("div",{className:"donut-chart",style:{position:"relative"},children:C.jsx(tP,{data:y,options:_})})}const nU="Left",iU="Right",sU="Up",rU="Down",Ic={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},s0={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},fI="mousemove",dI="mouseup",aU="touchend",oU="touchmove",lU="touchstart";function cU(n,t,e,i){return n>t?e>0?iU:nU:i>0?rU:sU}function mI(n,t){if(t===0)return n;const e=Math.PI/180*t,i=n[0]*Math.cos(e)+n[1]*Math.sin(e),s=n[1]*Math.cos(e)-n[0]*Math.sin(e);return[i,s]}function uU(n,t){const e=m=>{const y="touches"in m;y&&m.touches.length>1||n((_,b)=>{b.trackMouse&&!y&&(document.addEventListener(fI,i),document.addEventListener(dI,o));const{clientX:w,clientY:x}=y?m.touches[0]:m,A=mI([w,x],b.rotationAngle);return b.onTouchStartOrOnMouseDown&&b.onTouchStartOrOnMouseDown({event:m}),Object.assign(Object.assign(Object.assign({},_),s0),{initial:A.slice(),xy:A,start:m.timeStamp||0})})},i=m=>{n((y,_)=>{const b="touches"in m;if(b&&m.touches.length>1)return y;if(m.timeStamp-y.start>_.swipeDuration)return y.swiping?Object.assign(Object.assign({},y),{swiping:!1}):y;const{clientX:w,clientY:x}=b?m.touches[0]:m,[A,M]=mI([w,x],_.rotationAngle),N=A-y.xy[0],L=M-y.xy[1],H=Math.abs(N),F=Math.abs(L),K=(m.timeStamp||0)-y.start,O=Math.sqrt(H*H+F*F)/(K||1),I=[N/(K||1),L/(K||1)],R=cU(H,F,N,L),V=typeof _.delta=="number"?_.delta:_.delta[R.toLowerCase()]||Ic.delta;if(H<V&&F<V&&!y.swiping)return y;const j={absX:H,absY:F,deltaX:N,deltaY:L,dir:R,event:m,first:y.first,initial:y.initial,velocity:O,vxvy:I};j.first&&_.onSwipeStart&&_.onSwipeStart(j),_.onSwiping&&_.onSwiping(j);let U=!1;return(_.onSwiping||_.onSwiped||_[`onSwiped${R}`])&&(U=!0),U&&_.preventScrollOnSwipe&&_.trackTouch&&m.cancelable&&m.preventDefault(),Object.assign(Object.assign({},y),{first:!1,eventData:j,swiping:!0})})},s=m=>{n((y,_)=>{let b;if(y.swiping&&y.eventData){if(m.timeStamp-y.start<_.swipeDuration){b=Object.assign(Object.assign({},y.eventData),{event:m}),_.onSwiped&&_.onSwiped(b);const w=_[`onSwiped${b.dir}`];w&&w(b)}}else _.onTap&&_.onTap({event:m});return _.onTouchEndOrOnMouseUp&&_.onTouchEndOrOnMouseUp({event:m}),Object.assign(Object.assign(Object.assign({},y),s0),{eventData:b})})},r=()=>{document.removeEventListener(fI,i),document.removeEventListener(dI,o)},o=m=>{r(),s(m)},c=(m,y)=>{let _=()=>{};if(m&&m.addEventListener){const b=Object.assign(Object.assign({},Ic.touchEventOptions),y.touchEventOptions),w=[[lU,e,b],[oU,i,Object.assign(Object.assign({},b),y.preventScrollOnSwipe?{passive:!1}:{})],[aU,s,b]];w.forEach(([x,A,M])=>m.addEventListener(x,A,M)),_=()=>w.forEach(([x,A])=>m.removeEventListener(x,A))}return _},f={ref:m=>{m!==null&&n((y,_)=>{if(y.el===m)return y;const b={};return y.el&&y.el!==m&&y.cleanUpTouch&&(y.cleanUpTouch(),b.cleanUpTouch=void 0),_.trackTouch&&m&&(b.cleanUpTouch=c(m,_)),Object.assign(Object.assign(Object.assign({},y),{el:m}),b)})}};return t.trackMouse&&(f.onMouseDown=e),[f,c]}function hU(n,t,e,i){return!t.trackTouch||!n.el?(n.cleanUpTouch&&n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:void 0})):n.cleanUpTouch?t.preventScrollOnSwipe!==e.preventScrollOnSwipe||t.touchEventOptions.passive!==e.touchEventOptions.passive?(n.cleanUpTouch(),Object.assign(Object.assign({},n),{cleanUpTouch:i(n.el,t)})):n:Object.assign(Object.assign({},n),{cleanUpTouch:i(n.el,t)})}function fU(n){const{trackMouse:t}=n,e=ot.useRef(Object.assign({},s0)),i=ot.useRef(Object.assign({},Ic)),s=ot.useRef(Object.assign({},i.current));s.current=Object.assign({},i.current),i.current=Object.assign(Object.assign({},Ic),n);let r;for(r in Ic)i.current[r]===void 0&&(i.current[r]=Ic[r]);const[o,c]=ot.useMemo(()=>uU(h=>e.current=h(e.current,i.current),{trackMouse:t}),[t]);return e.current=hU(e.current,i.current,s.current,c),o}const sP=ot.createContext({});function dU(n){const t=ot.useRef(null);return t.current===null&&(t.current=n()),t.current}const NT=typeof window<"u",mU=NT?ot.useLayoutEffect:ot.useEffect,VT=ot.createContext(null);function LT(n,t){n.indexOf(t)===-1&&n.push(t)}function jT(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const _r=(n,t,e)=>e>t?t:e<n?n:e;let BT=()=>{};const vr={},rP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function aP(n){return typeof n=="object"&&n!==null}const oP=n=>/^0[^.\s]+$/u.test(n);function FT(n){let t;return()=>(t===void 0&&(t=n()),t)}const Vi=n=>n,gU=(n,t)=>e=>t(n(e)),ad=(...n)=>n.reduce(gU),Nf=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class UT{constructor(){this.subscriptions=[]}add(t){return LT(this.subscriptions,t),()=>jT(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const As=n=>n*1e3,Is=n=>n/1e3;function lP(n,t){return t?n*(1e3/t):0}const cP=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,pU=1e-7,yU=12;function _U(n,t,e,i,s){let r,o,c=0;do o=t+(e-t)/2,r=cP(o,i,s)-n,r>0?e=o:t=o;while(Math.abs(r)>pU&&++c<yU);return o}function od(n,t,e,i){if(n===t&&e===i)return Vi;const s=r=>_U(r,0,1,n,e);return r=>r===0||r===1?r:cP(s(r),t,i)}const uP=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,hP=n=>t=>1-n(1-t),fP=od(.33,1.53,.69,.99),zT=hP(fP),dP=uP(zT),mP=n=>(n*=2)<1?.5*zT(n):.5*(2-Math.pow(2,-10*(n-1))),HT=n=>1-Math.sin(Math.acos(n)),gP=hP(HT),pP=uP(HT),vU=od(.42,0,1,1),bU=od(0,0,.58,1),yP=od(.42,0,.58,1),TU=n=>Array.isArray(n)&&typeof n[0]!="number",_P=n=>Array.isArray(n)&&typeof n[0]=="number",wU={linear:Vi,easeIn:vU,easeInOut:yP,easeOut:bU,circIn:HT,circInOut:pP,circOut:gP,backIn:zT,backInOut:dP,backOut:fP,anticipate:mP},EU=n=>typeof n=="string",gI=n=>{if(_P(n)){BT(n.length===4);const[t,e,i,s]=n;return od(t,e,i,s)}else if(EU(n))return wU[n];return n},cg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function SU(n,t){let e=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(m){o.has(m)&&(f.schedule(m),n()),m(c)}const f={schedule:(m,y=!1,_=!1)=>{const w=_&&s?e:i;return y&&o.add(m),w.has(m)||w.add(m),m},cancel:m=>{i.delete(m),o.delete(m)},process:m=>{if(c=m,s){r=!0;return}s=!0,[e,i]=[i,e],e.forEach(h),e.clear(),s=!1,r&&(r=!1,f.process(m))}};return f}const xU=40;function vP(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,o=cg.reduce((L,H)=>(L[H]=SU(r),L),{}),{setup:c,read:h,resolveKeyframes:f,preUpdate:m,update:y,preRender:_,render:b,postRender:w}=o,x=()=>{const L=vr.useManualTiming?s.timestamp:performance.now();e=!1,vr.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(L-s.timestamp,xU),1)),s.timestamp=L,s.isProcessing=!0,c.process(s),h.process(s),f.process(s),m.process(s),y.process(s),_.process(s),b.process(s),w.process(s),s.isProcessing=!1,e&&t&&(i=!1,n(x))},A=()=>{e=!0,i=!0,s.isProcessing||n(x)};return{schedule:cg.reduce((L,H)=>{const F=o[H];return L[H]=(K,O=!1,I=!1)=>(e||A(),F.schedule(K,O,I)),L},{}),cancel:L=>{for(let H=0;H<cg.length;H++)o[cg[H]].cancel(L)},state:s,steps:o}}const{schedule:Re,cancel:Ia,state:In,steps:qv}=vP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vi,!0);let Rg;function AU(){Rg=void 0}const Jn={now:()=>(Rg===void 0&&Jn.set(In.isProcessing||vr.useManualTiming?In.timestamp:performance.now()),Rg),set:n=>{Rg=n,queueMicrotask(AU)}},bP=n=>t=>typeof t=="string"&&t.startsWith(n),qT=bP("--"),IU=bP("var(--"),GT=n=>IU(n)?RU.test(n.split("/*")[0].trim()):!1,RU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Vf={...uu,transform:n=>_r(0,1,n)},ug={...uu,default:1},cf=n=>Math.round(n*1e5)/1e5,WT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DU(n){return n==null}const CU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,YT=(n,t)=>e=>!!(typeof e=="string"&&CU.test(e)&&e.startsWith(n)||t&&!DU(e)&&Object.prototype.hasOwnProperty.call(e,t)),TP=(n,t,e)=>i=>{if(typeof i!="string")return i;const[s,r,o,c]=i.match(WT);return{[n]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},MU=n=>_r(0,255,n),Gv={...uu,transform:n=>Math.round(MU(n))},Fo={test:YT("rgb","red"),parse:TP("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+Gv.transform(n)+", "+Gv.transform(t)+", "+Gv.transform(e)+", "+cf(Vf.transform(i))+")"};function PU(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const r0={test:YT("#"),parse:PU,transform:Fo.transform},ld=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),la=ld("deg"),Rs=ld("%"),Lt=ld("px"),kU=ld("vh"),OU=ld("vw"),pI={...Rs,parse:n=>Rs.parse(n)/100,transform:n=>Rs.transform(n*100)},Rc={test:YT("hsl","hue"),parse:TP("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Rs.transform(cf(t))+", "+Rs.transform(cf(e))+", "+cf(Vf.transform(i))+")"},nn={test:n=>Fo.test(n)||r0.test(n)||Rc.test(n),parse:n=>Fo.test(n)?Fo.parse(n):Rc.test(n)?Rc.parse(n):r0.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Fo.transform(n):Rc.transform(n),getAnimatableNone:n=>{const t=nn.parse(n);return t.alpha=0,nn.transform(t)}},NU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function VU(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(WT))==null?void 0:t.length)||0)+(((e=n.match(NU))==null?void 0:e.length)||0)>0}const wP="number",EP="color",LU="var",jU="var(",yI="${}",BU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lf(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},s=[];let r=0;const c=t.replace(BU,h=>(nn.test(h)?(i.color.push(r),s.push(EP),e.push(nn.parse(h))):h.startsWith(jU)?(i.var.push(r),s.push(LU),e.push(h)):(i.number.push(r),s.push(wP),e.push(parseFloat(h))),++r,yI)).split(yI);return{values:e,split:c,indexes:i,types:s}}function SP(n){return Lf(n).values}function xP(n){const{split:t,types:e}=Lf(n),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const c=e[o];c===wP?r+=cf(s[o]):c===EP?r+=nn.transform(s[o]):r+=s[o]}return r}}const FU=n=>typeof n=="number"?0:nn.test(n)?nn.getAnimatableNone(n):n;function UU(n){const t=SP(n);return xP(n)(t.map(FU))}const Ra={test:VU,parse:SP,createTransformer:xP,getAnimatableNone:UU};function Wv(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function zU({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,r=0,o=0;if(!t)s=r=o=e;else{const c=e<.5?e*(1+t):e+t-e*t,h=2*e-c;s=Wv(h,c,n+1/3),r=Wv(h,c,n),o=Wv(h,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function ip(n,t){return e=>e>0?t:n}const Ce=(n,t,e)=>n+(t-n)*e,Yv=(n,t,e)=>{const i=n*n,s=e*(t*t-i)+i;return s<0?0:Math.sqrt(s)},HU=[r0,Fo,Rc],qU=n=>HU.find(t=>t.test(n));function _I(n){const t=qU(n);if(!t)return!1;let e=t.parse(n);return t===Rc&&(e=zU(e)),e}const vI=(n,t)=>{const e=_I(n),i=_I(t);if(!e||!i)return ip(n,t);const s={...e};return r=>(s.red=Yv(e.red,i.red,r),s.green=Yv(e.green,i.green,r),s.blue=Yv(e.blue,i.blue,r),s.alpha=Ce(e.alpha,i.alpha,r),Fo.transform(s))},a0=new Set(["none","hidden"]);function GU(n,t){return a0.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function WU(n,t){return e=>Ce(n,t,e)}function KT(n){return typeof n=="number"?WU:typeof n=="string"?GT(n)?ip:nn.test(n)?vI:$U:Array.isArray(n)?AP:typeof n=="object"?nn.test(n)?vI:YU:ip}function AP(n,t){const e=[...n],i=e.length,s=n.map((r,o)=>KT(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)e[o]=s[o](r);return e}}function YU(n,t){const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=KT(n[s])(n[s],t[s]));return s=>{for(const r in i)e[r]=i[r](s);return e}}function KU(n,t){const e=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],o=n.indexes[r][i[r]],c=n.values[o]??0;e[s]=c,i[r]++}return e}const $U=(n,t)=>{const e=Ra.createTransformer(t),i=Lf(n),s=Lf(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?a0.has(n)&&!s.values.length||a0.has(t)&&!i.values.length?GU(n,t):ad(AP(KU(i,s),s.values),e):ip(n,t)};function IP(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Ce(n,t,e):KT(n)(n,t)}const XU=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Re.update(t,e),stop:()=>Ia(t),now:()=>In.isProcessing?In.timestamp:Jn.now()}},RP=(n,t,e=10)=>{let i="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},sp=2e4;function $T(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<sp;)t+=e,i=n.next(t);return t>=sp?1/0:t}function QU(n,t=100,e){const i=e({...n,keyframes:[0,t]}),s=Math.min($T(i),sp);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:Is(s)}}const ZU=5;function DP(n,t,e){const i=Math.max(t-ZU,0);return lP(e-n(i),t-i)}const Ve={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Kv=.001;function JU({duration:n=Ve.duration,bounce:t=Ve.bounce,velocity:e=Ve.velocity,mass:i=Ve.mass}){let s,r,o=1-t;o=_r(Ve.minDamping,Ve.maxDamping,o),n=_r(Ve.minDuration,Ve.maxDuration,Is(n)),o<1?(s=f=>{const m=f*o,y=m*n,_=m-e,b=o0(f,o),w=Math.exp(-y);return Kv-_/b*w},r=f=>{const y=f*o*n,_=y*e+e,b=Math.pow(o,2)*Math.pow(f,2)*n,w=Math.exp(-y),x=o0(Math.pow(f,2),o);return(-s(f)+Kv>0?-1:1)*((_-b)*w)/x}):(s=f=>{const m=Math.exp(-f*n),y=(f-e)*n+1;return-Kv+m*y},r=f=>{const m=Math.exp(-f*n),y=(e-f)*(n*n);return m*y});const c=5/n,h=e6(s,r,c);if(n=As(n),isNaN(h))return{stiffness:Ve.stiffness,damping:Ve.damping,duration:n};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:o*2*Math.sqrt(i*f),duration:n}}}const t6=12;function e6(n,t,e){let i=e;for(let s=1;s<t6;s++)i=i-n(i)/t(i);return i}function o0(n,t){return n*Math.sqrt(1-t*t)}const n6=["duration","bounce"],i6=["stiffness","damping","mass"];function bI(n,t){return t.some(e=>n[e]!==void 0)}function s6(n){let t={velocity:Ve.velocity,stiffness:Ve.stiffness,damping:Ve.damping,mass:Ve.mass,isResolvedFromDuration:!1,...n};if(!bI(n,i6)&&bI(n,n6))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),s=i*i,r=2*_r(.05,1,1-(n.bounce||0))*Math.sqrt(s);t={...t,mass:Ve.mass,stiffness:s,damping:r}}else{const e=JU(n);t={...t,...e,mass:Ve.mass},t.isResolvedFromDuration=!0}return t}function rp(n=Ve.visualDuration,t=Ve.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:s}=e;const r=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],c={done:!1,value:r},{stiffness:h,damping:f,mass:m,duration:y,velocity:_,isResolvedFromDuration:b}=s6({...e,velocity:-Is(e.velocity||0)}),w=_||0,x=f/(2*Math.sqrt(h*m)),A=o-r,M=Is(Math.sqrt(h/m)),N=Math.abs(A)<5;i||(i=N?Ve.restSpeed.granular:Ve.restSpeed.default),s||(s=N?Ve.restDelta.granular:Ve.restDelta.default);let L;if(x<1){const F=o0(M,x);L=K=>{const O=Math.exp(-x*M*K);return o-O*((w+x*M*A)/F*Math.sin(F*K)+A*Math.cos(F*K))}}else if(x===1)L=F=>o-Math.exp(-M*F)*(A+(w+M*A)*F);else{const F=M*Math.sqrt(x*x-1);L=K=>{const O=Math.exp(-x*M*K),I=Math.min(F*K,300);return o-O*((w+x*M*A)*Math.sinh(I)+F*A*Math.cosh(I))/F}}const H={calculatedDuration:b&&y||null,next:F=>{const K=L(F);if(b)c.done=F>=y;else{let O=F===0?w:0;x<1&&(O=F===0?As(w):DP(L,F,K));const I=Math.abs(O)<=i,R=Math.abs(o-K)<=s;c.done=I&&R}return c.value=c.done?o:K,c},toString:()=>{const F=Math.min($T(H),sp),K=RP(O=>H.next(F*O).value,F,30);return F+"ms "+K},toTransition:()=>{}};return H}rp.applyToOptions=n=>{const t=QU(n,100,rp);return n.ease=t.ease,n.duration=As(t.duration),n.type="keyframes",n};function l0({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:c,max:h,restDelta:f=.5,restSpeed:m}){const y=n[0],_={done:!1,value:y},b=I=>c!==void 0&&I<c||h!==void 0&&I>h,w=I=>c===void 0?h:h===void 0||Math.abs(c-I)<Math.abs(h-I)?c:h;let x=e*t;const A=y+x,M=o===void 0?A:o(A);M!==A&&(x=M-y);const N=I=>-x*Math.exp(-I/i),L=I=>M+N(I),H=I=>{const R=N(I),V=L(I);_.done=Math.abs(R)<=f,_.value=_.done?M:V};let F,K;const O=I=>{b(_.value)&&(F=I,K=rp({keyframes:[_.value,w(_.value)],velocity:DP(L,I,_.value),damping:s,stiffness:r,restDelta:f,restSpeed:m}))};return O(0),{calculatedDuration:null,next:I=>{let R=!1;return!K&&F===void 0&&(R=!0,H(I),O(I)),F!==void 0&&I>=F?K.next(I-F):(!R&&H(I),_)}}}function r6(n,t,e){const i=[],s=e||vr.mix||IP,r=n.length-1;for(let o=0;o<r;o++){let c=s(n[o],n[o+1]);if(t){const h=Array.isArray(t)?t[o]||Vi:t;c=ad(h,c)}i.push(c)}return i}function a6(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const r=n.length;if(BT(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const c=r6(t,i,s),h=c.length,f=m=>{if(o&&m<n[0])return t[0];let y=0;if(h>1)for(;y<n.length-2&&!(m<n[y+1]);y++);const _=Nf(n[y],n[y+1],m);return c[y](_)};return e?m=>f(_r(n[0],n[r-1],m)):f}function o6(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=Nf(0,t,i);n.push(Ce(e,1,s))}}function l6(n){const t=[0];return o6(t,n.length-1),t}function c6(n,t){return n.map(e=>e*t)}function u6(n,t){return n.map(()=>t||yP).splice(0,n.length-1)}function uf({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=TU(i)?i.map(gI):gI(i),r={done:!1,value:t[0]},o=c6(e&&e.length===t.length?e:l6(t),n),c=a6(o,t,{ease:Array.isArray(s)?s:u6(t,s)});return{calculatedDuration:n,next:h=>(r.value=c(h),r.done=h>=n,r)}}const h6=n=>n!==null;function XT(n,{repeat:t,repeatType:e="loop"},i,s=1){const r=n.filter(h6),c=s<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!c||i===void 0?r[c]:i}const f6={decay:l0,inertia:l0,tween:uf,keyframes:uf,spring:rp};function CP(n){typeof n.type=="string"&&(n.type=f6[n.type])}class QT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const d6=n=>n/100;class ZT extends QT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:e}=this.options;e&&e.updatedAt!==Jn.now()&&this.tick(Jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;CP(t);const{type:e=uf,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=t;let{keyframes:c}=t;const h=e||uf;h!==uf&&typeof c[0]!="number"&&(this.mixKeyframes=ad(d6,IP(c[0],c[1])),c=[0,100]);const f=h({...t,keyframes:c});r==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...c].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=$T(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:m,repeat:y,repeatType:_,repeatDelay:b,type:w,onUpdate:x,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const M=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?M<0:M>s;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let L=this.currentTime,H=i;if(y){const I=Math.min(this.currentTime,s)/c;let R=Math.floor(I),V=I%1;!V&&I>=1&&(V=1),V===1&&R--,R=Math.min(R,y+1),!!(R%2)&&(_==="reverse"?(V=1-V,b&&(V-=b/c)):_==="mirror"&&(H=o)),L=_r(0,1,V)*c}const F=N?{done:!1,value:m[0]}:H.next(L);r&&(F.value=r(F.value));let{done:K}=F;!N&&h!==null&&(K=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return O&&w!==l0&&(F.value=XT(m,this.options,A,this.speed)),x&&x(F.value),O&&this.finish(),F}then(t,e){return this.finished.then(t,e)}get duration(){return Is(this.calculatedDuration)}get time(){return Is(this.currentTime)}set time(t){var e;t=As(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Jn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Is(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=XU,startTime:e}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function m6(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const Uo=n=>n*180/Math.PI,c0=n=>{const t=Uo(Math.atan2(n[1],n[0]));return u0(t)},g6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:c0,rotateZ:c0,skewX:n=>Uo(Math.atan(n[1])),skewY:n=>Uo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},u0=n=>(n=n%360,n<0&&(n+=360),n),TI=c0,wI=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),EI=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),p6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wI,scaleY:EI,scale:n=>(wI(n)+EI(n))/2,rotateX:n=>u0(Uo(Math.atan2(n[6],n[5]))),rotateY:n=>u0(Uo(Math.atan2(-n[2],n[0]))),rotateZ:TI,rotate:TI,skewX:n=>Uo(Math.atan(n[4])),skewY:n=>Uo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function h0(n){return n.includes("scale")?1:0}function f0(n,t){if(!n||n==="none")return h0(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(e)i=p6,s=e;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=g6,s=c}if(!s)return h0(t);const r=i[t],o=s[1].split(",").map(_6);return typeof r=="function"?r(o):o[r]}const y6=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return f0(e,t)};function _6(n){return parseFloat(n.trim())}const hu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fu=new Set(hu),SI=n=>n===uu||n===Lt,v6=new Set(["x","y","z"]),b6=hu.filter(n=>!v6.has(n));function T6(n){const t=[];return b6.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const Wo={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>f0(t,"x"),y:(n,{transform:t})=>f0(t,"y")};Wo.translateX=Wo.x;Wo.translateY=Wo.y;const Yo=new Set;let d0=!1,m0=!1,g0=!1;function MP(){if(m0){const n=Array.from(Yo).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const s=T6(i);s.length&&(e.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=e.get(i);s&&s.forEach(([r,o])=>{var c;(c=i.getValue(r))==null||c.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}m0=!1,d0=!1,Yo.forEach(n=>n.complete(g0)),Yo.clear()}function PP(){Yo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(m0=!0)})}function w6(){g0=!0,PP(),MP(),g0=!1}class JT{constructor(t,e,i,s,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Yo.add(this),d0||(d0=!0,Re.read(PP),Re.resolveKeyframes(MP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(i&&e){const c=i.readValue(e,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),s&&r===void 0&&s.set(t[0])}m6(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Yo.delete(this)}cancel(){this.state==="scheduled"&&(Yo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const E6=n=>n.startsWith("--");function S6(n,t,e){E6(t)?n.style.setProperty(t,e):n.style[t]=e}const x6=FT(()=>window.ScrollTimeline!==void 0),A6={};function I6(n,t){const e=FT(n);return()=>A6[t]??e()}const kP=I6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xh=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,xI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xh([0,.65,.55,1]),circOut:Xh([.55,0,1,.45]),backIn:Xh([.31,.01,.66,-.59]),backOut:Xh([.33,1.53,.69,.99])};function OP(n,t){if(n)return typeof n=="function"?kP()?RP(n,t):"ease-out":_P(n)?Xh(n):Array.isArray(n)?n.map(e=>OP(e,t)||xI.easeOut):xI[n]}function R6(n,t,e,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:c="easeOut",times:h}={},f=void 0){const m={[t]:e};h&&(m.offset=h);const y=OP(c,s);Array.isArray(y)&&(m.easing=y);const _={delay:i,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),n.animate(m,_)}function NP(n){return typeof n=="function"&&"applyToOptions"in n}function D6({type:n,...t}){return NP(n)&&kP()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class C6 extends QT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:s,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:c,onComplete:h}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,BT(typeof t.type!="string");const f=D6(t);this.animation=R6(e,i,s,f,r),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const m=XT(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):S6(e,i,m),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return Is(Number(t))}get time(){return Is(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=As(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&x6()?(this.animation.timeline=t,Vi):e(this)}}const VP={anticipate:mP,backInOut:dP,circInOut:pP};function M6(n){return n in VP}function P6(n){typeof n.ease=="string"&&M6(n.ease)&&(n.ease=VP[n.ease])}const AI=10;class k6 extends C6{constructor(t){P6(t),CP(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:s,element:r,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new ZT({...o,autoplay:!1}),h=As(this.finishedTime??this.time);e.setWithVelocity(c.sample(h-AI).value,c.sample(h).value,AI),c.stop()}}const II=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ra.test(n)||n==="0")&&!n.startsWith("url("));function O6(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function N6(n,t,e,i){const s=n[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],o=II(s,t),c=II(r,t);return!o||!c?!1:O6(n)||(e==="spring"||NP(e))&&i}function p0(n){n.duration=0,n.type}const V6=new Set(["opacity","clipPath","filter","transform"]),L6=FT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function j6(n){var m;const{motionValue:t,name:e,repeatDelay:i,repeatType:s,damping:r,type:o}=n;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=t.owner.getProps();return L6()&&e&&V6.has(e)&&(e!=="transform"||!f)&&!h&&!i&&s!=="mirror"&&r!==0&&o!=="inertia"}const B6=40;class F6 extends QT{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",keyframes:c,name:h,motionValue:f,element:m,...y}){var w;super(),this.stop=()=>{var x,A;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=Jn.now();const _={autoplay:t,delay:e,type:i,repeat:s,repeatDelay:r,repeatType:o,name:h,motionValue:f,element:m,...y},b=(m==null?void 0:m.KeyframeResolver)||JT;this.keyframeResolver=new b(c,(x,A,M)=>this.onKeyframesResolved(x,A,_,!M),h,f,m),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,e,i,s){this.keyframeResolver=void 0;const{name:r,type:o,velocity:c,delay:h,isHandoff:f,onUpdate:m}=i;this.resolvedAt=Jn.now(),N6(t,r,o,c)||((vr.instantAnimations||!h)&&(m==null||m(XT(t,i,e))),t[0]=t[t.length-1],p0(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>B6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},b=!f&&j6(_)?new k6({..._,element:_.motionValue.owner.current}):new ZT(_);b.finished.then(()=>this.notifyFinished()).catch(Vi),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),w6()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const U6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function z6(n){const t=U6.exec(n);if(!t)return[,];const[,e,i,s]=t;return[`--${e??i}`,s]}function LP(n,t,e=1){const[i,s]=z6(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return rP(o)?parseFloat(o):o}return GT(s)?LP(s,t,e+1):s}function tw(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const jP=new Set(["width","height","top","left","right","bottom",...hu]),H6={test:n=>n==="auto",parse:n=>n},BP=n=>t=>t.test(n),FP=[uu,Lt,Rs,la,OU,kU,H6],RI=n=>FP.find(BP(n));function q6(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||oP(n):!0}const G6=new Set(["brightness","contrast","saturate","opacity"]);function W6(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(WT)||[];if(!i)return n;const s=e.replace(i,"");let r=G6.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+s+")"}const Y6=/\b([a-z-]*)\(.*?\)/gu,y0={...Ra,getAnimatableNone:n=>{const t=n.match(Y6);return t?t.map(W6).join(" "):n}},DI={...uu,transform:Math.round},K6={rotate:la,rotateX:la,rotateY:la,rotateZ:la,scale:ug,scaleX:ug,scaleY:ug,scaleZ:ug,skew:la,skewX:la,skewY:la,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:Vf,originX:pI,originY:pI,originZ:Lt},ew={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...K6,zIndex:DI,fillOpacity:Vf,strokeOpacity:Vf,numOctaves:DI},$6={...ew,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:y0,WebkitFilter:y0},UP=n=>$6[n];function zP(n,t){let e=UP(n);return e!==y0&&(e=Ra),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const X6=new Set(["auto","none","0"]);function Q6(n,t,e){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!X6.has(r)&&Lf(r).values.length&&(s=n[i]),i++}if(s&&e)for(const r of t)n[r]=zP(e,s)}class Z6 extends JT{constructor(t,e,i,s,r){super(t,e,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let f=t[h];if(typeof f=="string"&&(f=f.trim(),GT(f))){const m=LP(f,e.current);m!==void 0&&(t[h]=m),h===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!jP.has(i)||t.length!==2)return;const[s,r]=t,o=RI(s),c=RI(r);if(o!==c)if(SI(o)&&SI(c))for(let h=0;h<t.length;h++){const f=t[h];typeof f=="string"&&(t[h]=parseFloat(f))}else Wo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||q6(t[s]))&&i.push(s);i.length&&Q6(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wo[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var c;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,o=i[r];i[r]=Wo[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([h,f])=>{t.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function J6(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=(e==null?void 0:e[n])??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const HP=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function t5(n){return aP(n)&&"offsetHeight"in n}const CI=30,e5=n=>!isNaN(parseFloat(n));class n5{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=Jn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=e5(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new UT);const i=this.events[t].add(e);return t==="change"?()=>{i(),Re.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>CI)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,CI);return lP(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hc(n,t){return new n5(n,t)}const{schedule:nw}=vP(queueMicrotask,!1),Wi={x:!1,y:!1};function qP(){return Wi.x||Wi.y}function i5(n){return n==="x"||n==="y"?Wi[n]?null:(Wi[n]=!0,()=>{Wi[n]=!1}):Wi.x||Wi.y?null:(Wi.x=Wi.y=!0,()=>{Wi.x=Wi.y=!1})}function GP(n,t){const e=J6(n),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[e,s,()=>i.abort()]}function MI(n){return!(n.pointerType==="touch"||qP())}function s5(n,t,e={}){const[i,s,r]=GP(n,e),o=c=>{if(!MI(c))return;const{target:h}=c,f=t(h,c);if(typeof f!="function"||!h)return;const m=y=>{MI(y)&&(f(y),h.removeEventListener("pointerleave",m))};h.addEventListener("pointerleave",m,s)};return i.forEach(c=>{c.addEventListener("pointerenter",o,s)}),r}const WP=(n,t)=>t?n===t?!0:WP(n,t.parentElement):!1,iw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,r5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function a5(n){return r5.has(n.tagName)||n.tabIndex!==-1}const Dg=new WeakSet;function PI(n){return t=>{t.key==="Enter"&&n(t)}}function $v(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const o5=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=PI(()=>{if(Dg.has(e))return;$v(e,"down");const s=PI(()=>{$v(e,"up")}),r=()=>$v(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function kI(n){return iw(n)&&!qP()}function l5(n,t,e={}){const[i,s,r]=GP(n,e),o=c=>{const h=c.currentTarget;if(!kI(c))return;Dg.add(h);const f=t(h,c),m=(b,w)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),Dg.has(h)&&Dg.delete(h),kI(b)&&typeof f=="function"&&f(b,{success:w})},y=b=>{m(b,h===window||h===document||e.useGlobalTarget||WP(h,b.target))},_=b=>{m(b,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",_,s)};return i.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",o,s),t5(c)&&(c.addEventListener("focus",f=>o5(f,s)),!a5(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function YP(n){return aP(n)&&"ownerSVGElement"in n}function c5(n){return YP(n)&&n.tagName==="svg"}const Ln=n=>!!(n&&n.getVelocity),u5=[...FP,nn,Ra],h5=n=>u5.find(BP(n)),KP=ot.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function f5(n=!0){const t=ot.useContext(VT);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:s}=t,r=ot.useId();ot.useEffect(()=>{if(n)return s(r)},[n]);const o=ot.useCallback(()=>n&&i&&i(r),[r,i,n]);return!e&&i?[!1,o]:[!0]}const $P=ot.createContext({strict:!1}),OI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qc={};for(const n in OI)qc[n]={isEnabled:t=>OI[n].some(e=>!!t[e])};function d5(n){for(const t in n)qc[t]={...qc[t],...n[t]}}const m5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ap(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||m5.has(n)}let XP=n=>!ap(n);function g5(n){typeof n=="function"&&(XP=t=>t.startsWith("on")?!ap(t):n(t))}try{g5(require("@emotion/is-prop-valid").default)}catch{}function p5(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(XP(s)||e===!0&&ap(s)||!t&&!ap(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const Up=ot.createContext({});function zp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function jf(n){return typeof n=="string"||Array.isArray(n)}const sw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rw=["initial",...sw];function Hp(n){return zp(n.animate)||rw.some(t=>jf(n[t]))}function QP(n){return!!(Hp(n)||n.variants)}function y5(n,t){if(Hp(n)){const{initial:e,animate:i}=n;return{initial:e===!1||jf(e)?e:void 0,animate:jf(i)?i:void 0}}return n.inherit!==!1?t:{}}function _5(n){const{initial:t,animate:e}=y5(n,ot.useContext(Up));return ot.useMemo(()=>({initial:t,animate:e}),[NI(t),NI(e)])}function NI(n){return Array.isArray(n)?n.join(" "):n}const Bf={};function v5(n){for(const t in n)Bf[t]=n[t],qT(t)&&(Bf[t].isCSSVariable=!0)}function ZP(n,{layout:t,layoutId:e}){return fu.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!Bf[n]||n==="opacity")}const b5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},T5=hu.length;function w5(n,t,e){let i="",s=!0;for(let r=0;r<T5;r++){const o=hu[r],c=n[o];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(o.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||e){const f=HP(c,ew[o]);if(!h){s=!1;const m=b5[o]||o;i+=`${m}(${f}) `}e&&(t[o]=f)}}return i=i.trim(),e?i=e(t,s?"":i):s&&(i="none"),i}function aw(n,t,e){const{style:i,vars:s,transformOrigin:r}=n;let o=!1,c=!1;for(const h in t){const f=t[h];if(fu.has(h)){o=!0;continue}else if(qT(h)){s[h]=f;continue}else{const m=HP(f,ew[h]);h.startsWith("origin")?(c=!0,r[h]=m):i[h]=m}}if(t.transform||(o||e?i.transform=w5(t,n.transform,e):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:m=0}=r;i.transformOrigin=`${h} ${f} ${m}`}}const ow=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JP(n,t,e){for(const i in t)!Ln(t[i])&&!ZP(i,e)&&(n[i]=t[i])}function E5({transformTemplate:n},t){return ot.useMemo(()=>{const e=ow();return aw(e,t,n),Object.assign({},e.vars,e.style)},[t])}function S5(n,t){const e=n.style||{},i={};return JP(i,e,n),Object.assign(i,E5(n,t)),i}function x5(n,t){const e={},i=S5(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const A5={offset:"stroke-dashoffset",array:"stroke-dasharray"},I5={offset:"strokeDashoffset",array:"strokeDasharray"};function R5(n,t,e=1,i=0,s=!0){n.pathLength=1;const r=s?A5:I5;n[r.offset]=Lt.transform(-i);const o=Lt.transform(t),c=Lt.transform(e);n[r.array]=`${o} ${c}`}function tk(n,{attrX:t,attrY:e,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:o=0,...c},h,f,m){if(aw(n,c,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:_}=n;y.transform&&(_.transform=y.transform,delete y.transform),(_.transform||y.transformOrigin)&&(_.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),_.transform&&(_.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),i!==void 0&&(y.scale=i),s!==void 0&&R5(y,s,r,o,!1)}const ek=()=>({...ow(),attrs:{}}),nk=n=>typeof n=="string"&&n.toLowerCase()==="svg";function D5(n,t,e,i){const s=ot.useMemo(()=>{const r=ek();return tk(r,t,nk(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};JP(r,n.style,n),s.style={...r,...s.style}}return s}const C5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lw(n){return typeof n!="string"||n.includes("-")?!1:!!(C5.indexOf(n)>-1||/[A-Z]/u.test(n))}function M5(n,t,e,{latestValues:i},s,r=!1){const c=(lw(n)?D5:x5)(t,i,s,n),h=p5(t,typeof n=="string",r),f=n!==ot.Fragment?{...h,...c,ref:e}:{},{children:m}=t,y=ot.useMemo(()=>Ln(m)?m.get():m,[m]);return ot.createElement(n,{...f,children:y})}function VI(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function cw(n,t,e,i){if(typeof t=="function"){const[s,r]=VI(i);t=t(e!==void 0?e:n.custom,s,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[s,r]=VI(i);t=t(e!==void 0?e:n.custom,s,r)}return t}function Cg(n){return Ln(n)?n.get():n}function P5({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,s){return{latestValues:k5(e,i,s,n),renderState:t()}}function k5(n,t,e,i){const s={},r=i(n,{});for(const _ in r)s[_]=Cg(r[_]);let{initial:o,animate:c}=n;const h=Hp(n),f=QP(n);t&&f&&!h&&n.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let m=e?e.initial===!1:!1;m=m||o===!1;const y=m?c:o;if(y&&typeof y!="boolean"&&!zp(y)){const _=Array.isArray(y)?y:[y];for(let b=0;b<_.length;b++){const w=cw(n,_[b]);if(w){const{transitionEnd:x,transition:A,...M}=w;for(const N in M){let L=M[N];if(Array.isArray(L)){const H=m?L.length-1:0;L=L[H]}L!==null&&(s[N]=L)}for(const N in x)s[N]=x[N]}}}return s}const ik=n=>(t,e)=>{const i=ot.useContext(Up),s=ot.useContext(VT),r=()=>P5(n,t,i,s);return e?r():dU(r)};function uw(n,t,e){var r;const{style:i}=n,s={};for(const o in i)(Ln(i[o])||t.style&&Ln(t.style[o])||ZP(o,n)||((r=e==null?void 0:e.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}const O5=ik({scrapeMotionValuesFromProps:uw,createRenderState:ow});function sk(n,t,e){const i=uw(n,t,e);for(const s in n)if(Ln(n[s])||Ln(t[s])){const r=hu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const N5=ik({scrapeMotionValuesFromProps:sk,createRenderState:ek}),V5=Symbol.for("motionComponentSymbol");function Dc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function L5(n,t,e){return ot.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Dc(e)&&(e.current=i))},[t])}const hw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),j5="framerAppearId",rk="data-"+hw(j5),ak=ot.createContext({});function B5(n,t,e,i,s){var x,A;const{visualElement:r}=ot.useContext(Up),o=ot.useContext($P),c=ot.useContext(VT),h=ot.useContext(KP).reducedMotion,f=ot.useRef(null);i=i||o.renderer,!f.current&&i&&(f.current=i(n,{visualState:t,parent:r,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=f.current,y=ot.useContext(ak);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&F5(f.current,e,s,y);const _=ot.useRef(!1);ot.useInsertionEffect(()=>{m&&_.current&&m.update(e,c)});const b=e[rk],w=ot.useRef(!!b&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,b))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,b)));return mU(()=>{m&&(_.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),ot.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,b)}),w.current=!1))}),m}function F5(n,t,e,i){const{layoutId:s,layout:r,drag:o,dragConstraints:c,layoutScroll:h,layoutRoot:f,layoutCrossfade:m}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:ok(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||c&&Dc(c),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:h,layoutRoot:f})}function ok(n){if(n)return n.options.allowProjection!==!1?n.projection:ok(n.parent)}function Xv(n,{forwardMotionProps:t=!1}={},e,i){e&&d5(e);const s=lw(n)?N5:O5;function r(c,h){let f;const m={...ot.useContext(KP),...c,layoutId:U5(c)},{isStatic:y}=m,_=_5(c),b=s(c,y);if(!y&&NT){z5();const w=H5(m);f=w.MeasureLayout,_.visualElement=B5(n,b,m,i,w.ProjectionNode)}return C.jsxs(Up.Provider,{value:_,children:[f&&_.visualElement?C.jsx(f,{visualElement:_.visualElement,...m}):null,M5(n,c,L5(b,_.visualElement,h),b,y,t)]})}r.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=ot.forwardRef(r);return o[V5]=n,o}function U5({layoutId:n}){const t=ot.useContext(sP).id;return t&&n!==void 0?t+"-"+n:n}function z5(n,t){ot.useContext($P).strict}function H5(n){const{drag:t,layout:e}=qc;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function q5(n,t){if(typeof Proxy>"u")return Xv;const e=new Map,i=(r,o)=>Xv(r,o,n,t),s=(r,o)=>i(r,o);return new Proxy(s,{get:(r,o)=>o==="create"?i:(e.has(o)||e.set(o,Xv(o,void 0,n,t)),e.get(o))})}function lk({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function G5({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function W5(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function Qv(n){return n===void 0||n===1}function _0({scale:n,scaleX:t,scaleY:e}){return!Qv(n)||!Qv(t)||!Qv(e)}function Co(n){return _0(n)||ck(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function ck(n){return LI(n.x)||LI(n.y)}function LI(n){return n&&n!=="0%"}function op(n,t,e){const i=n-e,s=t*i;return e+s}function jI(n,t,e,i,s){return s!==void 0&&(n=op(n,s,i)),op(n,e,i)+t}function v0(n,t=0,e=1,i,s){n.min=jI(n.min,t,e,i,s),n.max=jI(n.max,t,e,i,s)}function uk(n,{x:t,y:e}){v0(n.x,t.translate,t.scale,t.originPoint),v0(n.y,e.translate,e.scale,e.originPoint)}const BI=.999999999999,FI=1.0000000000001;function Y5(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,o;for(let c=0;c<s;c++){r=e[c],o=r.projectionDelta;const{visualElement:h}=r.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Mc(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,uk(n,o)),i&&Co(r.latestValues)&&Mc(n,r.latestValues))}t.x<FI&&t.x>BI&&(t.x=1),t.y<FI&&t.y>BI&&(t.y=1)}function Cc(n,t){n.min=n.min+t,n.max=n.max+t}function UI(n,t,e,i,s=.5){const r=Ce(n.min,n.max,s);v0(n,t,e,r,i)}function Mc(n,t){UI(n.x,t.x,t.scaleX,t.scale,t.originX),UI(n.y,t.y,t.scaleY,t.scale,t.originY)}function hk(n,t){return lk(W5(n.getBoundingClientRect(),t))}function K5(n,t,e){const i=hk(n,e),{scroll:s}=t;return s&&(Cc(i.x,s.offset.x),Cc(i.y,s.offset.y)),i}const zI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pc=()=>({x:zI(),y:zI()}),HI=()=>({min:0,max:0}),qe=()=>({x:HI(),y:HI()}),b0={current:null},fk={current:!1};function $5(){if(fk.current=!0,!!NT)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>b0.current=n.matches;n.addEventListener("change",t),t()}else b0.current=!1}const X5=new WeakMap;function Q5(n,t,e){for(const i in t){const s=t[i],r=e[i];if(Ln(s))n.addValue(i,s);else if(Ln(r))n.addValue(i,Hc(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(i);n.addValue(i,Hc(o!==void 0?o:s,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const qI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Z5{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=JT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Jn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Re.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=o;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=Hp(e),this.isVariantNode=QP(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(e,{},this);for(const _ in y){const b=y[_];h[_]!==void 0&&Ln(b)&&b.set(h[_])}}mount(t){this.current=t,X5.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),fk.current||$5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:b0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ia(this.notifyUpdate),Ia(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=fu.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Re.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r&&r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in qc){const e=qc[t];if(!e)continue;const{isEnabled:i,Feature:s}=e;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<qI.length;i++){const s=qI[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=t[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Q5(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Hc(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(rP(i)||oP(i))?i=parseFloat(i):!h5(i)&&Ra.test(e)&&(i=zP(t,e)),this.setBaseTarget(t,Ln(i)?i.get():i)),Ln(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var r;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const o=cw(this.props,e,(r=this.presenceContext)==null?void 0:r.custom);o&&(i=o[t])}if(e&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ln(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new UT),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){nw.render(this.render)}}class dk extends Z5{constructor(){super(...arguments),this.KeyframeResolver=Z6}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ln(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function mk(n,{style:t,vars:e},i,s){const r=n.style;let o;for(o in t)r[o]=t[o];s==null||s.applyProjectionStyles(r,i);for(o in e)r.setProperty(o,e[o])}function J5(n){return window.getComputedStyle(n)}class tz extends dk{constructor(){super(...arguments),this.type="html",this.renderInstance=mk}readValueFromInstance(t,e){var i;if(fu.has(e))return(i=this.projection)!=null&&i.isProjecting?h0(e):y6(t,e);{const s=J5(t),r=(qT(e)?s.getPropertyValue(e):s[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return hk(t,e)}build(t,e,i){aw(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return uw(t,e,i)}}const gk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ez(n,t,e,i){mk(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(gk.has(s)?s:hw(s),t.attrs[s])}class nz extends dk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qe}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(fu.has(e)){const i=UP(e);return i&&i.default||0}return e=gk.has(e)?e:hw(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return sk(t,e,i)}build(t,e,i){tk(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,s){ez(t,e,i,s)}mount(t){this.isSVGTag=nk(t.tagName),super.mount(t)}}const iz=(n,t)=>lw(n)?new nz(t):new tz(t,{allowProjection:n!==ot.Fragment});function Ff(n,t,e){const i=n.getProps();return cw(i,t,e!==void 0?e:i.custom,n)}const T0=n=>Array.isArray(n);function sz(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Hc(e))}function rz(n){return T0(n)?n[n.length-1]||0:n}function az(n,t){const e=Ff(n,t);let{transitionEnd:i={},transition:s={},...r}=e||{};r={...r,...i};for(const o in r){const c=rz(r[o]);sz(n,o,c)}}function oz(n){return!!(Ln(n)&&n.add)}function w0(n,t){const e=n.getValue("willChange");if(oz(e))return e.add(t);if(!e&&vr.WillChange){const i=new vr.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function pk(n){return n.props[rk]}const lz=n=>n!==null;function cz(n,{repeat:t,repeatType:e="loop"},i){const s=n.filter(lz),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[r]}const uz={type:"spring",stiffness:500,damping:25,restSpeed:10},hz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),fz={type:"keyframes",duration:.8},dz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mz=(n,{keyframes:t})=>t.length>2?fz:fu.has(n)?n.startsWith("scale")?hz(t[1]):uz:dz;function gz({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:c,from:h,elapsed:f,...m}){return!!Object.keys(m).length}const fw=(n,t,e,i={},s,r)=>o=>{const c=tw(i,n)||{},h=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-As(h);const m={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-f,onUpdate:_=>{t.set(_),c.onUpdate&&c.onUpdate(_)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:t,element:r?void 0:s};gz(c)||Object.assign(m,mz(n,m)),m.duration&&(m.duration=As(m.duration)),m.repeatDelay&&(m.repeatDelay=As(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(p0(m),m.delay===0&&(y=!0)),(vr.instantAnimations||vr.skipAnimations)&&(y=!0,p0(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!r&&t.get()!==void 0){const _=cz(m.keyframes,c);if(_!==void 0){Re.update(()=>{m.onUpdate(_),m.onComplete()});return}}return c.isSync?new ZT(m):new F6(m)};function pz({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function yk(n,t,{delay:e=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...c}=t;i&&(r=i);const h=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const m in c){const y=n.getValue(m,n.latestValues[m]??null),_=c[m];if(_===void 0||f&&pz(f,m))continue;const b={delay:e,...tw(r||{},m)},w=y.get();if(w!==void 0&&!y.isAnimating&&!Array.isArray(_)&&_===w&&!b.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const M=pk(n);if(M){const N=window.MotionHandoffAnimation(M,m,Re);N!==null&&(b.startTime=N,x=!0)}}w0(n,m),y.start(fw(m,y,_,n.shouldReduceMotion&&jP.has(m)?{type:!1}:b,n,x));const A=y.animation;A&&h.push(A)}return o&&Promise.all(h).then(()=>{Re.update(()=>{o&&az(n,o)})}),h}function E0(n,t,e={}){var h;const i=Ff(n,t,e.type==="exit"?(h=n.presenceContext)==null?void 0:h.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(s=e.transitionOverride);const r=i?()=>Promise.all(yk(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:_}=s;return yz(n,t,f,m,y,_,e)}:()=>Promise.resolve(),{when:c}=s;if(c){const[f,m]=c==="beforeChildren"?[r,o]:[o,r];return f().then(()=>m())}else return Promise.all([r(),o(e.delay)])}function yz(n,t,e=0,i=0,s=0,r=1,o){const c=[],h=n.variantChildren.size,f=(h-1)*s,m=typeof i=="function",y=m?_=>i(_,h):r===1?(_=0)=>_*s:(_=0)=>f-_*s;return Array.from(n.variantChildren).sort(_z).forEach((_,b)=>{_.notify("AnimationStart",t),c.push(E0(_,t,{...o,delay:e+(m?0:i)+y(b)}).then(()=>_.notify("AnimationComplete",t)))}),Promise.all(c)}function _z(n,t){return n.sortNodePosition(t)}function vz(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>E0(n,r,e));i=Promise.all(s)}else if(typeof t=="string")i=E0(n,t,e);else{const s=typeof t=="function"?Ff(n,t,e.custom):t;i=Promise.all(yk(n,s,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function _k(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const bz=rw.length;function vk(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?vk(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<bz;e++){const i=rw[e],s=n.props[i];(jf(s)||s===!1)&&(t[i]=s)}return t}const Tz=[...sw].reverse(),wz=sw.length;function Ez(n){return t=>Promise.all(t.map(({animation:e,options:i})=>vz(n,e,i)))}function Sz(n){let t=Ez(n),e=GI(),i=!0;const s=h=>(f,m)=>{var _;const y=Ff(n,m,h==="exit"?(_=n.presenceContext)==null?void 0:_.custom:void 0);if(y){const{transition:b,transitionEnd:w,...x}=y;f={...f,...x,...w}}return f};function r(h){t=h(n)}function o(h){const{props:f}=n,m=vk(n.parent)||{},y=[],_=new Set;let b={},w=1/0;for(let A=0;A<wz;A++){const M=Tz[A],N=e[M],L=f[M]!==void 0?f[M]:m[M],H=jf(L),F=M===h?N.isActive:null;F===!1&&(w=A);let K=L===m[M]&&L!==f[M]&&H;if(K&&i&&n.manuallyAnimateOnMount&&(K=!1),N.protectedKeys={...b},!N.isActive&&F===null||!L&&!N.prevProp||zp(L)||typeof L=="boolean")continue;const O=xz(N.prevProp,L);let I=O||M===h&&N.isActive&&!K&&H||A>w&&H,R=!1;const V=Array.isArray(L)?L:[L];let j=V.reduce(s(M),{});F===!1&&(j={});const{prevResolvedValues:U={}}=N,B={...U,...j},At=at=>{I=!0,_.has(at)&&(R=!0,_.delete(at)),N.needsAnimating[at]=!0;const yt=n.getValue(at);yt&&(yt.liveStyle=!1)};for(const at in B){const yt=j[at],tt=U[at];if(b.hasOwnProperty(at))continue;let P=!1;T0(yt)&&T0(tt)?P=!_k(yt,tt):P=yt!==tt,P?yt!=null?At(at):_.add(at):yt!==void 0&&_.has(at)?At(at):N.protectedKeys[at]=!0}N.prevProp=L,N.prevResolvedValues=j,N.isActive&&(b={...b,...j}),i&&n.blockInitialAnimation&&(I=!1),I&&(!(K&&O)||R)&&y.push(...V.map(at=>({animation:at,options:{type:M}})))}if(_.size){const A={};if(typeof f.initial!="boolean"){const M=Ff(n,Array.isArray(f.initial)?f.initial[0]:f.initial);M&&M.transition&&(A.transition=M.transition)}_.forEach(M=>{const N=n.getBaseTarget(M),L=n.getValue(M);L&&(L.liveStyle=!0),A[M]=N??null}),y.push({animation:A})}let x=!!y.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?t(y):Promise.resolve()}function c(h,f){var y;if(e[h].isActive===f)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(_=>{var b;return(b=_.animationState)==null?void 0:b.setActive(h,f)}),e[h].isActive=f;const m=o(h);for(const _ in e)e[_].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:r,getState:()=>e,reset:()=>{e=GI(),i=!0}}}function xz(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!_k(t,n):!1}function Ao(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GI(){return{animate:Ao(!0),whileInView:Ao(),whileHover:Ao(),whileTap:Ao(),whileDrag:Ao(),whileFocus:Ao(),exit:Ao()}}class Na{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Az extends Na{constructor(t){super(t),t.animationState||(t.animationState=Sz(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();zp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Iz=0;class Rz extends Na{constructor(){super(...arguments),this.id=Iz++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Dz={animation:{Feature:Az},exit:{Feature:Rz}};function Uf(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function cd(n){return{point:{x:n.pageX,y:n.pageY}}}const Cz=n=>t=>iw(t)&&n(t,cd(t));function hf(n,t,e,i){return Uf(n,t,Cz(e),i)}const bk=1e-4,Mz=1-bk,Pz=1+bk,Tk=.01,kz=0-Tk,Oz=0+Tk;function qn(n){return n.max-n.min}function Nz(n,t,e){return Math.abs(n-t)<=e}function WI(n,t,e,i=.5){n.origin=i,n.originPoint=Ce(t.min,t.max,n.origin),n.scale=qn(e)/qn(t),n.translate=Ce(e.min,e.max,n.origin)-n.originPoint,(n.scale>=Mz&&n.scale<=Pz||isNaN(n.scale))&&(n.scale=1),(n.translate>=kz&&n.translate<=Oz||isNaN(n.translate))&&(n.translate=0)}function ff(n,t,e,i){WI(n.x,t.x,e.x,i?i.originX:void 0),WI(n.y,t.y,e.y,i?i.originY:void 0)}function YI(n,t,e){n.min=e.min+t.min,n.max=n.min+qn(t)}function Vz(n,t,e){YI(n.x,t.x,e.x),YI(n.y,t.y,e.y)}function KI(n,t,e){n.min=t.min-e.min,n.max=n.min+qn(t)}function df(n,t,e){KI(n.x,t.x,e.x),KI(n.y,t.y,e.y)}function ki(n){return[n("x"),n("y")]}const wk=({current:n})=>n?n.ownerDocument.defaultView:null,$I=(n,t)=>Math.abs(n-t);function Lz(n,t){const e=$I(n.x,t.x),i=$I(n.y,t.y);return Math.sqrt(e**2+i**2)}class Ek{constructor(t,e,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Jv(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=Lz(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:x}=_,{timestamp:A}=In;this.history.push({...x,timestamp:A});const{onStart:M,onMove:N}=this.handlers;b||(M&&M(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,_)},this.handlePointerMove=(_,b)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Zv(b,this.transformPagePoint),Re.update(this.updatePoint,!0)},this.handlePointerUp=(_,b)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Jv(_.type==="pointercancel"?this.lastMoveEventInfo:Zv(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(_,M),x&&x(_,M)},!iw(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=s||window;const c=cd(t),h=Zv(c,this.transformPagePoint),{point:f}=h,{timestamp:m}=In;this.history=[{...f,timestamp:m}];const{onSessionStart:y}=e;y&&y(t,Jv(h,this.history)),this.removeListeners=ad(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ia(this.updatePoint)}}function Zv(n,t){return t?{point:t(n.point)}:n}function XI(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Jv({point:n},t){return{point:n,delta:XI(n,Sk(t)),offset:XI(n,jz(t)),velocity:Bz(t,.1)}}function jz(n){return n[0]}function Sk(n){return n[n.length-1]}function Bz(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=Sk(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>As(t)));)e--;if(!i)return{x:0,y:0};const r=Is(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fz(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Ce(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Ce(e,n,i.max):Math.min(n,e)),n}function QI(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function Uz(n,{top:t,left:e,bottom:i,right:s}){return{x:QI(n.x,e,s),y:QI(n.y,t,i)}}function ZI(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function zz(n,t){return{x:ZI(n.x,t.x),y:ZI(n.y,t.y)}}function Hz(n,t){let e=.5;const i=qn(n),s=qn(t);return s>i?e=Nf(t.min,t.max-i,n.min):i>s&&(e=Nf(n.min,n.max-s,t.min)),_r(0,1,e)}function qz(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const S0=.35;function Gz(n=S0){return n===!1?n=0:n===!0&&(n=S0),{x:JI(n,"left","right"),y:JI(n,"top","bottom")}}function JI(n,t,e){return{min:tR(n,t),max:tR(n,e)}}function tR(n,t){return typeof n=="number"?n:n[t]||0}const Wz=new WeakMap;class Yz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(cd(y).point)},o=(y,_)=>{const{drag:b,dragPropagation:w,onDragStart:x}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=i5(b),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ki(M=>{let N=this.getAxisMotionValue(M).get()||0;if(Rs.test(N)){const{projection:L}=this.visualElement;if(L&&L.layout){const H=L.layout.layoutBox[M];H&&(N=qn(H)*(parseFloat(N)/100))}}this.originPoint[M]=N}),x&&Re.postRender(()=>x(y,_)),w0(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},c=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:x,onDrag:A}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:M}=_;if(w&&this.currentDirection===null){this.currentDirection=Kz(M),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",_.point,M),this.updateAxis("y",_.point,M),this.visualElement.render(),A&&A(y,_)},h=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_,this.stop(y,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>ki(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)==null?void 0:_.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new Ek(t,{onSessionStart:r,onStart:o,onMove:c,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:wk(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,s=e||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Re.postRender(()=>c(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!hg(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=Fz(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&Dc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Uz(i.layoutBox,t):this.constraints=!1,this.elastic=Gz(e),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ki(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=qz(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Dc(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=K5(i,s.root,this.visualElement.getTransformPagePoint());let o=zz(s.layout.layoutBox,r);if(e){const c=e(G5(o));this.hasMutatedConstraints=!!c,c&&(o=lk(c))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},f=ki(m=>{if(!hg(m,e,this.currentDirection))return;let y=h&&h[m]||{};o&&(y={min:0,max:0});const _=s?200:1e6,b=s?40:1e7,w={type:"inertia",velocity:i?t[m]:0,bounceStiffness:_,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...r,...y};return this.startAxisValueAnimation(m,w)});return Promise.all(f).then(c)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return w0(this.visualElement,t),i.start(fw(t,i,0,e,this.visualElement,!1))}stopAnimation(){ki(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ki(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ki(e=>{const{drag:i}=this.getProps();if(!hg(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:o,max:c}=s.layout.layoutBox[e];r.set(t[e]-Ce(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Dc(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ki(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const h=c.get();s[o]=Hz({min:h,max:h},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ki(o=>{if(!hg(o,t,null))return;const c=this.getAxisMotionValue(o),{min:h,max:f}=this.constraints[o];c.set(Ce(h,f,s[o]))})}addListeners(){if(!this.visualElement.current)return;Wz.set(this.visualElement,this);const t=this.visualElement.current,e=hf(t,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Dc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Re.read(i);const o=Uf(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(ki(m=>{const y=this.getAxisMotionValue(m);y&&(this.originPoint[m]+=h[m].translate,y.set(y.get()+h[m].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=S0,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:c}}}function hg(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function Kz(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class $z extends Na{constructor(t){super(t),this.removeGroupControls=Vi,this.removeListeners=Vi,this.controls=new Yz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vi}unmount(){this.removeGroupControls(),this.removeListeners()}}const eR=n=>(t,e)=>{n&&Re.postRender(()=>n(t,e))};class Xz extends Na{constructor(){super(...arguments),this.removePointerDownListener=Vi}onPointerDown(t){this.session=new Ek(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:eR(t),onStart:eR(e),onMove:i,onEnd:(r,o)=>{delete this.session,s&&Re.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nR(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Nh={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Lt.test(n))n=parseFloat(n);else return n;const e=nR(n,t.target.x),i=nR(n,t.target.y);return`${e}% ${i}%`}},Qz={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=Ra.parse(n);if(s.length>5)return i;const r=Ra.createTransformer(n),o=typeof s[0]!="number"?1:0,c=e.x.scale*t.x,h=e.y.scale*t.y;s[0+o]/=c,s[1+o]/=h;const f=Ce(c,h,.5);return typeof s[2+o]=="number"&&(s[2+o]/=f),typeof s[3+o]=="number"&&(s[3+o]/=f),r(s)}};let iR=!1;class Zz extends ot.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;v5(Jz),r&&(e.group&&e.group.add(r),i&&i.register&&s&&i.register(r),iR&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Mg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:r}=this.props,{projection:o}=i;return o&&(o.isPresent=r,iR=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||Re.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),nw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function xk(n){const[t,e]=f5(),i=ot.useContext(sP);return C.jsx(Zz,{...n,layoutGroup:i,switchLayoutGroup:ot.useContext(ak),isPresent:t,safeToRemove:e})}const Jz={borderRadius:{...Nh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nh,borderTopRightRadius:Nh,borderBottomLeftRadius:Nh,borderBottomRightRadius:Nh,boxShadow:Qz};function t9(n,t,e){const i=Ln(n)?n:Hc(n);return i.start(fw("",i,t,e)),i.animation}const e9=(n,t)=>n.depth-t.depth;class n9{constructor(){this.children=[],this.isDirty=!1}add(t){LT(this.children,t),this.isDirty=!0}remove(t){jT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(e9),this.isDirty=!1,this.children.forEach(t)}}function i9(n,t){const e=Jn.now(),i=({timestamp:s})=>{const r=s-e;r>=t&&(Ia(i),n(r-t))};return Re.setup(i,!0),()=>Ia(i)}const Ak=["TopLeft","TopRight","BottomLeft","BottomRight"],s9=Ak.length,sR=n=>typeof n=="string"?parseFloat(n):n,rR=n=>typeof n=="number"||Lt.test(n);function r9(n,t,e,i,s,r){s?(n.opacity=Ce(0,e.opacity??1,a9(i)),n.opacityExit=Ce(t.opacity??1,0,o9(i))):r&&(n.opacity=Ce(t.opacity??1,e.opacity??1,i));for(let o=0;o<s9;o++){const c=`border${Ak[o]}Radius`;let h=aR(t,c),f=aR(e,c);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||rR(h)===rR(f)?(n[c]=Math.max(Ce(sR(h),sR(f),i),0),(Rs.test(f)||Rs.test(h))&&(n[c]+="%")):n[c]=f}(t.rotate||e.rotate)&&(n.rotate=Ce(t.rotate||0,e.rotate||0,i))}function aR(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const a9=Ik(0,.5,gP),o9=Ik(.5,.95,Vi);function Ik(n,t,e){return i=>i<n?0:i>t?1:e(Nf(n,t,i))}function oR(n,t){n.min=t.min,n.max=t.max}function Pi(n,t){oR(n.x,t.x),oR(n.y,t.y)}function lR(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function cR(n,t,e,i,s){return n-=t,n=op(n,1/e,i),s!==void 0&&(n=op(n,1/s,i)),n}function l9(n,t=0,e=1,i=.5,s,r=n,o=n){if(Rs.test(t)&&(t=parseFloat(t),t=Ce(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=Ce(r.min,r.max,i);n===r&&(c-=t),n.min=cR(n.min,t,e,c,s),n.max=cR(n.max,t,e,c,s)}function uR(n,t,[e,i,s],r,o){l9(n,t[e],t[i],t[s],t.scale,r,o)}const c9=["x","scaleX","originX"],u9=["y","scaleY","originY"];function hR(n,t,e,i){uR(n.x,t,c9,e?e.x:void 0,i?i.x:void 0),uR(n.y,t,u9,e?e.y:void 0,i?i.y:void 0)}function fR(n){return n.translate===0&&n.scale===1}function Rk(n){return fR(n.x)&&fR(n.y)}function dR(n,t){return n.min===t.min&&n.max===t.max}function h9(n,t){return dR(n.x,t.x)&&dR(n.y,t.y)}function mR(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function Dk(n,t){return mR(n.x,t.x)&&mR(n.y,t.y)}function gR(n){return qn(n.x)/qn(n.y)}function pR(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class f9{constructor(){this.members=[]}add(t){LT(this.members,t),t.scheduleRender()}remove(t){if(jT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function d9(n,t,e){let i="";const s=n.x.translate/t.x,r=n.y.translate/t.y,o=(e==null?void 0:e.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:m,rotateX:y,rotateY:_,skewX:b,skewY:w}=e;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),y&&(i+=`rotateX(${y}deg) `),_&&(i+=`rotateY(${_}deg) `),b&&(i+=`skewX(${b}deg) `),w&&(i+=`skewY(${w}deg) `)}const c=n.x.scale*t.x,h=n.y.scale*t.y;return(c!==1||h!==1)&&(i+=`scale(${c}, ${h})`),i||"none"}const tb=["","X","Y","Z"],m9=1e3;let g9=0;function eb(n,t,e,i){const{latestValues:s}=t;s[n]&&(e[n]=s[n],t.setStaticValue(n,0),i&&(i[n]=0))}function Ck(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=pk(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Re,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&Ck(i)}function Mk({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},c=t==null?void 0:t()){this.id=g9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_9),this.nodes.forEach(w9),this.nodes.forEach(E9),this.nodes.forEach(v9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new n9)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new UT),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const h=this.eventHandlers.get(o);h&&h.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YP(o)&&!c5(o),this.instance=o;const{layoutId:c,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),n){let m,y=0;const _=()=>this.root.updateBlockedByResize=!1;Re.read(()=>{y=window.innerWidth}),n(o,()=>{const b=window.innerWidth;b!==y&&(y=b,this.root.updateBlockedByResize=!0,m&&m(),m=i9(_,250),Mg.hasAnimatedSinceResize&&(Mg.hasAnimatedSinceResize=!1,this.nodes.forEach(vR)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:_,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||R9,{onLayoutAnimationStart:x,onLayoutAnimationComplete:A}=f.getProps(),M=!this.targetLayout||!Dk(this.targetLayout,b),N=!y&&_;if(this.options.layoutRoot||this.resumeFrom||N||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...tw(w,"layout"),onPlay:x,onComplete:A};(f.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(m,N)}else y||vR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ia(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S9),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ck(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_R);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T9),this.nodes.forEach(p9),this.nodes.forEach(y9)):this.nodes.forEach(_R),this.clearAllSnapshots();const c=Jn.now();In.delta=_r(0,1e3/60,c-In.timestamp),In.timestamp=c,In.isProcessing=!0,qv.update.process(In),qv.preRender.process(In),qv.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(b9),this.sharedNodes.forEach(x9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qn(this.snapshot.measuredBox.x)&&!qn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Rk(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;o&&this.instance&&(c||Co(this.latestValues)||m)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return o&&(h=this.removeTransform(h)),D9(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:o}=this.options;if(!o)return qe();const c=o.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(C9))){const{scroll:m}=this.root;m&&(Cc(c.x,m.offset.x),Cc(c.y,m.offset.y))}return c}removeElementScroll(o){var h;const c=qe();if(Pi(c,o),(h=this.scroll)!=null&&h.wasRoot)return c;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:y,options:_}=m;m!==this.root&&y&&_.layoutScroll&&(y.wasRoot&&Pi(c,o),Cc(c.x,y.offset.x),Cc(c.y,y.offset.y))}return c}applyTransform(o,c=!1){const h=qe();Pi(h,o);for(let f=0;f<this.path.length;f++){const m=this.path[f];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Mc(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Co(m.latestValues)&&Mc(h,m.latestValues)}return Co(this.latestValues)&&Mc(h,this.latestValues),h}removeTransform(o){const c=qe();Pi(c,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Co(f.latestValues))continue;_0(f.latestValues)&&f.updateSnapshot();const m=qe(),y=f.measurePageBox();Pi(m,y),hR(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Co(this.latestValues)&&hR(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var _;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!(!this.layout||!(m||y))){if(this.resolvedRelativeTargetAt=In.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),df(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qe(),this.targetWithTransforms=qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Vz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pi(this.target,this.layout.layoutBox),uk(this.target,this.targetDelta)):Pi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),df(this.relativeTargetOrigin,this.target,b.target),Pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_0(this.parent.latestValues)||ck(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let h=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===In.timestamp&&(h=!1),h)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Pi(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,_=this.treeScale.y;Y5(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qe());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lR(this.prevProjectionDelta.x,this.projectionDelta.x),lR(this.prevProjectionDelta.y,this.projectionDelta.y)),ff(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==_||!pR(this.projectionDelta.x,this.prevProjectionDelta.x)||!pR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pc(),this.projectionDelta=Pc(),this.projectionDeltaWithTransform=Pc()}setAnimationOrigin(o,c=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},y=Pc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const _=qe(),b=h?h.source:void 0,w=this.layout?this.layout.source:void 0,x=b!==w,A=this.getStack(),M=!A||A.members.length<=1,N=!!(x&&!M&&this.options.crossfade===!0&&!this.path.some(I9));this.animationProgress=0;let L;this.mixTargetDelta=H=>{const F=H/1e3;bR(y.x,o.x,F),bR(y.y,o.y,F),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(df(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),A9(this.relativeTarget,this.relativeTargetOrigin,_,F),L&&h9(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=qe()),Pi(L,this.relativeTarget)),x&&(this.animationValues=m,r9(m,f,this.latestValues,F,N,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,h,f;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Ia(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Re.update(()=>{Mg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Hc(0)),this.currentAnimation=t9(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),o.onUpdate&&o.onUpdate(m)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(m9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:h,layout:f,latestValues:m}=o;if(!(!c||!h||!f)){if(this!==o&&this.layout&&f&&Pk(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||qe();const y=qn(this.layout.layoutBox.x);h.x.min=o.target.x.min,h.x.max=h.x.min+y;const _=qn(this.layout.layoutBox.y);h.y.min=o.target.y.min,h.y.max=h.y.min+_}Pi(c,h),Mc(c,m),ff(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new f9),this.sharedNodes.get(o).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:h}=o;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const f={};h.z&&eb("z",o,f,this.animationValues);for(let m=0;m<tb.length;m++)eb(`rotate${tb[m]}`,o,f,this.animationValues),eb(`skew${tb[m]}`,o,f,this.animationValues);o.render();for(const m in f)o.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Cg(c==null?void 0:c.pointerEvents)||"",o.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Cg(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Co(this.latestValues)&&(o.transform=h?h({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=d9(this.projectionDeltaWithTransform,this.treeScale,m);h&&(y=h(m,y)),o.transform=y;const{x:_,y:b}=this.projectionDelta;o.transformOrigin=`${_.origin*100}% ${b.origin*100}% 0`,f.animationValues?o.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in Bf){if(m[w]===void 0)continue;const{correct:x,applyTo:A,isCSSVariable:M}=Bf[w],N=y==="none"?m[w]:x(m[w],f);if(A){const L=A.length;for(let H=0;H<L;H++)o[A[H]]=N}else M?this.options.visualElement.renderState.vars[w]=N:o[w]=N}this.options.layoutId&&(o.pointerEvents=f===this?Cg(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(yR),this.root.sharedNodes.clear()}}}function p9(n){n.updateLayout()}function y9(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?ki(y=>{const _=o?t.measuredBox[y]:t.layoutBox[y],b=qn(_);_.min=i[y].min,_.max=_.min+b}):Pk(r,t.layoutBox,i)&&ki(y=>{const _=o?t.measuredBox[y]:t.layoutBox[y],b=qn(i[y]);_.max=_.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+b)});const c=Pc();ff(c,i,t.layoutBox);const h=Pc();o?ff(h,n.applyTransform(s,!0),t.measuredBox):ff(h,i,t.layoutBox);const f=!Rk(c);let m=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:_,layout:b}=y;if(_&&b){const w=qe();df(w,t.layoutBox,_.layoutBox);const x=qe();df(x,i,b.layoutBox),Dk(w,x)||(m=!0),y.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=w,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:h,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function _9(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function v9(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function b9(n){n.clearSnapshot()}function yR(n){n.clearMeasurements()}function _R(n){n.isLayoutDirty=!1}function T9(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function vR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function w9(n){n.resolveTargetDelta()}function E9(n){n.calcProjection()}function S9(n){n.resetSkewAndRotation()}function x9(n){n.removeLeadSnapshot()}function bR(n,t,e){n.translate=Ce(t.translate,0,e),n.scale=Ce(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function TR(n,t,e,i){n.min=Ce(t.min,e.min,i),n.max=Ce(t.max,e.max,i)}function A9(n,t,e,i){TR(n.x,t.x,e.x,i),TR(n.y,t.y,e.y,i)}function I9(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const R9={duration:.45,ease:[.4,0,.1,1]},wR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),ER=wR("applewebkit/")&&!wR("chrome/")?Math.round:Vi;function SR(n){n.min=ER(n.min),n.max=ER(n.max)}function D9(n){SR(n.x),SR(n.y)}function Pk(n,t,e){return n==="position"||n==="preserve-aspect"&&!Nz(gR(t),gR(e),.2)}function C9(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const M9=Mk({attachResizeListener:(n,t)=>Uf(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nb={current:void 0},kk=Mk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!nb.current){const n=new M9({});n.mount(window),n.setOptions({layoutScroll:!0}),nb.current=n}return nb.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),P9={pan:{Feature:Xz},drag:{Feature:$z,ProjectionNode:kk,MeasureLayout:xk}};function xR(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=i[s];r&&Re.postRender(()=>r(t,cd(t)))}class k9 extends Na{mount(){const{current:t}=this.node;t&&(this.unmount=s5(t,(e,i)=>(xR(this.node,i,"Start"),s=>xR(this.node,s,"End"))))}unmount(){}}class O9 extends Na{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ad(Uf(this.node.current,"focus",()=>this.onFocus()),Uf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AR(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=i[s];r&&Re.postRender(()=>r(t,cd(t)))}class N9 extends Na{mount(){const{current:t}=this.node;t&&(this.unmount=l5(t,(e,i)=>(AR(this.node,i,"Start"),(s,{success:r})=>AR(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const x0=new WeakMap,ib=new WeakMap,V9=n=>{const t=x0.get(n.target);t&&t(n)},L9=n=>{n.forEach(V9)};function j9({root:n,...t}){const e=n||document;ib.has(e)||ib.set(e,{});const i=ib.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(L9,{root:n,...t})),i[s]}function B9(n,t,e){const i=j9(t);return x0.set(n,e),i.observe(n),()=>{x0.delete(n),i.unobserve(n)}}const F9={some:0,all:1};class U9 extends Na{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:F9[s]},c=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,r&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),_=f?m:y;_&&_(h)};return B9(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(z9(t,e))&&this.startObserver()}unmount(){}}function z9({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const H9={inView:{Feature:U9},tap:{Feature:N9},focus:{Feature:O9},hover:{Feature:k9}},q9={layout:{ProjectionNode:kk,MeasureLayout:xk}},G9={...Dz,...H9,...P9,...q9},W9=q5(G9,iz);function Ok({name:n,nutrients:t,onEdit:e,onDelete:i,unit:s="g",disableSwipe:r}){const[o,c]=gT.useState(null),h=()=>{let y=0;return t.forEach(_=>{const b=parseFloat(_.total)||0;(_.type==="Carbohydrate"||_.type==="Protein")&&(y+=b*4),_.type==="Fat"&&(y+=b*9)}),Math.round(y)},f=y=>y.charAt(0).toUpperCase()+y.slice(1),m=fU({onSwipedLeft:()=>{r||(c("left"),setTimeout(()=>{i&&i(),c(null)},300))},onSwipedRight:()=>{r||(c("right"),setTimeout(()=>{e&&e(),c(null)},300))},preventScrollOnSwipe:!0,trackMouse:!0});return C.jsxs("div",{...m,className:"position-relative mb-2",children:[o==="left"&&C.jsx("div",{className:"position-absolute top-50 start-100 translate-middle-y text-danger fw-bold",style:{zIndex:1},children:""}),o==="right"&&C.jsx("div",{className:"position-absolute top-50 start-0 translate-middle-y text-warning fw-bold",style:{zIndex:1},children:""}),C.jsxs(W9.div,{initial:{x:0},animate:{x:o==="left"?-100:o==="right"?100:0},transition:{duration:.3},className:"meal-card text-white p-3 rounded shadow-sm",style:{backgroundColor:"#00bfff17"},children:[C.jsx("p",{className:"MealCardText mb-1 fw-bold",children:n}),C.jsxs("p",{className:"MealCardText mb-1",children:["Calories: ",h()," kcal"]}),t.map((y,_)=>C.jsxs("p",{className:"MealCardText mb-1",children:[f(y.type),": ",y.total," ",s]},_))]})]})}const Y9=()=>{};var IR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},K9=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[e++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[e++],o=n[e++],c=n[e++],h=((s&7)<<18|(r&63)<<12|(o&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(h>>10)),t[i++]=String.fromCharCode(56320+(h&1023))}else{const r=n[e++],o=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Vk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,c=o?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,m=r>>2,y=(r&3)<<4|c>>4;let _=(c&15)<<2|f>>6,b=f&63;h||(b=64,o||(_=64)),i.push(e[m],e[y],e[_],e[b])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Nk(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):K9(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=e[n.charAt(s++)],c=s<n.length?e[n.charAt(s)]:0;++s;const f=s<n.length?e[n.charAt(s)]:64;++s;const y=s<n.length?e[n.charAt(s)]:64;if(++s,r==null||c==null||f==null||y==null)throw new $9;const _=r<<2|c>>4;if(i.push(_),f!==64){const b=c<<4&240|f>>2;if(i.push(b),y!==64){const w=f<<6&192|y;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X9=function(n){const t=Nk(n);return Vk.encodeByteArray(t,!0)},Lk=function(n){return X9(n).replace(/\./g,"")},jk=function(n){try{return Vk.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=()=>Bk().__FIREBASE_DEFAULTS__,Z9=()=>{if(typeof process>"u"||typeof IR>"u")return;const n=IR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},J9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&jk(n[1]);return t&&JSON.parse(t)},qp=()=>{try{return Y9()||Q9()||Z9()||J9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tH=n=>{var t,e;return(e=(t=qp())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},Fk=()=>{var n;return(n=qp())==null?void 0:n.config},Uk=n=>{var t;return(t=qp())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zk(n){return(await fetch(n,{credentials:"include"})).ok}const mf={};function nH(){const n={prod:[],emulator:[]};for(const t of Object.keys(mf))mf[t]?n.emulator.push(t):n.prod.push(t);return n}function iH(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let RR=!1;function sH(n,t){if(typeof window>"u"||typeof document>"u"||!du(window.location.host)||mf[n]===t||mf[n]||RR)return;mf[n]=t;function e(_){return`__firebase__banner__${_}`}const i="__firebase__banner",r=nH().prod.length>0;function o(){const _=document.getElementById(i);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{RR=!0,o()},_}function m(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=iH(i),b=e("text"),w=document.getElementById(b)||document.createElement("span"),x=e("learnmore"),A=document.getElementById(x)||document.createElement("a"),M=e("preprendIcon"),N=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const L=_.element;c(L),m(A,x);const H=f();h(N,M),L.append(N,w,A,H),document.body.appendChild(L)}r?(w.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function Hk(){var t;const n=(t=qp())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lH(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Gk(){return!Hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wk(){return!Hk()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function dw(){try{return typeof indexedDB=="object"}catch{return!1}}function Yk(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(e){t(e)}})}function cH(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH="FirebaseError";class Ji extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=uH,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,r=this.errors[t],o=r?hH(r,i):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ji(s,c,i)}}function hH(n,t){return n.replace(fH,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const fH=/\{\$([^}]+)}/g;function dH(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Da(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const r=n[s],o=t[s];if(DR(r)&&DR(o)){if(!Da(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function DR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Qh(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function Zh(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function mH(n,t){const e=new gH(n,t);return e.subscribe.bind(e)}class gH{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");pH(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=sb),s.error===void 0&&(s.error=sb),s.complete===void 0&&(s.complete=sb);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pH(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function sb(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH=1e3,_H=2,vH=4*60*60*1e3,bH=.5;function CR(n,t=yH,e=_H){const i=t*Math.pow(e,n),s=Math.round(bH*i*(Math.random()-.5)*2);return Math.min(vH,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n){return n&&n._delegate?n._delegate:n}class Qi{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new eH;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(EH(t))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Mo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Mo){return this.instances.has(t)}getOptions(t=Mo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[r,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);i===c&&o.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wH(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Mo){return this.component?this.component.multipleInstances?t:Mo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wH(n){return n===Mo?void 0:n}function EH(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new TH(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Kt||(Kt={}));const xH={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},AH=Kt.INFO,IH={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},RH=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=IH[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Gp{constructor(t){this.name=t,this._logLevel=AH,this._logHandler=RH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xH[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...t),this._logHandler(this,Kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...t),this._logHandler(this,Kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...t),this._logHandler(this,Kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...t),this._logHandler(this,Kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...t),this._logHandler(this,Kt.ERROR,...t)}}const DH=(n,t)=>t.some(e=>n instanceof e);let MR,PR;function CH(){return MR||(MR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MH(){return PR||(PR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kk=new WeakMap,A0=new WeakMap,$k=new WeakMap,rb=new WeakMap,mw=new WeakMap;function PH(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{e(ba(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Kk.set(e,n)}).catch(()=>{}),mw.set(t,n),t}function kH(n){if(A0.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{e(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});A0.set(n,t)}let I0={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return A0.get(n);if(t==="objectStoreNames")return n.objectStoreNames||$k.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ba(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function OH(n){I0=n(I0)}function NH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(ab(this),t,...e);return $k.set(i,t.sort?t.sort():[t]),ba(i)}:MH().includes(n)?function(...t){return n.apply(ab(this),t),ba(Kk.get(this))}:function(...t){return ba(n.apply(ab(this),t))}}function VH(n){return typeof n=="function"?NH(n):(n instanceof IDBTransaction&&kH(n),DH(n,CH())?new Proxy(n,I0):n)}function ba(n){if(n instanceof IDBRequest)return PH(n);if(rb.has(n))return rb.get(n);const t=VH(n);return t!==n&&(rb.set(n,t),mw.set(t,n)),t}const ab=n=>mw.get(n);function LH(n,t,{blocked:e,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,t),c=ba(o);return i&&o.addEventListener("upgradeneeded",h=>{i(ba(o.result),h.oldVersion,h.newVersion,ba(o.transaction),h)}),e&&o.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),c.then(h=>{r&&h.addEventListener("close",()=>r()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const jH=["get","getKey","getAll","getAllKeys","count"],BH=["put","add","delete","clear"],ob=new Map;function kR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(ob.get(t))return ob.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=BH.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||jH.includes(e)))return;const r=async function(o,...c){const h=this.transaction(o,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[e](...c),s&&h.done]))[0]};return ob.set(t,r),r}OH(n=>({...n,get:(t,e,i)=>kR(t,e)||n.get(t,e,i),has:(t,e)=>!!kR(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(UH(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function UH(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const R0="@firebase/app",OR="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Gp("@firebase/app"),zH="@firebase/app-compat",HH="@firebase/analytics-compat",qH="@firebase/analytics",GH="@firebase/app-check-compat",WH="@firebase/app-check",YH="@firebase/auth",KH="@firebase/auth-compat",$H="@firebase/database",XH="@firebase/data-connect",QH="@firebase/database-compat",ZH="@firebase/functions",JH="@firebase/functions-compat",tq="@firebase/installations",eq="@firebase/installations-compat",nq="@firebase/messaging",iq="@firebase/messaging-compat",sq="@firebase/performance",rq="@firebase/performance-compat",aq="@firebase/remote-config",oq="@firebase/remote-config-compat",lq="@firebase/storage",cq="@firebase/storage-compat",uq="@firebase/firestore",hq="@firebase/ai",fq="@firebase/firestore-compat",dq="firebase",mq="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="[DEFAULT]",gq={[R0]:"fire-core",[zH]:"fire-core-compat",[qH]:"fire-analytics",[HH]:"fire-analytics-compat",[WH]:"fire-app-check",[GH]:"fire-app-check-compat",[YH]:"fire-auth",[KH]:"fire-auth-compat",[$H]:"fire-rtdb",[XH]:"fire-data-connect",[QH]:"fire-rtdb-compat",[ZH]:"fire-fn",[JH]:"fire-fn-compat",[tq]:"fire-iid",[eq]:"fire-iid-compat",[nq]:"fire-fcm",[iq]:"fire-fcm-compat",[sq]:"fire-perf",[rq]:"fire-perf-compat",[aq]:"fire-rc",[oq]:"fire-rc-compat",[lq]:"fire-gcs",[cq]:"fire-gcs-compat",[uq]:"fire-fst",[fq]:"fire-fst-compat",[hq]:"fire-vertex","fire-js":"fire-js",[dq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=new Map,pq=new Map,C0=new Map;function NR(n,t){try{n.container.addComponent(t)}catch(e){br.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Os(n){const t=n.name;if(C0.has(t))return br.debug(`There were multiple attempts to register component ${t}.`),!1;C0.set(t,n);for(const e of lp.values())NR(e,n);for(const e of pq.values())NR(e,n);return!0}function ml(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Oi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ta=new dl("app","Firebase",yq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ta.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=mq;function Xk(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:D0,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Ta.create("bad-app-name",{appName:String(s)});if(e||(e=Fk()),!e)throw Ta.create("no-options");const r=lp.get(s);if(r){if(Da(e,r.options)&&Da(i,r.config))return r;throw Ta.create("duplicate-app",{appName:s})}const o=new SH(s);for(const h of C0.values())o.addComponent(h);const c=new _q(e,i,o);return lp.set(s,c),c}function Qk(n=D0){const t=lp.get(n);if(!t&&n===D0&&Fk())return Xk();if(!t)throw Ta.create("no-app",{appName:n});return t}function Li(n,t,e){let i=gq[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${t}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),br.warn(o.join(" "));return}Os(new Qi(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq="firebase-heartbeat-database",bq=1,zf="firebase-heartbeat-store";let lb=null;function Zk(){return lb||(lb=LH(vq,bq,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(zf)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ta.create("idb-open",{originalErrorMessage:n.message})})),lb}async function Tq(n){try{const e=(await Zk()).transaction(zf),i=await e.objectStore(zf).get(Jk(n));return await e.done,i}catch(t){if(t instanceof Ji)br.warn(t.message);else{const e=Ta.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});br.warn(e.message)}}}async function VR(n,t){try{const i=(await Zk()).transaction(zf,"readwrite");await i.objectStore(zf).put(t,Jk(n)),await i.done}catch(e){if(e instanceof Ji)br.warn(e.message);else{const i=Ta.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});br.warn(i.message)}}}function Jk(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq=1024,Eq=30;class Sq{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Aq(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=LR();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>Eq){const o=Iq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LR(),{heartbeatsToSend:i,unsentEntries:s}=xq(this._heartbeatsCache.heartbeats),r=Lk(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return br.warn(e),""}}}function LR(){return new Date().toISOString().substring(0,10)}function xq(n,t=wq){const e=[];let i=n.slice();for(const s of n){const r=e.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),jR(e)>t){r.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),jR(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class Aq{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dw()?Yk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Tq(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return VR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return VR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function jR(n){return Lk(JSON.stringify({version:2,heartbeats:n})).length}function Iq(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(n){Os(new Qi("platform-logger",t=>new FH(t),"PRIVATE")),Os(new Qi("heartbeat",t=>new Sq(t),"PRIVATE")),Li(R0,OR,n),Li(R0,OR,"esm2020"),Li("fire-js","")}Rq("");var Dq="firebase",Cq="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(Dq,Cq,"app");const Mq=(n,t)=>t.some(e=>n instanceof e);let BR,FR;function Pq(){return BR||(BR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kq(){return FR||(FR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tO=new WeakMap,M0=new WeakMap,eO=new WeakMap,cb=new WeakMap,gw=new WeakMap;function Oq(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{e(wa(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&tO.set(e,n)}).catch(()=>{}),gw.set(t,n),t}function Nq(n){if(M0.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{e(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});M0.set(n,t)}let P0={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return M0.get(n);if(t==="objectStoreNames")return n.objectStoreNames||eO.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return wa(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Vq(n){P0=n(P0)}function Lq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(ub(this),t,...e);return eO.set(i,t.sort?t.sort():[t]),wa(i)}:kq().includes(n)?function(...t){return n.apply(ub(this),t),wa(tO.get(this))}:function(...t){return wa(n.apply(ub(this),t))}}function jq(n){return typeof n=="function"?Lq(n):(n instanceof IDBTransaction&&Nq(n),Mq(n,Pq())?new Proxy(n,P0):n)}function wa(n){if(n instanceof IDBRequest)return Oq(n);if(cb.has(n))return cb.get(n);const t=jq(n);return t!==n&&(cb.set(n,t),gw.set(t,n)),t}const ub=n=>gw.get(n);function Bq(n,t,{blocked:e,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,t),c=wa(o);return i&&o.addEventListener("upgradeneeded",h=>{i(wa(o.result),h.oldVersion,h.newVersion,wa(o.transaction),h)}),e&&o.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),c.then(h=>{r&&h.addEventListener("close",()=>r()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Fq=["get","getKey","getAll","getAllKeys","count"],Uq=["put","add","delete","clear"],hb=new Map;function UR(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(hb.get(t))return hb.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=Uq.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Fq.includes(e)))return;const r=async function(o,...c){const h=this.transaction(o,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[e](...c),s&&h.done]))[0]};return hb.set(t,r),r}Vq(n=>({...n,get:(t,e,i)=>UR(t,e)||n.get(t,e,i),has:(t,e)=>!!UR(t,e)||n.has(t,e)}));const nO="@firebase/installations",pw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=1e4,sO=`w:${pw}`,rO="FIS_v2",zq="https://firebaseinstallations.googleapis.com/v1",Hq=60*60*1e3,qq="installations",Gq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},tl=new dl(qq,Gq,Wq);function aO(n){return n instanceof Ji&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO({projectId:n}){return`${zq}/projects/${n}/installations`}function lO(n){return{token:n.token,requestStatus:2,expiresIn:Kq(n.expiresIn),creationTime:Date.now()}}async function cO(n,t){const i=(await t.json()).error;return tl.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function uO({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Yq(n,{refreshToken:t}){const e=uO(n);return e.append("Authorization",$q(t)),e}async function hO(n){const t=await n();return t.status>=500&&t.status<600?n():t}function Kq(n){return Number(n.replace("s","000"))}function $q(n){return`${rO} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=oO(n),s=uO(n),r=t.getImmediate({optional:!0});if(r){const f=await r.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const o={fid:e,authVersion:rO,appId:n.appId,sdkVersion:sO},c={method:"POST",headers:s,body:JSON.stringify(o)},h=await hO(()=>fetch(i,c));if(h.ok){const f=await h.json();return{fid:f.fid||e,registrationStatus:2,refreshToken:f.refreshToken,authToken:lO(f.authToken)}}else throw await cO("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=/^[cdef][\w-]{21}$/,k0="";function Jq(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=t8(n);return Zq.test(e)?e:k0}catch{return k0}}function t8(n){return Qq(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Map;function mO(n,t){const e=Wp(n);gO(e,t),e8(e,t)}function gO(n,t){const e=dO.get(n);if(e)for(const i of e)i(t)}function e8(n,t){const e=n8();e&&e.postMessage({key:n,fid:t}),i8()}let zo=null;function n8(){return!zo&&"BroadcastChannel"in self&&(zo=new BroadcastChannel("[Firebase] FID Change"),zo.onmessage=n=>{gO(n.data.key,n.data.fid)}),zo}function i8(){dO.size===0&&zo&&(zo.close(),zo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8="firebase-installations-database",r8=1,el="firebase-installations-store";let fb=null;function yw(){return fb||(fb=Bq(s8,r8,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(el)}}})),fb}async function cp(n,t){const e=Wp(n),s=(await yw()).transaction(el,"readwrite"),r=s.objectStore(el),o=await r.get(e);return await r.put(t,e),await s.done,(!o||o.fid!==t.fid)&&mO(n,t.fid),t}async function pO(n){const t=Wp(n),i=(await yw()).transaction(el,"readwrite");await i.objectStore(el).delete(t),await i.done}async function Yp(n,t){const e=Wp(n),s=(await yw()).transaction(el,"readwrite"),r=s.objectStore(el),o=await r.get(e),c=t(o);return c===void 0?await r.delete(e):await r.put(c,e),await s.done,c&&(!o||o.fid!==c.fid)&&mO(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(n){let t;const e=await Yp(n.appConfig,i=>{const s=a8(i),r=o8(n,s);return t=r.registrationPromise,r.installationEntry});return e.fid===k0?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function a8(n){const t=n||{fid:Jq(),registrationStatus:0};return yO(t)}function o8(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(tl.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=l8(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:c8(n)}:{installationEntry:t}}async function l8(n,t){try{const e=await Xq(n,t);return cp(n.appConfig,e)}catch(e){throw aO(e)&&e.customData.serverCode===409?await pO(n.appConfig):await cp(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function c8(n){let t=await zR(n.appConfig);for(;t.registrationStatus===1;)await fO(100),t=await zR(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await _w(n);return i||e}return t}function zR(n){return Yp(n,t=>{if(!t)throw tl.create("installation-not-found");return yO(t)})}function yO(n){return u8(n)?{fid:n.fid,registrationStatus:0}:n}function u8(n){return n.registrationStatus===1&&n.registrationTime+iO<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8({appConfig:n,heartbeatServiceProvider:t},e){const i=f8(n,e),s=Yq(n,e),r=t.getImmediate({optional:!0});if(r){const f=await r.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const o={installation:{sdkVersion:sO,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},h=await hO(()=>fetch(i,c));if(h.ok){const f=await h.json();return lO(f)}else throw await cO("Generate Auth Token",h)}function f8(n,{fid:t}){return`${oO(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vw(n,t=!1){let e;const i=await Yp(n.appConfig,r=>{if(!_O(r))throw tl.create("not-registered");const o=r.authToken;if(!t&&g8(o))return r;if(o.requestStatus===1)return e=d8(n,t),r;{if(!navigator.onLine)throw tl.create("app-offline");const c=y8(r);return e=m8(n,c),c}});return e?await e:i.authToken}async function d8(n,t){let e=await HR(n.appConfig);for(;e.authToken.requestStatus===1;)await fO(100),e=await HR(n.appConfig);const i=e.authToken;return i.requestStatus===0?vw(n,t):i}function HR(n){return Yp(n,t=>{if(!_O(t))throw tl.create("not-registered");const e=t.authToken;return _8(e)?{...t,authToken:{requestStatus:0}}:t})}async function m8(n,t){try{const e=await h8(n,t),i={...t,authToken:e};return await cp(n.appConfig,i),e}catch(e){if(aO(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await pO(n.appConfig);else{const i={...t,authToken:{requestStatus:0}};await cp(n.appConfig,i)}throw e}}function _O(n){return n!==void 0&&n.registrationStatus===2}function g8(n){return n.requestStatus===2&&!p8(n)}function p8(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+Hq}function y8(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function _8(n){return n.requestStatus===1&&n.requestTime+iO<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v8(n){const t=n,{installationEntry:e,registrationPromise:i}=await _w(t);return i?i.catch(console.error):vw(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b8(n,t=!1){const e=n;return await T8(e),(await vw(e,t)).token}async function T8(n){const{registrationPromise:t}=await _w(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(n){if(!n||!n.options)throw db("App Configuration");if(!n.name)throw db("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw db(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function db(n){return tl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="installations",E8="installations-internal",S8=n=>{const t=n.getProvider("app").getImmediate(),e=w8(t),i=ml(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},x8=n=>{const t=n.getProvider("app").getImmediate(),e=ml(t,vO).getImmediate();return{getId:()=>v8(e),getToken:s=>b8(e,s)}};function A8(){Os(new Qi(vO,S8,"PUBLIC")),Os(new Qi(E8,x8,"PRIVATE"))}A8();Li(nO,pw);Li(nO,pw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="analytics",I8="firebase_id",R8="origin",D8=60*1e3,C8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new Gp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gi=new dl("analytics","Analytics",M8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(n){if(!n.startsWith(bw)){const t=gi.create("invalid-gtag-resource",{gtagURL:n});return ni.warn(t.message),""}return n}function bO(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function k8(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function O8(n,t){const e=k8("firebase-js-sdk-policy",{createScriptURL:P8}),i=document.createElement("script"),s=`${bw}?l=${n}&id=${t}`;i.src=e?e==null?void 0:e.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function N8(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function V8(n,t,e,i,s,r){const o=i[s];try{if(o)await t[o];else{const h=(await bO(e)).find(f=>f.measurementId===s);h&&await t[h.appId]}}catch(c){ni.error(c)}n("config",s,r)}async function L8(n,t,e,i,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await bO(e);for(const h of o){const f=c.find(y=>y.measurementId===h),m=f&&t[f.appId];if(m)r.push(m);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),n("event",i,s||{})}catch(r){ni.error(r)}}function j8(n,t,e,i){async function s(r,...o){try{if(r==="event"){const[c,h]=o;await L8(n,t,e,c,h)}else if(r==="config"){const[c,h]=o;await V8(n,t,e,i,c,h)}else if(r==="consent"){const[c,h]=o;n("consent",c,h)}else if(r==="get"){const[c,h,f]=o;n("get",c,h,f)}else if(r==="set"){const[c]=o;n("set",c)}else n(r,...o)}catch(c){ni.error(c)}}return s}function B8(n,t,e,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=j8(r,n,t,e),{gtagCore:r,wrappedGtag:window[s]}}function F8(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(bw)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=30,z8=1e3;class H8{constructor(t={},e=z8){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const TO=new H8;function q8(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function G8(n){var o;const{appId:t,apiKey:e}=n,i={method:"GET",headers:q8(e)},s=C8.replace("{app-id}",t),r=await fetch(s,i);if(r.status!==200&&r.status!==304){let c="";try{const h=await r.json();(o=h.error)!=null&&o.message&&(c=h.error.message)}catch{}throw gi.create("config-fetch-failed",{httpStatus:r.status,responseMessage:c})}return r.json()}async function W8(n,t=TO,e){const{appId:i,apiKey:s,measurementId:r}=n.options;if(!i)throw gi.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw gi.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new $8;return setTimeout(async()=>{c.abort()},D8),wO({appId:i,apiKey:s,measurementId:r},o,c,t)}async function wO(n,{throttleEndTimeMillis:t,backoffCount:e},i,s=TO){var c;const{appId:r,measurementId:o}=n;try{await Y8(i,t)}catch(h){if(o)return ni.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:r,measurementId:o};throw h}try{const h=await G8(n);return s.deleteThrottleMetadata(r),h}catch(h){const f=h;if(!K8(f)){if(s.deleteThrottleMetadata(r),o)return ni.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:r,measurementId:o};throw h}const m=Number((c=f==null?void 0:f.customData)==null?void 0:c.httpStatus)===503?CR(e,s.intervalMillis,U8):CR(e,s.intervalMillis),y={throttleEndTimeMillis:Date.now()+m,backoffCount:e+1};return s.setThrottleMetadata(r,y),ni.debug(`Calling attemptFetch again in ${m} millis`),wO(n,y,i,s)}}function Y8(n,t){return new Promise((e,i)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(e,s);n.addEventListener(()=>{clearTimeout(r),i(gi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function K8(n){if(!(n instanceof Ji)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class $8{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function X8(n,t,e,i,s){if(s&&s.global){n("event",e,i);return}else{const r=await t,o={...i,send_to:r};n("event",e,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q8(){if(dw())try{await Yk()}catch(n){return ni.warn(gi.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ni.warn(gi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Z8(n,t,e,i,s,r,o){const c=W8(n);c.then(_=>{e[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&ni.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>ni.error(_)),t.push(c);const h=Q8().then(_=>{if(_)return i.getId()}),[f,m]=await Promise.all([c,h]);F8(r)||O8(r,f.measurementId),s("js",new Date);const y=(o==null?void 0:o.config)??{};return y[R8]="firebase",y.update=!0,m!=null&&(y[I8]=m),s("config",f.measurementId,y),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(t){this.app=t}_delete(){return delete gf[this.app.options.appId],Promise.resolve()}}let gf={},qR=[];const GR={};let mb="dataLayer",t7="gtag",WR,EO,YR=!1;function e7(){const n=[];if(qk()&&n.push("This is a browser extension environment."),cH()||n.push("Cookies are not available."),n.length>0){const t=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),e=gi.create("invalid-analytics-context",{errorInfo:t});ni.warn(e.message)}}function n7(n,t,e){e7();const i=n.options.appId;if(!i)throw gi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ni.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gi.create("no-api-key");if(gf[i]!=null)throw gi.create("already-exists",{id:i});if(!YR){N8(mb);const{wrappedGtag:r,gtagCore:o}=B8(gf,qR,GR,mb,t7);EO=r,WR=o,YR=!0}return gf[i]=Z8(n,qR,GR,t,WR,mb,e),new J8(n)}function i7(n=Qk()){n=Tn(n);const t=ml(n,up);return t.isInitialized()?t.getImmediate():s7(n)}function s7(n,t={}){const e=ml(n,up);if(e.isInitialized()){const s=e.getImmediate();if(Da(t,e.getOptions()))return s;throw gi.create("already-initialized")}return e.initialize({options:t})}function r7(n,t,e,i){n=Tn(n),X8(EO,gf[n.app.options.appId],t,e,i).catch(s=>ni.error(s))}const KR="@firebase/analytics",$R="0.10.18";function a7(){Os(new Qi(up,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return n7(i,s,e)},"PUBLIC")),Os(new Qi("analytics-internal",n,"PRIVATE")),Li(KR,$R),Li(KR,$R,"esm2020");function n(t){try{const e=t.getProvider(up).getImmediate();return{logEvent:(i,s,r)=>r7(e,i,s,r)}}catch(e){throw gi.create("interop-component-reg-failed",{reason:e})}}}a7();function SO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o7=SO,xO=new dl("auth","Firebase",SO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=new Gp("@firebase/auth");function l7(n,...t){hp.logLevel<=Kt.WARN&&hp.warn(`Auth (${mu}): ${n}`,...t)}function Pg(n,...t){hp.logLevel<=Kt.ERROR&&hp.error(`Auth (${mu}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n,...t){throw Tw(n,...t)}function Ds(n,...t){return Tw(n,...t)}function AO(n,t,e){const i={...o7(),[t]:e};return new dl("auth","Firebase",i).create(t,{appName:n.name})}function yr(n){return AO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tw(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return xO.create(n,...t)}function Nt(n,t,...e){if(!n)throw Tw(t,...e)}function mr(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Pg(t),new Error(t)}function Tr(n,t){n||mr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function c7(){return XR()==="http:"||XR()==="https:"}function XR(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c7()||qk()||"connection"in navigator)?navigator.onLine:!0}function h7(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t,e){this.shortDelay=t,this.longDelay=e,Tr(e>t,"Short delay should be less than long delay!"),this.isMobile=rH()||oH()}get(){return u7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n,t){Tr(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m7=new hd(3e4,6e4);function Va(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function La(n,t,e,i,s={}){return RO(n,s,async()=>{let r={},o={};i&&(t==="GET"?o=i:r={body:JSON.stringify(i)});const c=ud({key:n.config.apiKey,...o}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:t,headers:h,...r};return aH()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&du(n.emulatorConfig.host)&&(f.credentials="include"),IO.fetch()(await DO(n,n.config.apiHost,e,c),f)})}async function RO(n,t,e){n._canInitEmulator=!1;const i={...f7,...t};try{const s=new p7(n),r=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw fg(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const c=r.ok?o.errorMessage:o.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw fg(n,"credential-already-in-use",o);if(h==="EMAIL_EXISTS")throw fg(n,"email-already-in-use",o);if(h==="USER_DISABLED")throw fg(n,"user-disabled",o);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw AO(n,m,f);Zi(n,m)}}catch(s){if(s instanceof Ji)throw s;Zi(n,"network-request-failed",{message:String(s)})}}async function fd(n,t,e,i,s={}){const r=await La(n,t,e,i,s);return"mfaPendingCredential"in r&&Zi(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function DO(n,t,e,i){const s=`${t}${e}?${i}`,r=n,o=r.config.emulator?ww(n.config,s):`${n.config.apiScheme}://${s}`;return d7.includes(e)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function g7(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class p7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ds(this.auth,"network-request-failed")),m7.get())})}}function fg(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Ds(n,t,i);return s.customData._tokenResponse=e,s}function QR(n){return n!==void 0&&n.enterprise!==void 0}class y7{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return g7(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _7(n,t){return La(n,"GET","/v2/recaptchaConfig",Va(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v7(n,t){return La(n,"POST","/v1/accounts:delete",t)}async function fp(n,t){return La(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function b7(n,t=!1){const e=Tn(n),i=await e.getIdToken(t),s=Ew(i);Nt(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:pf(gb(s.auth_time)),issuedAtTime:pf(gb(s.iat)),expirationTime:pf(gb(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function gb(n){return Number(n)*1e3}function Ew(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Pg("JWT malformed, contained fewer than 3 sections"),null;try{const s=jk(e);return s?JSON.parse(s):(Pg("Failed to decode base64 JWT payload"),null)}catch(s){return Pg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ZR(n){const t=Ew(n);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Ji&&T7(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function T7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=pf(this.lastLoginAt),this.creationTime=pf(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dp(n){var y;const t=n.auth,e=await n.getIdToken(),i=await Hf(n,fp(t,{idToken:e}));Nt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const r=(y=s.providerUserInfo)!=null&&y.length?CO(s.providerUserInfo):[],o=S7(n.providerData,r),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),f=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new N0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function E7(n){const t=Tn(n);await dp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function S7(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function CO(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x7(n,t){const e=await RO(n,{},async()=>{const i=ud({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=await DO(n,s,"/v1/token",`key=${r}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:i};return n.emulatorConfig&&du(n.emulatorConfig.host)&&(h.credentials="include"),IO.fetch()(o,h)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function A7(n,t){return La(n,"POST","/v2/accounts:revokeToken",Va(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ZR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const e=ZR(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:r}=await x7(t,e);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:r}=e,o=new Vc;return i&&(Nt(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),s&&(Nt(typeof s=="string","internal-error",{appName:t}),o.accessToken=s),r&&(Nt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Vc,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(n,t){Nt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class $i{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new w7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new N0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await Hf(this,this.stsTokenManager.getToken(this.auth,t));return Nt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return b7(this,t)}reload(){return E7(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new $i({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await dp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oi(this.auth.app))return Promise.reject(yr(this.auth));const t=await this.getIdToken();return await Hf(this,v7(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,r=e.phoneNumber??void 0,o=e.photoURL??void 0,c=e.tenantId??void 0,h=e._redirectEventId??void 0,f=e.createdAt??void 0,m=e.lastLoginAt??void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=e;Nt(y&&x,t,"internal-error");const A=Vc.fromJSON(this.name,x);Nt(typeof y=="string",t,"internal-error"),na(i,t.name),na(s,t.name),Nt(typeof _=="boolean",t,"internal-error"),Nt(typeof b=="boolean",t,"internal-error"),na(r,t.name),na(o,t.name),na(c,t.name),na(h,t.name),na(f,t.name),na(m,t.name);const M=new $i({uid:y,auth:t,email:s,emailVerified:_,displayName:i,isAnonymous:b,photoURL:o,phoneNumber:r,tenantId:c,stsTokenManager:A,createdAt:f,lastLoginAt:m});return w&&Array.isArray(w)&&(M.providerData=w.map(N=>({...N}))),h&&(M._redirectEventId=h),M}static async _fromIdTokenResponse(t,e,i=!1){const s=new Vc;s.updateFromServerResponse(e);const r=new $i({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await dp(r),r}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];Nt(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?CO(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),c=new Vc;c.updateFromIdToken(i);const h=new $i({uid:s.localId,auth:t,stsTokenManager:c,isAnonymous:o}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new N0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new Map;function gr(n){Tr(n instanceof Function,"Expected a class definition");let t=JR.get(n);return t?(Tr(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,JR.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}MO.type="NONE";const tD=MO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n,t,e){return`firebase:${n}:${t}:${e}`}class Lc{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=kg(this.userKey,s.apiKey,r),this.fullPersistenceKey=kg("persistence",s.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await fp(this.auth,{idToken:t}).catch(()=>{});return e?$i._fromGetAccountInfoResponse(this.auth,e,t):null}return $i._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Lc(gr(tD),t,i);const s=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let r=s[0]||gr(tD);const o=kg(i,t.config.apiKey,t.name);let c=null;for(const f of e)try{const m=await f._get(o);if(m){let y;if(typeof m=="string"){const _=await fp(t,{idToken:m}).catch(()=>{});if(!_)break;y=await $i._fromGetAccountInfoResponse(t,_,m)}else y=$i._fromJSON(t,m);f!==r&&(c=y),r=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!r._shouldAllowMigration||!h.length?new Lc(r,t,i):(r=h[0],c&&await r._set(o,c.toJSON()),await Promise.all(e.map(async f=>{if(f!==r)try{await f._remove(o)}catch{}})),new Lc(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NO(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PO(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(LO(t))return"Blackberry";if(jO(t))return"Webos";if(kO(t))return"Safari";if((t.includes("chrome/")||OO(t))&&!t.includes("edge/"))return"Chrome";if(VO(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function PO(n=fn()){return/firefox\//i.test(n)}function kO(n=fn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function OO(n=fn()){return/crios\//i.test(n)}function NO(n=fn()){return/iemobile/i.test(n)}function VO(n=fn()){return/android/i.test(n)}function LO(n=fn()){return/blackberry/i.test(n)}function jO(n=fn()){return/webos/i.test(n)}function Sw(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function I7(n=fn()){var t;return Sw(n)&&!!((t=window.navigator)!=null&&t.standalone)}function R7(){return lH()&&document.documentMode===10}function BO(n=fn()){return Sw(n)||VO(n)||jO(n)||LO(n)||/windows phone/i.test(n)||NO(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(n,t=[]){let e;switch(n){case"Browser":e=eD(fn());break;case"Worker":e=`${eD(fn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${mu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=r=>new Promise((o,c)=>{try{const h=t(r);o(h)}catch(h){c(h)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(n,t={}){return La(n,"GET","/v2/passwordPolicy",Va(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=6;class P7{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??M7,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nD(this),this.idTokenSubscription=new nD(this),this.beforeStateQueue=new D7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=gr(e)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Lc.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await fp(this,{idToken:t}),i=await $i._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(Oi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(t);(!o||o===c)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await dp(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=h7()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Oi(this.app))return Promise.reject(yr(this));const e=t?Tn(t):null;return e&&Nt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Oi(this.app)?Promise.reject(yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Oi(this.app)?Promise.reject(yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await C7(this),e=new P7(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new dl("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await A7(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&gr(t)||this._popupRedirectResolver;Nt(e,this,"argument-error"),this.redirectPersistenceManager=await Lc.create(this,[gr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const r=typeof e=="function"?e:e.next.bind(e);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(c,this,"internal-error"),c.then(()=>{o||r(this.currentUser)}),typeof e=="function"){const h=t.addObserver(e,i,s);return()=>{o=!0,h()}}else{const h=t.addObserver(e);return()=>{o=!0,h()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=FO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&l7(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function gl(n){return Tn(n)}class nD{constructor(t){this.auth=t,this.observer=null,this.addObserver=mH(e=>this.observer=e)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O7(n){Kp=n}function UO(n){return Kp.loadJS(n)}function N7(){return Kp.recaptchaEnterpriseScript}function V7(){return Kp.gapiScript}function L7(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class j7{constructor(){this.enterprise=new B7}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class B7{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const F7="recaptcha-enterprise",zO="NO_RECAPTCHA";class U7{constructor(t){this.type=F7,this.auth=gl(t)}async verify(t="verify",e=!1){async function i(r){if(!e){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,c)=>{_7(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new y7(h);return r.tenantId==null?r._agentRecaptchaConfig=f:r._tenantRecaptchaConfigs[r.tenantId]=f,o(f.siteKey)}}).catch(h=>{c(h)})})}function s(r,o,c){const h=window.grecaptcha;QR(h)?h.enterprise.ready(()=>{h.enterprise.execute(r,{action:t}).then(f=>{o(f)}).catch(()=>{o(zO)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new j7().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(c=>{if(!e&&QR(window.grecaptcha))s(c,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let h=N7();h.length!==0&&(h+=c),UO(h).then(()=>{s(c,r,o)}).catch(f=>{o(f)})}}).catch(c=>{o(c)})})}}async function iD(n,t,e,i=!1,s=!1){const r=new U7(n);let o;if(s)o=zO;else try{o=await r.verify(e)}catch{o=await r.verify(e,!0)}const c={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function V0(n,t,e,i,s){var r;if((r=n._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await iD(n,t,e,e==="getOobCode");return i(n,o)}else return i(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await iD(n,t,e,e==="getOobCode");return i(n,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z7(n,t){const e=ml(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),r=e.getOptions();if(Da(r,t??{}))return s;Zi(s,"already-initialized")}return e.initialize({options:t})}function H7(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(gr);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function q7(n,t,e){const i=gl(n);Nt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=HO(t),{host:o,port:c}=G7(t),h=c===null?"":`:${c}`,f={url:`${r}//${o}${h}/`},m=Object.freeze({host:o,port:c,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Nt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Nt(Da(f,i.config.emulator)&&Da(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,du(o)?(zk(`${r}//${o}${h}`),sH("Auth",!0)):W7()}function HO(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function G7(n){const t=HO(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:sD(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:sD(o)}}}function sD(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function W7(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return mr("not implemented")}_getIdTokenResponse(t){return mr("not implemented")}_linkToIdToken(t,e){return mr("not implemented")}_getReauthenticationResolver(t){return mr("not implemented")}}async function Y7(n,t){return La(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K7(n,t){return fd(n,"POST","/v1/accounts:signInWithPassword",Va(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $7(n,t){return fd(n,"POST","/v1/accounts:signInWithEmailLink",Va(n,t))}async function X7(n,t){return fd(n,"POST","/v1/accounts:signInWithEmailLink",Va(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends xw{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new qf(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new qf(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(t,e,"signInWithPassword",K7);case"emailLink":return $7(t,{email:this._email,oobCode:this._password});default:Zi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(t,i,"signUpPassword",Y7);case"emailLink":return X7(t,{idToken:e,email:this._email,oobCode:this._password});default:Zi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(n,t){return fd(n,"POST","/v1/accounts:signInWithIdp",Va(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7="http://localhost";class nl extends xw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new nl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Zi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=e;if(!i||!s)return null;const o=new nl(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return jc(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,jc(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,jc(t,e)}buildRequest(){const t={requestUri:Q7,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=ud(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function J7(n){const t=Qh(Zh(n)).link,e=t?Qh(Zh(t)).deep_link_id:null,i=Qh(Zh(n)).deep_link_id;return(i?Qh(Zh(i)).link:null)||i||e||t||n}class Aw{constructor(t){const e=Qh(Zh(t)),i=e.apiKey??null,s=e.oobCode??null,r=Z7(e.mode??null);Nt(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=J7(t);try{return new Aw(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this.providerId=gu.PROVIDER_ID}static credential(t,e){return qf._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Aw.parseLink(e);return Nt(i,"argument-error"),qf._fromEmailAndCode(t,i.code,i.tenantId)}}gu.PROVIDER_ID="password";gu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends qO{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends dd{constructor(){super("facebook.com")}static credential(t){return nl._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ca.credentialFromTaggedObject(t)}static credentialFromError(t){return ca.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ca.credential(t.oauthAccessToken)}catch{return null}}}ca.FACEBOOK_SIGN_IN_METHOD="facebook.com";ca.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return nl._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ua.credentialFromTaggedObject(t)}static credentialFromError(t){return ua.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return ua.credential(e,i)}catch{return null}}}ua.GOOGLE_SIGN_IN_METHOD="google.com";ua.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends dd{constructor(){super("github.com")}static credential(t){return nl._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ha.credentialFromTaggedObject(t)}static credentialFromError(t){return ha.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ha.credential(t.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends dd{constructor(){super("twitter.com")}static credential(t,e){return nl._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return fa.credentialFromTaggedObject(t)}static credentialFromError(t){return fa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return fa.credential(e,i)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tG(n,t){return fd(n,"POST","/v1/accounts:signUp",Va(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const r=await $i._fromIdTokenResponse(t,i,s),o=rD(i);return new il({user:r,providerId:o,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=rD(i);return new il({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function rD(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends Ji{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,mp.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new mp(t,e,i,s)}}function GO(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?mp._fromErrorAndOperation(n,r,t,i):r})}async function eG(n,t,e=!1){const i=await Hf(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return il._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nG(n,t,e=!1){const{auth:i}=n;if(Oi(i.app))return Promise.reject(yr(i));const s="reauthenticate";try{const r=await Hf(n,GO(i,s,t,n),e);Nt(r.idToken,i,"internal-error");const o=Ew(r.idToken);Nt(o,i,"internal-error");const{sub:c}=o;return Nt(n.uid===c,i,"user-mismatch"),il._forOperation(n,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Zi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(n,t,e=!1){if(Oi(n.app))return Promise.reject(yr(n));const i="signIn",s=await GO(n,i,t),r=await il._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(r.user),r}async function iG(n,t){return WO(gl(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(n){const t=gl(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function sG(n,t,e){if(Oi(n.app))return Promise.reject(yr(n));const i=gl(n),o=await V0(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tG).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&YO(n),h}),c=await il._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(c.user),c}function rG(n,t,e){return Oi(n.app)?Promise.reject(yr(n)):iG(Tn(n),gu.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&YO(n),i})}function aG(n,t,e,i){return Tn(n).onIdTokenChanged(t,e,i)}function oG(n,t,e){return Tn(n).beforeAuthStateChanged(t,e)}function lG(n){return Tn(n).signOut()}const gp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(gp,"1"),this.storage.removeItem(gp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cG=1e3,uG=10;class $O extends KO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,c,h)=>{this.notifyListeners(o,h)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!e&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);R7()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,uG):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},cG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}$O.type="LOCAL";const hG=$O;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO extends KO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}XO.type="SESSION";const QO=XO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new $p(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:r}=e.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(o).map(async f=>f(e.origin,r)),h=await fG(c);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$p.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((c,h)=>{const f=Iw("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(y){const _=y;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),c(_.data.response);break;default:clearTimeout(m),clearTimeout(r),h(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return window}function mG(n){Cs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(){return typeof Cs().WorkerGlobalScope<"u"&&typeof Cs().importScripts=="function"}async function gG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pG(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function yG(){return ZO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="firebaseLocalStorageDb",_G=1,pp="firebaseLocalStorage",tN="fbase_key";class md{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Xp(n,t){return n.transaction([pp],t?"readwrite":"readonly").objectStore(pp)}function vG(){const n=indexedDB.deleteDatabase(JO);return new md(n).toPromise()}function L0(){const n=indexedDB.open(JO,_G);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(pp,{keyPath:tN})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(pp)?t(i):(i.close(),await vG(),t(await L0()))})})}async function aD(n,t,e){const i=Xp(n,!0).put({[tN]:t,value:e});return new md(i).toPromise()}async function bG(n,t){const e=Xp(n,!1).get(t),i=await new md(e).toPromise();return i===void 0?null:i.value}function oD(n,t){const e=Xp(n,!0).delete(t);return new md(e).toPromise()}const TG=800,wG=3;class eN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await L0(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>wG)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$p._getInstance(yG()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await gG(),!this.activeServiceWorker)return;this.sender=new dG(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||pG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await L0();return await aD(t,gp,"1"),await oD(t,gp),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>aD(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>bG(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>oD(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=Xp(s,!1).getAll();return new md(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eN.type="LOCAL";const EG=eN;new hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SG(n,t){return t?gr(t):(Nt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends xw{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jc(t,this._buildIdpRequest())}_linkToIdToken(t,e){return jc(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return jc(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function xG(n){return WO(n.auth,new Rw(n),n.bypassAuthState)}function AG(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),nG(e,new Rw(n),n.bypassAuthState)}async function IG(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),eG(e,new Rw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t,e,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:r,error:o,type:c}=t;if(o){this.reject(o);return}const h={auth:this.auth,requestUri:e,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return xG;case"linkViaPopup":case"linkViaRedirect":return IG;case"reauthViaPopup":case"reauthViaRedirect":return AG;default:Zi(this.auth,"internal-error")}}resolve(t){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG=new hd(2e3,1e4);class kc extends nN{constructor(t,e,i,s,r){super(t,e,s,r),this.provider=i,this.authWindow=null,this.pollId=null,kc.currentPopupAction&&kc.currentPopupAction.cancel(),kc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const t=Iw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RG.get())};t()}}kc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG="pendingRedirect",Og=new Map;class CG extends nN{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Og.get(this.auth._key());if(!t){try{const i=await MG(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Og.set(this.auth._key(),t)}return this.bypassAuthState||Og.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MG(n,t){const e=OG(t),i=kG(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function PG(n,t){Og.set(n._key(),t)}function kG(n){return gr(n._redirectPersistence)}function OG(n){return kg(DG,n.config.apiKey,n.name)}async function NG(n,t,e=!1){if(Oi(n.app))return Promise.reject(yr(n));const i=gl(n),s=SG(i,t),o=await new CG(i,s,e).execute();return o&&!e&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=10*60*1e3;class LG{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!jG(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!iN(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ds(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=VG&&this.cachedEventUids.clear(),this.cachedEventUids.has(lD(t))}saveEventToCache(t){this.cachedEventUids.add(lD(t)),this.lastProcessedEventTime=Date.now()}}function lD(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function iN({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function jG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BG(n,t={}){return La(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UG=/^https?/;async function zG(n){if(n.config.emulator)return;const{authorizedDomains:t}=await BG(n);for(const e of t)try{if(HG(e))return}catch{}Zi(n,"unauthorized-domain")}function HG(n){const t=O0(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===i}if(!UG.test(e))return!1;if(FG.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG=new hd(3e4,6e4);function cD(){const n=Cs().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function GG(n){return new Promise((t,e)=>{var s,r,o;function i(){cD(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cD(),e(Ds(n,"network-request-failed"))},timeout:qG.get()})}if((r=(s=Cs().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((o=Cs().gapi)!=null&&o.load)i();else{const c=L7("iframefcb");return Cs()[c]=()=>{gapi.load?i():e(Ds(n,"network-request-failed"))},UO(`${V7()}?onload=${c}`).catch(h=>e(h))}}).catch(t=>{throw Ng=null,t})}let Ng=null;function WG(n){return Ng=Ng||GG(n),Ng}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG=new hd(5e3,15e3),KG="__/auth/iframe",$G="emulator/auth/iframe",XG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZG(n){const t=n.config;Nt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?ww(t,$G):`https://${n.config.authDomain}/${KG}`,i={apiKey:t.apiKey,appName:n.name,v:mu},s=QG.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${e}?${ud(i).slice(1)}`}async function JG(n){const t=await WG(n),e=Cs().gapi;return Nt(e,n,"internal-error"),t.open({where:document.body,url:ZG(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XG,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Ds(n,"network-request-failed"),c=Cs().setTimeout(()=>{r(o)},YG.get());function h(){Cs().clearTimeout(c),s(i)}i.ping(h).then(h,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eW=500,nW=600,iW="_blank",sW="http://localhost";class uD{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rW(n,t,e,i=eW,s=nW){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h={...tW,width:i.toString(),height:s.toString(),top:r,left:o},f=fn().toLowerCase();e&&(c=OO(f)?iW:e),PO(f)&&(t=t||sW,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[b,w])=>`${_}${b}=${w},`,"");if(I7(f)&&c!=="_self")return aW(t||"",c),new uD(null);const y=window.open(t||"",c,m);Nt(y,n,"popup-blocked");try{y.focus()}catch{}return new uD(y)}function aW(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW="__/auth/handler",lW="emulator/auth/handler",cW=encodeURIComponent("fac");async function hD(n,t,e,i,s,r){Nt(n.config.authDomain,n,"auth-domain-config-required"),Nt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:mu,eventId:s};if(t instanceof qO){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",dH(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,y]of Object.entries({}))o[m]=y}if(t instanceof dd){const m=t.getScopes().filter(y=>y!=="");m.length>0&&(o.scopes=m.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),f=h?`#${cW}=${encodeURIComponent(h)}`:"";return`${uW(n)}?${ud(c).slice(1)}${f}`}function uW({config:n}){return n.emulator?ww(n,lW):`https://${n.authDomain}/${oW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="webStorageSupport";class hW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QO,this._completeRedirectFn=NG,this._overrideRedirectResult=PG}async _openPopup(t,e,i,s){var o;Tr((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await hD(t,e,i,O0(),s);return rW(t,r,Iw())}async _openRedirect(t,e,i,s){await this._originValidation(t);const r=await hD(t,e,i,O0(),s);return mG(r),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:r}=this.eventManagers[e];return s?Promise.resolve(s):(Tr(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await JG(t),i=new LG(t);return e.register("authEvent",s=>(Nt(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(pb,{type:pb},s=>{var o;const r=(o=s==null?void 0:s[0])==null?void 0:o[pb];r!==void 0&&e(!!r),Zi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=zG(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return BO()||kO()||Sw()}}const fW=hW;var fD="@firebase/auth",dD="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gW(n){Os(new Qi("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;Nt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FO(n)},f=new k7(i,s,r,h);return H7(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Os(new Qi("auth-internal",t=>{const e=gl(t.getProvider("auth").getImmediate());return(i=>new dW(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(fD,dD,mW(n)),Li(fD,dD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=5*60,yW=Uk("authIdTokenMaxAge")||pW;let mD=null;const _W=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>yW)return;const s=e==null?void 0:e.token;mD!==s&&(mD=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vW(n=Qk()){const t=ml(n,"auth");if(t.isInitialized())return t.getImmediate();const e=z7(n,{popupRedirectResolver:fW,persistence:[EG,hG,QO]}),i=Uk("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=_W(r.toString());oG(e,o,()=>o(e.currentUser)),aG(e,c=>o(c))}}const s=tH("auth");return s&&q7(e,`http://${s}`),e}function bW(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}O7({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const r=Ds("internal-error");r.customData=s,e(r)},i.type="text/javascript",i.charset="UTF-8",bW().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gW("Browser");var gD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ea,sN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,I){function R(){}R.prototype=I.prototype,O.D=I.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(V,j,U){for(var B=Array(arguments.length-2),At=2;At<arguments.length;At++)B[At-2]=arguments[At];return I.prototype[j].apply(V,B)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,I,R){R||(R=0);var V=Array(16);if(typeof I=="string")for(var j=0;16>j;++j)V[j]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(j=0;16>j;++j)V[j]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=O.g[0],R=O.g[1],j=O.g[2];var U=O.g[3],B=I+(U^R&(j^U))+V[0]+3614090360&4294967295;I=R+(B<<7&4294967295|B>>>25),B=U+(j^I&(R^j))+V[1]+3905402710&4294967295,U=I+(B<<12&4294967295|B>>>20),B=j+(R^U&(I^R))+V[2]+606105819&4294967295,j=U+(B<<17&4294967295|B>>>15),B=R+(I^j&(U^I))+V[3]+3250441966&4294967295,R=j+(B<<22&4294967295|B>>>10),B=I+(U^R&(j^U))+V[4]+4118548399&4294967295,I=R+(B<<7&4294967295|B>>>25),B=U+(j^I&(R^j))+V[5]+1200080426&4294967295,U=I+(B<<12&4294967295|B>>>20),B=j+(R^U&(I^R))+V[6]+2821735955&4294967295,j=U+(B<<17&4294967295|B>>>15),B=R+(I^j&(U^I))+V[7]+4249261313&4294967295,R=j+(B<<22&4294967295|B>>>10),B=I+(U^R&(j^U))+V[8]+1770035416&4294967295,I=R+(B<<7&4294967295|B>>>25),B=U+(j^I&(R^j))+V[9]+2336552879&4294967295,U=I+(B<<12&4294967295|B>>>20),B=j+(R^U&(I^R))+V[10]+4294925233&4294967295,j=U+(B<<17&4294967295|B>>>15),B=R+(I^j&(U^I))+V[11]+2304563134&4294967295,R=j+(B<<22&4294967295|B>>>10),B=I+(U^R&(j^U))+V[12]+1804603682&4294967295,I=R+(B<<7&4294967295|B>>>25),B=U+(j^I&(R^j))+V[13]+4254626195&4294967295,U=I+(B<<12&4294967295|B>>>20),B=j+(R^U&(I^R))+V[14]+2792965006&4294967295,j=U+(B<<17&4294967295|B>>>15),B=R+(I^j&(U^I))+V[15]+1236535329&4294967295,R=j+(B<<22&4294967295|B>>>10),B=I+(j^U&(R^j))+V[1]+4129170786&4294967295,I=R+(B<<5&4294967295|B>>>27),B=U+(R^j&(I^R))+V[6]+3225465664&4294967295,U=I+(B<<9&4294967295|B>>>23),B=j+(I^R&(U^I))+V[11]+643717713&4294967295,j=U+(B<<14&4294967295|B>>>18),B=R+(U^I&(j^U))+V[0]+3921069994&4294967295,R=j+(B<<20&4294967295|B>>>12),B=I+(j^U&(R^j))+V[5]+3593408605&4294967295,I=R+(B<<5&4294967295|B>>>27),B=U+(R^j&(I^R))+V[10]+38016083&4294967295,U=I+(B<<9&4294967295|B>>>23),B=j+(I^R&(U^I))+V[15]+3634488961&4294967295,j=U+(B<<14&4294967295|B>>>18),B=R+(U^I&(j^U))+V[4]+3889429448&4294967295,R=j+(B<<20&4294967295|B>>>12),B=I+(j^U&(R^j))+V[9]+568446438&4294967295,I=R+(B<<5&4294967295|B>>>27),B=U+(R^j&(I^R))+V[14]+3275163606&4294967295,U=I+(B<<9&4294967295|B>>>23),B=j+(I^R&(U^I))+V[3]+4107603335&4294967295,j=U+(B<<14&4294967295|B>>>18),B=R+(U^I&(j^U))+V[8]+1163531501&4294967295,R=j+(B<<20&4294967295|B>>>12),B=I+(j^U&(R^j))+V[13]+2850285829&4294967295,I=R+(B<<5&4294967295|B>>>27),B=U+(R^j&(I^R))+V[2]+4243563512&4294967295,U=I+(B<<9&4294967295|B>>>23),B=j+(I^R&(U^I))+V[7]+1735328473&4294967295,j=U+(B<<14&4294967295|B>>>18),B=R+(U^I&(j^U))+V[12]+2368359562&4294967295,R=j+(B<<20&4294967295|B>>>12),B=I+(R^j^U)+V[5]+4294588738&4294967295,I=R+(B<<4&4294967295|B>>>28),B=U+(I^R^j)+V[8]+2272392833&4294967295,U=I+(B<<11&4294967295|B>>>21),B=j+(U^I^R)+V[11]+1839030562&4294967295,j=U+(B<<16&4294967295|B>>>16),B=R+(j^U^I)+V[14]+4259657740&4294967295,R=j+(B<<23&4294967295|B>>>9),B=I+(R^j^U)+V[1]+2763975236&4294967295,I=R+(B<<4&4294967295|B>>>28),B=U+(I^R^j)+V[4]+1272893353&4294967295,U=I+(B<<11&4294967295|B>>>21),B=j+(U^I^R)+V[7]+4139469664&4294967295,j=U+(B<<16&4294967295|B>>>16),B=R+(j^U^I)+V[10]+3200236656&4294967295,R=j+(B<<23&4294967295|B>>>9),B=I+(R^j^U)+V[13]+681279174&4294967295,I=R+(B<<4&4294967295|B>>>28),B=U+(I^R^j)+V[0]+3936430074&4294967295,U=I+(B<<11&4294967295|B>>>21),B=j+(U^I^R)+V[3]+3572445317&4294967295,j=U+(B<<16&4294967295|B>>>16),B=R+(j^U^I)+V[6]+76029189&4294967295,R=j+(B<<23&4294967295|B>>>9),B=I+(R^j^U)+V[9]+3654602809&4294967295,I=R+(B<<4&4294967295|B>>>28),B=U+(I^R^j)+V[12]+3873151461&4294967295,U=I+(B<<11&4294967295|B>>>21),B=j+(U^I^R)+V[15]+530742520&4294967295,j=U+(B<<16&4294967295|B>>>16),B=R+(j^U^I)+V[2]+3299628645&4294967295,R=j+(B<<23&4294967295|B>>>9),B=I+(j^(R|~U))+V[0]+4096336452&4294967295,I=R+(B<<6&4294967295|B>>>26),B=U+(R^(I|~j))+V[7]+1126891415&4294967295,U=I+(B<<10&4294967295|B>>>22),B=j+(I^(U|~R))+V[14]+2878612391&4294967295,j=U+(B<<15&4294967295|B>>>17),B=R+(U^(j|~I))+V[5]+4237533241&4294967295,R=j+(B<<21&4294967295|B>>>11),B=I+(j^(R|~U))+V[12]+1700485571&4294967295,I=R+(B<<6&4294967295|B>>>26),B=U+(R^(I|~j))+V[3]+2399980690&4294967295,U=I+(B<<10&4294967295|B>>>22),B=j+(I^(U|~R))+V[10]+4293915773&4294967295,j=U+(B<<15&4294967295|B>>>17),B=R+(U^(j|~I))+V[1]+2240044497&4294967295,R=j+(B<<21&4294967295|B>>>11),B=I+(j^(R|~U))+V[8]+1873313359&4294967295,I=R+(B<<6&4294967295|B>>>26),B=U+(R^(I|~j))+V[15]+4264355552&4294967295,U=I+(B<<10&4294967295|B>>>22),B=j+(I^(U|~R))+V[6]+2734768916&4294967295,j=U+(B<<15&4294967295|B>>>17),B=R+(U^(j|~I))+V[13]+1309151649&4294967295,R=j+(B<<21&4294967295|B>>>11),B=I+(j^(R|~U))+V[4]+4149444226&4294967295,I=R+(B<<6&4294967295|B>>>26),B=U+(R^(I|~j))+V[11]+3174756917&4294967295,U=I+(B<<10&4294967295|B>>>22),B=j+(I^(U|~R))+V[2]+718787259&4294967295,j=U+(B<<15&4294967295|B>>>17),B=R+(U^(j|~I))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(j+(B<<21&4294967295|B>>>11))&4294967295,O.g[2]=O.g[2]+j&4294967295,O.g[3]=O.g[3]+U&4294967295}i.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var R=I-this.blockSize,V=this.B,j=this.h,U=0;U<I;){if(j==0)for(;U<=R;)s(this,O,U),U+=this.blockSize;if(typeof O=="string"){for(;U<I;)if(V[j++]=O.charCodeAt(U++),j==this.blockSize){s(this,V),j=0;break}}else for(;U<I;)if(V[j++]=O[U++],j==this.blockSize){s(this,V),j=0;break}}this.h=j,this.o+=I},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var R=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=R&255,R/=256;for(this.u(O),O=Array(16),I=R=0;4>I;++I)for(var V=0;32>V;V+=8)O[R++]=this.g[I]>>>V&255;return O};function r(O,I){var R=c;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=I(O)}function o(O,I){this.h=I;for(var R=[],V=!0,j=O.length-1;0<=j;j--){var U=O[j]|0;V&&U==I||(R[j]=U,V=!1)}this.g=R}var c={};function h(O){return-128<=O&&128>O?r(O,function(I){return new o([I|0],0>I?-1:0)}):new o([O|0],0>O?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return y;if(0>O)return A(f(-O));for(var I=[],R=1,V=0;O>=R;V++)I[V]=O/R|0,R*=4294967296;return new o(I,0)}function m(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return A(m(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=f(Math.pow(I,8)),V=y,j=0;j<O.length;j+=8){var U=Math.min(8,O.length-j),B=parseInt(O.substring(j,j+U),I);8>U?(U=f(Math.pow(I,U)),V=V.j(U).add(f(B))):(V=V.j(R),V=V.add(f(B)))}return V}var y=h(0),_=h(1),b=h(16777216);n=o.prototype,n.m=function(){if(x(this))return-A(this).m();for(var O=0,I=1,R=0;R<this.g.length;R++){var V=this.i(R);O+=(0<=V?V:4294967296+V)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(w(this))return"0";if(x(this))return"-"+A(this).toString(O);for(var I=f(Math.pow(O,6)),R=this,V="";;){var j=H(R,I).g;R=M(R,j.j(I));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=j,w(R))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function w(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function x(O){return O.h==-1}n.l=function(O){return O=M(this,O),x(O)?-1:w(O)?0:1};function A(O){for(var I=O.g.length,R=[],V=0;V<I;V++)R[V]=~O.g[V];return new o(R,~O.h).add(_)}n.abs=function(){return x(this)?A(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0,j=0;j<=I;j++){var U=V+(this.i(j)&65535)+(O.i(j)&65535),B=(U>>>16)+(this.i(j)>>>16)+(O.i(j)>>>16);V=B>>>16,U&=65535,B&=65535,R[j]=B<<16|U}return new o(R,R[R.length-1]&-2147483648?-1:0)};function M(O,I){return O.add(A(I))}n.j=function(O){if(w(this)||w(O))return y;if(x(this))return x(O)?A(this).j(A(O)):A(A(this).j(O));if(x(O))return A(this.j(A(O)));if(0>this.l(b)&&0>O.l(b))return f(this.m()*O.m());for(var I=this.g.length+O.g.length,R=[],V=0;V<2*I;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var j=0;j<O.g.length;j++){var U=this.i(V)>>>16,B=this.i(V)&65535,At=O.i(j)>>>16,St=O.i(j)&65535;R[2*V+2*j]+=B*St,N(R,2*V+2*j),R[2*V+2*j+1]+=U*St,N(R,2*V+2*j+1),R[2*V+2*j+1]+=B*At,N(R,2*V+2*j+1),R[2*V+2*j+2]+=U*At,N(R,2*V+2*j+2)}for(V=0;V<I;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=I;V<2*I;V++)R[V]=0;return new o(R,0)};function N(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function L(O,I){this.g=O,this.h=I}function H(O,I){if(w(I))throw Error("division by zero");if(w(O))return new L(y,y);if(x(O))return I=H(A(O),I),new L(A(I.g),A(I.h));if(x(I))return I=H(O,A(I)),new L(A(I.g),I.h);if(30<O.g.length){if(x(O)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var R=_,V=I;0>=V.l(O);)R=F(R),V=F(V);var j=K(R,1),U=K(V,1);for(V=K(V,2),R=K(R,2);!w(V);){var B=U.add(V);0>=B.l(O)&&(j=j.add(R),U=B),V=K(V,1),R=K(R,1)}return I=M(O,j.j(I)),new L(j,I)}for(j=y;0<=O.l(I);){for(R=Math.max(1,Math.floor(O.m()/I.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=f(R),B=U.j(I);x(B)||0<B.l(O);)R-=V,U=f(R),B=U.j(I);w(U)&&(U=_),j=j.add(U),O=M(O,B)}return new L(j,O)}n.A=function(O){return H(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)&O.i(V);return new o(R,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)|O.i(V);return new o(R,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)^O.i(V);return new o(R,this.h^O.h)};function F(O){for(var I=O.g.length+1,R=[],V=0;V<I;V++)R[V]=O.i(V)<<1|O.i(V-1)>>>31;return new o(R,O.h)}function K(O,I){var R=I>>5;I%=32;for(var V=O.g.length-R,j=[],U=0;U<V;U++)j[U]=0<I?O.i(U+R)>>>I|O.i(U+R+1)<<32-I:O.i(U+R);return new o(j,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,sN=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=m,Ea=o}).apply(typeof gD<"u"?gD:typeof self<"u"?self:typeof window<"u"?window:{});var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rN,Jh,aN,Vg,j0,oN,lN,cN;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,E){return g==Array.prototype||g==Object.prototype||(g[T]=E.value),g};function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof dg=="object"&&dg];for(var T=0;T<g.length;++T){var E=g[T];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function s(g,T){if(T)t:{var E=i;g=g.split(".");for(var k=0;k<g.length-1;k++){var $=g[k];if(!($ in E))break t;E=E[$]}g=g[g.length-1],k=E[g],T=T(k),T!=k&&T!=null&&t(E,g,{configurable:!0,writable:!0,value:T})}}function r(g,T){g instanceof String&&(g+="");var E=0,k=!1,$={next:function(){if(!k&&E<g.length){var it=E++;return{value:T(it,g[it]),done:!1}}return k=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(g){return g||function(){return r(this,function(T,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function h(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function f(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function m(g,T,E){return g.call.apply(g.bind,arguments)}function y(g,T,E){if(!g)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,k),g.apply(T,$)}}return function(){return g.apply(T,arguments)}}function _(g,T,E){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,_.apply(null,arguments)}function b(g,T){var E=Array.prototype.slice.call(arguments,1);return function(){var k=E.slice();return k.push.apply(k,arguments),g.apply(this,k)}}function w(g,T){function E(){}E.prototype=T.prototype,g.aa=T.prototype,g.prototype=new E,g.prototype.constructor=g,g.Qb=function(k,$,it){for(var _t=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)_t[Xt-2]=arguments[Xt];return T.prototype[$].apply(k,_t)}}function x(g){const T=g.length;if(0<T){const E=Array(T);for(let k=0;k<T;k++)E[k]=g[k];return E}return[]}function A(g,T){for(let E=1;E<arguments.length;E++){const k=arguments[E];if(h(k)){const $=g.length||0,it=k.length||0;g.length=$+it;for(let _t=0;_t<it;_t++)g[$+_t]=k[_t]}else g.push(k)}}class M{constructor(T,E){this.i=T,this.j=E,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function N(g){return/^[\s\xa0]*$/.test(g)}function L(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function H(g){return H[" "](g),g}H[" "]=function(){};var F=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function K(g,T,E){for(const k in g)T.call(E,g[k],k,g)}function O(g,T){for(const E in g)T.call(void 0,g[E],E,g)}function I(g){const T={};for(const E in g)T[E]=g[E];return T}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,T){let E,k;for(let $=1;$<arguments.length;$++){k=arguments[$];for(E in k)g[E]=k[E];for(let it=0;it<R.length;it++)E=R[it],Object.prototype.hasOwnProperty.call(k,E)&&(g[E]=k[E])}}function j(g){var T=1;g=g.split(":");const E=[];for(;0<T&&g.length;)E.push(g.shift()),T--;return g.length&&E.push(g.join(":")),E}function U(g){c.setTimeout(()=>{throw g},0)}function B(){var g=tt;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class At{constructor(){this.h=this.g=null}add(T,E){const k=St.get();k.set(T,E),this.h?this.h.next=k:this.g=k,this.h=k}}var St=new M(()=>new Q,g=>g.reset());class Q{constructor(){this.next=this.g=this.h=null}set(T,E){this.h=T,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let at,yt=!1,tt=new At,P=()=>{const g=c.Promise.resolve(void 0);at=()=>{g.then(G)}};var G=()=>{for(var g;g=B();){try{g.h.call(g.g)}catch(E){U(E)}var T=St;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}yt=!1};function st(){this.s=this.s,this.C=this.C}st.prototype.s=!1,st.prototype.ma=function(){this.s||(this.s=!0,this.N())},st.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var lt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const E=()=>{};c.addEventListener("test",E,T),c.removeEventListener("test",E,T)}catch{}return g}();function mt(g,T){if(W.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var E=this.type=g.type,k=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(F){t:{try{H(T.nodeName);var $=!0;break t}catch{}$=!1}$||(T=null)}}else E=="mouseover"?T=g.fromElement:E=="mouseout"&&(T=g.toElement);this.relatedTarget=T,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:gt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&mt.aa.h.call(this)}}w(mt,W);var gt={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function pt(g,T,E,k,$){this.listener=g,this.proxy=null,this.src=T,this.type=E,this.capture=!!k,this.ha=$,this.key=++Tt,this.da=this.fa=!1}function Pt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ft(g){this.src=g,this.g={},this.h=0}Ft.prototype.add=function(g,T,E,k,$){var it=g.toString();g=this.g[it],g||(g=this.g[it]=[],this.h++);var _t=ve(g,T,k,$);return-1<_t?(T=g[_t],E||(T.fa=!1)):(T=new pt(T,this.src,it,!!k,$),T.fa=E,g.push(T)),T};function wt(g,T){var E=T.type;if(E in g.g){var k=g.g[E],$=Array.prototype.indexOf.call(k,T,void 0),it;(it=0<=$)&&Array.prototype.splice.call(k,$,1),it&&(Pt(T),g.g[E].length==0&&(delete g.g[E],g.h--))}}function ve(g,T,E,k){for(var $=0;$<g.length;++$){var it=g[$];if(!it.da&&it.listener==T&&it.capture==!!E&&it.ha==k)return $}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),Ir={};function Bi(g,T,E,k,$){if(Array.isArray(T)){for(var it=0;it<T.length;it++)Bi(g,T[it],E,k,$);return null}return E=Ad(E),g&&g[Ct]?g.K(T,E,f(k)?!!k.capture:!1,$):Wn(g,T,E,!1,k,$)}function Wn(g,T,E,k,$,it){if(!T)throw Error("Invalid event type");var _t=f($)?!!$.capture:!!$,Xt=Tl(g);if(Xt||(g[Xe]=Xt=new Ft(g)),E=Xt.add(T,E,k,_t,it),E.proxy)return E;if(k=Ay(),E.proxy=k,k.src=g,k.listener=E,g.addEventListener)lt||($=_t),$===void 0&&($=!1),g.addEventListener(T.toString(),k,$);else if(g.attachEvent)g.attachEvent(za(T.toString()),k);else if(g.addListener&&g.removeListener)g.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ay(){function g(E){return T.call(g.src,g.listener,E)}const T=Iy;return g}function Tu(g,T,E,k,$){if(Array.isArray(T))for(var it=0;it<T.length;it++)Tu(g,T[it],E,k,$);else k=f(k)?!!k.capture:!!k,E=Ad(E),g&&g[Ct]?(g=g.i,T=String(T).toString(),T in g.g&&(it=g.g[T],E=ve(it,E,k,$),-1<E&&(Pt(it[E]),Array.prototype.splice.call(it,E,1),it.length==0&&(delete g.g[T],g.h--)))):g&&(g=Tl(g))&&(T=g.g[T.toString()],g=-1,T&&(g=ve(T,E,k,$)),(E=-1<g?T[g]:null)&&bl(E))}function bl(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[Ct])wt(T.i,g);else{var E=g.type,k=g.proxy;T.removeEventListener?T.removeEventListener(E,k,g.capture):T.detachEvent?T.detachEvent(za(E),k):T.addListener&&T.removeListener&&T.removeListener(k),(E=Tl(T))?(wt(E,g),E.h==0&&(E.src=null,T[Xe]=null)):Pt(g)}}}function za(g){return g in Ir?Ir[g]:Ir[g]="on"+g}function Iy(g,T){if(g.da)g=!0;else{T=new mt(T,this);var E=g.listener,k=g.ha||g.src;g.fa&&bl(g),g=E.call(k,T)}return g}function Tl(g){return g=g[Xe],g instanceof Ft?g:null}var wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ad(g){return typeof g=="function"?g:(g[wu]||(g[wu]=function(T){return g.handleEvent(T)}),g[wu])}function ke(){st.call(this),this.i=new Ft(this),this.M=this,this.F=null}w(ke,st),ke.prototype[Ct]=!0,ke.prototype.removeEventListener=function(g,T,E,k){Tu(this,g,T,E,k)};function oe(g,T){var E,k=g.F;if(k)for(E=[];k;k=k.F)E.push(k);if(g=g.M,k=T.type||T,typeof T=="string")T=new W(T,g);else if(T instanceof W)T.target=T.target||g;else{var $=T;T=new W(k,g),V(T,$)}if($=!0,E)for(var it=E.length-1;0<=it;it--){var _t=T.g=E[it];$=ii(_t,k,!0,T)&&$}if(_t=T.g=g,$=ii(_t,k,!0,T)&&$,$=ii(_t,k,!1,T)&&$,E)for(it=0;it<E.length;it++)_t=T.g=E[it],$=ii(_t,k,!1,T)&&$}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var E=g.g[T],k=0;k<E.length;k++)Pt(E[k]);delete g.g[T],g.h--}}this.F=null},ke.prototype.K=function(g,T,E,k){return this.i.add(String(g),T,!1,E,k)},ke.prototype.L=function(g,T,E,k){return this.i.add(String(g),T,!0,E,k)};function ii(g,T,E,k){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var $=!0,it=0;it<T.length;++it){var _t=T[it];if(_t&&!_t.da&&_t.capture==E){var Xt=_t.listener,on=_t.ha||_t.src;_t.fa&&wt(g.i,_t),$=Xt.call(on,k)!==!1&&$}}return $&&!k.defaultPrevented}function Dn(g,T,E){if(typeof g=="function")E&&(g=_(g,E));else if(g&&typeof g.handleEvent=="function")g=_(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:c.setTimeout(g,T||0)}function Id(g){g.g=Dn(()=>{g.g=null,g.i&&(g.i=!1,Id(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class Ry extends st{constructor(T,E){super(),this.m=T,this.l=E,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Id(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ha(g){st.call(this),this.h=g,this.g={}}w(Ha,st);var qa=[];function Ga(g){K(g.g,function(T,E){this.g.hasOwnProperty(E)&&bl(T)},g),g.g={}}Ha.prototype.N=function(){Ha.aa.N.call(this),Ga(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=c.JSON.stringify,wl=c.JSON.parse,Wa=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Eu(){}Eu.prototype.h=null;function Su(g){return g.h||(g.h=g.i())}function xu(){}var js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bs(){W.call(this,"d")}w(Bs,W);function Au(){W.call(this,"c")}w(Au,W);var ts={},Iu=null;function Rr(){return Iu=Iu||new ke}ts.La="serverreachability";function El(g){W.call(this,ts.La,g)}w(El,W);function Dr(g){const T=Rr();oe(T,new El(T))}ts.STAT_EVENT="statevent";function Rd(g,T){W.call(this,ts.STAT_EVENT,g),this.stat=T}w(Rd,W);function xe(g){const T=Rr();oe(T,new Rd(T,g))}ts.Ma="timingevent";function an(g,T){W.call(this,ts.Ma,g),this.size=T}w(an,W);function Qe(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},T)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function Ru(g,T,E,k,$,it){g.info(function(){if(g.g)if(it)for(var _t="",Xt=it.split("&"),on=0;on<Xt.length;on++){var Qt=Xt[on].split("=");if(1<Qt.length){var gn=Qt[0];Qt=Qt[1];var ln=gn.split("_");_t=2<=ln.length&&ln[1]=="type"?_t+(gn+"="+Qt+"&"):_t+(gn+"=redacted&")}}else _t=null;else _t=it;return"XMLHTTP REQ ("+k+") [attempt "+$+"]: "+T+`
`+E+`
`+_t})}function Dy(g,T,E,k,$,it,_t){g.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+$+"]: "+T+`
`+E+`
`+it+" "+_t})}function Cr(g,T,E,k){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Ya(g,E)+(k?" "+k:"")})}function Dd(g,T){g.info(function(){return"TIMEOUT: "+T})}vi.prototype.info=function(){};function Ya(g,T){if(!g.g)return T;if(!T)return null;try{var E=JSON.parse(T);if(E){for(g=0;g<E.length;g++)if(Array.isArray(E[g])){var k=E[g];if(!(2>k.length)){var $=k[1];if(Array.isArray($)&&!(1>$.length)){var it=$[0];if(it!="noop"&&it!="stop"&&it!="close")for(var _t=1;_t<$.length;_t++)$[_t]=""}}}}return Fi(E)}catch{return T}}var Mr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},es;function ns(){}w(ns,Eu),ns.prototype.g=function(){return new XMLHttpRequest},ns.prototype.i=function(){return{}},es=new ns;function Fn(g,T,E,k){this.j=g,this.i=T,this.l=E,this.R=k||1,this.U=new Ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ue}function Ue(){this.i=null,this.g="",this.h=!1}var Du={},Sl={};function Ui(g,T,E){g.L=1,g.v=Za(si(T)),g.m=E,g.P=!0,Us(g,null)}function Us(g,T){g.F=Date.now(),Ka(g),g.A=si(g.v);var E=g.A,k=g.R;Array.isArray(k)||(k=[String(k)]),Nu(E.i,"t",k),g.C=0,E=g.j.J,g.h=new Ue,g.g=Gd(g.j,E?T:null,!g.m),0<g.O&&(g.M=new Ry(_(g.Y,g,g.g),g.O)),T=g.U,E=g.g,k=g.ca;var $="readystatechange";Array.isArray($)||($&&(qa[0]=$.toString()),$=qa);for(var it=0;it<$.length;it++){var _t=Bi(E,$[it],k||T.handleEvent,!1,T.h||T);if(!_t)break;T.g[_t.key]=_t}T=g.H?I(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),Dr(),Ru(g.i,g.u,g.A,g.l,g.R,g.m)}Fn.prototype.ca=function(g){g=g.target;const T=this.M;T&&Ei(g)==3?T.j():this.Y(g)},Fn.prototype.Y=function(g){try{if(g==this.g)t:{const ln=Ei(this.g);var T=this.g.Ba();const $s=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||Ld(this.g)))){this.J||ln!=4||T==7||(T==8||0>=$s?Dr(3):Dr(2)),Pr(this);var E=this.g.Z();this.X=E;e:if(Cd(this)){var k=Ld(this.g);g="";var $=k.length,it=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),is(this);var _t="";break e}this.h.i=new c.TextDecoder}for(T=0;T<$;T++)this.h.h=!0,g+=this.h.i.decode(k[T],{stream:!(it&&T==$-1)});k.length=0,this.h.g+=g,this.C=0,_t=this.h.g}else _t=this.g.oa();if(this.o=E==200,Dy(this.i,this.u,this.A,this.l,this.R,ln,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Xt,on=this.g;if((Xt=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Xt)){var Qt=Xt;break e}}Qt=null}if(E=Qt)Cr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$a(this,E);else{this.o=!1,this.s=3,xe(12),wn(this),is(this);break t}}if(this.P){E=!0;let En;for(;!this.J&&this.C<_t.length;)if(En=Md(this,_t),En==Sl){ln==4&&(this.s=4,xe(14),E=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Du){this.s=4,xe(15),Cr(this.i,this.l,_t,"[Invalid Chunk]"),E=!1;break}else Cr(this.i,this.l,En,null),$a(this,En);if(Cd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||_t.length!=0||this.h.h||(this.s=1,xe(16),E=!1),this.o=this.o&&E,!E)Cr(this.i,this.l,_t,"[Invalid Chunked Response]"),wn(this),is(this);else if(0<_t.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+_t.length),ao(gn),gn.M=!0,xe(11))}}else Cr(this.i,this.l,_t,null),$a(this,_t);ln==4&&wn(this),this.o&&!this.J&&(ln==4?zd(this.j,this):(this.o=!1,Ka(this)))}else Oy(this.g),E==400&&0<_t.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),wn(this),is(this)}}}catch{}finally{}};function Cd(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Md(g,T){var E=g.C,k=T.indexOf(`
`,E);return k==-1?Sl:(E=Number(T.substring(E,k)),isNaN(E)?Du:(k+=1,k+E>T.length?Sl:(T=T.slice(k,k+E),g.C=k+E,T)))}Fn.prototype.cancel=function(){this.J=!0,wn(this)};function Ka(g){g.S=Date.now()+g.I,Pd(g,g.I)}function Pd(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Qe(_(g.ba,g),T)}function Pr(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Fn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Dd(this.i,this.A),this.L!=2&&(Dr(),xe(17)),wn(this),this.s=2,is(this)):Pd(this,this.S-g)};function is(g){g.j.G==0||g.J||zd(g.j,g)}function wn(g){Pr(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,Ga(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function $a(g,T){try{var E=g.j;if(E.G!=0&&(E.g==g||Cu(E.h,g))){if(!g.K&&Cu(E.h,g)&&E.G==3){try{var k=E.Da.g.parse(T)}catch{k=null}if(Array.isArray(k)&&k.length==3){var $=k;if($[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<g.F)Vl(E),Ol(E);else break t;Fu(E),xe(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=Qe(_(E.Za,E),6e3));if(1>=Al(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ks(E,11)}else if((g.K||E.g==g)&&Vl(E),!N(T))for($=E.Da.g.parse(T),T=0;T<$.length;T++){let Qt=$[T];if(E.T=Qt[0],Qt=Qt[1],E.G==2)if(Qt[0]=="c"){E.K=Qt[1],E.ia=Qt[2];const gn=Qt[3];gn!=null&&(E.la=gn,E.j.info("VER="+E.la));const ln=Qt[4];ln!=null&&(E.Aa=ln,E.j.info("SVER="+E.Aa));const $s=Qt[5];$s!=null&&typeof $s=="number"&&0<$s&&(k=1.5*$s,E.L=k,E.j.info("backChannelRequestTimeoutMs_="+k)),k=E;const En=g.g;if(En){const us=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var it=k.h;it.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||(it.j=it.l,it.g=new Set,it.h&&(Il(it,it.h),it.h=null))}if(k.D){const zu=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(k.ya=zu,me(k.I,k.D,zu))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-g.F,E.j.info("Handshake RTT: "+E.R+"ms")),k=E;var _t=g;if(k.qa=qd(k,k.J?k.ia:null,k.W),_t.K){Un(k.h,_t);var Xt=_t,on=k.L;on&&(Xt.I=on),Xt.B&&(Pr(Xt),Ka(Xt)),k.g=_t}else Fd(k);0<E.i.length&&Nl(E)}else Qt[0]!="stop"&&Qt[0]!="close"||Ks(E,7);else E.G==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Ks(E,7):ju(E):Qt[0]!="noop"&&E.l&&E.l.ta(Qt),E.v=0)}}Dr(4)}catch{}}var kd=class{constructor(g,T){this.g=g,this.map=T}};function zs(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Al(g){return g.h?1:g.g?g.g.size:0}function Cu(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Il(g,T){g.g?g.g.add(T):g.h=T}function Un(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}zs.prototype.cancel=function(){if(this.i=Mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Mu(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const E of g.g.values())T=T.concat(E.D);return T}return x(g.i)}function Cy(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(h(g)){for(var T=[],E=g.length,k=0;k<E;k++)T.push(g[k]);return T}T=[],E=0;for(k in g)T[E++]=g[k];return T}function Rl(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(h(g)||typeof g=="string"){var T=[];g=g.length;for(var E=0;E<g;E++)T.push(E);return T}T=[],E=0;for(const k in g)T[E++]=k;return T}}}function Pu(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(h(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var E=Rl(g),k=Cy(g),$=k.length,it=0;it<$;it++)T.call(void 0,k[it],E&&E[it],g)}var Xa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function My(g,T){if(g){g=g.split("&");for(var E=0;E<g.length;E++){var k=g[E].indexOf("="),$=null;if(0<=k){var it=g[E].substring(0,k);$=g[E].substring(k+1)}else it=g[E];T(it,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ze(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Ze){this.h=g.h,Qa(this,g.j),this.o=g.o,this.g=g.g,kr(this,g.s),this.l=g.l;var T=g.i,E=new qs;E.i=T.i,T.g&&(E.g=new Map(T.g),E.h=T.h),Hs(this,E),this.m=g.m}else g&&(T=String(g).match(Xa))?(this.h=!1,Qa(this,T[1]||"",!0),this.o=bi(T[2]||""),this.g=bi(T[3]||"",!0),kr(this,T[4]),this.l=bi(T[5]||"",!0),Hs(this,T[6]||"",!0),this.m=bi(T[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}Ze.prototype.toString=function(){var g=[],T=this.j;T&&g.push(Ja(T,ku,!0),":");var E=this.g;return(E||T=="file")&&(g.push("//"),(T=this.o)&&g.push(Ja(T,ku,!0),"@"),g.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&g.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&g.push("/"),g.push(Ja(E,E.charAt(0)=="/"?Py:Ou,!0))),(E=this.i.toString())&&g.push("?",E),(E=this.m)&&g.push("#",Ja(E,Dl)),g.join("")};function si(g){return new Ze(g)}function Qa(g,T,E){g.j=E?bi(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function kr(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function Hs(g,T,E){T instanceof qs?(g.i=T,Nd(g.i,g.h)):(E||(T=Ja(T,ky)),g.i=new qs(T,g.h))}function me(g,T,E){g.i.set(T,E)}function Za(g){return me(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function bi(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ja(g,T,E){return typeof g=="string"?(g=encodeURI(g).replace(T,Od),E&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Od(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ku=/[#\/\?@]/g,Ou=/[#\?:]/g,Py=/[#\?]/g,ky=/[#\?@]/g,Dl=/#/g;function qs(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function Ti(g){g.g||(g.g=new Map,g.h=0,g.i&&My(g.i,function(T,E){g.add(decodeURIComponent(T.replace(/\+/g," ")),E)}))}n=qs.prototype,n.add=function(g,T){Ti(this),this.i=null,g=ss(this,g);var E=this.g.get(g);return E||this.g.set(g,E=[]),E.push(T),this.h+=1,this};function Gs(g,T){Ti(g),T=ss(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function Ws(g,T){return Ti(g),T=ss(g,T),g.g.has(T)}n.forEach=function(g,T){Ti(this),this.g.forEach(function(E,k){E.forEach(function($){g.call(T,$,k,this)},this)},this)},n.na=function(){Ti(this);const g=Array.from(this.g.values()),T=Array.from(this.g.keys()),E=[];for(let k=0;k<T.length;k++){const $=g[k];for(let it=0;it<$.length;it++)E.push(T[k])}return E},n.V=function(g){Ti(this);let T=[];if(typeof g=="string")Ws(this,g)&&(T=T.concat(this.g.get(ss(this,g))));else{g=Array.from(this.g.values());for(let E=0;E<g.length;E++)T=T.concat(g[E])}return T},n.set=function(g,T){return Ti(this),this.i=null,g=ss(this,g),Ws(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},n.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function Nu(g,T,E){Gs(g,T),0<E.length&&(g.i=null,g.g.set(ss(g,T),x(E)),g.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(var E=0;E<T.length;E++){var k=T[E];const it=encodeURIComponent(String(k)),_t=this.V(k);for(k=0;k<_t.length;k++){var $=it;_t[k]!==""&&($+="="+encodeURIComponent(String(_t[k]))),g.push($)}}return this.i=g.join("&")};function ss(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Nd(g,T){T&&!g.j&&(Ti(g),g.i=null,g.g.forEach(function(E,k){var $=k.toLowerCase();k!=$&&(Gs(this,k),Nu(this,$,E))},g)),g.j=T}function to(g,T){const E=new vi;if(c.Image){const k=new Image;k.onload=b(wi,E,"TestLoadImage: loaded",!0,T,k),k.onerror=b(wi,E,"TestLoadImage: error",!1,T,k),k.onabort=b(wi,E,"TestLoadImage: abort",!1,T,k),k.ontimeout=b(wi,E,"TestLoadImage: timeout",!1,T,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=g}else T(!1)}function zi(g,T){const E=new vi,k=new AbortController,$=setTimeout(()=>{k.abort(),wi(E,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:k.signal}).then(it=>{clearTimeout($),it.ok?wi(E,"TestPingServer: ok",!0,T):wi(E,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout($),wi(E,"TestPingServer: error",!1,T)})}function wi(g,T,E,k,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),k(E)}catch{}}function eo(){this.g=new Wa}function rs(g,T,E){const k=E||"";try{Pu(g,function($,it){let _t=$;f($)&&(_t=Fi($)),T.push(k+it+"="+encodeURIComponent(_t))})}catch($){throw T.push(k+"type="+encodeURIComponent("_badmap")),$}}function Or(g){this.l=g.Ub||null,this.j=g.eb||!1}w(Or,Eu),Or.prototype.g=function(){return new Ys(this.l,this.j)},Or.prototype.i=function(g){return function(){return g}}({});function Ys(g,T){ke.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ys,ke),n=Ys.prototype,n.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,os(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||c).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vu(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vu(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?as(this):os(this),this.readyState==3&&Vu(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,as(this))},n.Qa=function(g){this.g&&(this.response=g,as(this))},n.ga=function(){this.g&&as(this)};function as(g){g.readyState=4,g.l=null,g.j=null,g.v=null,os(g)}n.setRequestHeader=function(g,T){this.u.append(g,T)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var E=T.next();!E.done;)E=E.value,g.push(E[0]+": "+E[1]),E=T.next();return g.join(`\r
`)};function os(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Lu(g){let T="";return K(g,function(E,k){T+=k,T+=":",T+=E,T+=`\r
`}),T}function mn(g,T,E){t:{for(k in E){var k=!1;break t}k=!0}k||(E=Lu(E),typeof g=="string"?E!=null&&encodeURIComponent(String(E)):me(g,T,E))}function se(g){ke.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(se,ke);var Cl=/^https?$/i,no=["POST","PUT"];n=se.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,T,E,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():es.g(),this.v=this.o?Su(this.o):Su(es),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(it){Vd(this,it);return}if(g=E||"",E=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var $ in k)E.set($,k[$]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const it of k.keys())E.set(it,k.get(it));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(E.keys()).find(it=>it.toLowerCase()=="content-type"),$=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(no,T,void 0))||k||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[it,_t]of E)this.g.setRequestHeader(it,_t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{io(this),this.u=!0,this.g.send(g),this.u=!1}catch(it){Vd(this,it)}};function Vd(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,Ml(g),ls(g)}function Ml(g){g.A||(g.A=!0,oe(g,"complete"),oe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,oe(this,"complete"),oe(this,"abort"),ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pl(this):this.bb())},n.bb=function(){Pl(this)};function Pl(g){if(g.h&&typeof o<"u"&&(!g.v[1]||Ei(g)!=4||g.Z()!=2)){if(g.u&&Ei(g)==4)Dn(g.Ea,0,g);else if(oe(g,"readystatechange"),Ei(g)==4){g.h=!1;try{const _t=g.Z();t:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var E;if(!(E=T)){var k;if(k=_t===0){var $=String(g.D).match(Xa)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),k=!Cl.test($?$.toLowerCase():"")}E=k}if(E)oe(g,"complete"),oe(g,"success");else{g.m=6;try{var it=2<Ei(g)?g.g.statusText:""}catch{it=""}g.l=it+" ["+g.Z()+"]",Ml(g)}}finally{ls(g)}}}}function ls(g,T){if(g.g){io(g);const E=g.g,k=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||oe(g,"ready");try{E.onreadystatechange=k}catch{}}}function io(g){g.I&&(c.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function Ei(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),wl(T)}};function Ld(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Oy(g){const T={};g=(g.g&&2<=Ei(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<g.length;k++){if(N(g[k]))continue;var E=j(g[k]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const it=T[$]||[];T[$]=it,it.push(E)}O(T,function(k){return k.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(g,T,E){return E&&E.internalChannelParams&&E.internalChannelParams[g]||T}function kl(g){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,g),this.cb=so("retryDelaySeedMs",1e4,g),this.Wa=so("forwardChannelMaxRetries",2,g),this.wa=so("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new zs(g&&g.concurrentRequestLimit),this.Da=new eo,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kl.prototype,n.la=8,n.G=1,n.connect=function(g,T,E,k){xe(0),this.W=g,this.H=T||{},E&&k!==void 0&&(this.H.OSID=E,this.H.OAID=k),this.F=this.X,this.I=qd(this,null,this.W),Nl(this)};function ju(g){if(jd(g),g.G==3){var T=g.U++,E=si(g.I);if(me(E,"SID",g.K),me(E,"RID",T),me(E,"TYPE","terminate"),ro(g,E),T=new Fn(g,g.j,T),T.L=2,T.v=Za(si(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(T.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=T.v,E=!0),E||(T.g=Gd(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Ka(T)}Hd(g)}function Ol(g){g.g&&(ao(g),g.g.cancel(),g.g=null)}function jd(g){Ol(g),g.u&&(c.clearTimeout(g.u),g.u=null),Vl(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function Nl(g){if(!xl(g.h)&&!g.s){g.s=!0;var T=g.Ga;at||P(),yt||(at(),yt=!0),tt.add(T,g),g.B=0}}function Ny(g,T){return Al(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Qe(_(g.Ga,g,T),Uu(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const $=new Fn(this,this.j,g);let it=this.o;if(this.S&&(it?(it=I(it),V(it,this.S)):it=this.S),this.m!==null||this.O||($.H=it,it=null),this.P)t:{for(var T=0,E=0;E<this.i.length;E++){e:{var k=this.i[E];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break e}k=void 0}if(k===void 0)break;if(T+=k,4096<T){T=E;break t}if(T===4096||E===this.i.length-1){T=E+1;break t}}T=1e3}else T=1e3;T=Bd(this,$,T),E=si(this.I),me(E,"RID",g),me(E,"CVER",22),this.D&&me(E,"X-HTTP-Session-Id",this.D),ro(this,E),it&&(this.O?T="headers="+encodeURIComponent(String(Lu(it)))+"&"+T:this.m&&mn(E,this.m,it)),Il(this.h,$),this.Ua&&me(E,"TYPE","init"),this.P?(me(E,"$req",T),me(E,"SID","null"),$.T=!0,Ui($,E,null)):Ui($,E,T),this.G=2}}else this.G==3&&(g?Bu(this,g):this.i.length==0||xl(this.h)||Bu(this))};function Bu(g,T){var E;T?E=T.l:E=g.U++;const k=si(g.I);me(k,"SID",g.K),me(k,"RID",E),me(k,"AID",g.T),ro(g,k),g.m&&g.o&&mn(k,g.m,g.o),E=new Fn(g,g.j,E,g.B+1),g.m===null&&(E.H=g.o),T&&(g.i=T.D.concat(g.i)),T=Bd(g,E,1e3),E.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Il(g.h,E),Ui(E,k,T)}function ro(g,T){g.H&&K(g.H,function(E,k){me(T,k,E)}),g.l&&Pu({},function(E,k){me(T,k,E)})}function Bd(g,T,E){E=Math.min(g.i.length,E);var k=g.l?_(g.l.Na,g.l,g):null;t:{var $=g.i;let it=-1;for(;;){const _t=["count="+E];it==-1?0<E?(it=$[0].g,_t.push("ofs="+it)):it=0:_t.push("ofs="+it);let Xt=!0;for(let on=0;on<E;on++){let Qt=$[on].g;const gn=$[on].map;if(Qt-=it,0>Qt)it=Math.max(0,$[on].g-100),Xt=!1;else try{rs(gn,_t,"req"+Qt+"_")}catch{k&&k(gn)}}if(Xt){k=_t.join("&");break t}}}return g=g.i.splice(0,E),T.D=g,k}function Fd(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;at||P(),yt||(at(),yt=!0),tt.add(T,g),g.v=0}}function Fu(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Qe(_(g.Fa,g),Uu(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,Ud(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Qe(_(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),Ol(this),Ud(this))};function ao(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function Ud(g){g.g=new Fn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=si(g.qa);me(T,"RID","rpc"),me(T,"SID",g.K),me(T,"AID",g.T),me(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&me(T,"TO",g.ja),me(T,"TYPE","xmlhttp"),ro(g,T),g.m&&g.o&&mn(T,g.m,g.o),g.L&&(g.g.I=g.L);var E=g.g;g=g.ia,E.L=1,E.v=Za(si(T)),E.m=null,E.P=!0,Us(E,g)}n.Za=function(){this.C!=null&&(this.C=null,Ol(this),Fu(this),xe(19))};function Vl(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function zd(g,T){var E=null;if(g.g==T){Vl(g),ao(g),g.g=null;var k=2}else if(Cu(g.h,T))E=T.D,Un(g.h,T),k=1;else return;if(g.G!=0){if(T.o)if(k==1){E=T.m?T.m.length:0,T=Date.now()-T.F;var $=g.B;k=Rr(),oe(k,new an(k,E)),Nl(g)}else Fd(g);else if($=T.s,$==3||$==0&&0<T.X||!(k==1&&Ny(g,T)||k==2&&Fu(g)))switch(E&&0<E.length&&(T=g.h,T.i=T.i.concat(E)),$){case 1:Ks(g,5);break;case 4:Ks(g,10);break;case 3:Ks(g,6);break;default:Ks(g,2)}}}function Uu(g,T){let E=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(E*=2),E*T}function Ks(g,T){if(g.j.info("Error code "+T),T==2){var E=_(g.fb,g),k=g.Xa;const $=!k;k=new Ze(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qa(k,"https"),Za(k),$?to(k.toString(),E):zi(k.toString(),E)}else xe(2);g.G=0,g.l&&g.l.sa(T),Hd(g),jd(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Hd(g){if(g.G=0,g.ka=[],g.l){const T=Mu(g.h);(T.length!=0||g.i.length!=0)&&(A(g.ka,T),A(g.ka,g.i),g.h.i.length=0,x(g.i),g.i.length=0),g.l.ra()}}function qd(g,T,E){var k=E instanceof Ze?si(E):new Ze(E);if(k.g!="")T&&(k.g=T+"."+k.g),kr(k,k.s);else{var $=c.location;k=$.protocol,T=T?T+"."+$.hostname:$.hostname,$=+$.port;var it=new Ze(null);k&&Qa(it,k),T&&(it.g=T),$&&kr(it,$),E&&(it.l=E),k=it}return E=g.D,T=g.ya,E&&T&&me(k,E,T),me(k,"VER",g.la),ro(g,k),k}function Gd(g,T,E){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new se(new Or({eb:E})):new se(g.pa),T.Ha(g.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wd(){}n=Wd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ll(){}Ll.prototype.g=function(g,T){return new zn(g,T)};function zn(g,T){ke.call(this),this.g=new kl(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!N(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!N(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new cs(this)}w(zn,ke),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){ju(this.g)},zn.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var E={};E.__data__=g,g=E}else this.u&&(E={},E.__data__=Fi(g),g=E);T.i.push(new kd(T.Ya++,g)),T.G==3&&Nl(T)},zn.prototype.N=function(){this.g.l=null,delete this.j,ju(this.g),delete this.g,zn.aa.N.call(this)};function Yd(g){Bs.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){t:{for(const E in T){g=E;break t}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}w(Yd,Bs);function Kd(){Au.call(this),this.status=1}w(Kd,Au);function cs(g){this.g=g}w(cs,Wd),cs.prototype.ua=function(){oe(this.g,"a")},cs.prototype.ta=function(g){oe(this.g,new Yd(g))},cs.prototype.sa=function(g){oe(this.g,new Kd)},cs.prototype.ra=function(){oe(this.g,"b")},Ll.prototype.createWebChannel=Ll.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,cN=function(){return new Ll},lN=function(){return Rr()},oN=ts,j0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mr.NO_ERROR=0,Mr.TIMEOUT=8,Mr.HTTP_ERROR=6,Vg=Mr,Fs.COMPLETE="complete",aN=Fs,xu.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",ke.prototype.listen=ke.prototype.K,Jh=xu,se.prototype.listenOnce=se.prototype.L,se.prototype.getLastError=se.prototype.Ka,se.prototype.getLastErrorCode=se.prototype.Ba,se.prototype.getStatus=se.prototype.Z,se.prototype.getResponseJson=se.prototype.Oa,se.prototype.getResponseText=se.prototype.oa,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Ha,rN=se}).apply(typeof dg<"u"?dg:typeof self<"u"?self:typeof window<"u"?window:{});const pD="@firebase/firestore",yD="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Gp("@firebase/firestore");function Tc(){return sl.logLevel}function dt(n,...t){if(sl.logLevel<=Kt.DEBUG){const e=t.map(Dw);sl.debug(`Firestore (${pu}): ${n}`,...e)}}function Ge(n,...t){if(sl.logLevel<=Kt.ERROR){const e=t.map(Dw);sl.error(`Firestore (${pu}): ${n}`,...e)}}function Gf(n,...t){if(sl.logLevel<=Kt.WARN){const e=t.map(Dw);sl.warn(`Firestore (${pu}): ${n}`,...e)}}function Dw(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,uN(n,i,e)}function uN(n,t,e){let i=`FIRESTORE (${pu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ge(i),new Error(i)}function Rt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||uN(t,s,i)}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends Ji{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(kn.UNAUTHENTICATED))}shutdown(){}}class EW{constructor(t){this.t=t,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Rt(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,e(h)):Promise.resolve();let r=new Ms;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ms,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const h=r;t.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},c=h=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ms)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Rt(typeof i.accessToken=="string",31837,{l:i}),new TW(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Rt(t===null||typeof t=="string",2055,{h:t}),new kn(t)}}class SW{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xW{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new SW(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _D{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AW{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Oi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Rt(this.o===void 0,3512);const i=r=>{r.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,dt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _D(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Rt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new _D(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IW(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=IW(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<e&&(i+=t.charAt(s[r]%62))}return i}}function jt(n,t){return n<t?-1:n>t?1:0}function B0(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),r=t.charAt(i);if(s!==r)return yb(s)===yb(r)?jt(s,r):yb(s)?1:-1}return jt(n.length,t.length)}const RW=55296,DW=57343;function yb(n){const t=n.charCodeAt(0);return t>=RW&&t<=DW}function Gc(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}function hN(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="__name__";class vs{constructor(t,e,i){e===void 0?e=0:e>t.length&&Et(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Et(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return vs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof vs?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const r=vs.compareSegments(t.get(s),e.get(s));if(r!==0)return r}return jt(t.length,e.length)}static compareSegments(t,e){const i=vs.isNumericId(t),s=vs.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?vs.extractNumericId(t).compare(vs.extractNumericId(e)):B0(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ea.fromString(t.substring(4,t.length-2))}}class re extends vs{construct(t,e,i){return new re(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new vt(ht.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new re(e)}static emptyPath(){return new re([])}}const CW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Me extends vs{construct(t,e,i){return new Me(t,e,i)}static isValidIdentifier(t){return CW.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Me.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vD}static keyField(){return new Me([vD])}static fromServerFormat(t){const e=[];let i="",s=0;const r=()=>{if(i.length===0)throw new vt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new vt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const h=t[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new vt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=h,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(i+=c,s++):(r(),s++)}if(r(),o)throw new vt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Me(e)}static emptyPath(){return new Me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.path=t}static fromPath(t){return new bt(re.fromString(t))}static fromName(t){return new bt(re.fromString(t).popFirst(5))}static empty(){return new bt(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return re.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n,t,e){if(!e)throw new vt(ht.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function MW(n,t,e,i){if(t===!0&&i===!0)throw new vt(ht.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function bD(n){if(!bt.isDocumentKey(n))throw new vt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TD(n){if(bt.isDocumentKey(n))throw new vt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Mw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function Ns(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new vt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Mw(n);throw new vt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n,t){const e={typeString:n};return t&&(e.value=t),e}function gd(n,t){if(!dN(n))throw new vt(ht.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const o=n[i];if(s&&typeof o!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){e=`Expected '${i}' field to equal '${r.value}'`;break}}if(e)throw new vt(ht.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=-62135596800,ED=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(t){return fe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*ED);return new fe(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<wD)throw new vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ED}_compareTo(t){return this.seconds===t.seconds?jt(this.nanoseconds,t.nanoseconds):jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(gd(t,fe._jsonSchema))return new fe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-wD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:sn("string",fe._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new fe(0,0))}static max(){return new Mt(new fe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;class yp{constructor(t,e,i,s){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=s}}function F0(n){return n.fields.find(t=>t.kind===2)}function Po(n){return n.fields.filter(t=>t.kind!==2)}yp.UNKNOWN_ID=-1;class Lg{constructor(t,e){this.fieldPath=t,this.kind=e}}class Wf{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Wf(0,yi.min())}}function mN(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Mt.fromTimestamp(i===1e9?new fe(e+1,0):new fe(e,i));return new yi(s,bt.empty(),t)}function gN(n){return new yi(n.readTime,n.key,Wc)}class yi{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new yi(Mt.min(),bt.empty(),Wc)}static max(){return new yi(Mt.max(),bt.empty(),Wc)}}function Pw(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=bt.comparator(n.documentKey,t.documentKey),e!==0?e:jt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n){if(n.code!==ht.FAILED_PRECONDITION||n.message!==pN)throw n;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new X((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(e,r).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof X?e:X.resolve(e)}catch(e){return X.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):X.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):X.reject(e)}static resolve(t){return new X((e,i)=>{e(t)})}static reject(t){return new X((e,i)=>{i(t)})}static waitFor(t){return new X((e,i)=>{let s=0,r=0,o=!1;t.forEach(c=>{++s,c.next(()=>{++r,o&&r===s&&e()},h=>i(h))}),o=!0,r===s&&e()})}static or(t){let e=X.resolve(!1);for(const i of t)e=e.next(s=>s?X.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,r)=>{i.push(e.call(this,s,r))}),this.waitFor(i)}static mapArray(t,e){return new X((i,s)=>{const r=t.length,o=new Array(r);let c=0;for(let h=0;h<r;h++){const f=h;e(t[f]).next(m=>{o[f]=m,++c,c===r&&i(o)},m=>s(m))}})}static doWhile(t,e){return new X((i,s)=>{const r=()=>{t()===!0?e().next(()=>{r()},s):i()};r()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="SimpleDb";class Qp{static open(t,e,i,s){try{return new Qp(e,t.transaction(s,i))}catch(r){throw new yf(e,r)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Ms,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new yf(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=kw(i.target.error);this.S.reject(new yf(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(dt(di,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new kW(e)}}class Sa{static delete(t){return dt(di,"Removing database:",t),No(Bk().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!dw())return!1;if(Sa.F())return!0;const t=fn(),e=Sa.M(t),i=0<e&&e<10,s=_N(t),r=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||r)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,Sa.M(fn())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(dt(di,"Opening database:",this.name),this.db=await new Promise((e,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=r=>{const o=r.target.result;e(o)},s.onblocked=()=>{i(new yf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=r=>{const o=r.target.error;o.name==="VersionError"?i(new vt(ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new vt(ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new yf(t,o))},s.onupgradeneeded=r=>{dt(di,'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const o=r.target.result;this.N.k(o,s.transaction,r.oldVersion,this.version).next(()=>{dt(di,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,s){const r=e==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(t);const c=Qp.open(this.db,t,r?"readonly":"readwrite",i),h=s(c).next(f=>(c.C(),f)).catch(f=>(c.abort(f),X.reject(f))).toPromise();return h.catch(()=>{}),await c.D,h}catch(c){const h=c,f=h.name!=="FirebaseError"&&o<3;if(dt(di,"Transaction failed with error:",h.message,"Retrying:",f),this.close(),!f)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _N(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class PW{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return No(this.U.delete())}}class yf extends vt{constructor(t,e){super(ht.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ba(n){return n.name==="IndexedDbTransactionError"}class kW{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(dt(di,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(dt(di,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),No(i)}add(t){return dt(di,"ADD",this.store.name,t,t),No(this.store.add(t))}get(t){return No(this.store.get(t)).next(e=>(e===void 0&&(e=null),dt(di,"GET",this.store.name,t,e),e))}delete(t){return dt(di,"DELETE",this.store.name,t),No(this.store.delete(t))}count(){return dt(di,"COUNT",this.store.name),No(this.store.count())}J(t,e){const i=this.options(t,e),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const r=s.getAll(i.range);return new X((o,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}{const r=this.cursor(i),o=[];return this.H(r,(c,h)=>{o.push(h)}).next(()=>o)}}Y(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new X((s,r)=>{i.onerror=o=>{r(o.target.error)},i.onsuccess=o=>{s(o.target.result)}})}Z(t,e){dt(di,"DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const s=this.cursor(i);return this.H(s,(r,o,c)=>c.delete())}ee(t,e){let i;e?i=t:(i={},e=t);const s=this.cursor(i);return this.H(s,e)}te(t){const e=this.cursor({});return new X((i,s)=>{e.onerror=r=>{const o=kw(r.target.error);s(o)},e.onsuccess=r=>{const o=r.target.result;o?t(o.primaryKey,o.value).next(c=>{c?o.continue():i()}):i()}})}H(t,e){const i=[];return new X((s,r)=>{t.onerror=o=>{r(o.target.error)},t.onsuccess=o=>{const c=o.target.result;if(!c)return void s();const h=new PW(c),f=e(c.primaryKey,c.value,h);if(f instanceof X){const m=f.catch(y=>(h.done(),X.reject(y)));i.push(m)}h.isDone?s():h.G===null?c.continue():c.continue(h.G)}}).next(()=>X.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function No(n){return new X((t,e)=>{n.onsuccess=i=>{const s=i.target.result;t(s)},n.onerror=i=>{const s=kw(i.target.error);e(s)}})}let SD=!1;function kw(n){const t=Sa.M(fn());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SD||(SD=!0,setTimeout(()=>{throw i},0)),i}}return n}const _f="IndexBackfiller";class OW{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){dt(_f,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ne.ie();dt(_f,`Documents written: ${e}`)}catch(e){Ba(e)?dt(_f,"Ignoring IndexedDB error during index backfill: ",e):await ja(e)}await this.re(6e4)})}}class NW{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.se(e,t))}se(t,e){const i=new Set;let s=e,r=!0;return X.doWhile(()=>r===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(o!==null&&!i.has(o))return dt(_f,`Processing collection: ${o}`),this.oe(t,o,s).next(c=>{s-=c,i.add(o)});r=!1})).next(()=>e-s)}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(s=>this.localStore.localDocuments.getNextDocuments(t,e,s,i).next(r=>{const o=r.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this._e(s,r)).next(c=>(dt(_f,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(t,e,c))).next(()=>o.size)}))}_e(t,e){let i=t;return e.changes.forEach((s,r)=>{const o=gN(r);Pw(o,i)>0&&(i=o)}),new yi(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ti.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=-1;function Zp(n){return n==null}function Yf(n){return n===0&&1/n==-1/0}function vN(n){return typeof n=="number"&&Number.isInteger(n)&&!Yf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="";function Bn(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=xD(t)),t=VW(n.get(e),t);return xD(t)}function VW(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":e+="";break;case _p:e+="";break;default:e+=r}}return e}function xD(n){return n+_p+""}function Es(n){const t=n.length;if(Rt(t>=2,64408,{path:n}),t===2)return Rt(n.charAt(0)===_p&&n.charAt(1)==="",56145,{path:n}),re.emptyPath();const e=t-2,i=[];let s="";for(let r=0;r<t;){const o=n.indexOf(_p,r);switch((o<0||o>e)&&Et(50515,{path:n}),n.charAt(o+1)){case"":const c=n.substring(r,o);let h;s.length===0?h=c:(s+=c,h=s,s=""),i.push(h);break;case"":s+=n.substring(r,o),s+="\0";break;case"":s+=n.substring(r,o+1);break;default:Et(61167,{path:n})}r=o+2}return new re(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="remoteDocuments",pd="owner",mc="owner",Kf="mutationQueues",LW="userId",Ki="mutations",AD="batchId",Ho="userMutationsIndex",ID=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(n,t){return[n,Bn(t)]}function bN(n,t,e){return[n,Bn(t),e]}const jW={},Yc="documentMutations",vp="remoteDocumentsV14",BW=["prefixPath","collectionGroup","readTime","documentId"],Bg="documentKeyIndex",FW=["prefixPath","collectionGroup","documentId"],TN="collectionGroupIndex",UW=["collectionGroup","readTime","prefixPath","documentId"],$f="remoteDocumentGlobal",U0="remoteDocumentGlobalKey",Kc="targets",wN="queryTargetsIndex",zW=["canonicalId","targetId"],$c="targetDocuments",HW=["targetId","path"],Ow="documentTargetsIndex",qW=["path","targetId"],bp="targetGlobalKey",$o="targetGlobal",Xf="collectionParents",GW=["collectionId","parent"],Xc="clientMetadata",WW="clientId",Jp="bundles",YW="bundleId",ty="namedQueries",KW="name",Nw="indexConfiguration",$W="indexId",z0="collectionGroupIndex",XW="collectionGroup",vf="indexState",QW=["indexId","uid"],EN="sequenceNumberIndex",ZW=["uid","sequenceNumber"],bf="indexEntries",JW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SN="documentKeyIndex",tY=["indexId","uid","orderedDocumentKey"],ey="documentOverlays",eY=["userId","collectionPath","documentId"],H0="collectionPathOverlayIndex",nY=["userId","collectionPath","largestBatchId"],xN="collectionGroupOverlayIndex",iY=["userId","collectionGroup","largestBatchId"],Vw="globals",sY="name",AN=[Kf,Ki,Yc,ko,Kc,pd,$o,$c,Xc,$f,Xf,Jp,ty],rY=[...AN,ey],IN=[Kf,Ki,Yc,vp,Kc,pd,$o,$c,Xc,$f,Xf,Jp,ty,ey],RN=IN,Lw=[...RN,Nw,vf,bf],aY=Lw,DN=[...Lw,Vw],oY=DN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends yN{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function dn(n,t){const e=It(n);return Sa.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Fa(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function CN(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t,e){this.comparator=t,this.root=e||Rn.EMPTY}insert(t,e){return new Ee(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(t){return new Ee(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mg(this.root,t,this.comparator,!1)}getReverseIterator(){return new mg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mg(this.root,t,this.comparator,!0)}}class mg{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?i(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Rn{constructor(t,e,i,s,r){this.key=t,this.value=e,this.color=i??Rn.RED,this.left=s??Rn.EMPTY,this.right=r??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,r){return new Rn(t??this.key,e??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,e,i),null):r===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Rn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,e,i,s,r){return this}insert(t,e,i){return new Rn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.comparator=t,this.data=new Ee(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new DD(this.data.getIterator())}getIteratorFrom(t){return new DD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof de)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new de(this.comparator);return e.data=t,e}}class DD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.fields=t,t.sort(Me.comparator)}static empty(){return new ei([])}unionWith(t){let e=new de(Me.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ei(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Gc(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new MN("Invalid base64 string: "+r):r}}(t);return new $e(e)}static fromUint8Array(t){const e=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new $e(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const lY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(n){if(Rt(!!n,39018),typeof n=="string"){let t=0;const e=lY.exec(n);if(Rt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ie(n.seconds),nanos:Ie(n.nanos)}}function Ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Er(n){return typeof n=="string"?$e.fromBase64String(n):$e.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="server_timestamp",kN="__type__",ON="__previous_value__",NN="__local_write_time__";function jw(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[kN])==null?void 0:i.stringValue)===PN}function ny(n){const t=n.mapValue.fields[ON];return jw(t)?ny(t):t}function Qf(n){const t=wr(n.mapValue.fields[NN].timestampValue);return new fe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(t,e,i,s,r,o,c,h,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Tp="(default)";class rl{constructor(t,e){this.projectId=t,this.database=e||Tp}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database===Tp}isEqual(t){return t instanceof rl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="__type__",VN="__max__",_a={mapValue:{fields:{__type__:{stringValue:VN}}}},Fw="__vector__",Qc="value",Fg={nullValue:"NULL_VALUE"};function Ca(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jw(n)?4:LN(n)?9007199254740991:iy(n)?10:11:Et(28295,{value:n})}function Vs(n,t){if(n===t)return!0;const e=Ca(n);if(e!==Ca(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Qf(n).isEqual(Qf(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=wr(s.timestampValue),c=wr(r.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,r){return Er(s.bytesValue).isEqual(Er(r.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,r){return Ie(s.geoPointValue.latitude)===Ie(r.geoPointValue.latitude)&&Ie(s.geoPointValue.longitude)===Ie(r.geoPointValue.longitude)}(n,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ie(s.integerValue)===Ie(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Ie(s.doubleValue),c=Ie(r.doubleValue);return o===c?Yf(o)===Yf(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return Gc(n.arrayValue.values||[],t.arrayValue.values||[],Vs);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},c=r.mapValue.fields||{};if(RD(o)!==RD(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(c[h]===void 0||!Vs(o[h],c[h])))return!1;return!0}(n,t);default:return Et(52216,{left:n})}}function Zf(n,t){return(n.values||[]).find(e=>Vs(e,t))!==void 0}function Ma(n,t){if(n===t)return 0;const e=Ca(n),i=Ca(t);if(e!==i)return jt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,t.booleanValue);case 2:return function(r,o){const c=Ie(r.integerValue||r.doubleValue),h=Ie(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return CD(n.timestampValue,t.timestampValue);case 4:return CD(Qf(n),Qf(t));case 5:return B0(n.stringValue,t.stringValue);case 6:return function(r,o){const c=Er(r),h=Er(o);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(r,o){const c=r.split("/"),h=o.split("/");for(let f=0;f<c.length&&f<h.length;f++){const m=jt(c[f],h[f]);if(m!==0)return m}return jt(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,o){const c=jt(Ie(r.latitude),Ie(o.latitude));return c!==0?c:jt(Ie(r.longitude),Ie(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return MD(n.arrayValue,t.arrayValue);case 10:return function(r,o){var _,b,w,x;const c=r.fields||{},h=o.fields||{},f=(_=c[Qc])==null?void 0:_.arrayValue,m=(b=h[Qc])==null?void 0:b.arrayValue,y=jt(((w=f==null?void 0:f.values)==null?void 0:w.length)||0,((x=m==null?void 0:m.values)==null?void 0:x.length)||0);return y!==0?y:MD(f,m)}(n.mapValue,t.mapValue);case 11:return function(r,o){if(r===_a.mapValue&&o===_a.mapValue)return 0;if(r===_a.mapValue)return 1;if(o===_a.mapValue)return-1;const c=r.fields||{},h=Object.keys(c),f=o.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const _=B0(h[y],m[y]);if(_!==0)return _;const b=Ma(c[h[y]],f[m[y]]);if(b!==0)return b}return jt(h.length,m.length)}(n.mapValue,t.mapValue);default:throw Et(23264,{he:e})}}function CD(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return jt(n,t);const e=wr(n),i=wr(t),s=jt(e.seconds,i.seconds);return s!==0?s:jt(e.nanos,i.nanos)}function MD(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const r=Ma(e[s],i[s]);if(r)return r}return jt(e.length,i.length)}function Zc(n){return G0(n)}function G0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=wr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Er(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return bt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const r of e.values||[])s?s=!1:i+=",",i+=G0(r);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${G0(e.fields[o])}`;return s+"}"}(n.mapValue):Et(61005,{value:n})}function Ug(n){switch(Ca(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ny(n);return t?16+Ug(t):16;case 5:return 2*n.stringValue.length;case 6:return Er(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Ug(r),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Fa(i.fields,(r,o)=>{s+=r.length+Ug(o)}),s}(n.mapValue);default:throw Et(13486,{value:n})}}function Uw(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function W0(n){return!!n&&"integerValue"in n}function Jf(n){return!!n&&"arrayValue"in n}function PD(n){return!!n&&"nullValue"in n}function kD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zg(n){return!!n&&"mapValue"in n}function iy(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[Bw])==null?void 0:i.stringValue)===Fw}function Tf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Fa(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Tf(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Tf(n.arrayValue.values[e]);return t}return{...n}}function LN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VN}const jN={mapValue:{fields:{[Bw]:{stringValue:Fw},[Qc]:{arrayValue:{}}}}};function uY(n){return"nullValue"in n?Fg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Uw(rl.empty(),bt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?iy(n)?jN:{mapValue:{}}:Et(35942,{value:n})}function hY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Uw(rl.empty(),bt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?jN:"mapValue"in n?iy(n)?{mapValue:{}}:_a:Et(61959,{value:n})}function OD(n,t){const e=Ma(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function ND(n,t){const e=Ma(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.value=t}static empty(){return new Nn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!zg(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Tf(e)}setAll(t){let e=Me.emptyPath(),i={},s=[];t.forEach((o,c)=>{if(!e.isImmediateParentOf(c)){const h=this.getFieldsMap(e);this.applyChanges(h,i,s),i={},s=[],e=c.popLast()}o?i[c.lastSegment()]=Tf(o):s.push(c.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,i,s)}delete(t){const e=this.field(t.popLast());zg(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];zg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Fa(e,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Nn(Tf(this.value))}}function BN(n){const t=[];return Fa(n.fields,(e,i)=>{const s=new Me([e]);if(zg(i)){const r=BN(i.mapValue).fields;if(r.length===0)t.push(s);else for(const o of r)t.push(s.child(o))}else t.push(s)}),new ei(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t,e,i,s,r,o,c){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=c}static newInvalidDocument(t){return new Le(t,0,Mt.min(),Mt.min(),Mt.min(),Nn.empty(),0)}static newFoundDocument(t,e,i,s){return new Le(t,1,e,Mt.min(),i,s,0)}static newNoDocument(t,e){return new Le(t,2,e,Mt.min(),Mt.min(),Nn.empty(),0)}static newUnknownDocument(t,e){return new Le(t,3,e,Mt.min(),Mt.min(),Nn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Le&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Le(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e){this.position=t,this.inclusive=e}}function VD(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const r=t[s],o=n.position[s];if(r.field.isKeyField()?i=bt.comparator(bt.fromName(o.referenceValue),e.key):i=Ma(o,e.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function LD(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Vs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,e="asc"){this.field=t,this.dir=e}}function fY(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{}class $t extends FN{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new dY(t,e,i):e==="array-contains"?new pY(t,i):e==="in"?new WN(t,i):e==="not-in"?new yY(t,i):e==="array-contains-any"?new _Y(t,i):new $t(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new mY(t,i):new gY(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Ma(e,this.value)):e!==null&&Ca(this.value)===Ca(e)&&this.matchesComparison(Ma(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _e extends FN{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new _e(t,e)}matches(t){return tu(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tu(n){return n.op==="and"}function Y0(n){return n.op==="or"}function zw(n){return UN(n)&&tu(n)}function UN(n){for(const t of n.filters)if(t instanceof _e)return!1;return!0}function K0(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+Zc(n.value);if(zw(n))return n.filters.map(t=>K0(t)).join(",");{const t=n.filters.map(e=>K0(e)).join(",");return`${n.op}(${t})`}}function zN(n,t){return n instanceof $t?function(i,s){return s instanceof $t&&i.op===s.op&&i.field.isEqual(s.field)&&Vs(i.value,s.value)}(n,t):n instanceof _e?function(i,s){return s instanceof _e&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,c)=>r&&zN(o,s.filters[c]),!0):!1}(n,t):void Et(19439)}function HN(n,t){const e=n.filters.concat(t);return _e.create(e,n.op)}function qN(n){return n instanceof $t?function(e){return`${e.field.canonicalString()} ${e.op} ${Zc(e.value)}`}(n):n instanceof _e?function(e){return e.op.toString()+" {"+e.getFilters().map(qN).join(" ,")+"}"}(n):"Filter"}class dY extends $t{constructor(t,e,i){super(t,e,i),this.key=bt.fromName(i.referenceValue)}matches(t){const e=bt.comparator(t.key,this.key);return this.matchesComparison(e)}}class mY extends $t{constructor(t,e){super(t,"in",e),this.keys=GN("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class gY extends $t{constructor(t,e){super(t,"not-in",e),this.keys=GN("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function GN(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map(i=>bt.fromName(i.referenceValue))}class pY extends $t{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Jf(e)&&Zf(e.arrayValue,this.value)}}class WN extends $t{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Zf(this.value.arrayValue,e)}}class yY extends $t{constructor(t,e){super(t,"not-in",e)}matches(t){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Zf(this.value.arrayValue,e)}}class _Y extends $t{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Jf(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Zf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(t,e=null,i=[],s=[],r=null,o=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=c,this.Te=null}}function $0(n,t=null,e=[],i=[],s=null,r=null,o=null){return new vY(n,t,e,i,s,r,o)}function al(n){const t=It(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>K0(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Zp(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Zc(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Zc(i)).join(",")),t.Te=e}return t.Te}function yd(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!fY(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!zN(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!LD(n.startAt,t.startAt)&&LD(n.endAt,t.endAt)}function Ep(n){return bt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Sp(n,t){return n.filters.filter(e=>e instanceof $t&&e.field.isEqual(t))}function jD(n,t,e){let i=Fg,s=!0;for(const r of Sp(n,t)){let o=Fg,c=!0;switch(r.op){case"<":case"<=":o=uY(r.value);break;case"==":case"in":case">=":o=r.value;break;case">":o=r.value,c=!1;break;case"!=":case"not-in":o=Fg}OD({value:i,inclusive:s},{value:o,inclusive:c})<0&&(i=o,s=c)}if(e!==null){for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(t)){const o=e.position[r];OD({value:i,inclusive:s},{value:o,inclusive:e.inclusive})<0&&(i=o,s=e.inclusive);break}}return{value:i,inclusive:s}}function BD(n,t,e){let i=_a,s=!0;for(const r of Sp(n,t)){let o=_a,c=!0;switch(r.op){case">=":case">":o=hY(r.value),c=!1;break;case"==":case"in":case"<=":o=r.value;break;case"<":o=r.value,c=!1;break;case"!=":case"not-in":o=_a}ND({value:i,inclusive:s},{value:o,inclusive:c})>0&&(i=o,s=c)}if(e!==null){for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(t)){const o=e.position[r];ND({value:i,inclusive:s},{value:o,inclusive:e.inclusive})>0&&(i=o,s=e.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t,e=null,i=[],s=[],r=null,o="F",c=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YN(n,t,e,i,s,r,o,c){return new sy(n,t,e,i,s,r,o,c)}function ry(n){return new sy(n)}function FD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bY(n){return n.collectionGroup!==null}function wf(n){const t=It(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new de(Me.comparator);return o.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new wp(r,i))}),e.has(Me.keyField().canonicalString())||t.Ie.push(new wp(Me.keyField(),i))}return t.Ie}function pi(n){const t=It(n);return t.Ee||(t.Ee=TY(t,wf(n))),t.Ee}function TY(n,t){if(n.limitType==="F")return $0(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new wp(s.field,r)});const e=n.endAt?new Jc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Jc(n.startAt.position,n.startAt.inclusive):null;return $0(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function X0(n,t,e){return new sy(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ay(n,t){return yd(pi(n),pi(t))&&n.limitType===t.limitType}function KN(n){return`${al(pi(n))}|lt:${n.limitType}`}function wc(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>qN(s)).join(", ")}]`),Zp(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>Zc(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>Zc(s)).join(",")),`Target(${i})`}(pi(n))}; limitType=${n.limitType})`}function _d(n,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):bt.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(n,t)&&function(i,s){for(const r of wf(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(o,c,h){const f=VD(o,c,h);return o.inclusive?f<=0:f<0}(i.startAt,wf(i),s)||i.endAt&&!function(o,c,h){const f=VD(o,c,h);return o.inclusive?f>=0:f>0}(i.endAt,wf(i),s))}(n,t)}function $N(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XN(n){return(t,e)=>{let i=!1;for(const s of wf(n)){const r=wY(s,t,e);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function wY(n,t,e){const i=n.field.isKeyField()?bt.comparator(t.key,e.key):function(r,o,c){const h=o.data.field(r),f=c.data.field(r);return h!==null&&f!==null?Ma(h,f):Et(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Fa(this.inner,(e,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return CN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EY=new Ee(bt.comparator);function mi(){return EY}const QN=new Ee(bt.comparator);function tf(...n){let t=QN;for(const e of n)t=t.insert(e.key,e);return t}function ZN(n){let t=QN;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ss(){return Ef()}function JN(){return Ef()}function Ef(){return new Sr(n=>n.toString(),(n,t)=>n.isEqual(t))}const SY=new Ee(bt.comparator),xY=new de(bt.comparator);function qt(...n){let t=xY;for(const e of n)t=t.add(e);return t}const AY=new de(jt);function Hw(){return AY}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yf(t)?"-0":t}}function t2(n){return{integerValue:""+n}}function IY(n,t){return vN(t)?t2(t):qw(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this._=void 0}}function RY(n,t,e){return n instanceof td?function(s,r){const o={fields:{[kN]:{stringValue:PN},[NN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&jw(r)&&(r=ny(r)),r&&(o.fields[ON]=r),{mapValue:o}}(e,t):n instanceof eu?n2(n,t):n instanceof nu?i2(n,t):function(s,r){const o=e2(s,r),c=UD(o)+UD(s.Ae);return W0(o)&&W0(s.Ae)?t2(c):qw(s.serializer,c)}(n,t)}function DY(n,t,e){return n instanceof eu?n2(n,t):n instanceof nu?i2(n,t):e}function e2(n,t){return n instanceof ed?function(i){return W0(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class td extends oy{}class eu extends oy{constructor(t){super(),this.elements=t}}function n2(n,t){const e=s2(t);for(const i of n.elements)e.some(s=>Vs(s,i))||e.push(i);return{arrayValue:{values:e}}}class nu extends oy{constructor(t){super(),this.elements=t}}function i2(n,t){let e=s2(t);for(const i of n.elements)e=e.filter(s=>!Vs(s,i));return{arrayValue:{values:e}}}class ed extends oy{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function UD(n){return Ie(n.integerValue||n.doubleValue)}function s2(n){return Jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(t,e){this.field=t,this.transform=e}}function MY(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof eu&&s instanceof eu||i instanceof nu&&s instanceof nu?Gc(i.elements,s.elements,Vs):i instanceof ed&&s instanceof ed?Vs(i.Ae,s.Ae):i instanceof td&&s instanceof td}(n.transform,t.transform)}class PY{constructor(t,e){this.version=t,this.transformResults=e}}class jn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new jn}static exists(t){return new jn(void 0,t)}static updateTime(t){return new jn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Hg(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ly{}function r2(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new cy(n.key,jn.none()):new yu(n.key,n.data,jn.none());{const e=n.data,i=Nn.empty();let s=new de(Me.comparator);for(let r of t.fields)if(!s.has(r)){let o=e.field(r);o===null&&r.length>1&&(r=r.popLast(),o=e.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new xr(n.key,i,new ei(s.toArray()),jn.none())}}function kY(n,t,e){n instanceof yu?function(s,r,o){const c=s.value.clone(),h=HD(s.fieldTransforms,r,o.transformResults);c.setAll(h),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof xr?function(s,r,o){if(!Hg(s.precondition,r))return void r.convertToUnknownDocument(o.version);const c=HD(s.fieldTransforms,r,o.transformResults),h=r.data;h.setAll(a2(s)),h.setAll(c),r.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,t,e):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Sf(n,t,e,i){return n instanceof yu?function(r,o,c,h){if(!Hg(r.precondition,o))return c;const f=r.value.clone(),m=qD(r.fieldTransforms,h,o);return f.setAll(m),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof xr?function(r,o,c,h){if(!Hg(r.precondition,o))return c;const f=qD(r.fieldTransforms,h,o),m=o.data;return m.setAll(a2(r)),m.setAll(f),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(y=>y.field))}(n,t,e,i):function(r,o,c){return Hg(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,t,e)}function OY(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),r=e2(i.transform,s||null);r!=null&&(e===null&&(e=Nn.empty()),e.set(i.field,r))}return e||null}function zD(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Gc(i,s,(r,o)=>MY(r,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class yu extends ly{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xr extends ly{constructor(t,e,i,s,r=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function a2(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function HD(n,t,e){const i=new Map;Rt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let s=0;s<e.length;s++){const r=n[s],o=r.transform,c=t.data.field(r.field);i.set(r.field,DY(o,c,e[s]))}return i}function qD(n,t,e){const i=new Map;for(const s of n){const r=s.transform,o=e.data.field(s.field);i.set(s.field,RY(r,o,t))}return i}class cy extends ly{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o2 extends ly{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&kY(r,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Sf(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Sf(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=JN();return this.mutations.forEach(s=>{const r=t.get(s.key),o=r.overlayedDocument;let c=this.applyToLocalView(o,r.mutatedFields);c=e.has(s.key)?null:c;const h=r2(o,c);h!==null&&i.set(s.key,h),o.isValidDocument()||o.convertToNoDocument(Mt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),qt())}isEqual(t){return this.batchId===t.batchId&&Gc(this.mutations,t.mutations,(e,i)=>zD(e,i))&&Gc(this.baseMutations,t.baseMutations,(e,i)=>zD(e,i))}}class Ww{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Rt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return SY}();const r=t.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new Ww(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,Jt;function VY(n){switch(n){case ht.OK:return Et(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function l2(n){if(n===void 0)return Ge("GRPC error has no .code"),ht.UNKNOWN;switch(n){case en.OK:return ht.OK;case en.CANCELLED:return ht.CANCELLED;case en.UNKNOWN:return ht.UNKNOWN;case en.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case en.INTERNAL:return ht.INTERNAL;case en.UNAVAILABLE:return ht.UNAVAILABLE;case en.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case en.NOT_FOUND:return ht.NOT_FOUND;case en.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case en.ABORTED:return ht.ABORTED;case en.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case en.DATA_LOSS:return ht.DATA_LOSS;default:return Et(39323,{code:n})}}(Jt=en||(en={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jY=new Ea([4294967295,4294967295],0);function GD(n){const t=LY().encode(n),e=new sN;return e.update(t),new Uint8Array(e.digest())}function WD(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ea([e,i],0),new Ea([s,r],0)]}class Kw{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ef(`Invalid padding: ${e}`);if(i<0)throw new ef(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ef(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ef(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Ea.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(Ea.fromNumber(i)));return s.compare(jY)===1&&(s=new Ea([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=GD(t),[i,s]=WD(e);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Kw(r,s,e);return i.forEach(c=>o.insert(c)),o}insert(t){if(this.ge===0)return;const e=GD(t),[i,s]=WD(e);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);this.Se(o)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class ef extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(t,e,i,s,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,bd.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new vd(Mt.min(),s,new Ee(jt),mi(),qt())}}class bd{constructor(t,e,i,s,r){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new bd(i,e,qt(),qt(),qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,e,i,s){this.be=t,this.removedTargetIds=e,this.key=i,this.De=s}}class c2{constructor(t,e){this.targetId=t,this.Ce=e}}class u2{constructor(t,e,i=$e.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class YD{constructor(){this.ve=0,this.Fe=KD(),this.Me=$e.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=qt(),e=qt(),i=qt();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:Et(38017,{changeType:r})}}),new bd(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=KD()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BY{constructor(t){this.Ge=t,this.ze=new Map,this.je=mi(),this.Je=gg(),this.He=gg(),this.Ye=new Ee(jt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:Et(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((i,s)=>{this.rt(s)&&e(s)})}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const r=s.target;if(Ep(r))if(i===0){const o=new bt(r.path);this.et(e,o,Le.newNoDocument(o,Mt.min()))}else Rt(i===1,20013,{expectedCount:i});else{const o=this._t(e);if(o!==i){const c=this.ut(t),h=c?this.ct(c,t,o):1;if(h!==0){this.it(e);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,f)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=e;let o,c;try{o=Er(i).toUint8Array()}catch(h){if(h instanceof MN)return Gf("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Kw(o,s,r)}catch(h){return Gf(h instanceof ef?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach(r=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(c)||(this.et(e,r,null),s++)}),s}Tt(t){const e=new Map;this.ze.forEach((r,o)=>{const c=this.ot(o);if(c){if(r.current&&Ep(c.target)){const h=new bt(c.target.path);this.It(h).has(o)||this.Et(o,h)||this.et(o,h,Le.newNoDocument(h,t))}r.Be&&(e.set(o,r.ke()),r.qe())}});let i=qt();this.He.forEach((r,o)=>{let c=!0;o.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(r))}),this.je.forEach((r,o)=>o.setReadTime(t));const s=new vd(t,e,this.Ye,this.je,i);return this.je=mi(),this.Je=gg(),this.He=gg(),this.Ye=new Ee(jt),s}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new YD,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new de(jt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new de(jt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||dt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new YD),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function gg(){return new Ee(bt.comparator)}function KD(){return new Ee(bt.comparator)}const FY={asc:"ASCENDING",desc:"DESCENDING"},UY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zY={and:"AND",or:"OR"};class HY{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Q0(n,t){return n.useProto3Json||Zp(t)?t:{value:t}}function iu(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function h2(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function qY(n,t){return iu(n,t.toTimestamp())}function Gn(n){return Rt(!!n,49232),Mt.fromTimestamp(function(e){const i=wr(e);return new fe(i.seconds,i.nanos)}(n))}function $w(n,t){return Z0(n,t).canonicalString()}function Z0(n,t){const e=function(s){return new re(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function f2(n){const t=re.fromString(n);return Rt(T2(t),10190,{key:t.toString()}),t}function xp(n,t){return $w(n.databaseId,t.path)}function Xo(n,t){const e=f2(t);if(e.get(1)!==n.databaseId.projectId)throw new vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new bt(g2(e))}function d2(n,t){return $w(n.databaseId,t)}function m2(n){const t=f2(n);return t.length===4?re.emptyPath():g2(t)}function J0(n){return new re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function g2(n){return Rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $D(n,t,e){return{name:xp(n,t),fields:e.value.mapValue.fields}}function GY(n,t,e){const i=Xo(n,t.name),s=Gn(t.updateTime),r=t.createTime?Gn(t.createTime):Mt.min(),o=new Nn({mapValue:{fields:t.fields}}),c=Le.newFoundDocument(i,s,r,o);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function WY(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Et(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(f,m){return f.useProto3Json?(Rt(m===void 0||typeof m=="string",58123),$e.fromBase64String(m||"")):(Rt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),$e.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(f){const m=f.code===void 0?ht.UNKNOWN:l2(f.code);return new vt(m,f.message||"")}(o);e=new u2(i,s,r,c||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Xo(n,i.document.name),r=Gn(i.document.updateTime),o=i.document.createTime?Gn(i.document.createTime):Mt.min(),c=new Nn({mapValue:{fields:i.document.fields}}),h=Le.newFoundDocument(s,r,o,c),f=i.targetIds||[],m=i.removedTargetIds||[];e=new qg(f,m,h.key,h)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Xo(n,i.document),r=i.readTime?Gn(i.readTime):Mt.min(),o=Le.newNoDocument(s,r),c=i.removedTargetIds||[];e=new qg([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Xo(n,i.document),r=i.removedTargetIds||[];e=new qg([],r,s,null)}else{if(!("filter"in t))return Et(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new NY(s,r),c=i.targetId;e=new c2(c,o)}}return e}function Ap(n,t){let e;if(t instanceof yu)e={update:$D(n,t.key,t.value)};else if(t instanceof cy)e={delete:xp(n,t.key)};else if(t instanceof xr)e={update:$D(n,t.key,t.data),updateMask:ZY(t.fieldMask)};else{if(!(t instanceof o2))return Et(16599,{Vt:t.type});e={verify:xp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const c=o.transform;if(c instanceof td)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ed)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Et(20930,{transform:o.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:qY(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Et(27497)}(n,t.precondition)),e}function tT(n,t){const e=t.currentDocument?function(r){return r.updateTime!==void 0?jn.updateTime(Gn(r.updateTime)):r.exists!==void 0?jn.exists(r.exists):jn.none()}(t.currentDocument):jn.none(),i=t.updateTransforms?t.updateTransforms.map(s=>function(o,c){let h=null;if("setToServerValue"in c)Rt(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),h=new td;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];h=new eu(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];h=new nu(m)}else"increment"in c?h=new ed(o,c.increment):Et(16584,{proto:c});const f=Me.fromServerFormat(c.fieldPath);return new CY(f,h)}(n,s)):[];if(t.update){t.update.name;const s=Xo(n,t.update.name),r=new Nn({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=function(h){const f=h.fieldPaths||[];return new ei(f.map(m=>Me.fromServerFormat(m)))}(t.updateMask);return new xr(s,r,o,e,i)}return new yu(s,r,e,i)}if(t.delete){const s=Xo(n,t.delete);return new cy(s,e)}if(t.verify){const s=Xo(n,t.verify);return new o2(s,e)}return Et(1463,{proto:t})}function YY(n,t){return n&&n.length>0?(Rt(t!==void 0,14353),n.map(e=>function(s,r){let o=s.updateTime?Gn(s.updateTime):Gn(r);return o.isEqual(Mt.min())&&(o=Gn(r)),new PY(o,s.transformResults||[])}(e,t))):[]}function p2(n,t){return{documents:[d2(n,t.path)]}}function y2(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=d2(n,s);const r=function(f){if(f.length!==0)return b2(_e.create(f,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const o=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:Ec(_.field),direction:$Y(_.dir)}}(m))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const c=Q0(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ft:e,parent:s}}function _2(n){let t=m2(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Rt(i===1,65062);const m=e.from[0];m.allDescendants?s=m.collectionId:t=t.child(m.collectionId)}let r=[];e.where&&(r=function(y){const _=v2(y);return _ instanceof _e&&zw(_)?_.getFilters():[_]}(e.where));let o=[];e.orderBy&&(o=function(y){return y.map(_=>function(w){return new wp(Sc(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(_))}(e.orderBy));let c=null;e.limit&&(c=function(y){let _;return _=typeof y=="object"?y.value:y,Zp(_)?null:_}(e.limit));let h=null;e.startAt&&(h=function(y){const _=!!y.before,b=y.values||[];return new Jc(b,_)}(e.startAt));let f=null;return e.endAt&&(f=function(y){const _=!y.before,b=y.values||[];return new Jc(b,_)}(e.endAt)),YN(t,s,o,r,c,"F",h,f)}function KY(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function v2(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Sc(e.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Sc(e.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sc(e.unaryFilter.field);return $t.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sc(e.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(n):n.fieldFilter!==void 0?function(e){return $t.create(Sc(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return _e.create(e.compositeFilter.filters.map(i=>v2(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(e.compositeFilter.op))}(n):Et(30097,{filter:n})}function $Y(n){return FY[n]}function XY(n){return UY[n]}function QY(n){return zY[n]}function Ec(n){return{fieldPath:n.canonicalString()}}function Sc(n){return Me.fromServerFormat(n.fieldPath)}function b2(n){return n instanceof $t?function(e){if(e.op==="=="){if(kD(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NAN"}};if(PD(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(kD(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NOT_NAN"}};if(PD(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(e.field),op:XY(e.op),value:e.value}}}(n):n instanceof _e?function(e){const i=e.getFilters().map(s=>b2(s));return i.length===1?i[0]:{compositeFilter:{op:QY(e.op),filters:i}}}(n):Et(54877,{filter:n})}function ZY(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function T2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t,e,i,s,r=Mt.min(),o=Mt.min(),c=$e.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(t){return new pr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(t){this.yt=t}}function JY(n,t){let e;if(t.document)e=GY(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=bt.fromSegments(t.noDocument.path),s=ll(t.noDocument.readTime);e=Le.newNoDocument(i,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Et(56709);{const i=bt.fromSegments(t.unknownDocument.path),s=ll(t.unknownDocument.version);e=Le.newUnknownDocument(i,s)}}return t.readTime&&e.setReadTime(function(s){const r=new fe(s[0],s[1]);return Mt.fromTimestamp(r)}(t.readTime)),e}function XD(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Ip(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(r,o){return{name:xp(r,o.key),fields:o.data.value.mapValue.fields,updateTime:iu(r,o.version.toTimestamp()),createTime:iu(r,o.createTime.toTimestamp())}}(n.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:ol(t.version)};else{if(!t.isUnknownDocument())return Et(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:ol(t.version)}}return i}function Ip(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function ol(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ll(n){const t=new fe(n.seconds,n.nanoseconds);return Mt.fromTimestamp(t)}function Vo(n,t){const e=(t.baseMutations||[]).map(r=>tT(n.yt,r));for(let r=0;r<t.mutations.length-1;++r){const o=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){const c=t.mutations[r+1];o.updateTransforms=c.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}const i=t.mutations.map(r=>tT(n.yt,r)),s=fe.fromMillis(t.localWriteTimeMs);return new Gw(t.batchId,s,e,i)}function nf(n){const t=ll(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?ll(n.lastLimboFreeSnapshotVersion):Mt.min();let i;return i=function(r){return r.documents!==void 0}(n.query)?function(r){const o=r.documents.length;return Rt(o===1,1966,{count:o}),pi(ry(m2(r.documents[0])))}(n.query):function(r){return pi(_2(r))}(n.query),new pr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,$e.fromBase64String(n.resumeToken))}function E2(n,t){const e=ol(t.snapshotVersion),i=ol(t.lastLimboFreeSnapshotVersion);let s;s=Ep(t.target)?p2(n.yt,t.target):y2(n.yt,t.target).ft;const r=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:al(t.target),readTime:e,resumeToken:r,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function S2(n){const t=_2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?X0(t,t.limit,"L"):t}function _b(n,t){return new Yw(t.largestBatchId,tT(n.yt,t.overlayMutation))}function QD(n,t){const e=t.path.lastSegment();return[n,Bn(t.path.popLast()),e]}function ZD(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:ol(i.readTime),documentKey:Bn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{getBundleMetadata(t,e){return JD(t).get(e).next(i=>{if(i)return function(r){return{id:r.bundleId,createTime:ll(r.createTime),version:r.version}}(i)})}saveBundleMetadata(t,e){return JD(t).put(function(s){return{bundleId:s.id,createTime:ol(Gn(s.createTime)),version:s.version}}(e))}getNamedQuery(t,e){return tC(t).get(e).next(i=>{if(i)return function(r){return{name:r.name,query:S2(r.bundledQuery),readTime:ll(r.readTime)}}(i)})}saveNamedQuery(t,e){return tC(t).put(function(s){return{name:s.name,readTime:ol(Gn(s.readTime)),bundledQuery:s.bundledQuery}}(e))}}function JD(n){return dn(n,Jp)}function tC(n){return dn(n,ty)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new uy(t,i)}getOverlay(t,e){return Vh(t).get(QD(this.userId,e)).next(i=>i?_b(this.serializer,i):null)}getOverlays(t,e){const i=Ss();return X.forEach(e,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,e,i){const s=[];return i.forEach((r,o)=>{const c=new Yw(e,o);s.push(this.St(t,c))}),X.waitFor(s)}removeOverlaysForBatchId(t,e,i){const s=new Set;e.forEach(o=>s.add(Bn(o.getCollectionPath())));const r=[];return s.forEach(o=>{const c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);r.push(Vh(t).Z(H0,c))}),X.waitFor(r)}getOverlaysForCollection(t,e,i){const s=Ss(),r=Bn(e),o=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Vh(t).J(H0,o).next(c=>{for(const h of c){const f=_b(this.serializer,h);s.set(f.getKey(),f)}return s})}getOverlaysForCollectionGroup(t,e,i,s){const r=Ss();let o;const c=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Vh(t).ee({index:xN,range:c},(h,f,m)=>{const y=_b(this.serializer,f);r.size()<s||y.largestBatchId===o?(r.set(y.getKey(),y),o=y.largestBatchId):m.done()}).next(()=>r)}St(t,e){return Vh(t).put(function(s,r,o){const[c,h,f]=QD(r,o.mutation.key);return{userId:r,collectionPath:h,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ap(s.yt,o.mutation)}}(this.serializer,this.userId,e))}}function Vh(n){return dn(n,ey)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{bt(t){return dn(t,Vw)}getSessionToken(t){return this.bt(t).get("sessionToken").next(e=>{const i=e==null?void 0:e.value;return i?$e.fromUint8Array(i):$e.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Ie(t.integerValue));else if("doubleValue"in t){const i=Ie(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),Yf(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=wr(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Er(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?LN(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):iy(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):Et(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const i=t.fields||{};this.Ft(e,55);for(const s of Object.keys(i))this.Ot(s,e),this.Ct(i[s],e)}kt(t,e){var o,c;const i=t.fields||{};this.Ft(e,53);const s=Qc,r=((c=(o=i[s].arrayValue)==null?void 0:o.values)==null?void 0:c.length)||0;this.Ft(e,15),e.Mt(Ie(r)),this.Ot(s,e),this.Ct(i[s],e)}Qt(t,e){const i=t.values||[];this.Ft(e,50);for(const s of i)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),bt.fromName(t).path.forEach(i=>{this.Ft(e,60),this.Ut(i,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Lo.Kt=new Lo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=255;function nK(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function eC(n){const t=64-function(i){let s=0;for(let r=0;r<8;++r){const o=nK(255&i[r]);if(s+=o,o!==8)break}return s}(n);return Math.ceil(t/8)}class iK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Jt(i.value),i=e.next();this.Ht()}Yt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=e.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=e.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(t){const e=this.en(t),i=eC(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=255&e[s]}nn(t){const e=this.en(t),i=eC(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}rn(){this.sn(pc),this.sn(255)}_n(){this.an(pc),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let s=1;s<e.length;++s)e[s]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===pc?(this.sn(pc),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===pc?(this.an(pc),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class sK{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class rK{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Lh{constructor(){this.cn=new iK,this.ln=new sK(this.cn),this.hn=new rK(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,e,i,s){this.Tn=t,this.In=e,this.En=i,this.dn=s}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.dn,0),e!==t?i.set([0],this.dn.length):++i[i.length-1],new jo(this.Tn,this.In,this.En,i)}Rn(t,e,i){return{indexId:this.Tn,uid:t,arrayValue:Gg(this.En),directionalValue:Gg(this.dn),orderedDocumentKey:Gg(e),documentKey:i.path.toArray()}}Vn(t,e,i){const s=this.Rn(t,e,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ia(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=nC(n.En,t.En),e!==0?e:(e=nC(n.dn,t.dn),e!==0?e:bt.comparator(n.In,t.In)))}function nC(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}function Gg(n){return Wk()?function(e){let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return i}(n):n}function iC(n){return typeof n!="string"?n:function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(n)}class sC{constructor(t){this.mn=new de((e,i)=>Me.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const i=e;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(t){if(Rt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=F0(t);if(e!==void 0&&!this.wn(e))return!1;const i=Po(t);let s=new Set,r=0,o=0;for(;r<i.length&&this.wn(i[r]);++r)s=s.add(i[r].fieldPath.canonicalString());if(r===i.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const h=i[r];if(!this.Sn(c,h)||!this.bn(this.fn[o++],h))return!1}++r}for(;r<i.length;++r){const c=i[r];if(o>=this.fn.length||!this.bn(this.fn[o++],c))return!1}return!0}Dn(){if(this.pn)return null;let t=new de(Me.comparator);const e=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new Lg(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new Lg(i.field,0))}for(const i of this.fn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new Lg(i.field,i.dir==="asc"?0:1)));return new yp(yp.UNKNOWN_ID,this.collectionId,e,Wf.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(n){var e,i;if(Rt(n instanceof $t||n instanceof _e,20012),n instanceof $t){if(n instanceof WN){const s=((i=(e=n.value.arrayValue)==null?void 0:e.values)==null?void 0:i.map(r=>$t.create(n.field,"==",r)))||[];return _e.create(s,"or")}return n}const t=n.filters.map(s=>x2(s));return _e.create(t,n.op)}function aK(n){if(n.getFilters().length===0)return[];const t=iT(x2(n));return Rt(A2(t),7391),eT(t)||nT(t)?[t]:t.getFilters()}function eT(n){return n instanceof $t}function nT(n){return n instanceof _e&&zw(n)}function A2(n){return eT(n)||nT(n)||function(e){if(e instanceof _e&&Y0(e)){for(const i of e.getFilters())if(!eT(i)&&!nT(i))return!1;return!0}return!1}(n)}function iT(n){if(Rt(n instanceof $t||n instanceof _e,34018),n instanceof $t)return n;if(n.filters.length===1)return iT(n.filters[0]);const t=n.filters.map(i=>iT(i));let e=_e.create(t,n.op);return e=Rp(e),A2(e)?e:(Rt(e instanceof _e,64498),Rt(tu(e),40251),Rt(e.filters.length>1,57927),e.filters.reduce((i,s)=>Xw(i,s)))}function Xw(n,t){let e;return Rt(n instanceof $t||n instanceof _e,38388),Rt(t instanceof $t||t instanceof _e,25473),e=n instanceof $t?t instanceof $t?function(s,r){return _e.create([s,r],"and")}(n,t):rC(n,t):t instanceof $t?rC(t,n):function(s,r){if(Rt(s.filters.length>0&&r.filters.length>0,48005),tu(s)&&tu(r))return HN(s,r.getFilters());const o=Y0(s)?s:r,c=Y0(s)?r:s,h=o.filters.map(f=>Xw(f,c));return _e.create(h,"or")}(n,t),Rp(e)}function rC(n,t){if(tu(t))return HN(t,n.getFilters());{const e=t.filters.map(i=>Xw(n,i));return _e.create(e,"or")}}function Rp(n){if(Rt(n instanceof $t||n instanceof _e,11850),n instanceof $t)return n;const t=n.getFilters();if(t.length===1)return Rp(t[0]);if(UN(n))return n;const e=t.map(s=>Rp(s)),i=[];return e.forEach(s=>{s instanceof $t?i.push(s):s instanceof _e&&(s.op===n.op?i.push(...s.filters):i.push(s))}),i.length===1?i[0]:_e.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(){this.Cn=new Qw}addToCollectionParentIndex(t,e){return this.Cn.add(e),X.resolve()}getCollectionParents(t,e){return X.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return X.resolve()}deleteFieldIndex(t,e){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,e){return X.resolve()}getDocumentsMatchingTarget(t,e){return X.resolve(null)}getIndexType(t,e){return X.resolve(0)}getFieldIndexes(t,e){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,e){return X.resolve(yi.min())}getMinOffsetFromCollectionGroup(t,e){return X.resolve(yi.min())}updateCollectionGroup(t,e,i){return X.resolve()}updateIndexEntries(t,e){return X.resolve()}}class Qw{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new de(re.comparator),r=!s.has(i);return this.index[e]=s.add(i),r}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new de(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="IndexedDbIndexManager",pg=new Uint8Array(0);class lK{constructor(t,e){this.databaseId=e,this.vn=new Qw,this.Fn=new Sr(i=>al(i),(i,s)=>yd(i,s)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const i=e.lastSegment(),s=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const r={collectionId:i,parent:Bn(s)};return oC(t).put(r)}return X.resolve()}getCollectionParents(t,e){const i=[],s=IDBKeyRange.bound([e,""],[hN(e),""],!1,!0);return oC(t).J(s).next(r=>{for(const o of r){if(o.collectionId!==e)break;i.push(Es(o.parent))}return i})}addFieldIndex(t,e){const i=jh(t),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(e);delete s.indexId;const r=i.add(s);if(e.indexState){const o=_c(t);return r.next(c=>{o.put(ZD(c,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return r.next()}deleteFieldIndex(t,e){const i=jh(t),s=_c(t),r=yc(t);return i.delete(e.indexId).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=jh(t),i=yc(t),s=_c(t);return e.Z().next(()=>i.Z()).next(()=>s.Z())}createTargetIndexes(t,e){return X.forEach(this.Mn(e),i=>this.getIndexType(t,i).next(s=>{if(s===0||s===1){const r=new sC(i).Dn();if(r!=null)return this.addFieldIndex(t,r)}}))}getDocumentsMatchingTarget(t,e){const i=yc(t);let s=!0;const r=new Map;return X.forEach(this.Mn(e),o=>this.xn(t,o).next(c=>{s&&(s=!!c),r.set(o,c)})).next(()=>{if(s){let o=qt();const c=[];return X.forEach(r,(h,f)=>{dt(aC,`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(h)} to execute ${al(e)}`);const m=function(L,H){const F=F0(H);if(F===void 0)return null;for(const K of Sp(L,F.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(f,h),y=function(L,H){const F=new Map;for(const K of Po(H))for(const O of Sp(L,K.fieldPath))switch(O.op){case"==":case"in":F.set(K.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return F.set(K.fieldPath.canonicalString(),O.value),Array.from(F.values())}return null}(f,h),_=function(L,H){const F=[];let K=!0;for(const O of Po(H)){const I=O.kind===0?jD(L,O.fieldPath,L.startAt):BD(L,O.fieldPath,L.startAt);F.push(I.value),K&&(K=I.inclusive)}return new Jc(F,K)}(f,h),b=function(L,H){const F=[];let K=!0;for(const O of Po(H)){const I=O.kind===0?BD(L,O.fieldPath,L.endAt):jD(L,O.fieldPath,L.endAt);F.push(I.value),K&&(K=I.inclusive)}return new Jc(F,K)}(f,h),w=this.On(h,f,_),x=this.On(h,f,b),A=this.Nn(h,f,y),M=this.Bn(h.indexId,m,w,_.inclusive,x,b.inclusive,A);return X.forEach(M,N=>i.Y(N,e.limit).next(L=>{L.forEach(H=>{const F=bt.fromSegments(H.documentKey);o.has(F)||(o=o.add(F),c.push(F))})}))}).next(()=>c)}return X.resolve(null)})}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=aK(_e.create(t.filters,"and")).map(i=>$0(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.Fn.set(t,e),e)}Bn(t,e,i,s,r,o,c){const h=(e!=null?e.length:1)*Math.max(i.length,r.length),f=h/(e!=null?e.length:1),m=[];for(let y=0;y<h;++y){const _=e?this.Ln(e[y/f]):pg,b=this.kn(t,_,i[y%f],s),w=this.qn(t,_,r[y%f],o),x=c.map(A=>this.kn(t,_,A,!0));m.push(...this.createRange(b,w,x))}return m}kn(t,e,i,s){const r=new jo(t,bt.empty(),e,i);return s?r:r.An()}qn(t,e,i,s){const r=new jo(t,bt.empty(),e,i);return s?r.An():r}xn(t,e){const i=new sC(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next(r=>{let o=null;for(const c of r)i.yn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o})}getIndexType(t,e){let i=2;const s=this.Mn(e);return X.forEach(s,r=>this.xn(t,r).next(o=>{o?i!==0&&o.fields.length<function(h){let f=new de(Me.comparator),m=!1;for(const y of h.filters)for(const _ of y.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?m=!0:f=f.add(_.field));for(const y of h.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(m?1:0)}(r)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(e)&&s.length>1&&i===2?1:i)}Qn(t,e){const i=new Lh;for(const s of Po(t)){const r=e.data.field(s.fieldPath);if(r==null)return null;const o=i.Pn(s.kind);Lo.Kt.Dt(r,o)}return i.un()}Ln(t){const e=new Lh;return Lo.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const i=new Lh;return Lo.Kt.Dt(Uw(this.databaseId,e),i.Pn(function(r){const o=Po(r);return o.length===0?0:o[o.length-1].kind}(t))),i.un()}Nn(t,e,i){if(i===null)return[];let s=[];s.push(new Lh);let r=0;for(const o of Po(t)){const c=i[r++];for(const h of s)if(this.Un(e,o.fieldPath)&&Jf(c))s=this.Kn(s,o,c);else{const f=h.Pn(o.kind);Lo.Kt.Dt(c,f)}}return this.Wn(s)}On(t,e,i){return this.Nn(t,e,i.position)}Wn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Kn(t,e,i){const s=[...t],r=[];for(const o of i.arrayValue.values||[])for(const c of s){const h=new Lh;h.seed(c.un()),Lo.Kt.Dt(o,h.Pn(e.kind)),r.push(h)}return r}Un(t,e){return!!t.filters.find(i=>i instanceof $t&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){const i=jh(t),s=_c(t);return(e?i.J(z0,IDBKeyRange.bound(e,e)):i.J()).next(r=>{const o=[];return X.forEach(r,c=>s.get([c.indexId,this.uid]).next(h=>{o.push(function(m,y){const _=y?new Wf(y.sequenceNumber,new yi(ll(y.readTime),new bt(Es(y.documentKey)),y.largestBatchId)):Wf.empty(),b=m.fields.map(([w,x])=>new Lg(Me.fromServerFormat(w),x));return new yp(m.indexId,m.collectionGroup,b,_)}(c,h))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,s)=>{const r=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return r!==0?r:jt(i.collectionGroup,s.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const s=jh(t),r=_c(t);return this.Gn(t).next(o=>s.J(z0,IDBKeyRange.bound(e,e)).next(c=>X.forEach(c,h=>r.put(ZD(h.indexId,this.uid,o,i)))))}updateIndexEntries(t,e){const i=new Map;return X.forEach(e,(s,r)=>{const o=i.get(s.collectionGroup);return(o?X.resolve(o):this.getFieldIndexes(t,s.collectionGroup)).next(c=>(i.set(s.collectionGroup,c),X.forEach(c,h=>this.zn(t,s,h).next(f=>{const m=this.jn(r,h);return f.isEqual(m)?X.resolve():this.Jn(t,r,h,f,m)}))))})}Hn(t,e,i,s){return yc(t).put(s.Rn(this.uid,this.$n(i,e.key),e.key))}Yn(t,e,i,s){return yc(t).delete(s.Vn(this.uid,this.$n(i,e.key),e.key))}zn(t,e,i){const s=yc(t);let r=new de(ia);return s.ee({index:SN,range:IDBKeyRange.only([i.indexId,this.uid,Gg(this.$n(i,e))])},(o,c)=>{r=r.add(new jo(i.indexId,e,iC(c.arrayValue),iC(c.directionalValue)))}).next(()=>r)}jn(t,e){let i=new de(ia);const s=this.Qn(e,t);if(s==null)return i;const r=F0(e);if(r!=null){const o=t.data.field(r.fieldPath);if(Jf(o))for(const c of o.arrayValue.values||[])i=i.add(new jo(e.indexId,t.key,this.Ln(c),s))}else i=i.add(new jo(e.indexId,t.key,pg,s));return i}Jn(t,e,i,s,r){dt(aC,"Updating index entries for document '%s'",e.key);const o=[];return function(h,f,m,y,_){const b=h.getIterator(),w=f.getIterator();let x=gc(b),A=gc(w);for(;x||A;){let M=!1,N=!1;if(x&&A){const L=m(x,A);L<0?N=!0:L>0&&(M=!0)}else x!=null?N=!0:M=!0;M?(y(A),A=gc(w)):N?(_(x),x=gc(b)):(x=gc(b),A=gc(w))}}(s,r,ia,c=>{o.push(this.Hn(t,e,i,c))},c=>{o.push(this.Yn(t,e,i,c))}),X.waitFor(o)}Gn(t){let e=1;return _c(t).ee({index:EN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,r)=>{r.done(),e=s.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,c)=>ia(o,c)).filter((o,c,h)=>!c||ia(o,h[c-1])!==0);const s=[];s.push(t);for(const o of i){const c=ia(o,t),h=ia(o,e);if(c===0)s[0]=t.An();else if(c>0&&h<0)s.push(o),s.push(o.An());else if(h>0)break}s.push(e);const r=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const c=s[o].Vn(this.uid,pg,bt.empty()),h=s[o+1].Vn(this.uid,pg,bt.empty());r.push(IDBKeyRange.bound(c,h))}return r}Zn(t,e){return ia(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(lC)}getMinOffset(t,e){return X.mapArray(this.Mn(e),i=>this.xn(t,i).next(s=>s||Et(44426))).next(lC)}}function oC(n){return dn(n,Xf)}function yc(n){return dn(n,bf)}function jh(n){return dn(n,Nw)}function _c(n){return dn(n,vf)}function lC(n){Rt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;Pw(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new yi(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},I2=41943040;class On{static withCacheSize(t){return new On(t,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(n,t,e){const i=n.store(Ki),s=n.store(Yc),r=[],o=IDBKeyRange.only(e.batchId);let c=0;const h=i.ee({range:o},(m,y,_)=>(c++,_.delete()));r.push(h.next(()=>{Rt(c===1,47070,{batchId:e.batchId})}));const f=[];for(const m of e.mutations){const y=bN(t,m.key.path,e.batchId);r.push(s.delete(y)),f.push(m.key)}return X.waitFor(r).next(()=>f)}function Dp(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Et(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(I2,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);class hy{constructor(t,e,i,s){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(t,e,i,s){Rt(t.uid!=="",64387);const r=t.isAuthenticated()?t.uid:"";return new hy(r,e,i,s)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sa(t).ee({index:Ho,range:i},(s,r,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,s){const r=xc(t),o=sa(t);return o.add({}).next(c=>{Rt(typeof c=="number",49019);const h=new Gw(c,e,i,s),f=function(b,w,x){const A=x.baseMutations.map(N=>Ap(b.yt,N)),M=x.mutations.map(N=>Ap(b.yt,N));return{userId:w,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:A,mutations:M}}(this.serializer,this.userId,h),m=[];let y=new de((_,b)=>jt(_.canonicalString(),b.canonicalString()));for(const _ of s){const b=bN(this.userId,_.key.path,c);y=y.add(_.key.path.popLast()),m.push(o.put(f)),m.push(r.put(b,jW))}return y.forEach(_=>{m.push(this.indexManager.addToCollectionParentIndex(t,_))}),t.addOnCommittedListener(()=>{this.Xn[c]=h.keys()}),X.waitFor(m).next(()=>h)})}lookupMutationBatch(t,e){return sa(t).get(e).next(i=>i?(Rt(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),Vo(this.serializer,i)):null)}er(t,e){return this.Xn[e]?X.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const s=i.keys();return this.Xn[e]=s,s}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return sa(t).ee({index:Ho,range:s},(o,c,h)=>{c.userId===this.userId&&(Rt(c.batchId>=i,47524,{tr:i}),r=Vo(this.serializer,c)),h.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ko;return sa(t).ee({index:Ho,range:e,reverse:!0},(s,r,o)=>{i=r.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Ko],[this.userId,Number.POSITIVE_INFINITY]);return sa(t).J(Ho,e).next(i=>i.map(s=>Vo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=jg(this.userId,e.path),s=IDBKeyRange.lowerBound(i),r=[];return xc(t).ee({range:s},(o,c,h)=>{const[f,m,y]=o,_=Es(m);if(f===this.userId&&e.path.isEqual(_))return sa(t).get(y).next(b=>{if(!b)throw Et(61480,{nr:o,batchId:y});Rt(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:y}),r.push(Vo(this.serializer,b))});h.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new de(jt);const s=[];return e.forEach(r=>{const o=jg(this.userId,r.path),c=IDBKeyRange.lowerBound(o),h=xc(t).ee({range:c},(f,m,y)=>{const[_,b,w]=f,x=Es(b);_===this.userId&&r.path.isEqual(x)?i=i.add(w):y.done()});s.push(h)}),X.waitFor(s).next(()=>this.rr(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1,r=jg(this.userId,i),o=IDBKeyRange.lowerBound(r);let c=new de(jt);return xc(t).ee({range:o},(h,f,m)=>{const[y,_,b]=h,w=Es(_);y===this.userId&&i.isPrefixOf(w)?w.length===s&&(c=c.add(b)):m.done()}).next(()=>this.rr(t,c))}rr(t,e){const i=[],s=[];return e.forEach(r=>{s.push(sa(t).get(r).next(o=>{if(o===null)throw Et(35274,{batchId:r});Rt(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:r}),i.push(Vo(this.serializer,o))}))}),X.waitFor(s).next(()=>i)}removeMutationBatch(t,e){return R2(t.le,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.ir(e.batchId)}),X.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return X.resolve();const i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return xc(t).ee({range:i},(r,o,c)=>{if(r[0]===this.userId){const h=Es(r[1]);s.push(h)}else c.done()}).next(()=>{Rt(s.length===0,56720,{sr:s.map(r=>r.canonicalString())})})})}containsKey(t,e){return D2(t,this.userId,e)}_r(t){return C2(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ko,lastStreamToken:""})}}function D2(n,t,e){const i=jg(t,e.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return xc(n).ee({range:r,X:!0},(c,h,f)=>{const[m,y,_]=c;m===t&&y===s&&(o=!0),f.done()}).next(()=>o)}function sa(n){return dn(n,Ki)}function xc(n){return dn(n,Yc)}function C2(n){return dn(n,Kf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new cl(0)}static cr(){return new cl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next(e=>{const i=new cl(e.highestTargetId);return e.highestTargetId=i.next(),this.hr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.lr(t).next(e=>Mt.fromTimestamp(new fe(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.lr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.lr(t).next(s=>(s.highestListenSequenceNumber=e,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.hr(t,s)))}addTargetData(t,e){return this.Pr(t,e).next(()=>this.lr(t).next(i=>(i.targetCount+=1,this.Tr(e,i),this.hr(t,i))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>vc(t).delete(e.targetId)).next(()=>this.lr(t)).next(i=>(Rt(i.targetCount>0,8065),i.targetCount-=1,this.hr(t,i)))}removeTargets(t,e,i){let s=0;const r=[];return vc(t).ee((o,c)=>{const h=nf(c);h.sequenceNumber<=e&&i.get(h.targetId)===null&&(s++,r.push(this.removeTargetData(t,h)))}).next(()=>X.waitFor(r)).next(()=>s)}forEachTarget(t,e){return vc(t).ee((i,s)=>{const r=nf(s);e(r)})}lr(t){return uC(t).get(bp).next(e=>(Rt(e!==null,2888),e))}hr(t,e){return uC(t).put(bp,e)}Pr(t,e){return vc(t).put(E2(this.serializer,e))}Tr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.lr(t).next(e=>e.targetCount)}getTargetData(t,e){const i=al(e),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return vc(t).ee({range:s,index:wN},(o,c,h)=>{const f=nf(c);yd(e,f.target)&&(r=f,h.done())}).next(()=>r)}addMatchingKeys(t,e,i){const s=[],r=da(t);return e.forEach(o=>{const c=Bn(o.path);s.push(r.put({targetId:i,path:c})),s.push(this.referenceDelegate.addReference(t,i,o))}),X.waitFor(s)}removeMatchingKeys(t,e,i){const s=da(t);return X.forEach(e,r=>{const o=Bn(r.path);return X.waitFor([s.delete([i,o]),this.referenceDelegate.removeReference(t,i,r)])})}removeMatchingKeysForTargetId(t,e){const i=da(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),s=da(t);let r=qt();return s.ee({range:i,X:!0},(o,c,h)=>{const f=Es(o[1]),m=new bt(f);r=r.add(m)}).next(()=>r)}containsKey(t,e){const i=Bn(e.path),s=IDBKeyRange.bound([i],[hN(i)],!1,!0);let r=0;return da(t).ee({index:Ow,X:!0,range:s},([o,c],h,f)=>{o!==0&&(r++,f.done())}).next(()=>r>0)}At(t,e){return vc(t).get(e).next(i=>i?nf(i):null)}}function vc(n){return dn(n,Kc)}function uC(n){return dn(n,$o)}function da(n){return dn(n,$c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="LruGarbageCollector",M2=1048576;function fC([n,t],[e,i]){const s=jt(n,e);return s===0?jt(t,i):s}class uK{constructor(t){this.Ir=t,this.buffer=new de(fC),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();fC(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class P2{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dt(hC,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ba(e)?dt(hC,"Ignoring IndexedDB error during garbage collection: ",e):await ja(e)}await this.Vr(3e5)})}}class hK{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return X.resolve(ti.ce);const i=new uK(e);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(cC)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cC):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,s,r,o,c,h,f;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,o=Date.now(),this.nthSequenceNumber(t,s))).next(y=>(i=y,c=Date.now(),this.removeTargets(t,i,e))).next(y=>(r=y,h=Date.now(),this.removeOrphanedDocuments(t,i))).next(y=>(f=Date.now(),Tc()<=Kt.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${r} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:y})))}}function k2(n,t){return new hK(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(t,e){this.db=t,this.garbageCollector=k2(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,(i,s)=>e(s))}addReference(t,e,i){return yg(t,i)}removeReference(t,e,i){return yg(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return yg(t,e)}br(t,e){return function(s,r){let o=!1;return C2(s).te(c=>D2(s,c,r).next(h=>(h&&(o=!0),X.resolve(!h)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this.Sr(t,(o,c)=>{if(c<=e){const h=this.br(t,o).next(f=>{if(!f)return r++,i.getEntry(t,o).next(()=>(i.removeEntry(o,Mt.min()),da(t).delete(function(y){return[0,Bn(y.path)]}(o))))});s.push(h)}}).next(()=>X.waitFor(s)).next(()=>i.apply(t)).next(()=>r)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return yg(t,e)}Sr(t,e){const i=da(t);let s,r=ti.ce;return i.ee({index:Ow},([o,c],{path:h,sequenceNumber:f})=>{o===0?(r!==ti.ce&&e(new bt(Es(s)),r),r=f,s=h):r=ti.ce}).next(()=>{r!==ti.ce&&e(new bt(Es(s)),r)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function yg(n,t){return da(n).put(function(i,s){return{targetId:0,path:Bn(i.path),sequenceNumber:s}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.changes=new Sr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Le.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?X.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Io(t).put(i)}removeEntry(t,e,i){return Io(t).delete(function(r,o){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ip(o),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Dr(t,i)))}getEntry(t,e){let i=Le.newInvalidDocument(e);return Io(t).ee({index:Bg,range:IDBKeyRange.only(Bh(e))},(s,r)=>{i=this.Cr(e,r)}).next(()=>i)}vr(t,e){let i={size:0,document:Le.newInvalidDocument(e)};return Io(t).ee({index:Bg,range:IDBKeyRange.only(Bh(e))},(s,r)=>{i={document:this.Cr(e,r),size:Dp(r)}}).next(()=>i)}getEntries(t,e){let i=mi();return this.Fr(t,e,(s,r)=>{const o=this.Cr(s,r);i=i.insert(s,o)}).next(()=>i)}Mr(t,e){let i=mi(),s=new Ee(bt.comparator);return this.Fr(t,e,(r,o)=>{const c=this.Cr(r,o);i=i.insert(r,c),s=s.insert(r,Dp(o))}).next(()=>({documents:i,Or:s}))}Fr(t,e,i){if(e.isEmpty())return X.resolve();let s=new de(gC);e.forEach(h=>s=s.add(h));const r=IDBKeyRange.bound(Bh(s.first()),Bh(s.last())),o=s.getIterator();let c=o.getNext();return Io(t).ee({index:Bg,range:r},(h,f,m)=>{const y=bt.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&gC(c,y)<0;)i(c,null),c=o.getNext();c&&c.isEqual(y)&&(i(c,f),c=o.hasNext()?o.getNext():null),c?m.j(Bh(c)):m.done()}).next(()=>{for(;c;)i(c,null),c=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,e,i,s,r){const o=e.path,c=[o.popLast().toArray(),o.lastSegment(),Ip(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Io(t).J(IDBKeyRange.bound(c,h,!0)).next(f=>{r==null||r.incrementDocumentReadCount(f.length);let m=mi();for(const y of f){const _=this.Cr(bt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);_.isFoundDocument()&&(_d(e,_)||s.has(_.key))&&(m=m.insert(_.key,_))}return m})}getAllFromCollectionGroup(t,e,i,s){let r=mi();const o=mC(e,i),c=mC(e,yi.max());return Io(t).ee({index:TN,range:IDBKeyRange.bound(o,c,!0)},(h,f,m)=>{const y=this.Cr(bt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);r=r.insert(y.key,y),r.size===s&&m.done()}).next(()=>r)}newChangeBuffer(t){return new mK(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return dC(t).get(U0).next(e=>(Rt(!!e,20021),e))}Dr(t,e){return dC(t).put(U0,e)}Cr(t,e){if(e){const i=JY(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(Mt.min())))return i}return Le.newInvalidDocument(t)}}function N2(n){return new dK(n)}class mK extends O2{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new Sr(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(t){const e=[];let i=0,s=new de((r,o)=>jt(r.canonicalString(),o.canonicalString()));return this.changes.forEach((r,o)=>{const c=this.Br.get(r);if(e.push(this.Nr.removeEntry(t,r,c.readTime)),o.isValidDocument()){const h=XD(this.Nr.serializer,o);s=s.add(r.path.popLast());const f=Dp(h);i+=f-c.size,e.push(this.Nr.addEntry(t,r,h))}else if(i-=c.size,this.trackRemovals){const h=XD(this.Nr.serializer,o.convertToNoDocument(Mt.min()));e.push(this.Nr.addEntry(t,r,h))}}),s.forEach(r=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,r))}),e.push(this.Nr.updateMetadata(t,i)),X.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next(i=>(this.Br.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next(({documents:i,Or:s})=>(s.forEach((r,o)=>{this.Br.set(r,{size:o,readTime:i.get(r).readTime})}),i))}}function dC(n){return dn(n,$f)}function Io(n){return dn(n,vp)}function Bh(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function mC(n,t){const e=t.documentKey.path.toArray();return[n,Ip(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function gC(n,t){const e=n.path.toArray(),i=t.path.toArray();let s=0;for(let r=0;r<e.length-2&&r<i.length-2;++r)if(s=jt(e[r],i[r]),s)return s;return s=jt(e.length,i.length),s||(s=jt(e[e.length-2],i[i.length-2]),s||jt(e[e.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&Sf(i.mutation,s,ei.empty(),fe.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,qt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=qt()){const s=Ss();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(r=>{let o=tf();return r.forEach((c,h)=>{o=o.insert(c,h.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Ss();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,qt()))}populateOverlays(t,e,i){const s=[];return i.forEach(r=>{e.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,c)=>{e.set(o,c)})})}computeViews(t,e,i,s){let r=mi();const o=Ef(),c=function(){return Ef()}();return e.forEach((h,f)=>{const m=i.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof xr)?r=r.insert(f.key,f):m!==void 0?(o.set(f.key,m.mutation.getFieldMask()),Sf(m.mutation,f,m.mutation.getFieldMask(),fe.now())):o.set(f.key,ei.empty())}),this.recalculateAndSaveOverlays(t,r).next(h=>(h.forEach((f,m)=>o.set(f,m)),e.forEach((f,m)=>c.set(f,new gK(m,o.get(f)??null))),c))}recalculateAndSaveOverlays(t,e){const i=Ef();let s=new Ee((o,c)=>o-c),r=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const c of o)c.keys().forEach(h=>{const f=e.get(h);if(f===null)return;let m=i.get(h)||ei.empty();m=c.applyToLocalView(f,m),i.set(h,m);const y=(s.get(c.batchId)||qt()).add(h);s=s.insert(c.batchId,y)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,y=JN();m.forEach(_=>{if(!r.has(_)){const b=r2(e.get(_),i.get(_));b!==null&&y.set(_,b),r=r.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(t,f,y))}return X.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(o){return bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):bY(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-r.size):X.resolve(Ss());let c=Wc,h=r;return o.next(f=>X.forEach(f,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),r.get(m)?X.resolve():this.remoteDocumentCache.getEntry(t,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(t,f,r)).next(()=>this.computeViews(t,h,f,qt())).next(m=>({batchId:c,changes:ZN(m)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new bt(e)).next(i=>{let s=tf();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const r=e.collectionGroup;let o=tf();return this.indexManager.getCollectionParents(t,r).next(c=>X.forEach(c,h=>{const f=function(y,_){return new sy(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(e,h.child(r));return this.getDocumentsMatchingCollectionQuery(t,f,i,s).next(m=>{m.forEach((y,_)=>{o=o.insert(y,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r,s))).next(o=>{r.forEach((h,f)=>{const m=f.getKey();o.get(m)===null&&(o=o.insert(m,Le.newInvalidDocument(m)))});let c=tf();return o.forEach((h,f)=>{const m=r.get(h);m!==void 0&&Sf(m.mutation,f,ei.empty(),fe.now()),_d(e,f)&&(c=c.insert(h,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return X.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:Gn(s.createTime)}}(e)),X.resolve()}getNamedQuery(t,e){return X.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(s){return{name:s.name,query:S2(s.bundledQuery),readTime:Gn(s.readTime)}}(e)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(){this.overlays=new Ee(bt.comparator),this.qr=new Map}getOverlay(t,e){return X.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ss();return X.forEach(e,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,r)=>{this.St(t,e,r)}),X.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),X.resolve()}getOverlaysForCollection(t,e,i){const s=Ss(),r=e.length+1,o=new bt(e.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===r&&h.largestBatchId>i&&s.set(h.getKey(),h)}return X.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let r=new Ee((f,m)=>f-m);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>i){let m=r.get(f.largestBatchId);m===null&&(m=Ss(),r=r.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=Ss(),h=r.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=s)););return X.resolve(c)}St(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Yw(e,i));let r=this.qr.get(e);r===void 0&&(r=qt(),this.qr.set(e,r)),this.qr.set(e,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.Qr=new de(vn.$r),this.Ur=new de(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new vn(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Gr(new vn(t,e))}zr(t,e){t.forEach(i=>this.removeReference(i,e))}jr(t){const e=new bt(new re([])),i=new vn(e,t),s=new vn(e,t+1),r=[];return this.Ur.forEachInRange([i,s],o=>{this.Gr(o),r.push(o.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new bt(new re([])),i=new vn(e,t),s=new vn(e,t+1);let r=qt();return this.Ur.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){const e=new vn(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class vn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return bt.comparator(t.key,e.key)||jt(t.Yr,e.Yr)}static Kr(t,e){return jt(t.Yr,e.Yr)||bt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new de(vn.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Gw(r,e,i,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new vn(c.key,r)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return X.resolve(o)}lookupMutationBatch(t,e){return X.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.ei(i),r=s<0?0:s;return X.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Ko:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new vn(e,0),s=new vn(e,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],o=>{const c=this.Xr(o.Yr);r.push(c)}),X.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new de(jt);return e.forEach(s=>{const r=new vn(s,0),o=new vn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],c=>{i=i.add(c.Yr)})}),X.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let r=i;bt.isDocumentKey(r)||(r=r.child(""));const o=new vn(new bt(r),0);let c=new de(jt);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(c=c.add(h.Yr)),!0)},o),X.resolve(this.ti(c))}ti(t){const e=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){Rt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return X.forEach(e.mutations,s=>{const r=new vn(s.key,e.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,e){const i=new vn(e,0),s=this.Zr.firstAfterOrEqual(i);return X.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(t){this.ri=t,this.docs=function(){return new Ee(bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),r=s?s.size:0,o=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return X.resolve(i?i.document.mutableCopy():Le.newInvalidDocument(e))}getEntries(t,e){let i=mi();return e.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Le.newInvalidDocument(s))}),X.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let r=mi();const o=e.path,c=new bt(o.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||Pw(gN(m),i)<=0||(s.has(m.key)||_d(e,m))&&(r=r.insert(m.key,m.mutableCopy()))}return X.resolve(r)}getAllFromCollectionGroup(t,e,i,s){Et(9500)}ii(t,e){return X.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new TK(this)}getSize(t){return X.resolve(this.size)}}class TK extends O2{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),X.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(t){this.persistence=t,this.si=new Sr(e=>al(e),yd),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.oi=0,this._i=new Zw,this.targetCount=0,this.ai=cl.ur()}forEachTarget(t,e){return this.si.forEach((i,s)=>e(s)),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),X.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new cl(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,X.resolve()}updateTargetData(t,e){return this.Pr(e),X.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,e,i){let s=0;const r=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),X.waitFor(r).next(()=>s)}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return X.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),X.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const s=this.persistence.referenceDelegate,r=[];return s&&e.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),X.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),X.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return X.resolve(i)}containsKey(t,e){return X.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t,e){this.ui={},this.overlays={},this.ci=new ti(0),this.li=!1,this.li=!0,this.hi=new _K,this.referenceDelegate=t(this),this.Pi=new wK(this),this.indexManager=new oK,this.remoteDocumentCache=function(s){return new bK(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new w2(e),this.Ii=new pK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new yK,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new vK(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){dt("MemoryPersistence","Starting transaction:",t);const s=new EK(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,e){return X.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,e)))}}class EK extends yN{constructor(t){super(),this.currentSequenceNumber=t}}class fy{constructor(t){this.persistence=t,this.Ri=new Zw,this.Vi=null}static mi(t){return new fy(t)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),X.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),X.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),X.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,i=>{const s=bt.fromPath(i);return this.gi(t,s).next(r=>{r||e.removeEntry(s,Mt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return X.or([()=>X.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Cp{constructor(t,e){this.persistence=t,this.pi=new Sr(i=>Bn(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=k2(this,e)}static mi(t,e){return new Cp(t,e)}Ei(){}di(t){return X.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}pr(t,e){return X.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?X.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,o=>this.br(t,o,e).next(c=>{c||(i++,r.removeEntry(o,Mt.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),X.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),X.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ug(t.data.value)),e}br(t,e,i){return X.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return X.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(t){this.serializer=t}k(t,e,i,s){const r=new Qp("createOrUpgrade",e);i<1&&s>=1&&(function(h){h.createObjectStore(pd)}(t),function(h){h.createObjectStore(Kf,{keyPath:LW}),h.createObjectStore(Ki,{keyPath:AD,autoIncrement:!0}).createIndex(Ho,ID,{unique:!0}),h.createObjectStore(Yc)}(t),pC(t),function(h){h.createObjectStore(ko)}(t));let o=X.resolve();return i<3&&s>=3&&(i!==0&&(function(h){h.deleteObjectStore($c),h.deleteObjectStore(Kc),h.deleteObjectStore($o)}(t),pC(t)),o=o.next(()=>function(h){const f=h.store($o),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return f.put(bp,m)}(r))),i<4&&s>=4&&(i!==0&&(o=o.next(()=>function(h,f){return f.store(Ki).J().next(y=>{h.deleteObjectStore(Ki),h.createObjectStore(Ki,{keyPath:AD,autoIncrement:!0}).createIndex(Ho,ID,{unique:!0});const _=f.store(Ki),b=y.map(w=>_.put(w));return X.waitFor(b)})}(t,r))),o=o.next(()=>{(function(h){h.createObjectStore(Xc,{keyPath:WW})})(t)})),i<5&&s>=5&&(o=o.next(()=>this.yi(r))),i<6&&s>=6&&(o=o.next(()=>(function(h){h.createObjectStore($f)}(t),this.wi(r)))),i<7&&s>=7&&(o=o.next(()=>this.Si(r))),i<8&&s>=8&&(o=o.next(()=>this.bi(t,r))),i<9&&s>=9&&(o=o.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&s>=10&&(o=o.next(()=>this.Di(r))),i<11&&s>=11&&(o=o.next(()=>{(function(h){h.createObjectStore(Jp,{keyPath:YW})})(t),function(h){h.createObjectStore(ty,{keyPath:KW})}(t)})),i<12&&s>=12&&(o=o.next(()=>{(function(h){const f=h.createObjectStore(ey,{keyPath:eY});f.createIndex(H0,nY,{unique:!1}),f.createIndex(xN,iY,{unique:!1})})(t)})),i<13&&s>=13&&(o=o.next(()=>function(h){const f=h.createObjectStore(vp,{keyPath:BW});f.createIndex(Bg,FW),f.createIndex(TN,UW)}(t)).next(()=>this.Ci(t,r)).next(()=>t.deleteObjectStore(ko))),i<14&&s>=14&&(o=o.next(()=>this.Fi(t,r))),i<15&&s>=15&&(o=o.next(()=>function(h){h.createObjectStore(Nw,{keyPath:$W,autoIncrement:!0}).createIndex(z0,XW,{unique:!1}),h.createObjectStore(vf,{keyPath:QW}).createIndex(EN,ZW,{unique:!1}),h.createObjectStore(bf,{keyPath:JW}).createIndex(SN,tY,{unique:!1})}(t))),i<16&&s>=16&&(o=o.next(()=>{e.objectStore(vf).clear()}).next(()=>{e.objectStore(bf).clear()})),i<17&&s>=17&&(o=o.next(()=>{(function(h){h.createObjectStore(Vw,{keyPath:sY})})(t)})),i<18&&s>=18&&Wk()&&(o=o.next(()=>{e.objectStore(vf).clear()}).next(()=>{e.objectStore(bf).clear()})),o}wi(t){let e=0;return t.store(ko).ee((i,s)=>{e+=Dp(s)}).next(()=>{const i={byteSize:e};return t.store($f).put(U0,i)})}yi(t){const e=t.store(Kf),i=t.store(Ki);return e.J().next(s=>X.forEach(s,r=>{const o=IDBKeyRange.bound([r.userId,Ko],[r.userId,r.lastAcknowledgedBatchId]);return i.J(Ho,o).next(c=>X.forEach(c,h=>{Rt(h.userId===r.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const f=Vo(this.serializer,h);return R2(t,r.userId,f).next(()=>{})}))}))}Si(t){const e=t.store($c),i=t.store(ko);return t.store($o).get(bp).next(s=>{const r=[];return i.ee((o,c)=>{const h=new re(o),f=function(y){return[0,Bn(y)]}(h);r.push(e.get(f).next(m=>m?X.resolve():(y=>e.put({targetId:0,path:Bn(y),sequenceNumber:s.highestListenSequenceNumber}))(h)))}).next(()=>X.waitFor(r))})}bi(t,e){t.createObjectStore(Xf,{keyPath:GW});const i=e.store(Xf),s=new Qw,r=o=>{if(s.add(o)){const c=o.lastSegment(),h=o.popLast();return i.put({collectionId:c,parent:Bn(h)})}};return e.store(ko).ee({X:!0},(o,c)=>{const h=new re(o);return r(h.popLast())}).next(()=>e.store(Yc).ee({X:!0},([o,c,h],f)=>{const m=Es(c);return r(m.popLast())}))}Di(t){const e=t.store(Kc);return e.ee((i,s)=>{const r=nf(s),o=E2(this.serializer,r);return e.put(o)})}Ci(t,e){const i=e.store(ko),s=[];return i.ee((r,o)=>{const c=e.store(vp),h=function(y){return y.document?new bt(re.fromString(y.document.name).popFirst(5)):y.noDocument?bt.fromSegments(y.noDocument.path):y.unknownDocument?bt.fromSegments(y.unknownDocument.path):Et(36783)}(o).path.toArray(),f={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(c.put(f))}).next(()=>X.waitFor(s))}Fi(t,e){const i=e.store(Ki),s=N2(this.serializer),r=new Jw(fy.mi,this.serializer.yt);return i.J().next(o=>{const c=new Map;return o.forEach(h=>{let f=c.get(h.userId)??qt();Vo(this.serializer,h).keys().forEach(m=>f=f.add(m)),c.set(h.userId,f)}),X.forEach(c,(h,f)=>{const m=new kn(f),y=uy.wt(this.serializer,m),_=r.getIndexManager(m),b=hy.wt(m,this.serializer,_,r.referenceDelegate);return new V2(s,b,y,_).recalculateAndSaveOverlaysForDocumentKeys(new q0(e,ti.ce),h).next()})})}}function pC(n){n.createObjectStore($c,{keyPath:HW}).createIndex(Ow,qW,{unique:!0}),n.createObjectStore(Kc,{keyPath:"targetId"}).createIndex(wN,zW,{unique:!0}),n.createObjectStore($o)}const ra="IndexedDbPersistence",vb=18e5,bb=5e3,Tb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xK="main";class tE{constructor(t,e,i,s,r,o,c,h,f,m,y=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Mi=r,this.window=o,this.document=c,this.xi=f,this.Oi=m,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!tE.v())throw new vt(ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fK(this,s),this.$i=e+xK,this.serializer=new w2(h),this.Ui=new Sa(this.$i,this.Ni,new SK(this.serializer)),this.hi=new eK,this.Pi=new cK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=N2(this.serializer),this.Ii=new tK,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&Ge(ra,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(ht.FAILED_PRECONDITION,Tb);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Pi.getHighestSequenceNumber(t))}).then(t=>{this.ci=new ti(t,this.xi)}).then(()=>{this.li=!0}).catch(t=>(this.Ui&&this.Ui.close(),Promise.reject(t)))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>_g(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(t).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(t)).next(e=>this.isPrimary&&!e?this.Zi(t).next(()=>!1):!!e&&this.Xi(t).next(()=>!0))).catch(t=>{if(Ba(t))return dt(ra,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return dt(ra,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable(()=>this.Qi(t)),this.isPrimary=t})}Hi(t){return Fh(t).get(mc).next(e=>X.resolve(this.es(e)))}ts(t){return _g(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,vb)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const i=dn(e,Xc);return i.J().next(s=>{const r=this.ss(s,vb),o=s.filter(c=>r.indexOf(c)===-1);return X.forEach(o,c=>i.delete(c.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?X.resolve(!0):Fh(t).get(mc).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,bb)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new vt(ht.FAILED_PRECONDITION,Tb);return!1}}return!(!this.networkEnabled||!this.inForeground)||_g(t).J().next(i=>this.ss(i,bb).find(s=>{if(this.clientId!==s.clientId){const r=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(r||o&&c)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&dt(ra,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[pd,Xc],t=>{const e=new q0(t,ti.ce);return this.Zi(e).next(()=>this.ts(e))}),this.Ui.close(),this.Ps()}ss(t,e){return t.filter(i=>this.rs(i.updateTimeMs,e)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",t=>_g(t).J().next(e=>this.ss(e,vb).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return hy.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new lK(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return uy.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,i){dt(ra,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",r=function(h){return h===18?oY:h===17?DN:h===16?aY:h===15?Lw:h===14?RN:h===13?IN:h===12?rY:h===11?AN:void Et(60245)}(this.Ni);let o;return this.Ui.runTransaction(t,s,r,c=>(o=new q0(c,this.ci?this.ci.next():ti.ce),e==="readwrite-primary"?this.Hi(o).next(h=>!!h||this.Yi(o)).next(h=>{if(!h)throw Ge(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new vt(ht.FAILED_PRECONDITION,pN);return i(o)}).next(h=>this.Xi(o).next(()=>h)):this.Is(o).next(()=>i(o)))).then(c=>(o.raiseOnCommittedEvent(),c))}Is(t){return Fh(t).get(mc).next(e=>{if(e!==null&&this.rs(e.leaseTimestampMs,bb)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new vt(ht.FAILED_PRECONDITION,Tb)})}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fh(t).put(mc,e)}static v(){return Sa.v()}Zi(t){const e=Fh(t);return e.get(mc).next(i=>this.es(i)?(dt(ra,"Releasing primary lease."),e.delete(mc)):X.resolve())}rs(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(Ge(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Gk()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const i=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return dt(ra,`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ge(ra,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Ge("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Fh(n){return dn(n,pd)}function _g(n){return dn(n,Xc)}function L2(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=s}static As(t,e){let i=qt(),s=qt();for(const r of e.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new eE(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Gk()?8:_N(fn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const r={result:null};return this.ys(t,e).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ws(t,e,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new AK;return this.Ss(t,e,o).next(c=>{if(r.result=c,this.Vs)return this.bs(t,e,o,c.size)})}).next(()=>r.result)}bs(t,e,i,s){return i.documentReadCount<this.fs?(Tc()<=Kt.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",wc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Tc()<=Kt.DEBUG&&dt("QueryEngine","Query:",wc(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Tc()<=Kt.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",wc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,pi(e))):X.resolve())}ys(t,e){if(FD(e))return X.resolve(null);let i=pi(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=X0(e,null,"F"),i=pi(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const o=qt(...r);return this.ps.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,i).next(h=>{const f=this.Ds(e,c);return this.Cs(e,f,o,h.readTime)?this.ys(t,X0(e,null,"F")):this.vs(t,f,e,h)}))})))}ws(t,e,i,s){return FD(e)||s.isEqual(Mt.min())?X.resolve(null):this.ps.getDocuments(t,i).next(r=>{const o=this.Ds(e,r);return this.Cs(e,o,i,s)?X.resolve(null):(Tc()<=Kt.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wc(e)),this.vs(t,o,e,mN(s,Wc)).next(c=>c))})}Ds(t,e){let i=new de(XN(t));return e.forEach((s,r)=>{_d(t,r)&&(i=i.add(r))}),i}Cs(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,e,i){return Tc()<=Kt.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",wc(e)),this.ps.getDocumentsMatchingQuery(t,e,yi.min(),i)}vs(t,e,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(e.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="LocalStore",IK=3e8;class RK{constructor(t,e,i,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new Ee(jt),this.xs=new Sr(r=>al(r),yd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new V2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function B2(n,t,e,i){return new RK(n,t,e,i)}async function F2(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],c=[];let h=qt();for(const f of s){o.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of r){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return e.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:o,addedBatchIds:c}))})})}function DK(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=e.Ns.newChangeBuffer({trackRemovals:!0});return function(c,h,f,m){const y=f.batch,_=y.keys();let b=X.resolve();return _.forEach(w=>{b=b.next(()=>m.getEntry(h,w)).next(x=>{const A=f.docVersions.get(w);Rt(A!==null,48541),x.version.compareTo(A)<0&&(y.applyToRemoteDocument(x,f),x.isValidDocument()&&(x.setReadTime(f.commitVersion),m.addEntry(x)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(h,y))}(e,i,t,r).next(()=>r.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let h=qt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function U2(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function CK(n,t){const e=It(n),i=t.snapshotVersion;let s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;const c=[];t.targetChanges.forEach((m,y)=>{const _=s.get(y);if(!_)return;c.push(e.Pi.removeMatchingKeys(r,m.removedDocuments,y).next(()=>e.Pi.addMatchingKeys(r,m.addedDocuments,y)));let b=_.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(y)!==null?b=b.withResumeToken($e.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,i)),s=s.insert(y,b),function(x,A,M){return x.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=IK?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(_,b,m)&&c.push(e.Pi.updateTargetData(r,b))});let h=mi(),f=qt();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(r,m))}),c.push(MK(r,o,t.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Mt.min())){const m=e.Pi.getLastRemoteSnapshotVersion(r).next(y=>e.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));c.push(m)}return X.waitFor(c).next(()=>o.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,h,f)).next(()=>h)}).then(r=>(e.Ms=s,r))}function MK(n,t,e){let i=qt(),s=qt();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let o=mi();return e.forEach((c,h)=>{const f=r.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(Mt.min())?(t.removeEntry(c,h.readTime),o=o.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(h),o=o.insert(c,h)):dt(nE,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{ks:o,qs:s}})}function PK(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Ko),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Mp(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.Pi.getTargetData(i,t).next(r=>r?(s=r,X.resolve(s)):e.Pi.allocateTargetId(i).next(o=>(s=new pr(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i})}async function su(n,t,e){const i=It(n),s=i.Ms.get(t),r=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ba(o))throw o;dt(nE,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function sT(n,t,e){const i=It(n);let s=Mt.min(),r=qt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(h,f,m){const y=It(h),_=y.xs.get(m);return _!==void 0?X.resolve(y.Ms.get(_)):y.Pi.getTargetData(f,m)}(i,o,pi(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,c.targetId).next(h=>{r=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,t,e?s:Mt.min(),e?r:qt())).next(c=>(q2(i,$N(t),c),{documents:c,Qs:r})))}function z2(n,t){const e=It(n),i=It(e.Pi),s=e.Ms.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",r=>i.At(r,t).next(o=>o?o.target:null))}function H2(n,t){const e=It(n),i=e.Os.get(t)||Mt.min();return e.persistence.runTransaction("Get new document changes","readonly",s=>e.Ns.getAllFromCollectionGroup(s,t,mN(i,Wc),Number.MAX_SAFE_INTEGER)).then(s=>(q2(e,t,s),s))}function q2(n,t,e){let i=n.Os.get(t)||Mt.min();e.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Os.set(t,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="firestore_clients";function yC(n,t){return`${G2}_${n}_${t}`}const W2="firestore_mutations";function _C(n,t,e){let i=`${W2}_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const Y2="firestore_targets";function wb(n,t){return`${Y2}_${n}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="SharedClientState";class Pp{constructor(t,e,i,s){this.user=t,this.batchId=e,this.state=i,this.error=s}static Ws(t,e,i){const s=JSON.parse(i);let r,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(r=new vt(s.error.code,s.error.message))),o?new Pp(t,e,s.state,r):(Ge(bs,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class xf{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ws(t,e){const i=JSON.parse(e);let s,r=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return r&&i.error&&(r=typeof i.error.message=="string"&&typeof i.error.code=="string",r&&(s=new vt(i.error.code,i.error.message))),r?new xf(t,i.state,s):(Ge(bs,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class kp{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const i=JSON.parse(e);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,r=Hw();for(let o=0;s&&o<i.activeTargetIds.length;++o)s=vN(i.activeTargetIds[o]),r=r.add(i.activeTargetIds[o]);return s?new kp(t,r):(Ge(bs,`Failed to parse client data for instance '${t}': ${e}`),null)}}class iE{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new iE(e.clientId,e.onlineState):(Ge(bs,`Failed to parse online state: ${t}`),null)}}class rT{constructor(){this.activeTargetIds=Hw()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Eb{constructor(t,e,i,s,r){this.window=t,this.Mi=e,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ee(jt),this.started=!1,this.Xs=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.eo=yC(this.persistenceKey,this.Js),this.no=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new rT),this.ro=new RegExp(`^${G2}_${o}_([^_]*)$`),this.io=new RegExp(`^${W2}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Y2}_${o}_(\\d+)$`),this.oo=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this._o=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const i of t){if(i===this.Js)continue;const s=this.getItem(yC(this.persistenceKey,i));if(s){const r=kp.Ws(i,s);r&&(this.Zs=this.Zs.insert(r.clientId,r))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const i=this.uo(e);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach((i,s)=>{s.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,i){this.ho(t,e,i),this.Po(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const s=this.storage.getItem(wb(this.persistenceKey,t));if(s){const r=xf.Ws(t,s);r&&(i=r.state)}}return e&&this.To.zs(t),this.ao(),i}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(wb(this.persistenceKey,t))}updateQueryState(t,e,i){this.Io(t,e,i)}handleUserChange(t,e,i){e.forEach(s=>{this.Po(s)}),this.currentUser=t,i.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return dt(bs,"READ",t,e),e}setItem(t,e){dt(bs,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){dt(bs,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(dt(bs,"EVENT",e.key,e.newValue),e.key===this.eo)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const i=this.Ro(e.key);return this.Vo(i,null)}{const i=this.mo(e.key,e.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(this.so.test(e.key)){if(e.newValue!==null){const i=this.yo(e.key,e.newValue);if(i)return this.wo(i)}}else if(e.key===this.oo){if(e.newValue!==null){const i=this.uo(e.newValue);if(i)return this.co(i)}}else if(e.key===this.no){const i=function(r){let o=ti.ce;if(r!=null)try{const c=JSON.parse(r);Rt(typeof c=="number",30636,{So:r}),o=c}catch(c){Ge(bs,"Failed to read sequence number from WebStorage",c)}return o}(e.newValue);i!==ti.ce&&this.sequenceNumberHandler(i)}else if(e.key===this._o){const i=this.bo(e.newValue);await Promise.all(i.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(e)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,i){const s=new Pp(this.currentUser,t,e,i),r=_C(this.persistenceKey,this.currentUser,t);this.setItem(r,s.Gs())}Po(t){const e=_C(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,i){const s=wb(this.persistenceKey,t),r=new xf(t,e,i);this.setItem(s,r.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const i=this.Ro(t);return kp.Ws(i,e)}fo(t,e){const i=this.io.exec(t),s=Number(i[1]),r=i[2]!==void 0?i[2]:null;return Pp.Ws(new kn(r),s,e)}yo(t,e){const i=this.so.exec(t),s=Number(i[1]);return xf.Ws(s,e)}uo(t){return iE.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);dt(bs,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const i=e?this.Zs.insert(t,e):this.Zs.remove(t),s=this.lo(this.Zs),r=this.lo(i),o=[],c=[];return r.forEach(h=>{s.has(h)||o.push(h)}),s.forEach(h=>{r.has(h)||c.push(h)}),this.syncEngine.Fo(o,c).then(()=>{this.Zs=i})}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Hw();return t.forEach((i,s)=>{e=e.unionWith(s.activeTargetIds)}),e}}class K2{constructor(){this.Mo=new rT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new rT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="ConnectivityMonitor";class bC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dt(vC,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dt(vC,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg=null;function aT(){return vg===null?vg=function(){return 268435456+Math.round(2147483648*Math.random())}():vg++,"0x"+vg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="RestConnection",OK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NK{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Tp?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,e,i,s,r){const o=aT(),c=this.zo(t,e.toUriEncodedString());dt(Sb,`Sending RPC '${t}' ${o}:`,c,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,r);const{host:f}=new URL(c),m=du(f);return this.Jo(t,c,h,i,m).then(y=>(dt(Sb,`Received RPC '${t}' ${o}: `,y),y),y=>{throw Gf(Sb,`RPC '${t}' ${o} failed with error: `,y,"url: ",c,"request:",i),y})}Ho(t,e,i,s,r,o){return this.Go(t,e,i,s,r)}jo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,e){const i=OK[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class LK extends NK{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,s,r){const o=aT();return new Promise((c,h)=>{const f=new rN;f.setWithCredentials(!0),f.listenOnce(aN.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Vg.NO_ERROR:const y=f.getResponseJson();dt(Pn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(y)),c(y);break;case Vg.TIMEOUT:dt(Pn,`RPC '${t}' ${o} timed out`),h(new vt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const _=f.getStatus();if(dt(Pn,`RPC '${t}' ${o} failed with status:`,_,"response text:",f.getResponseText()),_>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const w=b==null?void 0:b.error;if(w&&w.status&&w.message){const x=function(M){const N=M.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(N)>=0?N:ht.UNKNOWN}(w.status);h(new vt(x,w.message))}else h(new vt(ht.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new vt(ht.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:t,streamId:o,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{dt(Pn,`RPC '${t}' ${o} completed.`)}});const m=JSON.stringify(s);dt(Pn,`RPC '${t}' ${o} sending request:`,s),f.send(e,"POST",m,i,15)})}T_(t,e,i){const s=aT(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=cN(),c=lN(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;const m=r.join("");dt(Pn,`Creating RPC '${t}' stream ${s}: ${m}`,h);const y=o.createWebChannel(m,h);this.I_(y);let _=!1,b=!1;const w=new VK({Yo:A=>{b?dt(Pn,`Not sending because RPC '${t}' stream ${s} is closed:`,A):(_||(dt(Pn,`Opening RPC '${t}' stream ${s} transport.`),y.open(),_=!0),dt(Pn,`RPC '${t}' stream ${s} sending:`,A),y.send(A))},Zo:()=>y.close()}),x=(A,M,N)=>{A.listen(M,L=>{try{N(L)}catch(H){setTimeout(()=>{throw H},0)}})};return x(y,Jh.EventType.OPEN,()=>{b||(dt(Pn,`RPC '${t}' stream ${s} transport opened.`),w.o_())}),x(y,Jh.EventType.CLOSE,()=>{b||(b=!0,dt(Pn,`RPC '${t}' stream ${s} transport closed`),w.a_(),this.E_(y))}),x(y,Jh.EventType.ERROR,A=>{b||(b=!0,Gf(Pn,`RPC '${t}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),w.a_(new vt(ht.UNAVAILABLE,"The operation could not be completed")))}),x(y,Jh.EventType.MESSAGE,A=>{var M;if(!b){const N=A.data[0];Rt(!!N,16349);const L=N,H=(L==null?void 0:L.error)||((M=L[0])==null?void 0:M.error);if(H){dt(Pn,`RPC '${t}' stream ${s} received error:`,H);const F=H.status;let K=function(R){const V=en[R];if(V!==void 0)return l2(V)}(F),O=H.message;K===void 0&&(K=ht.INTERNAL,O="Unknown error status: "+F+" with message "+H.message),b=!0,w.a_(new vt(K,O)),y.close()}else dt(Pn,`RPC '${t}' stream ${s} received:`,N),w.u_(N)}}),x(c,oN.STAT_EVENT,A=>{A.stat===j0.PROXY?dt(Pn,`RPC '${t}' stream ${s} detected buffering proxy`):A.stat===j0.NOPROXY&&dt(Pn,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof window<"u"?window:null}function Wg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(n){return new HY(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t,e,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&dt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="PersistentStream";class Q2{constructor(t,e,i,s,r,o,c,h){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new X2(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ht.RESOURCE_EXHAUSTED?(Ge(e.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===e&&this.G_(i,s)},i=>{t(()=>{const s=new vt(ht.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return dt(TC,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(dt(TC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jK extends Q2{constructor(t,e,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,o),this.serializer=r}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=WY(this.serializer,t),i=function(r){if(!("targetChange"in r))return Mt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Mt.min():o.readTime?Gn(o.readTime):Mt.min()}(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=J0(this.serializer),e.addTarget=function(r,o){let c;const h=o.target;if(c=Ep(h)?{documents:p2(r,h)}:{query:y2(r,h).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=h2(r,o.resumeToken);const f=Q0(r,o.expectedCount);f!==null&&(c.expectedCount=f)}else if(o.snapshotVersion.compareTo(Mt.min())>0){c.readTime=iu(r,o.snapshotVersion.toTimestamp());const f=Q0(r,o.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,t);const i=KY(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=J0(this.serializer),e.removeTarget=t,this.q_(e)}}class BK extends Q2{constructor(t,e,i,s,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Rt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Rt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Rt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=YY(t.writeResults,t.commitTime),i=Gn(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=J0(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Ap(this.serializer,i))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{}class UK extends FK{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Go(t,Z0(e,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new vt(ht.UNKNOWN,r.toString())})}Ho(t,e,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(t,Z0(e,i),s,o,c,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new vt(ht.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class zK{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ge(e),this.aa=!1):dt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="RemoteStore";class HK{constructor(t,e,i,s,r){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{pl(this)&&(dt(ul,"Restarting streams for network reachability change."),await async function(h){const f=It(h);f.Ea.add(4),await Td(f),f.Ra.set("Unknown"),f.Ea.delete(4),await my(f)}(this))})}),this.Ra=new zK(i,s)}}async function my(n){if(pl(n))for(const t of n.da)await t(!0)}async function Td(n){for(const t of n.da)await t(!1)}function gy(n,t){const e=It(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),aE(e)?rE(e):vu(e).O_()&&sE(e,t))}function ru(n,t){const e=It(n),i=vu(e);e.Ia.delete(t),i.O_()&&Z2(e,t),e.Ia.size===0&&(i.O_()?i.L_():pl(e)&&e.Ra.set("Unknown"))}function sE(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}vu(n).Y_(t)}function Z2(n,t){n.Va.Ue(t),vu(n).Z_(t)}function rE(n){n.Va=new BY({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),vu(n).start(),n.Ra.ua()}function aE(n){return pl(n)&&!vu(n).x_()&&n.Ia.size>0}function pl(n){return It(n).Ea.size===0}function J2(n){n.Va=void 0}async function qK(n){n.Ra.set("Online")}async function GK(n){n.Ia.forEach((t,e)=>{sE(n,t)})}async function WK(n,t){J2(n),aE(n)?(n.Ra.ha(t),rE(n)):n.Ra.set("Unknown")}async function YK(n,t,e){if(n.Ra.set("Online"),t instanceof u2&&t.state===2&&t.cause)try{await async function(s,r){const o=r.cause;for(const c of r.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(n,t)}catch(i){dt(ul,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Op(n,i)}else if(t instanceof qg?n.Va.Ze(t):t instanceof c2?n.Va.st(t):n.Va.tt(t),!e.isEqual(Mt.min()))try{const i=await U2(n.localStore);e.compareTo(i)>=0&&await function(r,o){const c=r.Va.Tt(o);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=r.Ia.get(f);m&&r.Ia.set(f,m.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach((h,f)=>{const m=r.Ia.get(h);if(!m)return;r.Ia.set(h,m.withResumeToken($e.EMPTY_BYTE_STRING,m.snapshotVersion)),Z2(r,h);const y=new pr(m.target,h,f,m.sequenceNumber);sE(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e)}catch(i){dt(ul,"Failed to raise snapshot:",i),await Op(n,i)}}async function Op(n,t,e){if(!Ba(t))throw t;n.Ea.add(1),await Td(n),n.Ra.set("Offline"),e||(e=()=>U2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{dt(ul,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await my(n)})}function tV(n,t){return t().catch(e=>Op(n,e,t))}async function _u(n){const t=It(n),e=Pa(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ko;for(;KK(t);)try{const s=await PK(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,$K(t,s)}catch(s){await Op(t,s)}eV(t)&&nV(t)}function KK(n){return pl(n)&&n.Ta.length<10}function $K(n,t){n.Ta.push(t);const e=Pa(n);e.O_()&&e.X_&&e.ea(t.mutations)}function eV(n){return pl(n)&&!Pa(n).x_()&&n.Ta.length>0}function nV(n){Pa(n).start()}async function XK(n){Pa(n).ra()}async function QK(n){const t=Pa(n);for(const e of n.Ta)t.ea(e.mutations)}async function ZK(n,t,e){const i=n.Ta.shift(),s=Ww.from(i,t,e);await tV(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await _u(n)}async function JK(n,t){t&&Pa(n).X_&&await async function(i,s){if(function(o){return VY(o)&&o!==ht.ABORTED}(s.code)){const r=i.Ta.shift();Pa(i).B_(),await tV(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await _u(i)}}(n,t),eV(n)&&nV(n)}async function wC(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),dt(ul,"RemoteStore received new credentials");const i=pl(e);e.Ea.add(3),await Td(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await my(e)}async function oT(n,t){const e=It(n);t?(e.Ea.delete(2),await my(e)):t||(e.Ea.add(2),await Td(e),e.Ra.set("Unknown"))}function vu(n){return n.ma||(n.ma=function(e,i,s){const r=It(e);return r.sa(),new jK(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Xo:qK.bind(null,n),t_:GK.bind(null,n),r_:WK.bind(null,n),H_:YK.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),aE(n)?rE(n):n.Ra.set("Unknown")):(await n.ma.stop(),J2(n))})),n.ma}function Pa(n){return n.fa||(n.fa=function(e,i,s){const r=It(e);return r.sa(),new BK(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:XK.bind(null,n),r_:JK.bind(null,n),ta:QK.bind(null,n),na:ZK.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await _u(n)):(await n.fa.stop(),n.Ta.length>0&&(dt(ul,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,e,i,s,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,r){const o=Date.now()+i,c=new oE(t,e,o,s,r);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lE(n,t){if(Ge("AsyncQueue",`${t}: ${n}`),Ba(n))return new vt(ht.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{static emptySet(t){return new Bc(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||bt.comparator(e.key,i.key):(e,i)=>bt.comparator(e.key,i.key),this.keyedMap=tf(),this.sortedSet=new Ee(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Bc)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Bc;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.ga=new Ee(bt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Et(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,i)=>{t.push(i)}),t}}class au{constructor(t,e,i,s,r,o,c,h,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(t,e,i,s,r){const o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new au(t,e,Bc.emptySet(e),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ay(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class e${constructor(){this.queries=SC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=It(e),r=s.queries;s.queries=SC(),r.forEach((o,c)=>{for(const h of c.Sa)h.onError(i)})})(this,new vt(ht.ABORTED,"Firestore shutting down"))}}function SC(){return new Sr(n=>KN(n),ay)}async function iV(n,t){const e=It(n);let i=3;const s=t.query;let r=e.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new t$,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await e.onListen(s,!0);break;case 1:r.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(o){const c=lE(o,`Initialization of query '${wc(t.query)}' failed`);return void t.onError(c)}e.queries.set(s,r),r.Sa.push(t),t.va(e.onlineState),r.wa&&t.Fa(r.wa)&&cE(e)}async function sV(n,t){const e=It(n),i=t.query;let s=3;const r=e.queries.get(i);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function n$(n,t){const e=It(n);let i=!1;for(const s of t){const r=s.query,o=e.queries.get(r);if(o){for(const c of o.Sa)c.Fa(s)&&(i=!0);o.wa=s}}i&&cE(e)}function i$(n,t,e){const i=It(n),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(e);i.queries.delete(t)}function cE(n){n.Ca.forEach(t=>{t.next()})}var lT,xC;(xC=lT||(lT={})).Ma="default",xC.Cache="cache";class rV{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new au(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=au.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==lT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(t){this.key=t}}class oV{constructor(t){this.key=t}}class s${constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qt(),this.mutatedKeys=qt(),this.eu=XN(t),this.tu=new Bc(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new EC,s=e?e.tu:this.tu;let r=e?e.mutatedKeys:this.mutatedKeys,o=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((m,y)=>{const _=s.get(m),b=_d(this.query,y)?y:null,w=!!_&&this.mutatedKeys.has(_.key),x=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let A=!1;_&&b?_.data.isEqual(b.data)?w!==x&&(i.track({type:3,doc:b}),A=!0):this.su(_,b)||(i.track({type:2,doc:b}),A=!0,(h&&this.eu(b,h)>0||f&&this.eu(b,f)<0)&&(c=!0)):!_&&b?(i.track({type:0,doc:b}),A=!0):_&&!b&&(i.track({type:1,doc:_}),A=!0,(h||f)&&(c=!0)),A&&(b?(o=o.add(b),r=x?r.add(m):r.delete(m)):(o=o.delete(m),r=r.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),r=r.delete(m.key),i.track({type:1,doc:m})}return{tu:o,iu:i,Cs:c,mutatedKeys:r}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((m,y)=>function(b,w){const x=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:A})}};return x(b)-x(w)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(i),s=s??!1;const c=e&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,o.length!==0||f?{snapshot:new au(this.query,t.tu,r,o,t.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=qt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const e=[];return t.forEach(i=>{this.Xa.has(i)||e.push(new oV(i))}),this.Xa.forEach(i=>{t.has(i)||e.push(new aV(i))}),e}cu(t){this.Ya=t.Qs,this.Xa=qt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return au.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bu="SyncEngine";class r${constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class a${constructor(t){this.key=t,this.hu=!1}}class o${constructor(t,e,i,s,r,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Sr(c=>KN(c),ay),this.Iu=new Map,this.Eu=new Set,this.du=new Ee(bt.comparator),this.Au=new Map,this.Ru=new Zw,this.Vu={},this.mu=new Map,this.fu=cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function l$(n,t,e=!0){const i=py(n);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await lV(i,t,e,!0),s}async function c$(n,t){const e=py(n);await lV(e,t,!0,!1)}async function lV(n,t,e,i){const s=await Mp(n.localStore,pi(t)),r=s.targetId,o=n.sharedClientState.addLocalQueryTarget(r,e);let c;return i&&(c=await uE(n,t,r,o==="current",s.resumeToken)),n.isPrimaryClient&&e&&gy(n.remoteStore,s),c}async function uE(n,t,e,i,s){n.pu=(y,_,b)=>async function(x,A,M,N){let L=A.view.ru(M);L.Cs&&(L=await sT(x.localStore,A.query,!1).then(({documents:O})=>A.view.ru(O,L)));const H=N&&N.targetChanges.get(A.targetId),F=N&&N.targetMismatches.get(A.targetId)!=null,K=A.view.applyChanges(L,x.isPrimaryClient,H,F);return cT(x,A.targetId,K.au),K.snapshot}(n,y,_,b);const r=await sT(n.localStore,t,!0),o=new s$(t,r.Qs),c=o.ru(r.documents),h=bd.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),f=o.applyChanges(c,n.isPrimaryClient,h);cT(n,e,f.au);const m=new r$(t,e,o);return n.Tu.set(t,m),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),f.snapshot}async function u$(n,t,e){const i=It(n),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(o=>!ay(o,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await su(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&ru(i.remoteStore,s.targetId),ou(i,s.targetId)}).catch(ja)):(ou(i,s.targetId),await su(i.localStore,s.targetId,!0))}async function h$(n,t){const e=It(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),ru(e.remoteStore,i.targetId))}async function f$(n,t,e){const i=mE(n);try{const s=await function(o,c){const h=It(o),f=fe.now(),m=c.reduce((b,w)=>b.add(w.key),qt());let y,_;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let w=mi(),x=qt();return h.Ns.getEntries(b,m).next(A=>{w=A,w.forEach((M,N)=>{N.isValidDocument()||(x=x.add(M))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,w)).next(A=>{y=A;const M=[];for(const N of c){const L=OY(N,y.get(N.key).overlayedDocument);L!=null&&M.push(new xr(N.key,L,BN(L.value.mapValue),jn.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,M,c)}).next(A=>{_=A;const M=A.applyToLocalDocumentSet(y,x);return h.documentOverlayCache.saveOverlays(b,A.batchId,M)})}).then(()=>({batchId:_.batchId,changes:ZN(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(o,c,h){let f=o.Vu[o.currentUser.toKey()];f||(f=new Ee(jt)),f=f.insert(c,h),o.Vu[o.currentUser.toKey()]=f}(i,s.batchId,e),await Ua(i,s.changes),await _u(i.remoteStore)}catch(s){const r=lE(s,"Failed to persist write");e.reject(r)}}async function cV(n,t){const e=It(n);try{const i=await CK(e.localStore,t);t.targetChanges.forEach((s,r)=>{const o=e.Au.get(r);o&&(Rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Rt(o.hu,14607):s.removedDocuments.size>0&&(Rt(o.hu,42227),o.hu=!1))}),await Ua(e,i,t)}catch(i){await ja(i)}}function AC(n,t,e){const i=It(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach((r,o)=>{const c=o.view.va(t);c.snapshot&&s.push(c.snapshot)}),function(o,c){const h=It(o);h.onlineState=c;let f=!1;h.queries.forEach((m,y)=>{for(const _ of y.Sa)_.va(c)&&(f=!0)}),f&&cE(h)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function d$(n,t,e){const i=It(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),r=s&&s.key;if(r){let o=new Ee(bt.comparator);o=o.insert(r,Le.newNoDocument(r,Mt.min()));const c=qt().add(r),h=new vd(Mt.min(),new Map,new Ee(jt),o,c);await cV(i,h),i.du=i.du.remove(r),i.Au.delete(t),dE(i)}else await su(i.localStore,t,!1).then(()=>ou(i,t,e)).catch(ja)}async function m$(n,t){const e=It(n),i=t.batch.batchId;try{const s=await DK(e.localStore,t);fE(e,i,null),hE(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Ua(e,s)}catch(s){await ja(s)}}async function g$(n,t,e){const i=It(n);try{const s=await function(o,c){const h=It(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next(y=>(Rt(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,t);fE(i,t,e),hE(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Ua(i,s)}catch(s){await ja(s)}}function hE(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function fE(n,t,e){const i=It(n);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(e?r.reject(e):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function ou(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(i=>{n.Ru.containsKey(i)||uV(n,i)})}function uV(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(ru(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),dE(n))}function cT(n,t,e){for(const i of e)i instanceof aV?(n.Ru.addReference(i.key,t),p$(n,i)):i instanceof oV?(dt(bu,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||uV(n,i.key)):Et(19791,{wu:i})}function p$(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(dt(bu,"New document in limbo: "+e),n.Eu.add(i),dE(n))}function dE(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new bt(re.fromString(t)),i=n.fu.next();n.Au.set(i,new a$(e)),n.du=n.du.insert(e,i),gy(n.remoteStore,new pr(pi(ry(e.path)),i,"TargetPurposeLimboResolution",ti.ce))}}async function Ua(n,t,e){const i=It(n),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((c,h)=>{o.push(i.pu(h,t,e).then(f=>{var m;if((f||e)&&i.isPrimaryClient){const y=f?!f.fromCache:(m=e==null?void 0:e.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=eE.As(h.targetId,f);r.push(y)}}))}),await Promise.all(o),i.Pu.H_(s),await async function(h,f){const m=It(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>X.forEach(f,_=>X.forEach(_.Es,b=>m.persistence.referenceDelegate.addReference(y,_.targetId,b)).next(()=>X.forEach(_.ds,b=>m.persistence.referenceDelegate.removeReference(y,_.targetId,b)))))}catch(y){if(!Ba(y))throw y;dt(nE,"Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const b=m.Ms.get(_),w=b.snapshotVersion,x=b.withLastLimboFreeSnapshotVersion(w);m.Ms=m.Ms.insert(_,x)}}}(i.localStore,r))}async function y$(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){dt(bu,"User change. New user:",t.toKey());const i=await F2(e.localStore,t);e.currentUser=t,function(r,o){r.mu.forEach(c=>{c.forEach(h=>{h.reject(new vt(ht.CANCELLED,o))})}),r.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ua(e,i.Ls)}}function _$(n,t){const e=It(n),i=e.Au.get(t);if(i&&i.hu)return qt().add(i.key);{let s=qt();const r=e.Iu.get(t);if(!r)return s;for(const o of r){const c=e.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}async function v$(n,t){const e=It(n),i=await sT(e.localStore,t.query,!0),s=t.view.cu(i);return e.isPrimaryClient&&cT(e,t.targetId,s.au),s}async function b$(n,t){const e=It(n);return H2(e.localStore,t).then(i=>Ua(e,i))}async function T$(n,t,e,i){const s=It(n),r=await function(c,h){const f=It(c),m=It(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",y=>m.er(y,h).next(_=>_?f.localDocuments.getDocuments(y,_):X.resolve(null)))}(s.localStore,t);r!==null?(e==="pending"?await _u(s.remoteStore):e==="acknowledged"||e==="rejected"?(fE(s,t,i||null),hE(s,t),function(c,h){It(It(c).mutationQueue).ir(h)}(s.localStore,t)):Et(6720,"Unknown batchState",{Su:e}),await Ua(s,r)):dt(bu,"Cannot apply mutation batch with id: "+t)}async function w$(n,t){const e=It(n);if(py(e),mE(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),s=await IC(e,i.toArray());e.gu=!0,await oT(e.remoteStore,!0);for(const r of s)gy(e.remoteStore,r)}else if(t===!1&&e.gu!==!1){const i=[];let s=Promise.resolve();e.Iu.forEach((r,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):s=s.then(()=>(ou(e,o),su(e.localStore,o,!0))),ru(e.remoteStore,o)}),await s,await IC(e,i),function(o){const c=It(o);c.Au.forEach((h,f)=>{ru(c.remoteStore,f)}),c.Ru.Jr(),c.Au=new Map,c.du=new Ee(bt.comparator)}(e),e.gu=!1,await oT(e.remoteStore,!1)}}async function IC(n,t,e){const i=It(n),s=[],r=[];for(const o of t){let c;const h=i.Iu.get(o);if(h&&h.length!==0){c=await Mp(i.localStore,pi(h[0]));for(const f of h){const m=i.Tu.get(f),y=await v$(i,m);y.snapshot&&r.push(y.snapshot)}}else{const f=await z2(i.localStore,o);c=await Mp(i.localStore,f),await uE(i,hV(f),o,!1,c.resumeToken)}s.push(c)}return i.Pu.H_(r),s}function hV(n){return YN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function E$(n){return function(e){return It(It(e).persistence).Ts()}(It(n).localStore)}async function S$(n,t,e,i){const s=It(n);if(s.gu)return void dt(bu,"Ignoring unexpected query state notification.");const r=s.Iu.get(t);if(r&&r.length>0)switch(e){case"current":case"not-current":{const o=await H2(s.localStore,$N(r[0])),c=vd.createSynthesizedRemoteEventForCurrentChange(t,e==="current",$e.EMPTY_BYTE_STRING);await Ua(s,o,c);break}case"rejected":await su(s.localStore,t,!0),ou(s,t,i);break;default:Et(64155,e)}}async function x$(n,t,e){const i=py(n);if(i.gu){for(const s of t){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){dt(bu,"Adding an already active target "+s);continue}const r=await z2(i.localStore,s),o=await Mp(i.localStore,r);await uE(i,hV(r),o.targetId,!1,o.resumeToken),gy(i.remoteStore,o)}for(const s of e)i.Iu.has(s)&&await su(i.localStore,s,!1).then(()=>{ru(i.remoteStore,s),ou(i,s)}).catch(ja)}}function py(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=cV.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_$.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=d$.bind(null,t),t.Pu.H_=n$.bind(null,t.eventManager),t.Pu.yu=i$.bind(null,t.eventManager),t}function mE(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=m$.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=g$.bind(null,t),t}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=dy(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return B2(this.persistence,new j2,t.initialUser,this.serializer)}Cu(t){return new Jw(fy.mi,this.serializer)}Du(t){return new K2}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class A$ extends nd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Rt(this.persistence.referenceDelegate instanceof Cp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new P2(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new Jw(i=>Cp.mi(i,e),this.serializer)}}class fV extends nd{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await mE(this.xu.syncEngine),await _u(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return B2(this.persistence,new j2,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new P2(i,t.asyncQueue,e)}Mu(t,e){const i=new NW(e,this.persistence);return new OW(t.asyncQueue,i)}Cu(t){const e=L2(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new tE(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,$2(),Wg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new K2}}class I$ extends fV{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Eb&&(this.sharedClientState.syncEngine={Co:T$.bind(null,e),vo:S$.bind(null,e),Fo:x$.bind(null,e),Ts:E$.bind(null,e),Do:b$.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await w$(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(t){const e=$2();if(!Eb.v(e))throw new vt(ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=L2(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Eb(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class id{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=y$.bind(null,this.syncEngine),await oT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new e$}()}createDatastore(t){const e=dy(t.databaseInfo.databaseId),i=function(r){return new LK(r)}(t.databaseInfo);return function(r,o,c,h){return new UK(r,o,c,h)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,r,o,c){return new HK(i,s,r,o,c)}(this.localStore,this.datastore,t.asyncQueue,e=>AC(this.syncEngine,e,0),function(){return bC.v()?new bC:new kK}())}createSyncEngine(t,e){return function(s,r,o,c,h,f,m){const y=new o$(s,r,o,c,h,f);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const r=It(s);dt(ul,"RemoteStore shutting down."),r.Ea.add(5),await Td(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}id.provider={build:()=>new id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ge("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="FirestoreClient";class R${constructor(t,e,i,s,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=kn.UNAUTHENTICATED,this.clientId=Cw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{dt(ka,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(dt(ka,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=lE(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function xb(n,t){n.asyncQueue.verifyOperationInProgress(),dt(ka,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await F2(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function RC(n,t){n.asyncQueue.verifyOperationInProgress();const e=await D$(n);dt(ka,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>wC(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>wC(t.remoteStore,s)),n._onlineComponents=t}async function D$(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){dt(ka,"Using user provided OfflineComponentProvider");try{await xb(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===ht.FAILED_PRECONDITION||s.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;Gf("Error using user provided cache. Falling back to memory cache: "+e),await xb(n,new nd)}}else dt(ka,"Using default OfflineComponentProvider"),await xb(n,new A$(void 0));return n._offlineComponents}async function mV(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(dt(ka,"Using user provided OnlineComponentProvider"),await RC(n,n._uninitializedComponentsProvider._online)):(dt(ka,"Using default OnlineComponentProvider"),await RC(n,new id))),n._onlineComponents}function C$(n){return mV(n).then(t=>t.syncEngine)}async function gV(n){const t=await mV(n),e=t.eventManager;return e.onListen=l$.bind(null,t.syncEngine),e.onUnlisten=u$.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=c$.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=h$.bind(null,t.syncEngine),e}function M$(n,t,e={}){const i=new Ms;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,c,h,f){const m=new dV({next:_=>{m.Nu(),o.enqueueAndForget(()=>sV(r,y));const b=_.docs.has(c);!b&&_.fromCache?f.reject(new vt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&h&&h.source==="server"?f.reject(new vt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new rV(ry(c.path),m,{includeMetadataChanges:!0,qa:!0});return iV(r,y)}(await gV(n),n.asyncQueue,t,e,i)),i.promise}function P$(n,t,e={}){const i=new Ms;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,c,h,f){const m=new dV({next:_=>{m.Nu(),o.enqueueAndForget(()=>sV(r,y)),_.fromCache&&h.source==="server"?f.reject(new vt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new rV(c,m,{includeMetadataChanges:!0,qa:!0});return iV(r,y)}(await gV(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$="firestore.googleapis.com",CC=!0;class MC{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new vt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k$,this.ssl=CC}else this.host=t.host,this.ssl=t.ssl??CC;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=I2;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<M2)throw new vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}MW("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pV(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class gE{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new vt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MC(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wW;switch(i.type){case"firstParty":return new xW(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new vt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=DC.get(e);i&&(dt("ComponentProvider","Removing Datastore"),DC.delete(e),i.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new yy(this.firestore,t,this._query)}}class rn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rn(this.firestore,t,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(gd(e,rn._jsonSchema))return new rn(t,i||null,new bt(re.fromString(e.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:sn("string",rn._jsonSchemaVersion),referencePath:sn("string")};class xa extends yy{constructor(t,e,i){super(t,e,ry(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rn(this.firestore,null,new bt(t))}withConverter(t){return new xa(this.firestore,t,this._path)}}function wd(n,t,...e){if(n=Tn(n),fN("collection","path",t),n instanceof gE){const i=re.fromString(t,...e);return TD(i),new xa(n,null,i)}{if(!(n instanceof rn||n instanceof xa))throw new vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return TD(i),new xa(n.firestore,null,i)}}function Ar(n,t,...e){if(n=Tn(n),arguments.length===1&&(t=Cw.newId()),fN("doc","path",t),n instanceof gE){const i=re.fromString(t,...e);return bD(i),new rn(n,null,new bt(i))}{if(!(n instanceof rn||n instanceof xa))throw new vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return bD(i),new rn(n.firestore,n instanceof xa?n.converter:null,new bt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="AsyncQueue";class kC{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new X2(this,"async_queue_retry"),this._c=()=>{const i=Wg();i&&dt(PC,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Wg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Wg();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new Ms;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ba(t))throw t;dt(PC,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,Ge("INTERNAL UNHANDLED ERROR: ",OC(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=oE.createAndSchedule(this,t,e,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Et(47125,{Pc:OC(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function OC(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class yl extends gE{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new kC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new kC(t),this._firestoreClient=void 0,await t}}}function O$(n,t,e){e||(e=Tp);const i=ml(n,"firestore");if(i.isInitialized(e)){const s=i.getImmediate({identifier:e}),r=i.getOptions(e);if(Da(r,t))return s;throw new vt(ht.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new vt(ht.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<M2)throw new vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&du(t.host)&&zk(t.host),i.initialize({options:t,instanceIdentifier:e})}function pE(n){if(n._terminated)throw new vt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||N$(n),n._firestoreClient}function N$(n){var i,s,r;const t=n._freezeSettings(),e=function(c,h,f,m){return new cY(c,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,pV(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new R$(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ni($e.fromBase64String(t))}catch(e){throw new vt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ni($e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(gd(t,Ni._jsonSchema))return Ni.fromBase64String(t.bytes)}}Ni._jsonSchemaVersion="firestore/bytes/1.0",Ni._jsonSchema={type:sn("string",Ni._jsonSchemaVersion),bytes:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new vt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new vt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new vt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return jt(this._lat,t._lat)||jt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ps._jsonSchemaVersion}}static fromJSON(t){if(gd(t,Ps._jsonSchema))return new Ps(t.latitude,t.longitude)}}Ps._jsonSchemaVersion="firestore/geoPoint/1.0",Ps._jsonSchema={type:sn("string",Ps._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(gd(t,ks._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new ks(t.vectorValues);throw new vt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ks._jsonSchemaVersion="firestore/vectorValue/1.0",ks._jsonSchema={type:sn("string",ks._jsonSchemaVersion),vectorValues:sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=/^__.*__$/;class L${constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new xr(t,this.data,this.fieldMask,e,this.fieldTransforms):new yu(t,this.data,e,this.fieldTransforms)}}class yV{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new xr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function _V(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:n})}}class _E{constructor(t,e,i,s,r,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new _E({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const e=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){var s;const e=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Np(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(_V(this.Ac)&&V$.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class j${constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||dy(t)}Cc(t,e,i,s=!1){return new _E({Ac:t,methodName:e,Dc:i,path:Me.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vE(n){const t=n._freezeSettings(),e=dy(n._databaseId);return new j$(n._databaseId,!!t.ignoreUndefinedProperties,e)}function vV(n,t,e,i,s,r={}){const o=n.Cc(r.merge||r.mergeFields?2:0,t,e,s);bE("Data must be an object, but it was:",o,i);const c=bV(i,o);let h,f;if(r.merge)h=new ei(o.fieldMask),f=o.fieldTransforms;else if(r.mergeFields){const m=[];for(const y of r.mergeFields){const _=uT(t,y,e);if(!o.contains(_))throw new vt(ht.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);wV(m,_)||m.push(_)}h=new ei(m),f=o.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=o.fieldTransforms;return new L$(new Nn(c),h,f)}class vy extends yE{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vy}}function B$(n,t,e,i){const s=n.Cc(1,t,e);bE("Data must be an object, but it was:",s,i);const r=[],o=Nn.empty();Fa(i,(h,f)=>{const m=TE(t,h,e);f=Tn(f);const y=s.yc(m);if(f instanceof vy)r.push(m);else{const _=by(f,y);_!=null&&(r.push(m),o.set(m,_))}});const c=new ei(r);return new yV(o,c,s.fieldTransforms)}function F$(n,t,e,i,s,r){const o=n.Cc(1,t,e),c=[uT(t,i,e)],h=[s];if(r.length%2!=0)throw new vt(ht.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<r.length;_+=2)c.push(uT(t,r[_])),h.push(r[_+1]);const f=[],m=Nn.empty();for(let _=c.length-1;_>=0;--_)if(!wV(f,c[_])){const b=c[_];let w=h[_];w=Tn(w);const x=o.yc(b);if(w instanceof vy)f.push(b);else{const A=by(w,x);A!=null&&(f.push(b),m.set(b,A))}}const y=new ei(f);return new yV(m,y,o.fieldTransforms)}function by(n,t){if(TV(n=Tn(n)))return bE("Unsupported field value:",t,n),bV(n,t);if(n instanceof yE)return function(i,s){if(!_V(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const c of i){let h=by(c,s.wc(o));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),o++}return{arrayValue:{values:r}}}(n,t)}return function(i,s){if((i=Tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return IY(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=fe.fromDate(i);return{timestampValue:iu(s.serializer,r)}}if(i instanceof fe){const r=new fe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:iu(s.serializer,r)}}if(i instanceof Ps)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ni)return{bytesValue:h2(s.serializer,i._byteString)};if(i instanceof rn){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:$w(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ks)return function(o,c){return{mapValue:{fields:{[Bw]:{stringValue:Fw},[Qc]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return qw(c.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Mw(i)}`)}(n,t)}function bV(n,t){const e={};return CN(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fa(n,(i,s)=>{const r=by(s,t.mc(i));r!=null&&(e[i]=r)}),{mapValue:{fields:e}}}function TV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fe||n instanceof Ps||n instanceof Ni||n instanceof rn||n instanceof yE||n instanceof ks)}function bE(n,t,e){if(!TV(e)||!dN(e)){const i=Mw(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function uT(n,t,e){if((t=Tn(t))instanceof _y)return t._internalPath;if(typeof t=="string")return TE(n,t);throw Np("Field path arguments must be of type string or ",n,!1,void 0,e)}const U$=new RegExp("[~\\*/\\[\\]]");function TE(n,t,e){if(t.search(U$)>=0)throw Np(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new _y(...t.split("."))._internalPath}catch{throw Np(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Np(n,t,e,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(r||o)&&(h+=" (found",r&&(h+=` in field ${i}`),o&&(h+=` in document ${s}`),h+=")"),new vt(ht.INVALID_ARGUMENT,c+n+h)}function wV(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(t,e,i,s,r){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new z$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(SV("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class z$ extends EV{data(){return super.data()}}function SV(n,t){return typeof t=="string"?TE(n,t):t instanceof _y?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new vt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q${convertValue(t,e="none"){switch(Ca(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ie(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Er(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Fa(t,(s,r)=>{i[s]=this.convertValue(r,e)}),i}convertVectorValue(t){var i,s,r;const e=(r=(s=(i=t.fields)==null?void 0:i[Qc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(o=>Ie(o.doubleValue));return new ks(e)}convertGeoPoint(t){return new Ps(Ie(t.latitude),Ie(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=ny(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Qf(t));default:return null}}convertTimestamp(t){const e=wr(t);return new fe(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=re.fromString(t);Rt(T2(i),9688,{name:t});const s=new rl(i.get(1),i.get(3)),r=new bt(i.popFirst(5));return s.isEqual(e)||Ge(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class sf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qo extends EV{constructor(t,e,i,s,r,o){super(t,e,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(SV("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new vt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Qo._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Qo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qo._jsonSchema={type:sn("string",Qo._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class Yg extends Qo{data(t={}){return super.data(t)}}class Fc{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new sf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Yg(this._firestore,this._userDataWriter,i.key,i,new sf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const h=new Yg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new sf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>r||c.type!==3).map(c=>{const h=new Yg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new sf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return c.type!==0&&(f=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:G$(c.type),doc:h,oldIndex:f,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new vt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Fc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Cw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(e.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function G$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n){n=Ns(n,rn);const t=Ns(n.firestore,yl);return M$(pE(t),n._key).then(e=>Y$(t,n,e))}Fc._jsonSchemaVersion="firestore/querySnapshot/1.0",Fc._jsonSchema={type:sn("string",Fc._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};class AV extends q${constructor(t){super(),this.firestore=t}convertBytes(t){return new Ni(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new rn(this.firestore,null,e)}}function Ty(n){n=Ns(n,yy);const t=Ns(n.firestore,yl),e=pE(t),i=new AV(t);return H$(n._query),P$(e,n._query).then(s=>new Fc(t,i,n,s))}function IV(n,t,e){n=Ns(n,rn);const i=Ns(n.firestore,yl),s=xV(n.converter,t);return Ey(i,[vV(vE(i),"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,jn.none())])}function wy(n,t,e,...i){n=Ns(n,rn);const s=Ns(n.firestore,yl),r=vE(s);let o;return o=typeof(t=Tn(t))=="string"||t instanceof _y?F$(r,"updateDoc",n._key,t,e,i):B$(r,"updateDoc",n._key,t),Ey(s,[o.toMutation(n._key,jn.exists(!0))])}function RV(n){return Ey(Ns(n.firestore,yl),[new cy(n._key,jn.none())])}function W$(n,t){const e=Ns(n.firestore,yl),i=Ar(n),s=xV(n.converter,t);return Ey(e,[vV(vE(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,jn.exists(!1))]).then(()=>i)}function Ey(n,t){return function(i,s){const r=new Ms;return i.asyncQueue.enqueueAndForget(async()=>f$(await C$(i),s,r)),r.promise}(pE(n),t)}function Y$(n,t,e){const i=e.docs.get(t._key),s=new AV(n);return new Qo(n,s,t._key,i,new sf(e.hasPendingWrites,e.fromCache),t.converter)}class K${constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=Z$(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function $$(n){return new K$(n)}class X${constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=id.provider,this._offlineComponentProvider={build:e=>new fV(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class Q${constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=id.provider,this._offlineComponentProvider={build:e=>new I$(e,t==null?void 0:t.cacheSizeBytes)}}}function Z$(n){return new X$(n==null?void 0:n.forceOwnership)}function J$(){return new Q$}(function(t,e=!0){(function(s){pu=s})(mu),Os(new Qi("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),c=new yl(new EW(i.getProvider("auth-internal")),new AW(o,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new vt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(f.options.projectId,m)}(o,s),o);return r={useFetchStreams:e,...r},c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),Li(pD,yD,t),Li(pD,yD,"esm2020")})();const tX={apiKey:"AIzaSyBc4CZnGGOTDvfPvEwaA0dXFOwbocdwCa8",authDomain:"knowurfood-d2b78.firebaseapp.com",projectId:"knowurfood-d2b78",storageBucket:"knowurfood-d2b78.firebasestorage.app",messagingSenderId:"643565214463",appId:"1:643565214463:web:8681aadcc4f49c6afdcaca",measurementId:"G-HB4L7NXGNE"},EE=Xk(tX);i7(EE);const Sy=vW(EE),_i=O$(EE,{localCache:$$({tabManager:J$()})}),DV=n=>Math.floor(n/100)+1,eX=async(n,t)=>{await W$(wd(_i,"users",t,"meals"),n);const e=Ar(_i,"users",t),i=await wE(e);if(i.exists()){const r=(i.data().xp||0)+10,o=DV(r);await wy(e,{xp:r,level:o})}},Ab=async n=>(await Ty(wd(_i,"users",n,"meals"))).docs.map(e=>({id:e.id,...e.data()})),nX=async(n,t)=>{const e=Ar(_i,"users",t,"meals",n.id),{id:i,...s}=n;await wy(e,s)},iX=async(n,t)=>{const e=Ar(_i,"users",t,"meals",n);await RV(e)},sX=async n=>{const t=wd(_i,"users",n,"meals"),i=(await Ty(t)).docs.map(s=>RV(s.ref));await Promise.all(i)},rX=async(n,t)=>{const e=Ar(_i,"users",n);await wy(e,t)},aX=async(n,t,e)=>{const i=Ar(_i,"users",n,"weightLogs",t);await IV(i,{date:t,weight:e})},sd=async n=>(await Ty(wd(_i,"users",n,"weightLogs"))).docs.map(e=>e.data()),oX=async({email:n,password:t,...e})=>{const s=(await sG(Sy,n,t)).user,{firstName:r,lastName:o,mealOrder:c,unit:h,currentWeight:f,goalWeight:m,height:y,goalDate:_,breakfastTime:b,lunchTime:w,dinnerTime:x,calorieGoal:A,age:M=25,gender:N="male"}=e,L=Math.max(1,Math.ceil((new Date(_)-new Date)/(1e3*60*60*24))),H=N==="male"?10*f+6.25*y-5*M+5:10*f+6.25*y-5*M-161,F=(m-f)*7700/L,K=Math.round(H+F),O=isNaN(A)?K:Number(A);return await IV(Ar(_i,"users",s.uid),{firstName:r,lastName:o,mealOrder:c,unit:h,currentWeight:f,goalWeight:m,goalDate:_,height:y,breakfastTime:b,lunchTime:w,dinnerTime:x,xp:0,level:1,streak:1,lastLogin:new Date().toISOString().split("T")[0],badges:[],calorieGoal:O,age:M,gender:N}),{...s,...e,calorieGoal:O}},lX=async({email:n,password:t})=>{const i=(await rG(Sy,n,t)).user,s=Ar(_i,"users",i.uid),r=await wE(s),o=r.exists()?r.data():{};return{...i,...o}},cX=async()=>{await lG(Sy)},NC=async()=>new Promise(n=>{const t=Sy.onAuthStateChanged(async e=>{if(t(),!e)return n(null);const i=Ar(_i,"users",e.uid),s=await wE(i);if(!s.exists())return n(e);const r=s.data(),o=new Date().toISOString().split("T")[0],c=r.lastLogin||o,h=uX(c,o);let f={};f.streak=h===1?(r.streak||0)+1:h>1?1:r.streak||1,f.lastLogin=o;const m=[5,15,30,60,100],y=r.badges||[];if(m.includes(f.streak)){const _=`${f.streak}-Day Streak`;y.includes(_)||(y.push(_),f.badges=y)}try{const b=(await Ty(wd(_i,"users",e.uid,"weightLogs"))).docs.map(w=>w.data());if(b.length>0&&r.goalWeight&&r.goalDate&&!y.includes(" Goal Achieved")){const w=b.reduce((M,N)=>M.date>N.date?M:N),x=r.goalWeight>=r.currentWeight&&w.weight>=r.goalWeight||r.goalWeight<r.currentWeight&&w.weight<=r.goalWeight,A=new Date(w.date)<=new Date(r.goalDate);if(x&&A){y.push(" Goal Achieved");const M=(r.xp||0)+50,N=DV(M);f.badges=y,f.xp=M,f.level=N}}}catch(_){console.error("Error checking goal badge:",_)}(f.streak!==r.streak||f.lastLogin!==c||f.badges||f.xp)&&(await wy(i,f),Object.assign(r,f)),n({...e,...r})})}),uX=(n,t)=>{const e=new Date(n),i=new Date(t);return Math.floor((i-e)/(1e3*60*60*24))};function hX({user:n}){const[t,e]=ot.useState(""),[i,s]=ot.useState([]),[r,o]=ot.useState(new Date().toISOString().split("T")[0]);ot.useEffect(()=>{n!=null&&n.uid&&sd(n.uid).then(s)},[n]);const c=async()=>{if(!t||isNaN(t))return;await aX(n.uid,r,parseFloat(t));const h=await sd(n.uid);s(h),e("")};return C.jsxs("div",{className:"card bg-dark p-3 mb-3 text-white shadow-sm",children:[C.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Tracker"}),C.jsxs("div",{className:"d-flex gap-2 mb-2",children:[C.jsx("input",{type:"date",className:"form-control",value:r,max:new Date().toISOString().split("T")[0],onChange:h=>o(h.target.value)}),C.jsx("input",{type:"number",placeholder:"Weight (kg)",className:"form-control",value:t,onChange:h=>e(h.target.value)}),C.jsx("button",{className:"btn btn-primary",onClick:c,children:"Save"})]})]})}const CV=6048e5,fX=864e5,Ed=6e4,Sd=36e5,dX=1e3,VC=Symbol.for("constructDateFrom");function Be(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&VC in n?n[VC](t):n instanceof Date?new n.constructor(t):new Date(t)}function Bt(n,t){return Be(t||n,n)}function xy(n,t,e){const i=Bt(n,e==null?void 0:e.in);return isNaN(t)?Be((e==null?void 0:e.in)||n,NaN):(t&&i.setDate(i.getDate()+t),i)}function SE(n,t,e){const i=Bt(n,e==null?void 0:e.in);if(isNaN(t))return Be(n,NaN);if(!t)return i;const s=i.getDate(),r=Be(n,i.getTime());r.setMonth(i.getMonth()+t+1,0);const o=r.getDate();return s>=o?r:(i.setFullYear(r.getFullYear(),r.getMonth(),s),i)}function xE(n,t,e){return Be(n,+Bt(n)+t)}function mX(n,t,e){return xE(n,t*Sd)}let gX={};function _l(){return gX}function Ls(n,t){var c,h,f,m;const e=_l(),i=(t==null?void 0:t.weekStartsOn)??((h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??e.weekStartsOn??((m=(f=e.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,s=Bt(n,t==null?void 0:t.in),r=s.getDay(),o=(r<i?7:0)+r-i;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function lu(n,t){return Ls(n,{...t,weekStartsOn:1})}function MV(n,t){const e=Bt(n,t==null?void 0:t.in),i=e.getFullYear(),s=Be(e,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const r=lu(s),o=Be(e,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);const c=lu(o);return e.getTime()>=r.getTime()?i+1:e.getTime()>=c.getTime()?i:i-1}function Vp(n){const t=Bt(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function vl(n,...t){const e=Be.bind(null,t.find(i=>typeof i=="object"));return t.map(e)}function hT(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function PV(n,t,e){const[i,s]=vl(e==null?void 0:e.in,n,t),r=hT(i),o=hT(s),c=+r-Vp(r),h=+o-Vp(o);return Math.round((c-h)/fX)}function pX(n,t){const e=MV(n,t),i=Be(n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),lu(i)}function yX(n,t,e){const i=Bt(n,e==null?void 0:e.in);return i.setTime(i.getTime()+t*Ed),i}function _X(n,t,e){return SE(n,t*3,e)}function vX(n,t,e){return xE(n,t*1e3)}function bX(n,t,e){return xy(n,t*7,e)}function TX(n,t,e){return SE(n,t*12,e)}function Af(n,t){const e=+Bt(n)-+Bt(t);return e<0?-1:e>0?1:e}function wX(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function kV(n){return!(!wX(n)&&typeof n!="number"||isNaN(+Bt(n)))}function EX(n,t,e){const[i,s]=vl(e==null?void 0:e.in,n,t),r=i.getFullYear()-s.getFullYear(),o=i.getMonth()-s.getMonth();return r*12+o}function SX(n,t,e){const[i,s]=vl(e==null?void 0:e.in,n,t);return i.getFullYear()-s.getFullYear()}function OV(n,t,e){const[i,s]=vl(e==null?void 0:e.in,n,t),r=LC(i,s),o=Math.abs(PV(i,s));i.setDate(i.getDate()-r*o);const c=+(LC(i,s)===-r),h=r*(o-c);return h===0?0:h}function LC(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function xd(n){return t=>{const i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function xX(n,t,e){const[i,s]=vl(e==null?void 0:e.in,n,t),r=(+i-+s)/Sd;return xd(e==null?void 0:e.roundingMethod)(r)}function AE(n,t){return+Bt(n)-+Bt(t)}function AX(n,t,e){const i=AE(n,t)/Ed;return xd(e==null?void 0:e.roundingMethod)(i)}function NV(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function VV(n,t){const e=Bt(n,t==null?void 0:t.in),i=e.getMonth();return e.setFullYear(e.getFullYear(),i+1,0),e.setHours(23,59,59,999),e}function IX(n,t){const e=Bt(n,t==null?void 0:t.in);return+NV(e,t)==+VV(e,t)}function LV(n,t,e){const[i,s,r]=vl(e==null?void 0:e.in,n,n,t),o=Af(s,r),c=Math.abs(EX(s,r));if(c<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*c);let h=Af(s,r)===-o;IX(i)&&c===1&&Af(i,r)===1&&(h=!1);const f=o*(c-+h);return f===0?0:f}function RX(n,t,e){const i=LV(n,t,e)/3;return xd(e==null?void 0:e.roundingMethod)(i)}function DX(n,t,e){const i=AE(n,t)/1e3;return xd(e==null?void 0:e.roundingMethod)(i)}function CX(n,t,e){const i=OV(n,t,e)/7;return xd(e==null?void 0:e.roundingMethod)(i)}function MX(n,t,e){const[i,s]=vl(e==null?void 0:e.in,n,t),r=Af(i,s),o=Math.abs(SX(i,s));i.setFullYear(1584),s.setFullYear(1584);const c=Af(i,s)===-r,h=r*(o-+c);return h===0?0:h}function PX(n,t){const e=Bt(n,t==null?void 0:t.in),i=e.getMonth(),s=i-i%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function kX(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function OX(n,t){const e=Bt(n,t==null?void 0:t.in),i=e.getFullYear();return e.setFullYear(i+1,0,0),e.setHours(23,59,59,999),e}function jV(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function NX(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function VX(n,t){var c,h;const e=_l(),i=e.weekStartsOn??((h=(c=e.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,s=Bt(n,t==null?void 0:t.in),r=s.getDay(),o=(r<i?-7:0)+6-(r-i);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function LX(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setSeconds(59,999),e}function jX(n,t){const e=Bt(n,t==null?void 0:t.in),i=e.getMonth(),s=i-i%3+3;return e.setMonth(s,0),e.setHours(23,59,59,999),e}function BX(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setMilliseconds(999),e}const FX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UX=(n,t,e)=>{let i;const s=FX[n];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Ib(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const zX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GX={date:Ib({formats:zX,defaultWidth:"full"}),time:Ib({formats:HX,defaultWidth:"full"}),dateTime:Ib({formats:qX,defaultWidth:"full"})},WX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},YX=(n,t,e,i)=>WX[n];function Uh(n){return(t,e)=>{const i=e!=null&&e.context?String(e.context):"standalone";let s;if(i==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,c=e!=null&&e.width?String(e.width):o;s=n.formattingValues[c]||n.formattingValues[o]}else{const o=n.defaultWidth,c=e!=null&&e.width?String(e.width):n.defaultWidth;s=n.values[c]||n.values[o]}const r=n.argumentCallback?n.argumentCallback(t):t;return s[r]}}const KX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$X={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},XX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},QX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ZX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},JX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tQ=(n,t)=>{const e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},eQ={ordinalNumber:tQ,era:Uh({values:KX,defaultWidth:"wide"}),quarter:Uh({values:$X,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Uh({values:XX,defaultWidth:"wide"}),day:Uh({values:QX,defaultWidth:"wide"}),dayPeriod:Uh({values:ZX,defaultWidth:"wide",formattingValues:JX,defaultFormattingWidth:"wide"})};function zh(n){return(t,e={})=>{const i=e.width,s=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],r=t.match(s);if(!r)return null;const o=r[0],c=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(c)?iQ(c,y=>y.test(o)):nQ(c,y=>y.test(o));let f;f=n.valueCallback?n.valueCallback(h):h,f=e.valueCallback?e.valueCallback(f):f;const m=t.slice(o.length);return{value:f,rest:m}}}function nQ(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function iQ(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function sQ(n){return(t,e={})=>{const i=t.match(n.matchPattern);if(!i)return null;const s=i[0],r=t.match(n.parsePattern);if(!r)return null;let o=n.valueCallback?n.valueCallback(r[0]):r[0];o=e.valueCallback?e.valueCallback(o):o;const c=t.slice(s.length);return{value:o,rest:c}}}const rQ=/^(\d+)(th|st|nd|rd)?/i,aQ=/\d+/i,oQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lQ={any:[/^b/i,/^(a|c)/i]},cQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uQ={any:[/1/i,/2/i,/3/i,/4/i]},hQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yQ={ordinalNumber:sQ({matchPattern:rQ,parsePattern:aQ,valueCallback:n=>parseInt(n,10)}),era:zh({matchPatterns:oQ,defaultMatchWidth:"wide",parsePatterns:lQ,defaultParseWidth:"any"}),quarter:zh({matchPatterns:cQ,defaultMatchWidth:"wide",parsePatterns:uQ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:zh({matchPatterns:hQ,defaultMatchWidth:"wide",parsePatterns:fQ,defaultParseWidth:"any"}),day:zh({matchPatterns:dQ,defaultMatchWidth:"wide",parsePatterns:mQ,defaultParseWidth:"any"}),dayPeriod:zh({matchPatterns:gQ,defaultMatchWidth:"any",parsePatterns:pQ,defaultParseWidth:"any"})},BV={code:"en-US",formatDistance:UX,formatLong:GX,formatRelative:YX,localize:eQ,match:yQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _Q(n,t){const e=Bt(n,t==null?void 0:t.in);return PV(e,jV(e))+1}function FV(n,t){const e=Bt(n,t==null?void 0:t.in),i=+lu(e)-+pX(e);return Math.round(i/CV)+1}function IE(n,t){var m,y,_,b;const e=Bt(n,t==null?void 0:t.in),i=e.getFullYear(),s=_l(),r=(t==null?void 0:t.firstWeekContainsDate)??((y=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(_=s.locale)==null?void 0:_.options)==null?void 0:b.firstWeekContainsDate)??1,o=Be((t==null?void 0:t.in)||n,0);o.setFullYear(i+1,0,r),o.setHours(0,0,0,0);const c=Ls(o,t),h=Be((t==null?void 0:t.in)||n,0);h.setFullYear(i,0,r),h.setHours(0,0,0,0);const f=Ls(h,t);return+e>=+c?i+1:+e>=+f?i:i-1}function vQ(n,t){var c,h,f,m;const e=_l(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??e.firstWeekContainsDate??((m=(f=e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,s=IE(n,t),r=Be((t==null?void 0:t.in)||n,0);return r.setFullYear(s,0,i),r.setHours(0,0,0,0),Ls(r,t)}function UV(n,t){const e=Bt(n,t==null?void 0:t.in),i=+Ls(e,t)-+vQ(e,t);return Math.round(i/CV)+1}function ue(n,t){const e=n<0?"-":"",i=Math.abs(n).toString().padStart(t,"0");return e+i}const aa={y(n,t){const e=n.getFullYear(),i=e>0?e:1-e;return ue(t==="yy"?i%100:i,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):ue(e+1,2)},d(n,t){return ue(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return ue(n.getHours()%12||12,t.length)},H(n,t){return ue(n.getHours(),t.length)},m(n,t){return ue(n.getMinutes(),t.length)},s(n,t){return ue(n.getSeconds(),t.length)},S(n,t){const e=t.length,i=n.getMilliseconds(),s=Math.trunc(i*Math.pow(10,e-3));return ue(s,t.length)}},bc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jC={G:function(n,t,e){const i=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});case"GGGG":default:return e.era(i,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const i=n.getFullYear(),s=i>0?i:1-i;return e.ordinalNumber(s,{unit:"year"})}return aa.y(n,t)},Y:function(n,t,e,i){const s=IE(n,i),r=s>0?s:1-s;if(t==="YY"){const o=r%100;return ue(o,2)}return t==="Yo"?e.ordinalNumber(r,{unit:"year"}):ue(r,t.length)},R:function(n,t){const e=MV(n);return ue(e,t.length)},u:function(n,t){const e=n.getFullYear();return ue(e,t.length)},Q:function(n,t,e){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return ue(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,e){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return ue(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,e){const i=n.getMonth();switch(t){case"M":case"MM":return aa.M(n,t);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,e){const i=n.getMonth();switch(t){case"L":return String(i+1);case"LL":return ue(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,e,i){const s=UV(n,i);return t==="wo"?e.ordinalNumber(s,{unit:"week"}):ue(s,t.length)},I:function(n,t,e){const i=FV(n);return t==="Io"?e.ordinalNumber(i,{unit:"week"}):ue(i,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):aa.d(n,t)},D:function(n,t,e){const i=_Q(n);return t==="Do"?e.ordinalNumber(i,{unit:"dayOfYear"}):ue(i,t.length)},E:function(n,t,e){const i=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});case"EEEE":default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,e,i){const s=n.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return ue(r,2);case"eo":return e.ordinalNumber(r,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});case"eeee":default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(n,t,e,i){const s=n.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return ue(r,t.length);case"co":return e.ordinalNumber(r,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});case"cccc":default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(n,t,e){const i=n.getDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return ue(s,t.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});case"iiii":default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,e){const s=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,t,e){const i=n.getHours();let s;switch(i===12?s=bc.noon:i===0?s=bc.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,t,e){const i=n.getHours();let s;switch(i>=17?s=bc.evening:i>=12?s=bc.afternoon:i>=4?s=bc.morning:s=bc.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let i=n.getHours()%12;return i===0&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return aa.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):aa.H(n,t)},K:function(n,t,e){const i=n.getHours()%12;return t==="Ko"?e.ordinalNumber(i,{unit:"hour"}):ue(i,t.length)},k:function(n,t,e){let i=n.getHours();return i===0&&(i=24),t==="ko"?e.ordinalNumber(i,{unit:"hour"}):ue(i,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):aa.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):aa.s(n,t)},S:function(n,t){return aa.S(n,t)},X:function(n,t,e){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return FC(i);case"XXXX":case"XX":return Oo(i);case"XXXXX":case"XXX":default:return Oo(i,":")}},x:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"x":return FC(i);case"xxxx":case"xx":return Oo(i);case"xxxxx":case"xxx":default:return Oo(i,":")}},O:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+BC(i,":");case"OOOO":default:return"GMT"+Oo(i,":")}},z:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+BC(i,":");case"zzzz":default:return"GMT"+Oo(i,":")}},t:function(n,t,e){const i=Math.trunc(+n/1e3);return ue(i,t.length)},T:function(n,t,e){return ue(+n,t.length)}};function BC(n,t=""){const e=n>0?"-":"+",i=Math.abs(n),s=Math.trunc(i/60),r=i%60;return r===0?e+String(s):e+String(s)+t+ue(r,2)}function FC(n,t){return n%60===0?(n>0?"-":"+")+ue(Math.abs(n)/60,2):Oo(n,t)}function Oo(n,t=""){const e=n>0?"-":"+",i=Math.abs(n),s=ue(Math.trunc(i/60),2),r=ue(i%60,2);return e+s+t+r}const UC=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},zV=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},bQ=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],i=e[1],s=e[2];if(!s)return UC(n,t);let r;switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;case"PPPP":default:r=t.dateTime({width:"full"});break}return r.replace("{{date}}",UC(i,t)).replace("{{time}}",zV(s,t))},fT={p:zV,P:bQ},TQ=/^D+$/,wQ=/^Y+$/,EQ=["D","DD","YY","YYYY"];function HV(n){return TQ.test(n)}function qV(n){return wQ.test(n)}function dT(n,t,e){const i=SQ(n,t,e);if(console.warn(i),EQ.includes(n))throw new RangeError(i)}function SQ(n,t,e){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,IQ=/^'([^]*?)'?$/,RQ=/''/g,DQ=/[a-zA-Z]/;function CQ(n,t,e){var m,y,_,b,w,x,A,M;const i=_l(),s=(e==null?void 0:e.locale)??i.locale??BV,r=(e==null?void 0:e.firstWeekContainsDate)??((y=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((b=(_=i.locale)==null?void 0:_.options)==null?void 0:b.firstWeekContainsDate)??1,o=(e==null?void 0:e.weekStartsOn)??((x=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??i.weekStartsOn??((M=(A=i.locale)==null?void 0:A.options)==null?void 0:M.weekStartsOn)??0,c=Bt(n,e==null?void 0:e.in);if(!kV(c))throw new RangeError("Invalid time value");let h=t.match(AQ).map(N=>{const L=N[0];if(L==="p"||L==="P"){const H=fT[L];return H(N,s.formatLong)}return N}).join("").match(xQ).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const L=N[0];if(L==="'")return{isToken:!1,value:MQ(N)};if(jC[L])return{isToken:!0,value:N};if(L.match(DQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return{isToken:!1,value:N}});s.localize.preprocessor&&(h=s.localize.preprocessor(c,h));const f={firstWeekContainsDate:r,weekStartsOn:o,locale:s};return h.map(N=>{if(!N.isToken)return N.value;const L=N.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&qV(L)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&HV(L))&&dT(L,t,String(n));const H=jC[L[0]];return H(c,L,s.localize,f)}).join("")}function MQ(n){const t=n.match(IQ);return t?t[1].replace(RQ,"'"):n}function PQ(){return Object.assign({},_l())}function kQ(n,t){const e=Bt(n,t==null?void 0:t.in).getDay();return e===0?7:e}function OQ(n,t){const e=NQ(t)?new t(0):Be(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function NQ(n){var t;return typeof n=="function"&&((t=n.prototype)==null?void 0:t.constructor)===n}const VQ=10;class GV{constructor(){rt(this,"subPriority",0)}validate(t,e){return!0}}class LQ extends GV{constructor(t,e,i,s,r){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=s,r&&(this.subPriority=r)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}}class jQ extends GV{constructor(e,i){super();rt(this,"priority",VQ);rt(this,"subPriority",-1);this.context=e||(s=>Be(i,s))}set(e,i){return i.timestampIsSet?e:Be(e,OQ(e,this.context))}}class ie{run(t,e,i,s){const r=this.parse(t,e,i,s);return r?{setter:new LQ(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(t,e,i){return!0}}class BQ extends ie{constructor(){super(...arguments);rt(this,"priority",140);rt(this,"incompatibleTokens",["R","u","t","T"])}parse(e,i,s){switch(i){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,i,s){return i.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}const Ye={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ts={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ke(n,t){return n&&{value:t(n.value),rest:n.rest}}function Pe(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function ws(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const i=e[1]==="+"?1:-1,s=e[2]?parseInt(e[2],10):0,r=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:i*(s*Sd+r*Ed+o*dX),rest:t.slice(e[0].length)}}function WV(n){return Pe(Ye.anyDigitsSigned,n)}function Fe(n,t){switch(n){case 1:return Pe(Ye.singleDigit,t);case 2:return Pe(Ye.twoDigits,t);case 3:return Pe(Ye.threeDigits,t);case 4:return Pe(Ye.fourDigits,t);default:return Pe(new RegExp("^\\d{1,"+n+"}"),t)}}function Lp(n,t){switch(n){case 1:return Pe(Ye.singleDigitSigned,t);case 2:return Pe(Ye.twoDigitsSigned,t);case 3:return Pe(Ye.threeDigitsSigned,t);case 4:return Pe(Ye.fourDigitsSigned,t);default:return Pe(new RegExp("^-?\\d{1,"+n+"}"),t)}}function RE(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function YV(n,t){const e=t>0,i=e?t:1-t;let s;if(i<=50)s=n||100;else{const r=i+50,o=Math.trunc(r/100)*100,c=n>=r%100;s=n+o-(c?100:0)}return e?s:1-s}function KV(n){return n%400===0||n%4===0&&n%100!==0}class FQ extends ie{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,i,s){const r=o=>({year:o,isTwoDigitYear:i==="yy"});switch(i){case"y":return Ke(Fe(4,e),r);case"yo":return Ke(s.ordinalNumber(e,{unit:"year"}),r);default:return Ke(Fe(i.length,e),r)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,s){const r=e.getFullYear();if(s.isTwoDigitYear){const c=YV(s.year,r);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const o=!("era"in i)||i.era===1?s.year:1-s.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class UQ extends ie{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,i,s){const r=o=>({year:o,isTwoDigitYear:i==="YY"});switch(i){case"Y":return Ke(Fe(4,e),r);case"Yo":return Ke(s.ordinalNumber(e,{unit:"year"}),r);default:return Ke(Fe(i.length,e),r)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,s,r){const o=IE(e,r);if(s.isTwoDigitYear){const h=YV(s.year,o);return e.setFullYear(h,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Ls(e,r)}const c=!("era"in i)||i.era===1?s.year:1-s.year;return e.setFullYear(c,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Ls(e,r)}}class zQ extends ie{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,i){return Lp(i==="R"?4:i.length,e)}set(e,i,s){const r=Be(e,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),lu(r)}}class HQ extends ie{constructor(){super(...arguments);rt(this,"priority",130);rt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,i){return Lp(i==="u"?4:i.length,e)}set(e,i,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class qQ extends ie{constructor(){super(...arguments);rt(this,"priority",120);rt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,i,s){switch(i){case"Q":case"QQ":return Fe(i.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=1&&i<=4}set(e,i,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class GQ extends ie{constructor(){super(...arguments);rt(this,"priority",120);rt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,i,s){switch(i){case"q":case"qq":return Fe(i.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=1&&i<=4}set(e,i,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class WQ extends ie{constructor(){super(...arguments);rt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);rt(this,"priority",110)}parse(e,i,s){const r=o=>o-1;switch(i){case"M":return Ke(Pe(Ye.month,e),r);case"MM":return Ke(Fe(2,e),r);case"Mo":return Ke(s.ordinalNumber(e,{unit:"month"}),r);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=11}set(e,i,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class YQ extends ie{constructor(){super(...arguments);rt(this,"priority",110);rt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,i,s){const r=o=>o-1;switch(i){case"L":return Ke(Pe(Ye.month,e),r);case"LL":return Ke(Fe(2,e),r);case"Lo":return Ke(s.ordinalNumber(e,{unit:"month"}),r);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=11}set(e,i,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}function KQ(n,t,e){const i=Bt(n,e==null?void 0:e.in),s=UV(i,e)-t;return i.setDate(i.getDate()-s*7),Bt(i,e==null?void 0:e.in)}class $Q extends ie{constructor(){super(...arguments);rt(this,"priority",100);rt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,i,s){switch(i){case"w":return Pe(Ye.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return Fe(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,s,r){return Ls(KQ(e,s,r),r)}}function XQ(n,t,e){const i=Bt(n,e==null?void 0:e.in),s=FV(i,e)-t;return i.setDate(i.getDate()-s*7),i}class QQ extends ie{constructor(){super(...arguments);rt(this,"priority",100);rt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,i,s){switch(i){case"I":return Pe(Ye.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return Fe(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,s){return lu(XQ(e,s))}}const ZQ=[31,28,31,30,31,30,31,31,30,31,30,31],JQ=[31,29,31,30,31,30,31,31,30,31,30,31];class tZ extends ie{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"subPriority",1);rt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,i,s){switch(i){case"d":return Pe(Ye.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return Fe(i.length,e)}}validate(e,i){const s=e.getFullYear(),r=KV(s),o=e.getMonth();return r?i>=1&&i<=JQ[o]:i>=1&&i<=ZQ[o]}set(e,i,s){return e.setDate(s),e.setHours(0,0,0,0),e}}class eZ extends ie{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"subpriority",1);rt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,i,s){switch(i){case"D":case"DD":return Pe(Ye.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return Fe(i.length,e)}}validate(e,i){const s=e.getFullYear();return KV(s)?i>=1&&i<=366:i>=1&&i<=365}set(e,i,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}}function DE(n,t,e){var y,_,b,w;const i=_l(),s=(e==null?void 0:e.weekStartsOn)??((_=(y=e==null?void 0:e.locale)==null?void 0:y.options)==null?void 0:_.weekStartsOn)??i.weekStartsOn??((w=(b=i.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,r=Bt(n,e==null?void 0:e.in),o=r.getDay(),h=(t%7+7)%7,f=7-s,m=t<0||t>6?t-(o+f)%7:(h+f)%7-(o+f)%7;return xy(r,m,e)}class nZ extends ie{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,i,s){switch(i){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,s,r){return e=DE(e,s,r),e.setHours(0,0,0,0),e}}class iZ extends ie{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,i,s,r){const o=c=>{const h=Math.floor((c-1)/7)*7;return(c+r.weekStartsOn+6)%7+h};switch(i){case"e":case"ee":return Ke(Fe(i.length,e),o);case"eo":return Ke(s.ordinalNumber(e,{unit:"day"}),o);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,s,r){return e=DE(e,s,r),e.setHours(0,0,0,0),e}}class sZ extends ie{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,i,s,r){const o=c=>{const h=Math.floor((c-1)/7)*7;return(c+r.weekStartsOn+6)%7+h};switch(i){case"c":case"cc":return Ke(Fe(i.length,e),o);case"co":return Ke(s.ordinalNumber(e,{unit:"day"}),o);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=6}set(e,i,s,r){return e=DE(e,s,r),e.setHours(0,0,0,0),e}}function rZ(n,t,e){const i=Bt(n,e==null?void 0:e.in),s=kQ(i,e),r=t-s;return xy(i,r,e)}class aZ extends ie{constructor(){super(...arguments);rt(this,"priority",90);rt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,i,s){const r=o=>o===0?7:o;switch(i){case"i":case"ii":return Fe(i.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return Ke(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Ke(s.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Ke(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Ke(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,i){return i>=1&&i<=7}set(e,i,s){return e=rZ(e,s),e.setHours(0,0,0,0),e}}class oZ extends ie{constructor(){super(...arguments);rt(this,"priority",80);rt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,i,s){switch(i){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,s){return e.setHours(RE(s),0,0,0),e}}class lZ extends ie{constructor(){super(...arguments);rt(this,"priority",80);rt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,i,s){switch(i){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,s){return e.setHours(RE(s),0,0,0),e}}class cZ extends ie{constructor(){super(...arguments);rt(this,"priority",80);rt(this,"incompatibleTokens",["a","b","t","T"])}parse(e,i,s){switch(i){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,s){return e.setHours(RE(s),0,0,0),e}}class uZ extends ie{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,i,s){switch(i){case"h":return Pe(Ye.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return Fe(i.length,e)}}validate(e,i){return i>=1&&i<=12}set(e,i,s){const r=e.getHours()>=12;return r&&s<12?e.setHours(s+12,0,0,0):!r&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}}class hZ extends ie{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,i,s){switch(i){case"H":return Pe(Ye.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return Fe(i.length,e)}}validate(e,i){return i>=0&&i<=23}set(e,i,s){return e.setHours(s,0,0,0),e}}class fZ extends ie{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,i,s){switch(i){case"K":return Pe(Ye.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return Fe(i.length,e)}}validate(e,i){return i>=0&&i<=11}set(e,i,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}}class dZ extends ie{constructor(){super(...arguments);rt(this,"priority",70);rt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,i,s){switch(i){case"k":return Pe(Ye.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return Fe(i.length,e)}}validate(e,i){return i>=1&&i<=24}set(e,i,s){const r=s<=24?s%24:s;return e.setHours(r,0,0,0),e}}class mZ extends ie{constructor(){super(...arguments);rt(this,"priority",60);rt(this,"incompatibleTokens",["t","T"])}parse(e,i,s){switch(i){case"m":return Pe(Ye.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return Fe(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,s){return e.setMinutes(s,0,0),e}}class gZ extends ie{constructor(){super(...arguments);rt(this,"priority",50);rt(this,"incompatibleTokens",["t","T"])}parse(e,i,s){switch(i){case"s":return Pe(Ye.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return Fe(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,s){return e.setSeconds(s,0),e}}class pZ extends ie{constructor(){super(...arguments);rt(this,"priority",30);rt(this,"incompatibleTokens",["t","T"])}parse(e,i){const s=r=>Math.trunc(r*Math.pow(10,-i.length+3));return Ke(Fe(i.length,e),s)}set(e,i,s){return e.setMilliseconds(s),e}}class yZ extends ie{constructor(){super(...arguments);rt(this,"priority",10);rt(this,"incompatibleTokens",["t","T","x"])}parse(e,i){switch(i){case"X":return ws(Ts.basicOptionalMinutes,e);case"XX":return ws(Ts.basic,e);case"XXXX":return ws(Ts.basicOptionalSeconds,e);case"XXXXX":return ws(Ts.extendedOptionalSeconds,e);case"XXX":default:return ws(Ts.extended,e)}}set(e,i,s){return i.timestampIsSet?e:Be(e,e.getTime()-Vp(e)-s)}}class _Z extends ie{constructor(){super(...arguments);rt(this,"priority",10);rt(this,"incompatibleTokens",["t","T","X"])}parse(e,i){switch(i){case"x":return ws(Ts.basicOptionalMinutes,e);case"xx":return ws(Ts.basic,e);case"xxxx":return ws(Ts.basicOptionalSeconds,e);case"xxxxx":return ws(Ts.extendedOptionalSeconds,e);case"xxx":default:return ws(Ts.extended,e)}}set(e,i,s){return i.timestampIsSet?e:Be(e,e.getTime()-Vp(e)-s)}}class vZ extends ie{constructor(){super(...arguments);rt(this,"priority",40);rt(this,"incompatibleTokens","*")}parse(e){return WV(e)}set(e,i,s){return[Be(e,s*1e3),{timestampIsSet:!0}]}}class bZ extends ie{constructor(){super(...arguments);rt(this,"priority",20);rt(this,"incompatibleTokens","*")}parse(e){return WV(e)}set(e,i,s){return[Be(e,s),{timestampIsSet:!0}]}}const TZ={G:new BQ,y:new FQ,Y:new UQ,R:new zQ,u:new HQ,Q:new qQ,q:new GQ,M:new WQ,L:new YQ,w:new $Q,I:new QQ,d:new tZ,D:new eZ,E:new nZ,e:new iZ,c:new sZ,i:new aZ,a:new oZ,b:new lZ,B:new cZ,h:new uZ,H:new hZ,K:new fZ,k:new dZ,m:new mZ,s:new gZ,S:new pZ,X:new yZ,x:new _Z,t:new vZ,T:new bZ},wZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,EZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,SZ=/^'([^]*?)'?$/,xZ=/''/g,AZ=/\S/,IZ=/[a-zA-Z]/;function RZ(n,t,e,i){var A,M,N,L,H,F,K,O;const s=()=>Be((i==null?void 0:i.in)||e,NaN),r=PQ(),o=(i==null?void 0:i.locale)??r.locale??BV,c=(i==null?void 0:i.firstWeekContainsDate)??((M=(A=i==null?void 0:i.locale)==null?void 0:A.options)==null?void 0:M.firstWeekContainsDate)??r.firstWeekContainsDate??((L=(N=r.locale)==null?void 0:N.options)==null?void 0:L.firstWeekContainsDate)??1,h=(i==null?void 0:i.weekStartsOn)??((F=(H=i==null?void 0:i.locale)==null?void 0:H.options)==null?void 0:F.weekStartsOn)??r.weekStartsOn??((O=(K=r.locale)==null?void 0:K.options)==null?void 0:O.weekStartsOn)??0;if(!t)return n?s():Bt(e,i==null?void 0:i.in);const f={firstWeekContainsDate:c,weekStartsOn:h,locale:o},m=[new jQ(i==null?void 0:i.in,e)],y=t.match(EZ).map(I=>{const R=I[0];if(R in fT){const V=fT[R];return V(I,o.formatLong)}return I}).join("").match(wZ),_=[];for(let I of y){!(i!=null&&i.useAdditionalWeekYearTokens)&&qV(I)&&dT(I,t,n),!(i!=null&&i.useAdditionalDayOfYearTokens)&&HV(I)&&dT(I,t,n);const R=I[0],V=TZ[R];if(V){const{incompatibleTokens:j}=V;if(Array.isArray(j)){const B=_.find(At=>j.includes(At.token)||At.token===R);if(B)throw new RangeError(`The format string mustn't contain \`${B.fullToken}\` and \`${I}\` at the same time`)}else if(V.incompatibleTokens==="*"&&_.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);_.push({token:R,fullToken:I});const U=V.run(n,I,o.match,f);if(!U)return s();m.push(U.setter),n=U.rest}else{if(R.match(IZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(I==="''"?I="'":R==="'"&&(I=DZ(I)),n.indexOf(I)===0)n=n.slice(I.length);else return s()}}if(n.length>0&&AZ.test(n))return s();const b=m.map(I=>I.priority).sort((I,R)=>R-I).filter((I,R,V)=>V.indexOf(I)===R).map(I=>m.filter(R=>R.priority===I).sort((R,V)=>V.subPriority-R.subPriority)).map(I=>I[0]);let w=Bt(e,i==null?void 0:i.in);if(isNaN(+w))return s();const x={};for(const I of b){if(!I.validate(w,f))return s();const R=I.set(w,x,f);Array.isArray(R)?(w=R[0],Object.assign(x,R[1])):w=R}return w}function DZ(n){return n.match(SZ)[1].replace(xZ,"'")}function CZ(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function MZ(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setSeconds(0,0),e}function PZ(n,t){const e=Bt(n,t==null?void 0:t.in);return e.setMilliseconds(0),e}function kZ(n,t){const e=()=>Be(t==null?void 0:t.in,NaN),i=(t==null?void 0:t.additionalDigits)??2,s=LZ(n);let r;if(s.date){const f=jZ(s.date,i);r=BZ(f.restDateString,f.year)}if(!r||isNaN(+r))return e();const o=+r;let c=0,h;if(s.time&&(c=FZ(s.time),isNaN(c)))return e();if(s.timezone){if(h=UZ(s.timezone),isNaN(h))return e()}else{const f=new Date(o+c),m=Bt(0,t==null?void 0:t.in);return m.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),m.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),m}return Bt(o+c+h,t==null?void 0:t.in)}const bg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},OZ=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,NZ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,VZ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function LZ(n){const t={},e=n.split(bg.dateTimeDelimiter);let i;if(e.length>2)return t;if(/:/.test(e[0])?i=e[0]:(t.date=e[0],i=e[1],bg.timeZoneDelimiter.test(t.date)&&(t.date=n.split(bg.timeZoneDelimiter)[0],i=n.substr(t.date.length,n.length))),i){const s=bg.timezone.exec(i);s?(t.time=i.replace(s[1],""),t.timezone=s[1]):t.time=i}return t}function jZ(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=n.match(e);if(!i)return{year:NaN,restDateString:""};const s=i[1]?parseInt(i[1]):null,r=i[2]?parseInt(i[2]):null;return{year:r===null?s:r*100,restDateString:n.slice((i[1]||i[2]).length)}}function BZ(n,t){if(t===null)return new Date(NaN);const e=n.match(OZ);if(!e)return new Date(NaN);const i=!!e[4],s=Hh(e[1]),r=Hh(e[2])-1,o=Hh(e[3]),c=Hh(e[4]),h=Hh(e[5])-1;if(i)return WZ(t,c,h)?zZ(t,c,h):new Date(NaN);{const f=new Date(0);return!qZ(t,r,o)||!GZ(t,s)?new Date(NaN):(f.setUTCFullYear(t,r,Math.max(s,o)),f)}}function Hh(n){return n?parseInt(n):1}function FZ(n){const t=n.match(NZ);if(!t)return NaN;const e=Rb(t[1]),i=Rb(t[2]),s=Rb(t[3]);return YZ(e,i,s)?e*Sd+i*Ed+s*1e3:NaN}function Rb(n){return n&&parseFloat(n.replace(",","."))||0}function UZ(n){if(n==="Z")return 0;const t=n.match(VZ);if(!t)return 0;const e=t[1]==="+"?-1:1,i=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return KZ(i,s)?e*(i*Sd+s*Ed):NaN}function zZ(n,t,e){const i=new Date(0);i.setUTCFullYear(n,0,4);const s=i.getUTCDay()||7,r=(t-1)*7+e+1-s;return i.setUTCDate(i.getUTCDate()+r),i}const HZ=[31,null,31,30,31,30,31,31,30,31,30,31];function $V(n){return n%400===0||n%4===0&&n%100!==0}function qZ(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(HZ[t]||($V(n)?29:28))}function GZ(n,t){return t>=1&&t<=($V(n)?366:365)}function WZ(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function YZ(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function KZ(n,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const $Z={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};VM._date.override({_id:"date-fns",formats:function(){return $Z},parse:function(n,t){if(n===null||typeof n>"u")return null;const e=typeof n;return e==="number"||n instanceof Date?n=Bt(n):e==="string"&&(typeof t=="string"?n=RZ(n,t,new Date,this.options):n=kZ(n,this.options)),kV(n)?n.getTime():null},format:function(n,t){return CQ(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return xE(n,t);case"second":return vX(n,t);case"minute":return yX(n,t);case"hour":return mX(n,t);case"day":return xy(n,t);case"week":return bX(n,t);case"month":return SE(n,t);case"quarter":return _X(n,t);case"year":return TX(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return AE(n,t);case"second":return DX(n,t);case"minute":return AX(n,t);case"hour":return xX(n,t);case"day":return OV(n,t);case"week":return CX(n,t);case"month":return LV(n,t);case"quarter":return RX(n,t);case"year":return MX(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return PZ(n);case"minute":return MZ(n);case"hour":return CZ(n);case"day":return hT(n);case"week":return Ls(n);case"isoWeek":return Ls(n,{weekStartsOn:+e});case"month":return kX(n);case"quarter":return PX(n);case"year":return jV(n);default:return n}},endOf:function(n,t){switch(t){case"second":return BX(n);case"minute":return LX(n);case"hour":return NX(n);case"day":return NV(n);case"week":return VX(n);case"month":return VV(n);case"quarter":return jX(n);case"year":return OX(n);default:return n}}});fl.register(Kh,Ag,np,Of,kT,PT);function XZ({user:n}){const[t,e]=ot.useState([]);if(ot.useEffect(()=>{n!=null&&n.uid&&sd(n.uid).then(e)},[n]),!n.goalDate||!n.goalWeight)return null;const i=[...t].sort((o,c)=>new Date(o.date)-new Date(c.date)),s={labels:i.map(o=>o.date),datasets:[{label:"Weight (kg)",data:i.map(o=>o.weight),borderColor:"deepskyblue",backgroundColor:"rgba(0, 191, 255, 0.2)",tension:.2},{label:`Goal (${n.goalWeight}kg by ${n.goalDate})`,data:i.map(()=>n.goalWeight),borderDash:[5,5],borderColor:"lime",pointRadius:0,borderWidth:1}]},r={responsive:!0,scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"PP"},ticks:{color:"white"},grid:{color:"#444"}},y:{ticks:{color:"white"},grid:{color:"#444"},beginAtZero:!1}},plugins:{legend:{labels:{color:"white"}}}};return C.jsxs("div",{className:"card bg-dark text-white p-3 mb-2 shadow-sm",children:[C.jsx("h6",{className:"fw-bold mb-2 SubTitleName",children:"Weight Progress"}),C.jsx(tU,{data:s,options:r})]})}const QZ=n=>{const t=Math.floor(n/100)+1,e=n%100,i=100,s=e/i*100;return{level:t,currentXP:e,nextXP:i,percent:s}};function ZZ({meals:n,onEditMeal:t,onDeleteMeal:e,user:i}){const{level:s,currentXP:r,nextXP:o,percent:c}=QZ(i.xp||0),h=new Date().toISOString().split("T")[0],f=x=>n.filter(A=>A.mealType===x&&A.date===h),m=x=>{const A=new Date(x),M=A.getDay(),N=A.getDate()-M+(M===0?-6:1);return new Date(A.setDate(N))},[y,_]=ot.useState(m(new Date)),b=x=>{const A=new Date(y);A.setDate(y.getDate()+x),_(A)},w=x=>new Date(x).toLocaleDateString("en-GB");return C.jsxs("div",{className:"home-container",children:[C.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[C.jsxs("p",{className:"TitleName mb-1",children:["Hello ",i.firstName]}),C.jsxs("div",{className:"text-end",children:[C.jsxs("span",{className:"small fw-bold",style:{color:"deepskyblue"},children:["Level ",s]}),C.jsx("div",{className:"progress",style:{height:"6px",width:"150px",background:"#444"},children:C.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${c}%`,backgroundColor:"deepskyblue"},"aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":o})})]})]}),C.jsxs("div",{className:"CalBarCharSection bg-dark",children:[C.jsxs("div",{className:"d-flex col-md-12 mb-2 justify-content-between",children:[C.jsx("p",{className:"SubTitleName mb-0",children:"Calories Consumed"}),C.jsxs("div",{className:"d-flex align-items-center DateRangePicker",children:[C.jsx("span",{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>b(-7),children:""}),w(y),"  ",w(new Date(y.getTime()+6*864e5)),C.jsx("span",{style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>b(7),children:""})]})]}),C.jsx(eP,{meals:n,startOfWeek:y})]}),C.jsx(XZ,{user:i}),C.jsxs("div",{className:"TodayChartsSection col-md-12",children:[C.jsxs("div",{className:"CalDonutSection bg-dark",children:[C.jsx("p",{className:"SubTitleName",children:"Calorie Intake"}),C.jsx(nP,{meals:n,selectedDate:h,goal:i.calorieGoal})]}),C.jsxs("div",{className:"NutriDonutSection bg-dark",children:[C.jsx("p",{className:"SubTitleName",children:"Nutrition Intake"}),C.jsx(iP,{meals:n,selectedDate:h})]})]}),C.jsx("div",{className:"FoodItemList bg-dark",children:(i.mealOrder||["Breakfast","Lunch","Dinner"]).map(x=>C.jsxs("div",{className:"mb-3",children:[C.jsx("p",{className:"SubTitleName",children:x}),f(x).map(A=>A.foodItems.map((M,N)=>C.jsx(Ok,{name:M.name,nutrients:M.nutrients,onEdit:()=>t(A),onDelete:()=>e(A.id),unit:i.unit||"g"},`${x}-${A.id}-${N}`)))]},x))})]})}function JZ({meals:n,onEditMeal:t,onDeleteMea:e,user:i}){const s=new Date().toISOString().split("T")[0],[r,o]=ot.useState(s),[c,h]=ot.useState([]),[f,m]=ot.useState(null);ot.useEffect(()=>{i!=null&&i.uid&&sd(i.uid).then(b=>{h(b)})},[i]),ot.useEffect(()=>{const b=c.find(w=>w.date===r);m((b==null?void 0:b.weight)||null)},[r,c]);const y=n.filter(b=>b.date===r),_={Breakfast:[],Lunch:[],Dinner:[]};return y.forEach(b=>{_[b.mealType]&&_[b.mealType].push(b)}),C.jsxs("div",{className:"home-container",children:[C.jsx("h4",{className:"mb-2 TitleName",children:"History"}),C.jsx("h5",{className:"SubTitleName",children:"Select a Date"}),C.jsx("input",{type:"date",className:"form-control mb-3",value:r,onChange:b=>o(b.target.value),max:s}),C.jsxs("div",{className:"FoodItemList mb-2 bg-dark",children:[C.jsx("h6",{className:"SubTitleName mb-2",children:"Weight Logged: "}),f?C.jsxs("span",{className:"fw-bold text-info",children:[f," kg"]}):C.jsxs("p",{className:"text-muted",children:["No weight logged on ",r]})]}),C.jsxs("div",{className:"TodayChartsSection d-flex",children:[C.jsx("div",{className:"CalDonutSection bg-dark",children:C.jsx(nP,{meals:y,selectedDate:r,goal:i.calorieGoal})}),C.jsx("div",{className:"NutriDonutSection bg-dark",children:C.jsx(iP,{meals:y,selectedDate:r})})]}),C.jsx("div",{className:"FoodItemList bg-dark mt-2",children:["Breakfast","Lunch","Dinner"].map(b=>C.jsxs("div",{className:"mb-3",children:[C.jsx("h6",{className:"SubTitleName",children:b}),_[b].length===0&&C.jsx("p",{className:"text-muted ms-2",style:{fontSize:"13px"},children:"No meals logged"}),_[b].map((w,x)=>w.foodItems.map((A,M)=>C.jsx(Ok,{name:A.name,nutrients:A.nutrients,onEdit:()=>t(w),onDelete:()=>onDeleteMeal(w.id)},`${w.id}-${M}`)))]},b))})]})}var Db={exports:{}},zC;function tJ(){return zC||(zC=1,function(n){var t=function(e){var i=Object.prototype,s=i.hasOwnProperty,r=Object.defineProperty||function(tt,P,G){tt[P]=G.value},o,c=typeof Symbol=="function"?Symbol:{},h=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function y(tt,P,G){return Object.defineProperty(tt,P,{value:G,enumerable:!0,configurable:!0,writable:!0}),tt[P]}try{y({},"")}catch{y=function(P,G,st){return P[G]=st}}function _(tt,P,G,st){var W=P&&P.prototype instanceof L?P:L,lt=Object.create(W.prototype),mt=new Q(st||[]);return r(lt,"_invoke",{value:U(tt,G,mt)}),lt}e.wrap=_;function b(tt,P,G){try{return{type:"normal",arg:tt.call(P,G)}}catch(st){return{type:"throw",arg:st}}}var w="suspendedStart",x="suspendedYield",A="executing",M="completed",N={};function L(){}function H(){}function F(){}var K={};y(K,h,function(){return this});var O=Object.getPrototypeOf,I=O&&O(O(at([])));I&&I!==i&&s.call(I,h)&&(K=I);var R=F.prototype=L.prototype=Object.create(K);H.prototype=F,r(R,"constructor",{value:F,configurable:!0}),r(F,"constructor",{value:H,configurable:!0}),H.displayName=y(F,m,"GeneratorFunction");function V(tt){["next","throw","return"].forEach(function(P){y(tt,P,function(G){return this._invoke(P,G)})})}e.isGeneratorFunction=function(tt){var P=typeof tt=="function"&&tt.constructor;return P?P===H||(P.displayName||P.name)==="GeneratorFunction":!1},e.mark=function(tt){return Object.setPrototypeOf?Object.setPrototypeOf(tt,F):(tt.__proto__=F,y(tt,m,"GeneratorFunction")),tt.prototype=Object.create(R),tt},e.awrap=function(tt){return{__await:tt}};function j(tt,P){function G(lt,mt,gt,Ct){var Tt=b(tt[lt],tt,mt);if(Tt.type==="throw")Ct(Tt.arg);else{var pt=Tt.arg,Pt=pt.value;return Pt&&typeof Pt=="object"&&s.call(Pt,"__await")?P.resolve(Pt.__await).then(function(Ft){G("next",Ft,gt,Ct)},function(Ft){G("throw",Ft,gt,Ct)}):P.resolve(Pt).then(function(Ft){pt.value=Ft,gt(pt)},function(Ft){return G("throw",Ft,gt,Ct)})}}var st;function W(lt,mt){function gt(){return new P(function(Ct,Tt){G(lt,mt,Ct,Tt)})}return st=st?st.then(gt,gt):gt()}r(this,"_invoke",{value:W})}V(j.prototype),y(j.prototype,f,function(){return this}),e.AsyncIterator=j,e.async=function(tt,P,G,st,W){W===void 0&&(W=Promise);var lt=new j(_(tt,P,G,st),W);return e.isGeneratorFunction(P)?lt:lt.next().then(function(mt){return mt.done?mt.value:lt.next()})};function U(tt,P,G){var st=w;return function(lt,mt){if(st===A)throw new Error("Generator is already running");if(st===M){if(lt==="throw")throw mt;return yt()}for(G.method=lt,G.arg=mt;;){var gt=G.delegate;if(gt){var Ct=B(gt,G);if(Ct){if(Ct===N)continue;return Ct}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(st===w)throw st=M,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);st=A;var Tt=b(tt,P,G);if(Tt.type==="normal"){if(st=G.done?M:x,Tt.arg===N)continue;return{value:Tt.arg,done:G.done}}else Tt.type==="throw"&&(st=M,G.method="throw",G.arg=Tt.arg)}}}function B(tt,P){var G=P.method,st=tt.iterator[G];if(st===o)return P.delegate=null,G==="throw"&&tt.iterator.return&&(P.method="return",P.arg=o,B(tt,P),P.method==="throw")||G!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+G+"' method")),N;var W=b(st,tt.iterator,P.arg);if(W.type==="throw")return P.method="throw",P.arg=W.arg,P.delegate=null,N;var lt=W.arg;if(!lt)return P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,N;if(lt.done)P[tt.resultName]=lt.value,P.next=tt.nextLoc,P.method!=="return"&&(P.method="next",P.arg=o);else return lt;return P.delegate=null,N}V(R),y(R,m,"Generator"),y(R,h,function(){return this}),y(R,"toString",function(){return"[object Generator]"});function At(tt){var P={tryLoc:tt[0]};1 in tt&&(P.catchLoc=tt[1]),2 in tt&&(P.finallyLoc=tt[2],P.afterLoc=tt[3]),this.tryEntries.push(P)}function St(tt){var P=tt.completion||{};P.type="normal",delete P.arg,tt.completion=P}function Q(tt){this.tryEntries=[{tryLoc:"root"}],tt.forEach(At,this),this.reset(!0)}e.keys=function(tt){var P=Object(tt),G=[];for(var st in P)G.push(st);return G.reverse(),function W(){for(;G.length;){var lt=G.pop();if(lt in P)return W.value=lt,W.done=!1,W}return W.done=!0,W}};function at(tt){if(tt){var P=tt[h];if(P)return P.call(tt);if(typeof tt.next=="function")return tt;if(!isNaN(tt.length)){var G=-1,st=function W(){for(;++G<tt.length;)if(s.call(tt,G))return W.value=tt[G],W.done=!1,W;return W.value=o,W.done=!0,W};return st.next=st}}return{next:yt}}e.values=at;function yt(){return{value:o,done:!0}}return Q.prototype={constructor:Q,reset:function(tt){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(St),!tt)for(var P in this)P.charAt(0)==="t"&&s.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=o)},stop:function(){this.done=!0;var tt=this.tryEntries[0],P=tt.completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(tt){if(this.done)throw tt;var P=this;function G(Ct,Tt){return lt.type="throw",lt.arg=tt,P.next=Ct,Tt&&(P.method="next",P.arg=o),!!Tt}for(var st=this.tryEntries.length-1;st>=0;--st){var W=this.tryEntries[st],lt=W.completion;if(W.tryLoc==="root")return G("end");if(W.tryLoc<=this.prev){var mt=s.call(W,"catchLoc"),gt=s.call(W,"finallyLoc");if(mt&&gt){if(this.prev<W.catchLoc)return G(W.catchLoc,!0);if(this.prev<W.finallyLoc)return G(W.finallyLoc)}else if(mt){if(this.prev<W.catchLoc)return G(W.catchLoc,!0)}else if(gt){if(this.prev<W.finallyLoc)return G(W.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(tt,P){for(var G=this.tryEntries.length-1;G>=0;--G){var st=this.tryEntries[G];if(st.tryLoc<=this.prev&&s.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var W=st;break}}W&&(tt==="break"||tt==="continue")&&W.tryLoc<=P&&P<=W.finallyLoc&&(W=null);var lt=W?W.completion:{};return lt.type=tt,lt.arg=P,W?(this.method="next",this.next=W.finallyLoc,N):this.complete(lt)},complete:function(tt,P){if(tt.type==="throw")throw tt.arg;return tt.type==="break"||tt.type==="continue"?this.next=tt.arg:tt.type==="return"?(this.rval=this.arg=tt.arg,this.method="return",this.next="end"):tt.type==="normal"&&P&&(this.next=P),N},finish:function(tt){for(var P=this.tryEntries.length-1;P>=0;--P){var G=this.tryEntries[P];if(G.finallyLoc===tt)return this.complete(G.completion,G.afterLoc),St(G),N}},catch:function(tt){for(var P=this.tryEntries.length-1;P>=0;--P){var G=this.tryEntries[P];if(G.tryLoc===tt){var st=G.completion;if(st.type==="throw"){var W=st.arg;St(G)}return W}}throw new Error("illegal catch attempt")},delegateYield:function(tt,P,G){return this.delegate={iterator:at(tt),resultName:P,nextLoc:G},this.method==="next"&&(this.arg=o),N}},e}(n.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Db)),Db.exports}var Cb,HC;function CE(){return HC||(HC=1,Cb=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`),Cb}var Mb,qC;function XV(){if(qC)return Mb;qC=1;const n=CE();let t=0;return Mb=({id:e,action:i,payload:s={}})=>{let r=e;return typeof r>"u"&&(r=n("Job",t),t+=1),{id:r,action:i,payload:s}},Mb}var qh={},GC;function ME(){if(GC)return qh;GC=1;let n=!1;return qh.logging=n,qh.setLogging=t=>{n=t},qh.log=(...t)=>n?console.log.apply(this,t):null,qh}var Pb,WC;function eJ(){if(WC)return Pb;WC=1;const n=XV(),{log:t}=ME(),e=CE();let i=0;return Pb=()=>{const s=e("Scheduler",i),r={},o={};let c=[];i+=1;const h=()=>c.length,f=()=>Object.keys(r).length,m=()=>{if(c.length!==0){const x=Object.keys(r);for(let A=0;A<x.length;A+=1)if(typeof o[x[A]]>"u"){c[0](r[x[A]]);break}}},y=(x,A)=>new Promise((M,N)=>{const L=n({action:x,payload:A});c.push(async H=>{c.shift(),o[H.id]=L;try{M(await H[x].apply(this,[...A,L.id]))}catch(F){N(F)}finally{delete o[H.id],m()}}),t(`[${s}]: Add ${L.id} to JobQueue`),t(`[${s}]: JobQueue length=${c.length}`),m()});return{addWorker:x=>(r[x.id]=x,t(`[${s}]: Add ${x.id}`),t(`[${s}]: Number of workers=${f()}`),m(),x.id),addJob:async(x,...A)=>{if(f()===0)throw Error(`[${s}]: You need to have at least one worker before adding jobs`);return y(x,A)},terminate:async()=>{Object.keys(r).forEach(async x=>{await r[x].terminate()}),c=[]},getQueueLen:h,getNumWorkers:f}},Pb}function nJ(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kb,YC;function iJ(){return YC||(YC=1,kb=n=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof nJ=="function"&&(t.type="node"),typeof n>"u"?t:t[n]}),kb}var Ob,KC;function sJ(){if(KC)return Ob;KC=1;const t=iJ()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return Ob=e=>{const i={...e};return["corePath","workerPath","langPath"].forEach(s=>{e[s]&&(i[s]=t(i[s]))}),i},Ob}var Nb,$C;function QV(){return $C||($C=1,Nb={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Nb}const rJ="6.0.1",aJ={version:rJ};var Vb,XC;function oJ(){return XC||(XC=1,Vb={workerBlobURL:!0,logger:()=>{}}),Vb}var Lb,QC;function lJ(){if(QC)return Lb;QC=1;const n=aJ.version;return Lb={...oJ(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},Lb}var jb,ZC;function cJ(){return ZC||(ZC=1,jb=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const i=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(i))}else e=new Worker(n);return e}),jb}var Bb,JC;function uJ(){return JC||(JC=1,Bb=n=>{n.terminate()}),Bb}var Fb,tM;function hJ(){return tM||(tM=1,Fb=(n,t)=>{n.onmessage=({data:e})=>{t(e)}}),Fb}var Ub,eM;function fJ(){return eM||(eM=1,Ub=async(n,t)=>{n.postMessage(t)}),Ub}var zb,nM;function dJ(){if(nM)return zb;nM=1;const n=e=>new Promise((i,s)=>{const r=new FileReader;r.onload=()=>{i(r.result)},r.onerror=({target:{error:{code:o}}})=>{s(Error(`File could not be read! Code=${o}`))},r.readAsArrayBuffer(e)}),t=async e=>{let i=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?i=atob(e.split(",")[1]).split("").map(s=>s.charCodeAt(0)):i=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(i=await t(e.src)),e.tagName==="VIDEO"&&(i=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(s=>{e.toBlob(async r=>{i=await n(r),s()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const s=await e.convertToBlob();i=await n(s)}else(e instanceof File||e instanceof Blob)&&(i=await n(e));return new Uint8Array(i)};return zb=t,zb}var Hb,iM;function mJ(){if(iM)return Hb;iM=1;const n=lJ(),t=cJ(),e=uJ(),i=hJ(),s=fJ(),r=dJ();return Hb={defaultOptions:n,spawnWorker:t,terminateWorker:e,onMessage:i,send:s,loadImage:r},Hb}var qb,sM;function ZV(){if(sM)return qb;sM=1;const n=sJ(),t=XV(),{log:e}=ME(),i=CE(),s=QV(),{defaultOptions:r,spawnWorker:o,terminateWorker:c,onMessage:h,loadImage:f,send:m}=mJ();let y=0;return qb=async(_="eng",b=s.LSTM_ONLY,w={},x={})=>{const A=i("Worker",y),{logger:M,errorHandler:N,...L}=n({...r,...w}),H={},F=typeof _=="string"?_.split("+"):_;let K=b,O=x;const I=[s.DEFAULT,s.LSTM_ONLY].includes(b)&&!L.legacyCore;let R,V;const j=new Promise((pt,Pt)=>{V=pt,R=Pt}),U=pt=>{R(pt.message)};let B=o(L);B.onerror=U,y+=1;const At=({id:pt,action:Pt,payload:Ft})=>new Promise((wt,ve)=>{e(`[${A}]: Start ${pt}, action=${Pt}`);const Xe=`${Pt}-${pt}`;H[Xe]={resolve:wt,reject:ve},m(B,{workerId:A,jobId:pt,action:Pt,payload:Ft})}),St=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),Q=pt=>At(t({id:pt,action:"load",payload:{options:{lstmOnly:I,corePath:L.corePath,logging:L.logging}}})),at=(pt,Pt,Ft)=>At(t({id:Ft,action:"FS",payload:{method:"writeFile",args:[pt,Pt]}})),yt=(pt,Pt)=>At(t({id:Pt,action:"FS",payload:{method:"readFile",args:[pt,{encoding:"utf8"}]}})),tt=(pt,Pt)=>At(t({id:Pt,action:"FS",payload:{method:"unlink",args:[pt]}})),P=(pt,Pt,Ft)=>At(t({id:Ft,action:"FS",payload:{method:pt,args:Pt}})),G=(pt,Pt)=>At(t({id:Pt,action:"loadLanguage",payload:{langs:pt,options:{langPath:L.langPath,dataPath:L.dataPath,cachePath:L.cachePath,cacheMethod:L.cacheMethod,gzip:L.gzip,lstmOnly:[s.DEFAULT,s.LSTM_ONLY].includes(K)&&!L.legacyLang}}})),st=(pt,Pt,Ft,wt)=>At(t({id:wt,action:"initialize",payload:{langs:pt,oem:Pt,config:Ft}})),W=(pt="eng",Pt,Ft,wt)=>{if(I&&[s.TESSERACT_ONLY,s.TESSERACT_LSTM_COMBINED].includes(Pt))throw Error("Legacy model requested but code missing.");const ve=Pt||K;K=ve;const Xe=Ft||O;O=Xe;const Bi=(typeof pt=="string"?pt.split("+"):pt).filter(Wn=>!F.includes(Wn));return F.push(...Bi),Bi.length>0?G(Bi,wt).then(()=>st(pt,ve,Xe,wt)):st(pt,ve,Xe,wt)},lt=(pt={},Pt)=>At(t({id:Pt,action:"setParameters",payload:{params:pt}})),mt=async(pt,Pt={},Ft={text:!0},wt)=>At(t({id:wt,action:"recognize",payload:{image:await f(pt),options:Pt,output:Ft}})),gt=async(pt,Pt)=>{if(I)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return At(t({id:Pt,action:"detect",payload:{image:await f(pt)}}))},Ct=async()=>(B!==null&&(c(B),B=null),Promise.resolve());h(B,({workerId:pt,jobId:Pt,status:Ft,action:wt,data:ve})=>{const Xe=`${wt}-${Pt}`;if(Ft==="resolve")e(`[${pt}]: Complete ${Pt}`),H[Xe].resolve({jobId:Pt,data:ve}),delete H[Xe];else if(Ft==="reject")if(H[Xe].reject(ve),delete H[Xe],wt==="load"&&R(ve),N)N(ve);else throw Error(ve);else Ft==="progress"&&M({...ve,userJobId:Pt})});const Tt={id:A,worker:B,load:St,writeText:at,readText:yt,removeFile:tt,FS:P,reinitialize:W,setParameters:lt,recognize:mt,detect:gt,terminate:Ct};return Q().then(()=>G(_)).then(()=>st(_,b,x)).then(()=>V(Tt)).catch(()=>{}),j},qb}var Gb,rM;function gJ(){if(rM)return Gb;rM=1;const n=ZV();return Gb={recognize:async(i,s,r)=>{const o=await n(s,1,r);return o.recognize(i).finally(async()=>{await o.terminate()})},detect:async(i,s)=>{const r=await n("osd",0,s);return r.detect(i).finally(async()=>{await r.terminate()})}},Gb}var Wb,aM;function pJ(){return aM||(aM=1,Wb={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Wb}var Yb,oM;function yJ(){return oM||(oM=1,Yb={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Yb}var Kb,lM;function _J(){if(lM)return Kb;lM=1,tJ();const n=eJ(),t=ZV(),e=gJ(),i=pJ(),s=QV(),r=yJ(),{setLogging:o}=ME();return Kb={languages:i,OEM:s,PSM:r,createScheduler:n,createWorker:t,setLogging:o,...e},Kb}var vJ=_J();const bJ=cM(vJ),TJ={Fat:["fat","saturates","of which saturates"],Carbohydrate:["carbohydrate","carb"],Sugar:["sugar","sugars","of which sugars"],Fibre:["fibre","fiber"],Protein:["protein","protien"],Salt:["salt","sodium"]};function wJ(n){const t=n.match(/([\d.]+)\s*(g|mg)?/i);if(t){const e=parseFloat(t[1]);if(!isNaN(e)&&e<1e3)return e}return null}function EJ(n){const t=n.split(`
`).map(i=>i.trim()).filter(Boolean),e=[];for(const i of t)for(const s of Object.keys(TJ))if(i.toLowerCase().includes(s.toLowerCase())){const r=wJ(i);r!==null&&!e.find(o=>o.type===s)&&e.push({type:s,count:r.toFixed(2),serving:"1",total:r.toFixed(2)})}return e}function SJ({isOpen:n,onClose:t,onSave:e,editMeal:i,user:s}){const[r,o]=ot.useState("Breakfast"),[c,h]=ot.useState(new Date),[f,m]=ot.useState([""]),[y,_]=ot.useState([[{type:"Protein",count:"",serving:"1",total:""}]]),[b,w]=ot.useState(!1),[x,A]=ot.useState(!1),[M,N]=ot.useState(!1),L=ot.useRef(null),[H,F]=ot.useState(null),[K,O]=ot.useState(""),[I,R]=ot.useState(new Date().toISOString().split("T")[0]);ot.useEffect(()=>{i&&(tt(),F(null),o(i.mealType),h(new Date(i.timestamp)),m(i.foodItems.map(W=>W.name)),_(i.foodItems.map(W=>W.nutrients)),w(!0),N(!1),A(!1))},[i]);const V=()=>{tt(),F(null),_([[{type:"Protein",count:"",serving:"1",total:""}]]),m([""]),h(new Date),w(!1),N(!1),A(!1)},j=W=>{tt(),w(W==="manual"),N(W==="auto"),A(W==="scan")},U=()=>{_([...y,[{type:"Protein",count:"",serving:"1",total:""}]]),m([...f,""])},B=W=>{const lt=[...y];lt[W].push({type:"Protein",count:"",serving:"1",total:""}),_(lt)},At=(W,lt)=>{const mt=[...y];mt[W].splice(lt,1),_(mt)},St=y.every(W=>W.every(lt=>!lt.count||parseFloat(lt.count)===0)),Q=(W,lt,mt,gt)=>{const Ct=[...y],Tt=Ct[W];if(mt==="serving")Tt.forEach(pt=>{pt.serving=gt;const Pt=parseFloat(pt.count)||0,Ft=parseFloat(gt)||1;pt.total=(Pt*Ft).toFixed(2)});else{const pt=Tt[lt];pt[mt]=gt;const Pt=parseFloat(pt.count)||0,Ft=parseFloat(pt.serving)||1;pt.total=(Pt*Ft).toFixed(2)}_(Ct)},at=()=>{const W=y.map((mt,gt)=>({name:f[gt]||`Food ${gt+1}`,nutrients:mt})),lt={mealType:r,date:c.toISOString().split("T")[0],timestamp:c.toISOString(),foodItems:W};e(lt),V(),t()},yt=async()=>{j("scan");try{const W=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});L.current&&(L.current.srcObject=W,L.current.play())}catch{alert("Camera access denied."),A(!1)}},tt=()=>{const W=L.current;W&&W.srcObject&&(W.srcObject.getTracks().forEach(lt=>lt.stop()),W.srcObject=null),A(!1)},P=()=>{const W=L.current;if(!W||W.videoWidth===0){alert("Camera not ready yet. Wait a moment.");return}const lt=document.createElement("canvas");lt.width=W.videoWidth,lt.height=W.videoHeight;const mt=lt.getContext("2d");mt.drawImage(W,0,0);const gt=mt.getImageData(0,0,lt.width,lt.height),Ct=gt.data;for(let Tt=0;Tt<Ct.length;Tt+=4){const pt=(Ct[Tt]+Ct[Tt+1]+Ct[Tt+2])/3;Ct[Tt]=pt,Ct[Tt+1]=pt,Ct[Tt+2]=pt}mt.putImageData(gt,0,0),bJ.recognize(lt,"eng").then(({data:{text:Tt}})=>{const pt=EJ(Tt);pt.length>0?(_([pt]),j("manual")):alert("No nutritional values detected. Try again or enter manually."),tt()})},G=async(W,lt)=>{var mt;try{const Tt=(mt=(await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(W)}&search_simple=1&action=process&json=1`)).json()).products)==null?void 0:mt.find(wt=>wt.nutriments&&wt.nutriments["energy-kcal_100g"]&&wt.nutriments.proteins_100g);if(!Tt||!Tt.nutriments)throw new Error("No valid nutrition info found.");const pt=Tt.nutriments,Pt=[pt.proteins_100g&&{type:"Protein",count:parseFloat(pt.proteins_100g).toFixed(2),serving:"1",total:parseFloat(pt.proteins_100g).toFixed(2)},pt.fat_100g&&{type:"Fat",count:parseFloat(pt.fat_100g).toFixed(2),serving:"1",total:parseFloat(pt.fat_100g).toFixed(2)},pt.carbohydrates_100g&&{type:"Carbohydrate",count:parseFloat(pt.carbohydrates_100g).toFixed(2),serving:"1",total:parseFloat(pt.carbohydrates_100g).toFixed(2)},pt.sugars_100g&&{type:"Carbs as Sugar",count:parseFloat(pt.sugars_100g).toFixed(2),serving:"1",total:parseFloat(pt.sugars_100g).toFixed(2)},pt.fiber_100g&&{type:"Fibre",count:parseFloat(pt.fiber_100g).toFixed(2),serving:"1",total:parseFloat(pt.fiber_100g).toFixed(2)},pt.salt_100g&&{type:"Salt",count:parseFloat(pt.salt_100g).toFixed(2),serving:"1",total:parseFloat(pt.salt_100g).toFixed(2)}].filter(Boolean),Ft=[...y];Ft[lt]=Pt,_(Ft),j("auto")}catch{alert(" Could not fetch nutrition info. Try a more specific food name.")}};if(!n)return null;if(H===null)return C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[C.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),C.jsxs("div",{className:"d-flex flex-column gap-2",children:[C.jsx("button",{className:"btn btn-primary",onClick:()=>F("meal"),children:"Log Meal"}),C.jsx("button",{className:"btn btn-outline-light",onClick:()=>F("weight"),children:"Log Weight"}),C.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{V(),t()},children:"Cancel"})]})]})});return C.jsxs(C.Fragment,{children:[H===null&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[C.jsx("h5",{className:"mb-3",children:"What would you like to log?"}),C.jsxs("div",{className:"d-flex flex-column gap-2",children:[C.jsx("button",{className:"btn btn-primary",onClick:()=>F("meal"),children:" Log Meal"}),C.jsx("button",{className:"btn btn-outline-light",onClick:()=>F("weight"),children:" Log Weight"}),C.jsx("button",{className:"btn btn-secondary mt-2",onClick:()=>{V(),t()},children:"Cancel"})]})]})}),H==="meal"&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark",children:[C.jsxs("div",{className:"modal-header col-md-12 mb-2",style:{display:"flex"},children:[C.jsxs("div",{style:{display:"flex",width:"100%",marginRight:"5%",alignItems:"center"},children:[C.jsx("p",{className:"ModelTitleName",children:"Select Meal"}),C.jsxs("select",{className:"DropDownMeal",value:r,onChange:W=>o(W.target.value),children:[C.jsx("option",{children:"Breakfast"}),C.jsx("option",{children:"Lunch"}),C.jsx("option",{children:"Dinner"})]})]}),C.jsx("input",{type:"date",className:"form-control",value:c.toISOString().split("T")[0],onChange:W=>h(new Date(W.target.value)),max:new Date().toISOString().split("T")[0],style:{width:"30%"}})]}),C.jsxs("div",{className:"manual-scan-buttons mb-2",children:[C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>j("manual"),children:"Manual Entry"}),C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>j("auto"),children:"Auto Fill"}),C.jsx("button",{className:"btn btn-primary btn-sm",onClick:yt,children:"Scan It"})]}),x&&C.jsxs("div",{className:"scan-box text-center",children:[C.jsx("video",{ref:L,style:{width:"100%",maxHeight:"200px"}}),C.jsx("button",{className:"btn btn-primary mt-2",onClick:P,children:"Capture"}),C.jsx("button",{className:"btn btn-danger mt-2 ms-2",onClick:tt,children:"Cancel"})]}),b&&st(),M&&st(!0),C.jsxs("div",{className:"modal-footer mt-3",children:[C.jsx("button",{className:"btn btn-save btn-primary",onClick:at,disabled:St,children:"Save"}),C.jsx("button",{className:"btn btn-exit btn-danger",onClick:()=>{V(),t()},children:"Exit"})]})]})}),H==="weight"&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container bg-dark text-white p-4 text-center",children:[C.jsx(hX,{user:s}),C.jsx("div",{className:"d-flex justify-content-end",children:C.jsx("button",{className:"btn btn-danger mt-2",onClick:()=>{V(),t()},children:"Close"})})]})})]});function st(W=!1){return C.jsxs("div",{className:"TotalFoodSection",children:[y.map((lt,mt)=>C.jsxs("div",{className:"food-section",children:[C.jsxs("div",{className:"FoodNameSection d-flex align-items-center gap-2",children:[C.jsx("textarea",{className:"FoodNameTextArea",value:f[mt],style:{width:"100%"},onChange:gt=>{const Ct=[...f];Ct[mt]=gt.target.value,m(Ct)},placeholder:"Enter food name (e.g., boiled egg)"}),W&&C.jsx("button",{className:"btn btn-sm btn-info",style:{fontSize:"12px",width:"35%"},onClick:()=>G(f[mt],mt),children:" Auto-Fill"})]}),C.jsxs("div",{className:"row fw-bold mb-2 text-white",style:{fontSize:"12px",padding:"0 10px"},children:[C.jsx("div",{className:"col",children:"Type"}),C.jsx("div",{className:"col",children:"Count"}),C.jsx("div",{className:"col",children:"Servings"}),C.jsx("div",{className:"col",children:"Total"}),C.jsx("div",{className:"col",children:"Remove"})]}),C.jsx("div",{className:"SplitTable",children:lt.map((gt,Ct)=>C.jsxs("div",{className:"row mb-1",children:[C.jsx("div",{className:"col",children:C.jsxs("select",{className:"form-select",value:gt.type,onChange:Tt=>Q(mt,Ct,"type",Tt.target.value),children:[C.jsx("option",{children:"Protein"}),C.jsx("option",{children:"Fat"}),C.jsx("option",{children:"Carbohydrate"}),C.jsx("option",{children:"Carbs as Sugar"}),C.jsx("option",{children:"Fibre"}),C.jsx("option",{children:"Salt"})]})}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control",value:gt.count,onChange:Tt=>Q(mt,Ct,"count",Tt.target.value)})}),C.jsx("div",{className:"col",children:C.jsx("select",{className:"form-select",value:gt.serving,onChange:Tt=>Q(mt,Ct,"serving",Tt.target.value),children:[...Array(10)].map((Tt,pt)=>C.jsx("option",{children:pt+1},pt+1))})}),C.jsx("div",{className:"col",children:C.jsx("input",{type:"number",className:"form-control",value:gt.total,disabled:!0})}),C.jsx("div",{className:"col text-center",children:C.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>At(mt,Ct),children:""})})]},Ct))}),C.jsx("button",{className:"AddItemButton mt-1",onClick:()=>B(mt),children:"Add Nutrient"})]},mt)),C.jsx("button",{className:"AddItemButton mt-3",onClick:U,children:"Add Food Item"})]})}}const JV="/knowurfood/assets/Logo-L9hp3FVR.png";function xJ({onLoginSuccess:n}){const[t,e]=ot.useState("login"),[i,s]=ot.useState(1),[r,o]=ot.useState(""),[c,h]=ot.useState(""),[f,m]=ot.useState(""),[y,_]=ot.useState(""),[b,w]=ot.useState(""),[x,A]=ot.useState(2e3),[M,N]=ot.useState("Breakfast,Lunch,Dinner"),[L,H]=ot.useState("g"),[F,K]=ot.useState(""),[O,I]=ot.useState(""),[R,V]=ot.useState(""),[j,U]=ot.useState(""),[B,At]=ot.useState("08:00"),[St,Q]=ot.useState("13:00"),[at,yt]=ot.useState("19:00"),[tt,P]=ot.useState(""),[G,st]=ot.useState("male"),[W,lt]=ot.useState(""),[mt,gt]=ot.useState(!1);ot.useEffect(()=>{if(F&&O&&R&&j&&tt&&G){const wt=Math.max(1,Math.ceil((new Date(j)-new Date)/864e5)),Xe=(R-F)*7700/wt,Ir=G==="male"?10*F+6.25*O-5*tt+5:10*F+6.25*O-5*tt-161,Bi=Math.round(Ir+Xe);isNaN(Bi)||A(Bi)}},[F,O,R,j,tt,G]);const Ct=()=>{o(""),h(""),m(""),_(""),w(""),A(2e3),N("Breakfast,Lunch,Dinner"),H("g"),K(""),I(""),V(""),U(""),At("08:00"),Q("13:00"),yt("19:00"),P(""),st("male"),lt(""),s(1)},Tt=()=>{e(wt=>wt==="login"?"register":"login"),Ct()},pt=()=>{if(i===1&&(!r||!c||!f)){lt("Please complete all fields in Step 1");return}if(i===1&&c!==f){lt("Passwords do not match");return}if(i===2&&(!y||!b||!F||!O||!R||!j||!tt||!G)){lt("Please complete all fields in Step 2");return}lt(""),s(i+1)},Pt=async wt=>{wt.preventDefault(),lt("");try{let ve;t==="register"?ve=await oX({email:r,password:c,firstName:y,lastName:b,calorieGoal:Number(x),mealOrder:M.split(","),unit:L,currentWeight:parseFloat(F),height:parseFloat(O),goalWeight:parseFloat(R),goalDate:j,breakfastTime:B,lunchTime:St,dinnerTime:at,age:parseInt(tt),gender:G}):ve=await lX({email:r,password:c}),n(ve)}catch(ve){lt(ve.message)}},Ft=()=>{switch(i){case 1:return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Email"}),C.jsx("input",{type:"email",className:"form-control",value:r,onChange:wt=>o(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Password"}),C.jsx("input",{type:mt?"text":"password",className:"form-control",value:c,onChange:wt=>h(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Confirm Password"}),C.jsx("input",{type:mt?"text":"password",className:"form-control",value:f,onChange:wt=>m(wt.target.value),required:!0})]})]});case 2:return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"First Name"}),C.jsx("input",{type:"text",className:"form-control",value:y,onChange:wt=>_(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Last Name"}),C.jsx("input",{type:"text",className:"form-control",value:b,onChange:wt=>w(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Age"}),C.jsx("input",{type:"number",className:"form-control",value:tt,onChange:wt=>P(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Gender"}),C.jsxs("select",{className:"form-control",value:G,onChange:wt=>st(wt.target.value),children:[C.jsx("option",{value:"male",children:"Male"}),C.jsx("option",{value:"female",children:"Female"})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Current Weight (kg)"}),C.jsx("input",{type:"number",className:"form-control",value:F,onChange:wt=>K(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Height (cm)"}),C.jsx("input",{type:"number",className:"form-control",value:O,onChange:wt=>I(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Goal Weight (kg)"}),C.jsx("input",{type:"number",className:"form-control",value:R,onChange:wt=>V(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Goal Date"}),C.jsx("input",{type:"date",className:"form-control",value:j,onChange:wt=>U(wt.target.value),required:!0})]})]});case 3:return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Calorie Goal"}),C.jsx("input",{type:"number",className:"form-control",value:x,onChange:wt=>A(wt.target.value)})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Meal Order"}),C.jsxs("select",{className:"form-control",value:M,onChange:wt=>N(wt.target.value),children:[C.jsx("option",{value:"Breakfast,Lunch,Dinner",children:"Breakfast  Lunch  Dinner"}),C.jsx("option",{value:"Dinner,Lunch,Breakfast",children:"Dinner  Lunch  Breakfast"})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Preferred Unit"}),C.jsxs("select",{className:"form-control",value:L,onChange:wt=>H(wt.target.value),children:[C.jsx("option",{value:"g",children:"Grams"}),C.jsx("option",{value:"mg",children:"Milligrams"}),C.jsx("option",{value:"kcal",children:"Calories"})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Breakfast Time"}),C.jsx("input",{type:"time",className:"form-control",value:B,onChange:wt=>At(wt.target.value)})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Lunch Time"}),C.jsx("input",{type:"time",className:"form-control",value:St,onChange:wt=>Q(wt.target.value)})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Dinner Time"}),C.jsx("input",{type:"time",className:"form-control",value:at,onChange:wt=>yt(wt.target.value)})]})]});default:return null}};return C.jsxs("div",{className:"auth-container fade-slide-in",children:[C.jsx("div",{className:"text-center",children:C.jsx("img",{src:JV,alt:"KnowUrFood Logo",style:{width:"200px"}})}),C.jsxs("div",{className:"auth-box shadow rounded",children:[C.jsx("h2",{className:"auth-title",children:t==="login"?"LOGIN":"REGISTER"}),C.jsx("form",{onSubmit:wt=>wt.preventDefault(),className:"auth-form",children:t==="login"?C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Email"}),C.jsx("input",{type:"email",className:"form-control",value:r,onChange:wt=>o(wt.target.value),required:!0})]}),C.jsxs("div",{className:"form-row",children:[C.jsx("label",{children:"Password"}),C.jsx("input",{type:mt?"text":"password",className:"form-control",value:c,onChange:wt=>h(wt.target.value),required:!0})]}),C.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3 mb-2",children:"Login"})]}):C.jsxs("div",{className:`fade-step step-${i}`,children:[Ft(),C.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i>1&&C.jsx("button",{type:"button",className:"btn btn-outline-light",onClick:()=>s(i-1),children:" Back"}),i<3?C.jsx("button",{type:"button",className:"btn btn-primary ms-auto",onClick:pt,children:"Next "}):C.jsx("button",{type:"submit",onClick:Pt,className:"btn btn-success ms-auto",children:"Register"})]})]})}),C.jsxs("p",{className:"text-white text-center mt-3",children:[t==="login"?"Don't have an account?":"Already have an account?"," ",C.jsx("span",{className:"text-link",onClick:Tt,children:t==="login"?"Register":"Login"})]}),W&&C.jsx("p",{className:"text-danger text-center mt-2",children:W})]})]})}function AJ({user:n,meals:t,onLogout:e,clearAllMeals:i}){const[s,r]=ot.useState("Breakfast-Lunch-Dinner"),[o,c]=ot.useState(!1),[h,f]=ot.useState("g"),[m,y]=ot.useState(!1),_=n.level||1,w=(n.xp||0)%100,x=100,A=w/x*100,M=n.badges||[];ot.useEffect(()=>{var R;n&&(r(((R=n.mealOrder)==null?void 0:R.join("-"))||"Breakfast-Lunch-Dinner"),c(n.darkMode??!1),f(n.unit||"g"))},[n]);const N=async()=>{const R={mealOrder:s.split("-"),darkMode:o,unit:h};await rX(n.uid,R),alert(" Preferences updated in your profile!")},L=(t==null?void 0:t.length)||0,H=[...new Set(t==null?void 0:t.map(R=>R.date))],F=H.length>0?(L/H.length).toFixed(1):0,K=()=>{const R=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),V=document.createElement("a");V.href=URL.createObjectURL(R),V.download="meals.json",V.click()},O=()=>{if(!t||t.length===0){alert("No meals to export.");return}const R=[["Date","Meal Type","Food Name","Fat (g)","Carbs (g)","Protein (g)","Quantity","Unit"]];t.forEach(B=>{B.foodItems.forEach(At=>{R.push([B.date,B.mealType,At.name,At.nutrients.fat,At.nutrients.carbs,At.nutrients.protein,At.quantity,n.unit||"g"])})});const V=R.map(B=>B.join(",")).join(`
`),j=new Blob([V],{type:"text/csv"}),U=document.createElement("a");U.href=URL.createObjectURL(j),U.download="meals.csv",U.click()},I=async()=>{window.confirm(" Are you sure you want to clear all meal data? This cannot be undone.")&&(y(!0),await i(),y(!1),alert(" All meals have been deleted from your account."))};return C.jsxs("div",{className:"home-container",children:[C.jsxs("div",{className:"text-center mb-4",children:[C.jsx("i",{className:"bi bi-person-circle TitleName",style:{fontSize:"3rem"}}),C.jsx("h4",{className:"mt-2 fw-bold TitleName",children:n.firstName}),C.jsx("small",{className:"text-white",children:"Profile"})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Usage Summary"}),C.jsxs("p",{style:{fontSize:"14px"},children:[" Days Tracked: ",H.length]}),C.jsxs("p",{style:{fontSize:"14px"},children:[" Meals Logged: ",L]}),C.jsxs("p",{style:{fontSize:"14px"},children:[" Avg Meals/Day: ",F]})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[C.jsx("h6",{className:"fw-bold mb-2",children:"Your Rewards"}),C.jsxs("p",{className:"mb-1",children:[" Level ",_]}),C.jsx("div",{className:"progress mb-2",style:{height:"6px",background:"#444"},title:`${w}/${x} XP`,children:C.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${A}%`,backgroundColor:"#28a745"},"aria-valuenow":w,"aria-valuemin":0,"aria-valuemax":x})}),C.jsx("p",{className:"mb-1",children:" Badges Unlocked:"}),M.length===0?C.jsx("p",{className:"text-muted small",children:"No badges yet  keep logging meals!"}):C.jsx("div",{className:"d-flex flex-wrap gap-2",children:M.map((R,V)=>C.jsx("span",{className:`badge rounded-pill ${R.includes("Goal")?"bg-success":"bg-info"} text-dark p-2`,title:R,children:R},V))})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Preferences"}),C.jsxs("div",{className:"mb-2",children:[C.jsx("label",{className:"form-label small",children:"Meal Order"}),C.jsxs("select",{className:"form-select form-select-sm",value:s,onChange:R=>r(R.target.value),children:[C.jsx("option",{children:"Breakfast-Lunch-Dinner"}),C.jsx("option",{children:"Lunch-Dinner-Breakfast"}),C.jsx("option",{children:"Dinner-Breakfast-Lunch"})]})]}),C.jsxs("div",{className:"mb-2",children:[C.jsx("label",{className:"form-label small",children:"Units"}),C.jsxs("select",{className:"form-select form-select-sm",value:h,onChange:R=>f(R.target.value),children:[C.jsx("option",{children:"g"}),C.jsx("option",{children:"mg"}),C.jsx("option",{children:"kcal"})]})]}),C.jsxs("button",{className:"btn btn-sm btn-primary mt-2",onClick:N,children:[C.jsx("i",{className:"bi bi-save me-1"})," Save Preferences"]})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 mb-3 shadow-sm text-white",children:[C.jsx("h6",{className:"fw-bold mb-3",children:"Data Management"}),C.jsxs("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:K,children:[C.jsx("i",{className:"bi bi-download me-1"})," Export Data (.json)"]}),C.jsxs("button",{className:"btn btn-outline-light btn-sm w-100 mb-2",onClick:O,children:[C.jsx("i",{className:"bi bi-file-earmark-spreadsheet me-1"})," Export Data (.csv)"]}),C.jsx("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:I,disabled:m,children:m?"Clearing...":C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"bi bi-trash me-1"})," Clear All Meals"]})})]}),C.jsxs("div",{className:"card bg-dark border-0 p-3 shadow-sm text-white",children:[C.jsx("h6",{className:"fw-bold",children:"Account"}),C.jsxs("button",{className:"btn btn-danger w-100 mt-2",onClick:e,children:[C.jsx("i",{className:"bi bi-box-arrow-right me-2"})," Logout"]})]})]})}function IJ({meals:n,user:t}){const[e,i]=ot.useState({}),[s,r]=ot.useState({}),[o,c]=ot.useState(!1),h=new Date;h.setDate(h.getDate()-6);const f={Protein:50*7,Carbohydrate:260*7,Fat:70*7,"Carbs as Sugar":30*7,Fibre:30*7,Salt:6*7},m=(b=0)=>{const w=new Date,x=new Date(w.setDate(w.getDate()-b)),A=new Date(x);A.setDate(x.getDate()-6);const M=[];for(let N=0;N<7;N++){const L=new Date(A);L.setDate(A.getDate()+N),M.push(L.toISOString().split("T")[0])}return M},y=b=>{const w={};let x=0;b.forEach(M=>{const N=n.filter(L=>L.date===M);N.length>0&&(x++,N.forEach(L=>{L.foodItems.forEach(H=>{H.nutrients.forEach(F=>{const K=parseFloat(F.total)||0;w[F.type]=(w[F.type]||0)+K})})}))});const A={};return Object.keys(w).forEach(M=>{A[M]=w[M]/x}),A};ot.useEffect(()=>{const b=m(0),w=m(7);i(y(b)),r(y(w))},[n]),ot.useEffect(()=>{(async()=>{if(!(t!=null&&t.goalDate)||!(t!=null&&t.goalWeight)||!(t!=null&&t.currentWeight))return;const w=await sd(t.uid);if(w.length===0)return;const x=new Date(t.createdAt||w[0].date),A=new Date,M=new Date(t.goalDate),N=Math.max(1,(M-x)/864e5),L=Math.max(1,(A-x)/864e5),H=t.goalWeight-t.currentWeight,F=H/N*L,K=t.currentWeight+F,O=w.reduce((I,R)=>I.date>R.date?I:R).weight;(H>0&&O<K-.5||H<0&&O>K+.5)&&c(!0)})()},[t]);const _=[];return Object.keys(f).forEach(b=>{const w=e[b]||0,x=(e[b]||0)-(s[b]||0);w<.6*f[b]?_.push(` Your ${b} intake is quite low this week. Consider improving it.`):w>1.2*f[b]?_.push(` You're exceeding recommended ${b} levels.`):x>5?_.push(` ${b} increased significantly this week.`):x<-5&&_.push(` ${b} dropped since last week.`)}),C.jsxs("div",{className:"home-container",children:[C.jsx("p",{className:"TitleName",children:"Suggestions"}),o&&C.jsx("div",{className:"CalBarCharSection text-white fw-bold small mb-2 bg-dark",children:" You're behind your weight goal progress. Try adjusting your intake!"}),C.jsxs("div",{className:"CalBarCharSection bg-dark mb-2",children:[C.jsx("p",{className:"SubTitleName mb-2",children:"Weekly Calorie Trend"}),C.jsx(eP,{meals:n,startOfWeek:h})]}),C.jsxs("div",{className:"NutritionProgressSection mb-2 bg-dark list-group",style:{padding:"5%"},children:[C.jsx("p",{className:"SubTitleName",children:"This Week's Nutrient Averages"}),Object.keys(f).map(b=>{const w=e[b]||0,x=f[b],A=(e[b]||0)-(s[b]||0),M=Math.min(w/x*100,150),N=w>x,L=A>1?"":A<-1?"":"",H=A?`${L} ${Math.abs(A).toFixed(1)}g from last week`:"";return C.jsxs("div",{className:"mb-3",children:[C.jsxs("div",{className:"d-flex justify-content-between small",children:[C.jsx("span",{className:"text-white",children:b}),C.jsxs("span",{className:"text-white",children:[w.toFixed(1)," / ",x,"g"]})]}),C.jsx("div",{className:"progress",style:{height:"8px"},children:C.jsx("div",{className:`progress-bar ${N?"bg-danger":"bg-success"} progress-bar-striped progress-bar-animated`,style:{width:`${M}%`}})}),C.jsx("div",{className:"small text-white",children:H})]},b)})]}),C.jsx("div",{className:"SuggestionsBox",children:_.length>0?C.jsxs("ul",{className:"list-group bg-dark",style:{padding:"5%"},children:[C.jsx("p",{className:"SubTitleName",children:"Suggestions"}),_.map((b,w)=>C.jsx("li",{className:"list-group-item small bg-dark text-white border-0 ps-0",children:b},w))]}):C.jsx("p",{className:"text-success",children:" You're on track this week!"})})]})}function RJ(){const[n,t]=ot.useState(null),[e,i]=ot.useState([]),[s,r]=ot.useState("dashboard"),[o,c]=ot.useState(!1),[h,f]=ot.useState(null),[m,y]=ot.useState(!1),[_,b]=ot.useState(null),[w,x]=ot.useState(""),[A,M]=ot.useState(!1),[N,L]=ot.useState(!0),H=ot.useRef(!1);ot.useEffect(()=>{const R=async()=>{const V=await NC();if(V){t(V);const j=await Ab(V.uid);i(j)}};H.current?L(!1):setTimeout(()=>{L(!1),H.current=!0},1500),R()},[]),ot.useEffect(()=>{!("Notification"in window)||!n||Notification.requestPermission().then(R=>{if(R!=="granted")return;const V=setInterval(()=>{const U=new Date().toTimeString().substring(0,5),{breakfastTime:B,lunchTime:At,dinnerTime:St}=n,Q={[B]:" Time for breakfast! Log your meal!",[At]:" Time for lunch! Dont forget to log it!",[St]:" Time for dinner! Keep tracking!"};Q[U]&&new Notification("KnowUrFood Reminder",{body:Q[U],icon:"/vite.svg"})},6e4);return()=>clearInterval(V)})},[n]);const F=async R=>{t(R);const V=await Ab(R.uid);i(V)},K=async R=>{if(!n)return;const V={...R,userId:n.uid};if(h){await nX({...V,id:h.id},n.uid);const j=e.map(U=>U.id===h.id?{...V,id:h.id}:U);i(j),f(null)}else{await eX(V,n.uid),x("+10 XP! "),M(!0),setTimeout(()=>M(!1),3e3);const j=await Ab(n.uid),U=await NC();i(j),t(U)}c(!1)},O=async R=>{await iX(R,n.uid);const V=e.filter(j=>j.id!==R);i(V)},I=async()=>{await cX(),t(null),i([])};return n?N?C.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:C.jsx("img",{src:JV,alt:"Logo",style:{width:"150px",height:"150px"}})}):C.jsxs(C.Fragment,{children:[s==="dashboard"&&C.jsx(ZZ,{user:n,meals:e,onEditMeal:R=>{f(R),c(!0)},onDeleteMeal:R=>{b(R),y(!0)}}),s==="history"&&C.jsx(JZ,{user:n,meals:e,onEditMeal:R=>{f(R),c(!0)},onDeleteMeal:R=>{b(R),y(!0)}}),s==="suggestions"&&C.jsx(IJ,{meals:e,user:n}),s==="profile"&&C.jsx(AJ,{user:n,meals:e,onLogout:I,clearAllMeals:async()=>{await sX(n.uid),i([])}}),C.jsx(V4,{onAddClick:()=>c(!0),onLogout:I,onTabChange:R=>r(R),currentTab:s}),C.jsx(SJ,{isOpen:o,onClose:()=>{c(!1),f(null)},onSave:K,user:n,editMeal:h}),m&&C.jsx("div",{className:"modal-backdrop",children:C.jsxs("div",{className:"modal-container p-4 text-center",children:[C.jsx("p",{className:"text-white fw-bold",children:"Are you sure you want to delete this meal?"}),C.jsxs("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[C.jsx("button",{className:"btn btn-secondary",onClick:()=>y(!1),children:"Cancel"}),C.jsx("button",{className:"btn btn-danger",onClick:async()=>{_!==null&&(await O(_),y(!1),b(null))},children:"Delete"})]})]})}),A&&C.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",style:{zIndex:9999},children:C.jsx("div",{className:"toast show bg-success text-white",children:C.jsx("div",{className:"toast-body fw-bold",children:w})})})]}):C.jsx(xJ,{onLoginSuccess:F})}N4.createRoot(document.getElementById("root")).render(C.jsx(ot.StrictMode,{children:C.jsx(RJ,{})}));serviceWorkerRegistration.register();
